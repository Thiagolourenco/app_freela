webpackJsonp([1],{1048:function(t,e,n){t.exports={"modal-addOrEditDashboard":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,3612)),"modal-addOrEditDashboardPanel":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,3613)),"modal-dashboardWalkover":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,3680)),"modal-newDashboardMigration":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,3759)),"page-home-sidebar":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,3836)),"page-home":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,3837)),"section-activity-list":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,3860)),"section-comments-list":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,3879)),"section-dashboard-metrics":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,3894)),"section-dashboards-filter":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,3902)),"section-event-details-header":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,3905)),"section-event-details":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,3906)),"section-events-filter":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,3907)),"section-events-list-new":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,3908)),"section-help-doc":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,3939)),"section-help-doc-header":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,3938)),"section-home-activity":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,3940)),"section-home-comments":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,3941)),"section-home-dashboards":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,3942)),"section-home-events":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,3943)),"section-home-messages":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,3944)),"section-home-projects":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,3945)),"section-home-shortcuts":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,3946)),"section-home-today":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,3947)),"section-messages-list":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,3953)),"section-projects-list-new":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4046)),"section-quick-view-events-header-buttons":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4055)),"section-quick-view-risks":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4064)),"section-quick-view-today-settings":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4070)),"section-summary-filter-icons":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4113)),"ui-blank-card":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4150)),"ui-breadcrumb":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4151)),"ui-label":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4165)),"ui-metric-chart-donut":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4167)),"ui-metric-chart-horizontal-bar":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4168)),"ui-metric-chart-vertical-bar":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4169)),"ui-metric-range":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4170)),"ui-metric":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4171)),"ui-project-header":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4176)),"ui-text-area":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4180)),"ui-unread-status":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4181)),"widget-activity":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4182)),"widget-attachment":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4185)),"widget-attachments-list":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4186)),"widget-comment":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4202)),"widget-dashboard-message":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4211)),"widget-event":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4216)),"widget-message":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4255)),"widget-metric-activity-distribution":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4256)),"widget-metric-billable-time":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4257)),"widget-metric-billed-time":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4258)),"widget-metric-events-list":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4260)),"widget-metric-milestones-list":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4261)),"widget-metric-milestones":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4262)),"widget-metric-projects-digest":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4265)),"widget-metric-project-health":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4263)),"widget-metric-project-updates-list":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4264)),"widget-metric-projects-distribution":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4266)),"widget-metric-risks-list":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4267)),"widget-metric-risks":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4268)),"widget-metric-tasks-breakdown":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4269)),"widget-metric-tasks-burndown-settings":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4270)),"widget-metric-tasks-burndown":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4271)),"widget-metric-tasks":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4272)),"widget-payment-reminder-new":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4284)),"widget-project":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4300)),"widget-project-metrics":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4293)),"widget-quick-jump-projects":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4305)),"widget-related-users":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4312)),"widget-shortcut":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4323)),"widget-tabs-list":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4328)),"widget-user-metrics":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4410)),"widget-timeline":Promise.all([n.e(0),n.e(1)]).then(n.bind(null,4364))}},1278:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}},o=function(t,e){function n(){this.constructor=t}for(var s in e)r.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;s=[n(164),n(1134)],void 0!==(i=function(t,e){return function(e){function n(e){this.GetAllData=a(this.GetAllData,this),this.SyncIds=a(this.SyncIds,this);var s;n.__super__.constructor.call(this,e),this.empty=null!=(s=e.empty)&&s,console.assert("boolean"==typeof t.unwrap(this.empty)),this.mapViewIdItems={},this.selectedHealth=e.selectedHealth,console.assert(null==this.selectedHealth||t.isObservable(this.selectedHealth)&&Array.isArray(this.selectedHealth())),this.SyncIds(this.selectedHealth,this.selectedItems)}return o(n,e),n.HEALTH={GREEN:3,AMBER:2,RED:1,NONE:0},n.prototype.order=app.consts.AUTO_COMPLETE_ORDER.PROJECT_HEALTH,n.prototype.excludeSelected=!0,n.prototype.SyncIds=function(e,n){this.ManageView(e,n,{map:function(t){return t.id},mapViewItem:function(e){return function(n){var s;return n in e.mapViewIdItems&&!t.isObservable(e.mapViewIdItems[n])?e.mapViewIdItems[n]:e.mapViewIdItems[n]=null!=(s=e.GetAllData().filter(function(t){return t.id===n})[0])?s:null}}(this)})},n.prototype.GetAllData=function(){return[this.NormalizeDataItem({id:n.HEALTH.GREEN,label:app.account.preferences.projectHealthGreenLabel(),value:app.account.preferences.projectHealthGreenLabel().trim().toLowerCase(),suggestionTemplate:"<i class='fa fa-circle mr--small' style='color: "+app.consts.UICOLORS.healthgreen+"'></i> <span>{{label}}</span>"}),this.NormalizeDataItem({id:n.HEALTH.AMBER,label:app.account.preferences.projectHealthAmberLabel(),value:app.account.preferences.projectHealthAmberLabel().trim().toLowerCase(),suggestionTemplate:"<i class='fa fa-circle mr--small' style='color: "+app.consts.UICOLORS.healthamber+"'></i> <span>{{label}}</span>"}),this.NormalizeDataItem({id:n.HEALTH.RED,label:app.account.preferences.projectHealthRedLabel(),value:app.account.preferences.projectHealthRedLabel().trim().toLowerCase(),suggestionTemplate:"<i class='fa fa-circle mr--small' style='color: "+app.consts.UICOLORS.healthred+"'></i> <span>{{label}}</span>"}),this.NormalizeDataItem({id:n.HEALTH.NONE,label:app.tl("Not set"),value:app.tl("Not set"),suggestionTemplate:"<i class='fa fa-circle mr--small' style='color: "+app.consts.UICOLORS.healthnone+"'></i> <span>{{label}}</span>"})]},n}(e)}.apply(e,s))&&(t.exports=i)},1283:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[],void 0!==(i=function(){return function(){function t(t){this.toJSON=a(this.toJSON,this),this.SetupComputedsAndSubscribers=a(this.SetupComputedsAndSubscribers,this),this.UpdateData=a(this.UpdateData,this),this.subscriptions=[],this.componentName="Range",null==t&&(t=this.GetNewJSON()),this.UpdateData(t)}return t.prototype.UpdateProperties=function(t){"null"===t.from&&delete t.from,null==t.from&&(t.from=null),"null"===t.to&&delete t.to,null==t.to&&(t.to=null)},t.prototype.UpdateData=function(e){this.UpdateProperties(e),ko.mapping.fromJS(e,t.mapping,this),this.SetupComputedsAndSubscribers()},t.prototype.SetupComputedsAndSubscribers=function(){this.colorHash||this.subscriptions.push(this.colorHash=ko.pureComputed(function(t){return function(){return t.color()?"#"+t.color():""}}(this))),this.label||this.subscriptions.push(this.label=ko.pureComputed(function(t){return function(){return"greater-than"===t.type()?">"+(t.from()-1)+"%":"less-than"===t.type()?"<"+(t.to()+1)+"%":"from-to"===t.type()?t.from()+"-"+t.to()+"%":void 0}}(this))),this.type||(this.subscriptions.push(this.to.subscribe(function(t){return function(e){return t._toOld=e}}(this),null,"beforeChange")),this.subscriptions.push(this.from.subscribe(function(t){return function(e){return t._fromOld=e}}(this),null,"beforeChange")),this.subscriptions.push(this.type=ko.pureComputed({read:function(t){return function(){return null==t.to()?"greater-than":null==t.from()?"less-than":"from-to"}}(this),write:function(t){return function(e){var n,s;if("greater-than"===e?null!=t.to()&&t.to(null):null==t.to()&&t.to(null!=(n=t._toOld)?n:t.from()),"less-than"===e){if(null!=t.from())return t.from(null)}else if(null==t.from())return t.from(null!=(s=t._fromOld)?s:0)}}(this)})))},t.prototype.toJSON=function(){return ko.mapping.toJS(this)},t.prototype.Clone=function(){return new t(this.toJSON())},t.prototype.GetNewJSON=function(){return{from:0,to:100,color:"000"}},t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},t.types=[{id:"from-to",text:app.tl("From/To")},{id:"greater-than",text:app.tl("Greater than")},{id:"less-than",text:app.tl("Less than")}],t.colors=[],t.mapping={color:{create:function(t){var e,n;return e=ko.unwrap(t.data),ko.observable(null!=(n="#"===(null!=e?e[0]:void 0)?e.substr(1):e)?n:null)},update:function(t){var e;return e=ko.unwrap(t.data),"#"===(null!=e?e[0]:void 0)?e.substr(1):null!=e?e:null}}},t}()}.apply(e,s))&&(t.exports=i)},1284:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(14)],void 0!==(i=function(t){return function(){function e(t,e,n){this.Delete=a(this.Delete,this),this.Edit=a(this.Edit,this),ko.mapping.fromJS(t,this.mapping,this),this.createdByUserFirstName=ko.pureComputed(function(e){return function(){var e;return e=n.included.users[t.createdByUserId],null==e?"":e.firstName}}()),this.createdByUserLastName=ko.pureComputed(function(e){return function(){var e;return e=n.included.users[t.createdByUserId],null==e?"":e.lastName}}()),this.lastChangedByUserFirstName=ko.pureComputed(function(e){return function(){var e;return e=n.included.users[t.lastChangedByUserId],null==e?"":e.firstName}}()),this.lastChangedByUserLastName=ko.pureComputed(function(e){return function(){var e;return e=n.included.users[t.lastChangedByUserId],null==e?"":e.lastName}}()),this.project=ko.pureComputed(function(e){return function(){return n.included.projects[t.projectId]}}()),this.projectName=ko.pureComputed(function(t){return function(){var e;return e=t.project(),null==e?"":e.name}}(this)),this.projectIsActive=ko.pureComputed(function(t){return function(){var e;return e=t.project(),null==e?"":"active"===e.status}}(this)),this.company=ko.pureComputed(function(t){return function(){return n.included.companies[t.project().companyId]}}(this)),this.companyId=ko.pureComputed(function(t){return function(){var e;return e=t.company(),null==e?"":e.id}}(this)),this.companyName=ko.pureComputed(function(t){return function(){var e;return e=t.company(),null==e?"":e.name}}(this)),this.id=parseInt(t.id,10),this.shortName=ko.pureComputed(function(t){return function(){return t.createdByUserFirstName()+" "+t.createdByUserLastName()[0]+"."}}(this)),this.createdByName=ko.pureComputed(function(t){return function(){return t.createdByUserFirstName()+" "+t.createdByUserLastName()}}(this)),this.updatedByName=ko.pureComputed(function(t){return function(){return t.lastChangedByUserFirstName()+" "+t.lastChangedByUserLastName()}}(this)),this.resultScore=ko.pureComputed(function(t){return function(){return t.result()<=33?"low":t.result()<=66?"medium":t.result()<=100?"high":void 0}}(this)),this.statusText=ko.pureComputed(function(t){return function(){switch(t.status()){case"new":return app.tl("Open");case"pending":return app.tl("Pending");default:return app.tl("Closed")}}}(this))}return e.prototype.mapping={createdOn:{create:function(e){return ko.observable(t(e.data,"YYYY-MM-DDTHH:mm:ssZ"))}},lastChangedOn:{create:function(e){return ko.observable(t(e.data,"YYYY-MM-DDTHH:mm:ssZ"))}},probability:{create:function(t){return ko.observable(t.data.toLowerCase())}},impact:{create:function(t){return ko.observable(t.data.toLowerCase())}}},e.prototype.Edit=function(){app.modal.Show("addOrEditRiskEntry",{riskEntry:this})},e.prototype.Delete=function(){var t,e;e=app.tl("Confirm Delete"),t=app.tl("Are you sure you want to delete this risk entry?"),app.modal.Show("confirm",{title:e,text:t,callback:function(t){return function(e){if(!e.wasCancelled)return app.api.delete("risks/"+t.id+".json").then(function(){return app.flash.Success(app.tl("Risk entry deleted successfully")),ko.postbox.publish("risk-entry-"+app.consts.ACTIONTYPE.DELETED,{eventTime:new Date,itemType:"risk-entry",actionType:app.consts.ACTIONTYPE.DELETED,itemId:t.id})})}}(this)})},e}()}.apply(e,s))&&(t.exports=i)},1369:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}},o={}.hasOwnProperty;s=[n(14)],void 0!==(i=function(t){var e;return e=function(){function t(e){var n,s,i,r,l;if(null==e&&(e={}),this.React=a(this.React,this),this.ToggleLike=a(this.ToggleLike,this),this.Delete=a(this.Delete,this),this.Edit=a(this.Edit,this),null==e.numLikes&&(e.numLikes=0),null==e.likedByUsers&&(e.likedByUsers=[]),null==e.likedByMe&&(e.likedByMe=!1),null==e.keepIconsActive&&(e.keepIconsActive=!0),e.numLikes=e.numLikes/1,null==e.isDeleted&&(e.isDeleted=!1),null==e.shouldHighlight&&(e.shouldHighlight=!1),e.numLikes>0){e.likedByUsers=[],r=ko.utils.parseJson(e.likedByUsersJSON);for(n in r)void 0!==r[n]&&null!==r[n]&&(e.likedByUsers.push({id:n,name:r[n]}),n===app.loggedInUser.id().toString()&&(e.likedByMe=!0))}null==e.reactions&&(e.reactions={}),null==e.reactions.counts&&(e.reactions.counts={joy:0,dislike:0,heart:0,like:0,frown:0}),null==e.reactions.mine&&(e.reactions.mine=[]),i=e.reactions.counts;for(s in i)o.call(i,s)&&(l=i[s],e.reactions.counts[s]=l/1);this.hasReactions=ko.pureComputed(function(t){return function(){var e,n;return null!=(null!=(n=t.reactions)?n.counts:void 0)&&(e=t.reactions.counts,e.heart()+e.joy()+e.frown()+e.like()+e.dislike()>0)}}(this)),app.ko.mapping.fromJS(e,t.mapping,this)}return t.prototype.Edit=function(){app.modal.Show("addOrEditProjectUpdate",{update:this,projectId:this.projectId})},t.prototype.Delete=function(){return app.api.delete("projects/updates/"+this.id()+".json").then(function(t){return function(e){var n,s,i,a;return Tipped.hideAll(),n=null!=(i=e.response.linkedCardId)?i:0,s=null!=(a=e.response.linkedColumnId)?a:0,app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"project",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:ko.unwrap(t.projectId),extraInfo:{data:{projectUpdateId:t.id(),cardId:n,columnId:s}}})}}(this))},t.prototype.ToggleLike=function(){return this.likedByMe()?app.reactions.Unlike("projectUpdate",this.id(),this):app.reactions.Like("projectUpdate",this.id(),this)},t.prototype.React=function(t){null==t&&(t="like")},t}(),e.mapping={dateCreated:{create:function(e){return ko.observable(t(e.data))}}},e}.apply(e,s))&&(t.exports=i)},1707:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}},o=function(t,e){function n(){this.constructor=t}for(var s in e)r.call(e,s)&&(t[s]=e[s]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;s=[n(164),n(1134),n(1724),n(1725)],void 0!==(i=function(t,e,n,s){return function(e){function i(e){this.SyncIds=a(this.SyncIds,this),this.GetAllData=a(this.GetAllData,this),this.GetQueryTokens=a(this.GetQueryTokens,this),this.GetQueryBeforeCaret=a(this.GetQueryBeforeCaret,this);var n;i.__super__.constructor.call(this,e),this.empty=null!=(n=e.empty)&&n,console.assert("boolean"==typeof t.unwrap(this.empty)),this.mapViewIdItems={},this.selectedEventTypeIds=e.selectedEventTypeIds,console.assert(null==this.selectedEventTypeIds||t.isObservable(this.selectedEventTypeIds)&&Array.isArray(this.selectedEventTypeIds())),this.subscriptions.push(this.eventTypeParams=t.pureComputed(function(t){return function(){var e;return e=t.queryTokens(),null==e?{empty:!0}:{searchTerm:t.fullQuery()}}}(this))),this.subscriptions.push(this.eventTypes=s.getEventTypes(this.eventTypeParams)),this.subscriptions.push(this.eventTypes.subscribe(function(t){return function(e){return t.dataLoader(e.dataLoader)}}(this))),this.SyncIds(this.selectedEventTypeIds,this.selectedItems)}return o(i,e),i.prototype.excludeSelected=!0,i.prototype.GetQueryBeforeCaret=function(){var t,e;return null!=(t=null!=(e=/(?:^|\s)(\([^(\n\r]{0,15})$/.exec(this.fullQueryBeforeCaret()))?e[1]:void 0)?t:null},i.prototype.GetQueryAfterCaret=function(){return""},i.prototype.GetQueryTokens=function(){var t;return t=this.query(),null==t?null:t.slice(1).trim().toLowerCase().split(/\s+/)},i.prototype.GetAllData=function(){return this.NormalizeData(this.eventTypes().map(this.EventTypeToItem))},i.prototype.SyncIds=function(e,s){this.ManageView(e,s,{map:function(t){return t.id},mapViewItem:function(e){return function(s){var i,a,o;return s in e.mapViewIdItems&&!t.isObservable(e.mapViewIdItems[s])?e.mapViewIdItems[s]:(o=null!=(i=e.mapViewIdItems)[s]?i[s]:i[s]=n.getEventType(s),a=o(),a.ready?(o.dispose(),e.mapViewIdItems[s]=null!=a.error?null:e.NormalizeDataItem(e.EventTypeToItem(a))):void 0)}}(this)})},i.prototype.EventTypeToItem=function(t){return{id:t.id,label:t.name,color:"#"+t.color,value:t.name.trim().toLowerCase(),suggestionTemplate:'<span class="w-auto-complete__item-circle"\n    data-bind="\n        style: {\n            \'background-color\': color\n        }">\n</span>\n<span class="w-auto-complete__item-title">\n    {{label}}\n</span>',name:t.name}},i}(e)}.apply(e,s))&&(t.exports=i)},1724:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(164)],void 0!==(i=function(t){var e;return e=function(){function e(t,e){this.loadEventType=a(this.loadEventType,this),this.eventType=t,console.assert("number"==typeof e),this.id=e,this.id>0?(this.init(),this.loadEventType()):this.error(new Error("Invalid ID: "+e))}return e.normalizeParams=function(e){return[parseInt(t.unwrap(e,10))||0]},e.prototype.loadEventType=function(){var t,e,n,s;if(t=null!=(e=null!=(n=app.currentFilter())&&null!=(s=n.fulldata)?s.eventTypes:void 0)?e:{},null!=t[this.id])return this.ready(t[this.id]);app.api.get("eventtypes/"+this.id+".json",{},{emitError:!1}).then(function(t){return function(e){t.ready(e.response.eventType)}}(this)).catch(function(t){return function(e){t.error(new Error("Failed to load an event type"),e)}}(this))},e.prototype.init=function(){this.eventType({ready:!1,error:null})},e.prototype.error=function(t,e){e&&(t.cause=e),this.eventType({ready:!0,error:t})},e.prototype.ready=function(t){t.ready=!0,t.error=null,this.eventType(t)},e.getEventType=app.shared.getResource.bind(app.shared,"eventType"),e}(),app.shared.registerResourceProvider("eventType",e),e}.apply(e,s))&&(t.exports=i)},1725:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(164),n(1116)],void 0!==(i=function(t,e){var n;return n=function(){function n(t,n,s){this.init=a(this.init,this);var i,o;if(console.assert("boolean"==(i=typeof n)||"undefined"===i),console.assert("string"==(o=typeof s)||"undefined"===o),this.subscriptions=[],this.eventTypes=t,this.subscriptions.push(this.dataLoader=new e("eventtypes.json",{loadNow:!n,pageSize:50,params:{searchTerm:s},onLoad:function(t){return function(e){t.ready(t.dataLoader.list().slice())}}(this)})),n)return this.empty();this.init()}return n.normalizeParams=function(e){var n,s,i;return null==(e=t.unwrap(e))?[]:t.unwrap(null!=e?e.empty:void 0)?[n=!0]:(n=!1,i=null!=(s=t.unwrap(e.searchTerm))?s:void 0,[n,i])},n.prototype.empty=function(){var t;t=[],t.dataLoader=this.dataLoader,t.ready=!0,this.eventTypes(t)},n.prototype.init=function(){var t;t=[],t.dataLoader=this.dataLoader,t.ready=!1,this.eventTypes(t)},n.prototype.ready=function(t){t.dataLoader=this.dataLoader,t.ready=!0,this.eventTypes(t)},n.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},n.getEventTypes=app.shared.getResource.bind(app.shared,"eventTypes"),n}(),app.shared.registerResourceProvider("eventTypes",n),n}.apply(e,s))&&(t.exports=i)},1928:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}},o={}.hasOwnProperty,r=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};s=[n(164),n(14),n(1117),n(1126),n(1153),n(1283)],void 0!==(i=function(t,e,n,s,i,l){var c,p,d,u,h,m,f,g,x,y,b,k;return y={update:function(t){return function(t){return t.parent instanceof p?parseInt(t.data,10)||0:t.data}}()},b={id:y,projectId:y,userId:y,displayOrder:y,settings:{update:function(e){return t.mapping.fromJS(e.data,{})}},copy:"fulldata",ignore:["panels"]},k={"tasks-bar":{title:app.tl("Task Counts"),icon:"horizontal-bar-metric",info:app.tl("This panel shows a date-based distribution of tasks"),displayOptionsTemplate:"generic"},"milestones-bar":{title:app.tl("Milestone Counts"),icon:"horizontal-bar-metric",info:app.tl("This panel shows a date-based distribution of milestones"),displayOptionsTemplate:"generic"},"billed-time-donut":{title:app.tl("Billed vs. Unbilled Time"),icon:"pie-metric",info:app.tl("This panel allows you to compare billed and unbilled time across multiple projects"),displayOptionsTemplate:"generic"},"projects-digest":{title:app.tl("Latest Activity Digest"),icon:"large-list-metric",info:app.tl("This panel shows a summary of activity across multiple projects"),displayOptionsTemplate:"generic"},"billable-time-donut":{title:app.tl("Billable vs. Non-Billable Time"),icon:"pie-metric",info:app.tl("This panel allows you to compare billable and non-billable time across multiple projects"),displayOptionsTemplate:"generic"},"milestones-list":{title:app.tl("Upcoming Milestones"),icon:"large-list-metric",info:app.tl("This panel shows a list of the next upcoming milestones"),displayOptionsTemplate:"generic"},"events-list":{title:app.tl("Upcoming Events"),icon:"list-metric",info:app.tl("This panel shows a list of the next upcoming events"),displayOptionsTemplate:"generic"},"project-updates-list":{title:app.tl("Project Updates"),icon:"list-metric",info:app.tl("This panel shows a list of the latest project updates"),settingsTemplate:"generic",displayOptionsTemplate:"generic"},"project-health-bar":{title:app.tl("Project Health"),icon:"vertical-bar-metric",info:app.tl("This panel shows the number of projects grouped by health"),settingsTemplate:"generic",displayOptionsTemplate:"generic"},"risks-list":{title:app.tl("Top Risks"),icon:"large-list-metric",info:app.tl("This panel lists the biggest risks across your projects"),settingsTemplate:"generic",displayOptionsTemplate:"generic"},"risks-bar":{title:app.tl("Risk Counts"),icon:"vertical-bar-metric",info:app.tl("This panel compares and groups risks by their status"),settingsTemplate:"generic",displayOptionsTemplate:"generic"},"tasks-breakdown":{title:app.tl("Tasks Breakdown"),icon:"list-metric",info:app.tl("This panel shows the breakdown of tasks per user"),displayOptionsTemplate:"generic"},"projects-distribution":{title:app.tl("Projects Distribution"),icon:"vertical-bar-metric",info:app.tl("This panel shows projects filtered and grouped by selected criteria"),alwaysFullWidth:!0},"activity-distribution":{title:app.tl("Activity"),icon:"vertical-bar-metric",info:app.tl("This panel shows counts for activity grouped by selected criteria"),displayOptionsTemplate:"generic",alwaysFullWidth:!0},"tasks-burndown":{title:app.tl("Task List Burndown"),icon:"vertical-bar-metric",info:app.tl("This panel shows a burndown chart for a specific task list")}},app.featureFlip.check("projecttimebudgets")()&&(k["budgets-bar"]={title:app.tl("Project Budgets"),icon:"vertical-bar-metric",info:app.tl("This panel shows budget capacity used across projects"),settingsTemplate:"generic"}),c=function(){function n(e,n){var s,o,r,l,c,p,d,h;null==e&&(e={}),null==n&&(n={}),this.GetSettingsAsFilterParams=a(this.GetSettingsAsFilterParams,this),this._serialize=a(this._serialize,this),this._getSerializedSettings=a(this._getSerializedSettings,this),this._getRangeSetting=a(this._getRangeSetting,this),this._checkFilterOverrides=a(this._checkFilterOverrides,this),this.Save=a(this.Save,this),this.Delete=a(this.Delete,this),this.Export=a(this.Export,this),this.Edit=a(this.Edit,this),this.GetDisplayOptions=a(this.GetDisplayOptions,this),this.Duplicate=a(this.Duplicate,this),this.Clone=a(this.Clone,this),this.GetFilterSections=a(this.GetFilterSections,this),this.GetDataSources=a(this.GetDataSources,this),this.ResetSettings=a(this.ResetSettings,this),this.UpdateDefaults=a(this.UpdateDefaults,this),this.ToggleEditMode=a(this.ToggleEditMode,this),this.subscriptions=[],null==e.id&&(e.id=Date.now()),null==e.displayOrder&&(e.displayOrder=0),null==e.name&&(e.name=""),null==e.type&&(e.type=""),null==e.settings&&(e.settings={}),null==e.isTemporary&&(e.isTemporary=!1),null==e.isDeleted&&(e.isDeleted=!1),e.defaultSettings=x(e.type,"default",!0),null==e.dashboardSettings&&(e.dashboardSettings={}),null==e.isEditing&&(e.isEditing=!1),null==(s=e.settings).fullwidth&&(s.fullwidth=!1),null==(o=e.settings).useDashboardFilters&&(o.useDashboardFilters=!0),this.parent=n,n._getSerializedSettings&&(e.dashboardSettings=n._getSerializedSettings()),p=Object.assign({},e.defaultSettings),e.dashboardSettings=Object.assign(p,e.dashboardSettings),e.settings=Object.assign(e.dashboardSettings,e.settings),e.settings=u(e.settings,e.type),e.meta=Object.assign({},null!=(h=k[e.type])?h:{}),null==(r=e.meta).settingsTemplate&&(r.settingsTemplate=e.type),null==(l=e.meta).displayOptionsTemplate&&(l.displayOptionsTemplate=e.type),null==(c=e.meta).alwaysFullWidth&&(c.alwaysFullWidth=!1),""!==e.name.trim()||e.isTemporary||(e.name=e.meta.title),t.mapping.fromJS(e,{},this),this.meta.chartId="metric-panel__"+this.id(),d=g(e.type),d.length&&(this.range={options:d,selected:this._getRangeSetting(d)},t.isObservable(this.range.selected)&&!this.range.selected._isSubscribed&&(this.range.selected._isSubscribed=!0,null!=this.dashboardId&&this.subscriptions.push(this.range.selected.subscribe(this.Save)))),this.subscriptions.push(this.settings.useDashboardFilters.subscribe(function(e){return function(s){var i,a;return i=n._getSerializedSettings(),a=Object.keys(i),e.UpdateDefaults(i),e.ResetSettings(a),t.postbox.publish("dashboard-panel-filters-updated",{})}}(this))),this.subscriptions.push(this.hasFilterOverrides=t.pureComputed(this._checkFilterOverrides)),this.fulldata=e.fulldata,this.subscriptions.push(this.canExport=t.pureComputed(function(t){return function(){return!1}}())),this.subscriptions.push(this.categories=i.noSpecialCategories(i.getCategories("projects",0))),this.subscriptions.push(this.availableSubCategories=t.computed(function(t){return function(){var e,n,s,a,o,r,l,c,p,d,u,h,m,f,g;if(null==t.settings.categoryIds)return[];if(t.settings.categoryIds()===["0"])return[];for(g=[],u=t.settings.categoryIds(),o=0,l=u.length;o<l;o++)if(s=u[o],null!=(a=i.getCategory(t.categories(),s))&&(null!=(h=a.children)?h.length:void 0))for(m=a.children,r=0,c=m.length;r<c;r++)for(e=m[r],g.push(e.id),f=e.children,d=0,p=f.length;d<p;d++)n=f[d],g.push(n.id);return g}}(this)))}return n.prototype.ToggleEditMode=function(){return this.isEditing(!this.isEditing())},n.prototype.UpdateDefaults=function(t){var e,n;null==t&&(t={}),t=u(t,this.type());for(e in t)o.call(t,e)&&(n=t[e],null!=this.defaultSettings[e]&&this.defaultSettings[e](n))},n.prototype.ResetSettings=function(t){var e,n,s,i,a,o;for(null==t&&(t=[]),t.length||(t=Object.keys(this.settings)),n=x(this.type(),"default",!0),a=[],s=0,i=t.length;s<i;s++)o=t[s],("function"==typeof(e=this.settings)[o]?e[o]():void 0)?a.push(this.settings[o](n[o])):a.push(void 0);return a},n.prototype.GetDataSources=function(){return null!=this.dataSources?this.dataSources:m.bind(this,this.type())()},n.prototype.GetFilterSections=function(){var t;return null!=this.sections?this.sections:(t=f.bind(this,this.type(),!0),this.sections=t())},n.prototype.Clone=function(){var e;return e=t.mapping.toJS(this),new n(e,this.parent)},n.prototype.Duplicate=function(){var t;return t=this.Clone(),t.id(0),t.name(this.name()+" ("+app.tl("Copy")+")"),t.displayOrder(parseInt(this.displayOrder(),10)+1),t.Save()},n.prototype.GetDisplayOptions=function(t){var e,n,s,i,a,o,l;if(null==t&&(t=!1),e={"tasks-bar":{started:{label:app.tl("Started"),color:app.consts.UICOLORS.started,key:"started"},late:{label:app.tl("Late"),color:app.consts.UICOLORS.late,key:"late"},today:{label:app.tl("Today"),color:app.consts.UICOLORS.today,key:"today"},upcoming:{label:app.tl("Upcoming"),color:app.consts.UICOLORS.upcoming,key:"upcoming"},nodate:{label:app.tl("No Date"),color:app.consts.UICOLORS.nodate,key:"nodate"}},"milestones-bar":{today:{label:app.tl("Today"),color:app.consts.UICOLORS.today,key:"today"},late:{label:app.tl("Late"),color:app.consts.UICOLORS.late,key:"late"},upcoming:{label:app.tl("Upcoming"),color:app.consts.UICOLORS.upcoming,key:"upcoming"}},"risks-bar":{open:{label:app.tl("Open"),color:app.consts.UICOLORS.open,key:"open"},pending:{label:app.tl("Pending"),color:app.consts.UICOLORS.pending,key:"pending"},closed:{label:app.tl("Closed"),color:app.consts.UICOLORS.closed,key:"closed"}},"billed-time-donut":{nonBilledMinsSum:{label:app.tl("Not billed"),color:app.consts.UICOLORS.unbilled,key:"noninvoiced"},billedMinsSum:{label:app.tl("Billed"),color:app.consts.UICOLORS.billed,key:"invoiced"}},"billable-time-donut":{nonBillableMinsSum:{label:app.tl("Non-billable"),color:app.consts.UICOLORS.nonbillable,key:"nonbillable"},billableMinsSum:{label:app.tl("Billable"),color:app.consts.UICOLORS.billable,key:"billable"}},"project-health-bar":{0:{label:app.tl("Not set"),color:app.consts.UICOLORS.healthnone,key:"0"},1:{label:app.account.preferences.projectHealthRedLabel(),color:app.consts.UICOLORS.healthred,key:"1"},2:{label:app.account.preferences.projectHealthAmberLabel(),color:app.consts.UICOLORS.healthamber,key:"2"},3:{label:app.account.preferences.projectHealthGreenLabel(),color:app.consts.UICOLORS.healthgreen,key:"3"}},"projects-distribution":{late:{label:app.tl("Late"),color:app.consts.UICOLORS.late,key:"late"},current:{label:app.tl("Current"),color:app.consts.UICOLORS.current,key:"current"},completed:{label:app.tl("Completed"),color:app.consts.UICOLORS.completed,key:"completed"},upcoming:{label:app.tl("Upcoming"),color:app.consts.UICOLORS.upcoming,key:"upcoming"},archived:{label:app.tl("Archived"),color:app.consts.UICOLORS.archived,key:"archived"}}},n=null!=(a=e[this.type()])?a:{},l=this.settings.visibleMetrics(),0===l.filter(function(t){return"all"!==t}).length||!t)return n;s={};for(i in n)o=n[i],r.call(l,i)>=0&&(s[i]=o);return s},n.prototype.Edit=function(){return app.modal.Show("addOrEditDashboardPanel",{panel:this,onCloseCallBack:function(e){return function(n){var s,i,a,r,l;if(!n.wasCancelled){i=null!=(a=n.panel)?a:{},e.name(t.unwrap(i.name)),r=i.settings,l=[];for(s in r)o.call(r,s)&&(r[s],l.push(e.settings[s](i.settings[s]())));return l}}}(this)})},n.prototype.Export=function(){var t,e;if(app.account.isEnterprise())return e=this.meta.chartId,t=this.name(),Highcharts.charts.forEach(function(n){if(null!=n&&n.renderTo.id===e)return n.exportChart({title:{text:t},filename:t})})},n.prototype.Delete=function(){var t,e;return e=app.tl("Are you sure?"),t=app.tl("Are you sure you want to delete this panel?"),app.modal.Show("confirm",{title:e,text:t,callback:function(t){return function(e){if(!e.wasCancelled)return t.isDeleted(!0),app.api.delete("dashboards/panels/"+t.id()+".json").catch(function(e){return t.isDeleted(!1)})}}(this)})},n.prototype.Save=function(){var e,n,s;if(this.parent.userId()===app.loggedInUser.id())return e={panel:this._serialize()},s="dashboards/"+this.dashboardId()+"/panels.json",n="post",this.id()>0&&(s="dashboards/panels/"+this.id()+".json",n="put"),app.api[n](s,e).then(function(e){return function(n){var s;return s={eventTime:new Date,itemType:"dashboard",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:e.dashboardId(),extraInfo:{data:{panelId:e.id()}}},t.postbox.publish("allTWEvents",s)}}(this))},n.prototype._checkFilterOverrides=function(){var t,e;if(this.settings.useDashboardFilters())return!1;e=this.defaultSettings;for(t in e)if(o.call(e,t)&&(e[t],null!=this.settings[t]&&!app.utility.AreEqual(this.settings[t](),this.defaultSettings[t]())))return!0;return!1},n.prototype._getRangeSetting=function(e){var n,s;s=x(this.type(),"range");for(n in s)if(s[n])return this.settings[n];return t.observable(e[0].id)},n.prototype._getSerializedSettings=function(){var n,s,i,a,l,c,p,d;s=t.mapping.toJS(this.settings),a={},l=h(),n=Object.keys(x("_global")).filter(function(t){return!("fullwidth"===t||"useDashboardFilters"===t||"visibleMetrics"===t)}),p=!this.settings.useDashboardFilters(),c=function(t){return!(r.call(n,t)>=0)||p};for(i in s)if(o.call(s,i)&&(d=s[i],c(i))){switch(l[i].type){case"array[string]":case"array[number]":d=d.join(",");break;case"array[budgetRange]":d=JSON.stringify(d);break;case"moment":e.isMoment(d)&&(d=d.format("YYYYMMDD"))}a[i]=d}return a},n.prototype._serialize=function(){return this.name().length||this.name(this.meta.title()),{id:this.id(),name:this.name(),type:this.type(),displayOrder:this.displayOrder(),settings:this._getSerializedSettings()}},n.prototype.GetSettingsAsFilterParams=function(){var t,e,n,s,i,a,o,r,l,c,p,d,u;return c={},c.panelId=this.id(),null!=this.settings.companyIds&&this.settings.companyIds().length&&(c.projectCompanyIds=this.settings.companyIds().toString()),null!=this.settings.categoryIds&&this.settings.categoryIds().length&&(c.projectCategoryIds=this.settings.categoryIds().toString()),null!=this.settings.includeSubCategories&&this.settings.includeSubCategories()&&this.availableSubCategories().length>0&&(c.projectCategoryIds+=","+this.availableSubCategories().join(",")),null!=this.settings.filterTagIds&&this.settings.filterTagIds().length&&(c.projectTagIds=this.settings.filterTagIds().join(","),c.matchAllProjectTags=this.settings.matchAllTags()),null!=this.settings.projectOwnerIds&&this.settings.projectOwnerIds().length&&(c.projectOwnerIds=this.settings.projectOwnerIds().toString()),null!=this.settings.projectHealth&&""!==(p=this.settings.projectHealth().toString())&&"-1"!==p&&(c.projectHealth=this.settings.projectHealth().toString()),null!=this.settings.projectStatus&&null!=this.settings.projectStatus()&&(u=this.settings.projectStatus().split(","),u.length>1?c.projectStatuses=this.settings.projectStatus():c.projectStatus=this.settings.projectStatus()),null!=this.settings.includeArchivedProjects&&(c.includeArchivedProjects=this.settings.includeArchivedProjects()),null!=this.settings.onlyStarredProjects&&(c.onlyStarredProjects=this.settings.onlyStarredProjects()),null!=this.settings.unreadCommentsMineOnly&&(c.unreadCommentsMineOnly=this.settings.unreadCommentsMineOnly()),null!=this.settings.unreadMessagesMineOnly&&(c.unreadMessagesMineOnly=this.settings.unreadMessagesMineOnly()),"budgets-bar"===this.type()?null!=this.settings.budgetsBarRanges&&(c.ranges=JSON.stringify(this.settings.budgetsBarRanges())):"tasks-bar"===this.type()?("function"==typeof(t=this.settings).taskAssigneeType?t.taskAssigneeType():void 0)&&"all"===this.settings.taskAssigneeType()?c.taskAssigneeUserIds="0,-1":("function"==typeof(e=this.settings).taskAssigneeType?e.taskAssigneeType():void 0)&&"me"===this.settings.taskAssigneeType()?c.taskAssigneeUserIds=app.loggedInUser.id():("function"==typeof(n=this.settings).taskAssigneeUserId?n.taskAssigneeUserId():void 0)&&(0===this.settings.taskAssigneeUserId().length?c.taskAssigneeUserIds=app.loggedInUser.id():c.taskAssigneeUserIds=this.settings.taskAssigneeUserId().toString()):"milestones-bar"===this.type()?("function"==typeof(s=this.settings).milestoneAssigneeType?s.milestoneAssigneeType():void 0)&&"all"===this.settings.milestoneAssigneeType()?c.milestoneAssigneeUserIds="":("function"==typeof(i=this.settings).milestoneAssigneeType?i.milestoneAssigneeType():void 0)&&"me"===this.settings.milestoneAssigneeType()?c.milestoneAssigneeUserIds=app.loggedInUser.id():("function"==typeof(a=this.settings).milestoneAssigneeUserId?a.milestoneAssigneeUserId():void 0)&&(c.milestoneAssigneeUserIds=this.settings.milestoneAssigneeUserId().toString()):"billed-time-donut"!==(d=this.type())&&"billable-time-donut"!==d||(("function"==typeof(o=this.settings).timeLoggedByType?o.timeLoggedByType():void 0)&&"all"===this.settings.timeLoggedByType()?c.timeLoggedByUserIds="":("function"==typeof(r=this.settings).timeLoggedByType?r.timeLoggedByType():void 0)&&"me"===this.settings.timeLoggedByType()?c.timeLoggedByUserIds=app.loggedInUser.id():("function"==typeof(l=this.settings).timeLoggedByUserId?l.timeLoggedByUserId():void 0)&&(c.timeLoggedByUserIds=this.settings.timeLoggedByUserId().toString())),c},n}(),p=function(){function n(e,n){null==e&&(e={}),null==n&&(n={}),this.dispose=a(this.dispose,this),this.UseTemplate=a(this.UseTemplate,this),this.ResetPanels=a(this.ResetPanels,this),this.ResetSettings=a(this.ResetSettings,this),this.GetFilterSections=a(this.GetFilterSections,this),this.GetDataSources=a(this.GetDataSources,this),this._buildPanelDataSources=a(this._buildPanelDataSources,this),this._getSerializedPanels=a(this._getSerializedPanels,this),this._getSerializedSettings=a(this._getSerializedSettings,this),this.Delete=a(this.Delete,this),this.Share=a(this.Share,this),this.DiscardTemporaryPanels=a(this.DiscardTemporaryPanels,this),this.Save=a(this.Save,this),this.GetCopy=a(this.GetCopy,this),this.Copy=a(this.Copy,this),this.RemovePanel=a(this.RemovePanel,this),this.AddAllPanels=a(this.AddAllPanels,this),this.AddPanel=a(this.AddPanel,this),this.SaveDefault=a(this.SaveDefault,this),this.Edit=a(this.Edit,this),this.UpdateData=a(this.UpdateData,this),this.subscriptions=[],null==e.id&&(e.id=0),null==e.displayOrder&&(e.displayOrder=0),null==e.color&&(e.color=""),null==e.title&&(e.title=""),null==e.isDefault&&(e.isDefault=!1),null==e.description&&(e.description=""),null==e.panels&&(e.panels=[]),null==e.settings&&(e.settings={}),null==e.userId&&(e.userId=app.loggedInUser.id()),null==e.projectId&&(e.projectId=0),null==e.sharedWith&&(e.sharedWith={users:"",teams:"",companies:""}),this.UpdateData(e),t.mapping.fromJS(e,b,this),this.canEdit=t.pureComputed(function(t){return function(){return app.loggedInUser.id()===parseInt(t.userId(),10)}}(this)),this.isHidden=t.pureComputed(function(t){return function(){var e;return e=t.id(),r.call(app.loggedInUser.preferences.hiddenDashboardIds(),e)>=0}}(this))}return n.prototype.UpdateData=function(e){var n,s,i;return e.defaultSettings=x("_global","default"),e.settings=Object.assign(e.defaultSettings,null!=(n=e.settings)?n:{}),e.settings=u(e.settings),this.fulldata=null!=(s=e.fulldata)?s:{},t.mapping.fromJS(e,b,this),null==this.panels&&(this.panels=t.observableArray([])),i=function(t,e){return t.displayOrder-e.displayOrder},this.panels(e.panels.sort(i).map(function(t){return function(e){return new c(e,t)}}(this)))},n.prototype.Edit=function(){app.modal.Show("addOrEditDashboard",{dashboard:this,onCloseCallBack:function(e){return function(n){var s;if(!n.wasCancelled)return s={eventTime:new Date,itemType:"dashboard",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:e.id(),projectId:e.projectId()},t.postbox.publish("allTWEvents",s)}}(this)})},n.prototype.SaveDefault=function(){return app.loggedInUser.preferences.defaultDashboardId(this.id()),this.isDefault(!0),this.Save({updateDefault:!0})},n.prototype.AddPanel=function(t,e){var n,s,i,a,o,r,l;if(null==t&&(t={}),null==e&&(e=!0),null!=t.type){if(null==t.isTemporary&&(t.isTemporary=e),r=new c(t,this),o=0,this.panels().length){for(l=this.panels().sort(function(t,e){return t.displayOrder()/1-e.displayOrder()/1}),n=l[0],o=n.displayOrder()/1,s=i=0,a=l.length;i<a;s=++i)t=l[s],t.displayOrder(t.displayOrder()/1+1),l[s]=t;this.panels(l)}return r.displayOrder(o),r.GetDataSources(),this.panels.unshift(r),this.panels.valueHasMutated()}},n.prototype.AddAllPanels=function(){var t,e;e=[];for(t in k)o.call(k,t)&&(k[t],e.push(this.AddPanel({type:t})));return e},n.prototype.RemovePanel=function(t,e){if(null==e&&(e=!1),t.isDeleted(!0),this.panels(this.panels().filter(function(t){return!t.isDeleted()})),e)return t.Delete().finally(function(t){return function(){return t.panels(t.panels().filter(function(t){return!t.isDeleted()}))}}(this))},n.prototype.Copy=function(){},n.prototype.GetCopy=function(){return t.mapping.toJS(this)},n.prototype.Save=function(e){var n,s,i;return null==e&&(e={}),s="post",i="dashboards.json",null==e.updateDefault&&(e.updateDefault=!1),0!==this.id()&&(s="put",i="dashboards/"+this.id()+".json"),n={},n.dashboard={title:this.title(),color:this.color(),displayOrder:this.displayOrder(),userId:this.userId(),isDefault:this.isDefault(),projectId:this.projectId(),description:this.description(),panels:this._getSerializedPanels(),settings:this._getSerializedSettings(),sharedWith:t.toJS(this.sharedWith)},n.updateDefault=e.updateDefault,app.api[s](i,n).then(function(e){return function(n){var s;return 0===e.id()&&app.loggedInUser.preferences.defaultDashboardId(n.response.dashboard.id),s={eventTime:new Date,itemType:"dashboard",actionType:0===e.id()?app.consts.ACTIONTYPE.ADDED:app.consts.ACTIONTYPE.UPDATED,itemId:e.id()},t.postbox.publish("allTWEvents",s)}}(this))},n.prototype.DiscardTemporaryPanels=function(){this.panels(this.panels().filter(function(t){return function(t){return!t.isTemporary()}}()))},n.prototype.Share=function(){},n.prototype.Delete=function(e){var n,s;return null==e&&(e=!1),s=app.tl("Are you sure?"),n=app.tl("Are you sure you want to delete this dashboard?"),app.modal.Show("confirm",{title:s,text:n,callback:function(n){return function(s){if(!s.wasCancelled)return n.deleted(!0),app.api.delete("dashboards/"+n.id()+".json",{setNextDashboardAsDefault:e}).then(function(e){var s,i;return s={eventTime:new Date,itemType:"dashboard",actionType:app.consts.ACTIONTYPE.DELETED,itemId:n.id(),projectId:n.projectId()},i=0,null!=e.response.defaultDashboard&&(s.extraInfo={data:{newDashboard:e.response.defaultDashboard}},i=~~e.response.defaultDashboard.id),app.loggedInUser.preferences.defaultDashboardId()===n.id()&&app.loggedInUser.preferences.defaultDashboardId(i),t.postbox.publish("allTWEvents",s)}).catch(function(t){return n.deleted(!1)})}}(this)})},n.prototype._getSerializedSettings=function(){var n,s,i,a,r;n=t.mapping.toJS(this.settings),i={},a=h();for(s in n)if(o.call(n,s)&&(r=n[s],"fullwidth"!==s&&"useDashboardFilters"!==s&&"visibleMetrics"!==s)){switch(a[s].type){case"array[string]":case"array[number]":r=r.join(",");break;case"array[budgetRange]":r=JSON.stringify(r);break;case"moment":e.isMoment(r)&&(r=r.format("YYYYMMDD"))}i[s]=r}return i},n.prototype._getSerializedPanels=function(){var t,e,n,s,i;for(i=[],s=this.panels(),t=0,e=s.length;t<e;t++)n=s[t],null!=n.isDeleted&&n.isDeleted()||i.push(n._serialize());return i},n.prototype._buildPanelDataSources=function(){var t,e,n,s,i;for(s=this.panels(),i=[],t=0,e=s.length;t<e;t++)n=s[t],i.push(n.GetDataSources());return i},n.prototype.Reposition=function(e){return app.api.put("dashboards/"+this.id()+"/reposition.json",{positionAfter:e}).then(function(e){return function(n){var s;return n.response.RESET||e.displayOrder(n.response.displayOrder),s={eventTime:new Date,itemType:"dashboard",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:e.id(),projectId:e.projectId()},t.postbox.publish("allTWEvents",s)}}(this))},n.prototype.GetDataSources=function(){return null!=this.dataSources?this.dataSources:(this._buildPanelDataSources(),m.bind(this)())},n.prototype.GetFilterSections=function(){var t;return null!=this.sections?this.sections:(t=f.bind(this,"_global"),this.sections=t())},n.prototype.ResetSettings=function(t){var e,n,s,i,a,o;for(null==t&&(t=[]),n=x("_global","default"),t.length||(t=Object.keys(this.settings)),a=[],s=0,i=t.length;s<i;s++)o=t[s],("function"==typeof(e=this.settings)[o]?e[o]():void 0)?a.push(this.settings[o](n[o])):a.push(void 0);return a},n.prototype.ResetPanels=function(){return this.panels([])},n.prototype.UseTemplate=function(t){return this.ResetPanels(),this.ResetSettings(),"simple"===t?(this.AddPanel({type:"tasks-bar",name:app.tl("My Active Tasks")}),this.AddPanel({type:"milestones-list",name:app.tl("My Upcoming Milestones")}),this.AddPanel({type:"billable-time-donut",name:app.tl("My Logged Time")}),this.AddPanel({type:"events-list",name:app.tl("My Upcoming Events")}),this.settings.displayProjectList(!0),this.settings.projectListPosition("bottom")):"starred"===t?(this.AddPanel({type:"tasks-bar",name:app.tl("All Active Tasks"),settings:{taskAssigneeType:"all",taskAssigneeUserId:[]}}),this.AddPanel({type:"milestones-bar",name:app.tl("All Milestones"),settings:{milestoneAssigneeType:"all",milestoneAssigneeUserId:[]}}),this.AddPanel({type:"billed-time-donut",name:app.tl("Billed Time"),settings:{timeLoggedByType:"all",timeLoggedByUserId:[]}}),this.AddPanel({type:"billable-time-donut",name:app.tl("Logged Time"),settings:{timeLoggedByType:"all",timeLoggedByUserId:[]}}),this.AddPanel({type:"project-updates-list",name:k["project-updates-list"].title}),this.AddPanel({type:"project-health-bar",name:k["project-health-bar"].title}),this.settings.displayProjectList(!0),this.settings.projectListPosition("bottom"),this.settings.onlyStarredProjects(!0)):"everything"===t?(this.AddPanel({type:"tasks-bar",name:app.tl("All Active Tasks"),settings:{taskAssigneeType:"all",taskAssigneeUserId:[]}}),this.AddPanel({type:"milestones-bar",name:app.tl("All Milestones"),settings:{milestoneAssigneeType:"all",milestoneAssigneeUserId:[]}}),this.AddPanel({type:"milestones-list",name:app.tl("All Upcoming Milestones"),settings:{milestonesListUserType:"all",milestonesListUserId:[]}}),this.AddPanel({type:"billed-time-donut",name:app.tl("Billed Time"),settings:{timeLoggedByType:"all",timeLoggedByUserId:[]}}),this.AddPanel({type:"billable-time-donut",name:app.tl("Logged Time"),settings:{timeLoggedByType:"all",timeLoggedByUserId:[]}}),this.AddPanel({type:"events-list",name:app.tl("Upcoming Events"),settings:{eventsListUserType:"all",eventsListUserId:[]}}),this.AddPanel({type:"project-updates-list",name:k["project-updates-list"].title}),this.AddPanel({type:"project-health-bar",name:k["project-health-bar"].title}),this.AddPanel({type:"risks-list",name:k["risks-list"].title}),this.AddPanel({type:"risks-bar",name:k["risks-bar"].title}),this.settings.displayProjectList(!0),this.settings.projectListPosition("bottom")):void 0},n.prototype.dispose=function(){var t,e,n,s;for(n=this.subscriptions,t=0,e=n.length;t<e;t++)s=n[t],null!=s.dispose&&s.dispose();return this.subscriptions=[]},n}(),f=function(e,n){var s,i,a,o,r;null==e&&(e="_global"),null==n&&(n=!1),s={status:{title:app.tl("Project Status"),parameters:["projectStatus","includeArchivedProjects"]},owners:{title:app.tl("Project Owner"),parameters:["projectOwnerIds"]},health:{title:app.tl("Project Health"),parameters:["projectHealth"]},tags:{title:app.tl("Project Tags"),parameters:["filterTagIds","matchAllTags"]},company:{title:app.tl("Company"),parameters:["companyIds"]},category:{title:app.tl("Project Category"),parameters:["categoryIds","includeSubCategories"]},options:{title:app.tl("Options"),parameters:["onlyStarredProjects","displayProjectList"]}},o=[],i=x(e,"default",!0);for(a in s)r=s[a],null==r.showTitle&&(r.showTitle=!0),null==r.valid&&(r.valid=["_global"]),(r.valid.includes(e)||n&&r.valid.includes("_global"))&&function(n){return function(s,a){var r;return null==a.active&&(a.active=t.pureComputed(function(){var t,e,s,o,r;for(t=!1,r=a.parameters,e=0,s=r.length;e<s;e++)o=r[e],app.utility.AreEqual(n.settings[o](),i[o])||(t=!0);return t})),null==a.type&&(a.type=t.observable(s)),null==a.collapsed&&(r="_global"!==e&&!a.active(),a.collapsed=t.observable(r)),null==a.reset&&(a.reset=function(){return n.ResetSettings(a.parameters)}),null==a.toggleCollapsed&&(a.toggleCollapsed=function(){return a.collapsed(!a.collapsed())}),o.push(a)}}(this)(a,r);return o},m=function(t){var e,n,i;null==t&&(t="_global"),null==this.dataSources&&(this.dataSources={}),n=x(t,"dataSource",!0);for(e in n)i=n[e],Object.keys(i).length&&this.subscriptions.push(this.dataSources[i.name]=new s({showAnyone:!0,selectedUserIds:this.settings[e],itemType:""}));return this.dataSources},h=function(){return{searchTerm:{default:"",type:"string"},firstLetter:{default:"",type:"string"},filterTagIds:{default:[],type:"array[number]"},matchAllTags:{default:!0,type:"boolean"},projectStatus:{default:"active",type:"string"},includeArchivedProjects:{default:!1,type:"boolean"},projectOwnerIds:{default:[],type:"array[number]"},includeDeletedUsers:{default:!1,type:"boolean"},projectHealth:{default:[],type:"array[number]"},categoryIds:{default:[],type:"array[number]"},includeSubCategories:{default:!0,type:"boolean"},companyIds:{default:[],type:"array[number]"},onlyStarredProjects:{default:!1,type:"boolean"},displayProjectList:{default:!0,type:"boolean"},projectListPosition:{default:"bottom",type:"string"},sortBy:{default:"name",type:"string"},sortOrder:{default:"asc",type:"string"},fullwidth:{default:!1,type:"boolean"},useDashboardFilters:{default:!0,type:"boolean"},visibleMetrics:{default:["all"],type:"array[string]"},taskAssigneeType:{default:"me",type:"string",valid:["tasks-bar"]},taskListId:{default:0,type:"number",valid:["tasks-burndown"]},projectId:{default:0,type:"number",valid:["tasks-burndown"]},taskStartDate:{default:0,type:"number",valid:["tasks-burndown"]},taskEndDate:{default:0,type:"number",valid:["tasks-burndown"]},burndownEndDateBase:{default:"custom",type:"string",valid:["tasks-burndown"]},burndownBurnRateType:{default:"tasksCompleted",type:"string",valid:["tasks-burndown"]},burndownShowCompleted:{default:!0,type:"boolean",valid:["tasks-burndown"]},taskAssigneeUserId:{default:[],type:"array[number]",valid:["tasks-bar","projects-digest"],dataSource:{type:"user",name:"taskAssignee"}},milestoneAssigneeType:{default:"me",type:"string",valid:["milestones-bar"]},milestoneAssigneeUserId:{default:[],type:"array[number]",valid:["milestones-bar","projects-digest"],dataSource:{type:"user",name:"milestoneAssignee"}},milestonesListDateInterval:{default:"30",type:"string",valid:["milestones-list"],range:!0},milestonesListUserType:{default:"me",type:"string",valid:["milestones-list"]},milestonesListUserId:{default:[],type:"array[number]",valid:["milestones-list"],dataSource:{type:"user",name:"milestoneListAssignee"}},timeLoggedByType:{default:"me",type:"string",valid:["billed-time-donut","billable-time-donut"]},timeLoggedByUserId:{default:[],type:"array[number]",valid:["billed-time-donut","billable-time-donut"],dataSource:{type:"user",name:"timeLoggedBy"}},timeDateCode:{default:"thisweek",type:"string",valid:["billed-time-donut","billable-time-donut"],range:!0},projectUpdatesListDateInterval:{default:"-30",type:"string",valid:["project-updates-list"],range:!0},eventsListDateInterval:{default:"30",type:"string",valid:["events-list"],range:!0},eventsListUserType:{default:"me",type:"string",valid:["events-list"]},eventsListUserId:{default:[],type:"array[number]",valid:["events-list"],dataSource:{type:"user",name:"eventsList"}},eventsListAttendingOnly:{default:!1,type:"boolean",valid:["events-list"]},projectsGroupedBy:{default:"owner",type:"string",valid:["projects-distribution"]},projectsColumnDisplayMode:{default:"stacked",type:"string",valid:["projects-distribution"]},activityDistributionGroupedBy:{default:"user",type:"string",valid:["activity-distribution"]},activityDistributionActivityTypes:{default:["all"],type:"array[string]",valid:["activity-distribution"]},activityDistributionTimeInterval:{default:"-30",type:"string",valid:["activity-distribution"],range:!0},projectsDigestTaskAssigneeType:{default:"anyone",type:"string",valid:["projects-digest"]},projectsDigestDateCode:{default:"-30",type:"string",valid:["projects-digest"],range:!0},projectsDigestApplyTimeRangeToUnread:{default:!1,type:"boolean",valid:["projects-digest"]},projectsDigestEventsRange:{default:"7",type:"string",valid:["projects-digest"]},projectsDigestEventsAttendingOnly:{default:!1,type:"boolean",valid:["projects-digest"]},unreadCommentsMineOnly:{default:!1,type:"boolean",valid:["projects-digest"]},unreadMessagesMineOnly:{default:!1,type:"boolean",valid:["projects-digest"]},defaultBreakdownType:{default:"activeTasks",type:"string",valid:["tasks-breakdown"]},budgetsBarRanges:{default:[{from:0,to:25,color:app.consts.UICOLORS.healthgreen},{from:26,to:50,color:app.consts.UICOLORS.healthgreen},{from:51,to:75,color:app.consts.UICOLORS.healthgreen},{from:76,to:100,color:app.consts.UICOLORS.healthamber},{from:101,color:app.consts.UICOLORS.healthred}],type:"array[budgetRange]",valid:["budgets-bar"]}}},x=function(t,e,n){var s,i,a,o,r;null==t&&(t="_global"),null==e&&(e="default"),null==n&&(n=!1),s=h(),a={};for(i in s)r=s[i],null==r.valid&&(r.valid=["_global"]),null==r.dataSource&&(r.dataSource={}),null==r.range&&(r.range=!1),(r.valid.includes(t)||n&&r.valid.includes("_global"))&&(a[i]=null!=(o=r[e])?o:r);return a},u=function(t){return function(t,e){var n,s,i;null==t&&(t={}),null==e&&(e="_global"),s=x(e,"type",!0);for(n in t)i=t[n],null!=s[n]&&(i=d(i,s[n]),t[n]=i);return t}}(),d=function(t){return function(t,n){var s,i,a;if("string"===n)return String(null!=t?t:"");if("number"===n)return Number(null!=t?t:0);if("boolean"===n)return"boolean"==typeof t?t:"YES"===t||"NO"!==t&&Boolean(t);if("moment"===n)return e.isMoment(t)?t:"string"==typeof t?e(t,"YYYYMMDD"):e();if("budgetRange"===n)return t instanceof l?t:t=new l(t);if(null!=(s=/^array\[(\w+)\]$/.exec(n))){if(a=s[1],"string"==typeof t&&""!==t)switch(a){case"string":case"number":t=t.split(",");break;case"budgetRange":try{t=JSON.parse(t)}catch(t){i=t,console.error(i)}}return Array.isArray(t)?t.map(function(t){return d(t,a)}):[]}throw new Error("Unsupported type: "+n)}}(),g=function(t){return function(t){switch(t){case"billed-time-donut":case"billable-time-donut":return[{id:"today",text:app.tl("Today")},{id:"yesterday",text:app.tl("Yesterday")},{id:"thisweek",text:app.tl("This week [_s]",app.utility.GetWeekText())},{id:"lastweek",text:app.tl("Last week [_s]",app.utility.GetWeekText())},{id:"thismonth",text:app.tl("This month")},{id:"lastmonth",text:app.tl("Last month")},{id:"last3months",text:app.utility.GetLastMonthsText(3)},{id:"last6months",text:app.utility.GetLastMonthsText(6)}];case"projects-digest":return[{id:"today",text:app.tl("Today")},{id:"yesterday",text:app.tl("Since yesterday")},{id:"thisweek",text:app.tl("This week [_s]",app.utility.GetWeekText())},{id:"lastweek",text:app.tl("Since last week")},{id:"thismonth",text:app.tl("This month")},{id:"lastmonth",text:app.tl("Since last month")},{id:"last3months",text:app.tl("In the last [_s] months",3)},{id:"last6months",text:app.tl("In the last [_s] months",6)}];case"events-list":case"milestones-list":return[{id:"1095",text:app.tl("All Upcoming")},{id:"today",text:app.tl("Today")},{id:"7",text:app.tl("In the next [_s] days",7)},{id:"14",text:app.tl("In the next [_s] days",14)},{id:"30",text:app.tl("In the next [_s] days",30)},{id:"90",text:app.tl("In the next [_s] months",3)},{id:"365",text:app.tl("In the next year")}];case"project-updates-list":return[{id:"-1095",text:app.tl("All")},{id:"today",text:app.tl("Today")},{id:"-7",text:app.tl("In the previous [_s] days",7)},{id:"-14",text:app.tl("In the previous [_s] days",14)},{id:"-30",text:app.tl("In the previous [_s] days",30)},{id:"-90",text:app.tl("In the previous [_s] months",3)},{id:"-365",text:app.tl("In the previous year")}];case"activity-distribution":return[{id:"today",text:app.tl("Today")},{id:"-7",text:app.tl("In the previous [_s] days",7)},{id:"-14",text:app.tl("In the previous [_s] days",14)},{id:"-30",text:app.tl("In the previous [_s] days",30)}];default:return[]}}}(),p}.apply(e,s))&&(t.exports=i)},2326:function(t,e){t.exports='<ul class="w-colors-list">\n\t<li class="w-colors-list__color-item">\n\t\t<a href="javascript:;" data-bind="click: function(){ $component.dashboardColor(\'\') }" class="w-colors-list__color-link w-colors-list__color-link--clear tipped tipped-hide"></a>\n\t</li>\n\t\x3c!-- ko foreach: app.consts.CATEGORYCOLORS --\x3e\n\t\t<li class="w-colors-list__color-item" data-bind="click: function(){ $component.dashboardColor(\'#\'+$data) }">\n\t\t\t<a href="javascript:;" class="w-colors-list__color-link" data-bind="click: function(){ $component.dashboardColor(\'#\'+$data) }, style: {\'color\': \'#\'+$data}"></a>\n\t\t</li>\n\t\x3c!-- /ko --\x3e\n</ul>'},2327:function(t,e){t.exports='<div class="sectionFormLightbox m-dashboard" data-bind="attr:{id:holderId}">\n\n\t<div class="modal-header">\n\t\t<h2 class="modal-title">{{modalTitle}}</h2>\n\t</div>\n\n\t<form method="post" data-bind="submit: OnSubmit">\n\t\t<div class="modal-body">\n\t\t\t<div class="m-dashboard__details">\n\t\t\t\t<label class="large">\n\t\t\t\t\t{{app.tl(\'Give your dashboard a title\')}}\n\t\t\t\t</label>\n\n\t\t\t\t<div class="relative width--100 lhs" style="height:40px;">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\tclass="form-control"\n\t\t\t\t\t\tmaxlength="255"\n\t\t\t\t\t\tplaceholder="{{app.tl(\'Dashboard title\')}}"\n\t\t\t\t\t\tstyle="width: 100%; padding-right: 56px; box-sizing: border-box; height: 36px;"\n\t\t\t\t\t\tdata-bind="textInput: dashboardTitle">\n\n\t\t\t\t\t<a class="color-picker-wrapper"\n\t\t\t\t\t\thref="javascript:;"\n\t\t\t\t\t\tdata-bind="tippedDelegate"\n\t\t\t\t\t\tdata-tipped-options="skin:\'light\', showOn: \'click\', hideOn: \'click\', hideOnClickOutside: true, fadeIn: 120, showDelay: 0, fadeOut: 0, hideAfter: 0, maxWidth: 200, position: \'bottomright\'"\n\t\t\t\t\t\tdata-content="{{colorsTippedContent}}">\n\n\t\t\t\t\t\t\x3c!-- ko if: dashboardColor() == \'\' --\x3e\n\t\t\t\t\t\t\t<span class="empty"></span>\n\t\t\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\t\t\x3c!-- ko if: dashboardColor() != \'\' --\x3e\n\t\t\t\t\t\t\t<span data-bind="style:{backgroundColor: dashboardColor}"></span>\n\t\t\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\t\t<i class="fa fa-chevron-down"></i>\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\n\t\t\t\t\x3c!-- ko if: showUseTemplateOption --\x3e\n\t\t\t\t\t<a href="javascript:;"\n\t\t\t\t\t\tdata-bind="click: OnClickUseTemplate"\n\t\t\t\t\t\tclass="font-size--small pt--small">\n\t\t\t\t\t\t{{app.tl(\'Use template instead\')}}{{{app.localizationPreferences().ellipsis}}}\n\t\t\t\t\t</a>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</div>\n\n\t\t\t\x3c!-- ko if: showViewOptions --\x3e\n\t\t\t\t<p class="mt--medium">\n\t\t\t\t\t{{app.tl("Why not choose one of these quick templates or else build your own view. Don\'t worry you can make changes any time.")}}\n\t\t\t\t</p>\n\n\t\t\t\t<div class="m-dashboard__options">\n\t\t\t\t\t<div class="m-dashboard__options-choice"\n\t\t\t\t\t\tdata-bind="\n\t\t\t\t\t\t\tcss: {\n\t\t\t\t\t\t\t\t\'m-dashboard__options-choice--selected\': currentViewOption() == \'simple\'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tclick: function(){ currentViewOption(\'simple\') }\n\t\t\t\t\t\t">\n\t\t\t\t\t\t<div class="m-dashboard__options-choice-placeholder">\n\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\tname: \'user-regular\'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t{{app.tl("Personal")}}\n\t\t\t\t\t\t</h3>\n\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t{{app.tl("Show me all my active tasks, upcoming milestones, logged time and upcoming events")}}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="m-dashboard__options-choice"\n\t\t\t\t\t\tdata-bind="\n\t\t\t\t\t\t\tcss: {\n\t\t\t\t\t\t\t\t\'m-dashboard__options-choice--selected\': currentViewOption() == \'starred\'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tclick: function(){ currentViewOption(\'starred\') }\n\t\t\t\t\t\t">\n\t\t\t\t\t\t<div class="m-dashboard__options-choice-placeholder">\n\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\tname: \'star-regular\'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t{{app.tl("Starred")}}\n\t\t\t\t\t\t</h3>\n\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t{{app.tl("Show me counts for all tasks, milestones and time on my starred projects")}}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="m-dashboard__options-choice"\n\t\t\t\t\t\tdata-bind="\n\t\t\t\t\t\t\tcss: {\n\t\t\t\t\t\t\t\t\'m-dashboard__options-choice--selected\': currentViewOption() == \'everything\'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tclick: function(){ currentViewOption(\'everything\') }\n\t\t\t\t\t\t">\n\t\t\t\t\t\t<div class="m-dashboard__options-choice-placeholder">\n\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\tname: \'everything-tw-regular\'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t{{app.tl("Everything")}}\n\t\t\t\t\t\t</h3>\n\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t{{app.tl("Include all options in my dashboard. I will change things later if I want")}}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="m-dashboard__options-choice"\n\t\t\t\t\t\tdata-bind="\n\t\t\t\t\t\t\tcss: {\n\t\t\t\t\t\t\t\t\'m-dashboard__options-choice--selected\': currentViewOption() == \'custom\'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tclick: function(){ currentViewOption(\'custom\') }\n\t\t\t\t\t\t">\n\t\t\t\t\t\t<div class="m-dashboard__options-choice-placeholder">\n\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\tname: \'wrench-regular\'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t{{app.tl("Custom")}}\n\t\t\t\t\t\t</h3>\n\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t{{app.tl("Choose from our list of options and customise your own experience")}}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\x3c!-- ko ifnot: showViewOptions --\x3e\n\t\t\t\t<div class="lightBoxTabs pt--medium">\n\t\t\t\t\t\x3c!-- ko component: { name: "ui-simple-tabs", params:{ tabs: tabs } } --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t</div>\n\n\t\t\t\t<div class="m-dashboard__metrics" data-bind="visible: tabs.selCode() == \'panels\'">\n\t\t\t\t\t<p>\n\t\t\t\t\t\t{{app.tl(\'Choose what kind of information you want to see on your dashboard. You can even choose to see data for people on your team.\')}}\n\t\t\t\t\t</p>\n\n\t\t\t\t\t<div class="m-dashboard__metrics-add mb--large">\n\n\t\t\t\t\t\t<div class="m-dashboard__metrics-add-selection flex">\n\t\t\t\t\t\t\t<select data-bind="\n\t\t\t\t\t\t\t\tselect2: {\n\t\t\t\t\t\t\t\t\tdata: panelOptions,\n\t\t\t\t\t\t\t\t\tvalue: panelToAdd,\n\t\t\t\t\t\t\t\t\tplaceholder: app.tl(\'Choose panel type\')\n\t\t\t\t\t\t\t\t}"\n\t\t\t\t\t\t\t\tstyle="width: 100%;">\n\t\t\t\t\t\t\t</select>\n\n\t\t\t\t\t\t\t<button class="btn btn-success btn-sm ml--medium"\n\t\t\t\t\t\t\t\tdata-bind="\n\t\t\t\t\t\t\t\t\tclick: OnClickAddDashboardPanel,\n\t\t\t\t\t\t\t\t\tdisable: !panelToAdd()">\n\t\t\t\t\t\t\t\t<span class="mr--small">\n\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\tname: \'add-regular\'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t\t{{app.tl(\'Add panel\')}}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t\x3c!-- ko ifnot: filteredPanels().length --\x3e\n\t\t\t\t\t\t<p class="border--default color--gray-light py--medium py--xlarge radius--small text--center">\n\t\t\t\t\t\t\t{{app.tl(\'No panels selected\')}}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\x3c!-- ko foreach: filteredPanels --\x3e\n\t\t\t\t\t\t<div class="u-metric-panel-option">\n\t\t\t\t\t\t\t<div class="u-metric-panel-option__info h-show-hover--parent" data-bind="click: ToggleEditMode">\n\t\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\tname: \'section-summary-filter-icons\',\n\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\ticonId: meta.icon()\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t{{ meta.title }}\n\t\t\t\t\t\t\t\t\t\t\x3c!-- ko if: name().length --\x3e\n\t\t\t\t\t\t\t\t\t\t\t({{ name }})\n\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<i class="fa fa-info-circle tipped-hide" data-tipped="{{meta.info}}"></i>\n\t\t\t\t\t\t\t\t</label>\n\n\t\t\t\t\t\t\t\t<span class="u-metric-panel-option__delete h-show-hover--child mr--large"\n\t\t\t\t\t\t\t\t\tdata-bind="click: $component.OnClickDeletePanel">\n\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\tname: \'delete-regular\'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t{{app.tl(\'Delete\')}}\n\t\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t\t<span class="u-metric-panel-option__toggle">\n\t\t\t\t\t\t\t\t\t\x3c!-- ko if: isEditing --\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: \'chevron-up-regular\'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\t\x3c!-- ko ifnot: isEditing --\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: \'chevron-down-regular\'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\x3c!-- ko if: isEditing --\x3e\n\t\t\t\t\t\t\t\t<div class="u-metric-panel-option__settings">\n\t\t\t\t\t\t\t\t\t<div class="u-metric-panel-option__settings-name"\n\t\t\t\t\t\t\t\t\t\tdata-bind="\n\t\t\t\t\t\t\t\t\t\t\ttemplate: {\n\t\t\t\t\t\t\t\t\t\t\t\tname: \'metric-settings-name\',\n\t\t\t\t\t\t\t\t\t\t\t\tdata: $data\n\t\t\t\t\t\t\t\t\t\t\t}">\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div class="u-metric-panel-option__settings-options"\n\t\t\t\t\t\t\t\t\t\tdata-bind="\n\t\t\t\t\t\t\t\t\t\t\ttemplate: {\n\t\t\t\t\t\t\t\t\t\t\t\tname: \'metric-\' + meta.settingsTemplate() + \'-settings\',\n\t\t\t\t\t\t\t\t\t\t\t\tdata: $data\n\t\t\t\t\t\t\t\t\t\t\t}">\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\x3c!-- ko ifnot: $component.hideUseDashboardFilter()($data) --\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c!-- ko if: app.account.isEnterprise --\x3e\n\t\t\t\t\t\t\t\t\t\t\t<div class="u-metric-panel-option__settings-filters"\n\t\t\t\t\t\t\t\t\t\t\t\tdata-bind="\n\t\t\t\t\t\t\t\t\t\t\t\t\ttemplate: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: \'metric-settings-filters\',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata: $data\n\t\t\t\t\t\t\t\t\t\t\t\t\t}">\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</div>\n\n\t\t\t\t<div class="m-dashboard__filters" data-bind="visible: tabs.selCode() == \'filters\'">\n\t\t\t\t\t<div class="u-metric-panel-option mb--large">\n\t\t\t\t\t\t<div class="u-metric-panel-option__info h-show-hover--parent">\n\t\t\t\t\t\t\t<label class="mx--medium">\n\t\t\t\t\t\t\t\t{{(\'Show list of source projects for this dashboard\')}}\n\t\t\t\t\t\t\t\t<i class="fa fa-info-circle tipped-hide" data-tipped="{{(\'These projects are the source of data for the metrics chosen above.\')}}"></i>\n\t\t\t\t\t\t\t\t<input type="checkbox" data-bind="checked: displayProjectList">\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\x3c!-- ko if: displayProjectList --\x3e\n\t\t\t\t\t\t\t<div class="m-dashboard__projects-position">\n\t\t\t\t\t\t\t\t<div class="m-dashboard__projects-position-option\n\t\t\t\t\t\t\t\t\t\t\tm-dashboard__projects-position-option--bottom"\n\t\t\t\t\t\t\t\t\tdata-bind="\n\t\t\t\t\t\t\t\t\t\tcss: {\n\t\t\t\t\t\t\t\t\t\t\t\'m-dashboard__projects-position-option--active\': $component.projectListPosition() == \'bottom\'\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tclick: function(){\n\t\t\t\t\t\t\t\t\t\t\t$component.projectListPosition(\'bottom\')\n\t\t\t\t\t\t\t\t\t\t}">\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class="m-dashboard__projects-position-option\n\t\t\t\t\t\t\t\t\t\t\tm-dashboard__projects-position-option--top"\n\t\t\t\t\t\t\t\t\tdata-bind="\n\t\t\t\t\t\t\t\t\t\tcss: {\n\t\t\t\t\t\t\t\t\t\t\t\'m-dashboard__projects-position-option--active\': $component.projectListPosition() == \'top\'\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tclick: function(){\n\t\t\t\t\t\t\t\t\t\t\t$component.projectListPosition(\'top\')\n\t\t\t\t\t\t\t\t\t\t}">\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class="m-dashboard__projects-position-option\n\t\t\t\t\t\t\t\t\t\t\tm-dashboard__projects-position-option--left"\n\t\t\t\t\t\t\t\t\tdata-bind="\n\t\t\t\t\t\t\t\t\t\tcss: {\n\t\t\t\t\t\t\t\t\t\t\t\'m-dashboard__projects-position-option--active\': $component.projectListPosition() == \'left\'\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tclick: function(){\n\t\t\t\t\t\t\t\t\t\t\t$component.projectListPosition(\'left\')\n\t\t\t\t\t\t\t\t\t\t}">\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class="m-dashboard__projects-position-option\n\t\t\t\t\t\t\t\t\t\t\tm-dashboard__projects-position-option--right"\n\t\t\t\t\t\t\t\t\tdata-bind="\n\t\t\t\t\t\t\t\t\t\tcss: {\n\t\t\t\t\t\t\t\t\t\t\t\'m-dashboard__projects-position-option--active\': $component.projectListPosition() == \'right\'\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tclick: function(){\n\t\t\t\t\t\t\t\t\t\t\t$component.projectListPosition(\'right\')\n\t\t\t\t\t\t\t\t\t\t}">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<p>\n\t\t\t\t\t\t{{app.tl(\'Choose filters for your source projects.\')}}\n\t\t\t\t\t</p>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: \'section-dashboards-filter\',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tdashboard: dashboard\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="m-dashboard__description" data-bind="visible: tabs.selCode() == \'description\'">\n\t\t\t\t\t<label class="large">\n\t\t\t\t\t\t{{app.tl(\'Give this dashboard a description\')}}\n\t\t\t\t\t\t<span>({{app.tl(\'Optional\')}})</span>\n\t\t\t\t\t</label>\n\n\t\t\t\t\t<textarea id="dashboardDescription"\n\t\t\t\t\t\ttabindex="2"\n\t\t\t\t\t\tmaxlength="255"\n\t\t\t\t\t\tstyle="min-height: 90px"\n\t\t\t\t\t\tclass="font-size--default form-control"\n\t\t\t\t\t\tdata-bind="textInput: dashboardDescription">\n\t\t\t\t\t</textarea>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="m-dashboard__share" data-bind="visible: tabs.selCode() == \'share\'">\n\t\t\t\t\t<label class="large">\n\t\t\t\t\t\t{{app.tl(\'Share this dashboard with users, companies, or teams\')}}\n\t\t\t\t\t\t<span>({{app.tl(\'Optional\')}})</span>\n\t\t\t\t\t</label>\n\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname:\'widget-people-picker-new\',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tpeopleEndpoint: "people.json?dataSet=basics&type=accounts&isInAccessOfUserDashboardId="+dashboard.id(),\n\t\t\t\t\t\t\t\tprefetchEndpoint: $component.defaultsUrl,\n\t\t\t\t\t\t\t\tteamsEndpoint: "teams.json",\n\t\t\t\t\t\t\t\tprojectId: 0,\n\t\t\t\t\t\t\t\titemType: \'dashboard\',\n\t\t\t\t\t\t\t\titemId: dashboard.id(),\n\t\t\t\t\t\t\t\tpickerType: \'access\',\n\t\t\t\t\t\t\t\tformat: \'inline\',\n\t\t\t\t\t\t\t\tvalue: $component.sharedWithUsers,\n\t\t\t\t\t\t\t\tshowAllNoneOptions: true,\n\t\t\t\t\t\t\t\tshowTabs: app.featureFlip.check(\'teams\', {unwrap: true}),\n\t\t\t\t\t\t\t\tallowDynamicSelection: true,\n\t\t\t\t\t\t\t\tfetchData: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</div>\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t</div>\n\n\t\t<div class="modal-footer flex">\n\t\t\t<button type="button" class="btn btn-default" data-bind="click:Lightbox.cancel, css:{warning:canSubmit}">{{app.tl(\'Close\')}}</button>\n\t\t\t\x3c!-- ko ifnot: isEditMode --\x3e\n\t\t\t\t<button type="submit" class="ladda-button btn btn-success ml--auto mr--none" data-style="expand-right" data-bind="loader:isSubmitting, click:OnSubmit, css:{disabledSubmit:!canSubmit()}">\n\t\t\t\t\t<span>{{app.tl(\'Add Dashboard\')}}</span>\n\t\t\t\t</button>\n\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\x3c!-- ko if: isEditMode --\x3e\n\t\t\t\t<button type="submit" class="ladda-button btn btn-success ml--auto mr--none" data-style="expand-right" data-bind="loader:isSubmitting, click:OnSubmit, css:{disabledSubmit:!canSubmit()}">\n\t\t\t\t\t<span>{{app.tl(\'Update Dashboard\')}}</span>\n\t\t\t\t</button>\n\t\t\t\x3c!--/ko--\x3e\n\t\t</div>\n\n\t</form>\n\n</div>\n\n<span data-bind="template: {afterRender: OnShow}"></span>\n\n\x3c!-- Dynamic inline templates here --\x3e\n<script type="text/html" id="metric-settings-name">\n\t<label>\n\t\t{{app.tl(\'Name\')}}\n\t</label>\n\n\t<input type="text"\n\t\tmaxlength="255"\n\t\tclass="form-control border-box font-size--small"\n\t\tplaceholder="{{app.tl(\'Give this panel a name\')}}"\n\t\tdata-bind="textInput: name">\n<\/script>\n\x3c!-- End dynamic inline templates --\x3e'},2328:function(t,e){t.exports='<div class="sectionFormLightbox m-dashboard" data-bind="attr:{id:holderId}">\n\n\t<div class="modal-header">\n\t\t<h2 class="modal-title">{{modalTitle}}</h2>\n\t</div>\n\n\t<form method="post" data-bind="submit: OnSubmit">\n\n\t\t<div class="modal-body">\n\n\t\t\t<div class="m-dashboard__details">\n\t\t\t\t<label class="large">\n\t\t\t\t\t{{app.tl(\'Panel name\')}}\n\t\t\t\t</label>\n\n\t\t\t\t<input\n\t\t\t\t\ttype="text"\n\t\t\t\t\tclass="form-control"\n\t\t\t\t\tmaxlength="255"\n\t\t\t\t\tplaceholder="{{app.tl(\'Name\')}}"\n\t\t\t\t\tstyle="width: 100%; padding-right: 56px; box-sizing: border-box; height: 36px;"\n\t\t\t\t\tdata-bind="textInput: panelName">\n\t\t\t</div>\n\n\t\t\t\x3c!-- ko if: app.account.isEnterprise --\x3e\n\t\t\t\t<div class="lightBoxTabs pt--medium">\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: "ui-simple-tabs",\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\ttabs: tabs\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</div>\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t<div class="m-dashboard__filters"\n\t\t\t\tdata-bind="\n\t\t\t\t\twith: panel,\n\t\t\t\t\tvisible: tabs.selCode() == \'filters\'">\n\t\t\t\t<div class="u-metric-panel-option__settings pt--none px--none border-top--none">\n\t\t\t\t\t<div class="u-metric-panel-option__settings-options"\n\t\t\t\t\t\tdata-bind="\n\t\t\t\t\t\t\ttemplate: {\n\t\t\t\t\t\t\t\tname: \'metric-\' + meta.settingsTemplate() + \'-settings\',\n\t\t\t\t\t\t\t\tdata: $data\n\t\t\t\t\t\t\t}">\n\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- ko ifnot: $component.hideUseDashboardFilter --\x3e\n\t\t\t\t\t\t\x3c!-- ko if: app.account.isEnterprise --\x3e\n\t\t\t\t\t\t\t<div class="u-metric-panel-option__settings-filters"\n\t\t\t\t\t\t\t\tdata-bind="\n\t\t\t\t\t\t\t\t\ttemplate: {\n\t\t\t\t\t\t\t\t\t\tname: \'metric-settings-filters\',\n\t\t\t\t\t\t\t\t\t\tdata: $data\n\t\t\t\t\t\t\t\t\t}">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t\x3c!-- ko if: app.account.isEnterprise --\x3e\n\t\t\t\t<div class="m-dashboard__display" data-bind="visible: tabs.selCode() == \'display\'">\n\t\t\t\t\t<div class="m-dashboard__display-option pb--large">\n\t\t\t\t\t\t<div class="m-dashboard__display-option">\n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t{{app.tl(\'View mode\')}}\n\t\t\t\t\t\t\t</label>\n\n\t\t\t\t\t\t\t<ul class="options-list">\n\t\t\t\t\t\t\t\t\x3c!-- ko ifnot: $component.canSetMetricWidth --\x3e\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t\t\t\t<span class="mr--small ml--none flex-order--1" data-tipped="{{infoMsg}}">\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: \'info-circle-regular\'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t{{app.tl(\'This panel always displays as full width\')}}\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\x3c!-- ko if: $component.canSetMetricWidth --\x3e\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Display in grid\')}}\n\t\t\t\t\t\t\t\t\t\t\t<input type="radio" data-bind="checked: settings.fullwidth, value: false">\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Display as full width\')}}\n\t\t\t\t\t\t\t\t\t\t\t<input type="radio" data-bind="checked: settings.fullwidth, value: true">\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t\x3c!-- ko if: $component.possibleMetricValues.length --\x3e\n\t\t\t\t\t\t<div class="m-dashboard__display-option pb--large">\n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t{{app.tl(\'Which values should be displayed\')}}\n\t\t\t\t\t\t\t\t\x3c!-- ko ifnot: areAllDisplayOptionsEnabled --\x3e\n\t\t\t\t\t\t\t\t\t<span class="tipped-hide" data-tipped="{{infoMsg}}">\n\t\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: \'info-circle-regular\'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<ul class="options-list">\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t\t\t{{app.tl(\'All values\')}}\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" data-bind="checked: $component.settings.visibleMetrics, value: \'all\', disable: allMetricOptionsVisible, click: $component.OnClickAllMetricOption">\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\x3c!-- ko foreach: $component.possibleMetricValues --\x3e\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t<label data-bind="css: { \'disabled\': !isEnabled() }">\n\t\t\t\t\t\t\t\t\t\t\t{{label}}\n\t\t\t\t\t\t\t\t\t\t\t<input type="checkbox" data-bind="checked: isSelected, value: key, enable: isEnabled, click: $component.OnClickMetricOption">\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t<div class="m-dashboard__display-option pb--large"\n\t\t\t\t\t\tdata-bind="\n\t\t\t\t\t\t\ttemplate: {\n\t\t\t\t\t\t\t\tname: \'metric-\' + panel.meta.displayOptionsTemplate() + \'-display\',\n\t\t\t\t\t\t\t\tdata: $data\n\t\t\t\t\t\t\t}">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t</div>\n\n\t\t<div class="modal-footer flex flex-items-center">\n\t\t\t<button type="button" class="btn btn-default" data-bind="click:Lightbox.cancel, css:{warning:canSubmit}">{{app.tl(\'Close\')}}</button>\n\n\t\t\t\x3c!-- ko ifnot: isEditMode --\x3e\n\t\t\t\t<button type="submit" class="ladda-button btn btn-success ml--auto mr--none" data-style="expand-right" data-bind="loader: isSubmitting, click:OnSubmit, css:{disabledSubmit:!canSubmit()}">\n\t\t\t\t\t{{app.tl(\'Add Panel\')}}\n\t\t\t\t</button>\n\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\x3c!-- ko if: isEditMode --\x3e\n\t\t\t\t<button type="submit" class="ladda-button btn btn-success ml--auto mr--none" data-style="expand-right" data-bind="loader: isSubmitting, click:OnSubmit, css:{disabledSubmit:!canSubmit()}">\n\t\t\t\t\t{{app.tl(\'Update Panel\')}}\n\t\t\t\t</button>\n\t\t\t\x3c!--/ko--\x3e\n\t\t</div>\n\t</form>\n\n</div>\n\n<span data-bind="template: {afterRender: OnShow}"></span>'},2416:function(t,e){t.exports='<div class="sectionFormLightbox m-dashboard-walkover" data-bind="attr: {id: holderId}">\n\n\t<a href="javascript:;" class="m-dashboard-walkover__prev-step" title="Previous step" data-bind="click: OnClickWalkPrevStep, visible: $component.modalCurrentStep() !== 1">\n\t\t<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M8.26914286 15.87392057l.25253571-.25357557c.16735714-.16807003.16735714-.44058307 0-.60868897L2.1468929 8.60971565h13.42453567c.23667857 0 .42857143-.19271026.42857143-.43039701v-.35866418c0-.23768675-.19189286-.43039701-.42857143-.43039701H2.1468929L8.52167857.9883171c.16735714-.1680701.16735714-.4405831 0-.608689L8.26914286.1260525c-.16735715-.16807-.43871429-.16807-.60607143 0L.1255357 7.69566c-.1673571.16807003-.1673571.44058307 0 .60868897l7.53753573 7.5695716c.16735714.1681059.43871428.1681059.60607143 0z" fill="#4486F4" fill-rule="nonzero"/></svg>\n\t</a>\n\n\t<a href="javascript:;" class="m-dashboard-walkover__next-step" data-bind="click: OnClickWalkNextStep, attr: { title: $component.modalCurrentStep() == 5 ? \'Done\' : \'Next step\' }">\n\t\t<svg data-bind="visible: $component.modalCurrentStep() !== 5" width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M7.73085714.12607942L7.47832143.379655c-.16735714.16807003-.16735714.44058307 0 .60868897l6.37478567 6.40194038H.42857143C.19189286 7.39028435 0 7.58299461 0 7.82068136v.35866418c0 .23768675.19189286.43039701.42857143.43039701H13.8531071L7.47832143 15.0116829c-.16735714.1680701-.16735714.4405831 0 .608689l.25253571.2535756c.16735715.16807.43871429.16807.60607143 0L15.8744643 8.30434c.1673571-.16807003.1673571-.44058307 0-.60868897L8.33692857.12607943c-.16735714-.1681059-.43871428-.1681059-.60607143 0z" fill="#4486F4" fill-rule="nonzero"/></svg>\n\t\t<svg data-bind="visible: $component.modalCurrentStep() == 5" width="16" height="13" xmlns="http://www.w3.org/2000/svg"><path d="M14.8505017.1363319L4.7281132 10.9984677 1.1494983 7.1583265c-.1693963-.1817758-.4440598-.1817758-.6134923 0l-.4089588.4388456c-.1693963.1817759-.1693963.4765119 0 .6583266l4.2943379 4.6081694c.1693963.1817759.4440599.1817759.6134923 0L15.8729528 1.2335428c.1693963-.1817759.1693963-.4765119 0-.6583265l-.4089949-.4388844c-.1693964-.1817759-.4440599-.1817759-.6134562 0z" fill="#4486F4" fill-rule="nonzero"/></svg>\n\t</a>\n\n\t<div class="u-dashboard-walkover" data-bind="style: { \'min-height\': modalBaseHeight+\'px\' }">\n\n\t\t<div class="u-dashboard-walkover__step" data-bind="visible: $component.modalCurrentStep() == 1">\n\n\t\t\t<div class="u-dashboard-walkover__image">\n\n\t\t\t\t<img\n\t\t\t\t\tclass="u-dashboard-walkover__image-base"\n\t\t\t\t\tsrc="./tko/public/assets/png/dashboard-walkover/dashboard-walkover__image-welcome.png"\n\t\t\t\t\tsrcset="./tko/public/assets/png/dashboard-walkover/dashboard-walkover__image-welcome@2x.png 2x"\n\t\t\t\t\talt="">\n\n\t\t\t</div>\n\n\t\t\t<div class="u-dashboard-walkover__content">\n\n\t\t\t\t<h1>Welcome Home</h1>\n\t\t\t\t<p class="color--muted">\n\t\t\t\t\tWe\u2019ve made some improvements. Here\u2019s how to set up your Home so you can see the work that matters to you.\n\t\t\t\t</p>\n\t\t\t\t<button type="button" class="btn btn-primary" data-bind="click: OnClickLearnMore">\n\t\t\t\t\tLearn More\n\t\t\t\t</button>\n\n\t\t\t</div>\n\n\t\t</div>\n\n\t\t<div class="u-dashboard-walkover__step" data-bind="visible: $component.modalCurrentStep() == 2">\n\n\t\t\t<div class="u-dashboard-walkover__image">\n\n\t\t\t\t<img\n\t\t\t\t\tclass="u-dashboard-walkover__image-base"\n\t\t\t\t\tsrc="./tko/public/assets/png/dashboard-walkover/dashboard-walkover__image-dashboard.png"\n\t\t\t\t\tsrcset="./tko/public/assets/png/dashboard-walkover/dashboard-walkover__image-dashboard@2x.png 2x"\n\t\t\t\t\talt="">\n\n\t\t\t</div>\n\n\t\t\t<div class="u-dashboard-walkover__content">\n\n\t\t\t\t<h1>Seeing the big picture</h1>\n\t\t\t\t<p class="color--muted">\n\t\t\t\t\tWith Dashboards, you can build custom views based on the metrics most relevant to you. Create one or multiple Dashboards made up of different metrics, such as tasks, milestones or risks.\n\t\t\t\t</p>\n\n\t\t\t</div>\n\n\t\t</div>\n\n\t\t<div class="u-dashboard-walkover__step" data-bind="visible: $component.modalCurrentStep() == 3">\n\n\t\t\t<div class="u-dashboard-walkover__image">\n\n\t\t\t\t<img\n\t\t\t\t\tclass="u-dashboard-walkover__image-base"\n\t\t\t\t\tsrc="./tko/public/assets/png/dashboard-walkover/dashboard-walkover__image-mywork.png"\n\t\t\t\t\tsrcset="./tko/public/assets/png/dashboard-walkover/dashboard-walkover__image-mywork@2x.png 2x"\n\t\t\t\t\talt="">\n\n\t\t\t</div>\n\n\t\t\t<div class="u-dashboard-walkover__content">\n\n\t\t\t\t<h1>Focus on what matters <br> with My Work</h1>\n\t\t\t\t<p class="color--muted">\n\t\t\t\t\tMy Work is a way of seeing your upcoming tasks, milestones and events in one place.  By customizing the information, you always know what\'s coming up without losing sight of your big-picture priorities.\n\t\t\t\t</p>\n\n\t\t\t</div>\n\n\t\t</div>\n\n\t\t<div class="u-dashboard-walkover__step" data-bind="visible: $component.modalCurrentStep() == 4">\n\n\t\t\t<div class="u-dashboard-walkover__image">\n\n\t\t\t\t<img\n\t\t\t\t\tclass="u-dashboard-walkover__image-base"\n\t\t\t\t\tsrc="./tko/public/assets/png/dashboard-walkover/dashboard-walkover__image-comments.png"\n\t\t\t\t\tsrcset="./tko/public/assets/png/dashboard-walkover/dashboard-walkover__image-comments@2x.png 2x"\n\t\t\t\t\talt="">\n\n\t\t\t</div>\n\n\t\t\t<div class="u-dashboard-walkover__content">\n\n\t\t\t\t<h1>Communicate <br> at a glance</h1>\n\t\t\t\t<p class="color--muted">\n\t\t\t\t\tIt\u2019s now even easier to keep on top of your unread comments and messages with these new sections.\n\t\t\t\t</p>\n\n\t\t\t</div>\n\n\t\t</div>\n\n\t\t<div class="u-dashboard-walkover__step" data-bind="visible: $component.modalCurrentStep() == 5">\n\n\t\t\t<div class="u-dashboard-walkover__image">\n\n\t\t\t\t<img\n\t\t\t\t\tclass="u-dashboard-walkover__image-base"\n\t\t\t\t\tsrc="./tko/public/assets/png/dashboard-walkover/dashboard-walkover__image-projects.png"\n\t\t\t\t\tsrcset="./tko/public/assets/png/dashboard-walkover/dashboard-walkover__image-projects@2x.png 2x"\n\t\t\t\t\talt="">\n\n\t\t\t</div>\n\n\t\t\t<div class="u-dashboard-walkover__content">\n\n\t\t\t\t<h1>All your projects at <br> your fingertips</h1>\n\t\t\t\t<p class="color--muted">\n\t\t\t\t\tAll the power of the Projects page, in a smaller, lighter, easier-to-navigate space. Click on the Projects tab to see a searchable pop out. Your project switcher is still in the same place for easy access.\n\t\t\t\t</p>\n\n\t\t\t</div>\n\n\t\t</div>\n\n\t</div>\n\n\n\n\t<ul class="u-dots-pagination" data-bind="foreach: [1,2,3,4,5]">\n\t\t<li data-bind="css: { \'is-current\': $data == $component.modalCurrentStep() }, click: function(){$component.modalCurrentStep($data)}">\n\t\t\t<span class="u-dots-pagination__dot">\n\t\t\t\t<span class="sr-only">{{ $data }}</span>\n\t\t\t</span>\n\t\t</li>\n\t</ul>\n\n\n\t<div class="m-dashboard-walkover__done-actions" data-bind="visible: $component.modalCurrentStep() == 5">\n\t\t<button type="button" data-bind="click: Lightbox.cancel()" class="btn btn-success font-size--medium">\n\t\t\tDone\n\t\t</button>\n\t</div>\n\n</div>\n<span data-bind="template: {afterRender: OnShow}"></span>'},2504:function(t,e){t.exports='<div class="sectionFormLightbox m-clock-in" data-bind="attr:{id:holderId}">\n\t<div class="sectionContent">\n\t\t<div class="text--center" style="padding: 40px 20px 0;">\n\t\t\t<img data-bind="attr: { src: backgroundImage }" width="300" alt="dashboard">\n\t\t\t<h4>{{modalTitle}}</h4>\n\n\t\t\t<p class="my--large">\n\t\t\t\t{{{ pomptTextLine1 }}}\n\t\t\t</p>\n\t\t\t<p class="my--large">\n\t\t\t\t{{{ pomptTextLine2 }}}\n\t\t\t</p>\n\t\t</div>\n\n\t\t<div class="formFooter new">\n\t\t\t<div class="text--center my--large">\n\t\t\t\t<button data-bind="click: OnSubmit, ladda: isSubmitting, enable:!isSubmitting()" class="ladda-button action btn btn-success" data-style="expand-right">\n\t\t\t\t\t<span class="ladda-label">\n\t\t\t\t\t\t{{buttonText}}\n\t\t\t\t\t</span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n\x3c!-- IMPORTANT - Mark this template loaded --\x3e\n\x3c!-- ko if: $data.readyToShow != null && readyToShow --\x3e\n\t<div data-bind="template:{afterRender:function(){templateLoaded(true)}}" class="hidden"></div>\n\x3c!-- /ko --\x3e\n'},2584:function(t,e){t.exports=""},2585:function(t,e){t.exports='\x3c!-- ko if: app.currentRoute().dashboardPageTab || app.currentRoute().homePageTab --\x3e\n    <div class="s-home__sidebar">\n        <div class="s-home__sidebar-content">\n            <div class="s-home__sidebar-body">\n\n\n\n                \x3c!-- Main menu --\x3e\n                <div class="s-home__sidebar-section">\n                    \x3c!-- ko component: {\n                            name: \'widget-tabs-list\',\n                            params: {\n                                tabs: tabs,\n                                currentSection: currentSection\n                            }\n                        } --\x3e\n                    \x3c!-- /ko --\x3e\n                </div>\n\n                \x3c!-- Payment reminder --\x3e\n                \x3c!-- ko component: {\n                        name: \'widget-payment-reminder-new\'\n                    } --\x3e\n                \x3c!-- /ko --\x3e\n            </div>\n\n            <div class="s-home__sidebar-footer" data-bind="css: {\'s-home__sidebar-footer--collapsed\': userMetricsCollapsed }">\n                <div class="s-home__sidebar-footer-body s-home__sidebar-metrics">\n                    \x3c!-- ko component: {\n                            name: \'widget-user-metrics\',\n                            params: {}\n                        } --\x3e\n                    \x3c!-- /ko --\x3e\n                </div>\n\n                \x3c!-- Reenable this if we add more metrics into this section --\x3e\n                \x3c!-- ko if: false --\x3e\n                    <button class="s-home__sidebar-footer-header hidden"\n                        data-content="{{$component.userMetricsToggleText}}"\n                        data-tipped-options="\n                            hideAfter: 300"\n                        data-bind="tippedDelegate"\n                        data-click="OnClickToggleUserMetrics">\n                        \x3c!-- ko component: {\n                                name: \'ui-common-icon\',\n                                params: {\n                                    name: \'ellipsis-h-regular\'\n                                }\n                            } --\x3e\n                        \x3c!-- /ko --\x3e\n                    </button>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n    </div>\n\x3c!-- /ko --\x3e'},2586:function(t,e){t.exports='<div class="s-home {{homeClassModifier}}">\n\n    <div class="s-home__content">\n        \x3c!-- ko if: componentName() != \'\' --\x3e\n            \x3c!-- ko component: {\n                    name: componentName(),\n                    params: componentParameters()\n                } --\x3e\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n    </div>\n\n    \x3c!-- ko if: app.isShowingQuickJump --\x3e\n        \x3c!-- ko component: {\n                name: \'widget-quick-jump-projects\',\n                params: {}\n            }--\x3e\n        \x3c!-- /ko --\x3e\n    \x3c!-- /ko --\x3e\n</div>\n\n\x3c!-- IMPORTANT - Mark this template loaded --\x3e\n\x3c!-- ko if: $data.readyToShow != null && readyToShow --\x3e\n    <div data-bind="template:{afterRender:function(){templateLoaded(true)}}" class="hidden"></div>\n\x3c!-- /ko --\x3e'},2616:function(t,e){t.exports='\x3c!-- ko if: data.state() == \'loading\' --\x3e\n    \x3c!-- ko component: {\n            name: \'list-state-loading-new\',\n            params: {\n                itemType: \'activity\',\n                format: \'large\',\n                showText: true\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: data.state() == \'error\' --\x3e\n    \x3c!-- ko component: {name: \'list-state-error\', params: {itemType: \'activity\', onTryAgainAction: data.TryLoadAgain, errorStatus: data.APIErrorStatus}} --\x3e\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: data.state() == \'blank\' && ko.unwrap(index) == 0 && shouldShowBlankState() --\x3e\n    \x3c!-- ko component: {name: \'list-state-blank\', params: {itemType: \'activity\', showButton: false, title: app.tl(\'No activity\'), msg: blankSlateMsg}} --\x3e\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: data.state() == \'content\' --\x3e\n    <div class="s-activity-list"\n        data-bind="\n            css: {\n                \'s-activity-list--has-more\': data.hasMoreRecords,\n                \'s-activity-list--has-fixed-headers\': hasFixedSecondaryNav\n            }">\n        <div class="s-activity-list__list">\n\n            \x3c!-- ko foreach: data.list --\x3e\n                \x3c!-- ko if: $component.isNewProject($index()) --\x3e\n                    \x3c!-- ko component: {\n                            name: \'ui-project-header\',\n                            params: {\n                                id: projectId,\n                                name: projectName,\n                                companyName: companyName,\n                                companyId: companyId\n                            }\n                        } --\x3e\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: $component.isNewDateSection($index()) --\x3e\n                    <label class="s-activity-list__header">\n                        {{$component.getHeaderText($data)}}\n                    </label>\n                \x3c!-- /ko --\x3e\n\n\n                <div class="w-activity" data-bind="css: { \'w-activity--completed\': latestActivityType() === \'completed\' }">\n                    <div class="w-activity__user">\n                        <div class="w-activity__action w-activity__action--{{actionType}}">\n                            \x3c!-- ko if: activityType() == \'reacted\' --\x3e\n                                <img data-bind="attr: { src: \'/tko/public/images/reactions/\' + reactionType() + \'.png\'}">\n                            \x3c!-- /ko --\x3e\n\n                            \x3c!-- ko ifnot: activityType() == \'reacted\' --\x3e\n                                \x3c!-- ko component: {\n                                        name: \'ui-common-icon\',\n                                        params: {\n                                            name: actionName,\n                                            color: actionColor,\n                                            type: actionType\n                                        }\n                                    } --\x3e\n                                \x3c!-- /ko --\x3e\n                            \x3c!-- /ko --\x3e\n                        </div>\n                        <img data-bind="attr: { src: userAvatarURL, alt: userName },\n                            event: { error: app.OnImageThumbLoadFail.bind($data, \'userAvatar\') }">\n                    </div>\n\n                    <div class="w-activity__content">\n\n                        <a class="w-activity__content-user" title="{{userFullName}}" href="#/people/{{userId}}">\n                            {{ actorName }}\n                        </a>\n\n                        <span class="w-activity__content-description">\n                            {{{ app.utility.RenderActivity($data) }}}\n                        </span>\n\n                        <span class="w-activity__content-title">\n                            \x3c!-- ko component: {\n                                    name: \'ui-common-icon\',\n                                    params: {\n                                        name: itemName,\n                                        color: itemColor,\n                                        type: itemType\n                                    }\n                                } --\x3e\n                            \x3c!-- /ko --\x3e\n                            {{{ formattedTitle }}}\n                        </span>\n\n                        <div class="w-activity__content-extra">\n\n                            \x3c!-- ko if: extraDescription() != "" || publicInfo() != "" --\x3e\n\n                                \x3c!-- ko ifnot: type() == "file" --\x3e\n                                    (\n                                        \x3c!-- ko if: publicInfo() != "" && type() !== "task" --\x3e\n                                            <span>\n                                                {{publicInfo}}\n                                            </span>\n\n                                            \x3c!-- ko if: extraDescription() !== "" --\x3e, \x3c!-- /ko --\x3e\n                                        \x3c!-- /ko --\x3e\n\n                                        \x3c!-- ko if: extraDescription() != "" --\x3e\n                                            \x3c!-- ko if: type() === "task" --\x3e<span>{{app.tl(\'List\')}}</span>: \x3c!-- /ko --\x3e\n                                            \x3c!-- ko if: type() === "file_comment" --\x3e<span>{{app.tl(\'File\')}}</span>: \x3c!-- /ko --\x3e\n                                            \x3c!-- ko if: type() === "notebook_comment" --\x3e<span>{{app.tl(\'Notebook\')}}</span>: \x3c!-- /ko --\x3e\n                                            \x3c!-- ko if: type() === "task_comment" --\x3e<span>{{app.tl(\'Task\')}}</span>: \x3c!-- /ko --\x3e\n                                            \x3c!-- ko if: type() === "milestone_comment" --\x3e<span>{{app.tl(\'Milestone\')}}</span>: \x3c!-- /ko --\x3e\n                                            \x3c!-- ko if: type() === "link_comment" --\x3e<span>{{app.tl(\'Link\')}}</span>: \x3c!-- /ko --\x3e\n\n                                            \x3c!-- ko ifnot: itemLink() == "" --\x3e\n                                                <a class="extra" href="#/{{itemLink}}">\n                                                    {{extraDescription}}\n                                                </a>\n                                            \x3c!-- /ko --\x3e\n                                            \x3c!-- ko if: itemLink() == "" --\x3e\n                                                <span>\n                                                    {{extraDescription}}\n                                                </span>\n                                            \x3c!-- /ko --\x3e\n                                        \x3c!-- /ko --\x3e\n\n                                        \x3c!-- ko if: type() === "task" && activityType() === "new" --\x3e\n                                            , <span>\n                                                {{app.tl(\'Assigned To\')}}:\n                                            </span>\n                                            \x3c!-- ko if: assignedToMultiplePeople --\x3e\n                                                <span>\n                                                    {{app.tl(\'Multiple People\')}}\n                                                </span>\n                                            \x3c!-- /ko --\x3e\n                                            \x3c!-- ko ifnot: !assignedToMultiplePeople --\x3e\n                                                \x3c!-- ko ifnot: forUserName --\x3e\n                                                    <span>{{app.tl(\'Anyone\')}}</span>\n                                                \x3c!-- /ko --\x3e\n                                                \x3c!-- ko if: forUserName --\x3e\n                                                    <span>{{forUserName}}</span>\n                                                \x3c!-- /ko --\x3e\n                                            \x3c!-- /ko --\x3e\n                                        \x3c!-- /ko --\x3e\n                                    )\n                                    \x3c!-- /ko --\x3e\n                            \x3c!-- /ko --\x3e\n                        </div>\n                    </div>\n\n                    <span class="w-activity__time tipped-hide"\n                        data-tipped="{{ dateTime().userFormat(\'date-time\') }}"\n                        data-tipped-options="showDelay: 500">\n                        {{{ $component.GetActivityTimestamp($data, $index()) }}}\n                    </span>\n\n                    <div class="w-activity__privacy" title="{{ app.tl(\'Private\') }}">\n                        \x3c!-- ko if: isPrivate() !== 0 --\x3e\n                            \x3c!-- ko component: {\n                                name: "widget-privacy-icon",\n                                params: {\n                                    private: isPrivate,\n                                    lockdownId: lockdownId,\n                                    projectId: projectId,\n                                    id: itemId,\n                                    title: description,\n                                    type: type\n                                }\n                            } --\x3e\x3c!-- /ko --\x3e\n                        \x3c!-- /ko --\x3e\n                    </div>\n                </div>\n            \x3c!-- /ko --\x3e\n\n            \x3c!-- ko if: data.hasMoreRecords --\x3e\n                \x3c!-- ko component: {name: \'widget-loadMore\', params: { dataLoader: data, loadMoreMessage: \'\', minimalTemplate: true, updatesAtBottom: true, cssClass: \'w-load-more--dashboard\' } } --\x3e\x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n        </div>\n    </div>\n\x3c!-- /ko --\x3e\n'},2646:function(t,e){t.exports="<div class=\"s-comments-list\"\n    data-bind=\"css: {\n        's-comments-list--inline': isInlineList,\n        's-comments-list--has-fixed-headers': !isInlineList && itemType != 'project' && app.hasFixedSecondaryNav()\n    }\">\n\n    \x3c!-- ko if: isInlineList || showTitle --\x3e\n        <div class=\"s-comments-list__title\">\n            <h2>\n                \x3c!-- ko if: showTitle --\x3e\n                    {{sectionTitle}}\n                \x3c!-- /ko --\x3e\n            </h2>\n\n            \x3c!-- ko if: data.state() === 'content' --\x3e\n                <div class=\"s-comments-list__options\">\n                    \x3c!-- ko component: {\n                            name: 'ui-sortOptions',\n                            params:{\n                                sortOptions: inlineSortByOptions,\n                                sortBy: sortOrder,\n                                showSortOrder: false\n                            }\n                        } --\x3e\n                    \x3c!-- /ko --\x3e\n\n                    \x3c!-- ko if: totalUnread() > 0 --\x3e\n                        <button type=\"button\"\n                            aria-label=\"More Options\"\n                            class=\"btn btn-sm btn-white tipped-click ml--small\"\n                            data-tipped-options=\"isTippedParent: true, hideOn:'click', hideOnClickOutside:true, inline:'commentsOptions_sticky', skin:'light', position:'bottommiddle', hideOthers:true, showOn:'click'\">\n                            <svg class=\"tipped-hide ma\" data-tipped=\"{{app.tl('Options')}}\" width=\"3\" height=\"13\" viewBox=\"0 0 3 13\" xmlns=\"http://www.w3.org/2000/svg\">\n                                <path data-bind=\"attr: {d: app.consts.SVG.options}\" fill-rule=\"evenodd\"/>\n                            </svg>\n                        </button>\n\n                        <ul class=\"tippedMenu\" id=\"commentsOptions_sticky\" style=\"display: none; list-style: none\">\n                            <li>\n                                <a href=\"javascript:;\" data-bind=\"click: MarkAllAsRead\">\n                                    <i class=\"fa fa-check-square-o\"></i>\n                                    {{app.tl('Mark all as read')}}\n                                </a>\n                            </li>\n                        </ul>\n                    \x3c!--/ko--\x3e\n                </div>\n            \x3c!-- /ko --\x3e\n        </div>\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- ko if: data.state() == 'loading' --\x3e\n        \x3c!-- ko component: {\n                name: 'list-state-loading-new',\n                params: {\n                    itemType: 'comment',\n                    format: 'large',\n                    showText: true\n                }\n            } --\x3e\n        \x3c!-- /ko --\x3e\n    \x3c!-- /ko --\x3e\n    \x3c!-- ko if: data.state() == 'error' --\x3e\n        \x3c!-- ko component: {name: 'list-state-error', params:{itemType: 'comment', onTryAgainAction: data.TryLoadAgain, errorStatus: data.APIErrorStatus}} --\x3e\x3c!-- /ko --\x3e\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- ko if: data.state() == 'blank' && showBlankState --\x3e\n        \x3c!-- ko if: itemType == 'all' --\x3e\n            \x3c!-- ko component: {name: 'list-state-blank', params:{itemType: 'comment', title:app.tl('No Comments'), msg:app.tl('There are no comments that match this filter.')}} --\x3e\x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: itemType == 'project' --\x3e\n            \x3c!-- ko component: {name: 'list-state-blank', params:{itemType: 'comment', title: blankSlateTitle, msg: blankSlateText}} --\x3e\x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko ifnot: itemType == 'all' || itemType == 'project' --\x3e\n            \x3c!-- ko component: {name: 'list-state-blank', params:{itemType: 'comment', showButton: false, title: blankSlateTitle, msg: blankSlateText}} --\x3e\x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n    \x3c!-- /ko --\x3e\n\n    <div class=\"s-comments-list__list\">\n        \x3c!-- ko if: commentFormPosition() == 'top' --\x3e\n            \x3c!-- ko component: {\n                    name: 'widget-comment',\n                    params: {\n                        item: tmpComment,\n                        displayMode: 'add w-comment--'+$component.listMode(),\n                        showAuthor: false,\n                        showBreadcrumb: false\n                    }\n                } --\x3e\n            \x3c!-- /ko --\x3e\n        \x3c!--/ko--\x3e\n\n        \x3c!-- ko foreach: data.list --\x3e\n            \x3c!-- ko if: $component.isNewSection($index()) --\x3e\n                <label class=\"s-comments-list__header\">\n                    {{{ $component.getSectionHeader($index()) }}}\n                </label>\n            \x3c!-- /ko --\x3e\n\n            \x3c!-- ko if: $component.isNewProject($index()) --\x3e\n                \x3c!-- ko component: {\n                        name: 'ui-project-header',\n                        params: {\n                            id: project.id,\n                            name: project.name,\n                            companyName: company.name,\n                            companyId: company.id\n                        }\n                    } --\x3e\n                \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n\n            \x3c!-- ko if: $component.isNewCommentableItem($index()) --\x3e\n                <label class=\"s-comments-list__header\">\n                    \x3c!-- ko component: {\n                            name: 'ui-breadcrumb',\n                            params: {\n                                segments: $component.getItemAsBreadcrumb($index())\n                            }\n                        } --\x3e\n                    \x3c!-- /ko --\x3e\n                </label>\n            \x3c!-- /ko --\x3e\n\n            \x3c!-- ko component: {\n                    name: 'widget-comment',\n                    params: {\n                        item: $data,\n                        allowReply: $component.allowReplies,\n                        displayMode: $component.listMode,\n                        cssClasses: $component.getCommentClass($index()),\n                        showBreadcrumb: $component.shouldShowBreadcrumb && $component.sortBy() != 'type',\n                        showProjectInBreadcrumb: $component.showProjectInBreadcrumb && $component.sortBy() != 'project'\n                    }\n                } --\x3e\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: data.state() == 'content' --\x3e\n            <div class=\"flex mt--medium\">\n                \x3c!-- ko component: {\n                        name: 'widget-loadMore',\n                        params: {\n                            dataLoader: data,\n                            minimalTemplate: isInlineList\n                        }\n                    } --\x3e\n                \x3c!-- /ko --\x3e\n            </div>\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: commentFormPosition() == 'bottom' --\x3e\n            \x3c!-- ko component: {\n                    name: 'widget-comment',\n                    params: {\n                        item: tmpComment,\n                        displayMode: 'add w-comment--'+$component.listMode(),\n                        showAuthor: false,\n                        showBreadcrumb: false\n                    }\n                } --\x3e\n            \x3c!-- /ko --\x3e\n        \x3c!--/ko--\x3e\n    </div>\n</div>"},2665:function(t,e){t.exports='<div class="flex flex-column" style="max-width: 300px;">\n    <span class="border-bottom--default font-size--small mb--small py--small">\n        {{app.tl(\'This panel uses its own settings\')}}\n    </span>\n\n    \x3c!-- ko ifnot: $component.GetFiltersSummary($data).length --\x3e\n        <div class="flex flex-column font-size--small mt--medium pl--small">\n              {{app.tl(\'No filters applied\')}}\n        </div>\n    \x3c!-- /ko --\x3e\n\n    <div class="flex flex-column font-size--small mt--medium pl--small" data-bind="foreach: $component.GetFiltersSummary($data)">\n        <div class="flex pb--small">\n            \x3c!-- ko if: $data.summary --\x3e\n                <span class="color--gray mr--small">{{label}}:</span>\n                <span class="color--gray-light">{{summary}}</span>\n            \x3c!-- /ko  --\x3e\n            \x3c!-- ko ifnot: $data.summary --\x3e\n                <span class="color--gray mr--small">{{label}}</span>\n            \x3c!-- /ko --\x3e\n        </div>\n    </div>\n</div>'},2666:function(t,e){t.exports='<ul class="tippedMenu">\n\t<li>\n\t\t<a href="javascript:;" data-bind="click: Edit">\n\t\t\t{{app.tl(\'Edit\')}}\n\t\t</a>\n\t</li>\n\t<li>\n\t\t<a href="javascript:;" data-bind="click: Delete">\n\t\t\t{{app.tl(\'Delete\')}}\n\t\t</a>\n\t</li>\n    \x3c!-- ko if: app.account.isEnterprise --\x3e\n        <li>\n            <a href="javascript:;" data-bind="click: Duplicate">\n                {{app.tl(\'Duplicate\')}}\n            </a>\n        </li>\n        <li>\n            <a href="javascript:;" data-bind="click: Export, visible: canExport">\n                {{app.tl(\'Export\')}}\n            </a>\n        </li>\n    \x3c!-- /ko --\x3e\n</ul>'},2667:function(t,e){t.exports='\x3c!-- BEGIN METRICS --\x3e\n\n<script type="text/html" id="metric-header-tmpl">\n    <div class="w-metric__header">\n\t\t\x3c!-- ko ifnot: $component.isShared --\x3e\n\t\t\t\x3c!-- ko component: {\n\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tname: \'draghandle-tw-solid\',\n\t\t\t\t\t\tclass: \'w-metric__header-handle\',\n\t\t\t\t\t\tsize: \'1x\'\n\t\t\t\t\t}\n\t\t\t\t} --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n\t\t\x3c!-- ko if: $component.isShared --\x3e\n\t\t\t<span class="p--medium">\n\t\t\t</span>\n\t\t\x3c!-- /ko --\x3e\n\n        <span class="w-metric__header-title"\n            title="{{name}}">\n            {{ name }}\n            \x3c!-- ko if: hasFilterOverrides --\x3e\n                <span class="w-metric__header-title-filters"\n                    data-tipped-options="\n                        skin: \'light\',\n                        hideOn: false,\n                        hideAfter: 300,\n                        showDelay: 300"\n                    data-content="{{$component.panelFiltersTippedContent}}"\n                    data-bind="tippedDelegate">\n                    \x3c!-- ko component: {\n                            name: \'ui-common-icon\',\n                            params: {\n                                name: \'filter-regular\'\n                            }\n                        } --\x3e\n                    \x3c!-- /ko --\x3e\n                </span>\n            \x3c!-- /ko --\x3e\n        </span>\n\n        \x3c!-- ko if: $data.range --\x3e\n            <span class="w-metric__header-range">\n                \x3c!-- ko component: {\n                        name: \'ui-metric-range\',\n                        params: {\n                            title: range.title,\n                            options: range.options,\n\t\t\t\t\t\t\tselected: range.selected,\n\t\t\t\t\t\t\tenabled: !$component.isShared\n                        }\n                    } --\x3e\n                \x3c!-- /ko --\x3e\n            </span>\n        \x3c!-- /ko --\x3e\n\n\t\t\x3c!-- ko ifnot: $component.isShared --\x3e\n\t\t\t<span class="w-metric__header-options"\n\t\t\t\tdata-content="{{$component.panelOptionsTippedContent}}"\n\t\t\t\tdata-tipped-options="\n\t\t\t\t\tskin: \'light\',\n\t\t\t\t\tshowOn: \'click\',\n\t\t\t\t\thideOn: false,\n\t\t\t\t\thideAfter: 300,\n\t\t\t\t\tposition: \'bottommiddle\'"\n\t\t\t\tdata-bind="tippedDelegate">\n\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tname: \'ellipsis-v-regular\'\n\t\t\t\t\t\t}\n\t\t\t\t\t} --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</span>\n\t\t\x3c!-- /ko --\x3e\n    </div>\n<\/script>\n\n\n<script type="text/html" id="metric-projects-distribution">\n    \x3c!-- ko component: {\n            name: \'widget-metric-projects-distribution\',\n            params: {\n                panel: $data,\n                showHeader: false,\n                chartOptions: {\n                    title: $data.name\n                }\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n<\/script>\n\n<script type="text/html" id="metric-activity-distribution">\n    \x3c!-- ko component: {\n            name: \'widget-metric-activity-distribution\',\n            params: {\n                panel: $data,\n                showHeader: false,\n                chartOptions: {\n                    title: $data.name\n                }\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n<\/script>\n\n<script type="text/html" id="metric-tasks-bar">\n    \x3c!-- ko component: {\n            name: \'widget-metric-tasks\',\n            params: {\n                panel: $data,\n                showHeader: false,\n                chartOptions: {\n                    title: $data.name\n                }\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n<\/script>\n\n<script type="text/html" id="metric-tasks-burndown">\n    \x3c!-- ko component: {\n            name: \'widget-metric-tasks-burndown\',\n            params: {\n                panel: $data,\n                showHeader: false\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n<\/script>\n\n\n<script type="text/html" id="metric-milestones-bar">\n    \x3c!-- ko component: {\n            name: \'widget-metric-milestones\',\n            params: {\n                panel: $data,\n                showHeader: false,\n                chartOptions: {\n                    title: $data.name\n                }\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n<\/script>\n\n\n<script type="text/html" id="metric-milestones-list">\n    \x3c!-- ko component: {\n            name: \'widget-metric-milestones-list\',\n            params: {\n                panel: $data,\n                showHeader: false\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n<\/script>\n\n\n<script type="text/html" id="metric-project-updates-list">\n    \x3c!-- ko component: {\n            name: \'widget-metric-project-updates-list\',\n            params: {\n                panel: $data,\n                showHeader: false\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n<\/script>\n\n\n<script type="text/html" id="metric-projects-digest">\n    \x3c!-- ko component: {\n            name: \'widget-metric-projects-digest\',\n            params: {\n                panel: $data,\n                showHeader: false\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n<\/script>\n\n\n<script type="text/html" id="metric-project-health">\n    \x3c!-- ko component: {\n            name: \'widget-metric-project-health\',\n            params: {\n                panel: $data,\n                showHeader: false,\n                chartOptions: {\n                    title: $data.name\n                }\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n<\/script>\n\n\n<script type="text/html" id="metric-events-list">\n    \x3c!-- ko component: {\n            name: \'widget-metric-events-list\',\n            params: {\n                panel: $data,\n                showHeader: false\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n<\/script>\n\n\n<script type="text/html" id="metric-risks-list">\n    \x3c!-- ko component: {\n            name: \'widget-metric-risks-list\',\n            params: {\n                panel: $data,\n                showHeader: false\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n<\/script>\n\n\n<script type="text/html" id="metric-risks-bar">\n    \x3c!-- ko component: {\n            name: \'widget-metric-risks\',\n            params: {\n                panel: $data,\n                showHeader: false,\n                chartOptions: {\n                    title: $data.name\n                }\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n<\/script>\n\n<script type="text/html" id="metric-tasks-breakdown">\n    \x3c!-- ko component: {\n            name: \'widget-metric-tasks-breakdown\',\n            params: {\n                panel: $data,\n                showHeader: false,\n                chartOptions: {\n                    title: $data.name\n                }\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n<\/script>\n\n\n<script type="text/html" id="metric-budgets-bar">\n    \x3c!-- ko if: app.featureFlip.check(\'projecttimebudgets\', {unwrap: true}) --\x3e\n        \x3c!-- ko component: {\n                name: \'widget-metric-budgets\',\n                params: {\n                    panel: $data,\n                    showHeader: false\n                }\n            } --\x3e\n        \x3c!-- /ko --\x3e\n    \x3c!-- /ko --\x3e\n<\/script>\n\n\n<script type="text/html" id="metric-project-health-bar">\n    \x3c!-- ko component: {\n            name: \'widget-metric-project-health\',\n            params: {\n                panel: $data,\n                showHeader: false,\n                chartOptions: {\n                    title: $data.name\n                }\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n<\/script>\n\n\n<script type="text/html" id="metric-billed-time-donut">\n    \x3c!-- ko component: {\n            name: \'widget-metric-billed-time\',\n            params: {\n                panel: $data,\n                showHeader: false,\n                chartOptions: {\n                    title: $data.name\n                }\n            }\n        } --\x3e\n     \x3c!-- /ko --\x3e\n<\/script>\n\n\n<script type="text/html" id="metric-billable-time-donut">\n    \x3c!-- ko component: {\n            name: \'widget-metric-billable-time\',\n            params: {\n                panel: $data,\n                showHeader: false,\n                chartOptions: {\n                    title: $data.name\n                }\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n<\/script>\n\n\n\x3c!-- GENERIC BLANK SLATE --\x3e\n<script type="text/html" id="metric-blank">\n    \x3c!-- ko component: {\n            name: \'ui-blank-card\',\n            params: {\n                text: app.tl(\'No content available\'),\n                graphic: \'./images/newui/blankslates/filterEmptyState.gif\',\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n<\/script>\n\n\x3c!-- GENERIC LOADING STATE --\x3e\n<script type="text/html" id="metric-loading">\n    <div class="w-metric__header">\n        \x3c!-- ko component: {\n                name: \'ui-common-icon\',\n                params: {\n                    name: \'draghandle-tw-solid\',\n                    class: \'w-metric__header-handle\',\n                    size: \'1x\'\n                }\n            } --\x3e\n        \x3c!-- /ko --\x3e\n        <span class="w-metric__header-title">\n            {{ title }}\n        </span>\n    </div>\n\n    <div class="w-metric__content">\n        \x3c!-- ko component: {\n                name: \'list-state-loading-new\',\n                params: {\n                    itemType: \'data\',\n                    format: \'large\',\n                    showText: false\n                }\n            } --\x3e\n        \x3c!-- /ko --\x3e\n    </div>\n<\/script>\n\n\x3c!-- END METRICS --\x3e\n\x3c!-- ko foreach: metricGroups --\x3e\n    <div class="s-dashboard-metrics"\n        data-bind="dragulaExtra: {\n            data: $data,\n            useSyncClone: false,\n            direction: \'horizontal\',\n            group: \'dashboardMetrics\'\n        }"\n        data-group-index="{{$index()}}">\n        \x3c!-- ko if: $component.shouldDisplayMetric($data) --\x3e\n            <div class="w-metric"\n                data-bind="\n                    attr: {\n                        \'data-id\': id\n                    },\n                    css: {\n                        \'w-metric--auto\': !$component.isFullWidthMetric($data),\n                        \'w-metric--full-width\': $component.isFullWidthMetric($data)\n                    }">\n                \x3c!-- ko template: {\n                        name: \'metric-header-tmpl\',\n                        data: $data\n                    } --\x3e\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko template: {\n                        name: \'metric-\' + type(),\n                        data: $data\n                    } --\x3e\n                \x3c!-- /ko --\x3e\n            </div>\n        \x3c!-- /ko --\x3e\n    </div>\n\x3c!-- /ko --\x3e'},2675:function(t,e){t.exports='<script type="text/html" id="filter-section-panels">\n\t\x3c!-- IGNORE THIS TEMPLATE - required to simplify logic in below foreach --\x3e\n<\/script>\n\n<script type="text/html" id="filter-section-tags">\n\t\x3c!-- ko component: {\n\t\tname: \'widget-itemFilter\',\n\t\tparams: {\n\t\t\tisHidden: collapsed,\n\t\t\tfocusWhenVisible: true,\n\t\t\tdataSource: $component.tagDataSource,\n\t\t\tplaceholder: app.tl(\'Choose tags\')\n\t\t}\n\t}\n\t--\x3e\x3c!-- /ko --\x3e\n\n\t\x3c!-- ko if: $component.filterTagIds().length --\x3e\n\t\t<div class="filter-section__options">\n\t\t\t<div class="filter-section__options-item">\n\t\t\t\t<label>\n\t\t\t\t\t{{app.tl(\'Match all tags\')}}\n\t\t\t\t\t<i class="fa fa-info-circle ml--small text-muted tipped-hide"\n\t\t\t\t\t\tdata-tipped-options="maxWidth: 200"\n\t\t\t\t\t\tdata-tipped="{{app.tl(\'If enabled, only [_s] with all of the selected tags will be returned\',app.tl(\'tasks\'))}}"></i>\n\t\t\t\t\t<input type="checkbox" data-bind="checked: $component.matchAllTags">\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</div>\n\t\x3c!--/ko--\x3e\n<\/script>\n\n<script type="text/html" id="filter-section-company">\n\t\x3c!-- ko component: {\n\t\t\tname: \'widget-itemFilter\',\n\t\t\tparams: {\n\t\t\t\tisHidden: collapsed,\n\t\t\t\tfocusWhenVisible: true,\n\t\t\t\tdataSource: $component.companyDataSource,\n\t\t\t\tplaceholder: app.tl(\'Choose companies\')\n\t\t\t}\n\t\t} --\x3e\n\t\x3c!-- /ko --\x3e\n<\/script>\n\n<script type="text/html" id="filter-section-columnoptions">\n\t<div class="filter-section no-border">\n\t\t\x3c!-- ko ifnot: $component.boardColumnDataSource.allData().length --\x3e\n\t\t\t<p class="font-size--small lhs mb--none mt--small text-muted">\n\t\t\t\t{{app.tl(\'There are no columns on this project yet\')}}\n\t\t\t</p>\n\t\t\x3c!--/ko--\x3e\n\t\t\x3c!-- ko if: $component.boardColumnDataSource.allData().length --\x3e\n\t\t\t<div class="filter-section__options" data-bind="foreach: $component.boardColumnDataSource.allData">\n\t\t\t\t<div class="filter-section__options-item">\n\t\t\t\t\t<label data-click="$component.OnClickBoardColumnOption">\n\t\t\t\t\t\t{{name}}\n\t\t\t\t\t\t<input type="checkbox"\n\t\t\t\t\t\t\tdata-bind="checked: $component.hiddenBoardColumnIds().length == 0 || $component.hiddenBoardColumnIds().indexOf(id) == -1"\n\t\t\t\t\t\t\tdata-click="$component.OnClickBoardColumnOption">\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\x3c!--/ko--\x3e\n\t</div>\n<\/script>\n\n<script type="text/html" id="filter-section-options">\n\t<div class="filter-section__options">\n\t\t<div class="filter-section__options-item">\n\t\t\t<label>\n\t\t\t\t{{app.tl(\'Show starred projects only\')}}\n\t\t\t\t<input type="checkbox" data-bind="checked: $component.onlyStarredProjects">\n\t\t\t</label>\n\t\t</div>\n\t</div>\n<\/script>\n\n<script type="text/html" id="filter-section-status">\n\t<select data-bind="\n\t\tselect2: {\n\t\t\tvalue: $component.projectStatus,\n\t\t\tdata: $component.projectStatusOptions,\n\t\t\ttemplateResult: app.select2FormatProjectStatusIcons,\n\t\t\ttemplateSelection: app.select2FormatProjectStatusIcons\n\t\t}" style="width:100%; font-size:10px;">\n\t</select>\n\n\t<div class="filter-section__options mt--small">\n\t\t<div class="filter-section__options-item">\n\t\t\t<label>\n\t\t\t\t{{app.tl(\'Include archived projects\')}}\n\t\t\t\t<input type="checkbox" data-bind="checked: $component.includeArchivedProjects">\n\t\t\t</label>\n\t\t</div>\n\t</div>\n<\/script>\n\n<script type="text/html" id="filter-section-category">\n\t\x3c!-- ko component: {\n\t\t\tname: \'widget-itemFilter\',\n\t\t\tparams: {\n\t\t\t\tisHidden: collapsed,\n\t\t\t\tfocusWhenVisible: true,\n\t\t\t\tdataSource: $component.categoryDataSource,\n\t\t\t\tplaceholder: app.tl(\'Choose categories\')\n\t\t\t}\n\t\t} --\x3e\n\t\x3c!-- /ko --\x3e\n\n\t\x3c!-- ko if: $component.hasSubCategories --\x3e\n\t\t<div class="filter-section__options mt--small">\n\t\t\t<div class="filter-section__options-item">\n\t\t\t\t<label>\n\t\t\t\t\t{{app.tl(\'Include subcategories\')}}\n\t\t\t\t\t<input type="checkbox" data-bind="checked: $component.includeSubCategories">\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</div>\n\t\x3c!-- /ko --\x3e\n<\/script>\n\n<script type="text/html" id="filter-section-health">\n\t\x3c!-- ko component: {\n\t\t\tname: \'widget-itemFilter\',\n\t\t\tparams: {\n\t\t\t\tisHidden: collapsed,\n\t\t\t\tfocusWhenVisible: true,\n\t\t\t\tdataSource: $component.projectHealthDataSource,\n\t\t\t\tplaceholder: app.tl(\'Choose project health\')\n\t\t\t}\n\t\t}--\x3e\n\t\x3c!-- /ko --\x3e\n<\/script>\n\n<script type="text/html" id="filter-section-owners">\n\t\x3c!-- ko component: {\n\t\t\tname: \'widget-itemFilter\',\n\t\t\tparams: {\n\t\t\t\tisHidden: collapsed,\n\t\t\t\tfocusWhenVisible: true,\n\t\t\t\tdataSource: $component.projectOwnerDataSource,\n\t\t\t\tplaceholder: app.tl(\'Choose project owners\'),\n\t\t\t\tseparator: \'companyName\'\n\t\t\t}\n\t\t}--\x3e\n\t\x3c!-- /ko --\x3e\n\n\t<div class="filter-section__options">\n\t\t<div class="filter-section__options-item">\n\t\t\t<label>\n\t\t\t\t{{app.tl(\'Include deleted users\')}}\n\t\t\t\t<i class="fa fa-info-circle ml text-muted tipped-hide"\n\t\t\t\t\tdata-tipped-options="maxWidth: 200"\n\t\t\t\t\tdata-tipped="{{app.tl(\'If this setting is enabled, deleted users will be shown in the project owner dropdown\')}}"></i>\n\t\t\t\t<input type="checkbox" data-bind="checked: $component.includeDeletedUsers">\n\t\t\t</label>\n\t\t</div>\n\t</div>\n<\/script>\n\n\x3c!-- ko foreach: filterSections --\x3e\n\t<div class="filter-section" data-bind="visible: $component.shouldDisplaySection($data)">\n\t\t<div class="filter-section__header">\n\t\t\t<label class="filter-section__header-label">\n\t\t\t\t<span class="filter-section__header-reset tipped-hide"\n\t\t\t\t\tdata-tipped="{{app.tl(\'Clear\')}}"\n\t\t\t\t\tdata-click="reset"\n\t\t\t\t\tdata-bind="visible: active">\n\t\t\t\t</span>\n\t\t\t\t{{title}}\n\t\t\t</label>\n\t\t\t<span class="filter-section__header-toggle" data-bind="click: toggleCollapsed">\n\t\t\t\t<i class="fa fa-fw fa-angle-{{collapsed() ? \'down\' : \'up\'}} ignore-mouse"></i>\n\t\t\t</span>\n\t\t</div>\n\n\t\t<div class="filter-section__content"\n\t\t\tdata-bind="\n\t\t\t\tvisible: !collapsed(),\n\t\t\t\ttemplate: {\n\t\t\t\t\tname: \'filter-section-\' + ko.unwrap(type),\n\t\t\t\t\tdata: $data\n\t\t\t\t}">\n\t\t</div>\n\t</div>\n\x3c!-- /ko --\x3e\n\n\x3c!-- IMPORTANT - Mark this template loaded --\x3e\n\x3c!-- ko if: $data.readyToShow != null && readyToShow --\x3e\n    <div data-bind="template:{afterRender:function(){templateLoaded(true)}}" class="hidden"></div>\n\x3c!-- /ko --\x3e'},2678:function(t,e){t.exports='\x3c!-- ko with: event --\x3e\n\t\x3c!-- ko if: canEdit --\x3e\n\t\t<div>\n\t\t\t<button type="button" class="btn btn-success" data-click="$component.OnClickEditEvent">\n\t\t\t\t<i class="fa fa-pencil mr--small"></i>\n\t\t\t\t{{app.tl(\'Edit Event\')}}\n\t\t\t</button>\n\t\t</div>\n\t\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e'},2679:function(t,e){t.exports='<div class="w-filter-info-bar w-filter-info-bar--inline mb--medium content-box py--none">\n\t<div class="w-filter-info-bar__lip w-filter-info-bar__lip--is-private"></div>\n\t<div class="s-event-details__info">\n\t\t<span class="s-event-details__info-icon">\n\t\t\t\x3c!-- ko component: {\n\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tname: \'lock-solid\'\n\t\t\t\t\t}\n\t\t\t\t}--\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</span>\n\t\t<strong class="mr--small">{{app.tl(\'Privacy\')}}:</strong>\n\t\t<span>{{ privacyText }}</span>\n\t</div>\n</div>\n\n\x3c!-- ko ifnot: isPersonalEvent --\x3e\n\t\x3c!-- ko component: { name: "ui-simple-tabs", params:{ tabs:tabs, cssClass: \'w-quick-view__tabs\' } } --\x3e\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n<div class="s-event-details" data-bind="visible: tabs.selCode() == \'details\', css: cssClass">\n\t<div class="s-event-details__creator">\n\t\t<img class="u-avatar u-avatar--xsmall mr--medium"\n\t\t\tdata-bind="attr: { src: eventOwnerAvatarUrl, alt: createdBy },\n\t\t\t\tevent: { error: app.OnImageThumbLoadFail.bind($data, \'userAvatar\') }">\n\t\t{{ app.tl(\'Added on [_s] at [_s] by [_s]\', event().createdAt().userFormat(\'date\'), event().createdAt().userFormat(\'time\'), createdBy()) }}\n\t</div>\n\n\t<div class="s-event-details__info">\n\t\t<span class="s-event-details__info-label">\n\t\t\t<i class="fa fa-fw fa-calendar"></i>\n\t\t\t{{app.tl(\'When\')}}:\n\t\t</span>\n\n\t\t<div class="s-event-details__info-content flex">\n\t\t\t{{{eventTimes}}}\n\t\t</div>\n\t</div>\n\n\t<div class="s-event-details__info">\n\t\t<span class="s-event-details__info-label">\n\t\t\t<i class="fa fa-fw fa-location-arrow"></i>\n\t\t\t{{app.tl(\'Where\')}}:\n\t\t</span>\n\n\t\t<div class="s-event-details__info-content">\n\t\t\t{{{location}}}\n\t\t</div>\n\t</div>\n\n\t<div class="s-event-details__info">\n\t\t<span class="s-event-details__info-label">\n\t\t\t<div class="s-event-details__info-label-event-type">\n\t\t\t\t<span data-bind="\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\'background-color\': event().type && event().type.color ? \'#\'+event().type.color() : \'transparent\'\n\t\t\t\t\t}">\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t{{app.tl(\'Type\')}}:\n\t\t</span>\n\n\t\t<div class="s-event-details__info-content">\n\t\t\t\x3c!-- ko if: event().type.name --\x3e\n\t\t\t\t{{event().type.name}}\n\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\x3c!-- ko ifnot: event().type.name --\x3e\n\t\t\t\t{{app.tl(\'Not Specified\')}}\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</div>\n\t</div>\n\n\t\x3c!-- ko if: repeatInfo().length --\x3e\n\t\t<div class="s-event-details__info">\n\t\t\t<span class="s-event-details__info-label">\n\t\t\t\t<i class="fa fa-fw fa-repeat"></i>\n\t\t\t\t{{app.tl(\'Repeats\')}}:\n\t\t\t</span>\n\n\t\t\t<div class="s-event-details__info-content">\n\t\t\t\t{{{repeatInfo}}}\n\t\t\t</div>\n\t\t</div>\n\t\x3c!-- /ko --\x3e\n\n\t\x3c!-- ko if: hasReminders--\x3e\n\t\t<div class="s-event-details__info">\n\t\t\t<span class="s-event-details__info-label">\n\t\t\t\t<i class="fa fa-fw fa-bell-o"></i>\n\t\t\t\t{{app.tl(\'Reminders\')}}:\n\t\t\t</span>\n\n\t\t\t<div class="s-event-details__info-content">\n\t\t\t\t{{{reminderInfo}}}\n\t\t\t</div>\n\t\t</div>\n\t\x3c!-- /ko --\x3e\n\n\t<div class="s-event-details__description">\n\t\t{{{ descriptionHTML }}}\n\t</div>\n\n</div>\n\x3c!-- ko ifnot: isPersonalEvent --\x3e\n\t<div class="w-quick-view__content w-quick-view__content--has-tabs"\n\t\tdata-bind="visible: tabs.selCode() == \'attendees\'">\n\t\t<div class="my--small">\n\t\t\t\x3c!-- ko if: hasAttendees --\x3e\n\t\t\t\t<table class="u-table u-table--with-border">\n\t\t\t\t\t<thead class="u-table__head">\n\t\t\t\t\t\t<tr class="u-table__row">\n\t\t\t\t\t\t\t<th class="u-table__cell">\n\t\t\t\t\t\t\t\t<div class="u-table__cell-content">\n\t\t\t\t\t\t\t\t\t<span>{{app.tl(\'Name\')}}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t<th class="u-table__cell">\n\t\t\t\t\t\t\t\t<div class="u-table__cell-content">\n\t\t\t\t\t\t\t\t\t<span>{{app.tl(\'Company Name\')}}\u2063</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody data-bind="foreach: attendeesArray" class="u-table__body">\n\t\t\t\t\t\t<tr class="u-table__row">\n\t\t\t\t\t\t\t<td class="u-table__cell">\n\t\t\t\t\t\t\t\t<div class="u-table__cell-content">\n\t\t\t\t\t\t\t\t\t<img class="u-avatar u-avatar--small"\n\t\t\t\t\t\t\t\t\t\tdata-bind="attr: { src: avatarURL, alt: fullName },\n\t\t\t\t\t\t\t\t\t\t\tevent: { error: app.OnImageThumbLoadFail.bind($data,\'userAvatar\') }">\n                                    <a href="#/people/{{id}}" class="ml--small">{{fullName}}</a>\n                                </div>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td class="u-table__cell">\n\t\t\t\t\t\t\t\t<div class="u-table__cell-content">\n\t\t\t\t\t\t\t\t\t<span>{{companyName}}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\x3c!-- ko ifnot: hasAttendees --\x3e\n\t\t\t\t{{app.tl(\'There are currently no users attending this event\')}}.\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</div>\n\t</div>\n\x3c!-- /ko --\x3e'},2680:function(t,e){t.exports='<script type="text/html" id="filter-section-eventtypes">\n\t\x3c!-- ko component: {\n\t\tname: \'widget-itemFilter\',\n\t\tparams: {\n\t\t\tdataSource: eventTypeDataSource,\n\t\t\tplaceholder: app.tl(\'Choose event types\')\n\t\t}\n\t}\n\t--\x3e\x3c!-- /ko --\x3e\n<\/script>\n\n\n<script type="text/html" id="filter-section-date">\n\n\t<select data-bind="select2:{value: dateCode, data: dateOptions}" style="width: 100%;"></select>\n\n\t\x3c!-- ko if: dateCode() == \'within\' || dateCode() == \'withinprev\' --\x3e\n\t\t<label class="filters-sidebar__date-range__label mt--medium" >\n\t\t\t{{app.tl(\'Date interval\')}}{{{app.localizationPreferences().ellipsis}}}\n\t\t</label>\n\n\t\t<input type="number" class="form-control filters-sidebar__form-control" data-bind="textInput: dateCustomInterval" min="1" max="365">\n\t\x3c!--/ko--\x3e\n\n\t\x3c!-- ko if: dateCode() == \'custom\' --\x3e\n\t\t<div class="custom-date-wrapper filter-section no-border pb--none">\n\t\t\t<div class="filters-sidebar__date-range">\n\t\t\t\t<div class="filters-sidebar__date-range__block">\n\t\t\t\t\t<label class="filters-sidebar__date-range__label">{{app.tl(\'Start date\')}}</label>\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: \'widget-dateInput\',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tdate: startDate,\n\t\t\t\t\t\t\t\tmaxDate: endDate,\n\t\t\t\t\t\t\t\tallowEmpty: true,\n\t\t\t\t\t\t\t\tcustomWrapperClass: \'filters-sidebar__date-range__wrapper\',\n\t\t\t\t\t\t\t\tcustomInputClass: \'form-control filters-sidebar__form-control\',\n\t\t\t\t\t\t\t\tdisplayShortcuts: false,\n\t\t\t\t\t\t\t\tstyleOverrides: {\n\t\t\t\t\t\t\t\t\t\'width\': \'100%\'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</div>\n\t\t\t\t<div class="filters-sidebar__date-range__block">\n\t\t\t\t\t<label class="filters-sidebar__date-range__label">{{app.tl(\'Due date\')}}</label>\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: \'widget-dateInput\',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tdate: endDate,\n\t\t\t\t\t\t\t\tminDate: startDate,\n\t\t\t\t\t\t\t\tallowEmpty: true,\n\t\t\t\t\t\t\t\tcustomWrapperClass: \'filters-sidebar__date-range__wrapper\',\n\t\t\t\t\t\t\t\tcustomInputClass: \'form-control filters-sidebar__form-control\',\n\t\t\t\t\t\t\t\tdisplayShortcuts: false,\n\t\t\t\t\t\t\t\tstyleOverrides: {\n\t\t\t\t\t\t\t\t\t\'width\': \'100%\'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\x3c!-- /ko --\x3e\n<\/script>\n\n\n<script type="text/html" id="filter-section-project">\n\t\x3c!-- ko component: {\n\t\tname: \'widget-itemFilter\',\n\t\tparams: {\n\t\t\tdataSource: projectDataSource,\n\t\t\tplaceholder: app.tl(\'Choose projects\'),\n\t\t\tseparator: \'companyName\'\n\t\t}\n\t}\n\t--\x3e\x3c!-- /ko --\x3e\n<\/script>\n\n\n<script type="text/html" id="filter-section-user">\n\t\x3c!-- ko component: {\n\t\tname: \'widget-itemFilter\',\n\t\tparams: {\n\t\t\tdataSource: userDataSource,\n\t\t\tplaceholder: app.tl(\'Choose users\')\n\t\t}\n\t}\n\t--\x3e\x3c!-- /ko --\x3e\n\n\t\x3c!-- ko if: shouldShowAdditionalUserOptions --\x3e\n\t\t<ul class="options-list">\n\t\t\t<li class="has-border">\n\t\t\t\t<label>\n\t\t\t\t\t{{userOptionsText}}\n\t\t\t\t\t<i class="fa fa-info-circle ml--small text-muted tipped-hide"\n\t\t\t\t\t\tdata-tipped-options="maxWidth: 200"\n\t\t\t\t\t\tdata-tipped="{{userOptionsHint}}"></i>\n\t\t\t\t\t<input type="checkbox" data-bind="checked: attendingOnly" style="margin-top: 6px;">\n\t\t\t\t</label>\n\t\t\t</li>\n\t\t</ul>\n\t\x3c!-- /ko --\x3e\n<\/script>\n\n\n<div class="filter-section">\n\t<div class="filter-section__header">\n\t\t<label>{{app.tl(\'Keyword\')}}</label>\n\t</div>\n\t<div class="filter-section__content">\n\t\t<input\n\t\t\ttype="text"\n\t\t\tclass="form-control filters-sidebar__form-control"\n\t\t\tplaceholder="{{app.tl(\'Search\') + app.localizationPreferences().ellipsis}}"\n\t\t\tdata-bind="\n\t\t\t\ttextInput: searchFieldValue,\n\t\t\t\tautoComplete: {\n\t\t\t\t\tdataSources: [\n\t\t\t\t\t\tuserDataSource,\n\t\t\t\t\t\tprojectDataSource\n\t\t\t\t\t],\n\t\t\t\t\treplacementTemplate: \'\',\n\t\t\t\t\tonUserFreeTextChange: searchTerm\n\t\t\t\t}\n\t\t">\n\t</div>\n</div>\n\n<div data-bind="dragulaExtra: {\n\t\tdata: sections,\n\t\tmirrorContainer: document.querySelectorAll(\'.filters-sidebar\')[0],\n\t\tmoves: MovesFilter,\n\t\tuseSyncClone: true,\n\t\tafterDrop: OnDropFilter\n\t}">\n\t<div class="filter-section" data-bind="visible: $component.shouldDisplaySection($data)">\n\t\t<div class="filter-section__header">\n\t\t\t<label class="filter-section__header-handle">\n\t\t\t\t{{title}}\n\t\t\t\t<span class="has-active-filter tipped-hide"\n\t\t\t\t\tdata-tipped="{{app.tl(\'Clear\')}}"\n\t\t\t\t\tdata-click="reset"\n\t\t\t\t\tdata-bind="visible: collapsed() && active()">\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t\t<span class="filter-section__header-toggle" data-bind="click: toggleCollapsed">\n\t\t\t\t<i class="fa fa-fw fa-angle-{{collapsed() ? \'down\' : \'up\'}} ignore-mouse"></i>\n\t\t\t</span>\n\t\t</div>\n\n\t\t<div class="filter-section__content"\n\t\t\tdata-bind="\n\t\t\t\tvisible: !collapsed(),\n\t\t\t\ttemplate: {\n\t\t\t\t\tname: \'filter-section-\' + type,\n\t\t\t\t\tdata: $component\n\t\t\t\t}">\n\t\t</div>\n\t</div>\n</div>\n\n\n\x3c!-- IMPORTANT - Mark this template loaded --\x3e\n\x3c!-- ko if: $data.readyToShow != null && readyToShow --\x3e\n    <div data-bind="template:{afterRender:function(){templateLoaded(true)}}" class="hidden"></div>\n\x3c!-- /ko --\x3e\n'},2681:function(t,e){t.exports="\x3c!-- ko if: data.state() == 'loading' --\x3e\n    \x3c!-- ko component: {\n            name: 'list-state-loading-new',\n            params: {\n                itemType: 'event',\n                format: 'large'\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: data.state() == 'error' --\x3e\n    \x3c!-- ko component: {name: 'list-state-error', params: {itemType: 'event', onTryAgainAction: data.TryLoadAgain, errorStatus: data.APIErrorStatus}} --\x3e\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: data.state() == 'blank' --\x3e\n    \x3c!-- ko component: {name: 'list-state-blank', params: {itemType: 'event', showButton: true, buttonText: app.tl('Add an Event'), onClickButton: OnClickAddEvent, title: blankSlateTitle, msg: blankSlateMsg}} --\x3e\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: data.state() == 'content' --\x3e\n    <div class=\"s-events-list\"\n        data-bind=\"css: {\n            's-events-list--has-fixed-headers': hasFixedHeaders\n        }\">\n        <div class=\"s-events-list__list\">\n            \x3c!-- ko foreach: restructuredDates --\x3e\n                \x3c!-- ko if: $component.isNewSection($index()) --\x3e\n                    <label class=\"s-events-list__header\">\n                        {{$component.getHeaderText($data)}}\n                    </label>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: $component.isNewProject($index()) --\x3e\n                    \x3c!-- ko ifnot: privacy.type() == 'project' --\x3e\n                        <label class=\"s-events-list__header\">\n                            {{app.tl('No Project')}}\n                        </label>\n                    \x3c!-- /ko --\x3e\n\n                    \x3c!-- ko if: privacy.type() == 'project' && privacy.projectId() == 0 --\x3e\n                        <label class=\"s-events-list__header\">\n                            {{app.tl('Multiple Projects')}}\n                        </label>\n                    \x3c!-- /ko --\x3e\n\n                    \x3c!-- ko if: privacy.type() == 'project' && privacy.projectId() > 0 --\x3e\n                        \x3c!-- ko component: {\n                                name: 'ui-project-header',\n                                params: {\n                                    id: privacy.projectId,\n                                    name: privacy.projectName,\n                                    companyName: privacy.companyName,\n                                    companyId: privacy.companyId\n                                }\n                            } --\x3e\n                        \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n\t\t\t\x3c!-- ko if: status() != 'deleted'--\x3e\n                \x3c!-- ko component: {\n                        name: 'widget-event',\n                        params: {\n                            item: $data\n                        }\n                    } --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n        </div>\n    </div>\n\n    <div class=\"flex mt--medium\">\n        \x3c!-- ko component: {\n                name: 'widget-loadMore',\n                params: {\n                    dataLoader: data\n                }\n            } --\x3e\n        \x3c!-- /ko --\x3e\n    </div>\n\x3c!-- /ko --\x3e"},2715:function(t,e){t.exports='<div>\n\t<a rel="noreferrer"\n\t\ttarget="_blank"\n\t\tdata-bind="attr:{ href: url }"\n\t\tclass="btn btn-default"\n\t\thref="">\n\t\t<span class="mr--small">\n\t\t\t\x3c!-- ko component: {\n\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tname: \'external-link\'\n\t\t\t\t\t}\n\t\t\t\t} --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</span>\n\t\t{{app.tl(\'Open in new window\')}}\n\t</a>\n</div>'},2716:function(t,e){t.exports='<iframe id="viewDocIFrame" class="width--100 height--100 border--none overflow--hidden" scrolling="yes" seamless="seamless" data-bind="attr:{ src: url }"></iframe>\n\n\x3c!-- IMPORTANT - Mark this template loaded --\x3e\n\x3c!-- ko if: $data.readyToShow != null && readyToShow --\x3e\n    <div data-bind="template:{afterRender:function(){templateLoaded(true)}}" class="hidden"></div>\n\x3c!-- /ko --\x3e'},2717:function(t,e){t.exports='<div class="s-dashboard__content-section">\n    <header class="main-header mb--small">\n        <div class="main-header__base">\n            <div class="main-header__left">\n                <h2 class="main-header__title">\n                    {{app.tl(\'Activity\')}}\n                </h2>\n            </div>\n\n            <div class="main-header__right">\n\t\t\t\t\x3c!-- ko if: app.loggedInUser.administrator() || app.loggedInUser.permissions.canAddProjects() --\x3e\n                    <button type="button"\n                        data-bind="click: OnClickAddProject"\n                        class="btn btn-success main-header__button">\n                        <span class="mr--small fa-lg fa fa-plus-circle"></span>\n                        {{app.tl(\'Add Project\')}}\n                    </button>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: app.account.RSSEnabled() && app.loggedInUser.isAccount() --\x3e\n                    <button type="button"\n                        aria-label="More Options"\n                        class="btn btn-white main-header__button tipped-click mr--small"\n                        data-tipped-options="isTippedParent: true, hideOn:\'click\', hideOnClickOutside:true, inline:\'activityOptions\', skin:\'light\', position:\'bottommiddle\', hideOthers:true, showOn:\'click\'">\n                        <svg class="tipped-hide ma" data-tipped="{{app.tl(\'Options\')}}" width="3" height="13" viewBox="0 0 3 13" xmlns="http://www.w3.org/2000/svg">\n                            <path data-bind="attr: {d: app.consts.SVG.options}" fill-rule="evenodd"/>\n                        </svg>\n                    </button>\n\n                    <ul class="tippedMenu list-unstyled" id="activityOptions" style="display: none;">\n                        <li>\n                            <a href="javascript:;" data-bind="click: OnClickRSSFeed">\n                                <span class="mr--small">\n                                    \x3c!-- ko component: {\n                                            name: \'ui-common-icon\',\n                                            params: {\n                                                name: \'rss-regular\'\n                                            }\n                                        } --\x3e\n                                    \x3c!-- /ko --\x3e\n                                </span>\n                                {{app.tl(\'[_s] Feed\', \'RSS\')}}\n                            </a>\n                        </li>\n                    </ul>\n                \x3c!-- /ko --\x3e\n                \x3c!-- ko component: {\n                        name: \'ui-filterButton\',\n                        params: {\n                            hasActiveFilter: hasActiveFilter\n                        }\n                    } --\x3e\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n\n        \x3c!-- ko component: {\n                name: \'ui-filterInfo\',\n                params: {\n                    filter: filters(),\n                    numberOfRecords: ko.observable(0),\n                    mode: \'bar\',\n                    infoText: app.tl(\'Viewing filtered activities\'),\n                }\n            } --\x3e\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: app.hasFixedSecondaryNav --\x3e\n\t\t    <div class="main-header__sticky-filters-gutter"></div>\n        \x3c!--/ko--\x3e\n\n        <div class="main-header__secondary"\n            data-bind="\n                css: {\n                    \'is-fixed\': app.hasFixedSecondaryNav,\n                    \'is-new-dashboard\': true\n                }">\n            <div class="main-header__left">\n                \x3c!-- ko if: !hasActiveFilter() || app.hasFixedSecondaryNav() --\x3e\n                    \x3c!-- ko component: {\n                            name: \'ui-filterInfo\',\n                            params: {\n                                filter: filters(),\n                                numberOfRecords: ko.observable(0),\n                                mode: \'inline\',\n                                showFilterTitle: app.hasFixedSecondaryNav,\n                                showCount: false\n                            }\n                        } --\x3e\n                    \x3c!-- /ko --\x3e\n                \x3c!--/ko--\x3e\n            </div>\n\n            <div class="main-header__right main-header__secondary-filters ">\n                \x3c!-- ko component: {\n                        name: \'ui-sortOptions\',\n                        params:{\n                            sortOptions: sortByOptions,\n                            sortBy: sortBy,\n                            sortOrder: sortOrder,\n                            showSortOrder: false,\n                            label: app.tl(\'View By\')\n                        }\n                    } --\x3e\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: app.hasFixedSecondaryNav --\x3e\n                    <div class="ml--small">\n                        \x3c!-- ko if: app.loggedInUser.administrator() || app.loggedInUser.permissions.canAddProjects() --\x3e\n                            <button type="button"\n                                data-bind="click: OnClickAddProject"\n                                class="btn btn-sm btn-success main-header__button">\n                                <span class="mr--small fa-lg fa fa-plus-circle"></span>\n                                {{app.tl(\'Add Project\')}}\n                            </button>\n                        \x3c!-- /ko --\x3e\n\n                        \x3c!-- ko if: app.account.RSSEnabled() && app.loggedInUser.isAccount() --\x3e\n                            <button type="button"\n                                aria-label="More Options"\n                                class="btn btn-sm btn-white main-header__button tipped-click mr--small"\n                                data-tipped-options="isTippedParent: true, hideOn:\'click\', hideOnClickOutside:true, inline:\'activityOptions_sticky\', skin:\'light\', position:\'bottommiddle\', hideOthers:true, showOn:\'click\'">\n                                <svg class="tipped-hide ma" data-tipped="{{app.tl(\'Options\')}}" width="3" height="13" viewBox="0 0 3 13" xmlns="http://www.w3.org/2000/svg">\n                                    <path data-bind="attr: {d: app.consts.SVG.options}" fill-rule="evenodd"/>\n                                </svg>\n                            </button>\n\n                            <ul class="tippedMenu" id="activityOptions_sticky" style="display: none; list-style: none">\n                                <li>\n                                    <a href="javascript:;" data-bind="click: OnClickRSSFeed">\n                                        <span class="mr--small">\n                                            \x3c!-- ko component: {\n                                                    name: \'ui-common-icon\',\n                                                    params: {\n                                                        name: \'rss-regular\'\n                                                    }\n                                                } --\x3e\n                                            \x3c!-- /ko --\x3e\n                                        </span>\n                                        {{app.tl(\'[_s] Feed\', \'RSS\')}}\n                                    </a>\n                                </li>\n                            </ul>\n                        \x3c!-- /ko --\x3e\n\n                        \x3c!-- ko component: {\n                                name: \'ui-filterButton\',\n                                params: {\n                                    hasActiveFilter: hasActiveFilter,\n                                    buttonClasses: [\'btn-sm\']\n                                }\n                            } --\x3e\n                        \x3c!-- /ko --\x3e\n                    </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n    </header>\n\n    \x3c!-- ko ifnot: app.loggedInUser.isAccount --\x3e\n        \x3c!-- ko if: app.account.dashboardMessage() !== \'\' --\x3e\n            \x3c!-- ko component: {\n                    name: \'widget-dashboard-message\',\n                    params: {}\n                }--\x3e\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- ko if: sortBy() == \'date\' --\x3e\n        \x3c!-- ko component: {\n                name: \'section-activity-list\',\n                params: {\n                    sortBy: $component.sortBy,\n                    listMode: $component.listMode,\n                    mode: \'date\'\n                }\n            } --\x3e\n        \x3c!-- /ko --\x3e\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- ko if: sortBy() == \'project\' --\x3e\n        \x3c!-- ko if: filteredProjects().length > 0 --\x3e\n            \x3c!-- ko foreach: filteredProjects --\x3e\n                \x3c!-- ko component: {\n                    name: \'section-activity-list\',\n                        params: {\n                            sortBy: $component.sortBy,\n                            project: $data,\n                            projectId: $data.id(),\n                            pageSize: 10,\n                            index: $index(),\n                            mode: \'project\',\n                            overallResultCount: $component.overallResultCount\n                        }\n                    } --\x3e\n                \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n    \x3c!-- /ko --\x3e\n</div>'},2718:function(t,e){t.exports='\x3c!-- Comments --\x3e\n<div class="s-home__content-section">\n\n    <header class="main-header mb--small">\n\t\t<div class="main-header__base">\n\t\t\t<div class="main-header__left">\n\t\t\t\t<h2 class="main-header__title">\n\t\t\t\t\t{{ app.tl(\'My Unread Comments\') }}\n\t\t\t\t</h2>\n\t\t\t</div>\n\n\t\t\t<div class="main-header__right">\n                \x3c!-- ko if: (dataList().length > 0 && totalUnread() > 0) || (hasActiveFilter() && !app.account.isFreeAccount()) --\x3e\n                    <button type="button"\n                        aria-label="More Options"\n                        class="btn btn-white main-header__button tipped-click"\n                        data-tipped-options="isTippedParent: true, hideOn:\'click\', hideOnClickOutside:true, inline:\'commentsOptions\', skin:\'light\', position:\'bottommiddle\', hideOthers:true, showOn:\'click\'">\n                        <svg class="tipped-hide ma" data-tipped="{{app.tl(\'Options\')}}" width="3" height="13" viewBox="0 0 3 13" xmlns="http://www.w3.org/2000/svg">\n                            <path data-bind="attr: {d: app.consts.SVG.options}" fill-rule="evenodd"/>\n                        </svg>\n                    </button>\n\n                    <ul class="tippedMenu" id="commentsOptions" style="display: none; list-style: none">\n                        \x3c!-- ko if: totalUnread() > 0 --\x3e\n                            <li>\n                                <a href="javascript:;" data-bind="click: OnClickMarkAllAsRead">\n                                    <i class="fa fa-check-square-o"></i>\n                                    {{app.tl(\'Mark all as read\')}}\n                                </a>\n                            </li>\n                        \x3c!--/ko--\x3e\n\n                        \x3c!-- ko if: hasActiveFilter() && !app.account.isFreeAccount() --\x3e\n                            <li>\n                                <a href="javascript:;" data-bind="click: OnClickShareFilter">\n                                    <i class="fa fa-fw fa-share"></i>\n                                    {{app.tl(\'Share Filter\')}}\n                                </a>\n                            </li>\n                        \x3c!--/ko--\x3e\n                    </ul>\n                \x3c!-- /ko --\x3e\n\n\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\tname: \'ui-filterButton\',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\thasActiveFilter: hasActiveFilter\n\t\t\t\t\t\t}\n\t\t\t\t\t} --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</div>\n\t\t</div>\n\n\t\t\x3c!-- ko component: {\n\t\t\t\tname: \'ui-filterInfo\',\n\t\t\t\tparams: {\n\t\t\t\t\tfilter: filters(),\n\t\t\t\t\tnumberOfRecords: totalRecords,\n\t\t\t\t\tmode: \'bar\'\n\t\t\t\t}\n\t\t\t} --\x3e\n\t\t\x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: app.hasFixedSecondaryNav --\x3e\n\t\t    <div class="main-header__sticky-filters-gutter"></div>\n        \x3c!--/ko--\x3e\n\n        <div class="main-header__secondary"\n            data-bind="\n                css: {\n                    \'is-fixed\': app.hasFixedSecondaryNav,\n                    \'is-new-dashboard\': true\n                }">\n            <div class="main-header__left">\n                \x3c!-- ko if: !hasActiveFilter() || app.hasFixedSecondaryNav() --\x3e\n                    \x3c!-- ko component: {\n                            name: \'ui-filterInfo\',\n                            params: {\n                                filter: filters(),\n                                numberOfRecords: totalRecords,\n                                mode: \'inline\',\n                                showFilterTitle: app.hasFixedSecondaryNav\n                            }\n                        } --\x3e\n                    \x3c!-- /ko --\x3e\n                \x3c!--/ko--\x3e\n            </div>\n\n            <div class="main-header__right main-header__secondary-filters ">\n                \x3c!-- ko if: dataState() === \'content\' --\x3e\n                    \x3c!-- ko component: {\n                            name: \'ui-sortOptions\',\n                            params:{\n                                sortOptions: sortByOptions,\n                                sortBy: sortBy,\n                                sortOrder: sortOrder\n                            }\n                        } --\x3e\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n\n                <div class="ml--small">\n                    \x3c!-- ko component: {\n                            name: \'widget-options\',\n                            params: {\n                                selectedItem: listMode,\n                                items: listModeOptions,\n                                showTips: true\n                            }\n                        } --\x3e\n                    \x3c!-- /ko --\x3e\n                </div>\n\n                \x3c!-- ko if: app.hasFixedSecondaryNav --\x3e\n                    <div class="ml--small">\n\n                        \x3c!-- ko if: (dataList().length > 0 && totalUnread() > 0) || (hasActiveFilter() && !app.account.isFreeAccount()) --\x3e\n                            <button type="button"\n                                class="btn btn-white main-header__button tipped-click btn-sm"\n                                aria-label="More Options"\n                                data-tipped-options="\n                                    inline: \'commentListOptions-sticky\',\n                                    showOn: \'click\',\n                                    hideOthers: true,\n                                    hideOn: \'click\',\n                                    hideOnClickOutside: true,\n                                    skin: \'light\',\n                                    position:{\n                                        target: \'bottommiddle\',\n                                        tooltip: \'topright\'\n                                    }">\n                                <svg class="tipped-hide ma" width="3" height="13" viewBox="0 0 3 13" xmlns="http://www.w3.org/2000/svg" data-tipped="{{app.tl(\'Options\')}}">\n                                    <path data-bind="attr: {d: app.consts.SVG.options}" fill-rule="evenodd"/>\n                                </svg>\n                            </button>\n\n                            <div id="commentListOptions-sticky" style="display:none;">\n                                <ul class="tippedMenu">\n                                    \x3c!-- ko if: totalUnread() > 0 --\x3e\n                                        <li>\n                                            <a href="javascript:;" data-bind="click:OnClickMarkAllAsRead">\n                                                <i class="fa fa-check-square-o"></i>\n                                                {{app.tl(\'Mark all as read\')}}\n                                            </a>\n                                        </li>\n                                    \x3c!--/ko--\x3e\n\n                                    \x3c!-- ko if: hasActiveFilter() && !app.account.isFreeAccount() --\x3e\n                                        <li>\n                                            <a href="javascript:;" data-bind="click: $component.OnClickShareFilter">\n                                                <i class="fa fa-fw fa-share"></i>\n                                                {{app.tl(\'Share Filter\')}}\n                                            </a>\n                                        </li>\n                                    \x3c!--/ko--\x3e\n                                </ul>\n                            </div>\n                        \x3c!-- /ko --\x3e\n\n                        \x3c!-- ko component: {\n                                name: \'ui-filterButton\',\n                                params: {\n                                    hasActiveFilter: hasActiveFilter,\n                                    buttonClasses: [\'btn-sm\']\n                                }\n                            } --\x3e\n                        \x3c!-- /ko --\x3e\n                    </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n\t</header>\n\n    \x3c!-- ko component: {\n            name: \'section-comments-list\',\n            params: {\n                listMode: listMode,\n                filterKey: \'homeComments\',\n                showBlankState: true,\n                allowReplies: true\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n</div>'},2719:function(t,e){t.exports='<script type="text/html" id="dashboard-section-metrics">\n    <h4 class="s-dashboard__section-title" data-click="$component.OnClickToggleMetrics">\n        <span class="s-dashboard__section-title-content" >\n            {{app.tl(\'Metrics\')}}\n        </span>\n\n        <span class="s-dashboard__section-title-separator" ></span>\n\n        <span class="s-dashboard__section-title-options">\n            <a class="s-dashboard__section-title-options__toggle"\n\t\t\t\tdata-click="$component.OnClickToggleMetrics">\n                \x3c!-- ko ifnot: metricsCollapsed --\x3e\n                    {{app.tl(\'Hide Metrics\')}}\n                    <i class="fa fa-angle-up fa-fw"></i>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: metricsCollapsed --\x3e\n                    {{app.tl(\'Show Metrics\')}}\n                    <i class="fa fa-angle-down fa-fw"></i>\n                \x3c!-- /ko --\x3e\n            </a>\n        </span>\n    </h4>\n\n    \x3c!-- ko ifnot: metricsCollapsed --\x3e\n        <div class="s-dashboard__section-content">\n            \x3c!-- ko component: {\n                    name: \'section-dashboard-metrics\',\n                    params: {\n\t\t\t\t\t\tpanels: selectedDashboard().panels,\n\t\t\t\t\t\tisShared: selectedDashboard().userId() != app.loggedInUser.id()\n                    }\n                } --\x3e\n            \x3c!-- /ko --\x3e\n        </div>\n    \x3c!-- /ko --\x3e\n<\/script>\n\n<script type="text/html" id="dashboard-section-projects">\n    <header class="main-header border-bottom--none mb--none">\n        <div class="main-header__secondary">\n            <h4 class="s-dashboard__section-title" data-click="OnClickToggleProjects">\n                <span class="s-dashboard__section-title-content" >\n                    {{app.tl(\'Projects\')}}\n                </span>\n\n                <span class="s-dashboard__section-title-separator" ></span>\n\n                <span class="s-dashboard__section-title-options" >\n                    <a class="s-dashboard__section-title-options__toggle"\n\t\t\t\t\t\tdata-click="OnClickToggleProjects">\n                        \x3c!-- ko if: shouldDisplayProjects --\x3e\n                            {{app.tl(\'Hide Projects\')}}\n                            <i class="fa fa-angle-up fa-fw"></i>\n                        \x3c!-- /ko --\x3e\n\n                        \x3c!-- ko ifnot: shouldDisplayProjects --\x3e\n                            {{app.tl(\'Show Projects\')}}\n                            <i class="fa fa-angle-down fa-fw"></i>\n                        \x3c!-- /ko --\x3e\n                    </a>\n                </span>\n            </h4>\n\n            \x3c!-- ko if: shouldDisplayProjects --\x3e\n                <div class="main-header__right ml--medium main-header__secondary-filters">\n                    \x3c!-- ko component: {\n                            name: \'ui-sortOptions\',\n                            params:{\n                                sortOptions: projectsSortByOptions,\n                                sortBy: projectsSortBy,\n                                sortOrder: projectsSortOrder\n                            }\n                        } --\x3e\n                    \x3c!-- /ko --\x3e\n\n                    <div class="ml--small">\n                        \x3c!-- ko component: {\n                                name: \'widget-options\',\n                                params: {\n                                    selectedItem: projectsListMode,\n                                    items: projectsListModeOptions,\n                                    showTips: true\n                                }\n                            } --\x3e\n                        \x3c!-- /ko --\x3e\n                    </div>\n                </div>\n            \x3c!-- /ko --\x3e\n        </div>\n    </header>\n\n    \x3c!-- ko if: projectsListParameters --\x3e\n        <div class="s-dashboard__section-content">\n            \x3c!-- ko component: {\n                    name: \'section-projects-list-new\',\n                    params: projectsListParameters()\n                } --\x3e\n            \x3c!-- /ko --\x3e\n        </div>\n    \x3c!-- /ko --\x3e\n<\/script>\n\n<div class="s-home__content-section">\n\n    <header class="main-header">\n        <div class="main-header__base">\n            <div class="main-header__left">\n                <h2 class="main-header__title">\n\t\t\t\t\t<a href="javascript:;"\n\t\t\t\t\t\tdata-bind="click: OnClickViewAllDashboards"\n\t\t\t\t\t\tclass="text-decoration--none color--inherit tipped-hide"\n\t\t\t\t\t\tdata-tipped="{{app.tl(\'View all dashboards\')}}"\n\t\t\t\t\t\tdata-tipped-options="position: \'bottommiddle\'">\n\t\t\t\t\t\t\x3c!-- ko ifnot: shouldShowDashboard --\x3e\n\t\t\t\t\t\t\t{{ app.tl(\'My Dashboards\') }}\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\x3c!-- ko if: shouldShowDashboard --\x3e\n\t\t\t\t\t\t\t{{ app.tl(\'Dashboards\') }}\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</a>\n\t\t\t\t\x3c!-- ko if: shouldShowDashboard --\x3e\n\t\t\t\t\t<span class="font-size--medium color--gray-light mx--small">\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tname: \'chevron-right-regular\',\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class="color--gray-light">\n\t\t\t\t\t\t{{ currentPageTitle }}\n\t\t\t\t\t</span>\n\t\t\t\t\x3c!-- /ko --\x3e\n                </h2>\n            </div>\n\n            <div class="main-header__right">\n                <button type="button"\n                    data-bind="click: OnClickAddDashboard"\n                    aria-label="More Options"\n                    class="btn btn-success main-header__button">\n                    <span class="mr--small fa-lg fa fa-plus-circle"></span>\n                    {{app.tl(\'Add Dashboard\')}}\n                </button>\n\n                \x3c!-- ko if: canEditDashboard --\x3e\n                    <button type="button"\n                        data-bind="click: OnClickEditDashboard"\n                        aria-label="More Options"\n                        class="btn btn-white main-header__button">\n                        <span class="mr--small">\n                            \x3c!-- ko component: {\n                                    name: \'ui-common-icon\',\n                                    params: {\n                                        name: \'settings-regular\'\n                                    }\n                                } --\x3e\n                            \x3c!-- /ko --\x3e\n                        </span>\n                        {{app.tl(\'Customize\')}}\n                    </button>\n\n                    <button type="button"\n\t\t\t\t\t\taria-label="More Options"\n\t\t\t\t\t\tclass="btn btn-white main-header__button tipped-click"\n                        data-tipped-options="\n                            hideOn: \'click\',\n                            hideOnClickOutside: true,\n                            inline: \'dashboardOptions\',\n                            skin: \'light\',\n                            position: \'bottommiddle\',\n                            hideOthers: true,\n                            showOn: \'click\'">\n\n                        \x3c!-- ko component: {\n                                name: \'ui-common-icon\',\n                                params: {\n                                    name: \'ellipsis-v-regular\'\n                                }\n                            } --\x3e\n                        \x3c!-- /ko --\x3e\n\t\t\t\t\t</button>\n\n                    <ul class="tippedMenu" id="dashboardOptions" style="display:none;list-style:none">\n                        <li>\n                            <a href="javascript:;" data-bind="click: $component.OnClickDuplicateDashboard">\n                                {{app.tl(\'Make a copy\')}}\n                            </a>\n                        </li>\n                        <li>\n                            <a href="javascript:;" data-bind="click: $component.OnClickDeleteDashboard">\n                                {{app.tl(\'Delete\')}}\n                            </a>\n                        </li>\n\t\t\t\t\t</ul>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n\n        \x3c!-- ko if: shouldShowDashboard() && !shouldShowOnboardingPrompt() --\x3e\n            <div class="w-filter-info-bar w-filter-info-bar--is-multiline py--medium"\n                data-bind="visible: dashboardInfo().length">\n                <div class="w-filter-info-bar__lip w-filter-info-bar__lip--is-active"></div>\n\n                <div class="w-filter-info-bar__info">\n                    {{{ dashboardInfo }}}\n                </div>\n\n                \x3c!-- ko if: activeProjectFilters().length --\x3e\n                    <div class="w-filter-info-bar__extra">\n                        \x3c!-- ko foreach: activeProjectFilters --\x3e\n                            \x3c!-- ko if: type == \'starred\' --\x3e\n                                <div class="w-filter-info-bar__extra-item">\n                                    <div class="w-filter-info-bar__extra-item-label">\n                                        \x3c!-- ko component: {\n                                                name: \'ui-common-icon\',\n                                                params: {\n                                                    name: \'star-regular\',\n                                                }\n                                            } --\x3e\n                                        \x3c!-- /ko  --\x3e\n                                    </div>\n\n                                    <div class="w-filter-info-bar__extra-item-value">\n                                        {{label}}:\n                                    </div>\n                                </div>\n                            \x3c!-- /ko --\x3e\n\n                            \x3c!-- ko ifnot: type == \'starred\' --\x3e\n                                <div class="w-filter-info-bar__extra-item">\n                                    <div class="w-filter-info-bar__extra-item-label">\n                                        {{label}}:\n                                    </div>\n\n                                    <div class="w-filter-info-bar__extra-item-value">\n                                        {{{summary}}}\n                                    </div>\n                                </div>\n                            \x3c!-- /ko --\x3e\n                        \x3c!-- /ko --\x3e\n                    </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        \x3c!-- /ko --\x3e\n    </header>\n\n    \x3c!-- ko if: shouldShowOnboardingPrompt --\x3e\n        <div class="mb--xlarge">\n            \x3c!-- ko component: {\n                    name: \'ui-inlineAlert\',\n                    params: {\n                        image: \'//cdn.teamwork.com/tko/public/assets/gif/newdashboard-box-illustration-animation-02.gif\',\n                        title: app.tl("Here is your personal dashboard"),\n                        message: app.tl("Your dashboard shows you what\'s happening across your projects. Try editing it, or add another for different views"),\n                        link: \'https://support.teamwork.com/projects/home/working-with-dashboards?preview=true\',\n                        linkText: app.tl(\'Learn more\'),\n                        onClickClose: OnClickClosePrompt\n                    }\n                } --\x3e\n            \x3c!-- /ko --\x3e\n        </div>\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- ko if: shouldShowDashboard() && app.account.dashboardMessage() !== \'\' --\x3e\n        \x3c!-- ko component: {\n                name: \'widget-dashboard-message\',\n                params: {}\n            }--\x3e\n        \x3c!-- /ko --\x3e\n    \x3c!-- /ko --\x3e\n</div>\n\n\x3c!-- Dashboard --\x3e\n<div class="s-dashboard {{cssClass}}">\n    \x3c!-- ko if: shouldShowBlankSlate --\x3e\n        \x3c!-- ko component: {\n                name: \'list-state-blank\',\n                params: {\n                    itemType: \'dashboard\',\n                    showButton: true,\n                    onClickButton: OnClickAddDashboard,\n                    buttonText: app.tl(\'Get Started\'),\n                    title: app.tl(\'Build Your Dashboard\'),\n                    msg: app.tl(\'Make the dashboard your own. Create your own view and choose what matters most to you.\')\n                }\n            } --\x3e\n        \x3c!-- /ko--\x3e\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- ko if: shouldShowLoadingSlate --\x3e\n        \x3c!-- ko component: {\n                name: \'list-state-loading-new\',\n                params: {\n                    itemType: \'dashboard\',\n                    format: \'dashboard\',\n                    showText: true,\n                    loadingText: loadingText\n                }\n            } --\x3e\n        \x3c!-- /ko--\x3e\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- ko if: shouldShowListView --\x3e\n        \x3c!-- ko if: savedDashboards.state() == \'content\' --\x3e\n            <div class="u-boards-list">\n                \x3c!-- ko foreach: visibleSavedDashboards --\x3e\n                    <div class="u-boards-list__block">\n                        <div class="u-boards-list__item mr--medium mb--medium">\n                            <div class="u-boards-list__item-wrapper">\n                                <div class="u-boards-list__item-base" data-bind="click: $component.OnClickDashboardInList">\n                                    \x3c!-- ko if: color() == \'\' --\x3e\n                                        <div class="u-boards-list__item-icon u-boards-list__item-icon--default-color">\n                                            <span class="font-size--large">\n                                                \x3c!-- ko component: {\n                                                        name: \'ui-common-icon\',\n                                                        params: {\n                                                            name: \'graph-regular\',\n                                                            color: \'#f2f2f2\'\n                                                        }\n                                                    } --\x3e\n                                                \x3c!-- /ko --\x3e\n                                            </span>\n                                        </div>\n                                    \x3c!-- /ko --\x3e\n\n                                    \x3c!-- ko ifnot: color() == \'\' --\x3e\n                                        <div class="u-boards-list__item-icon" data-bind="style: {\n                                            \'background-color\': color\n                                        }">\n                                            <span class="font-size--large">\n                                                \x3c!-- ko component: {\n                                                        name: \'ui-common-icon\',\n                                                        params: {\n                                                            name: \'graph-regular\',\n                                                            color: \'#ffffff\'\n                                                        }\n                                                    } --\x3e\n                                                \x3c!-- /ko --\x3e\n                                            </span>\n                                        </div>\n                                    \x3c!-- /ko --\x3e\n\n                                    <h4 class="u-boards-list__item-title">\n                                        <a href="javascript:;">\n                                            {{ title }}\n                                        </a>\n                                    </h4>\n\n                                    <div class="u-boards-list__item-description">\n                                        \x3c!-- ko if: description() != \'\' --\x3e\n                                            {{description}}\n                                        \x3c!--/ko--\x3e\n                                    </div>\n                                </div>\n\n                            <div class="u-boards-list__item-edit">\n                                <button class="u-boards-list__item-action btn btn-link tipped-delegate show-on-click"\n                                    type="button"\n                                    data-tipped-options="\n                                        container: \'.tipped-container\',\n                                        containment: {\n                                            selector: \'.tipped-container\'\n                                        },\n                                        skin: \'light\',\n                                        hideOn: false,\n                                        hideAfter: 300,\n                                        showOn: \'click\',\n                                        position: \'bottommiddle\',\n                                        offset: {\n                                            y: -10\n                                        }"\n                                        data-content="{{$component.tippedContent}}">\n                                        <i class="fa fa-angle-down" aria-label="Options" aria-hidden="true"></i>\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                \x3c!-- /ko --\x3e\n\t\t\t</div>\n\t\t\t\x3c!-- ko if: visibleSharedDashboards().length > 0 || hiddenSharedDashboards().length > 0--\x3e\n\t\t\t\t<h3 class="font-weight--normal my--none py--xlarge">\n\t\t\t\t\t{{app.tl(\'Shared With Me\')}}\n\t\t\t\t</h3>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\x3c!-- ko if: visibleSharedDashboards().length > 0 --\x3e\n\t\t\t\t<div class="u-boards-list">\n\t\t\t\t\t\x3c!-- ko foreach: visibleSharedDashboards --\x3e\n\t\t\t\t\t\t<div class="u-boards-list__block">\n\t\t\t\t\t\t\t<div class="u-boards-list__item mr--medium mb--medium">\n\t\t\t\t\t\t\t\t<div class="u-boards-list__item-wrapper">\n\t\t\t\t\t\t\t\t\t<div class="u-boards-list__item-base" data-bind="click: $component.OnClickDashboardInList">\n\t\t\t\t\t\t\t\t\t\t\x3c!-- ko if: color() == \'\' --\x3e\n\t\t\t\t\t\t\t\t\t\t\t<div class="u-boards-list__item-icon u-boards-list__item-icon--default-color">\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="font-size--large">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: \'graph-regular\',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: \'#f2f2f2\'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\t\t\x3c!-- ko ifnot: color() == \'\' --\x3e\n\t\t\t\t\t\t\t\t\t\t\t<div class="u-boards-list__item-icon" data-bind="style: {\n\t\t\t\t\t\t\t\t\t\t\t\t\'background-color\': color\n\t\t\t\t\t\t\t\t\t\t\t}">\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="font-size--large">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: \'graph-regular\',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: \'#ffffff\'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\t\t<h4 class="u-boards-list__item-title">\n\t\t\t\t\t\t\t\t\t\t\t<a href="javascript:;">\n\t\t\t\t\t\t\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko if: app.loggedInUser.preferences.defaultDashboardId() == id() --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t\t<small>({{app.tl(\'Active\')}})</small>\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</h4>\n\n\t\t\t\t\t\t\t\t\t\t<div class="u-boards-list__item-description">\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko if: description() != \'\' --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t{{description}}\n\t\t\t\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class="u-boards-list__item-edit">\n\t\t\t\t\t\t\t\t\t<button class="u-boards-list__item-action btn btn-link tipped-delegate show-on-click"\n\t\t\t\t\t\t\t\t\t\ttype="button"\n\t\t\t\t\t\t\t\t\t\tdata-tipped-options="\n\t\t\t\t\t\t\t\t\t\t\tcontainer: \'.tipped-container\',\n\t\t\t\t\t\t\t\t\t\t\tcontainment: {\n\t\t\t\t\t\t\t\t\t\t\t\tselector: \'.tipped-container\'\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tskin: \'light\',\n\t\t\t\t\t\t\t\t\t\t\thideOn: false,\n\t\t\t\t\t\t\t\t\t\t\thideAfter: 300,\n\t\t\t\t\t\t\t\t\t\t\tshowOn: \'click\',\n\t\t\t\t\t\t\t\t\t\t\tposition: \'bottommiddle\',\n\t\t\t\t\t\t\t\t\t\t\toffset: {\n\t\t\t\t\t\t\t\t\t\t\t\ty: -10\n\t\t\t\t\t\t\t\t\t\t\t}"\n\t\t\t\t\t\t\t\t\t\t\tdata-content="{{$component.tippedContent}}">\n\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-angle-down" aria-label="Options" aria-hidden="true"></i>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</div>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\x3c!-- ko if: hiddenSharedDashboards().length > 0 --\x3e\n\t\t\t\t\x3c!-- ko ifnot: showHidden --\x3e\n\t\t\t\t\t<span class="m--small">\n\t\t\t\t\t\t\x3c!-- ko ifnot: visibleSharedDashboards().length > 0 --\x3e\n\t\t\t\t\t\t\t{{app.tl(\'You have no visible shared dashboards\' )}}\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\x3c!-- ko if: visibleSharedDashboards().length > 0 --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: hiddenSharedDashboards().length == 1 --\x3e\n\t\t\t\t\t\t\t\t{{app.tl(\'You have hidden [_s] shared dashboard\', hiddenSharedDashboards().length )}}\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: hiddenSharedDashboards().length > 1 --\x3e\n\t\t\t\t\t\t\t\t{{app.tl(\'You have hidden [_s] shared dashboards\', hiddenSharedDashboards().length )}}\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</span>\n\t\t\t\t\t<a href="javascript:;" class="m--small mb--medium" data-bind="click: OnClickToggleHidden">\n\t\t\t\t\t\t{{app.tl(\'Show hidden dashboards\')}}\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\tparams: {\n                                    name: \'chevron-down-regular\',\n                                    class: \'color--inherit\'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</a>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\x3c!-- ko if: showHidden --\x3e\n\t\t\t\t\t<a href="javascript:;" class="m--small" data-bind="click: OnClickToggleHidden">\n\t\t\t\t\t\t{{app.tl(\'Hide hidden dashboards\')}}\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\tparams: {\n                                    name: \'chevron-up-regular\',\n                                    class: \'color--inherit\'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</a>\n\t\t\t\t\t<div class="u-boards-list pt--small">\n\t\t\t\t\t\t\x3c!-- ko foreach: hiddenSharedDashboards --\x3e\n\t\t\t\t\t\t\t<div class="u-boards-list__block">\n\t\t\t\t\t\t\t\t<div class="u-boards-list__item mr--medium mb--medium">\n\t\t\t\t\t\t\t\t\t<div class="u-boards-list__item-wrapper">\n\t\t\t\t\t\t\t\t\t\t<div class="u-boards-list__item-base" data-bind="click: $component.OnClickDashboardInList">\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko if: color() == \'\' --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="u-boards-list__item-icon u-boards-list__item-icon--default-color">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="font-size--large">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: \'graph-regular\',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: \'#f2f2f2\'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko ifnot: color() == \'\' --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="u-boards-list__item-icon" data-bind="style: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\'background-color\': color\n\t\t\t\t\t\t\t\t\t\t\t\t}">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="font-size--large">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: \'graph-regular\',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: \'#ffffff\'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\t\t\t<h4 class="u-boards-list__item-title">\n\t\t\t\t\t\t\t\t\t\t\t\t<a href="javascript:;">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<small>({{app.tl(\'Hidden\')}})</small>\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t</h4>\n\n\t\t\t\t\t\t\t\t\t\t\t<div class="u-boards-list__item-description">\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko if: description() != \'\' --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{description}}\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div class="u-boards-list__item-edit">\n\t\t\t\t\t\t\t\t\t\t<button class="u-boards-list__item-action btn btn-link tipped-delegate show-on-click"\n\t\t\t\t\t\t\t\t\t\t\ttype="button"\n\t\t\t\t\t\t\t\t\t\t\tdata-tipped-options="\n\t\t\t\t\t\t\t\t\t\t\t\tcontainer: \'.tipped-container\',\n\t\t\t\t\t\t\t\t\t\t\t\tcontainment: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tselector: \'.tipped-container\'\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\tskin: \'light\',\n\t\t\t\t\t\t\t\t\t\t\t\thideOn: false,\n\t\t\t\t\t\t\t\t\t\t\t\thideAfter: 300,\n\t\t\t\t\t\t\t\t\t\t\t\tshowOn: \'click\',\n\t\t\t\t\t\t\t\t\t\t\t\tposition: \'bottommiddle\',\n\t\t\t\t\t\t\t\t\t\t\t\toffset: {\n\t\t\t\t\t\t\t\t\t\t\t\t\ty: -10\n\t\t\t\t\t\t\t\t\t\t\t\t}"\n\t\t\t\t\t\t\t\t\t\t\t\tdata-content="{{$component.tippedContent}}">\n\t\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-angle-down" aria-label="Options" aria-hidden="true"></i>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</div>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\n        \x3c!-- /ko --\x3e\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- ko if: shouldShowDashboard --\x3e\n        \x3c!-- ko foreach: sectionsInOrder--\x3e\n            <div class="s-dashboard__section"\n                data-bind="\n                    css: {\n                        \'s-dashboard__section--metrics\': $data == \'metrics\',\n                        \'s-dashboard__section--projects\': $data == \'projects\'\n                    },\n                    template: {\n                        name: \'dashboard-section-\' + $data,\n                        data: $component\n                    }">\n            </div>\n        \x3c!-- /ko --\x3e\n    \x3c!-- /ko --\x3e\n</div>'},2720:function(t,e){t.exports='<ul class="tippedMenu">\n    \x3c!-- <li>\n        <a href="javascript:;" data-bind="click: $component.OnClickShareDashboard">\n            {{app.tl(\'Share\')}}\n        </a>\n    </li> --\x3e\n    \x3c!-- ko if: canEdit --\x3e\n        <li>\n            <a href="javascript:;" data-bind="click: $component.OnClickEditDashboard">\n                {{app.tl(\'Edit\')}}\n            </a>\n        </li>\n    \x3c!-- /ko --\x3e\n    <li>\n        <a href="javascript:;" data-bind="click: $component.OnClickDuplicateDashboard">\n            {{app.tl(\'Make a copy\')}}\n        </a>\n    </li>\n    \x3c!-- ko if: canEdit --\x3e\n        <li>\n            <a href="javascript:;" data-bind="click: $component.OnClickDeleteDashboard">\n                {{app.tl(\'Delete\')}}\n            </a>\n        </li>\n\t\x3c!-- /ko --\x3e\n\t\x3c!-- ko ifnot: canEdit --\x3e\n\t\t<li>\n\t\t\t<a href="javascript:;" data-bind="click: $component.OnClickToggleHideForMe">\n\t\t\t\t\x3c!-- ko ifnot: isHidden --\x3e\n\t\t\t\t{{app.tl(\'Hide this dashboard\')}}\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\x3c!-- ko if: isHidden --\x3e\n\t\t\t\t{{app.tl(\'Show this dashboard\')}}\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</a>\n\t\t</li>\n    \x3c!-- /ko --\x3e\n\n</ul>'},2721:function(t,e){t.exports='\x3c!-- Events --\x3e\n<div class="s-home__content-section">\n\n    <header class="main-header mb--small">\n\t\t<div class="main-header__base">\n\t\t\t<div class="main-header__left">\n\t\t\t\t<h2 class="main-header__title">\n\t\t\t\t\t{{app.tl(\'Events\')}}\n\t\t\t\t</h2>\n\t\t\t</div>\n\n\t\t\t<div class="main-header__right">\n                \x3c!-- ko if: app.loggedInUser.isAccount --\x3e\n                    <button type="button"\n                        class="btn btn-success main-header__button mr"\n                        data-bind="click: OnClickAddEvent">\n                        {{app.tl(\'Add Event\')}}\n                    </button>\n                \x3c!-- /ko --\x3e\n\n                <button type="button"\n                    aria-label="More Options"\n                    class="btn btn-white main-header__button tipped-click"\n                    data-tipped-options="isTippedParent: true, hideOn:\'click\', hideOnClickOutside:true, inline:\'eventsOptions\', skin:\'light\', position:\'bottommiddle\', hideOthers:true, showOn:\'click\', padding: false">\n                    <svg class="tipped-hide ma" data-tipped="{{app.tl(\'Options\')}}" width="3" height="13" viewBox="0 0 3 13" xmlns="http://www.w3.org/2000/svg">\n                        <path data-bind="attr: {d: app.consts.SVG.options}" fill-rule="evenodd"/>\n                    </svg>\n                </button>\n\n                <div id="eventsOptions" style="display: none;" class="w-options-list w-options-list--tipped">\n                    <ul class="w-options-list__list">\n                        \x3c!-- ko if: hasActiveFilter --\x3e\n                            <li data-bind="click: OnClickShareFilter">\n                                <a class="w-options-list__item" href="javascript:;">\n                                    <i class="w-options-list__icon fa fa-fw fa-share"></i>\n                                    <span class="w-options-list__text">{{app.tl(\'Share Filter\')}}</span>\n                                </a>\n                            </li>\n                        \x3c!-- /ko --\x3e\n                        \x3c!-- ko if: app.loggedInUser.isAccount --\x3e\n                            <li data-bind="click: OnClickICalFeeds">\n                                <a class="w-options-list__item" href="javascript:;">\n                                    <i class="w-options-list__icon icon-calendar icon-large"></i>\n                                    <span class="w-options-list__text">{{app.tl(\'[_s] feeds\', \'iCal\')}}</span>\n                                </a>\n                            </li>\n                        \x3c!-- /ko --\x3e\n                        <li data-bind="click: OnClickPrintAgenda">\n                            <a class="w-options-list__item" href="javascript:;">\n                                <i class="w-options-list__icon icon-print icon-large"></i>\n                                <span class="w-options-list__text">{{app.tl(\'Download Agenda\')}} (PDF)</span>\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n\n\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\tname: \'ui-filterButton\',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\thasActiveFilter: hasActiveFilter\n\t\t\t\t\t\t}\n\t\t\t\t\t} --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</div>\n\t\t</div>\n\n\t\t\x3c!-- ko component: {\n\t\t\t\tname: \'ui-filterInfo\',\n\t\t\t\tparams: {\n\t\t\t\t\tfilter: filters(),\n\t\t\t\t\tnumberOfRecords: totalRecords,\n\t\t\t\t\tmode: \'bar\'\n\t\t\t\t}\n\t\t\t} --\x3e\n\t\t\x3c!-- /ko --\x3e\n\n\t\t\x3c!-- ko if: app.hasFixedSecondaryNav --\x3e\n\t\t\t<div class="main-header__sticky-filters-gutter"></div>\n        \x3c!--/ko--\x3e\n\n        <div class="main-header__secondary"\n            data-bind="\n                css: {\n                    \'is-fixed\': app.hasFixedSecondaryNav,\n                    \'is-new-dashboard\': true\n                }">\n            <div class="main-header__left">\n                \x3c!-- ko if: !hasActiveFilter() || app.hasFixedSecondaryNav() --\x3e\n                    \x3c!-- ko component: {\n                            name: \'ui-filterInfo\',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tfilter: filters(),\n\t\t\t\t\t\t\t\tnumberOfRecords: totalRecords,\n\t\t\t\t\t\t\t\tmode: \'inline\',\n\t\t\t\t\t\t\t\tshowFilterTitle: app.hasFixedSecondaryNav\n\t\t\t\t\t\t\t}\n                        } --\x3e\n                    \x3c!-- /ko --\x3e\n                \x3c!--/ko--\x3e\n            </div>\n\n            <div class="main-header__right main-header__secondary-filters ">\n                \x3c!-- ko component: {\n\t\t\t\t\t\tname: \'ui-sortOptions\',\n\t\t\t\t\t\tparams:{\n\t\t\t\t\t\t\tsortOptions: sortByOptions,\n\t\t\t\t\t\t\tsortBy: sortBy,\n\t\t\t\t\t\t\tsortOrder: sortOrder\n\t\t\t\t\t\t}\n\t\t\t\t\t} --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: app.hasFixedSecondaryNav --\x3e\n                    <div class="ml--small">\n                        <button type="button"\n                            class="btn btn-white main-header__button tipped-click btn-sm"\n                            aria-label="More Options"\n                            data-tipped-options="\n                                inline: \'eventsOptions-sticky\',\n                                showOn: \'click\',\n                                hideOthers: true,\n                                hideOn: \'click\',\n                                hideOnClickOutside: true,\n                                skin: \'light\',\n                                position:{\n                                    target: \'bottommiddle\',\n                                    tooltip: \'topright\'\n                                }">\n                            <svg class="tipped-hide ma" width="3" height="13" viewBox="0 0 3 13" xmlns="http://www.w3.org/2000/svg" data-tipped="{{app.tl(\'Options\')}}">\n                                <path data-bind="attr: {d: app.consts.SVG.options}" fill-rule="evenodd"/>\n                            </svg>\n                        </button>\n\n                        <div id="eventsOptions-sticky" style="display:none;">\n                            <ul class="tippedMenu">\n                                \x3c!-- ko if: hasActiveFilter --\x3e\n                                    <li>\n                                        <a href="javascript:;" data-bind="click: OnClickShareFilter">\n                                            <i class="fa fa-share"></i>\n                                            {{app.tl(\'Share Filter\')}}\n                                        </a>\n                                    </li>\n                                \x3c!-- /ko --\x3e\n                                <li>\n                                    <a data-bind="click: OnClickICalFeeds" href="javascript:;">\n                                        <i class="icon-calendar icon-large"></i>\n                                        {{app.tl(\'[_s] feeds\', \'iCal\')}}\n                                    </a>\n                                </li>\n                                <li>\n                                    <a data-bind="click: OnClickPrintAgenda" href="javascript:;">\n                                        <i class="icon-print icon-large"></i>\n                                        {{app.tl(\'Download Agenda\')}}\n                                        <span class="subtle">(PDF)</span>\n                                    </a>\n                                </li>\n                            </ul>\n                        </div>\n\n                        \x3c!-- ko component: {\n                                name: \'ui-filterButton\',\n                                params: {\n                                    hasActiveFilter: hasActiveFilter,\n                                    buttonClasses: [\'btn-sm\']\n                                }\n                            } --\x3e\n                        \x3c!-- /ko --\x3e\n                    </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n\t</header>\n\n    \x3c!-- ko component: {\n            name: \'section-events-list-new\',\n            params: {}\n        } --\x3e\n    \x3c!-- /ko --\x3e\n</div>'},2722:function(t,e){t.exports="<div class=\"s-home__content-section\">\n\t<header class=\"main-header mb--small\">\n\t\t<div class=\"main-header__base\">\n\t\t\t<div class=\"main-header__left\">\n\t\t\t\t<h2 class=\"main-header__title\">\n\t\t\t\t\t{{app.tl('My Unread Messages')}}\n\t\t\t\t</h2>\n\t\t\t</div>\n\t\t\t<div class=\"main-header__right\">\n\t\t\t\t\x3c!-- ko if: totalRecords() > 0 --\x3e\n\t\t\t\t\t<button type=\"button\" aria-label=\"More Options\" class=\"btn btn-white main-header__button tipped-click\" data-tipped-options=\"\n\t\t\t\t\t\tcontainer: '.tipped-container',\n\t\t\t\t\t\tisTippedParent: true,\n\t\t\t\t\t\thideOn: 'click',\n\t\t\t\t\t\thideOnClickOutside: true,\n\t\t\t\t\t\tinline: 'messagesOptions',\n\t\t\t\t\t\tskin: 'light',\n\t\t\t\t\t\tposition: 'bottommiddle',\n\t\t\t\t\t\thideOthers: true,\n\t\t\t\t\t\tshowOn: 'click'\">\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: 'ui-common-icon',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tname: 'ellipsis-v-regular'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko--\x3e\n\t\t\t\t\t</button>\n\n\t\t\t\t\t<ul class=\"tippedMenu\" id=\"messagesOptions\" style=\"display: none; list-style: none\">\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a href=\"javascript:;\" data-click=\"OnClickMarkAllAsRead\">\n\t\t\t\t\t\t\t\t<i class=\"fa fa-check-square-o h-pointer-e--none\"></i>\n\t\t\t\t\t\t\t\t{{app.tl('Mark all as read')}}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\tname: 'ui-filterButton',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\thasActiveFilter: hasActiveFilter\n\t\t\t\t\t\t}\n\t\t\t\t\t} --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</div>\n\t\t</div>\n\n\t\t\x3c!-- ko component: {\n\t\t\t\tname: 'ui-filterInfo',\n\t\t\t\tparams: {\n\t\t\t\t\tfilter: filters(),\n\t\t\t\t\tnumberOfRecords: totalRecords,\n\t\t\t\t\tmode: 'bar'\n\t\t\t\t}\n\t\t\t} --\x3e\n\t\t\x3c!-- /ko --\x3e\n\n\t\t\x3c!-- ko if: app.hasFixedSecondaryNav --\x3e\n\t\t\t<div class=\"main-header__sticky-filters-gutter\"></div>\n        \x3c!--/ko--\x3e\n\n        <div class=\"main-header__secondary\"\n            data-bind=\"\n                css: {\n                    'is-fixed': app.hasFixedSecondaryNav,\n                    'is-new-dashboard': true\n                }\">\n            <div class=\"main-header__left\">\n\t\t\t\t\x3c!-- ko if: (!hasActiveFilter() || app.hasFixedSecondaryNav()) && totalRecords() --\x3e\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: 'ui-filterInfo',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tfilter: filters(),\n\t\t\t\t\t\t\t\tnumberOfRecords: totalRecords,\n\t\t\t\t\t\t\t\tmode: 'inline',\n\t\t\t\t\t\t\t\tshowFilterTitle: app.hasFixedSecondaryNav\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n                \x3c!--/ko--\x3e\n            </div>\n\n            <div class=\"main-header__right main-header__secondary-filters \">\n                \x3c!-- ko component: {\n\t\t\t\t\t\tname: 'ui-sortOptions',\n\t\t\t\t\t\tparams:{\n\t\t\t\t\t\t\tsortOptions: sortByOptions,\n\t\t\t\t\t\t\tsortBy: sortBy,\n\t\t\t\t\t\t\tsortOrder: sortOrder\n\t\t\t\t\t\t}\n\t\t\t\t\t} --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t<div class=\"ml--small\">\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: 'widget-options',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tselectedItem: listMode,\n\t\t\t\t\t\t\t\titems: listModeOptions,\n\t\t\t\t\t\t\t\tshowTips: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</div>\n\n                \x3c!-- ko if: app.hasFixedSecondaryNav --\x3e\n                    <div class=\"ml--small\">\n\t\t\t\t\t\t\x3c!-- ko if: totalRecords() > 0 --\x3e\n\t\t\t\t\t\t\t<button type=\"button\" aria-label=\"More Options\"\n\t\t\t\t\t\t\t\tclass=\"btn btn-sm btn-white main-header__button tipped-click\"\n\t\t\t\t\t\t\t\tdata-tipped-options=\"\n\t\t\t\t\t\t\t\t\tcontainer: '.tipped-container',\n\t\t\t\t\t\t\t\t\tisTippedParent: true,\n\t\t\t\t\t\t\t\t\thideOn: 'click',\n\t\t\t\t\t\t\t\t\thideOnClickOutside: true,\n\t\t\t\t\t\t\t\t\tinline: 'messagesOptions-sticky',\n\t\t\t\t\t\t\t\t\tskin: 'light',\n\t\t\t\t\t\t\t\t\tposition: 'bottommiddle',\n\t\t\t\t\t\t\t\t\thideOthers: true,\n\t\t\t\t\t\t\t\t\tshowOn: 'click'\">\n\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\tname: 'ui-common-icon',\n\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\tname: 'ellipsis-v-regular'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- /ko--\x3e\n\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t<ul class=\"tippedMenu\" id=\"messagesOptions-sticky\" style=\"display: none; list-style: none\">\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href=\"javascript:;\" data-click=\"OnClickMarkAllAsRead\">\n\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-check-square-o h-pointer-e--none\"></i>\n\t\t\t\t\t\t\t\t\t\t{{app.tl('Mark all as read')}}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n                        \x3c!-- ko component: {\n                                name: 'ui-filterButton',\n                                params: {\n                                    hasActiveFilter: hasActiveFilter,\n                                    buttonClasses: ['btn-sm']\n                                }\n                            } --\x3e\n                        \x3c!-- /ko --\x3e\n                    </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n\t</header>\n\n\t\x3c!-- ko component: {\n\t\t\tname: 'section-messages-list',\n\t\t\tparams: {\n\t\t\t\tlistMode: listMode,\n\t\t\t\tfilterKey: 'homeMessages',\n\t\t\t\tshowBlankState: true,\n\t\t\t\tfilterStatus: 'unread',\n\t\t\t\tallowReplies: true\n\t\t\t}\n\t\t} --\x3e\n\t\x3c!-- /ko --\x3e\n\n</div>"},2723:function(t,e){t.exports='<div class="s-home__content-section" id="{{holderId}}">\n    <header class="main-header mb--small">\n\n        <div class="main-header__base">\n            <div class="main-header__left">\n                <h2 class="main-header__title">\n\t\t\t\t\t{{app.tl(\'My Projects\')}}\n                </h2>\n            </div>\n\n            <div class="main-header__right">\n                \x3c!-- ko if: app.loggedInUser.administrator() || app.loggedInUser.permissions.canAddProjects() --\x3e\n                    <button type="button" class="btn btn-success" data-click="OnClickAddProject">\n                        <span class="fa fa-plus-circle fa-lg"></span>\n                        {{app.tl(\'Add Project\')}}\n                    </button>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko component: {\n                        name: \'ui-filterButton\',\n                        params: {\n                            hasActiveFilter: hasActiveFilter\n                        }\n                    } --\x3e\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n\n    </header>\n\n    \x3c!-- ko component: {\n            name: \'section-projects-list-new\',\n            params: {\n                filterKey: filterKey,\n                allowDrag: false,\n                pageSize: 250\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n</div>'},2724:function(t,e){t.exports='\x3c!-- Shortcuts --\x3e\n<div class="s-home__content-section">\n    <header class="main-header mb--small">\n\t\t<div class="main-header__base">\n\t\t\t<div class="main-header__left">\n\t\t\t\t<h2 class="main-header__title">\n\t\t\t\t\t{{app.tl(\'Shortcuts\')}}\n\t\t\t\t</h2>\n\t\t\t</div>\n\n\t\t\t<div class="main-header__right">\n                <button type="button" class="btn btn-success"  data-click="OnClickAddShortcut">\n                    <i class="fa fa-bookmark-o mr--small"></i>\n                    {{app.tl(\'Add Shortcut\')}}\n                </button>\n\t\t\t</div>\n\t\t</div>\n\n        \x3c!-- ko if: app.hasFixedSecondaryNav --\x3e\n\t\t    <div class="main-header__sticky-filters-gutter"></div>\n        \x3c!--/ko--\x3e\n\n        <div class="main-header__secondary"\n            data-bind="\n                css: {\n                    \'is-fixed\': app.hasFixedSecondaryNav,\n                    \'is-new-dashboard\': true\n                }">\n            <div class="main-header__left">\n                \x3c!-- ko component: {\n                        name: \'ui-filterInfo\',\n                        params: {\n                            filter: filters(),\n                            numberOfRecords: totalRecords,\n                            mode: \'inline\',\n                            showFilterTitle: app.hasFixedSecondaryNav\n                        }\n                    } --\x3e\n                \x3c!-- /ko --\x3e\n            </div>\n\n            <div class="main-header__right main-header__secondary-filters ">\n                \x3c!-- ko if: ko.unwrap(state) == \'content\' --\x3e\n                    \x3c!-- ko component: {\n                            name: \'ui-sortOptions\',\n                            params:{\n                                sortOptions: sortByOptions,\n                                sortBy: sortBy,\n                                sortOrder: sortOrder\n                            }\n                        } --\x3e\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n\n                <div class="ml--small">\n                    \x3c!-- ko component: {\n                            name: \'widget-options\',\n                            params: {\n                                selectedItem: listMode,\n                                items: listModeOptions,\n                                showTips: true\n                            }\n                        } --\x3e\n                    \x3c!-- /ko --\x3e\n                </div>\n\n                \x3c!-- ko if: app.hasFixedSecondaryNav --\x3e\n                    <div class="ml--small">\n                        <button type="button" class="btn btn-success btn-sm"  data-click="OnClickAddShortcut">\n                            <i class="fa fa-bookmark-o mr--small"></i>\n                            {{app.tl(\'Add Shortcut\')}}\n                        </button>\n                    </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n    </header>\n    \x3c!-- ko component: {\n            name: \'section-shortcuts-list\',\n            params: {\n                listMode: listMode,\n                showBlankState: true\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n</div>'},2725:function(t,e){t.exports='<div class="w-options-list w-options-list--tipped">\n    <ul class="w-options-list__list">\n        \x3c!-- ko if: canAddMilestones --\x3e\n            <li data-bind="click: OnClickAddMilestone">\n                <a class="w-options-list__item" href="javascript:;">\n                    <span class="w-options-list__text">{{app.tl(\'Add Milestone\')}}</span>\n                </a>\n            </li>\n        \x3c!-- /ko --\x3e\n        <li data-bind="click: OnClickAddEvent">\n            <a class="w-options-list__item" href="javascript:;">\n                <span class="w-options-list__text">{{app.tl(\'Add Event\')}}</span>\n            </a>\n        </li>\n    </ul>\n</div>'},2726:function(t,e){t.exports='<div class="s-home__content-section">\n\t<header class="main-header mb--small">\n\t\t<div class="main-header__base">\n\t\t\t<div class="main-header__left">\n\t\t\t\t<h2 class="main-header__title">\n\t\t\t\t\t{{app.tl(\'My Work\')}}\n\t\t\t\t</h2>\n\t\t\t</div>\n\t\t\t<div class="main-header__right">\n\t\t\t\t\x3c!-- ko if: app.loggedInUser.isAccount --\x3e\n\t\t\t\t\t\x3c!-- ko if: canAddTasks --\x3e\n\t\t\t\t\t\t<div class="u-btn-group" role="group">\n\t\t\t\t\t\t\t<button type="button"\n\t\t\t\t\t\t\t\tdata-bind="click: OnClickAddTask"\n\t\t\t\t\t\t\t\tclass="btn btn-success main-header__button flex">\n\t\t\t\t\t\t\t\t{{app.tl(\'Add Task\')}}\n\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype="button"\n\t\t\t\t\t\t\t\tdata-bind="tippedDelegate"\n\t\t\t\t\t\t\t\tdata-tipped-options="\n\t\t\t\t\t\t\t\t\tskin: \'light\',\n\t\t\t\t\t\t\t\t\tshowOn: \'click\',\n\t\t\t\t\t\t\t\t\thideOn: \'click\',\n\t\t\t\t\t\t\t\t\thideOthers: true,\n\t\t\t\t\t\t\t\t\thideOnClickOutside: true,\n\t\t\t\t\t\t\t\t\tfadeIn: 120,\n\t\t\t\t\t\t\t\t\tshowDelay: 0,\n\t\t\t\t\t\t\t\t\tfadeOut: 0,\n\t\t\t\t\t\t\t\t\thideAfter: 0,\n\t\t\t\t\t\t\t\t\tpadding: 0,\n\t\t\t\t\t\t\t\t\tposition: \'bottommiddle\'"\n\t\t\t\t\t\t\t\tdata-content="{{quickAddTippedContent}}"\n\t\t\t\t\t\t\t\tclass="btn btn-success main-header__button px--small">\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\tname: \'angle-down-regular\'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko  --\x3e\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\x3c!-- ko ifnot: canAddTasks --\x3e\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\ttype="button"\n\t\t\t\t\t\t\tdata-bind="tippedDelegate"\n\t\t\t\t\t\t\tdata-tipped-options="\n\t\t\t\t\t\t\t\tskin: \'light\',\n\t\t\t\t\t\t\t\tshowOn: \'click\',\n\t\t\t\t\t\t\t\thideOn: false,\n\t\t\t\t\t\t\t\thideAfter: 300,\n\t\t\t\t\t\t\t\tposition: \'bottommiddle\'"\n\t\t\t\t\t\t\tdata-content="{{quickAddTippedContent}}"\n\t\t\t\t\t\t\tclass="btn btn-success">\n\t\t\t\t\t\t\t{{app.tl(\'Add\')}}\n\t\t\t\t\t\t\t<span class="ml--small">\n\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\tname: \'angle-down-regular\'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- /ko  --\x3e\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t<button type="button"\n\t\t\t\t\tdata-bind="click: OnClickSettings"\n\t\t\t\t\taria-label="More Options"\n\t\t\t\t\tclass="btn btn-white main-header__button ml--small">\n\t\t\t\t\t<span class="mr--small">\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tname: \'settings-regular\'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</span>\n\t\t\t\t\t{{app.tl(\'Customize\')}}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t</header>\n\n\t<div class="s-today">\n\t\t\x3c!-- ko if: showTasks --\x3e\n\t\t\t<div class="s-today__tasks" data-bind="css: {\'no-loadmore\': !data.currentPaginator().hasMoreRecords()}">\n\t\t\t\t<header class="main-header border-bottom--none mb--none">\n\t\t\t\t\t<div class="main-header__secondary">\n\t\t\t\t\t\t<h4 class="s-today__section-title">\n\t\t\t\t\t\t\t<span class="s-today__section-title-content" >\n\t\t\t\t\t\t\t\t{{app.tl(\'Tasks\')}}\n\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t<span class="s-today__section-title-separator"></span>\n\t\t\t\t\t\t</h4>\n\n\t\t\t\t\t\t<div class="main-header__right ml--medium main-header__secondary-filters">\n\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\tname: \'ui-sortOptions\',\n\t\t\t\t\t\t\t\t\tparams:{\n\t\t\t\t\t\t\t\t\t\tsortOptions: sortByOptions,\n\t\t\t\t\t\t\t\t\t\tsortBy: sortBy,\n\t\t\t\t\t\t\t\t\t\tsortOrder: sortOrder\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</header>\n\n\t\t\t\t\x3c!-- ko if: app.account.isTWInternal --\x3e\n\t\t\t\t\t\x3c!-- ko ifnot: app.loggedInUser.impersonating --\x3e\n\t\t\t\t\t\t<div class="s-today__content mt--medium">\n\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\tname: \'widget-personal-tasks\'\n\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t<div class="s-today__content">\n\t\t\t\t\t\x3c!-- ko if: data.state() == \'loading\' --\x3e\n\t\t\t\t\t\t\x3c!-- ko component: {name: \'list-state-loading-new\', params: {itemType: \'task\'}} --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\x3c!-- ko if: data.state() == \'error\' --\x3e\n\t\t\t\t\t\t\x3c!-- ko component: {name: \'list-state-error\', params: {itemType: \'task\', onTryAgainAction: data.TryLoadAgain, errorStatus: data.APIErrorStatus}} --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\x3c!-- ko if: data.state() == \'blank\'--\x3e\n\t\t\t\t\t\t\x3c!-- ko component: {name: \'list-state-blank\', params: {itemType: \'task\', canAdd: false, showButton:false, onClickButton:OnClickAddTask, filter:filters, title:app.tl(\'No Tasks\'), msg:app.tl(\'There are no matching tasks\')}} --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\x3c!-- ko if: data.state() == \'content\' --\x3e\n\t\t\t\t\t\t<div class="s-today__tasks-list tasks-container">\n\t\t\t\t\t\t\t\x3c!-- ko foreach: data.list --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- ko if: $component.isNewSection($index()) --\x3e\n\t\t\t\t\t\t\t\t\t<div class="s-today__tasks-header">\n\t\t\t\t\t\t\t\t\t\t{{{ $component.getSectionHeader($index()) }}}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\x3c!-- ko if: $component.isNewTaskList($index()) --\x3e\n\t\t\t\t\t\t\t\t\t<div class="u-group-title  h-show-hover--parent ml--medium">\n\t\t\t\t\t\t\t\t\t\t<h3 class="u-group-title__label">\n\t\t\t\t\t\t\t\t\t\t\t<a class="tasklistHeader__name mr--small" href="#/tasklists/{{taskListId}}" data-bind="click: $component.openTaskListQuickView.bind($data, projectId(), taskListId())" data-meta-link="{{app.branding.BaseHref()+\'#/tasklists/\'+taskListId()}}">\n\t\t\t\t\t\t\t\t\t\t\t\t{{ taskListName }}\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko if: $component.sortBy() != \'project\' --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="color--muted mr--small font-weight--normal">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a href="#projects/{{projectId}}/tasks"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="text-decoration--none">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ projectName }}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="ml--small">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t({{ companyName }})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\t\t\t<div class="flex-inline mr--small h-show-hover--child" data-bind="attr:{ \'title\': app.tl(\'Task List Options\') }">\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: "widget-tasklist-dropdown",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttaskListId: taskListId(),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tprojectId: projectId(),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmode:\'normal\'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t<div class="s-today__tasks-row ml--medium">\n\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\tname: \'widget-task-row\',\n\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\ttask: $data,\n\t\t\t\t\t\t\t\t\t\t\t\tmode: \'flat\'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: \'widget-loadMore\',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tdataLoader: data,\n\t\t\t\t\t\t\t\tminimalTemplate: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\x3c!-- /ko --\x3e\n\n\t\t\x3c!-- ko if: showMilestones() || showEvents() --\x3e\n\t\t\t<div class="s-today__events"\n\t\t\t\tdata-bind="\n\t\t\t\t\tcss: {\n\t\t\t\t\t\t\'s-today__events--no-border\': !showTasks()\n\t\t\t\t\t}">\n\t\t\t\t\x3c!-- ko if: showMilestones --\x3e\n\t\t\t\t\t<header class="main-header border-bottom--none mb--none">\n\t\t\t\t\t\t<div class="main-header__secondary">\n\t\t\t\t\t\t\t<h4 class="s-today__section-title">\n\t\t\t\t\t\t\t\t<span class="s-today__section-title-content" >\n\t\t\t\t\t\t\t\t\t{{app.tl(\'Milestones\')}}\n\t\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t\t<span class="s-today__section-title-separator"></span>\n\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</header>\n\t\t\t\t\t<div class="s-today__content">\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: \'widget-metric-milestones-list\',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tmilestonesListUserId: [app.loggedInUser.id()],\n\t\t\t\t\t\t\t\t\tmilestonesListDateInterval: \'today\',\n\t\t\t\t\t\t\t\t\tshowHeader: false,\n\t\t\t\t\t\t\t\t\tallowBlankSlate: true,\n\t\t\t\t\t\t\t\t\tblankSlateMessage: app.tl(\'You have no milestones due today\'),\n\t\t\t\t\t\t\t\t\tshowIfEmpty: false,\n\t\t\t\t\t\t\t\t\tendDate: \'\',\n\t\t\t\t\t\t\t\t\tpageSize: 5,\n\t\t\t\t\t\t\t\t\tstatus: milestoneStatuses()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</div>\n\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\x3c!-- ko if: showEvents --\x3e\n\t\t\t\t\t<header class="main-header border-bottom--none mb--none">\n\t\t\t\t\t\t<div class="main-header__secondary">\n\t\t\t\t\t\t\t<h4 class="s-today__section-title">\n\t\t\t\t\t\t\t\t<span class="s-today__section-title-content" >\n\t\t\t\t\t\t\t\t\t{{app.tl(\'Events\')}}\n\t\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t\t<span class="s-today__section-title-separator"></span>\n\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</header>\n\t\t\t\t\t<div class="s-today__content">\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: \'widget-metric-events-list\',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\teventsListUserId: [app.loggedInUser.id()],\n\t\t\t\t\t\t\t\t\teventsListDateInterval: \'today\',\n\t\t\t\t\t\t\t\t\teventsListAttendingOnly: onlyAttendedEvents,\n\t\t\t\t\t\t\t\t\tshowHeader: false,\n\t\t\t\t\t\t\t\t\tallowBlankSlate: true,\n\t\t\t\t\t\t\t\t\tblankSlateMessage: app.tl(\'You have no events scheduled today\'),\n\t\t\t\t\t\t\t\t\tshowIfEmpty: false,\n\t\t\t\t\t\t\t\t\tpageSize: 25\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</div>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</div>\n\t\t\x3c!-- /ko --\x3e\n\t</div>\n\n</div>'},2732:function(t,e){t.exports="\x3c!-- ko if: data.state() == 'loading' --\x3e\n\t\x3c!-- ko component: {\n\t\tname: 'list-state-loading-new',\n\t\tparams: {\n\t\t\titemType: 'message',\n\t\t\tformat: 'large'\n\t\t}\n\t} --\x3e\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: data.state() == 'error' --\x3e\n\t\x3c!-- ko component: {\n\t\tname: 'list-state-error',\n\t\tparams: {\n\t\t\titemType: 'message',\n\t\t\tonTryAgainAction: data.TryLoadAgain,\n\t\t\terrorStatus: data.APIErrorStatus\n\t\t}\n\t} --\x3e\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: data.state() == 'blank' && showBlankState --\x3e\n\t\x3c!-- ko component: {\n\t\tname: 'list-state-blank',\n\t\tparams: {\n\t\t\titemType: 'message',\n\t\t\tbuttonText: app.tl(\"Create the First Message\"),\n\t\t\tfilter: filters,\n\t\t\ttitle: blankStateTitle,\n\t\t\tmsg: blankStateText,\n\t\t\tshowButton: (app.currentRoute().project && projectPermissions().canAddMessages()) && !isQuickView,\n\t\t\tonClickButton: function(){\n\t\t\t\tapp.GoTo('#projects/'+app.currentRoute().projectId+'/messages/create?catid='+ko.unwrap(app.currentRoute().categoryId()))\n\t\t\t}\n\t\t}\n\t} --\x3e\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\n<div class=\"s-messages-list\"\n\tdata-bind=\"\n\t\tdragulaExtra: {\n\t\t\tdata: data.list,\n\t\t\tuseSyncClone: true,\n\t\t\tmoves: DragulaMoves,\n\t\t\tcopy: true,\n\t\t\tafterDrop: OnDropMessage,\n\t\t\tafterOver: OnOverCategory,\n\t\t\tafterOut: OnOutCategory,\n\t\t\tisContainer: function(el){\n\t\t\t\treturn el.classList.contains('drop-target-messages');\n\t\t\t},\n\t\t\taccepts: function(el, target){\n\t\t\t\treturn target.classList.contains('drop-target-messages');\n\t\t\t}\n\t\t},\n\t\tcss: {\n\t\t\t's-messages-list--has-fixed-headers': hasFixedSecondaryNav\n\t\t}\">\n\t\x3c!-- ko if: $component.isNewSection($index())  --\x3e\n\t\t<label class=\"s-messages-list__header\">\n\t\t\t{{{ $component.getSectionHeader($index()) }}}\n\t\t</label>\n\t\x3c!-- /ko --\x3e\n\n\t\x3c!-- ko if: $component.isNewProject($index()) --\x3e\n\t\t\x3c!-- ko component: {\n\t\t\t\tname: 'ui-project-header',\n\t\t\t\tparams: {\n\t\t\t\t\tid: project.id,\n\t\t\t\t\tname: project.name,\n\t\t\t\t\tcompanyName: company.name,\n\t\t\t\t\tcompanyId: company.id\n\t\t\t\t}\n\t\t\t} --\x3e\n\t\t\x3c!-- /ko --\x3e\n\t\x3c!-- /ko --\x3e\n\n\t<div class=\"s-messages-list__item\" data-bind=\"\n\t\tcomponent: {\n\t\t\tname: 'widget-message',\n\t\t\tparams: {\n\t\t\t\titem: $data,\n\t\t\t\tshowCategoryInBreadcrumb: $component.showCategoryInBreadcrumb && $component.sortBy() != 'category',\n\t\t\t\tshowProjectInBreadcrumb: $component.showProjectInBreadcrumb && ($component.sortBy() != 'project'),\n\t\t\t\tdisplayMode: $component.listMode,\n\t\t\t\tallowReply: $component.allowReplies,\n\t\t\t\tsortBy: $component.sortBy,\n\t\t\t\tallowDrag: $component.allowDrag\n\t\t\t}\n\t\t}\"\n\t\tdata-category-id=\"{{category.id}}\"\n\t\tdata-message-id=\"{{messageId}}\">\n\t</div>\n\n</div>\n\n\x3c!-- ko if: data.state() == 'content' --\x3e\n\t<div class=\"flex mt--medium\">\n\t\t\x3c!-- ko component: {\n\t\t\t\tname: 'widget-loadMore',\n\t\t\t\tparams: {\n\t\t\t\t\tdataLoader: data,\n\t\t\t\t\tminimalTemplate: true\n\t\t\t\t}\n\t\t\t} --\x3e\n\t\t\x3c!-- /ko --\x3e\n\t</div>\n\x3c!-- /ko --\x3e\n"},2853:function(t,e){t.exports="\x3c!-- ko if: showHeaderControls --\x3e\n    <header class=\"main-header pt--none px--none mb--none\">\n        \x3c!-- ko if: useFilters --\x3e\n            \x3c!-- ko component: {\n                    name: 'ui-filterInfo',\n                    params: {\n                        filter: filters(),\n                        numberOfRecords: totalRecords,\n                        mode: 'bar'\n                    }\n                } --\x3e\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: $component.hasFixedSecondaryNav --\x3e\n            <div class=\"main-header__sticky-filters-gutter\"></div>\n        \x3c!--/ko--\x3e\n\n        <div class=\"main-header__secondary\"\n            data-bind=\"\n                css: {\n                    'is-fixed': $component.hasFixedSecondaryNav\n                }\">\n            <div class=\"main-header__left\">\n\n                \x3c!-- ko if: !hasActiveFilter() || $component.hasFixedSecondaryNav() --\x3e\n                    \x3c!-- ko component: {\n                            name: 'ui-filterInfo',\n                            params: {\n                                filter: filters(),\n                                numberOfRecords: totalRecords,\n                                mode: 'inline',\n                                showFilterTitle: false\n                            }\n                        } --\x3e\n                    \x3c!-- /ko --\x3e\n                \x3c!--/ko--\x3e\n\n                \x3c!-- ko if: letters().length --\x3e\n                    \x3c!-- ko component: { name: 'widget-letters', params:{ selection: firstLetter, letters: letters, isQuickView: isQuickView } } --\x3e\x3c!-- /ko --\x3e\n                \x3c!--/ko--\x3e\n            </div>\n\n            <div class=\"main-header__right main-header__secondary-filters\">\n                \x3c!-- ko component: {\n                        name: 'ui-sortOptions',\n                        params:{\n                            sortOptions: sortOptions,\n                            sortBy: sortBy,\n                            sortOrder: sortOrder\n                        }\n                    } --\x3e\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko component: {\n                        name: 'widget-options',\n                        params: {\n                            selectedItem: listMode,\n                            items: modeOptions,\n                            showTips: true\n                        }\n                    } --\x3e\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: $component.hasFixedSecondaryNav --\x3e\n                    \x3c!-- ko component: {\n                            name: 'ui-filterButton',\n                            params: {\n                                hasActiveFilter: hasActiveFilter,\n                                buttonClasses: ['btn-sm','ml--medium']\n                            }\n                        } --\x3e\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n    </header>\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: data.state() == 'loading' --\x3e\n    \x3c!-- ko component: {\n            name: 'list-state-loading-new',\n            params: {\n                itemType: 'project',\n                format: 'large',\n                showText: true\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: data.state() == 'blank' || (data.state() == 'content' && data.list().length == 0) --\x3e\n\t\x3c!-- ko component: {\n            name: 'list-state-blank',\n            params: {\n                itemType: 'project',\n                filter: filters,\n                allowClearFilter: allowClearFilter,\n                showButton: $component.canAddProjects(),\n                buttonText: buttonText,\n                onClickButton: OnClickAddProject,\n                title: blankStateTitle,\n                msg: noProjectsMsg,\n                template: 'dashboard'\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: data.state() == 'content' --\x3e\n\n    <div class=\"s-projects-list {{cssClasses}}\"\n        data-bind=\"\n            dragulaExtra: {\n                data: listIncremental,\n                useSyncClone: true,\n                moves: DragulaMoves,\n                copy: true,\n                afterDrop: OnDropProject,\n                afterOver: OnOverCategory,\n                afterOut: OnOutCategory,\n                isContainer: function(el){\n                    return el.classList.contains('drop-target-projects');\n                },\n                accepts: function(el, target){\n                    return target.classList.contains('drop-target-projects');\n                }\n            },\n            css: {\n                's-projects-list--has-fixed-headers': hasFixedSecondaryNav\n            }\">\n\n        \x3c!-- ko if: $component.isNewSection($index()) --\x3e\n            <label class=\"s-projects-list__header\">\n                {{{ $component.getSectionHeader($index()) }}}\n            </label>\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: $component.type === \"templates\" --\x3e\n            \x3c!-- ko component: {\n                name: 'widget-project-template',\n                params: {\n                    item: $data,\n                    type: $component.type,\n                    highlightTerm: $component.searchTerm,\n                    displayMode: $component.listMode,\n                    showCompanyName: $component.sortBy() != 'companyName'\n                }\n            } --\x3e\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko ifnot: $component.type === \"templates\" --\x3e\n            \x3c!-- ko component: {\n                name: 'widget-project',\n                params: {\n                    item: $data,\n                    type: $component.type,\n                    highlightTerm: $component.searchTerm,\n                    displayMode: $component.listMode,\n                    showCompanyName: $component.sortBy() != 'companyName',\n                    allowDrag: $component.allowDrag\n                }\n            } --\x3e\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n\n    </div>\n\n    \x3c!-- ko if: !data.isLoading() && listIncremental().inSync() --\x3e\n        <div class=\"flex\">\n            \x3c!-- ko component: {\n                    name: 'widget-loadMore',\n                    params:{\n                        dataLoader: data\n                    }\n                } --\x3e\n            \x3c!-- /ko --\x3e\n        </div>\n    \x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n</div>"},2868:function(t,e){t.exports='\x3c!-- ko with: shared --\x3e\n\t<button type="button" class="btn btn-success" data-bind="click: $component.OnClickAddEvent">\n\t\t<span class="mr--small">\n\t\t\t\x3c!-- ko component: {\n\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tname: \'add-regular\'\n\t\t\t\t\t}\n\t\t\t\t}--\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</span>\n\t\t{{app.tl(\'Add Event\')}}\n\t</button>\n\x3c!--/ko--\x3e\n\n\x3c!-- IMPORTANT - Mark this template loaded --\x3e\n\x3c!-- ko if: $data.readyToShow != null && readyToShow --\x3e\n    <div data-bind="template:{afterRender:function(){templateLoaded(true)}}" class="hidden"></div>\n\x3c!-- /ko\n'},2878:function(t,e){t.exports="\n\x3c!-- ko component: {\n\t\tname: \"section-risks-list\",\n\t\tparams: {\n\t\t\tmode: 'all',\n\t\t\tfilterKey: 'allRisks',\n\t\t\tloadNow: true,\n\t\t\tshowOpenRisks: showOpenRisks,\n\t\t\tshowPendingRisks: showPendingRisks,\n\t\t\tshowClosedRisks: showClosedRisks,\n\t\t\tprojectCompanyIds: projectCompanyIds,\n\t\t\tprojectCategoryIds: projectCategoryIds,\n\t\t\tprojectTagIds: projectTagIds,\n\t\t\tmatchAllProjectTags: matchAllProjectTags,\n\t\t\tprojectOwnerIds: projectOwnerIds,\n\t\t\tprojectHealth: projectHealth,\n\t\t\tprojectStatus: projectStatus,\n\t\t\tonlyStarredProjects: onlyStarredProjects,\n\t\t\tisQuickView: true\n\t\t}\n\t} --\x3e\n\x3c!-- /ko --\x3e\n"},2886:function(t,e){t.exports='<div class="settings-wrapper w-quick-view-settings">\n\t<div class="sectionContent">\n\t\t<div class="padTop">\n\t\t\t\x3c!-- Tasks --\x3e\n\t\t\t<div class="settings-group mb--large">\n\t\t\t\t<h4 class="settings-title mb--none flex flex-items-center">\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: \'widget-toggleSwitch\',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tvalue: showTasks,\n\t\t\t\t\t\t\t\tlabel: \'\'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t<span class="ml--large mr--small">\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tname: \'tasks-regular\'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</span>\n\t\t\t\t\t{{app.tl(\'Tasks\')}}\n\n\t\t\t\t\t\x3c!-- ko if: showTasks --\x3e\n\t\t\t\t\t\t\x3c!-- ko if: notUsingDefaultTaskSettings --\x3e\n\t\t\t\t\t\t\t<a class="font-size--default ml--auto mr--small"\n\t\t\t\t\t\t\t\thref="javascript:;"\n\t\t\t\t\t\t\t\tdata-bind="click: tasksFilters().Clear">\n\t\t\t\t\t\t\t\t({{app.tl(\'Restore defaults\')}})\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</h4>\n\t\t\t\t\x3c!-- ko if: showTasks --\x3e\n\t\t\t\t\t<div class="settings-field settings-field--filters-wrapper">\n\t\t\t\t\t\t<p class="text-muted">\n\t\t\t\t\t\t\t{{app.tl(\'Choose which tasks to show\')}}\n\t\t\t\t\t\t</p>\n\n\t\t\t\t\t\t<div class="pl--small pt--medium settings-field text-muted">\n\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\tname: \'widget-toggleSwitch\',\n\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\tvalue: onlyMyTasks,\n\t\t\t\t\t\t\t\t\t\tlabel: app.tl("Only show my tasks")\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\x3c!-- ko if: app.featureFlip.check(\'teams\') --\x3e\n\t\t\t\t\t\t\t<div class="pl--small pt--medium settings-field text-muted">\n\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\tname: \'widget-toggleSwitch\',\n\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\tvalue: includeAssigneeCompanies,\n\t\t\t\t\t\t\t\t\t\t\tlabel: onlyMyTasks() ? app.tl("Include tasks for my company") : app.tl("Include tasks for companies")\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class="pl--small pt--medium settings-field text-muted">\n\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\tname: \'widget-toggleSwitch\',\n\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\tvalue: includeAssigneeTeams,\n\t\t\t\t\t\t\t\t\t\t\tlabel: onlyMyTasks() ? app.tl("Include tasks for my teams") : app.tl("Include tasks for teams")\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: \'section-tasks-filter\',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tkey: \'homeTodayTasks\',\n\t\t\t\t\t\t\t\t\tshowKeywordSection: false\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="settings-field pl--xlarge pt--none hidden">\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: \'widget-toggleSwitch\',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tvalue: includeFollowedTasks,\n\t\t\t\t\t\t\t\t\tlabel: app.tl("Include tasks I\'m following")\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</div>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</div>\n\n\t\t\t\x3c!-- Milestones --\x3e\n\t\t\t<div class="settings-group mb--large">\n\t\t\t\t<h4 class="settings-title mb--none flex flex-items-center">\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: \'widget-toggleSwitch\',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tvalue: showMilestones,\n\t\t\t\t\t\t\t\tlabel: \'\'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t<span class="ml--large mr--small">\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tname: \'milestone-tw-regular\'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</span>\n\t\t\t\t\t{{app.tl(\'Milestones\')}}\n\t\t\t\t</h4>\n\t\t\t\t\x3c!-- ko if: showMilestones --\x3e\n\t\t\t\t\t<div class="settings-field pl--xlarge">\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: \'widget-toggleSwitch\',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tvalue: includeLateMilestones,\n\t\t\t\t\t\t\t\t\tlabel: app.tl(\'Include late milestones\')\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="settings-field pl--xlarge">\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: \'widget-toggleSwitch\',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tvalue: includeUpcomingMilestones,\n\t\t\t\t\t\t\t\t\tlabel: app.tl(\'Include upcoming milestones\')\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</div>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</div>\n\n\t\t\t\x3c!-- Events --\x3e\n\t\t\t<div class="settings-group mb--large"\n\t\t\t\tdata-bind="if: app.loggedInUser.isAccount">\n\t\t\t\t<h4 class="settings-title mb--none flex flex-items-center">\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: \'widget-toggleSwitch\',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tvalue: showEvents,\n\t\t\t\t\t\t\t\tlabel: \'\'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t<span class="ml--large mr--small">\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tname: \'event-regular\'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</span>\n\t\t\t\t\t{{app.tl(\'Events\')}}\n\t\t\t\t</h4>\n\t\t\t\t\x3c!-- ko if: showEvents --\x3e\n\t\t\t\t\t<div class="settings-field pl--xlarge">\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: \'widget-toggleSwitch\',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tvalue: onlyAttendedEvents,\n\t\t\t\t\t\t\t\t\tlabel: app.tl(\'Only events I am attending\')\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</div>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n\x3c!-- IMPORTANT - Mark this template loaded --\x3e\n\x3c!-- ko if: $data.readyToShow != null && readyToShow --\x3e\n    <div data-bind="template:{afterRender:function(){templateLoaded(true)}}" class="hidden"></div>\n\x3c!-- /ko --\x3e\n'},2934:function(t,e){t.exports="<svg class=\"u-summary-filter-icon {{ iconId }} {{ svgClass }}\">\n\t<use xlink:href=\"./tko/public/assets/svg/metrics-icons.svg\"\n\t\tdata-bind=\"attr: {\n\t\t\t'xlink:href': './tko/public/assets/svg/metrics-icons.svg' + '#' + iconId()\n\t\t}\">\n\t</use>\n</svg>"},2978:function(t,e){t.exports='<div class="w-blank-card">\n\t<div class="w-blank-card__graphic" data-bind="style: {backgroundImage: graphic }"></div>\n\t<div class="w-blank-card__text">\n\t\t<span>{{text}}</span>\n\t</div>\n</div>'},2979:function(t,e){t.exports='<div class="u-breadcrumb">\n    \x3c!-- ko foreach: segments --\x3e\n        \x3c!-- ko if: $index() > 0 --\x3e\n            <span class="u-breadcrumb__separator">\n                \x3c!-- ko component: {\n                        name: \'ui-common-icon\',\n                        params: {\n                            name: \'chevron-right-regular\',\n                            color: \'#888888\'\n                        }\n                    } --\x3e\n                \x3c!-- /ko --\x3e\n            </span>\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: $data.icon --\x3e\n            \x3c!-- ko component: {\n                    name: \'ui-common-icon\',\n                    params: {\n                        name: icon + \'-regular\',\n                        color: iconColor\n                    }\n                } --\x3e\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: $data.link --\x3e\n            <a href="{{link}}"\n                data-meta-link="{{link}}"\n                data-bind="click: $data.onClick ? $data.onClick : function(){ return true; }"\n                class="u-breadcrumb__text">\n                {{{ linkText }}}\n            </a>\n        \x3c!-- /ko --\x3e\n    \x3c!-- /ko --\x3e\n</div>'},2994:function(t,e){t.exports='<span class="u-label {{classString}}" data-bind="style: uiStyles">\n    {{label}}\n</span>'},2996:function(t,e){t.exports='<div data-bind="attr: { id: chartId }" class="u-metric-chart-donut"></div>\n\n\x3c!-- Prepare the graph --\x3e\n<div class="hidden" data-bind="onRendered: RenderChart">'},2997:function(t,e){t.exports='\x3c!-- TODO remove inline styling --\x3e\n<div data-bind="attr: { id: chartId }" class="u-metric-horizontal-bar-chart"></div>\n\n\x3c!-- Prepare the graph --\x3e\n<div class="hidden" data-bind="onRendered: RenderChart">'},2998:function(t,e){t.exports='\x3c!-- TODO remove inline styling --\x3e\n<div data-bind="attr: { id: chartId }" class="u-metric-horizontal-bar-chart"></div>\n\n\x3c!-- Prepare the graph --\x3e\n<div class="hidden" data-bind="onRendered: RenderChart">'},2999:function(t,e){t.exports="<span class=\"u-metric-range\"\n    data-tipped-options=\"\n        skin: 'light',\n        showOn: 'click',\n        hideOn: false,\n        hideAfter: 300,\n        position: 'bottommiddle'\"\n    data-content=\"{{tippedContent}}\"\n    data-bind=\"tippedDelegate: { enabled: enabled }\">\n\t{{selectedText}}\n\t\x3c!-- ko if: enabled --\x3e\n\t\t<span class=\"u-metric-range__icon\">\n\t\t\x3c!-- ko component: {\n\t\t\t\tname: 'ui-common-icon',\n\t\t\t\tparams: {\n\t\t\t\t\tname: 'chevron-down-regular'\n\t\t\t\t}\n\t\t\t} --\x3e\n\t\t\x3c!-- /ko --\x3e\n\t\t</span>\n\t\x3c!-- /ko --\x3e\n</span>\n"},3e3:function(t,e){t.exports='\x3c!-- ko if: ko.unwrap(title).length --\x3e\n    <span class="u-metric-range__title">\n        {{title}}\n    </span>\n\x3c!-- /ko --\x3e\n\n<ul class="tippedMenu">\n    \x3c!-- ko foreach: options --\x3e\n        <li>\n            <a data-bind="click: function(d,e){\n                $component.selected(d.id);\n                Tipped.hideAll();\n\t\t\t}" href="javascript:;">\n                {{text}}\n            </a>\n        </li>\n    \x3c!-- /ko --\x3e\n</ul>\n'},3001:function(t,e){t.exports="\x3c!--\n    Dev note: To help developers searching the code, this includes:\n        - ui-metric-chart-horizontal-bar\n        - ui-metric-chart-vertical-bar\n        - ui-metric-chart-donut\n--\x3e\n\n\x3c!-- ko component: {\n        name: 'ui-metric-chart-' + $component.chartType,\n        params: {\n            chartId: $component.chartId,\n            data: $component.data,\n            eventsKey: $component.eventsKey,\n            chartOptions: $component.chartOptions\n        }\n    } --\x3e\n\x3c!-- /ko --\x3e\n"},3006:function(t,e){t.exports='<div class="u-project-header"\n    data-bind="\n        css: {\n            \'u-project-header--not-sticky\': !allowSticky\n        }\n    ">\n    \x3c!-- ko if: showMenu --\x3e\n        <div class="u-project-header__options">\n            \x3c!-- ko component: {\n                name: \'ui-project-dropdown-button\',\n                params: {\n                    projectId: id(),\n                    selector: uniqueId\n                }\n            } --\x3e\n            \x3c!-- /ko  --\x3e\n        </div>\n    \x3c!-- /ko  --\x3e\n\n    <a class="u-project-header__link-project" href="#/projects/{{id}}">\n        <span class="u-project-header__text">\n            {{name}}\n        </span>\n    </a>\n    <a class="u-project-header__link-company" href="#/companies/{{companyId}}">\n        <span class="u-project-header__company">\n            ({{{companyName}}})\n        </span>\n    </a>\n</div>'},3010:function(t,e){t.exports='<div class="u-text-area">\n    \x3c!-- ko component: {\n            name: \'widget-easy-markdown-editor\',\n            params: {\n                content: value,\n                placeholder: app.tl(\'Add your update here\'),\n                autocomplete: autocomplete,\n                toolbar: toolbar,\n                autofocus: autofocus\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- ko if: showTextWarning --\x3e\n        <div class="u-text-area__warning">\n            {{{ textWarning }}}\n        </div>\n    \x3c!-- /ko --\x3e\n</div>\n<div class="hidden" data-bind="onRendered: OnRendered"></div>\n'},3011:function(t,e){t.exports='<div class="u-unread-status">\n    <span class="u-unread-status__target"\n        data-bind="\n            click: OnClick,\n            css: {\n                \'tipped-hide\': hint.length > 0\n            },\n            attr: {\n                \'data-tipped\': hint.length > 0 ? hint : undefined\n            }">\n    </span>\n</div>'},3012:function(t,e){t.exports='<div class="w-activity">\n\n    <div class="w-activity__icon {{activityIconClass}}">\n        \x3c!-- ko if: item.activityType() == \'reacted\' --\x3e\n            <img data-bind="attr: { src: \'/tko/public/images/reactions/\' + item.reactionType() + \'.png\'}">\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko ifnot: item.activityType() == \'reacted\' --\x3e\n            \x3c!-- ko component: {\n                    name: \'ui-common-icon\',\n                    params: activityIcon\n                } --\x3e\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n    </div>\n\n    <div class="w-activity__content">\n        <div class="w-activity__content-avatar">\n            <img data-bind="attr:{src:item.userAvatarURL,alt:item.userName}, event:{error:app.OnImageThumbLoadFail.bind(item,\'userAvatar\')}">\n        </div>\n\n        <a class="w-activity__content-user" title="{{item.userFullName}}" href="#/people/{{item.userId}}">\n            {{ userWhoActed }}\n        </a>\n\n        <span class="w-activity__content-description">\n            {{{ activityText }}}\n        </span>\n\n        <span class="w-activity__content-title">\n            {{{ itemTitle }}}\n        </span>\n\n        <div class="w-activity__content-extra">\n\n            \x3c!-- ko if: item.extraDescription() != "" || item.publicInfo() != "" --\x3e\n\n                \x3c!-- ko ifnot: item.type() == "file" --\x3e\n                    (\n                        \x3c!-- ko if: item.publicInfo() != "" && item.type() !== "task" --\x3e\n                            <span>\n                                {{item.publicInfo}}\n                            </span>\n\n                            \x3c!-- ko if: item.extraDescription() !== "" --\x3e, \x3c!-- /ko --\x3e\n                        \x3c!-- /ko --\x3e\n\n                        \x3c!-- ko if: item.extraDescription() != "" --\x3e\n                            \x3c!-- ko if: item.type() === "task" --\x3e<span>{{app.tl(\'List\')}}</span>: \x3c!-- /ko --\x3e\n                            \x3c!-- ko if: item.type() === "file_comment" --\x3e<span>{{app.tl(\'File\')}}</span>: \x3c!-- /ko --\x3e\n                            \x3c!-- ko if: item.type() === "notebook_comment" --\x3e<span>{{app.tl(\'Notebook\')}}</span>: \x3c!-- /ko --\x3e\n                            \x3c!-- ko if: item.type() === "task_comment" --\x3e<span>{{app.tl(\'Task\')}}</span>: \x3c!-- /ko --\x3e\n                            \x3c!-- ko if: item.type() === "milestone_comment" --\x3e<span>{{app.tl(\'Milestone\')}}</span>: \x3c!-- /ko --\x3e\n                            \x3c!-- ko if: item.type() === "link_comment" --\x3e<span>{{app.tl(\'Link\')}}</span>: \x3c!-- /ko --\x3e\n\n                            \x3c!-- ko ifnot: item.itemLink() == "" --\x3e\n                                <a class="extra" href="#/{{item.itemLink}}">\n                                    {{item.extraDescription}}\n                                </a>\n                            \x3c!-- /ko --\x3e\n                            \x3c!-- ko if: item.itemLink() == "" --\x3e\n                                <span>\n                                    {{item.extraDescription}}\n                                </span>\n                            \x3c!-- /ko --\x3e\n                        \x3c!-- /ko --\x3e\n\n                        \x3c!-- ko if: item.type() === "task" && item.activityType() === "new" --\x3e\n                            , <span>\n                                {{app.tl(\'Assigned To\')}}:\n                            </span>\n                            \x3c!-- ko if: item.assignedToMultiplePeople --\x3e\n                                <span>\n                                    {{app.tl(\'Multiple People\')}}\n                                </span>\n                            \x3c!-- /ko --\x3e\n                            \x3c!-- ko ifnot: !item.assignedToMultiplePeople --\x3e\n                                \x3c!-- ko ifnot: item.forUserName --\x3e\n                                    <span>{{app.tl(\'Anyone\')}}</span>\n                                \x3c!-- /ko --\x3e\n                                \x3c!-- ko if: item.forUserName --\x3e\n                                    <span>{{item.forUserName}}</span>\n                                \x3c!-- /ko --\x3e\n                            \x3c!-- /ko --\x3e\n                        \x3c!-- /ko --\x3e\n                    )\n                    \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n        </div>\n    </div>\n\n    <span class="w-activity__time tipped-hide"\n        data-tipped="{{ item.dateTime().userFormat(\'date-time\') }}"\n        data-tipped-options="showDelay: 500">\n        {{{ activityTimestamp }}}\n    </span>\n\n    <div class="w-activity__privacy" data-bind="attr:{title:app.tl(\'Private\')">\n        \x3c!-- ko if: item.isPrivate() !== 0 --\x3e\n            \x3c!-- ko component: {\n                name: "widget-privacy-icon",\n                params: {\n                    private: item.isPrivate,\n                    lockdownId: item.lockdownId,\n                    projectId: item.projectId,\n                    id: item.itemId,\n                    title: item.description,\n                    type: item.type\n                }\n            } --\x3e\x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n    </div>\n</div>'},3015:function(t,e){t.exports='\x3c!-- ko with: item --\x3e\n\t<div class="w-attachment">\n\t\t<a data-bind="click: $component.OnClickView" href="./?action=viewFile&fileId={{id}}&v={{version}}&display=true">\n\t\t\t<div class="w-attachment__preview"\n\t\t\t\tdata-bind="\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\tbackground: $component.getImageUrl()\n\t\t\t\t\t}">\n\t\t\t</div>\n\t\t</a>\n\n\t\t\x3c!-- <img data-bind="attr:{\'src\': thumbnail }, event:{error:app.OnImageThumbLoadFail.bind($data,\'file\')}" class="iconImg" style="max-height:100px" alt="" src="./?action=getThumb&amp;ref=6.5.11c2.11d2.1"> --\x3e\n\t\t<div class="w-attachment__body">\n\t\t\t<div class="w-attachment__details">\n\t\t\t\t<a href="#files/{{fileId}}" class="color--inherit">\n\t\t\t\t\t<span>{{ name }}</span>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t\t<div class="w-attachment__details">\n\t\t\t\t<small class="w-attachment__details-meta">{{ filesize }}</small>\n\t\t\t\t<span data-bind="visible: commentCount() > 0">\n\t\t\t\t\t<span class="h-char-separator px--tiny"></span>\n\t\t\t\t\t<span class="w-attachment__comment-icon-hold" data-bind="click: $component.OnClickView">\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tname: \'comment-solid\'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\t<strong class="w-attachment__comment-label">{{ commentCount() }}</strong>\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="w-attachment__actions">\n\t\t\t<div class="w-attachment__options">\n\t\t\t\t<button class="btn"\n\t\t\t\t\tdata-bind="tippedDelegate"\n\t\t\t\t\tdata-tipped-options="\n\t\t\t\t\t\tskin: \'light\',\n\t\t\t\t\t\tshowOn: \'click\',\n\t\t\t\t\t\thideOn: false,\n\t\t\t\t\t\thideAfter: 300,\n\t\t\t\t\t\tposition: \'bottommiddle\'"\n\t\t\t\t\tdata-content="{{$component.tippedContent}}">\n\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="3" height="13" viewBox="0 0 3 13">\n\t\t\t\t\t\t<path data-bind="attr: {d: app.consts.SVG.options}" fill-rule="evenodd"/>\n\t\t\t\t\t</svg>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t\x3c!-- ko if: $data.lockdownId && $data.lockdownId > 0 --\x3e\n\t\t\t\t<div class="w-attachment__lock">\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: "widget-privacy-icon",\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tprivate: 1,\n\t\t\t\t\t\t\t\tlockdownId: $data.lockdownId,\n\t\t\t\t\t\t\t\tprojectId: projectId,\n\t\t\t\t\t\t\t\tid: id,\n\t\t\t\t\t\t\t\ttitle: name,\n\t\t\t\t\t\t\t\ttype: \'file\'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</div>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</div>\n\t</div>\n\x3c!-- /ko --\x3e'},3016:function(t,e){t.exports="<ul class=\"tippedMenu\">\n\t<li>\n\t\t<a href=\"./?action=viewFile&fileId={{id}}&v={{version}}\" target=\"_blank\">\n\t\t\t{{app.tl('Download')}}\n\t\t</a>\n\t</li>\n\t<li>\n\t\t\x3c!-- ko component: {\n\t\t\t\tname: 'widget-file-documenteditor',\n\t\t\t\tparams: {\n\t\t\t\t\titem: $component.itemAsObservable,\n\t\t\t\t\ttype: 'link'\n\t\t\t\t}\n\t\t\t} --\x3e\n\t\t\x3c!-- /ko --\x3e\n\t</li>\n</ul>"},3017:function(t,e){t.exports='\x3c!-- ko if: attachments().length --\x3e\n\t<div class="w-attachment-list">\n\t\t<div class="w-attachment-list__header">\n\t\t\t\x3c!-- ko component: {\n\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tname: \'paperclip-regular\'\n\t\t\t\t\t}\n\t\t\t\t} --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\x3c!-- ko if: attachments().length == 1 --\x3e\n\t\t\t\t<span class="ml--small">{{ app.tl(\'[_s] attachment\', attachments().length) }}</span>\n\t\t\t\x3c!-- /ko  --\x3e\n\t\t\t\x3c!-- ko if: attachments().length > 1 --\x3e\n\t\t\t\t<span class="ml--small">{{ app.tl(\'[_s] attachments\', attachments().length) }}</span>\n\t\t\t\x3c!-- /ko  --\x3e\n\t\t\t<span class="h-char-separator"></span>\n\t\t\t<a href="#" class="w-attachment-list__toggle-attachments mr--tiny" data-bind="click: OnClickToggleAttachments">{{ attachmentsToggleMsg }}</a>\n\n\t\t\t<a class="ml--small"\n\t\t\t\thref="javascript:;"\n\t\t\t\tdata-bind="\n\t\t\t\t\tclick: OnClickDownloadAll,\n\t\t\t\t\tvisible: canDownloadAllAttachments">\n\t\t\t\t({{app.tl(\'Download all\')}})\n\t\t\t</a>\n\t\t</div>\n\n\t\t\x3c!-- ko if: isShowingAttachments --\x3e\n\t\t\t<div class="w-attachment-list__body">\n\t\t\t\t\x3c!-- ko foreach: attachments --\x3e\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\tname: \'widget-attachment\',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tparentItem: $component.parentItem,\n\t\t\t\t\t\t\titemType: $component.itemType,\n\t\t\t\t\t\t\titemId: $component.itemId,\n\t\t\t\t\t\t\titem: $data,\n\t\t\t\t\t\t\topenNewTab: $parent.openNewTab\n\t\t\t\t\t\t}\n\t\t\t\t\t} --\x3e\x3c!-- /ko  --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</div>\n\t\t\x3c!-- /ko --\x3e\n\t</div>\n\x3c!-- /ko --\x3e'},3040:function(t,e){t.exports='<div class="w-comment w-comment--{{displayMode}} {{isEditing}}"\n\tdata-bind="onRendered: OnRenderedComment">\n\n\t\x3c!-- ko ifnot: item.isEditing --\x3e\n\t\t<img class="w-comment__avatar"\n\t\t\tdata-bind="click: item.EditProperties,\n\t\t\tattr: { src: item.author.avatarUrl },\n\t\t\tevent: { error: app.OnImageThumbLoadFail.bind(item,\'person\') }">\n\n\t\t<div class="w-comment__details">\n\t\t\t\x3c!-- ko if: showAuthor --\x3e\n\t\t\t\t<div class="w-comment__details-author">\n\t\t\t\t\t<a data-bind="\n\t\t\t\t\t\tattr: {\n\t\t\t\t\t\t\thref: $component.canGoToUser ? \'#/people/\'+item.author.id() : null\n\t\t\t\t\t\t}">\n\t\t\t\t\t\t{{item.author.fullName}}\n\t\t\t\t\t</a>\n\t\t\t\t\t<small class="w-comment__details-author-company">({{item.author.company}})</small>\n\n\t\t\t\t\t\x3c!-- ko if: item.private() != 0 && item.lockdownId() > 0 --\x3e\n\t\t\t\t\t\t<div class="w-comment__details-privacy">\n\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\tname: "widget-privacy-icon",\n\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\tprivate: item.private,\n\t\t\t\t\t\t\t\t\t\tlockdownId: item.lockdownId,\n\t\t\t\t\t\t\t\t\t\tprojectId: item.project.id,\n\t\t\t\t\t\t\t\t\t\tid: item.id,\n\t\t\t\t\t\t\t\t\t\ttitle: \'\',\n\t\t\t\t\t\t\t\t\t\ttype: \'comment\',\n\t\t\t\t\t\t\t\t\t\tshowLabel: false\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</div>\n\n\t\t\t\t\x3c!-- ko if: displayMode() == \'minimal\' --\x3e\n\t\t\t\t\t<div class="w-comment__details-date">\n\t\t\t\t\t\t<time data-bind="attr: { title: item.fullCommentDate }">\n\t\t\t\t\t\t\t{{$component.timeToDisplay}}\n\t\t\t\t\t\t</time>\n\t\t\t\t\t</div>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\x3c!-- ko if: showBreadcrumb --\x3e\n\t\t\t\t<div class="w-comment__details-breadcrumb">\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: \'ui-breadcrumb\',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tsegments: $component.GetBreadcrumbSegments(item)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</div>\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\x3c!-- ko ifnot: item.isEditing --\x3e\n\t\t\t\t<div class="w-comment__details-content">\n\t\t\t\t\t\x3c!-- ko if: displayMode() == \'expanded\' --\x3e\n\t\t\t\t\t\t<span data-bind="marked: {value: item.body, useMarkdown: item.contentType() == \'TEXT\', collapseQuotes: true, openExternalLinksInNewTab: true}"></span>\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\x3c!-- ko ifnot: displayMode() == \'expanded\' --\x3e\n\t\t\t\t\t\t\x3c!-- ko if: showShortBody --\x3e\n\t\t\t\t\t\t\t<span data-bind="marked: {value: item.body, useMarkdown: item.contentType() == \'TEXT\', strip: true, length: maxLength}"></span>\n\t\t\t\t\t\t\t<a href="javascript:;"\n\t\t\t\t\t\t\t\tclass="w-comment__details-content-toggle"\n\t\t\t\t\t\t\t\tdata-bind="click: OnClickToggle">\n\t\t\t\t\t\t\t\t{{app.tl(\'more\')}}{{{app.localizationPreferences().ellipsis}}}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\x3c!-- ko ifnot: showShortBody --\x3e\n\t\t\t\t\t\t\t<span data-bind="marked: {value: item.body, useMarkdown: item.contentType() == \'TEXT\', collapseQuotes: true, openExternalLinksInNewTab: true}"></span>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</div>\n\n\t\t\t\t\x3c!-- ko if: item.numLikes() > 0 --\x3e\n\t\t\t\t\t<div class="w-comment__details-reactions">\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\tname: \'thumbs-up-regular\',\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\x3c!-- ko if: item.likedByMe --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: item.numLikes() <= 3 --\x3e\n\t\t\t\t\t\t\t\t{{ app.reactions.GetLikeString(app.loggedInUser.id(),true,item.numLikes(),item.likedByUsers) }}\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\x3c!-- ko if: item.numLikes() > 3 --\x3e\n\t\t\t\t\t\t\t\t{{app.tl("You and ")}}\n\t\t\t\t\t\t\t\t<a href="javascript:;"\n\t\t\t\t\t\t\t\t\tclass="tipped"\n\t\t\t\t\t\t\t\t\tdata-tipped="{{app.reactions.GetAllOtherLikes(app.loggedInUser.id(),item.likedByUsers)}}"\n\t\t\t\t\t\t\t\t\tdata-tipped-options="skin:\'light\'">\n\t\t\t\t\t\t\t\t\t{{app.tl(\'[_s] others\',(item.numLikes()-1))}}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t&nbsp;{{app.tl("like this.")}}\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\x3c!-- ko if: item.canLike() --\x3e\n\t\t\t\t\t\t\t\t&middot;\n\t\t\t\t\t\t\t\t<a href="javascript:;" data-bind="click: function(){ item.React(\'like\') }">\n\t\t\t\t\t\t\t\t\t{{app.tl("Unlike")}}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\x3c!-- ko ifnot: item.likedByMe() --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: item.numLikes() <= 2 --\x3e\n\t\t\t\t\t\t\t\t{{app.reactions.GetLikeString(app.loggedInUser.id(), false, item.numLikes(), item.likedByUsers)}}\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\x3c!-- ko if: item.numLikes() > 2 --\x3e\n\t\t\t\t\t\t\t\t<a href="javascript:;"\n\t\t\t\t\t\t\t\t\tclass="tipped"\n\t\t\t\t\t\t\t\t\tdata-tipped="{{app.reactions.GetAllOtherLikes( app.loggedInUser.id(), item.likedByUsers )}}"\n\t\t\t\t\t\t\t\t\tdata-tipped-options="skin:\'light\'">\n\t\t\t\t\t\t\t\t\t{{app.tl(\'[_s] people\',item.numLikes())}}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t{{app.tl(\'liked this.\')}}\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\x3c!-- ko if: item.canLike --\x3e\n\t\t\t\t\t\t\t\t&middot;\n\t\t\t\t\t\t\t\t<a href="javascript:;" data-bind="click: function(){ item.React(\'like\') }">\n\t\t\t\t\t\t\t\t\t{{app.tl(\'Like\')}}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\x3c!-- <a href="javascript:;" class="is-me">You</a> and <a href="javascript:;">Daniel</a> like this --\x3e\n\t\t\t\t\t</div>\n\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\x3c!-- ko if: item.hasReactions() --\x3e\n\t\t\t\t\t<div class="w-comment__reactions w-reactions-list mb--medium">\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: \'widget-reactions\',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\titemType: \'comment\',\n\t\t\t\t\t\t\t\t\titem: item,\n\t\t\t\t\t\t\t\t\tshowList: true,\n\t\t\t\t\t\t\t\t\treadOnly: readOnly()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</div>\n\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\x3c!-- ko if: item.attachments().length --\x3e\n\t\t\t\t\t<div class="w-comment__details-attachments">\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: \'widget-attachments-list\',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tparentItem: item,\n\t\t\t\t\t\t\t\t\tattachments: item.attachments,\n\t\t\t\t\t\t\t\t\topenNewTab: openNewTab\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</div>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t</div>\n\t\x3c!-- /ko --\x3e\n\n\t\x3c!-- ko if: item.isEditing --\x3e\n\t\t<div class="w-comment__form">\n\t\t\t\x3c!-- ko if: isCommentable --\x3e\n\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\tname: \'widget-add-or-edit-comment\',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tdisplayMode: \'inline\',\n\t\t\t\t\t\t\titem: item.commentableItem,\n\t\t\t\t\t\t\tcomment: item,\n\t\t\t\t\t\t\tprojectId: item.projectId,\n\t\t\t\t\t\t\ttype: item.commentableType()\n\t\t\t\t\t\t}\n\t\t\t\t\t} --\x3e\n\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\x3c!--/ko--\x3e\n\t\t</div>\n\t\x3c!-- /ko --\x3e\n\n    \x3c!-- ko ifnot: item.isEditing --\x3e\n        <div class="w-comment__info">\n            <div class="w-comment__info-group">\n                <div class="w-comment__info-date">\n                    \x3c!-- ko if: displayMode() !== \'minimal\' --\x3e\n                        <time data-bind="attr: { title: item.fullCommentDate }">\n                            {{$component.timeToDisplay}}\n                        </time>\n                    \x3c!-- /ko --\x3e\n\n                    \x3c!-- ko ifnot: item.isRead --\x3e\n                        <div class="w-comment__info-status">\n                            \x3c!-- ko component: {\n                                    name: \'ui-unread-status\',\n                                    params: {\n                                        callback: item.MarkAsRead,\n                                        hint: app.tl(\'Mark as read\')\n                                    }\n                                } --\x3e\n                            \x3c!-- /ko --\x3e\n                        </div>\n                    \x3c!-- /ko --\x3e\n                </div>\n\n                <div class="w-comment__info-options">\n\n                    <div class="u-btn-group" role="group">\n\n                        \x3c!-- ko component: {\n                                name: \'widget-reactions\',\n                                params: {\n                                    itemType: \'comment\',\n                                    item: item,\n                                    readOnly: readOnly()\n                                }\n                            } --\x3e\n                        \x3c!-- /ko --\x3e\n\n                        <button\n                            type="button"\n                            data-bind="tippedDelegate"\n                            data-tipped-options="\n                                skin: \'light\',\n                                showOn: \'click\',\n                                hideOn: false,\n                                hideAfter: 300,\n                                position: \'bottommiddle\'"\n                            data-content="{{tippedContent}}"\n                            class="btn btn-white">\n\n\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tname: \'ellipsis-v-regular\'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\x3c!-- /ko  --\x3e\n                        </button>\n                    </div>\n                </div>\n            </div>\n\n            <div class="w-comment__info-group">\n                \x3c!-- ko if: item.nrNotifiedPeople() > 0 --\x3e\n                    <div class="w-comment__info-users">\n                        \x3c!-- ko component: {\n                                name: \'widget-related-users\',\n                                params: {\n                                    numberOfUsers: item.nrNotifiedPeople,\n                                    itemType: \'comment\',\n                                    itemId: item.id(),\n                                    useRemoteData: true,\n                                    titleText: app.tl(\'Notified\')\n                                }\n                            } --\x3e\n                        \x3c!-- /ko --\x3e\n                    </div>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: item.attachmentsCount() > 0 --\x3e\n                    <div class="w-comment__info-attachments">\n                        \x3c!-- ko component: {\n                                name: \'ui-common-icon\',\n                                params: {\n                                    name: \'paperclip-regular\'\n                                }\n                            } --\x3e\n                        \x3c!-- /ko --\x3e\n\n                        <span>\n                            {{item.attachmentsCount}}\n                        </span>\n                    </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        </div>\n    \x3c!-- /ko --\x3e\n</div>'},3041:function(t,e){t.exports='<ul class="tippedMenu">\n    \x3c!-- ko ifnot: item.isRead --\x3e\n\t\t    <li>\n            <a href="javascript:;" data-bind="click: item.MarkAsRead">\n                {{app.tl(\'Mark As Read\')}}\n            </a>\n        </li>\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- ko if: allowReply && !readOnly() --\x3e\n        <li>\n            <a href="javascript:;" data-bind="click: item.Reply">\n                {{app.tl(\'Reply\')}}\n            </a>\n        </li>\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- ko if: canEdit --\x3e\n        <li>\n            <a href="javascript:;" data-bind="click: item.Edit">\n                {{app.tl(\'Edit\')}}\n            </a>\n        </li>\n        <li>\n            <a href="javascript:;" data-bind="click: item.Delete">\n                {{app.tl(\'Delete\')}}\n            </a>\n        </li>\n\n        <li>\n            <a href="javascript:;" data-bind="click: item.EditProperties">\n                {{app.tl(\'Modify Properties\')}}\n            </a>\n        </li>\n    \x3c!-- /ko --\x3e\n\n    <li>\n        <a href="javascript:;" data-bind="clipboard: { text: app.account.URL() + \'/\' + item.commentLink() }">\n            {{app.tl(\'Copy Link\')}}\n        </a>\n    </li>\n</ul>'},3051:function(t,e){t.exports='<div class="w-ui-announcement mb--large h-show-hover--parent"\n\tdata-bind="\n\t\tcss: {\n\t\t\t\'w-ui-announcement--collapsed\': isCollapsed\n\t\t},\n\t\tclick: isCollapsed() ? OnClickToggle : void(0)"">\n\t<div class="w-ui-announcement__header">\n\t\t<label class="w-ui-announcement__header-label">\n\t\t\t{{app.tl(\'Message\')}} \x3c!-- ko if: isCollapsed --\x3e<span class="ml--small">({{app.tl(\'Hidden\')}})</span>\x3c!--/ko--\x3e\n\t\t</label>\n\n\t\t<div class="w-ui-announcement__header-options h-show-hover--child">\n\t\t\t\x3c!-- ko ifnot: isCollapsed --\x3e\n\t\t\t\t\x3c!-- ko if: canAddAnnouncement --\x3e\n\t\t\t\t\t<a href="javascript:;" class="w-ui-announcement__header-edit h-show-hover--child"\n\t\t\t\t\t\tdata-bind="click: OnClickEdit">\n\t\t\t\t\t\t<i class="fa fa-pencil" aria-hidden="true"></i>\n\t\t\t\t\t\t{{app.tl(\'Edit\')}}\n\t\t\t\t\t</a>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t<a href="javascript:;" class="w-ui-announcement__header-toggle h-show-hover--child"\n\t\t\t\tdata-bind="click: OnClickToggle">\n\t\t\t\t\x3c!-- ko if: isCollapsed --\x3e\n\t\t\t\t\t{{ app.tl(\'Show\') }}\n\t\t\t\t\t<i class="fa fa-angle-down" aria-hidden="true"></i>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\x3c!-- ko ifnot: isCollapsed --\x3e\n\t\t\t\t\t{{ app.tl(\'Hide\') }}\n\t\t\t\t\t<i class="fa fa-angle-up" aria-hidden="true"></i>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</a>\n\t\t</div>\n\t</div>\n\n\t<div class="w-ui-announcement__content h-typo-formatting">\n\t\t{{{ app.account.dashboardMessageHTML }}}\n\t</div>\n</div>'},3056:function(t,e){t.exports='<div class="w-event h-show-hover--parent" >\n    <span class="w-event__time">\n        {{eventTimes}}\n    </span>\n\n    <div class="w-event__details">\n        <span class="w-event__details-color"\n            data-bind="\n                style: {\n                    backgroundColor: eventTypeColor\n                },\n                css: {\n                    \'w-event__details-color--transparent\': eventTypeColor() == \'\'\n                }">\n        </span>\n\n        <span class="w-event__details-title">\n            <a href="javascript:;" data-bind="click: OnClickShowQuickView">\n                {{title}}\n            </a>\n        </span>\n\n        <span class="w-event__details-location">\n            {{location}}\n        </span>\n    </div>\n\n    <div class="w-event__meta">\n        \x3c!-- ko if: ko.unwrap(eventTypeName).length --\x3e\n            <div class="w-event__meta-type">\n                \x3c!-- ko component: {\n                        name: \'ui-label\',\n                        params: {\n                            backgroundColor: \'#ffffff\',\n                            label: eventTypeName,\n                            borderColor: eventTypeColor,\n                            color: eventTypeColor\n                        }\n                    } --\x3e\n                \x3c!-- /ko --\x3e\n            </div>\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: ko.unwrap(attendeeArray).length  --\x3e\n            <span class="w-event__meta-attendees">\n                \x3c!-- ko component: {\n                        name: \'widget-related-users\',\n                        params: {\n                            users: attendeeArray,\n                            titleText: app.tl(\'Attendees\')\n                        }\n                    } --\x3e\n                \x3c!-- /ko --\x3e\n            </span>\n        \x3c!-- /ko --\x3e\n\n        <div class="w-event__action">\n            <div class="u-btn-group">\n                <button type="button"\n                    data-bind="tippedDelegate"\n                    data-tipped-options="\n                        skin: \'light\',\n                        showOn: \'click\',\n                        hideOn: false,\n                        hideAfter: 300,\n                        position: \'bottommiddle\'"\n                    data-content="{{tippedContent}}"\n                    class="btn main-header__button btn-white">\n                    \x3c!-- ko component: {\n                            name: \'ui-common-icon\',\n                            params: {\n                                name: \'ellipsis-v-regular\'\n                            }\n                        } --\x3e\n                    \x3c!-- /ko  --\x3e\n                </button>\n            </div>\n        </div>\n    </div>\n</div>'},3057:function(t,e){t.exports='<ul class="tippedMenu">\n    \x3c!-- ko if: event.canEdit --\x3e\n        <li>\n            <a href="javascript:;" data-bind="click: OnClickEditEvent">\n                {{app.tl(\'Edit\')}}\n            </a>\n        </li>\n        <li>\n            <a href="javascript:;" data-bind="click: OnClickDeleteEvent">\n                {{app.tl(\'Delete\')}}\n            </a>\n        </li>\n\n        <li>\n            <a href="javascript:;" data-bind="click: OnClickModifyProperties">\n                {{app.tl(\'Modify Properties\')}}\n            </a>\n        </li>\n    \x3c!-- /ko --\x3e\n\n    <li>\n        <a href="javascript:;" data-bind="clipboard: { text: app.account.URL() + \'/#/calendar?id=\' + event.id }">\n            {{app.tl(\'Copy Link\')}}\n        </a>\n    </li>\n</ul>'},3109:function(t,e){t.exports='<script type="text/html" id="message-author-name">\n    <div class="w-message__details-author">\n        \x3c!-- ko ifnot: useReply --\x3e\n            {{ item.author.fullName }}\n            <span class="w-message__details-author-company">({{ item.author.company }})</span>\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: useReply --\x3e\n            {{ item.latestReply.author.fullName }}\n            <span class="w-message__details-author-company">({{ item.latestReply.author.company }})</span>\n        \x3c!-- /ko --\x3e\n    </div>\n<\/script>\n\n<script type="text/html" id="message-author-avatar">\n    \x3c!-- ko ifnot: useReply --\x3e\n        <img class="w-message__avatar"\n            data-bind="click: item.EditProperties,\n                attr: { src: item.author.avatarUrl },\n                event: { error: app.OnImageThumbLoadFail.bind(item,\'person\') }">\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- ko if: useReply --\x3e\n        <img class="w-message__avatar"\n            data-bind="click: item.EditProperties,\n                attr: { src: item.latestReply.author.avatarUrl },\n                event: { error: app.OnImageThumbLoadFail.bind(item.latestReply,\'person\') }">\n    \x3c!-- /ko --\x3e\n<\/script>\n\n\n<div class="w-message h-show-hover--parent {{cssClasses}}"\n    data-bind="onRendered: OnRendered">\n\n    \x3c!-- ko if: canDrag() && !readOnly() --\x3e\n        <div class="w-message__drag h-show-hover--child">\n            \x3c!-- ko component: {\n                    name: \'ui-common-icon\',\n                    params: {\n                        name: \'draghandle-tw-solid\',\n                        size: \'1x\'\n                    }\n                } --\x3e\n            \x3c!-- /ko --\x3e\n        </div>\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- ko if: showAuthor --\x3e\n        \x3c!-- ko template: {\n                name: \'message-author-avatar\',\n                data: {\n                    useReply: !isInline && item.hasLatestReply(),\n                    item: item\n                }\n            } --\x3e\n        \x3c!-- /ko --\x3e\n    \x3c!-- /ko --\x3e\n\n    <div class="w-message__details">\n        \x3c!-- ko if: showBreadcrumb --\x3e\n            <div class="w-message__details-title">\n                <div class="flex flex-items-center flex-wrap width--100">\n                    \x3c!-- ko if: showPrivacy --\x3e\n                        \x3c!-- ko if: item.private() != 0 && item.lockdownId() > 0 --\x3e\n                            <div class="w-message__details-privacy">\n                                \x3c!-- ko component: {\n                                        name: "widget-privacy-icon",\n                                        params: {\n                                            private: item.private,\n                                            lockdownId: item.lockdownId,\n                                            projectId: item.project.id,\n                                            id: item.id,\n                                            title: \'\',\n                                            type: \'message\',\n                                            showLabel: false\n                                        }\n                                    } --\x3e\n                                \x3c!-- /ko --\x3e\n                            </div>\n                        \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n\n                    <a href="#/{{ item.messageLink }}" class="mr--small">\n                        {{ item.displayTitle }}\n                    </a>\n\n                    <div class="w-message__actions h-show-hover--child">\n                        \x3c!-- ko if:  !readOnly() && item.canEditContents() && item.tags().length == 0 && showTags && displayMode() != \'collapsed\' --\x3e\n                            <div class="w-tags">\n                                \x3c!-- ko component: {\n                                        name: "widget-tags-addIcon",\n                                        params: {\n                                            item: item,\n                                            id: item.messageId,\n\t\t\t\t\t\t\t\t\t\t\ttype: "message",\n\t\t\t\t\t\t\t\t\t\t\tprojectId: item.project.id,\n                                            showText: false,\n                                            showIcon: true,\n                                            autosave: true,\n                                            canAddTags: !readOnly()\n                                        }\n                                    } --\x3e\n                                \x3c!-- /ko --\x3e\n                            </div>\n                        \x3c!-- /ko --\x3e\n\n                        <span class="tipped-hide cursor--pointer px--small"\n                            data-bind="click: item.OnQuickView"\n                            data-tipped="{{app.tl(\'Quick View\')}}">\n                            \x3c!-- ko component: {\n                                    name: \'ui-common-icon\',\n                                    params: {\n                                        name: \'quickview-solid\',\n                                        color: "#9e9e9e"\n                                    }\n                                } --\x3e\n                            \x3c!-- /ko --\x3e\n                        </span>\n                    </div>\n                </div>\n            </div>\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: showAuthor || showBreadcrumb --\x3e\n            <div class="w-message__details-subtitle">\n                \x3c!-- ko if: showAuthor --\x3e\n                    \x3c!-- ko template: {\n                            name: \'message-author-name\',\n                            data: {\n                                useReply: !isInline && item.hasLatestReply(),\n                                item: item\n                            }\n                        } --\x3e\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: showBreadcrumb --\x3e\n                    \x3c!-- ko if: showCategoryInBreadcrumb --\x3e\n                        <span class="mr--small">\n                            {{app.tl(\'in\')}}\n                        </span>\n\n                        \x3c!-- ko if: item.category.id() != \'\' && item.category.id() > 0 --\x3e\n                            <a class="w-message__details-category" href="#/projects/{{item.project.id}}/messages?catid={{item.category.id}}">\n                                \x3c!-- ko if: item.category.color() != \'\' --\x3e\n                                    <div class="w-message__details-category-color"\n                                        data-bind="style: {\n                                            \'background-color\': app.utility.GetValidHex(item.category.color)\n                                        }">\n                                    </div>\n                                \x3c!-- /ko --\x3e\n                                \x3c!-- ko if: item.category.color() == \'\' --\x3e\n                                    <div class="w-message__details-category-color w-message__details-category-color--empty"></div>\n                                \x3c!-- /ko --\x3e\n                                {{ item.category.name }}\n                            </a>\n                        \x3c!-- /ko --\x3e\n\n                        \x3c!-- ko ifnot: item.category.id() != \'\' && item.category.id() > 0 --\x3e\n                            <a class="w-message__details-category" href="#/projects/{{item.project.id}}/messages?catid=0">\n                                <div class="w-message__details-category-color w-message__details-category-color--empty"></div>\n                                {{ app.tl(\'No category\') }}\n                            </a>\n                        \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n\n                    \x3c!-- ko if: showProjectInBreadcrumb --\x3e\n                        <a class="w-message__details-project" href="#/projects/{{item.project.id}}/messages">\n                            <span>\n                                ({{ item.project.name }} &mdash; {{item.company.name}})\n                            </span>\n                        </a>\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n            </div>\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: item.tags().length > 0 && showTags --\x3e\n            <div class="w-message__details-tags">\n                <div class="w-tags">\n                    \x3c!-- ko component: {\n                            name: "widget-tags-list",\n                            params:{\n                                item: item,\n                                id: item.messageId,\n                                type: "message",\n\t\t\t\t\t\t\t\tcanEdit: item.canEditContents(),\n\t\t\t\t\t\t\t\tprojectId: item.project.id,\n                                enabled: true,\n                                canAddTags: !readOnly()\n                            }\n                        } --\x3e\n                    \x3c!-- /ko --\x3e\n\n                    \x3c!-- ko if: !readOnly() && item.canEditContents --\x3e\n                        \x3c!-- ko component: {\n                                name: "widget-tags-addIcon",\n                                params: {\n                                    item: item,\n                                    id: item.messageId,\n\t\t\t\t\t\t\t\t\ttype: "message",\n\t\t\t\t\t\t\t\t\tprojectId: item.project.id,\n                                    showText: false,\n                                    showIcon: true,\n                                    autosave: true\n                                }\n                            } --\x3e\n                        \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n                </div>\n            </div>\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko ifnot: item.isEditing --\x3e\n            <div class="w-message__details-content">\n                \x3c!-- ko if: displayMode() == \'expanded\' --\x3e\n                    <span data-bind="\n                        marked: {\n                            value: (!isInline && item.hasLatestReply() ? item.latestReply.body : item.body),\n                            useMarkdown: (!isInline && item.hasLatestReply() ? item.latestReply.contentType() == \'TEXT\' : item.contentType() == \'TEXT\'),\n                            collapseQuotes: true,\n                            openExternalLinksInNewTab: true\n                        }">\n                    </span>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko ifnot: displayMode() == \'expanded\' --\x3e\n                    \x3c!-- ko if: showShortBody --\x3e\n                        <span data-bind="\n                            marked: {\n                                value: (!isInline && item.hasLatestReply() ? item.latestReply.body : item.body),\n                                useMarkdown: (!isInline && item.hasLatestReply() ? item.latestReply.contentType() == \'TEXT\' : item.contentType() == \'TEXT\'),\n                                strip: true,\n                                length: maxLength\n                            }">\n                        </span>\n\n                        <a href="javascript:;"\n                            class="w-message__details-content-toggle"\n                            data-bind="click: OnClickToggle">\n                            {{app.tl(\'more\')}}{{{app.localizationPreferences().ellipsis}}}\n                        </a>\n                    \x3c!-- /ko --\x3e\n                    \x3c!-- ko ifnot: showShortBody --\x3e\n                        <span data-bind="\n                            marked: {\n                                value: (!isInline && item.hasLatestReply() ? item.latestReply.body : item.body),\n                                useMarkdown: (!isInline && item.hasLatestReply() ? item.latestReply.contentType() == \'TEXT\' : item.contentType() == \'TEXT\'),\n                                collapseQuotes: true,\n                                openExternalLinksInNewTab: true\n                            }">\n                        </span>\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n            </div>\n\n            \x3c!-- ko if: item.numLikes() > 0 --\x3e\n                <div class="w-message__details-reactions">\n                    \x3c!-- ko if: !readOnly() --\x3e\n                        \x3c!-- ko component: {\n                                name: \'ui-common-icon\',\n                                params: {\n                                    name: \'thumbs-up-regular\',\n                                }\n                            } --\x3e\n                        \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n\n                    \x3c!-- ko if: item.likedByMe --\x3e\n                        \x3c!-- ko if: item.numLikes() <= 3 --\x3e\n                            {{ app.reactions.GetLikeString(app.loggedInUser.id(),true,item.numLikes(),item.likedByUsers) }}\n                        \x3c!-- /ko --\x3e\n\n                        \x3c!-- ko if: item.numLikes() > 3 --\x3e\n                            {{app.tl("You and ")}}\n                            <a href="javascript:;"\n                                class="tipped"\n                                data-tipped="{{app.reactions.GetAllOtherLikes(app.loggedInUser.id(),item.likedByUsers)}}"\n                                data-tipped-options="skin:\'light\'">\n                                {{app.tl(\'[_s] others\',(item.numLikes()-1))}}\n                            </a>\n                            &nbsp;{{app.tl("like this.")}}\n                        \x3c!-- /ko --\x3e\n\n                        \x3c!-- ko if: item.canLike() && !readOnly() --\x3e\n                            &middot;\n                            <a href="javascript:;" data-bind="click: function(){ item.React(\'like\') }">\n                                {{app.tl("Unlike")}}\n                            </a>\n                        \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n\n                    \x3c!-- ko ifnot: item.likedByMe() --\x3e\n                        \x3c!-- ko if: item.numLikes() <= 2 --\x3e\n                            {{app.reactions.GetLikeString(app.loggedInUser.id(), false, item.numLikes(), item.likedByUsers)}}\n                        \x3c!-- /ko --\x3e\n\n                        \x3c!-- ko if: item.numLikes() > 2 --\x3e\n                            <a href="javascript:;"\n                                class="tipped"\n                                data-tipped="{{app.reactions.GetAllOtherLikes( app.loggedInUser.id(), item.likedByUsers )}}"\n                                data-tipped-options="skin:\'light\'">\n                                {{app.tl(\'[_s] people\',item.numLikes())}}\n                            </a>\n                            {{app.tl(\'liked this.\')}}\n                        \x3c!-- /ko --\x3e\n\n                        \x3c!-- ko if: item.canLike && !readOnly() --\x3e\n                            &middot;\n                            <a href="javascript:;" data-bind="click: function(){ item.React(\'like\') }">\n                                {{app.tl(\'Like\')}}\n                            </a>\n                        \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n                </div>\n            \x3c!-- /ko --\x3e\n\n            \x3c!-- ko if: displayMode() != \'collapsed\' --\x3e\n                \x3c!-- ko if: item.hasLatestReply() && item.latestReply.hasReactions() --\x3e\n                    <div class="w-message__reactions w-reactions-list mb--medium">\n                        \x3c!-- ko component: {\n                                name: \'widget-reactions\',\n                                params: {\n                                    itemType: \'message\',\n                                    item: item.latestReply,\n                                    showList: true,\n                                    readOnly: readOnly()\n                                }\n                            } --\x3e\n                        \x3c!-- /ko --\x3e\n                    </div>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: !item.hasLatestReply() && item.hasReactions() --\x3e\n                    <div class="w-message__reactions w-reactions-list mb--medium">\n                        \x3c!-- ko component: {\n                                name: \'widget-reactions\',\n                                params: {\n                                    itemType: \'message\',\n                                    item: item,\n                                    showList: true,\n                                    readOnly: readOnly()\n                                }\n                            } --\x3e\n                        \x3c!-- /ko --\x3e\n                    </div>\n                \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n\n            \x3c!-- ko if: item.hasLatestReply --\x3e\n                \x3c!-- ko if: item.latestReply.attachments().length --\x3e\n                    <div class="w-message__details-attachments">\n                        \x3c!-- ko component: {\n                                name: \'widget-attachments-list\',\n                                params: {\n                                    attachments: item.latestReply.attachments,\n                                    parentItem: item.latestReply,\n                                    itemType: \'message\',\n                                    itemId: item.latestReply.postId\n                                }\n                            } --\x3e\n                        \x3c!-- /ko --\x3e\n                    </div>\n                \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n\n            \x3c!-- ko ifnot: item.hasLatestReply --\x3e\n                \x3c!-- ko if: item.attachments().length --\x3e\n                    <div class="w-message__details-attachments">\n                        \x3c!-- ko component: {\n                                name: \'widget-attachments-list\',\n                                params: {\n                                    attachments: item.attachments,\n                                    parentItem: item,\n                                    itemType: \'message\',\n                                    itemId: item.id\n                                }\n                            } --\x3e\n                        \x3c!-- /ko --\x3e\n                    </div>\n                \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n\n            \x3c!-- ko if: displayMode() == \'expanded\' --\x3e\n                \x3c!-- ko if: item.hasLatestReply --\x3e\n                    <div class="w-message__original">\n                        <label class="w-message__original-label">\n                            {{ app.tl(\'Original Message\') }}\n                        </label>\n                        <div class="w-message">\n                            \x3c!-- ko template: {\n                                    name: \'message-author-avatar\',\n                                    data: {\n                                        useReply: false,\n                                        item: item\n                                    }\n                                } --\x3e\n                            \x3c!-- /ko --\x3e\n\n                            <div class="w-message__details">\n                                \x3c!-- ko template: {\n                                        name: \'message-author-name\',\n                                        data: {\n                                            useReply: false,\n                                            item: item\n                                        }\n                                    } --\x3e\n                                \x3c!-- /ko --\x3e\n\n                                <div class="w-message__details-content">\n                                    <span data-bind="\n                                        marked: {\n                                            value: item.body,\n                                            useMarkdown: item.contentType() == \'TEXT\',\n                                            collapseQuotes: true,\n                                            openExternalLinksInNewTab: true\n                                        }">\n                                    </span>\n                                </div>\n\n                                <div class="w-message__reactions w-reactions-list">\n                                    \x3c!-- ko component: {\n                                            name: \'widget-reactions\',\n                                            params: {\n                                                itemType: \'message\',\n                                                item: item,\n                                                showList: true,\n                                                buttonSize: \'1x\',\n                                                readOnly: readOnly()\n                                            }\n                                        } --\x3e\n                                    \x3c!-- /ko --\x3e\n                                </div>\n                            </div>\n\n                            <div class="w-message__info">\n                                <div class="w-message__info-group">\n                                    <div class="w-message__info-date">\n                                        <time class="tipped-hide"\n                                            data-tipped="{{ originalMessageFullDate }}">\n                                            {{ originalMessageShortDate }}\n                                        </time>\n\n                                        \x3c!-- ko ifnot: item.isRead --\x3e\n                                            <div class="w-message__info-status">\n                                                \x3c!-- ko component: {\n                                                        name: \'ui-unread-status\',\n                                                        params: {\n                                                            callback: item.MarkAsRead,\n                                                            hint: app.tl(\'Mark as read\')\n                                                        }\n                                                    } --\x3e\n                                                \x3c!-- /ko --\x3e\n                                            </div>\n                                        \x3c!-- /ko --\x3e\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: item.isEditing() && !readOnly() --\x3e\n            <div class="w-message__form">\n                \x3c!-- ko component: {\n                        name: \'widget-add-or-edit-message\',\n                        params: {\n                            item: (!isInline && item.hasLatestReply() ? item.latestReply : item),\n                            mode: \'edit\',\n                            showList: true\n                        }\n                    } --\x3e\n                \x3c!-- /ko --\x3e\n            </div>\n        \x3c!-- /ko --\x3e\n    </div>\n\n    \x3c!-- ko ifnot: item.isEditing --\x3e\n        <div class="w-message__info">\n            <div class="w-message__info-group">\n\n                <div class="w-message__info-date">\n\n                    \x3c!-- ko if: item.hasLatestReply --\x3e\n                        <time class="tipped-hide"\n                            data-tipped="{{item.fullUpdatedDate}}">\n                            {{ item.latestReplyRelativeDate }}\n                        </time>\n                    \x3c!-- /ko --\x3e\n\n                    \x3c!-- ko ifnot: item.hasLatestReply --\x3e\n                        <time class="tipped-hide"\n                            data-tipped="{{ originalMessageFullDate }}">\n                            {{ originalMessageShortDate }}\n                        </time>\n                    \x3c!-- /ko --\x3e\n\n                    \x3c!-- ko ifnot: item.isRead --\x3e\n                        <div class="w-message__info-status">\n                            \x3c!-- ko component: {\n                                    name: \'ui-unread-status\',\n                                    params: {\n                                        callback: item.MarkAsRead,\n                                        hint: app.tl(\'Mark as read\')\n                                    }\n                                } --\x3e\n                            \x3c!-- /ko --\x3e\n                        </div>\n                    \x3c!-- /ko --\x3e\n                </div>\n\n                <div class="w-message__info-options">\n                    <div class="u-btn-group" role="group">\n                        \x3c!-- ko if: displayMode() != \'collapsed\' --\x3e\n                            \x3c!-- ko component: {\n                                    name: \'widget-reactions\',\n                                    params: {\n                                        itemType: \'message\',\n                                        item: (!isInline && item.hasLatestReply() ? item.latestReply : item),\n                                        readOnly: readOnly()\n                                    }\n                                } --\x3e\n                            \x3c!-- /ko --\x3e\n                        \x3c!-- /ko --\x3e\n\n                        <button\n                            type="button"\n                            data-bind="tippedDelegate"\n                            data-tipped-options="\n                                skin: \'light\',\n                                showOn: \'click\',\n                                hideOn: false,\n                                hideAfter: 300,\n                                position: \'bottommiddle\'"\n                            data-content="{{tippedContent}}"\n                            class="btn btn-white">\n\n                            \x3c!-- ko component: {\n                                    name: \'ui-common-icon\',\n                                    params: {\n                                        name: \'ellipsis-v-regular\',\n                                    }\n                                } --\x3e\n                            \x3c!-- /ko  --\x3e\n                        </button>\n                    </div>\n                </div>\n            </div>\n\n            \x3c!-- ko if: displayMode() != \'collapsed\' --\x3e\n                \x3c!-- ko if: item.contributingUsers && item.contributingUsers().length > 0 --\x3e\n                    <div class="w-message__info-group">\n                        <div class="w-message__info-users">\n                            \x3c!-- ko if: item.contributingUsers().length > 3 --\x3e\n                                <span class="w-message__info-users-extra">\n                                    \x3c!-- ko component: {\n                                            name: \'widget-related-users\',\n                                            params: {\n                                                users: item.contributingUsers(),\n                                                titleText: app.tl(\'Contributors\'),\n                                                tippedLabel: \'+\' + (item.contributingUsers().length - 3)\n                                            }\n                                        } --\x3e\n                                    \x3c!-- /ko --\x3e\n                                </span>\n                            \x3c!-- /ko --\x3e\n\n                            \x3c!-- ko foreach: item.contributingUsers --\x3e\n                                \x3c!-- ko if: $index() < 3 --\x3e\n                                    <img class="tipped-hide"\n                                        data-bind="click: item.EditProperties,\n                                            attr: { src: avatarURL },\n                                            event: { error: app.OnImageThumbLoadFail.bind($data,\'person\') }"\n                                        data-tipped="{{fullName}}">\n                                \x3c!-- /ko --\x3e\n                            \x3c!-- /ko --\x3e\n                        </div>\n                    </div>\n                \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n\n            \x3c!-- ko if: ko.unwrap(item.commentsCount) > 0 || ko.unwrap(item.numNotified) > 0 || ko.unwrap(item.attachmentsCount) > 0 --\x3e\n                <div class="w-message__info-group">\n                    \x3c!-- ko if: ko.unwrap(item.commentsCount) > 0 --\x3e\n                        <div class="w-message__info-count tipped-hide"\n                            data-bind="attr:{ \'data-tipped\': item.commentsCount() == 1 ? app.tl(\'[_s] reply\', \'1\') : app.tl(\'[_s] replies\', item.commentsCount()) }">\n                            \x3c!-- ko component: {\n                                    name: \'ui-common-icon\',\n                                    params: {\n                                        name: \'reply-regular\'\n                                    }\n                                } --\x3e\n                            \x3c!-- /ko --\x3e\n                            <span>\n                                {{ item.commentsCount }}\n                            </span>\n                        </div>\n                    \x3c!-- /ko --\x3e\n\n                    \x3c!-- ko if: item.hasLatestReply --\x3e\n                        \x3c!-- ko if: item.latestReply.numNotified() > 0 --\x3e\n                            <div class="w-message__info-users">\n                                \x3c!-- ko component: {\n                                        name: \'widget-related-users\',\n                                        params: {\n                                            numberOfUsers: item.latestReply.numNotified,\n                                            itemType: \'message\',\n                                            itemId: item.latestReply.postId(),\n                                            useRemoteData: true,\n                                            titleText: app.tl(\'Notified\')\n                                        }\n                                    } --\x3e\n                                \x3c!-- /ko --\x3e\n                            </div>\n                        \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n\n                    \x3c!-- ko ifnot: item.hasLatestReply --\x3e\n                        \x3c!-- ko if: item.numNotified() > 0 --\x3e\n                            <div class="w-message__info-users">\n                                \x3c!-- ko component: {\n                                        name: \'widget-related-users\',\n                                        params: {\n                                            numberOfUsers: item.numNotified,\n                                            itemType: \'message\',\n                                            itemId: item.postId(),\n                                            useRemoteData: true,\n                                            titleText: app.tl(\'Notified\')\n                                        }\n                                    } --\x3e\n                                \x3c!-- /ko --\x3e\n                            </div>\n                        \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n\n                    \x3c!-- ko if: item.hasLatestReply --\x3e\n                        \x3c!-- ko if: item.latestReply.attachmentsCount() > 0 --\x3e\n                            <div class="w-message__info-attachments tipped-hide"\n                                data-bind="attr:{ \'data-tipped\': item.latestReply.attachmentsCount() == 1 ? app.tl(\'[_s] file attached\', \'1\') : app.tl(\'[_s] files attached\', item.latestReply.attachmentsCount()) }">\n                                \x3c!-- ko component: {\n                                        name: \'ui-common-icon\',\n                                        params: {\n                                            name: \'paperclip-regular\'\n                                        }\n                                    } --\x3e\n                                \x3c!-- /ko --\x3e\n                                <span>\n                                    {{ item.latestReply.attachmentsCount }}\n                                </span>\n                            </div>\n                        \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n\n                    \x3c!-- ko ifnot: item.hasLatestReply --\x3e\n                        \x3c!-- ko if: item.attachmentsCount() > 0 --\x3e\n                            <div class="w-message__info-attachments tipped-hide"\n                                data-bind="attr:{ \'data-tipped\': item.attachmentsCount() == 1 ? app.tl(\'[_s] file attached\', \'1\') : app.tl(\'[_s] files attached\', item.attachmentsCount()) }">\n                                \x3c!-- ko component: {\n                                        name: \'ui-common-icon\',\n                                        params: {\n                                            name: \'paperclip-regular\'\n                                        }\n                                    } --\x3e\n                                \x3c!-- /ko --\x3e\n                                <span>\n                                    {{ item.attachmentsCount }}\n                                </span>\n                            </div>\n                        \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n                </div>\n            \x3c!-- /ko --\x3e\n        </div>\n    \x3c!-- /ko --\x3e\n</div>'},3110:function(t,e){t.exports='<ul class="tippedMenu">\n\t\x3c!-- ko if: allowReply && !isArchivedProject() --\x3e\n\t\t<li>\n\t\t\t<a href="javascript:;" data-bind="click: item.Reply">\n\t\t\t\t{{app.tl(\'Reply\')}}\n\t\t\t</a>\n\t\t</li>\n\t\x3c!-- /ko --\x3e\n\t\x3c!-- ko ifnot: item.isRead --\x3e\n\t\t<li>\n\t\t\t<a href="javascript:;" data-bind="click: item.MarkAsRead">\n\t\t\t\t{{app.tl(\'Mark as read\')}}\n\t\t\t</a>\n\t\t</li>\n\t\x3c!-- /ko --\x3e\n\t\x3c!-- ko if: item.canEditContents() && isInline --\x3e\n\t\t<li>\n\t\t\t<a href="javascript:;" data-bind="click: item.Edit">\n\t\t\t\t{{app.tl(\'Edit\')}}\n\t\t\t</a>\n\t\t</li>\n\t\x3c!-- /ko --\x3e\n\t\x3c!-- ko if: item.canDelete --\x3e\n\t\t<li>\n\t\t\t<a href="javascript:;" data-bind="click: item.Delete">\n\t\t\t\t{{app.tl(\'Delete\')}}\n\t\t\t</a>\n\t\t</li>\n\t\x3c!-- /ko --\x3e\n\t\x3c!-- ko if: item.isReply --\x3e\n\t\t<li>\n\t\t\t<a href="javascript:;" data-bind="click: item.SplitMessage">\n\t\t\t\t{{app.tl(\'Split Message\')}}\n\t\t\t</a>\n\t\t</li>\n\t\x3c!-- /ko --\x3e\n\t\x3c!-- ko if: app.loggedInUser.administrator() && isInline --\x3e\n\t\t<li>\n\t\t\t<a href="javascript:;" data-bind="click: item.EditProperties">\n\t\t\t\t{{app.tl(\'Modify Properties\')}}\n\t\t\t</a>\n\t\t</li>\n\t\x3c!-- /ko --\x3e\n\t<li>\n\t\t<a href="javascript:;" data-bind="clipboard: { text: app.account.URL() + \'#/\' + item.messageLink() }">\n\t\t\t{{app.tl(\'Copy Link\')}}\n\t\t</a>\n\t</li>\n</ul>'},3111:function(t,e){t.exports="\x3c!-- ko if: showHeader --\x3e\n    <div class=\"w-metric__header\">\n        \x3c!-- ko component: {\n                name: 'ui-common-icon',\n                params: {\n                    name: 'draghandle-tw-solid',\n                    class: 'w-metric__header-handle',\n                    size: '1x'\n                }\n            } --\x3e\n        \x3c!-- /ko --\x3e\n        <span class=\"w-metric__header-title\">\n            {{ metricTitle }}\n        </span>\n\n        <span class=\"w-metric__header-range\">\n            \x3c!-- ko component: {\n                    name: 'ui-metric-range',\n                    params: {\n                        title: app.tl('Group By'),\n                        options: $component.getGroupByOptions(),\n                        selected: groupBy\n                    }\n                } --\x3e\n            \x3c!-- /ko --\x3e\n        </span>\n    </div>\n\x3c!-- /ko --\x3e\n\n<div class=\"w-metric__content\">\n    <div class=\"w-metric__chart-wrapper\">\n        \x3c!-- ko if: data.state() == 'loading' --\x3e\n            \x3c!-- ko component: {\n                    name: 'list-state-loading-new',\n                    params: {\n                        itemType: 'data',\n                        format: 'large',\n                        showText: false,\n                        useDelay: false\n                    }\n                } --\x3e\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: data.state() == 'blank' --\x3e\n            \x3c!-- ko component: {\n                    name: 'ui-blank-card',\n                    params: {\n                        graphic: 'bar',\n                        text: app.tl('There is no activity matching your filter')\n                    }\n                } --\x3e\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n\n        <div class=\"u-metric-horizontal-bar-chart\"\n            data-bind=\"\n                css: {\n                    'hidden': !(data.state() == 'content')\n                },\n                attr: {\n                    id: chartId\n                }\">\n        </div>\n    </div>\n</div>\n\n<div class=\"w-metric__paging\">\n    \x3c!-- ko if: showPagination --\x3e\n        <div class=\"u-btn-group class ml--auto\" role=\"group\">\n            <button type=\"button\"\n                data-bind=\"\n                    css: {\n                        disabled: !showPreviousButton()\n                    },\n                    click: OnClickPrevPage\"\n                data-tipped=\"{{app.tl('Previous')}}\"\n                class=\"btn btn-default btn-sm tipped-hide\">\n                \x3c!-- ko component: {\n                        name: 'ui-common-icon',\n                        params: {\n                            name: 'chevron-left-regular'\n                        }\n                    } --\x3e\n                \x3c!-- /ko --\x3e\n            </button>\n            <button type=\"button\"\n                data-bind=\"\n                    css: {\n                        disabled: !showNextButton()\n                    },\n                    click: OnClickNextPage\"\n                data-tipped=\"{{app.tl('Next')}}\"\n                class=\"btn btn-default btn-sm tipped-hide\">\n                \x3c!-- ko component: {\n                        name: 'ui-common-icon',\n                        params: {\n                            name: 'chevron-right-regular'\n                        }\n                    } --\x3e\n                \x3c!-- /ko --\x3e\n            </button>\n        </div>\n    \x3c!-- /ko --\x3e\n</div>"},3112:function(t,e){t.exports='\x3c!-- ko if: showHeader --\x3e\n    <div class="w-metric__header">\n        \x3c!-- ko component: {\n                name: \'ui-common-icon\',\n                params: {\n                    name: \'draghandle-tw-solid\',\n                    class: \'w-metric__header-handle\',\n                    size: \'1x\'\n                }\n            } --\x3e\n        \x3c!-- /ko --\x3e\n        <span class="w-metric__header-title">\n            {{ metricTitle }}\n        </span>\n\n        <span class="w-metric__header-range">\n            \x3c!-- ko component: {\n                    name: \'ui-metric-range\',\n                    params: {\n                        title: app.tl(\'Time range\'),\n                        options: getTimeRangeOptions(),\n                        selected: selectedTimeRange\n                    }\n                } --\x3e\n            \x3c!-- /ko --\x3e\n        </span>\n    </div>\n\x3c!-- /ko --\x3e\n\n<div class="w-metric__content">\n\n\t\x3c!-- ko ifnot: dataLoaded --\x3e\n\t\t\x3c!-- ko component: {\n\t\t\t\tname: \'list-state-loading-new\',\n\t\t\t\tparams: {\n\t\t\t\t\titemType: \'time\',\n\t\t\t\t\tformat: \'large\',\n\t\t\t\t\tshowText: false\n\t\t\t\t}\n\t\t\t} --\x3e\n\t\t\x3c!-- /ko --\x3e\n\t\x3c!-- /ko --\x3e\n\n\t\x3c!-- ko if: dataLoaded --\x3e\n        \x3c!-- ko if: hasData --\x3e\n            \x3c!-- ko if: chartData().length > 1 --\x3e\n                \x3c!-- ko component: {\n                        name: \'ui-metric\',\n                        params: {\n                            chartType: \'donut\',\n                            dataToPresent: chartData(),\n                            eventsKey: metricEventsKey,\n                            chartId: chartId,\n                            chartOptions: chartOptions\n                        }\n                    } --\x3e\n                \x3c!-- /ko --\x3e\n            \x3c!-- /ko--\x3e\n\n            \x3c!-- ko if: chartData().length == 1 && mainStatistic() != null --\x3e\n                <div class="w-metric__statistic-wrapper">\n                    <a href="javascript:;" class="w-metric__statistic" data-bind="click: onClickMainStatistic">\n                        <strong class="w-metric__statistic-number w-metric__statistic-number--small">{{ mainStatistic().value }}</strong>\n                        <span class="w-metric__statistic-label">\n                            {{ mainStatistic().title }}\n                        </span>\n                    </a>\n                </div>\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n        \x3c!-- ko ifnot: hasData --\x3e\n            \x3c!-- ko component: {\n                    name: \'ui-blank-card\',\n                    params: {\n                        graphic: \'pie\',\n                        text: app.tl(\'No timelogs match your current filter\')\n                    }\n                } --\x3e\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n\t\x3c!-- /ko --\x3e\n\n</div>\n\n    \x3c!-- ko if: chartData().length > 1 --\x3e\n        <div class="w-metric__footer w-metric__footer--time" data-bind="visible: $component.hasData">\n            <div class="w-metric__footer-stat w-metric__footer-stat--billable" data-bind="click: $component.onClickBillable">\n                <span class="w-metric__footer-stat-label">\n                    {{ percentBillable }}%\n                </span>\n\n                <div class="w-metric__footer-stat-name">\n                    {{ app.tl(\'Billable\') }}\n                </div>\n\n                <div class="w-metric__footer-stat-info">\n                    {{ billableTimeText }}\n                </div>\n            </div>\n\n            <div class="w-metric__footer-stat w-metric__footer-stat--non-billable" data-bind="click: onClickNonBillable">\n                <span class="w-metric__footer-stat-label">\n                    {{ percentNonBillable }}%\n                </span>\n\n                <div class="w-metric__footer-stat-name">\n                    {{ app.tl(\'Non-billable\') }}\n                </div>\n\n                <div class="w-metric__footer-stat-info">\n                    {{ nonBillableTimeText }}\n\n                </div>\n            </div>\n        </div>\n    \x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e'},3113:function(t,e){t.exports='\x3c!-- ko if: showHeader --\x3e\n    <div class="w-metric__header">\n        \x3c!-- ko component: {\n                name: \'ui-common-icon\',\n                params: {\n                    name: \'draghandle-tw-solid\',\n                    class: \'w-metric__header-handle\',\n                    size: \'1x\'\n                }\n            } --\x3e\n        \x3c!-- /ko --\x3e\n\n        <span class="w-metric__header-title">\n            {{ metricTitle }}\n        </span>\n\n        <span class="w-metric__header-range">\n            \x3c!-- ko component: {\n                    name: \'ui-metric-range\',\n                    params: {\n                        title: app.tl(\'Time range\'),\n                        options: $component.getTimeRangeOptions(),\n                        selected: selectedTimeRange\n                    }\n                } --\x3e\n            \x3c!-- /ko --\x3e\n        </span>\n    </div>\n\x3c!-- /ko --\x3e\n\n<div class="w-metric__content">\n\n\t\x3c!-- ko ifnot: dataLoaded --\x3e\n\t\t\x3c!-- ko component: {\n\t\t\t\tname: \'list-state-loading-new\',\n\t\t\t\tparams: {\n\t\t\t\t\titemType: \'time\',\n\t\t\t\t\tformat: \'large\',\n\t\t\t\t\tshowText: false\n\t\t\t\t}\n\t\t\t} --\x3e\n\t\t\x3c!-- /ko --\x3e\n\t\x3c!-- /ko --\x3e\n\n\t\x3c!-- ko if: dataLoaded --\x3e\n        \x3c!-- ko if: hasData --\x3e\n            \x3c!-- ko if: chartData().length > 1 --\x3e\n                \x3c!-- ko component: {\n                        name: \'ui-metric\',\n                        params: {\n                            chartType: \'donut\',\n                            dataToPresent: chartData(),\n                            eventsKey: metricEventsKey,\n                            chartId: chartId,\n                            chartOptions: chartOptions\n                        }\n                    } --\x3e\n                \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n\n            \x3c!-- ko if: chartData().length == 1 && mainStatistic() != null --\x3e\n                <div class="w-metric__statistic-wrapper">\n                    <a href="javascript:;" class="w-metric__statistic" data-bind="click: onClickMainStatistic">\n                        <strong class="w-metric__statistic-number w-metric__statistic-number--small">{{ mainStatistic().value }}</strong>\n                        <span class="w-metric__statistic-label">\n                            {{ mainStatistic().title }}\n                        </span>\n                    </a>\n                </div>\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n        \x3c!-- ko ifnot: hasData --\x3e\n            \x3c!-- ko component: {\n                    name: \'ui-blank-card\',\n                    params: {\n                        graphic: \'pie\',\n                        text: app.tl(\'No timelogs match your current filter\')\n                    }\n                } --\x3e\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n\t\x3c!-- /ko --\x3e\n</div>\n\n    \x3c!-- ko if: chartData().length > 1 --\x3e\n        <div class="w-metric__footer" data-bind="visible: hasData">\n            <div class="w-metric__footer-stat w-metric__footer-stat--billed"\n                data-bind="click: onClickBilled">\n                <span class="w-metric__footer-stat-label">\n                    {{ percentBilled }}%\n                </span>\n\n                <div class="w-metric__footer-stat-name">\n                    {{ app.tl(\'Billed\') }}\n                </div>\n\n                <div class="w-metric__footer-stat-info">\n                    {{ billedTimeText }}\n                </div>\n            </div>\n\n            <div class="w-metric__footer-stat w-metric__footer-stat--unbilled"\n                data-bind="click: onClickNonBilled">\n                <span class="w-metric__footer-stat-label">\n                    {{ percentNonBilled }}%\n                </span>\n\n                <div class="w-metric__footer-stat-name">\n                    {{ app.tl(\'Not billed\') }}\n                </div>\n\n                <div class="w-metric__footer-stat-info">\n                    {{ nonBilledTimeText }}\n                </div>\n            </div>\n        </div>\n    \x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n'},3115:function(t,e){t.exports="\x3c!-- ko if: showHeader --\x3e\n    <div class=\"w-metric__header\">\n        \x3c!-- ko component: {\n                name: 'ui-common-icon',\n                params: {\n                    name: 'draghandle-tw-solid',\n                    class: 'w-metric__header-handle',\n                    size: '1x'\n                }\n            } --\x3e\n        \x3c!-- /ko --\x3e\n        <span class=\"w-metric__header-title\">\n            {{ metricTitle }}\n        </span>\n\n        \x3c!-- ko if: showRange --\x3e\n            <span class=\"w-metric__header-range\">\n                \x3c!-- ko component: {\n                        name: 'ui-metric-range',\n                        params: {\n                            title: app.tl('Time range'),\n                            options: $component.getTimeRangeOptions(),\n                            selected: selectedTimeRange\n                        }\n                    } --\x3e\n                \x3c!-- /ko --\x3e\n            </span>\n        \x3c!-- /ko --\x3e\n    </div>\n\x3c!-- /ko --\x3e\n\n<div class=\"w-metric__content w-metric__content--list\">\n\n    \x3c!-- ko if: data.state() == 'loading' || data.state() == 'not-loaded' --\x3e\n        \x3c!-- ko component: {\n                name: 'list-state-loading-new',\n                params: {\n                    itemType: 'event',\n                    format: 'large',\n                    showText: false\n                }\n            } --\x3e\n        \x3c!-- /ko --\x3e\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- ko ifnot: data.state() == 'loading' || data.state() == 'not-loaded' --\x3e\n        \x3c!-- ko if: hasEvents --\x3e\n            <div class=\"w-metric-milestones-list\">\n                \x3c!-- ko foreach: data.list --\x3e\n                    <div class=\"w-metric-milestones-list__item\"\n                        data-bind=\"\n                            css: {\n                                'w-metric-milestones-list__item--outdated': end() < $component.currentTime()\n                            },\n                            click: $component.OnClickEvent\">\n                        <div class=\"w-metric-milestones-list__item-date\">\n                            \x3c!-- ko if: !$index() --\x3e\n                                {{start().format('D MMM')}}<br/>\n                            \x3c!-- /ko --\x3e\n                            \x3c!-- ko if: $index() && $parent.data.list()[$index()-1].start().format('D MMM') != start().format('D MMM') --\x3e\n                                {{start().format('D MMM')}}<br/>\n                            \x3c!-- /ko --\x3e\n                            \x3c!-- ko ifnot: allDay --\x3e\n                                <span class=\"w-metric-milestones-list__item-date-time\">\n                                    {{start().userFormat('time')}}\n                                </span>\n                            \x3c!-- /ko --\x3e\n                            \x3c!-- ko if: allDay --\x3e\n                                <span class=\"w-metric-milestones-list__item-date-time\">\n                                    {{app.tl('All Day')}}\n                                </span>\n                            \x3c!-- /ko --\x3e\n                        </div>\n\n                        <span class=\"w-event__details-color\"\n                            data-bind=\"\n                                style: {\n                                    backgroundColor: $component.getColor($data)\n                                },\n                                css: {\n                                    'w-event__details-color--transparent': $component.getColor($data) == ''\n                                }\">\n                        </span>\n\n                        <div class=\"w-metric-milestones-list__item-content\">\n                            \x3c!-- ko if: isRecurring --\x3e\n                                <span class=\"w-metric-milestones-list__item-title\" title=\"{{app.tl('Repeats [_s]', repeat.frequency())}}\">\n                                    {{title}}\n                                    <span class=\"font-size--tiny\">\n                                        \x3c!-- ko component: {\n                                                name: 'ui-common-icon',\n                                                params: {\n                                                    name: 'repeat-regular'\n                                                }\n                                            } --\x3e\n                                        \x3c!-- /ko --\x3e\n                                    </span>\n                                </span>\n                            \x3c!-- /ko --\x3e\n                            \x3c!-- ko ifnot: isRecurring --\x3e\n                                <span class=\"w-metric-milestones-list__item-title\">\n                                    {{title}}\n                                </span>\n                            \x3c!-- /ko --\x3e\n                        </div>\n                    </div>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: showLoadMore --\x3e\n                    \x3c!-- ko component: {\n                            name: 'widget-loadMore',\n                            params: {\n                                dataLoader: data,\n                                minimalTemplate: true\n                            }\n                        } --\x3e\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n            </div>\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: allowBlankSlate --\x3e\n            \x3c!-- ko ifnot: hasEvents --\x3e\n                \x3c!-- ko ifnot: blankSlateMessage() == '' --\x3e\n                    <div class=\"w-metric__state\">\n                        {{blankSlateMessage}}\n                    </div>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: blankSlateMessage() == '' --\x3e\n                    \x3c!-- ko component: {\n                            name: 'ui-blank-card',\n                            params: {\n                                graphic: 'list',\n                                text: app.tl('No upcoming events match your current filter')\n                            }\n                        } --\x3e\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n    \x3c!-- /ko --\x3e\n</div>\n\n\x3c!-- ko if: showFooter --\x3e\n    <div class=\"w-metric__footer\">\n        <p>\n            \x3c!-- ko if: app.loggedInUser.localization.languageCode() === 'EN' --\x3e\n                \x3c!-- ko if: numRemainingRecords() !== 1 --\x3e\n                    Plus\n                    <a href=\"javascript:;\" data-bind=\"click: $component.OnClickMoreEvents\">{{numRemainingRecords}} more events</a> for this period\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: numRemainingRecords() === 1 --\x3e\n                    Plus\n                    <a href=\"javascript:;\" data-bind=\"click: $component.OnClickMoreEvents\">1 more event</a> for this period\n                \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n\n            \x3c!-- ko ifnot: app.loggedInUser.localization.languageCode() === 'EN' --\x3e\n                <a href=\"javascript:;\" data-bind=\"click: $component.OnClickMoreEvents\">\n                    \x3c!-- ko if: numRemainingRecords() !== 1 --\x3e\n                        {{app.tl('[_s] more milestones for this period', numRemainingRecords)}}\n                    \x3c!-- /ko --\x3e\n\n                    \x3c!-- ko if: numRemainingRecords() === 1 --\x3e\n                        {{app.tl('[_s] more milestone for this period', 1)}}\n                    \x3c!-- /ko --\x3e\n                </a>\n            \x3c!-- /ko --\x3e\n        </p>\n    </div>\n\x3c!-- /ko --\x3e\n\n\x3c!-- IMPORTANT - Mark this template loaded --\x3e\n\x3c!-- ko if: $data.readyToShow != null && readyToShow --\x3e\n<div data-bind=\"template:{afterRender:function(){templateLoaded(true)}}\" class=\"hidden\"></div>\n\x3c!-- /ko --\x3e"},3116:function(t,e){t.exports="\x3c!-- ko if: showHeader --\x3e\n    <div class=\"w-metric__header\">\n        \x3c!-- ko component: {\n            name: 'ui-common-icon',\n            params: {\n                    name: 'draghandle-tw-solid',\n                    class: 'w-metric__header-handle',\n                    size: '1x'\n                }\n            } --\x3e\n        \x3c!-- /ko --\x3e\n        <span class=\"w-metric__header-title\">\n            {{ metricTitle }}\n        </span>\n\n        \x3c!-- ko if: showRange --\x3e\n            <span class=\"w-metric__header-range\">\n                \x3c!-- ko component: {\n                        name: 'ui-metric-range',\n                        params: {\n                            title: app.tl('Time range'),\n                            options: $component.getTimeRangeOptions(),\n                            selected: selectedTimeRange\n                        }\n                    } --\x3e\n                \x3c!-- /ko --\x3e\n            </span>\n        \x3c!-- /ko --\x3e\n    </div>\n\x3c!-- /ko --\x3e\n\n<div class=\"w-metric__content w-metric__content--list\">\n    \x3c!-- ko if: data.state() == 'loading' --\x3e\n        \x3c!-- ko component: {\n                name: 'list-state-loading-new',\n                params: {\n                    itemType: 'event',\n                    format: 'large',\n                    showText: false\n                }\n            } --\x3e\n        \x3c!-- /ko --\x3e\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- ko ifnot: data.state() == 'loading' --\x3e\n        \x3c!-- ko if: hasMilestones --\x3e\n            <div class=\"w-metric-milestones-list\">\n                \x3c!-- ko foreach: dataList --\x3e\n                    <div class=\"w-metric-milestones-list__item\" data-bind=\"click: $component.OnClickMilestone\">\n                        <div class=\"w-metric-milestones-list__item-date\">\n                            {{deadline().format('D MMM')}}\n                        </div>\n\n                        <div class=\"w-metric-milestones-list__item-status w-metric-milestones-list__item-status--{{$component.getMilestoneStatus($data)}}\"></div>\n\n                        <div class=\"w-metric-milestones-list__item-content\">\n                            <span>\n                                {{title}}\n                            </span>\n\n                            <small>\n                                {{projectName}}\n                            </small>\n\n                            <small>\n                                {{responsiblePartyText}}\n                            </small>\n                        </div>\n                    </div>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: showLoadMore --\x3e\n                    \x3c!-- ko component: {\n                            name: 'widget-loadMore',\n                            params: {\n                                dataLoader: data,\n                                minimalTemplate: true\n                            }\n                        } --\x3e\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n            </div>\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: allowBlankSlate --\x3e\n            \x3c!-- ko ifnot: hasMilestones --\x3e\n                \x3c!-- ko ifnot: blankSlateMessage() == '' --\x3e\n                    <div class=\"w-metric__state\">\n                        {{blankSlateMessage}}\n                    </div>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: blankSlateMessage() == '' --\x3e\n                    \x3c!-- ko ifnot: hasMilestones --\x3e\n                        \x3c!-- ko component: {\n                                name: 'ui-blank-card',\n                                params: {\n                                    graphic: 'list',\n                                    text: app.tl('No upcoming milestones match your current filter')\n                                }\n                            } --\x3e\n                        \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n    \x3c!-- /ko --\x3e\n</div>\n\n\x3c!-- ko if: showFooter --\x3e\n    <div class=\"w-metric__footer\">\n        <p>\n            \x3c!-- ko if: app.loggedInUser.localization.languageCode() === 'EN' --\x3e\n                \x3c!-- ko if: numRemainingRecords() !== 1 --\x3e\n                    Plus\n                    <a href=\"javascript:;\" data-bind=\"click: $component.OnClickMoreMilestones\">{{numRemainingRecords}} more milestones</a> for this period\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: numRemainingRecords() === 1 --\x3e\n                    Plus\n                    <a href=\"javascript:;\" data-bind=\"click: $component.OnClickMoreMilestones\">1 more milestone</a> for this period\n                \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n\n            \x3c!-- ko ifnot: app.loggedInUser.localization.languageCode() === 'EN' --\x3e\n                <a href=\"javascript:;\" data-bind=\"click: $component.OnClickMoreMilestones\">\n                    \x3c!-- ko if: numRemainingRecords() !== 1 --\x3e\n                        {{app.tl('[_s] more milestones for this period', numRemainingRecords)}}\n                    \x3c!-- /ko --\x3e\n\n                    \x3c!-- ko if: numRemainingRecords() === 1 --\x3e\n                        {{app.tl('[_s] more milestone for this period', 1)}}\n                    \x3c!-- /ko --\x3e\n                </a>\n            \x3c!-- /ko --\x3e\n        </p>\n    </div>\n\x3c!-- /ko --\x3e\n\n\x3c!-- IMPORTANT - Mark this template loaded --\x3e\n\x3c!-- ko if: $data.readyToShow != null && readyToShow --\x3e\n<div data-bind=\"template:{afterRender:function(){templateLoaded(true)}}\" class=\"hidden\"></div>\n\x3c!-- /ko --\x3e"},3117:function(t,e){t.exports="\x3c!-- ko if: showHeader --\x3e\n    <div class=\"w-metric__header\">\n        \x3c!-- ko component: {\n                name: 'ui-common-icon',\n                params: {\n                    name: 'draghandle-tw-solid',\n                    class: 'w-metric__header-handle',\n                    size: '1x'\n                }\n            } --\x3e\n        \x3c!-- /ko --\x3e\n        <span class=\"w-metric__header-title\">\n            {{ metricTitle }}\n        </span>\n    </div>\n\x3c!-- /ko --\x3e\n\n<div class=\"w-metric__content\">\n\n\t\x3c!-- ko ifnot: dataLoaded --\x3e\n\t\t\x3c!-- ko component: {\n\t\t\t\tname: 'list-state-loading-new',\n\t\t\t\tparams: {\n\t\t\t\t\titemType: 'milestone',\n\t\t\t\t\tformat: 'large',\n\t\t\t\t\tshowText: false\n\t\t\t\t}\n\t\t\t} --\x3e\n\t\t\x3c!-- /ko --\x3e\n\t\x3c!-- /ko --\x3e\n\n    \x3c!-- ko if: dataLoaded --\x3e\n        \x3c!-- ko if: hasData --\x3e\n            \x3c!-- ko component: {\n                    name: 'ui-metric',\n                    params: {\n                        chartType: 'horizontal-bar',\n                        dataToPresent: chartData(),\n                        eventsKey: $component.metricEventsKey,\n                        chartId: $component.chartId,\n                        chartOptions: $component.chartOptions\n                    }\n                } --\x3e\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko ifnot: hasData --\x3e\n            \x3c!-- ko component: {\n                    name: 'ui-blank-card',\n                    params: {\n                        graphic: 'hbar',\n                        text: app.tl('No milestones match your current filter')\n                    }\n                } --\x3e\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n    \x3c!-- /ko --\x3e\n</div>"},3118:function(t,e){t.exports="\x3c!-- ko if: showHeader --\x3e\n    <div class=\"w-metric__header\">\n        \x3c!-- ko component: {\n                name: 'ui-common-icon',\n                params: {\n                    name: 'draghandle-tw-solid',\n                    class: 'w-metric__header-handle',\n                    size: '1x'\n                }\n            } --\x3e\n        \x3c!-- /ko --\x3e\n        <span class=\"w-metric__header-title\">\n            {{metricTitle}}\n        </span>\n    </div>\n\x3c!-- /ko --\x3e\n\n<div class=\"w-metric__content px--none\">\n\n\t\x3c!-- ko ifnot: dataLoaded --\x3e\n\t\t\x3c!-- ko component: {\n\t\t\t\tname: 'list-state-loading-new',\n\t\t\t\tparams: {\n\t\t\t\t\titemType: 'project',\n\t\t\t\t\tformat: 'large',\n\t\t\t\t\tshowText: false\n\t\t\t\t}\n\t\t\t} --\x3e\n\t\t\x3c!-- /ko --\x3e\n\t\x3c!-- /ko --\x3e\n\n    \x3c!-- ko if: dataLoaded --\x3e\n        \x3c!-- ko if: hasData --\x3e\n            \x3c!-- ko component: {\n                    name: 'ui-metric',\n                    params: {\n                        chartType: 'vertical-bar',\n                        dataToPresent: chartData(),\n                        eventsKey: $component.metricEventsKey,\n                        chartId: $component.chartId,\n                        chartOptions: $component.chartOptions\n                    }\n                } --\x3e\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko ifnot: hasData --\x3e\n            \x3c!-- ko component: {\n                    name: 'ui-blank-card',\n                    params: {\n                        graphic: 'bar',\n                        text: app.tl('No projects match your current filter')\n                    }\n                } --\x3e\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n\n    \x3c!-- /ko --\x3e\n</div>\n\n\x3c!-- ko if: showFooter --\x3e\n    <div class=\"w-metric__footer\">\n        <p>\n            \x3c!-- ko if: app.loggedInUser.localization.languageCode() === 'EN' --\x3e\n                \x3c!-- ko if: updatesWithNoHealth() !== 1 --\x3e\n                    Plus\n                    <a href=\"javascript:;\" data-bind=\"click: $component.OnClickNoHealth\">{{updatesWithNoHealth}} projects</a> with no health set\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: updatesWithNoHealth() === 1 --\x3e\n                    Plus\n                    <a href=\"javascript:;\" data-bind=\"click: $component.OnClickNoHealth\">1 project</a> with no health set\n                \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n\n            \x3c!-- ko ifnot: app.loggedInUser.localization.languageCode() === 'EN' --\x3e\n                <a href=\"javascript:;\" data-bind=\"click: $component.OnClickNoHealth\">\n                    \x3c!-- ko if: updatesWithNoHealth() !== 1 --\x3e\n                        {{app.tl('[_s] projects with no health set', updatesWithNoHealth)}}\n                    \x3c!-- /ko --\x3e\n\n                    \x3c!-- ko if: updatesWithNoHealth() === 1 --\x3e\n                        {{app.tl('[_s] project with no health set', 1)}}\n                    \x3c!-- /ko --\x3e\n                </a>\n            \x3c!-- /ko --\x3e\n        </p>\n    </div>\n\x3c!-- /ko --\x3e"},3119:function(t,e){t.exports='\x3c!-- ko if: showHeader --\x3e\n    <div class="w-metric__header">\n        \x3c!-- ko component: {\n            name: \'ui-common-icon\',\n            params: {\n                    name: \'draghandle-tw-solid\',\n                    class: \'w-metric__header-handle\',\n                    size: \'1x\'\n                }\n            } --\x3e\n        \x3c!-- /ko --\x3e\n        <span class="w-metric__header-title">\n            {{ metricTitle }}\n        </span>\n\n        \x3c!-- ko if: showRange --\x3e\n            <span class="w-metric__header-range">\n                \x3c!-- ko component: {\n                        name: \'ui-metric-range\',\n                        params: {\n                            title: app.tl(\'Time range\'),\n                            options: $component.getTimeRangeOptions(),\n                            selected: selectedTimeRange\n                        }\n                    } --\x3e\n                \x3c!-- /ko --\x3e\n            </span>\n        \x3c!-- /ko --\x3e\n    </div>\n\x3c!-- /ko --\x3e\n\n<div class="w-metric__content w-metric__content--list"\n    data-bind="css: {\n        \'hidden\': !showIfEmpty && !hasContent()\n    }">\n    \x3c!-- ko if: data.state() == \'loading\' --\x3e\n        \x3c!-- ko component: {\n                name: \'list-state-loading-new\',\n                params: {\n                    itemType: \'event\',\n                    format: \'large\',\n                    showText: false\n                }\n            } --\x3e\n        \x3c!-- /ko --\x3e\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- ko ifnot: data.state() == \'loading\' --\x3e\n        \x3c!-- ko if: hasContent --\x3e\n            <div class="w-metric-project-updates-list">\n                \x3c!-- ko foreach: dataList --\x3e\n                    \x3c!-- ko if: $component.isNewProject($index()) --\x3e\n                        <a href="#/projects/{{projectId}}" class="w-metric-project-updates-list__header-link">\n                            {{projectName}}\n                        </a>\n                    \x3c!-- /ko --\x3e\n\n                    <div class="w-metric-project-updates-list__item" data-bind="click: $component.OnClickUpdate">\n                        <span class="w-metric-project-updates-list__item-color"\n                            data-bind="style: { \'background-color\': color }"></span>\n\n                        <img class="w-metric-project-updates-list__item-avatar"\n                            data-bind="attr: {\n                                src: user.avatarUrl\n                            }">\n\n                        <div class="w-metric-project-updates-list__item-info">\n                            <span class="w-metric-project-updates-list__item-info-user">\n                                {{user.fullName}}\n                                <span class="w-metric-project-updates-list__item-info-date">\n                                    ({{ app.utility.GetProjectUpdateDisplayDate( dateCreated ) }})\n                                </span>\n                            </span>\n\n                            <div class="w-metric-project-updates-list__item-info-content" data-bind="marked: {value: text, openExternalLinksInNewTab: true}"></div>\n                        </div>\n                    </div>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: showLoadMore --\x3e\n                    \x3c!-- ko component: {\n                            name: \'widget-loadMore\',\n                            params: {\n                                dataLoader: data,\n                                minimalTemplate: true\n                            }\n                        } --\x3e\n                    \x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n            </div>\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: allowBlankSlate --\x3e\n            \x3c!-- ko ifnot: hasContent --\x3e\n                \x3c!-- ko component: {\n                        name: \'ui-blank-card\',\n                        params: {\n                            graphic: \'list\',\n                            text: app.tl(\'No project updates match your current filter\')\n                        }\n                    } --\x3e\n                \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n    \x3c!-- /ko --\x3e\n</div>\n\n\x3c!-- ko if: showFooter --\x3e\n    <div class="w-metric__footer">\n        <p>\n            \x3c!-- ko if: app.loggedInUser.localization.languageCode() === \'EN\' --\x3e\n                \x3c!-- ko if: numRemainingRecords() !== 1 --\x3e\n                    Plus\n                    <a href="javascript:;" data-bind="click: $component.OnClickMoreUpdates">{{numRemainingRecords}} more project updates</a> for this period\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: numRemainingRecords() === 1 --\x3e\n                    Plus\n                    <a href="javascript:;" data-bind="click: $component.OnClickMoreUpdates">1 more project update</a> for this period\n                \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n\n            \x3c!-- ko ifnot: app.loggedInUser.localization.languageCode() === \'EN\' --\x3e\n                <a href="javascript:;" data-bind="click: $component.OnClickMoreUpdates">\n                    \x3c!-- ko if: numRemainingRecords() !== 1 --\x3e\n                        {{app.tl(\'[_s] more project updates for this period\', numRemainingRecords)}}\n                    \x3c!-- /ko --\x3e\n\n                    \x3c!-- ko if: numRemainingRecords() === 1 --\x3e\n                        {{app.tl(\'[_s] more project update for this period\', 1)}}\n                    \x3c!-- /ko --\x3e\n                </a>\n            \x3c!-- /ko --\x3e\n        </p>\n    </div>\n\x3c!-- /ko --\x3e\n\n\x3c!-- IMPORTANT - Mark this template loaded --\x3e\n\x3c!-- ko if: $data.readyToShow != null && readyToShow --\x3e\n    <div data-bind="template:{afterRender:function(){templateLoaded(true)}}" class="hidden"></div>\n\x3c!-- /ko --\x3e'},3120:function(t,e){t.exports="\x3c!-- ko if: showHeader --\x3e\n    <div class=\"w-metric__header\">\n        \x3c!-- ko component: {\n                name: 'ui-common-icon',\n                params: {\n                    name: 'draghandle-tw-solid',\n                    class: 'w-metric__header-handle',\n                    size: '1x'\n                }\n            } --\x3e\n        \x3c!-- /ko --\x3e\n        <span class=\"w-metric__header-title\">\n            {{metricTitle}}\n        </span>\n\n        \x3c!-- ko if: showRange --\x3e\n            <span class=\"w-metric__header-range\">\n                \x3c!-- ko component: {\n                        name: 'ui-metric-range',\n                        params: {\n                            title: app.tl('Time range'),\n                            options: $component.getTimeRangeOptions(),\n                            selected: selectedTimeRange\n                        }\n                    } --\x3e\n                \x3c!-- /ko --\x3e\n            </span>\n        \x3c!-- /ko --\x3e\n    </div>\n\x3c!-- /ko --\x3e\n\n<div class=\"w-metric-digest\">\n\t\x3c!-- ko if: dataLoaded --\x3e\n        \x3c!-- ko if: hasData --\x3e\n            \x3c!-- ko foreach: digestItems --\x3e\n                <div class=\"w-metric-digest__item\"\n                    data-bind=\"\n                        click: $component.OnClickItem,\n                        css: {\n                            'w-metric-digest__item--empty': value == 0\n                        }\">\n                    <span class=\"w-metric-digest__item-icon\"\n                        data-bind=\"style: {\n                            'background-color': iconColor\n                        }\">\n                        \x3c!-- ko component: {\n                                name: 'ui-common-icon',\n                                params: {\n                                    name: iconName,\n                                    color: '#ffffff'\n                                }\n                            } --\x3e\n                        \x3c!-- /ko --\x3e\n                    </span>\n                    <label class=\"w-metric-digest__item-label\">{{label}}</label>\n                    <span class=\"w-metric-digest__item-count\">{{value}}</span>\n                </div>\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko ifnot: hasData --\x3e\n            \x3c!-- ko component: {\n                    name: 'ui-blank-card',\n                    params: {\n                        graphic: 'bar',\n                        text: app.tl('No digest to show')\n                    }\n                } --\x3e\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n\n    \x3c!-- /ko --\x3e\n</div>\n"},3121:function(t,e){t.exports="\x3c!-- ko if: showHeader --\x3e\n    <div class=\"w-metric__header\">\n        \x3c!-- ko component: {\n                name: 'ui-common-icon',\n                params: {\n                    name: 'draghandle-tw-solid',\n                    class: 'w-metric__header-handle',\n                    size: '1x'\n                }\n            } --\x3e\n        \x3c!-- /ko --\x3e\n        <span class=\"w-metric__header-title\">\n            {{ metricTitle }}\n        </span>\n\n        <span class=\"w-metric__header-range\">\n            \x3c!-- ko component: {\n                    name: 'ui-metric-range',\n                    params: {\n                        title: app.tl('Group By'),\n                        options: $component.getGroupByOptions(),\n                        selected: groupBy\n                    }\n                } --\x3e\n            \x3c!-- /ko --\x3e\n        </span>\n    </div>\n\x3c!-- /ko --\x3e\n\n<div class=\"w-metric__content\">\n    <div class=\"w-metric__chart-wrapper\">\n        \x3c!-- ko if: data.state() == 'loading' --\x3e\n            \x3c!-- ko component: {\n                    name: 'list-state-loading-new',\n                    params: {\n                        itemType: 'data',\n                        format: 'large',\n                        showText: false,\n                        useDelay: false\n                    }\n                } --\x3e\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: data.state() == 'blank' --\x3e\n            \x3c!-- ko component: {\n                    name: 'ui-blank-card',\n                    params: {\n                        graphic: 'bar',\n                        text: app.tl('There are no projects matching your filter')\n                    }\n                } --\x3e\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n\n        <div class=\"u-metric-horizontal-bar-chart\"\n            data-bind=\"\n                css: {\n                    'hidden': !(data.state() == 'content')\n                },\n                attr: {\n                    id: chartId\n                }\">\n        </div>\n    </div>\n</div>\n\n<div class=\"w-metric__paging\">\n    \x3c!-- ko if: showPagination --\x3e\n        <div class=\"u-btn-group class ml--auto\" role=\"group\">\n            <button type=\"button\"\n                data-bind=\"\n                    css: {\n                        disabled: !showPreviousButton()\n                    },\n                    click: OnClickPrevPage\"\n                data-tipped=\"{{app.tl('Previous')}}\"\n                class=\"btn btn-default btn-sm tipped-hide\">\n                \x3c!-- ko component: {\n                        name: 'ui-common-icon',\n                        params: {\n                            name: 'chevron-left-regular'\n                        }\n                    } --\x3e\n                \x3c!-- /ko --\x3e\n            </button>\n            <button type=\"button\"\n                data-bind=\"\n                    css: {\n                        disabled: !showNextButton()\n                    },\n                    click: OnClickNextPage\"\n                data-tipped=\"{{app.tl('Next')}}\"\n                class=\"btn btn-default btn-sm tipped-hide\">\n                \x3c!-- ko component: {\n                        name: 'ui-common-icon',\n                        params: {\n                            name: 'chevron-right-regular'\n                        }\n                    } --\x3e\n                \x3c!-- /ko --\x3e\n            </button>\n        </div>\n    \x3c!-- /ko --\x3e\n</div>"},3122:function(t,e){t.exports="\x3c!-- ko if: showHeader --\x3e\n    <div class=\"w-metric__header\">\n        \x3c!-- ko component: {\n                name: 'ui-common-icon',\n                params: {\n                    name: 'draghandle-tw-solid',\n                    class: 'w-metric__header-handle',\n                    size: '1x'\n                }\n            } --\x3e\n        \x3c!-- /ko --\x3e\n        <span class=\"w-metric__header-title\">\n            {{metricTitle}}\n        </span>\n    </div>\n\x3c!-- /ko --\x3e\n\n<div class=\"w-metric__content w-metric__content--list\">\n\n\t\x3c!-- ko if: data.state() == 'loading' --\x3e\n\t\t\x3c!-- ko component: {\n\t\t\t\tname: 'list-state-loading-new',\n\t\t\t\tparams: {\n\t\t\t\t\titemType: 'data',\n\t\t\t\t\tformat: 'large',\n\t\t\t\t\tshowText: false,\n\t\t\t\t\tuseDelay: false\n\t\t\t\t}\n\t\t\t} --\x3e\n\t\t\x3c!-- /ko --\x3e\n\t\x3c!-- /ko --\x3e\n\n\t\x3c!-- ko ifnot: data.state() == 'loading' --\x3e\n\t\t\x3c!-- ko if: hasRisks --\x3e\n\t\t\t<div class=\"w-metric-risks-list\">\n\t\t\t\t\x3c!-- ko foreach: dataList --\x3e\n\t\t\t\t\t<div class=\"w-metric-risks-list__item\">\n\t\t\t\t\t\t<div class=\"w-metric-risks-list__item-score w-metric-risks-list__item-score--{{resultScore}}\">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{{result}}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"w-metric-risks-list__item-content\">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{{source}}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<small>\n\t\t\t\t\t\t\t\t{{projectName}}\n\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</div>\n\t\t\x3c!-- /ko --\x3e\n\n\t\t\x3c!-- ko ifnot: hasRisks --\x3e\n\t\t\t\x3c!-- ko component: {\n\t\t\t\t\tname: 'ui-blank-card',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tgraphic: 'risk-list',\n\t\t\t\t\t\ttext: app.tl('No risks match your current filter')\n\t\t\t\t\t}\n\t\t\t\t} --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\t\t\x3c!-- /ko --\x3e\n\t\x3c!-- /ko --\x3e\n</div>\n\n\x3c!-- IMPORTANT - Mark this template loaded --\x3e\n\x3c!-- ko if: $data.readyToShow != null && readyToShow --\x3e\n<div data-bind=\"template:{afterRender:function(){templateLoaded(true)}}\" class=\"hidden\"></div>\n\x3c!-- /ko --\x3e"},3123:function(t,e){t.exports="\x3c!-- ko if: showHeader --\x3e\n    <div class=\"w-metric__header\">\n        \x3c!-- ko component: {\n                name: 'ui-common-icon',\n                params: {\n                    name: 'draghandle-tw-solid',\n                    class: 'w-metric__header-handle',\n                    size: '1x'\n                }\n            } --\x3e\n        \x3c!-- /ko --\x3e\n        <span class=\"w-metric__header-title\">\n            {{metricTitle}}\n        </span>\n    </div>\n\x3c!-- /ko --\x3e\n\n<div class=\"w-metric__content px--none\">\n\t\x3c!-- ko ifnot: dataLoaded --\x3e\n\t\t\x3c!-- ko component: {\n\t\t\t\tname: 'list-state-loading-new',\n\t\t\t\tparams: {\n\t\t\t\t\titemType: 'risk',\n\t\t\t\t\tformat: 'large',\n\t\t\t\t\tshowText: false\n\t\t\t\t}\n\t\t\t} --\x3e\n\t\t\x3c!-- /ko --\x3e\n\t\x3c!-- /ko --\x3e\n\n    \x3c!-- ko if: dataLoaded --\x3e\n        \x3c!-- ko if: hasData --\x3e\n            \x3c!-- ko component: {\n                    name: 'ui-metric',\n                    params: {\n                        chartType: 'vertical-bar',\n                        dataToPresent: chartData(),\n                        eventsKey: $component.metricEventsKey,\n                        chartId: $component.chartId,\n                        chartOptions: $component.chartOptions\n                    }\n                } --\x3e\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko ifnot: hasData --\x3e\n            \x3c!-- ko component: {\n                    name: 'ui-blank-card',\n                    params: {\n                        graphic: 'bar',\n                        text: app.tl('No risks match your current filter')\n                    }\n                } --\x3e\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n\n    \x3c!-- /ko --\x3e\n</div>"},3124:function(t,e){t.exports="\x3c!-- ko if: showHeader --\x3e\n    <div class=\"w-metric__header\">\n        \x3c!-- ko component: {\n                name: 'ui-common-icon',\n                params: {\n                    name: 'draghandle-tw-solid',\n                    class: 'w-metric__header-handle',\n                    size: '1x'\n                }\n            } --\x3e\n        \x3c!-- /ko --\x3e\n        <span class=\"w-metric__header-title\">\n            {{metricTitle}}\n        </span>\n    </div>\n\x3c!-- /ko --\x3e\n\n<div class=\"w-metric__content w-metric__content--list\">\n\t\x3c!-- ko component: {\n\t\t\tname: 'widget-task-breakdown-list',\n\t\t\tparams: {\n\t\t\t\tpagingMode: 'pages',\n                showTitle: false,\n\t\t\t\tshowTime: true,\n\t\t\t\tshowEstimate: true,\n                pageSize: 5,\n                selectedBreakdownType: panel.settings.defaultBreakdownType,\n                filterParams: panel.GetSettingsAsFilterParams()\n\t\t\t}\n\t\t} --\x3e\n\t\x3c!--/ko--\x3e\n</div>\n\n\x3c!-- IMPORTANT - Mark this template loaded --\x3e\n\x3c!-- ko if: $data.readyToShow != null && readyToShow --\x3e\n<div data-bind=\"template:{afterRender:function(){templateLoaded(true)}}\" class=\"hidden\"></div>\n\x3c!-- /ko --\x3e"},3125:function(t,e){t.exports="<div class=\"form-group\">\n    <label>\n        {{app.tl('Project')}}\n    </label>\n    <select style=\"width:100%\" data-bind=\"select2: {\n            endpoint: projectsUrl,\n            groupById: 'companyId',\n            groupByName: 'companyName',\n            initialValue: selectedProject,\n            minimumResultsForSearch: 10,\n            placeholder: app.tl('Please Choose a Project'),\n            textKey: 'name',\n            selectCallback: resetTaskList,\n            value: settings.projectId\n        }\">\n    </select>\n</div>\n\n<div class=\"form-group\">\n    <label>\n        {{app.tl('Task list')}}\n    </label>\n    <select style=\"width:100%\" data-required=\"true\" data-bind=\"select2: {\n            endpoint: taskListsUrl,\n            initialValue: selectedTaskList,\n            pageSize: 50,\n            placeholder: app.tl('Select Task List')+app.localizationPreferences().ellipsis,\n            responseType: 'taskLists',\n            searchKey: 'filterText',\n            selectCallback: loadSelectedTaskList,\n            value: settings.taskListId\n        }\">\n    </select>\n</div>\n\n\x3c!-- ko if: settings.taskListId() > 0 && hasLoadedData() --\x3e\n    <div class=\"flex-items-baseline form-group form-group--row m--none\">\n        <div class=\"form-group width--50 pr--medium\">\n            <label>\n                {{app.tl('Start date')}}\n            </label>\n\n            \x3c!-- ko component: {\n                    name: 'widget-dateInput',\n                    params: {\n                        date: startDateMomentUI,\n                        customInputClass: 'widget-dateInput--input form-control',\n                        dateInputOptions: {\n                            allowEmpty: false,\n                            softMaxMoment: endDateMomentUI,\n                            centerPopup: true\n                        },\n                        displayShortcuts: false\n                    }\n                } --\x3e\n            \x3c!-- /ko --\x3e\n        </div>\n\n        <div class=\"form-group width--50 pl--medium\">\n            <label>\n                {{app.tl('Target end date')}}\n            </label>\n\n            <select style=\"width:100%\" data-bind=\"\n                select2: {\n                    data: endDateOptions,\n                    value: settings.burndownEndDateBase\n                }\">\n            </select>\n\n            \x3c!-- ko if: settings.burndownEndDateBase() == 'custom' --\x3e\n                <div class=\"pt--medium\">\n                \x3c!-- ko component: {\n                        name: 'widget-dateInput',\n                        params: {\n                            date: endDateMomentUI,\n                            customInputClass: 'widget-dateInput--input form-control',\n                            dateInputOptions: {\n                                allowEmpty: false,\n                                softMinMoment: startDateMomentUI,\n                                centerPopup: true\n                            },\n                            displayShortcuts: false\n                        }\n                    } --\x3e\n                \x3c!-- /ko --\x3e\n                </div>\n            \x3c!-- /ko --\x3e\n\n        </div>\n    </div>\n\n    <div class=\"form-group\">\n        <label>\n            {{app.tl('Calculate burn rate using')}}\n        </label>\n        <select style=\"width:100%\" data-bind=\"select2: {\n                data: burnRateCalculationOptions,\n                value: settings.burndownBurnRateType\n            }\">\n        </select>\n    </div>\n\x3c!-- /ko --\x3e"},3126:function(t,e){t.exports='<div class="w-metric-tasks-burndown">\n    \x3c!-- ko if: dataLoading --\x3e\n        <div class="w-metric__content">\n            \x3c!-- ko component: {\n                    name: \'list-state-loading-new\',\n                    params: {\n                        itemType: \'data\',\n                        format: \'large\',\n                        showText: false\n                    }\n                } --\x3e\n            \x3c!-- /ko --\x3e\n        </div>\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- ko if: total --\x3e\n        <div data-bind="attr: {id:\'task-burndown-\' + timestamp}"></div>\n        \x3c!-- ko if: burndownData().length --\x3e\n            <div class="w-metric-tasks-burndown__dates-label">\n                <span>{{dates()[0]}}</span>\n                <span>{{dates()[dates().length - 1]}}</span>\n            </div>\n            <div class="w-metric-tasks-burndown__remaining-label">\n                <span><strong>{{remaining}}</strong> {{remaining() != 1 ? app.tl(\'tasks remaining\') : app.tl(\'task remaining\')}}</span>\n                <span><strong>{{remainingDays}}</strong> {{remainingDays() != 1 ? app.tl(\'days to go\') : app.tl(\'day to go\')}}</span>\n            </div>\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko with: tasklist --\x3e\n            <div class="w-metric-tasks-burndown__detail"\n                data-bind="click:$component.OnClickTaskList">\n                {{name}}\n                \x3c!-- ko with: $component.milestone --\x3e\n                    <div class="w-metric-tasks-burndown__milestone tipped-hide"\n                        data-tipped="{{name}}"\n                        data-bind="\n                            click: $component.OnClickMilestone,\n                            clickBubble: false">\n                        \x3c!-- ko component: {\n                                name: "ui-milestone-icon"\n                            } --\x3e\n                        \x3c!-- /ko --\x3e\n                    </div>\n                \x3c!-- /ko --\x3e\n            </div>\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko with: project --\x3e\n            <div class="w-metric-tasks-burndown__detail w-metric-tasks-burndown__detail--secondary"\n                data-bind="click:$component.OnClickProject">\n                {{name}} &mdash; {{companyName}}\n            </div>\n        \x3c!-- /ko --\x3e\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- ko ifnot: total --\x3e\n        \x3c!-- ko ifnot: dataLoading --\x3e\n            <div class="w-metric__content">\n                \x3c!-- ko component: {\n                        name: \'ui-blank-card\',\n                        params: {\n                            graphic: \'burndown\',\n                            text: app.tl(\'No burndown data available\')\n                        }\n                    } --\x3e\n                \x3c!-- /ko --\x3e\n            </div>\n        \x3c!-- /ko --\x3e\n    \x3c!-- /ko --\x3e\n</div>'},3127:function(t,e){t.exports='\x3c!-- ko if: showHeader --\x3e\n    <div class="w-metric__header">\n        \x3c!-- ko component: {\n                name: \'ui-common-icon\',\n                params: {\n                    name: \'draghandle-tw-solid\',\n                    class: \'w-metric__header-handle\',\n                    size: \'1x\'\n                }\n            } --\x3e\n        \x3c!-- /ko --\x3e\n        <span class="w-metric__header-title">\n            {{ metricTitle }}\n        </span>\n    </div>\n\x3c!-- /ko --\x3e\n\n<div class="w-metric__content">\n\n\t\x3c!-- ko ifnot: dataLoaded --\x3e\n\t\t\x3c!-- ko component: {\n\t\t\t\tname: \'list-state-loading-new\',\n\t\t\t\tparams: {\n\t\t\t\t\titemType: \'task\',\n\t\t\t\t\tformat: \'large\',\n\t\t\t\t\tshowText: false\n\t\t\t\t}\n\t\t\t} --\x3e\n\t\t\x3c!-- /ko --\x3e\n\t\x3c!-- /ko --\x3e\n\n\t\x3c!-- ko if: dataLoaded --\x3e\n\t\t\x3c!-- ko ifnot: onlyShowingNoDateTasks --\x3e\n\t\t\t<div class="w-metric__chart-wrapper">\n\t\t\t\t\x3c!-- ko with: chartData --\x3e\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: \'ui-metric\',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tchartType: \'horizontal-bar\',\n\t\t\t\t\t\t\t\tdataToPresent: $data,\n\t\t\t\t\t\t\t\teventsKey: $component.metricEventsKey,\n\t\t\t\t\t\t\t\tchartId: $component.chartId,\n\t\t\t\t\t\t\t\tchartOptions: $component.chartOptions\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</div>\n\t\t\x3c!-- /ko --\x3e\n\t\x3c!-- /ko --\x3e\n\n\t\x3c!-- ko if: onlyShowingNoDateTasks --\x3e\n\t\t<div class="w-metric__statistic-wrapper">\n\t\t\t<a href="javascript:;" class="w-metric__statistic" data-bind="click: $component.OnClickNoDateTasks">\n\t\t\t\t<strong class="w-metric__statistic-number">{{ tasksWithNoDateCount }}</strong>\n\t\t\t\t<span class="w-metric__statistic-label">\n\t\t\t\t\t\x3c!-- ko if: tasksWithNoDateCount() !== 1 --\x3e\n\t\t\t\t\t\t{{app.tl(\'tasks with no dates set\')}}\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\x3c!-- ko if: tasksWithNoDateCount() === 1 --\x3e\n\t\t\t\t\t\t{{app.tl(\'task with no dates set\')}}\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</span>\n\t\t\t</a>\n\t\t</div>\n\t\x3c!-- /ko --\x3e\n</div>\n\n\x3c!-- ko if: showFooter --\x3e\n    <div class="w-metric__footer">\n        <p>\n            \x3c!-- ko if: app.loggedInUser.localization.languageCode() === \'EN\' --\x3e\n                \x3c!-- ko if: tasksWithNoDateCount() !== 1 --\x3e\n                    Plus\n                    <a href="javascript:;" data-bind="click: $component.OnClickNoDateTasks">{{tasksWithNoDateCount}} tasks</a> with no dates set\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: tasksWithNoDateCount() === 1 --\x3e\n                    Plus\n                    <a href="javascript:;" data-bind="click: $component.OnClickNoDateTasks">1 task</a> with no dates set\n                \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n\n            \x3c!-- ko ifnot: app.loggedInUser.localization.languageCode() === \'EN\' --\x3e\n                <a href="javascript:;" data-bind="click: $component.OnClickNoDateTasks">\n                    \x3c!-- ko if: tasksWithNoDateCount() !== 1 --\x3e\n                        {{app.tl(\'[_s] tasks with no dates set\', tasksWithNoDateCount)}}\n                    \x3c!-- /ko --\x3e\n\n                    \x3c!-- ko if: tasksWithNoDateCount() === 1 --\x3e\n                        {{app.tl(\'[_s] task with no dates set\', 1)}}\n                    \x3c!-- /ko --\x3e\n                </a>\n            \x3c!-- /ko --\x3e\n        </p>\n    </div>\n\x3c!-- /ko --\x3e'},3139:function(t,e){t.exports='\x3c!-- ko if: shouldShowPaymentMsg() && app.loggedInUser.administrator() --\x3e\n\t<div class="w-payment-reminder">\n\t\t<div class="w-payment-reminder__info">\n\t\t\t<span class="w-payment-reminder__info-title">\n\t\t\t\t{{ paymentHeader }}\n\t\t\t</span>\n\t\t\t<span class="w-payment-reminder__info-details">\n\t\t\t\t{{{ paymentLine1 }}}\n\t\t\t</span>\n\t\t</div>\n\t\t\x3c!-- ko ifnot: isInTrial --\x3e\n\t\t\t<div class="w-payment-reminder__action">\n\t\t\t\t<button class="btn btn-success btn-sm"\n\t\t\t\t\tdata-bind="click: OnClickPay">\n\t\t\t\t\t<span>{{ paymentBtnText }}</span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\x3c!-- /ko --\x3e\n\t</div>\n\x3c!-- /ko --\x3e\n\n\x3c!-- IMPORTANT - Mark this template loaded --\x3e\n\x3c!-- ko if: $data.readyToShow != null && readyToShow --\x3e\n    <div data-bind="template:{afterRender:function(){templateLoaded(true)}}" class="hidden"></div>\n\x3c!-- /ko --\x3e\n\n\n\n'},3152:function(t,e){t.exports='<div class="w-project-metrics" data-bind="css: {\'w-project-metrics--grid\': displayMode() == \'grid\'}">\n    <div class="w-project-metrics__timeline">\n        \x3c!-- ko component: {\n                name: \'widget-taskTimeline-chart\',\n                params: {\n                    projectId: project.id,\n                    showTasks: showTasks,\n                    eventsKey: eventsKey\n                }\n            } --\x3e\n        \x3c!-- /ko --\x3e\n    </div>\n    <div class="w-project-metrics__totals">\n        \x3c!-- ko if: metricsDL.isLoading --\x3e\n            <div class="w-project-metrics__metric-group-item">\n                <i class="fa fa-circle-o-notch fa-spin mr--small"></i>\n                {{app.tl(\'Loading\')}}\n            </div>\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: !metricsDL.isLoading() && metricsDL.state() == \'content\' --\x3e\n            <div class="w-project-metrics__metric-group">\n                <div class="w-project-metrics__metric-group-item">\n                    <span class="w-project-metrics__metric-group-item__title">\n                        {{app.tl(\'Tasks\')}}\n                    </span>\n\n                    <span class="w-project-metrics__metric-group-item__value mr--medium cursor--pointer"\n                        data-bind="click: OnTasksMetricClick.bind(null, \'today\')">\n                        <span class="mr--small">\n                            {{app.tl(\'Today\')}}\n                        </span>\n\n                        \x3c!-- ko component: {\n                                name: "ui-label",\n                                params: {\n                                    label: todaysTasksLabel,\n                                    backgroundColor: app.consts.UICOLORS.today,\n                                    color: "#ffffff"\n                                }\n                            } --\x3e\n                        \x3c!-- /ko --\x3e\n                    </span>\n\n                    <span class="w-project-metrics__metric-group-item__value cursor--pointer"\n                        data-bind="click: OnTasksMetricClick.bind(null, \'late\')">\n                        <span class="mr--small">\n                            {{app.tl(\'Late\')}}\n                        </span>\n                        \x3c!-- ko component: {\n                                name: "ui-label",\n                                params: {\n                                    label: lateTasksLabel,\n                                    backgroundColor: app.consts.UICOLORS.late,\n                                    color: "#ffffff"\n                                }\n                            } --\x3e\n                        \x3c!-- /ko --\x3e\n                    </span>\n                </div>\n            </div>\n\n            <div class="w-project-metrics__metric-group">\n                <div class="w-project-metrics__metric-group-item"\n                    data-bind="click: OnTasksMetricClick.bind(null, \'completed\')">\n                    <span class="w-project-metrics__metric-group-item__title">\n                        {{app.tl(\'Completed\')}}\n                    </span>\n\n                    <div class="w-project-metrics__metric-group-item__progress u-progress">\n                        <div class="u-progress__value"\n                            data-bind="style: { width: completedTasksPercentage }">\n                        </div>\n                    </div>\n\n                    <span class="w-project-metrics__metric-group-item__value">\n                        {{completedTasksPercentage}}\n                    </span>\n\n                </div>\n\n                <div class="w-project-metrics__metric-group-item"\n                    data-bind="click: OnTasksMetricClick.bind(null, \'estimated\')">\n                    <span class="w-project-metrics__metric-group-item__title">\n                        {{app.tl(\'Time\')}} (est.)\n                    </span>\n\n                    <div class="w-project-metrics__metric-group-item__progress u-progress">\n                        <div class="u-progress__value"\n                            data-bind="style: { width: completedEstimatePercentage }">\n                        </div>\n                    </div>\n                    <span class="w-project-metrics__metric-group-item__value">\n                        {{completedEstimatePercentage}}\n                    </span>\n                </div>\n            </div>\n\n        \x3c!-- /ko --\x3e\n        <div class="hidden" data-bind="onRendered: OnRenderedFooter"></div>\n    </div>\n</div>'},3162:function(t,e){t.exports='<h5 class="flex flex-items-center flex-justify-center m--none pb--large pt--small">\n    \x3c!-- ko ifnot: item.owner && item.owner.id() > 0 --\x3e\n        <span class="font-size--large mr--small">\n            \x3c!-- ko component: {\n                    name: \'ui-common-icon\',\n                    params: {\n                        name: \'owner-regular\'\n                    }\n                } --\x3e\n            \x3c!-- /ko --\x3e\n        </span>\n        {{app.tl(\'No project owner\')}}\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- ko if: item.owner && item.owner.id() > 0 --\x3e\n        <img class="mr--small u-avatar u-avatar--xsmall"\n            data-bind="\n                attr: {\n                    src: item.owner.avatarUrl\n                }">\n        {{item.owner.fullName}}\n    \x3c!-- /ko --\x3e\n</h5>\n\n<ul class="tippedMenu">\n    \x3c!-- ko if: item.status() != \'archived\' && item.owner.id() != app.loggedInUser.id() && item.owner.id() > 0 --\x3e\n        <li>\n            <a href="javascript:;" data-bind="click: OnClickRequestUpdate">\n                <i class="fa fa-bullhorn"></i>\n                {{app.tl(\'Request update\')}}\n            </a>\n        </li>\n    \x3c!--/ko--\x3e\n    \x3c!-- ko if: canAddUpdate --\x3e\n        <li>\n            <a href="javascript:;" data-bind="click: OnClickAddUpdate">\n                <i class="fa fa-plus"></i>\n                {{app.tl(\'Add project update\')}}\n            </a>\n        </li>\n    \x3c!-- /ko --\x3e\n    \x3c!-- ko if: item.permissions.projectAdministrator --\x3e\n        <li>\n            <a href="javascript:;" data-bind="click: OnClickChangeProjectOwner">\n                <i class="fa fa-user"></i>\n                \x3c!-- ko if: item.owner && item.owner.id() > 0 --\x3e\n                    {{app.tl(\'Change project owner\')}}\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko ifnot: item.owner && item.owner.id() > 0 --\x3e\n                    {{app.tl(\'Choose project owner\')}}\n                \x3c!-- /ko --\x3e\n            </a>\n        </li>\n    \x3c!--/ko--\x3e\n</ul>\n'},3163:function(t,e){t.exports='<div class="w-project h-show-hover--parent {{wrapperClass}}" data-project-id="{{item.id}}" id="project{{item.id}}">\n    <span class="w-project__color" data-bind="style: { \'background-color\': item.category ? item.category.color : \'transparent\' }"></span>\n\n    <div class="w-project__header">\n        \x3c!-- ko if: canDrag --\x3e\n            <div class="w-project__drag h-show-hover--child">\n                \x3c!-- ko component: {\n                        name: \'ui-common-icon\',\n                        params: {\n                            name: \'draghandle-tw-solid\',\n                            size: \'1x\'\n                        }\n                    } --\x3e\n                \x3c!-- /ko --\x3e\n            </div>\n        \x3c!-- /ko --\x3e\n\n        <div class="w-project__header-options">\n            \x3c!-- ko if: displayMode() != \'grid\' --\x3e\n                \x3c!-- ko component: {\n                        name: \'ui-project-dropdown-button\',\n                        params: {\n                            projectId: item.id(),\n                            projectName: item.name()\n                        }\n                    } --\x3e\n                \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n\n            \x3c!-- ko if: item.status() != \'archived\' --\x3e\n                <span class="w-project__star"\n                    data-bind="\n                        css: {\n                            \'w-project__star--active\': item.starred\n                        },\n                        click: item.OnClickStar">\n                    \x3c!-- ko component: {\n                            name: \'ui-common-icon\',\n                            params: {\n                                name: \'star-solid\',\n                            }\n                        } --\x3e\n                    \x3c!-- /ko --\x3e\n                </span>\n            \x3c!-- /ko --\x3e\n        </div>\n\n        <span class="w-project__header-title">\n            <a class="w-project__header-link" href="#/projects/{{item.id}}/{{item.startPage}}">\n                <span class="w-project__header-text">\n                    {{{ displayName }}}\n                </span>\n            </a>\n\n            \x3c!-- ko if: showCompanyName --\x3e\n                <span class="w-project__header-company">\n                    ({{ item.company.name }})\n                </span>\n            \x3c!-- /ko --\x3e\n\n\t\t\t\x3c!-- ko ifnot: displayMode() == \'grid\' --\x3e\n\t\t\t\t\x3c!-- ko if: item.boardColumn.id() > 0 && app.loggedInUser.permissions.canAccessPortfolio() --\x3e\n\t\t\t\t\t<span class="w-project__header-column">\n\t\t\t\t\t\t\x3c!-- ko component: { name:"widget-board-column-label", params:{ item: item, mode: \'tag\', boardType: \'project\', boardId: item.boardData.board.id() } } --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t</span>\n\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t<span class="w-project__header-tags"\n\t\t\t\t\tdata-bind="css: {\n\t\t\t\t\t\t\'w-project__header-tags--active\': item.tags().length\n\t\t\t\t\t}">\n\t\t\t\t\t\x3c!-- ko if: item.tags().length --\x3e\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: "widget-tags-list",\n\t\t\t\t\t\t\t\tparams:{\n\t\t\t\t\t\t\t\t\titem: item,\n\t\t\t\t\t\t\t\t\ttype: "project",\n\t\t\t\t\t\t\t\t\tcanEdit: item.canEdit(),\n\t\t\t\t\t\t\t\t\tenabled: app.account.tagsEnabled(),\n\t\t\t\t\t\t\t\t\tcanAddTags: (!app.account.tagsLockedToAdmins() || app.loggedInUser.administrator())\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\n                    \x3c!-- ko if: item.canEdit --\x3e\n                        \x3c!-- ko component: {\n                                name: "widget-tags-addIcon",\n                                params: {\n                                    item: item,\n                                    id: item.id,\n                                    type: "project",\n                                    showText: shouldShowTagText,\n                                    showIcon: true,\n                                    autosave: true\n                                }\n                            } --\x3e\n                        \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n\t\t\t\t</span>\n\t\t\t\x3c!-- /ko --\x3e\n        </span>\n        \x3c!-- ko if: app.featureFlip.check(\'projecttimebudgets\', {unwrap: true}) --\x3e\n            \x3c!-- ko ifnot: displayMode() == \'grid\' --\x3e\n                \x3c!-- ko if: item.budget && item.budget.id() > 0 --\x3e\n                    \x3c!-- ko component: {\n                        name: \'widget-budget-capacity-used\',\n                        params: {\n                            budget: item.budget\n                        }\n                    } --\x3e\x3c!-- /ko --\x3e\n                \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n        \x3c!-- /ko --\x3e\n\n        <span class="w-project__header-owner">\n            \x3c!-- ko if: item.update && item.update.health() > 0 && canViewProjectUpdate() --\x3e\n                <span class="w-project__header-health"\n                    data-bind="\n                        tippedDelegate,\n                        style: {\n                            backgroundColor: item.update.color\n                        }"\n                    data-content="{{$component.updateTippedContent}}"\n                    data-tipped-options="\n                        skin: \'light\',\n                        hideOn: false,\n                        padding: false,\n                        showDelay: 300,\n                        hideAfter: 300,\n                        hideOthers: true,\n                        offset: {\n                            x: 2,\n                            y: 10\n                        },\n                        position: \'bottommiddle\'">\n                </span>\n            \x3c!-- /ko --\x3e\n\n\t\t\t\x3c!-- ko ifnot: item.owner && item.owner.id() > 0 --\x3e\n                \x3c!-- ko if: shouldShowOwnerOptions --\x3e\n                    <span class="w-project__header-owner-placeholder"\n                        data-bind="tippedDelegate"\n                        data-tipped-options="\n                            hideAfter: 300,\n                            skin: \'light\',\n                            showDelay: 800,\n                            hideOnClickOutside: true,\n                            hideOn: false,\n                            hideOthers: true,\n                            position: \'bottommiddle\'"\n                        data-content="{{$component.ownerTippedContent}}">\n                        \x3c!-- ko component: {\n                                name: \'ui-common-icon\',\n                                params: {\n                                    name: \'owner-regular\',\n                                    class: \'w-project__header-owner-placeholder-icon\'\n                                }\n                            } --\x3e\n                        \x3c!-- /ko --\x3e\n                    </span>\n                \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n\n\t\t\t\x3c!-- ko if: item.owner && item.owner.id() > 0 --\x3e\n                \x3c!-- ko if: shouldShowOwnerOptions --\x3e\n                    <img data-bind="tippedDelegate,\n                        attr: { src: item.owner.avatarUrl },\n                        event: { error: app.OnImageThumbLoadFail.bind(item.owner,\'person\') }"\n                        data-tipped-options="\n                            hideAfter: 300,\n                            skin: \'light\',\n                            showDelay: 800,\n                            hideOnClickOutside: true,\n                            hideOn: false,\n                            hideOthers: true,\n                            position: \'bottommiddle\'"\n                        data-content="{{$component.ownerTippedContent}}">\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko ifnot: shouldShowOwnerOptions --\x3e\n                    <img class="tipped-hide"\n                        data-tipped="{{ app.tl(\'Project owner: [_s]\', item.owner.fullName()) }}"\n                        data-bind="attr: { src: item.owner.avatarUrl },\n                            event: { error: app.OnImageThumbLoadFail.bind(item.owner,\'person\') }">\n                \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n        </span>\n\n        \x3c!-- ko if: displayMode() == \'grid\' --\x3e\n            <div class="w-project__header-options w-project__header-options--right">\n                \x3c!-- ko component: {\n                        name: \'ui-project-dropdown-button\',\n                        params: {\n                            projectId: item.id(),\n                            projectName: item.name()\n                        }\n                    } --\x3e\n                \x3c!-- /ko --\x3e\n            </div>\n        \x3c!-- /ko --\x3e\n\n        \x3c!-- ko if: canOpen --\x3e\n            <span class="w-project__header-toggle">\n                \x3c!-- ko ifnot: isTemplate --\x3e\n                    <a href="javascript:;" data-click="OnClickToggleDetails">\n                        \x3c!-- ko if: isOpen --\x3e\n                            {{app.tl(\'Less detail\')}}\n                            <i class="fa fa-angle-up"></i>\n                        \x3c!-- /ko --\x3e\n\n                        \x3c!-- ko ifnot: isOpen --\x3e\n                            {{app.tl(\'View details\')}}\n                            <i class="fa fa-angle-down"></i>\n                        \x3c!-- /ko --\x3e\n                    </a>\n                \x3c!-- /ko --\x3e\n            </span>\n        \x3c!-- /ko --\x3e\n    </div>\n\n    \x3c!-- ko if: displayMode() == \'grid\' --\x3e\n        <div class="w-project__tabs">\n            \x3c!-- ko foreach: tabs --\x3e\n                <span class="w-project__tabs-item"\n                    data-bind="\n                        css: {\n                            \'w-project__tabs-item--active\': $component.currentView() == $data.value\n                        },\n                        click: function(){\n                            $component.currentView($data.value)\n                        }">\n                    {{title}}\n                </span>\n            \x3c!-- /ko --\x3e\n        </div>\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- ko if: shouldShowDetails --\x3e\n        <div class="w-project__content">\n\t\t\t\x3c!-- ko if: displayMode() == \'grid\' --\x3e\n\t\t\t\t\x3c!-- ko if: item.boardColumn.id() > 0 && app.loggedInUser.permissions.canAccessPortfolio() --\x3e\n\t\t\t\t\t<span class="w-project__content-item w-project__content-item--column">\n\t\t\t\t\t\t\x3c!-- ko component: { name:"widget-board-column-label", params:{ item: item, mode: \'tag\', boardType: \'project\', boardId: item.boardData.board.id() } } --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t</span>\n\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t<span class="w-project__content-item w-project__content-item--tags"\n\t\t\t\t\tdata-bind="css: {\n\t\t\t\t\t\t\'w-project__header-tags--active\': item.tags().length\n\t\t\t\t\t}">\n\t\t\t\t\t\x3c!-- ko if: item.tags().length --\x3e\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: "widget-tags-list",\n\t\t\t\t\t\t\t\tparams:{\n\t\t\t\t\t\t\t\t\titem: item,\n\t\t\t\t\t\t\t\t\ttype: "project",\n\t\t\t\t\t\t\t\t\tcanEdit: item.canEdit(),\n\t\t\t\t\t\t\t\t\tenabled: app.account.tagsEnabled(),\n\t\t\t\t\t\t\t\t\tcanAddTags: (!app.account.tagsLockedToAdmins() || app.loggedInUser.administrator())\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\n                    \x3c!-- ko if: item.canEdit --\x3e\n                        \x3c!-- ko component: {\n                                name: "widget-tags-addIcon",\n                                params: {\n                                    item: item,\n                                    id: item.id,\n                                    type: "project",\n                                    showText: shouldShowTagText,\n                                    showIcon: true,\n                                    autosave: true\n                                }\n                            } --\x3e\n                        \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n\t\t\t\t</span>\n\t\t\t\x3c!-- /ko --\x3e\n            \x3c!-- ko if: item.update.id() > 0 --\x3e\n                <div class="w-project__content-item w-project__content-item--update">\n                    <span data-bind="marked: item.update.text"></span>\n\n                    <small class="w-project__content-item--update-info">\n                        {{item.update.user.fullName}},\n                        <span class="ml--small">\n                            {{ app.utility.GetProjectUpdateDisplayDate( item.update.dateCreated ) }}\n                        </span>\n                    </small>\n                </div>\n            \x3c!-- /ko --\x3e\n\n            \x3c!-- ko ifnot: item.update.id() > 0 --\x3e\n                <div class="w-project__content-item w-project__content-item--update">\n                    <span class="flex flex-items-center mb--large">\n                        <span class="flex flex-column">\n                            {{app.tl(\'This project has no recent update.\')}}\n                            \x3c!-- ko if: canAddUpdate --\x3e\n                                <a href="javascript:;" data-click="$component.OnClickAddUpdate" class="text-decoration--none">\n                                    {{app.tl(\'Add update\')}}\n                                </a>\n                            \x3c!-- /ko --\x3e\n                        </span>\n                    </span>\n                </div>\n            \x3c!-- /ko --\x3e\n\n            \x3c!-- ko if: item.startDate().length --\x3e\n                <div class="w-project__content-item w-project__content-item--dates">\n                    \x3c!-- ko component: {\n                            name: \'ui-common-icon\',\n                            params: {\n                                name: \'event-regular\',\n                            }\n                        } --\x3e\n                    \x3c!-- /ko --\x3e\n\n                    <span class="ml--small">\n                        {{moment(item.startDate(),\'YYYYMMDD\').format(app.loggedInUser.localization.dateFormat())}} - {{moment(item.endDate(),\'YYYYMMDD\').format(app.loggedInUser.localization.dateFormat())}}\n                    </span>\n                </div>\n            \x3c!-- /ko --\x3e\n\n            \x3c!-- ko if: item.description().length --\x3e\n                <div class="w-project__content-item w-project__content-item--description">\n                    \x3c!-- ko component: {\n                            name: \'ui-common-icon\',\n                            params: {\n                                name: \'info-circle-solid\',\n                            }\n                        } --\x3e\n                    \x3c!-- /ko --\x3e\n\n                    <span class="ml--small"\n                        data-bind="\n                            marked: {\n                                value: item.description,\n                                strip: true,\n                                length: 80,\n                                class: \'project-description\'\n                            }">\n                    </span>\n                </div>\n            \x3c!-- /ko --\x3e\n\n            \x3c!-- ko if: item.people().length > 0 --\x3e\n                <div class="w-project__content-item w-project__content-item--users">\n                    \x3c!-- ko foreach: item.people --\x3e\n                        \x3c!-- ko if: $index() < 5 --\x3e\n                            <img class="tipped-hide"\n                                data-bind="\n                                    attr: {\n                                        src: avatarUrl,\n                                        alt: firstName() + \' \' + lastName()\n                                    },\n                                    event: {\n                                        error: app.OnImageThumbLoadFail.bind($data,\'person\')\n                                    }"\n                                data-tipped="{{firstName}} {{lastName}}">\n                        \x3c!-- /ko --\x3e\n                        \x3c!-- ko if: $index() == 5 --\x3e\n                            <span class="w-project__content-item--users-more"\n                                data-tipped-options="\n                                    skin: \'light\',\n                                    hideOn: false,\n                                    hideAfter: 300,\n                                    showDelay: 350,\n                                    padding: false,\n                                    hideOthers: true"\n                                data-bind="\n                                    tippedDelegate,\n                                    attr: {\n                                        \'data-component\': JSON.stringify({\n                                            name: \'widget-tipped-project-people-list\',\n                                            params: {\n                                                projectId: $component.item.id()\n                                            }\n                                        })\n                                    }">\n                                \x3c!-- ko component: {\n                                        name: \'ui-common-icon\',\n                                        params: {\n                                            name: \'ellipsis-h-regular\'\n                                        }\n                                    } --\x3e\n                                \x3c!-- /ko --\x3e\n                            </span>\n                        \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n                </div>\n            \x3c!-- /ko --\x3e\n        </div>\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- ko if: shouldShowMetrics --\x3e\n        \x3c!-- ko component: {\n                name: \'widget-project-metrics\',\n                params: {\n                    project: $component.item,\n                    eventsKey: $component.metricEventsKey,\n                    displayMode: $component.displayMode\n                }\n            } --\x3e\n        \x3c!-- /ko --\x3e\n    \x3c!-- /ko --\x3e\n</div>'},3164:function(t,e){t.exports='<div class="w-project__tipped-update"\n    data-bind="css: {\n        \'w-project__tipped-update--has-color\': item.update.color() != \'\'\n    }">\n    <span class="w-project__tipped-update-info">\n        \x3c!-- ko if: item.owner.id() != item.update.user.id() --\x3e\n            <span class="w-project__tipped-update-info-user">{{item.update.user.fullName}} - </span>\n        \x3c!--/ko--\x3e\n\n        <span class="w-project__tipped-update-info-date">{{ app.utility.GetRelativeDate( item.update.dateCreated ) }}</span>\n    </span>\n\n    <span class="w-project__tipped-update-content" data-bind="marked: { value: item.update.text, strip: true }"></span>\n\n    <span class="w-project__tipped-update-color" data-bind="style: { \'background-color\': item.update.color }"></span>\n</div>'},3177:function(t,e){t.exports='\x3c!-- Placed in background and when clicked will close down the quick jump component too --\x3e\n<div class="w-quick-jump__backdrop"\n\tdata-bind="click: OnClickClose">\n</div>\n\n<div class="w-quick-jump w-quick-jump--projects"\n\tdata-bind="css: {\n\t\t\'w-quick-jump--is-filtering\': isShowingFilters\n\t}">\n\t<div class="w-quick-jump__header h-show-hover--parent">\n\t\t<div class="w-quick-jump__header-title">\n\t\t\t<span>\n\t\t\t\t{{app.tl(\'Jump to Project\')}}\n\t\t\t</span>\n\n\t\t\t<button class="btn btn-sm btn-link"\n\t\t\t\tdata-bind="click: OnClickClose">\n\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tname: \'close-regular\'\n\t\t\t\t\t\t}\n\t\t\t\t\t} --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</button>\n\t\t</div>\n\n\t\t<div class="w-quick-jump__header-search">\n\t\t\t\x3c!-- ko component: {\n\t\t\t\t\tname: \'widget-text-input\',\n\t\t\t\t\tparams:{\n\t\t\t\t\t\tautoFocus: true,\n\t\t\t\t\t\tvalue: searchTerm,\n\t\t\t\t\t\thasFocus: searchIsFocused,\n\t\t\t\t\t\tplaceholder: app.tl(\'Filter\'),\n\t\t\t\t\t\tOnClickHandler: OnClickSearchInput\n\t\t\t\t\t}\n\t\t\t\t} --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t<button class="btn btn-sm ml--small"\n\t\t\t\tdata-bind="\n\t\t\t\t\tcss: {\n\t\t\t\t\t\t\'btn-white\': !filterButtonIsActive(),\n\t\t\t\t\t\t\'btn-primary\': filterButtonIsActive\n\t\t\t\t\t},\n\t\t\t\t\tclick: OnClickToggleFilters">\n\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tname: \'filter-regular\'\n\t\t\t\t\t\t}\n\t\t\t\t\t} --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</button>\n\t\t</div>\n\n\t\t\x3c!-- ko if: isShowingFilters --\x3e\n\t\t\t<div class="flex flex-column">\n\t\t\t\t<label>{{app.tl(\'Suggested filters\')}}</label>\n\n\t\t\t\t<select style="width: 100%;"\n\t\t\t\t\tdata-bind="\n\t\t\t\t\t\tselect2: {\n\t\t\t\t\t\t\tvalue: quickFilterSelection,\n\t\t\t\t\t\t\tdata: suggestedFilters\n\t\t\t\t\t\t}">\n\t\t\t\t</select>\n\t\t\t</div>\n\n\t\t\t\x3c!-- ko ifnot: $component.shouldShowCustomOptions --\x3e\n\t\t\t\t<p class="border--default font-size--small h-background-color--white mt--medium p--large radius--medium text-muted">\n\t\t\t\t\t{{{$component.quickFilterAbout}}}\n\t\t\t\t\t<a href="javascript:;"\n\t\t\t\t\t\tdata-bind="click: OnClickCustomizeFilter">\n\t\t\t\t\t\t{{app.tl(\'Customize\')}}\n\t\t\t\t\t</a>\n\t\t\t\t</p>\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\x3c!-- ko if: $component.shouldShowCustomOptions --\x3e\n\t\t\t\t<label class="border-top--default font-weight--semibold mt--medium pt--xlarge text-center text-muted">\n\t\t\t\t\t{{app.tl(\'Filter options\')}}\n\t\t\t\t</label>\n\n\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\tname: \'section-projects-list-filter\',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\titemType: \'project\',\n\t\t\t\t\t\t\tkey: \'homeProjectsList\',\n\t\t\t\t\t\t\tshowKeywordSection: false,\n\t\t\t\t\t\t\tshowSortOptions: true,\n\t\t\t\t\t\t\tallowReordering: false\n\t\t\t\t\t\t}\n\t\t\t\t\t} --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t<div class="flex flex-items-center flex-justify-between py--medium">\n\t\t\t\t<button class="btn btn-link btn-sm"\n\t\t\t\t\tdata-bind="click: OnClickClearFilters">\n\t\t\t\t\t{{app.tl(\'Clear\')}}\n\t\t\t\t</button>\n\n\t\t\t\t<button class="btn btn-success btn-sm"\n\t\t\t\t\tdata-bind="click: OnClickSaveFilters">\n\t\t\t\t\t{{app.tl(\'Save\')}}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\x3c!-- /ko --\x3e\n\n\t\t\x3c!-- ko ifnot: isShowingFilters --\x3e\n\t\t\t<a href="javascript:;"\n\t\t\t\tclass="flex-self-end font-size--small mt--small"\n\t\t\t\tdata-bind="click: OnClickExpandProjects">\n\t\t\t\t{{app.tl(\'Go to my projects\')}}\n\t\t\t</a>\n\t\t\x3c!-- /ko --\x3e\n\t</div>\n\n\t<div class="w-quick-jump__body"\n\t\tdata-bind="visible: !isShowingFilters()">\n\t\t\x3c!-- ko if: data.state() == \'blank\' --\x3e\n\t\t\t<div class="w-quick-jump__state w-quick-jump__state--empty">\n\t\t\t\t\x3c!-- ko if: hasActiveFilter --\x3e\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{{app.tl(\'No projects match your filter\')}}\n\t\t\t\t\t</span>\n\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\x3c!-- ko ifnot: hasActiveFilter --\x3e\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{{app.tl(\'No projects\')}}\n\t\t\t\t\t</span>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</div>\n\t\t\x3c!-- /ko --\x3e\n\n\t\t\x3c!-- ko if: data.state() == \'loading\' --\x3e\n\t\t\t\x3c!-- ko component: {\n\t\t\t\t\tname: \'list-state-loading-new\',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\titemType: \'project\'\n\t\t\t\t\t}\n\t\t\t\t} --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\t\t\x3c!-- /ko --\x3e\n\n\t\t\x3c!-- ko if: data.state() == \'content\' --\x3e\n\t\t\t<div class="w-quick-jump__list"\n\t\t\t\tdata-bind="foreach: data.list">\n\n\t\t\t\t\x3c!-- ko if: $component.isNewSection($index()) --\x3e\n\t\t\t\t\t<label class="w-quick-jump__list-header">\n\t\t\t\t\t\t{{{ $component.getSectionHeader($index()) }}}\n\t\t\t\t\t</label>\n\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t<a class="w-quick-jump__list-item"\n\t\t\t\t\thref="#/projects/{{id}}"\n\t\t\t\t\tdata-bind="\n\t\t\t\t\t\tcss: {\n\t\t\t\t\t\t\t\'is-selected\': isSelected\n\t\t\t\t\t\t}">\n\t\t\t\t\t<span class="w-quick-jump__list-item-star"\n\t\t\t\t\t\tdata-bind="\n\t\t\t\t\t\t\tclick: OnClickStar,\n\t\t\t\t\t\t\tclickBubble: false,\n\t\t\t\t\t\t\tcss: {\n\t\t\t\t\t\t\t\t\'w-quick-jump__list-item-star--active\': starred\n\t\t\t\t\t\t\t}">\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tname: (starred() ? \'star-solid\' : \'star-regular\')\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko  --\x3e\n\t\t\t\t\t</span>\n\n\t\t\t\t\t{{ name }}\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t\x3c!-- /ko --\x3e\n\n\t\t\x3c!-- ko if: data.hasMoreRecords --\x3e\n\t\t\t\x3c!-- ko component: {\n\t\t\t\t\tname: \'widget-loadMore\',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tdataLoader: data,\n\t\t\t\t\t\tminimalTemplate: true\n\t\t\t\t\t}\n\t\t\t\t} --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\t\t\x3c!-- /ko --\x3e\n\t</div>\n</div>\n\n<div data-bind="onRendered: OnRendered"></div>'},3186:function(t,e){t.exports="\x3c!-- ko if: numberOfUsers() == 0 --\x3e\n    \x3c!-- ko if: isLoading --\x3e\n        <div class=\"u-related-users__title\">\n            {{ app.tl('Loading users') }}\n        </div>\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- ko ifnot: isLoading --\x3e\n        <div class=\"u-related-users__title\">\n            {{ app.tl('No users found') }}\n        </div>\n    \x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: numberOfUsers() > 0 --\x3e\n    \x3c!-- ko if: titleText.length --\x3e\n        <span class=\"u-related-users__title\">{{$component.titleText}}</span>\n    \x3c!--/ko --\x3e\n\n    <div class=\"u-related-users__list\"\n        data-bind=\"foreach: users\">\n        <div class=\"u-related-users__user\">\n            \x3c!-- ko if: $data.type == 'team' --\x3e\n                {{{ app.utility.GetTeamLogo($data, ['u-team-logo--tiny', 'mr--small']) }}}\n            \x3c!-- /ko --\x3e\n            \x3c!-- ko ifnot: $data.type == 'team' --\x3e\n                <img class=\"u-related-users__user-avatar\"\n                    data-bind=\"\n                        attr: {\n                            src: $component.getAvatarUrl($data),\n                            alt: $component.getFullName($data)\n                        },\n                        event: {\n                            error: app.OnImageThumbLoadFail.bind($data, $data.type || 'userAvatar')\n                        }\">\n            \x3c!-- /ko --\x3e\n            <span>{{$component.getFullName($data)}}</span>\n        </div>\n    </div>\n\x3c!--/ko --\x3e\n\n\x3c!-- ko ifnot: numberOfUsers --\x3e\n    {{app.tl('No current users')}}\n\x3c!--/ko --\x3e"},3187:function(t,e){t.exports="<span class=\"u-related-users\"\n    data-bind=\"tippedDelegate: {\n        onShow: $component.OnShowTipped\n    }\"\n    data-tipped-options=\"\n        skin:'light',\n        showOn: 'mouseenter',\n        hideOn: false,\n        showDelay: 300,\n        hideAfter: 300,\n        maxWidth: 200,\n        position: 'topleft'\"\n    data-content=\"{{relatedUsersTippedContent}}\">\n    \x3c!-- ko ifnot: tippedLabel --\x3e\n        \x3c!-- ko component: {\n                name: 'ui-common-icon',\n                params: {\n                    name: 'user-regular'\n                }\n            } --\x3e\n        \x3c!-- /ko --\x3e\n        {{numberOfUsers}}\n    \x3c!-- /ko --\x3e\n    \x3c!-- ko if: tippedLabel --\x3e\n        {{tippedLabel}}\n    \x3c!-- /ko --\x3e\n</span>"},3199:function(t,e){t.exports='<div class="w-shortcut" data-bind="css: { \'w-shortcut--selected\': item.isSelected }" id="shortcut{{item.id}}">\n\t<div class="w-shortcut__icon">\n\t\t\x3c!-- ko component: {\n\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\tparams: {\n\t\t\t\t\tname: $component.GetShortcutIcon(item) + \'-solid\',\n\t\t\t\t\tclass: \'u-common-icon--shortcut-icon h-background-color--\' + item.objectType()\n\t\t\t\t}\n\t\t\t} --\x3e\n\t\t\x3c!-- /ko  --\x3e\n\t</div>\n    <div class="w-shortcut__details">\n        <div class="w-shortcut__details-title">\n            <a href="{{item.fullUrl}}"\n\t\t\tdata-bind="click: OnClickShortcut">{{{item.name}}}</a>\n\t\t</div>\n\t\t<div class="w-shortcut__details-link">\n\t\t\t<a href="{{item.fullUrl}}"\n\t\t\tdata-bind="click: OnClickShortcut">{{{item.fullUrl}}}</a>\n\t\t</div>\n    </div>\n\n    <div class="w-shortcut__info">\n        <div class="w-shortcut__info-options">\n            <div class="u-btn-group" role="group">\n                <button\n                    type="button"\n                    data-tipped="{{app.tl(\'Pin/unpin shortcut\')}}"\n                    data-bind="click: item.TogglePinnedStatus"\n                    class="btn btn-white tipped-hide">\n                    \x3c!-- ko if: item.pinned --\x3e\n                        \x3c!-- ko component: {\n                                name: \'ui-common-icon\',\n                                params: {\n                                    name: \'pin-solid\',\n                                    size: \'1x\'\n                                }\n                            } --\x3e\n                        \x3c!-- /ko  --\x3e\n                    \x3c!-- /ko  --\x3e\n\n                    \x3c!-- ko ifnot: item.pinned --\x3e\n                        \x3c!-- ko component: {\n                                name: \'ui-common-icon\',\n                                params: {\n                                    name: \'pin-regular\',\n                                    size: \'1x\'\n                                }\n                            } --\x3e\n                        \x3c!-- /ko  --\x3e\n                    \x3c!-- /ko  --\x3e\n                </button>\n\n                <button\n                    type="button"\n                    data-bind="tippedDelegate"\n                    data-tipped-options="\n                        skin: \'light\',\n                        showOn: \'click\',\n                        hideOn: false,\n                        hideAfter: 300,\n                        position: \'bottommiddle\'"\n\t\t\t\t\tdata-content="{{tippedContent}}"\n                    class="btn btn-white">\n\n                    \x3c!-- ko component: {\n                            name: \'ui-common-icon\',\n                            params: {\n                                name: \'ellipsis-v-regular\',\n                                size: \'1x\'\n                            }\n                        } --\x3e\n                    \x3c!-- /ko  --\x3e\n                </button>\n            </div>\n        </div>\n    </div>\n\n</div>'},3200:function(t,e){t.exports='<ul class="tippedMenu">\n    <li>\n        <a href="javascript:;" data-bind="click: item.Edit">\n            {{app.tl(\'Edit\')}}\n        </a>\n    </li>\n    <li>\n        <a href="javascript:;" data-bind="click: item.Delete">\n            {{app.tl(\'Delete\')}}\n        </a>\n    </li>\n\n    <li>\n        <a href="javascript:;" data-bind="clipboard: { text: app.account.URL() + \'/#\' + item.friendlyUrl() }">\n            {{app.tl(\'Copy Link\')}}\n        </a>\n    </li>\n</ul>'},3205:function(t,e){t.exports='<ul class="w-tabs-list" data-bind="foreach: visibleTabs">\n    <li class="w-tabs-list__item {{tabClasses}}"\n        data-bind="\n            click: OnClick,\n            visible: enabled">\n        <a href="{{url}}">\n            \x3c!-- ko if: $data.icon --\x3e\n                <span class="w-tabs-list__item-icon">\n                    \x3c!-- ko component: {\n                            name: \'ui-common-icon\',\n                            params: {\n                                name: icon\n                            }\n                        } --\x3e\n                    \x3c!-- /ko --\x3e\n                </span>\n            \x3c!-- /ko --\x3e\n\n            <span class="w-tabs-list__item-label">\n                {{title}}\n            </span>\n\n            \x3c!-- ko if: showCount --\x3e\n                \x3c!-- ko if: ko.unwrap(showCountIfEmpty) || (ko.unwrap(count) > 0) --\x3e\n                    <span class="h-count tipped-hide h-count--active"\n                        data-tipped-options="{{tippedOptions}}"\n                        data-content="{{tippedContent}}"\n                        data-bind="\n                            tippedDelegate: {\n                                enabled: ko.unwrap(tippedContent).length > 0\n                            }">\n                        {{ $component.GetFormattedCount($data) }}\n                    </span>\n                \x3c!-- /ko --\x3e\n            \x3c!-- /ko --\x3e\n\n            \x3c!-- ko if: showSymbol --\x3e\n                <span class="w-tabs-list__item-symbol"\n                    data-bind="\n                        tippedDelegate: {\n                            enabled: ko.unwrap(symbolPrompt) != \'\'\n                        }"\n                    data-content="{{symbolPrompt}}">\n                    \x3c!-- ko component: {\n                            name: \'ui-common-icon\',\n                            params: {\n                                name: $component.GetValidSymbol($data)\n                            }\n                        } --\x3e\n                    \x3c!-- /ko --\x3e\n                </span>\n            \x3c!-- /ko --\x3e\n        </a>\n    </li>\n</ul>'},3252:function(t,e){t.exports='<div class="w-timeline">\n\t<div class="w-timeline__item">\n\t\t<h1 class="w-timeline__title">September 20th, 2018</h1>\n\t\t<p class="w-timeline__text">23 Participents</p>\n\t</div>\n\t<div class="w-timeline__item">\n\t\t<h1 class="w-timeline__title">September 13th, 2018</h1>\n\t\t<p class="w-timeline__text">15 Participents</p>\n\t</div>\n\t<div class="w-timeline__item">\n\t\t<h1 class="w-timeline__title">August 20th, 2018</h1>\n\t\t<p class="w-timeline__text">10 Participents</p>\n\t</div>\n</div>'},3300:function(t,e){t.exports='<div class="s-home__sidebar-metric" data-bind="visible: hasTasks">\n\t<label class="s-home__profile-section">\n\t\t{{app.tl(\'My Tasks\')}}\n\t</label>\n\n\t<ul class="s-home__profile-metrics">\n\t\t<li class="s-home__profile-metrics-item s-home__profile-metrics-item--late"\n\t\t\tdata-bind="\n\t\t\t\tcss: {\n\t\t\t\t\t\'s-home__profile-metrics-item--empty\': lateTasks() == 0\n\t\t\t\t},\n\t\t\t\tclick: function(){\n\t\t\t\t\tOnMetricClick(\'lateTasks\')\n\t\t\t\t}">\n\n\t\t\t<span class="s-home__profile-metrics-item-label">\n\t\t\t\t{{app.tl(\'Late\')}}\n\t\t\t</span>\n\n\t\t\t<span class="s-home__profile-metrics-item-count">\n\t\t\t\t{{lateTasks}}\n\t\t\t</span>\n\t\t</li>\n\n\t\t<li class="s-home__profile-metrics-item s-home__profile-metrics-item--today"\n\t\t\tdata-bind="\n\t\t\t\tcss: {\n\t\t\t\t\t\'s-home__profile-metrics-item--empty\': todaysTasks() == 0\n\t\t\t\t},\n\t\t\t\tclick: function(){\n\t\t\t\t\tOnMetricClick(\'todaysTasks\')\n\t\t\t\t}">\n\n\t\t\t<span class="s-home__profile-metrics-item-label">\n\t\t\t\t{{app.tl(\'Today\')}}\n\t\t\t</span>\n\n\t\t\t<span class="s-home__profile-metrics-item-count">\n\t\t\t\t{{todaysTasks}}\n\t\t\t</span>\n\t\t</li>\n\n\t\t<li class="s-home__profile-metrics-item s-home__profile-metrics-item--upcoming"\n\t\t\tdata-bind="\n\t\t\t\tcss: {\n\t\t\t\t\t\'s-home__profile-metrics-item--empty\': upcomingTasks() == 0\n\t\t\t\t},\n\t\t\t\tclick: function(){\n\t\t\t\t\tOnMetricClick(\'upcomingTasks\')\n\t\t\t\t}">\n\n\t\t\t<span class="s-home__profile-metrics-item-label">\n\t\t\t\t{{app.tl(\'Upcoming\')}}\n\t\t\t</span>\n\n\t\t\t<span class="s-home__profile-metrics-item-count">\n\t\t\t\t{{upcomingTasks}}\n\t\t\t</span>\n\t\t</li>\n\t</ul>\n</div>\n\n<div class="s-home__sidebar-metric" data-bind="visible: hasMilestones">\n\t<label class="s-home__profile-section">\n\t\t{{app.tl(\'My Milestones\')}}\n\t</label>\n\n\t<ul class="s-home__profile-metrics">\n\t\t<li class="s-home__profile-metrics-item s-home__profile-metrics-item--late"\n\t\t\tdata-bind="\n\t\t\t\tcss: {\n\t\t\t\t\t\'s-home__profile-metrics-item--empty\': lateMilestones() == 0\n\t\t\t\t},\n\t\t\t\tclick: function(){\n\t\t\t\t\tOnMetricClick(\'lateMilestones\')\n\t\t\t\t}">\n\n\t\t\t<span class="s-home__profile-metrics-item-label">\n\t\t\t\t{{app.tl(\'Late\')}}\n\t\t\t</span>\n\n\t\t\t<span class="s-home__profile-metrics-item-count">\n\t\t\t\t{{lateMilestones}}\n\t\t\t</span>\n\t\t</li>\n\n\t\t<li class="s-home__profile-metrics-item s-home__profile-metrics-item--today"\n\t\t\tdata-bind="\n\t\t\t\tcss: {\n\t\t\t\t\t\'s-home__profile-metrics-item--empty\': todaysMilestones() == 0\n\t\t\t\t},\n\t\t\t\tclick: function(){\n\t\t\t\t\tOnMetricClick(\'todaysMilestones\')\n\t\t\t\t}">\n\n\t\t\t<span class="s-home__profile-metrics-item-label">\n\t\t\t\t{{app.tl(\'Today\')}}\n\t\t\t</span>\n\n\t\t\t<span class="s-home__profile-metrics-item-count">\n\t\t\t\t{{todaysMilestones}}\n\t\t\t</span>\n\t\t</li>\n\n\t\t<li class="s-home__profile-metrics-item s-home__profile-metrics-item--upcoming"\n\t\t\tdata-bind="\n\t\t\t\tcss: {\n\t\t\t\t\t\'s-home__profile-metrics-item--empty\': upcomingMilestones() == 0\n\t\t\t\t},\n\t\t\t\tclick: function(){\n\t\t\t\t\tOnMetricClick(\'upcomingMilestones\')\n\t\t\t\t}">\n\n\t\t\t<span class="s-home__profile-metrics-item-label">\n\t\t\t\t{{app.tl(\'Upcoming\')}}\n\t\t\t</span>\n\n\t\t\t<span class="s-home__profile-metrics-item-count">\n\t\t\t\t{{upcomingMilestones}}\n\t\t\t</span>\n\t\t</li>\n\t</ul>\n</div>\n\n<div class="s-home__sidebar-metric hidden">\n\t<label class="s-home__profile-section">\n\t\t{{app.tl(\'My Events\')}}\n\t</label>\n\n\t<ul class="s-home__profile-metrics">\n\t\t<li class="s-home__profile-metrics-item s-home__profile-metrics-item--event-today"\n\t\t\tdata-bind="\n\t\t\t\tcss: {\n\t\t\t\t\t\'s-home__profile-metrics-item--empty\': todaysEvents() == 0\n\t\t\t\t},\n\t\t\t\tclick: function(){\n\t\t\t\t\tOnMetricClick(\'todaysEvents\')\n\t\t\t\t}">\n\n\t\t\t<span class="s-home__profile-metrics-item-label">\n\t\t\t\t{{app.tl(\'Today\')}}\n\t\t\t</span>\n\n\t\t\t<span class="s-home__profile-metrics-item-count">\n\t\t\t\t{{todaysEvents}}\n\t\t\t</span>\n\t\t</li>\n\n\t\t<li class="s-home__profile-metrics-item s-home__profile-metrics-item--event-upcoming"\n\t\t\tdata-bind="\n\t\t\t\tcss: {\n\t\t\t\t\t\'s-home__profile-metrics-item--empty\': upcomingEvents() == 0\n\t\t\t\t},\n\t\t\t\tclick: function(){\n\t\t\t\t\tOnMetricClick(\'upcomingEvents\')\n\t\t\t\t}">\n\n\t\t\t<span class="s-home__profile-metrics-item-label">\n\t\t\t\t{{app.tl(\'Upcoming\')}}\n\t\t\t</span>\n\n\t\t\t<span class="s-home__profile-metrics-item-count">\n\t\t\t\t{{upcomingEvents}}\n\t\t\t</span>\n\t\t</li>\n\t</ul>\n</div>\n\n'},3612:function(t,e,n){(function(s){var i,a,o=function(t,e){return function(){return t.apply(e,arguments)}},r=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};i=[n(2327),n(2326),n(1928),n(1126),n(1129)],void 0!==(a=function(t,e,n,i,a){var l;return l=function(){function t(t){var s,i,l,c;null==t&&(t={}),this.setDefaults=o(this.setDefaults,this),this.initWithTemplates=o(this.initWithTemplates,this),this.shouldDisplaySection=o(this.shouldDisplaySection,this),this.OnClickAddDashboardPanel=o(this.OnClickAddDashboardPanel,this),this.OnSubmit=o(this.OnSubmit,this),this.OnClickDeletePanel=o(this.OnClickDeletePanel,this),this.OnClickUseTemplate=o(this.OnClickUseTemplate,this),this.OnShow=o(this.OnShow,this),this.subscriptions=[],this.modalRef=t.modalRef,this.args=this.modalRef.args,this.colorsTippedContent=e,this.holderId="modalAddOrEditDashboard",this.dashboardType=null!=(s=this.args.dashboardType)?s:"home",this.dashboardProjectId=null!=(i=this.args.dashboardProjectId)?i:0,"home"!==(l=!this.dashboardType)&&"project"!==l||console.error("Invalid dashboard type specified"),this.dashboard=null!=(c=this.args.dashboard)?c:new n({userId:app.loggedInUser.id(),projectId:this.dashboardProjectId}),this.panelToAdd=ko.observable(null),this.subscriptions.push(this.panelToAdd.subscribe(function(t){return function(){return t.OnClickAddDashboardPanel()}}(this))),this.filteredPanels=ko.pureComputed(function(t){return function(){return t.dashboard.panels().filter(function(t){return!t.isDeleted()})}}(this)),this.subscriptions.push(this.panelOptions=ko.pureComputed(function(t){return function(){var e,n,s,i,a,o,l,c,p,d,u,h;if(e=[{id:"projects",text:app.tl("Projects"),children:[{id:"projects-distribution",text:app.tl("Project distribution"),enabled:app.account.isEnterprise()},{id:"project-health-bar",text:app.tl("Project health breakdown"),enabled:!0},{id:"project-updates-list",text:app.tl("Latest project updates"),enabled:!0},{id:"projects-digest",text:app.tl("Latest activity digest"),enabled:!0}]},{id:"activity",text:app.tl("Activity"),children:[{id:"activity-distribution",text:app.tl("Totals"),enabled:app.account.isEnterprise()}]},{id:"tasks",text:app.tl("Tasks"),children:[{id:"tasks-bar",text:app.tl("Task counts"),enabled:!0},{id:"tasks-breakdown",text:app.tl("Tasks breakdown"),enabled:!app.account.isFreeAccount()},{id:"tasks-burndown",text:app.tl("Task list burndown"),enabled:app.featureFlip.check("burndownchart",{unwrap:!0})}]},{id:"milestones",text:app.tl("Milestones"),children:[{id:"milestones-bar",text:app.tl("Milestone counts"),enabled:!0},{id:"milestones-list",text:app.tl("Upcoming milestones"),enabled:!0}]},{id:"time",text:app.tl("Time"),children:[{id:"billable-time-donut",text:app.tl("Billable vs non-billable"),enabled:!0},{id:"billed-time-donut",text:app.tl("Billed vs unbilled"),enabled:!0}]},{id:"events",text:app.tl("Events"),children:[{id:"events-list",text:app.tl("Upcoming Events"),enabled:!0}]},{id:"risks",text:app.tl("Risks"),children:[{id:"risks-bar",text:app.tl("Risk counts"),enabled:!0},{id:"risks-list",text:app.tl("Top risks"),enabled:!0}]},{id:"budgets",text:app.tl("Budgets"),children:[{id:"budgets-bar",text:app.tl("Project budgets"),enabled:app.featureFlip.check("projecttimebudgets")()}]}],i=[],s=t.filteredPanels().map(function(t){return t.type()}),app.account.isEnterprise())return e;for(l=0,p=e.length;l<p;l++){if(o=e[l],a=[],o.children.length)for(u=o.children,c=0,d=u.length;c<d;c++)n=u[c],!n.enabled||(h=n.id,r.call(s,h)>=0)||a.push(n);a.length&&i.push({id:o.id,text:o.text,children:a})}return i}}(this))),this.isEditMode=ko.observable(this.dashboard.id()>0),this.dashboardTitle=this.dashboard.title,this.dashboardColor=this.dashboard.color,this.dashboardDescription=this.dashboard.description,this.panels=this.dashboard.panels,this.displayProjectList=this.dashboard.settings.displayProjectList,this.projectListPosition=this.dashboard.settings.projectListPosition,this.sharedWithUsers=ko.observableArray([]),0===this.dashboard.id()&&this.dashboardColor(app.utility.GetRandomNiceColor()),this.showViewOptions=ko.observable(!1),this.panelsWithoutDashboardFilters=["tasks-burndown"],this.hideUseDashboardFilter=ko.pureComputed(function(t){return function(){return function(e){return t.panelsWithoutDashboardFilters.includes(e.type())}}}(this)),this.currentViewOption=ko.observable("custom"),this.shouldUpdateTitle=!1,this.subscriptions.push(this.showUseTemplateOption=ko.pureComputed(function(t){return function(){return!t.isEditMode()&&"custom"===t.currentViewOption()}}(this))),this.subscriptions.push(this.dashboardTitle.subscribe(function(t){return function(e){if(e!==app.tl("Personal")&&e!==app.tl("Starred")&&e!==app.tl("Everything")&&e!==app.tl("My dashboard"))return t.shouldUpdateTitle=!1}}(this))),this.subscriptions.push(this.currentViewOption.subscribe(function(t){return function(e){if(t.shouldUpdateTitle&&("simple"===e?t.dashboardTitle(app.tl("Personal")):"starred"===e?t.dashboardTitle(app.tl("Starred")):"everything"===e?t.dashboardTitle(app.tl("Everything")):"custom"===e&&t.dashboardTitle(app.tl("My dashboard"))),t.setDefaults(e),"custom"===e)return t.dashboard.ResetPanels(),t.dashboard.ResetSettings(),t.showViewOptions(!1)}}(this))),this.subscriptions.push(this.canShareDashboards=ko.pureComputed(function(t){return function(){return app.featureFlip.check("shareddashboards")()}}())),this.tabs=[{name:app.tl("Panels"),code:"panels",enabled:!0},{name:app.tl("Projects"),code:"filters",enabled:!0},{name:app.tl("Description"),code:"description",enabled:!0},{name:app.tl("Share"),code:"share",enabled:this.canShareDashboards}],this.tabs.selCode=ko.observable(this.args.tab||"panels"),this.modalTitle=this.isEditMode()?app.tl("Edit Dashboard"):app.tl("Add Dashboard"),this.formValidator=new a("#"+this.holderId),this.isSubmitting=ko.observable(!1),this.isEditMode()||this.dashboard.title().length||this.initWithTemplates(),this.subscriptions.push(ko.postbox.subscribe("dashboard-panel-filters-updated",function(){return window.scrollTo(0,0),app.NextTick(function(t){return function(){return Lightbox.center()}}())})),this.subscriptions.push(this.canSubmit=ko.pureComputed(function(t){return function(){return!!t.filteredPanels().length&&!!t.dashboardTitle().trim().length}}(this)))}return t.prototype.OnShow=function(){var t,e;s("html, body").animate({scrollTop:0}),t=function(t){return function(e){t.args.onCloseCallBack&&t.args.onCloseCallBack(e),app.modals.remove(t.modalRef)}}(this),Lightbox.showBoxByID(this.holderId,690,600,!0,{bodyScroll:!1,clickOverlayToClose:!1,onCloseCallBack:t,stack:null!=(e=this.args.stack)&&e}),app.FocusFirstInput(this.holderId)},t.prototype.OnClickUseTemplate=function(){return this.initWithTemplates()},t.prototype.OnClickDeletePanel=function(t){return this.dashboard.RemovePanel(t)},t.prototype.OnSubmit=function(){var t;this.formValidator.canSubmit()&&this.canSubmit()&&!this.isSubmitting()&&(this.isSubmitting(!0),t=app.utility.parseAccessList(this.sharedWithUsers()),this.dashboard.sharedWith.users(t.userIdList.toString()),this.dashboard.sharedWith.teams(t.teamIdList.toString()),this.dashboard.sharedWith.companies(t.companyIdList.toString()),this.dashboard.Save().then(function(t){return function(){return Lightbox.close()}}()).finally(function(t){return function(){return t.isSubmitting(!1)}}(this)))},t.prototype.OnClickAddDashboardPanel=function(){"INPUT"!==document.activeElement.tagName&&(this.dashboard.AddPanel({type:this.panelToAdd(),isEditing:!0}),app.account.isEnterprise()||this.panelToAdd(null))},t.prototype.shouldDisplaySection=function(t){var e;switch(t.type){case"panels":return!1;case"health":case"owners":return app.featureFlip.check("projectupdates",{unwrap:!0});case"tags":if(!app.account.tagsEnabled())return!1;break;case"projectStatus":return"person"===(e=app.currentRoute().page)||"company"===e||"active"===app.currentRoute().projectsPageTab;case"options":if(null!=app.currentRoute().projectsPageTab&&"starred"===app.currentRoute().projectsPageTab)return!1}return!0},t.prototype.initWithTemplates=function(){return this.showViewOptions(!0),this.currentViewOption("simple"),this.shouldUpdateTitle=!0,this.setDefaults("simple")},t.prototype.setDefaults=function(t){if("simple"===t||"starred"===t||"everything"===t)return this.dashboard.UseTemplate(t)},t.prototype.dispose=function(){return this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:l,template:t}}.apply(e,i))&&(t.exports=a)}).call(e,n(245))},3613:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}},o=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};s=[n(2328),n(1129)],void 0!==(i=function(t,e){var n;return n=function(){function t(t){var n;null==t&&(t={}),this.GetPossibleMetricValues=a(this.GetPossibleMetricValues,this),this.enableAllVisibleMetrics=a(this.enableAllVisibleMetrics,this),this.OnClickAllMetricOption=a(this.OnClickAllMetricOption,this),this.OnClickMetricOption=a(this.OnClickMetricOption,this),this.OnClickAddRange=a(this.OnClickAddRange,this),this.OnSubmit=a(this.OnSubmit,this),this.OnShow=a(this.OnShow,this),this.subscriptions=[],this.modalRef=t.modalRef,this.args=this.modalRef.args,this.holderId="modalAddOrEditDashboardPanel",this.panel=null!=(n=this.args.panel)?n:{},console.assert(Object.keys(this.panel).length),this.panel=this.args.panel.Clone(),this.isEditMode=ko.observable(this.panel.id()>0),this.panel.GetDataSources(),this.panelName=this.panel.name,this.settings=this.panel.settings,this.panelsWithoutDashboardFilters=["tasks-burndown"],this.tabs=[{name:app.tl("Filters"),code:"filters",enabled:!0},{name:app.tl("Display"),code:"display",enabled:!0}],this.tabs.selCode=ko.observable(this.args.tab||"filters"),this.modalTitle=this.isEditMode()?app.tl("Edit Panel"):app.tl("Add Panel"),this.subscriptions.push(this.panel.settings.visibleMetrics.subscribe(function(t){return function(e){if(!e.length)return t.enableAllVisibleMetrics()}}(this))),null!=this.panel.settings.projectStatus&&this.subscriptions.push(this.panel.settings.projectStatus.subscribe(function(t){return function(e){if("all"!==e)return t.enableAllVisibleMetrics()}}(this))),this.subscriptions.push(this.allMetricOptionsVisible=ko.pureComputed(function(t){return function(){return 0===t.panel.settings.visibleMetrics().length||o.call(t.panel.settings.visibleMetrics(),"all")>=0}}(this))),this.possibleMetricValues=this.GetPossibleMetricValues(this.panel.type()),this.hideUseDashboardFilter=this.panelsWithoutDashboardFilters.includes(this.panel.type()),this.formValidator=new e("#"+this.holderId),this.isSubmitting=ko.observable(!1),this.subscriptions.push(this.canSubmit=ko.pureComputed(function(t){return function(){return!!t.panelName().trim().length}}(this))),this.subscriptions.push(this.areAllDisplayOptionsEnabled=ko.pureComputed(function(t){return function(){return t.possibleMetricValues.every(function(t){return t.isEnabled()})}}(this))),this.subscriptions.push(this.canSetMetricWidth=ko.pureComputed(function(t){return function(){return!t.panel.meta.alwaysFullWidth()}}(this))),this.infoMsg=function(){switch(this.panel.type()){case"projects-distribution":return app.tl("These options are only available when the Project Status is set to All Projects in the filters panel");default:return app.tl("These settings are not available with your current selection")}}.call(this)}return t.prototype.OnShow=function(){var t,e;t=function(t){return function(e){t.args.onCloseCallBack&&t.args.onCloseCallBack(e),app.modals.remove(t.modalRef)}}(this),Lightbox.showBoxByID(this.holderId,480,720,!0,{clickOverlayToClose:!1,onCloseCallBack:t,stack:null!=(e=this.args.stack)&&e}),app.FocusFirstInput(this.holderId)},t.prototype.OnSubmit=function(){this.formValidator.canSubmit()&&this.canSubmit()&&!this.isSubmitting()&&(this.isSubmitting(!0),this.panel.Save().then(function(t){return function(){return Lightbox.close({panel:{name:t.panel.name(),settings:t.panel.settings}})}}(this)).finally(function(t){return function(){return t.isSubmitting(!1)}}(this)))},t.prototype.OnClickAddRange=function(){var t;return t=function(t){return function(e){e.wasCancelled||t.panel.settings.budgetsBarRanges.push(e.range)}}(this),app.modal.Show("addOrEditRange",{onCloseCallBack:t,stack:!0}),!1},t.prototype.OnClickMetricOption=function(t){var e;return e=this.panel.settings.visibleMetrics().filter(function(t){return"all"!==t}),e.length?this.panel.settings.visibleMetrics(e):this.enableAllVisibleMetrics(),!0},t.prototype.OnClickAllMetricOption=function(){return this.enableAllVisibleMetrics(),!0},t.prototype.enableAllVisibleMetrics=function(){return this.panel.settings.visibleMetrics(["all"])},t.prototype.GetPossibleMetricValues=function(t){var e,n,s,i,a,r;e=[],a=this.panel.GetDisplayOptions(),n=function(e){return function(){return"projects-distribution"!==t||"all"===e.panel.settings.projectStatus()}}(this),s=function(t){return function(s,i){return t.subscriptions.push(i.isEnabled=ko.pureComputed(n)),t.subscriptions.push(i.isSelected=ko.pureComputed({read:function(){return o.call(t.panel.settings.visibleMetrics(),s)>=0&&i.isEnabled()},write:function(e,n){var i;return i=t.panel.settings.visibleMetrics().indexOf(s),e?-1===i?t.panel.settings.visibleMetrics.push(s):void 0:t.panel.settings.visibleMetrics.splice(i,1)}})),e.push(i)}}(this);for(i in a)r=a[i],s(i,r);return e},t.prototype.dispose=function(){return this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:n,template:t}}.apply(e,s))&&(t.exports=i)},3680:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(2416)],void 0!==(i=function(t){var e;return e=function(){function t(t){null==t&&(t={}),this.OnClickWalkPrevStep=a(this.OnClickWalkPrevStep,this),this.OnClickWalkNextStep=a(this.OnClickWalkNextStep,this),this.OnClickLearnMore=a(this.OnClickLearnMore,this),this.OnShow=a(this.OnShow,this),this.modalRef=t.modalRef,this.holderId="dashboardWalkover",this.modalBaseHeight=490,this.modalCurrentStep=ko.observable(1),this.modalAllSteps=5,this.url="https://blog.teamwork.com/introducing-dashboards-and-your-new-home/?utm_medium=in-app&utm_source=modal&utm_campaign=introducing-dashboards-and-your-new-home"}return t.prototype.OnShow=function(){var t;t=function(t){return function(e){app.loggedInUser.preferences.hasSeenHomeWelcomeModal(!0),app.modals.remove(t.modalRef)}}(this),Lightbox.showBoxByID(this.holderId,960,this.modalBaseHeight,!0,{clickOverlayToClose:!1,lightboxDraggable:!1,onCloseCallBack:t})},t.prototype.OnClickLearnMore=function(){window.open(this.url,"_blank")},t.prototype.OnClickWalkNextStep=function(){var t;5===this.modalCurrentStep()&&Lightbox.cancel(),(t=this.modalCurrentStep()+1)<=this.modalAllSteps&&this.modalCurrentStep(t)},t.prototype.OnClickWalkPrevStep=function(){var t;(t=this.modalCurrentStep()-1)>=1&&this.modalCurrentStep(t)},t}(),{viewModel:e,template:t}}.apply(e,s))&&(t.exports=i)},3759:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(14),n(2504)],void 0!==(i=function(t,e){var n;return n=function(){function t(t){null==t&&(t={}),this.dispose=a(this.dispose,this),this.OnSubmit=a(this.OnSubmit,this),this.OnShow=a(this.OnShow,this),app.InitOnShow(this),this.modalRef=t.modalRef,this.args=this.modalRef.args,this.params=t,this.holderId="newDashboardMigration",this.subscriptions=[],this.modalTitle=app.account.isEnterprise()?app.tl("New dashboard panels"):app.tl("We've been working on dashboards"),this.helpdocLink="https://support.teamwork.com/projects/home/enterprise-dashboard-features?preview=true",this.pomptTextLine1=app.account.isEnterprise()?app.tl("We've made some improvements to dashboards, [_s] including two new panel types. Find all the details in our [_s].","<br/>","<a href='"+this.helpdocLink+"' target='_blank'>"+app.tl("Help Doc")+"</a>"):app.tl("To keep improving your dashboards and prepare for new features, [_s] we've made some changes to the code.","<br/>"),this.pomptTextLine2=app.account.isEnterprise()?app.tl("To get started, we just need to rebuild your existing dashboards."):app.tl("To make sure you dashboards are up to date, we just need you to reload them."),this.subscriptions.push(this.buttonText=ko.pureComputed(function(t){return function(){return t.isSubmitting()?"Building":app.account.isEnterprise()?app.tl("Continue"):app.tl("Reload my dashboards")}}(this))),this.backgroundImage="./tko/public/assets/gif/newdashbord-illustration-animation-once.gif",this.isSubmitting=ko.observable(!1)}return t.prototype.OnShow=function(){var t,e;Tipped.hideAll(),t=function(t){return function(e){t.args.onCloseCallBack&&t.args.onCloseCallBack(e),app.modals.remove(t.modalRef)}}(this),Lightbox.showBoxByID(this.holderId,600,400,!1,{clickOverlayToClose:!1,onCloseCallBack:t,stack:null!=(e=this.args.stack)&&e})},t.prototype.OnSubmit=function(){return!this.isSubmitting()&&(this.isSubmitting(!0),app.api.post("dashboards/migrate.json",{}).then(function(t){return function(t){return app.flash.Success(app.tl("Your new dashboard is ready")),Lightbox.closeAll()}}()).finally(function(t){return function(){return t.isSubmitting(!1)}}(this)),!1)},t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:n,template:e}}.apply(e,s))&&(t.exports=i)},3836:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(164),n(2585),n(2584),n(1116)],void 0!==(i=function(t,e,n,s){var i;return i=function(){function e(e){null==e&&(e={}),this.OnNotifyTWEvent=a(this.OnNotifyTWEvent,this),this.OnClickToggleUserMetrics=a(this.OnClickToggleUserMetrics,this),this.OnClickJumpToProject=a(this.OnClickJumpToProject,this),this.subscriptions=[],this.jumpToProjectTippedContent=n,this.subscriptions.push(this.currentSection=t.pureComputed(function(t){return function(){return null==app.currentRoute().homePageTab?"":app.currentRoute().homePageTab}}())),this.baseUrl="#/home",this.userMetricsCollapsed=app.loggedInUser.preferences.dashboardUserMetricsCollapsed,this.newActivityCount=t.observable(0),this.subscriptions.push(this.sharedDashboard=app.shared.get("viewModel/dashboard")),this.subscriptions.push(this.sharedMetrics=app.shared.get("user-metrics")),this.subscriptions.push(this.unreadCommentsCount=t.computed(function(t){return function(){return null==t.sharedMetrics()?0:t.sharedMetrics().unreadComments()}}(this))),this.subscriptions.push(this.unreadMessagesCount=t.computed(function(t){return function(){return null==t.sharedMetrics()?0:t.sharedMetrics().unreadMessages()}}(this))),this.subscriptions.push(this.upcomingEventsCount=t.computed(function(t){return function(){return null==t.sharedMetrics()?0:t.sharedMetrics().upcomingEvents()}}(this))),this.subscriptions.push(this.showActvityIcon=t.computed(function(t){return function(){return t.newActivityCount()>0&&"activity"!==app.currentRoute().homePageTab}}(this))),this.subscriptions.push(this.activityTippedContent=t.computed(function(t){return function(){return 1===t.newActivityCount()?app.tl("[_s] unseen activity",1):app.tl("[_s] unseen activities",t.newActivityCount())}}(this))),this.subscriptions.push(this.userMetricsToggleText=t.pureComputed(function(t){return function(){return t.userMetricsCollapsed()?app.tl("View more metrics"):app.tl("View less metrics")}}(this))),this.subscriptions.push(this.projectTabIsSelected=t.pureComputed(function(t){return function(){return"projects"===t.currentSection()||app.isShowingQuickJump()}}(this))),this.tabs=[{id:"work",icon:"task",title:app.tl("My Work"),count:0,showCountIfEmpty:!1,showCount:!1,url:this.baseUrl+"/work"},{id:"projects",icon:"projects",title:app.tl("My Projects"),count:0,showCount:!1,url:this.baseUrl+"/projects",isSelected:this.projectTabIsSelected,showSymbol:!0,symbol:"chevron-right-solid",symbolPrompt:app.tl("Quick jump"),OnClick:function(t){return function(e,n){return null==n.target||(!n.target.classList.contains("w-tabs-list__item-symbol")||(t.OnClickJumpToProject(),!1))}}(this)},{id:"activity",icon:"activity",title:app.tl("Activity"),count:this.newActivityCount,showCount:this.showActvityIcon,showCountIfEmpty:!1,url:this.baseUrl+"/activity",tippedContent:this.activityTippedContent},{id:"dashboards",icon:"dashboard",title:app.tl("Dashboards"),count:0,showCountIfEmpty:!1,showCount:!1,url:this.baseUrl+"/dashboards",enabled:app.loggedInUser.isAccount},{id:"comments",icon:"comments-tw",title:app.tl("Unread Comments"),count:this.unreadCommentsCount,showCount:!0,showCountIfEmpty:!1,url:this.baseUrl+"/comments"},{id:"messages",icon:"messages-tw",title:app.tl("Unread Messages"),count:this.unreadMessagesCount,showCount:!0,showCountIfEmpty:!1,url:this.baseUrl+"/messages"},{id:"events",icon:"events",title:app.tl("Events"),showCount:!1,showCountIfEmpty:!1,url:this.baseUrl+"/events",enabled:app.loggedInUser.isAccount()||app.loggedInUser.permissions.canAccessCalendar()},{id:"welcome",icon:"welcome",title:app.tl("Welcome"),count:0,showCount:!1,url:this.baseUrl+"/welcome",enabled:app.loggedInUser.preferences.showWelcomeMat,showSymbol:!0,symbol:"close",symbolPrompt:app.tl("Click here to hide this page"),OnClick:function(t,e){return null==e.target||(!e.target.classList.contains("w-tabs-list__item-symbol")||(app.loggedInUser.preferences.showWelcomeMat(!1),app.loggedInUser.isAccount()?app.GoTo("home/work"):app.GoTo("home/activity"),!1))}}],this.quickLinksTabs=[{id:"projects",icon:"projects",title:app.tl("Projects"),count:0,showCount:!1,url:this.baseUrl+"/projects"}],this.subscriptions.push(app.currentRoute.subscribe(function(t){return function(e){if(null!=e.homePageTab&&"activity"===e.homePageTab)return t.newActivityCount(0)}}(this))),this.subscriptions.push(app.ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent)),app.InitOnShow(this)}return e.prototype.OnShow=function(){},e.prototype.OnClickJumpToProject=function(){app.isShowingQuickJump(!app.isShowingQuickJump())},e.prototype.OnClickToggleUserMetrics=function(){return this.userMetricsCollapsed(!this.userMetricsCollapsed())},e.prototype.OnNotifyTWEvent=function(t){var e,n;if("lightbox"!==(e=t.itemType)&&"savedFilter"!==e&&"event"!==e&&"calendarevent"!==e&&"person"!==e&&"company"!==e&&"userStatus"!==e&&"shortcut"!==e&&"dashboard"!==e&&(null==t.subType||"marked-read"!==t.subType))return("project"!==t.itemType||null==t.subType||"unstarred"!==(n=t.subType)&&"starred"!==n)&&("activity"!==app.currentRoute().homePageTab?this.newActivityCount(this.newActivityCount()+1):void 0)},e.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},e}(),{viewModel:i,template:e}}.apply(e,s))&&(t.exports=i)},3837:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(164),n(2586)],void 0!==(i=function(t,e){var n;return n=function(){function e(e){null==e&&(e={}),this.OnClickAddProject=a(this.OnClickAddProject,this),this.subscriptions=[],app.InitOnShow(this),this.dashboardViewMode=t.observable("dashboard"),app.featureFlip.check("newDashboard")()?null!=app.currentRoute().dashboardPageTab&&(app.loggedInUser.preferences.showWelcomeMat()&&null==app.cache.get("last-home-section")?app.GoTo("home/welcome"):null!=app.cache.get("last-home-section")?("today"===app.cache.get("last-home-section")&&app.cache.set("last-home-section","work"),app.GoTo("home/"+app.cache.get("last-home-section"))):app.GoTo("home/"+app.currentRoute().dashboardPageTab)):app.GoTo("dashboard/activity"),this.subscriptions.push(this.pageTitle=t.pureComputed(function(t){return function(){if(null==app.currentRoute().homePageTab)return"";switch(app.currentRoute().homePageTab){case"welcome":return app.tl("Welcome");case"work":return app.tl("My Work");case"dashboards":return app.tl("Dashboards");case"comments":return app.tl("Comments");case"messages":return app.tl("Messages");case"activity":return app.tl("Activity");case"events":return app.tl("Events");case"shortcuts":return app.tl("Shortcuts")}}}())),this.subscriptions.push(this.homeClassModifier=t.pureComputed(function(t){return function(){var t;return null==app.currentRoute().homePageTab?"":(t=["s-home--"+app.currentRoute().homePageTab],app.isShowingQuickJump()&&t.push("s-home--quick-jump-is-open"),t.join(" "))}}())),this.subscriptions.push(this.componentParameters=t.pureComputed(function(t){return function(){return null==app.currentRoute().homePageTab?{}:"dashboards"===app.currentRoute().homePageTab?{viewMode:t.dashboardViewMode}:{}}}(this))),this.subscriptions.push(this.componentName=t.pureComputed(function(t){return function(){return null==app.currentRoute().homePageTab?"":("activity"===app.currentRoute().homePageTab,"dashboards"===app.currentRoute().homePageTab?"section-home-dashboards":"work"===app.currentRoute().homePageTab?"section-home-today":"section-home-"+app.currentRoute().homePageTab)}}())),app.loggedInUser.preferences.showWelcomeMat()&&this.subscriptions.push(app.loggedInUser.preferences.showWelcomeMat.subscribe(function(t){return function(){return t.verifyHomeSection(app.currentRoute())}}(this))),this.subscriptions.push(app.currentRoute.subscribe(function(t){return function(e){if(app.featureFlip.check("newDashboard")())return t.verifyHomeSection(e),"home"===e.page&&null!=e.homePageTab?app.cache.set("last-home-section",e.homePageTab):void 0}}(this))),this.verifyHomeSection(app.currentRoute()),this.subscriptions.push(this.shared=app.shared.get("viewModel/dashboard")),this.shared(this),app.showNPSSurvey(),app.currentRoute.valueHasMutated()}return e.prototype.OnShow=function(){},e.prototype.OnClickAddProject=function(){return app.modal.Show("addOrEditProject",{})},e.prototype.verifyHomeSection=function(t){var e,n,s,i,a,o;if(app.featureFlip.check("newDashboard")())return n=(null!=(s=app.loggedInUser)?s.isAccount():void 0)?"home/work":"home/activity",null!=t.dashboardPageTab?(app.loggedInUser.preferences.showWelcomeMat()&&null==app.cache.get("last-home-section")&&(n="home/welcome"),app.hasher.replaceHash(n)):null==t.homePageTab||(e="welcome"===t.homePageTab&&!(null!=(i=app.loggedInUser)&&null!=(a=i.preferences)?a.showWelcomeMat():void 0),e&&app.hasher.replaceHash(n),o=moment(app.account.datesignedup()).startOf("day")>=moment("2018-12-01"),"welcome"===t.homePageTab||!app.loggedInUser.inOwnerCompany()||!1!==app.account.strictBranding()||app.loggedInUser.preferences.hasSeenHomeWelcomeModal()||o)?void 0:app.modal.Show("dashboardWalkover")},e.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},e}(),{viewModel:n,template:e}}.apply(e,s))&&(t.exports=i)},3860:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(164),n(2616),n(1116),n(1363),n(1015)],void 0!==(i=function(t,e,n,s,i){var o;return o=function(){function e(e){var o,r,l,c,p,d,u,h,m,f,g,x;null==e&&(e={}),this.getHeaderDate=a(this.getHeaderDate,this),this.getHeaderText=a(this.getHeaderText,this),this.requestUpdate=a(this.requestUpdate,this),this.checkForPendingUpdates=a(this.checkForPendingUpdates,this),this.GetActivityTimestamp=a(this.GetActivityTimestamp,this),this.isNewProject=a(this.isNewProject,this),this.isNewDateSection=a(this.isNewDateSection,this),this.isNewDate=a(this.isNewDate,this),this.OnNotifyTWEvent=a(this.OnNotifyTWEvent,this),this.subscriptions=[],this.params=e,this.pageSize=null!=(r=e.pageSize)?r:50,this.onlyStarred=null!=(l=e.onlyStarred)&&l,this.mode=null!=(c=e.mode)?c:"normal",this.userId=null!=(p=e.userId)?p:0,this.projectId=null!=(d=e.projectId)?d:0,this.showProjectHeaders=null==(u=e.showProjectHeaders)||u,this.showDateHeaders=null!=(h=e.showDateHeaders)&&h,this.index=null!=(m=e.index)?m:0,this.previousResultCount=0,this.pendingRequests=[],o=function(t){return function(e,n){var s;return null==n&&(n=!1),app.utility.EnsureObservable(null!=(s=t.params[e])?s:t.filters().parameters[e],n)}}(this),this.filterKey=null!=(f=e.filterKey)?f:"homeActivity",console.assert("homeActivity"===(g=this.filterKey)||"projectActivity"===g||"personActivity"===g||"companyActivity"===g),this.subscriptions.push(this.filters=i.getFilter(this.filterKey,this.projectId)),this.dateCode=o("dateCode"),this.dateCustomInterval=o("dateCustomInterval"),this.activityStartDate=o("activityStartDate"),this.activityEndDate=o("activityEndDate"),this.projectIds=o("projectIds"),this.userIds=o("userIds"),this.activityType=o("activityType"),this.itemType=o("itemType"),this.onlyStarredProjects=o("onlyStarredProjects"),this.hideObservedProjects=o("hideObservedProjects"),this.onlyProjectsWithExplicitMembership=o("onlyProjectsWithExplicitMembership"),this.companyIds=o(null!=o("projectCompanyIds")&&o("projectCompanyIds")()?"projectCompanyIds":"companyIds"),this.projectCategoryIds=o("projectCategoryIds"),this.filterTagIds=o(null!=o("projectTagIds")&&o("projectTagIds")()?"projectTagIds":"filterTagIds"),this.matchAllTags=o(null!=o("matchAllProjectTags")&&o("matchAllProjectTags")()?"matchAllProjectTags":"matchAllTags"),this.projectOwnerIds=o("projectOwnerIds"),this.projectHealth=o("projectHealth"),this.projectStatus=o("projectStatus"),this.source=o("source"),this.hasActiveFilter=this.filters().active,this.subscriptions.push(this.isUsingQuickAdd=t.pureComputed(function(t){return function(){return!!app.quickAddProject()}}())),this.subscriptions.push(this.shouldShowBlankState=t.pureComputed(function(t){return function(){var e;return"function"!=typeof(e=t.params).overallResultCount||!e.overallResultCount()||0===t.params.overallResultCount()}}(this))),this.subscriptions.push(this.hasFixedSecondaryNav=t.computed(function(t){return function(){return null!=app.currentRoute().dashboardPageTab&&app.hasFixedSecondaryNav()}}())),x=t.unwrap(this.projectId)>0?app.prefixApi("projects/"+t.unwrap(this.projectId)+"/latestactivity.json","API_PREFIX_V2","API_PREFIX_V2"):app.prefixApi("latestactivity.json","API_PREFIX_V2","API_PREFIX_V2"),this.data=new n(x,{ItemClass:s,pageSize:this.pageSize,pagingMode:"date"===this.mode?"lessThanLastId":"pageByPage",maxIdAPIParam:"maxId",updatesAtBottom:!1,callbackBeforeRender:function(t){return function(e){return t.params.overallResultCount&&t.params.overallResultCount(t.params.overallResultCount()-t.previousResultCount+e.length),e.forEach(function(e){var n;return e.actorName="",null!=e.userId&&parseInt(e.userId(),10)===parseInt(app.loggedInUser.id(),10)?e.actorName=app.tl("You"):e.actorName=e.userName(),n=t.getIconsForItem(e),e.itemName=n.itemName,e.itemColor=n.itemColor,e.itemType=n.itemType,e.actionName=n.actionName,e.actionColor=n.actionColor,e.actionType=n.actionType,e.formattedTitle=t.GetFormattedTitle(e)}),t.previousResultCount=e.length}}(this),filter:{generateFilterParams:function(n){return function(){var s;if(e={},e.showDeleted=!1,n.userId>0?e.userId=n.userId:e.userId=n.userIds().toString(),0===n.projectId&&(e.projectId=n.projectIds().toString()),e.activityTypes=null!=n.itemType?n.itemType().toString():"",null!=n.dateCode&&"anytime"!==n.dateCode())switch(n.dateCode()){case"custom":null!=n.activityStartDate()&&null!=n.activityEndDate()&&(e.startDate=n.activityStartDate().format("YYYYMMDD"),e.endDate=n.activityEndDate().format("YYYYMMDD"));break;default:s=app.utility.GetDatesFromRange(n.dateCode(),"YYYYMMDD",n.dateCustomInterval()),e.startDate=s.startDate,e.endDate=s.endDate}return null!=n.source&&"dashboard"===n.source()&&(e.dashboard=!0),t.unwrap(n.onlyStarredProjects)&&(e.onlyStarred=t.unwrap(n.onlyStarredProjects),e.starred=t.unwrap(n.onlyStarredProjects)),t.unwrap(n.hideObservedProjects)&&(e.hideObservedProjects=t.unwrap(n.hideObservedProjects)),t.unwrap(n.onlyProjectsWithExplicitMembership)&&(e.onlyProjectsWithExplicitMembership=t.unwrap(n.onlyProjectsWithExplicitMembership)),t.unwrap(n.companyIds)&&(e.companyIds=t.unwrap(n.companyIds)),t.unwrap(n.projectCategoryIds)&&(e.projectCategoryIds=t.unwrap(n.projectCategoryIds)),t.unwrap(n.filterTagIds)&&(e.projectTagIds=t.unwrap(n.filterTagIds)),t.unwrap(n.matchAllTags)&&(e.matchAllProjectTags=t.unwrap(n.matchAllTags)),t.unwrap(n.projectOwnerIds)&&(e.projectOwnerIds=t.unwrap(n.projectOwnerIds)),t.unwrap(n.projectHealth)&&(e.projectHealth=t.unwrap(n.projectHealth)),t.unwrap(n.projectStatus)&&(e.projectStatus=t.unwrap(n.projectStatus)),e}}(this)},sort:function(t){return function(t,e){var n,s;return n=new moment(t.dateTime()),s=new moment(e.dateTime()),n.isAfter(s)?-1:n.isBefore(s)?1:0}}(),onLoad:function(t){return function(){return t.pendingRequests=[]}}(this)}),this.subscriptions.push(this.blankSlateMsg=t.pureComputed(function(t){return function(){return t.hasActiveFilter()?app.tl("There is no activity matching your filter."):app.tl("There is no activity yet.")}}(this))),this.subscriptions.push(app.ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent.bind(this))),this.updateRelativeDate=function(t){return function(){var e,n,s,i,a;for(i=t.data.list(),a=[],n=0,s=i.length;n<s;n++)e=i[n],e.isToday()||e.isYesterday()?a.push(e.dateTime.valueHasMutated()):a.push(void 0);return a}}(this),app.pulse.listen({interval:15e3,key:"activity-list",callback:this.checkForPendingUpdates}),app.pulse.listen({interval:6e4,key:"global_",callback:this.updateRelativeDate})}return e.prototype.OnNotifyTWEvent=function(t){var e,n,s;if("lightbox"!==(n=t.itemType)&&"savedFilter"!==n)return e=null!=t.userId?t.userId/1:app.loggedInUser.id(),s=app.loggedInUser.id()===e,"date"===this.mode?"project"===t.itemType&&t.actionType===app.consts.ACTIONTYPE.DELETED?void this.data.Sync():this.requestUpdate(s):"project"===this.mode&&this.projectId>0&&t.projectId/1===this.projectId?this.requestUpdate(s):void 0},e.prototype.isNewDate=function(t){return!this.showDateHeaders&&(0===t||!this.data.list()[t].dateTime().isSame(this.data.list()[t-1].dateTime(),"day"))},e.prototype.isNewDateSection=function(t){return!!this.showDateHeaders&&(0===t||!this.data.list()[t].dateTime().isSame(this.data.list()[t-1].dateTime(),"day"))},e.prototype.isNewProject=function(t){return!!this.showProjectHeaders&&(0===t||this.data.list()[t].projectId()!==this.data.list()[t-1].projectId())},e.prototype.GetActivityTimestamp=function(t,e){var n,s,i,a,o;return null==e&&(e=null),null==(null!=t?t.dateTime:void 0)||null==("undefined"!=typeof app&&null!==app&&null!=(i=app.loggedInUser)?i.localization:void 0)?"":(s=t.dateTime().format("YYYY")===moment().format("YYYYMMDD")?"MMM DD":"MMM DD, YYYY",n="<span class='w-activity__time-marker'>"+t.dateTime().format(s)+"</span> ",o=t.dateTime().format(app.loggedInUser.localization.timeFormat()),a=!1,null!=e&&(a=this.isNewDate(e)),t.isToday()?(o=app.utility.GetPastRelativeTime(t.dateTime()),a?"<span class='w-activity__time-marker w-activity__time-marker--today'>"+app.tl("Today")+"</span> "+o:"<span class='w-activity__time-marker w-activity__time-marker--today w-activity__time-marker--empty'></span> "+o):t.isYesterday()?a?"<span class='w-activity__time-marker w-activity__time-marker--yesterday'>"+app.tl("Yesterday")+"</span> "+o:"<span class='w-activity__time-marker w-activity__time-marker--yesterday w-activity__time-marker--empty'></span> "+o:(a?n:"")+" "+o)},e.prototype.getIconsForItem=function(t){var e,n,s,i,a,o;return o=function(){switch(t.activityType()){case"new":case"reopened":case"newmessage":case"reply":case"added":case"completed":return"added";case"reacted":case"liked":return"reacted w-activity__action--reacted-"+t.reactionType();case"edited":case"deleted":return t.activityType();default:return"all"}}(),e=function(){switch(t.activityType()){case"edited":return"edit";case"deleted":return"delete";case"new":case"newmessage":case"reply":case"added":return"add";case"reopened":return"undo";case"completed":return"success";default:return""}}(),i=t.isComment()?"comment":"comment"===t.type()&&t.link().includes("messages/")?"reply":"billingInvoice"===t.type()?"billing":t.type(),s=app.utility.GetSVGName(i),n=null!=(a=app.consts.UICOLORS[i])?a:"",{itemName:s+"-regular",itemColor:n,itemType:o,actionName:e+"-solid",actionColor:"#ffffff",actionType:o}},e.prototype.GetFormattedTitle=function(t){var e,n,s;return e=app.utility.SafeHTML(t.link()),s=null!=(n=t.description())?n.trim():void 0,t.isComment()?"<a href='#/"+e+"'>"+app.utility.SafeHTML('"'+s+'"')+"</a>":"file"===t.type()?"<a href='#/"+e+"'>"+app.utility.SafeHTML(s)+" ("+app.utility.SafeHTML(t.publicInfo().replace("- 0 bytes",""))+")</a>":"<a href='#/"+e+"'>"+app.utility.SafeHTML(s)+"</a>"},e.prototype.checkForPendingUpdates=function(){if(this.pendingRequests.length&&!this.isUsingQuickAdd())return this.data.LoadUpdates()},e.prototype.requestUpdate=function(t){if(null==t&&(t=!1),this.pendingRequests.push(moment()),t)return this.checkForPendingUpdates()},e.prototype.getHeaderText=function(t){return this.getHeaderDate(t)},e.prototype.getHeaderDate=function(e){var n,s,i,a,o;return n=e.dateTime(),o="",moment().startOf("day").format("YYYY")!==n.format("YYYY")&&(o=", "+t.unwrap(n.format("YYYY"))),s=""+n.format("Do MMMM")+o,a=moment().startOf("day"),i=Math.floor(n.diff(a,"days",!0)),0===i?app.tl("Today [_s]",s):-1===i?app.tl("Yesterday [_s]",s):1===i?app.tl("Tomorrow [_s]",s):n.format("dddd")+" "+s},e.prototype.dispose=function(){app.pulse.forget({interval:6e4,key:"global_",callback:this.updateRelativeDate}),app.pulse.forget({interval:15e3,key:"activity-list",callback:this.checkForPendingUpdates}),this.subscriptions.forEach(function(t){return t.dispose()}),null!=this.data&&(this.data.dispose(),delete this.data)},e}(),{viewModel:o,template:e}}.apply(e,s))&&(t.exports=i)},3879:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(164),n(2646),n(1116),n(1189),n(1015),n(1128)],void 0!==(i=function(t,e,n,s,i,o){var r;return r=function(){function e(e){var r,l,c,p,d,u,h,m,f,g,x,y,b,k,v,w,T,I,O,_,C,j,D;null==e&&(e={}),this.MarkAllAsRead=a(this.MarkAllAsRead,this),this.GetFilterParams=a(this.GetFilterParams,this),this.getCommentClass=a(this.getCommentClass,this),this.getItemAsBreadcrumb=a(this.getItemAsBreadcrumb,this),this.getSectionHeader=a(this.getSectionHeader,this),this.isLastInBlock=a(this.isLastInBlock,this),this.isNewProject=a(this.isNewProject,this),this.isNewCommentableItem=a(this.isNewCommentableItem,this),this.isNewSection=a(this.isNewSection,this),this.OnNotifyTWEvent=a(this.OnNotifyTWEvent,this),this.subscriptions=[],this.useFilter=null==(c=e.useFilter)||c,this.listMode=null!=(p=e.listMode)?p:"expanded",this.filterKey=null!=(v=e.filterKey)?v:"itemComments",this.item=null!=(w=e.item)?w:null,this.itemType=null!=(T=e.itemType)?T:null,this.itemId=null!=(I=e.itemId)?I:null,this.projectId=null!=(O=e.projectId)?O:0,this.showTitle=null!=(_=e.showTitle)&&_,this.sectionTitle=null!=(C=e.sectionTitle)?C:app.tl("Comments"),this.isInlineList=null!=this.itemType&&null!=this.itemId&&!("project"===this.itemType),this.showBlankState=null!=(j=e.showBlankState)&&j,this.showCommentForm=null!=(d=e.showCommentForm)&&d,this.shouldShowHeaders=null!=(u=e.showHeaders)?u:!(null!=this.itemType&&null!=this.itemId),this.shouldShowBreadcrumb=null!=(h=e.showBreadcrumb)?h:!(null!=this.itemType&&null!=this.itemId),this.showProjectInBreadcrumb=null!=(m=e.showProjectInBreadcrumb)?m:!("project"===this.itemType),this.isQuickView=null!=(f=e.isQuickView)&&f,this.totalUnread=t.observable(0),this.showLastTen=t.observable(!1),this.blankSlateTitle=null!=(g=e.blankSlateTitle)?g:app.tl("No Comments"),this.blankSlateText=null!=(x=e.blankSlateText)?x:app.tl("There are currently no comments."),this.allowReplies=null!=(y=e.allowReplies)&&y,this.tmpComment={},this.isInlineList&&(this.tmpComment=new s(null,{projectId:t.unwrap(this.projectId),commentableId:t.unwrap(this.itemId),commentableType:t.unwrap(this.itemType),commentableItem:t.mapping.toJS(t.unwrap(this.item)),isEditing:!0})),this.inlineSortByOptions=t.observableArray([{id:"asc",text:app.tl("Date Ascending")},{id:"desc",text:app.tl("Date Descending")}]),this.sortByOptions=t.observableArray([{id:"date",text:app.tl("Date Posted")},{id:"type",text:app.tl("Comment Type")},{id:"user",text:app.tl("User Who Posted")},{id:"project",text:app.tl("Project Name")}]),t.isObservable(this.showCommentForm)||(this.showCommentForm=t.observable(this.showCommentForm)),t.isObservable(this.listMode)||(this.listMode=t.observable(this.listMode)),this.project=t.unwrap(this.projectId)>0?app.projectInfo.get(this.projectId):t.observable(null),l=function(t){return function(e){if(null!=e&&null!=app.loggedInUser)return e.isTemplate()&&!app.loggedInUser.permissions.canManageProjectTemplates()?(t.showCommentForm(!1),t.showBlankState=!0):void 0}}(this),l(this.project()),this.subscriptions.push(this.project.subscribe(l)),console.assert("allComments"===(b=this.filterKey)||"projectComments"===b||"homeComments"===b||"itemComments"===b),this.subscriptions.push(this.filters=i.getFilter(this.filterKey)),this.includesSort=this.filters().includesSort,this.sortBy=this.filters().parameters.sortBy,this.sortOrder=this.filters().parameters.sortOrder,this.sortByPreference=app.loggedInUser.preferences[this.filterKey+"SortBy"],this.sortOrderPreference=app.loggedInUser.preferences[this.filterKey+"SortOrder"],D=function(t){return function(){if(!t.includesSort())return t.sortBy(t.sortByPreference()),t.sortOrder(t.sortOrderPreference())}}(this),this.subscriptions.push(this.includesSort.subscribe(D)),this.subscriptions.push(this.sortBy.subscribe(this.sortByPreference)),this.subscriptions.push(this.sortOrder.subscribe(this.sortOrderPreference)),D(),this.filterUserIds=this.filters().parameters.filterUserIds,this.showArchived=this.filters().parameters.showArchived,this.dateCode=this.filters().parameters.dateCode,this.dateCustomInterval=this.filters().parameters.dateCustomInterval,this.startDate=this.filters().parameters.startDate,this.endDate=this.filters().parameters.endDate,this.showUnreadOnly=this.filters().parameters.showUnreadOnly,this.projectIds=this.filters().parameters.projectIds,this.commentType=this.filters().parameters.commentType,this.authorIds=null!=(k=e.authorIds)?k:this.filters().parameters.authorIds,this.notifiedUserIds="homeComments"===this.filterKey?t.observable([app.loggedInUser.id()]):this.filters().parameters.notifiedUserIds,this.filterStatus=this.filters().parameters.status,this.onlyStarredProjects=this.filters().parameters.onlyStarredProjects,this.hasActiveFilter=this.filters().active,this.commentStatus=e.commentStatus,this.projectCompanyIds=e.projectCompanyIds,this.projectCategoryIds=e.projectCategoryIds,this.projectTagIds=e.projectTagIds,this.matchAllProjectTags=e.matchAllProjectTags,this.projectOwnerIds=e.projectOwnerIds,this.projectHealth=e.projectHealth,this.projectStatus=e.projectStatus,this.includeArchivedProjects=e.includeArchivedProjects,this.showOnlyMyNotifications=e.showOnlyMyNotifications,this.publishedStartDate=e.publishedStartDate,this.publishedEndDate=e.publishedEndDate,this.unreadCommentsMineOnly=e.unreadCommentsMineOnly,null!=e.onlyStarredProjects&&(this.onlyStarredProjects=e.onlyStarredProjects),this.subscriptions.push(this.formattedStartDate=t.pureComputed(function(t){return function(){var e;switch(t.dateCode()){case"anytime":return"";case"custom":return null!=t.startDate()?t.startDate().format("YYYYMMDD"):"";default:return e=app.utility.GetDatesFromRange(t.dateCode(),"YYYYMMDD",t.dateCustomInterval()),e.startDate}}}(this))),this.subscriptions.push(this.formattedEndDate=t.pureComputed(function(t){return function(){var e;switch(t.dateCode()){case"anytime":return"";case"custom":return null!=t.endDate()?t.endDate().format("YYYYMMDD"):"";default:return e=app.utility.GetDatesFromRange(t.dateCode(),"YYYYMMDD",t.dateCustomInterval()),e.endDate}}}(this))),this.subscriptions.push(this.commentFormPosition=t.pureComputed(function(t){return function(){var e;return t.showCommentForm()&&(null!=(e=t.project())?e.isActive():void 0)?"desc"===t.sortOrder()?"top":"bottom":""}}(this))),this.clientSort=new o("everything-comments",{sortBy:this.isInlineList?"date":this.sortBy,sortOrder:this.sortOrder,sortOptions:this.isInlineList?[{id:"date"}]:this.sortByOptions}),"file"===this.itemType&&null!=this.item&&("function"==typeof(r=t.unwrap(this.item)).versionId?r.versionId():void 0)?this.url="v/2/fileversions/"+t.unwrap(this.item).versionId()+"/comments.json":this.url=null!=this.itemType&&null!=this.itemId?"v/2/"+this.itemType+"s/"+this.itemId+"/comments.json":"v/2/comments.json",this.data=new n(this.url,{listField:"comments",ItemClass:s,callbackBeforeRender:function(t){return function(e){var n;if(n=t.item,!t.isInlineList)return n?e.forEach(function(t){return t.commentableItem=n}):e.forEach(function(t){return t.commentableItem=t})}}(this),sort:this.clientSort.sort,filter:{generateFilterParams:this.GetFilterParams},onLoad:function(e){return function(n,s,i){if(e.isInlineList?e.totalUnread(t.utils.arrayFilter(e.data.list(),function(t){return 0===t.isRead()}).length):e.totalUnread(n.xhr.getResponseHeader("X-TotUnread")),!e.data.isLoading()&&null!=app.currentRoute().commentId&&-1===app.utility.FindIndexByKeyValue(e.data.list(),"id",app.currentRoute().commentId)&&e.data.hasMoreRecords())return e.data.LoadMore()}}(this)}),this.subscriptions.push(this.shared=app.shared.get("comments/"+this.filterKey)),this.shared(this),this.subscriptions.push(app.ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent)),app.InitOnShow(this)}return e.prototype.OnShow=function(){},e.prototype.OnNotifyTWEvent=function(t){var e,n,s,i,a,o,r,l,c,p,d,u,h,m,f,g,x,y,b;if(a=null!=(u=t.extraInfo)?u.data:void 0,t.itemId=t.itemId/1,"comments-all-read"===t.itemType){if(s=a.commentableId,i=a.commentableType,"project"===this.itemType){if((o=app.utility.FindIndexByKeyValue(this.data.list(),"id",s))>-1&&null!=this.data.list()[o].isRead)return this.data.list()[o].isRead(1)}else if(this.itemType===i&&this.itemId===s)return this.data.GetAllItems().forEach(function(t){return t.isRead(1)})}else if("comments"!==(h=t.itemType)&&"comment"!==h||null==t.subType||"marked-read"!==t.subType){if("comment"===t.itemType){if(null==t.subType||"reactions"!==t.subType)return t.actionType===app.consts.ACTIONTYPE.DELETED?this.data.DeleteItemById(t.itemId):this.data.LoadUpdates();for(m=this.data.list(),l=0,p=m.length;l<p;l++)if(e=m[l],e.id()/1===t.itemId)return e.reactions.counts.heart(t.extraData.counts.heart),e.reactions.counts.joy(t.extraData.counts.joy),e.reactions.counts.frown(t.extraData.counts.frown),e.reactions.counts.like(t.extraData.counts.like),e.reactions.counts.dislike(t.extraData.counts.dislike),void e.reactions.mine(t.extraData.mine)}else if("comment"===(f=t.itemType)||"comments"===f||"task_comment"===f||"file_comment"===f||"notebook_comment"===f||"link_comment"===f||"milestone_comment"===f||"notebookComments"===f||null!=t.subType&&"comment"===t.subType){if(n="tasks"===this.itemType?"todo_items":this.itemType,r=this.itemId/1,(r===t.itemId||0===r||("function"==typeof t.commentableId?t.commentableId():void 0)===this.itemId&&("function"==typeof t.commentableType?t.commentableType():void 0)===n||null!=(null!=(g=t.extraInfo)?g.objectType:void 0)&&null!=(null!=(x=t.extraInfo)?x.objectId:void 0)&&t.extraInfo.objectType===n&&t.extraInfo.objectId/1===r)&&((y=t.actionType)===app.consts.ACTIONTYPE.ADDED||y===app.consts.ACTIONTYPE.UPDATED)){for(b=this.data.list().filter(function(e){return t.itemId===e.commentableId()}),c=0,d=b.length;c<d;c++)e=b[c],e.isRead(1);return this.data.LoadUpdates()}if("properties"===t.subType)return this.data.LoadUpdates();if(t.actionType===app.consts.ACTIONTYPE.DELETED)return this.data.DeleteItemById(t.itemId);if(t.actionType===app.consts.ACTIONTYPE.UPDATED&&("comments"===app.currentRoute().everythingPageTab||"comments"===app.currentRoute().projectTab||"comments"===app.currentRoute().reportingPageTab))return this.data.LoadUpdates()}}else if((o=app.utility.FindIndexByKeyValue(this.data.list(),"id",t.itemId))>-1&&null!=this.data.list()[o].isRead)return this.totalUnread(this.totalUnread()-1),this.data.list()[o].isRead(1)},e.prototype.isNewSection=function(t){var e,n,s;if("project"===(s=this.sortBy())||"type"===s)return!1;if(!this.shouldShowHeaders)return!1;if(!this.data.list().length)return!1;if(0===t)return!0;switch(e=this.data.list()[t],n=this.data.list()[t-1],this.sortBy()){case"type":return e.commentableType()!==n.commentableType();case"date":return e.datetime().format("YYYYMMDD")!==n.datetime().format("YYYYMMDD");case"user":return e.author.id()!==n.author.id();case"project":return e.projectId()!==n.projectId();default:return!1}},e.prototype.isNewCommentableItem=function(t){var e,n;return"type"===this.sortBy()&&(0===t||(e=this.data.list()[t],n=this.data.list()[t-1],e.commentableType()+"_"+e.commentableId()!=n.commentableType()+"_"+n.commentableId()))},e.prototype.isNewProject=function(t){var e,n;return"project"===this.sortBy()&&(!!this.shouldShowHeaders&&(!!this.data.list().length&&(n=this.data.list()[t].projectId(),e=n!==this.lastProjectId,this.lastProjectId=n,!(0!==t&&!e)||void 0)))},e.prototype.isLastInBlock=function(t){return null==this.data.list()[t+1]||this.isNewSection(t+1)},e.prototype.getSectionHeader=function(t){var e;switch(e=this.data.list()[t],this.sortBy()){case"type":return app.utility.SafeHTML(app.utility.GetSVGName(e.commentableType)+" "+this.getTranslatedItemType(e.commentableType()));case"date":return app.utility.GetRelativeDate(e.datetime());case"user":return app.utility.SafeHTML(e.author.fullName());case"project":return app.utility.SafeHTML(e.project.name());default:return""}},e.prototype.getItemAsBreadcrumb=function(t){var e,n;return e=this.data.list()[t],n=this.getTranslatedItemType(e.commentableType),n.length&&(n+=": "),[{icon:app.utility.GetSVGName(e.commentableType),iconColor:"inherit",link:e.commentLink,linkText:""+n+app.utility.SafeHTML(e.itemName())+" "+(this.showProjectInBreadcrumb?"<span class='ml--medium'>("+app.utility.SafeHTML(e.project.name())+")</span>":""),onClick:e.QuickViewItem}]},e.prototype.getTranslatedItemType=function(e){switch(e=t.unwrap(e)){case"tasks":return app.tl("Task");case"files":return app.tl("File");case"notebooks":return app.tl("Notebook");case"milestones":return app.tl("Milestone");case"links":return app.tl("Link");default:return""}},e.prototype.getCommentClass=function(t){var e;return e=[],this.isLastInBlock(t)?e.push("is-last"):this.isNewSection(t)&&e.push("is-first"),e.push("w-comment--"+this.listMode()),e},e.prototype.GetFilterParams=function(){var e,n,s,i,a,o,r,l,c;return e={},e.getLikes=1,e.getEmoji=!0,e.getReactions=!0,e.orderBy=this.sortBy(),e.sortOrder=this.sortOrder(),(null!=(n=t.unwrap(this.authorIds))?n.length:void 0)&&(e.userId=t.unwrap(this.authorIds).join(",")),this.useFilter&&!this.isInlineList&&(e.objectType=this.commentType().length?this.commentType():"all",null!=this.notifiedUserIds()&&this.notifiedUserIds().length&&(e.notifiedUserId=this.notifiedUserIds().join(",")),e.status=(null!=(s=t.unwrap(this.commentStatus))?s.length:void 0)?t.unwrap(this.commentStatus):this.filterStatus(),e.projectId=null!=this.projectIds&&this.projectIds().length?this.projectIds().join(","):this.projectId,e.publishedStartDate=this.formattedStartDate(),e.publishedEndDate=this.formattedEndDate(),("function"==typeof this.onlyStarredProjects?this.onlyStarredProjects():void 0)&&(e.onlyStarredProjects=this.onlyStarredProjects())),this.useFilter||((null!=(i=t.unwrap(this.commentStatus))?i.length:void 0)&&(e.status=t.unwrap(this.commentStatus)),(null!=(a=t.unwrap(this.projectCompanyIds))?a.length:void 0)&&(e.projectCompanyIds=t.unwrap(this.projectCompanyIds).toString()),(null!=(o=t.unwrap(this.projectCategoryIds))?o.length:void 0)&&(e.projectCategoryIds=t.unwrap(this.projectCategoryIds).toString()),(null!=(r=t.unwrap(this.projectTagIds))?r.length:void 0)&&(e.projectTagIds=t.unwrap(this.projectTagIds).toString(),e.matchAllProjectTags=t.unwrap(this.matchAllProjectTags)),(null!=(l=t.unwrap(this.projectOwnerIds))?l.length:void 0)&&(e.projectOwnerIds=t.unwrap(this.projectOwnerIds).toString()),(null!=(c=t.unwrap(this.projectHealth))?c.length:void 0)&&"-1"!==t.unwrap(this.projectHealth).toString()&&(e.projectHealth=t.unwrap(this.projectHealth).toString(),e.projectHealths=t.unwrap(this.projectHealth).toString()),null!=t.unwrap(this.projectStatus)&&(e.projectStatus=t.unwrap(this.projectStatus),e.projectStatuses=t.unwrap(this.projectStatus)),null!=t.unwrap(this.onlyStarredProjects)&&(e.onlyStarredProjects=t.unwrap(this.onlyStarredProjects)),null!=t.unwrap(this.includeArchivedProjects)&&(e.includeArchivedProjects=t.unwrap(this.includeArchivedProjects)),t.unwrap(this.unreadCommentsMineOnly)&&(e.notifiedUserId=app.loggedInUser.id()),null!=t.unwrap(this.publishedStartDate)&&(e.publishedStartDate=t.unwrap(this.publishedStartDate)),null!=t.unwrap(this.publishedEndDate)&&(e.publishedEndDate=t.unwrap(this.publishedEndDate))),e},e.prototype.MarkAllAsRead=function(){var e,n;return n=app.tl("Confirm"),e=this.hasActiveFilter()?app.tl("Are you sure you want to mark all matching comments as read?"):app.tl("Are you sure you want to mark all comments as read?"),app.modal.Show("confirm",{title:n,text:e,callback:function(e){return function(n){var s,i,a,o,r,l;if(!n.wasCancelled)return i=e.GetFilterParams(),r="comments/markread.json",null!=e.itemType&&null!=e.itemId&&("file"===e.itemType&&null!=t.unwrap(e.item)?(l=t.unwrap(t.unwrap(e.item).versionId),r="fileversions/"+l+"/comments/markread.json"):r=e.itemType+"s/"+e.itemId+"/comments/markread.json"),s=e.data.GetAllItems(),a=s.map(function(t){return{comment:t,isRead:t.isRead()}}),o=e.totalUnread(),app.api.put(r,i).then(function(n){var i;return app.flash.Success(app.tl("Comments marked as read")),s.forEach(function(t){return t.isRead(1)}),e.totalUnread(0),i="LoadUpdates","unread"===t.unwrap(e.filterStatus)&&(i="Reload"),e.data[i]().then(function(){var t,s,i,a;return a={eventTime:new Date,actionType:app.consts.ACTIONTYPE.UPDATED,itemType:"comments-all-read",extraInfo:{data:{commentableType:e.itemType,commentableId:e.itemId}}},null!=(null!=n&&null!=(t=n.response)?t.linkedCardId:void 0)&&(a.extraInfo.data.cardId=n.response.linkedCardId),null!=(null!=n&&null!=(s=n.response)?s.linkedColumnId:void 0)&&(a.extraInfo.data.columnId=n.response.linkedColumnId),null!=(null!=n&&null!=(i=n.response)?i.linkedColumnName:void 0)&&(a.extraInfo.data.columnName=n.response.linkedColumnName),app.ko.postbox.publish("allTWEvents",a)})}).catch(function(){return a.forEach(function(e){return e.comment.isRead(t.unwrap(e.isRead))}),e.totalUnread(o)})}}(this)}),!1},e.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},e}(),{viewModel:r,template:e}}.apply(e,s))&&(t.exports=i)},3894:function(t,e,n){(function(s,i){var a,o,r=function(t,e){return function(){return t.apply(e,arguments)}},l=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},c={}.hasOwnProperty;a=[n(164),n(1116),n(1158),n(1185),n(1015),n(1187),n(2667),n(2666),n(2665)],void 0!==(o=function(t,e,n,a,o,p,d,u,h){var m;return m=function(){function n(n){var i,d,m,f;null==n&&(n={}),this.GetFiltersSummary=r(this.GetFiltersSummary,this),this.MovesMetric=r(this.MovesMetric,this),this.isFullWidthMetric=r(this.isFullWidthMetric,this),this.shouldDisplayMetric=r(this.shouldDisplayMetric,this),this.subscriptions=[],this.panelOptionsTippedContent=u,this.panelFiltersTippedContent=h,this.availableMetrics=["billable-time-donut","billed-time-donut","milestones-list","risks-list","tasks-bar","tasks-breakdown","tasks-burndown","milestones-bar","risks-bar","projects-digest","projects-distribution","activity-distribution"],app.featureFlip.check("projecttimebudgets")()&&this.availableMetrics.push("budgets-bar"),this.dataLoaded=t.observable(!1),i={time:"totals",health:"0,1,2,3",tasks:"today,late,started,upcoming,active,nodate",milestones:"late,upcoming,active,today",events:"upcoming",billing:"active,completed",risks:"open,closed,pending"},this.panels=app.utility.EnsureObservable(null!=(d=n.panels)?d:[],!0),this.isShared=null!=(m=n.isShared)&&m,this.subscriptions.push(this.metricGroups=t.computed(function(t){return function(){var e,n,s,i,a,o,r;for(n=[],e=[],o=null,r=t.panels(),s=0,i=r.length;s<i;s++)a=r[s],null!=o&&t.isFullWidthMetric(o)===t.isFullWidthMetric(a)||(e.length&&n.push(e),e=[]),e.push(a),o=a;return n.push(e),n}}(this))),this.timeCounts=t.observable(null),this.tasksCounts=t.observable(null),this.milestonesCounts=t.observable(null),this.eventsCounts=t.observable(null),this.billingCounts=t.observable(null),this.risksCounts=t.observable(null),this.healthCounts=t.observable(null),this.filterKey=null!=(f=n.filterKey)?f:"homeDashboard",this.shouldAutoSave="homeDashboard"===this.filterKey,this.subscriptions.push(this.filters=o.getFilter(this.filterKey)),this.searchTerm=this.filters().parameters.searchTerm,this.projectOwnerIds=this.filters().parameters.projectOwnerIds,this.projectHealth=this.filters().parameters.projectHealth,"all"===this.filters().parameters.projectStatus&&this.filters().parameters.projectStatus("active"),this.projectStatus=this.filters().parameters.projectStatus,this.includeArchivedProjects=this.filters().parameters.includeArchivedProjects,this.companyIds=this.filters().parameters.companyIds,this.projectCategoryIds=this.filters().parameters.categoryIds,this.filterTagIds=this.filters().parameters.filterTagIds,this.matchAllTags=this.filters().parameters.matchAllTags,this.onlyStarredProjects=this.filters().parameters.onlyStarredProjects,this.taskAssigneeType=this.filters().parameters.taskAssigneeType,this.taskAssigneeUserId=this.filters().parameters.taskAssigneeUserId,this.milestoneAssigneeType=this.filters().parameters.milestoneAssigneeType,this.milestoneAssigneeUserId=this.filters().parameters.milestoneAssigneeUserId,this.timeLoggedByType=this.filters().parameters.timeLoggedByType,this.timeLoggedByUserId=this.filters().parameters.timeLoggedByUserId,this.milestonesListUserType=this.filters().parameters.milestonesListUserType,this.milestonesListUserId=this.filters().parameters.milestonesListUserId,this.eventsListUserType=this.filters().parameters.eventsListUserType,this.eventsListUserId=this.filters().parameters.eventsListUserId,this.timeDateCode=this.filters().parameters.timeDateCode,this.milestonesListDateInterval=this.filters().parameters.milestonesListDateInterval,this.eventsListDateInterval=this.filters().parameters.eventsListDateInterval,this.eventsListAttendingOnly=this.filters().parameters.eventsListAttendingOnly,this.projectUpdatesListDateInterval=this.filters().parameters.projectUpdatesListDateInterval,this.visiblePanels=this.filters().parameters.visiblePanels,this.displayProjectList=this.filters().parameters.displayProjectList,this.shouldAutoSave&&["timeDateCode","milestonesListDateInterval","eventsListDateInterval","eventsListAttendingOnly","projectUpdatesListDateInterval"].forEach(function(t){return function(e){return t.subscriptions.push(t[""+e].subscribe(function(){if(0!==t.filters().id())return t.filters().Save()}))}}(this)),this.subscriptions.push(this.visiblePanels.subscribe(function(t){return function(){return app.utility.reflowHighCharts()}}())),new a(s(".s-dashboard__section-content")[0],this.resizeEvent),this.resizeEvent(),this.filteredConfig=function(t){return function(){var e;return e={},l.call(t.visiblePanels(),"tasks-bar")>=0&&(e.tasks=i.tasks),l.call(t.visiblePanels(),"milestones-bar")>=0&&(e.milestones=i.milestones),l.call(t.visiblePanels(),"risks-bar")>=0&&(e.risks=i.risks),l.call(t.visiblePanels(),"project-health-bar")>=0&&(e.health=i.health),(l.call(t.visiblePanels(),"billable-time-donut")>=0||l.call(t.visiblePanels(),"billed-time-donut")>=0)&&(e.time=i.time),e}}(this),n={timeRange:"thisweek"},app.utility.AddSparseFields(n,this.filteredConfig()),this.data=new e("projects/api/v3/summary.json",{params:n,filter:{generateFilterParams:function(t){return function(){return n={},null!=t.companyIds()&&t.companyIds().length&&(n.projectCompanyIds=t.companyIds().toString()),null!=t.projectCategoryIds()&&t.projectCategoryIds().length&&(n.projectCategoryIds=t.projectCategoryIds().toString()),null!=t.filterTagIds()&&t.filterTagIds().length>0&&(n.projectTagIds=t.filterTagIds().join(","),n.matchAllProjectTags=t.matchAllTags()),("function"==typeof t.projectOwnerIds?t.projectOwnerIds():void 0)&&(n.projectOwnerIds=t.projectOwnerIds().toString()),("function"==typeof t.projectHealth?t.projectHealth():void 0)&&"-1"!==t.projectHealth().toString()&&""!==t.projectHealth().toString()&&(n.projectHealth=t.projectHealth().toString()),("function"==typeof t.projectStatus?t.projectStatus():void 0)&&(n.projectStatus=t.projectStatus()),("function"==typeof t.includeArchivedProjects?t.includeArchivedProjects():void 0)&&(n.includeArchivedProjects=t.includeArchivedProjects()),("function"==typeof t.taskAssigneeType?t.taskAssigneeType():void 0)&&"all"===t.taskAssigneeType()?n.taskAssigneeUserIds="0,-1":("function"==typeof t.taskAssigneeType?t.taskAssigneeType():void 0)&&"me"===t.taskAssigneeType()?n.taskAssigneeUserIds=app.loggedInUser.id():("function"==typeof t.taskAssigneeUserId?t.taskAssigneeUserId():void 0)&&(0===t.taskAssigneeUserId().length?n.taskAssigneeUserIds=app.loggedInUser.id():n.taskAssigneeUserIds=t.taskAssigneeUserId().toString()),("function"==typeof t.milestoneAssigneeType?t.milestoneAssigneeType():void 0)&&"all"===t.milestoneAssigneeType()?n.milestoneAssigneeUserIds="":("function"==typeof t.milestoneAssigneeType?t.milestoneAssigneeType():void 0)&&"me"===t.milestoneAssigneeType()?n.milestoneAssigneeUserIds=app.loggedInUser.id():("function"==typeof t.milestoneAssigneeUserId?t.milestoneAssigneeUserId():void 0)&&(n.milestoneAssigneeUserIds=t.milestoneAssigneeUserId().toString()),("function"==typeof t.timeLoggedByType?t.timeLoggedByType():void 0)&&"all"===t.timeLoggedByType()?n.timeLoggedByUserIds="":("function"==typeof t.timeLoggedByType?t.timeLoggedByType():void 0)&&"me"===t.timeLoggedByType()?n.timeLoggedByUserIds=app.loggedInUser.id():("function"==typeof t.timeLoggedByUserId?t.timeLoggedByUserId():void 0)&&(n.timeLoggedByUserIds=t.timeLoggedByUserId().toString()),n.timeRange=t.timeDateCode(),n.onlyStarredProjects=t.onlyStarredProjects(),n.useStartDatesForTodaysTasks=app.loggedInUser.preferences.useStartDatesForTodaysTasks(),n}}(this)},loadNow:!1,onLoad:function(e){return function(n){var s,a,o;a=n.response;for(s in a)c.call(a,s)&&(o=a[s],null!=e[s+"Counts"]&&t.isObservable(e[s+"Counts"])&&(null!=o.all?e[s+"Counts"](o.all.totals):null!=o.totals?e[s+"Counts"](o.totals):null!=o.everyone?e[s+"Counts"](o.everyone):e[s+"Counts"](o)));for(s in i)c.call(i,s)&&(o=i[s],null!=e[s+"Counts"]&&t.isObservable(e[s+"Counts"])&&null==e[s+"Counts"]()&&e[s+"Counts"]({}));return e.dataLoaded(!0)}}(this)}),this.subscriptions.push(this.taskCountsTitle=t.computed(function(t){return function(){var e;return"all"===t.taskAssigneeType()?app.tl("All Active Tasks"):"me"===t.taskAssigneeType()||0===t.taskAssigneeUserId().length?app.tl("My Active Tasks"):(e=app.utility.GetFilterInfo(t.filters(),"users",t.taskAssigneeUserId()),e.length?app.tl("Active Tasks For [_s]",e):app.tl("Active Tasks"))}}(this))),this.subscriptions.push(this.milestoneCountsTitle=t.computed(function(t){return function(){var e;return"all"===t.milestoneAssigneeType()?app.tl("All Milestones"):"me"===t.milestoneAssigneeType()||0===t.milestoneAssigneeUserId().length?app.tl("My Milestones"):(e=app.utility.GetFilterInfo(t.filters(),"users",t.milestoneAssigneeUserId()),e.length?app.tl("Milestones For [_s]",e):app.tl("Milestones"))}}(this))),this.subscriptions.push(this.milestonesListTitle=t.computed(function(t){return function(){var e;return"all"===t.milestonesListUserType()?app.tl("All Upcoming Milestones"):"me"===t.milestonesListUserType()||0===t.milestonesListUserId().length?app.tl("My Upcoming Milestones"):(e=app.utility.GetFilterInfo(t.filters(),"users",t.milestonesListUserId()),e.length?app.tl("Upcoming Milestones For [_s]",e):app.tl("Upcoming Milestones"))}}(this))),this.subscriptions.push(this.eventsListTitle=t.computed(function(t){return function(){var e;return"all"===t.eventsListUserType()?app.tl("All Upcoming Events"):"me"===t.eventsListUserType()||0===t.eventsListUserId().length?app.tl("My Upcoming Events"):(e=app.utility.GetFilterInfo(t.filters(),"users",t.eventsListUserId()),e.length?app.tl("Upcoming Events For [_s]",e):app.tl("Upcoming Events"))}}(this))),this.subscriptions.push(this.billedTimeTitle=t.computed(function(t){return function(){var e;return"all"===t.timeLoggedByType()?app.tl("All Billed Time"):"me"===t.timeLoggedByType()||0===t.timeLoggedByUserId().length?app.tl("My Billed Time"):(e=app.utility.GetFilterInfo(t.filters(),"users",t.timeLoggedByUserId()),e.length?app.tl("Billed Time For [_s]",e):app.tl("Billed Time"))}}(this))),this.subscriptions.push(this.billableTimeTitle=t.computed(function(t){return function(){var e;return"all"===t.timeLoggedByType()?app.tl("All Logged Time"):"me"===t.timeLoggedByType()||0===t.timeLoggedByUserId().length?app.tl("My Logged Time"):(e=app.utility.GetFilterInfo(t.filters(),"users",t.timeLoggedByUserId()),e.length?app.tl("Logged Time For [_s]",e):app.tl("Logged Time"))}}(this))),p.addDrake("dashboardMetrics",{revertOnSpill:!0,removeOnSpill:!1,isContainer:function(t){return t.classList.contains("remove-metric")},moves:function(t,e,n,s){return!!t.classList.contains("w-metric__header-handle")||n.classList.contains("w-metric__header-handle")},accepts:function(t,e,n,s){return!0},dragulaEvents:{cloned:function(t){return function(t,e,n){}}()},afterDrop:function(t){return function(e){var n,s,i,a,o,r,l,c;return l=e.target,c=e.targetIndex/1,s=(null!=(r=l.dataset.groupIndex)?r:0)/1,i=t.metricGroups()[s],a=-1,c>0?a=i[e.targetIndex-1].id():0===s?a=0:(o=t.metricGroups()[s-1],a=o[o.length-1].id()),n={positionAfter:a},app.api.put("dashboards/panels/"+e.item.id()+"/reposition.json",n).then(function(t){return e.item.displayOrder(t.response.displayOrder/1)})}}(this)}),app.InitOnShow(this)}return n.prototype.OnShow=function(){},n.prototype.shouldDisplayMetric=function(t){var e;return!t.isDeleted()&&!!("projects-distribution"!==(e=t.type())&&"activity-distribution"!==e||app.account.isEnterprise())},n.prototype.isFullWidthMetric=function(t){return!!app.account.isEnterprise()&&(!!t.meta.alwaysFullWidth()||t.settings.fullwidth())},n.prototype.resizeEvent=function(){return app.utility.reflowHighCharts()},n.prototype.MovesMetric=function(t,e,n,s){return i(n).hasClass("w-metric__header-handle")},n.prototype.GetFiltersSummary=function(t){if(null!=t)return app.utility.GetDashboardFilters(t)},n.prototype.dispose=function(){p.removeDrake("dashboardMetrics"),this.subscriptions.forEach(function(t){return t.dispose()})},n}(),{viewModel:m,template:d}}.apply(e,a))&&(t.exports=o)}).call(e,n(245),n(245))},3902:function(t,e,n){(function(s){var i,a,o=function(t,e){return function(){return t.apply(e,arguments)}};i=[n(2675),n(1174),n(1137),n(1360),n(1361),n(1126),n(1278),n(1153),n(1015)],void 0!==(a=function(t,e,n,i,a,r,l,c,p){var d;return d=function(){function t(t){var s,p,d,u,h;null==t&&(t={}),this.GetAvailableFilterTypes=o(this.GetAvailableFilterTypes,this),this.GetAvailableDataSources=o(this.GetAvailableDataSources,this),this.MovesFilter=o(this.MovesFilter,this),this.shouldDisplaySection=o(this.shouldDisplaySection,this),this.OnDropFilter=o(this.OnDropFilter,this),this.OnClickToggleFilters=o(this.OnClickToggleFilters,this),this.subscriptions=[],this.dashboard=null!=(s=t.dashboard)?s:null,this.panel=null!=(p=t.panel)?p:null,this.isGlobal=null==this.panel,h=null!=(d=null!=(u=this.panel)?u.settings:void 0)?d:this.dashboard.settings,this.projectOwnerIds=h.projectOwnerIds,this.includeDeletedUsers=h.includeDeletedUsers,this.projectHealth=h.projectHealth,this.projectStatus=h.projectStatus,this.includeArchivedProjects=h.includeArchivedProjects,this.companyIds=h.companyIds,this.categoryIds=h.categoryIds,this.includeSubCategories=h.includeSubCategories,this.filterTagIds=h.filterTagIds,this.matchAllTags=h.matchAllTags,this.companyIds=h.companyIds,this.onlyStarredProjects=h.onlyStarredProjects,this.projectStatusOptions=app.projectStatusOptions.slice().splice(0,6),this.filterSectionsCollapsed=ko.observable(app.cache.get("dashboard-filters-collapsed",!1)),this.filterSections=this.GetAvailableFilterTypes(),this.dataSources=this.GetAvailableDataSources(),this.subscriptions.push(this.companyDataSource=new e({selectedCompanyIds:this.companyIds})),this.subscriptions.push(this.tagDataSource=new n({selectedTagIds:this.filterTagIds,globalTagsOnly:!0})),this.subscriptions.push(this.boardColumnDataSource=new i({selectedBoardColumnIds:ko.observableArray([]),boardId:app.currentRoute().itemId,boardType:"project"})),this.subscriptions.push(this.projectOwnerDataSource=new r({showAnyone:!1,selectedUserIds:this.projectOwnerIds,itemType:"projectowner",includeDeletedUsers:this.includeDeletedUsers,includeUsersWithoutProjects:!0})),this.subscriptions.push(this.projectHealthDataSource=new l({selectedHealth:this.projectHealth})),this.subscriptions.push(this.categoryDataSource=new a({selectedCategoryIds:this.categoryIds,categoryType:"projects",includeAllCategory:!1})),this.boardColumnDataSource.GetAllData(),this.subscriptions.push(this.categories=c.noSpecialCategories(c.getCategories("projects",0))),this.subscriptions.push(this.hasSubCategories=ko.computed(function(t){return function(){var e,n,s,i,a,o,r,l,p,d,u,h,m,f,g;if(null==t.categoryIds())return!1;if(t.categoryIds()===["0"])return!1;for(g=[],u=t.categoryIds(),a=0,l=u.length;a<l;a++)if(s=u[a],null!=(i=c.getCategory(t.categories(),s))&&(null!=(h=i.children)?h.length:void 0))for(m=i.children,o=0,p=m.length;o<p;o++)for(e=m[o],g.push(e.id),f=e.children,r=0,d=f.length;r<d;r++)n=f[r],g.push(n.id);return!!g.length||void 0}}(this))),this.subscriptions.push(app.ko.postbox.subscribe("savedFilter-cleared",function(t){return function(e){e.section,t.key}}(this))),app.InitOnShow(this)}return t.prototype.OnClickToggleFilters=function(){return this.filterSectionsCollapsed(!this.filterSectionsCollapsed()),app.cache.set("dashboard-filters-collapsed",this.filterSectionsCollapsed())},t.prototype.OnDropFilter=function(t){return this.sections(t.targetItems())},t.prototype.shouldDisplaySection=function(t){var e;switch(t.type){case"panels":return!1;case"health":case"owners":return app.featureFlip.check("projectupdates",{unwrap:!0});case"tags":if(!app.account.tagsEnabled())return!1;break;case"projectStatus":return"person"===(e=app.currentRoute().page)||"company"===e||"active"===app.currentRoute().projectsPageTab;case"options":if(null!=app.currentRoute().projectsPageTab&&"starred"===app.currentRoute().projectsPageTab)return!1}return!0},t.prototype.MovesFilter=function(t,e,n,i){return s(n).hasClass("filter-section__header-handle")},t.prototype.GetAvailableDataSources=function(){return null!=this.panel?this.panel.GetDataSources():this.dashboard.GetDataSources()},t.prototype.GetAvailableFilterTypes=function(){return null!=this.panel?this.panel.GetFilterSections():this.dashboard.GetFilterSections()},t.prototype.dispose=function(){var t,e,n,s;for(n=this.subscriptions,t=0,e=n.length;t<e;t++)s=n[t],s.dispose()},t}(),{viewModel:d,template:t}}.apply(e,i))&&(t.exports=a)}).call(e,n(245))},3905:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(164),n(2678)],void 0!==(i=function(t,e){var n;return n=function(){function e(e){null==e&&(e={}),this.dispose=a(this.dispose,this),this.OnClickEditEvent=a(this.OnClickEditEvent,this),this.subscriptions=[],this.subscriptions.push(this.shared=app.shared.get("event/details")),this.subscriptions.push(this.event=t.pureComputed(function(e){return function(){return null==e.shared()?null:t.unwrap(e.shared().event)}}(this))),app.InitOnShow(this)}return e.prototype.OnShow=function(){},e.prototype.OnClickEditEvent=function(){var e,n,s;return n=function(e){return function(n){if(!n.wasCancelled)return null!=n.event?(t.unwrap(e.event).title(n.event.title),t.unwrap(e.event).description(n.event.description),t.unwrap(e.event).where(n.event.where),t.unwrap(e.event).privacy.type(n.event.privacy.type)):void 0}}(this),e=null!=(null!=(s=this.event())?s.sourceEvent:void 0)?this.event().sourceEvent:this.event(),app.modal.Show("addOrEditEvent",{event:e,onCloseCallBack:n})},e.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},e}(),{viewModel:n,template:e}}.apply(e,s))&&(t.exports=i)},3906:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(164),n(2679),n(1246)],void 0!==(i=function(t,e,n){var s;return s=function(){function e(e){var n;null==e&&(e={}),this.dispose=a(this.dispose,this),this.OnNotifyTWEvent=a(this.OnNotifyTWEvent,this),this.subscriptions=[],this.isQuickView=null!=(n=e.isQuickView)&&n,this.event=t.isObservable(e.event)?e.event:t.observable(e.event),this.qvTitle=t.isObservable(e.title)?e.title:t.observable(e.title),this.subscriptions.push(this.title=t.pureComputed(function(e){return function(){return t.unwrap(e.event().title)}}(this))),this.subscriptions.push(this.title.subscribe(function(t){return function(e){return t.qvTitle(app.utility.SafeHTML(e))}}(this))),this.subscriptions.push(this.description=t.pureComputed(function(e){return function(){return t.unwrap(e.event().description)}}(this))),this.descriptionHTML=t.observable(this.description()).extend({linkify:!0}),this.subscriptions.push(this.description.subscribe(this.descriptionHTML)),this.subscriptions.push(this.attendeesArray=t.pureComputed(function(e){return function(){return t.unwrap(e.event().attendeesArray)}}(this))),this.subscriptions.push(this.reminders=t.pureComputed(function(e){return function(){return t.unwrap(e.event().reminders)}}(this))),this.subscriptions.push(this.privacyType=t.pureComputed(function(e){return function(){return t.unwrap(e.event().privacy.type)}}(this))),this.subscriptions.push(this.eventOwnerAvatarUrl=t.pureComputed(function(e){return function(){return t.unwrap(e.event().owner.avatarURL)}}(this))),this.subscriptions.push(this.isPersonalEvent=t.pureComputed(function(e){return function(){return"personal"===t.unwrap(e.privacyType)}}(this))),this.subscriptions.push(this.createdBy=t.pureComputed(function(t){return function(){return t.event().owner.firstName()+" "+t.event().owner.lastName()}}(this))),this.subscriptions.push(this.privacyText=t.pureComputed(function(e){return function(){return e.isPersonalEvent()?app.tl("This is a personal event only visible to you"):"company"===t.unwrap(e.privacyType)?app.tl("This event is only visible to members of [_s]",app.loggedInUser.companyName()):"project"===t.unwrap(e.privacyType)?""!==e.event().privacy.projectName()?app.tl("This event is only visible to members of the project [_s]",e.event().privacy.projectName()):app.tl("This event is visible to members of all projects [_s] is currently on",e.createdBy):void 0}}(this))),this.subscriptions.push(this.timeFormat=t.pureComputed(function(t){return function(){var t;return t=app.loggedInUser.localization.timeFormat(),"HH:MM"===t.toUpperCase()?"HH:mm":"h:mmA"}}())),this.dateFormat=app.loggedInUser.localization.dateFormat().toUpperCase(),this.subscriptions.push(this.eventTimes=t.pureComputed(function(t){return function(){var e;return e="<span class='block mr--small'>"+t.event().start().format("dddd Do MMMM")+"</span>",t.event().isMultiday()?t.event().realAllDay?(t.event().start().clone().startOf("day").isSame(t.event().realEnd().clone().startOf("day"))||(e=e+" -&nbsp;</span><span class='block'>"+t.event().realEnd().format("dddd Do MMMM")),e+="</span><span class='block'>",e=e+"&nbsp;"+app.tl("All Day"),e+="</span>"):(e=e+",</span><span class='block'>"+t.event().start().format(t.timeFormat())+" -&nbsp;</span><span class='block'>",e=""+e+t.event().realEnd().format("dddd Do MMMM")+",</span><span class='block'>"+t.event().realEnd().format(t.timeFormat())+"</span>"):t.event().realAllDay?(e+="</span><span class='block'>",e=e+"&nbsp;"+app.tl("All Day"),e+="</span>"):e=e+"<span class='block'>("+t.event().start().format(t.timeFormat())+" - "+t.event().realEnd().format(t.timeFormat())+")</span>",e}}(this))),this.subscriptions.push(this.location=t.pureComputed(function(t){return function(){var e;return e=app.utility.SafeHTML(t.event().where()),e.length?e="<span class='block'>"+e.split(",").join(",</span><span class='block'>")+"</span>":app.tl("Not Specified")}}(this))),this.tabs=[{name:app.tl("Event Details"),code:"details"},{name:app.tl("Attendees"),code:"attendees"}],this.subscriptions.push(this.hasAttendees=t.pureComputed(function(t){return function(){return t.attendeesArray().length}}(this))),this.subscriptions.push(this.hasReminders=t.pureComputed(function(t){return function(){return t.reminders().length}}(this))),this.subscriptions.push(this.reminderInfo=t.pureComputed(function(t){return function(){var e,n,s,i,a,o;for(n=function(t){switch(t.type()){case"email":switch(t.period()){case"minutes":return app.tl("Send email [_s] minutes before",t.before());case"hours":return app.tl("Send email [_s] hours before",t.before());case"days":return app.tl("Send email [_s] days before",t.before());case"weeks":return app.tl("Send email [_s] weeks before",t.before())}break;case"push":switch(t.period()){case"minutes":return app.tl("Send push notification [_s] minutes before",t.before());case"hours":return app.tl("Send push notification [_s] hours before",t.before());case"days":return app.tl("Send push notification [_s] days before",t.before());case"weeks":return app.tl("Send push notification [_s] weeks before",t.before())}break;case"sms":switch(t.period()){case"minutes":return app.tl("Send SMS [_s] minutes before",t.before());case"hours":return app.tl("Send SMS [_s] hours before",t.before());case"days":return app.tl("Send SMS [_s] days before",t.before());case"weeks":return app.tl("Send SMS [_s] weeks before",t.before())}}},e=[],o=t.reminders(),i=0,a=o.length;i<a;i++)s=o[i],e.push(n(s));return e.join("; ")}}(this))),this.subscriptions.push(this.repeatInfo=t.pureComputed(function(t){return function(){var e,n,s,i;if(null==(null!=(i=t.event().repeat)?i.frequency:void 0))return"";switch(s=t.event().repeat,s.frequency()){case"daily":return s.ends()?app.tl("Daily until [_s]",moment(s.endDate()).userFormat("date")):app.tl("Daily");case"weekly":return s.ends()?app.tl("Weekly until [_s]",moment(s.endDate()).userFormat("date")):app.tl("Weekly");case"monthly":return s.ends()?app.tl("Monthly until [_s]",moment(s.endDate()).userFormat("date")):app.tl("Monthly");case"yearly":return s.ends()?app.tl("Yearly until [_s]",moment(s.endDate()).userFormat("date")):app.tl("Yearly");case"weekdays":return s.ends()?app.tl("Every weekday until [_s]",moment(s.endDate()).userFormat("date")):app.tl("Every weekday");case"selecteddays":return e=function(t){var e,n,s,i,a;for(e=[],s=t.split(",").map(Number),i=0,a=s.length;i<a;i++)n=s[i],e.push(function(){switch(n){case 1:return app.tl("Sunday");case 2:return app.tl("Monday");case 3:return app.tl("Tuesday");case 4:return app.tl("Wednesday");case 5:return app.tl("Thursday");case 6:return app.tl("Friday");case 7:return app.tl("Saturday")}}());return e.join(", ")},s.ends()?app.tl("On selected days [_s] until [_s]","("+e(s.selectedDaysList())+")",moment(s.endDate()).userFormat("date")):app.tl("On selected days [_s]","("+e(s.selectedDaysList())+")");case"every2weeks":case"every3weeks":case"every4weeks":case"every5weeks":case"every6weeks":return n=s.frequency().replace("every","").replace("weeks",""),s.ends()?app.tl("Every [_s] weeks until [_s]",n,moment(s.endDate()).userFormat("date")):app.tl("Every [_s] weeks",n);case"every2months":case"every3months":case"every4months":case"every6months":return n=s.frequency().replace("every","").replace("months",""),s.ends()?app.tl("Every [_s] months until [_s]",n,moment(s.endDate()).userFormat("date")):app.tl("Every [_s] months",n);default:return""}}}(this))),this.tabs.selCode=t.observable("details"),this.subscriptions.push(this.cssClass=t.pureComputed(function(t){return function(){var n;return n=e.cssClass||"",t.isQuickView&&(n+="w-quick-view__content w-quick-view__content--has-tabs"),n}}(this))),this.subscriptions.push(app.ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent)),this.subscriptions.push(this.shared=app.shared.get("event/details")),this.shared(this),app.InitOnShow(this)}return e.prototype.OnShow=function(){},e.prototype.OnNotifyTWEvent=function(e){var s;s=t.unwrap(this.event().id),"event"===e.itemType&&e.itemId===s&&(e.actionType===app.consts.ACTIONTYPE.UPDATED?app.api.get("calendarevents/"+s+".json").then(function(t){return function(e){var s,i;if(s=null!=(i=e.response)?i.event:void 0)return t.event(new n(s))}}(this)):e.actionType===app.consts.ACTIONTYPE.DELETED&&app.quickView.close({type:"event",id:s}))},e.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},e}(),{viewModel:s,template:e}}.apply(e,s))&&(t.exports=i)},3907:function(t,e,n){(function(s){var i,a,o=function(t,e){return function(){return t.apply(e,arguments)}};i=[n(2680),n(1157),n(1707),n(1126),n(1136),n(1015)],void 0!==(a=function(t,e,n,i,a,r){var l;return l=function(){function t(t){var s;null==t&&(t={}),this.dispose=o(this.dispose,this),this.MovesFilter=o(this.MovesFilter,this),this.shouldDisplaySection=o(this.shouldDisplaySection,this),this.OnDropFilter=o(this.OnDropFilter,this),this.subscriptions=[],this.key=t.key,console.assert("homeEvents"===(s=this.key)||"personEvents"===s),this.subscriptions.push(this.filters=r.getFilter(this.key)),this.filterText=this.filters().parameters.filterText,this.eventTypeId=this.filters().parameters.eventTypeId,this.projectId=this.filters().parameters.projectId,this.userId=this.filters().parameters.userId,this.attendingOnly=this.filters().parameters.attendingOnly,this.sections=this.filters().sections,this.dateCode=this.filters().parameters.dateCode,this.dateCustomInterval=this.filters().parameters.dateCustomInterval,this.startDate=this.filters().parameters.startDate,this.endDate=this.filters().parameters.endDate,this.subscriptions.push(this.userId.subscribe(function(t){return function(e){if(-1===e[0])return t.userId([app.loggedInUser.id()])}}(this))),this.dateCustomInterval.extend({rateLimit:{method:"notifyWhenChangesStop",timeout:300}}).extend({minMaxNumericValues:{max:365,min:-1825}}),this.subscriptions.push(this.dateCode.subscribe(function(t){return function(e){if("custom"!==e&&(t.startDate(null),t.endDate(null)),"within"!==e&&null!=t.dateCustomInterval())return t.dateCustomInterval(1)}}(this))),this.subscriptions.push(this.userOptionsText=ko.pureComputed(function(t){return function(){return t.userId().length>1?app.tl("Only show events these users are attending"):app.tl("Only show events this user is attending")}}(this))),this.subscriptions.push(this.shouldShowAdditionalUserOptions=ko.pureComputed(function(t){return function(){return t.userId().length>0}}(this))),this.subscriptions.push(this.userOptionsHint=ko.pureComputed(function(t){return function(){return t.userId().length>1?app.tl("Selecting this will exclude events that these users have created, but aren't attending"):app.tl("Selecting this will exclude events that this user has created, but isn't attending.")}}(this))),this.subscriptions.push(this.dateDataSource=new e({dateOptions:this.dateOptions,startDate:this.startDate,endDate:this.endDate,dateCode:this.dateCode})),this.subscriptions.push(this.eventTypeDataSource=new n({selectedEventTypeIds:this.eventTypeId})),this.subscriptions.push(this.projectDataSource=new a({selectedProjectIds:this.projectId})),this.subscriptions.push(this.userDataSource=new i({selectedUserIds:this.userId,itemType:"calendar"})),this.searchFieldValue=ko.observable(this.filterText()),this.searchTerm=ko.observable(this.filterText()).extend({rateLimit:{method:"notifyWhenChangesStop",timeout:300}}),this.subscriptions.push(this.searchTerm.subscribe(this.filterText)),this.subscriptions.push(this.filterText.subscribe(this.searchFieldValue,null,"reset")),app.InitOnShow(this)}return t.prototype.dateOptions=[{id:"yesterday",text:app.tl("Yesterday")},{id:"today",text:app.tl("Today")},{id:"tomorrow",text:app.tl("Tomorrow")},{id:"thisweek",text:app.tl("This week")},{id:"custom",text:app.tl("Custom date range")},{id:"within",text:app.tl("Within the next [_s] days","_")},{id:"withinprev",text:app.tl("Within the previous [_s] days","_")}],t.prototype.OnDropFilter=function(t){return this.sections(t.targetItems())},t.prototype.shouldDisplaySection=function(t){switch(t.type){case"user":if("personEvents"===this.key)return!1}return!0},t.prototype.MovesFilter=function(t,e,n,i){return s(n).hasClass("filter-section__header-handle")},t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:l,template:t}}.apply(e,i))&&(t.exports=a)}).call(e,n(245))},3908:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(164),n(2681),n(1246),n(1116),n(14),n(1015),n(1128)],void 0!==(i=function(t,e,n,s,i,o,r){var l;return l=function(){function e(e){var l,c,p,d,u,h,m;null==e&&(e={}),this.getHeaderEventName=a(this.getHeaderEventName,this),this.getHeaderEventType=a(this.getHeaderEventType,this),this.getHeaderProjectName=a(this.getHeaderProjectName,this),this.getHeaderDate=a(this.getHeaderDate,this),this.getHeaderText=a(this.getHeaderText,this),this.isNewProject=a(this.isNewProject,this),this.isNewSection=a(this.isNewSection,this),this.checkIfLastInBlock=a(this.checkIfLastInBlock,this),this.OnClickEditEvent=a(this.OnClickEditEvent,this),this.OnClickAddEvent=a(this.OnClickAddEvent,this),this.OnNotifyTWEvent=a(this.OnNotifyTWEvent,this),this.OnExportEventsToPDF=a(this.OnExportEventsToPDF,this),this.subscriptions=[],this.params=e,this.restructuredDates=t.observableArray([]),this.isQuickView=null!=(l=this.params.isQuickView)&&l,this.dateFormat=app.loggedInUser.localization.dateFormat().toUpperCase(),this.numberOfRecords=t.observable(0),this.filterKey=null!=(c=this.params.filterKey)?c:"homeEvents",this.subscriptions.push(this.filters=o.getFilter(this.filterKey)),this.filterText=this.filters().parameters.filterText,this.eventTypeId=this.filters().parameters.eventTypeId,this.attendingOnly=app.utility.EnsureObservable(null!=(p=e.attendingOnly)?p:this.filters().parameters.attendingOnly),this.hasActiveFilter=this.filters().active,this.dateCode=this.filters().parameters.dateCode,this.dateCustomInterval=this.filters().parameters.dateCustomInterval,this.startDate=app.utility.EnsureObservable(null!=(d=e.startDate)?d:this.filters().parameters.startDate),this.endDate=app.utility.EnsureObservable(null!=(u=e.endDate)?u:this.filters().parameters.endDate),this.sortBy=app.utility.EnsureObservable(null!=(h=e.sortBy)?h:this.filters().parameters.sortBy),this.sortOrder=app.utility.EnsureObservable(null!=(m=e.sortOrder)?m:this.filters().parameters.sortOrder),this.projectCompanyIds=e.projectCompanyIds,this.projectCategoryIds=e.projectCategoryIds,this.projectTagIds=e.projectTagIds,this.matchAllProjectTags=e.matchAllProjectTags,this.projectOwnerIds=e.projectOwnerIds,this.projectHealth=e.projectHealth,this.projectStatus=e.projectStatus,this.onlyStarredProjects=e.onlyStarredProjects,this.onlyProjectEvents=e.onlyProjectEvents,this.sortByOptions=t.observableArray([{id:"date",text:app.tl("Date")},{id:"name",text:app.tl("Event Name")},{id:"type",text:app.tl("Event Type")},{id:"project",text:app.tl("Project")}]),this.clientSort=new r("section-events-list-new",{sortBy:this.sortBy,sortOrder:this.sortOrder,sortOptions:this.sortByOptions}),this.projectId=null!=e.projectId?e.projectId:this.filters().parameters.projectId,this.projectId=app.utility.EnsureObservable(this.projectId),this.userId=null!=e.userId?e.userId:this.filters().parameters.userId,this.userId=app.utility.EnsureObservable(this.userId),this.subscriptions.push(this.hasFixedHeaders=t.pureComputed(function(t){return function(){return!t.isQuickView&&(null==app.currentRoute().personId&&app.hasFixedSecondaryNav())}}(this))),this.subscriptions.push(this.formattedStartDate=t.pureComputed(function(e){return function(){var n,s,a;if(null!=(null!=(s=e.params)?s.startDate:void 0)&&(a=t.unwrap(e.params.startDate),i.isMoment(a)))return a.format("YYYYMMDD");switch(e.dateCode()){case"anytime":return"";case"custom":return null!=e.startDate()?e.startDate().format("YYYYMMDD"):"";default:return n=app.utility.GetDatesFromRange(e.dateCode(),"YYYYMMDD",e.dateCustomInterval()),n.startDate}}}(this))),this.subscriptions.push(this.formattedEndDate=t.pureComputed(function(e){return function(){var n,s,a;if(null!=(null!=(a=e.params)?a.endDate:void 0)&&(s=t.unwrap(e.params.endDate),i.isMoment(s)))return s.format("YYYYMMDD");switch(e.dateCode()){case"anytime":return"";case"custom":return null!=e.endDate()?e.endDate().format("YYYYMMDD"):"";default:return n=app.utility.GetDatesFromRange(e.dateCode(),"YYYYMMDD",e.dateCustomInterval()),n.endDate}}}(this))),this.subscriptions.push(app.ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent)),this.data=new s("calendarevents.json",{listField:"events",ItemClass:n,updatesAtBottom:t.observable(!0),pageSize:50,sort:this.clientSort.sort,filter:{generateFilterParams:function(n){return function(){var s,i,a,o,r;return e={},e.getEmoji=!0,null!=n.formattedStartDate()&&(e.startDate=n.formattedStartDate()),null!=n.formattedEndDate()&&(e.endDate=n.formattedEndDate()),e.userId=n.userId().toString(),e.projectId=t.unwrap(n.projectId).toString(),e.attendingOnly=n.attendingOnly(),n.isQuickView||(e.sortBy=n.sortBy(),e.sortOrder=n.sortOrder(),e.filterText=n.filterText(),e.eventTypeId=n.eventTypeId().toString()),(null!=(a=t.unwrap(n.projectCompanyIds))?a.length:void 0)&&(e.projectCompanyIds=t.unwrap(n.projectCompanyIds).toString()),(null!=(o=t.unwrap(n.projectCategoryIds))?o.length:void 0)&&(e.projectCategoryIds=t.unwrap(n.projectCategoryIds).toString()),(null!=(r=t.unwrap(n.projectTagIds))?r.length:void 0)&&(e.projectTagIds=t.unwrap(n.projectTagIds).toString(),e.matchAllProjectTags=t.unwrap(n.matchAllProjectTags)),(null!=(s=t.unwrap(n.projectOwnerIds))?s.length:void 0)&&(e.projectOwnerIds=t.unwrap(n.projectOwnerIds).toString()),(null!=(i=t.unwrap(n.projectHealth))?i.length:void 0)&&"-1"!==t.unwrap(n.projectHealth).toString()&&(e.projectHealths=t.unwrap(n.projectHealth).toString()),null!=t.unwrap(n.projectStatus)&&(e.projectStatuses=t.unwrap(n.projectStatus)),null!=t.unwrap(n.onlyStarredProjects)&&(e.onlyStarredProjects=t.unwrap(n.onlyStarredProjects)),null!=t.unwrap(n.onlyProjectEvents)&&(e.onlyProjectEvents=t.unwrap(n.onlyProjectEvents)),e}}(this)},onLoad:function(e){return function(){var s,a,o,r,l,c,p,d,u;for(s=[],p=e.data.list(),r=0,l=p.length;r<l;r++)if(o=p[r],o.isMultiday())for(o.showEndTime(!1),u=0,o.start().isBefore(i(),"day")&&o.start(i().startOf("day")),d=i(e.formattedEndDate(),"YYYYMMDD").endOf("day"),o.realEnd().isAfter(d,"day")&&o.realEnd(d),a=i(o.realEnd().format("YYYY-MM-DD")).diff(i(o.start().format("YYYY-MM-DD")),"days");u<=a;)c=new n(t.toJS(o)),c.start().add(u,"days"),c.sourceEvent=o,0===u&&c.showEndTime(!1),u>0&&(c.start().startOf("day"),c.showStartTime(!1),u<a&&(c.realEnd(c.start().clone().endOf("day")),c.showEndTime(!1),c.allDay(!0))),s.push(c),u++;else s.push(o);return s.sort(function(t,e){return t.start().format("YYYY-MM-DD")===e.start().format("YYYY-MM-DD")?t.allDay()===e.allDay()?t.start().format("x")-e.start().format("x"):t.allDay()&&!e.allDay()?-1:1:t.start().format("x")-e.start().format("x")}),e.restructuredDates([]),e.restructuredDates(s),e.numberOfRecords(e.data.totalRecords())}}(this),loadNow:!1}),this.subscriptions.push(this.blankSlateTitle=t.pureComputed(function(t){return function(){return t.hasActiveFilter()?app.tl("No upcoming events"):app.tl("No events yet")}}(this))),this.subscriptions.push(this.blankSlateMsg=t.pureComputed(function(t){return function(){return t.hasActiveFilter()?app.tl("There are no events in this date range."):app.tl("There are no events yet.")}}(this))),this.subscriptions.push(this.shared=app.shared.get("events/list")),this.shared(this),app.InitOnShow(this)}return e.prototype.OnShow=function(){},e.prototype.OnExportEventsToPDF=function(){var t;return t=document.getElementById("downloadEventReportFormPDF"),t.submit()},e.prototype.OnNotifyTWEvent=function(t){var e;"event"!==t.itemType||(e=t.actionType)!==app.consts.ACTIONTYPE.UPDATED&&e!==app.consts.ACTIONTYPE.DELETED&&e!==app.consts.ACTIONTYPE.ADDED||this.data.LoadUpdates()},e.prototype.OnClickAddEvent=function(){var e;app.modal.Show("addOrEditEvent",{userId:t.unwrap(null!=(e=this.params.userId)?e:0)})},e.prototype.OnClickEditEvent=function(t){return app.modal.Show("addOrEditEvent",{event:t})},e.prototype.checkIfLastInBlock=function(t,e){var n;return n=this.restructuredDates().length,e===n-1||this.restructuredDates()[e].start().format("YYYYMMDD")!==this.restructuredDates()[e+1].start().format("YYYYMMDD")},e.prototype.isNewSection=function(e){var n,s;return"project"!==this.sortBy()&&(0===e||(n=this.restructuredDates()[e],s=this.restructuredDates()[e-1],"type"===this.sortBy()?t.unwrap(n.type.id)!==t.unwrap(s.type.id):"name"===this.sortBy()?t.unwrap(n.title).charAt(0).toUpperCase()!==t.unwrap(s.title).charAt(0).toUpperCase():n.start().format("YYYYMMDD")!==s.start().format("YYYYMMDD")))},e.prototype.isNewProject=function(e){var n,s;return"project"===this.sortBy()&&(0===e||(n=this.restructuredDates()[e],s=this.restructuredDates()[e-1],"project"===n.privacy.type()&&"project"===s.privacy.type()?t.unwrap(n.privacy.projectId)!==t.unwrap(s.privacy.projectId):"project"===n.privacy.type()||"project"===s.privacy.type()))},e.prototype.getHeaderText=function(t){return"project"===this.sortBy()?this.getHeaderProjectName(t):"type"===this.sortBy()?this.getHeaderEventType(t):"name"===this.sortBy()?this.getHeaderEventName(t):this.getHeaderDate(t)},e.prototype.getHeaderDate=function(e){var n,s,a,o,r;return r=e.start(),o="",i().startOf("day").format("YYYY")!==r.format("YYYY")&&(o=", "+t.unwrap(r.format("YYYY"))),n=""+r.format("Do MMMM")+o,a=i().startOf("day"),s=Math.floor(r.diff(a,"days",!0)),0===s?app.tl("Today [_s]",n):-1===s?app.tl("Yesterday [_s]",n):1===s?app.tl("Tomorrow [_s]",n):r.format("dddd")+" "+n},e.prototype.getHeaderProjectName=function(e){return null==e.privacy.projectId?app.tl("No Project"):"0"===t.unwrap(e.privacy.projectId)?app.tl("Multiple Projects"):e.privacy.projectName},e.prototype.getHeaderEventType=function(e){return null==e.type.name?app.tl("No Event Type"):t.unwrap(e.type.name)},e.prototype.getHeaderEventName=function(e){return t.unwrap(e.title).charAt(0).toUpperCase()+"."},e}(),{viewModel:l,template:e}}.apply(e,s))&&(t.exports=i)},3938:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(164),n(2715)],void 0!==(i=function(t,e){var n;return n=function(){function e(e){null==e&&(e={}),this.dispose=a(this.dispose,this),this.subscriptions=[],this.subscriptions.push(this.shared=app.shared.get("quickview/help")),this.subscriptions.push(this.url=t.pureComputed(function(e){return function(){return null==e.shared()?null:t.unwrap(e.shared().url)}}(this))),app.InitOnShow(this)}return e.prototype.OnShow=function(){},e.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},e}(),{viewModel:n,template:e}}.apply(e,s))&&(t.exports=i)},3939:function(t,e,n){var s,i;s=[n(2716)],void 0!==(i=function(t){var e;return e=function(){function t(t){null==t&&(t={}),this.subscriptions=[],this.doc=t.doc,null==this.showSidebar&&(this.showSidebar=!1),this.docs={"project-overview":"https://support.teamwork.com/projects/overview/viewing-a-project-summary","project-tasks":"https://support.teamwork.com/projects/getting-started/adding-tasks-via-the-tasks-area","choose-later":"https://support.teamwork.com/projects/settings-administrator-only/using-choose-later-in-task-list-templates","creating-task-list":"https://support.teamwork.com/projects/getting-started/creating-a-task-list","adding-task":"https://support.teamwork.com/projects/getting-started/adding-tasks-via-the-tasks-area",commenting:"https://support.teamwork.com/projects/collaboration/commenting-on-items","add-project":"https://support.teamwork.com/projects/getting-started/adding-a-project","add-milestone":"https://support.teamwork.com/projects/milestones/adding-a-milestone","link-milestone":"https://support.teamwork.com/projects/milestones/attaching-a-task-list-to-a-milestone"},this.url=this.docs[this.doc],this.showSidebar||(this.url+="?internal=true"),this.subscriptions.push(this.shared=app.shared.get("quickview/help")),this.shared(this),app.InitOnShow(this)}return t.prototype.OnShow=function(){},t.prototype.dispose=function(){null!=this.subscriptions&&this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:e,template:t}}.apply(e,s))&&(t.exports=i)},3940:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}},o=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};s=[n(164),n(2717),n(1015),n(1118),n(1116)],void 0!==(i=function(t,e,n,s,i){var r;return r=function(){function e(e){var r,l;null==e&&(e={}),this.OnClickRSSFeed=a(this.OnClickRSSFeed,this),this.OnClickAddProject=a(this.OnClickAddProject,this),this.OnNotifyTWEvent=a(this.OnNotifyTWEvent,this),this.subscriptions=[],this.sortByOptions=t.observableArray([{id:"date",text:app.tl("Date")},{id:"project",text:app.tl("Project")}]),this.listModeOptions=[{html:'<i class="fa fa-list"></i>',value:"collapsed",alt:app.tl("Collapsed View")},{html:'<i class="fa fa-bars"></i>',value:"list",alt:app.tl("List View")}],this.listMode=t.observable("list"),this.overallResultCount=t.observable(0),this.filterKey="homeActivity",this.subscriptions.push(this.filters=n.getFilter(this.filterKey)),this.includesSort=this.filters().includesSort,this.sortBy=this.filters().parameters.sortBy,this.sortOrder=this.filters().parameters.sortOrder,this.sortByPreference=app.loggedInUser.preferences[this.filterKey+"SortBy"],this.sortOrderPreference=app.loggedInUser.preferences[this.filterKey+"SortOrder"],this.onlyStarredProjects=this.filters().parameters.onlyStarredProjects,this.hideObservedProjects=this.filters().parameters.hideObservedProjects,this.onlyProjectsWithExplicitMembership=this.filters().parameters.onlyProjectsWithExplicitMembership,r=function(t){return function(){if(!t.includesSort())return t.sortBy(t.sortByPreference()),t.sortOrder(t.sortOrderPreference())}}(this),this.subscriptions.push(this.includesSort.subscribe(r)),this.subscriptions.push(this.sortBy.subscribe(this.sortByPreference)),this.subscriptions.push(this.sortOrder.subscribe(this.sortOrderPreference)),r(),this.filterText=this.filters().parameters.filterText,this.projectId=this.filters().parameters.projectId,this.userId=this.filters().parameters.userId,this.projectIds=this.filters().parameters.projectIds,this.hasActiveFilter=this.filters().active,this.lastProjectRendered=t.observable(!1),e={},e.orderby="lastActivityDate",e.orderMode="DESC",e.getAll=!1,e.userId=app.loggedInUser.id(),this.shouldLoadProjects=t.observable(!1),l=app.prefixApi("projects.json?dataset=activity","API_PREFIX_V2","API_PREFIX_CF"),this.data=new i(l,{ItemClass:s,pageSize:10,updatesAtBottom:t.observable(!1),params:e,loadNow:!1,filter:{generateFilterParams:function(t){return function(){return t.shouldLoadProjects()?(e={hideObservedProjects:t.hideObservedProjects(),onlyProjectsWithExplicitMembership:t.onlyProjectsWithExplicitMembership()},t.onlyStarredProjects()?e.status="starred":e.status="active",e):-1}}(this)},sort:function(t){return function(t,e){var n,s;return n=new moment(t.lastChangedOn()),s=new moment(e.lastChangedOn()),n.isAfter(s)?-1:n.isBefore(s)?1:0}}()}),"project"===t.unwrap(this.sortBy)&&(this.shouldLoadProjects(!0),this.data.Load()),this.subscriptions.push(this.filteredProjects=t.computed(function(t){return function(){return null!=t.data==!1?[]:0===t.projectIds().length?t.data.list():t.data.list().filter(function(e){var n;return n=e.id(),o.call(t.projectIds(),n)>=0})}}(this))),this.subscriptions.push(this.sortBy.subscribe(function(t){return function(e){return"project"===e?(t.shouldLoadProjects(!0),t.data.Load()):t.shouldLoadProjects(!1)}}(this))),this.subscriptions.push(t.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent)),app.InitOnShow(this)}return e.prototype.OnShow=function(){},e.prototype.OnNotifyTWEvent=function(e){if("lightbox"!==e.itemType)return"project"===e.itemType&&e.actionType===app.consts.ACTIONTYPE.DELETED?void this.data.Sync():"project"===t.unwrap(this.sortBy)?this.data.LoadUpdates():void 0},e.prototype.OnClickAddProject=function(){app.modal.Show("addOrEditProject",{})},e.prototype.OnClickRSSFeed=function(){window.open("./?action=getActivtyRSS&projectId=0")},e.prototype.dispose=function(){null!=this.subscriptions&&this.subscriptions.forEach(function(t){return t.dispose()}),clearInterval(this.autoUpdateDatesInterval),this.data.dispose(),delete this.data},e}(),{viewModel:r,template:e}}.apply(e,s))&&(t.exports=i)},3941:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(164),n(2718),n(1015)],void 0!==(i=function(t,e,n){var s;return s=function(){function e(e){null==e&&(e={}),this.OnClickShareFilter=a(this.OnClickShareFilter,this),this.OnClickMarkAllAsRead=a(this.OnClickMarkAllAsRead,this),this.subscriptions=[],this.sortByOptions=t.observableArray([{id:"date",text:app.tl("Date Posted")},{id:"type",text:app.tl("Comment Type")},{id:"user",text:app.tl("User Who Posted")},{id:"project",text:app.tl("Project Name")}]),this.listModeOptions=[{html:'<i class="fa fa-list"></i>',value:"list",alt:app.tl("List View")},{html:'<i class="ico-view-message-expand icon-tw"></i>',value:"expanded",alt:app.tl("Expanded View")}],this.listMode=app.loggedInUser.preferences.homeCommentsListMode,this.filterKey="homeComments",this.subscriptions.push(this.filters=n.getFilter(this.filterKey)),this.sortBy=this.filters().parameters.sortBy,this.sortOrder=this.filters().parameters.sortOrder,this.hasActiveFilter=this.filters().active,this.subscriptions.push(this.shared=app.shared.get("comments/"+this.filterKey)),this.subscriptions.push(this.totalRecords=t.pureComputed(function(t){return function(){var e,n,s,i,a;return null==(null!=(n=t.shared())?n.data:void 0)?0:"unread"===("function"==typeof(e=t.shared()).filterStatus?e.filterStatus():void 0)?null!=(s=t.shared())?s.totalUnread():void 0:null!=(i=t.shared())&&null!=(a=i.data)?a.totalRecords():void 0}}(this))),this.subscriptions.push(this.totalUnread=t.pureComputed(function(t){return function(){var e,n;return null==(null!=(e=t.shared())?e.totalUnread:void 0)?0:null!=(n=t.shared())?n.totalUnread():void 0}}(this))),this.subscriptions.push(this.dataState=t.pureComputed(function(t){return function(){var e;return null==(null!=(e=t.shared())?e.data:void 0)?"":t.shared().data.state()}}(this))),this.subscriptions.push(this.dataList=t.pureComputed(function(t){return function(){var e;return null==(null!=(e=t.shared())?e.data:void 0)?[]:t.shared().data.list()}}(this))),app.InitOnShow(this)}return e.prototype.OnShow=function(){},e.prototype.OnClickMarkAllAsRead=function(){var t;null!=(null!=(t=this.shared())?t.MarkAllAsRead:void 0)&&this.shared().MarkAllAsRead()},e.prototype.OnClickShareFilter=function(){return this.filters().Share()},e.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},e}(),{viewModel:s,template:e}}.apply(e,s))&&(t.exports=i)},3942:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}},o=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};s=[n(164),n(1116),n(1928),n(1015),n(2719),n(2720)],void 0!==(i=function(t,e,n,s,i,r){var l;return l=function(){function s(s){var i,l,c;null==s&&(s={}),this.buildOnboardingDashboard=a(this.buildOnboardingDashboard,this),this.OnClickButtonPrompt=a(this.OnClickButtonPrompt,this),this.OnClickClosePrompt=a(this.OnClickClosePrompt,this),this.OnClickDashboardInList=a(this.OnClickDashboardInList,this),this.OnClickViewAllDashboards=a(this.OnClickViewAllDashboards,this),this.OnClickToggleHideForMe=a(this.OnClickToggleHideForMe,this),this.OnClickDeleteDashboard=a(this.OnClickDeleteDashboard,this),this.OnClickAddDashboard=a(this.OnClickAddDashboard,this),this.OnClickEditDashboard=a(this.OnClickEditDashboard,this),this.OnClickDuplicateDashboard=a(this.OnClickDuplicateDashboard,this),this.OnClickAddProject=a(this.OnClickAddProject,this),this.OnClickToggleProjects=a(this.OnClickToggleProjects,this),this.OnClickToggleMetrics=a(this.OnClickToggleMetrics,this),this.OnClickToggleHidden=a(this.OnClickToggleHidden,this),this.OnNotifyTWEvents=a(this.OnNotifyTWEvents,this),this.subscriptions=[],this.tippedContent=r,this.currentViewMode=null!=(c=s.viewMode)?c:"dashboard",this.currentViewMode=app.utility.EnsureObservable(this.currentViewMode),this.hasSeenPrompt=app.loggedInUser.preferences.hasSeenDashboardPrompt,this.hasCreatedFirstDashboard=app.loggedInUser.preferences.hasCreatedFirstDashboard,this.isBuildingDashboard=t.observable(!1),this.selectedDashboard=t.observable(null),this.showHidden=t.observable(!1),this.subscriptions.push(app.loggedInUser.preferences.defaultDashboardId.subscribe(function(t){return function(e){var n;if(n=t.savedDashboards.list().filter(function(t){return(null!=t?t.id():void 0)===e}),null!=n[0])return t.selectedDashboard(n[0])}}(this))),this.subscriptions.push(this.shared=app.shared.get("home/dashboard")),this.projectsSortByOptions=[{text:app.tl("Default"),id:"starredcompanyname"},{text:app.tl("Last Worked On"),id:"lastworkedon"},{text:app.tl("Starred First"),id:"starredName"},{text:app.tl("Company Name"),id:"companyName"},{text:app.tl("Latest Activity"),id:"lastActivityDate"},{text:app.tl("End Date"),id:"endDate"},{text:app.tl("Project Name"),id:"name"},{text:app.tl("Owner Company First"),id:"ownerCompany"},{text:app.tl("Date Created"),id:"createdOn"}],this.projectsListModeOptions=[{html:'<i class="ico-view-list icon-tw"></i>',value:"list",alt:app.tl("List View")},{html:'<i class="ico-view-grid icon-tw"></i>',value:"grid",alt:app.tl("Grid View")}],this.projectsListMode=app.loggedInUser.preferences.homeDashboardListMode,i=function(e){return function(n,s,i){return null==i&&(i=!1),t.pureComputed(function(){var a;return a=e.selectedDashboard(),null==(null!=a?a[n]:void 0)?t.unwrap(s):i?t.unwrap(a[n]):a[n]})}}(this),l=function(e){return function(n,s,i){return null==i&&(i=!1),t.pureComputed({read:function(){var a,o;return a=e.selectedDashboard(),null==(null!=a&&null!=(o=a.settings)?o[n]:void 0)?t.unwrap(s):i?t.unwrap(a.settings[n]):a.settings[n]},write:function(t){var s,i;if(s=e.selectedDashboard(),null!=(null!=s&&null!=(i=s.settings)?i[n]:void 0))return s.settings[n](t)}})}}(this),this.projectsSortBy=l("sortBy","name",!0),this.projectsSortOrder=l("sortOrder","asc",!0),this.displayProjectList=l("displayProjectList",!0,!0),this.projectListPosition=l("projectListPosition","bottom",!0),this.dashboardTitle=i("title","",!0),this.subscriptions.push(this.currentPageTitle=t.pureComputed(function(t){return function(){return"list"===t.currentViewMode()?app.tl("Choose Dashboard"):t.dashboardTitle()}}(this))),this.subscriptions.push(this.cssClass=t.pureComputed(function(t){return function(){var e;return t.shouldShowDashboard()&&t.displayProjectList()&&("left"===(e=t.projectListPosition())||"right"===e)?"s-dashboard--column":""}}(this))),this.subscriptions.push(this.sectionsInOrder=t.pureComputed(function(t){return function(){var e;return t.displayProjectList()?"top"===(e=t.projectListPosition())||"left"===e?["projects","metrics"]:["metrics","projects"]:["metrics"]}}(this))),this.metricsCollapsed=app.loggedInUser.preferences.dashboardMetricsCollapsed,this.projectsCollapsed=app.loggedInUser.preferences.dashboardProjectsCollapsed,this.subscriptions.push(this.shouldDisplayProjects=t.pureComputed(function(t){return function(){var e;return!!t.displayProjectList()&&("left"===(e=t.projectListPosition())||"right"===e||!t.projectsCollapsed())}}(this))),this.subscriptions.push(this.dashboardProjectsListPageSize=t.pureComputed(function(t){return function(){var e;return"left"===(e=t.projectListPosition())||"right"===e?25:50}}(this))),this.subscriptions.push(this.projectsListParameters=t.computed(function(t){return function(){var e,n,s,i;if(null==t.selectedDashboard())return null;if(!t.shouldDisplayProjects())return null;s={filterKey:"homeDashboard",shouldShowHeaders:!0,shouldShowAddButton:!1,showHeaderControls:!1,allowClearFilter:!1,pageSize:t.dashboardProjectsListPageSize(),allowDrag:!1,persistFilter:!1},e=t.selectedDashboard().settings;for(n in e)i=e[n],s[n]=i;return s}}(this))),this.subscriptions.push(this.shouldShowLoadingSlate=t.pureComputed(function(t){return function(){return t.isBuildingDashboard()||"loading"===t.savedDashboards.state()}}(this))),this.subscriptions.push(this.shouldShowBlankSlate=t.pureComputed(function(t){return function(){return!t.isBuildingDashboard()&&"loading"!==t.savedDashboards.state()&&(0===t.visibleSavedDashboards().length&&0===t.visibleSharedDashboards().length)}}(this))),this.subscriptions.push(this.shouldShowDashboard=t.pureComputed(function(t){return function(){return"dashboard"===t.currentViewMode()&&(!t.isBuildingDashboard()&&"loading"!==t.savedDashboards.state()&&(!t.shouldShowBlankSlate()&&null!=t.selectedDashboard()))}}(this))),this.subscriptions.push(this.shouldShowOnboardingPrompt=t.pureComputed(function(t){return function(){var e;return"dashboard"===t.currentViewMode()&&(!t.shouldShowLoadingSlate()&&(!t.shouldShowBlankSlate()&&((null!=(e=t.selectedDashboard())?e.userId():void 0)===app.loggedInUser.id()&&!t.hasSeenPrompt())))}}(this))),this.subscriptions.push(this.shouldShowListView=t.pureComputed(function(t){return function(){return"list"===t.currentViewMode()||!t.shouldShowDashboard()&&"content"===t.savedDashboards.state()}}(this))),this.subscriptions.push(this.canEditDashboard=t.pureComputed(function(t){return function(){return 0!==t.visibleSavedDashboards().length&&("list"!==t.currentViewMode()&&(null!=t.selectedDashboard()&&app.loggedInUser.id()===parseInt(t.selectedDashboard().userId(),10)))}}(this))),this.subscriptions.push(this.loadingText=t.pureComputed(function(t){return function(){return t.isBuildingDashboard()?app.tl("Building dashboard"):app.tl("Loading dashboard")}}(this))),this.subscriptions.push(this.dashboardInfo=t.pureComputed(function(t){return function(){return t.activeProjectFilters().length?app.tl("Here is your dashboard, showing data from projects for these filters"):""}}(this))),this.subscriptions.push(this.activeProjectFilters=t.pureComputed(function(t){return function(){return app.utility.GetDashboardFilters(t.selectedDashboard(),!0)}}(this))),this.shouldCheckFirstBuild=!0,this.savedDashboards=new e("dashboards.json",{ItemClass:n,loadNow:!0,params:{fulldata:!0,showShared:"all",getShareData:!0},onLoad:function(t){return function(){var e,n,s,i,a;if(t.visibleSavedDashboards().length){for(i=t.savedDashboards.list(),a=[],n=0,s=i.length;n<s;n++)e=i[n],app.loggedInUser.preferences.defaultDashboardId()>0?~~app.loggedInUser.preferences.defaultDashboardId()==~~e.id()?a.push(t.selectedDashboard(e)):a.push(void 0):e.isDefault()&&e.userId()===app.loggedInUser.id()?(app.loggedInUser.preferences.defaultDashboardId(e.id()),a.push(t.selectedDashboard(e))):a.push(void 0);return a}if(t.shouldCheckFirstBuild)return app.api.get("me/savedfilters.json?section=homeDashboard").then(function(e){var n;return(null!=(n=e.response.savedFilters)?n.length:void 0)?app.modal.Show("newDashboardMigration",{onCloseCallBack:function(){return t.savedDashboards.Load()}}):0===t.visibleSavedDashboards().length&&(t.hasCreatedFirstDashboard()||t.buildOnboardingDashboard()),t.shouldCheckFirstBuild=!1})}}(this)}),this.subscriptions.push(this.visibleSavedDashboards=t.pureComputed(function(t){return function(){var e,n,s,i,a,o;for(o=t.savedDashboards.list().filter(function(t){return!1===t.deleted()&&t.userId()===app.loggedInUser.id()}),e=[],i={},s=0,a=o.length;s<a;s++)n=o[s],null==i[n.id()]&&(e.push(n),i[n.id()]=!0);return e}}(this))),this.subscriptions.push(this.visibleSharedDashboards=t.pureComputed(function(t){return function(){var e,n,s,i,a,r;for(r=t.savedDashboards.list().filter(function(t){var e;return!1===t.deleted()&&t.userId()!==app.loggedInUser.id()&&(e=t.id(),o.call(app.loggedInUser.preferences.hiddenDashboardIds(),e)<0)}),e=[],i={},s=0,a=r.length;s<a;s++)n=r[s],null==i[n.id()]&&(e.push(n),i[n.id()]=!0);return e}}(this))),this.subscriptions.push(this.hiddenSharedDashboards=t.pureComputed(function(t){return function(){var e,n,s,i,a,r;for(r=t.savedDashboards.list().filter(function(t){var e;return!1===t.deleted()&&t.userId()!==app.loggedInUser.id()&&(e=t.id(),o.call(app.loggedInUser.preferences.hiddenDashboardIds(),e)>=0)}),e=[],i={},s=0,a=r.length;s<a;s++)n=r[s],null==i[n.id()]&&(e.push(n),i[n.id()]=!0);return e}}(this))),this.subscriptions.push(app.ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvents)),app.InitOnShow(this)}return s.prototype.OnShow=function(){},s.prototype.OnNotifyTWEvents=function(t){var e,s,i,a,r,l,c,p;if("dashboard"===t.itemType)return t.actionType===app.consts.ACTIONTYPE.DELETED?(p=function(e){return function(){var s,i,a,o;if(e.savedDashboards.DeleteItemById(t.itemId),null!=(null!=(i=e.selectedDashboard())?i.id():void 0)&&~~e.selectedDashboard().id()==~~t.itemId&&null!=(null!=(a=t.extraInfo)&&null!=(o=a.data)?o.newDashboard:void 0))return s=new n(t.extraInfo.data.newDashboard),e.selectedDashboard().id(0),e.selectedDashboard(s)}}(this),null!=(null!=(e=this.selectedDashboard())?e.id():void 0)&&~~this.selectedDashboard().id()==~~t.itemId?this.savedDashboards.Load().then(p):this.savedDashboards.list().length?this.savedDashboards.LoadUpdates().then(p):this.savedDashboards.Load().then(p)):(this.savedDashboards.list().length&&0===(null!=(s=null!=(i=t.extraInfo)&&null!=(a=i.data)?a.panelId:void 0)?s:0)/1&&this.savedDashboards.LoadUpdates(),null!=(null!=(r=t.extraInfo)&&null!=(l=r.data)?l.removedUsers:void 0)&&(c=app.loggedInUser.id(),o.call(t.extraInfo.data.removedUsers,c)>=0)?this.savedDashboards.Load().then(p):this.savedDashboards.Load())},s.prototype.OnClickToggleHidden=function(){return this.showHidden(!this.showHidden())},s.prototype.OnClickToggleMetrics=function(){var t;if(!this.displayProjectList()||"left"!==(t=this.projectListPosition())&&"right"!==t)return this.metricsCollapsed(!this.metricsCollapsed())},s.prototype.OnClickToggleProjects=function(){var t;if(!this.displayProjectList()||"left"!==(t=this.projectListPosition())&&"right"!==t)return this.projectsCollapsed(!this.projectsCollapsed())},s.prototype.OnClickAddProject=function(){app.modal.Show("addOrEditProject",{})},s.prototype.OnClickDuplicateDashboard=function(t,e){var s,i,a;return s=this.selectedDashboard(),t instanceof n&&(s=t),i=s.GetCopy(),i.id=null,i.panels=s._getSerializedPanels(),i.isTemporary=!0,i.title=i.title+" - (Copied: "+moment(new Date).userFormat("date")+")",a=new n(i),app.modal.Show("addOrEditDashboard",{dashboard:a,onCloseCallBack:function(t){return function(e){if(!e.wasCancelled)return t.selectedDashboard(a),t.currentViewMode("dashboard")}}(this)})},s.prototype.OnClickEditDashboard=function(t,e){var s;return!0,s=this.selectedDashboard(),t instanceof n&&(s=t,this.selectedDashboard().id()===t.id()),app.modal.Show("addOrEditDashboard",{dashboard:s,onCloseCallBack:function(t){return function(e){return e.wasCancelled&&s.DiscardTemporaryPanels(),t.savedDashboards.Sync()}}(this)})},s.prototype.OnClickAddDashboard=function(){return app.modal.Show("addOrEditDashboard",{onCloseCallBack:function(t){return function(e){if(!e.wasCancelled)return t.hasSeenPrompt(!0),t.hasCreatedFirstDashboard(!0),t.currentViewMode("dashboard"),t.savedDashboards.Sync()}}(this)})},s.prototype.OnClickDeleteDashboard=function(t,e){return"dashboard"===this.currentViewMode()?this.selectedDashboard().Delete(!0):t.Delete(!1)},s.prototype.OnClickToggleHideForMe=function(t,e){var n;if(n=0,(n="dashboard"===this.currentViewMode()&&null!=this.selectedDashboard()?this.selectedDashboard().id():t.id())>0&&null!=app.loggedInUser.preferences.hiddenDashboardIds())return o.call(app.loggedInUser.preferences.hiddenDashboardIds(),n)<0?app.loggedInUser.preferences.hiddenDashboardIds.push(n):app.loggedInUser.preferences.hiddenDashboardIds.remove(n)},s.prototype.OnClickViewAllDashboards=function(){return this.currentViewMode("list")},s.prototype.OnClickDashboardInList=function(t){var e,n,s,i;for(i=this.savedDashboards.list(),n=0,s=i.length;n<s;n++)e=i[n],e.isDefault(!1);return app.loggedInUser.preferences.defaultDashboardId(t.id()),this.selectedDashboard(t),this.selectedDashboard().userId()===app.loggedInUser.id()&&this.selectedDashboard().SaveDefault(),this.currentViewMode("dashboard")},s.prototype.OnClickClosePrompt=function(){return this.hasSeenPrompt(!0)},s.prototype.OnClickButtonPrompt=function(){return this.hasSeenPrompt(!0),this.OnClickAddDashboard()},s.prototype.buildOnboardingDashboard=function(){var t;if(!this.isBuildingDashboard())return t=new n,t.title(app.tl("Personal").replace(/[^\x00-\x7F]/g,"")),t.UseTemplate("simple"),this.selectedDashboard(t),this.selectedDashboard().SaveDefault().then(function(t){return function(){return t.hasCreatedFirstDashboard(!0)}}(this)).finally(function(t){return function(){return t.isBuildingDashboard(!1)}}(this))},s.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},s}(),{viewModel:l,template:i}}.apply(e,s))&&(t.exports=i)},3943:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(164),n(2721),n(1015)],void 0!==(i=function(t,e,n){var s;return s=function(){function e(e){var s;null==e&&(e={}),this.OnClickShareFilter=a(this.OnClickShareFilter,this),this.OnClickPrintAgenda=a(this.OnClickPrintAgenda,this),this.OnClickICalFeeds=a(this.OnClickICalFeeds,this),this.OnClickAddEvent=a(this.OnClickAddEvent,this),this.subscriptions=[],this.sortByOptions=t.observableArray([{id:"date",text:app.tl("Date")},{id:"name",text:app.tl("Event Name")},{id:"type",text:app.tl("Event Type")},{id:"project",text:app.tl("Project")}]),this.filterKey="homeEvents",this.subscriptions.push(this.filters=n.getFilter(this.filterKey)),this.includesSort=this.filters().includesSort,this.sortBy=this.filters().parameters.sortBy,this.sortOrder=this.filters().parameters.sortOrder,this.sortByPreference=app.loggedInUser.preferences[this.filterKey+"SortBy"],this.sortOrderPreference=app.loggedInUser.preferences[this.filterKey+"SortOrder"],s=function(t){return function(){if(!t.includesSort())return t.sortBy(t.sortByPreference()),t.sortOrder(t.sortOrderPreference())}}(this),this.subscriptions.push(this.includesSort.subscribe(s)),this.subscriptions.push(this.sortBy.subscribe(this.sortByPreference)),this.subscriptions.push(this.sortOrder.subscribe(this.sortOrderPreference)),s(),this.filterText=this.filters().parameters.filterText,this.eventTypeId=this.filters().parameters.eventTypeId,this.projectId=this.filters().parameters.projectId,this.userId=this.filters().parameters.userId,this.attendingOnly=this.filters().parameters.attendingOnly,this.hasActiveFilter=this.filters().active,this.subscriptions.push(this.shared=app.shared.get("events/list")),this.subscriptions.push(this.totalRecords=t.pureComputed(function(t){return function(){return null!=t.shared()?t.shared().numberOfRecords():0}}(this))),app.InitOnShow(this)}return e.prototype.OnShow=function(){},e.prototype.OnClickAddEvent=function(){app.modal.Show("addOrEditEvent")},e.prototype.OnClickICalFeeds=function(){return app.modal.Show("calendarICalFeeds",{})},e.prototype.OnClickPrintAgenda=function(){var t;return Tipped.hideAll(),t={eventTypeId:this.eventTypeId().toString(),userId:this.userId().toString(),projectId:this.projectId().toString(),filterText:this.filterText().toString(),showTasks:!1,showMilestones:!1,attendingOnly:this.attendingOnly().toString()},app.modal.Show("calendarDownloadAgenda",t)},e.prototype.OnClickShareFilter=function(){this.filters().Share()},e.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},e}(),{viewModel:s,template:e}}.apply(e,s))&&(t.exports=i)},3944:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(164),n(2722),n(1015)],void 0!==(i=function(t,e,n){var s;return s=function(){function e(e){null==e&&(e={}),this.OnClickMarkAllAsRead=a(this.OnClickMarkAllAsRead,this),this.subscriptions=[],this.sortByOptions=t.observableArray([{id:"author",text:app.tl("Author")},{id:"dateposted",text:app.tl("Date Posted")},{id:"lastupdated",text:app.tl("Last Updated")},{id:"project",text:app.tl("Project")},{id:"category",text:app.tl("Category")}]),this.listModeOptions=[{html:'<i class="fa fa-bars"></i>',value:"list",alt:app.tl("List View")},{html:'<i class="ico-view-message-expand icon-tw"></i>',value:"expanded",alt:app.tl("Expanded View")}],this.listMode=app.loggedInUser.preferences.homeMessagesListMode,this.filterKey="homeMessages",this.subscriptions.push(this.filters=n.getFilter(this.filterKey)),this.sortBy=this.filters().parameters.sortBy,this.sortOrder=this.filters().parameters.sortOrder,this.hasActiveFilter=this.filters().active,this.subscriptions.push(this.shared=app.shared.get("messages/"+this.filterKey)),this.subscriptions.push(this.sharedMetrics=app.shared.get("user-metrics")),this.subscriptions.push(this.totalRecords=t.pureComputed(function(t){return function(){var e,n,s,i,a;return null==(null!=(n=t.shared())?n.data:void 0)?0:"unread"===("function"==typeof(e=t.shared()).filterStatus?e.filterStatus():void 0)?null==t.sharedMetrics()||t.shared().filters().active()?null!=(s=t.shared())?s.totalUnread():void 0:t.sharedMetrics().unreadMessages():null!=t.shared().totalRecords?t.shared().totalRecords():null!=(i=t.shared())&&null!=(a=i.data)?a.totalRecords():void 0}}(this))),app.InitOnShow(this)}return e.prototype.OnShow=function(){},e.prototype.OnClickMarkAllAsRead=function(){var t;null!=(null!=(t=this.shared())?t.MarkAllAsRead:void 0)&&this.shared().MarkAllAsRead()},e.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},e}(),{viewModel:s,template:e}}.apply(e,s))&&(t.exports=i)},3945:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(164),n(1116),n(1118),n(1015),n(2723)],void 0!==(i=function(t,e,n,s,i){var o;return o=function(){function e(e){null==e&&(e={}),this.OnClickInput=a(this.OnClickInput,this),this.OnKeyboardInput=a(this.OnKeyboardInput,this),this.OnClickAddProject=a(this.OnClickAddProject,this),this.OnClickAddUpdate=a(this.OnClickAddUpdate,this),this.subscriptions=[],this.holderId="dashboardProjects__"+Date.now(),this.selectedProjectIndex=t.observable(-1),this.listModeOptions=[{html:'<i class="fa fa-list fa-fw"></i>',value:"list",alt:app.tl("List View")},{html:'<i class="fa fa-th fa-fw"></i>',value:"grid",alt:app.tl("Grid View")}],this.listMode=app.loggedInUser.preferences.homeProjectsListListMode,this.sortByOptions=[{text:app.tl("Default"),id:"starredcompanyname"},{text:app.tl("Starred First"),id:"starredName"},{text:app.tl("Company Name"),id:"companyName"},{text:app.tl("Latest Activity"),id:"lastActivityDate"},{text:app.tl("End Date"),id:"endDate"},{text:app.tl("Project Name"),id:"name"},{text:app.tl("Owner Company"),id:"ownerCompany"},{text:app.tl("Date Created"),id:"createdOn"}],this.filterKey="homeProjectsList",this.subscriptions.push(this.filters=s.getFilter(this.filterKey,0,!1)),this.searchTerm=this.filters().parameters.searchTerm,this.sortBy=this.filters().parameters.sortBy,this.sortOrder=this.filters().parameters.sortOrder,this.hasActiveFilter=this.filters().active,this.subscriptions.push(this.shared=app.shared.get("projects/"+this.filterKey)),this.subscriptions.push(this.totalRecords=t.pureComputed(function(t){return function(){var e;return null==(null!=(e=t.shared())?e.totalRecords:void 0)?0:t.shared().totalRecords()}}(this))),this.subscriptions.push(this.list=t.pureComputed(function(t){return function(){var e;return null==(null!=(e=t.shared())?e.data:void 0)?[]:t.shared().data.list()}}(this))),app.FocusFirstInput(this.holderId),app.InitOnShow(this)}return e.prototype.OnShow=function(){},e.prototype.OnClickAddUpdate=function(){},e.prototype.OnClickAddProject=function(){app.modal.Show("addOrEditProject",{})},e.prototype.OnKeyboardInput=function(t,e){var n,s,i,a,o,r,l,c,p,d;switch(r=0,o=this.list().length-1,n=this.selectedProjectIndex(),d=document.getElementById(""+this.holderId),e.keyCode){case 13:n>-1&&this.list()[n].isOpen(!this.list()[n].isOpen());break;case 38:n>r?(n--,this.selectedProjectIndex(n)):0===n&&(this.selectedProjectIndex(-1),app.FocusFirstInput(this.holderId));break;case 40:n<o&&(n++,this.selectedProjectIndex(n))}for(l=this.list(),c=i=0,a=l.length;i<a;c=++i)t=l[c],t.isSelected(c===n);return n>-1?(s=this.list()[n],p=document.getElementById("project"+s.id()).offsetTop,d.scrollTop=p):d.scrollTop=0,!([38,40].indexOf(e.keyCode)>-1)||(e.preventDefault(),!1)},e.prototype.OnClickInput=function(){return this.selectedProjectIndex(-1)},e.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},e}(),{viewModel:o,template:i}}.apply(e,s))&&(t.exports=i)},3946:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(164),n(2724),n(1015)],void 0!==(i=function(t,e,n){var s;return s=function(){function e(e){null==e&&(e={}),this.OnClickAddShortcut=a(this.OnClickAddShortcut,this),this.OnNotifyTWEvents=a(this.OnNotifyTWEvents,this),this.subscriptions=[],this.sortByOptions=t.observableArray([{id:"name",text:app.tl("Name")},{id:"datecreated",text:app.tl("Date")},{id:"objecttype",text:app.tl("Type")}]),this.listModeOptions=[{html:'<i class="ico-view-list icon-tw"></i>',value:"list",alt:app.tl("List View")},{html:'<i class="ico-view-grid icon-tw"></i>',value:"grid",alt:app.tl("Grid View")}],this.listMode=app.loggedInUser.preferences.shortcutsListMode,this.filterKey="shortcuts",this.subscriptions.push(this.filters=n.getFilter(this.filterKey)),this.sortBy=this.filters().parameters.sortBy,this.sortOrder=this.filters().parameters.sortOrder,this.hasActiveFilter=this.filters().active,this.subscriptions.push(this.shared=app.shared.get("shortcuts/list")),this.subscriptions.push(this.totalRecords=t.pureComputed(function(t){return function(){var e,n;return null==(null!=(e=t.shared())?e.totalRecords:void 0)?0:null!=(n=t.shared())?n.totalRecords():void 0}}(this))),this.subscriptions.push(app.ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvents)),this.subscriptions.push(this.state=t.pureComputed(function(t){return function(){var e,n;return null!=(e=t.shared())&&null!=(n=e.data)?n.state():void 0}}(this))),app.InitOnShow(this)}return e.prototype.OnShow=function(){},e.prototype.OnNotifyTWEvents=function(t){var e;if(e=t.actionType,"shortcut"===t.itemType&&null!=this.shared()&&("added"===e&&this.shared().totalRecords(this.shared().totalRecords()+1),"deleted"===e))return this.shared().totalRecords(this.shared().totalRecords()-1)},e.prototype.OnClickAddShortcut=function(){app.modal.Show("addOrEditShortcut",{})},e.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},e}(),{viewModel:s,template:e}}.apply(e,s))&&(t.exports=i)},3947:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}},o=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};s=[n(164),n(2726),n(2725),n(1015),n(1116),n(1125),n(1128)],void 0!==(i=function(t,e,n,s,i,r,l){var c;return c=function(){function e(e){var o,c;null==e&&(e={}),this.openTaskListQuickView=a(this.openTaskListQuickView,this),this.getSectionHeader=a(this.getSectionHeader,this),this.isNewTaskList=a(this.isNewTaskList,this),this.isNewSection=a(this.isNewSection,this),this.OnClickSettings=a(this.OnClickSettings,this),this.OnClickAddEvent=a(this.OnClickAddEvent,this),this.OnClickAddMilestone=a(this.OnClickAddMilestone,this),this.OnClickAddTask=a(this.OnClickAddTask,this),this.OnNotifyTWEvent=a(this.OnNotifyTWEvent,this),this.subscriptions=[],this.quickAddTippedContent=n,this.sortByOptions=t.observableArray([{id:"startdate",text:app.tl("Start Date")},{id:"duedate",text:app.tl("Due Date")},{id:"dateadded",text:app.tl("Date Added")},{id:"project",text:app.tl("Project")},{id:"priority",text:app.tl("Priority")},{id:"company",text:app.tl("Company")}]),this.showTasks=app.loggedInUser.preferences.homeTodayShowTasks,this.showMilestones=app.loggedInUser.preferences.homeTodayShowMilestones,this.showEvents=app.loggedInUser.isAccount()?app.loggedInUser.preferences.homeTodayShowEvents:t.observable(!1),this.includeFollowedTasks=app.loggedInUser.preferences.homeTodayIncludeFollowedTasks,this.includeLateMilestones=app.loggedInUser.preferences.homeTodayIncludeLateMilestones,this.includeUpcomingMilestones=app.loggedInUser.preferences.homeTodayIncludeUpcomingMilestones,this.onlyAttendedEvents=app.loggedInUser.preferences.homeTodayOnlyAttendedEvents,this.filterKey="homeTodayTasks",this.subscriptions.push(this.filters=s.getFilter(this.filterKey)),o=this.filters().parameters,this.filterText=o.filterText,this.projectId=o.projectId,this.priority=o.priority,this.dateCode=o.dateCode,this.startDate=o.startDate,this.endDate=o.endDate,this.dateCreatedCode=o.dateCreatedCode,this.createdAfterDate=o.createdAfterDate,this.createdBeforeDate=o.createdBeforeDate,this.createdDateCustomInterval=o.createdDateCustomInterval,this.responsiblePartyIds=o.responsiblePartyIds,this.assigneeCompanyIds=o.assigneeCompanyIds,this.includeAssigneeCompanies=o.includeAssigneeCompanies,this.includeAssigneeTeams=o.includeAssigneeTeams,this.assigneeTeamIds=o.assigneeTeamIds,this.tagIds=o.tagIds,this.matchAllTags=o.matchAllTags,this.excludeTagIds=o.excludeTagIds,this.matchAllExcludedTags=o.matchAllExcludedTags,this.onlyMyTasks=o.onlyMyTasks,this.onlyUntaggedTasks=o.onlyUntaggedTasks,this.showAllAssignedTasks=o.showAllAssignedTasks,this.includeUnassignedTasks=o.includeUnassignedTasks,this.dateCustomInterval=o.dateCustomInterval,this.includeOverdueTasks=o.includeOverdueTasks,this.includeTasksWithNoDate=o.includeTasksWithNoDate,this.ignoreStartDates=o.ignoreStartDates,this.sortBy=o.sortBy,this.sortOrder=o.sortOrder,this.includesSort=this.filters().includesSort,this.sortByPreference=app.loggedInUser.preferences[this.filterKey+"SortBy"],this.sortOrderPreference=app.loggedInUser.preferences[this.filterKey+"SortOrder"],c=function(t){return function(){if(!t.includesSort())return t.sortBy(t.sortByPreference()),t.sortOrder(t.sortOrderPreference())}}(this),this.subscriptions.push(this.includesSort.subscribe(c)),this.subscriptions.push(this.sortBy.subscribe(this.sortByPreference)),this.subscriptions.push(this.sortOrder.subscribe(this.sortOrderPreference)),c(),this.clientSort=new l("section-tasks-list",{sortBy:this.sortBy,sortOrder:this.sortOrder,sortOptions:this.sortByOptions}),this.lastTaskListid=t.observable(0),this.subscriptions.push(this.canAddTasks=t.computed(function(t){return function(){return!!app.loggedInUser.statsLoaded()&&(app.loggedInUser.administrator()||app.loggedInUser.stats.permissions.canAddTasks())}}())),this.subscriptions.push(this.canAddMilestones=t.computed(function(t){return function(){return!!app.loggedInUser.statsLoaded()&&(app.loggedInUser.administrator()||app.loggedInUser.stats.permissions.canAddMilestones())}}())),this.subscriptions.push(this.responsibleIdList=t.pureComputed(function(t){return function(){var e;return e=null!=t.responsiblePartyIds()?t.responsiblePartyIds().slice():[],t.showAllAssignedTasks()&&-1===e.indexOf(-1)&&e.push(-1),t.includeUnassignedTasks()&&-1===e.indexOf(0)&&e.push(0),e}}(this))),this.subscriptions.push(this.milestoneStatuses=t.pureComputed(function(t){return function(){var e;return e=["today"],t.includeLateMilestones()&&e.push("late"),t.includeUpcomingMilestones()&&e.push("upcoming"),e}}(this))),this.data=new i(app.prefixApi("tasks.json","API_PREFIX_V2","API_PREFIX_V2"),{ItemClass:r,callbackBeforeRender:function(t){return function(t,e,n){var s,i,a,o,r,l,c,p;for(s=function(t){var e,n,s,i,a;for(a={},n=0,s=t.length;n<s;n++)e=t[n],null==a[i=e.id]&&(a[i]=e);return a},o=s(null!=(r=null!=n?n.projects:void 0)?r:[]),p=s(null!=(l=null!=n?n.taskLists:void 0)?l:[]),i=0,a=t.length;i<a;i++)c=t[i],null!=o[c.projectId()]&&(c.projectName(o[c.projectId()].name),c.companyId(o[c.projectId()].companyId),c.companyName(o[c.projectId()].companyName)),null!=p[c.taskListId()]&&(c.taskListName(p[c.taskListId()].name),c.taskListDisplayOrder(p[c.taskListId()].displayOrder));return t}}(),filter:{generateFilterParams:function(t){return function(){var n,s;switch(e={useAllProjects:!0,sort:t.sortBy(),sortOrder:t.sortOrder(),filter:"",includeToday:1,getFiles:!0,filterText:t.filterText().trim().split(/\s+/),includeCustomFields:!0},t.dateCode()){case"anytime":e.startdate="",e.enddate="";break;case"custom":null!=t.startDate()&&null!=t.endDate()&&(e.startdate=t.startDate().format("YYYYMMDD"),e.enddate=t.endDate().format("YYYYMMDD"));break;case"thisweek":case"within":case"withinprev":n=app.utility.GetDatesFromRange(t.dateCode(),"YYYYMMDD",t.dateCustomInterval()),e.startdate=n.startDate,e.enddate=n.endDate;break;default:e.filter=t.dateCode()}switch(t.dateCreatedCode()){case"anytime":e.createdAfterDate="",e.createdBeforeDate="";break;case"custom":null!=t.createdAfterDate()&&null!=t.createdBeforeDate()&&(e.createdAfterDate=t.createdAfterDate().format("YYYYMMDD"),e.createdBeforeDate=t.createdBeforeDate().format("YYYYMMDD"));break;case"thisweek":case"lastweek":case"thismonth":case"lastmonth":case"last3months":case"last6months":case"within":case"withinprev":n=app.utility.GetDatesFromRange(t.dateCreatedCode(),"YYYYMMDD",t.createdDateCustomInterval()),e.createdAfterDate=n.startDate,e.createdBeforeDate=n.endDate,e.createdFilter="custom";break;default:e.createdFilter=t.dateCreatedCode()}return s=["taskListNames","projectNames"],t.includeOverdueTasks()&&s.push("overdue"),t.includeTasksWithNoDate()&&s.push("nodate"),t.ignoreStartDates()&&(e.useStartDatesForTodaysTasks=0),e.include=s.join(","),e.priority="any"===t.priority()?"":t.priority(),t.onlyMyTasks()?(e["responsible-party-ids"]=app.loggedInUser.id(),e.includeAssigneeCompanies=t.includeAssigneeCompanies(),e.includeAssigneeTeams=t.includeAssigneeTeams()):(e.includeAssigneeCompanies=!1,e.includeAssigneeTeams=!1),e.projectId=null!=t.projectId()?t.projectId().join(","):"",e.onlyUntaggedTasks=t.onlyUntaggedTasks(),0!==t.tagIds().length&&(e["tag-ids"]=t.tagIds().join(","),e.matchAllTags=t.matchAllTags()),0!==t.excludeTagIds().length&&(e.excludeTagIds=t.excludeTagIds().join(","),e.matchAllExcludedTags=t.matchAllExcludedTags()),e}}(this)},sort:this.clientSort.sort}),this.subscriptions.push(app.ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent)),app.InitOnShow(this)}return e.prototype.OnShow=function(){},e.prototype.OnNotifyTWEvent=function(t){var e,n,s;if("task"===t.itemType&&this.showTasks()){if(null==t.subType||"task-completed"!==t.subType||null==(e=t.extraInfo)||null==(n=e.data)||!n.loggedTimeCompletedTask)return this.data.LoadUpdates().then(function(e){return function(n){var s;if(t.itemId/1>0)return s=t.itemId/1,o.call(n.tasks.map(function(t){return t.id/1}),s)<0&&app.utility.FindIndexByKeyValue(e.data.list(),"id",t.itemId,!0)>-1?e.data.DeleteItemById(t.itemId):void 0}}(this));if(null!=(s=this.data.list().find(function(e){return parseInt(e.id(),10)===parseInt(t.itemId,10)})))return s.OnClickComplete()}},e.prototype.OnClickAddTask=function(){app.modal.Show("quicklyAddTasksToTaskList",{})},e.prototype.OnClickAddMilestone=function(){app.modal.Show("addOrEditMilestone")},e.prototype.OnClickAddEvent=function(){app.modal.Show("addOrEditEvent")},e.prototype.OnClickSettings=function(){app.quickView.show("todaySettings",{})},e.prototype.isNewSection=function(t){return!!this.data.list().length&&(0===t||this.getSectionHeader(t)!==this.getSectionHeader(t-1))},e.prototype.isNewTaskList=function(t){return!!this.data.list().length&&(0===t||(this.data.list()[t].taskListId()!==this.data.list()[t-1].taskListId()||this.getSectionHeader(t)!==this.getSectionHeader(t-1)))},e.prototype.getSectionHeader=function(t){var e,n,s,i,a,o;switch(n=this.data.list()[t],"",this.sortBy()){case"startdate":return(null!=(s=n.startDate())?s.length:void 0)?(o=moment(),a=moment(n.startDate()),o.format("YYYYMMDD")===a.format("YYYYMMDD")?app.tl("Today"):o.startOf("day")>a.startOf("day")?app.tl("Started"):app.tl("Upcoming")):app.tl("No start date");case"duedate":return(null!=(i=n.dueDate())?i.length:void 0)?(o=moment(),e=moment(n.dueDate()),o.format("YYYYMMDD")===e.format("YYYYMMDD")?app.tl("Today"):o.startOf("day")>e.startOf("day")?app.tl("Late"):app.tl("Upcoming")):app.tl("No due date");case"dateadded":return app.utility.GetRelativeDate(n.dateCreated());case"project":return app.utility.SafeHTML(n.projectName())+" &mdash; ("+app.utility.SafeHTML(n.companyName())+")";case"priority":switch(n.priority()){case"high":return app.tl("High");case"medium":return app.tl("Medium");case"low":return app.tl("Low");case"":return app.tl("No Priority")}break;case"company":return app.utility.SafeHTML(n.companyName());default:return""}},e.prototype.openTaskListQuickView=function(t,e){return app.quickView.show("taskList",{id:e,taskListId:e,projectId:t})},e.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},e}(),{viewModel:c,template:e}}.apply(e,s))&&(t.exports=i)},3953:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(164),n(2732),n(1116),n(1205),n(1015),n(1128)],void 0!==(i=function(t,e,n,s,i,o){var r;return r=function(){function e(e){var r,l,c,p,d,u,h,m,f,g,x,y,b,k,v,w,T,I,O;null==e&&(e={}),this.MarkAllAsRead=a(this.MarkAllAsRead,this),this.GetFilterParams=a(this.GetFilterParams,this),this.DragulaMoves=a(this.DragulaMoves,this),this.getSectionHeader=a(this.getSectionHeader,this),this.isNewProject=a(this.isNewProject,this),this.isNewSection=a(this.isNewSection,this),this.OnOutCategory=a(this.OnOutCategory,this),this.OnOverCategory=a(this.OnOverCategory,this),this.OnDropMessage=a(this.OnDropMessage,this),this.OnNotifyTWEvent=a(this.OnNotifyTWEvent,this),this.subscriptions=[],this.useFilter=null==(r=e.useFilter)||r,this.projectId=null!=(l=e.projectId)?l:0,this.listMode=null!=(x=e.listMode)?x:"expanded",this.filterKey=null!=(y=e.filterKey)?y:"homeMessages",this.showBlankState=null==(b=e.showBlankState)||b,this.isQuickView=null!=(k=e.isQuickView)&&k,this.numUnread=this.totalUnread=t.observable(0),this.totalRecords=t.observable(0),this.showTitle=null!=(v=e.showTitle)&&v,this.sectionTitle=null!=(w=e.sectionTitle)?w:app.tl("Messages"),this.blankStateTitle=null!=(T=e.blankStateTitle)?T:app.tl("No Messages"),this.blankStateText=null!=(I=e.blankStateText)?I:app.tl("There are currently no messages."),this.shouldShowHeaders=null==(c=e.showHeaders)||c,this.shouldShowBreadcrumb=null!=(p=e.showBreadcrumb)&&p,this.showProjectInBreadcrumb=null==(d=e.showProjectInBreadcrumb)||d,this.showCategoryInBreadcrumb=null==(u=e.showCategoryInBreadcrumb)||u,this.allowReplies=null!=(h=e.allowReplies)&&h,this.allowDrag=null!=(m=e.allowDrag)&&m,this.unreadMessagesMineOnly=e.unreadMessagesMineOnly,this.lastHeader=t.observable(""),this.lastProjectId=0,this.sortOptions=t.observableArray([{id:"author",text:app.tl("Author")},{id:"dateposted",text:app.tl("Date Posted")},{id:"lastupdated",text:app.tl("Last Updated")},{id:"project",text:app.tl("Project")},{id:"category",text:app.tl("Category")}]),console.assert("allMessages"===(f=this.filterKey)||"projectMessages"===f||"homeMessages"===f||"itemMessages"===f),this.subscriptions.push(this.filters=i.getFilter(this.filterKey,this.projectId)),t.isObservable(this.listMode)||(this.listMode=t.observable(this.listMode)),this.includesSort=this.filters().includesSort,this.sortBy=this.filters().parameters.sortBy,this.sortOrder=this.filters().parameters.sortOrder,this.sortByPreference=app.loggedInUser.preferences[this.filterKey+"SortBy"],this.sortOrderPreference=app.loggedInUser.preferences[this.filterKey+"SortOrder"],O=function(t){return function(){if(!t.includesSort())return t.sortBy(t.sortByPreference()),t.sortOrder(t.sortOrderPreference())}}(this),this.subscriptions.push(this.includesSort.subscribe(O)),this.subscriptions.push(this.sortBy.subscribe(this.sortByPreference)),this.subscriptions.push(this.sortOrder.subscribe(this.sortOrderPreference)),O(),this.filterUserIds=this.filters().parameters.filterUserIds,this.filterProjectId=this.filters().parameters.filterProjectId,this.showArchived=this.filters().parameters.showArchived,this.dateCode=this.filters().parameters.dateCode,this.dateCustomInterval=this.filters().parameters.dateCustomInterval,this.startDate=this.filters().parameters.startDate,this.endDate=this.filters().parameters.endDate,this.onlyStarredProjects=this.filters().parameters.onlyStarredProjects,this.showUnreadOnly=this.filters().parameters.showUnreadOnly,this.authorIds=this.filters().parameters.authorIds,this.notifiedUserId="homeMessages"===this.filterKey?t.observable([app.loggedInUser.id()]):this.filters().parameters.notifiedUserId,this.filterStatus=null!=(g=e.filterStatus)?g:this.filters().parameters.status,this.filterStatus=app.utility.EnsureObservable(this.filterStatus),this.hasActiveFilter=this.filters().active,this.filterText=this.filters().parameters.filterText,this.filterTagIds=this.filters().parameters.filterTagIds,this.matchAllTags=this.filters().parameters.matchAllTags,this.subscriptions.push(this.formattedStartDate=t.pureComputed(function(t){return function(){var e;switch(t.dateCode()){case"anytime":return"";case"custom":return null!=t.startDate()?t.startDate().format("YYYYMMDD"):"";default:return e=app.utility.GetDatesFromRange(t.dateCode(),"YYYYMMDD",t.dateCustomInterval()),e.startDate}}}(this))),this.subscriptions.push(this.formattedEndDate=t.pureComputed(function(t){return function(){var e;switch(t.dateCode()){case"anytime":return"";case"custom":return null!=t.endDate()?t.endDate().format("YYYYMMDD"):"";default:return e=app.utility.GetDatesFromRange(t.dateCode(),"YYYYMMDD",t.dateCustomInterval()),e.endDate}}}(this))),this.subscriptions.push(this.isArchivedSelected=t.pureComputed(function(t){return function(){var t;return!0===(null!=(t=app.currentRoute()["?queryString"])?t.archived:void 0)}}())),this.subscriptions.push(this.projectPermissions=t.pureComputed(function(t){return function(){var t,e;return null!=(t=null!=(e=app.currentRoute().project)?e.permissions:void 0)?t:{}}}())),this.subscriptions.push(this.selectedCatId=t.pureComputed(function(e){return function(){return parseInt(t.unwrap(app.currentRoute().categoryId),10)}}())),this.projectCompanyIds=e.projectCompanyIds,this.projectCategoryIds=e.projectCategoryIds,this.projectTagIds=e.projectTagIds,this.matchAllProjectTags=e.matchAllProjectTags,this.projectOwnerIds=e.projectOwnerIds,this.projectHealth=e.projectHealth,this.projectStatus=e.projectStatus,this.onlyStarredProjects=e.onlyStarredProjects,this.publishedStartDate=e.publishedStartDate,this.publishedEndDate=e.publishedEndDate,null!=e.sortBy&&(this.sortBy=app.utility.EnsureObservable(e.sortBy)),null!=e.sortOrder&&(this.sortOrder=app.utility.EnsureObservable(e.sortOrder)),null!=e.orderBy&&(this.orderBy=e.orderBy),t.isObservable(this.listMode)||(this.listMode=t.observable(this.listMode)),this.isMarkingAsRead=t.observable(!1),this.subscriptions.push(this.url=t.pureComputed(function(e){return function(){var n;return n="v/2/messages.json","homeMessages"===e.filterKey?n="v/2/messagereplies/unread.json":"projectMessages"===e.filterKey&&0!==t.unwrap(e.projectId)&&(n=-1!==e.selectedCatId()?"v/2/projects/"+t.unwrap(e.projectId)+"/cat/"+t.unwrap(e.selectedCatId)+"/messages.json":"v/2/projects/"+t.unwrap(e.projectId)+"/messages.json"),n}}(this))),this.clientSort=new o("messages",{sortBy:this.sortBy,sortOrder:this.sortOrder,sortOptions:this.sortOptions}),this.data=new n(this.url,{listField:"posts",ItemClass:s,pageSize:25,initNumPagesToLoad:4,updatesAtBottom:t.observable(!0),sort:this.clientSort.sort,filter:{generateFilterParams:this.GetFilterParams},onLoad:function(t){return function(e,n,s){var i,a,o,r,l;if(t.totalUnread(parseInt(e.xhr.getResponseHeader("X-TotUnreadPosts"),10)),t.totalRecords(parseInt(e.xhr.getResponseHeader("X-Records"),10)),l=(null!=(i=null!=(a=null!=(o=app.currentRoute().queryParams)?o.scrollTo:void 0)?a:null!=(r=app.currentRoute().queryParams)?r.pmp:void 0)?i:"0")/1,!t.data.isLoading()&&l>0&&-1===app.utility.FindIndexByKeyValue(t.data.list(),"postId",l)&&t.data.hasMoreRecords())return t.data.LoadMore()}}(this)}),this.subscriptions.push(this.areAllMessagesRead=t.pureComputed(function(t){return function(){var e,n,s,i,a;if(0===t.list().length)return!0;for(e=t.list().length,a=t.list(),n=0,s=a.length;n<s;n++)i=a[n],i.isRead()&&e--;return e<1}}(this))),this.subscriptions.push(this.shared=app.shared.get("messages/"+this.filterKey)),this.shared(this),this.subscriptions.push(app.ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent)),this.subscriptions.push(this.hasFixedSecondaryNav=t.computed(function(t){return function(){return"projectMessages"!==t.filterKey&&app.hasFixedSecondaryNav()}}(this))),app.InitOnShow(this)}return e.prototype.OnShow=function(){},e.prototype.OnNotifyTWEvent=function(e){var n;"messageReply"===e.itemType?e.actionType===app.consts.ACTIONTYPE.UPDATED&&this.data.list().some(function(n){return t.unwrap(n.id)===e.itemId})&&this.data.LoadUpdates():"projectMessage"===e.itemType?null!=e.subType&&"droppedCategory"===e.subType?this.data.Sync():e.actionType===app.consts.ACTIONTYPE.UPDATED&&this.data.LoadUpdates():"message"===e.itemType&&("marked-read"===e.subType&&(n=app.utility.FindIndexByKeyValue(this.data.list(),"id",e.itemId))>-1&&null!=this.data.list()[n].isRead&&(this.totalUnread(this.totalUnread()-1),this.data.list()[n].isRead(!0)),e.actionType===app.consts.ACTIONTYPE.DELETED?(this.data.DeleteItemById(e.itemId),this.data.LoadUpdates()):"reactions"!==e.subType&&(this.data.list().some(function(e){return!0===t.unwrap(e.isEditing)})||("projectMessage"===e.itemType||"message"===e.itemType?(this.lastHeader(""),this.data.LoadUpdates()):"comment"!==e.itemType||"comment-deleted"!==e.subType&&"comment-new"!==e.subType||(this.lastHeader(""),this.data.LoadUpdates()))),e.actionType===app.consts.ACTIONTYPE.ADDED&&app.currentRoute().projectId===e.projectId&&this.data.LoadUpdates())},e.prototype.OnDropMessage=function(t){var e,n,s;null!=(null!=t?t.target:void 0)&&t.target.classList.contains("drop-target-messages")&&(t.target.classList.remove("catListDragHover"),(e=(null!=(n=null!=t&&null!=(s=t.element)?s.dataset.messageId:void 0)?n:0)/1)>0&&app.api.put("messages/"+e+".json",{post:{"category-id":t.item.id}}).then(function(t){return function(t){var n;return"OK"===t.response.STATUS?(app.flash.Success(app.tl("Message category updated")),n={eventTime:new Date,itemType:"projectMessage",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:e,subType:"droppedCategory",projectId:app.currentRoute().projectId,extraInfo:{isMultiple:!1,itemIds:e}},app.ko.postbox.publish("allTWEvents",n)):app.flash.Error(app.tl("Oops! Something went wrong, please try again"))}}()))},e.prototype.OnOverCategory=function(t){null!=(null!=t?t.container:void 0)&&t.container.classList.contains("drop-target-messages")&&t.container.classList.add("catListDragHover")},e.prototype.OnOutCategory=function(t){null!=(null!=t?t.container:void 0)&&t.container.classList.contains("drop-target-messages")&&t.container.classList.remove("catListDragHover")},e.prototype.isNewSection=function(t){var e;return"project"!==this.sortBy()&&(!!this.shouldShowHeaders&&(!!this.data.list().length&&(e=this.getSectionHeader(t),e!==this.lastHeader()?(this.lastHeader(e),!0):0===t||void 0)))},e.prototype.isNewProject=function(t){var e,n;return"project"===this.sortBy()&&(!!this.data.list().length&&(n=this.data.list()[t].projectId(),e=n!==this.lastProjectId,this.lastProjectId,this.lastProjectId=n,!(0!==t&&!e)||void 0))},e.prototype.getSectionHeader=function(e){var n,s;switch(s=this.data.list()[e],n="",this.sortBy()){case"lastupdated":n=app.utility.GetRelativeDate(t.unwrap(s.lastCommentDate));break;case"dateposted":n=app.utility.GetRelativeDate(t.unwrap(s.postedOn));break;case"lastupdated":n=app.utility.GetRelativeDate(t.unwrap(s.lastCommentDate));break;case"project":n=app.utility.SafeHTML(t.unwrap(s.project.name));break;case"category":n=app.utility.SafeHTML(""===t.unwrap(s.category.name)?app.tl("All Messages"):t.unwrap(s.category.name));break;case"author":n=app.utility.SafeHTML(t.unwrap(s.author.fullName));break;default:n=""}return n},e.prototype.DragulaMoves=function(t,e,n){return null!=n?n.classList.contains("w-message__drag"):void 0},e.prototype.GetFilterParams=function(){var e,n,s,i,a,o,r,l,c;return e={},this.isQuickView?e.getUnread=!0:e.getUnread=this.showUnreadOnly(),e.getEmoji=!0,e.showLatestPost=!0,e.formatMarkdown=!1,e.getReactions=!0,e.getReadStatus=!0,e.getCategoryPath=!0,e.orderBy=""+this.sortBy()+this.sortOrder(),this.useFilter?(e.sortBy=this.sortBy(),e.sortOrder=this.sortOrder(),this.filterText().trim().length>3&&(e.filterText=this.filterText().trim()),e.filterTagIds=null!=this.filterTagIds()?this.filterTagIds().join(","):"",null!=this.filterTagIds()&&this.filterTagIds().length>0&&(e.filterTagIds=this.filterTagIds().join(","),e.matchAllTags=this.matchAllTags()),("function"==typeof this.onlyStarredProjects?this.onlyStarredProjects():void 0)&&(e.onlyStarredProjects=this.onlyStarredProjects()),e.filterUserIds=null!=this.filterUserIds()?this.filterUserIds().join(","):"",e.filterProjectId=(null!=(n=this.filterProjectId())?n.length:void 0)?this.filterProjectId().join(","):this.projectId,e.notifiedUserId=null!=this.notifiedUserId()?this.notifiedUserId().join(","):"",this.isArchivedSelected()&&(e.showArchived=this.isArchivedSelected()),e.publishedStartDate=this.formattedStartDate(),e.publishedEndDate=this.formattedEndDate()):((null!=(s=t.unwrap(this.sortBy))?s.length:void 0)&&(null!=(i=t.unwrap(this.sortOrder))?i.length:void 0)&&(e.orderBy=""+this.sortBy()+this.sortOrder(),e.sortBy=this.sortBy(),e.sortOrder=this.sortOrder()),(null!=(a=t.unwrap(this.projectCompanyIds))?a.length:void 0)&&(e.projectCompanyIds=t.unwrap(this.projectCompanyIds).toString()),(null!=(o=t.unwrap(this.projectCategoryIds))?o.length:void 0)&&(e.projectCategoryIds=t.unwrap(this.projectCategoryIds).toString()),(null!=(r=t.unwrap(this.projectTagIds))?r.length:void 0)&&(e.projectTagIds=t.unwrap(this.projectTagIds).toString(),e.matchAllProjectTags=t.unwrap(this.matchAllProjectTags)),(null!=(l=t.unwrap(this.projectOwnerIds))?l.length:void 0)&&(e.projectOwnerIds=t.unwrap(this.projectOwnerIds).toString()),(null!=(c=t.unwrap(this.projectHealth))?c.length:void 0)&&"-1"!==t.unwrap(this.projectHealth).toString()&&(e.projectHealth=t.unwrap(this.projectHealth).toString(),e.projectHealths=t.unwrap(this.projectHealth).toString()),null!=t.unwrap(this.projectStatus)&&(e.projectType=t.unwrap(this.projectStatus)),null!=t.unwrap(this.onlyStarredProjects)&&(e.onlyStarredProjects=t.unwrap(this.onlyStarredProjects)),t.unwrap(this.unreadMessagesMineOnly)&&(e.notifiedUserId=app.loggedInUser.id()),null!=t.unwrap(this.publishedStartDate)&&(e.publishedStartDate=t.unwrap(this.publishedStartDate)),null!=t.unwrap(this.publishedEndDate)&&(e.publishedEndDate=t.unwrap(this.publishedEndDate))),e},e.prototype.MarkAllAsRead=function(){var e,n;return n=app.tl("Confirm"),e=this.hasActiveFilter()?app.tl("Are you sure you want to mark all matching messages and replies as read?"):app.tl("Are you sure you want to mark all messages and replies as read?"),app.modal.Show("confirm",{title:n,text:e,callback:function(e){return function(n){var s,i,a,o,r;if(!n.wasCancelled)return s=e.GetFilterParams(),r="messagereplies/markread.json",i=e.data.GetAllItems(),a=i.map(function(t){return{post:t,isRead:t.isRead(),hasUnReadReply:t.hasLatestReply()&&!t.latestReply.isRead()}}),o=e.totalUnread(),app.api.put(r,s).then(function(n){var s;return app.flash.Success(app.tl("Messages and replies marked as read")),i.forEach(function(t){return t.isRead(!0)}),e.totalUnread(0),s="LoadUpdates","unread"===t.unwrap(e.filterStatus)&&(s="Reload"),e.data[s]().then(function(){var t;return t={eventTime:new Date,actionType:app.consts.ACTIONTYPE.UPDATED,itemType:"messages-all-read"},app.ko.postbox.publish("allTWEvents",t)})}).catch(function(){return a.forEach(function(e){return e.post.isRead(t.unwrap(e.isRead))}),e.totalUnread(o)})}}(this)}),!1},e.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()}),null!=this.data&&(this.data.dispose(),this.data=null)},e}(),{viewModel:r,template:e}}.apply(e,s))&&(t.exports=i)},4046:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(164),n(1116),n(1118),n(1188),n(1015),n(1153),n(2853),n(1119)],void 0!==(i=function(t,e,n,s,i,o,r,l){var c;return c=function(){function r(r){var l,c,p,d,u,h,m,f,g,x,y,b,k,v,w,T,I,O,_,C,j;null==r&&(r={}),this.cacheListTab=a(this.cacheListTab,this),this.getSectionHeader=a(this.getSectionHeader,this),this.isNewSection=a(this.isNewSection,this),this.OnOutCategory=a(this.OnOutCategory,this),this.OnOverCategory=a(this.OnOverCategory,this),this.OnDropProject=a(this.OnDropProject,this),this.DragulaMoves=a(this.DragulaMoves,this),this.OnClickAddProject=a(this.OnClickAddProject,this),this.OnNotifyTWEvent=a(this.OnNotifyTWEvent,this),this.OnClickAddUpdate=a(this.OnClickAddUpdate,this),this.subscriptions=[],this.params=r,this.userId=null!=(d=r.userId)?d:0,this.companyId=null!=(u=r.companyId)?u:0,this.pageSize=null!=(y=r.pageSize)?y:50,this.type=r.type,this.mode=app.utility.EnsureObservable(null!=(b=r.mode)?b:""),this.shouldShowAddButton=null==(k=r.shouldShowAddButton)||k,this.showHeaderControls=null==(v=r.showHeaderControls)||v,this.allowClearFilter=null==(w=r.allowClearFilter)||w,this.allowDrag=null!=(T=r.allowDrag)&&T,this.isQuickView=null!=(I=r.isQuickView)&&I,this.shouldShowHeaders=null==(O=r.shouldShowHeaders)||O,p=[],p.push({text:app.tl("Default"),id:"starredcompanyname"}),p.push({text:app.tl("Last Worked On"),id:"lastworkedon"}),p.push({text:app.tl("Starred First"),id:"starredName"}),0===this.companyId&&p.push({text:app.tl("Company Name"),id:"companyName"}),p.push({text:app.tl("Latest Activity"),id:"lastActivityDate"}),p.push({text:app.tl("End Date"),id:"endDate"}),p.push({text:app.tl("Project Name"),id:"name"}),0===this.companyId&&p.push({text:app.tl("Owner Company First"),id:"ownerCompany"}),p.push({text:app.tl("Date Created"),id:"createdOn"}),this.sortOptions=this.params.sortOptions||p,this.modeOptions=this.params.modeOptions||[{html:'<i class="ico-view-list icon-tw"></i>',value:"list",alt:app.tl("List View")},{html:'<i class="ico-view-grid icon-tw"></i>',value:"grid",alt:app.tl("Grid View")}],this.switchingViews=t.observable(!1),this.totalRecords=t.observable(0),l=function(t){return function(e,n){var s;return null==n&&(n={}),null==n.isArray&&(n.isArray=!1),s=t.params[e],t.useFilters&&null==s&&(s=t.filters().parameters[e]),null==s&&(s=n.default),app.utility.EnsureObservable(s,n.isArray)}}(this),this.filterKey=null!=(h=r.filterKey)?h:"projectsList",this.persistFilter=null==(m=r.persistFilter)||m,this.subscriptions.push(this.filters=i.getFilter(this.filterKey,0,this.persistFilter)),this.useFilters=null==(f=t.unwrap(r.useFilters))||f,this.searchTerm=l("searchTerm"),this.firstLetter=l("firstLetter"),this.projectOwnerIds=l("projectOwnerIds",{isArray:!0}),this.projectHealth=l("projectHealth",{isArray:!0}),this.projectStatus=null!=this.params.projectStatus||null!=this.filters().parameters.projectStatus?l("projectStatus",{isArray:!0}):l("status",{isArray:!0}),this.companyIds=null!=this.params.projectCompanyIds||null!=this.filters().parameters.projectCompanyIds?l("projectCompanyIds",{isArray:!0}):l("companyIds",{isArray:!0}),this.categoryIds=null!=this.params.projectCategoryIds||null!=this.filters().parameters.projectCategoryIds?l("projectCategoryIds",{isArray:!0}):l("categoryIds",{isArray:!0}),this.includeSubCategories=l("includeSubCategories"),this.filterTagIds=null!=this.params.projectTagIds||null!=this.filters().parameters.projectTagIds?l("projectTagIds",{isArray:!0}):l("filterTagIds",{isArray:!0}),this.matchAllTags=l(null!=this.params.matchAllProjectTags||null!=this.filters().parameters.matchAllProjectTags?"matchAllProjectTags":"matchAllTags"),this.onlyStarredProjects=l("onlyStarredProjects"),this.hideObservedProjects=l("hideObservedProjects"),this.onlyProjectsWithExplicitMembership=l("onlyProjectsWithExplicitMembership"),this.includeArchivedProjects=l("includeArchivedProjects"),this.sortBy=l("sortBy",{default:"name"}),this.sortOrder=l("sortOrder",{default:"asc"}),this.portfolioBoardIds=l("portfolioBoardIds"),this.portfolioColumnIds=l("portfolioColumnIds"),this.workedOnAfterDateTime=l("workedOnAfterDateTime"),this.workedOnBeforeDateTime=l("workedOnBeforeDateTime"),this.workedOnDateCode=l("workedOnDateCode"),this.workedOnDateCustomInterval=l("workedOnDateCustomInterval"),this.minBudgetCapacityUsedPercent=l("minBudgetCapacityUsedPercent"),this.maxBudgetCapacityUsedPercent=l("maxBudgetCapacityUsedPercent"),this.customFieldFilters=l("customFields"),this.includesSort=this.filters().includesSort,this.hasActiveFilter=this.filters().active,this.subscriptions.push(this.categories=o.noSpecialCategories(o.getCategories("projects",0))),this.subscriptions.push(this.availableSubCategories=t.computed(function(t){return function(){var e,n,s,i,a,r,l,c,p,d,u,h,m,f,g;if(null==t.categoryIds())return[];if("0"===t.categoryIds().toString())return[];for(g=[],u=t.categoryIds(),a=0,c=u.length;a<c;a++)if(s=u[a],null!=(i=o.getCategory(t.categories(),s))&&(null!=(h=i.children)?h.length:void 0))for(m=i.children,r=0,p=m.length;r<p;r++)for(e=m[r],g.push(e.id),f=e.children,l=0,d=f.length;l<d;l++)n=f[l],g.push(n.id);return g}}(this))),this.letters=t.observableArray([]),c=r.listMode,this.useFilters&&(null==c&&(c=app.loggedInUser.preferences[this.filterKey+"ListMode"]),this.sortByPreference=app.loggedInUser.preferences[this.filterKey+"SortBy"],this.sortOrderPreference=app.loggedInUser.preferences[this.filterKey+"SortOrder"],_=function(t){return function(){if(!t.includesSort())return t.sortBy(t.sortByPreference()),t.sortOrder(t.sortOrderPreference())}}(this),this.subscriptions.push(this.includesSort.subscribe(_)),this.subscriptions.push(this.sortBy.subscribe(this.sortByPreference)),this.subscriptions.push(this.sortOrder.subscribe(this.sortOrderPreference)),_()),this.listMode=app.utility.EnsureObservable(c||"list"),this.subscriptions.push(this.canAddProjects=t.pureComputed(function(t){return function(){return!!t.shouldShowAddButton&&(app.loggedInUser.administrator()||app.loggedInUser.permissions.canAddProjects())}}(this))),this.subscriptions.push(this.hasFixedSecondaryNav=t.computed(function(t){return function(){var t,e;if(null==app.currentFilter())return!1;switch(t=app.currentRoute(),e=app.currentScrollTop(),t.page){case"projects":return e>275;case"person":return e>293;case"company":return e>282}}}())),this.uniqueId=Date.now()+"-project-list",this.subscriptions.push(this.currentProjectsPageTab=t.pureComputed(function(t){return function(){return app.currentRoute().projectsPageTab}}())),"projectsList"===this.filterKey&&null!=this.currentProjectsPageTab()&&(app.cache.set("last-projects-section","list"),this.subscriptions.push(this.currentProjectsPageTab.subscribe(this.cacheListTab)),this.cacheListTab(this.currentProjectsPageTab())),this.subscriptions.push(this.noProjectsMsg=t.pureComputed(function(t){return function(){return"templates"===t.type?t.hasActiveFilter()?app.tl("There are no project templates that match your search"):app.tl("There are no project templates at the moment"):t.hasActiveFilter()?app.tl("There are no projects that match your search"):t.canAddProjects()?app.tl("When you add projects, you'll see them listed here."):app.tl("There are no projects at the moment.")}}(this))),this.buttonText="templates"===this.type?app.tl("Add a Project Template"):app.tl("Add a Project"),this.subscriptions.push(this.blankStateTitle=t.pureComputed(function(t){return function(){return"templates"===t.type?t.hasActiveFilter()?app.tl("No Project Templates Found"):app.tl("No Project Templates"):t.hasActiveFilter()?app.tl("No Projects Found"):app.tl("No Projects to List")}}(this))),this.subscriptions.push(this.cssClasses=t.pureComputed(function(t){return function(){var e;return e=[],e.push("s-projects-list--"+t.listMode()),t.hasFixedSecondaryNav()&&e.push("s-projects-list--has-fixed-headers"),t.isQuickView&&e.push("s-projects-list--quickview"),"homeDashboard"===t.filterKey&&e.push("s-projects-list--dashboard"),e.join(" ")}}(this))),this.subscriptions.push(this.currentCategoryId=t.pureComputed(function(t){return function(){return app.currentRoute().categoryId()}}())),j=null!=(g=r.type)?g:"",j.length&&(j="/"+j),C=null!=(x=r.endpoint)?x:app.prefixApi("projects"+j+".json","API_PREFIX_V2","API_PREFIX_V2"),this.data=new e(C,{ItemClass:n,listField:"projects",pageSize:t.unwrap(this.pageSize),callbackBeforeRender:function(e){return function(e,n,i){var a,o,r,l,c,p,d,u;if(null!=i)for(o=0,r=e.length;o<r;o++)l=e[o],c=~~l.id(),u=null!=(p=i.updates)?p.find(function(t){return~~t.projectId===c}):void 0,null!=u&&(null==l.update&&(l.update={}),t.mapping.fromJS(u,{},l.update)),null!=(a=null!=(d=i.budgets)?d[c]:void 0)&&null==l.budget&&(l.budget=new s(a))}}(),filter:{generateFilterParams:function(e){return function(){var n,s,i,a;return r={getPermissions:!0,getNotificationSettings:!1,getDateInfo:!0,searchCompany:!0,formatMarkdown:!1,getActivePages:!0,includeUpdates:!0,includeProjectOwner:!0,include:"budgets",returnLetters:!0,orderBy:e.sortBy(),orderMode:e.sortOrder()},"grid"===e.listMode()&&(r.includeTopPeople=!0),("function"==typeof e.searchTerm?e.searchTerm():void 0)&&e.searchTerm().trim().length&&(r.searchTerm=e.searchTerm().trim()),null!=e.firstLetter&&(r.firstLetter=e.firstLetter()),t.unwrap(e.userId)>0&&(r.userId=t.unwrap(e.userId)),e.companyId>0?r.projectCompanyIds=e.companyId:null!=e.companyIds&&(null!=(s=e.companyIds())?s.length:void 0)&&(r.projectCompanyIds=e.companyIds().toString()),e.currentCategoryId()>-1?r.projectCategoryIds=e.currentCategoryId():(null!=(i=e.categoryIds())?i.length:void 0)&&(r.projectCategoryIds=e.categoryIds().toString()),e.includeSubCategories()&&e.availableSubCategories().length>0&&(r.projectCategoryIds+=","+e.availableSubCategories().join(",")),null!=e.filterTagIds()&&e.filterTagIds().length>0&&(r.projectTagIds=e.filterTagIds().toString(),r.matchAllProjectTags=e.matchAllTags()),("function"==typeof e.projectOwnerIds?e.projectOwnerIds():void 0)&&(r.projectOwnerIds=e.projectOwnerIds().toString()),("function"==typeof e.projectHealth?e.projectHealth():void 0)&&"-1"!==e.projectHealth().toString()&&(r.projectHealth=e.projectHealth().toString()),("function"==typeof e.portfolioBoardIds?e.portfolioBoardIds():void 0)&&(r.portfolioBoardIds=e.portfolioBoardIds().toString()),("function"==typeof e.portfolioColumnIds?e.portfolioColumnIds():void 0)&&(r.portfolioColumnIds=e.portfolioColumnIds().toString()),("function"==typeof e.minBudgetCapacityUsedPercent?e.minBudgetCapacityUsedPercent():void 0)&&(r.minBudgetCapacityUsedPercent=e.minBudgetCapacityUsedPercent()),("function"==typeof e.maxBudgetCapacityUsedPercent?e.maxBudgetCapacityUsedPercent():void 0)&&(r.maxBudgetCapacityUsedPercent=e.maxBudgetCapacityUsedPercent()),null!=e.currentProjectsPageTab()?r.status=e.currentProjectsPageTab():("function"==typeof e.projectStatus?e.projectStatus():void 0)?r.status=e.projectStatus():e.mode().length&&(r.status=e.mode().toString()),app.featureFlip.check("customfieldsprojects",{unwrap:!0})&&app.customFieldsHelper.addFilterParams(e.customFieldFilters(),r,"project"),r.onlyStarredProjects=e.onlyStarredProjects(),r.hideObservedProjects=e.hideObservedProjects(),r.onlyProjectsWithExplicitMembership=e.onlyProjectsWithExplicitMembership(),r.includeArchivedProjects=e.includeArchivedProjects(),("function"==typeof e.workedOnDateCode?e.workedOnDateCode():void 0)&&"anytime"!==(a=e.workedOnDateCode())&&"custom"!==a&&(n=app.utility.GetDatesFromRange(e.workedOnDateCode(),"YYYYMMDD",e.workedOnDateCustomInterval()),r.workedOnAfterDateTime=n.startDate,r.workedOnBeforeDateTime=n.endDate),r}}(this)},onLoad:function(t){return function(e){var n;return t.letters(app.utility.JoinNumbersInArray(null!=(n=e.response.letters)?n:[])),t.totalRecords(t.data.totalRecords())}}(this)}),this.data.on("dlError",function(t){return function(t){var e;if(e=t.responseJSON.error,e.indexOf("custom field filter")>-1&&e.indexOf("not found")>-1)return app.NextTick(function(){return app.flash.Error(app.tl("Custom field filter not found"),app.tl("One or more of the custom fields in your search was not found. The field may have been deleted"))})}}()),this.subscriptions.push(this.listIncremental=this.data.list.extend({incrementalArray:{initialCount:50,step:2}})),this.subscriptions.push(this.shared=app.shared.get("projects/"+this.filterKey)),this.shared(this),this.subscriptions.push(app.ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent)),app.InitOnShow(this)}return r.prototype.OnShow=function(){},r.prototype.OnClickAddUpdate=function(){},r.prototype.OnNotifyTWEvent=function(t){var e,n;if("projects"===t.itemType)return this.data.Sync();if("project"===t.itemType){if(t.actionType===app.consts.ACTIONTYPE.DELETED){if(this.data.list().filter(function(e){return e.id()/1==t.itemId/1}).length)return this.data.DeleteItemById(t.itemId),this.totalRecords(this.totalRecords()-1)}else if(t.actionType===app.consts.ACTIONTYPE.UPDATED)return"starred"!==(e=t.subType)&&"unstarred"!==e||!this.onlyStarredProjects()?"active"===(n=t.subType)||"archived"===n||""===n?this.data.Sync():"droppedCategory"===t.subType?this.data.Sync():this.data.LoadUpdates():this.data.Reload()}else if("projectSettings"===t.itemType)return this.data.LoadUpdates()},r.prototype.OnClickAddProject=function(){"company"===app.currentRoute().page?app.modal.Show("addOrEditProject",{presetCompanyId:this.companyId,presetCompanyName:this.companyName}):"templates"===this.type?app.modal.Show("addOrEditProject",{type:"template"}):app.modal.Show("addOrEditProject",{})},r.prototype.DragulaMoves=function(t,e,n){return null!=n?n.classList.contains("w-project__drag"):void 0},r.prototype.OnDropProject=function(t){var e,n,s;null!=(null!=t?t.target:void 0)&&t.target.classList.contains("drop-target-projects")&&(t.target.classList.remove("catListDragHover"),(e=(null!=(n=null!=t&&null!=(s=t.element)?s.dataset.projectId:void 0)?n:0)/1)>0&&app.api.put("projects/"+e+".json",{project:{"category-id":t.item.id}}).then(function(t){return function(t){var n;return"OK"===t.response.STATUS?(app.flash.Success(app.tl("Project category updated")),n={eventTime:new Date,itemType:"project",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:e,subType:"droppedCategory",projectId:e,extraInfo:{isMultiple:!1,itemIds:e}},app.ko.postbox.publish("allTWEvents",n)):app.flash.Error(app.tl("Oops! Something went wrong, please try again"))}}()))},r.prototype.OnOverCategory=function(t){null!=(null!=t?t.container:void 0)&&t.container.classList.contains("drop-target-projects")&&t.container.classList.add("catListDragHover")},r.prototype.OnOutCategory=function(t){null!=(null!=t?t.container:void 0)&&t.container.classList.contains("drop-target-projects")&&t.container.classList.remove("catListDragHover")},r.prototype.isNewSection=function(t){var e,n;if(!this.shouldShowHeaders)return!1;if(!this.data.list().length)return!1;if("name"===this.sortBy())return!1;if(0===t)return!0;switch(e=this.data.list()[t],n=this.data.list()[t-1],this.sortBy().toLowerCase()){case"starredcompanyname":case"companyname":case"ownercompany":return e.company.name()!==n.company.name();case"name":return l.getFirstLetter(e.name()).toUpperCase()!==l.getFirstLetter(n.name()).toUpperCase();case"lastactivitydate":return moment(e.lastChangedOn()).format("YYYYMMDD")!==moment(n.lastChangedOn()).format("YYYYMMDD");case"lastworkedon":return moment(e.lastWorkedOn()).format("YYYYMMDD")!==moment(n.lastWorkedOn()).format("YYYYMMDD");case"enddate":return e.endDate()!==n.endDate();case"createdon":return moment(e.createdOn()).format("YYYYMMDD")!==moment(n.createdOn()).format("YYYYMMDD");default:return!1}},r.prototype.getSectionHeader=function(t){var e;switch(e=this.data.list()[t],this.sortBy().toLowerCase()){case"starredcompanyname":case"companyname":case"ownercompany":return app.utility.SafeHTML(e.company.name());case"name":return l.getFirstLetter(e.name()).toUpperCase()+".";case"lastactivitydate":return app.utility.GetRelativeDate(moment(e.lastChangedOn()));case"lastworkedon":return moment(e.lastWorkedOn()).isValid()?app.utility.GetRelativeDate(moment(e.lastWorkedOn())):app.tl("Not worked on yet");case"enddate":return moment(e.endDate()).isValid()?app.utility.GetRelativeDate(moment(e.endDate())):app.tl("No dates set");case"createdon":return app.utility.GetRelativeDate(moment(e.createdOn()));default:return""}},r.prototype.cacheListTab=function(t){if(null!=t&&isNaN(parseInt(t,10))&&!["portfolio","chart","templates"].includes(t))return app.cache.set("last-projects-list-section",t)},r.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()}),null!=this.data&&this.data.dispose()},r}(),{viewModel:c,template:r}}.apply(e,s))&&(t.exports=i)},4055:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(2868)],void 0!==(i=function(t){var e;return e=function(){function t(t){null==t&&(t={}),this.OnClickAddEvent=a(this.OnClickAddEvent,this),this.subscriptions=[],this.subscriptions.push(this.shared=app.shared.get("events/list"))}return t.prototype.OnShow=function(){},t.prototype.OnClickAddEvent=function(){return app.modal.Show("addOrEditEvent")},t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:e,template:t}}.apply(e,s))&&(t.exports=i)},4064:function(t,e,n){var s,i;s=[n(164),n(2878),n(1116),n(1284),n(1117),n(1015)],void 0!==(i=function(t,e,n,s,i,a){var o;return o=function(){function t(t){null==t&&(t={}),this.subscriptions=[],this.subscriptions.push(this.filters=a.getFilter("allRisks")),this.hasActiveFilter=this.filters().active,this.showPendingRisks=t.showPendingRisks,this.showClosedRisks=t.showClosedRisks,this.showOpenRisks=t.showOpenRisks,this.projectCompanyIds=t.projectCompanyIds,this.projectCategoryIds=t.projectCategoryIds,this.projectTagIds=t.projectTagIds,this.matchAllProjectTags=t.matchAllProjectTags,this.projectOwnerIds=t.projectOwnerIds,this.projectHealth=t.projectHealth,this.projectStatus=t.projectStatus,this.onlyStarredProjects=t.onlyStarredProjects}return t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:o,template:e}}.apply(e,s))&&(t.exports=i)},4070:function(t,e,n){var s,i;s=[n(2886),n(1015)],void 0!==(i=function(t,e){var n;return n=function(){function t(t){var n;null==t&&(t={}),this.subscriptions=[],this.subscriptions.push(this.tasksFilters=e.getFilter("homeTodayTasks")),n=this.tasksFilters().parameters,this.filterText=n.filterText,this.projectId=n.projectId,this.priority=n.priority,this.dateCode=n.dateCode,this.startDate=n.startDate,this.endDate=n.endDate,this.dateCreatedCode=n.dateCreatedCode,this.createdAfterDate=n.createdAfterDate,this.createdBeforeDate=n.createdBeforeDate,this.createdDateCustomInterval=n.createdDateCustomInterval,this.includeBlockedTasks=n.includeBlockedTasks,this.includeCompletedTasks=n.includeCompletedTasks,this.responsiblePartyIds=n.responsiblePartyIds,this.assigneeCompanyIds=n.assigneeCompanyIds,this.assigneeTeamIds=n.assigneeTeamIds,this.includeAssigneeCompanies=n.includeAssigneeCompanies,this.includeAssigneeTeams=n.includeAssigneeTeams,this.followerIds=n.followerIds,this.creatorIds=n.creatorIds,this.tagIds=n.tagIds,this.matchAllTags=n.matchAllTags,this.excludeTagIds=n.excludeTagIds,this.matchAllExcludedTags=n.matchAllExcludedTags,this.onlyMyTasks=n.onlyMyTasks,this.onlyUntaggedTasks=n.onlyUntaggedTasks,this.showAllAssignedTasks=n.showAllAssignedTasks,this.includeUnassignedTasks=n.includeUnassignedTasks,this.dateCustomInterval=n.dateCustomInterval,this.includeOverdueTasks=n.includeOverdueTasks,this.includeTasksWithNoDate=n.includeTasksWithNoDate,this.ignoreStartDates=n.ignoreStartDates,this.onlyTasksWithTickets=n.onlyTasksWithTickets,this.showTasks=app.loggedInUser.preferences.homeTodayShowTasks,this.showMilestones=app.loggedInUser.preferences.homeTodayShowMilestones,this.showEvents=app.loggedInUser.preferences.homeTodayShowEvents,this.includeFollowedTasks=app.loggedInUser.preferences.homeTodayIncludeFollowedTasks,this.includeLateMilestones=app.loggedInUser.preferences.homeTodayIncludeLateMilestones,this.includeUpcomingMilestones=app.loggedInUser.preferences.homeTodayIncludeUpcomingMilestones,this.onlyAttendedEvents=app.loggedInUser.preferences.homeTodayOnlyAttendedEvents,this.notUsingDefaultTaskSettings=this.tasksFilters().active,this.unreadItems=[{title:app.tl("Comments"),preference:app.loggedInUser.preferences.projectSummaryUnreadCommentsMineOnly,options:[{label:app.tl("All unread comments"),defaultValue:!1},{label:app.tl("Only where I have been notified"),defaultValue:!0}]},{title:app.tl("Messages"),preference:app.loggedInUser.preferences.projectSummaryUnreadMessagesMineOnly,options:[{label:app.tl("All unread messages"),defaultValue:!1},{label:app.tl("Only where I have been notified"),defaultValue:!0}]}]}return t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:n,template:t}}.apply(e,s))&&(t.exports=i)},4113:function(t,e,n){var s,i;s=[n(2934)],void 0!==(i=function(t){var e;return e=function(){function t(t){null==t&&(t={}),this.subscriptions=[],this.iconId=ko.observable(t.iconId||""),this.svgClass=ko.observable(t.svgClass||"")}return t}(),{viewModel:e,template:t}}.apply(e,s))&&(t.exports=i)},4150:function(t,e,n){var s,i;s=[n(164),n(2978)],void 0!==(i=function(t,e){var n;return n=function(){function e(e){var n;null==e&&(e={}),this.subscriptions=[],this.text=null!=(n=e.text)?n:t.observable(""),this.subscriptions.push(this.graphic=t.pureComputed(function(t){return function(){switch(e.graphic){case"bar":return t.getBackgroundImageUrl("BarChart.svg");case"hbar":return t.getBackgroundImageUrl("HBarChart.svg");case"pie":return t.getBackgroundImageUrl("PieChart.svg");case"list":return t.getBackgroundImageUrl("List.svg");case"risk-list":return t.getBackgroundImageUrl("RiskList.svg");case"burndown":return t.getBackgroundImageUrl("Burndown.svg");default:return t.getBackgroundImageUrl("List.svg")}}}(this))),app.InitOnShow(this)}return e.prototype.OnShow=function(){},e.prototype.getBackgroundImageUrl=function(t){return"url('./tko/public/images/blank-metric/"+t+"')"},e.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},e}(),{viewModel:n,template:e}}.apply(e,s))&&(t.exports=i)},4151:function(t,e,n){var s,i;s=[n(164),n(2979)],void 0!==(i=function(t,e){var n;return n=function(){function t(t){var e;null==t&&(t={}),this.subscriptions=[],this.segments=null!=(e=t.segments)?e:[],app.InitOnShow(this)}return t.prototype.OnShow=function(){},t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:n,template:e}}.apply(e,s))&&(t.exports=i)},4165:function(t,e,n){var s,i;s=[n(164),n(2994)],void 0!==(i=function(t,e){var n;return n=function(){function e(e){var n,s,i,a,o;null==e&&(e={}),this.subscriptions=[],this.classes=null!=(n=e.classes)?n:[],this.color=null!=(s=e.color)?s:"",this.backgroundColor=null!=(i=e.backgroundColor)?i:"",this.borderColor=null!=(a=e.borderColor)?a:"",this.label=null!=(o=e.label)?o:"",console.assert(t.unwrap(this.label).length),this.subscriptions.push(this.uiStyles=t.pureComputed(function(e){return function(){var n;return n={},t.unwrap(e.color).length&&(n.color=t.unwrap(e.color)),t.unwrap(e.backgroundColor).length&&(n["background-color"]=t.unwrap(e.backgroundColor)),t.unwrap(e.borderColor).length&&(n.border="1px solid "+t.unwrap(e.borderColor)),n}}(this))),this.subscriptions.push(this.classString=t.pureComputed(function(e){return function(){return t.unwrap(e.classes).join(" ")}}(this))),app.InitOnShow(this)}return e.prototype.OnShow=function(){},e}(),{viewModel:n,template:e}}.apply(e,s))&&(t.exports=i)},4167:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(2996),n(245),n(1156),n(1151)],void 0!==(i=function(t,e,n,s){var i;return i=function(){function t(t){this.RenderChart=a(this.RenderChart,this);var e,n,i;console.assert(Array.isArray(t.data),t),console.assert(t.chartId.length,t),this.dataToPresent=t.data,this.chartId=t.chartId,this.chartOptions=null!=(e=t.chartOptions)?e:{},this.chartTitle=ko.unwrap(null!=(n=this.chartOptions.title)?n:""),this.chartHeight=null!=(i=this.chartOptions.height)?i:180,this.eventsKey=t.eventsKey||"",this.events=new s(this.eventsKey)}return t.prototype.RenderChart=function(){return e(function(t){return function(){return n.chart(t.chartId,{credits:{enabled:!1},navigation:{buttonOptions:{enabled:!1}},chart:{type:"pie",marginTop:0,marginBottom:0,height:t.chartHeight},title:null,tooltip:{enabled:!1},plotOptions:{pie:{innerSize:"85%",colors:t.ColorsFromData()},series:{cursor:"pointer",animation:!1,dataLabels:{enabled:!1},states:{hover:{enabled:!1}},events:{click:function(e){var n,s;return t.events.OnClick({name:null!=(n=t.dataToPresent[e.point.index])?n.name:void 0,key:null!=(s=t.dataToPresent[e.point.index])?s.key:void 0,chartId:t.chartId,element:"series",value:e.point.y})}}}},series:[{colorByPoint:!0,data:t.NumbersFromData()}],exporting:{allowHTML:!0,chartOptions:{title:{text:t.chartTitle},chart:{marginTop:40,marginBottom:10},legend:{enabled:!0},plotOptions:{series:{dataLabels:{enabled:!0,style:{color:"#777",fontSize:"11px",fontFamily:app.consts.FONTFAMILY,textOutline:"0px"},formatter:function(){return 0===this.y?"":this.point.name+" - "+Math.round(this.percentage)+"%"}}}}}}})}}(this))},t.prototype.ColorsFromData=function(){return this.dataToPresent.map(function(t){return t.color})},t.prototype.NumbersFromData=function(){return this.dataToPresent.map(function(t){return{name:t.label,y:t.number}})},t}(),{viewModel:i,template:t}}.apply(e,s))&&(t.exports=i)},4168:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(2997),n(245),n(1156),n(1151)],void 0!==(i=function(t,e,n,s){var i;return i=function(){function t(t){this.GenericEventHandler=a(this.GenericEventHandler,this),this.RenderChart=a(this.RenderChart,this);var e,n,i;console.assert(Array.isArray(t.data),t),console.assert(t.chartId.length,t),this.dataToPresent=t.data,this.chartId=t.chartId,this.chartOptions=null!=(e=t.chartOptions)?e:{},this.chartTitle=ko.unwrap(null!=(n=this.chartOptions.title)?n:""),this.chartHeight=null!=(i=this.chartOptions.height)?i:250,this.eventsKey=t.eventsKey||"",this.events=new s(this.eventsKey),app.InitOnShow(this)}return t.prototype.RenderChart=function(){return e(function(t){return function(){var e,s,i,a,o,r,l,c;return r=0,o=10,i=0,a=120,c=20,t.dataToPresent.length,s=1,l=.3,e=function(e){return t.GetMatchingColumn(e)},n.chart(t.chartId,{credits:{enabled:!1},navigation:{buttonOptions:{enabled:!1}},chart:{type:"bar",height:t.chartHeight,pointWidth:c,marginTop:r,marginRight:o,marginBottom:i,marginLeft:a,groupPadding:s,pointPadding:l,events:{load:function(e){return e.target.container.addEventListener("click",function(e){var n;if(e.target.dataset.label)return n=e.target.dataset,t.events.OnClick({name:n.label,key:n.key,chartId:t.chartId,element:"series",value:n.value})})}}},title:null,tooltip:{enabled:!1},plotOptions:{bar:{grouping:!1,shadow:!1},series:{events:{click:function(e){var n,s,i,a;return i=e.point,n=i.category,s=i.dataLabels,a=i.y,t.events.OnClick({name:n,key:s.key,chartId:t.chartId,element:"series",value:a})}},cursor:"pointer",animation:!1,borderWidth:0,borderRadius:2,dataLabels:{enabled:!1}}},xAxis:{categories:t.LabelsFromData(),lineWidth:0,tickLength:0,offset:0,labels:{useHTML:!0,style:{color:"#777",fontSize:"11px",cursor:"pointer",fontFamily:app.consts.FONTFAMILY},formatter:function(){var t;return t=e(this.value),null!=t?"<div class='w-metric--horizontal-bar-chart__axis-label' data-label='"+t.label+"' data-key='"+t.key+"' data-value='"+t.number+"'> <span>"+t.label+"</span> <span class='w-metric__content-axis-label' style='background-color: "+t.color+";'>"+t.number+"</span> </div>":this.value}}},yAxis:{visible:!1},legend:{enabled:!1},series:[{colorByPoint:!0,data:t.ChartDataFromDataToPresent(),pointWidth:3,colors:t.ColorsFromData()},{colorByPoint:!0,data:t.MaxDataToPresent(),pointWidth:30,dataLabels:{enabled:!1},colors:t.TransparentColours(),states:{hover:{color:"rgba(50, 50, 90, .03)"}}}],exporting:{allowHTML:!0,chartOptions:{title:{text:t.chartTitle}}}})}}(this))},t.prototype.ColorsFromData=function(){return this.dataToPresent.map(function(t){return t.color})},t.prototype.TransparentColours=function(){return this.dataToPresent.map(function(t){return"rgba(0, 0, 0, 0)"})},t.prototype.LabelsFromData=function(){return this.dataToPresent.map(function(t){return t.label})},t.prototype.GetMatchingColumn=function(t){var e;if(e=this.dataToPresent.filter(function(e){return e.label===t}),null!=e?e.length:void 0)return e[0]},t.prototype.ChartDataFromDataToPresent=function(){var t,e,n,s,i;for(s=[],i=this.dataToPresent,e=0,n=i.length;e<n;e++)t=i[e],s.push({y:t.number,dataLabels:{backgroundColor:t.color,key:t.key}});return s},t.prototype.MaxDataToPresent=function(){var t,e,n,s,i,a,o,r,l,c;for(r=0,l=this.dataToPresent,n=0,i=l.length;n<i;n++)e=l[n],e.number>r&&(r=e.number);for(t=.05*r,r+=t,o=[],c=this.dataToPresent,s=0,a=c.length;s<a;s++)e=c[s],o.push({y:r,dataLabels:{backgroundColor:e.color,key:e.key}});return o},t.prototype.GenericEventHandler=function(t){var e;return e={name:t.point.category,chartId:this.chartId,element:"series",value:t.point.y},this.events.Emit(t.type,e)},t.prototype.dispose=function(){null!=this.subscriptions&&this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:i,template:t}}.apply(e,s))&&(t.exports=i)},4169:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(2998),n(245),n(1156),n(1151)],void 0!==(i=function(t,e,n,s){var i;return i=function(){function t(t){this.UpdatePage=a(this.UpdatePage,this),this.RenderChart=a(this.RenderChart,this);var e,n,i,o,r;this.subscriptions=[],console.assert(Array.isArray(t.data),t),console.assert(t.chartId.length,t),this.dataToPresent=t.data,this.chartId=t.chartId,this.chartOptions=null!=(e=t.chartOptions)?e:{},this.chartTitle=ko.unwrap(null!=(n=this.chartOptions.title)?n:""),this.chartHeight=null!=(i=this.chartOptions.height)?i:250,this.eventsKey=t.eventsKey||"",this.events=new s(this.eventsKey),this.page=app.utility.EnsureObservable(null!=(o=this.chartOptions.page)?o:1),this.pageSize=app.utility.EnsureObservable(null!=(r=this.chartOptions.pageSize)?r:0),this.subscriptions.push(this.page.subscribe(this.UpdatePage)),this.subscriptions.push(this.pageSize.subscribe(this.UpdatePage)),this.subscriptions.push(this.pageOffsetStart=ko.pureComputed(function(t){return function(){return(t.page()-1)*t.pageSize()}}(this))),this.subscriptions.push(this.pageOffsetEnd=ko.pureComputed(function(t){return function(){return 0===t.pageSize()?t.dataToPresent.length-1:Math.min(t.dataToPresent.length-1,t.pageOffsetStart()+t.pageSize()-1)}}(this))),app.InitOnShow(this)}return t.prototype.RenderChart=function(){return e(function(t){return function(){var e,s,i;return s=50,t.dataToPresent.length,i=.1,e=function(e){return t.GetMatchingColumn(e)},n.chart(t.chartId,{credits:{enabled:!1},navigation:{buttonOptions:{enabled:!1}},chart:{type:"column",height:t.chartHeight,marginBottom:s,events:{load:function(e){return t.chart=e.target,t.UpdatePage(),e.target.container.addEventListener("click",function(e){var n;if(e.target.dataset.label)return n=e.target.dataset,t.events.OnClick({name:n.label,key:n.key,chartId:t.chartId,element:"series",value:n.value})})}}},title:null,tooltip:{enabled:!1},plotOptions:{column:{grouping:!1,shadow:!1,colors:t.ColorsFromData()},series:{events:{click:function(e){var n;return n=e.point,t.events.OnClick({name:n.category,key:n.dataLabels.key,chartId:t.chartId,element:"series",value:e.point.y})}},cursor:"pointer",animation:!1,borderWidth:0,borderRadius:2,dataLabels:{enabled:!1,color:"#ffffff"}}},yAxis:{visible:!1,tickInterval:i,max:t.MaxPoint()},xAxis:{categories:t.LabelsFromData(),min:t.pageOffsetStart(),max:t.pageOffsetEnd(),lineWidth:0,tickLength:0,labels:{useHTML:!0,style:{color:"#777",fontSize:"11px",cursor:"pointer",fontFamily:app.consts.FONTFAMILY},formatter:function(){var t;return t=e(this.value),null!=t?"<span class='flex flex-column flex-items-center' data-label='"+t.label+"' data-key='"+t.key+"' data-value='"+t.number+"'> <span class='w-metric__content-axis-label mb--small' style='background-color: "+t.color+";'>"+t.number+"</span> <span class='w-metric__content-axis-label-name'>"+t.label+"</span> </span>":this.value}}},legend:{enabled:!1},series:[{colorByPoint:!0,data:t.ChartDataFromDataToPresent(),pointWidth:30},{colorByPoint:!0,data:t.MaxDataToPresent(),pointWidth:80,dataLabels:{enabled:!1},colors:t.TransparentColours(),states:{hover:{color:"rgba(50, 50, 90, .03)"}}}],exporting:{allowHTML:!0,chartOptions:{title:{text:t.chartTitle}}}})}}(this))},t.prototype.TransparentColours=function(){return this.dataToPresent.map(function(t){return"rgba(0, 0, 0, 0)"})},t.prototype.MaxPoint=function(){var t,e,n,s,i,a;for(i=0,a=this.dataToPresent,n=0,s=a.length;n<s;n++)e=a[n],e.number>i&&(i=e.number);return t=.1*i,i+t},t.prototype.MaxDataToPresent=function(){var t,e,n,s,i;for(s=[],i=this.dataToPresent,e=0,n=i.length;e<n;e++)t=i[e],s.push({y:this.MaxPoint(),dataLabels:{backgroundColor:t.color,key:t.key}});return s},t.prototype.ColorsFromData=function(){return this.dataToPresent.map(function(t){return t.color})},t.prototype.LabelsFromData=function(){return this.dataToPresent.map(function(t){return t.label})},t.prototype.GetMatchingColumn=function(t){var e;if(e=this.dataToPresent.filter(function(e){return e.label===t}),null!=e?e.length:void 0)return e[0]},t.prototype.ChartDataFromDataToPresent=function(){var t,e,n,s,i;for(s=[],i=this.dataToPresent,e=0,n=i.length;e<n;e++)t=i[e],s.push({y:t.number,dataLabels:{backgroundColor:t.color,key:t.key}});return s},t.prototype.UpdatePage=function(t){null!=this.chart&&this.pageSize()>0&&this.chart.xAxis[0].setExtremes(this.pageOffsetStart(),this.pageOffsetEnd())},t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:i,template:t}}.apply(e,s))&&(t.exports=i)},4170:function(t,e,n){var s,i,a=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};s=[n(164),n(2999),n(3e3)],void 0!==(i=function(t,e,n){var s;return s=function(){function e(e){var s,i,o,r,l;null==e&&(e={}),this.subscriptions=[],this.tippedContent=n,this.options=null!=(s=e.options)?s:[],this.selected=null!=(i=e.selected)?i:t.observable(""),this.title=null!=(o=e.title)?o:t.observable(""),this.enabled=null!=(r=e.enabled)?r:t.observable(!0),console.assert(Array.isArray(t.unwrap(this.options),e)),console.assert(t.unwrap(this.options).length,e),console.assert(t.isObservable(this.selected,e)),l=this.selected(),a.call(t.unwrap(this.options).map(function(t){return t.id}),l)>=0||this.selected(t.unwrap(this.options)[0].id),this.subscriptions.push(this.selectedText=t.pureComputed(function(e){return function(){var n;return n=t.unwrap(e.options).filter(function(t){return t.id===e.selected()}),null!=n&&n.length?n[0].text:""}}(this))),app.InitOnShow(this)}return e.prototype.OnShow=function(){},e.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},e}(),{viewModel:s,template:e}}.apply(e,s))&&(t.exports=i)},4171:function(t,e,n){var s,i,a=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};s=[n(3001),n(245)],void 0!==(i=function(t,e){var n;return n=function(){function t(t){var e,n,s,i,o;o=["horizontal-bar","vertical-bar","donut"],console.assert((e=t.chartType,a.call(o,e)>=0),t),console.assert(Array.isArray(t.dataToPresent),t),this.chartType=t.chartType,this.data=t.dataToPresent,this.eventsKey=null!=(n=t.eventsKey)?n:"",this.chartId=null!=(s=t.chartId)?s:this.GenerateDivId(),this.chartOptions=null!=(i=t.chartOptions)?i:{},app.InitOnShow(this)}return t.prototype.GenerateDivId=function(){var t;return t=Math.random().toString(36).substring(5),"chartHolder_"+this.chartType+"_"+t},t.prototype.dispose=function(){null!=this.subscriptions&&this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:n,template:t}}.apply(e,s))&&(t.exports=i)},4176:function(t,e,n){var s,i;s=[n(164),n(3006)],void 0!==(i=function(t,e){var n;return n=function(){function t(t){var e,n,s,i,a,o;null==t&&(t={}),this.subscriptions=[],this.componentName="UIProjectHeader",this.id=app.utility.EnsureObservable(null!=(e=t.id)?e:0),this.name=app.utility.EnsureObservable(null!=(n=t.name)?n:""),this.companyId=app.utility.EnsureObservable(null!=(s=t.companyId)?s:0),this.companyName=app.utility.EnsureObservable(null!=(i=t.companyName)?i:""),this.uniqueId="projectDropdownHandle-"+Date.now(),this.showMenu=null==(a=t.showMenu)||a,this.allowSticky=null==(o=t.allowSticky)||o,app.InitOnShow(this)}return t.prototype.OnShow=function(){},t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:n,template:e}}.apply(e,s))&&(t.exports=i)},4180:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(164),n(3010)],void 0!==(i=function(t,e){var n;return n=function(){function e(e){var n,s,i,o,r,l,c;null==e&&(e={}),this.OnRendered=a(this.OnRendered,this),this.subscriptions=[],this.value=app.utility.EnsureObservable(null!=(n=e.value)?n:""),this.maxCharacterCount=app.utility.EnsureObservable(null!=(s=e.maxCharacterCount)?s:0),this.maxHeight=null!=(i=e.maxHeight)?i:400,this.placeholder=null!=(o=e.placeholder)?o:"",this.autocomplete=e.autocomplete,this.toolbar=e.toolbar,this.autofocus=null!=(r=e.autofocus)&&r,this.initCallback=null!=(l=e.initCallback)?l:function(){},this.uniqueId=null!=(c=e.uniqueId)?c:"ui-text-area_"+Date.now(),this.subscriptions.push(this.showTextWarning=t.pureComputed(function(t){return function(){return t.maxCharacterCount()>0&&t.value().length>t.maxCharacterCount()-50}}(this))),this.subscriptions.push(this.textWarning=t.pureComputed(function(t){return function(){var e;return"",e=t.maxCharacterCount()-t.value().length,"<span class='flex-self-center ml--auto "+(e>30?"text-muted":e>10?"text-warning":"text-danger")+"'>"+e+"</span>"}}(this))),app.InitOnShow(this)}return e.prototype.OnRendered=function(){"function"==typeof this.initCallback&&this.initCallback(document.getElementById(this.uniqueId))},e}(),{viewModel:n,template:e}}.apply(e,s))&&(t.exports=i)},4181:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(164),n(3011)],void 0!==(i=function(t,e){var n;return n=function(){function t(t){var e,n;null==t&&(t={}),this.OnClick=a(this.OnClick,this),this.subscriptions=[],this.callback=null!=(e=t.callback)?e:null,this.hint=null!=(n=t.hint)?n:app.tl("Mark as read"),app.InitOnShow(this)}return t.prototype.OnShow=function(){},t.prototype.OnClick=function(t,e){if(null!=this.callback&&"function"==typeof this.callback)return this.callback(t,e)},t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:n,template:e}}.apply(e,s))&&(t.exports=i)},4182:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(164),n(3012)],void 0!==(i=function(t,e){var n;return n=function(){function e(e){var n,s,i,o,r;null==e&&(e={}),this.dispose=a(this.dispose,this),this.getIconForItem=a(this.getIconForItem,this),this.formatItemTitle=a(this.formatItemTitle,this),this.OnNotifyTWEvent=a(this.OnNotifyTWEvent,this),this.subscriptions=[],this.subscriptions.push(t.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent)),this.componentName="WidgetActivity",this.displayMode=null!=(n=e.displayMode)?n:"list",this.item=null!=(s=e.item)?s:{},this.link=null!=(i=e.link)?i:"#",this.showDate=null==(o=e.showDate)||o,this.dateFormat=null!=(r=e.dateFormat)?r:"short",this.activityText=app.utility.RenderActivity(this.item),this.subscriptions.push(this.userWhoActed=t.pureComputed(function(t){return function(){return null==t.item.userId?"":parseInt(t.item.userId(),10)===parseInt(app.loggedInUser.id(),10)?app.tl("You"):t.item.userName()}}(this))),this.subscriptions.push(this.activityTimestamp=t.pureComputed(function(t){return function(){var e,n,s,i,a;return null==(null!=(s=t.item)?s.dateTime:void 0)||null==("undefined"!=typeof app&&null!==app&&null!=(i=app.loggedInUser)?i.localization:void 0)?"":(n=t.item.dateTime().format("YYYY")===moment().format("YYYYMMDD")?"MMM DD":"MMM DD, YYYY",e="<span class='w-activity__time-marker'>"+t.item.dateTime().format(n)+"</span> ",a=t.item.dateTime().format(app.loggedInUser.localization.timeFormat()),t.item.isToday()?(a=app.utility.GetPastRelativeTime(t.item.dateTime()),t.showDate?"<span class='w-activity__time-marker w-activity__time-marker--today'>"+app.tl("Today")+"</span> "+a:"<span class='w-activity__time-marker w-activity__time-marker--today w-activity__time-marker--empty'></span> "+a):t.item.isYesterday()?t.showDate?"<span class='w-activity__time-marker w-activity__time-marker--yesterday'>"+app.tl("Yesterday")+"</span> "+a:"<span class='w-activity__time-marker w-activity__time-marker--yesterday w-activity__time-marker--empty'></span> "+a:(t.showDate?e:"")+" "+a)}}(this))),this.subscriptions.push(this.itemTitle=t.pureComputed(this.formatItemTitle)),this.subscriptions.push(this.activityIcon=t.pureComputed(this.getIconForItem)),this.subscriptions.push(this.activityIconClass=t.pureComputed(function(t){return function(){return"w-activity__icon--"+t.activityIcon().type}}(this))),this.shouldSyncDateTime=this.item.isToday()||this.item.isYesterday(),this.updateRelativeDate=function(t){return function(){var e;if(null!=(null!=(e=t.item)?e.dateTime:void 0))return t.item.dateTime.valueHasMutated()}}(this),this.shouldSyncDateTime&&app.pulse.listen({interval:6e4,key:"global_",callback:this.updateRelativeDate}),app.InitOnShow(this)}return e.prototype.OnShow=function(){},e.prototype.OnNotifyTWEvent=function(t){},e.prototype.formatItemTitle=function(){var t,e;return t=app.utility.SafeHTML(this.item.link()),e=this.item.description().trim(),this.item.isComment()?"<a href='#/"+t+"'>"+app.utility.SafeHTML('"'+e+'"')+"</a>":"file"===this.item.type()?"<a href='#/"+t+"'>"+app.utility.SafeHTML(e)+" ("+app.utility.SafeHTML(this.item.publicInfo().replace("- 0 bytes",""))+")</a>":"<a href='#/"+t+"'>"+app.utility.SafeHTML(e)+"</a>"},e.prototype.getIconForItem=function(){var t,e,n;return t="comment"===this.item.type()?app.utility.GetSVGName("message"):app.utility.GetSVGName(this.item.type()),n=function(){switch(this.item.activityType()){case"new":case"reopened":case"newmessage":case"reply":case"added":case"completed":return"added";case"reacted":return"reacted w-activity__icon--reacted-"+this.item.reactionType();case"edited":case"deleted":case"liked":return this.item.activityType();default:return"all"}}.call(this),null!=(e=app.consts.UICOLORS[n])?e:"",{name:t+"-solid",color:"#ffffff",type:n}},e.prototype.dispose=function(){this.shouldSyncDateTime&&app.pulse.forget({interval:6e4,key:"global_",callback:this.updateRelativeDate}),this.subscriptions.forEach(function(t){return t.dispose()})},e}(),{viewModel:n,template:e}}.apply(e,s))&&(t.exports=i)},4185:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}},o=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};s=[n(164),n(3015),n(3016)],void 0!==(i=function(t,e,n){var s;return s=function(){function e(e){var s,i,r,l;null==e&&(e={}),this.getImageUrl=a(this.getImageUrl,this),this.OnClickView=a(this.OnClickView,this),this.subscriptions=[],this.tippedContent=n,this.item=null!=(s=e.item)?s:null,this.itemType=null!=(i=e.itemType)?i:null,this.itemId=null!=(r=e.itemId)?r:null,this.openNewTab=null!=(l=e.openNewTab)?l:null,this.parentItem=t.unwrap(e.parentItem),this.subscriptions.push(this.itemAsObservable=t.pureComputed(function(e){return function(){return null==e.item?null:t.mapping.fromJS(e.item,{})}}(this))),this.subscriptions.push(this.fileTooBig=t.pureComputed(function(t){return function(){return parseInt(t.item.size(),10)>app.consts.FILEPREVIEWSIZELIMITS.GOOGLE}}(this))),this.subscriptions.push(this.isDisplayableImage=t.pureComputed(function(t){return function(){var e;return e=t.item.extension().toLowerCase(),o.call(app.consts.FILES.DISPLAYABLEIMAGE,e)>=0}}(this))),this.subscriptions.push(this.isViewableFile=t.pureComputed(function(t){return function(){var e;return e=t.item.extension().toLowerCase(),o.call(app.consts.FILES.VIEWABLEFILETYPES,e)>=0}}(this))),this.subscriptions.push(this.isViewableDropboxFile=t.pureComputed(function(t){return function(){var e;return e=t.item.extension().toLowerCase(),o.call(app.consts.FILES.VIEWABLEDROPBOXFILETYPES,e)>=0}}(this))),this.subscriptions.push(this.isPreviewableFile=t.pureComputed(function(t){return function(){var e,n;if(!(null!=(e=app.account)&&"function"==typeof e.canPreviewFiles?e.canPreviewFiles():void 0))return"teamworkpm"===t.item.fileSource()&&(t.isDisplayableImage()||t.item.isPlayableVideo());if("onedrive"===t.item.fileSource()&&!t.isDisplayableImage())return!1;if("onedrivebusiness"===t.item.fileSource()||"sharepoint"===t.item.fileSource()){if(!t.isViewableFile()&&!t.isDisplayableImage())return!1;if(n=t.item.extension(),o.call(app.consts.FILES.ODB_BLOCKED_PREVIEW,n)>=0)return!1}if("teamworkpm"===t.item.fileSource()){if(!t.isViewableFile()&&!t.isDisplayableImage())return!1;if(t.fileTooBig())return!1}if("dropbox"===t.item.fileSource()){if(!t.isViewableDropboxFile()&&!t.isDisplayableImage())return!1;if(t.fileTooBig())return!1}return!0}}(this))),app.InitOnShow(this)}return e.prototype.OnShow=function(){},e.prototype.OnClickView=function(e,n){var s,i,a,o,r,l;return this.openNewTab||n.ctrlKey||n.metaKey?(window.open("./?action=viewFile&fileId="+this.item.id()+"&v="+this.item.version()),!1):"teamworkpm"===this.item.fileSource()&&this.fileTooBig()&&!this.item.isPlayableVideo()?(window.open("./?action=viewFile&fileId="+this.item.id()+"&v="+this.item.version()+"&display=true"),!1):(o=null!=this.itemType?t.unwrap(this.itemType):null!=this.parentItem.commentableType?t.unwrap(this.parentItem.commentableType):"",a=null!=this.itemId?t.unwrap(this.itemId):null!=this.parentItem.commentableId?t.unwrap(this.parentItem.commentableId):0,"todo_items"===o&&(o="Task"),s={type:o,id:a,projectId:this.item.projectId(),attachedVM:this.parentItem},i=null!=(l=this.parentItem.filteredItems)?l:[],null!=this.parentItem.attachments&&(i=this.parentItem.attachments),this.isPreviewableFile()||this.item.isPlayableVideo()&&!this.item.isBlockedVideo()?(r={version:this.item.version(),filteredItems:i,attachedTo:s},this.isDisplayableImage()?(r.item=this.item,app.modal.Show("previewImages",r)):(r.file=this.item,app.modal.Show("previewFile",r))):window.open("./?action=viewFile&fileId="+this.item.id()+"&v="+this.item.version()+"&display=true"),!1)},e.prototype.getImageUrl=function(){return"url('"+this.item.thumbnail()+"'), url('./images/newui/file-icons/medium/"+app.GetIcon(t.unwrap(this.item.filename))+"'), url('//cdn.teamwork.com/images/newui/file-icons/large/raster.png')"},e.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},e}(),{viewModel:s,template:e}}.apply(e,s))&&(t.exports=i)},4186:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(164),n(3017)],void 0!==(i=function(t,e){var n;return n=function(){function e(e){var n,s;null==e&&(e={}),this.OnClickToggleAttachments=a(this.OnClickToggleAttachments,this),this.OnClickDownloadAll=a(this.OnClickDownloadAll,this),this.subscriptions=[],this.parentItem=t.unwrap(e.parentItem),this.attachments=null!=(n=e.attachments)?n:[],this.openNewTab=null!=(s=e.openNewTab)?s:null,this.isShowingAttachments=t.observable(!0),t.isObservable(this.attachments)||(this.attachments=t.observableArray(this.attachments)),this.subscriptions.push(this.canDownloadAllAttachments=t.pureComputed(function(e){return function(){var n;return null!=e.attachments()&&e.attachments().length>1&&(n=e.attachments().filter(function(e){var n;return"teamworkpm"===(n=t.unwrap(e.fileSource))||"normal"===n}),n.length>0)}}(this))),this.subscriptions.push(this.attachmentsToggleMsg=t.pureComputed(function(t){return function(){return t.isShowingAttachments()?app.tl("Hide"):app.tl("Show")}}(this))),app.InitOnShow(this)}return e.prototype.OnShow=function(){},e.prototype.OnClickDownloadAll=function(){var e,n;if(n=this.attachments().map(function(e){return t.unwrap(e.id)}),n.length)return e={fileIds:n.toString()},app.api.post("files/archive.json",e).then(function(t){return window.location.assign(t.response.downloadURL)})},e.prototype.OnClickToggleAttachments=function(){return this.isShowingAttachments(!this.isShowingAttachments()),!1},e.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},e}(),{viewModel:n,template:e}}.apply(e,s))&&(t.exports=i)},4202:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(164),n(3040),n(3041),n(1189)],void 0!==(i=function(t,e,n,s){var i;return i=function(){function e(e){var s,i,o,r,l,c,p;null==e&&(e={}),this.showProjectQuickview=a(this.showProjectQuickview,this),this.GetBreadcrumbSegments=a(this.GetBreadcrumbSegments,this),this.OnRenderedComment=a(this.OnRenderedComment,this),this.OnClickToggle=a(this.OnClickToggle,this),this.subscriptions=[],this.componentName="WidgetComment",this.tippedContent=n,this.mode=null!=(s=e.mode)?s:"view",this.item=null!=(i=e.item)?i:null,this.displayMode=null!=(o=e.displayMode)?o:"list",this.showAuthor=null==(r=e.showAuthor)||r,this.showBreadcrumb=null==(l=e.showBreadcrumb)||l,this.showProjectInBreadcrumb=null==(c=e.showProjectInBreadcrumb)||c,this.allowReply=null!=(p=e.allowReply)&&p,this.isAdmin=app.loggedInUser.administrator(),this.canGoToUser=this.isAdmin||app.loggedInUser.permissions.canManagePeople()||app.loggedInUser.inOwnerCompany()&&app.loggedInUser.isAccount()||parseInt(e.personId,10)===app.loggedInUser.id(),this.maxLength=200,this.showShortBody=t.observable(this.item.body().length>=200),t.isObservable(this.displayMode)||(this.displayMode=t.observable(this.displayMode)),this.openNewTab="expanded"!==this.displayMode(),this.subscriptions.push(this.timeToDisplay=t.pureComputed(function(t){return function(){return t.item.datetime().diff(new Date,"days")>-1?app.utility.GetPastRelativeTime(t.item.datetime()):moment().format("YYYY")===t.item.datetime().format("YYYY")?t.item.datetime().format("ddd MMM Do, "+app.loggedInUser.localization.timeFormat()):t.item.datetime().format("ddd MMM Do, YYYY "+app.loggedInUser.localization.timeFormat())}}(this))),this.subscriptions.push(this.project=t.pureComputed(function(e){return function(){return null!=e.item.projectId&&e.item.projectId()>0?t.unwrap(app.projectInfo.get(e.item.projectId())):null}}(this))),this.subscriptions.push(this.readOnly=t.pureComputed(function(t){return function(){var e;return(null!=(e=t.project())?e.isTemplate():void 0)&&!app.loggedInUser.permissions.canManageProjectTemplates()}}(this))),this.subscriptions.push(this.isCommentable=t.pureComputed(function(e){return function(){return!e.readOnly()&&null!=t.unwrap(e.item.commentableItem)}}(this))),this.subscriptions.push(this.canEdit=t.pureComputed(function(e){return function(){var n,s,i;return!e.readOnly()&&(t.unwrap(null!=(n=app.loggedInUser)?n.administrator:void 0)||t.unwrap(null!=(s=e.project())&&null!=(i=s.permissions)?i.projectAdministrator:void 0)||e.item.canEdit()&&!e.item.editExpired())}}(this))),this.subscriptions.push(this.isEditing=t.pureComputed(function(e){return function(){if(t.unwrap(e.item.isEditing))return"w-comment--is-editing"}}(this))),app.InitOnShow(this)}return e.prototype.OnShow=function(){},e.prototype.OnClickToggle=function(){this.showShortBody(!this.showShortBody())},e.prototype.OnRenderedComment=function(t){if(app.currentRoute().commentId/1==this.item.id()/1)return app.currentRoute().commentId=0,app.utility.ScrollIntoViewIfNeeded(t),app.utility.Highlight(t,300),this.item.MarkAsRead(!1)},e.prototype.GetBreadcrumbSegments=function(e){var n,s;return n=[],s=function(e){var n;return e=t.unwrap(e),n=function(){switch(e){case"todo_items":case"tasks":case"task":case"todo_item":return app.tl("Task");case"links":return app.tl("Link");case"notebooks":return app.tl("Notebook");case"files":return app.tl("File");case"milestones":return app.tl("Milestone");case"projectUpdate":return app.tl("Project Update");default:return""}}(),n.length?n+": ":""},this.showProjectInBreadcrumb&&n.push({link:"#/projects/"+e.projectId(),linkText:app.utility.SafeHTML(e.shortProjectName),onPressV:this.showProjectQuickview}),n.push({icon:app.utility.GetSVGName(e.commentableType),iconColor:app.consts.UICOLORS.all,link:e.commentLink,linkText:""+s(e.commentableType)+app.utility.SafeHTML(e.itemName()),onClick:e.QuickViewItem,onPressV:e.QuickViewItem}),n},e.prototype.showProjectQuickview=function(){var e;if(null!=(e=this.project())&&"function"==typeof e.id?e.id():void 0)return app.quickView.show("project",{id:this.project().id(),project:this.project().id(),title:t.observable("<a href='#projects/"+this.project().id()+"'>"+app.utility.SafeHTML(this.project().name())+"</a>"),projectId:this.project().id(),isQuickView:!0})},e.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},e}(),{viewModel:i,template:e}}.apply(e,s))&&(t.exports=i)},4211:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(3051),n(164)],void 0!==(i=function(t,e){var n;return n=function(){function t(t){var n;null==t&&(t={}),this.OnClickEdit=a(this.OnClickEdit,this),this.OnClickToggle=a(this.OnClickToggle,this),this.subscriptions=[],this.isCollapsed=app.loggedInUser.preferences.dashboardMessageCollapsed,this.content=null!=(n=t.content)?n:app.account.dashboardMessageHTML,this.content=app.utility.EnsureObservable(this.content),this.subscriptions.push(this.canAddAnnouncement=e.pureComputed(function(t){return function(){return app.loggedInUser.administrator()&&app.loggedInUser.inOwnerCompany()}}()))}return t.prototype.OnClickToggle=function(t,e){return e.stopPropagation(),this.isCollapsed(!this.isCollapsed())},t.prototype.OnClickEdit=function(t,e){e.stopPropagation(),this.canAddAnnouncement&&app.modal.Show("editAnnouncement",{type:"dashboard"})},t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:n,template:t}}.apply(e,s))&&(t.exports=i)},4216:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(164),n(3056),n(3057)],void 0!==(i=function(t,e,n){var s;return s=function(){function e(e){null==e&&(e={}),this.SubmitDeleteEvent=a(this.SubmitDeleteEvent,this),this.OnClickModifyProperties=a(this.OnClickModifyProperties,this),this.OnClickDeleteEvent=a(this.OnClickDeleteEvent,this),this.OnClickEditEvent=a(this.OnClickEditEvent,this),this.OnClickShowQuickView=a(this.OnClickShowQuickView,this),console.assert(e.item),this.subscriptions=[],this.tippedContent=n,this.event=e.item,this.title=this.event.title,this.location=this.event.where,this.attendeeArray=this.event.attendeesArray,this.eventTypeName=null!=this.event.type.name?this.event.type.name:"",this.subscriptions.push(this.eventTypeColor=t.pureComputed(function(t){return function(){return null!=t.event.type.color?"#"!==t.event.type.color().charAt(0)?"#"+t.event.type.color():t.event.type.color():""}}(this))),this.timeFormat=app.loggedInUser.localization.timeFormat(),this.dateFormat=app.loggedInUser.localization.dateFormat().toUpperCase(),this.subscriptions.push(this.eventTimes=t.pureComputed(function(e){return function(){var n,s,i,a;return e.event?(n=t.unwrap(e.event.realAllDay),i=t.unwrap(e.event.start),s=t.unwrap(e.event.realEnd),a="",n?app.tl("All Day"):(a+="",i.clone().startOf("day").isSame(s.clone().startOf("day"))?n?a+=i.format(e.dateFormat):(a+=i.format(e.timeFormat),i.format("HH:mm")!==s.format("HH:mm")&&(a+=" - ",a+=s.format(e.timeFormat))):(n||(a+=i.format(e.timeFormat)+" "),a+=i.format(e.dateFormat),a+=" - ",n||(a+=s.format(e.timeFormat)+" "),a+=s.format(e.dateFormat)),a)):""}}(this))),app.InitOnShow(this)}return e.prototype.OnShow=function(){},e.prototype.OnClickShowQuickView=function(){var e;e={title:app.utility.SafeHTML(this.title),event:this.event,id:t.unwrap(this.event.id)},app.quickView.show("event",e)},e.prototype.OnClickEditEvent=function(){app.modal.Show("addOrEditEvent",{event:this.event})},e.prototype.OnClickDeleteEvent=function(){var t,e,n;null!=(null!=(e=this.event)?e.repeat.ends:void 0)?app.modal.Show("editOrDeleteRecurringEvent",{mode:"delete",callback:this.SubmitDeleteEvent}):(n=app.tl("Confirm Delete"),t=app.tl("Are you sure you want to delete this event?"),app.modal.Show("confirm",{title:n,text:t,callback:function(t){return function(e){if(!e.wasCancelled)return t.SubmitDeleteEvent()}}(this)}))},e.prototype.OnClickModifyProperties=function(){app.modal.Show("eventProperties",{event:this.event})},e.prototype.SubmitDeleteEvent=function(e){var n;null==e&&(e="one"),n={},null!=this.event.repeat.ends&&(n.deleteRecurring=e),app.api.delete("calendarevents/"+this.event.id+".json",n).then(function(e){return function(){var n;return Lightbox.closeAll(),app.flash.Success(app.tl("Event deleted successfully")),n={itemId:e.event.id,itemType:"event",actionType:app.consts.ACTIONTYPE.DELETED,eventTime:new Date},t.postbox.publish("event-"+app.consts.ACTIONTYPE.DELETED,n),t.postbox.publish("allTWEvents",n)}}(this))},e.prototype.dispose=function(){return this.subscriptions.forEach(function(t){return t.dispose()})},e}(),{viewModel:s,template:e}}.apply(e,s))&&(t.exports=i)},4255:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(164),n(3109),n(3110),n(1205)],void 0!==(i=function(t,e,n,s){var i;return i=function(){function e(e){var i,o,r,l,c,p,d,u,h,m,f,g,x;null==e&&(e={}),this.OnQuickView=a(this.OnQuickView,this),this.OnClickShowReplyForm=a(this.OnClickShowReplyForm,this),this.OnClickToggle=a(this.OnClickToggle,this),this.OnNotifyTWEvent=a(this.OnNotifyTWEvent,this),this.OnRendered=a(this.OnRendered,this),this.subscriptions=[],this.tippedContent=n,this.item=null!=(i=e.item)?i:null,this.subscriptions.push(this.isTemplate=t.pureComputed(function(t){return function(){var e,n;return(null!=(e=t.item)&&null!=(n=e.project)&&"function"==typeof n.type?n.type():void 0)===app.consts.PROJECT_TEMPLATE}}(this))),this.subscriptions.push(this.readOnly=t.pureComputed(function(t){return function(){return t.isTemplate()&&!app.loggedInUser.permissions.canManageProjectTemplates()}}(this))),this.componentName="Message",this.maxLength=200,this.sortBy=null!=(o=e.sortBy)?o:t.observable(""),this.displayMode=null!=(p=e.displayMode)?p:"list",this.allowReply=null!=(d=e.allowReply)&&d,this.showPrivacy=null==(u=e.showPrivacy)||u,this.showAuthor=null==(h=e.showAuthor)||h,this.showSubject=null==(m=e.showSubject)||m,this.showBreadcrumb=null==(f=e.showBreadcrumb)||f,this.showTags=null==(g=e.showTags)||g,this.showCategoryInBreadcrumb=null==(x=e.showCategoryInBreadcrumb)||x,this.showProjectInBreadcrumb=null!=(r=e.showProjectInBreadcrumb)&&r,this.allowDrag=app.utility.EnsureObservable(null!=(l=e.allowDrag)&&l),this.isInline=null!=(c=e.isInline)&&c,this.isInline&&(this.showTags=!1),this.displayMode=app.utility.EnsureObservable(this.displayMode),this.showBreadcrumb||!this.showCategoryInBreadcrumb&&!this.showProjectInBreadcrumb||(this.showBreadcrumb=!0),this.body=null!=this.item.showLatestReplyAsMainMessage&&this.item.showLatestReplyAsMainMessage()?this.item.latestReply.body:this.item.body,this.bodyLength=this.body().length,this.subscriptions.push(this.bodySizeLimit=t.pureComputed(function(t){return function(){return"collapsed"===t.displayMode()?500:250}}(this))),this.showFullMessage=t.observable(!1),this.subscriptions.push(this.cssClasses=t.pureComputed(function(t){return function(){var e;return e=[],e.push("w-message--"+t.displayMode()),t.item.isEditing()&&e.push("w-message--is-editing"),t.item.isRead()||e.push("w-message--is-unread"),t.isInline&&e.push("w-message--inline"),e.join(" ")}}(this))),t.isObservable(this.item.attachments)||(this.item.attachments=t.observable(this.item.attachments)),this.subscriptions.push(this.isEditing=t.pureComputed(function(t){return function(){return null!=t.item&&t.item.isEditing}}(this))),this.subscriptions.push(this.displayShortDate=t.pureComputed(function(t){return function(){switch(t.sortBy()){case"dateposted":return t.item.shortPostedDate();default:return t.item.shortUpdatedDate()}}}(this))),this.subscriptions.push(this.displayFullDate=t.pureComputed(function(t){return function(){switch(t.sortBy()){case"dateposted":return t.item.fullPostedDate();default:return t.item.fullUpdatedDate()}}}(this))),this.subscriptions.push(this.isArchivedProject=t.pureComputed(function(t){return function(){return null!=app.currentRoute().project&&"archived"===app.currentRoute().project.status()}}())),this.subscriptions.push(this.originalMessageShortDate=t.pureComputed(function(t){return function(){var e,n;return null==app.loggedInUser?moment().format("DD MMM YY"):(n=app.loggedInUser.localization.timeFormat().replace("MM","mm"),e=t.item.postedOn(),e.isSame(moment(),"day")?e.format(n):e.isSame(moment(),"year")?e.format("DD MMM"):e.format("DD MMM YY"))}}(this))),this.subscriptions.push(this.originalMessageFullDate=t.pureComputed(function(t){return function(){var e,n;return e="ddd, MMM Do YYYY "+app.loggedInUser.localization.timeFormat().replace("MM","mm"),n=t.item.postedOn(),n.format(e)}}(this))),this.showReplyForm=t.observable(!1),this.tmpMessage=new s,this.tmpMessage.projectId(this.item.projectId()),this.showShortBody=t.observable(this.item.body().length>250),this.subscriptions.push(this.timeToDisplay=t.pureComputed(function(t){return function(){return t.item.datetime().diff(new Date,"days")>-1?app.utility.GetPastRelativeTime(t.item.datetime()):moment().format("YYYY")===t.item.datetime().format("YYYY")?t.item.datetime().format("ddd MMM Do, "+app.loggedInUser.localization.timeFormat()):t.item.datetime().format("ddd MMM Do, YYYY "+app.loggedInUser.localization.timeFormat())}}(this))),this.subscriptions.push(this.canDrag=t.pureComputed(function(t){return function(){return!!t.allowDrag()&&(null!=app.currentRoute().project&&(null==app.currentRoute().itemId&&(!!app.currentRoute().project.permissions.canAddMessages()&&t.item.canEditContents())))}}(this))),this.subscriptions.push(app.ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent)),app.InitOnShow(this)}return e.prototype.OnShow=function(){},e.prototype.OnRendered=function(t){var e,n,s,i,a;if(""!==(a=null!=(e=null!=(n=null!=(s=app.currentRoute().queryParams)?s.scrollTo:void 0)?n:null!=(i=app.currentRoute().queryParams)?i.pmp:void 0)?e:"")&&a/1!=0)return a/1==this.item.postId()/1?(app.currentRoute().queryParams.scrollTo=0,app.currentRoute().queryParams.pmp=0,app.utility.ScrollIntoViewIfNeeded(t,300),app.utility.Highlight(t,50)):void 0},e.prototype.OnNotifyTWEvent=function(t){var e,n,s,i,a;if("message"===t.itemType&&"reactions"===t.subType){if(this.item.hasLatestReply()&&this.item.latestReply.postId()===t.itemId){s=this.reactionTypes;for(n in s)a=s[n],e=t.extraData.counts[a],this.item.latestReply.reactions.counts[a](e);return void this.item.latestReply.reactions.mine(t.extraData.mine)}if(this.item.postId()===t.itemId){i=this.reactionTypes;for(n in i)a=i[n],e=t.extraData.counts[a],this.item.reactions.counts[a](e);return void this.item.reactions.mine(t.extraData.mine)}}},e.prototype.OnClickToggle=function(){this.showShortBody(!this.showShortBody())},e.prototype.OnClickShowReplyForm=function(){this.showReplyForm(!0)},e.prototype.OnQuickView=function(t){this.item.OnQuickView()},e.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},e}(),{viewModel:i,template:e}}.apply(e,s))&&(t.exports=i)},4256:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(3111),n(1116),n(1156),n(245)],void 0!==(i=function(t,e,n,s){var i;return i=function(){function t(t){var n,s,i;null==t&&(t={}),this.getGroupByOptions=a(this.getGroupByOptions,this),this.GetArchivedProjects=a(this.GetArchivedProjects,this),this.GetActiveProjects=a(this.GetActiveProjects,this),this.LabelsFromData=a(this.LabelsFromData,this),this.RenderChart=a(this.RenderChart,this),this.OnClickQuickView=a(this.OnClickQuickView,this),this.GenerateFilterParams=a(this.GenerateFilterParams,this),this.GetSeries=a(this.GetSeries,this),this.GetColumnNames=a(this.GetColumnNames,this),this.BuildData=a(this.BuildData,this),this.OnRendered=a(this.OnRendered,this),this.OnNotifyTWEvent=a(this.OnNotifyTWEvent,this),this.requestUpdate=a(this.requestUpdate,this),this.checkForPendingUpdates=a(this.checkForPendingUpdates,this),this.subscriptions=[],this.showHeader=null!=(n=t.showHeader)&&n,this.panel=null!=(s=t.panel)?s:{},console.assert(Object.keys(this.panel).length),this.groupBy=this.panel.settings.activityDistributionGroupedBy,this.activityTypes=this.panel.settings.activityDistributionActivityTypes,this.timeInterval=this.panel.settings.activityDistributionTimeInterval,this.chartId=this.panel.meta.chartId,this.metricTitle=null!=(i=t.metricTitle)?i:app.tl("Projects Distribution"),this.chartRef=null,this.itemTypes={message:app.tl("Messages"),comment:app.tl("Comments"),task:app.tl("Tasks"),tasklist:app.tl("Task lists"),milestone:app.tl("Milestones"),file:app.tl("Files"),notebook:app.tl("Notebooks"),timelog:app.tl("Time logs"),task_comment:app.tl("Task comments"),notebook_comment:app.tl("Notebook comments"),file_comment:app.tl("File comments"),link_comment:app.tl("Link comments"),milestone_comment:app.tl("Milestone comments"),project:app.tl("Projects"),link:app.tl("Links"),billingInvoice:app.tl("Invoices"),risk:app.tl("Risks"),projectUpdate:app.tl("Project updates"),reacted:app.tl("Reactions")},this.page=ko.observable(1),this.showPagination=ko.observable(!1),this.showPreviousButton=ko.observable(!1),this.showNextButton=ko.observable(!1),this.subscriptions.push(this.url=ko.pureComputed(function(t){return function(){return"projects/api/v3/activity/distribution.json?page="+ko.unwrap(t.page)+"&pageSize=10"}}(this))),this.data=new e(this.url,{listField:"distribution",filter:{generateFilterParams:this.GenerateFilterParams},onLoad:function(t){return function(){var e,n,s,i;return t.BuildData(),n=null==(null!=(s=t.data)?s.hasMoreData:void 0),e=n?t.data.meta.page.hasMore():t.data.hasMoreData(),i=n?0:1,t.showPagination(t.data.meta.page.count()>10),t.showPreviousButton(t.data.meta.page.pageOffset()>i),t.showNextButton(e),t.pendingRequests=[]}}(this)}),this.pendingRequests=[],app.pulse.listen({interval:15e3,key:"dashboard-metric-summary",callback:this.checkForPendingUpdates}),this.subscriptions.push(ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent))}return t.prototype.checkForPendingUpdates=function(){if(null==this.pendingRequests&&(this.pendingRequests=[]),this.pendingRequests.length)return this.getUpdatedData()},t.prototype.requestUpdate=function(t){if(null==t&&(t=!1),this.pendingRequests.push(moment()),t)return this.checkForPendingUpdates()},t.prototype.OnNotifyTWEvent=function(t){},t.prototype.OnRendered=function(){},t.prototype.OnClickPrevPage=function(){var t;t=this.page(),(t-=1)>=1&&this.page(t)},t.prototype.OnClickNextPage=function(){var t,e,n,s;t=this.page(),n=null==(null!=(s=this.data)?s.hasMoreData:void 0),(e=n?this.data.meta.page.hasMore():this.data.hasMoreData())&&(t+=1,this.page(t))},t.prototype.BuildData=function(){var t,e;return t=this.groupBy().toLowerCase(),e=this.itemTypes,this.dataToPresent=this.data.list().map(function(n){var s,i,a,o;return i=n.label,"type"===t&&(i=e[i]),""===i&&(i=function(){switch(!1){case"user"!==t:return app.tl("No user");case"project"!==t:return app.tl("No project");case"type"!==t:return app.tl("No type");case"company"!==t:return app.tl("No company");default:return""}}()),s=n.id,"type"===t&&(s=n.label),{id:s,label:i,extra:null!=(a=n.extra)?a:{},total:null!=(o=n.total)?o:0}}),this.dataSeries=this.GetSeries(),this.RenderChart()},t.prototype.GetColumnNames=function(){var t;return t=this.panel.GetDisplayOptions(!0),Object.keys(t)},t.prototype.GetColorsFromData=function(){var t,e,n,s,i,a,o,r;if("type"!==this.groupBy().toLowerCase())return null;for(e=[],o=this.dataToPresent,n=0,a=o.length;n<a;n++)s=o[n],i=this.GetItemColorKey(s.id),t=null!=(r=app.consts.UICOLORS[i])?r:app.consts.UICOLORS.activity,e.push(t);return e},t.prototype.GetItemColorKey=function(t){var e,n,s;return n=/comment/gi,s=/project/gi,e=/invoice/gi,n.test(t)?"comment":s.test(t)?"project":e.test(t)?"billing":t},t.prototype.GetSeries=function(){return[{data:this.dataToPresent.map(function(t){return t.total/1})}]},t.prototype.GenerateFilterParams=function(){var t,e;return e=this.panel.GetSettingsAsFilterParams(),e.groupBy=this.groupBy().toLowerCase(),e.activityTypes=this.activityTypes().toString(),t=app.utility.GetDatesFromRange("within","YYYY-MM-DD",this.timeInterval()),e.startDate=t.startDate,e.endDate=t.endDate,e},t.prototype.OnClickQuickView=function(t){var e;return e=this.GenerateFilterParams(),"user"===this.groupBy().toLowerCase()?e.userId=t.value/1:"project"===this.groupBy().toLowerCase()?e.projectId=t.value/1:"type"===this.groupBy().toLowerCase()&&(e.itemType=t.value.toString()),e.dateCode="within",e.dateCustomInterval=this.timeInterval(),e.source="dashboard",app.quickView.show("activity",e)},t.prototype.RenderChart=function(){if(null!=document.getElementById(this.chartId))return s(function(t){return function(){var e,s,i,a,o;return 80,t.dataToPresent.length,o=.1,s=function(e){return t.GetMatchingColumn(e)},e=t.groupBy().toLowerCase(),t.GetColumnNames(),i=t.OnClickQuickView,a=t.panel.name(),t.chartRef=n.chart(t.chartId,{credits:{enabled:!1},navigation:{buttonOptions:{enabled:!1}},chart:{type:"column",height:250,events:{load:function(t){return t.target.container.addEventListener("click",function(t){var e;if(t.target.dataset.label)return e=t.target.dataset,i({status:"",value:e.id})})},render:function(t){var e,n,s;if(s=t.target.xAxis[0],null!=s.labelGroup.div)return n=null!=(e=s.labelRotation)?e:0,0!==n?s.labelGroup.div.classList.add("rotated"):void 0}}},tooltip:{useHTML:!0,shadow:!1,backgroundColor:"transparent",borderColor:"transparent",borderWidth:2,padding:0,formatter:function(){return"<div class='w-metric__chart-tooltip' style='background-color: "+this.color+";'>\n    "+(1===this.y?app.tl("[_s] activity",1):app.tl("[_s] activities",this.y))+"\n</div>"}},title:null,exporting:{allowHTML:!0,chartOptions:{title:{text:a},legend:{enabled:!1},plotOptions:{series:{dataLabels:{enabled:!0,color:"contrast",style:{textOutline:"none"}}}},xAxis:{labels:{useHTML:!1}}}},plotOptions:{column:{grouping:!0,shadow:!1,colors:t.GetColorsFromData(),minPointLength:3},series:{cursor:"pointer",animation:!1,borderWidth:0,borderRadius:2,maxPointWidth:20,colorByPoint:!0,dataLabels:{enabled:!1},events:{click:function(t){var e,n;if(n=t.point,null!=(e=s(n.category)))return i({status:n.series.userOptions._key,value:e.id})}}}},yAxis:{visible:!1,tickInterval:o},xAxis:{categories:t.LabelsFromData(),lineWidth:0,tickLength:0,labels:{useHTML:!0,style:{color:"#777",fontSize:"11px",cursor:"pointer",fontFamily:app.consts.FONTFAMILY},formatter:function(){var t,n;return n=s(this.value),null!=n?"user"===e?(n.extra.avatarUrl.length||(n.extra.avatarUrl="images/noPhoto2.png"),"<span class='highcharts-custom-label' data-key='"+n._key+"' data-id='"+n.id+"'> <span class='highcharts-custom-label__content'> <img src='"+n.extra.avatarUrl+"' style='border-radius: 50%; width: 24px; height: 24px; margin-right: 5px;'> "+n.label+" </span> <span class='highcharts-custom-label__count'> "+n.total+" </span> </span>"):(null==n.extra&&(n.extra={}),null==(t=n.extra).color&&(t.color="#999"),n.extra.color.length||(n.extra.color="#999"),"<span class='highcharts-custom-label' data-label='"+n.label+"' data-key='"+n._key+"' data-id='"+n.id+"'> <span> "+n.label+" </span> <span class='highcharts-custom-label__count' style='background-color: "+n.extra.color+";'> "+n.total+" </span> </span>"):this.value}}},legend:{enabled:!1},series:t.dataSeries})}}(this))},t.prototype.LabelsFromData=function(){return this.dataToPresent.map(function(t){return t.label})},t.prototype.GetActiveProjects=function(){return this.dataToPresent.map(function(t){return t.active})},t.prototype.GetArchivedProjects=function(){return this.dataToPresent.map(function(t){return t.archived})},t.prototype.GetMatchingColumn=function(t){var e;if(e=this.dataToPresent.filter(function(e){return e.label===t}),null!=e?e.length:void 0)return e[0]},t.prototype.getGroupByOptions=function(){return[{id:"owner",text:app.tl("Project Owner")},{id:"category",text:app.tl("Category")},{id:"company",text:app.tl("Company")}]},t.prototype.dispose=function(){app.pulse.forget({interval:15e3,key:"dashboard-metric-summary",callback:this.checkForPendingUpdates}),this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:i,template:t}}.apply(e,s))&&(t.exports=i)},4257:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(3112),n(1204),n(1158),n(1151),n(1168)],void 0!==(i=function(t,e,n,s,i){var o;return o=function(){function t(t){var n,o,r,l,c,p,d;null==t&&(t={}),this.getTimeRangeOptions=a(this.getTimeRangeOptions,this),this.setupDataLoader=a(this.setupDataLoader,this),this.getPercentNonBillable=a(this.getPercentNonBillable,this),this.getPercentBillable=a(this.getPercentBillable,this),this.openQuickView=a(this.openQuickView,this),this.getFilterParams=a(this.getFilterParams,this),this.getUpdatedData=a(this.getUpdatedData,this),this.onClickMainStatistic=a(this.onClickMainStatistic,this),this.onClickBillable=a(this.onClickBillable,this),this.onClickNonBillable=a(this.onClickNonBillable,this),this.onUiEventHandler=a(this.onUiEventHandler,this),this.OnNotifyTWEvent=a(this.OnNotifyTWEvent,this),this.requestUpdate=a(this.requestUpdate,this),this.checkForPendingUpdates=a(this.checkForPendingUpdates,this),this.subscriptions=[],this.endpoint=null!=(o=t.endpoint)?o:"projects/api/v3/summary.json",this.listField=null!=(r=t.listField)?r:"time",n=null!=t.data?t.data:{},this.panel=null!=(l=t.panel)?l:{},console.assert(Object.keys(this.panel).length),this.selectedTimeRange=this.panel.settings.timeDateCode,this.showHeader=null!=(c=t.showHeader)&&c,this.metricTitle=null!=(p=this.panel.name)?p:app.tl("Logged Time"),this.chartOptions=null!=(d=t.chartOptions)?d:{},this.subscriptions.push(this.summary=new i({type:"time",params:this.getFilterParams()})),this.metricEventsKey="billable-time-"+Date.now(),this.events=new s(this.metricEventsKey),this.subscriptions.push(this.events.Listen(this.onUiEventHandler)),this.config=this.panel.GetDisplayOptions(!0),this.chartId=this.panel.meta.chartId,this.metricDataHelper=new e(this.config,n),this.dataLoaded=ko.observable(this.metricDataHelper.hasPresetData()),this.metricData=ko.observableArray(this.metricDataHelper.buildMetricData()),this.subscriptions.push(this.metricDataObject=ko.pureComputed(function(t){return function(){return t.metricDataHelper.getDataAsObject(t.metricData())}}(this))),this.subscriptions.push(this.chartData=ko.pureComputed(function(t){return function(){return t.metricDataHelper.buildChartData(t.metricDataObject())}}(this))),this.subscriptions.push(this.hasData=ko.pureComputed(function(t){return function(){return t.metricDataHelper.hasData(t.chartData())}}(this))),this.subscriptions.push(this.percentBillable=ko.pureComputed(this.getPercentBillable)),this.subscriptions.push(this.percentNonBillable=ko.pureComputed(this.getPercentNonBillable)),this.subscriptions.push(this.panel.settings.visibleMetrics.subscribe(function(t){return function(e){return t.config=t.panel.GetDisplayOptions(!0),t.metricDataHelper.updateConfig(t.config),t.metricDataObject.notifySubscribers()}}(this))),this.subscriptions.push(this.selectedTimeRange.subscribe(function(t){return function(){if(!t.metricDataHelper.isDataSetUp())return t.setupDataLoader()}}(this))),this.subscriptions.push(this.billableTimeText=ko.pureComputed(function(t){return function(){return app.utility.MinutesIntToString(t.metricDataObject().billableMinsSum,{abbreviate:!0,zeroVal:"0"})}}(this))),this.subscriptions.push(this.nonBillableTimeText=ko.pureComputed(function(t){return function(){return app.utility.MinutesIntToString(t.metricDataObject().nonBillableMinsSum,{abbreviate:!0,zeroVal:"0"})}}(this))),this.subscriptions.push(this.mainStatistic=ko.pureComputed(function(t){return function(){return 1!==t.chartData().length?null:function(){switch(this.chartData()[0].key){case"nonbillable":return{title:app.tl("Non-billable Time"),value:this.nonBillableTimeText(),key:this.chartData()[0].key};case"billable":return{title:app.tl("Billable Time"),value:this.billableTimeText(),key:this.chartData()[0].key};default:return null}}.call(t)}}(this))),this.dataLoader=null,this.dataLoaded()||this.setupDataLoader(),this.pendingRequests=[],app.pulse.listen({interval:15e3,key:"dashboard-metric-summary",callback:this.checkForPendingUpdates}),this.subscriptions.push(ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent))}return t.prototype.checkForPendingUpdates=function(){if(null==this.pendingRequests&&(this.pendingRequests=[]),this.pendingRequests.length)return this.getUpdatedData()},t.prototype.requestUpdate=function(t){if(null==t&&(t=!1),this.pendingRequests.push(moment()),t)return this.checkForPendingUpdates()},t.prototype.OnNotifyTWEvent=function(t){var e,n;if("time"===t.itemType)return e=null!=t.userId?t.userId/1:app.loggedInUser.id(),n=app.loggedInUser.id()===e,this.requestUpdate(n)},t.prototype.onUiEventHandler=function(t){var e,n,s,i,a,o,r;if(i=t.data,o=t.type,r=("function"==typeof(e=this.panel.settings).timeLoggedByType?e.timeLoggedByType():void 0)&&"all"===this.panel.settings.timeLoggedByType()?"":("function"==typeof(n=this.panel.settings).timeLoggedByType?n.timeLoggedByType():void 0)&&"me"===this.panel.settings.timeLoggedByType()?app.loggedInUser.id():("function"==typeof(s=this.panel.settings).timeLoggedByUserId?s.timeLoggedByUserId():void 0)?0===this.panel.settings.timeLoggedByUserId().length?app.loggedInUser.id():this.panel.settings.timeLoggedByUserId().toString():void 0,a=r.toString()===app.loggedInUser.id().toString(),"click"===o)return this.summary.openQuickView(i.key,{who:r,isMe:a,selectedTimeRange:this.selectedTimeRange(),filterType:i.name,filteredUserName:app.utility.GetFilterInfo(this.panel,"users",this.panel.settings.timeLoggedByUserId())})},t.prototype.onClickNonBillable=function(){return this.onUiEventHandler({data:{key:"nonbillable",name:app.tl("Non billable")},type:"click"}),!0},t.prototype.onClickBillable=function(){return this.onUiEventHandler({data:{key:"billable"},type:"click"}),!0},t.prototype.onClickMainStatistic=function(){return null!=this.mainStatistic()&&("billable"===this.mainStatistic().key?this.onClickBillable():this.onClickNonBillable())},t.prototype.getUpdatedData=function(){return this.metricDataHelper.isDataSetUp()?this.dataLoader.LoadUpdates():this.setupDataLoader()},t.prototype.getFilterParams=function(){var t;return t=this.panel.GetSettingsAsFilterParams(),app.utility.AddSparseFields(t,{time:"totals"}),t},t.prototype.openQuickView=function(t,e){this.summary.openQuickView(t,{selectedTimeRange:this.selectedTimeRange(),filterType:e})},t.prototype.getPercentBillable=function(){var t,e,n,s;return this.hasData()?(t=this.metricDataObject().billableMinsSum,e=this.metricDataObject().nonBillableMinsSum,0===t?0:0===e?100:(s=e+t,n=t/s*100,Math.round(n))):0},t.prototype.getPercentNonBillable=function(){return this.hasData()?100-this.getPercentBillable():0},t.prototype.setupDataLoader=function(){var t;return t=function(t){return function(e){return t.metricDataHelper.updateMetricData(t.metricData,e.totals),t.dataLoaded(!0),t.pendingRequests=[]}}(this),this.dataLoader=this.metricDataHelper.createDataLoader(this.endpoint,this.listField,"time",this.selectedTimeRange,this.getFilterParams,t)},t.prototype.getTimeRangeOptions=function(){return[{id:"today",text:app.tl("Today")},{id:"yesterday",text:app.tl("Yesterday")},{id:"thisweek",text:app.tl("This week [_s]",app.utility.GetWeekText())},{id:"lastweek",text:app.tl("Last week [_s]",app.utility.GetWeekText())},{id:"thismonth",text:app.tl("This month")},{id:"lastmonth",text:app.tl("Last month")},{id:"last3months",text:app.utility.GetLastMonthsText(3)},{id:"last6months",text:app.utility.GetLastMonthsText(6)}]},t.prototype.dispose=function(){app.pulse.forget({interval:15e3,key:"dashboard-metric-summary",callback:this.checkForPendingUpdates}),this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:o,template:t}}.apply(e,s))&&(t.exports=i)},4258:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(3113),n(1204),n(1158),n(1151),n(1168)],void 0!==(i=function(t,e,n,s,i){var o;return o=function(){function t(t){var n,o,r,l,c,p,d;null==t&&(t={}),this.getTimeRangeOptions=a(this.getTimeRangeOptions,this),this.setupDataLoader=a(this.setupDataLoader,this),this.getPercentNonBilled=a(this.getPercentNonBilled,this),this.getPercentBilled=a(this.getPercentBilled,this),this.openQuickView=a(this.openQuickView,this),this.getFilterParams=a(this.getFilterParams,this),this.getUpdatedData=a(this.getUpdatedData,this),this.onClickMainStatistic=a(this.onClickMainStatistic,this),this.onClickNonBilled=a(this.onClickNonBilled,this),this.onClickBilled=a(this.onClickBilled,this),this.onUiEventHandler=a(this.onUiEventHandler,this),this.OnNotifyTWEvent=a(this.OnNotifyTWEvent,this),this.requestUpdate=a(this.requestUpdate,this),this.checkForPendingUpdates=a(this.checkForPendingUpdates,this),this.subscriptions=[],this.endpoint=null!=(o=t.endpoint)?o:"projects/api/v3/summary.json",this.listField=null!=(r=t.listField)?r:"time",n=null!=t.data?t.data:{},this.panel=null!=(l=t.panel)?l:{},console.assert(Object.keys(this.panel).length),this.selectedTimeRange=this.panel.settings.timeDateCode,this.timeRangeOptions=this.getTimeRangeOptions(),this.showHeader=null!=(c=t.showHeader)&&c,this.metricTitle=null!=(p=this.panel.name)?p:app.tl("Billed Time"),this.subscriptions.push(this.summary=new i({type:"time",params:this.getFilterParams()})),this.metricEventsKey="billed-time-"+Date.now(),this.events=new s(this.metricEventsKey),this.subscriptions.push(this.events.Listen(this.onUiEventHandler)),this.config=this.panel.GetDisplayOptions(!0),this.chartId=this.panel.meta.chartId,this.chartOptions=null!=(d=t.chartOptions)?d:{},this.metricDataHelper=new e(this.config,n),this.dataLoaded=ko.observable(this.metricDataHelper.hasPresetData()),this.metricData=ko.observableArray(this.metricDataHelper.buildMetricData()),this.subscriptions.push(this.metricDataObject=ko.pureComputed(function(t){return function(){return t.metricDataHelper.getDataAsObject(t.metricData())}}(this))),this.subscriptions.push(this.chartData=ko.pureComputed(function(t){return function(){return t.metricDataHelper.buildChartData(t.metricDataObject())}}(this))),this.subscriptions.push(this.hasData=ko.pureComputed(function(t){return function(){return t.metricDataHelper.hasData(t.chartData())}}(this))),this.subscriptions.push(this.percentBilled=ko.pureComputed(this.getPercentBilled)),this.subscriptions.push(this.percentNonBilled=ko.pureComputed(this.getPercentNonBilled)),this.subscriptions.push(this.panel.settings.visibleMetrics.subscribe(function(t){return function(e){return t.config=t.panel.GetDisplayOptions(!0),t.metricDataHelper.updateConfig(t.config),t.metricDataObject.notifySubscribers()}}(this))),this.subscriptions.push(this.selectedTimeRange.subscribe(function(t){return function(){if(!t.metricDataHelper.isDataSetUp())return t.setupDataLoader()}}(this))),this.subscriptions.push(this.billedTimeText=ko.pureComputed(function(t){return function(){return app.utility.MinutesIntToString(t.metricDataObject().billedMinsSum,{abbreviate:!0,zeroVal:"0"})}}(this))),this.subscriptions.push(this.nonBilledTimeText=ko.pureComputed(function(t){return function(){return app.utility.MinutesIntToString(t.metricDataObject().nonBilledMinsSum,{abbreviate:!0,zeroVal:"0"})}}(this))),this.subscriptions.push(this.mainStatistic=ko.pureComputed(function(t){return function(){return 1!==t.chartData().length?null:function(){switch(this.chartData()[0].key){case"noninvoiced":return{title:app.tl("Non-billed Time"),value:this.nonBilledTimeText(),key:this.chartData()[0].key};case"invoiced":return{title:app.tl("Billed Time"),value:this.billedTimeText(),key:this.chartData()[0].key};default:return null}}.call(t)}}(this))),this.dataLoader=null,this.dataLoaded()||this.setupDataLoader(),this.pendingRequests=[],app.pulse.listen({interval:15e3,key:"dashboard-metric-summary",callback:this.checkForPendingUpdates}),this.subscriptions.push(ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent))}return t.prototype.checkForPendingUpdates=function(){if(null==this.pendingRequests&&(this.pendingRequests=[]),this.pendingRequests.length)return this.getUpdatedData()},t.prototype.requestUpdate=function(t){if(null==t&&(t=!1),this.pendingRequests.push(moment()),t)return this.checkForPendingUpdates()},t.prototype.OnNotifyTWEvent=function(t){var e,n;if("time"===t.itemType)return e=null!=t.userId?t.userId/1:app.loggedInUser.id(),n=app.loggedInUser.id()===e,this.requestUpdate(n)},t.prototype.onUiEventHandler=function(t){var e,n,s,i,a,o,r;i=t.data,o=t.type,r=("function"==typeof(e=this.panel.settings).timeLoggedByType?e.timeLoggedByType():void 0)&&"all"===this.panel.settings.timeLoggedByType()?"":("function"==typeof(n=this.panel.settings).timeLoggedByType?n.timeLoggedByType():void 0)&&"me"===this.panel.settings.timeLoggedByType()?app.loggedInUser.id():("function"==typeof(s=this.panel.settings).timeLoggedByUserId?s.timeLoggedByUserId():void 0)?0===this.panel.settings.timeLoggedByUserId().length?app.loggedInUser.id():this.panel.settings.timeLoggedByUserId().toString():void 0,a=r.toString()===app.loggedInUser.id().toString(),"click"===o&&this.summary.openQuickView(i.key,{who:r,isMe:a,selectedTimeRange:this.selectedTimeRange(),filterType:i.name,filteredUserName:app.utility.GetFilterInfo(this.panel,"users",this.panel.settings.timeLoggedByUserId())})},t.prototype.onClickBilled=function(){return this.onUiEventHandler({data:{key:"invoiced"},type:"click"}),!0},t.prototype.onClickNonBilled=function(){return this.onUiEventHandler({data:{key:"noninvoiced"},type:"click"}),!0},t.prototype.onClickMainStatistic=function(){return null!=this.mainStatistic()&&("billable"===this.mainStatistic().key?this.onClickBilled():this.onClickNonBilled())},t.prototype.getUpdatedData=function(){return this.metricDataHelper.isDataSetUp()?this.dataLoader.LoadUpdates():this.setupDataLoader()},t.prototype.getFilterParams=function(){var t;return t=this.panel.GetSettingsAsFilterParams(),app.utility.AddSparseFields(t,{time:"totals"}),t},t.prototype.openQuickView=function(t,e){this.summary.openQuickView(t,{selectedTimeRange:this.selectedTimeRange(),filterType:e})},t.prototype.getPercentBilled=function(){var t,e,n,s;return this.hasData()?(t=this.metricDataObject().billedMinsSum,e=this.metricDataObject().nonBilledMinsSum,0===t?0:0===e?100:(s=e+t,n=t/s*100,Math.round(n))):0},t.prototype.getPercentNonBilled=function(){return this.hasData()?100-this.getPercentBilled():0},t.prototype.setupDataLoader=function(){var t;return t=function(t){return function(e){return t.metricDataHelper.updateMetricData(t.metricData,e.totals),t.dataLoaded(!0),t.pendingRequests=[]}}(this),this.dataLoader=this.metricDataHelper.createDataLoader(this.endpoint,this.listField,"time",this.selectedTimeRange,this.getFilterParams,t)},t.prototype.getTimeRangeOptions=function(){return[{id:"today",text:app.tl("Today")},{id:"yesterday",text:app.tl("Yesterday")},{id:"thisweek",text:app.tl("This week [_s]",app.utility.GetWeekText())},{id:"lastweek",text:app.tl("Last week [_s]",app.utility.GetWeekText())},{id:"thismonth",text:app.tl("This month")},{id:"lastmonth",text:app.tl("Last month")},{id:"last3months",text:app.utility.GetLastMonthsText(3)},{id:"last6months",text:app.utility.GetLastMonthsText(6)}]},t.prototype.dispose=function(){app.pulse.forget({interval:15e3,key:"dashboard-metric-summary",callback:this.checkForPendingUpdates}),this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:o,template:t}}.apply(e,s))&&(t.exports=i)},4260:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(1116),n(3115),n(1246)],void 0!==(i=function(t,e,n){var s;return s=function(){function e(e){var s,i,o,r,l,c,p,d,u,h,m,f;null==e&&(e={}),this.getTimeRangeOptions=a(this.getTimeRangeOptions,this),this.getEventStatus=a(this.getEventStatus,this),this.getColor=a(this.getColor,this),this.sortEventsPanel=a(this.sortEventsPanel,this),this.OnClickMoreEvents=a(this.OnClickMoreEvents,this),this.OnClickEvent=a(this.OnClickEvent,this),this.OnNotifyTWEvent=a(this.OnNotifyTWEvent,this),this.requestUpdate=a(this.requestUpdate,this),this.checkForPendingUpdates=a(this.checkForPendingUpdates,this),this.params=e,this.subscriptions=[],this.pageSize=null!=(i=e.pageSize)?i:5,this.sortBy=app.utility.EnsureObservable(null!=(o=e.sortBy)?o:"date"),this.sortOrder=app.utility.EnsureObservable(null!=(l=e.sortOrder)?l:"asc"),this.status=app.utility.EnsureObservable(null!=(c=e.status)?c:"upcoming"),this.panel=null!=(p=e.panel)?p:null,s=function(t){return function(e,n){var s,i,a;return null==n&&(n=!1),s=null!=(null!=(i=t.panel)?i.settings[e]:void 0)?t.panel.settings[e]:null,app.utility.EnsureObservable(null!=(a=t.params[e])?a:s,n)}}(this),this.searchTerm=s("searchTerm"),this.projectOwnerIds=s("projectOwnerIds",!0),this.projectHealth=s("projectHealth",!0),this.projectStatus=s("projectStatus"),this.includeArchivedProjects=s("includeArchivedProjects"),this.projectCompanyIds=s("companyIds",!0),this.projectCategoryIds=s("categoryIds",!0),this.projectTagIds=s("filterTagIds",!0),this.matchAllProjectTags=s("matchAllTags"),this.onlyStarredProjects=s("onlyStarredProjects"),this.eventsListUserType=s("eventsListUserType"),this.eventsListUserId=s("eventsListUserId",!0),this.eventsListDateInterval=s("eventsListDateInterval"),this.eventsListAttendingOnly=s("eventsListAttendingOnly"),this.metricTitle=null!=(d=e.metricTitle)?d:app.tl("Upcoming Events"),this.allowBlankSlate=null==(u=e.allowBlankSlate)||u,this.blankSlateMessage=app.utility.EnsureObservable(null!=(h=e.blankSlateMessage)?h:""),this.showHeader=null==(m=e.showHeader)||m,this.showRange=null==(f=e.showRange)||f,this.showLoadMore=null!=(r=e.showLoadMore)&&r,this.selectedTimeRange=this.eventsListDateInterval,this.currentTime=ko.observable(moment()),this.subscriptions.push(this.formattedEndDate=ko.pureComputed(function(t){return function(){var e;switch(t.selectedTimeRange()){case"today":return moment().endOf("day").format("YYYYMMDD");default:return e=app.utility.GetDatesFromRange("within","YYYYMMDD",t.selectedTimeRange()),e.endDate}}}(this))),this.totalRecords=ko.observable(0),this.data=new t("calendarevents.json",{listField:"events",ItemClass:n,loadNow:!1,updatesAtBottom:ko.observable(!0),pageSize:this.pageSize,sort:this.sortEventsPanel,filter:{generateFilterParams:function(t){return function(){return e={},e.startDate=moment().startOf("day").format("YYYYMMDD"),null!=t.formattedEndDate()&&(e.endDate=t.formattedEndDate()),e.sortBy=t.sortBy(),e.sortOrder=t.sortOrder(),e.attendingOnly=t.eventsListAttendingOnly(),("function"==typeof t.projectCompanyIds?t.projectCompanyIds():void 0)&&t.projectCompanyIds().length&&(e.projectCompanyIds=t.projectCompanyIds().toString()),("function"==typeof t.projectCategoryIds?t.projectCategoryIds():void 0)&&t.projectCategoryIds().length&&(e.projectCategoryIds=t.projectCategoryIds().toString()),("function"==typeof t.projectTagIds?t.projectTagIds():void 0)&&t.projectTagIds().length&&(e.projectTagIds=t.projectTagIds().join(","),e.matchAllProjectTags=t.matchAllProjectTags()),("function"==typeof t.projectOwnerIds?t.projectOwnerIds():void 0)&&t.projectOwnerIds().length&&(e.projectOwnerIds=t.projectOwnerIds().toString()),("function"==typeof t.projectHealth?t.projectHealth():void 0)&&"-1"!==t.projectHealth().toString()&&(e.projectHealths=t.projectHealth().toString()),("function"==typeof t.projectStatus?t.projectStatus():void 0)&&(e.projectStatuses=t.projectStatus()),("function"==typeof t.includeArchivedProjects?t.includeArchivedProjects():void 0)&&(e.includeArchivedProjects=t.includeArchivedProjects()),("function"==typeof t.onlyStarredProjects?t.onlyStarredProjects():void 0)&&(e.onlyStarredProjects=t.onlyStarredProjects()),("function"==typeof t.eventsListUserType?t.eventsListUserType():void 0)&&"all"===t.eventsListUserType()?e.userId="":("function"==typeof t.eventsListUserType?t.eventsListUserType():void 0)&&"me"===t.eventsListUserType()?e.userId=app.loggedInUser.id():("function"==typeof t.eventsListUserId?t.eventsListUserId():void 0)&&(e.userId=t.eventsListUserId().toString()),e}}(this)},onLoad:function(t){return function(e){var n;return t.totalRecords(parseInt(null!=(n=e.xhr.getResponseHeader("X-Records"))?n:0,10)),t.pendingRequests=[]}}(this)}),this.subscriptions.push(this.hasEvents=ko.pureComputed(function(t){return function(){return(!t.data||"content"===t.data.state())&&t.data.list().length>0}}(this))),this.subscriptions.push(this.showFooter=ko.pureComputed(function(t){return function(){return!t.showLoadMore&&(null!=t.data&&!t.data.isLoading()&&t.data.hasMoreRecords())}}(this))),this.subscriptions.push(this.numRemainingRecords=ko.pureComputed(function(t){return function(){return null==t.data?0:t.totalRecords()-t.pageSize}}(this))),this.subscriptions.push(ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent)),this.updateRelativeDate=function(t){return function(){return t.currentTime(moment())}}(this),app.pulse.listen({interval:6e4,key:"global_",callback:this.updateRelativeDate}),this.pendingRequests=[],app.pulse.listen({interval:15e3,key:"dashboard-metric-summary",callback:this.checkForPendingUpdates}),app.InitOnShow(this)}return e.prototype.checkForPendingUpdates=function(){if(null==this.pendingRequests&&(this.pendingRequests=[]),this.pendingRequests.length){if(null==this.data)return;return this.data.Sync({params:{showDeleted:!1}})}},e.prototype.requestUpdate=function(t){if(null==t&&(t=!1),this.pendingRequests.push(moment()),t)return this.checkForPendingUpdates()},e.prototype.OnNotifyTWEvent=function(t){var e,n;if("event"===t.itemType)return e=null!=t.userId?t.userId/1:app.loggedInUser.id(),n=app.loggedInUser.id()===e,this.requestUpdate(n)},e.prototype.OnClickEvent=function(t){var e;e={title:app.utility.SafeHTML(t.title),event:t},app.quickView.show("event",e)},e.prototype.OnClickMoreEvents=function(){var t;t=("function"==typeof this.eventsListUserType?this.eventsListUserType():void 0)&&"all"===this.eventsListUserType()?"":("function"==typeof this.eventsListUserType?this.eventsListUserType():void 0)&&"me"===this.eventsListUserType()?app.loggedInUser.id():("function"==typeof this.eventsListUserId?this.eventsListUserId():void 0)?this.eventsListUserId().toString():void 0,app.quickView.show("events-new",{title:app.tl("Events"),userId:t,startDate:moment().startOf("day"),endDate:null!=this.formattedEndDate()?moment(this.formattedEndDate(),"YYYYMMDD"):void 0,attendingOnly:this.eventsListAttendingOnly(),sortBy:this.sortBy(),sortOrder:this.sortOrder(),isQuickView:!0})},e.prototype.sortEventsPanel=function(t,e){var n,s,i,a;return i="",i=(this.sortBy(),"start"),n=ko.unwrap(t[i]),s=ko.unwrap(e[i]),a=n.unix()-s.unix(),"asc"===this.sortOrder()?a:-a},e.prototype.getColor=function(t){var e;return null!=(null!=t&&null!=(e=t.type)?e.color:void 0)?"#"!==t.type.color().charAt(0)?"#"+t.type.color():t.type.color():""},e.prototype.getEventStatus=function(t){return t.start().isSame(moment(),"day")?"today":"upcoming"},e.prototype.getTimeRangeOptions=function(){return[{id:"1095",text:app.tl("All Upcoming")},{id:"today",text:app.tl("Today")},{id:"7",text:app.tl("In the next [_s] days",7)},{id:"14",text:app.tl("In the next [_s] days",14)},{id:"30",text:app.tl("In the next [_s] days",30)},{id:"90",text:app.tl("In the next [_s] months",3)},{id:"365",text:app.tl("In the next year")}]},e.prototype.dispose=function(){app.pulse.forget({interval:6e4,key:"global_",callback:this.updateRelativeDate}),app.pulse.forget({interval:15e3,key:"dashboard-metric-summary",callback:this.checkForPendingUpdates}),this.subscriptions.forEach(function(t){return t.dispose()})},e}(),{viewModel:s,template:e}}.apply(e,s))&&(t.exports=i)},4261:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(1116),n(3116),n(1152)],void 0!==(i=function(t,e,n){var s;return s=function(){function e(e){var s,i,o,r,l,c,p,d,u,h,m,f,g;null==e&&(e={}),this.GenerateFilterParams=a(this.GenerateFilterParams,this),this.getTimeRangeOptions=a(this.getTimeRangeOptions,this),this.getMilestoneStatus=a(this.getMilestoneStatus,this),this.OnClickMoreMilestones=a(this.OnClickMoreMilestones,this),this.OnClickMilestone=a(this.OnClickMilestone,this),this.OnNotifyTWEvent=a(this.OnNotifyTWEvent,this),this.requestUpdate=a(this.requestUpdate,this),this.checkForPendingUpdates=a(this.checkForPendingUpdates,this),this.params=e,this.subscriptions=[],this.pageSize=null!=(i=e.pageSize)?i:4,this.panel=null!=(o=e.panel)?o:null,this.sortBy=app.utility.EnsureObservable(null!=(c=e.sortBy)?c:"date"),this.sortOrder=app.utility.EnsureObservable(null!=(p=e.sortOrder)?p:"asc"),this.status=app.utility.EnsureObservable(null!=(d=e.status)?d:["upcoming"],!0),s=function(t){return function(e,n){var s,i,a;return null==n&&(n=!1),s=null!=(null!=(i=t.panel)?i.settings[e]:void 0)?t.panel.settings[e]:null,app.utility.EnsureObservable(null!=(a=t.params[e])?a:s,n)}}(this),this.searchTerm=s("searchTerm"),this.projectOwnerIds=s("projectOwnerIds",!0),this.projectHealth=s("projectHealth",!0),this.projectStatus=s("projectStatus"),this.projectCompanyIds=s("companyIds",!0),this.projectCategoryIds=s("categoryIds",!0),this.projectTagIds=s("filterTagIds",!0),this.matchAllProjectTags=s("matchAllTags"),this.onlyStarredProjects=s("onlyStarredProjects"),this.milestonesListDateInterval=s("milestonesListDateInterval"),this.milestonesListUserType=s("milestonesListUserType"),this.milestonesListUserId=s("milestonesListUserId",!0),this.metricTitle=null!=(u=null!=(h=this.panel)?h.name:void 0)?u:app.tl("Upcoming Milestones"),this.allowBlankSlate=null==(m=e.allowBlankSlate)||m,this.blankSlateMessage=app.utility.EnsureObservable(null!=(f=e.blankSlateMessage)?f:""),this.showHeader=null==(g=e.showHeader)||g,this.showRange=null==(r=e.showRange)||r,this.showLoadMore=null!=(l=e.showLoadMore)&&l,this.selectedTimeRange=this.milestonesListDateInterval,this.subscriptions.push(this.formattedEndDate=ko.pureComputed(function(t){return function(){var e;if(null!=t.params.endDate)return ko.unwrap(t.params.endDate);switch(t.selectedTimeRange()){case"today":return moment().endOf("day").format("YYYYMMDD");default:return e=app.utility.GetDatesFromRange("within","YYYYMMDD",t.selectedTimeRange()),e.endDate}}}(this))),this.totalRecords=ko.observable(0),this.subscriptions.push(this.data=new t("milestones.json",{ItemClass:n,pageSize:this.pageSize,loadNow:!1,filter:{generateFilterParams:this.GenerateFilterParams},onLoad:function(t){return function(e){var n;return t.totalRecords(parseInt(null!=(n=e.xhr.getResponseHeader("X-Records"))?n:0,10)),t.pendingRequests=[]}}(this)})),this.subscriptions.push(this.dataList=ko.pureComputed(function(t){return function(){return null!=t.params.list?ko.unwrap(t.params.list):null==t.data?[]:ko.unwrap(t.data.list)}}(this))),this.subscriptions.push(this.hasMilestones=ko.pureComputed(function(t){return function(){return(!t.data||"content"===t.data.state())&&ko.unwrap(t.dataList).length>0}}(this))),this.subscriptions.push(this.showFooter=ko.pureComputed(function(t){return function(){return!t.showLoadMore&&(null!=t.data&&!t.data.isLoading()&&t.data.hasMoreRecords())}}(this))),this.subscriptions.push(this.numRemainingRecords=ko.pureComputed(function(t){return function(){return null==t.data?0:t.totalRecords()-t.pageSize}}(this))),this.pendingRequests=[],app.pulse.listen({interval:15e3,key:"dashboard-metric-summary",callback:this.checkForPendingUpdates}),this.subscriptions.push(ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent))}return e.prototype.checkForPendingUpdates=function(){if(null==this.pendingRequests&&(this.pendingRequests=[]),this.pendingRequests.length){if(null==this.data)return;return this.data.Sync({params:{showDeleted:!1}})}},e.prototype.requestUpdate=function(t){if(null==t&&(t=!1),this.pendingRequests.push(moment()),t)return this.checkForPendingUpdates()},e.prototype.OnNotifyTWEvent=function(t){var e,n;if("milestone"===t.itemType)return e=null!=t.userId?t.userId/1:app.loggedInUser.id(),n=app.loggedInUser.id()===e,this.requestUpdate(n)},e.prototype.OnClickMilestone=function(t){var e,n;e=ko.unwrap(t.id),n=ko.unwrap(t.projectId),app.quickView.show("milestone",{id:e,projectId:n,milestoneId:e})},e.prototype.OnClickMoreMilestones=function(){var t,e;e="me"===this.milestonesListUserType()?app.loggedInUser.id():this.milestonesListUserId().toString(),t=this.GenerateFilterParams(),t.title=app.tl("Milestones"),t.tab=this.status(),t.userId=e,t.startDate=moment(t.startdate,"YYYYMMDD"),""!==t.enddate&&(t.endDate=moment(t.enddate,"YYYYMMDD")),t.isQuickView=!0,t.quickViewUseFilterId=!0,t.quickViewUseFilterDates=!0,app.quickView.show("milestones",t)},e.prototype.getMilestoneStatus=function(t){return t.deadline().isSame(moment(),"day")?"today":t.status()},e.prototype.getTimeRangeOptions=function(){return[{id:"1095",text:app.tl("All Upcoming")},{id:"today",text:app.tl("Today")},{id:"7",text:app.tl("In the next [_s] days",7)},{id:"14",text:app.tl("In the next [_s] days",14)},{id:"30",text:app.tl("In the next [_s] days",30)},{id:"90",text:app.tl("In the next [_s] months",3)},{id:"365",text:app.tl("In the next year")}]},e.prototype.GenerateFilterParams=function(){var t;return t={},t.sort=this.sortBy(),t.sortOrder=this.sortOrder(),t.find=this.status().toString(),t.projectHealth="-1",t.getEmoji=!0,t.startdate=moment().startOf("day").format("YYYYMMDD"),null!=this.formattedEndDate()&&(t.enddate=this.formattedEndDate()),("function"==typeof this.projectCompanyIds?this.projectCompanyIds():void 0)&&this.projectCompanyIds().length&&(t.projectCompanyIds=this.projectCompanyIds().toString()),("function"==typeof this.projectCategoryIds?this.projectCategoryIds():void 0)&&this.projectCategoryIds().length&&(t.projectCategoryIds=this.projectCategoryIds().toString()),("function"==typeof this.projectTagIds?this.projectTagIds():void 0)&&this.projectTagIds().length&&(t.projectTagIds=this.projectTagIds().join(","),t.matchAllProjectTags=this.matchAllProjectTags()),("function"==typeof this.projectOwnerIds?this.projectOwnerIds():void 0)&&this.projectOwnerIds().length&&(t.projectOwnerIds=this.projectOwnerIds().toString()),("function"==typeof this.projectHealth?this.projectHealth():void 0)&&"-1"!==this.projectHealth().toString()&&(t.projectHealth=this.projectHealth().toString()),("function"==typeof this.projectStatus?this.projectStatus():void 0)&&(t.projectStatus=this.projectStatus()),("function"==typeof this.onlyStarredProjects?this.onlyStarredProjects():void 0)&&(t.starredOnly=this.onlyStarredProjects()),("function"==typeof this.milestonesListUserType?this.milestonesListUserType():void 0)&&"all"===this.milestonesListUserType()?t.filterByUserId="":("function"==typeof this.milestonesListUserType?this.milestonesListUserType():void 0)&&"me"===this.milestonesListUserType()?t.filterByUserId=app.loggedInUser.id():("function"==typeof this.milestonesListUserId?this.milestonesListUserId():void 0)&&(t.filterByUserId=this.milestonesListUserId().toString()),t},e.prototype.dispose=function(){app.pulse.forget({interval:15e3,key:"dashboard-metric-summary",callback:this.checkForPendingUpdates}),this.subscriptions.forEach(function(t){return t.dispose()})},e}(),{viewModel:s,template:e}}.apply(e,s))&&(t.exports=i)},4262:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(3117),n(1204),n(1158),n(1151),n(1168),n(1015)],void 0!==(i=function(t,e,n,s,i,o){var r;return r=function(){function t(t){var n,o,r,l,c,p,d;null==t&&(t={}),this.getFilterParams=a(this.getFilterParams,this),this.getTimeRangeOptions=a(this.getTimeRangeOptions,this),this.setupDataLoader=a(this.setupDataLoader,this),this.getUpdatedData=a(this.getUpdatedData,this),this.onUiEventHandler=a(this.onUiEventHandler,this),this.OnNotifyTWEvent=a(this.OnNotifyTWEvent,this),this.requestUpdate=a(this.requestUpdate,this),this.checkForPendingUpdates=a(this.checkForPendingUpdates,this),this.subscriptions=[],this.panel=null!=(o=t.panel)?o:{},console.assert(Object.keys(this.panel).length),this.metricTitle=null!=(r=this.panel.name)?r:app.tl("Milestones"),this.showHeader=null!=(l=t.showHeader)&&l,this.endpoint=null!=(c=t.endpoint)?c:"projects/api/v3/summary.json",this.listField=null!=(p=t.listField)?p:"milestones",n=null!=t.data?t.data:{},this.subscriptions.push(this.summary=new i({type:"milestones",params:this.getFilterParams()})),this.metricEventsKey="milestone-counts-"+Date.now(),this.events=new s(this.metricEventsKey),this.subscriptions.push(this.events.Listen(this.onUiEventHandler)),this.config=this.panel.GetDisplayOptions(!0),this.chartId=this.panel.meta.chartId,this.chartOptions=null!=(d=t.chartOptions)?d:{},this.metricDataHelper=new e(this.config,n),this.dataLoaded=ko.observable(this.metricDataHelper.hasPresetData()),this.metricData=ko.observableArray(this.metricDataHelper.buildMetricData()),this.subscriptions.push(this.metricDataObject=ko.pureComputed(function(t){return function(){return t.metricDataHelper.getDataAsObject(t.metricData())}}(this))),this.subscriptions.push(this.chartData=ko.pureComputed(function(t){return function(){return t.metricDataHelper.buildChartData(t.metricDataObject())}}(this))),this.subscriptions.push(this.hasData=ko.pureComputed(function(t){return function(){return t.metricDataHelper.hasData(t.chartData())}}(this))),this.subscriptions.push(this.panel.settings.visibleMetrics.subscribe(function(t){return function(e){return t.config=t.panel.GetDisplayOptions(!0),t.metricDataHelper.updateConfig(t.config),t.metricDataObject.notifySubscribers()}}(this))),this.selectedTimeRange=ko.observable("thisweek"),this.subscriptions.push(this.selectedTimeRange.subscribe(function(t){return function(){if(!t.metricDataHelper.isDataSetUp())return t.setupDataLoader()}}(this))),this.dataLoader=null,this.dataLoaded()||this.setupDataLoader(),this.pendingRequests=[],app.pulse.listen({interval:15e3,key:"dashboard-metric-summary",callback:this.checkForPendingUpdates}),this.subscriptions.push(ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent))}return t.prototype.checkForPendingUpdates=function(){if(null==this.pendingRequests&&(this.pendingRequests=[]),this.pendingRequests.length)return this.getUpdatedData()},t.prototype.requestUpdate=function(t){if(null==t&&(t=!1),this.pendingRequests.push(moment()),t)return this.checkForPendingUpdates()},t.prototype.OnNotifyTWEvent=function(t){var e,n;if("milestone"===t.itemType)return e=null!=t.userId?t.userId/1:app.loggedInUser.id(),n=app.loggedInUser.id()===e,this.requestUpdate(n)},t.prototype.onUiEventHandler=function(t){var e,n,s,i,a,o,r;i=t.data,o=t.type,r=("function"==typeof(e=this.panel.settings).milestoneAssigneeType?e.milestoneAssigneeType():void 0)&&"all"===this.panel.settings.milestoneAssigneeType()?"":("function"==typeof(n=this.panel.settings).milestoneAssigneeType?n.milestoneAssigneeType():void 0)&&"me"===this.panel.settings.milestoneAssigneeType()?app.loggedInUser.id():("function"==typeof(s=this.panel.settings).milestoneAssigneeUserId?s.milestoneAssigneeUserId():void 0)?0===this.panel.settings.milestoneAssigneeUserId().length?app.loggedInUser.id():this.panel.settings.milestoneAssigneeUserId().toString():void 0,a=r.toString()===app.loggedInUser.id().toString(),"click"===o&&this.summary.openQuickView(i.key,{who:r,isMe:a,selectedTimeRange:this.selectedTimeRange(),filterType:i.name,filteredUserName:app.utility.GetFilterInfo(this.panel,"users",this.panel.settings.milestoneAssigneeUserId())})},t.prototype.getUpdatedData=function(){return this.metricDataHelper.isDataSetUp()?this.dataLoader.LoadUpdates():this.setupDataLoader()},t.prototype.setupDataLoader=function(){var t;return t=function(t){return function(e){var n;return null==e.summary&&(n=e,e.summary=n),t.metricDataHelper.updateMetricData(t.metricData,e),t.dataLoaded(!0),t.pendingRequests=[]}}(this),this.dataLoader=this.metricDataHelper.createDataLoader(this.endpoint,this.listField,"milestones",this.selectedTimeRange,this.getFilterParams,t)},t.prototype.getTimeRangeOptions=function(){return[{id:"anytime",text:app.tl("Anytime")},{id:"today",text:app.tl("Today")},{id:"yesterday",text:app.tl("Yesterday")},{id:"thisweek",text:app.tl("This week [_s]",app.utility.GetWeekText())},{id:"lastweek",text:app.tl("Last week [_s]",app.utility.GetWeekText())},{id:"thismonth",text:app.tl("This month")},{id:"lastmonth",text:app.tl("Last month")},{id:"last3months",text:app.utility.GetLastMonthsText(3)},{id:"last6months",text:app.utility.GetLastMonthsText(6)}]},t.prototype.getFilterParams=function(){var t;return t=this.panel.GetSettingsAsFilterParams(),app.utility.AddSparseFields(t,{milestones:"today,late,complete,upcoming,active"}),t},t.prototype.dispose=function(){app.pulse.forget({interval:15e3,key:"dashboard-metric-summary",callback:this.checkForPendingUpdates}),this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:r,template:t}}.apply(e,s))&&(t.exports=i)},4263:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}},o=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};s=[n(3118),n(1204),n(1158),n(1151),n(1168)],void 0!==(i=function(t,e,n,s,i){var r;return r=function(){function t(t){var n,r,l,c,p,d,u,h;null==t&&(t={}),this.getFilterParams=a(this.getFilterParams,this),this.getTimeRangeOptions=a(this.getTimeRangeOptions,this),this.setupDataLoader=a(this.setupDataLoader,this),this.getUpdatedData=a(this.getUpdatedData,this),this.OnClickNoHealth=a(this.OnClickNoHealth,this),this.onUiEventHandler=a(this.onUiEventHandler,this),this.OnNotifyTWEvent=a(this.OnNotifyTWEvent,this),this.requestUpdate=a(this.requestUpdate,this),this.checkForPendingUpdates=a(this.checkForPendingUpdates,this),this.subscriptions=[],this.endpoint=null!=(r=t.endpoint)?r:"projects/api/v3/summary.json",this.listField=null!=(l=t.listField)?l:"health",n=null!=t.data?t.data:{},this.panel=null!=(c=t.panel)?c:{},console.assert(Object.keys(this.panel).length),this.showHeader=null!=(p=t.showHeader)&&p,this.metricTitle=null!=(d=null!=(u=this.panel)?u.name:void 0)?d:app.tl("Project Health"),this.subscriptions.push(this.summary=new i({type:"projectHealth",params:this.getFilterParams()})),this.metricEventsKey="projectHealth-"+Date.now(),this.events=new s(this.metricEventsKey),this.subscriptions.push(this.events.Listen(this.onUiEventHandler)),this.config=this.panel.GetDisplayOptions(!0),this.chartId=this.panel.meta.chartId,this.chartOptions=null!=(h=t.chartOptions)?h:{},this.metricDataHelper=new e(this.config,n),this.dataLoaded=ko.observable(this.metricDataHelper.hasPresetData()),this.metricData=ko.observableArray(this.metricDataHelper.buildMetricData()),this.subscriptions.push(this.metricDataObject=ko.pureComputed(function(t){return function(){return t.metricDataHelper.getDataAsObject(t.metricData())}}(this))),this.subscriptions.push(this.panel.settings.visibleMetrics.subscribe(function(t){return function(e){return t.config=t.panel.GetDisplayOptions(!0),t.metricDataHelper.updateConfig(t.config),t.metricDataObject.notifySubscribers()}}(this))),this.subscriptions.push(this.chartData=ko.pureComputed(function(t){return function(){var e,n,s,i,a,r;e=t.metricDataObject(),r={};for(n in e)a=e[n],null!=t.projectHealth&&t.projectHealth().length?(s=n/1,(o.call(t.projectHealth(),s)>=0||(i=n.toString(),o.call(t.projectHealth(),i)>=0))&&(r[n]=a)):n/1!=0&&(r[n]=a);return t.metricDataHelper.buildChartData(r)}}(this))),this.subscriptions.push(this.updatesWithNoHealth=ko.pureComputed(function(t){return function(){var e;return null==t.metricDataObject()?0:null!=(e=t.metricDataObject()[0])?e:0}}(this))),this.subscriptions.push(this.showFooter=ko.pureComputed(function(t){return function(){return t.updatesWithNoHealth()>0&&(t.panel.settings.visibleMetrics().includes("0")||t.panel.settings.visibleMetrics().includes("all"))}}(this))),this.subscriptions.push(this.hasData=ko.pureComputed(function(t){return function(){return t.metricDataHelper.hasData(t.chartData())}}(this))),this.selectedTimeRange=ko.observable("thisweek"),this.subscriptions.push(this.selectedTimeRange.subscribe(function(t){return function(){if(!t.metricDataHelper.isDataSetUp())return t.setupDataLoader()}}(this))),this.dataLoader=null,this.dataLoaded()||this.setupDataLoader(),this.pendingRequests=[],app.pulse.listen({interval:15e3,key:"dashboard-metric-summary",callback:this.checkForPendingUpdates}),this.subscriptions.push(ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent))}return t.prototype.checkForPendingUpdates=function(){if(null==this.pendingRequests&&(this.pendingRequests=[]),this.pendingRequests.length)return this.getUpdatedData()},t.prototype.requestUpdate=function(t){if(null==t&&(t=!1),this.pendingRequests.push(moment()),t)return this.checkForPendingUpdates()},t.prototype.OnNotifyTWEvent=function(t){var e,n,s,i;if("project"===t.itemType&&null!=(null!=(n=t.extraInfo)&&null!=(s=n.data)?s.projectUpdateId:void 0))return e=null!=t.userId?t.userId/1:app.loggedInUser.id(),i=app.loggedInUser.id()===e,this.requestUpdate(i)},t.prototype.onUiEventHandler=function(t){var e,n;e=t.data,n=t.type,"click"===n&&this.summary.openQuickView(e.key,{selectedTimeRange:this.selectedTimeRange(),filterType:e.name})},t.prototype.OnClickNoHealth=function(){return this.onUiEventHandler({type:"click",data:{key:"0",name:app.tl("Not set")}})},t.prototype.getUpdatedData=function(){return this.metricDataHelper.isDataSetUp()?this.dataLoader.LoadUpdates():this.setupDataLoader()},t.prototype.setupDataLoader=function(){var t;return t=function(t){return function(e){return t.metricDataHelper.updateMetricData(t.metricData,e),t.dataLoaded(!0),t.pendingRequests=[]}}(this),this.dataLoader=this.metricDataHelper.createDataLoader(this.endpoint,this.listField,"health",this.selectedTimeRange,this.getFilterParams,t)},t.prototype.getTimeRangeOptions=function(){return[{id:"anytime",text:app.tl("Anytime")},{id:"today",text:app.tl("Today")},{id:"yesterday",text:app.tl("Yesterday")},{id:"thisweek",text:app.tl("This week [_s]",app.utility.GetWeekText())},{id:"lastweek",text:app.tl("Last week [_s]",app.utility.GetWeekText())},{id:"thismonth",text:app.tl("This month")},{id:"lastmonth",text:app.tl("Last month")},{id:"last3months",text:app.utility.GetLastMonthsText(3)},{id:"last6months",text:app.utility.GetLastMonthsText(6)}]},t.prototype.getFilterParams=function(){var t;return t=this.panel.GetSettingsAsFilterParams(),app.utility.AddSparseFields(t,{health:"0,1,2,3"}),t},t.prototype.dispose=function(){app.pulse.forget({interval:15e3,key:"dashboard-metric-summary",callback:this.checkForPendingUpdates}),this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:r,template:t}}.apply(e,s))&&(t.exports=i)},4264:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(1116),n(3119),n(1369)],void 0!==(i=function(t,e,n){var s;return s=function(){function e(e){var s,i,o,r,l,c,p,d,u,h,m,f,g;null==e&&(e={}),this.getTimeRangeOptions=a(this.getTimeRangeOptions,this),this.isNewProject=a(this.isNewProject,this),this.OnClickMoreUpdates=a(this.OnClickMoreUpdates,this),this.OnClickUpdate=a(this.OnClickUpdate,this),this.OnNotifyTWEvent=a(this.OnNotifyTWEvent,this),this.requestUpdate=a(this.requestUpdate,this),this.checkForPendingUpdates=a(this.checkForPendingUpdates,this),this.params=e,this.subscriptions=[],this.pageSize=null!=(i=e.pageSize)?i:5,this.sortBy=app.utility.EnsureObservable(null!=(o=e.sortBy)?o:"date"),this.sortOrder=app.utility.EnsureObservable(null!=(c=e.sortOrder)?c:"desc"),this.health=app.utility.EnsureObservable(null!=(p=e.health)?p:[0,1,2,3],!0),this.panel=null!=(d=e.panel)?d:null,s=function(t){return function(e,n){var s,i,a;return null==n&&(n=!1),s=null!=(null!=(i=t.panel)?i.settings[e]:void 0)?t.panel.settings[e]:null,app.utility.EnsureObservable(null!=(a=t.params[e])?a:s,n)}}(this),this.searchTerm=s("searchTerm"),this.projectOwnerIds=s("projectOwnerIds",!0),this.projectHealth=s("projectHealth",!0),this.projectStatus=s("projectStatus"),this.projectCompanyIds=s("companyIds",!0),this.projectCategoryIds=s("categoryIds",!0),this.projectTagIds=s("filterTagIds",!0),this.matchAllProjectTags=s("matchAllTags"),this.onlyStarredProjects=s("onlyStarredProjects"),this.projectUpdatesListDateInterval=s("projectUpdatesListDateInterval"),this.metricTitle=null!=(u=null!=(h=this.panel)?h.name:void 0)?u:app.tl("Project Updates"),this.allowBlankSlate=null==(m=e.allowBlankSlate)||m,this.showHeader=null==(f=e.showHeader)||f,this.showRange=null==(g=e.showRange)||g,this.showIfEmpty=null==(r=e.showIfEmpty)||r,this.showLoadMore=null!=(l=e.showLoadMore)&&l,this.selectedTimeRange=this.projectUpdatesListDateInterval,this.subscriptions.push(this.formattedStartDate=ko.pureComputed(function(t){return function(){var e;if(null!=t.params.startDate)return ko.unwrap(t.params.startDate);switch(t.selectedTimeRange()){case"today":return moment().startOf("day").format("YYYYMMDD");default:return e=app.utility.GetDatesFromRange("within","YYYYMMDD",t.selectedTimeRange()),e.startDate}}}(this))),this.subscriptions.push(this.data=new t("projects/updates.json",{ItemClass:n,pageSize:this.pageSize,loadNow:!1,filter:{generateFilterParams:function(t){return function(){return e=t.panel.GetSettingsAsFilterParams(),e.sort=t.sortBy(),e.sortOrder=t.sortOrder(),e.getEmoji=!0,e.getReactions=!0,e.createdAfterDate=t.formattedStartDate(),e}}(this)},onLoad:function(t){return function(){return t.pendingRequests=[]}}(this)})),this.subscriptions.push(this.dataList=ko.pureComputed(function(t){return function(){return null!=t.params.list?ko.unwrap(t.params.list):null==t.data?[]:ko.unwrap(t.data.list)}}(this))),this.subscriptions.push(this.hasContent=ko.pureComputed(function(t){return function(){return(!t.data||"content"===t.data.state())&&ko.unwrap(t.dataList).length>0}}(this))),this.subscriptions.push(this.showFooter=ko.pureComputed(function(t){return function(){return!t.showLoadMore&&(null!=t.data&&!t.data.isLoading()&&t.data.hasMoreRecords())}}(this))),this.subscriptions.push(this.numRemainingRecords=ko.pureComputed(function(t){return function(){return null==t.data?0:t.data.currentPaginator().numRemainingRecords()}}(this))),this.pendingRequests=[],app.pulse.listen({interval:15e3,key:"dashboard-metric-summary",callback:this.checkForPendingUpdates}),this.subscriptions.push(ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent))}return e.prototype.checkForPendingUpdates=function(){if(null==this.pendingRequests&&(this.pendingRequests=[]),this.pendingRequests.length)return this.data.Sync()},e.prototype.requestUpdate=function(t){if(null==t&&(t=!1),this.pendingRequests.push(moment()),t)return this.checkForPendingUpdates()},e.prototype.OnNotifyTWEvent=function(t){var e,n,s,i;if("project"===t.itemType&&null!=(null!=(n=t.extraInfo)&&null!=(s=n.data)?s.projectUpdateId:void 0))return e=null!=t.userId?t.userId/1:app.loggedInUser.id(),i=app.loggedInUser.id()===e,this.requestUpdate(i)},e.prototype.OnClickUpdate=function(t){var e,n;n=ko.unwrap(t.id),e=ko.unwrap(t.projectId),app.quickView.show("projectUpdates",{updateId:n,projectId:e,shouldShowHeaders:!1})},e.prototype.OnClickMoreUpdates=function(){app.quickView.show("projectUpdates",{title:app.tl("Project Updates"),isQuickView:!0,dataUrl:this.data.endpoint,filterParams:this.data.filterParams(),shouldShowHeaders:!0})},e.prototype.isNewProject=function(t){return null==t&&(t=0),!!this.dataList().length&&(0===t||this.dataList()[t].projectId()!==this.dataList()[t-1].projectId())},e.prototype.getTimeRangeOptions=function(){return[{id:"-1095",text:app.tl("All")},{id:"today",text:app.tl("Today")},{id:"-7",text:app.tl("In the previous [_s] days",7)},{id:"-14",text:app.tl("In the previous [_s] days",14)},{id:"-30",text:app.tl("In the previous [_s] days",30)},{id:"-90",text:app.tl("In the previous [_s] months",3)},{id:"-365",text:app.tl("In the previous year")}]},e.prototype.dispose=function(){app.pulse.forget({interval:15e3,key:"dashboard-metric-summary",callback:this.checkForPendingUpdates}),this.subscriptions.forEach(function(t){return t.dispose()})},e}(),{viewModel:s,template:e}}.apply(e,s))&&(t.exports=i)},4265:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(1116),n(1168),n(3120)],void 0!==(i=function(t,e,n){var s;return s=function(){function n(n){var s,i,o,r,l,c,p,d,u,h,m,f,g,x;null==n&&(n={}),this.getTimeRangeOptions=a(this.getTimeRangeOptions,this),this.getFilterParams=a(this.getFilterParams,this),this._openQuickView=a(this._openQuickView,this),this.OnClickItem=a(this.OnClickItem,this),this.OnNotifyTWEvent=a(this.OnNotifyTWEvent,this),this.requestUpdate=a(this.requestUpdate,this),this.checkForPendingUpdates=a(this.checkForPendingUpdates,this),this.subscriptions=[],this.panel=null!=(i=n.panel)?i:{},console.assert(Object.keys(this.panel).length),this.params=n,this.subscriptions=[],this.pageSize=null!=(o=n.pageSize)?o:5,this.sortBy=app.utility.EnsureObservable(null!=(c=n.sortBy)?c:"date"),this.sortOrder=app.utility.EnsureObservable(null!=(p=n.sortOrder)?p:"desc"),this.panel=null!=(d=n.panel)?d:null,s=function(t){return function(e,n){var s,i,a;return null==n&&(n=!1),s=null!=(null!=(i=t.panel)?i.settings[e]:void 0)?t.panel.settings[e]:null,app.utility.EnsureObservable(null!=(a=t.params[e])?a:s,n)}}(this),this.searchTerm=s("searchTerm"),this.projectOwnerIds=s("projectOwnerIds",!0),this.projectHealth=s("projectHealth",!0),this.projectStatus=s("projectStatus"),this.projectCompanyIds=s("companyIds",!0),this.projectCategoryIds=s("categoryIds",!0),this.projectTagIds=s("filterTagIds",!0),this.matchAllProjectTags=s("matchAllTags"),this.onlyStarredProjects=s("onlyStarredProjects"),this.taskAssigneeUserId=s("taskAssigneeUserId"),this.milestoneAssigneeUserId=s("milestoneAssigneeUserId"),this.projectsDigestTaskAssigneeType=s("projectsDigestTaskAssigneeType"),this.unreadCommentsMineOnly=s("unreadCommentsMineOnly"),this.unreadMessagesMineOnly=s("unreadMessagesMineOnly"),this.projectsDigestDateCode=s("projectsDigestDateCode"),this.projectsDigestApplyTimeRangeToUnread=s("projectsDigestApplyTimeRangeToUnread"),this.projectsDigestEventsRange=s("projectsDigestEventsRange"),this.projectsDigestEventsAttendingOnly=s("projectsDigestEventsAttendingOnly"),this.metricTitle=null!=(u=null!=(h=this.panel)?h.name:void 0)?u:app.tl("Project Summaries"),this.allowBlankSlate=null==(m=n.allowBlankSlate)||m,this.showHeader=null==(f=n.showHeader)||f,this.showRange=null==(g=n.showRange)||g,this.showIfEmpty=null==(r=n.showIfEmpty)||r,this.showLoadMore=null!=(l=n.showLoadMore)&&l,this.selectedTimeRange=this.projectsDigestDateCode,this.subscriptions.push(this.selectedTimeRangeText=ko.pureComputed(function(t){return function(){var e,n;return n=t.selectedTimeRange().toString(),e=ko.utils.arrayFirst(t.getTimeRangeOptions(),function(t){return t.id===n}),null!=e?ko.unwrap(e.text):""}}(this))),this.subscriptions.push(this.formattedStartDate=ko.pureComputed(function(t){return function(){var e;if(null!=t.params.startDate)return ko.unwrap(t.params.startDate);switch(t.selectedTimeRange()){case"today":return moment().startOf("day").format("YYYYMMDD");default:return e=app.utility.GetDatesFromRange("within","YYYYMMDD",t.selectedTimeRange()),e.startDate}}}(this))),this.subscriptions.push(this.taskAssigneeUserIds=ko.pureComputed(function(t){return function(){return"me"===t.panel.settings.taskAssigneeType()?1:"all"===t.panel.settings.taskAssigneeType()?"0,-1":t.panel.settings.taskAssignee}}(this))),this.summaryStats=ko.observable(null),this.dataLoaded=ko.observable(!1),this.hasData=ko.observable(!1),this.subscriptions.push(this.data=new t("projects/api/v3/summary.json",{pageSize:this.pageSize,loadNow:!1,filter:{generateFilterParams:this.getFilterParams},params:this.onlyStarredProjects()?{userIds:""}:null,onLoad:function(t){return function(e){var n;return n=e.response,t.summaryStats(n),t.dataLoaded(!0),t.hasData(!0),t.pendingRequests=[]}}(this)})),this.iconConfig={createdSince:"add",completedSince:"check-circle",messages:"messages",comments:"comments",events:"event"},this.subscriptions.push(this.digestItems=ko.pureComputed(function(t){return function(){var e,n,s,i,a,o,r,l,c,p,d,u,h,m;return null==(h=t.summaryStats())?[]:(m=function(t){var e;return t=ko.unwrap(t).toString(),e=t.length,e<=3?t:e<7?(t=t.substr(0,t.length-3))+"k+":(t=t.substr(0,t.length-6))+"m+"},e=[{type:u="tasks",iconName:t.iconConfig.createdSince,iconColor:app.consts.UICOLORS[u],filter:"createdSince",value:m(null!=(n=null!=(s=h.since)?s.tasksCreated:void 0)?n:0),label:app.tl("Tasks created [_s]",t.selectedTimeRangeText().toLowerCase()),enabled:!0},{type:u="tasks",iconName:t.iconConfig.completedSince,iconColor:app.consts.UICOLORS[u],filter:"completedSince",value:m(null!=(i=null!=(a=h.since)?a.tasksComplete:void 0)?i:0),label:app.tl("Tasks completed [_s]",t.selectedTimeRangeText().toLowerCase()),enabled:!0},{type:u="comments",iconName:t.iconConfig.comments,iconColor:app.consts.UICOLORS[u],filter:"comments",value:m(null!=(o=null!=(r=h.unread)?r.comments:void 0)?o:0),label:t.projectsDigestApplyTimeRangeToUnread()?app.tl("Unread comments [_s]",t.selectedTimeRangeText().toLowerCase()):app.tl("Unread comments"),enabled:!0},{type:u="messages",iconName:t.iconConfig.messages,iconColor:app.consts.UICOLORS[u],filter:"messages",value:m(null!=(l=null!=(c=h.unread)?c.messages:void 0)?l:0),label:t.projectsDigestApplyTimeRangeToUnread()?app.tl("Unread messages [_s]",t.selectedTimeRangeText().toLowerCase()):app.tl("Unread messages"),enabled:!0},{type:u="events",iconName:t.iconConfig.events,iconColor:app.consts.UICOLORS[u],filter:"events",value:m(null!=(p=null!=(d=h.events)?d.upcoming:void 0)?p:0),label:app.tl("Upcoming events"),enabled:app.loggedInUser.isAccount()}],e.filter(function(t){return t.enabled}))}}(this))),this.subscriptions.push(this.summary=new e({params:this.getFilterParams(),timeRangeOptions:this.getTimeRangeOptions()})),x=function(t){return function(){return setTimeout(function(){return t.summary.updateParams(t.getFilterParams(),!1)},50)}}(this),["taskAssigneeUserId","milestoneAssigneeUserId","projectsDigestTaskAssigneeType","projectsDigestDateCode","projectsDigestApplyTimeRangeToUnread","projectsDigestEventsRange","projectsDigestEventsAttendingOnly","unreadCommentsMineOnly","unreadMessagesMineOnly","selectedTimeRange"].forEach(function(t){return function(e){return t.subscriptions.push(t[e].subscribe(x))}}(this)),this.subscriptions.push(this.showFooter=ko.pureComputed(function(t){return function(){return!t.showLoadMore&&(null!=t.data&&!t.data.isLoading()&&t.data.hasMoreRecords())}}(this))),this.subscriptions.push(this.numRemainingRecords=ko.pureComputed(function(t){return function(){return null==t.data?0:t.data.currentPaginator().numRemainingRecords()}}(this))),this.pendingRequests=[],app.pulse.listen({interval:15e3,key:"dashboard-metric-summary",callback:this.checkForPendingUpdates}),this.subscriptions.push(ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent))}return n.prototype.checkForPendingUpdates=function(){if(null==this.pendingRequests&&(this.pendingRequests=[]),this.pendingRequests.length)return this.data.LoadUpdates()},n.prototype.requestUpdate=function(t){if(null==t&&(t=!1),this.pendingRequests.push(moment()),t)return this.checkForPendingUpdates()},n.prototype.OnNotifyTWEvent=function(t){var e,n,s;if("task"===(n=t.itemType)||"event"===n||"comment"===n||"comments"===n||"message"===n||"project"===n)return e=null!=t.userId?t.userId/1:app.loggedInUser.id(),s=app.loggedInUser.id()===e,this.requestUpdate(s)},n.prototype.OnClickItem=function(t){var e;return e="","tasks"===t.type&&(e="anyone"===this.panel.settings.projectsDigestTaskAssigneeType()?"0,-1":"me"===this.panel.settings.projectsDigestTaskAssigneeType()?app.loggedInUser.id():this.panel.settings.taskAssigneeUserId().toString()),this._openQuickView(t.type,t.filter,e)},n.prototype._openQuickView=function(t,e,n,s){var i,a;null==t&&(t=""),null==e&&(e=""),null==n&&(n=""),null==s&&(s=""),i=n.toString()===app.loggedInUser.id().toString(),a=null,"messages"===t?a=this.unreadMessagesMineOnly:"comments"===t&&(a=this.unreadCommentsMineOnly),this.summary.openQuickView(e,{who:n,isMe:i,type:t,selectedTimeRange:this.panel.range.selected(),filterType:"events"===e?"upcoming":e,filteredUserName:s,showOnlyMyNotifications:a,eventsDaysAhead:this.projectsDigestEventsRange(),attendingOnly:this.projectsDigestEventsAttendingOnly(),title:"events"===e?"Testing":null})},n.prototype.getFilterParams=function(){var t;return t=this.panel.GetSettingsAsFilterParams(),t.timeRange=this.selectedTimeRange(),t.until="now",t.fields={since:"taskscomplete,taskscreated,dateTime",unread:"messages,comments",events:"upcoming"},t.userIds="",t.eventsDaysAhead=this.projectsDigestEventsRange(),t.eventsAttendingOnly=this.projectsDigestEventsAttendingOnly(),t.onlyProjectEvents="active"!==this.projectStatus()||this.onlyStarredProjects(),t.eventsAttendingOnly&&(t.userIds="0,"+app.loggedInUser.id()),t.applySinceOnUnread=this.projectsDigestApplyTimeRangeToUnread(),t.applyTaskAssigneeUsersToSince=!0,"anyone"===this.panel.settings.projectsDigestTaskAssigneeType()?t.taskAssigneeUserIds="0,-1":"me"===this.panel.settings.projectsDigestTaskAssigneeType()?t.taskAssigneeUserIds=app.loggedInUser.id():t.taskAssigneeUserIds=this.panel.settings.taskAssigneeUserId().toString(),t},n.prototype.getTimeRangeOptions=function(){return[{id:"today",text:app.tl("Today")},{id:"yesterday",text:app.tl("Since Yesterday")},{id:"thisweek",text:app.tl("This Week [_s]",app.utility.GetWeekText())},{id:"lastweek",text:app.tl("Since Last Week")},{id:"thismonth",text:app.tl("This Month")},{id:"lastmonth",text:app.tl("Since Last Month")},{id:"last3months",text:app.tl("In the Last [_s] Months",3)},{id:"last6months",text:app.tl("In the Last [_s] Months",6)}]},n.prototype.dispose=function(){app.pulse.forget({interval:15e3,key:"dashboard-metric-summary",callback:this.checkForPendingUpdates}),this.subscriptions.forEach(function(t){return t.dispose()})},n}(),{viewModel:s,template:n}}.apply(e,s))&&(t.exports=i)},4266:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(3121),n(1116),n(245),n(1156)],void 0!==(i=function(t,e,n,s){var i;return i=function(){function t(t){var n,s,i;null==t&&(t={}),this.getGroupByOptions=a(this.getGroupByOptions,this),this.GetArchivedProjects=a(this.GetArchivedProjects,this),this.GetActiveProjects=a(this.GetActiveProjects,this),this.LabelsFromData=a(this.LabelsFromData,this),this.RenderChart=a(this.RenderChart,this),this.OnClickQuickView=a(this.OnClickQuickView,this),this.GetSeries=a(this.GetSeries,this),this.GetColumnNames=a(this.GetColumnNames,this),this.BuildData=a(this.BuildData,this),this.GenerateFilterParams=a(this.GenerateFilterParams,this),this.OnRendered=a(this.OnRendered,this),this.OnNotifyTWEvent=a(this.OnNotifyTWEvent,this),this.requestUpdate=a(this.requestUpdate,this),this.checkForPendingUpdates=a(this.checkForPendingUpdates,this),this.subscriptions=[],this.showHeader=null!=(n=t.showHeader)&&n,this.panel=null!=(s=t.panel)?s:{},console.assert(Object.keys(this.panel).length),this.groupBy=this.panel.settings.projectsGroupedBy,this.chartId=this.panel.meta.chartId,this.metricTitle=null!=(i=t.metricTitle)?i:app.tl("Projects Distribution"),this.columnDisplayMode=this.panel.settings.projectsColumnDisplayMode,this.subscriptions.push(this.columnDisplayMode.subscribe(function(t){return function(){return t.BuildData()}}(this))),this.page=ko.observable(1),this.showPagination=ko.observable(!1),this.showPreviousButton=ko.observable(!1),this.showNextButton=ko.observable(!1),this.subscriptions.push(this.url=ko.pureComputed(function(t){return function(){return"projects/api/v3/projects/distribution.json?page="+ko.unwrap(t.page)+"&pageSize=10"}}(this))),this.data=new e(this.url,{listField:"distribution",filter:{generateFilterParams:this.GenerateFilterParams},onLoad:function(t){return function(){var e,n,s,i;return t.BuildData(),n=null==(null!=(s=t.data)?s.hasMoreData:void 0),e=n?t.data.meta.page.hasMore():t.data.hasMoreData(),i=n?0:1,t.showPagination(t.data.meta.page.count()>10),t.showPreviousButton(t.data.meta.page.pageOffset()>i),t.showNextButton(e),t.pendingRequests=[]}}(this)}),this.pendingRequests=[],app.pulse.listen({interval:15e3,key:"dashboard-metric-summary",callback:this.checkForPendingUpdates}),this.subscriptions.push(ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent))}return t.prototype.checkForPendingUpdates=function(){if(null==this.pendingRequests&&(this.pendingRequests=[]),this.pendingRequests.length)return this.getUpdatedData()},t.prototype.requestUpdate=function(t){if(null==t&&(t=!1),this.pendingRequests.push(moment()),t)return this.checkForPendingUpdates()},t.prototype.OnNotifyTWEvent=function(t){},t.prototype.OnRendered=function(){},t.prototype.OnClickPrevPage=function(){var t;t=this.page(),(t-=1)>=1&&this.page(t)},t.prototype.OnClickNextPage=function(){var t,e,n,s;t=this.page(),n=null==(null!=(s=this.data)?s.hasMoreData:void 0),(e=n?this.data.meta.page.hasMore():this.data.hasMoreData())&&(t+=1,this.page(t))},t.prototype.GenerateFilterParams=function(){var t;return t=this.panel.GetSettingsAsFilterParams(),t.groupBy=this.groupBy().toLowerCase(),"all"===t.projectStatus&&(delete t.projectStatus,t.projectStatuses=this.panel.settings.visibleMetrics().toString()),"active"===t.projectStatus&&(delete t.projectStatus,t.projectStatuses="current,late,upcoming,completed"),t},t.prototype.BuildData=function(){var t;return t=this.groupBy().toLowerCase(),this.dataToPresent=this.data.list().map(function(e){var n,s,i,a,o,r,l,c;if(s=e.label,"type"===t&&(s=types[s]),""===s&&(s=function(){switch(!1){case"owner"!==t:return app.tl("No project owner");case"category"!==t:return app.tl("No category");case"portfolio"!==t:return app.tl("No board");case"portfoliocolumn"!==t:return app.tl("No column");case"company"!==t:return app.tl("No company");default:return""}}()),i={id:e.id,label:s,extra:null!=(a=e.extra)?a:{},counts:null!=(o=e.counts)?o:{}},null==i.counts.total){l=0,r=i.counts;for(n in r)c=r[n],l+=c/1;i.counts.total=l}return i}),this.dataSeries=this.GetSeries(),this.RenderChart()},t.prototype.GetColumnNames=function(){var t;return t=this.panel.GetDisplayOptions(!0),Object.keys(t)},t.prototype.GetColorsFromData=function(){var t,e,n,s,i;for(s=this.GetColumnNames(),t=[],e=0,i=s.length;e<i;e++)n=s[e],t.push(app.consts.UICOLORS[n]);return t},t.prototype.GetSeries=function(){var t,e,n,s,i,a;for(t=[],s=this.GetColumnNames(),function(t){var e,n,i,a;for(a=[],e=0,i=s.length;e<i;e++)n=s[e],a.push(t.counts[n]/1);return a},a=this.panel.GetDisplayOptions(!0),e=0,i=s.length;e<i;e++)n=s[e],t.push({name:a[n].label,color:a[n].color,data:this.dataToPresent.map(function(t){return t.counts[n]/1}),_key:n});return t},t.prototype.OnClickQuickView=function(t){var e;switch(e=this.panel.GetSettingsAsFilterParams(),e.isQuickView=!0,t.status){case"archived":e.title=app.tl("Archived Projects");break;case"completed":e.title=app.tl("Completed Projects");break;case"current":e.title=app.tl("Current Projects");break;case"late":e.title=app.tl("Late Projects");break;case"upcoming":e.title=app.tl("Upcoming Projects")}return e.projectStatus=t.status,"owner"===this.groupBy().toLowerCase()?e.projectOwnerIds=[t.value]:"category"===this.groupBy().toLowerCase()?e.projectCategoryIds=[t.value]:"company"===this.groupBy().toLowerCase()?e.projectCompanyIds=[t.value]:"portfolio"===this.groupBy().toLowerCase()?e.portfolioBoardIds=[t.value]:"portfoliocolumn"===this.groupBy().toLowerCase()&&(e.portfolioColumnIds=[t.value]),app.quickView.show("projectList",e)},t.prototype.RenderChart=function(){if(null!=document.getElementById(this.chartId))return n(function(t){return function(){var e,n,i,a,o,r,l,c;return 100,t.dataToPresent.length,c=.1,i=function(e,n){return t.GetMatchingColumn(e,n)},t.panel.GetSettingsAsFilterParams,n=t.groupBy().toLowerCase(),t.GetColumnNames(),o=t.OnClickQuickView,r=t.panel.name(),e=t.columnDisplayMode(),a="stacked"===(l=t.columnDisplayMode())||"percent"===l?0:3,s.chart(t.chartId,{credits:{enabled:!1},navigation:{buttonOptions:{enabled:!1}},chart:{type:"column",height:250,events:{load:function(e){return e.target.container.addEventListener("click",function(e){var n,s,i,a;if(null!=e.target.dataset.label?a=e.target.dataset.id:null!=e.target.parentNode.dataset.label&&(a=e.target.parentNode.dataset.id),null!=a)return n=t.panel.GetSettingsAsFilterParams(),i=null!=(s=n.projectStatus)?s:"all",o({status:i,value:a})})},render:function(t){var e,n;if(n=t.target.xAxis[0],0!==(null!=(e=n.labelRotation)?e:0))return n.labelGroup.div.classList.add("rotated")}}},tooltip:{useHTML:!0,shadow:!1,backgroundColor:"transparent",borderColor:"transparent",borderWidth:2,padding:0,formatter:function(){var t;return t="<div class='w-metric__chart-tooltip' style='background-color: "+this.color+";'>",t+="<strong>"+this.series.name+":</strong> "+(1===this.y?app.tl("[_s] project",1):app.tl("[_s] projects",this.y)),"percent"===e&&(t+=" ("+this.percentage.toFixed(1)+"%)"),t+="</div>"}},title:null,exporting:{allowHTML:!0,chartOptions:{title:{text:r},legend:{enabled:!0},plotOptions:{series:{dataLabels:{enabled:!0,style:{color:"#777",fontSize:"11px",cursor:"pointer",fontFamily:app.consts.FONTFAMILY,textOutline:"0px"},formatter:function(){return 0===this.y?"":this.y}}}}}},plotOptions:{column:{stacking:function(){switch(this.columnDisplayMode()){case"stacked":return"normal";case"percent":return"percent";default:return}}.call(t),grouping:!0,shadow:!1,colors:t.GetColorsFromData(),minPointLength:a},series:{cursor:"pointer",animation:!1,borderWidth:0,borderRadius:2,maxPointWidth:20,dataLabels:{enabled:!1,color:"#ffffff"},events:{click:function(t){var e,n;if(n=t.point,null!=(e=i(n.category,n.index)))return o({status:n.series.userOptions._key,value:e.id})}}}},yAxis:{visible:!1,tickInterval:c},xAxis:{categories:t.LabelsFromData(),lineWidth:0,tickLength:1,labels:{useHTML:!0,style:{color:"#777",fontSize:"11px",cursor:"pointer",fontFamily:app.consts.FONTFAMILY},formatter:function(){var t,e;return t=i(this.value,this.pos),null!=t?"owner"===n?(t.extra.avatarUrl.length||(t.extra.avatarUrl="images/noPhoto2.png"),"<span class='highcharts-custom-label' data-label='"+t.label+"' data-key='"+t._key+"' data-id='"+t.id+"' title='"+t.label+"'> <span class='highcharts-custom-label__content'> <img src='"+t.extra.avatarUrl+"' class='highcharts-custom-label__img'> "+t.label+" </span> <span class='highcharts-custom-label__count'> "+t.counts.total+" </span> </span>"):"company"===n?(e=null!=t.extra.logoUrl&&t.extra.logoUrl.length?t.extra.logoUrl:"//cdn.teamwork.com/images/no_clogo.png","<span class='highcharts-custom-label' data-label='"+t.label+"' data-key='"+t._key+"' data-id='"+t.id+"' title='"+t.label+"'> <span class='highcharts-custom-label__content'> <img src='"+e+"' class='highcharts-custom-label__img'> "+t.label+" </span> <span class='highcharts-custom-label__count'> "+t.counts.total+" </span> </span>"):(t.extra.color.length||(t.extra.color="#999"),"<span class='highcharts-custom-label' data-label='"+t.label+"' data-key='"+t._key+"' data-id='"+t.id+"' title='"+t.label+"'> <span class='highcharts-custom-label__content'> "+t.label+" </span> <span class='highcharts-custom-label__count' style='background-color: "+t.extra.color+";'> "+t.counts.total+" </span> </span>"):this.value}}},legend:{enabled:!1},series:t.dataSeries})}}(this))},t.prototype.LabelsFromData=function(){return this.dataToPresent.map(function(t){return t.label})},t.prototype.GetActiveProjects=function(){return this.dataToPresent.map(function(t){return t.active})},t.prototype.GetArchivedProjects=function(){return this.dataToPresent.map(function(t){return t.archived})},t.prototype.GetMatchingColumn=function(t,e){var n;return n=this.dataToPresent.filter(function(e){return e.label===t}),(null!=n?n.length:void 0)?1===(null!=n?n.length:void 0)?n[0]:this.dataToPresent[e].label===t?this.dataToPresent[e]:null:null},t.prototype.getGroupByOptions=function(){return[{id:"owner",text:app.tl("Project Owner")},{id:"category",text:app.tl("Category")},{id:"company",text:app.tl("Company")}]},t.prototype.dispose=function(){app.pulse.forget({interval:15e3,key:"dashboard-metric-summary",callback:this.checkForPendingUpdates}),this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:i,template:t}}.apply(e,s))&&(t.exports=i)},4267:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(1116),n(3122),n(1284)],void 0!==(i=function(t,e,n){var s;return s=function(){function e(e){var s,i,o,r,l,c,p,d,u;null==e&&(e={}),this.OnClickRisk=a(this.OnClickRisk,this),this.OnNotifyTWEvent=a(this.OnNotifyTWEvent,this),this.requestUpdate=a(this.requestUpdate,this),this.checkForPendingUpdates=a(this.checkForPendingUpdates,this),this.params=e,this.subscriptions=[],this.panel=null!=(s=e.panel)?s:{},console.assert(Object.keys(this.panel).length),this.showHeader=null!=(i=e.showHeader)&&i,this.metricTitle=null!=(o=this.panel.name)?o:app.tl("Top Risks"),this.sortBy=app.utility.EnsureObservable(null!=(r=e.sortBy)?r:"result"),this.sortOrder=app.utility.EnsureObservable(null!=(l=e.sortOrder)?l:"desc"),this.showOpenRisks=app.utility.EnsureObservable(null==(c=e.showOpenRisks)||c),this.showPendingRisks=app.utility.EnsureObservable(null==(p=e.showPendingRisks)||p),this.showClosedRisks=app.utility.EnsureObservable(null!=(d=e.showClosedRisks)&&d),this.showDeleted=app.utility.EnsureObservable(null!=(u=e.showDeleted)&&u),this.subscriptions.push(this.data=new t("projects/api/v3/risks.json",{ItemClass:n,pageSize:4,filter:{generateFilterParams:function(t){return function(){return e=t.panel.GetSettingsAsFilterParams(),e.include="users,projects,projects.companies",e.statuses="",t.showOpenRisks()&&(e.statuses+="new"),t.showPendingRisks()&&(e.statuses.length>0&&(e.statuses+=","),e.statuses+="pending"),t.showClosedRisks()&&(e.statuses.length>0&&(e.statuses+=","),e.statuses+="closed"),e.sort=t.sortBy(),e.showDeleted=t.showDeleted(),e.getEmoji=!0,e}}(this)},loadNow:!1,onLoad:function(t){return function(){return t.pendingRequests=[]}}(this)})),this.subscriptions.push(this.dataList=ko.pureComputed(function(t){return function(){return null!=t.params.list?ko.unwrap(t.params.list):null==t.data?[]:ko.unwrap(t.data.list)}}(this))),this.subscriptions.push(this.hasRisks=ko.pureComputed(function(t){return function(){return(!t.data||"content"===t.data.state())&&ko.unwrap(t.dataList).length>0}}(this))),this.pendingRequests=[],app.pulse.listen({interval:15e3,key:"dashboard-metric-summary",callback:this.checkForPendingUpdates}),this.subscriptions.push(ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent))}return e.prototype.checkForPendingUpdates=function(){if(null==this.pendingRequests&&(this.pendingRequests=[]),this.pendingRequests.length)return this.data.Sync()},e.prototype.requestUpdate=function(t){if(null==t&&(t=!1),this.pendingRequests.push(moment()),t)return this.checkForPendingUpdates()},e.prototype.OnNotifyTWEvent=function(t){var e,n;if("risk"===t.itemType)return e=null!=t.userId?t.userId/1:app.loggedInUser.id(),n=app.loggedInUser.id()===e,this.requestUpdate(n)},e.prototype.OnClickRisk=function(t){var e,n;n=ko.unwrap(t.id),e=ko.unwrap(t.projectId),app.quickView.show("risk",{id:n,projectId:e,riskId:n})},e.prototype.dispose=function(){app.pulse.forget({interval:15e3,key:"dashboard-metric-summary",callback:this.checkForPendingUpdates}),this.subscriptions.forEach(function(t){return t.dispose()})},e}(),{viewModel:s,template:e}}.apply(e,s))&&(t.exports=i)},4268:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(3123),n(1204),n(1158),n(1151),n(1168),n(1015)],void 0!==(i=function(t,e,n,s,i,o){var r;return r=function(){function t(t){var n,o,r,l,c,p,d;null==t&&(t={}),this.getFilterParams=a(this.getFilterParams,this),this.getTimeRangeOptions=a(this.getTimeRangeOptions,this),this.setupDataLoader=a(this.setupDataLoader,this),this.getUpdatedData=a(this.getUpdatedData,this),this.onUiEventHandler=a(this.onUiEventHandler,this),this.OnNotifyTWEvent=a(this.OnNotifyTWEvent,this),this.requestUpdate=a(this.requestUpdate,this),this.checkForPendingUpdates=a(this.checkForPendingUpdates,this),this.subscriptions=[],this.endpoint=null!=(o=t.endpoint)?o:"projects/api/v3/summary.json",this.listField=null!=(r=t.listField)?r:"risks",n=null!=t.data?t.data:{},this.panel=null!=(l=t.panel)?l:{},console.assert(Object.keys(this.panel).length),this.showHeader=null!=(c=t.showHeader)&&c,this.metricTitle=null!=(p=this.panel.name)?p:app.tl("Risks"),this.subscriptions.push(this.summary=new i({type:"risks",params:this.getFilterParams()})),this.metricEventsKey="risks-"+Date.now(),this.events=new s(this.metricEventsKey),this.subscriptions.push(this.events.Listen(this.onUiEventHandler)),this.config=this.panel.GetDisplayOptions(!0),this.chartId=this.panel.meta.chartId,this.chartOptions=null!=(d=t.chartOptions)?d:{},this.metricDataHelper=new e(this.config,n),this.dataLoaded=ko.observable(this.metricDataHelper.hasPresetData()),this.metricData=ko.observableArray(this.metricDataHelper.buildMetricData()),this.subscriptions.push(this.metricDataObject=ko.pureComputed(function(t){return function(){return t.metricDataHelper.getDataAsObject(t.metricData())}}(this))),this.subscriptions.push(this.chartData=ko.pureComputed(function(t){return function(){return t.metricDataHelper.buildChartData(t.metricDataObject())}}(this))),this.subscriptions.push(this.hasData=ko.pureComputed(function(t){return function(){return t.metricDataHelper.hasData(t.chartData())}}(this))),this.subscriptions.push(this.panel.settings.visibleMetrics.subscribe(function(t){return function(e){return t.config=t.panel.GetDisplayOptions(!0),t.metricDataHelper.updateConfig(t.config),t.metricDataObject.notifySubscribers()}}(this))),this.selectedTimeRange=ko.observable("thisweek"),this.subscriptions.push(this.selectedTimeRange.subscribe(function(t){return function(){if(!t.metricDataHelper.isDataSetUp())return t.setupDataLoader()}}(this))),this.dataLoader=null,this.dataLoaded()||this.setupDataLoader(),this.pendingRequests=[],app.pulse.listen({interval:15e3,key:"dashboard-metric-summary",callback:this.checkForPendingUpdates}),this.subscriptions.push(ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent))}return t.prototype.checkForPendingUpdates=function(){if(null==this.pendingRequests&&(this.pendingRequests=[]),this.pendingRequests.length)return this.getUpdatedData()},t.prototype.requestUpdate=function(t){if(null==t&&(t=!1),this.pendingRequests.push(moment()),t)return this.checkForPendingUpdates()},t.prototype.OnNotifyTWEvent=function(t){var e,n;if("risk"===t.itemType)return e=null!=t.userId?t.userId/1:app.loggedInUser.id(),n=app.loggedInUser.id()===e,this.requestUpdate(n)},t.prototype.onUiEventHandler=function(t){var e,n;e=t.data,n=t.type,"click"===n&&this.summary.openQuickView(e.key,{selectedTimeRange:this.selectedTimeRange(),filterType:e.name})},t.prototype.getUpdatedData=function(){return this.metricDataHelper.isDataSetUp()?this.dataLoader.LoadUpdates():this.setupDataLoader()},t.prototype.setupDataLoader=function(){var t;return t=function(t){return function(e){return t.metricDataHelper.updateMetricData(t.metricData,e),t.dataLoaded(!0),t.pendingRequests=[]}}(this),this.dataLoader=this.metricDataHelper.createDataLoader(this.endpoint,this.listField,"risks",this.selectedTimeRange,this.getFilterParams,t)},t.prototype.getTimeRangeOptions=function(){return[{id:"anytime",text:app.tl("Anytime")},{id:"today",text:app.tl("Today")},{id:"yesterday",text:app.tl("Yesterday")},{id:"thisweek",text:app.tl("This week [_s]",app.utility.GetWeekText())},{id:"lastweek",text:app.tl("Last week [_s]",app.utility.GetWeekText())},{id:"thismonth",text:app.tl("This month")},{id:"lastmonth",text:app.tl("Last month")},{id:"last3months",text:app.utility.GetLastMonthsText(3)},{id:"last6months",text:app.utility.GetLastMonthsText(6)}]},t.prototype.getFilterParams=function(){var t;return t=this.panel.GetSettingsAsFilterParams(),app.utility.AddSparseFields(t,{risks:"closed,open,pending,total"}),t},t.prototype.dispose=function(){app.pulse.forget({interval:15e3,key:"dashboard-metric-summary",callback:this.checkForPendingUpdates}),this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:r,template:t}}.apply(e,s))&&(t.exports=i)},4269:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(3124)],void 0!==(i=function(t){var e;return e=function(){function t(t){var e,n,s;null==t&&(t={}),this.OnNotifyTWEvent=a(this.OnNotifyTWEvent,this),this.params=t,this.subscriptions=[],this.panel=null!=(e=t.panel)?e:{},console.assert(Object.keys(this.panel).length),this.showHeader=null!=(n=t.showHeader)&&n,this.metricTitle=null!=(s=this.panel.name)?s:app.tl("Tasks Breakdown"),this.subscriptions.push(ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent)),this.subscriptions.push(this.panel.settings.defaultBreakdownType.subscribe(function(t){return function(e){return t.panel.Save()}}(this)))}return t.prototype.OnNotifyTWEvent=function(t){},t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:e,template:t}}.apply(e,s))&&(t.exports=i)},4270:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(3125),n(14)],void 0!==(i=function(t,e){var n;return n=function(){function t(t){null==t&&(t={}),this.setEndDate=a(this.setEndDate,this),this.setStartDate=a(this.setStartDate,this),this.loadSelectedTaskList=a(this.loadSelectedTaskList,this),this.loadSelectedProject=a(this.loadSelectedProject,this),this.resetTaskList=a(this.resetTaskList,this),this.clearEndDateBase=a(this.clearEndDateBase,this),this.dateFormat="YYYYMMDD",this.subscriptions=[],this.settings=t.settings,this.selectedTaskList=ko.observable({}),this.selectedProject=ko.observable({}),this.selectedTaskListMilestone=ko.observable({}),this.hasLoadedData=ko.observable(!1),this.startDateMoment=ko.observable(e(this.settings.taskStartDate()||new Date,this.dateFormat)),this.startDateMomentUI=ko.pureComputed({read:this.startDateMoment,write:function(t){return function(e){return t.startDateMoment(e),t.setStartDate(e)}}(this)}),this.endDateMoment=ko.observable(e(this.settings.taskEndDate()||new Date,this.dateFormat)),this.endDateMomentUI=ko.pureComputed({read:this.endDateMoment,write:function(t){return function(e){return t.settings.burndownEndDateBase("custom"),t.endDateMoment(e),t.setEndDate(e)}}(this)}),this.settings.taskStartDate()||this.setStartDate(e().startOf("month")),this.settings.taskEndDate()||this.setEndDate(e().endOf("month")),this.subscriptions.push(this.latestTaskDate=ko.pureComputed(function(t){return function(){var n;return t.selectedTaskList().tasks?(n=t.selectedTaskList().tasks.reduce(function(t,e){return new Date(t)>new Date(e.dueDate)?t:e.dueDate},e(t.startDateMomentUI()).toDate()),e(n)):e()}}(this))),this.subscriptions.push(this.calculatedEndDate=ko.pureComputed(function(t){return function(){return"latest"===t.settings.burndownEndDateBase()&&e.isMoment(t.latestTaskDate())?t.latestTaskDate():"milestone"===t.settings.burndownEndDateBase()&&t.selectedTaskListMilestone().deadline?e(t.selectedTaskListMilestone().deadline,t.dateFormat):null}}(this))),this.calculatedEndDate.subscribe(function(t){return function(e){if(null!=e)return t.endDateMoment(e)}}(this)),this.subscriptions.push(this.taskListsUrl=ko.pureComputed(function(t){return function(){return app.prefixApi("tasklists.json?status=all&sortBy=name&projectId="+t.settings.projectId(),"API_PREFIX_V1","API_PREFIX_V1")}}(this))),this.projectsUrl=app.prefixApi("projects.json?dataset=basic","API_PREFIX_V2","API_PREFIX_V2"),this.settings.taskListId()&&this.loadSelectedTaskList(),this.settings.projectId()&&this.loadSelectedProject(),this.subscriptions.push(this.endDateOptions=ko.pureComputed(function(t){return function(){var e;return t.settings.taskListId()>0?(e=[{id:"latest",text:app.tl("Latest due date [_s]","("+t.latestTaskDate().userFormat()+")")},{id:"custom",text:app.tl("Custom")}],null!=t.selectedTaskListMilestone().id&&e.unshift({id:"milestone",text:app.tl("Milestone linked to task list")}),e):[]}}(this))),this.burnRateCalculationOptions=[{id:"tasksCompleted",text:app.tl("Number of tasks completed")},{id:"estimatedTime",text:app.tl("Estimated and logged time")}]}return t.prototype.clearEndDateBase=function(){return this.settings.burndownEndDateBase("custom")},t.prototype.resetTaskList=function(t){return t.id,this.settings.taskListId(0),this.selectedTaskList({})},t.prototype.loadSelectedProject=function(){return app.api.get(app.prefixApi("projects/"+this.settings.projectId()+".json","API_PREFIX_V2","API_PREFIX_V2")).then(function(t){return function(e){var n,s,i;return(s=e.response.project)?(i=s.name,n=s.id,t.selectedProject({text:i,id:n})):void t.selectedProject({})}}(this)).catch(function(t){return function(){return t.selectedProject({})}}(this))},t.prototype.loadSelectedTaskList=function(){return this.hasLoadedData(!1),app.api.get(app.prefixApi("tasklists/"+this.settings.taskListId()+".json?getTasks=true","API_PREFIX_V1","API_PREFIX_V1")).then(function(t){return function(e){var n,s,i,a,o;return(s=e.response.todoList)?(o=s.name,n=s.id,i=s.milestoneId,a=s.tasks,t.selectedTaskList({text:o,id:n,milestoneId:i,tasks:a}),i>0?app.api.get("/milestones/"+i+".json").then(function(e){return t.selectedTaskListMilestone(e.response.milestone),ko.tasks.schedule(function(){return t.hasLoadedData(!0)})}).catch(function(){return t.selectedTaskListMilestone({})}):(t.selectedTaskListMilestone({}),ko.tasks.schedule(function(){return t.hasLoadedData(!0)}))):(t.selectedTaskList({}),void t.selectedTaskListMilestone({}))}}(this)).catch(function(t){return function(){return t.selectedTaskList({}),t.selectedTaskListMilestone({})}}(this))},t.prototype.setStartDate=function(t){return this.settings.taskStartDate(t.format(this.dateFormat))},t.prototype.setEndDate=function(t){return this.settings.taskEndDate(t.format(this.dateFormat))},t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:n,template:t}}.apply(e,s))&&(t.exports=i)},4271:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(3126),n(1156)],void 0!==(i=function(t,e){var n;return n=function(){function t(t){null==t&&(t={}),this.OnNotifyTWEvents=a(this.OnNotifyTWEvents,this),this.OnClickChart=a(this.OnClickChart,this),this.OnClickMilestone=a(this.OnClickMilestone,this),this.OnClickTaskList=a(this.OnClickTaskList,this),this.OnClickProject=a(this.OnClickProject,this),this.subscriptions=[],this.taskListId=t.panel.settings.taskListId,this.startDate=t.panel.settings.taskStartDate,this.endDate=t.panel.settings.taskEndDate,this.burndownEndDateBase=t.panel.settings.burndownEndDateBase,this.burndownBurnRateType=t.panel.settings.burndownBurnRateType,this.burndownShowCompleted=t.panel.settings.burndownShowCompleted,this.data=ko.observable({}),this.total=ko.observable(0),this.tasklist=ko.observable({}),this.milestone=ko.observable({}),this.project=ko.observable({}),this.dateFormat="YYYYMMDD",this.timestamp=Date.now(),this.dataLoading=ko.observable(!1),this.subscriptions.push(app.ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvents)),this.burndownData=ko.pureComputed(function(t){return function(){var e;return e=t.data()||{},Object.keys(e).sort(function(t,e){return Number(t)-Number(e)}).map(function(t){return e[t]})}}(this)),this.xAxisFormat="ddd, Do MMM",this.dates=ko.pureComputed(function(t){return function(){return t.burndownData().map(function(e){return moment(e.date,t.dateFormat).format(t.xAxisFormat)})}}(this)),this.remaining=ko.pureComputed(function(t){return function(){var e,n;return t.burndownData().length>0?(n=t.burndownData().reduce(function(t,e){return t+Number(e.completedCount)},0),e=t.total()-n,e>0?e:0):""}}(this)),this.remainingDays=ko.pureComputed(function(t){return function(){var e;if(t.burndownData().length>0)return e=moment(t.burndownData()[t.burndownData().length-1].date,t.dateFormat),Math.max(e.diff(moment(),"days"),0)}}(this)),this.overdueSince=ko.pureComputed(function(t){return function(){var e;return e=t.idealBurndown().indexOf(0),t.burndownData()[e].actualBurn>0?e:t.burndownData().length}}(this)),this.idealBurndown=ko.pureComputed(function(t){return function(){return t.burndownData().map(function(t){return Number(t.idealBurn)})}}(this)),this.actualBurndown=ko.pureComputed(function(t){return function(){var e;return e=moment().format(t.dateFormat),t.burndownData().filter(function(t){return t.date<=e}).map(function(t){return Number(t.actualBurn)})}}(this)),this.completed=ko.pureComputed(function(t){return function(){return t.burndownData().map(function(t){return Number(t.completed)})}}(this)),this.chartSettings=ko.pureComputed(function(t){return function(){return{title:{text:""},chart:{margin:[32,8,0,8],height:250,events:{click:t.OnClickChart},className:"w-metric-tasks-burndown__chart"},exporting:{enabled:!1},xAxis:{categories:t.dates(),visible:!1},yAxis:[{maxPadding:0,title:{text:"estimatedTime"===t.burndownBurnRateType()?app.tl("Hours"):app.tl("Tasks")},visible:!1}],legend:{enabled:!1},tooltip:{valueSuffix:" "+("estimatedTime"===t.burndownBurnRateType()?app.tl("hrs"):app.tl("tasks")),crosshairs:!0,shared:!0,shadow:!1,useHTML:!0,style:{fill:"#fcfcfc",stroke:"#dddddd"}},plotOptions:{series:{pointWidth:15}},series:[{name:app.tl("Actual Burn"),type:"area",lineWidth:2,fillColor:"rgba(32,150,243,.4)",color:"rgb(32,150,243)",marker:{fillColor:"rgb(32,150,243)",radius:3,symbol:"circle",enabled:!1},data:t.actualBurndown(),zoneAxis:"x",zones:[{value:t.overdueSince(),color:"rgb(32,150,243)",fillColor:"rgba(32,150,243,.4)"},{color:"rgb(255,100,97)",fillColor:"rgba(255,100,97,.4)"}]},{name:app.tl("Completed"),type:"column",color:"#59C894",borderWidth:0,borderRadius:4,data:t.completed(),visible:t.burndownShowCompleted(),tooltip:{valueSuffix:" "+("estimatedTime"===t.burndownBurnRateType()?app.tl("hrs"):app.tl("tasks"))}},{name:app.tl("Ideal Burn"),color:"#aaaaaa",lineWidth:2,marker:{fillColor:"#aaaaaa",radius:3,symbol:"circle",enabled:!1},data:t.idealBurndown(),dashStyle:"longdash",tooltip:{valueDecimals:1}}]}}}(this)),[this.taskListId,this.startDate,this.endDate,this.burndownEndDateBase,this.burndownBurnRateType,this.burndownShowCompleted].forEach(function(t){return function(e){return t.subscriptions.push(e.subscribe(function(){return t.loadData()}))}}(this)),this.subscriptions.push(this.data.subscribe(function(t){return function(e){return t.drawChart()}}(this))),this.loadData()}return t.prototype.loadData=function(){var t;if(!this.dataLoading())return this.total(0),this.dataLoading(!0),this.taskListId()?(t="estimatedTime"===this.burndownBurnRateType(),app.api.get("/tasklists/"+this.taskListId()+"/burndown.json?startDate="+this.startDate()+"&endDate="+this.endDate()+"&baseEndDate="+this.burndownEndDateBase()+"&basedOnEstimates="+t).then(function(t){return function(e){var n;return n=e.response,t.total(Number(n.total)||0),t.milestone(n.milestone),t.tasklist(n.tasklist),t.project(n.project),t.data(n.burndown)}}(this)).finally(function(t){return function(){return t.dataLoading(!1)}}(this))):this.data({})},t.prototype.drawChart=function(){var t;return t="task-burndown-"+this.timestamp,setTimeout(function(n){return function(){if(document.getElementById(t))return e.chart(t,n.chartSettings())}}(this))},t.prototype.OnClickProject=function(t){var e,n;return app.quickView.show("project",{id:null!=(e=this.project())?e.id:void 0,projectId:null!=(n=this.project())?n.id:void 0})},t.prototype.OnClickTaskList=function(t){return app.quickView.show("taskList",{id:this.taskListId(),taskListId:this.taskListId()})},t.prototype.OnClickMilestone=function(t){var e,n,s;return app.quickView.show("milestone",{id:null!=(e=this.milestone())?e.id:void 0,milestoneId:null!=(n=this.milestone())?n.id:void 0,projectId:null!=(s=this.project())?s.id:void 0})},t.prototype.OnClickChart=function(t){},t.prototype.OnNotifyTWEvents=function(t){var e;if("task"===t.itemType&&t.taskListId===this.taskListId()||"milestone"===t.itemType&&t.itemId===(null!=(e=this.milestone())?e.id:void 0))return this.loadData()},t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:n,template:t}}.apply(e,s))&&(t.exports=i)},4272:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(3127),n(1204),n(1158),n(1151),n(1168),n(1015)],void 0!==(i=function(t,e,n,s,i,o){var r;return r=function(){function t(t){var n,o,r,l,c,p,d;null==t&&(t={}),this.getFilterParams=a(this.getFilterParams,this),this.getTimeRangeOptions=a(this.getTimeRangeOptions,this),this.setupDataLoader=a(this.setupDataLoader,this),this.getUpdatedData=a(this.getUpdatedData,this),this.OnClickNoDateTasks=a(this.OnClickNoDateTasks,this),this.showCompleted=a(this.showCompleted,this),this.onUiEventHandler=a(this.onUiEventHandler,this),this.OnNotifyTWEvent=a(this.OnNotifyTWEvent,this),this.requestUpdate=a(this.requestUpdate,this),this.checkForPendingUpdates=a(this.checkForPendingUpdates,this),this.subscriptions=[],this.endpoint=null!=(o=t.endpoint)?o:"projects/api/v3/summary.json",this.listField=null!=(r=t.listField)?r:"tasks",n=null!=t.data?t.data:{},this.panel=null!=(l=t.panel)?l:{},console.assert(Object.keys(this.panel).length),this.showHeader=null!=(c=t.showHeader)&&c,this.metricTitle=null!=(p=this.panel.name)?p:app.tl("Active Tasks"),this.subscriptions.push(this.summary=new i({type:"tasks",params:this.getFilterParams()})),this.metricEventsKey="task-counts-"+Date.now(),this.events=new s(this.metricEventsKey),this.subscriptions.push(this.events.Listen(this.onUiEventHandler)),this.config=this.panel.GetDisplayOptions(!0),this.chartId=this.panel.meta.chartId,this.chartOptions=null!=(d=t.chartOptions)?d:{},this.metricDataHelper=new e(this.config,n),this.dataLoaded=ko.observable(this.metricDataHelper.hasPresetData()),this.metricData=ko.observableArray(this.metricDataHelper.buildMetricData()),this.subscriptions.push(this.panel.settings.visibleMetrics.subscribe(function(t){return function(e){return t.config=t.panel.GetDisplayOptions(!0),t.metricDataHelper.updateConfig(t.config),t.metricDataObject.notifySubscribers()}}(this))),this.subscriptions.push(this.metricDataObject=ko.pureComputed(function(t){return function(){return t.metricDataHelper.getDataAsObject(t.metricData())}}(this))),this.chartData=ko.pureComputed(function(t){return function(){var e,n,s,i;e=t.metricDataObject(),i={};for(n in e)s=e[n],"nodate"!==n&&(i[n]=s);return t.metricDataHelper.buildChartData(i)}}(this)),this.hasData=ko.pureComputed(function(t){return function(){return t.metricDataHelper.hasData(t.chartData())}}(this)),this.selectedTimeRange=ko.observable("thisweek"),this.subscriptions.push(this.selectedTimeRange.subscribe(function(t){return function(){if(!t.metricDataHelper.isDataSetUp())return t.setupDataLoader()}}(this))),this.subscriptions.push(this.tasksWithNoDateCount=ko.pureComputed(function(t){return function(){var e;return null==t.metricDataObject()||null==t.config.nodate?0:null!=(e=t.metricDataObject().nodate)?e:0}}(this))),this.subscriptions.push(this.onlyShowingNoDateTasks=ko.pureComputed(function(t){return function(){return 0===t.chartData().length&&t.config.hasOwnProperty("nodate")}}(this))),this.subscriptions.push(this.showFooter=ko.pureComputed(function(t){return function(){return t.tasksWithNoDateCount()>0&&!t.onlyShowingNoDateTasks()}}(this))),this.dataLoader=null,this.dataLoaded()||this.setupDataLoader(),this.pendingRequests=[],app.pulse.listen({interval:15e3,key:"dashboard-metric-summary",callback:this.checkForPendingUpdates}),this.subscriptions.push(ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent))}return t.prototype.checkForPendingUpdates=function(){if(null==this.pendingRequests&&(this.pendingRequests=[]),this.pendingRequests.length)return this.getUpdatedData()},t.prototype.requestUpdate=function(t){if(null==t&&(t=!1),this.pendingRequests.push(moment()),t)return this.checkForPendingUpdates()},t.prototype.OnNotifyTWEvent=function(t){var e,n,s;if("task"===(n=t.itemType)||"todo-item"===n||"todo_item"===n)return e=null!=t.userId?t.userId/1:app.loggedInUser.id(),s=app.loggedInUser.id()===e,this.requestUpdate(s)},t.prototype.onUiEventHandler=function(t){var e,n,s,i,a,o,r;i=t.data,o=t.type,r=("function"==typeof(e=this.panel.settings).taskAssigneeType?e.taskAssigneeType():void 0)&&"all"===this.panel.settings.taskAssigneeType()?"0,-1":("function"==typeof(n=this.panel.settings).taskAssigneeType?n.taskAssigneeType():void 0)&&"me"===this.panel.settings.taskAssigneeType()?app.loggedInUser.id():("function"==typeof(s=this.panel.settings).taskAssigneeUserId?s.taskAssigneeUserId():void 0)?0===this.panel.settings.taskAssigneeUserId().length?app.loggedInUser.id():this.panel.settings.taskAssigneeUserId().toString():void 0,a=r.toString()===app.loggedInUser.id().toString(),"click"===o&&this.summary.openQuickView(i.key,{who:r,isMe:a,selectedTimeRange:this.selectedTimeRange(),filterType:i.name,filteredUserName:app.utility.GetFilterInfo(this.panel,"users",this.panel.settings.taskAssigneeUserId())})},t.prototype.showCompleted=function(t){return this.summary.openQuickView("completed",{selectedTimeRange:this.selectedTimeRange(),filterType:"Tasks"}),!0},t.prototype.OnClickNoDateTasks=function(){return this.onUiEventHandler({type:"click",data:{key:"nodate"}})},t.prototype.getUpdatedData=function(){return this.metricDataHelper.isDataSetUp()?this.dataLoader.LoadUpdates():this.setupDataLoader()},t.prototype.setupDataLoader=function(){var t;return t=function(t){return function(e){return t.metricDataHelper.updateMetricData(t.metricData,e),t.dataLoaded(!0),t.pendingRequests=[]}}(this),this.dataLoader=this.metricDataHelper.createDataLoader(this.endpoint,this.listField,"tasks",this.selectedTimeRange,this.getFilterParams,t)},t.prototype.getTimeRangeOptions=function(){return[{id:"anytime",text:app.tl("Anytime")},{id:"today",text:app.tl("Today")},{id:"yesterday",text:app.tl("Yesterday")},{id:"thisweek",text:app.tl("This week [_s]",app.utility.GetWeekText())},{id:"lastweek",text:app.tl("Last week [_s]",app.utility.GetWeekText())},{id:"thismonth",text:app.tl("This month")},{id:"lastmonth",text:app.tl("Last month")},{id:"last3months",text:app.utility.GetLastMonthsText(3)},{id:"last6months",text:app.utility.GetLastMonthsText(6)}]},t.prototype.getFilterParams=function(){var t;return t=this.panel.GetSettingsAsFilterParams(),t.useStartDatesForTodaysTasks=app.loggedInUser.preferences.useStartDatesForTodaysTasks(),app.utility.AddSparseFields(t,{tasks:"active,complete,late,nodate,started,today,upcoming"}),t},t.prototype.dispose=function(){app.pulse.forget({interval:15e3,key:"dashboard-metric-summary",callback:this.checkForPendingUpdates}),this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:r,template:t}}.apply(e,s))&&(t.exports=i)},4284:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(3139),n(1119)],void 0!==(i=function(t,e){var n;return n=function(){function t(t){null==t&&(t={}),this.dispose=a(this.dispose,this),this.getPaymentInfo=a(this.getPaymentInfo,this),this.OnClickPay=a(this.OnClickPay,this),this.params=t,this.subscriptions=[],this.isPaidCustomer=ko.observable(!1),this.isEnterpriseCustomer=ko.observable(!1),this.trialDaysRemaining=ko.observable(0),this.isInTrial=ko.observable(!1),this.paymentMethod=ko.observable(null),this.paidUntilDateTime=ko.observable(null),this.trialStartDate=ko.observable(null),this.trialEndDate=ko.observable(null),this.currentPlanName=ko.observable(""),this.numActiveProjects=ko.observable(0),this.numArchivedProjects=ko.observable(0),this.isDataLoaded=ko.observable(!1),this.subscriptions.push(this.isOfflineInvoiceCustomer=ko.pureComputed(function(t){return function(){return"invoice"===t.paymentMethod()}}(this))),this.subscriptions.push(this.enterprisePendingFirstPayment=ko.pureComputed(function(t){return function(){return t.isEnterpriseCustomer()&&"paidPending"===t.paymentMethod()&&t.isInTrial()}}(this))),this.subscriptions.push(this.shouldShowPaymentMsg=ko.pureComputed(function(t){return function(){if(t.isDataLoaded()&&"free"!==app.account.paymentStatus()){if(t.enterprisePendingFirstPayment())return t.trialDaysRemaining()<=7;if(!t.isInTrial()&&t.isOfflineInvoiceCustomer()&&t.paidDaysRemaining()<7)return!0;if(t.isInTrial()&&"paid"!==app.account.paymentStatus())return!0;if("paymentDue"===app.account.paymentStatus())return!0}return!1}}(this))),this.subscriptions.push(this.shouldHighlightPaymentCTA=ko.pureComputed(function(t){return function(){if(t.isDataLoaded()&&"free"!==app.account.paymentStatus()){if(t.enterprisePendingFirstPayment())return t.trialDaysRemaining()<5;if(!t.isInTrial()&&t.isOfflineInvoiceCustomer()&&t.paidDaysRemaining()<5)return!0;if(t.isInTrial()||"paid"!==app.account.paymentStatus()&&t.trialDaysRemaining()<5)return!0}return!1}}(this))),this.getPaymentInfo(),this.subscriptions.push(this.paidDaysRemaining=ko.pureComputed(function(t){return function(){return moment(t.paidUntilDateTime()).startOf("day").diff(moment().startOf("day"),"days")}}(this))),this.subscriptions.push(this.invoiceDueDays=ko.pureComputed(function(t){return function(){return t.enterprisePendingFirstPayment()?t.trialDaysRemaining():t.paidDaysRemaining()}}(this))),this.subscriptions.push(this.paymentHeader=ko.pureComputed(function(t){return function(){return t.isOfflineInvoiceCustomer()||t.enterprisePendingFirstPayment()?t.invoiceDueDays()>1?app.tl("Paid period ending soon"):1===t.invoiceDueDays()?app.tl("Paid period ending tomorrow"):0===t.invoiceDueDays()?app.tl("Paid period ends today"):-1===t.invoiceDueDays()?app.tl("Paid period ended yesterday"):t.invoiceDueDays()<-1?app.tl("Paid period has ended"):void 0:"paymentDue"===app.account.paymentStatus()&&app.account.inGracePeriod()?app.tl("Paid period has ended"):0===t.trialDaysRemaining()?app.tl("Your trial ends today"):t.trialDaysRemaining()<0?app.tl("Your trial has ended"):1===t.trialDaysRemaining()?app.tl("Your trial ends tomorrow"):t.trialDaysRemaining()<10?app.tl("Your trial is ending soon"):t.trialDaysRemaining()>=10?app.tl("Free trial active"):app.tl("Time to upgrade?")}}(this))),this.subscriptions.push(this.paymentLine1=ko.pureComputed(function(t){return function(){var e;return e="<strong>"+t.currentPlanName()+"</strong>",t.isOfflineInvoiceCustomer()||t.enterprisePendingFirstPayment()?t.invoiceDueDays()>1?app.tl("Your payment for the [_s] plan is coming to an end.",e):1===t.invoiceDueDays()?app.tl("Your payment for the [_s] plan is coming to an end.",e):0===t.invoiceDueDays()?app.tl("Your payment for the [_s] plan is coming to an end.",e):-1===t.invoiceDueDays()?app.tl("Your payment for the [_s] plan has expired.",e):t.invoiceDueDays()<-1?app.tl("Your payment for the [_s] plan has expired.",e):void 0:"paymentDue"===app.account.paymentStatus()&&app.account.inGracePeriod()?app.tl("A recent payment failed and a new subscription is required"):0===t.trialDaysRemaining()?app.tl("Your free trial period on the [_s] plan ends today.",e):1===t.trialDaysRemaining()?app.tl("Your free trial period on the [_s] plan ends tomorrow.",e):t.trialDaysRemaining()>1?app.tl("You have [_s] days left on your free trial of [_s]!",t.trialDaysRemaining(),"Teamwork Projects"):app.tl("Your free trial period on the [_s] plan is now over.",e)}}(this))),this.subscriptions.push(this.paymentLine2=ko.pureComputed(function(t){return function(){return t.enterprisePendingFirstPayment()?app.tl('Your account is set as "Paid Pending" while payment is being processed.[_s]If payment has already been made, please contact your account manager.',"<br><br>"):t.isOfflineInvoiceCustomer()?t.invoiceDueDays()>1?app.tl("Payment is due in [_s] days time.",t.invoiceDueDays()):1===t.invoiceDueDays()?app.tl("Payment is due tomorrow"):0===t.invoiceDueDays()?app.tl("Payment is due today"):-1===t.invoiceDueDays()?app.tl("Payment was due yesterday"):t.invoiceDueDays()<-1?app.tl("Payment was due [_s] days ago.",-1*t.invoiceDueDays()):void 0:"paymentDue"===app.account.paymentStatus()&&app.account.inGracePeriod()?"":0===t.trialDaysRemaining()?app.tl("Your trial period expires today."):1===t.trialDaysRemaining()?"":t.trialDaysRemaining()>4?app.tl("Love it already?"):t.trialDaysRemaining()>0?app.tl("Ready to pick a plan?"):""}}(this))),this.subscriptions.push(this.paymentLine3=ko.pureComputed(function(t){return function(){var e;return t.isOfflineInvoiceCustomer()?t.enterprisePendingFirstPayment()?"":t.invoiceDueDays()>=0?app.tl("After that period your projects may be set to inactive."):app.tl("Your account will become fully featured after payment is received."):"paymentDue"===app.account.paymentStatus()&&app.account.inGracePeriod()?app.tl("Your account will become fully featured after payment is received."):t.trialDaysRemaining()<0?(e="",parseInt(t.numActiveProjects(),10)>0&&(e+=app.tl("Your [_s] most recent projects are still active.",t.numActiveProjects())),parseInt(t.numArchivedProjects(),10)>0&&(e=e+" "+app.tl("[_s] projects are set inactive.",t.numArchivedProjects())),e):void 0}}(this))),this.subscriptions.push(this.paymentBtnText=ko.pureComputed(function(t){return function(){return t.isOfflineInvoiceCustomer()?app.tl("Renew"):"paymentDue"===app.account.paymentStatus()&&app.account.inGracePeriod()?app.tl("Renew"):app.tl("Subscribe")}}(this)))}return t.prototype.OnShow=function(){},t.prototype.OnClickPay=function(){return app.GoTo("settings/subscription")},t.prototype.getPaymentInfo=function(){return app.api.get("subscription/paymentinfo.json").then(function(t){return function(e){var n,s;if(n=e.response,t.isPaidCustomer(n.isPaidCustomer),t.isEnterpriseCustomer(n.isEnterpriseCustomer),t.trialDaysRemaining(parseInt(n.trialDaysLeft,10)),t.isInTrial(!t.isPaidCustomer()&&t.trialDaysRemaining()>=0),t.paymentMethod(n.paymentMethod),t.paidUntilDateTime(n.paidUntilDateTime),t.trialStartDate(n.trialStartDate),s=moment(n.trialEndDate),s.year()>moment().year()?t.trialEndDate(moment(s).format("MMMM Do YYYY")):t.trialEndDate(moment(s).format("MMMM Do")),t.currentPlanName(n.currentPlanName),t.isDataLoaded(!0),t.shouldShowPaymentMsg())return t.getProjectCounts()}}(this))},t.prototype.getProjectCounts=function(){return app.api.get(app.prefixApi("projects.json?dataset=basic&getCounts=1","API_PREFIX_V2","API_PREFIX_V2")).then(function(t){return function(e){return t.numActiveProjects(e.xhr.getResponseHeader("X-Total-Active")),t.numArchivedProjects(e.xhr.getResponseHeader("X-Total-Archived"))}}(this))},t.prototype.dispose=function(){null!=this.subscriptions&&this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:n,template:t}}.apply(e,s))&&(t.exports=i)},4293:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(3152),n(1116),n(1151),n(1168)],void 0!==(i=function(t,e,n,s){var i;return i=function(){function t(t){var i,o;null==t&&(t={}),this.OnUiEventHandler=a(this.OnUiEventHandler,this),this.OnRenderedFooter=a(this.OnRenderedFooter,this),this.OnTasksMetricClick=a(this.OnTasksMetricClick,this),this.OnNotifyTWEvent=a(this.OnNotifyTWEvent,this),this.subscriptions=[],this.holderId="widgetProjectMetrics",this.project=ko.unwrap(t.project),this.eventsKey=null!=(o=t.eventsKey)?o:"project-timeline-"+this.project.id(),this.displayMode=app.utility.EnsureObservable(t.displayMode),this.subscriptions.push(this.summary=new s({type:"tasks",projectId:this.project.id()})),this.events=new n(this.eventsKey,{projectId:this.project.id()}),this.subscriptions.push(this.events.Listen(this.OnUiEventHandler)),this.metricsConfig={tasks:"started,late,upcoming,nodate,active,complete,today",time:"estimates,totals"},i={useStartDatesForTodaysTasks:app.loggedInUser.preferences.useStartDatesForTodaysTasks()},app.utility.AddSparseFields(t,this.metricsConfig),this.metricsData=ko.observable(null),this.metricsDL=new e("projects/api/v3/projects/"+this.project.id()+"/summary.json",{params:i,onLoad:function(t){return function(e){return t.metricsData(e.response)}}(this),loadNow:!1}),this.subscriptions.push(this.showTasks=ko.pureComputed(function(t){return function(){return t.project.permissions.viewTasksAndMilestones()&&"1"===t.project.activePages.tasks()}}(this))),this.subscriptions.push(this.lateTasksLabel=ko.pureComputed(function(t){return function(){return null==t.metricsData()?"0%":""+~~t.metricsData().tasks.everyone.late}}(this))),this.subscriptions.push(this.todaysTasksLabel=ko.pureComputed(function(t){return function(){return null==t.metricsData()?"0%":""+~~t.metricsData().tasks.everyone.today}}(this))),this.subscriptions.push(this.completedTasksPercentage=ko.pureComputed(function(t){return function(){var e,n,s;return null==t.metricsData()?"0%":(e=~~t.metricsData().tasks.everyone.active,n=~~t.metricsData().tasks.everyone.complete,0===(s=e+n)?"0%":Math.round(n/s*100)+"%")}}(this))),this.subscriptions.push(this.completedEstimatePercentage=ko.pureComputed(function(t){return function(){var e,n,s;return null==t.metricsData()?"0%":(e=~~t.metricsData().time.all.estimates.activeMinsEstimated,n=~~t.metricsData().time.all.estimates.completedMinsEstimated,0===(s=e+n)?"0%":Math.round(n/s*100)+"%")}}(this))),this.subscriptions.push(ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent))}return t.prototype.OnNotifyTWEvent=function(t){"task"===t.itemType&&t.projectId===this.project.id()&&this.metricsDL.LoadUpdates()},t.prototype.OnTasksMetricClick=function(t,e){this.summary.openQuickView(t,{filterType:"tasks"})},t.prototype.OnRenderedFooter=function(){this.metricsDL.Load()},t.prototype.OnUiEventHandler=function(t){var e,n;e=t.data,n=t.type,"click"===n&&this.summary.openQuickView(e.key,{filterType:e.name,today:e.today})},t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()}),null!=this.metricsDL&&(this.metricsDL.dispose(),delete this.metricsDL)},t}(),{viewModel:i,template:t}}.apply(e,s))&&(t.exports=i)},4300:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(164),n(1116),n(3163),n(3162),n(3164)],void 0!==(i=function(t,e,n,s,i){var o;return o=function(){function e(e){var n,o,r,l,c,p,d,u,h,m;null==e&&(e={}),this.OnUiEventHandler=a(this.OnUiEventHandler,this),this.OnTWEvent=a(this.OnTWEvent,this),this.OnClickNextInsight=a(this.OnClickNextInsight,this),this.OnClickPreviousInsight=a(this.OnClickPreviousInsight,this),this.OnClickChangeProjectOwner=a(this.OnClickChangeProjectOwner,this),this.OnClickRequestUpdate=a(this.OnClickRequestUpdate,this),this.OnClickAddUpdate=a(this.OnClickAddUpdate,this),this.OnClickToggleDetails=a(this.OnClickToggleDetails,this),this.subscriptions=[],this.ownerTippedContent=s,this.updateTippedContent=i,this.componentName="WidgetProject",this.item=null!=(n=e.item)?n:null,this.isTemplate=this.item.isTemplate(),this.showCompanyName=null==(o=e.showCompanyName)||o,this.allowDrag=app.utility.EnsureObservable(null==(r=e.allowDrag)||r),console.assert(null!=this.item),this.shouldShowTagText=t.pureComputed(function(t){return function(){var e;return"function"==typeof(e=t.item).tags?!e.tags().length:!0}}(this)),this.highlightTerm=null!=(l=t.unwrap(e.highlightTerm))?l:"",this.displayMode=null!=(c=e.displayMode)?c:"list",this.readOnly=null!=(p=e.readOnly)&&p,this.canOpen=null==(d=e.canOpen)||d,this.showTags=null==(u=e.showTags)||u,this.isSelectableList=null!=(h=e.isSelectableList)&&h,this.isSelected=app.utility.EnsureObservable(e.isSelected||this.item.isSelected||!1),this.showBackground=null==(m=e.showBackground)||m,this.isOpen=t.observable(!1),this.currentView=t.observable("details"),this.tabs=[{title:app.tl("About"),value:"details",iconClass:"fa fa-align-left fa-fw"},{title:app.tl("Insights"),value:"metrics",iconClass:"fa fa-line-chart fa-fw"}],this.tabs.selCode=this.currentView,t.isObservable(this.displayMode)||(this.displayMode=t.observable(this.displayMode)),this.subscriptions.push(this.wrapperClass=t.pureComputed(function(e){return function(){var n;return n=["w-project--"+e.displayMode()],"list"===e.displayMode()&&e.isOpen()&&n.push("w-project--is-open"),e.item.isSelected()&&n.push("w-project--is-selected"),e.isSelectableList&&n.push("w-project--is-selectable-list"),t.unwrap(e.showBackground)||n.push("bg--transparent"),e.canDrag()&&n.push("w-project--is-draggable"),n.join(" ")}}(this))),this.subscriptions.push(this.shouldShowDetails=t.pureComputed(function(t){return function(){return!t.isTemplate&&("list"===t.displayMode()?t.isOpen():"grid"===t.displayMode()&&"details"===t.currentView())}}(this))),this.subscriptions.push(this.shouldShowOwnerOptions=t.pureComputed(function(e){return function(){return null!=e.item.owner&&(!t.unwrap(e.readOnly)&&(!!e.item.permissions.projectAdministrator()||"archived"!==e.item.status()&&e.item.owner.id()!==app.loggedInUser.id()))}}(this))),this.subscriptions.push(this.shouldShowMetrics=t.pureComputed(function(t){return function(){return"list"===t.displayMode()?t.isOpen():"metrics"===t.currentView()}}(this))),this.subscriptions.push(this.canViewProjectUpdate=t.pureComputed(function(t){return function(){return!!t.item.permissions.projectAdministrator()||t.item.permissions.canViewProjectUpdate()}}(this))),this.subscriptions.push(this.canAddUpdate=t.pureComputed(function(t){return function(){return!!app.featureFlip.check("projectupdates",{unwrap:!0})&&(!!t.item.permissions.projectAdministrator()||t.item.permissions.canAddProjectUpdate())}}(this))),this.subscriptions.push(this.displayName=t.pureComputed(function(t){return function(){return""!==t.highlightTerm.trim()?app.utility.GetHighlightedText(t.item.name(),t.highlightTerm):app.utility.SafeHTML(t.item.name())}}(this))),this.subscriptions.push(this.canDrag=t.pureComputed(function(t){return function(){return!t.isOpen()&&(!!t.allowDrag()&&(app.loggedInUser.administrator()||app.loggedInUser.permissions.canAddProjects()))}}(this))),this.insights=["project"],app.featureFlip.check("projecttimebudgets")()&&this.insights.push("budget"),this.selectedInsight=t.observable(this.insights[0]),this.subscriptions.push(this.hasPreviousInsight=t.pureComputed(function(t){return function(){return t.insights.indexOf(t.selectedInsight())>0}}(this))),this.subscriptions.push(this.hasNextInsight=t.pureComputed(function(t){return function(){return t.insights.indexOf(t.selectedInsight())+1<t.insights.length}}(this))),this.subscriptions.push(app.ko.postbox.subscribe("allTWEvents",this.OnTWEvent)),app.InitOnShow(this)}return e.prototype.OnShow=function(){},e.prototype.OnClickToggleDetails=function(){this.isOpen(!this.isOpen())},e.prototype.OnClickAddUpdate=function(){app.modal.Show("addOrEditProjectUpdate",{projectId:this.item.id})},e.prototype.OnClickRequestUpdate=function(){Tipped.hideAll(),app.modal.Show("requestProjectUpdate",{projectId:this.item.id(),user:this.item.owner})},e.prototype.OnClickChangeProjectOwner=function(){var t,e;Tipped.hideAll(),e=this.item,t=0!==e.owner.id()?e.owner:null,app.modal.Show("changeProjectOwner",{projectId:e.id(),user:t})},e.prototype.OnClickPreviousInsight=function(){this.hasPreviousInsight()&&this.selectedInsight(this.insights[this.insights.indexOf(this.selectedInsight())-1])},e.prototype.OnClickNextInsight=function(){this.hasNextInsight()&&this.selectedInsight(this.insights[this.insights.indexOf(this.selectedInsight())+1])},e.prototype.OnTWEvent=function(t){var e,n,s,i;if(n=t.itemType,s=t.projectId,i=t.subType,e=t.itemId,this.shouldShowMetrics())return s!==this.item.id()&&("project"!==n||e!==this.item.id())||("task"===n&&this.metricsDL.LoadUpdates(),"project"!==n||"starred"!==i&&"unstarred"!==i)?void 0:this.item.starred("starred"===i)},e.prototype.OnUiEventHandler=function(t){var e,n;e=t.data,n=t.type,"click"===n&&this.summary.openQuickView(e.key,{filterType:e.name,today:e.today})},e.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},e}(),{viewModel:o,template:n}}.apply(e,s))&&(t.exports=i)},4305:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}},o={}.hasOwnProperty,r=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};s=[n(3177),n(1015),n(1116),n(1119)],void 0!==(i=function(t,e,n,s){var i,l;return i=function(){function t(t){var e;null==t&&(t={}),null==t.isSelected&&(t.isSelected=!1),null==t.endDate&&(t.endDate=""),null==t.lastWorkedOn&&(t.lastWorkedOn=""),e={observe:["name","isSelected","starred","company.name","lastChangedOn","lastWorkedOn","endDate","createdOn"]},ko.mapping.fromJS(t,e,this)}return t.prototype.OnClickStar=function(){return this.starred(!this.starred()),app.api.put("./projects/"+this.id+"/"+(this.starred()?"star.json":"unstar.json"),{}).then(function(t){return function(e){var n;if("OK"!==e.response.STATUS&&(app.flash.Error(app.tl("Oops! Something went wrong, please try again")),t.starred(!t.starred())),Tipped.hideAll(),app.ko.postbox.publish("projects-update-stats",{}),app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"project",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:t.id,subType:t.starred()?"starred":"unstarred"}),null!=(null!=(n=app.cachedProjects)?n[t.id]:void 0))return app.cachedProjects[t.id].starred(t.starred())}}(this))},t}(),l=function(){function t(t){var s,r,l,c;null==t&&(t={}),this.dispose=a(this.dispose,this),this.moveList=a(this.moveList,this),this._checkFilterConfig=a(this._checkFilterConfig,this),this.goToCurrentLink=a(this.goToCurrentLink,this),this.getSectionHeader=a(this.getSectionHeader,this),this.isNewSection=a(this.isNewSection,this),this.OnKeyboardInput=a(this.OnKeyboardInput,this),this.OnClickExpandProjects=a(this.OnClickExpandProjects,this),this.OnClickClose=a(this.OnClickClose,this),this.OnClickClearFilters=a(this.OnClickClearFilters,this),this.OnClickSaveFilters=a(this.OnClickSaveFilters,this),this.OnClickToggleFilters=a(this.OnClickToggleFilters,this),this.OnClickSearchInput=a(this.OnClickSearchInput,this),this.OnClickCustomizeFilter=a(this.OnClickCustomizeFilter,this),this.OnAllTWEvents=a(this.OnAllTWEvents,this),this.OnRendered=a(this.OnRendered,this),this.start=Date.now(),this.params=t,this.subscriptions=[],this.currentIndex=-1,this.searchIsFocused=ko.observable(!1),this.isShowingFilters=ko.observable(!1),this.subscriptions.push(this.canAddProjects=ko.pureComputed(function(t){return function(){return app.loggedInUser.administrator()||app.loggedInUser.permissions.canAddProjects()}}())),this.subscriptions.push(app.currentRoute.subscribe(function(t){return function(){return app.isShowingQuickJump(!1)}}())),this.filterKey=null!=(l=t.filterKey)?l:"homeProjectsList",this.subscriptions.push(this.filters=e.getFilter(this.filterKey)),this.searchTerm=this.filters().parameters.searchTerm,this.projectOwnerIds=this.filters().parameters.projectOwnerIds,this.projectHealth=this.filters().parameters.projectHealth,this.projectStatus=this.filters().parameters.projectStatus,this.companyIds=this.filters().parameters.companyIds,this.categoryIds=this.filters().parameters.categoryIds,this.filterTagIds=this.filters().parameters.filterTagIds,this.matchAllTags=this.filters().parameters.matchAllTags,this.onlyStarredProjects=this.filters().parameters.onlyStarredProjects,this.hideObservedProjects=this.filters().parameters.hideObservedProjects,this.onlyProjectsWithExplicitMembership=this.filters().parameters.onlyProjectsWithExplicitMembership,this.workedOnDateCode=this.filters().parameters.workedOnDateCode,this.workedOnAfterDateTime=this.filters().parameters.workedOnAfterDateTime,this.workedOnBeforeDateTime=this.filters().parameters.workedOnBeforeDateTime,this.workedOnDateCustomInterval=this.filters().parameters.workedOnDateCustomInterval,this.sortBy=this.filters().parameters.sortBy,this.sortOrder=this.filters().parameters.sortOrder,this.includesSort=this.filters().includesSort,this.hasActiveFilter=this.filters().active,this.searchTerm.extend({rateLimit:{method:"notifyWhenChangesStop",timeout:400}}),app.filterSidebarVisible()&&"projects"===app.currentRoute().homePageTab&&app.loggedInUser.preferences.filterSidebarVisible(!1),this.subscriptions.push(this.filterButtonIsActive=ko.pureComputed(function(t){return function(){return t.hasActiveFilter()||t.isShowingFilters()}}(this))),this.quickFilterSelection=ko.observable(""),this.subscriptions.push(this.currentFilterPreset=ko.pureComputed(function(t){return function(){return"custom"===t.quickFilterSelection()?"custom":t._checkFilterConfig("all")?"all":t._checkFilterConfig("mine")?"mine":t._checkFilterConfig("starred")?"starred":t._checkFilterConfig("recent")?"recent":"custom"}}(this))),s=app.filterConfig.buildSuggestions(this.filterKey,{map:!1}),r=s.map(function(t){return null==t.text&&(t.text=t.title),t}),r.push({id:"custom",text:app.tl("Customize")}),this.suggestedFilters=ko.observableArray(r),this.subscriptions.push(this.quickFilterAbout=ko.pureComputed(function(t){return function(){var e;return"custom"===t.currentFilterPreset()?"":(e=t.suggestedFilters().filter(function(e){return e.id===t.currentFilterPreset()}),e.length?e[0].description:"")}}(this))),this.subscriptions.push(this.shouldShowCustomOptions=ko.pureComputed(function(t){return function(){return"custom"===t.currentFilterPreset()}}(this))),this.quickFilterSelection(this.currentFilterPreset()),this.subscriptions.push(this.quickFilterSelection.subscribe(function(t){return function(e){var n,s,i,a,r;if(i=t.suggestedFilters().filter(function(t){return t.id===e}),i.length){i=i[0],"custom"!==e&&(t.filters().Clear(),t.isShowingFilters(!1)),a=i.parameters,r=[];for(n in a)o.call(a,n)&&(s=a[n],s=ko.unwrap(s),null!=t.filters().parameters[n]?r.push(t.filters().parameters[n](s)):r.push(void 0));return r}}}(this))),c=app.prefixApi("projects.json","API_PREFIX_V2","API_PREFIX_V2"),this.data=new n(c,{ItemClass:i,loadNow:!1,pageSize:50,filter:{generateFilterParams:function(e){return function(){var n,s,i,a;return t={userId:0,getPermissions:!1,getNotificationSettings:!1,getDateInfo:!1,searchCompany:!0,formatMarkdown:!1,getActivePages:!1,includeUpdates:!1,includeProjectOwner:!0,orderBy:e.sortBy(),orderMode:e.sortOrder()},("function"==typeof e.searchTerm?e.searchTerm():void 0)&&e.searchTerm().trim().length&&(t.searchTerm=e.searchTerm().trim()),(null!=(s=e.companyIds())?s.length:void 0)&&(t.companyId=e.companyIds().toString()),(null!=(i=e.categoryIds())?i.length:void 0)&&(t.categoryId=e.categoryIds().toString()),null!=e.filterTagIds()&&e.filterTagIds().length>0&&(t.filterTagIds=e.filterTagIds().join(","),t.matchAllTags=e.matchAllTags()),("function"==typeof e.projectOwnerIds?e.projectOwnerIds():void 0)&&(t.projectOwnerIds=e.projectOwnerIds().toString()),("function"==typeof e.projectHealth?e.projectHealth():void 0)&&"-1"!==e.projectHealth().toString()&&(t.projectHealth=e.projectHealth().toString()),("function"==typeof e.projectStatus?e.projectStatus():void 0)&&(t.status=e.projectStatus()),("function"==typeof e.workedOnDateCode?e.workedOnDateCode():void 0)&&"anytime"!==(a=e.workedOnDateCode())&&"custom"!==a&&(n=app.utility.GetDatesFromRange(e.workedOnDateCode(),"YYYYMMDD",e.workedOnDateCustomInterval()),t.workedOnAfterDateTime=n.startDate,t.workedOnBeforeDateTime=n.endDate),t.onlyStarredProjects=e.onlyStarredProjects(),t.hideObservedProjects=e.hideObservedProjects(),t.onlyProjectsWithExplicitMembership=e.onlyProjectsWithExplicitMembership(),t}}(this)},onLoad:function(t){return function(){if(-1===t.currentIndex&&(t.currentIndex=0,t.data.list().length))return t.data.list()[0].isSelected(!0)}}(this)}),app.NextTick(function(t){return function(){return document.addEventListener("keydown",t.OnKeyboardInput),t.searchIsFocused(!0)}}(this)),this.subscriptions.push(app.ko.postbox.subscribe("allTWEvents",this.OnAllTWEvents))}return t.prototype.OnRendered=function(){},t.prototype.OnAllTWEvents=function(t){},t.prototype.OnClickCustomizeFilter=function(){return this.isShowingFilters(!0),this.quickFilterSelection("custom")},t.prototype.OnClickSearchInput=function(){var t,e,n,s,i,a;for(e=0,this.currentIndex=0,i=this.data.list(),a=[],n=0,s=i.length;n<s;n++)t=i[n],t.isSelected(0===e),a.push(e+=1);return a},t.prototype.OnClickToggleFilters=function(){return this.isShowingFilters(!this.isShowingFilters())},t.prototype.OnClickSaveFilters=function(){return this.filters().isTemporary()?this.filters().Edit():this.filters().Save(),this.isShowingFilters(!1)},t.prototype.OnClickClearFilters=function(){return this.filters().Clear(),this.isShowingFilters(!1),ko.tasks.schedule(function(t){return function(){return t.quickFilterSelection(t.currentFilterPreset())}}(this))},t.prototype.OnClickClose=function(){return app.isShowingQuickJump(!1)},t.prototype.OnClickExpandProjects=function(){return"projects"===app.currentRoute().homePageTab?this.OnClickClose():app.GoTo("home/projects")},t.prototype.OnKeyboardInput=function(t){var e;if((37===(e=t.keyCode)||39===e)&&this.searchIsFocused()&&""!==this.searchTerm())return!0;switch(this.searchIsFocused()&&[13,37,38,39,40].indexOf(t.keyCode)>-1&&t.preventDefault(),t.keyCode){case 13:this.goToCurrentLink();break;case 27:app.isShowingQuickJump(!1);break;case 38:this.moveList(0);break;case 40:this.moveList(1)}return!1},t.prototype.OnClickAddProject=function(){app.modal.Show("addOrEditProject")},t.prototype.isNewSection=function(t){var e,n;if(!this.data.list().length)return!1;if("name"===this.sortBy())return!1;if(0===t)return!0;switch(e=this.data.list()[t],n=this.data.list()[t-1],this.sortBy().toLowerCase()){case"starredname":return e.starred()!==n.starred();case"starredcompanyname":case"companyname":case"ownercompany":return e.company.name()!==n.company.name();case"name":return s.getFirstLetter(e.name()).toUpperCase()!==s.getFirstLetter(n.name()).toUpperCase();case"lastactivitydate":return moment(e.lastChangedOn()).format("YYYYMMDD")!==moment(n.lastChangedOn()).format("YYYYMMDD");case"lastworkedon":return moment(e.lastWorkedOn()).format("YYYYMMDD")!==moment(n.lastWorkedOn()).format("YYYYMMDD");case"enddate":return e.endDate()!==n.endDate();case"createdon":return moment(e.createdOn()).format("YYYYMMDD")!==moment(n.createdOn()).format("YYYYMMDD");default:return!1}},t.prototype.getSectionHeader=function(t){var e;switch(e=this.data.list()[t],this.sortBy().toLowerCase()){case"starredname":return e.starred()?app.tl("Starred"):app.tl("Not starred");case"starredcompanyname":case"companyname":case"ownercompany":return app.utility.SafeHTML(e.company.name());case"name":return s.getFirstLetter(e.name()).toUpperCase()+".";case"lastactivitydate":return app.utility.GetRelativeDate(moment(e.lastChangedOn()));case"lastworkedon":return moment(e.lastWorkedOn()).isValid()?app.utility.GetRelativeDate(moment(e.lastWorkedOn())):app.tl("Not worked on yet");case"enddate":return moment(e.endDate()).isValid()?app.utility.GetRelativeDate(moment(e.endDate())):app.tl("No dates set");case"createdon":return app.utility.GetRelativeDate(moment(e.createdOn()));default:return""}},t.prototype.goToCurrentLink=function(){var t,e;t=this.data.list(),0!==t.length&&(e="projects/"+t[this.currentIndex].id+"/"+("projectoverview"===t[this.currentIndex].startPage?"overview/activity":t[this.currentIndex].startPage),app.GoTo(e),Tipped.hideAll())},t.prototype._checkFilterConfig=function(t){var e,n,s,i,a,l,c,p,d,u;if(e=this.filters().activeParameters(),d=this.suggestedFilters().filter(function(e){return function(e){return e.id===t}}()),!d.length)return!1;if(null==(n=d[0].parameters)||"object"!=typeof n)return!1;if(!(Object.keys(n).length>=Object.keys(e).length))return!1;a=["sortBy","sortOrder","firstLetter","searchTerm"],l=!0,i=ko.mapping.toJS(this.filters().parameters),s=Object.assign({},i),s=Object.assign(s,n),u=this.filters().parameters;for(c in u)o.call(u,c)&&(p=u[c],!(r.call(a,c)>=0)&&(app.utility.AreEqual(s[c],p())||(l=!1)));return l},t.prototype.moveList=function(t){var e,n,s;s=null,n=this.currentIndex,document.querySelector(".w-quick-jump__list"),s=this.data.list(),0===t?0===this.currentIndex?this.currentIndex=s.length-1:this.currentIndex--:this.currentIndex===s.length-1?this.currentIndex=0:this.currentIndex++,e=document.querySelectorAll(".w-quick-jump__list .w-quick-jump__list-item")[this.currentIndex],null!=e&&app.utility.ScrollIntoViewIfNeeded(e),s[n].isSelected(!1),s[this.currentIndex].isSelected(!0)},t.prototype.dispose=function(){document.removeEventListener("keydown",this.OnKeyboardInput),this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:l,template:t}}.apply(e,s))&&(t.exports=i)},4312:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(164),n(3187),n(3186),n(1116)],void 0!==(i=function(t,e,n,s){var i;return i=function(){function e(e){var i,o,r,l,c,p,d;null==e&&(e={}),this.dispose=a(this.dispose,this),this.getUrl=a(this.getUrl,this),this.getFullName=a(this.getFullName,this),this.getAvatarUrl=a(this.getAvatarUrl,this),this.OnShowTipped=a(this.OnShowTipped,this),this.relatedUsersTippedContent=n,this.subscriptions=[],this.titleText=null!=(i=e.titleText)?i:"",this.itemType=null!=(o=e.itemType)?o:"comment",this.itemId=null!=(r=e.itemId)?r:0,this.numberOfUsers=app.utility.EnsureObservable(null!=(l=e.numberOfUsers)?l:0),this.useRemoteData=null!=(c=e.useRemoteData)&&c,this.tippedLabel=null!=(p=e.tippedLabel)?p:"",0===this.numberOfUsers()&&(null!=(d=t.unwrap(e.users))?d.length:void 0)&&this.numberOfUsers(t.unwrap(e.users).length),this.useRemoteData&&(console.assert(null!=this.itemType&&this.itemType.length),console.assert(this.itemId>0)),this.subscriptions.push(this.isLoading=t.pureComputed(function(t){return function(){return!!t.useRemoteData&&t.data.isLoading()}}(this))),this.subscriptions.push(this.users=t.pureComputed(function(n){return function(){var s;return n.useRemoteData?n.data.list():(null!=(s=t.unwrap(e.users))?s.length:void 0)?t.unwrap(e.users):[]}}(this))),this.useRemoteData&&(this.data=new s(this.getUrl(),{loadNow:!1,onLoad:function(t){return function(){return t.numberOfUsers(t.data.totalRecords())}}(this)})),app.InitOnShow(this)}return e.prototype.OnShow=function(){},e.prototype.OnShowTipped=function(){if(this.useRemoteData)return this.data.Load()},e.prototype.getAvatarUrl=function(t){var e,n;return null!=(e=null!=(n=t.avatarUrl)?n:t.avatarURL)?e:t.logoUrl},e.prototype.getFullName=function(e){var n,s;return n=null!=(s=e.fullName)?s:e.name,null==n&&(n=t.unwrap(e.firstName)+" "+t.unwrap(e.lastName)),n},e.prototype.getUrl=function(){var e;return this.useRemoteData?(e=function(){switch(this.itemType){case"posts":case"comment":case"message":case"message":case"messageReply":return"notified";default:return""}}.call(this),function(){switch(this.itemType){case"comment":return"comments";case"message":case"message":case"messageReply":return"messageReplies"}}.call(this)+"/"+t.unwrap(this.itemId)+"/"+e+".json"):null},e.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},e}(),{viewModel:i,template:e}}.apply(e,s))&&(t.exports=i)},4323:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(164),n(3199),n(3200),n(1189)],void 0!==(i=function(t,e,n,s){var i;return i=function(){function e(t){var e,s,i,o,r;null==t&&(t={}),this.GetShortcutIcon=a(this.GetShortcutIcon,this),this.GetBreadcrumbSegments=a(this.GetBreadcrumbSegments,this),this.subscriptions=[],this.tippedContent=n,this.mode=null!=(e=t.mode)?e:"view",this.item=null!=(s=t.item)?s:null,this.displayMode=null!=(i=t.displayMode)?i:"list",this.showBreadcrumb=null==(o=t.showBreadcrumb)||o,this.showTypeIconInBreadcrumb=null!=(r=t.showTypeIconInBreadcrumb)&&r,console.assert(null!=this.item),app.InitOnShow(this)}return e.prototype.OnShow=function(){},e.prototype.OnClickShortcut=function(){return window.location.href!==t.unwrap(this.item.fullUrl)||app.quickView.close()},e.prototype.getTranslatedItemType=function(e){switch(e=t.unwrap(e)){case"pinned":return app.tl("Pinned");case"message":return app.tl("Message");case"reply":return app.tl("Message Reply");case"fileVersion":return app.tl("File Version");case"file":return app.tl("File");case"status":return app.tl("Status");case"event":return app.tl("Event");case"task":return app.tl("Task");case"tasklist":return app.tl("Task List");case"milestone":return app.tl("Milestone");case"notebook":return app.tl("Notebook");case"link":return app.tl("Link");case"person":return app.tl("Person");case"page":return app.tl("Page");case"report":return app.tl("Report");case"project":return app.tl("Project");case"board":return app.tl("Board");default:return e}},e.prototype.GetBreadcrumbSegments=function(t){var e,n;return e=[],n=this.getTranslatedItemType(t.objectType),n.length&&(n+=": "),e.push({icon:this.showTypeIconInBreadcrumb?app.utility.GetSVGName(t.objectType):"",iconColor:app.consts.UICOLORS.all,link:t.url,linkText:""+n+t.friendlyUrl(),onClick:t.QuickViewItem}),e},e.prototype.GetShortcutIcon=function(t){return app.utility.GetSVGName(t.objectType)},e.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},e}(),{viewModel:i,template:e}}.apply(e,s))&&(t.exports=i)},4328:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(164),n(3205)],void 0!==(i=function(t,e){var n;return n=function(){function e(e){var n,s,i,o,r,l,c;for(null==e&&(e={}),this.GetFormattedCount=a(this.GetFormattedCount,this),this.subscriptions=[],this.tabs=null!=(o=e.tabs)?o:[],this.currentSection=null!=(r=e.currentSection)?r:"",this.componentName="WidgetTabsList",t.isObservable(this.tabs)||(this.tabs=t.observableArray(this.tabs)),this.visibleTabs=t.pureComputed(function(t){return function(){return t.tabs().filter(function(t){return t.enabled()})}}(this)),t.isObservable(this.currentSection)||(this.currentSection=t.observable(this.currentSection)),l=this.tabs(),n=function(e){return function(n){return e.subscriptions.push(n.tabClasses=t.pureComputed(function(){var s;return s=null!=n.cssClasses?t.unwrap(n.cssClasses).slice():[],null!=n.isSelected?t.unwrap(n.isSelected)&&s.push("is-selected"):e.currentSection()===t.unwrap(n.id)&&s.push("is-selected"),s.join(" ")}))}}(this),s=0,i=l.length;s<i;s++)c=l[s],c.componentName="WidgetTabsListTab",null==c.url&&(c.url="javascript:;"),null==c.tippedContent&&(c.tippedContent=""),null==c.tippedOptions&&(c.tippedOptions={hideAfter:300,showDelay:300,hideOn:!1,position:"right"}),null==c.cssClasses&&(c.cssClasses=[]),null==c.symbol&&(c.symbol=""),null==c.showSymbol&&(c.showSymbol=""!==c.symbol),null==c.symbolPrompt&&(c.symbolPrompt=""),null==c.count&&(c.count=0),null==c.enabled&&(c.enabled=!0),null==c.showCount&&(c.showCount=!1),null==c.showCountIfEmpty&&(c.showCountIfEmpty=!1),null==c.enabled&&(c.enabled=t.observable(!0)),c.enabled=app.utility.EnsureObservable(c.enabled),null==c.OnClick&&(c.OnClick=function(){return!0}),n(c),c.tippedOptions=t.toJSON(c.tippedOptions),c.tippedOptions=c.tippedOptions.substr(1,c.tippedOptions.length-2);app.InitOnShow(this)}return e.prototype.OnShow=function(){},e.prototype.GetValidSymbol=function(e){return t.unwrap(e.symbol)},e.prototype.GetFormattedCount=function(e){var n;return n=t.unwrap(e.count),1e3===n?"1k":n>1e3?"1k+":n},e.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},e}(),{viewModel:n,template:e}}.apply(e,s))&&(t.exports=i)},4364:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(3252)],void 0!==(i=function(t){var e;return e=function(){function t(t){null==t&&(t={}),this.dispose=a(this.dispose,this),this.subscriptions=[]}return t.prototype.dispose=function(){if(null!=this.subscriptions)return this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:e,template:t}}.apply(e,s))&&(t.exports=i)},4410:function(t,e,n){var s,i,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(164),n(3300),n(1168),n(1158)],void 0!==(i=function(t,e,n,s){var i;return i=function(){function e(e){null==e&&(e={}),this.getMetrics=a(this.getMetrics,this),this.requestUpdate=a(this.requestUpdate,this),this.checkForPendingUpdates=a(this.checkForPendingUpdates,this),this.OnMetricClick=a(this.OnMetricClick,this),this.OnNotifyTWEvent=a(this.OnNotifyTWEvent,this),this.subscriptions=[],this.subscriptions.push(this.summary=new n({type:"tasks"})),this.pendingRequests=[],this.metrics={lateTasks:{type:"tasks",filter:"late"},todaysTasks:{type:"tasks",filter:"today"},upcomingTasks:{type:"tasks",filter:"upcoming"},lateMilestones:{type:"milestones",filter:"late"},todaysMilestones:{type:"milestones",filter:"today"},upcomingMilestones:{type:"milestones",filter:"upcoming",includeToday:!1},todaysEvents:{type:"events",filter:"today"},upcomingEvents:{type:"events",filter:"upcoming"}},this.lateTasks=t.observable(0),this.todaysTasks=t.observable(0),this.upcomingTasks=t.observable(0),this.lateMilestones=t.observable(0),this.todaysMilestones=t.observable(0),this.upcomingMilestones=t.observable(0),this.todaysEvents=t.observable(0),this.upcomingEvents=t.observable(0),this.unreadMessages=t.observable(0),this.unreadComments=t.observable(0),this.subscriptions.push(this.hasTasks=t.pureComputed(function(t){return function(){var e;return e=t.lateTasks()/1,e+=t.todaysTasks()/1,(e+=t.upcomingTasks()/1)>0}}(this))),this.subscriptions.push(this.hasMilestones=t.pureComputed(function(t){return function(){var e;return e=t.lateMilestones()/1,e+=t.todaysMilestones()/1,(e+=t.upcomingMilestones()/1)>0}}(this))),this.getMetrics(),app.InitOnShow(this),this.subscriptions.push(app.ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent)),this.subscriptions.push(this.shared=app.shared.get("user-metrics")),this.shared(this),app.pulse.listen({interval:15e3,key:"my-metrics",callback:this.checkForPendingUpdates})}return e.prototype.OnShow=function(){},e.prototype.OnNotifyTWEvent=function(t){var e,n,s,i;if((t.itemType.indexOf("_comment")>-1||"comments"===t.itemType)&&(t.itemType="comment"),"lightbox"!==(s=t.itemType)&&"savedFilter"!==s&&("message"!==(i=t.itemType)&&"comment"!==i||t.actionType!==app.consts.ACTIONTYPE.UPDATED||"marked-read"===t.subType)&&(e=function(){var e;switch(t.itemType){case"task":return"tasks";case"milestone":return"milestones";case"event":return"events";case"comment":case"message":case"messages-all-read":case"comments-all-read":return"unread";case"project":return"project-deleted"===(e=t.subType)||"project-restored"===e?"unread":"";default:return""}}(),e.length))return n=!1,(null==t.userId||null!=t.userId&&t.userId/1===app.loggedInUser.id())&&(n=!0),this.requestUpdate(e,n)},e.prototype.OnMetricClick=function(t){var e;return e=Object.assign(this.metrics[t],{isMe:!0,who:app.loggedInUser.id()}),this.summary.openQuickView(this.metrics[t].filter,e)},e.prototype.checkForPendingUpdates=function(){if(this.pendingRequests.length)return this.getMetrics(t.utils.arrayGetDistinctValues(this.pendingRequests).join(","))},e.prototype.requestUpdate=function(t,e){return null==t&&(t=""),null==e&&(e=!1),e&&t.length?void this.getMetrics(t):this.pendingRequests.push(t)},e.prototype.getMetrics=function(t){var e,n,s,i,a,o,r,l;for(null==t&&(t=""),s={unread:"comments,messages",tasks:"today,late,upcoming",milestones:"late,today,upcoming",events:"upcoming,today"},e={},r=t.split(",").filter(function(t){return""!==t}),i=0,a=r.length;i<a;i++)o=r[i],e[o]=s[o];return Object.keys(e).length||(e=s),n={assigneeUserIds:app.loggedInUser.id(),userIds:app.loggedInUser.id(),eventsDaysAhead:30,useStartDatesForTodaysTasks:app.loggedInUser.preferences.useStartDatesForTodaysTasks(),unreadCommentsMineOnly:!0,unreadMessagesMineOnly:!0},app.utility.AddSparseFields(n,e),l="projects/api/v3/summary.json",app.api.get(l,n).then(function(t){return function(e){var n,s,i,a,o,r,l,c,p,d,u,h;return h=null!=(n=e.response)?n:{},null!=(null!=(s=h.tasks)?s.late:void 0)&&t.lateTasks(h.tasks.late),null!=(null!=(a=h.tasks)?a.today:void 0)&&t.todaysTasks(h.tasks.today),null!=(null!=(o=h.tasks)?o.upcoming:void 0)&&t.upcomingTasks(h.tasks.upcoming),null!=(null!=(r=h.milestones)?r.late:void 0)&&t.lateMilestones(h.milestones.late),null!=(null!=(l=h.milestones)?l.today:void 0)&&t.todaysMilestones(h.milestones.today),null!=(null!=(c=h.milestones)?c.upcoming:void 0)&&t.upcomingMilestones(h.milestones.upcoming),null!=(null!=(p=h.events)?p.upcoming:void 0)&&t.upcomingEvents(h.events.upcoming),null!=(null!=(d=h.events)?d.today:void 0)&&t.todaysEvents(h.events.today),null!=(null!=(u=h.unread)?u.comments:void 0)&&t.unreadComments(h.unread.comments),null!=(null!=(i=h.unread)?i.messages:void 0)&&t.unreadMessages(h.unread.messages),t.pendingRequests=[]}}(this))},e.prototype.dispose=function(){app.pulse.forget({interval:15e3,key:"my-metrics",callback:this.checkForPendingUpdates}),this.subscriptions.forEach(function(t){return t.dispose()})},e}(),{viewModel:i,template:e}}.apply(e,s))&&(t.exports=i)}});
//# sourceMappingURL=dashboardnew.eb0570d8a64c3858deb4.js.map