webpackJsonp([6],{1107:function(t,e,s){t.exports={"section-addOrEditTask":Promise.all([s.e(0),s.e(6)]).then(s.bind(null,3863)),"section-project-task-time":Promise.all([s.e(0),s.e(6)]).then(s.bind(null,4032)),"section-project-tasklist":Promise.all([s.e(0),s.e(6)]).then(s.bind(null,4034)),"section-project-task":Promise.all([s.e(0),s.e(6)]).then(s.bind(null,4033)),"section-editTaskPredecessors":Promise.all([s.e(0),s.e(6)]).then(s.bind(null,3904)),"section-task-details":Promise.all([s.e(0),s.e(6)]).then(s.bind(null,4115)),"widget-tipped-task-comments":Promise.all([s.e(0),s.e(6)]).then(s.bind(null,4389)),"widget-tipped-task-dates":Promise.all([s.e(0),s.e(6)]).then(s.bind(null,4390)),"widget-tipped-task-followers":Promise.all([s.e(0),s.e(6)]).then(s.bind(null,4391)),"widget-tipped-task-priority":Promise.all([s.e(0),s.e(6)]).then(s.bind(null,4392)),"widget-tipped-task-progress":Promise.all([s.e(0),s.e(6)]).then(s.bind(null,4393)),"widget-tipped-task-recurring":Promise.all([s.e(0),s.e(6)]).then(s.bind(null,4394)),"widget-tipped-task-time":Promise.all([s.e(0),s.e(6)]).then(s.bind(null,4395)),"widget-task-dependents-link":Promise.all([s.e(0),s.e(6)]).then(s.bind(null,4340)),"widget-task-harvest-timer":Promise.all([s.e(0),s.e(6)]).then(s.bind(null,4344)),"widget-task-predecessors-link":Promise.all([s.e(0),s.e(6)]).then(s.bind(null,4348)),"widget-task-dropdown":Promise.all([s.e(0),s.e(6)]).then(s.bind(null,4341)),"widget-task-estimated-time":Promise.all([s.e(0),s.e(6)]).then(s.bind(null,4342)),"widget-task-files-list":Promise.all([s.e(0),s.e(6)]).then(s.bind(null,4343)),"widget-task-options":Promise.all([s.e(0),s.e(6)]).then(s.bind(null,4347)),"widget-task-related-tasks":Promise.all([s.e(0),s.e(6)]).then(s.bind(null,4349)),"widget-task-reminders-list":Promise.all([s.e(0),s.e(6)]).then(s.bind(null,4350)),"widget-task-row":Promise.all([s.e(0),s.e(6)]).then(s.bind(null,4351)),"widget-quick-task":Promise.all([s.e(0),s.e(6)]).then(s.bind(null,4306)),"widget-personal-tasks":Promise.all([s.e(0),s.e(6)]).then(s.bind(null,4289)),"widget-tasklist-dropdown":Promise.all([s.e(0),s.e(6)]).then(s.bind(null,4354)),"widget-quick-date-set":Promise.all([s.e(0),s.e(6)]).then(s.bind(null,4304)),"widget-followers-list":Promise.all([s.e(0),s.e(6)]).then(s.bind(null,4231)),"section-filtered-tasks":Promise.all([s.e(0),s.e(6)]).then(s.bind(null,3927))}},1927:function(t,e,s){var n,i,a=function(t,e){return function(){return t.apply(e,arguments)}};n=[s(14),s(1119),s(164),s(1133)],void 0!==(i=function(t,e,s,n){return function(){function e(t){this.SetupComputedsAndSubscribers=a(this.SetupComputedsAndSubscribers,this),this.GetAutocompleteProperties=a(this.GetAutocompleteProperties,this),this.Archive=a(this.Archive,this),this.Move=a(this.Move,this),this.Delete=a(this.Delete,this),this.Save=a(this.Save,this),this.Create=a(this.Create,this),this.Toggle=a(this.Toggle,this),this.ToggleComplete=a(this.ToggleComplete,this),this.RetryAPI=a(this.RetryAPI,this),this.ResetData=a(this.ResetData,this),this.componentName="QuickTask",null==t&&(t=this.GetNewJSON()),null==t.isPersonalTask&&(t.isPersonalTask=!0),this.UpdateProperties(t),n.fromJS(t,this.mapping,this),this.SetupComputedsAndSubscribers()}return e.prototype.mapping={key:function(t){return s.unwrap(t.id)}},e.prototype.ResetData=function(){return this.position(Date.now()),this.id(0),this.name("")},e.prototype.RetryAPI=function(t,e){var s;if(Tipped.hideAll(),null!=this.failedAPIAttempt())return s=this.failedAPIAttempt(),this.failedAPIAttempt(null),this.isUpdating(!0),this.isRetryingFailedAPIAttempt(!0),app.api[s.method](s.url,s.data).then(s.callback).catch(function(t){return function(){return t.failedAPIAttempt(s)}}(this)).finally(function(t){return function(){return t.isUpdating(!1),t.isRetryingFailedAPIAttempt(!1)}}(this)),null!=e&&e.stopPropagation(),!1},e.prototype.ToggleComplete=function(t,e){var s,n;return Tipped.hideAll(),!0,"completed"===this.status()&&!1,this.isUpdating(!0),n="tasks/"+this.id()+"/"+("completed"===this.status()?"uncomplete":"complete")+".json",s=this.status(),"completed"===s?(this.progress(0),this.status("reopened")):(this.progress(100),this.status("completed")),app.api.put(n).then(function(t){return function(e){var s;if("OK"===e.response.STATUS)return s={eventTime:new Date,itemType:"task",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:t.id(),projectId:0,subType:"task-"+t.status(),extraInfo:{data:{isPersonalTask:!0}}},app.ko.postbox.publish("allTWEvents",s)}}(this)).catch(function(t){return function(){return t.status(s)}}(this)).finally(function(t){return function(){return t.isUpdating(!1)}}(this)),null!=e&&e.stopPropagation(),!1},e.prototype.Toggle=function(){if(!this.isUpdating()){if(null!=this.failedAPIAttempt())return this.RetryAPI();if(!this.isTemporaryTask())return this.ToggleComplete()}},e.prototype.Create=function(t){var e,s,n,i;return this.isUpdating()||this.isUpdating(!0),e=function(e){return function(s){null!=s.response.id&&e.id(s.response.id/1),null!=s.response.task&&e.UpdateData(s.response.task),"function"==typeof t&&t(s)}}(this),i=function(t){return function(e,s,n){return t.failedAPIAttempt({method:"post",url:e,data:s,callback:n})}}(this),s=function(t){return function(e,s,n){app.api.post(e,s).then(n).catch(function(t){return i(e,s,n)}).finally(function(){return t.isUpdating(!1)})}}(this),n={task:{name:this.name(),description:this.description(),duedate:null!=this.dueDate()?this.dueDate():"",priority:this.priority()},get:"task"},s("me/personaltasks.json",n,e)},e.prototype.Save=function(){var t,e;if(!this.name().trim().length)return void app.flash.Warn(app.tl("Name must not be blank"));this.isEditMode(!1),this.isUpdating(!0),e=this.previousName(),this.previousName(this.name()),t={task:{name:this.name(),description:this.description(),duedate:null!=this.dueDate()?this.dueDate():"",priority:this.priority(),progress:this.progress(),archived:this.archived(),status:this.status(),position:this.position()}},app.api.put("me/personaltasks/"+this.id()+".json",t).then(function(t){return function(){var e;return t.previousName(t.name()),e={eventTime:new Date,itemType:"task",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:t.id(),projectId:t.projectId(),extraInfo:{data:{isPersonalTask:!0}}},app.ko.postbox.publish("allTWEvents",e)}}(this)).catch(function(t){return function(s){return t.name(e),t.previousName(e)}}(this)).finally(function(t){return function(){return t.isUpdating(!1)}}(this))},e.prototype.Delete=function(t){if(null==t&&(t={}),Tipped.hideAll(),this.id()>0)return this.deleted(!0),this.isUpdating(!0),app.api.delete("tasks/"+this.id()+".json").then(function(t){return function(e){var n;return function(){return t.deleted(!1),app.flash.Info(app.tl("Undeleting")+app.localizationPreferences().ellipsis),app.api.put("trashcan/tasks/"+t.id()+"/restore.json",{}).then(function(e){return app.flash.Success(app.tl("Task [_s] has been undeleted",'"'+s.unwrap(t.name())+'"')),app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"task",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:t.id(),subType:"task-restored",extraInfo:{data:{isPersonalTask:!0}}})})},n={eventTime:new Date,itemType:"task",actionType:app.consts.ACTIONTYPE.DELETED,itemId:t.id(),status:t.status(),subType:"task-deleted",extraInfo:{data:{isPersonalTask:!0}}},t.status("deleted"),app.ko.postbox.publish("allTWEvents",n)}}(this)).catch(function(t){return function(){return t.deleted(!1)}}(this)).finally(function(t){return function(){return t.isUpdating(!1)}}(this))},e.prototype.Move=function(){app.modal.Show("moveOrCopyItem",{type:"task",isPersonalTask:!0,item:this,itemId:this.id(),projectId:0})},e.prototype.Archive=function(t){if(null==t&&(t={}),Tipped.hideAll(),this.id()>0)return this.archived(!0),this.isUpdating(!0),app.api.put("me/personaltasks/"+this.id()+"/archive.json").then(function(t){return function(e){var n;return function(){return t.archived(!1),app.flash.Info(app.tl("Unarchiving")+app.localizationPreferences().ellipsis),app.api.put("me/personaltasks/"+t.id()+"/unarchive.json",{}).then(function(e){return app.flash.Success(app.tl("Task [_s] has been restored",'"'+s.unwrap(t.name())+'"')),app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"task",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:t.id(),subType:"task-unarchived",extraInfo:{data:{isPersonalTask:!0}}})})},n={eventTime:new Date,itemType:"task",actionType:app.consts.ACTIONTYPE.DELETED,itemId:t.id(),status:t.status(),subType:"task-archived",extraInfo:{data:{isPersonalTask:!0}}},app.ko.postbox.publish("allTWEvents",n)}}(this)).catch(function(t){return function(){return t.archived(!1)}}(this)).finally(function(t){return function(){return t.isUpdating(!1)}}(this))},e.prototype.nwlExp=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/\*%?=~_|!:,.;\]\[]*[-A-Z0-9+&@#\/\*%=~_|\]\[])/gi,e.prototype.nameWithLinksFN=function(){return String(this.name()).replace(/\"/g,"&quot;").replace(/\'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(this.nwlExp,"<a href='$1' style='word-break: break-word' target=_blank class=blue>$1</a>")},e.prototype.GetAutocompleteProperties=function(){var e,s;if(e=[],s=null==this.dueDateAsMoment()?"":this.dueDateAsMoment().format("YYYYMMDD")===t().format("YYYYMMDD")?app.tl("Today"):this.dueDateAsMoment().format("YYYYMMDD")===t().add(1,"day").format("YYYYMMDD")?app.tl("Tomorrow"):this.dueDateAsMoment().format("ddd MMM Do"),this.priority().length&&"none"!==this.priority().toLowerCase())switch(this.priority()){case"low":e.push({id:1,type:"priority",label:app.tl("Low priority"),color:app.consts.UICOLORS.lowpriority});break;case"medium":e.push({id:2,type:"priority",label:app.tl("Medium priority"),color:app.consts.UICOLORS.mediumpriority});break;case"low":e.push({id:3,type:"priority",label:app.tl("High priority"),color:app.consts.UICOLORS.highpriority})}return null!=this.dueDate()&&this.dueDate().toString().length&&e.push({id:0,type:"date",subtype:"due",label:app.tl("Due: [_s]",s)}),e},e.prototype.UpdateProperties=function(t){return null!=t.content&&(t.name=t.content),null==t.isPersonalTask&&(t.isPersonalTask=!0),null==t.temporaryId&&(t.temporaryId=""),null==t.isEditMode&&(t.isEditMode=!1),null==t.isUpdating&&(t.isUpdating=!1),null==t.currentRequestId&&(t.currentRequestId=""),null==t.isSelected&&(t.isSelected=!1),null==t.failedAPIAttempt&&(t.failedAPIAttempt=null),null==t.isRetryingFailedAPIAttempt&&(t.isRetryingFailedAPIAttempt=!1),t.uniqueTaskId="task-card-"+t.id+"-"+Date.now(),null==t.responsiblePartyIds&&(t.responsiblePartyIds=[app.loggedInUser.id()]),null==t.parentTaskId&&(t.parentTaskId=0),null==t.projectId&&(t.projectId=0),null==t.taskListId&&(t.taskListId=0),null==t.estimatedMinutes&&(t.estimatedMinutes=0),null==t.tags&&(t.tags=[]),null==t.position&&(t.position=Date.now()),null==t.progress&&(t.progress=0),null==t.isRecurring&&(t.isRecurring=!1),null==t.priority&&(t.priority=""),t.priority=t.priority.toLowerCase(),null==t.dueDate&&(t.dueDate=""),null==t.startDate&&(t.startDate=""),null!=t.duedate&&(t.dueDate=t.duedate),null==t.deleted&&(t.deleted=!1),null==t.archived&&(t.archived=!1),t.id=parseInt(t.id,10),t.previousName=t.name,t},e.prototype.SetupComputedsAndSubscribers=function(){var e,n,i,a,o;for(null==this.isActive&&(this.isActive=s.pureComputed(function(t){return function(){return!t.deleted()&&!t.archived()}}(this))),null==this.isTemporaryTask&&(this.isTemporaryTask=s.pureComputed(function(t){return function(){return t.id()/1==0||!!isNaN(t.id()/1)}}(this))),a=["start","due"],o=[],n=0,i=a.length;n<i;n++)e=a[n],o.push(function(e){return function(n){if(null==e[n+"DateAsMoment"]||!s.isComputed(e[n+"DateAsMoment"]))return e[n+"DateAsMoment"]=s.pureComputed({read:function(){var s;return s=e[n+"Date"]().toString(),null==s?null:8!==s.length?null:t(s,"YYYYMMDD")},write:function(s){var i;i=t.isMoment(s)?s.format("YYYYMMDD"):"",e[n+"Date"](i)},owner:e})}}(this)(e));return o},e.prototype.GetNewJSON=function(){return{id:0,name:"",description:"",estimatedMinutes:0,progress:0,priority:"none",isEditMode:!0,isUpdating:!1,isSelected:!1,status:"new",hasFollowers:!1,archived:!1,completed:!1,startDate:"",dueDate:""}},e.prototype.Clone=function(){var t;return t=s.mapping.toJS(this),new e(t)},e}()}.apply(e,n))&&(t.exports=i)},2619:function(t,e){t.exports='<div class="flex flex-column p--small">\n    \x3c!-- ko foreach: selectTasksToPushOptions --\x3e\n        <label class="flex flex-items-center cursor--pointer mb--none p--small">\n            <input type="radio"\n                class="ml--none mb--none mr--small"\n                name="{{$component.tippedPushTaskId}}_pushOption"\n                value="{{id}}"\n                data-bind="checked: $component.selectTasksToPush">\n            {{text}}\n        </label>\n    \x3c!-- /ko --\x3e\n</div>'},2620:function(t,e){t.exports="\x3c!-- ko foreach: previewDates() --\x3e\n\t<div style=\"padding:5px 10px;white-space:nowrap;\" data-bind=\"text:$data.format('dddd') + ', ' + $data.format('DD') + ' ' + $data.format('MMMM') + ' ' + $data.format('YYYY'), style:{ backgroundColor: $index() % 2 == 1 ? '#F5F5F5' : null  }\"></div>\n\x3c!-- /ko --\x3e"},2621:function(t,e){t.exports='<div id="{{uniqueId}}" class="editTaskForm" data-bind="attr:{ id:holderId }">\n\t\x3c!-- ko if: project() && taskListLoaded() --\x3e\n\t<div class="editTaskForm w-task-edit" data-bind="css:{\'w-task-edit--modal\': $component.inModal}">\n\t\t<form action="index.cfm" id="dont-delete-word-search-in-id-makes-lastpass-avoid-attaching-its-bindings" class="smallLabels sCut is-drop-zone" method="post" data-bind="css: {\'is-changed\': attachmentsEdited() || peopleEdited() }, submit: OnSubmit">\n\n\t\t\t\x3c!-- We dont show the task name for defaults --\x3e\n\t\t\t\x3c!-- ko if: $component.mode !== \'newTaskDefaults\' --\x3e\n\t\t\t\t<div class="w-task-edit__name">\n\t\t\t\t\t\x3c!-- ko if: app.featureFlip.check(\'teams\') --\x3e\n\t\t\t\t\t\t\x3c!-- ko if: taskInputReady --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: \'widget-task-input\',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\ttask: task,\n\t\t\t\t\t\t\t\t\t\tmode: $component.mode,\n\t\t\t\t\t\t\t\t\t\tautoFocus: shouldAutoFocusInput,\n\t\t\t\t\t\t\t\t\t\titemType: (task.id() > 0 ? \'task\' : taskPrivacyType()),\n\t\t\t\t\t\t\t\t\t\titemId: (task.id() > 0 ? task.id() : taskPrivacyId()),\n\t\t\t\t\t\t\t\t\t\tisFocused: isFocusedOnNameInput,\n\t\t\t\t\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\t\t\t\t\tinput: OnKeyboardInput,\n\t\t\t\t\t\t\t\t\t\t\tsubmit: OnSubmit,\n\t\t\t\t\t\t\t\t\t\t\tcancel: OnClickCancel,\n\t\t\t\t\t\t\t\t\t\t\tchange: OnAutoCompleteChange,\n\t\t\t\t\t\t\t\t\t\t\tfocus: OnAutoCompleteFocus\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\t\x3c!-- ko ifnot: app.featureFlip.check(\'teams\') --\x3e\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: \'widget-typeahead\',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\titemType: taskPrivacyType(),\n\t\t\t\t\t\t\t\t\titemId: taskPrivacyId(),\n\t\t\t\t\t\t\t\t\tinputId: typeaheadInputId,\n\t\t\t\t\t\t\t\t\tprivacyIds: privacyIds,\n\t\t\t\t\t\t\t\t\tprojectId: projectId,\n\t\t\t\t\t\t\t\t\tmode: \'add\',\n\t\t\t\t\t\t\t\t\tuseRemoteData: false,\n\t\t\t\t\t\t\t\t\ttypeaheadData: task.availablePeople,\n\t\t\t\t\t\t\t\t\tviewModel: $data,\n\t\t\t\t\t\t\t\t\tshowCompanies: true,\n\t\t\t\t\t\t\t\t\tshowNotify: ($component.mode !== \'template\'),\n\t\t\t\t\t\t\t\t\tshowPriorities: true,\n\t\t\t\t\t\t\t\t\tshowRoles: true,\n\t\t\t\t\t\t\t\t\tshowStartEndDates: ($component.mode !== \'template\'),\n\t\t\t\t\t\t\t\t\tshowTags: app.account.tagsEnabled(),\n\t\t\t\t\t\t\t\t\tshowTime: true,\n\t\t\t\t\t\t\t\t\tshowUsers: true,\n\t\t\t\t\t\t\t\t\tshowInvite: true,\n\t\t\t\t\t\t\t\t\tisRequired: true,\n\t\t\t\t\t\t\t\t\tfocusOnInit: shouldAutoFocusInput(),\n\t\t\t\t\t\t\t\t\tkoObservable: $component.task.name\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\x3c!--/ko--\x3e\n\n\t\t\t\t\t\t<input type="text" value="" data-bind="textInput: ( $component.mode != \'template\' ? task.name : templateTaskName ), attr: {id: typeaheadInputId, placeholder: app.tl(\'What needs to be done?\')}">\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</div>\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\x3c!-- Tabs --\x3e\n\t\t\t<div class="w-task-edit__options">\n\n\t\t\t\t\x3c!-- ko component: { name: "ui-icon-tabs", params: { tabs: tabs,  notifyKey: ($component.uniqueId), context:\'task-options\' } } --\x3e\x3c!-- /ko --\x3e\n\n\t\t\t\t<div class="tab-content">\n\t\t\t\t\t<div class="tabPane flex flex-items-baseline flex-justify-start" data-bind="visible: tabs.selCode() == \'whoAndWhen\'">\n\n\t\t\t\t\t\t<div class="mr--xlarge w-task-edit__assignee">\n\t\t\t\t\t\t\t<label class="w-task-edit__title-label" data-bind="event:{ \'dblclick\': OnClickSelectMeInDropdown }">\n\t\t\t\t\t\t\t\t{{ app.tl(\'Who should do this?\') }}\n\t\t\t\t\t\t\t</label>\n\n\t\t\t\t\t\t\t\x3c!-- ko if: $component.mode === \'template\' --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- ko ifnot: app.featureFlip.check(\'teams\') --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\tname: \'widget-available-people-picker\',\n\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\tfloat: \'right\',\n\t\t\t\t\t\t\t\t\t\t\t\titemType: taskPrivacyType(),\n\t\t\t\t\t\t\t\t\t\t\t\titemId: taskPrivacyId(),\n\t\t\t\t\t\t\t\t\t\t\t\tgroupByCompany: true,\n\t\t\t\t\t\t\t\t\t\t\t\tkoObservable: task.responsiblePartyIds,\n\t\t\t\t\t\t\t\t\t\t\t\tmultiple: true,\n\t\t\t\t\t\t\t\t\t\t\t\tprojectId: projectId,\n\t\t\t\t\t\t\t\t\t\t\t\tlistenTo: notifyKey,\n\t\t\t\t\t\t\t\t\t\t\t\tnamesObservable: assignedToNames,\n\t\t\t\t\t\t\t\t\t\t\t\ttypeaheadId: typeaheadInputId,\n\t\t\t\t\t\t\t\t\t\t\t\ttaskId: task.id(),\n\t\t\t\t\t\t\t\t\t\t\t\titem: task,\n\t\t\t\t\t\t\t\t\t\t\t\tgetFollowers: true,\n\t\t\t\t\t\t\t\t\t\t\t\tgetRoles: true,\n\t\t\t\t\t\t\t\t\t\t\t\tcreateMultiple: createMultiple,\n\t\t\t\t\t\t\t\t\t\t\t\tshowMultipleText: showMultipleText,\n\t\t\t\t\t\t\t\t\t\t\t\tinitialOptions: initialOptions,\n\t\t\t\t\t\t\t\t\t\t\t\tisQuickView: isQuickView\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\t\t\t\t\x3c!-- ko if: app.featureFlip.check(\'teams\') --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\tname:\'widget-people-picker-new\',\n\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\tshowMeAtTop: true,\n\t\t\t\t\t\t\t\t\t\t\t\tprojectId: projectId,\n\t\t\t\t\t\t\t\t\t\t\t\titemType: (task.id() > 0 ? \'task\' : taskPrivacyType()),\n\t\t\t\t\t\t\t\t\t\t\t\titemId: (task.id() > 0 ? task.id() : taskPrivacyId()),\n\t\t\t\t\t\t\t\t\t\t\t\tpickerType: \'responsible\',\n\t\t\t\t\t\t\t\t\t\t\t\tlockdownId: task.lockdownId(),\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: task.responsiblePartyIds,\n\t\t\t\t\t\t\t\t\t\t\t\tprivacyIds: privacyIds,\n\t\t\t\t\t\t\t\t\t\t\t\tuseModal: false,\n\t\t\t\t\t\t\t\t\t\t\t\tallowInvite: true,\n\t\t\t\t\t\t\t\t\t\t\t\tinitialOptions: [{id:\'0\', text:app.tl(\'Anyone\')}],\n\t\t\t\t\t\t\t\t\t\t\t\tshouldShowDefaultUserIcon: true,\n\t\t\t\t\t\t\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tprefetch: $component.OnPickerFetch,\n\t\t\t\t\t\t\t\t\t\t\t\t\tloaded: $component.OnAssigneePickerChange,\n\t\t\t\t\t\t\t\t\t\t\t\t\tchange: $component.OnAssigneePickerChange\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\x3c!-- ko if: $component.mode !== \'template\' --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- ko ifnot: app.featureFlip.check(\'teams\') --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\tname: \'widget-available-people-picker\',\n\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\tfloat: \'right\',\n\t\t\t\t\t\t\t\t\t\t\t\titemType: taskPrivacyType(),\n\t\t\t\t\t\t\t\t\t\t\t\titemId: taskPrivacyId(),\n\t\t\t\t\t\t\t\t\t\t\t\tgroupByCompany: true,\n\t\t\t\t\t\t\t\t\t\t\t\tkoObservable: task.responsiblePartyIds,\n\t\t\t\t\t\t\t\t\t\t\t\tmultiple: true,\n\t\t\t\t\t\t\t\t\t\t\t\tprojectId: projectId,\n\t\t\t\t\t\t\t\t\t\t\t\tlistenTo: notifyKey,\n\t\t\t\t\t\t\t\t\t\t\t\tnamesObservable: assignedToNames,\n\t\t\t\t\t\t\t\t\t\t\t\ttypeaheadId: typeaheadInputId,\n\t\t\t\t\t\t\t\t\t\t\t\ttaskId: task.id(),\n\t\t\t\t\t\t\t\t\t\t\t\titem: task,\n\t\t\t\t\t\t\t\t\t\t\t\tgetFollowers: true,\n\t\t\t\t\t\t\t\t\t\t\t\tgetRoles: true,\n\t\t\t\t\t\t\t\t\t\t\t\tcreateMultiple: createMultiple,\n\t\t\t\t\t\t\t\t\t\t\t\tshowMultipleText: showMultipleText,\n\t\t\t\t\t\t\t\t\t\t\t\tdblclickCallback:OnClickSelectMeInDropdown,\n\t\t\t\t\t\t\t\t\t\t\t\tautoSelectIfOne: false,\n\t\t\t\t\t\t\t\t\t\t\t\tisQuickView: isQuickView\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\t\t\t\t\x3c!-- ko if: app.featureFlip.check(\'teams\') --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\tname:\'widget-people-picker-new\',\n\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\tshowMeAtTop: true,\n\t\t\t\t\t\t\t\t\t\t\t\tprojectId: projectId,\n\t\t\t\t\t\t\t\t\t\t\t\titemType: (task.id() > 0 ? \'task\' : taskPrivacyType()),\n\t\t\t\t\t\t\t\t\t\t\t\titemId: (task.id() > 0 ? task.id() : taskPrivacyId()),\n\t\t\t\t\t\t\t\t\t\t\t\tpickerType: \'responsible\',\n\t\t\t\t\t\t\t\t\t\t\t\tlockdownId: task.lockdownId(),\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: task.responsiblePartyIds,\n\t\t\t\t\t\t\t\t\t\t\t\tprivacyIds: privacyIds,\n\t\t\t\t\t\t\t\t\t\t\t\tuseModal: false,\n\t\t\t\t\t\t\t\t\t\t\t\tallowInvite: true,\n\t\t\t\t\t\t\t\t\t\t\t\tinitialOptions: [{id:\'0\', text:app.tl(\'Anyone\')}],\n\t\t\t\t\t\t\t\t\t\t\t\tshouldShowDefaultUserIcon: true,\n\t\t\t\t\t\t\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tprefetch: $component.OnPickerFetch,\n\t\t\t\t\t\t\t\t\t\t\t\t\tloaded: $component.OnAssigneePickerChange,\n\t\t\t\t\t\t\t\t\t\t\t\t\tchange: $component.OnAssigneePickerChange\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t<span class="inline-block">\n\t\t\t\t\t\t\t\t\x3c!-- ko if: app.featureFlip.check(\'teams\') --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- ko if: task.id() == 0 && task.responsiblePartyIds().length > 1 --\x3e\n\t\t\t\t\t\t\t\t\t\t<a class="inline-option-link pb--medium pt--small"\n\t\t\t\t\t\t\t\t\t\t\thref="javascript:;"\n\t\t\t\t\t\t\t\t\t\t\tdata-bind="css:{ \'off\': !createMultiple() }, click: OnClickCreateMultiple">\n\t\t\t\t\t\t\t\t\t\t\t<span class="fa h-check-icon" data-bind="css:{\'fa-square-o\':!createMultiple(), \'sel\':createMultiple(), \'fa-check-square\':createMultiple()}"></span>\n\t\t\t\t\t\t\t\t\t\t\t<span>{{app.tl(\'Create a task for each assignee\')}}</span>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\x3c!-- ko if: \'template,newTaskDefaults\'.indexOf($component.mode) === -1 --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- ko if: shouldShowNotifyByEmail --\x3e\n\t\t\t\t\t\t\t\t\t\t<a class="inline-option-link lhs"\n\t\t\t\t\t\t\t\t\t\t\thref="javascript:;"\n\t\t\t\t\t\t\t\t\t\t\tdata-bind="css:{ \'off\': !notifyByEmail() }, click:OnClickNotifyByEmail">\n\t\t\t\t\t\t\t\t\t\t\t<span class="fa h-check-icon" data-bind="css:{\'fa-square-o\':!notifyByEmail(), \'sel\':notifyByEmail(), \'fa-check-square\':notifyByEmail()}"></span>\n\t\t\t\t\t\t\t\t\t\t\t<span>{{app.tl(\'Notify by Email?\')}}</span>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- ko if: $component.mode === \'template\' && task.templateRoleName() != null && task.responsiblePartyIds() == \'-1\' --\x3e\n\t\t\t\t\t\t\t\t\t<a class="inline-option-link lhs"\n\t\t\t\t\t\t\t\t\t\thref="javascript:;"\n\t\t\t\t\t\t\t\t\t\tdata-bind="click: ShowRoleNameModal">\n\t\t\t\t\t\t\t\t\t\t<span class="fa fa-edit"></span>\n\t\t\t\t\t\t\t\t\t\t<span>{{app.tl(\'Rename this Role\')}}</span>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="flex flex-wrap">\n\t\t\t\t\t\t\t\x3c!-- Start Date --\x3e\n\t\t\t\t\t\t\t<div class="start-date mr--medium">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label class="w-task-edit__title-label">{{app.tl(\'Start Date\')}}</label>\n\n\t\t\t\t\t\t\t\t\t\x3c!-- Start Date: Ordinary mode --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- ko if: \'2,template,newTaskDefaults\'.indexOf($component.mode) === -1 --\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\t\tname: \'widget-dateInput\',\n\t\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tdate: startDateMomentUI,\n\t\t\t\t\t\t\t\t\t\t\t\t\tcustomInputClass: \'widget-dateInput--input form-control\',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdateInputOptions: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tallowEmpty: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tappendTo: \'parent\',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsoftMaxMoment: dueDateMomentUI,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tignoreSoftLimit: ignoreSoftLimit,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcenterPopup: true\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\x3c!-- Start Date: Template Mode (Days 1-80) --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- ko if: \'template,newTaskDefaults\'.indexOf($component.mode) !== -1 --\x3e\n\t\t\t\t\t\t\t\t\t<select style="min-width:160px" name="taskStartDate"\n\t\t\t\t\t\t\t\t\tdata-bind="\n\t\t\t\t\t\t\t\t\t\tselect2:{\n\t\t\t\t\t\t\t\t\t\t\tdata: startAndDueDays,\n\t\t\t\t\t\t\t\t\t\t\tplaceholder: app.tl(\'Select Date\')\n\t\t\t\t\t\t\t\t\t\t}, value: task.startDateOffset"></select>\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\x3c!-- Due Date --\x3e\n\t\t\t\t\t\t\t<div class="due-date">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label class="w-task-edit__title-label">{{app.tl(\'Due Date\')}}</label>\n\n\t\t\t\t\t\t\t\t\t\x3c!-- Due Date: Ordinary mode --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- ko if: \'4,template,newTaskDefaults\'.indexOf($component.mode) === -1 --\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\t\tname: \'widget-dateInput\',\n\t\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tdate: dueDateMomentUI,\n\t\t\t\t\t\t\t\t\t\t\t\t\tcustomInputClass: \'widget-dateInput--input form-control\',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdateInputOptions: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tallowEmpty: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tappendTo: \'parent\',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsoftMinMoment: startDateMomentUI,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tignoreSoftLimit: ignoreSoftLimit,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcenterPopup: true\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\x3c!-- Due Date: Template Mode (Days 1-80) --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- ko if: \'5,template,newTaskDefaults\'.indexOf($component.mode) !== -1 --\x3e\n\t\t\t\t\t\t\t\t<select style="min-width:160px" name="taskDueDate"\n\t\t\t\t\t\t\t\tdata-bind="\n\t\t\t\t\t\t\t\t\tselect2:{\n\t\t\t\t\t\t\t\t\t\tdata: startAndDueDays,\n\t\t\t\t\t\t\t\t\t\tplaceholder: app.tl(\'Select Date\')\n\t\t\t\t\t\t\t\t\t}, value: task.dueDateOffset"></select>\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\x3c!-- ko if: (showDateOptions()) && $parent.mode != "template"  --\x3e\n\t\t\t\t\t\t\t\t<div class="width--100">\n\t\t\t\t\t\t\t\t\t<div class="font-size--small inline-block mt--small pt--small px--medium text-muted border-top--default"\n\t\t\t\t\t\t\t\t\t\tdata-bind="\n\t\t\t\t\t\t\t\t\t\t\tcss: {\n\t\t\t\t\t\t\t\t\t\t\t\thidden: !hasDateChanged()\n\t\t\t\t\t\t\t\t\t\t\t}" >\n\t\t\t\t\t\t\t\t\t\t{{languageIsEnglish ? \'Adjust this task\' : app.tl(\'Push changes to\')+\':\'}}\n\t\t\t\t\t\t\t\t\t\t<a id="{{tippedPushTaskId}}"\n\t\t\t\t\t\t\t\t\t\t\thref="javascript:;"\n\t\t\t\t\t\t\t\t\t\t\tclass="blue inline-block tipped-click footer-tipped-el"\n\t\t\t\t\t\t\t\t\t\t\tdata-bind="tippedDelegate"\n\t\t\t\t\t\t\t\t\t\t\tdata-content="{{$component.pushTippedContent}}"\n\t\t\t\t\t\t\t\t\t\t\tdata-tipped-options="showOn: \'click\', skin: \'light\', hideOthers: false, hideAfter: 300, hideOn: \'click\', padding: 0">\n\t\t\t\t\t\t\t\t\t\t\t{{selectTasksToPushText}}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="tabPane" data-bind="visible: tabs.selCode() == \'description\'">\n\t\t\t\t\t\t<label class="w-task-edit__title-label">\n\t\t\t\t\t\t\t\x3c!-- ko if: $component.mode !== \'newTaskDefaults\' --\x3e\n\t\t\t\t\t\t\t\t{{app.tl(\'Provide a detailed description for this task\')}}\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: $component.mode == \'newTaskDefaults\' --\x3e\n\t\t\t\t\t\t\t\t{{app.tl(\'Provide a description for new tasks\')}}\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t<small>({{app.tl(\'optional\')}})</small>\n\t\t\t\t\t\t</label>\n\n\t\t\t\t\t\t<div class="markdown-input-wrapper">\n\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: \'widget-easy-markdown-editor\',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tcontent: task.description,\n\t\t\t\t\t\t\t\t\tshowing: $component.showingDescription\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t\x3c!-- ko if: canAddFiles() && !(task.isUpdating()) --\x3e\n\t\t\t\t\t\t<div class="tabPane" data-bind="visible: tabs.selCode() == \'files\'">\n\t\t\t\t\t\t\t<label class="w-task-edit__title-label">{{app.tl(\'Would you like to attach files to this task?\')}}</label>\n\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname:\'widget-file-attachment-dropzone\',\n\t\t\t\t\t\t\t\tparams:{\n\t\t\t\t\t\t\t\t\tshowOnLoad:true,\n\t\t\t\t\t\t\t\t\tnotifyKey: ($component.uniqueId),\n\t\t\t\t\t\t\t\t\tparentVM: $component,\n\t\t\t\t\t\t\t\t\tattachedTo: task,\n\t\t\t\t\t\t\t\t\ttheme: \'tabbedWidget\',\n\t\t\t\t\t\t\t\t\tpermissions: $component.project().permissions,\n\t\t\t\t\t\t\t\t\tdefaultPrivacyIds: privacyIds\n\t\t\t\t\t\t\t\t} } --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t<div class="tabPane" data-bind="visible: tabs.selCode() == \'privacy\' && task.private()!==2">\n\t\t\t\t\t\t<label class="w-task-edit__title-label">\n\t\t\t\t\t\t\t\x3c!-- ko if: $component.mode !== \'newTaskDefaults\' --\x3e\n\t\t\t\t\t\t\t\t{{app.tl(\'Privacy\')}} &mdash; {{app.tl(\'Who can see this task?\')}}\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: $component.mode == \'newTaskDefaults\' --\x3e\n\t\t\t\t\t\t\t\t{{app.tl(\'Privacy\')}} &mdash; {{app.tl(\'Who can see new tasks on this list?\')}}\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t</label>\n\n\t\t\t\t\t\t\x3c!-- ko ifnot: app.featureFlip.check(\'teams\') --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\tname:\'widget-people-picker\',\n\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\tprojectId: $component.projectId,\n\t\t\t\t\t\t\t\t\t\titemType: taskPrivacyType(),\n\t\t\t\t\t\t\t\t\t\tid: taskPrivacyId(),\n\t\t\t\t\t\t\t\t\t\tpickerType: \'privacy\',\n\t\t\t\t\t\t\t\t\t\tnotifyKey: notifyKey,\n\t\t\t\t\t\t\t\t\t\tlockdownId: task.lockdownId(),\n\t\t\t\t\t\t\t\t\t\tmode: (taskPrivacyId()==0 ? \'add\' : \'edit\')\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\x3c!-- ko if: app.featureFlip.check(\'teams\')() && privacyPickerVisible() --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\tname: \'widget-item-privacy-picker\',\n\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\tprojectId: $component.projectId,\n\t\t\t\t\t\t\t\t\t\titemType: (task.id() > 0 ? \'task\' : taskPrivacyType()),\n\t\t\t\t\t\t\t\t\t\titemId: (task.id() > 0 ? task.id() : taskPrivacyId()),\n\t\t\t\t\t\t\t\t\t\tlockdownId: task.lockdownId(),\n\t\t\t\t\t\t\t\t\t\tprivacyIds: privacyIds,\n\t\t\t\t\t\t\t\t\t\tformat: \'inline\'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="tabPane" data-bind="visible: tabs.selCode() == \'priority\'">\n\t\t\t\t\t\t<label for="taskPredecessorsel0" class="w-task-edit__title-label">\n\t\t\t\t\t\t\t\x3c!-- ko if: $component.mode !== \'newTaskDefaults\' --\x3e\n\t\t\t\t\t\t\t\t{{app.tl(\'Choose the priority of this task\')}}\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: $component.mode == \'newTaskDefaults\' --\x3e\n\t\t\t\t\t\t\t\t{{app.tl(\'Choose the priority of new tasks\')}}\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t</label>\n\n\t\t\t\t\t\t<div class="w-priority-select">\n\n\t\t\t\t\t\t\t<label class="w-priority-select__block mr--medium" data-bind="attr: { \'for\': uniqueId + \'1\' + task.id() }, css: { \'is-active\': task.priority() === \'\' }">\n\t\t\t\t\t\t\t\t<span class="w-styled-checkbox">\n\t\t\t\t\t\t\t\t\t<input type="radio" name="taskPriority" value="" checked="" data-bind="attr: { id: uniqueId + \'1\' + task.id() }, checked: task.priority, click: removePriorityTags">\n\t\t\t\t\t\t\t\t\t<span class="input-replacer"></span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<i class="fa fa-exclamation-circle"></i>\n\t\t\t\t\t\t\t\t{{app.tl(\'None\')}}\n\t\t\t\t\t\t\t</label>\n\n\t\t\t\t\t\t\t<label class="w-priority-select__block mr--medium" data-bind="attr: { \'for\': uniqueId + \'2\' + task.id() }, css: { \'is-active\': task.priority() === \'low\' }">\n\t\t\t\t\t\t\t\t<span class="w-styled-checkbox">\n\t\t\t\t\t\t\t\t\t<input type="radio" name="taskPriority" value="low" data-bind="attr: { id: uniqueId + \'2\' + task.id() }, checked: task.priority, click: removePriorityTags">\n\t\t\t\t\t\t\t\t\t<span class="input-replacer"></span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<i class="fa fa-exclamation-circle priority-low"></i>\n\t\t\t\t\t\t\t\t{{app.tl(\'Low\')}}\n\t\t\t\t\t\t\t</label>\n\n\t\t\t\t\t\t\t<label class="w-priority-select__block mr--medium" data-bind="attr: { \'for\': uniqueId + \'3\' + task.id() }, css: { \'is-active\': task.priority() === \'medium\' }">\n\t\t\t\t\t\t\t\t<span class="w-styled-checkbox">\n\t\t\t\t\t\t\t\t\t<input type="radio" name="taskPriority" value="medium" data-bind="attr: { id: uniqueId + \'3\' + task.id() }, checked: task.priority, click: removePriorityTags">\n\t\t\t\t\t\t\t\t\t<span class="input-replacer"></span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<i class="fa fa-exclamation-circle priority-medium"></i>\n\t\t\t\t\t\t\t\t{{app.tl(\'Medium\')}}\n\t\t\t\t\t\t\t</label>\n\n\t\t\t\t\t\t\t<label class="w-priority-select__block" data-bind="attr: { \'for\': uniqueId + \'4\' + task.id() }, css: { \'is-active\': task.priority() === \'high\' }">\n\t\t\t\t\t\t\t\t<span class="w-styled-checkbox">\n\t\t\t\t\t\t\t\t\t<input type="radio" name="taskPriority" value="high" data-bind="attr: { id: uniqueId + \'4\' + task.id() }, checked: task.priority, click: removePriorityTags">\n\t\t\t\t\t\t\t\t\t<span class="input-replacer"></span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<i class="fa fa-exclamation-circle priority-high"></i>\n\t\t\t\t\t\t\t\t{{app.tl(\'High\')}}\n\t\t\t\t\t\t\t</label>\n\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="tabPane" data-bind="visible: tabs.selCode() == \'progress\'">\n\t\t\t\t\t\t<div class="flex flex-items-baseline">\n\t\t\t\t\t\t\t\x3c!-- ko if: $component.mode !== \'newTaskDefaults\' --\x3e\n\t\t\t\t\t\t\t\t<div class="w-task-edit__progress mr--xlarge pl--small">\n\t\t\t\t\t\t\t\t\t<label class="w-task-edit__title-label" data-bind="attr:{ \'for\':\'taskProgress\' + task.id() }">\n\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Progress so far\')}} ({{task.progress}}%)\n\t\t\t\t\t\t\t\t\t</label>\n\n\t\t\t\t\t\t\t\t\t<div class="relative">\n\t\t\t\t\t\t\t\t\t\t<div id="{{uniqueId}}_progressSlider" class="width--100 mb--medium" data-bind="slider: {\n\t\t\t\t\t\t\t\t\t\t\tstart: task.progress(),\n\t\t\t\t\t\t\t\t\t\t\trange: {\n\t\t\t\t\t\t\t\t\t\t\t\tmin: 0,\n\t\t\t\t\t\t\t\t\t\t\t\tmax: progressMax()\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tstep: 10,\n\t\t\t\t\t\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\t\t\t\t\t\tslide: OnProgressUpdated,\n\t\t\t\t\t\t\t\t\t\t\t\tchange: OnProgressUpdated\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tkoObservable: task.progress\n\t\t\t\t\t\t\t\t\t\t}"></div>\n\t\t\t\t\t\t\t\t\t\t<p class="mb--none small color--gray-light">\n\t\t\t\t\t\t\t\t\t\t\t{{ progressText }}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: $component.canViewEstimates --\x3e\n\t\t\t\t\t\t\t\t<div class="w-task-edit__estimate">\n\t\t\t\t\t\t\t\t\t<label class="w-task-edit__title-label" data-bind="attr: { \'for\': \'taskEstimateMins\' + task.id() }">\n\t\t\t\t\t\t\t\t\t\t{{ app.tl(\'Estimated time to complete\') }}\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<div class="flex flex-items-center">\n\t\t\t\t\t\t\t\t\t\t<div class="w-task-edit__estimate-group">\n\t\t\t\t\t\t\t\t\t\t\t<label class="font-size--small color--gray-light" data-bind="attr: { \'for\': \'taskEstimateHours\' + task.id() }">\n\t\t\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Hours\')}}\n\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t<input class="form-control" type="text" onclick="this.select();" name="taskEstimateHours" value="0" data-bind="attr: { id: \'taskEstimateHours\' + task.id()}, numberInput: estimatedHoursPart, event: { keyup: removeTimeTag }">\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="divider">:</div>\n\t\t\t\t\t\t\t\t\t\t<div class="w-task-edit__estimate-group">\n\t\t\t\t\t\t\t\t\t\t\t<label class="font-size--small color--gray-light" data-bind="attr: { \'for\': \'taskEstimateMins\' + task.id() }">\n\t\t\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Minutes\')}}\n\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t<input class="form-control" type="text" onclick="this.select()" name="taskEstimateMins" value="0" data-bind="attr: { id: \'taskEstimateMins\' + task.id()}, numberInput: estimatedMinsPart, event: { keyup: removeTimeTag }">\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="tabPane u-followers-picker" data-bind="visible: tabs.selCode() == \'followers\'">\n\t\t\t\t\t\t\x3c!-- ko if:$component.mode != "newTaskDefaults" --\x3e\n\t\t\t\t\t\t\t<label class="w-task-edit__title-label">{{app.tl(\'Who will get notifications about activity on this task?\')}}</label>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\x3c!-- ko if:$component.mode == "newTaskDefaults" --\x3e\n\t\t\t\t\t\t\t<label class="w-task-edit__title-label">{{app.tl(\'Who will get notifications about activity on new tasks?\')}}</label>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\x3c!-- ko ifnot: app.featureFlip.check(\'teams\') --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: \'widget-followers-list\',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\ttype: taskPrivacyType(),\n\t\t\t\t\t\t\t\t\tid: taskPrivacyId(),\n\t\t\t\t\t\t\t\t\tprojectId: projectId,\n\t\t\t\t\t\t\t\t\tpeople: task.availablePeople,\n\t\t\t\t\t\t\t\t\tuseRemoteData: false,\n\t\t\t\t\t\t\t\t\tinitialChangeFollowers: task.changeFollowerIds,\n\t\t\t\t\t\t\t\t\tinitialCommentFollowers: task.commentFollowerIds\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\x3c!-- ko if: app.featureFlip.check(\'teams\')() && followersPickerVisible() --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\tname:\'widget-people-picker-new\',\n\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\tprojectId: projectId,\n\t\t\t\t\t\t\t\t\t\titemType: (task.id() > 0 ? \'task\' : taskPrivacyType()),\n\t\t\t\t\t\t\t\t\t\titemId: (task.id() > 0 ? task.id() : taskPrivacyId()),\n\t\t\t\t\t\t\t\t\t\tpickerType: \'followers\',\n\t\t\t\t\t\t\t\t\t\tlockdownId: task.lockdownId(),\n\t\t\t\t\t\t\t\t\t\tchangeFollowerIds: changeFollowers,\n\t\t\t\t\t\t\t\t\t\tcommentFollowerIds: commentFollowers,\n\t\t\t\t\t\t\t\t\t\tprivacyIds: privacyIds,\n\t\t\t\t\t\t\t\t\t\tformat: \'inline\',\n\t\t\t\t\t\t\t\t\t\tshowAdvancedFollowerOptions: true,\n\t\t\t\t\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\t\t\t\t\tloaded: $component.OnFollowersPickerChange,\n\t\t\t\t\t\t\t\t\t\t\tchange: $component.OnFollowersPickerChange\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="tabPane" data-bind="visible: tabs.selCode() == \'dependencies\'">\n\t\t\t\t\t\t<label class="w-task-edit__title-label">\n\t\t\t\t\t\t\t{{ app.tl(\'Are there tasks that must be done first?\') }}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\x3c!-- ko component: { name: "section-editTaskPredecessors", params:{ task:task, taskList: taskList, mode: $component.mode } } --\x3e\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\x3c!-- ko if: (showDateOptions()) && $parent.mode != "template"  --\x3e\n\t\t\t\t\t\t\t<div class="font-size--small font-size--tiny pt--small text-muted"\n\t\t\t\t\t\t\t\tdata-bind="\n\t\t\t\t\t\t\t\t\tcss: {\n\t\t\t\t\t\t\t\t\t\thidden: !hasDateChanged()\n\t\t\t\t\t\t\t\t\t}" >\n\t\t\t\t\t\t\t\t{{languageIsEnglish ? \'Adjust this task\' : app.tl(\'Push changes to\')+\':\'}}\n\t\t\t\t\t\t\t\t<a id="{{tippedPushTaskId}}"\n\t\t\t\t\t\t\t\t\thref="javascript:;"\n\t\t\t\t\t\t\t\t\tclass="blue2 tipped-click footer-tipped-el"\n\t\t\t\t\t\t\t\t\tdata-bind="tippedDelegate"\n\t\t\t\t\t\t\t\t\tdata-content="{{$component.pushTippedContent}}"\n\t\t\t\t\t\t\t\t\tdata-tipped-options="showOn: \'click\', skin: \'light\', hideOthers: false, hideAfter: 300, hideOn: \'click\', padding: 0">\n\t\t\t\t\t\t\t\t\t{{selectTasksToPushText}}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="tabPane" data-bind="visible: tabs.selCode() == \'repeats\'">\n\t\t\t\t\t\t\x3c!-- ko if: ( $component.mode !== \'template\' && dueDateAsUserFormat() === \'\' ) || ( $component.mode === \'template\' && task.dueDateOffset() == -1 ) --\x3e\n\t\t\t\t\t\t\t{{app.tl(\'Before you can use repeats, you need to pick a due date for the first task\')}}\n\t\t\t\t\t\t\t&mdash;\n\t\t\t\t\t\t\t<a href="javascript:" class=blue data-bind="click:function(){ tabs.selCode(\'whoAndWhen\') }">{{app.tl(\'Set Due Date\')}}</a>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\x3c!-- ko if: ( $component.mode !== \'template\' && dueDateAsUserFormat() !== \'\' ) || ( $component.mode === \'template\' && task.dueDateOffset() != -1 ) --\x3e\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<label class="w-task-edit__title-label" data-bind="attr: {for: \'taskRepeatsFreq\' + task.id() }">{{app.tl(\'Does this task repeat?\')}}</label>\n\t\t\t\t\t\t\t\t<select class="w-task-edit__repeat-options" name="taskRepeatsFreq" data-bind="select2: {data: repeatOptions}, attr: {id: \'taskRepeatsFreq\' + task.id() }, value:task.recurring.frequency"></select>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\x3c!--ko if: task.recurring.frequency && ([\'monthly\',\'every2months\',\'every3months\',\'every4months\',\'every6months\'].indexOf(task.recurring.frequency()) > -1) --\x3e\n\t\t\t\t\t\t\t\t<div class="w-task-edit__repeat-month-options" data-bind="attr:{ id:\'repeatMonthOptions\' + task.id() }">\n\t\t\t\t\t\t\t\t\t<div class="mb--medium">\n\t\t\t\t\t\t\t\t\t\t<input type="radio" class="mr--small" name="monthlyRepeatType" value="monthDay" checked="" data-bind="attr:{ id:\'mro\' + task.id() }, checked:task.recurring.monthlyOn">\n\t\t\t\t\t\t\t\t\t\t<label class="w-task-edit__radio-label" data-bind="attr:{ \'for\':\'mro\' + task.id() }">{{app.tl(\'Same day of the Month\')}}</label>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="mb--medium">\n\t\t\t\t\t\t\t\t\t\t<input type="radio" class="mr--small" name="monthlyRepeatType" value="weekDay" data-bind="attr:{ id:\'mrw\' + task.id() }, checked:task.recurring.monthlyOn">\n\t\t\t\t\t\t\t\t\t\t<label class="w-task-edit__radio-label" data-bind="attr:{ \'for\':\'mrw\' + task.id() }">{{app.tl(\'Same day of the Week\')}}</label>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="mb--medium">\n\t\t\t\t\t\t\t\t\t\t<input type="radio" class="mr--small" name="monthlyRepeatType" value="lastDayOfMonth" data-bind="attr:{ id:\'mrm\' + task.id() }, checked:task.recurring.monthlyOn">\n\t\t\t\t\t\t\t\t\t\t<label class="w-task-edit__radio-label" data-bind="attr:{ \'for\':\'mrm\' + task.id() }">{{app.tl(\'End of each Month\')}}</label>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\x3c!-- ko if: task.recurring.frequency && task.recurring.frequency() === \'everyxdays\' || task.recurring.frequency() === \'everyxdaysweekday\' --\x3e\n\t\t\t\t\t\t\t\t<div class="flex flex-items-center pt--medium">\n\t\t\t\t\t\t\t\t\t<label class="mb--none mr--small" data-bind="attr:{ \'for\':\'everyxdays\' + task.id() }">{{ everyXDaysTextPrefix }}</label>\n\t\t\t\t\t\t\t\t\t<input class="form-control input-sm text-center mr--small" type="text" value="1" style="width: 40px;" data-bind="attr:{ id:\'everyxdays\' + task.id() }, value: task.recurring.duration">\n\t\t\t\t\t\t\t\t\t<label class="mb--none" data-bind="attr: { \'for\': \'everyxdays\' + task.id() }">{{ everyXDaysTextSuffix }}</label>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\x3c!-- ko if: task.recurring.frequency && task.recurring.frequency() === \'selecteddays\' --\x3e\n\t\t\t\t\t\t\t\t<div class="w-task-edit__select-days" data-bind="attr: { id:\'repeatDayOptions\' + task.id() }">\n\t\t\t\t\t\t\t\t\t<div class="w-task-edit__weekday-option">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" class="mr--small" value="2" data-bind="attr:{ id:\'dm\' + task.id() }, checked:task.recurring.days">\n\t\t\t\t\t\t\t\t\t\t<label class="w-task-edit__weekday-label" data-bind="attr:{ \'for\':\'dm\' + task.id() }">{{app.tl(\'Monday\')}}</label>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="w-task-edit__weekday-option">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" class="mr--small" value="3" data-bind="attr:{ id:\'dt\' + task.id() }, checked:task.recurring.days">\n\t\t\t\t\t\t\t\t\t\t<label class="w-task-edit__weekday-label" data-bind="attr:{ \'for\':\'dt\' + task.id() }">{{app.tl(\'Tuesday\')}}</label>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="w-task-edit__weekday-option">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" class="mr--small" value="4" data-bind="attr:{ id:\'dw\' + task.id() }, checked:task.recurring.days">\n\t\t\t\t\t\t\t\t\t\t<label class="w-task-edit__weekday-label" data-bind="attr:{ \'for\':\'dw\' + task.id() }">{{app.tl(\'Wednesday\')}}</label>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="w-task-edit__weekday-option">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" class="mr--small" value="5" data-bind="attr:{ id:\'dth\' + task.id() }, checked:task.recurring.days">\n\t\t\t\t\t\t\t\t\t\t<label class="w-task-edit__weekday-label" data-bind="attr:{ \'for\':\'dth\' + task.id() }">{{app.tl(\'Thursday\')}}</label>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="w-task-edit__weekday-option">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" class="mr--small" value="6" data-bind="attr:{ id:\'df\' + task.id() }, checked:task.recurring.days">\n\t\t\t\t\t\t\t\t\t\t<label class="w-task-edit__weekday-label" data-bind="attr:{ \'for\':\'df\' + task.id() }">{{app.tl(\'Friday\')}}</label>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="w-task-edit__weekday-option">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" class="mr--small" value="7" data-bind="attr:{ id:\'dsat\' + task.id() }, checked:task.recurring.days">\n\t\t\t\t\t\t\t\t\t\t<label class="w-task-edit__weekday-label" data-bind="attr:{ \'for\':\'dsat\' + task.id() }">{{app.tl(\'Saturday\')}}</label>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox" class="mr--small" value="1" data-bind="attr:{ id:\'dsun\' + task.id() }, checked:task.recurring.days">\n\t\t\t\t\t\t\t\t\t\t<label class="w-task-edit__weekday-label" data-bind="attr:{ \'for\':\'dsun\' + task.id() }">{{app.tl(\'Sunday\')}}</label>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\x3c!-- ko if: task.recurring.frequency() !== null && task.recurring.frequency()!==\'norepeat\' && $component.mode !== \'template\' --\x3e\n\t\t\t\t\t\t\t\t<label class="block mt--large w-task-edit__title-label mb--small">{{app.tl(\'When should it stop repeating?\')}}</label>\n\t\t\t\t\t\t\t\t<div class="w-task-edit__radio-group border-bottom--default flex flex-items-center mb--medium pb--medium">\n\t\t\t\t\t\t\t\t\t<div class="w-task-edit__radio-option mr--large">\n\t\t\t\t\t\t\t\t\t\t<input type="radio" class="mr--small" name="taskRepeatEnd" value="noEndDate" data-bind="attr:{ id:\'pEd\' + task.id() + \'o1\' }, checked:task.recurring.endDateOption">\n\t\t\t\t\t\t\t\t\t\t<label class="w-task-edit__radio-label" data-bind="attr:{ \'for\':\'pEd\' + task.id() + \'o1\' }">{{app.tl(\'No End Date\')}}</label>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div class="w-task-edit__radio-option">\n\t\t\t\t\t\t\t\t\t\t<input type="radio" class="mr--small" name="taskRepeatEnd" value="ends" data-bind="attr:{id:\'pEd\'+task.id()+\'o2\'}, checked:task.recurring.endDateOption">\n\t\t\t\t\t\t\t\t\t\t<label class="w-task-edit__radio-label" data-bind="attr:{\'for\':\'pEd\'+task.id()+\'o2\'}">{{app.tl("End On")}}{{{app.localizationPreferences().ellipsis}}}</label>\n\n\t\t\t\t\t\t\t\t\t\t<div class="inline-block ml--small">\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: \'widget-dateInput\',\n\t\t\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdate: task.recurring.endOnUserFormat,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdateInputOptions: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tallowEmpty: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tappendTo: \'parent\'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisplayShortcuts: false,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyleOverrides: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\'width\': \'90px\',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\'height\': \'28px\'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- Preview --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: previewDates().length > 1 --\x3e\n\t\t\t\t\t\t\t\t<p class="color--muted font-size--small mb--none">\n\t\t\t\t\t\t\t\t\t<i class="color--gray fa fa-info-circle mr--tiny"></i>\n\t\t\t\t\t\t\t\t\t<span class="task-repeat-dates-wrapper cursor--pointer" data-bind="click:function(){tabs.selCode(\'whoAndWhen\')}">\n\t\t\t\t\t\t\t\t\t\t{{{previewDatesStart}}}\n\t\t\t\t\t\t\t\t\t\t\x3c!-- ko if: previewDates().length > 1 --\x3e\n\t\t\t\t\t\t\t\t\t\t\t{{{previewDatesEnd}}}\n\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t&mdash;\n\t\t\t\t\t\t\t\t\t<a href="javascript:;" class="tipped blue nowrap"\n\t\t\t\t\t\t\t\t\t\tdata-bind="tippedDelegate"\n\t\t\t\t\t\t\t\t\t\tdata-tipped-options="skin: \'light\', hideOn: false, hideAfter: 300"\n\t\t\t\t\t\t\t\t\t\tdata-content="{{$component.repeatsTippedContent}}">\n\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Preview Due Dates\')}}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="tabPane" data-bind="visible: tabs.selCode() == \'reminders\'">\n\t\t\t\t\t\t\x3c!-- ko if: ( [\'newTaskDefaults\', \'template\'].includes($component.mode) && task.dueDateOffset() == -1 )  --\x3e\n\t\t\t\t\t\t\t{{app.tl(\'Before you can use reminders here you need to pick a default due date for the task\')}}\n\t\t\t\t\t\t\t<span class="h-char-separator"></span>\n\t\t\t\t\t\t\t<a href="javascript:" class="blue" data-bind="click:function(){ tabs.selCode(\'whoAndWhen\') }">{{app.tl(\'Set Due Date\')}}</a>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\x3c!-- ko if: ![\'newTaskDefaults\', \'template\'].includes($component.mode) || ( [\'newTaskDefaults\', \'template\'].includes($component.mode) && task.dueDateOffset() != -1 )  --\x3e\n\t\t\t\t\t\t\t<label class="block pt--large w-task-edit__title-label">\n\t\t\t\t\t\t\t\t{{app.tl(\'Reminders for this task\')}}\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\x3c!-- ko if: canRenderReminders --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- ko component: { name:\'widget-task-reminders-list\', params:{ task: task, mode: \'task-form\', privacyIds:flatPrivacyIds, useOffSetDueDate: ([\'newTaskDefaults\', \'template\'].includes($component.mode)) } } --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</div>\n\n\t\t\t\t\t\x3c!-- ko if: app.account.tagsEnabled() --\x3e\n\t\t\t\t\t\t<div class="tabPane" data-bind="visible: tabs.selCode() == \'tags\'">\n\t\t\t\t\t\t\t<label class="w-task-edit__title-label">\n\t\t\t\t\t\t\t\t\x3c!-- ko if: $component.mode !== \'newTaskDefaults\' --\x3e\n\t\t\t\t\t\t\t\t\t{{app.tl(\'Choose some tags for this task\')}}: <small>({{app.tl(\'optional\')}})</small>\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- ko if: $component.mode == \'newTaskDefaults\' --\x3e\n\t\t\t\t\t\t\t\t\t{{app.tl(\'Choose the default tags for new tasks\')}}: <small>({{app.tl(\'optional\')}})</small>\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<div class="w-tags w-tags--add">\n\t\t\t\t\t\t\t\t\x3c!-- Tags Listing --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- ko component: { name:"widget-tags-list", params:{ autosave: false, item:task, type:"task", canEdit:(task.canEdit() || task.id() == 0), mode:"editing", canAddTags: (!app.account.tagsLockedToAdmins() || app.loggedInUser.administrator()), enabled:app.account.tagsEnabled()} } --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- Add tags --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- ko component: { name:"widget-tags-addIcon", params:{ autosave: true, item:task, type:"task", projectId:projectId, showText:true, enabled:app.account.tagsEnabled()} } --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\x3c!-- ko if: canSelectColumn --\x3e\n\t\t\t\t\t\t<div class="tabPane" data-bind="visible: tabs.selCode() == \'column\'">\n\t\t\t\t\t\t\t<label class="w-task-edit__title-label">\n\t\t\t\t\t\t\t\t{{app.tl(\'Choose board column\')}}\n\t\t\t\t\t\t\t\t<small class="pl--small">({{app.tl(\'optional\')}})</small>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\x3c!-- ko component: { name:"widget-board-column-label", params:{ item: task, mode: \'dropdown\', itemMode: $component.mode } } --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t<div class="tabPane" data-bind="visible:tabs.selCode()==\'customFields\'">\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: \'widget-link-custom-fields\',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tselectedCustomFields: selectedCustomFields,\n\t\t\t\t\t\t\t\tentity: \'task\'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\n\t\t\t<div class="w-task-edit__save">\n\t\t\t\t<button type="submit" class="btn btn-success" data-bind="loader: isSubmitting, click: OnSubmit, css: {disabledSubmit: !canSubmit()}">\n\t\t\t\t\t{{ (isSubmitting() ? app.tl(\'Saving Changes\') : app.tl(\'Save Changes\'))}}\n\t\t\t\t</button>\n\t\t\t\t<span class="w-task-edit__save-divider">\n\t\t\t\t\t{{app.tl(\'or\')}}\n\t\t\t\t</span>\n\t\t\t\t<button type="button" class="w-task-edit__cancel-button btn btn-link" data-bind="click: confirmCancel">\n\t\t\t\t\t{{ app.tl(\'Cancel\') }}\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t</form>\n\n\t\t<div data-bind="onRendered: OnRendered"></div>\n\t</div>\n\t\x3c!--/ko--\x3e\n\t\x3c!-- ko ifnot: project() && taskListLoaded() --\x3e\n\t\t<div>\n\t\t\t<div class="mliLoading">\n\t\t\t\t{{ app.tl(\'Loading project permissions\') }}\n\t\t\t</div>\n\t\t</div>\n\t\x3c!--/ko--\x3e\n</div>\n\n\n\x3c!-- IMPORTANT - Mark this template loaded --\x3e\n\x3c!-- ko if: $data.readyToShow != null && readyToShow --\x3e\n\t<div data-bind="template:{afterRender:function(){templateLoaded(true)}}" class="hidden"></div>\n\x3c!-- /ko --\x3e\n'},2677:function(t,e){t.exports='\t<div class="s-edit-task-predecessors">\n\t\t<div class="s-edit-task-predecessors__content">\n\t\t\t\x3c!-- ko if: task.predecessors().length === 0 --\x3e\n\t\t\t\t<span class="s-edit-task-predecessors__label--default"> &mdash; {{app.tl(\'No Tasks Listed\')}} &mdash; </span>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\x3c!-- ko ifnot: task.predecessors().length === 0 --\x3e\n\t\t\t<div class="s-edit-task-predecessors__label">{{app.tl(\'Yes, we are waiting on the following tasks\')}}:</div>\n\n\t\t\t<ul class="s-edit-task-predecessors__task-list" data-bind="foreach: task.predecessors">\n\t\t\t\t<li class="s-edit-task-predecessors__task hs2">\n\t\t\t\t\t<div class="s-edit-task-predecessors__task-details-lhs">\n\t\t\t\t\t\t<div class="s-edit-task-predecessors__task-count" data-bind="text:($index()+1)+\'.\'">1.</div>\n\n\t\t\t\t\t\t<div class="s-edit-task-predecessors__icon">\n\t\t\t\t\t\t\t\x3c!-- ko if: status() == \'completed\' --\x3e\n\t\t\t\t\t\t\t\t<i class="s-edit-task-predecessors__icon--completed fa fa-check-circle"></i>\n\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\x3c!-- ko ifnot: status() == \'completed\' --\x3e\n\t\t\t\t\t\t\t\t<img src="//cdn.teamwork.com/images/icons/dependency-mustcomplete-cantstart-strong.png" alt="">\n\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\x3c!-- ko if: $data.projectType == null || $data.projectType() != \'tasklists-template\' --\x3e\n\t\t\t\t\t\t<div class="s-edit-task-predecessors__task-name" data-bind="css: {\'s-edit-task-predecessors__task-name-completed\' : status() == \'completed\'}">\n\t\t\t\t\t\t\t<a href="#tasks/{{id}}" target="_blank">\n\t\t\t\t\t\t\t\t"{{app.utility.Truncate(name(), 40, app.localizationPreferences().ellipsis)}}"\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\x3c!-- ko if: $data.projectType != null && $data.projectType() === \'tasklists-template\' --\x3e\n\t\t\t\t\t\t\t<div class="s-edit-task-predecessors__task-name" data-bind="css: {\'s-edit-task-predecessors__task-name-completed\' : status() == \'completed\'}">\n\t\t\t\t\t\t\t\t"{{app.utility.Truncate(name(), 40, app.localizationPreferences().ellipsis)}}"\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t<span class="s-edit-task-predecessors__dash"> &mdash; </span>\n\n\t\t\t\t\t\t<div class="s-edit-task-predecessors__task-dependency-description">\n\t\t\t\t\t\t\t{{ app.tl(\'[_s] must complete before this task can [_s]\', \'\', \'\') }}\n\t\t\t\t\t\t</div> &nbsp;\n\n\t\t\t\t\t\t<a href="javascript:void(0)" class="btn btn-default btn-xs text-decoration--none" data-bind="click: function(){ type( type()==\'start\'?\'complete\':\'start\' ) }">\n\t\t\t\t\t\t\t{{ type() == \'start\' ? app.tl(\'start\') : app.tl(\'be completed\') }}\n\t\t\t\t\t\t</a>\n\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="s-edit-task-predecessors__task-details-rhs">\n\t\t\t\t\t\t\x3c!-- ko if: status() == \'completed\' --\x3e\n\t\t\t\t\t\t<div class="s-edit-task-predecessors__completed">\n\t\t\t\t\t\t\t<span class="s-edit-task-predecessors__completed-label">{{app.tl(\'Completed\')}}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\x3c!-- ko if: parentTaskId && parentTaskId != null && parentTaskId() > 0 --\x3e\n\t\t\t\t\t\t<div class="s-edit-task-predecessors__subtask">\n\t\t\t\t\t\t\t<span class="s-edit-task-predecessors__subtask-label label ql tipped">{{app.tl(\'Subtask\')}}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\t\t<div class="s-edit-task-predecessors__delete-dependency">\n\t\t\t\t\t\t\t\x3c!-- ko if: $parent.task.id() != parentTaskId() --\x3e\n\t\t\t\t\t\t\t<a href="javascript:void(0)" class="tipped fa fa-close" data-bind="click: $parent.OnClickRemove" data-tipped="{{ app.tl(\'Remove?\') }}"></a>\n\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</div>\n\n\t\t<div class="mt--medium">\n\t\t\t<button type="button" class="btn btn-default" data-bind="click:OnClickSelectTasks">{{app.tl("Select Tasks")}}{{{app.localizationPreferences().ellipsis}}}</button>\n\t\t</div>\n\t</div>\n\n\t\x3c!-- IMPORTANT - Mark this template loaded --\x3e\n\t\x3c!-- ko if: $data.readyToShow != null && readyToShow --\x3e\n\t\t<div data-bind="template:{afterRender:function(){templateLoaded(true)}}" class="hidden"></div>\n\t\x3c!-- /ko --\x3e'},2710:function(t,e){t.exports="\x3c!-- ko if: data.state() == 'loading' --\x3e\n\t\x3c!-- ko component: {name: 'list-state-loading-new', params: {itemType: 'task'}} --\x3e\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\x3c!-- ko if: data.state() == 'error' --\x3e\n\t\x3c!-- ko component: {name: 'list-state-error', params: {itemType: 'task', onTryAgainAction: data.TryLoadAgain, errorStatus: data.APIErrorStatus}} --\x3e\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\x3c!-- ko if: data.state() == 'blank'--\x3e\n\t\x3c!-- ko component: {name: 'list-state-blank', params: {itemType: 'task', canAdd: false, showButton:false, onClickButton:OnAddTaskToTaskList, filter:filters, title:app.tl('No Tasks'), msg:app.tl('There are no matching tasks')}} --\x3e\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\x3c!-- ko if: data.state() == 'content' --\x3e\n\t<div id=\"filteredTasksWrapper\" data-bind=\"css: { 'tasklistView': taskListId != null, 'tasklist': taskListId != null }\">\n\n\t\t\x3c!-- ko if: $component.mode !== 'all' && $component.taskList().description() --\x3e\n\t\t\t<div class=\"singleListDescription\" data-bind=\"marked: $component.taskList().description(), style:{'margin-left': isTaskListPage ? '5px' : '35px','border-bottom': isTaskListPage ? '1px dotted #ccc' : 'none','margin-bottom': isTaskListPage ? '10px' : '0'}\">Description here</div>\n\t\t\x3c!-- /ko --\x3e\n\n\t\t<div id=\"TaskListsContent\" class=\"tasklist clearfix\" style=\"clear:both\">\n\n\t\t\t<div class=\"tasks-container ml--none\" data-bind=\"foreach: data.list\">\n\t\t\t\t\x3c!-- ko if: $component.isNewTaskList( $index() ) --\x3e\n\t\t\t\t\t<div class=\"s-tasklist__title pl--none u-group-title h-show-hover--parent\">\n\t\t\t\t\t\t<div class=\"mr--medium\">\n\t\t\t\t\t\t\t<a class=\"flex-inline group-collapse color--gray-light text-decoration--none tipped\" href=\"javascript:;\"\n\t\t\t\t\t\t\t\tdata-bind=\"click: $component.OnClickToggleCollapse\">\n\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\tname: 'ui-common-icon',\n\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\tname: ($component.isTaskListCollapsed($data) ? 'chevron-right-solid' : 'chevron-down-solid'),\n\t\t\t\t\t\t\t\t\t\t\tclass: 'color--inherit'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\x3c!-- Task List Name --\x3e\n\t\t\t\t\t\t<h3 class=\"u-group-title__label mr--none\">\n\t\t\t\t\t\t\t<a data-bind=\"\n\t\t\t\t\t\t\t\tattr: {\n\t\t\t\t\t\t\t\t\thref: ( ['tlTemplate','template'].indexOf($component.taskMode) === -1 ? '#tasklists/' + taskListId() : '#task-templates/' + taskListId() )\n\t\t\t\t\t\t\t\t}\">\n\t\t\t\t\t\t\t\t{{$component.getTaskListName(taskListId())}}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</h3>\n\n\t\t\t\t\t\t\x3c!-- Privacy Indicator --\x3e\n\t\t\t\t\t\t\x3c!-- ko if: $component.taskLists[ taskListId() ].taskList --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: $component.taskLists[ taskListId() ].taskList().isPrivate() --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- ko component: { name:\"widget-privacy-icon\", params: $component.getTaskListPrivacyParams(taskListId()) } --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\x3c!-- ko if: $component.isTaskListCollapsed($data) --\x3e\n\t\t\t\t\t\t\t\t<span class=\"collapsed u-count u-count--subtle font-size--small mx--medium\">\n\t\t\t\t\t\t\t\t\t\x3c!-- ko text: app.tl('[_num] tasks').replace('[_num]', $component.taskLists[ taskListId() ].taskList().numIncomplete() ) --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t<span class=\"h-show-hover--child mx--small\">\n\t\t\t\t\t\t\t\t\x3c!--  ko component: {\n\t\t\t\t\t\t\t\t\t\tname: \"widget-tasklist-dropdown\",\n\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\ttaskList: $component.taskLists[ taskListId() ].taskList(),\n\t\t\t\t\t\t\t\t\t\t\tprojectId: projectId(),\n\t\t\t\t\t\t\t\t\t\t\tmode: ($component.taskMode == 'template' ? 'template' : 'normal')\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}--\x3e\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</div>\n\n\t\t\t\t\t\x3c!-- ko if: $component.mode === 'all' && $component.isNewTaskList( $index() ) --\x3e\n\t\t\t\t\t\t\x3c!-- ko if: $component.getTaskListDescription(taskListId()) !== '' --\x3e\n\t\t\t\t\t\t\t<div data-bind=\"\n\t\t\t\t\t\t\t\tmarked: $component.getTaskListDescription(taskListId()),\n\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t'margin-left': $component.isTaskListPage ? '5px' : '35px',\n\t\t\t\t\t\t\t\t\t'border-bottom': $component.isTaskListPage ? '1px dotted #ccc' : 'none',\n\t\t\t\t\t\t\t\t\t'margin-bottom': $component.isTaskListPage ? '10px' : '0'\n\t\t\t\t\t\t\t\t}\">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\x3c!-- ko ifnot: $component.isTaskListCollapsed($data) --\x3e\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: 'widget-task-row',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\ttask: $data,\n\t\t\t\t\t\t\t\ttaskList: (typeof taskList !== 'undefined' ? taskList : undefined),\n\t\t\t\t\t\t\t\tprojectId: ($component.taskMode == 'template' ? $component.projectId : undefined),\n\t\t\t\t\t\t\t\tmode: $component.taskMode,\n\t\t\t\t\t\t\t\tinFilteredList: true,\n\t\t\t\t\t\t\t\tinCompletedList: $component.includeCompletedTasks()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\x3c!-- ko if: $component.isLastInTaskList( $index() ) && $component.mode == 'all' && !$component.isTaskListAddingTask( $index() ) && !$component.isTaskListCollapsed($data) --\x3e\n\t\t\t\t\t<div class=\"tlOpts noSelT no-print\">\n\t\t\t\t\t\t\x3c!-- ko if: $component.canAddTasks --\x3e\n\t\t\t\t\t\t\t<button data-bind=\"click:function () { $component.OnClickShowAddTask(taskListId()) }, css:{'btn-success': $component.notEditing}\" class=\"btn js-add-task\" type=\"button\">\n\t\t\t\t\t\t\t\t<span class=\"fa fa-plus mr--small\"></span>\n\t\t\t\t\t\t\t\t{{app.tl('Add a Task')}}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\x3c!-- ko if: $component.getEstimatedMinutesForTaskList($data) > 0 --\x3e\n\t\t\t\t\t\t\t<div style=\"padding:0; color:#CCC; font-size:12px; margin-left: auto; margin-right:5px;\" data-bind=\"with: $component.getEstimatedMinutesForTaskList($data)\">\n\t\t\t\t\t\t\t\t{{app.tl('Total Estimated Time')}}:\n\t\t\t\t\t\t\t\t<span class=\"estimatedTimeTotal\">\n\t\t\t\t\t\t\t\t\t<span data-bind=\"text: app.utility.MinutesIntToString($data, {zeroVal: app.tl('[_s] minutes', 0), abbreviate: false})\">x hours</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t</div>\n\t\t\t\t\x3c!-- /ko --\x3e\n            </div>\n\n\t\t\t\x3c!-- ko if: taskListId && taskList() != null --\x3e\n\t\t\t\t<div class=\"tlOpts noSelT no-print\">\n\t\t\t\t\t\x3c!-- ko if: $component.canAddTasks() --\x3e\n\t\t\t\t\t\t\x3c!-- ko ifnot: taskList().isAddingTask --\x3e\n\t\t\t\t\t\t\t<button data-bind=\"click:OnClickShowAddTask, css:{'btn-success':notEditing}\" class=\"btn js-add-task\" type=\"button\">\n\t\t\t\t\t\t\t\t<span class=\"fa fa-plus\" style=\"margin-right: 5px;\"></span>{{app.tl('Add a Task')}}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</div>\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t<div data-bind=\"css: { 'ml--large': taskListId != null }\">\n\t\t\t\t\x3c!-- ko component: {name: 'widget-loadMore', params: {dataLoader:data}} --\x3e\x3c!-- /ko --\x3e\n\t\t\t</div>\n\n\t\t\t<div data-bind=\"visible: $component.mode == 'taskList' && $component.totalEstimatedTime()>0 && $component.data.state()=='content'\">\n\t\t\t\t<div style=\"padding:10px 8px 0 0;text-align:right;color:#CCCCCC;font-size:12px;margin-top:10px;\">{{app.tl('Total Estimated Time')}}:\n\t\t\t\t\t<span class=\"estimatedTotal\">\n\t\t\t\t\t\t<span data-bind=\"visible:$component.totalEstimatedHours()>0\">{{$component.totalEstimatedHours()}} {{app.tl('hours')}}</span>\n\t\t\t\t\t\t<span data-bind=\"visible:$component.totalEstimatedMinutes()>0\">{{$component.totalEstimatedMinutes()}} {{app.tl('minutes')}}</span>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\x3c!-- /ko --\x3e\n\n\x3c!-- IMPORTANT - Mark this template loaded --\x3e\n\x3c!-- ko if: $data.readyToShow != null && readyToShow --\x3e\n\t<div data-bind=\"template:{afterRender:function(){templateLoaded(true)}}\" class=\"hidden\"></div>\n\x3c!-- /ko --\x3e"},2834:function(t,e){t.exports="<div class=\"section-task-time relative\">\n\n\t\x3c!-- ko if: data.state() == 'loading' --\x3e\n\t\t\x3c!-- ko component: {name: 'list-state-loading-new', params:{itemType: 'time'}} --\x3e\x3c!-- /ko --\x3e\n\t\x3c!-- /ko --\x3e\n\t\x3c!-- ko if: data.state() == 'error' --\x3e\n\t\t\x3c!-- ko component: {name: 'list-state-error', params:{itemType: 'time', onTryAgainAction: TryLoadAgain, errorStatus: data.APIErrorStatus}} --\x3e\x3c!-- /ko --\x3e\n\t\x3c!-- /ko --\x3e\n\t\x3c!-- ko if: data.state() == 'blank' --\x3e\n\t\t<p class=\"color--muted mb--none\">\n\t\t\t{{timeLogsMessage}}\n\t\t\t\x3c!-- ko if: projectIsActive() && canLogTime() --\x3e -\n\t\t\t\t<a href=\"javascript:;\" data-bind=\"click: OnClickLogTimeOnTask\">{{app.tl('Log time on this task')}}</a>\n\t\t\t\x3c!--/ko--\x3e\n\t\t</p>\n\t\x3c!-- /ko --\x3e\n\n\t\x3c!-- ko if: data.state() == 'content' --\x3e\n\t<div id=\"timeReportData\">\n\t\t\x3c!-- ko component: {name: 'widget-time-totals', params:{parent: $data}} --\x3e\x3c!-- /ko --\x3e\n\n\t\t\x3c!-- ko foreach: timeEntryIncrementalArrays --\x3e\n\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: 'widget-time-list',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\ttimeEntryIncrementalArray: $data,\n\t\t\t\t\t\t\t\t\ttaskId: $component.taskId,\n\t\t\t\t\t\t\t\t\tprojectId: $component.projectId,\n\t\t\t\t\t\t\t\t\tloadDeferred: $component.loadDeferred\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\t\t\x3c!-- /ko --\x3e\n\n\t\t\x3c!-- ko if: !$component.data.isLoading() && timeEntryIncrementalArrays().inSync() && $component.data.currentPaginator().hasMoreRecords() --\x3e\n\t\t\t<div class=\"mb--none\" style=\"overflow: hidden; margin-top: -21px; padding: 0 0 10px 0\">\n\t\t\t\t\x3c!-- ko component: {name: 'widget-loadMore', params:{dataLoader:$component.data}} --\x3e\x3c!-- /ko --\x3e\n\t\t\t</div>\n\t\t\x3c!-- /ko --\x3e\n\n\t\t\x3c!-- ko if: canLogTime() --\x3e\n\t\t\t<p data-bind=\"visible: projectIsActive\" class=\"subtle\">\n\t\t\t\t<a data-bind=\"click: OnClickLogTimeOnTask\" href=\"javascript:;\">{{app.tl('Log more time on this task')}}</a>\n\t\t\t</p>\n\t\t\x3c!-- /ko --\x3e\n\t</div>\n\t\x3c!--/ko--\x3e\n</div>\n\n\x3c!-- IMPORTANT - Mark this template loaded --\x3e\n\x3c!-- ko if: $data.readyToShow != null && readyToShow --\x3e\n\t<div data-bind=\"template:{afterRender:function(){templateLoaded(true)}}\" class=\"hidden\"></div>\n\x3c!-- /ko --\x3e\n"},2835:function(t,e){t.exports='\x3c!-- ko if: task() --\x3e\n\t<div id="TaskContent" class="s-project-task">\n\t\t\x3c!-- ko component: { name: "widget-inline-help", params: { type:\'task\' } } --\x3e\x3c!-- /ko --\x3e\n\t\t\x3c!-- ko if: task().private() != 0 && task().lockdownId() > 0 --\x3e\n\t\t\t\x3c!-- ko component: {\n\t\t\t\tname:"widget-privacy-icon",\n\t\t\t\tparams: {\n\t\t\t\t\tprivate:task().private,\n\t\t\t\t\tlockdownId:task().lockdownId,\n\t\t\t\t\tshowPrivacyBar:true,\n\t\t\t\t\tprojectId: projectId,\n\t\t\t\t\tid:taskId, title:task().name, type:\'task\'\n\t\t\t\t}\n\t\t\t} --\x3e\x3c!-- /ko --\x3e\n\t\t\x3c!--/ko--\x3e\n\t\t<div>\n\t\t\t<div class="blurHolder">\n\t\t\t\t<div class="s-project-task__tasklist">\n\t\t\t\t\t<div class="s-project-task__tasks-container tasks-container">\n\t\t\t\t\t\t\x3c!-- ko if: $component.task() && $component.taskList() --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: \'widget-task-row\',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\ttask: $component.task(),\n\t\t\t\t\t\t\t\t\ttaskList: $component.taskList(),\n\t\t\t\t\t\t\t\t\tmode: \'task\',\n\t\t\t\t\t\t\t\t\tlevel: 1,\n\t\t\t\t\t\t\t\t\tparentVM: $component,\n\t\t\t\t\t\t\t\t\tisMainTask: true,\n\t\t\t\t\t\t\t\t\tisQuickView: $component.isQuickView,\n\t\t\t\t\t\t\t\t\tisEditing: $component.isEditing\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t\x3c!-- ko if: canViewMessagesAndFiles() --\x3e\n\t\t\t\t\t<div class="s-project-task__line-separator"></div>\n\t\t\t\t\t<div id="taskFiles" class="s-project-task__files" data-bind="css: { \'is-drop-zone\' : $component.canAddFiles() } ">\n\n\t\t\t\t\t\t<h2 class="font-weight--normal">{{ app.tl(\'Files\') }}\n\t\t\t\t\t\t\t\x3c!-- ko if: $component.taskList() --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\tname:\'widget-file-attachment-inline\',\n\t\t\t\t\t\t\t\t\tparams:{\n\t\t\t\t\t\t\t\t\t\tshowOnLoad:true,\n\t\t\t\t\t\t\t\t\t\tnotifyKey: $component.uniqueId,\n\t\t\t\t\t\t\t\t\t\tparentVM: $component,\n\t\t\t\t\t\t\t\t\t\tattachedTo: task(),\n\t\t\t\t\t\t\t\t\t\ttheme: \'tabbedWidget\'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t</h2>\n\n\t\t\t\t\t\t\x3c!-- ko if: task().attachmentsCount() == 0 --\x3e\n\t\t\t\t\t\t\t<p id="noFilesMessage">\n\t\t\t\t\t\t\t\t{{ app.tl(\'No files are attached to this task?\') }}\n\n\t\t\t\t\t\t\t\t\x3c!-- ko if: task().canEdit() && $component.canAddFiles() --\x3e\n\t\t\t\t\t\t\t\t\t<span class="h-char-separator"></span>\n\t\t\t\t\t\t\t\t\t<a class="s-project-task__attach-files-link" href="javascript:;" data-bind="click:$component.OnAttachFilesToTask">{{ app.tl(\'Attach files to this task\') }}</a>\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\x3c!-- ko if: task().attachmentsCount() > 0 --\x3e\n\t\t\t\t\t\t\t<div class="clearfix mb--medium">\n\t\t\t\t\t\t\t\t\x3c!-- ko component: {name: \'widget-task-files-list\', params:{task:task(), hasLoaded: filesLoaded}} --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="flex flex-items-center" data-identifier="manage-task-attachments">\n\t\t\t\t\t\t\t\t\x3c!-- ko if: task().canEdit() && $component.canAddFiles() --\x3e\n\t\t\t\t\t\t\t\t\t<p id="attachMore">\n\t\t\t\t\t\t\t\t\t\t<a href="javascript:;" data-bind="click: $component.OnAttachFilesToTask">{{ app.tl(\'Manage Task Attachments\') }}</a>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- ko if: canDownloadAllAttachments() --\x3e\n\t\t\t\t\t\t\t\t\t<p class="ml--auto mr--none">\n\t\t\t\t\t\t\t\t\t\t<a href="javascript:;" data-bind="click: OnDownloadAllAttachments">{{ app.tl(\'Download All\') }}</a>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</div>\n\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\x3c!-- ko if: $component.canViewTimeLog() --\x3e\n\t\t\t\t\t<div class="s-project-task__line-separator"></div>\n\t\t\t\t\t<div id="taskTime" class="s-project-task__time">\n\t\t\t\t\t\t<h2 class="font-weight--normal">{{ app.tl(\'Time Logs\') }}</h2>\n\t\t\t\t\t\t\x3c!-- ko component: { name: "section-project-task-time",\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\ttask: task(),\n\t\t\t\t\t\t\t\tprojectId: task().projectId(),\n\t\t\t\t\t\t\t\thasLoaded: timeLoaded,\n\t\t\t\t\t\t\t\tloadDeferred: $component.loadTimelogsDeferred\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t</div>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="s-project-task__line-separator"></div>\n\t\t<div id="taskComments" class="s-project-task__comments" data-bind="css: {\'s-project-task__comments--quick-view\' : $component.isQuickView}">\n\t\t\t\x3c!-- ko if: app.featureFlip.check(\'newDashboard\') --\x3e\n\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\tname: \'section-comments-list\',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tfilterKey: \'itemComments\',\n\t\t\t\t\t\t\tshowTitle: true,\n\t\t\t\t\t\t\tshowCommentForm: $component.canAddComments(),\n\t\t\t\t\t\t\titemType: \'task\',\n\t\t\t\t\t\t\titemId: task().id(),\n\t\t\t\t\t\t\titem: task,\n\t\t\t\t\t\t\tprojectId: task().projectId,\n\t\t\t\t\t\t\tisQuickView: $component.isQuickView\n\t\t\t\t\t\t}\n\t\t\t\t\t} --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\x3c!-- ko ifnot: app.featureFlip.check(\'newDashboard\') --\x3e\n\t\t\t\t<h2>{{ app.tl(\'Comments\') }}</h2>\n\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\tname: "section-everything-comments",\n\t\t\t\t\tparams:{\n\t\t\t\t\t\ttype: \'tasks\',\n\t\t\t\t\t\titemId: taskId,\n\t\t\t\t\t\tshowBlankState: false,\n\t\t\t\t\t\tshowTitle: false,\n\t\t\t\t\t\tshowCommentForm: $component.canAddComments(),\n\t\t\t\t\t\tprojectId: $component.projectId,\n\t\t\t\t\t\thasLoaded: commentsLoaded,\n\t\t\t\t\t\tloadDeferredArray: $component.loadDeferredArray,\n\t\t\t\t\t\tinQuickView: $component.isQuickView\n\t\t\t\t\t}\n\t\t\t\t} --\x3e\x3c!-- /ko --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</div>\n\t</div>\n\x3c!-- /ko --\x3e\n\x3c!-- ko if: data.hasLoadError --\x3e\n<div id="TaskContent" class="s-project-task">\n\t<p>{{ app.tl("Either the task does not exist or you don\'t have permission to view it.") }}</p>\n</div>\n\x3c!-- /ko --\x3e\n\n\x3c!-- IMPORTANT - Mark this template loaded --\x3e\n\x3c!-- ko if: commentsLoaded && timeLoaded && filesLoaded --\x3e\n    <div data-bind="template:{afterRender:OnLoad}" class="hidden"></div>\n\x3c!-- /ko --\x3e\n'},2836:function(t,e){t.exports="\x3c!-- ko if: parentSection == null || !parentSection.hasActiveFilter() --\x3e\n\n\t\x3c!-- ko if: data.state() == 'loading' --\x3e\n\t\t\x3c!-- ko component: {name: 'list-state-loading-new', params:{itemType: 'taskList'}} --\x3e\x3c!-- /ko --\x3e\n\t\x3c!-- /ko --\x3e\n\t\x3c!-- ko if: data.state() == 'error' --\x3e\n\t\t\x3c!-- ko component: {name: 'list-state-error', params:{itemType: 'taskList', onTryAgainAction: data.TryLoadAgain, errorStatus: data.APIErrorStatus}} --\x3e\x3c!-- /ko --\x3e\n\t\x3c!-- /ko --\x3e\n\t\x3c!-- ko if: data.state() == 'blank'--\x3e\n\t\t\x3c!-- ko component: {name: 'list-state-blank', params:{itemType: 'taskList', showButton:false, title:app.tl('No Task Lists'), msg: canAddTaskLists() ? app.tl('Hey [_s], you don\\'t have any active task lists on this project. Click the button below to create a task list.', app.loggedInUser.firstName()) : ''}} --\x3e\x3c!-- /ko --\x3e\n\t\x3c!-- /ko --\x3e\n\t\x3c!-- ko if: data.state() == 'content' --\x3e\n\t\t\x3c!-- ko if: data.list().length > 0 --\x3e\n\t\t\t<div id=\"TaskContent\" class=\"tasklist tasklist-container\" style=\"margin-top:10px;\">\n\t\t\t\t\x3c!-- ko component: {name: 'section-taskList', params:{projectId: projectId(), taskList: taskList(), parentVM: $parent, mode:mode, isQuickView: isQuickView}} --\x3e\x3c!-- /ko --\x3e\n\t\t\t</div>\n\t\t\x3c!-- /ko --\x3e\n\t\x3c!-- /ko --\x3e\n\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: parentSection != null && parentSection.hasActiveFilter() && projectId() !== 0--\x3e\n\t\x3c!-- ko component: {\n\t\t\tname: \"section-filtered-tasks\",\n\t\t\tparams:{\n\t\t\t\tparentVM: parentSection,\n\t\t\t\ttaskListId: taskListId,\n\t\t\t\ttaskList: taskList,\n\t\t\t\tmode: 'taskList',\n\t\t\t\tprojectId: projectId(),\n\t\t\t\tnumberOfResults: numberOfResults\n\t\t\t}\n\t\t} --\x3e\n\t\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\n\x3c!-- IMPORTANT - Mark this template loaded --\x3e\n\x3c!-- ko if: $data.readyToShow != null && readyToShow --\x3e\n\t<div data-bind=\"template:{afterRender:function(){templateLoaded(true)}}\" class=\"hidden\"></div>\n\x3c!-- /ko --\x3e\n"},2936:function(t,e){t.exports='\x3c!-- ko if: $component.taskLoaded() --\x3e\n\t<div class="s-task-details" id="mainContent">\n\n\t\t\x3c!-- ko if: task.description() != \'\' --\x3e\n\t        <div class="s-task-details__task-description task-description">\n\t            <div class="mb--large" data-bind="marked: task.description, visible: displayDescription"></div>\n\t            <p>\n\t                <a href="javascript:;" class="text-decoration--underline" data-bind="click: OnToggleDisplayDescription">\n\t                    \x3c!-- ko if: displayDescription --\x3e\n\t                        {{ app.tl(\'Collapse Description\') }}{{{ app.localizationPreferences().ellipsis }}}\n\t                    \x3c!--/ko--\x3e\n\t                    \x3c!-- ko ifnot: displayDescription --\x3e\n\t                        {{ app.tl(\'View Description\') }}{{{ app.localizationPreferences().ellipsis }}}\n\t                    \x3c!--/ko--\x3e\n\t                </a>\n\t            </p>\n\t        </div>\n\t    \x3c!--/ko--\x3e\n\n\t\t<div class="section">\n\t\t\t\x3c!-- ko if: false --\x3e\n\t\t\t<div class="lightBoxTabs pt--medium">\n\t\t\t\t\x3c!-- ko component: { name: "ui-simple-tabs", params:{ tabs:tabs } } --\x3e\x3c!-- /ko --\x3e\n\t\t\t</div>\n\t\t\t\x3c!--/ko--\x3e\n\t\t\t<div class="px--xlarge">\n\t\t\t\t\x3c!-- ko component: { name: "widget-subTabs", params:{ subnav: tabs, useUrls: false, selectedItem: selectedTab } } --\x3e\x3c!-- /ko --\x3e\n\t\t\t</div>\n\n\t\t</div>\n\t</div>\n\n\t<div id="TaskContent" class="section">\n\t\t<div tabname="Files" class="tabPane" data-bind="visible:selectedTab() == \'files\'">\n\t\t\t<div class="taskDropOverlay is-drop-zone">\n\t\t\t\t<div class="blurHolder">\n\t\t\t\t\t\x3c!-- ko if: canViewMessagesAndFiles() --\x3e\n\t\t\t\t\t\t<div id="taskFiles" class="taskFiles ml--none mr--none">\n\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname:\'widget-file-attachment-inline\',\n\t\t\t\t\t\t\t\tparams:{\n\t\t\t\t\t\t\t\t\tshowOnLoad:true,\n\t\t\t\t\t\t\t\t\tnotifyKey: $component.uniqueId,\n\t\t\t\t\t\t\t\t\tparentVM: $component,\n\t\t\t\t\t\t\t\t\tattachedTo: task,\n\t\t\t\t\t\t\t\t\ttheme: \'tabbedWidget\'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t<div class="pl--medium">\n\t\t\t\t\t\t\t\t\x3c!-- ko component: {name: \'widget-task-files-list\', params:{task:task}} --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\x3c!-- ko if: task.attachmentsCount() == 0 --\x3e\n\t\t\t\t\t\t\t\t<p class="s-task-details__no-files-message" id="noFilesMessage">\n\t\t\t\t\t\t\t\t\t{{ app.tl(\'No files are attached to this task\') }}\n\t\t\t\t\t\t\t\t\t\x3c!-- ko if: task.canEdit() && $component.canAddFiles() --\x3e\n\t\t\t\t\t\t\t\t\t\t<span class="h-char-separator"></span>\n\t\t\t\t\t\t\t\t\t\t<a class="s-task-details__attach-files-link" href="javascript:;" data-bind="click:$component.OnAttachFilesToTask">\n\t\t\t\t\t\t\t\t\t\t\t{{ app.tl(\'Attach files to this task\') }}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\x3c!-- ko if: task.attachmentsCount() > 0 --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- ko if: canDownloadAllAttachments() --\x3e\n\t\t\t\t\t\t\t\t\t<p class="s-task-details__download">\n\t\t\t\t\t\t\t\t\t\t<a class="s-task-details__download-link" href="javascript:;" data-bind="click: OnDownloadAllAttachments">\n\t\t\t\t\t\t\t\t\t\t\t{{ app.tl(\'Download All\') }}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- ko if: task.canEdit() && $component.canAddFiles() --\x3e\n\t\t\t\t\t\t\t\t\t<p class="s-task-details__task-attachments" id="attachMore">\n\t\t\t\t\t\t\t\t\t\t<a class="s-task-details__attachments-link" href="javascript:;" data-bind="click: $component.OnAttachFilesToTask">\n\t\t\t\t\t\t\t\t\t\t\t{{ app.tl(\'Manage Task Attachments\') }}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t<div class="clearfix"></div>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div tabname="Time" class="tabPane mt--medium" data-bind="visible:selectedTab() == \'time\'">\n\t\t\t\x3c!-- ko if: canViewTimeLog --\x3e\n\t\t\t\t\x3c!-- ko component: { name:"section-project-task-time", params:{ task: task, projectId: task.projectId() } } --\x3e\x3c!-- /ko --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</div>\n\n\t\t<div tabname="Comments" class="tabPane" data-bind="visible:selectedTab() == \'comments\'">\n\t\t\t<div id="details-taskComments" class="s-task-details__comments" data-bind="css: {\'s-task-details__comments--quick-view\' : $component.isQuickView}">\n\t\t\t\t\x3c!-- ko if: app.featureFlip.check(\'newDashboard\') --\x3e\n\t\t\t\t\t<div class="lhs width--100">\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: \'section-comments-list\',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tfilterKey: \'itemComments\',\n\t\t\t\t\t\t\t\t\tshowCommentForm: true,\n\t\t\t\t\t\t\t\t\titemType: \'task\',\n\t\t\t\t\t\t\t\t\titemId: task.id(),\n\t\t\t\t\t\t\t\t\titem: task,\n\t\t\t\t\t\t\t\t\tprojectId: task.projectId,\n\t\t\t\t\t\t\t\t\tisQuickView: true,\n\t\t\t\t\t\t\t\t\treadOnly: readOnly()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</div>\n\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\x3c!-- ko ifnot: app.featureFlip.check(\'newDashboard\') --\x3e\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: "section-everything-comments",\n\t\t\t\t\t\t\tparams:{\n\t\t\t\t\t\t\t\ttype: \'tasks\',\n\t\t\t\t\t\t\t\titemId: taskId,\n\t\t\t\t\t\t\t\tshowBlankState: false,\n\t\t\t\t\t\t\t\tshowTitle: false,\n\t\t\t\t\t\t\t\tshowCommentForm: true,\n\t\t\t\t\t\t\t\tprojectId: $component.projectId,\n\t\t\t\t\t\t\t\treadOnly: readOnly()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\x3c!-- /ko --\x3e\n'},3081:function(t,e){t.exports='<ul class="tippedMenu" style="list-style:none;">\n\t<li>\n\t\t<a href="javascript:;" style="font-size:11px;" data-bind="click:followerStatus.bind(null, \'all\')">\n\t\t\t<i class="icon-ok icon-large" data-bind="style:{visibility:followerStatus() === \'all\'?\'visible\':\'hidden\'}"></i>\n\t\t\t{{app.tl(\'All notifications\')}}\n\t\t</a>\n\t</li>\n\t<li>\n\t\t<a href="javascript:;" style="font-size:11px;" data-bind="click:followerStatus.bind(null, \'changes\')">\n\t\t\t<i class="icon-ok icon-large" data-bind="style:{visibility:followerStatus() === \'changes\'?\'visible\':\'hidden\'}"></i>\n\t\t\t{{app.tl(\'Status changes\')}}\n\t\t</a>\n\t</li>\n\t<li>\n\t\t<a href="javascript:;" style="font-size:11px;" data-bind="click:followerStatus.bind(null, \'comments\')">\n\t\t\t<i class="icon-ok icon-large" data-bind="style:{visibility:followerStatus() === \'comments\'?\'visible\':\'hidden\'}"></i>\n\t\t\t{{app.tl(\'Comments\')}}\n\t\t</a>\n\t</li>\n\t<li>\n\t\t<a href="javascript:;" style="font-size:11px;" data-bind="click:followerStatus.bind(null, \'none\')">\n\t\t\t<i class="icon-ok icon-large" data-bind="style:{visibility:followerStatus() === \'none\'?\'visible\':\'hidden\'}"></i>\n\t\t\t{{app.tl("No Notifications")}} ({{app.tl(\'unfollow\')}})\n\t\t</a>\n\t</li>\n</ul>'},3082:function(t,e){t.exports='\x3c!-- ko if: peopleData.state() == \'content\' || !useRemoteData --\x3e\n\t<div class="u-followers-picker__search">\n\t\t\x3c!-- ko component: {\n\t\t\t\tname: \'widget-search-input\',\n\t\t\t\tparams: { value: searchText }\n\t\t\t} --\x3e\n\t\t\x3c!-- /ko --\x3e\n\t</div>\n\n\t<ul class="u-followers-picker__people" data-bind="foreach: filteredPeople">\n\t\t\x3c!-- ko if: id() > 0 --\x3e\n\t\t\t<li class="u-followers-picker__company">\n\t\t\t\t<div class="u-followers-picker__company-name">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{{name}}\n\t\t\t\t\t</span>\n\t\t\t\t\t\x3c!-- ko if: $component.searchText().trim() == "" --\x3e\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref="javascript:;"\n\t\t\t\t\t\t\tclass="closeOnScroll"\n\t\t\t\t\t\t\tdata-bind="tippedDelegate"\n\t\t\t\t\t\t\tdata-tipped-options="skin:\'light\', position:\'rightmiddle\', showOn:\'click\', hideOnClickOutside:true, hideOn:false"\n\t\t\t\t\t\t\tdata-content="{{$component.companyTippedTemplate}}">({{app.tl(\'Select All\')}})</a>\n\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t</div>\n\t\t\t</li>\n\n\t\t\t\x3c!-- ko foreach: people --\x3e\n\t\t\t\t\x3c!-- ko if: $component.searchText().trim() == \'\' || !$data.hiddenFromSearch --\x3e\n\t\t\t\t\t<li class="u-followers-picker__follower"\n\t\t\t\t\t\tdata-bind="click: $component.OnClickFollowerRow,\n\t\t\t\t\t\t\tcss: {\n\t\t\t\t\t\t\t\t\'u-followers-picker__follower--selected\': $component.isSelected(followerStatus())\n\t\t\t\t\t\t\t}">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass="u-followers-picker__follower-name"\n\t\t\t\t\t\t\tdata-bind="\n\t\t\t\t\t\t\t\tclickBubble: false,\n\t\t\t\t\t\t\t\tclick: $component.OnToggleFollowStatus">\n\t\t\t\t\t\t\t\x3c!-- ko if: receiveEmailsOnProject() == \'1\' --\x3e\n\t\t\t\t\t\t\t\t<i class="inline-check-icon fa"\n\t\t\t\t\t\t\t\t\tdata-bind="\n\t\t\t\t\t\t\t\t\t\tcss:{\n\t\t\t\t\t\t\t\t\t\t\t\'sel\': $component.isSelected(followerStatus()),\n\t\t\t\t\t\t\t\t\t\t\t\'fa-square-o\': !$component.isSelected(followerStatus()),\n\t\t\t\t\t\t\t\t\t\t\t\'fa-check-square\': $component.isSelected(followerStatus())}"></i>\n\t\t\t\t\t\t\t\t<img style="width: 14px; height: 14px; border-radius: 50%;"\n\t\t\t\t\t\t\t\t\tdata-bind="attr:{src: ko.unwrap(avatarUrl)}, event: {error:app.OnImageThumbLoadFail.bind($data,\'person\')}">\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t{{firstName}} {{lastName}}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: receiveEmailsOnProject() === \'0\' --\x3e\n\t\t\t\t\t\t\t\t<span data-bind="tippedDelegate" title="{{app.tl(\'[_s] does not receive emails from this project\', firstName())}}" class="noemails" style="cursor:not-allowed; background-image: none; padding-left: 5px; text-decoration:none !important;" data-tipped-options="showDelay: 400, behavior: \'hide\'">\n\t\t\t\t\t\t\t\t\t<i class="fa fa-times" style="color: #D36E69"></i>\n\t\t\t\t\t\t\t\t\t<img style="width: 14px; height: 14px; border-radius: 50%; margin-bottom: -2px;"  data-bind="attr:{src: ko.unwrap(avatarUrl)}, event: {error:app.OnImageThumbLoadFail.bind($data,\'person\')}">\n\t\t\t\t\t\t\t\t\t{{firstName}} {{lastName}}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\x3c!-- ko if: (followerStatus() !== \'none\' && followerStatus() !== \'\') && receiveEmailsOnProject() === \'1\' --\x3e\n\t\t\t\t\t\t\t<div class="u-followers-picker__follower-options">\n\t\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t\t<input type="radio" value="all" data-bind="checked: followerStatus" >\n\t\t\t\t\t\t\t\t\t{{app.tl(\'all notifications\')}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t\t<input type="radio" value="changes" data-bind="checked: followerStatus" >\n\t\t\t\t\t\t\t\t\t{{app.tl(\'only task changes\')}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t\t<input type="radio" value="comments" data-bind="checked: followerStatus" >\n\t\t\t\t\t\t\t\t\t{{app.tl(\'only comments\')}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</li>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\x3c!--/ko--\x3e\n\t\t\x3c!-- /ko --\x3e\n\t</ul>\n\x3c!-- /ko --\x3e\n\n\x3c!-- IMPORTANT - Mark this template loaded --\x3e\n\x3c!-- ko if: $data.readyToShow != null && readyToShow --\x3e\n    <div data-bind="template:{afterRender:function(){templateLoaded(true)}}" class="hidden"></div>\n\x3c!-- /ko --\x3e'},3145:function(t,e){t.exports='<ul class="tippedMenu">\n\t<li>\n\t\t<a data-bind="click: OnClickArchiveTasks" href="javascript:;">\n\t\t\t{{app.tl(\'Archive completed tasks\')}}\n\t\t</a>\n\t</li>\n</ul>'},3146:function(t,e){t.exports="<div class=\"w-personal-tasks\"\n\tdata-bind=\"css: {\n\t\t'w-personal-tasks--collapsed': isCollapsed\n\t}\">\n\t<div class=\"w-personal-tasks__header\"\n\t\tdata-bind=\"click: function(){ isCollapsed(false) }\">\n\n\t\t<label class=\"w-personal-tasks__title\">\n\t\t\t{{app.tl('Personal Tasks')}}\n\t\t</label>\n\n\t\t<div class=\"w-personal-tasks__actions\">\n\t\t\t<button class=\"btn btn-link color--inherit\"\n\t\t\t\tdata-bind=\"tippedDelegate\"\n\t\t\t\tdata-tipped-options=\"\n\t\t\t\t\tshowOn: 'click',\n\t\t\t\t\tskin: 'light',\n\t\t\t\t\thideAfter: 300,\n\t\t\t\t\thideOn: false,\n\t\t\t\t\tposition: 'bottommiddle'\"\n\t\t\t\tdata-content=\"{{actionsTippedContent}}\">\n\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\tname: 'ui-common-icon',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tname: 'ellipsis-h-regular',\n\t\t\t\t\t\t\tclass: 'color--inherit'\n\t\t\t\t\t\t}\n\t\t\t\t\t} --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</button>\n\t\t</div>\n\n\t\t\x3c!-- ko if: taskData.state() == 'loading' --\x3e\n\t\t\t<i class=\"fa fa-circle-o-notch fa-spin ml--medium\"></i>\n\t\t\x3c!-- /ko --\x3e\n\n\t\t\x3c!-- ko if: totalRecords() > 0 --\x3e\n\t\t\t<span class=\"w-personal-tasks__count\">\n\t\t\t\t{{totalRecords}}\n\t\t\t</span>\n\t\t\x3c!-- /ko --\x3e\n\n\t\t<button class=\"btn btn-link color--inherit ml--auto\"\n\t\t\tdata-bind=\"\n\t\t\t\tclickToggle: isCollapsed,\n\t\t\t\tclickBubble: false\">\n\t\t\t\x3c!-- ko if: isCollapsed --\x3e\n\t\t\t\t{{app.tl('Show')}}\n\t\t\t\t<span class=\"ml--small\">\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: 'ui-common-icon',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tname: 'angle-up-regular',\n\t\t\t\t\t\t\t\tclass: 'color--inherit'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</span>\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\x3c!-- ko ifnot: isCollapsed --\x3e\n\t\t\t\t{{app.tl('Hide')}}\n\t\t\t\t<span class=\"ml--small\">\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: 'ui-common-icon',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tname: 'angle-down-regular',\n\t\t\t\t\t\t\t\tclass: 'color--inherit'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</span>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</button>\n\t</div>\n\n\t<div class=\"w-personal-tasks__list\" data-bind=\"\n\t\t\tdragulaExtra: {\n\t\t\t\tdata: allTasks,\n\t\t\t\tuseSyncClone: true,\n\t\t\t\tgroup: 'personalTasks',\n\t\t\t\tisContainer: function(){\n\t\t\t\t\treturn (el.classList.contains('dragulaExtra') && el.classList.contains('w-personal-tasks__list'));\n\t\t\t\t}\n\t\t\t},\n\t\t\tcss: {\n\t\t\t\t'w-personal-tasks--empty': taskData.list().length == 0\n\t\t\t}\">\n\t\t<div class=\"w-personal-tasks__task\"\n\t\t\tdata-bind='\n\t\t\t\tcomponent: {\n\t\t\t\t\tname: \"widget-quick-task\",\n\t\t\t\t\tparams: {\n\t\t\t\t\t\ttask: $data,\n\t\t\t\t\t\tlist: $component.pendingTasks,\n\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\tcreated: $component.OnTaskCreated,\n\t\t\t\t\t\t\tpaste: $component.OnTaskPaste\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}'>\n\t\t</div>\n\t</div>\n\n\t<div class=\"w-personal-tasks__footer hidden\">\n\t\t<button class=\"btn btn-link color--inherit\"\n\t\t\tdata-bind=\"click: OnClickAddTask\">\n\t\t\t<span class=\"mr--small\">\n\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\tname: 'ui-common-icon',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tname: 'add-regular'\n\t\t\t\t\t\t}\n\t\t\t\t\t} --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</span>\n\t\t\t{{app.tl('Add')}}\n\t\t</button>\n\t</div>\n</div>\n\n\x3c!-- ko if: taskData.state() === 'content' && taskData.list().length > 0 && taskData.hasMoreRecords() --\x3e\n\t\x3c!-- ko component:{name:'widget-loadMore', params:{dataLoader:taskData, class:'section-tasks-list'}} --\x3e\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\x3c!-- IMPORTANT - Mark this template loaded --\x3e\n\x3c!-- ko if: $data.readyToShow != null && readyToShow --\x3e\n\t<div data-bind=\"template:{afterRender:function(){templateLoaded(true)}}\" class=\"hidden\"></div>\n\x3c!-- /ko --\x3e\n"},3175:function(t,e){t.exports='<div class="flex flex-column">\n    \x3c!-- ko foreach: selectTasksToPushOptions --\x3e\n        <label class="flex flex-items-center cursor--pointer mb--none p--medium">\n            <input type="radio"\n                class="my--none mr--small"\n                name="{{$component.tippedPushTaskId}}_pushOption"\n                value="{{id}}"\n                data-bind="checked: $component.selectTasksToPush">\n            {{text}}\n        </label>\n    \x3c!-- /ko --\x3e\n</div>'},3176:function(t,e){t.exports='<div data-bind="attr: {\'id\': \'quick-date-set\' + uniqueId }, style: { display: useTipped ? \'none\' : \'table-cell\' }" class="widget-quickDateSet">\n\t<div class="widget-quickDateSet--wrapper">\n        \x3c!-- ko if: milestoneTitle --\x3e\n            <div class="widget-quickDateSet--opts pt--none pb--small font-size--small">\n                <a target="_blank" data-bind="attr: { href: milestoneUrl }">\n                    \x3c!-- ko component: { name:"ui-milestone-icon" } --\x3e\x3c!-- /ko --\x3eMilestone: {{ milestoneTitle }}\n                </a>\n            </div>\n        \x3c!-- /ko --\x3e\n\n\t\t<div class="widget-quickDateSet--row widget-quickDateSet--top-labels">\n\t\t\t<div class="widget-quickDateSet--column">\n\t\t\t\t\t<p class="widget-quickDateSet--title subtle">\n\t\t\t\t\t\t\x3c!-- ko if: tmpStartDate() !== null --\x3e\n\t\t\t\t\t\t\t<strong class="line">{{app.tl(\'Start Date\')}}:</strong> <span class="line">{{startDateTitle}}</span>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\x3c!-- ko if: tmpStartDate() === null --\x3e\n\t\t\t\t\t\t\t<span>{{app.tl(\'No Start Date\')}}</span>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<span class="widget-quickDateSet--icon">&#8614;</span>\n\n\t\t\t<div class="widget-quickDateSet--column">\n\t\t\t\t<p class="widget-quickDateSet--title subtle">\n\t\t\t\t\t\x3c!-- ko if: tmpDueDate() !== null --\x3e\n\t\t\t\t\t\x3c!-- ko if: item.dueDateFromMilestone --\x3e\n\t\t\t\t\t\t\x3c!-- ko component: { name:"ui-milestone-icon" } --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t<strong class="line">{{app.tl(\'Due Date\')}}:</strong> <span class="line">{{dueDateTitle}}</span>\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\x3c!-- ko if: tmpDueDate() === null --\x3e\n\t\t\t\t\t<span>{{app.tl(\'No Due Date\')}}</span>\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="widget-quickDateSet--row">\n\t\t\t<div class="widget-quickDateSet--left widget-quickDateSet--column">\n\t\t\t\t<div id="{{startPickerId}}" class="widget-quickDateSet--rome" data-bind="rome: { time: false, weekdayFormat: \'short\', dayFormat: \'D\', weekStart: (app.loggedInUser.localization.startOnSunday() ? 0 : 1), inputFormat: \'YYYY-MM-DD\', initialValue: originalStartDate, koObservable: tmpStartDate, pairedWith:{type: \'due\', id: duePickerId, val:tmpDueDate} }"></div>\n\n\t\t\t\t<div class="widget-quickDateSet--opts">\n\t\t\t\t\t<span><a href="javascript:void(0)" data-bind="click: setStartDateToday">{{app.tl(\'Today\')}}</a></span>\n\t\t\t\t\t<span>| <a href="javascript:void(0)" data-bind="click: addDaysToStartDate.bind($data, 1)">{{app.tl(\'[_s] Day\',\'+1\')}}</a></span>\n\t\t\t\t\t<span>| <a href="javascript:void(0)" data-bind="click: addDaysToStartDate.bind($data, 7)">{{app.tl(\'[_s] Days\',\'+7\')}}</a></span>\n\t\t\t\t\t<span data-bind="visible: getDaysToMonIfSoon() !== 0">| <a href="javascript:void(0)" data-bind="click: setStartDateToMonday.bind($data)">{{app.tl(\'Mon\')}}</a></span>\n\t\t\t\t\t<span data-bind="visible: tmpStartDate() !== null">| <a href="javascript:void(0)" data-bind="click: clearStartDate">{{app.tl(\'No Date\')}}</a></span>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\n\n\t\t\t<div class="widget-quickDateSet--right widget-quickDateSet--column">\n\n\n\t\t\t\t<div id="{{duePickerId}}" class="widget-quickDateSet--rome" data-bind="rome: { time: false, weekdayFormat: \'short\', dayFormat: \'D\', weekStart: (app.loggedInUser.localization.startOnSunday() ? 0 : 1), inputFormat: \'YYYY-MM-DD\', initialValue: originalDueDate, koObservable: tmpDueDate, pairedWith:{type: \'start\', id: startPickerId, val:tmpStartDate} }"></div>\n\n\t\t\t\t<div class="widget-quickDateSet--opts">\n\t\t\t\t\t<span><a href="javascript:void(0)" data-bind="click: setDueDateToday">{{app.tl(\'Today\')}}</a></span>\n\t\t\t\t\t<span>| <a href="javascript:void(0)" data-bind="click: addDaysToDueDate.bind($data, 1)">{{app.tl(\'[_s] Day\',\'+1\')}}</a></span>\n\t\t\t\t\t<span>| <a href="javascript:void(0)" data-bind="click: addDaysToDueDate.bind($data, 7)">{{app.tl(\'[_s] Days\',\'+7\')}}</a></span>\n\t\t\t\t\t<span data-bind="visible: getDaysToMonIfSoon() !== 0">| <a href="javascript:void(0)" data-bind="click: setDueDateToMonday.bind($data)">{{app.tl(\'Mon\')}}</a></span>\n\t\t\t\t\t<span data-bind="visible: tmpDueDate() !== null">| <a href="javascript:void(0)" data-bind="click: clearDueDate">{{app.tl(\'No Date\')}}</a></span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\n\t\t<div class="widget-quickDateSet--row">\n\t\t\t<div class="widget-quickDateSet--deps-wrapper">\n\t\t\t\t\x3c!-- ko if: showDateOptions --\x3e\n\t\t\t\t\t<div class="widget-quickDateSet--deps">\n\t\t\t\t\t\t<div class="color--muted text--center widget-quickDateSet--left">\n\t\t\t\t\t\t\t{{languageIsEnglish ? \'Adjust this task\' : app.tl(\'Push changes to\')+\':\'}}\n\t\t\t\t\t\t\t<a id="{{tippedPushTaskId}}"\n\t\t\t\t\t\t\t\thref="javascript:;"\n\t\t\t\t\t\t\t\tclass="blue2 tipped-click footer-tipped-el"\n\t\t\t\t\t\t\t\tdata-bind="tippedDelegate"\n\t\t\t\t\t\t\t\tdata-content="{{pushTippedContent}}"\n\t\t\t\t\t\t\t\tdata-tipped-parent="{{tippedParentId}}"\n\t\t\t\t\t\t\t\tdata-tipped-options="showOn:\'click\', skin:\'light\', hideOthers:false, hideOn: false, hideAfter: 300, padding: 0">\n\t\t\t\t\t\t\t\t{{selectTasksToPushText}}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t</div>\n\t\t</div>\n\t\t<span data-bind="template: { afterRender: function(){ init() } }"></span>\n\t</div>\n</div>\n'},3178:function(t,e){t.exports='<ul class="tippedMenu">\n\t<li>\n\t\t<a data-bind="click: task.Move" href="javascript:;">\n\t\t\t{{app.tl(\'Move/copy to project\')}}\n\t\t</a>\n\t</li>\n\t<li>\n\t\t<a data-bind="click: task.Archive" href="javascript:;">\n\t\t\t{{app.tl(\'Archive\')}}\n\t\t</a>\n\t</li>\n\t<li>\n\t\t<a data-bind="click: task.Delete" href="javascript:;">\n\t\t\t{{app.tl(\'Delete\')}}\n\t\t</a>\n\t</li>\n</ul>'},3179:function(t,e){t.exports="\x3c!-- ko if: task.isActive --\x3e\n\t<div class=\"w-quick-task\"\n\t\tdata-bind=\"\n\t\t\tclick: OnClickTaskName,\n\t\t\tcss:{\n\t\t\t\t'w-quick-task--is-completed': task.status() == 'completed' && !task.failedAPIAttempt(),\n\t\t\t\t'w-quick-task--is-editing': task.isEditMode,\n\t\t\t\t'w-quick-task--is-temporary': task.isTemporaryTask,\n\t\t\t\t'w-quick-task--has-error': task.failedAPIAttempt\n\t\t\t},\n\t\t\ttemplate: {\n\t\t\t\tafterRender: OnRendered\n\t\t\t}\">\n\n\t\t<div class=\"w-quick-task__drag\">\n\t\t\t\x3c!-- ko component: {\n\t\t\t\t\tname: 'ui-common-icon',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tname: 'draghandle-tw-solid',\n\t\t\t\t\t\tsize: '1x'\n\t\t\t\t\t}\n\t\t\t\t} --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</div>\n\n\t\t<div class=\"w-quick-task__check\"\n\t\t\tdata-bind=\"\n\t\t\t\tclick: task.Toggle,\n\t\t\t\tclickBubble: false\">\n\n\t\t\t\x3c!-- ko if: task.failedAPIAttempt --\x3e\n\t\t\t\t<i class=\"fa fa-repeat\"\n\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\tdata-bind=\"\n\t\t\t\t\t\tcss: {\n\t\t\t\t\t\t\t'fa-spin': task.isRetryingFailedAPIAttempt\n\t\t\t\t\t\t}\">\n\t\t\t\t</i>\n\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\x3c!-- ko ifnot: task.failedAPIAttempt --\x3e\n\t\t\t\t\x3c!-- ko if: task.isUpdating --\x3e\n\t\t\t\t\t<i class=\"fa fa-spinner fa-spin\" aria-hidden=\"true\"></i>\n\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\x3c!-- ko ifnot: task.isUpdating --\x3e\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: 'ui-common-icon',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tname: task.isTemporaryTask() ? 'add-regular' : 'check-solid',\n\t\t\t\t\t\t\t\tclass: 'color--inherit'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\x3c!--/ko--\x3e\n\t\t</div>\n\n\t\t<div class=\"w-quick-task__contents\">\n\t\t\t\x3c!-- ko component: {\n\t\t\t\t\tname: 'widget-task-input',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tisEnabled: inputIsEnabled,\n\t\t\t\t\t\ttask: task,\n\t\t\t\t\t\tautoFocus: false,\n\t\t\t\t\t\titemType: 'task',\n\t\t\t\t\t\titemId: task.id,\n\t\t\t\t\t\tshowAssignees: false,\n\t\t\t\t\t\tshowTags: false,\n\t\t\t\t\t\tshowEstimates: false,\n\t\t\t\t\t\tshowDates: true,\n\t\t\t\t\t\tshowDueDates: true,\n\t\t\t\t\t\tshowStartDates: false,\n\t\t\t\t\t\tisFocused: isFocusedOnInput,\n\t\t\t\t\t\tproperties: task.GetAutocompleteProperties(),\n\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\tinput: OnKeyboardInput,\n\t\t\t\t\t\t\tsubmit: OnSubmit,\n\t\t\t\t\t\t\tblur: OnBlur,\n\t\t\t\t\t\t\tcancel: OnClickCancel,\n\t\t\t\t\t\t\tchange: OnAutoCompleteChange,\n\t\t\t\t\t\t\tfocus: OnAutoCompleteFocus,\n\t\t\t\t\t\t\tpaste: OnPaste\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} --\x3e\n\t\t\t\x3c!--/ko--\x3e\n\t\t</div>\n\n\t\t<div class=\"w-quick-task__actions\">\n\t\t\t<button class=\"btn btn-link\"\n\t\t\t\tdata-bind=\"tippedDelegate\"\n\t\t\t\tdata-tipped-options=\"\n\t\t\t\t\tshowOn: 'click',\n\t\t\t\t\tskin: 'light',\n\t\t\t\t\thideAfter: 300,\n\t\t\t\t\thideOn: false,\n\t\t\t\t\tposition: 'bottommiddle'\"\n\t\t\t\tdata-content=\"{{actionsTippedContent}}\">\n\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\tname: 'ui-common-icon',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tname: 'ellipsis-h-regular',\n\t\t\t\t\t\t\tclass: 'color--inherit'\n\t\t\t\t\t\t}\n\t\t\t\t\t} --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</button>\n\t\t</div>\n\t</div>\n\x3c!-- /ko --\x3e\n"},3223:function(t,e){t.exports="\x3c!-- ko if: mode == 'icon' --\x3e\n<a\n\thref=\"javascript:;\"\n\tclass=\"w-task-row__option w-task-row__option--active icon thd\"\n\taria-label=\"Task Dependents\"\n    data-tipped-options=\"skin: 'light',\n    hideOthers: true,\n    hideOnClickOutside: true,\n    showOn: 'mouseover',\n    hideOn: false,\n    showDelay: 300,\n\t\thideAfter: 300\"\n    data-bind=\"\n      attr: {\n        'data-component': JSON.stringify({\n          name: 'widget-task-related-tasks',\n          params: {\n            taskId: ko.unwrap(task.id),\n            parentTaskId: ko.unwrap(task.parentTaskId),\n            type: 'dependents'\n          }\n        })\n      },\n      tippedDelegate\"\n    style=\"width: 16px; height: 16px; display: inline-block;\">\n</a>\n\x3c!--/ko--\x3e\n\x3c!-- ko if: mode == 'link' --\x3e\n\t\x3c!-- ko if: task.numDependents() > 0 && task.status() != 'complete' --\x3e\n\t\t<a class=\"subtask-link flex flex-items-center\" data-tipped-options=\"skin: 'light', hideOthers: true, hideOnClickOutside: true, showOn: 'mouseover', hideOn: false, showDelay: 300, hideAfter: 300\" data-bind=\" attr: { 'data-component': JSON.stringify({ name: 'widget-task-related-tasks', params: { taskId: task.id(), parentTaskId: task.parentTaskId(), type: 'parentTask' } }) }, tippedDelegate\">\n\t\t\t<span class=\"label label-default font-size--tiny mr--small\">{{app.tl('Subtask')}}</span>\n\t\t</a>\n\t\x3c!--/ko--\x3e\n\t\x3c!-- ko if: task.numDependents() == 0 || task.status() == 'complete' --\x3e\n\t\t<a class=\"subtask-link flex flex-items-center\">\n\t\t\t<span class=\"label label-default font-size--tiny mr--small\">{{app.tl('Subtask')}}</span>\n\t\t</a>\n\t\x3c!--/ko--\x3e\n\x3c!--/ko--\x3e"},3224:function(t,e){t.exports="<a href=\"javascript:;\" class=\"option-control taskSettings w-task-row__dropdown\" aria-label=\"Task Settings\" data-bind=\"attr:{id:'target_'+uniqueId}, tippedDelegate:{ afterHide: function(i,e){e.blur();} }\"\n\tdata-tipped-options=\"skin:'light',\n\t\t\t\t\t\thideOthers: true,\n\t\t\t\t\t\thideOnClickOutside: true,\n\t\t\t\t\t\tshowOn: 'click',\n\t\t\t\t\t\thideOn: 'click',\n\t\t\t\t\t\tpadding: false,\n\t\t\t\t\t\tshowDelay: 0,\n                        hideAfter: 0,\n                        fadeIn: 120,\n                        fadeOut: 0,\n\t\t\t\t\t\tposition: {\n\t\t\t\t\t\t    target: 'bottom',\n\t\t\t\t\t\t    tooltip: 'topleft'\n\t\t\t\t\t\t},\n                     \thideOthers: true\"\n\t data-content=\"{{tippedContent}}\">\n\t\x3c!-- ko component: {\n\t\t\tname: 'ui-common-icon',\n\t\t\tparams: {\n\t\t\t\tname: 'ellipsis-h-regular'\n\t\t\t}\n\t\t} --\x3e\n\t\x3c!-- /ko --\x3e\n</a>\n"},3225:function(t,e){t.exports='<div class="w-options-list w-options-list--tipped">\n\t<ul class="w-options-list__list">\n\t\t\x3c!-- ko ifnot: app.currentRoute().page == "project" && app.currentRoute().projectTab == "tasks" && app.currentRoute().itemId == task.id()  --\x3e\n\t\t\t\x3c!-- ko ifnot: isQuickView  --\x3e\n\t\t\t\t<li>\n\t\t\t\t\t<a class="w-options-list__item" href="javascript:;" data-bind="click: OnClickViewTask">\n\t\t\t\t\t\t<i class="fa fa-fw fa-search-plus w-options-list__icon h-pointer-e--none"></i>\n\t\t\t\t\t\t<span class="w-options-list__text">{{app.tl(\'View\')}}</span>\n\t\t\t\t\t\t<span class="h-keyboard-shortcut__key">V</span>\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t\x3c!-- /ko --\x3e\n\t\t\x3c!-- ko if: task.status() !== \'completed\' && task.canEdit() --\x3e\n\t\t\t<li data-bind="click: OnClickEditTask">\n\t\t\t\t<a class="w-options-list__item" href="javascript:;">\n\t\t\t\t\t<i class="fa fa-fw fa-pencil w-options-list__icon"></i>\n\t\t\t\t\t<span class="w-options-list__text">{{app.tl(\'Edit\')}}</span>\n\t\t\t\t\t<span class="h-keyboard-shortcut__key">E</span>\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t\x3c!--/ko--\x3e\n\t\t\x3c!-- ko if: task.canEdit() --\x3e\n\t\t\t<li data-bind="click: OnClickMoveOrCopy">\n\t\t\t\t<a class="w-options-list__item" href="javascript:;">\n\t\t\t\t\t<i class="fa fa-fw fa-copy w-options-list__icon"></i>\n\t\t\t\t\t<span class="w-options-list__text">{{app.tl(\'Move or Copy\')}}</span>\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t\x3c!--/ko--\x3e\n\t\t\x3c!-- ko if: task.canEdit() --\x3e\n\t\t\t<li data-bind="click: OnClickDeleteTask">\n\t\t\t\t<a class="w-options-list__item" href="javascript:;">\n\t\t\t\t\t<i class="fa fa-fw fa-trash w-options-list__icon"></i>\n\t\t\t\t\t<span class="w-options-list__text">{{app.tl(\'Delete\')}}</span>\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t\x3c!--/ko--\x3e\n\t\t\x3c!-- ko if: task.canLogTime() && !isProjectTemplate() --\x3e\n\t\t\t<li data-bind="click: OnClickLogTime">\n\t\t\t\t<a class="w-options-list__item" href="javascript:;">\n\t\t\t\t\t<i class="fa fa-fw fa-clock-o w-options-list__icon"></i>\n\t\t\t\t\t<span class="w-options-list__text">{{app.tl(\'Log Time\')}}</span>\n\t\t\t\t\t<span class="h-keyboard-shortcut__key">T</span>\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t\x3c!--/ko--\x3e\n\t\t\x3c!-- ko ifnot: isTemplateTask || isProjectTemplate() --\x3e\n\t\t\t<li data-bind="click: OnClickViewActivity">\n\t\t\t\t<a class="w-options-list__item" href="javascript:;">\n\t\t\t\t\t<i class="fa fa-fw fa-bolt w-options-list__icon"></i>\n\t\t\t\t\t<span class="w-options-list__text">{{app.tl(\'View History\')}}</span>\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t\x3c!-- /ko --\x3e\n\t\t\x3c!-- ko if: canStartTimer() && !isProjectTemplate() --\x3e\n\t\t\t<li data-bind="click: OnClickStartTimer">\n\t\t\t\t<a class="w-options-list__item" href="javascript:;">\n\t\t\t\t\t\x3c!-- ko if: activeTaskTimer --\x3e\n\t\t\t\t\t\t\x3c!-- ko if: activeTaskTimer().running --\x3e\n\t\t\t\t\t\t\t<i class="fa fa-fw fa-square w-options-list__icon"></i>\n\t\t\t\t\t\t\t<span class="w-options-list__text">{{app.tl(\'Stop Timer\')}}</span>\n\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\x3c!-- ko ifnot: activeTaskTimer().running --\x3e\n\t\t\t\t\t\t\t<i class="fa fa-fw fa-play w-options-list__icon"></i>\n\t\t\t\t\t\t\t<span class="w-options-list__text">{{app.tl(\'Resume Timer\')}}</span>\n\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\x3c!-- ko ifnot: activeTaskTimer --\x3e\n\t\t\t\t\t\t<i class="fa fa-fw fa-play w-options-list__icon"></i>\n\t\t\t\t\t\t<span class="w-options-list__text">{{app.tl(\'Start Timer\')}}</span>\n\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t<span class="h-keyboard-shortcut__key">S</span>\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t\x3c!--/ko--\x3e\n\t\t\x3c!-- ko if: canAddComment() && !(isProjectTemplate() && !app.loggedInUser.permissions.canManageProjectTemplates()) --\x3e\n\t\t\t<li data-bind="click: OnClickAddComment">\n\t\t\t\t<a class="w-options-list__item" href="javascript:;">\n\t\t\t\t\t<i class="fa fa-fw fa-comment w-options-list__icon"></i>\n\t\t\t\t\t<span class="w-options-list__text">{{app.tl(\'Add Comment\')}}</span>\n\t\t\t\t\t<span class="h-keyboard-shortcut__key">N</span>\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t\x3c!--/ko--\x3e\n\t\t\x3c!-- ko if: isTemplateTask --\x3e\n\t\t\t\x3c!-- ko if: task.status() !== \'completed\' && task.numActiveSubTasks() > 0 && task.canEdit() --\x3e\n\t\t\t\t<li data-bind="click: OnClickBulkEditSubtasks">\n\t\t\t\t\t<a class="w-options-list__item" href="javascript:;">\n\t\t\t\t\t\t<i class="fa fa-fw fa-pencil-square w-options-list__icon"></i>\n\t\t\t\t\t\t<span class="w-options-list__text">{{app.tl(\'Bulk Edit Subtasks\')}}</span>\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t\x3c!--/ko--\x3e\n\t\t\x3c!--/ko--\x3e\n\t\t\x3c!-- ko if: !(isProjectTemplate() && !app.loggedInUser.permissions.canManageProjectTemplates()) --\x3e\n\t\t\t<li data-bind="visible: (isProjectTemplate() || !isTemplateTask) && !showAdvancedOpts(), click: OnClickToggleAdvancedOptions">\n\t\t\t\t<a class="w-options-list__item" href="javascript:;">\n\t\t\t\t\t<i class="fa w-options-list__icon"></i>\n\t\t\t\t\t<span class="w-options-list__show-hide">{{app.tl(\'Advanced\')}} &raquo;</span>\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t\x3c!-- /ko --\x3e\n\t</ul>\n\n\t\x3c!-- ko if: isProjectTemplate() || !isTemplateTask --\x3e\n\t\t<div data-bind="visible: showAdvancedOpts">\n\t\t\t<ul class="w-options-list__list w-options-list__list--advanced-menu" data-bind="fadeVisible: showAdvancedOpts">\n\n\t\t\t\t\x3c!-- ko if: task.status() !== \'completed\' && task.numActiveSubTasks() > 0 && task.canEdit() --\x3e\n\t\t\t\t\t<li data-bind="click: OnClickBulkEditSubtasks">\n\t\t\t\t\t\t<a class="w-options-list__item" href="javascript:;">\n\t\t\t\t\t\t\t<i class="fa fa-fw fa-pencil-square w-options-list__icon"></i>\n\t\t\t\t\t\t\t<span class="w-options-list__text">{{app.tl(\'Bulk Edit Subtasks\')}}</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\x3c!-- ko if: canAddSubtasks --\x3e\n\t\t\t\t\t<li data-bind="click: OnClickQuicklyAddSubtasks">\n\t\t\t\t\t\t<a class="w-options-list__item" href="javascript:;">\n\t\t\t\t\t\t\t<i class="fa fa-fw fa-plus-circle w-options-list__icon"></i>\n\t\t\t\t\t\t\t<span class="w-options-list__text">{{app.tl(\'Quickly Add Subtasks\')}}</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\n\t\t\t\t\t\x3c!-- ko if: !isProjectTemplate() --\x3e\n\t\t\t\t\t\t<li data-bind="click: OnClickAddSubtasksFromTemplate">\n\t\t\t\t\t\t\t<a class="w-options-list__item" href="javascript:;">\n\t\t\t\t\t\t\t\t<i class="fa fa-fw fa-plus-circle w-options-list__icon"></i>\n\t\t\t\t\t\t\t\t<span class="w-options-list__text">{{app.tl(\'Add Subtasks From Template\')}}</span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\x3c!-- ko if: !isProjectTemplate() && task.responsiblePartyIds && task.responsiblePartyIds() != undefined && task.responsiblePartyIds().length > 0 && task.status() !== \'completed\' --\x3e\n\t\t\t\t\t<li data-bind="click: OnClickSendReminder">\n\t\t\t\t\t\t<a class="w-options-list__item" href="javascript:;">\n\t\t\t\t\t\t\t<i class="fa fa-fw fa-envelope w-options-list__icon"></i>\n\t\t\t\t\t\t\t<span class="w-options-list__text">{{app.tl(\'Send Reminder Now\')}}</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\x3c!-- ko if: task.status() !== \'completed\' && !isProjectTemplate() --\x3e\n\t\t\t\t\t<li data-bind="click: OnClickShowReminders">\n\t\t\t\t\t\t<a class="w-options-list__item" href="javascript:;">\n\t\t\t\t\t\t\t<i class="fa fa-fw fa-bell w-options-list__icon"></i>\n\t\t\t\t\t\t\t<span class="w-options-list__text">{{app.tl(\'Scheduled Reminders\')}}</span>\n\t\t\t\t\t\t\t<span class="h-keyboard-shortcut__key">R</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\x3c!-- ko if: task.canEdit() --\x3e\n\t\t\t\t\t\x3c!-- ko if: task.status() !== \'completed\' && canAddFiles() --\x3e\n\t\t\t\t\t\t<li data-bind="click: OnClickAttachFiles">\n\t\t\t\t\t\t\t<a class="w-options-list__item" href="javascript:;">\n\t\t\t\t\t\t\t\t<i class="fa fa-fw fa-paperclip w-options-list__icon"></i>\n\t\t\t\t\t\t\t\t<span class="w-options-list__text">{{app.tl(\'Attach Files\')}}</span>\n\t\t\t\t\t\t\t\t<span class="h-keyboard-shortcut__key">F</span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t<li data-bind="click: OnClickDuplicate">\n\t\t\t\t\t\t<a class="w-options-list__item" href="javascript:;">\n\t\t\t\t\t\t\t<i class="fa fa-fw fa-clone w-options-list__icon"></i>\n\t\t\t\t\t\t\t<span class="w-options-list__text">{{app.tl(\'Duplicate\')}}</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li data-bind="click: OnClickMakeDefault">\n\t\t\t\t\t\t<a class="w-options-list__item" href="javascript:;">\n\t\t\t\t\t\t\t<i class="fa fa-fw fa-floppy-o w-options-list__icon"></i>\n\t\t\t\t\t\t\t<span class="w-options-list__text">{{app.tl(\'Use as Task Default\')}}</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t\x3c!-- ko if: isAdmin() || isProjectAdmin() --\x3e\n\t\t\t\t\t\t<li data-bind="click: OnClickEditProperties">\n\t\t\t\t\t\t\t<a class="w-options-list__item" href="javascript:;">\n\t\t\t\t\t\t\t\t<i class="fa fa-fw fa-info w-options-list__icon"></i>\n\t\t\t\t\t\t\t\t<span class="w-options-list__text">{{app.tl(\'Properties\')}}</span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\x3c!-- ko if: !(isProjectTemplate() && !app.loggedInUser.permissions.canManageProjectTemplates()) --\x3e\n\t\t\t\t\t<li data-bind="click: OnClickToggleAdvancedOptions">\n\t\t\t\t\t\t<a class="w-options-list__item" href="javascript:;">\n\t\t\t\t\t\t\t<i class="fa w-options-list__icon"></i>\n\t\t\t\t\t\t\t<span class="w-options-list__show-hide">&laquo; {{app.tl(\'Less\')}}</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</ul>\n\t\t</div>\n\t\x3c!-- /ko --\x3e\n</div>\n'},3226:function(t,e){t.exports='\x3c!-- if estimated minutes are 0 and task has no subtasks, don\'t bother showing the tipped instance --\x3e\n\x3c!-- ko if: task.estimatedMinutes() == 0 && task.numActiveSubTasks() == 0 --\x3e\n    <a href="javascript:;" class="task-estimatedTime hideOnCompletion tipped" data-bind="click:OnClickAddTimeEstimate,attr:{\'data-tipped\':app.tl(\'Add Estimate\')}">+</a>\n\x3c!--/ko--\x3e\n\x3c!-- ko if: task.estimatedMinutes() == 0 && task.numActiveSubTasks() > 0 --\x3e\n    <a href="javascript:;" class="task-estimatedTime hideOnCompletion" data-bind="click:OnClickAddTimeEstimate, attr:{id:\'target_\'+uniqueId}, event:{\'mouseover\': OnHover}">+</a>\n\x3c!--/ko--\x3e\n\x3c!-- ko if: task.estimatedMinutes() > 0 || task.numActiveSubTasks() > 0 --\x3e\n    <span class="task-estimatedTimeValue" data-bind="css:{ noborder:(task.status() === \'completed\')?true:false}">\n        \x3c!-- ko if: task.status() !== \'completed\' --\x3e\n            <a href="javascript:;" data-bind="click:OnClickAddTimeEstimate, event:{\'mouseover\': OnHover}, attr:{id:\'target_\'+uniqueId}">\n                \x3c!-- ko if: Math.floor(task.estimatedMinutes() / 60) > 0 --\x3e{{Math.floor(task.estimatedMinutes() / 60)}} {{app.tl(\'hours\')}}\x3c!-- /ko --\x3e\n                \x3c!-- ko if: task.estimatedMinutes() % 60 > 0 --\x3e{{task.estimatedMinutes() % 60}} {{app.tl(\'mins\')}}\x3c!-- /ko --\x3e\n            </a>\n        \x3c!-- /ko --\x3e\n    </span>\n\x3c!--/ko--\x3e\n\n<div style="display:none">\n    <div data-bind="attr:{id:uniqueId}">\n        <strong>{{app.tl(\'Task Estimate\')}}:</strong> {{task.estimatedMinutes()}}\n        <hr>\n        <strong>{{app.tl(\'Subtasks Estimate\')}}:</strong> {{totalSubTasksTime}}\n        <hr>\n        <strong>{{app.tl(\'Total Time Estimate\')}}:</strong> {{totalTime}}\n    </div>\n</div>\n<div style="display:none;" data-bind="onRendered: OnRendered"></div>'},3227:function(t,e){t.exports="\x3c!-- ko component: {name: 'section-files-list', params:{parent:$data, filteredItems:data.list, fileActionTheme: 'taskList', listContainer: $data.task, dragEnabled: false, hasLoaded: hasLoaded }} --\x3e\x3c!-- /ko --\x3e\n"},3228:function(t,e){t.exports="\x3c!-- ko template: { name: 'widget-task-harvest-timer', afterRender:function(elms){harvest.addTimerHandlers(elms) } } --\x3e\x3c!-- /ko --\x3e"},3231:function(t,e){t.exports='\x3c!-- ko if: hasColumns() && task.cardId() > 0 --\x3e\n\t\x3c!-- ko component: { name:"widget-board-column-label", params:{ item: task } } --\x3e\x3c!-- /ko --\x3e\n\x3c!--/ko--\x3e\n\n\x3c!-- ko if: (task.startDate() != "" || task.dueDate() != "") && task.status() != \'completed\' --\x3e\n\t<div class="w-task-row__option w-task-row__option--date w-task-row__option--active task-dueDate removeOnCompletion"\n\t\taria-label="Task Dates set"\n\t\tdata-tipped-options="isTippedParent:true, skin:\'light\', hideOthers:true, hideOn: false, hideAfter: 300, showDelay: 800"\n\t\tdata-bind="\n\t\t\tstyle:{\n\t\t\t\t\'cursor\': (mode() == \'template\' ? \'text\' : \'pointer\')\n\t\t\t},\n\t\t\tattr: {\'data-component\': JSON.stringify({\n\t\t\t\tname: \'widget-tipped-task-dates\',\n\t\t\t\tparams: {\n\t\t\t\t\tid: task.id(),\n\t\t\t\t\ttaskListId: task.taskListId(),\n\t\t\t\t\ttippedParentId: task.id() + \'_taskUtilityTip-date_on\'+taskUniqueId\n\t\t\t\t}}),\n\t\t\t\tid: task.id() + \'_taskUtilityTip-date_on\'+taskUniqueId\n\t\t\t},\n\t\t\ttippedDelegate:{\n\t\t\t\tonShow: taskRowOnShow,\n\t\t\t\tafterHide: taskRowAfterHide,\n\t\t\t\tenabled: (task.canEdit() && mode() != \'template\')\n\t\t\t}">\n\t\t(\n\t\t\x3c!-- ko if: task.startDate() != \'\'  --\x3e\n\t\t\t<span class="due-label start">\n\t\t\t\t\x3c!-- ko if: app.loggedInUser.localization.languageCode() === \'EN\' --\x3e\n\t\t\t\t\t\x3c!-- ko if: task.startDateAsMoment() < moment() && mode() != \'template\' --\x3e\n\t\t\t\t\t\t{{app.tl(\'Started\')}}\n\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\x3c!-- ko if: task.startDateAsMoment() > moment() && mode() != \'template\' --\x3e\n\t\t\t\t\t\t{{app.tl(\'Starts\')}}\n\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\x3c!-- ko if: mode() == \'template\' --\x3e\n\t\t\t\t\t{{app.tl(\'Start\')}}:\n\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\x3c!-- ko ifnot: app.loggedInUser.localization.languageCode() === \'EN\' --\x3e{{app.tl(\'Start\')}}:\x3c!-- /ko --\x3e\n\t\t\t\t\x3c!-- ko if: mode() != \'template\' --\x3e\n\t\t\t\t\t<time data-bind="attr:{ datetime:task.startDateAsMoment().format(\'YYYY-MM-DD\')}">\n\t\t\t\t\t\t{{$component.getDateInterval(\'start\')}}\n\t\t\t\t\t</time>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\x3c!-- ko if: mode() == \'template\' --\x3e\n\t\t\t\t\t{{ $component.getTemplateRelDate(task.startDateAsMoment()) }}\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</span>\n\t\t\x3c!--/ko--\x3e\n\t\t\x3c!-- ko if: task.startDate()!=\'\'  && task.dueDate()!=\'\' --\x3e\n\t\t\t<span class="task-dueDate__separator">\n\t\t\t\t&#8614;\n\t\t\t</span>\n\t\t\x3c!--/ko--\x3e\n\t\t\x3c!-- ko if: task.dueDate()!=\'\' --\x3e\n\t\t\t\x3c!-- ko if: mode() != \'template\' --\x3e\n\t\t\t\t<span class="due-label due-{{$component.getDueDateClass()}}">\n\t\t\t\t\t\x3c!-- ko if: task.dueDateFromMilestone --\x3e\n\t\t\t\t\t\t\x3c!-- ko component: { name:"ui-milestone-icon" } --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t{{app.tl(\'Due\')}}\x3c!-- ko if: app.loggedInUser.localization.languageCode() !== \'EN\' --\x3e:\x3c!-- /ko --\x3e\n\t\t\t\t\t<time data-bind="attr:{datetime:task.dueDateAsMoment().format(\'YYYY-MM-DD\')}">\n\t\t\t\t\t\t{{$component.getDateInterval(\'due\')}}\n\t\t\t\t\t</time>\n\t\t\t\t</span>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\x3c!-- ko if: mode() == \'template\' --\x3e\n\t\t\t\t<span class="due-label">\n\t\t\t\t\t\x3c!-- ko if: task.dueDateFromMilestone --\x3e\n\t\t\t\t\t\t\x3c!-- ko component: { name:"ui-milestone-icon" } --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t{{app.tl(\'Due\')}}:\n\t\t\t\t\t{{ $component.getTemplateRelDate(task.dueDateAsMoment()) }}\n\t\t\t\t</span>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t\x3c!--/ko--\x3e\n\t\t)\n\t</div>\n\x3c!--/ko--\x3e\n\n\x3c!-- ko component: {\n\t\tname:"widget-tags-list",\n\t\tparams:{\n\t\t\titem: task,\n\t\t\ttype: "task",\n\t\t\tcanEdit: task.canEdit(),\n\t\t\tenabled: true,\n\t\t\tcanAddTags: (!app.account.tagsLockedToAdmins() || app.loggedInUser.administrator())\n\t\t}\n\t} --\x3e\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko if: task.private() != 0 && task.lockdownId() > 0 --\x3e\n\t<a href="javascript:;" class="w-task-row__option w-task-row__option--active" aria-label="Task Privacy">\n\t\t\x3c!-- ko component: { name:"widget-privacy-icon", params: {private:task.private, lockdownId:task.lockdownId, projectId:task.projectId, id:task.id, title:task.name, type:\'task\', extraInfo:{taskListId:task.taskListId(), parentTaskId: task.parentTaskId()>0 ? task.parentTaskId() : null}} } --\x3e\x3c!-- /ko --\x3e\n\t</a>\n\x3c!-- /ko --\x3e\n\x3c!-- ko if: task.attachmentsCount() > 0 && showAttachments --\x3e\n\t<a href="javascript:;" class="w-task-row__option tipped-hide w-task-row__option--active"\n\t\tdata-bind="tippedDelegate, click:OnClickViewTaskFiles"\n\t\tdata-content="{{task.attachmentsCount()==\'1\' ? app.tl(\'[_s] file attached\',task.attachmentsCount()) : app.tl(\'[_s] files attached\',task.attachmentsCount())}}"\n\t\taria-label="Task Attachments">\n\t\t<i class="icon-paper-clip icon-large"></i>\n\t</a>\n\x3c!-- /ko --\x3e\n\x3c!-- ko if: task.numDependents() > 0 --\x3e\n\t\x3c!-- ko component: { name:"widget-task-dependents-link", params:{ task:task, mode:\'icon\' } } --\x3e\x3c!-- /ko --\x3e\n\x3c!--/ko--\x3e\n\x3c!-- ko if: $component.hasReminders() && task.status()!==\'completed\' && !$component.isTemplateProject() --\x3e\n\t<a href="javascript:;" class="w-task-row__option removeOnCompletion w-task-row__option--active tipped-hide" aria-label="Task Reminder"\n\t\tdata-bind="css:{\'w-task-row__option--reminder-active\': task.hasRemindersForUser}, click: $component.OnClickViewCurrentTaskReminders, tippedDelegate"\n\t\tdata-content="{{app.tl(\'Current Reminders\')}}"\n\t\tdata-tipped-options="hideOthers:true">\n\t\t<i class="fa fa-bell" aria-hidden="true"></i>\n\t</a>\n\x3c!--/ko--\x3e\n\x3c!-- ko if: task.hasLoggedTime() && task.canLogTime() && !isProjectTemplate() --\x3e\n\t<a href="javascript:;" class="w-task-row__option w-task-row__option--active" aria-label="Log Time set"\n\t\tdata-bind="attr: {\'data-component\': JSON.stringify({\n\t\t\tname: \'widget-tipped-task-time\',\n\t\t\tparams: {\n\t\t\t\tid: task.id(),\n\t\t\t\ttaskListId: task.taskListId(),\n\t\t\t\tutility: \'time\'\n\t\t\t}}),\n\t\t\tid: task.id() + \'_taskUtilityTip-time_on\'+taskUniqueId\n\t\t},\n\t\tclick:function(){task.LogTime();},\n\t\ttippedDelegate:{\n\t\t\tonShow: taskRowOnShow,\n\t\t\tafterHide: taskRowAfterHide\n\t\t}"\n\t\tdata-tipped-options="{{app.taskTippedOptsInline}}">\n\t\t<i class="fa fa-clock-o" aria-hidden="true"></i>\n\t</a>\n\x3c!--/ko--\x3e\n\x3c!-- ko if: projectIsActive() && task.numActiveSubTasks() > 0 && $component.mode() !== \'flat\' && !$component.isFilteredTemplate && task.status()!==\'completed\' --\x3e\n\t<a href="javascript:;" class="w-task-row__option tipped-hide w-task-row__option--active" aria-label="Subtask set"\n\t\tdata-bind="click:OnClickToggleShowSubTasks, tippedDelegate"\n\t\tdata-tipped-options="hideOthers:true, showDelay: 300"\n\t\tdata-content="{{ task.displayPreferences.isDisplayingSubTasksSection() ? app.tl(\'Hide subtasks\') : app.tl(\'View subtasks\') }}">\n\t\t<i class="fa fa-indent" aria-hidden="true"></i>\n\t</a>\n\x3c!--/ko--\x3e\n<a href="javascript:;" class="w-task-row__option removeOnCompletion w-task-row__option--active" aria-label="Task Priority set"\n\tdata-bind="visible: task.priority() != \'\' && task.priority() != \'none\' && task.status()!==\'completed\', attr: {\'data-component\': JSON.stringify({\n\t\tname: \'widget-tipped-task-priority\',\n\t\tparams: {\n\t\t\tid: task.id(),\n\t\t\ttaskListId: task.taskListId()\n\t\t}})\n\t},\n\tcss: {\n\t\t\'pHigh\': task.priority()==\'high\',\n\t\t\'pMedium\':task.priority()==\'medium\',\n\t\t\'pLow\':task.priority()==\'low\'\n\t},\n\ttippedDelegate:{\n\t\tonShow: taskRowOnShow,\n\t\tafterHide: taskRowAfterHide,\n\t\tenabled: task.canEdit()\n\t}"\n\tdata-tipped-options="{{app.taskTippedOptsInline}}">\n\t<i class="fa fa-exclamation-circle" aria-hidden="true"></i>\n</a>\n\x3c!-- ko if: task.commentsCount() > 0 && $component.mode() !== \'task\' && !$component.isMainTask --\x3e\n\t<a href="javascript:;" class="w-task-row__option w-task-row__option--comment w-task-row__option--active" aria-label="Task Comments set"\n\t\tdata-bind="\n\t\t\tclick: OnClickViewTaskComments,\n\t\t\tattr: {\'data-component\': JSON.stringify({\n\t\t\t\tname: \'widget-tipped-task-comments\',\n\t\t\t\tparams: {\n\t\t\t\t\tid: task.id(),\n\t\t\t\t\ttaskListId: task.taskListId()\n\t\t\t\t}}),\n\t\t\t\tid: task.id() + \'_taskUtilityTip-comments_on\'+taskUniqueId\n\t\t\t},\n\t\t\tcss: {\n\t\t\t\t\'w-task-row__option--comment-max\': task.commentsCount() > 99,\n\t\t\t\t\'w-task-row__option--comment-unread\': task.hasUnreadComments\n\t\t\t},\n\t\t\ttippedDelegate:{\n\t\t\t\tonShow: taskRowOnShow,\n\t\t\t\tonClick: ClickEventTracking(\'Task Comments set\'),\n\t\t\t\tafterHide: taskRowAfterHide\n\t\t\t}"\n\t\tdata-tipped-options="{{app.taskTippedOptsInline}}">\n\t\t<i class="fa fa-comment" aria-hidden="true"></i>\n\t\t<span>\n\t\t\t{{task.commentsCount}}\n\t\t</span>\n\t</a>\n\x3c!--/ko--\x3e\n\x3c!-- ko if: projectIsActive() && task.status() != \'completed\' && $component.mode() !== \'template\' --\x3e\n\t<a href="javascript:;" class="w-task-row__option w-task-row__option--active removeOnCompletion minWidth" aria-label="Task Progress set"\n\t\tdata-tipped-options="{{app.taskTippedOptsInline}}"\n\t\tdata-bind="attr: {\'data-component\': JSON.stringify({\n\t\t\tname: \'widget-tipped-task-progress\',\n\t\t\tparams: {\n\t\t\t\tid: task.id(),\n\t\t\t\ttaskListId: task.taskListId()\n\t\t\t}}),\n\t\t\tid: task.id() + \'_taskUtilityTip-progress_on\'+taskUniqueId\n\t\t},\n\t\tcss: {\n\t\t\t\'hidden\': task.progress() == 0\n\t\t},\n\t\ttippedDelegate:{\n\t\t\tonShow: taskRowOnShow,\n\t\t\tafterHide: taskRowAfterHide,\n\t\t\tenabled: task.canEdit() || task.isAssignedToMe()\n\t\t}">{{task.progress()}}%</a>\n\x3c!--/ko--\x3e\n\x3c!-- ko if: task.isRecurring() && task.status() != \'completed\' --\x3e\n\t<a href="javascript:;" class="w-task-row__option tipped w-task-row__option--active"\n\t\tdata-tipped-options="{{app.taskTippedOptsInline}}"\n\t\tdata-bind="attr: {\'data-component\': JSON.stringify({\n\t\t\tname: \'widget-tipped-task-recurring\',\n\t\t\tparams: {\n\t\t\t\tid: task.id(),\n\t\t\t\ttaskListId: task.taskListId(),\n\t\t\t\tmode: $component.mode()\n\t\t\t}}),\n\t\t\tid: task.id() + \'_taskUtilityTip-recurring_on\'+taskUniqueId\n\t\t},\n\t\ttippedDelegate:{\n\t\t\tonShow: taskRowOnShow,\n\t\t\tafterHide: taskRowAfterHide,\n\t\t\tenabled: task.canEdit()\n\t\t}" aria-label="Task Recurring set">\n\t\t<i class="icon-repeat"></i>\n\t</a>\n\x3c!-- /ko --\x3e\n\x3c!-- ko if: projectIsActive() && (task.userFollowingChanges() || task.userFollowingComments()) --\x3e\n\t<a href="javascript:;" class="w-task-row__option w-task-row__option--active" aria-label="Task Followers set"\n\t\tdata-tipped-options="{{app.taskMultiTippedOptsInline}}"\n\t\tdata-bind="attr: {\'data-component\': JSON.stringify({\n\t\t\tname: \'widget-tipped-task-followers\',\n\t\t\tparams: {\n\t\t\t\tid: task.id(),\n\t\t\t\ttaskListId: task.taskListId(),\n\t\t\t\tselector: task.id() + \'_taskUtilityTip-followers_on\'+taskUniqueId,\n\t\t\t}}),\n\t\t\tid: task.id() + \'_taskUtilityTip-followers_on\'+taskUniqueId\n\t\t},\n\t\ttippedDelegate:{\n\t\t\tonShow: taskRowOnShow,\n\t\t\tafterHide: taskRowAfterHide\n\t\t}">\n\t\t<i class="fa fa-eye" aria-hidden="true"></i>\n\t</a>\n\x3c!--/ko--\x3e\n\x3c!-- ko if: app.account.deskEnabled() && task.hasTickets() --\x3e\n\t<a href="{{app.branding.BaseHref()+\'?action=deskTicketRedirect&taskId=\'+task.id()}}" class="w-task-row__option w-task-row__option--active" aria-label="Desk Ticket set"\n\t\tdata-meta-link="{{app.branding.BaseHref()+\'?action=deskTicketRedirect&taskId=\'+task.id()}}"\n\t\tdata-tipped-options="{{app.taskTippedOptsInline}}"\n\t\tdata-bind="\n\t\t\tattr: {\n\t\t\t\t\'data-component\': JSON.stringify({\n\t\t\t\t\tname: \'widget-tipped-desk-tickets\',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\ttaskId: task.id(),\n\t\t\t\t\t\ttaskName: task.name(),\n\t\t\t\t\t\tprojectId: task.projectId()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\ttippedDelegate:{\n\t\t\t\tonShow: taskRowOnShow,\n\t\t\t\tonClick: ClickEventTracking(\'Task Followers set\'),\n\t\t\t\tafterHide: taskRowAfterHide\n\t\t\t},\n\t\t\tcss: {\n\t\t\t\t\'active\': task.hasTickets()\n\t\t\t}\n\t\t\t" data-ignore-left-click>\n\n\t\t\x3c!-- ko component: {\n\t\t\tname: \'ui-common-icon\',\n\t\t\tparams: {\n\t\t\t\tname: \'desk-logo-mono-tw\'\n\t\t\t}\n\t\t} --\x3e\x3c!-- /ko  --\x3e\n\t</a>\n\x3c!--/ko--\x3e\n\n\n\x3c!-- ko if: $component.projectIsActive && task.canEdit() && task.numActiveSubTasks() == 0 && $component.mode() !== \'flat\' && !$component.isFilteredTemplate --\x3e\n\t<a href="javascript:;" class="w-task-row__option tipped-hide" aria-label="Subtask"\n\t\tdata-tipped-options="hideOthers:true,showDelay: 300"\n\t\tdata-bind="click:OnClickToggleShowSubTasks, tippedDelegate"\n\t\tdata-content="{{ $component.task.status() === \'completed\' ? app.tl(\'View subtasks\') : app.tl(\'Add subtasks\') }}">\n\t\t<i class="fa fa-indent" aria-hidden="true"></i>\n\t</a>\n\x3c!--/ko--\x3e\n\x3c!-- ko if: !task.hasLoggedTime() && task.canLogTime() && !isProjectTemplate() --\x3e\n\t<a href="javascript:;" class="w-task-row__option" aria-label="Log Time"\n\t\tdata-tipped-options="{{app.taskTippedOptsInline}}"\n\t\tdata-bind="attr: {\'data-component\': JSON.stringify({\n\t\t\tname: \'widget-tipped-task-time\',\n\t\t\tparams: {\n\t\t\t\tid: task.id(),\n\t\t\t\ttaskListId: task.taskListId()\n\t\t\t}}),\n\t\t\tid: task.id() + \'_taskUtilityTip-time_off\'+taskUniqueId\n\t\t},\n\t\tclick:function(){task.LogTime();},\n\t\ttippedDelegate:{\n\t\t\tonShow: taskRowOnShow,\n\t\t\tonClick: ClickEventTracking(\'Task Priority\'),\n\t\t\tafterHide: taskRowAfterHide\n\t\t}">\n\t\t<i class="fa fa-clock-o" aria-hidden="true"></i>\n\t</a>\n\x3c!--/ko--\x3e\n\x3c!-- ko if: task.canEdit() && task.startDate() == "" && task.dueDate() == "" && task.status() != \'completed\' && $component.mode() !== \'template\' --\x3e\n\t<a href="javascript:;" class="w-task-row__option removeOnCompletion" aria-label="Task Dates"\n\t\tdata-tipped-options="isTippedParent:true, skin:\'light\', hideOthers:true, hideOn: false, hideAfter: 300, showDelay: 800"\n\t\tdata-bind="attr: {\'data-component\': JSON.stringify({\n\t\t\tname: \'widget-tipped-task-dates\',\n\t\t\tparams: {\n\t\t\t\tid: task.id(),\n\t\t\t\ttaskListId: task.taskListId(),\n\t\t\t\ttippedParentId: task.id() + \'_taskUtilityTip-date_off\'+taskUniqueId\n\t\t\t}}),\n\t\t\tid: task.id() + \'_taskUtilityTip-date_off\'+taskUniqueId\n\t\t},\n\t\ttippedDelegate:{\n\t\t\tonShow: taskRowOnShow,\n\t\t\tafterHide: taskRowAfterHide\n\t\t}">\n\t\t<i class="fa fa-calendar" aria-hidden="true"></i>\n\t</a>\n\x3c!--/ko--\x3e\n<a href="javascript:;" class="w-task-row__option removeOnCompletion" aria-label="Task Priority"\n\tdata-tipped-options="{{app.taskTippedOptsInline}}"\n\tdata-bind="visible: task.canEdit() && (task.priority() == \'\' || task.priority() == \'none\') && task.status() != \'completed\', attr: {\'data-component\': JSON.stringify({\n\t\tname: \'widget-tipped-task-priority\',\n\t\tparams: {\n\t\t\tid: task.id(),\n\t\t\ttaskListId: task.taskListId()\n\t\t}})\n\t},\n\ttippedDelegate:{\n\t\tonShow: taskRowOnShow,\n\t\tafterHide: taskRowAfterHide\n\t}">\n\t<i class="fa fa-exclamation-circle" aria-hidden="true"></i>\n</a>\n\x3c!-- ko if: projectIsActive() && ( task.canEdit() || task.isAssignedToMe() ) && task.status() != \'completed\' && $component.mode() !== \'template\' --\x3e\n\t<a href="javascript:;" class="w-task-row__option removeOnCompletion minWidth" aria-label="Task Progress"\n\t\tdata-tipped-options="{{app.taskTippedOptsInline}}"\n\t\tdata-bind="attr: {\'data-component\': JSON.stringify({\n\t\t\tname: \'widget-tipped-task-progress\',\n\t\t\tparams: {\n\t\t\t\tid: task.id(),\n\t\t\t\ttaskListId: task.taskListId()\n\t\t\t}}),\n\t\t\tid: task.id() + \'_taskUtilityTip-progress_off\'+taskUniqueId\n\t\t},\n\t\tcss: {\n\t\t\t\'hidden\': task.progress() > 0\n\t\t},\n\t\ttippedDelegate:{\n\t\t\tonShow: taskRowOnShow,\n\t\t\tafterHide: taskRowAfterHide,\n\t\t\tenabled: task.canEdit() || task.isAssignedToMe()\n\t\t}">0%</a>\n\x3c!--/ko--\x3e\n\x3c!-- ko if: !task.hasReminders() && $component.canAddReminders() --\x3e\n\t<a href="javascript:;" class="w-task-row__option removeOnCompletion tipped-hide" aria-label="Task Reminder"\n\t\tdata-bind="click:$component.OnClickAddTaskReminder, tippedDelegate"\n\t\tdata-content="{{app.tl(\'Reminders\')}}"\n\t\tdata-tipped-options="hideOthers:true">\n\t\t<i class="fa fa-bell" aria-hidden="true"></i>\n\t</a>\n\x3c!--/ko--\x3e\n\x3c!-- ko if: projectIsActive() && !(task.userFollowingChanges() || task.userFollowingComments()) --\x3e\n\t<a href="javascript:;" class="w-task-row__option" aria-label="Task Followers"\n\t\tdata-tipped-options="{{app.taskMultiTippedOptsInline}}"\n\t\tdata-bind="attr: {\'data-component\': JSON.stringify({\n\t\t\tname: \'widget-tipped-task-followers\',\n\t\t\tparams: {\n\t\t\t\tid: task.id(),\n\t\t\t\ttaskListId: task.taskListId(),\n\t\t\t\tselector: task.id() + \'_taskUtilityTip-followers_off\'+taskUniqueId,\n\t\t\t}}),\n\t\t\tid: task.id() + \'_taskUtilityTip-followers_off\'+taskUniqueId\n\t\t},\n\t\ttippedDelegate:{\n\t\t\tonShow: taskRowOnShow,\n\t\t\tafterHide: taskRowAfterHide\n\t\t}">\n\t\t<i class="fa fa-eye" aria-hidden="true"></i>\n\t</a>\n\x3c!--/ko--\x3e\n\x3c!-- ko if: !$component.readOnly() && projectIsActive() && task.commentsCount() == 0 && ($component.mode() !== \'task\' && $component.mode() !== \'template\' || $component.isProjectTemplate())  --\x3e\n\t<a href="javascript:;" class="w-task-row__option tipped-hide" aria-label="Task Comments"\n\t\tdata-bind="click:$component.OnAddTaskComment, tippedDelegate"\n\t\tdata-content="{{app.tl(\'Add Comment\')}}"\n\t\tdata-tipped-options="hideOthers:true">\n\t\t<i class="fa fa-comments" aria-hidden="true"></i>\n\t</a>\n\x3c!--/ko--\x3e\n\x3c!-- ko if: !$component.isMainTask && $component.mode() !== \'template\' --\x3e\n\t<a href="javascript:;" class="w-task-row__option tipped-hide" aria-hidden="true" aria-label="Task QuickView"\n\t\tdata-bind="click:OnClickQuickView, tippedDelegate"\n\t\tdata-content="{{app.tl(\'Quick View\') + \' \\\'V\\\'\'}}"\n\t\tdata-tipped-options="hideOthers:true">\n\t\t<i class="fa fa-search-plus" aria-hidden="true"></i>\n\t</a>\n\x3c!--/ko--\x3e\n\x3c!-- ko if: projectIsActive() && hasColumns() && task.cardId() == 0 && task.canEdit() --\x3e\n\t\x3c!-- ko component: { name:"widget-board-column-label", params:{ item: task, mode: \'icon\' } } --\x3e\x3c!-- /ko --\x3e\n\x3c!--/ko--\x3e\n\n<div class="w-task-row__option" data-bind="visible: task.canEdit" aria-label="Task Tags">\n\t\x3c!-- ko component: { name: "widget-tags-addIcon", params: { item: task, type: "task", projectId: task.projectId, enabled: true, customClass: \'option\' } } --\x3e\x3c!-- /ko --\x3e\n</div>\n\n\x3c!-- ko if: app.account.deskEnabled() && !task.hasTickets() --\x3e\n\t<a href="{{app.branding.BaseHref()+\'?action=deskTicketRedirect&taskId=\'+task.id()}}" class="w-task-row__option" aria-label="Add Ticket"\n\t\tdata-meta-link="{{app.branding.BaseHref()+\'?action=deskTicketRedirect&taskId=\'+task.id()}}"\n\t\tdata-tipped-options="{{app.taskTippedOptsInline}}"\n\t\tdata-bind="\n\t\t\tattr: {\n\t\t\t\t\'data-component\': JSON.stringify({\n\t\t\t\t\tname: \'widget-tipped-desk-tickets\',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\ttaskId: task.id(),\n\t\t\t\t\t\ttaskName: task.name(),\n\t\t\t\t\t\tprojectId: task.projectId()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\ttippedDelegate:{\n\t\t\t\tonShow: taskRowOnShow,\n\t\t\t\tonClick: ClickEventTracking(\'Task Followers\'),\n\t\t\t\tafterHide: taskRowAfterHide\n\t\t\t}\n\t\t\t" data-ignore-left-click>\n\t\t\x3c!-- ko component: {\n\t\t\tname: \'ui-common-icon\',\n\t\t\tparams: {\n\t\t\t\tname: \'desk-logo-mono-tw\'\n\t\t\t}\n\t\t} --\x3e\x3c!-- /ko  --\x3e\n\t</a>\n\x3c!--/ko--\x3e'},3232:function(t,e){t.exports="<i\n    data-tipped-options=\"skin: 'light',\n    hideOthers: true,\n    hideOnClickOutside: true,\n    showOn: 'mouseover',\n    hideOn: false,\n    showDelay: 300,\n    hideAfter: 300\"\n    data-bind=\"\n      attr: {\n        'data-component': JSON.stringify({\n          name: 'widget-task-related-tasks',\n          params: {\n            taskId: taskId(),\n            parentTaskId: task.parentTaskId(),\n            type: 'predecessors'\n          }\n        })\n      },\n      tippedDelegate\"\n      class=\"fa fa-minus\"\n      aria-hidden=\"true\">\n</i>"},3233:function(t,e){t.exports="\x3c!-- ko if: type == 'parentTask' --\x3e\n\t<label style=\"margin-bottom: 0\">{{app.tl('Parent Task')}}</label>\n\t<div style=\"max-width: 300px\">\n\t\t\x3c!-- ko component: {\n\t\t\t\tname: 'widget-tipped-item-created-by',\n\t\t\t\tparams: {\n\t\t\t\t\ttype: 'task',\n\t\t\t\t\tshowItemTitle: true,\n\t\t\t\t\tid: ko.unwrap(parentTaskId)\n\t\t\t\t}\n\t\t\t} --\x3e\n\t\t\x3c!-- /ko --\x3e\n\t</div>\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko ifnot: type == 'parentTask' --\x3e\n\t\x3c!-- ko if: data.state() == 'blank' --\x3e\n\t\t\x3c!-- ko if: type === 'dependents' --\x3e\n\t\t\t{{app.tl('This task has no dependents')}}\n\t\t\x3c!--/ko--\x3e\n\t\t\x3c!-- ko if: type === 'predecessors' --\x3e\n\t\t\t{{app.tl('This task has no predecessors')}}\n\t\t\x3c!--/ko--\x3e\n\t\x3c!--/ko--\x3e\n\t\x3c!-- ko if: data.state() == 'content' --\x3e\n\t\t\x3c!-- ko if: type === 'dependents' --\x3e\n\t\t\t<div style=\"padding:0 0 5px 0;color:#888;font-size:10px;\">\n\t\t\t\t\x3c!-- ko if: parentTaskId > 0 --\x3e\n\t\t\t\t\t{{app.tl('The following tasks are waiting on this subtask')}}:\n\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\x3c!-- ko ifnot: parentTaskId > 0 --\x3e\n\t\t\t\t\t{{app.tl('The following tasks are waiting on this task')}}:\n\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t</div>\n\t\t\x3c!--/ko--\x3e\n\t\t\x3c!-- ko if: type === 'predecessors' --\x3e\n\t\t\t<div style=\"padding:0px 0px 5px;color:#888;font-size:13px;\">\n\t\t\t\t<strong style=\"color:#252;\">{{app.tl('Task can\\'t be completed')}}</strong>\n\t\t\t\t<div style=\"color:#BBB;\">{{app.tl('Waiting on these tasks to be completed')}}</div>\n\t\t\t</div>\n\t\t\x3c!--/ko--\x3e\n\t\t<div data-bind=\"foreach:data.list\" class=\"tippedLightInner\">\n\t\t\t<div class=\"task-qv-icon-hover-area\" >\n\t\t\t\t<img width=\"16\" height=\"16\" alt=\"\" data-bind=\"attr:{src:$component.getImageUrl($data)}\">\n\t\t\t\t\x3c!-- ko if: $data.projectType != null && $data.projectType == 'tasklists-template' --\x3e\n\t\t\t\t\t<span>{{app.utility.Truncate(ko.unwrap(name),40,app.localizationPreferences().ellipsis)}}</span>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\x3c!-- ko if: $data.projectType == null || $data.projectType != 'tasklists-template' --\x3e\n\t\t\t\t\t<a title=\"{{name}}\" data-bind=\"attr:{'href':'#tasks/'+id}\" class=\"ql blue\">{{app.utility.Truncate(ko.unwrap(name),40,app.localizationPreferences().ellipsis)}}</a>\n\n\t\t\t\t\t\x3c!-- ko if: $data.canSeeTask --\x3e\n\t\t\t\t\t\t<i class=\"task-qv-icon fa fa-search-plus\" data-bind=\"click: $component.onClickOpenTaskQV\" aria-hidden=\"true\"></i>\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\x3c!-- ko if: $data.canSeeTask --\x3e\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{{responsiblePartySummary}}\n\t\t\t\t\t</div>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</div>\n\t\t</div>\n\t\t<div data-bind=\"onRendered:OnRendered\"></div>\n\t\x3c!--/ko--\x3e\n\x3c!--/ko--\x3e"},3234:function(t,e){t.exports='<div class="task-reminders-list-wrapper">\n\t\x3c!-- ko ifnot: task.remindersLoaded --\x3e\n\t\t\x3c!-- ko component: {name: \'list-state-loading-new\', params:{itemType: \'event\'}} --\x3e\x3c!-- /ko --\x3e\n\t\x3c!-- /ko --\x3e\n\t\x3c!-- ko if: task.remindersLoaded --\x3e\n\n\t\t\x3c!-- ko if: task.reminders().length == 0 --\x3e\n\t\t\t\x3c!-- ko component: {name: \'list-state-blank\', params:{itemType:\'reminder\', showButton: canAddReminders(), buttonText: canAddReminders()? app.tl(\'Add Reminder\') : app.tl(\'\'), size:\'small\', onClickButton: OnClickAddTaskReminder, title:app.tl(\'No Reminders\')}} --\x3e\x3c!-- /ko --\x3e\n\t\t\x3c!--/ko--\x3e\n\n\t\t\x3c!-- ko if: task.reminders().length > 0 --\x3e\n\t\t\t<div class="task-reminders-list">\n\t\t\t\t<table class="taskReminders" cellpadding="2" border="0" width="100%">\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th style="font-size: 12px">{{app.tl(\'Remind Who?\')}}</th>\n\t\t\t\t\t\t\t<th style="font-size: 12px">{{app.tl(\'When?\')}}</th>\n\t\t\t\t\t\t\t<th style="font-size: 12px">{{app.tl(\'How?\')}}</th>\n\t\t\t\t\t\t\t<th style="font-size: 12px">&nbsp;</th>\n\t\t\t\t\t\t\t<th style="font-size: 12px">&nbsp;</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody data-bind="foreach: task.reminders">\n\t\t\t\t\t\t<tr data-bind="css:{\'blocked\': ko.unwrap($component.privacyIds).length > 0 && userId() != 0 && ko.unwrap($component.privacyIds).indexOf(userId()) == -1 && ko.unwrap($component.privacyIds).indexOf(parseInt(userId(),10)) == -1}">\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{{userFirstname}} {{userLastname}}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\x3c!-- ko if: isRelative() == 1 --\x3e\n\t\t\t\t\t\t\t\t\t{{$component.formatRelativeTime(relativeNumberOfDays())}}\n\t\t\t\t\t\t\t\t\t\x3c!-- ko if: $component.mode == \'modal\' --\x3e\n\t\t\t\t\t\t\t\t\t\t</br>\n\t\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- ko ifnot: $component.mode == \'modal\' --\x3e\n\t\t\t\t\t\t\t\t\t\t&nbsp;-&nbsp;\n\t\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\t\x3c!-- ko ifnot: $component.useOffSetDueDate --\x3e\n\t\t\t\t\t\t\t\t\t{{$component.formatDate($index)}}\n\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\t\x3c!-- ko if: $component.useOffSetDueDate --\x3e\n\t\t\t\t\t\t\t\t\t{{$component.formatTime(time())}}\n\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{{app.utility.GetNotificationMediumText(type)}}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td width="34">\n\t\t\t\t\t\t\t\t<a href="javascript:"><i class="fa fa-info-circle fa-lg" data-bind="tippedDelegate" data-content="{{app.tl(\'Created By\')}}: {{createdByUserFirstname}} {{createdByUserLastname}}" style="color:#848484;"></i></a>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td width="34">\n\t\t\t\t\t\t\t\t<button type="button" class="btn btn-sm btn-success" data-content="{{app.tl(\'Edit\')}}" data-bind="visible: $component.canAddReminders(), tippedDelegate, click: $parent.OnClickEditReminder"><i class="fa fa-pencil"></i></button>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td width="34">\n\t\t\t\t\t\t\t\t<button type="button" class="btn btn-sm btn-danger" data-content="{{app.tl(\'Delete\')}}" data-bind="visible: $component.canAddReminders(), tippedDelegate, click: $parent.OnClickDeleteReminder"><i class="fa fa-trash-o"></i></button>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\n\t\t\t<button type="button" class="btn" data-bind="click: OnClickAddTaskReminder, visible: canAddReminders()" style="margin-top:10px;">\n\t\t\t\t<span class="fa fa-plus-circle fa-lg"></span>{{app.tl(\'Add Reminder\')}}\n\t\t\t</button>\n\t\t\x3c!--/ko--\x3e\n\t\x3c!-- /ko --\x3e\n</div>\n'},3235:function(t,e){t.exports="\x3c!-- ko if: $component.mode != 'template' && task.numActiveSubTasks() > 0 || !task.canComplete() --\x3e\n    \x3c!-- ko if: task.numActiveSubTasks() > 0 --\x3e\n        {{task.activeSubTasksTipped}}\n    \x3c!--/ko--\x3e\n    \x3c!-- ko ifnot: task.numActiveSubTasks() > 0 --\x3e\n        \x3c!-- ko if: task.status() === 'completed' --\x3e\n            {{app.tl('You don\\'t have permission to re-open this task')}}\n        \x3c!--/ko--\x3e\n\n        \x3c!-- ko if: task.status() !== 'completed' --\x3e\n            {{app.tl('You don\\'t have permission to complete this task')}}\n        \x3c!--/ko--\x3e\n    \x3c!--/ko--\x3e\n\x3c!--/ko--\x3e\n"},3236:function(t,e){t.exports="<div>\n\t\x3c!-- ko if: task.estimatedMinutes() != 0 --\x3e\n\t    <strong>{{ app.tl('Estimated Time') }}</strong>\n\t    <p class=\"m--none\">{{ totalEstimatedText }}</p>\n\t    \x3c!-- ko if: nestedSubtaskLevels() >= 10 --\x3e\n\t        ({{ app.tl('including [_s] levels of subtasks',10) + }})\n\t    \x3c!-- /ko --\x3e\n\t    \x3c!-- ko if: nestedSubtaskLevels() < 10 --\x3e\n\t        ({{ app.tl('including all subtasks') }})\n\t    \x3c!-- /ko --\x3e\n\t\x3c!-- /ko --\x3e\n\t\x3c!-- ko if: task.estimatedMinutes() == 0 --\x3e\n\t    <p class=\"m--none\">{{ app.tl('Add estimate') }}</p>\n\t    \x3c!-- ko if: totalEstimatedTime() > 0 --\x3e\n\t        <hr/>\n\t        <strong>{{ app.tl('Estimated time on subtasks') }}</strong>\n\t        <p>{{ totalEstimatedText }}</p>\n\t    \x3c!-- /ko --\x3e\n\t\x3c!-- /ko --\x3e\n</div>"},3237:function(t,e){t.exports="\x3c!-- ko if: task.visible --\x3e\n\t<div class=\"w-task-row\"\n\t\tdata-bind=\"\n\t\t\tcss: {\n\t\t\t\t'isMainTask': $component.isMainTask,\n\t\t\t\t'isEditing': task.isEditMode,\n\t\t\t\t'w-task-row--fullpage': $component.isMainTask,\n\t\t\t\t'w-task-row--editing': task.isEditMode,\n\t\t\t\t'completed': task.status()=='completed' && !inCompletedList,\n\t\t\t\t'w-task-row--complete': task.status()=='completed' && !inCompletedList,\n\t\t\t\t'border--none': app.currentRoute().itemId && app.currentRoute().itemId == task.id(),\n\t\t\t\t'w-task-row--quick-view': $component.isQuickView,\n\t\t\t\t'w-task-row--flat': ($component.mode == 'flat' || $component.isFilteredTemplate || $component.isMainTask)\n\t\t\t},\n\t\t\tvisible:showIt\">\n\n\t\t<div class=\"task-row\" data-bind=\"\n\t\t\tcss:{\n\t\t\t\t'task-row--disabled': task.isUpdating(),\n\t\t\t\t'completed': task.status() === 'completed' && inCompletedList,\n\t\t\t\t'border--none': task.displayPreferences.isDisplayingDescription()\n\t\t\t}\">\n\n\t\t\t<div class=\"w-task-row__controls\">\n\n\t\t\t\t\x3c!-- ko if: task.canEdit --\x3e\n\t\t\t\t\t<div class=\"w-task-row__drag\"\n\t\t\t\t\t\tdata-bind=\"visible: task.canEdit() && task.status() != 'completed' && showDragHandle\">\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: 'ui-common-icon',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tname: 'draghandle-tw-solid',\n\t\t\t\t\t\t\t\t\tsize: '1x'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</div>\n\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\x3c!-- ko ifnot: readOnly --\x3e\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: \"widget-task-dropdown\",\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\ttask: task,\n\t\t\t\t\t\t\t\ttaskList: taskList,\n\t\t\t\t\t\t\t\tmode: $component.mode,\n\t\t\t\t\t\t\t\tisQuickView: isQuickView\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\x3c!-- ko if: task.isUpdating() --\x3e\n\t\t\t\t\t<a class=\"w-task-row__check\">\n\t\t\t\t\t\t<i class=\"fa fa-spinner fa-spin\" aria-hidden=\"true\"></i>\n\t\t\t\t\t</a>\n\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\x3c!-- ko ifnot: task.isUpdating() --\x3e\n\t\t\t\t\t\x3c!-- ko if: task.id()===0 --\x3e\n\t\t\t\t\t\t<a class=\"w-task-row__check\">\n\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\tname: 'ui-common-icon',\n\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\tname: 'add-solid',\n\t\t\t\t\t\t\t\t\t\tclass: 'color--inherit'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\t\x3c!-- ko if: task.id() > 0 --\x3e\n\t\t\t\t\t\t\x3c!-- ko if: $component.showTippedCount --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: $component.flatShowSubTaskCount --\x3e\n\t\t\t\t\t\t\t\t<a class=\"w-task-row__check\" aria-label=\"Task Complete\" data-bind=\"\n\t\t\t\t\t\t\t\t\ttippedDelegate,\n\t\t\t\t\t\t\t\t\tclick: task.OnClickComplete,\n\t\t\t\t\t\t\t\t\tattr: {\n\t\t\t\t\t\t\t\t\t\t'href': 'javascript:;',\n\t\t\t\t\t\t\t\t\t\t'id': $component.tippedCountId,\n\t\t\t\t\t\t\t\t\t\t'data-tipped-options': 'hideOn: {element: \\'mouseleave\\', tooltip: \\'mouseenter\\'}',\n\t\t\t\t\t\t\t\t\t\t'data-content': $component.countTippedContent\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tcss:{\n\t\t\t\t\t\t\t\t\t\t'w-task-row__check--complete': task.status() === 'completed',\n\t\t\t\t\t\t\t\t\t\t'w-task-row__check--parent': ($component.mode == 'template' && task.numActiveSubTasks() > 0) || (task.numActiveSubTasks() > 0 && $component.mode != 'flat'),\n\t\t\t\t\t\t\t\t\t}\">\n\t\t\t\t\t\t\t\t\t\x3c!-- ko if: task.canComplete() && task.numActiveSubTasks() == 0 && task.canStart() && $component.mode != 'template' --\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\t\tname: 'ui-common-icon',\n\t\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: 'check-solid',\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass: 'color--inherit'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\t\t\t\t\t\x3c!-- ko if: ($component.mode == 'template' && task.numActiveSubTasks() > 0) || ($component.mode != 'flat' && task.numActiveSubTasks() > 0 ) --\x3e\n\t\t\t\t\t\t\t\t\t\t<span class=\"tasks-countLabel tipped\">{{ task.numActiveSubTasks }}</span>\n\t\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\t\t\t\t\t\x3c!-- ko if: $component.mode != 'template' && task.numActiveSubTasks() > 0 || !task.canComplete() --\x3e\n\t\t\t\t\t\t\t\t\t\t<div class=\"w-task-row__tipped-subtasks\" id=\"{{$component.tippedCountId}}_target\">\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko if: task.numActiveSubTasks() > 0 --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t{{task.activeSubTasksTipped}}\n\t\t\t\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko ifnot: task.numActiveSubTasks() > 0 --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t{{app.tl('You don\\'t have permission to complete this task')}}\n\t\t\t\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\x3c!-- ko ifnot: $component.flatShowSubTaskCount --\x3e\n\t\t\t\t\t\t\t\t<a class=\"w-task-row__check\" aria-label=\"Task Complete\" data-bind=\"\n\t\t\t\t\t\t\t\t\ttippedDelegate,\n\t\t\t\t\t\t\t\t\tclick: task.OnClickComplete,\n\t\t\t\t\t\t\t\t\tattr:{\n\t\t\t\t\t\t\t\t\t\t'href': 'javascript:;',\n\t\t\t\t\t\t\t\t\t\t'id': $component.tippedCountId,\n\t\t\t\t\t\t\t\t\t\t'data-tipped-options': 'hideOn: {element: \\'mouseleave\\', tooltip: \\'mouseenter\\'}',\n\t\t\t\t\t\t\t\t\t\t'data-content': $component.countTippedContent\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tcss:{\n\t\t\t\t\t\t\t\t\t\t'w-task-row__check--complete': task.status() === 'completed',\n\t\t\t\t\t\t\t\t\t\t'w-task-row__check--parent':($component.mode == 'template' && task.numActiveSubTasks() > 0) || (task.numActiveSubTasks() > 0 && task.canStart() && $component.mode != 'flat'),\n\t\t\t\t\t\t\t\t\t\t'w-task-row__check--disabled': $component.cantComplete(),\n\t\t\t\t\t\t\t\t\t\t'w-task-row__check--blocked': $component.cantStart()\n\t\t\t\t\t\t\t\t\t}\">\n\t\t\t\t\t\t\t\t\t\x3c!-- ko if: task.canComplete() && task.numActiveSubTasks() == 0 && task.canStart() && $component.mode != 'template' --\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\t\tname: 'ui-common-icon',\n\t\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: 'check-solid',\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass: 'color--inherit'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\t\t\t\t\t\x3c!-- ko if: ($component.mode == 'template' && task.numActiveSubTasks() > 0) || ($component.mode != 'flat' && task.numActiveSubTasks() > 0 && task.canStart()) --\x3e\n\t\t\t\t\t\t\t\t\t\t<span class=\"tasks-countLabel tipped\">{{task.numActiveSubTasks()}}</span>\n\t\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\t\t\t\t\t\x3c!-- ko if: (($component.mode == 'flat' && (task.numPredecessors()>0 || task.numActiveSubTasks() > 0)) || ($component.mode != 'flat' && !task.canStart())) --\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c!-- ko component: { name:\"widget-task-predecessors-link\", params:{ task:task } } --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\t\t\t\t\t\x3c!-- ko if: $component.mode != 'template' && task.numActiveSubTasks() > 0 || !task.canComplete() --\x3e\n\t\t\t\t\t\t\t\t\t\t<div class=\"w-task-row__tipped-subtasks\" id=\"{{$component.tippedCountId}}_target\">\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko if: task.numActiveSubTasks() > 0 --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t{{task.activeSubTasksTipped}}\n\t\t\t\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko ifnot: task.numActiveSubTasks() > 0 --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t{{app.tl('You don\\'t have permission to complete this task')}}\n\t\t\t\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\x3c!-- ko ifnot : $component.showTippedCount --\x3e\n\t\t\t\t\t\t\t<a class=\"w-task-row__check\" aria-label=\"Task Complete\" data-bind=\"\n\t\t\t\t\t\t\t\tclick: $component.mode == 'template' && task.numActiveSubTasks() == 0  ? function(){} : task.OnClickComplete,\n\t\t\t\t\t\t\t\tattr:{\n\t\t\t\t\t\t\t\t\t'href': 'javascript:;',\n\t\t\t\t\t\t\t\t\t'id': $component.tippedCountId\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcss:{\n\t\t\t\t\t\t\t\t\t'w-task-row__check--complete': task.status() === 'completed',\n\t\t\t\t\t\t\t\t\t'w-task-row__check--parent':($component.mode == 'template' && task.numActiveSubTasks() > 0) || (task.numActiveSubTasks() > 0 && task.canStart() && $component.mode != 'flat'),\n\t\t\t\t\t\t\t\t\t'w-task-row__check--disabled': $component.cantComplete(),\n\t\t\t\t\t\t\t\t\t'w-task-row__check--blocked': $component.cantStart()\n\t\t\t\t\t\t\t\t}\">\n\t\t\t\t\t\t\t\t\x3c!-- ko if: task.canComplete() && task.numActiveSubTasks() == 0 && task.canStart() && $component.mode != 'template' --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\tname: 'ui-common-icon',\n\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\tname: 'check-solid',\n\t\t\t\t\t\t\t\t\t\t\t\tclass: 'color--inherit'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\t\x3c!-- ko if: ($component.mode == 'template' && task.numActiveSubTasks() > 0) || ($component.mode != 'flat' && task.numActiveSubTasks() > 0 && task.canStart()) --\x3e\n\t\t\t\t\t\t\t\t\t<span class=\"tasks-countLabel tipped\">{{task.numActiveSubTasks()}}</span>\n\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\t\x3c!-- ko if: (($component.mode == 'flat' && (task.numPredecessors()>0 || task.numActiveSubTasks() > 0)) || ($component.mode != 'flat' && !task.canStart())) --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- ko component: { name:\"widget-task-predecessors-link\", params:{ task:task } } --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\t\t\t\t\x3c!-- ko if: $component.mode == 'template' && ((task.numActiveSubTasks() > 0 && !task.canStart()) || !task.canComplete()) --\x3e\n\t\t\t\t\t\t\t\t\t<div class=\"w-task-row__tipped-subtasks\" id=\"{{$component.tippedCountId}}_target\">\n\t\t\t\t\t\t\t\t\t\t\x3c!-- ko if: task.numActiveSubTasks() > 0 --\x3e\n\t\t\t\t\t\t\t\t\t\t\t{{task.activeSubTasksTipped}}\n\t\t\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c!-- ko if: task.numActiveSubTasks() <= 0 && !task.canComplete() && task.canStart() --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko if: task.status() === 'completed' --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t{{app.tl('You don\\'t have permission to re-open this task')}}\n\t\t\t\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko if: task.status() !== 'completed' --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t{{app.tl('You don\\'t have permission to complete this task')}}\n\t\t\t\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\x3c!--/ko--\x3e\n\t        </div>\n\n\t        <div class=\"row-content-holder\" data-bind=\"css: {'w-task-row__content-holder': task.isEditMode() }, style: { 'padding-right': shouldShowEstimatedTime() && task.estimatedMinutes() > 0 ? '85px' : ''}\">\n\n\t            \x3c!-- ko if: task.isEditMode() --\x3e\n\t                \x3c!-- ko component: {name: 'section-addOrEditTask', params:{ taskId:task.id(), task: task, taskList: $component.taskList, mode: $component.mode, selCode: editTabSelCode, isQuickView: $component.isQuickView, focusInputId: $component.focusInputId }} --\x3e\x3c!-- /ko --\x3e\n\t            \x3c!-- /ko --\x3e\n\n\t            \x3c!-- ko ifnot: task.isEditMode() --\x3e\n\t\t\t\t\t<a class=\"w-task-row__bubble\"\n\t\t\t\t\t\tdata-bind=\"\n\t\t\t\t\t\t\tclick: task.OnClickEditAssigned,\n\t\t\t\t\t\t\tattr: {\n\t\t\t\t\t\t\t\t'title': $component.getResponsibleText('hint')\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tvisible: !(task.status()=='completed' && inCompletedList),\n\t\t\t\t\t\t\tcss: {\n\t\t\t\t\t\t\t\t'mine': task.isAssignedToMe(),\n\t\t\t\t\t\t\t\t'ttlRole': ($component.mode == 'template' && taskHasTemplateRole()),\n\t\t\t\t\t\t\t\t'disabled': task.status()=='completed' || !task.canEdit()\n\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\thref=\"javascript:\">\n\n\t\t\t\t\t\t\x3c!-- ko if: task.id() < 0 --\x3e\n\t\t\t\t\t\t\t<span class=\"w-task-row__bubble-loading\">{{ app.tl('Loading') }}</span>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\x3c!-- ko ifnot: task.id() < 0 --\x3e\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{{$component.getResponsibleText('inline')}}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n                        \x3c!-- ko if: task.canEdit() && task.status() !== 'completed' --\x3e\n                            <span class=\"w-task-row__edit-icon\">\n                                \x3c!-- ko component: {\n                                        name: 'ui-common-icon',\n                                        params: {\n                                            name: 'edit-regular',\n                                            class: 'color--inherit'\n                                        }\n                                    } --\x3e\n                                \x3c!-- /ko --\x3e\n                            </span>\n                        \x3c!-- /ko --\x3e\n\t\t\t\t\t</a>\n\n\t\t\t\t\t\x3c!-- ko if: ($component.mode == 'flat' || $component.isFilteredTemplate) && task.parentTaskId() > 0 && !(task.status() == 'completed' && inCompletedList) --\x3e\n\t\t\t\t\t\t\x3c!-- ko component: { name:\"widget-task-dependents-link\", params:{ task:task, mode:'link' } } --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\x3c!--/ko--\x3e\n\n\t                \x3c!-- ko ifnot: $component.mode == 'template' && !$component.isProjectTemplate() --\x3e\n\t                    <div class=\"w-task-row__name\">\n\t                    \t\x3c!-- Harvest Timer --\x3e\n\t                    \t\x3c!-- ko if: (task.id() !== app.currentRoute().itemId) && mode !== 'taskDetails' && harvestEnabled() === true && !isProjectTemplate() --\x3e\n\t                    \t\t\x3c!-- ko component: { name:'widget-task-harvest-timer', params:{task: task} } --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t                        <a\n\t                            data-tipped-options=\"behavior: 'twSticky', skin: 'light', maxWidth: 400\"\n\t                            data-bind=\"\n\t                              html: $component.isProjectTemplate()? $component.getTemplateTaskNameNoRole() : task.nameWithLinks,\n\t                              attr: {\n\t                                href: '#tasks/' + task.id(),\n\t                                'data-component': JSON.stringify({\n\t                                  name: 'widget-tipped-item-created-by',\n\t                                  params: {\n\t\t\t\t\t\t\t\t\t\tshowItemTitle: true,\n\t\t\t\t\t\t\t\t\t\titemTitle: $component.isProjectTemplate()? $component.getTemplateTaskNameNoRole() : task.nameWithLinks(),\n\t                                    id: task.id(),\n\t                                    taskListId: task.taskListId(),\n\t                                    type: 'task'\n\t                                  }\n\t                                })\n\t                              },\n\t                              click: OnClickTaskName,\n\t                              visible: !$component.isMainTask,\n\t                              tippedDelegate\">\n\t                        </a>\n\t                        <span\n\t                            data-tipped-options=\"behavior: 'twSticky', skin: 'light', maxWidth: 400\"\n\t                            data-bind=\"\n\t                              html: $component.isProjectTemplate()? $component.getTemplateTaskNameNoRole() : task.nameWithLinks,\n\t                              attr: {\n\t                                'data-component': JSON.stringify({\n\t                                  name: 'widget-tipped-item-created-by',\n\t                                  params: {\n\t\t\t\t\t\t\t\t\t\tshowItemTitle: true,\n\t\t\t\t\t\t\t\t\t\titemTitle: $component.isProjectTemplate()? $component.getTemplateTaskNameNoRole() : task.nameWithLinks(),\n\t                                    id: task.id(),\n\t                                    taskListId: task.taskListId(),\n\t                                    type: 'task'\n\t                                  }\n\t                                })\n\t                              },\n\t                              click: OnClickTaskName,\n\t                              visible: $component.isMainTask,\n\t                              tippedDelegate\">\n\t                        </span>\n\t                    </div>\n\t                \x3c!--/ko--\x3e\n\n\t                \x3c!-- ko if: $component.mode == 'template' && !$component.isProjectTemplate() --\x3e\n\t\t\t\t\t\t<div class=\"w-task-row__name\">\n\t\t\t\t\t\t\t<span data-task-option=\"name\" data-task-id=\"{{task.id()}}\" data-bind=\"html:$component.getTemplateTaskNameNoRole(), click:OnClickTaskName, css:{'w-task-row__task-completed': task.status()=='completed' && !inCompletedList}\"></span>\n\t\t\t\t\t\t</div>\n\t                \x3c!--/ko--\x3e\n\n\t                \x3c!-- ko if: task.status() == 'completed' && inCompletedList --\x3e\n\t\t                <span class=\"flex flex-items-center mr--small text-muted\">{{moment(task.completedOn()).format('MMM Do')}}\x3c!-- ko if: moment(task.completedOn()).year() != moment().year() --\x3e, {{moment(task.completedOn()).format('YYYY')}}\x3c!-- /ko--\x3e {{app.tl('by')}} {{task.completedBy.firstName()}} {{task.completedBy.lastName()}}</span>\n\t\t                \x3c!-- ko if: task.parentTaskId() > 0 --\x3e\n\t\t                \t\x3c!-- ko component: { name:\"widget-task-dependents-link\", params:{ task:task, mode:'link' } } --\x3e\x3c!-- /ko --\x3e\n\t\t                \x3c!--/ko--\x3e\n\t                \x3c!--/ko--\x3e\n\n\t                \x3c!-- ko if: task.description() != '' && mode!='task' --\x3e\n\t\t\t\t\t\t<a class=\"blue flex flex-items-center mr--medium w-task-row__description-link\" data-bind=\"click:function(){ task.displayPreferences.isDisplayingDescription(!task.displayPreferences.isDisplayingDescription()) }\">\n\t\t\t\t\t\t\t{{task.displayPreferences.isDisplayingDescription() ? app.tl('less') : app.tl('more')}}{{app.localizationPreferences().ellipsis}}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\t\x3c!-- ko if: task.id() > 0 && !readOnly() --\x3e\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: \"widget-task-options\",\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\ttask: $component.task,\n\t\t\t\t\t\t\t\t\ttype: \"task\",\n\t\t\t\t\t\t\t\t\tmode: $component.mode,\n\t\t\t\t\t\t\t\t\tinFilteredList: $component.inFilteredList,\n\t\t\t\t\t\t\t\t\tlevel: $component.level,\n\t\t\t\t\t\t\t\t\tisQuickView: $component.isQuickView,\n\t\t\t\t\t\t\t\t\tisMainTask: $component.isMainTask\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\t\x3c!-- ko if: task.displayPreferences.isDisplayingDescription() && !isMainTask && task.description().length > 0 --\x3e\n\t\t\t\t\t\t<div class=\"w-task-row__description\">\n\t\t\t\t\t\t\t<div data-bind=\"marked: task.description\" class=\"w-task-row__description-content\"></div>\n\n\t\t\t\t\t\t\t<span class=\"w-task-row__description-edit\" data-bind=\"visible: task.canEdit, click: function () { task.isEditMode(true); editTabSelCode('description') }\">\n\t\t\t\t\t\t\t\t<i class=\"fa fa-pencil\"></i>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!--/ko--\x3e\n\t            \x3c!-- /ko --\x3e\n\t\t\t</div>\n\n\t        \x3c!-- ko if: shouldShowEstimatedTime() --\x3e\n\t            \x3c!-- ko if: task.estimatedMinutes() == 0 && task.canEdit() --\x3e\n\t                <a href=\"javascript:;\"\n\t                \tclass=\"task-estimatedTime hideOnCompletion tipped\"\n\t                \tdata-tipped-options=\"behavior: 'hide', skin:'light'\"\n\t                \tdata-bind=\"\n\t\t\t\t\t\t\ttippedDelegate,\n\t                \t\tclick: $component.OnClickAddTimeEstimate,\n\t                \t\tattr: { 'data-content': $component.estTimeTippedContent },\n\t                \t\tevent: { 'mouseenter':$component.OnHoverEstTime }\">+</a>\n\t            \x3c!--/ko--\x3e\n\t            \x3c!-- ko if: task.estimatedMinutes() > 0 --\x3e\n\t                <span class=\"estimate tipped task-estimatedTimeValue w-task-row__estimated-time\"\n                \t\tdata-tipped-options=\"skin:'light'\"\n                \t\tdata-bind=\"\n\t                \t\ttippedDelegate,\n\t                \t\tattr: { 'data-content': $component.estTimeTippedContent },\n\t                \t\tcss: { noborder: (task.status() === 'completed') ? true : false },\n\t                \t\tevent: { 'mouseenter':$component.OnHoverEstTime }\">\n\t                    \x3c!-- ko if: task.status() !== 'completed' --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: task.canEdit() --\x3e\n\t\t\t\t\t\t\t\t<a href=\"javascript:;\" data-bind=\"click:$component.OnClickAddTimeEstimate\">\n\t\t\t\t\t\t\t\t\t{{ taskEstimatedText }}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: !task.canEdit() --\x3e\n\t\t\t\t\t\t\t\t{{ taskEstimatedText }}\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t                    \x3c!-- /ko --\x3e\n\t                </span>\n\t            \x3c!--/ko--\x3e\n\t        \x3c!--/ko--\x3e\n\t    </div>\n\n\t    \x3c!-- ko if: task.description() != '' && isMainTask && !task.isEditMode() --\x3e\n\t        <div class=\"w-task-row__description-hold clearfix\">\n\n\t\t\t\t<div class=\"mb--large\" data-bind=\"marked: task.description, visible: task.displayPreferences.isDisplayingDescription\" style=\"word-break: break-word; overflow-wrap: break-word; word-wrap: break-word;\"></div>\n\n\t            <div class=\"w-task-row__description-buttons\">\n\t                <a href=\"javascript:;\" class=\"btn text-decoration--underline\" data-bind=\"click: function(){ task.displayPreferences.isDisplayingDescription(!task.displayPreferences.isDisplayingDescription()) }\">\n\t                    \x3c!-- ko if: task.displayPreferences.isDisplayingDescription() --\x3e\n\t                        {{app.tl('Collapse Description')}}{{{app.localizationPreferences().ellipsis}}}\n\t                    \x3c!--/ko--\x3e\n\t                    \x3c!-- ko ifnot: task.displayPreferences.isDisplayingDescription() --\x3e\n\t                        {{app.tl('View Description')}}{{{app.localizationPreferences().ellipsis}}}\n\t                    \x3c!--/ko--\x3e\n\t                </a>\n\t            </div>\n\t        </div>\n\t    \x3c!--/ko--\x3e\n\n\t    \x3c!-- ko if: $component.mode !== 'flat' && !$component.isFilteredTemplate && task.displayPreferences.isDisplayingSubTasksSection() --\x3e\n\t        <div class=\"task-subHold tasks-container\" data-bind=\"css: {'w-task-row__current-task': app.currentRoute().itemId && app.currentRoute().itemId == task.id()}\">\n\t            \x3c!-- ko component: {name: 'section-subtasks-list', params:{taskId:task.id(), task:task, taskList:$component.taskList, mode: $component.mode, isQuickView:$component.isQuickView, level:($component.level+1)}} --\x3e\x3c!-- /ko --\x3e\n\t        </div>\n\t\t\x3c!-- /ko --\x3e\n\n\t\t\x3c!-- Set a class rather than create the element when updating to reduce DOM opperations --\x3e\n\t\t<div data-bind=\"css: {'task-row__disabled-cover': task.isUpdating}\"></div>\n\t</div>\n\x3c!--/ko--\x3e\n"},3240:function(t,e){t.exports='\x3c!-- ko ifnot: hideButton --\x3e\n\n\t\x3c!-- ko if: showIcon --\x3e\n\t\t<a\n\t\t\tclass="u-group-title__options"\n\t\t\tdata-bind="attr: {id:\'target_\'+uniqueId}, tippedDelegate"\n\t\t\thref="javascript:;"\n\t\t\trole="button"\n\t\t\tdata-content="{{tippedContent}}"\n\t\t\tdata-tipped-options="\n\t\t\t\tisTippedParent: true,\n\t\t\t\tskin:\'light\',\n\t\t\t\thideOthers:true,\n\t\t\t\thideOnClickOutside:true,\n\t\t\t\tshowOn: \'click\',\n\t\t\t\thideOn: \'click\',\n\t\t\t\tpadding: false,\n\t\t\t\tshowDelay: 0,\n\t\t\t\thideAfter: 0,\n\t\t\t\tfadeIn: 120,\n\t\t\t\tfadeOut: 0,\n\t\t\t\tposition:{\n\t\t\t\t\ttarget: \'bottomleft\',\n\t\t\t\t\ttooltip: \'topleft\'\n\t\t\t\t}">\n\t\t\t\x3c!-- ko component: {\n\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tname: \'ellipsis-h-regular\'\n\t\t\t\t\t}\n\t\t\t\t} --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</a>\n\t\x3c!--/ko--\x3e\n\n\t\x3c!-- ko if: useButton --\x3e\n\t\t<button\n\t\t\tid="target_{{uniqueId}}"\n\t\t\ttype="button"\n\t\t\tclass="btn btn-default main-header__button"\n\t\t\tdata-bind="tippedDelegate"\n\t\t\tdata-content="{{tippedContent}}"\n\t\t\tdata-tipped-options="\n\t\t\t\tisTippedParent: true,\n\t\t\t\tskin:\'light\',\n\t\t\t\thideOthers:true,\n\t\t\t\thideOnClickOutside:true,\n\t\t\t\tshowOn: \'click\',\n\t\t\t\thideOn: \'click\',\n\t\t\t\tpadding: false,\n\t\t\t\tshowDelay: 0,\n\t\t\t\thideAfter: 0,\n\t\t\t\tfadeIn: 120,\n\t\t\t\tfadeOut: 0,\n\t\t\t\tposition:{\n\t\t\t\t\ttarget: \'bottom\',\n\t\t\t\t\ttooltip: \'topleft\'\n\t\t\t\t}">\n\t\t\t<svg class="tipped-hide ma" width="3" height="13" viewBox="0 0 3 13" xmlns="http://www.w3.org/2000/svg" data-tipped="{{app.tl(\'Options\')}}">\n\t\t\t\t<path data-bind="attr: {d: app.consts.SVG.options}" fill-rule="evenodd"/>\n\t\t\t</svg>\n\t\t</button>\n\t\x3c!--/ko--\x3e\n\n\x3c!--/ko--\x3e\n\n<div data-bind="onRendered: OnRenderedTemplate"></div>\n'},3241:function(t,e){t.exports='<div id="{{uniqueId}}">\n    \x3c!-- ko ifnot: taskList --\x3e\n        <div class="px--xlarge">\n            \x3c!-- ko component: {\n                    name: \'list-state-loading-new\',\n                    params: {\n                        itemType: \'taskList\',\n                        format: \'normal\',\n                        showText: false\n                    }\n                } --\x3e\n            \x3c!-- /ko --\x3e\n        </div>\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- ko if: taskList --\x3e\n        <div class="w-options-list w-options-list--tipped">\n            <ul class="w-options-list__list">\n                \x3c!-- ko if: !isTemplate --\x3e\n                    \x3c!-- ko if: canAddTaskLists --\x3e\n                        <li data-bind="click:OnEditTaskList">\n                            <a class="w-options-list__item" href="javascript:;">\n                                <i class="fa fa-pencil w-options-list__icon"></i>\n                                <span class="w-options-list__text">{{app.tl(\'Edit List\')}}</span>\n                            </a>\n                        </li>\n                    \x3c!-- /ko --\x3e\n\n                    \x3c!-- ko if: canAddTaskLists --\x3e\n                        \x3c!-- ko if: ko.unwrap(taskList).canComplete() && !ko.unwrap(taskList).pinned() && !isProjectTemplate() --\x3e\n                            <li data-bind="click:OnCompleteTaskList">\n                                <a class="w-options-list__item" href="javascript:;">\n                                    <i class="fa fa-check w-options-list__icon"></i>\n                                    <span class="w-options-list__text">{{app.tl(\'Mark as Complete\')}}</span>\n                                </a>\n                            </li>\n                        \x3c!--/ko--\x3e\n                        \x3c!-- ko if: canAddTasks --\x3e\n                                <li data-bind="click:OnClickMoveOrCopy">\n                                    <a class="w-options-list__item" href="javascript:;">\n                                        <i class="fa fa-copy w-options-list__icon"></i>\n                                        <span class="w-options-list__text">{{app.tl(\'Move or Copy\')}}</span>\n                                    </a>\n                                </li>\n                                <li data-bind="click:OnClickDeleteTaskList">\n                                    <a class="w-options-list__item" href="javascript:;">\n                                        <i class="fa fa-trash w-options-list__icon"></i>\n                                        <span class="w-options-list__text">{{app.tl(\'Delete List\')}}</span>\n                                    </a>\n                                </li>\n                        \x3c!--/ko--\x3e\n                    \x3c!-- /ko --\x3e\n                \x3c!--/ko--\x3e\n\n                \x3c!-- ko if: isTemplate --\x3e\n                    <li data-bind="click:OnEditTaskListTemplate">\n                        <a class="w-options-list__item" href="javascript:;">\n                            <i class="fa fa-pencil w-options-list__icon"></i>\n                            <span class="w-options-list__text">{{app.tl(\'Edit\')}}</span>\n                        </a>\n                    </li>\n                    <li data-bind="click:OnDuplicateTaskListTemplate">\n                        <a class="w-options-list__item" href="javascript:;">\n                            <i class="fa fa-clone w-options-list__icon"></i>\n                            <span class="w-options-list__text">{{app.tl(\'Duplicate\')}}</span>\n                        </a>\n                    </li>\n                    <li data-bind="click:OnClickDeleteTaskListTemplate">\n                        <a class="w-options-list__item" href="javascript:;">\n                            <i class="fa fa-trash w-options-list__icon"></i>\n                            <span class="w-options-list__text">{{app.tl(\'Delete\')}}</span>\n                        </a>\n                    </li>\n                \x3c!--/ko--\x3e\n\n                <li data-bind="visible: ko.unwrap(taskList).numIncomplete() > 0 && canAddTasks() && !hasActiveFilter() && !shouldLoadTaskList">\n                    <a class="w-options-list__item tipped"\n                        data-tipped-parent="target_{{uniqueId}}"\n                        data-tipped-options="inline:\'{{uniqueId}}_tasksSortOptions\',stacked:true,tippedParent:{{uniqueId}},skin:\'light\',hideOthers:false,padding:false,position:\'right\'"\n                        href="javascript:;">\n                        <i class="fa fa-sort w-options-list__icon"></i>\n                        <span class="w-options-list__text">{{app.tl(\'Reorder Tasks By\')}}{{{app.localizationPreferences().ellipsis}}}</span>\n                    </a>\n\n                    <div class="w-options-list__list--hidden" id="{{uniqueId}}_tasksSortOptions">\n                        <div>\n                            <ul class="w-options-list__list">\n                                <li data-bind="event:{\'mouseover\':OnHideIcon, \'mouseout\':OnShowIcon}, click:function(i,e){OnUpdateSort(\'startdate\',e)}">\n                                    <a class="w-options-list__item" href="javascript:;">\n                                        <span class="w-options-list__text">{{app.tl(\'Start Date\')}}</span>\n                                    </a>\n                                </li>\n                                <li data-bind="event:{\'mouseover\':OnHideIcon, \'mouseout\':OnShowIcon}, click:function(i,e){OnUpdateSort(\'duedate\',e)}">\n                                    <a class="w-options-list__item" href="javascript:;">\n                                        <span class="w-options-list__text">{{app.tl(\'Due Date\')}}</span>\n                                    </a>\n                                </li>\n                                <li data-bind="event:{\'mouseover\':OnHideIcon, \'mouseout\':OnShowIcon}, click:function(i,e){OnUpdateSort(\'datecreated\',e)}">\n                                    <a class="w-options-list__item" href="javascript:;">\n                                        <span class="w-options-list__text">{{app.tl(\'Date Created\')}}</span>\n                                    </a>\n                                </li>\n                                <li data-bind="event:{\'mouseover\':OnHideIcon, \'mouseout\':OnShowIcon}, click:function(i,e){OnUpdateSort(\'responsible\',e)}">\n                                    <a class="w-options-list__item" href="javascript:;">\n                                        <span class="w-options-list__text">{{app.tl(\'Person Responsible\')}}</span>\n                                    </a>\n                                </li>\n                                <li data-bind="event:{\'mouseover\':OnHideIcon, \'mouseout\':OnShowIcon}, click:function(i,e){OnUpdateSort(\'priority\',e)}">\n                                    <a class="w-options-list__item" href="javascript:;">\n                                        <span class="w-options-list__text">{{app.tl(\'Priority\')}}</span>\n                                    </a>\n                                </li>\n                                <li data-bind="event:{\'mouseover\':OnHideIcon, \'mouseout\':OnShowIcon}, click:function(i,e){OnUpdateSort(\'name\',e)}">\n                                    <a class="w-options-list__item" href="javascript:;">\n                                        <span class="w-options-list__text">{{app.tl(\'Task Name\')}}</span>\n                                    </a>\n                                </li>\n                                <li data-bind="event:{\'mouseover\':OnHideIcon, \'mouseout\':OnShowIcon}, click:function(i,e){OnUpdateSort(\'estimatedtime\',e)}">\n                                    <a class="w-options-list__item" href="javascript:;">\n                                        <span class="w-options-list__text">{{app.tl(\'Estimated Time\')}}</span>\n                                    </a>\n                                </li>\n                            </ul>\n                        </div>\n                    </div>\n                </li>\n\n                <li data-bind="click:OnClickBulkEditTasks, visible: isTemplate">\n                    <a class="w-options-list__item" href="javascript:;">\n                        <i class="fa fa-pencil w-options-list__icon"></i>\n                        <span class="w-options-list__text">{{app.tl(\'Bulk Edit Tasks\')}}</span>\n                    </a>\n                </li>\n\n\t\t\t\t\x3c!-- ko ifnot: isProjectTemplate --\x3e\n\t\t\t\t\t<li data-bind="visible: !isTemplate">\n\t\t\t\t\t\t<a href="javascript:;"\n\t\t\t\t\t\t\tclass="w-options-list__item tipped"\n\t\t\t\t\t\t\tdata-tipped-parent="target_{{uniqueId}}"\n\t\t\t\t\t\t\tdata-tipped-options="inline:\'{{uniqueId}}_tippedMenuTaskListReportOpts\',stacked:true,tippedParent:{{uniqueId}},skin:\'light\',hideOthers:false,padding:false,position:\'right\'">\n\t\t\t\t\t\t\t<i class="fa fa-file-o w-options-list__icon"></i>\n\t\t\t\t\t\t\t<span class="w-options-list__text">{{app.tl(\'Reports\')}}{{{app.localizationPreferences().ellipsis}}}</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<div class="w-options-list__list--hidden" id="{{uniqueId}}_tippedMenuTaskListReportOpts">\n\t\t\t\t\t\t\t<ul class="w-options-list__list">\n\t\t\t\t\t\t\t\t<li data-bind="click:OnGetTaskListReport">\n\t\t\t\t\t\t\t\t\t<a class="w-options-list__item" href="javascript:;">\n\t\t\t\t\t\t\t\t\t\t<i class="fa fa-file-o w-options-list__icon"></i>\n\t\t\t\t\t\t\t\t\t\t<span class="w-options-list__text">{{app.tl(\'Task List Report\')}}</span>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li data-bind="click:OnGetTimeReport">\n\t\t\t\t\t\t\t\t\t<a class="w-options-list__item" href="javascript:;">\n\t\t\t\t\t\t\t\t\t\t<i class="fa fa-clock-o w-options-list__icon"></i>\n\t\t\t\t\t\t\t\t\t\t<span class="w-options-list__text">{{app.tl(\'Time Report\')}}</span>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\x3c!-- ko if: canAddTaskLists --\x3e\n\t\t\t\t\t<li data-bind="visible: !showAdvancedOpts() && !isTemplate, click: OnClickToggleAdvancedOptions">\n\t\t\t\t\t\t<a class="w-options-list__item" href="javascript:;">\n\t\t\t\t\t\t\t<i class="fa w-options-list__icon"></i>\n\t\t\t\t\t\t\t<span class="w-options-list__text">{{app.tl(\'Advanced\')}} &raquo;</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\x3c!-- /ko --\x3e\n            </ul>\n            \x3c!-- ko if: !isTemplate && canAddTaskLists() --\x3e\n                <div data-bind="visible: showAdvancedOpts">\n                    <ul class="w-options-list__list w-options-list__list--advanced-menu" data-bind="fadeVisible:showAdvancedOpts">\n                        \x3c!-- ko if: !isTemplate --\x3e\n                            \x3c!-- ko if: ko.unwrap(taskList).numIncomplete() > 0 && canAddTasks() && canEditAllTasks --\x3e\n                                <li data-bind="click:OnClickBulkEditTasks">\n                                    <a class="w-options-list__item" href="javascript:;">\n                                        <i class="fa fa-pencil w-options-list__icon"></i>\n                                        <span class="w-options-list__text">{{app.tl(\'Bulk Edit Tasks\')}}</span>\n                                    </a>\n                                </li>\n                            \x3c!-- /ko --\x3e\n\n                            <li data-bind="click:OnQuicklyAddTasks,visible:canAddTasks">\n                                <a class="w-options-list__item" href="javascript:;">\n                                    <i class="fa fa-plus-circle w-options-list__icon"></i>\n                                    <span class="w-options-list__text">{{app.tl(\'Quickly Add Tasks\')}}</span>\n                                </a>\n                            </li>\n                            \x3c!-- ko if: canAddTaskLists() && !isProjectTemplate() --\x3e\n                                <li data-bind="click:OnPostTasksViaEmail,visible:canAddTasks">\n                                    <a class="w-options-list__item" href="javascript:;">\n                                        <i class="fa fa-envelope w-options-list__icon"></i>\n                                        <span class="w-options-list__text">{{app.tl(\'Post Tasks via Email\')}}</span>\n                                    </a>\n                                </li>\n                            \x3c!-- /ko --\x3e\n\n                            \x3c!-- ko if: canAddTaskLists() && taskList()--\x3e\n                                <li data-bind="click:OnPinUnpinTaskList">\n                                    <a class="w-options-list__item" href="javascript:;">\n                                        <i class="fa fa-thumb-tack w-options-list__icon" data-bind="css:{\'ico-pin\':!ko.unwrap(taskList).pinned(), \'ico-pin-unpinned\':ko.unwrap(taskList).pinned()}"></i>\n                                        \x3c!-- ko if: ko.unwrap(taskList).pinned() --\x3e\n                                            <span class="w-options-list__text">{{app.tl(\'Unpin this List\')}}</span>\n                                        \x3c!--/ko--\x3e\n                                        \x3c!-- ko ifnot: ko.unwrap(taskList).pinned() --\x3e\n                                            <span class="w-options-list__text">{{app.tl(\'Pin this List\')}}</span>\n                                        \x3c!--/ko--\x3e\n                                    </a>\n                                </li>\n                            \x3c!-- /ko --\x3e\n\n                            \x3c!-- ko if: canAddTasks() --\x3e\n                                <li>\n                                    <a href="javascript:;"\n                                        class="w-options-list__item tipped"\n                                        data-tipped-parent="target_{{uniqueId}}"\n                                        data-tipped-options="inline:\'{{uniqueId}}_tippedMenuTaskListTemplateOpts\',stacked:true,tippedParent:{{uniqueId}},skin:\'light\',hideOthers:false,padding:false,position:\'right\'">\n                                        <i class="fa fa-save w-options-list__icon"></i>\n                                        <span class="w-options-list__text">{{app.tl(\'Templates\')}}{{{app.localizationPreferences().ellipsis}}}</span>\n                                    </a>\n                                    <div class="w-options-list__list--hidden" id="{{uniqueId}}_tippedMenuTaskListTemplateOpts">\n                                        <ul class="w-options-list__list">\n                                            <li data-bind="click: function(){app.GoTo(\'task-templates\')}, visible: app.loggedInUser.permissions.canAccessTemplates">\n                                                <a class="w-options-list__item" href="javascript:;">\n                                                    <i class="fa fa-list w-options-list__icon"></i>\n                                                    <span class="w-options-list__text">{{app.tl(\'Manage Task Templates\')}}</span>\n                                                </a>\n                                            </li>\n                                            <li data-bind="click:OnAddTasksFromTemplate, visible:canAddTasks">\n                                                <a class="w-options-list__item" href="javascript:;">\n                                                    <i class="fa fa-plus-circle w-options-list__icon"></i>\n                                                    <span class="w-options-list__text">{{app.tl(\'Add Tasks from Template\')}}</span>\n                                                </a>\n                                            </li>\n                                            <li data-bind="click:OnSaveAsTemplate, visible: app.loggedInUser.permissions.canAccessTemplates">\n                                                <a class="w-options-list__item" href="javascript:;">\n                                                    <i class="fa fa-save w-options-list__icon"></i>\n                                                    <span class="w-options-list__text">{{app.tl(\'Save as Template\')}}</span>\n                                                </a>\n                                            </li>\n                                        </ul>\n                                    </div>\n                                </li>\n                            \x3c!-- /ko --\x3e\n                        \x3c!--/ko--\x3e\n                        <li data-bind="click: OnClickToggleAdvancedOptions">\n                            <a class="w-options-list__item" href="javascript:;">\n                                <i class="fa w-options-list__icon"></i>\n                                <span class="w-options-list__text">&laquo; {{app.tl(\'Less\')}}</span>\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n\t\t\t\x3c!--/ko--\x3e\n\n            \x3c!-- ko if: !isTemplate && !canAddTaskLists() --\x3e\n                \x3c!-- ko if: !isTemplate --\x3e\n                    <div data-bind="visible: showAdvancedOpts">\n                        <ul class="w-options-list__list w-options-list__list--advanced-menu" data-bind="fadeVisible: showAdvancedOpts">\n                            \x3c!-- ko if: ko.unwrap(taskList).numIncomplete() > 0 && canAddTasks() && canEditAllTasks --\x3e\n                                <li data-bind="click: OnClickBulkEditTasks">\n                                    <a class="w-options-list__item" href="javascript:;">\n                                        <i class="fa fa-pencil  w-options-list__icon"></i>\n                                        <span class="w-options-list__text">{{app.tl(\'Bulk Edit Tasks\')}}</span>\n                                    </a>\n                                </li>\n                            \x3c!-- /ko --\x3e\n                            <li data-bind="click: OnQuicklyAddTasks, visible: canAddTasks">\n                                <a class="w-options-list__item" href="javascript:;">\n                                    <i class="fa fa-plus-circle  w-options-list__icon"></i>\n                                    <span class="w-options-list__text">{{app.tl(\'Quickly Add Tasks\')}}</span>\n                                </a>\n                            </li>\n                            \x3c!-- ko if: canAddTasks --\x3e\n                                <li>\n                                    <a href="javascript:;"\n                                        class="w-options-list__item tipped"\n                                        data-tipped-parent="target_{{uniqueId}}"\n                                        data-tipped-options="inline:\'{{uniqueId}}_tippedMenuTaskListTemplateOpts\',stacked:true,tippedParent:{{uniqueId}},skin:\'light\',hideOthers:false,padding:false,position:\'right\'">\n                                        <i class="fa fa-save w-options-list__icon"></i>\n                                        <span class="w-options-list__text">{{app.tl(\'Templates\')}}{{{app.localizationPreferences().ellipsis}}}</span>\n                                    </a>\n                                    <div class="w-options-list__list--hidden" id="{{uniqueId}}_tippedMenuTaskListTemplateOpts">\n                                        <ul class="w-options-list__list">\n                                            <li data-bind="click: function(){app.GoTo(\'task-templates\')}, visible: app.loggedInUser.permissions.canAccessTemplates">\n                                                <a class="w-options-list__item" href="javascript:;">\n                                                    <i class="fa fa-list w-options-list__icon"></i>\n                                                    <span class="w-options-list__text">{{app.tl(\'Manage Task Templates\')}}</span>\n                                                </a>\n                                            </li>\n                                            <li data-bind="click:OnAddTasksFromTemplate, visible:canAddTasks">\n                                                <a class="w-options-list__item" href="javascript:;">\n                                                    <i class="fa fa-plus-circle w-options-list__icon"></i>\n                                                    <span class="w-options-list__text">{{app.tl(\'Add Tasks from Template\')}}</span>\n                                                </a>\n                                            </li>\n                                            <li data-bind="click:OnSaveAsTemplate, visible: app.loggedInUser.permissions.canAccessTemplates">\n                                                <a class="w-options-list__item" href="javascript:;">\n                                                    <i class="fa fa-save w-options-list__icon"></i>\n                                                    <span class="w-options-list__text">{{app.tl(\'Save as Template\')}}</span>\n                                                </a>\n                                            </li>\n                                        </ul>\n                                    </div>\n                                </li>\n                            \x3c!-- /ko --\x3e\n                        </ul>\n                    </div>\n                \x3c!--/ko--\x3e\n\t\t\t\x3c!--/ko--\x3e\n\n        </div>\n    \x3c!--/ko--\x3e\n</div>\n\n<div data-bind="onRendered: OnRenderedTippedContent"></div>\n'},3281:function(t,e){t.exports="\x3c!-- ko if: task --\x3e\n\t\x3c!-- ko component: { name:'widget-tipped-last-comments', params:{ type:'tasks', id:id, selectedItem:task() } } --\x3e\x3c!-- /ko --\x3e\n\x3c!--/ko--\x3e"},3282:function(t,e){t.exports="\x3c!-- ko if: task --\x3e\n\t<div style=\"min-width:400px;min-height:285px;text-align:center;\">\n\t\t\x3c!-- ko component: { name: 'widget-quick-date-set', params:{ useTipped:false, item:task, id:taskId, dateFormat:'YYYYMMDD', tippedParentId:tippedParentId } } --\x3e\x3c!--/ko--\x3e\n\t</div>\n\x3c!--/ko--\x3e\n"},3283:function(t,e){t.exports="\x3c!-- ko component: { name: 'widget-tipped-follow-options', params: { item: task, type: 'task' } } --\x3e\x3c!--/ko--\x3e\n"},3284:function(t,e){t.exports="\x3c!-- ko if: task --\x3e\n\t\x3c!-- ko if: taskFollowers().length > 0 --\x3e\n\t\t<div class=\"flex flex-column mb--medium overflow-y--auto\" style=\"max-height: 300px;\">\n\t\t\t<span class=\"font-weight--semibold\">\n\t\t\t\t{{app.tl('Following this Task')}}\n\t\t\t</span>\n\n\t\t\t<div class=\"flex flex-column\">\n\t\t\t\t\x3c!-- ko foreach: taskFollowers --\x3e\n\t\t\t\t\t\x3c!-- ko if: type() == 'user' && $parent.isNewCompany($index()) --\x3e\n\t\t\t\t\t\t<span class=\"font-weight--semibold mt--small\">\n\t\t\t\t\t\t\t{{companyName}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t<div class=\"flex flex-items-center pt--small\">\n\t\t\t\t\t\t\x3c!-- ko if: type() == 'team' --\x3e\n\t\t\t\t\t\t\t{{{ app.utility.GetTeamLogo(teamLogoInfo, ['u-team-logo--tiny']) }}}\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\x3c!-- ko if: type() == 'company' --\x3e\n\t\t\t\t\t\t\t<img class=\"radius--circle u-avatar--xxsmall\"\n\t\t\t\t\t\t\t\tdata-bind=\"\n\t\t\t\t\t\t\t\t\tattr: { src: logo },\n\t\t\t\t\t\t\t\t\tevent: { error: app.OnImageThumbLoadFail.bind($data,'company') }\n\t\t\t\t\t\t\t\t\t\">\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\x3c!-- ko if: type() == 'user' --\x3e\n\t\t\t\t\t\t\t<img class=\"radius--circle u-avatar--xxsmall\"\n\t\t\t\t\t\t\t\tdata-bind=\"\n\t\t\t\t\t\t\t\t\tattr: { src: avatar },\n\t\t\t\t\t\t\t\t\tevent: { error: app.OnImageThumbLoadFail.bind($data,'person') }\n\t\t\t\t\t\t\t\t\t\">\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t<span class=\"ml--small\">\n\t\t\t\t\t\t\t{{name}}\n\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t<span class=\"ml--small\">\n\t\t\t\t\t\t\t\x3c!-- ko if: followingComments() && !followingChanges() --\x3e\n\t\t\t\t\t\t\t\t({{app.tl('only comments')}})\n\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: !followingComments() && followingChanges() --\x3e\n\t\t\t\t\t\t\t\t({{app.tl('only task changes')}})\n\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: followingComments() && followingChanges() --\x3e\n\t\t\t\t\t\t\t\t({{app.tl('all notifications')}})\n\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</div>\n\t\t</div>\n\t\x3c!-- /ko --\x3e\n\n\t<div class=\"flex flex-items-center flex-justify-between width--100\">\n\t\t\x3c!-- ko if: task().canEdit --\x3e\n\t\t\t<button\tclass=\"btn btn-default\"\n\t\t\t\tdata-bind=\"click:OnClickAddFollowers\">\n\t\t\t\t{{ app.tl('Manage') }}\n\t\t\t</button>\n\t\t\t&nbsp; {{app.tl('or')}} &nbsp;\n\t\t\x3c!--/ko--\x3e\n\n\t\t<button\n\t\t\ttype=\"button\"\n\t\t\tclass=\"btn btn-default ml--auto\"\n\t\t\tdata-content=\"{{followersMenuTippedContent}}\"\n\t\t\tdata-tipped-parent=\"{{selector}}\"\n\t\t\tdata-tipped-options=\"tippedParent:'{{selector}}',stacked:true, hideOthers:false, skin:'light',position:{target:'rightmiddle',tooltip:'lefttop'},hideOn: false, hideAfter: 300\"\n\t\t\tdata-bind=\"tippedDelegate, css:{'btn-default':!task().userFollowingComments() && !task().userFollowingChanges(), 'btn-primary':task().userFollowingComments() || task().userFollowingChanges()}\">\n\t\t\t{{task().userFollowingChanges()||task().userFollowingComments()?app.tl('Following')+app.localizationPreferences().ellipsis:app.tl('Follow')}}\n\t\t</button>\n\t</div>\n\x3c!--/ko--\x3e"},3285:function(t,e){t.exports='\x3c!-- ko if: task --\x3e\n\t<div data-bind="onRendered:OnRendered" style="width:150px; height:128px;">\n\t\t<ul class="tippedMenu priority-tip">\n\t\t\t<li data-bind="click:function(){task().OnUpdatePriority(\'high\')}, css:{\'sel\':task().priority()==\'high\'}">\n\t\t\t\t<a href="jaavscript:;" class="tPriorityA pHigh">\n\t\t\t\t\t<i class="icon-exclamation-sign icon-large"></i> {{app.tl(\'High\')}}\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t\t<li data-bind="click:function(){task().OnUpdatePriority(\'medium\')}, css:{\'sel\':task().priority()==\'medium\'}">\n\t\t\t\t<a href="jaavscript:;" class="tPriorityA pMedium">\n\t\t\t\t\t<i class="icon-exclamation-sign icon-large"></i> {{app.tl(\'Medium\')}}\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t\t<li data-bind="click:function(){task().OnUpdatePriority(\'low\')}, css:{\'sel\':task().priority()==\'low\'}">\n\t\t\t\t<a href="jaavscript:;" class="tPriorityA pLow">\n\t\t\t\t\t<i class="icon-exclamation-sign icon-large"></i> {{app.tl(\'Low\')}}\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t\t<li data-bind="click:function(){task().OnUpdatePriority(\'none\')}, css:{\'sel\':task().priority()==\'\'}">\n\t\t\t\t<a href="jaavscript:;" class="tPriorityA pNone">\n\t\t\t\t\t<i class="icon-exclamation-sign icon-large"></i> {{app.tl(\'None\')}}\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n\x3c!--/ko--\x3e\n<div data-bind="onRendered:OnRendered"></div>\n'},3286:function(t,e){t.exports='\x3c!-- ko if: task --\x3e\n\t<div style="width:220px;height:40px;">\n\t\t<div style="padding:0 10px 0 10px;font-weight:bold;">{{app.tl(\'Set Progress\')}}: {{task().progress}}%</div>\n\t\t<div style="margin:10px 0 0 0;padding:0 10px 0 10px;width:200px;">\n\t\t\t<div id="progressSlider" data-bind="slider: {\n\t\t\t\tstart: sliderVal(),\n\t\t\t\trange: {\n\t\t\t\t\tmin: 0,\n\t\t\t\t\tmax: progressMax()\n\t\t\t\t},\n\t\t\t\tstep: 10,\n\t\t\t\tcallbacks: {\n\t\t\t\t\tslide: OnSlide,\n\t\t\t\t\tchange: OnSliderChanged\n\t\t\t\t}\n\t\t\t}" style="height:10px;width:200px;"></div>\n\t\t</div>\n\t</div>\n\x3c!--/ko--\x3e\n<div data-bind="onRendered:OnRendered"></div>\n'},3287:function(t,e){t.exports='\x3c!-- ko if: task --\x3e\n\t\x3c!-- ko if: mode != \'template\' --\x3e\n\t\t\x3c!-- ko if: loadingRecurringTasks() --\x3e\n\t\t\t<div class="mliLoading">{{app.tl("Loading")}}{{{app.localizationPreferences().ellipsis}}}</div>\n\t\t\x3c!--/ko--\x3e\n\t\t\x3c!-- ko ifnot: loadingRecurringTasks() --\x3e\n\t\t\t\x3c!-- ko if: recurringTasks().length > 0 --\x3e\n\t\t\t\t<div style="font-weight:bold;padding:5px 0 5px 0;font-size:12px;">\n\t\t\t\t\t{{app.tl(\'Recurring Task - Upcoming Due Dates\')}}\n\t\t\t\t</div>\n\t\t\t\t<div style="display:block;height:1px;background:#EEE;background: -webkit-gradient(radial, 50% 50%, 0, 50% 50%, 350, from(#EEE), to(#fff));"></div>\n\n\t\t\t\t<div style="width:310px;max-height:274px;overflow-x:hidden;overflow-y:auto" data-bind="outsidescroll: false">\n\t\t\t\t\t<table cellpadding="5" cellspacing="0" border="0" style="width:100%;">\n\t\t\t\t\t\t<tbody data-bind="foreach:recurringTasks">\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\x3c!-- <td width="16" style="border-bottom:1px solid #EEE;">\n\t\t\t\t\t\t\t\t\t<img src="//cdn.teamwork.com/images/icons/checkBox.png?x=2" width="16" height="16" alt="">\n\t\t\t\t\t\t\t\t</td> --\x3e\n\t\t\t\t\t\t\t\t<td style="border-bottom:1px solid #EEE;font-size:12px;">\n\t\t\t\t\t\t\t\t\t{{date.format(\'dddd, DD MMMM YYYY\')}}\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\x3c!-- ko if: exists --\x3e\n\t\t\t\t\t\t\t\t\t<td style="width:20px;height:32px;border-bottom:1px solid #EEE;" class="tipped" data-bind="attr:{data-tipped:app.tl(\'View Task\')}" data-tipped-options="position:\'rightmiddle\'">\n\t\t\t\t\t\t\t\t\t\t<a data-bind="attr:{\'href\':\'#tasks/\'+taskId}">\n\t\t\t\t\t\t\t\t\t\t\t<img src="//cdn.teamwork.com/images/icons/viewtask.png" width="16" height="16">\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\t\x3c!-- ko ifnot: exists --\x3e\n\t\t\t\t\t\t\t\t\t<td style="width:32px;height:32px;border-bottom:1px solid #EEE;" class="tipped" data-bind="attr:{data-tipped:app.tl(\'Create this task now\')}" data-tipped-options="position:\'rightmiddle\'">\n\t\t\t\t\t\t\t\t\t\t<img src="//cdn.teamwork.com/images/icons/add.png" width="16" height="16" style="background:#FFF;white-space:nowrap;font-size:10px;border:1px solid #EEE;padding:2px;overflow:hidden;cursor:pointer;cursor:hand;" onmouseover="this.style.borderColor=\'#CCC\'" onmouseout="this.style.borderColor=\'#EEE\'" data-bind="click:$parent.OnCreateRecurringTask">\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t\t<div style="display:block;margin-top:10px;height:1px;background:#EEE;background: -webkit-gradient(radial, 50% 50%, 0, 50% 50%, 350, from(#EEE), to(#fff));"></div>\n\t\t\t\t<div style="width:280px;padding:10px 5px 10px 5px;">\n\t\t\t\t\t<div style="color:#888;">{{app.tl(\'Each task will be created when the previous task is marked as completed\')}}.</div>\n\t\t\t\t</div>\n\t\t\t\x3c!--/ko--\x3e\n\t\t\t\x3c!-- ko if: recurringTasks().length == 0 --\x3e\n\t\t\t\t{{app.tl(\'No more recurring dates\')}}\n\t\t\t\x3c!--/ko--\x3e\n\t\t\x3c!--/ko--\x3e\n\t\x3c!-- /ko --\x3e\n\t\x3c!-- ko if: mode == \'template\' --\x3e\n\t\t{{ templateRepeatTxt }}\n\t\x3c!-- /ko --\x3e\n\x3c!--/ko--\x3e'},3288:function(t,e){t.exports="\x3c!-- ko if: task --\x3e\n\t<div data-bind=\"visible:!loadingTime()\" style=\"min-width:230px\">\n\t\t\x3c!--ko if: loggedMinutes() > 0 ||  subtasksLoggedMinutes() > 0--\x3e\n\t\t\t<table style=\"font-size:12px; margin-bottom: 5px;\" cellspacing=\"5\">\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<strong><a data-bind=\"attr: { href: '#tasks/' +  id + '?scrollTo=time' }\">{{app.tl('Time Logged')}}</a></strong>:\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\x3c!-- ko if: Math.floor(loggedMinutes()/60) > 0 --\x3e\n\t\t\t\t\t\t\t\t{{Math.floor(loggedMinutes()/60)}}\n\t\t\t\t\t\t\t\t\x3c!-- ko if: loggedMinutes() >= 120 --\x3e{{app.tl('hours')}}\x3c!-- /ko --\x3e\x3c!-- ko if: loggedMinutes() < 120 --\x3e{{app.tl('hour')}}\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: loggedMinutes()%60 > 0 --\x3e\n\t\t\t\t\t\t\t\t{{Math.floor(loggedMinutes()%60)}}\n\t\t\t\t\t\t\t\t\x3c!-- ko if: loggedMinutes()%60 == 1 --\x3e{{app.tl('minute')}}\x3c!-- /ko --\x3e\x3c!-- ko if: loggedMinutes()%60 > 1 --\x3e{{app.tl('minutes')}}\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: loggedMinutes() == 0 --\x3e\n\t\t\t\t\t\t\t\t{{app.tl('None')}}\n\t\t\t\t\t\t\t\x3c!-- /ko--\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: billableMinutes() > 0 --\x3e\n\t\t\t\t\t\t\t<span style=\"color:#888;\">(\n\t\t\t\t\t\t\t\t{{app.tl('Billable')}}:\n\t\t\t\t\t\t\t\t\x3c!-- ko if: Math.floor(billableMinutes()/60) > 0 --\x3e\n\t\t\t\t\t\t\t\t\t{{Math.floor(billableMinutes()/60)}}\n\t\t\t\t\t\t\t\t\t\x3c!-- ko if: billableMinutes() >= 120 --\x3e{{app.tl('hours')}}\x3c!-- /ko --\x3e\x3c!-- ko if: billableMinutes() < 120 --\x3e{{app.tl('hour')}}\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- ko if: billableMinutes()%60 > 0 --\x3e\n\t\t\t\t\t\t\t\t\t{{Math.floor(billableMinutes()%60)}}\n\t\t\t\t\t\t\t\t\t\x3c!-- ko if: billableMinutes()%60 == 1 --\x3e{{app.tl('minute')}}\x3c!-- /ko --\x3e\x3c!-- ko if: billableMinutes()%60 > 1 --\x3e{{app.tl('minutes')}}\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t)</span>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t\x3c!-- ko if: subtasksLoggedMinutes() > 0 --\x3e\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td><strong>{{app.tl('Subtasks')}}</strong>:</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\x3c!-- ko if: Math.floor(subtasksLoggedMinutes()/60) > 0 --\x3e\n\t\t\t\t\t\t\t\t{{Math.floor(subtasksLoggedMinutes()/60)}}\n\t\t\t\t\t\t\t\t\x3c!-- ko if: subtasksLoggedMinutes() >= 120 --\x3e{{app.tl('hours')}}\x3c!-- /ko --\x3e\x3c!-- ko if: subtasksLoggedMinutes() < 120 --\x3e{{app.tl('hour')}}\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: subtasksLoggedMinutes()%60 > 0 --\x3e\n\t\t\t\t\t\t\t\t{{Math.floor(subtasksLoggedMinutes()%60)}}\n\t\t\t\t\t\t\t\t\x3c!-- ko if: subtasksLoggedMinutes()%60 == 1 --\x3e{{app.tl('minute')}}\x3c!-- /ko --\x3e\x3c!-- ko if: subtasksLoggedMinutes()%60 > 1 --\x3e{{app.tl('minutes')}}\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: subtasksBillableTimeLoggedMinutes() > 0 --\x3e\n\t\t\t\t\t\t\t<span style=\"color:#888;\">(\n\t\t\t\t\t\t\t\t{{app.tl('Billable')}}:\n\t\t\t\t\t\t\t\t\x3c!-- ko if: Math.floor(subtasksBillableTimeLoggedMinutes()/60) > 0 --\x3e\n\t\t\t\t\t\t\t\t\t{{Math.floor(subtasksBillableTimeLoggedMinutes()/60)}}\n\t\t\t\t\t\t\t\t\t\x3c!-- ko if: subtasksBillableTimeLoggedMinutes() >= 120 --\x3e{{app.tl('hours')}}\x3c!-- /ko --\x3e\x3c!-- ko if: subtasksBillableTimeLoggedMinutes() < 120 --\x3e{{app.tl('hour')}}\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- ko if: subtasksBillableTimeLoggedMinutes()%60 > 0 --\x3e\n\t\t\t\t\t\t\t\t\t{{Math.floor(subtasksBillableTimeLoggedMinutes()%60)}}\n\t\t\t\t\t\t\t\t\t\x3c!-- ko if: subtasksBillableTimeLoggedMinutes()%60 == 1 --\x3e{{app.tl('minute')}}\x3c!-- /ko --\x3e\x3c!-- ko if: subtasksBillableTimeLoggedMinutes()%60 > 1 --\x3e{{app.tl('minutes')}}\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t)</span>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td style=\"border-top:1px solid #eee;\">\n\t\t\t\t\t\t\t<strong>{{app.tl('Total')}}</strong>:\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td style=\"border-top:1px solid #eee;\">\n\t\t\t\t\t\t\t\x3c!-- ko if: Math.floor(total_minutes()/60) > 0 --\x3e\n\t\t\t\t\t\t\t\t{{Math.floor(total_minutes()/60)}}\n\t\t\t\t\t\t\t\t\x3c!-- ko if: total_minutes() >= 120 --\x3e{{app.tl('hours')}}\x3c!-- /ko --\x3e\x3c!-- ko if: total_minutes() < 120 --\x3e{{app.tl('hour')}}\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: total_minutes()%60 > 0 --\x3e\n\t\t\t\t\t\t\t\t{{Math.floor(total_minutes()%60)}}\n\t\t\t\t\t\t\t\t\x3c!-- ko if: total_minutes()%60 == 1 --\x3e{{app.tl('minute')}}\x3c!-- /ko --\x3e\x3c!-- ko if: total_minutes()%60 > 1 --\x3e{{app.tl('minutes')}}\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: total_billableMinutes() > 0 --\x3e\n\t\t\t\t\t\t\t<span style=\"color:#888;\">(\n\t\t\t\t\t\t\t\t{{app.tl('Billable')}}:\n\t\t\t\t\t\t\t\t\x3c!-- ko if: Math.floor(total_billableMinutes()/60) > 0 --\x3e\n\t\t\t\t\t\t\t\t\t{{Math.floor(total_billableMinutes()/60)}}\n\t\t\t\t\t\t\t\t\t\x3c!-- ko if: total_billableMinutes() >= 120 --\x3e{{app.tl('hours')}}\x3c!-- /ko --\x3e\x3c!-- ko if: total_billableMinutes() < 120 --\x3e{{app.tl('hour')}}\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- ko if: total_billableMinutes()%60 > 0 --\x3e\n\t\t\t\t\t\t\t\t\t{{Math.floor(total_billableMinutes()%60)}}\n\t\t\t\t\t\t\t\t\t\x3c!-- ko if: total_billableMinutes()%60 == 1 --\x3e{{app.tl('minute')}}\x3c!-- /ko --\x3e\x3c!-- ko if: total_billableMinutes()%60 > 1 --\x3e{{app.tl('minutes')}}\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t)</span>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t</span></td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t\x3c!--/ko--\x3e\n\t\t<ul style=\"list-style:none;margin:0px;padding:0px;text-align:center;\">\n\t\t\t<li style=\"display:inline-block;text-align:center;float:left;\">\n\t\t\t\t<button type=\"button\" class=\"btn btn-default\" data-bind=\"click:OnLogTaskTime\">\n\t\t\t\t\t<i class=\"ico-timer\" style=\"color:#888;margin-left:-4px;\"></i>\n\t\t\t\t\t\x3c!-- ko if: task().hasLoggedTime() --\x3e\n\t\t\t\t\t\t{{app.tl('Log More Time')}}\n\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\x3c!-- ko ifnot: task().hasLoggedTime() --\x3e\n\t\t\t\t\t\t{{app.tl('Log Time')}}\n\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t</button>\n\t\t\t</li>\n\t\t\t<li style=\"display:inline-block;line-height:30px;padding:0px 5px;vertical-align:middle;text-align:center;\">{{app.tl('or')}}</li>\n\t\t\t<li class=\"startTimer\" style=\"display:inline-block;text-align:center;float:right;\">\n\t\t\t\t<button type=\"button\" class=\"btn btn-default\" data-bind=\"click: OnStartTaskTimer\">\n\t\t\t\t\t\x3c!-- ko if: activeTaskTimer() --\x3e\n\t\t\t\t\t\t\x3c!-- ko if: activeTaskTimer().running() --\x3e\n\t\t\t\t\t\t\t<i class=\"fa fa-fw fa-square\"></i>\n\t\t\t\t\t\t\t{{app.tl('Stop Timer')}}\n\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\x3c!-- ko ifnot: activeTaskTimer().running() --\x3e\n\t\t\t\t\t\t\t<i class=\"fa fa-fw fa-play\"></i>\n\t\t\t\t\t\t\t{{app.tl('Resume Timer')}}\n\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\x3c!-- ko ifnot: activeTaskTimer() --\x3e\n\t\t\t\t\t\t<i class=\"fa fa-fw fa-play\"></i>\n\t\t\t\t\t\t{{app.tl('Start Timer')}}\n\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t</button>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n\t<div data-bind=\"visible:loadingTime()\">\n\t\t<div class=\"mliLoading\">{{app.tl(\"Loading\")}}{{{app.localizationPreferences().ellipsis}}}</div>\n\t</div>\n\x3c!--/ko--\x3e\n"},3863:function(t,e,s){(function(n,i){var a,o,r=function(t,e){return function(){return t.apply(e,arguments)}},l=[].indexOf||function(t){for(var e=0,s=this.length;e<s;e++)if(e in this&&this[e]===t)return e;return-1},p=function(t,e){return(+t%(e=+e)+e)%e};a=[s(2621),s(164),s(1133),s(1116),s(1125),s(1138),s(1118),s(14),s(2620),s(2619),s(1129),s(1249),s(1225),s(165),s(1223)],void 0!==(o=function(t,e,s,a,o,d,c,u,k,h,m,f,b,x){var g;return g=function(){function t(t){var s,i,a,p,c,f,b,g,T,y,v,w,I,D,O,C,_,A,L,S,M,P,E;for(null==t&&(t={}),this.confirmCancel=r(this.confirmCancel,this),this.ShowRoleNameModal=r(this.ShowRoleNameModal,this),this.getTemplateRoleName=r(this.getTemplateRoleName,this),this.doesTaskHaveRole=r(this.doesTaskHaveRole,this),this.getTemplateDaysOffset=r(this.getTemplateDaysOffset,this),this.OnAvailablePeopleChanged=r(this.OnAvailablePeopleChanged,this),this.removePriorityTags=r(this.removePriorityTags,this),this.removeTimeTag=r(this.removeTimeTag,this),this.setupTemplateOptions=r(this.setupTemplateOptions,this),this.showTriggerInfoMessage=r(this.showTriggerInfoMessage,this),this.OnClickSelectMeInDropdown=r(this.OnClickSelectMeInDropdown,this),this.OnChangeTags=r(this.OnChangeTags,this),this.removeUsers=r(this.removeUsers,this),this.addUsers=r(this.addUsers,this),this.OnTypeaheadItemRemoved=r(this.OnTypeaheadItemRemoved,this),this.OnTypeaheadItemAdded=r(this.OnTypeaheadItemAdded,this),this.OnAutoCompleteFocus=r(this.OnAutoCompleteFocus,this),this.OnKeyboardInput=r(this.OnKeyboardInput,this),this.OnAutoCompleteChange=r(this.OnAutoCompleteChange,this),this.OnProgressUpdated=r(this.OnProgressUpdated,this),this.OnCommentFollowersChanged=r(this.OnCommentFollowersChanged,this),this.OnChangeFollowersChanged=r(this.OnChangeFollowersChanged,this),this.OnUpdatePrivacyIds=r(this.OnUpdatePrivacyIds,this),this.OnClickNotifyByEmail=r(this.OnClickNotifyByEmail,this),this.OnClickCreateMultiple=r(this.OnClickCreateMultiple,this),this.OnPeoplePickerDoubleClicked=r(this.OnPeoplePickerDoubleClicked,this),this.OnClickCancel=r(this.OnClickCancel,this),this.OnSubmit=r(this.OnSubmit,this),this.OnNotifyTWEvent=r(this.OnNotifyTWEvent,this),this.OnTabChange=r(this.OnTabChange,this),this.OnChangeResponsibleIds=r(this.OnChangeResponsibleIds,this),this.OnBeforeChangeResponsibleIds=r(this.OnBeforeChangeResponsibleIds,this),this.OnFollowersPickerChange=r(this.OnFollowersPickerChange,this),this.OnAssigneePickerChange=r(this.OnAssigneePickerChange,this),this.OnPickerFetch=r(this.OnPickerFetch,this),this.FocusInput=r(this.FocusInput,this),this.OnRendered=r(this.OnRendered,this),this.params=t,"embed"===this.params.mode&&(this.params.taskId=0,this.params.task=new o,this.params.task.taskListId(this.params.taskListId),this.params.task.projectId(this.params.projectId),this.deskTicketId=this.params.deskTicketId),this.taskList=t.taskList||null,this.bodyDroppableInitialState=e.observable(app.bodyDroppable()),this.isQuickView=null!=(D=this.params.isQuickView)&&D,this.repeatsTippedContent=k,this.pushTippedContent=h,Mousetrap.pause(),console.assert("number"==typeof t.taskId),console.assert(0===t.taskId||"object"==typeof t.task),this.subscriptions=[],this.taskListLoaded=e.observable(!1),this.isFocusedOnNameInput=e.observable(!0),this.showingDescription=e.observable(!1),this.createMultiple=e.observable(!1),this.uniqueId="addOrEditTask-"+Date.now(),this.mode=null!=(O=t.mode)?O:"normal",this.inModal=null!=(C=t.inModal)&&C,this.focusInputId=app.utility.EnsureObservable(t.focusInputId),this.subscriptions.push(this.focusInputId.subscribe(this.FocusInput)),this.pushSubTasks=app.loggedInUser.preferences.taskPushSubTasks,this.pushDependents=app.loggedInUser.preferences.taskPushDependentTasks,this.tippedPushTaskId="pushTaskTipped-"+Date.now(),this.languageIsEnglish="EN"===app.loggedInUser.localization.languageCode(),this.selectTasksToPushOptions=[{id:"only",text:this.languageIsEnglish?"only":app.tl("This task only")}],this.allIsAnOption=e.observable(!1),0===this.params.task.parentTaskId()?this.params.task.numActiveSubTasks()>0?(this.selectTasksToPushOptions.push({id:"subtasks",text:this.languageIsEnglish?"including subtasks":app.tl("Subtasks")}),this.params.task.numDependents()>0&&(this.selectTasksToPushOptions.push({id:"all",text:this.languageIsEnglish?"including subtasks and dependents":app.tl("Subtasks and dependents")}),this.allIsAnOption(!0))):this.params.task.numDependents()>0&&(this.selectTasksToPushOptions.push({id:"all",text:this.languageIsEnglish?"including dependents":app.tl("Dependents")}),this.allIsAnOption(!0)):this.params.task.numActiveSubTasks()>0?(this.selectTasksToPushOptions.push({id:"subtasks",text:this.languageIsEnglish?"including subtasks":app.tl("Subtasks")}),this.params.task.numDependents()>1&&(this.selectTasksToPushOptions.push({id:"all",text:this.languageIsEnglish?"including subtasks and dependents":app.tl("Subtasks and dependents")}),this.allIsAnOption(!0))):this.params.task.numDependents()>1&&(this.selectTasksToPushOptions.push({id:"all",text:this.languageIsEnglish?"including dependents":app.tl("Dependents")}),this.allIsAnOption(!0)),this.subscriptions.push(this.shouldAutoFocusInput=e.pureComputed(function(t){return function(){var e;return"description"!==(e=t.tabs.selCode())&&"customFields"!==e}}(this))),this.subscriptions.push(this.showDateOptions=e.pureComputed(function(t){return function(){return t.selectTasksToPushOptions.length>1}}(this))),this.subscriptions.push(this.progressText=e.pureComputed(function(t){return function(){return t.task.numActiveSubTasks()>0||t.task.numPredecessors()>0?app.tl("This task can't be completed due to dependencies"):"template"===t.mode||"newTaskDefaults"===t.mode||0===t.task.id()?app.tl("This task can't be set to [_s]%",100):app.tl("Marking progress as [_s]% will complete this task",100)}}(this))),this.subscriptions.push(this.progressMax=e.pureComputed(function(t){return function(){return t.task.numActiveSubTasks()>0||t.task.numPredecessors()>0||"template"===t.mode||"newTaskDefaults"===t.mode||0===t.task.id()?90:100}}(this))),P=this.selectTasksToPushOptions.filter(function(t){return"subtasks"===t.id}).length>0,g="only",this.pushSubTasks()&&this.pushDependents()&&this.allIsAnOption()?g="all":!this.pushSubTasks()&&this.pushDependents()&&this.allIsAnOption()?g="all":this.pushSubTasks()&&!this.pushDependents()&&P&&(g="subtasks"),this.selectTasksToPush=e.observable(g),this.subscriptions.push(this.selectTasksToPushText=e.pureComputed(function(t){return function(){var e,s,n,i,a,o,r;for(o=t.selectTasksToPushOptions,r=t.selectTasksToPush(),e=0,n=o.length;e<n;e++)if(a=o[e],a.id===r)return a.text;if("all"===r)for(s=0,i=o.length;s<i;s++)if(a=o[s],"subtasks"===a.id)return"subtasks";return o[0].text}}(this))),this.subscriptions.push(this.selectTasksToPush.subscribe(function(t){return function(e){switch(e){case"only":t.pushSubTasks(!1),t.pushDependents(!1);break;case"all":t.pushSubTasks(!0),t.pushDependents(!0);break;case"subtasks":t.pushSubTasks(!0),t.pushDependents(!1)}return t.pushOnUpdate(e),Tipped.hide("#"+t.tippedPushTaskId)}}(this))),this.subscriptions.push(this.childDropzone=app.shared.get("viewModel/WidgetFileAttachmentDropzone/widget-file-dropzone-"+this.uniqueId)),this.attachmentsEdited=e.observable(!1),this.attachedFilesReady=e.observable(!0),this.subscriptions.push(app.ko.postbox.subscribe("widget-file-dropzone-"+this.uniqueId,function(t){return function(e){if("attachedFilesReady"===e.action&&t.attachedFilesReady(e.ready),"attachmentsEdited"===e.action&&("edited"===e.subType&&t.attachmentsEdited(!0),"unedited"===e.subType))return t.attachmentsEdited(!1)}}(this))),this.task=t.task.Clone(),this.holderId="editTaskForm"+this.task.id(),this.originalTask=t.task.Clone(),e.unwrap(this.task.numAttachments)>0&&(null==this.task.attachments||0===this.task.attachments().length)&&this.task.GetFiles(),this.startDateMoment=this.task.startDateAsMoment,this.startDateMomentUI=e.pureComputed({read:this.startDateMoment,write:function(t){return function(e){return t.removeDateTag("start"),t.startDateMoment(e)}}(this)}),this.inheritingFromMilestone=e.observable(e.unwrap(this.task.dueDateFromMilestone)),this.inheritingFromMilestone()&&this.task.dueDateAsMoment(null),I=e.unwrap(this.task.parentTaskId),I&&!this.task.id()&&(y=x.get("twProjects-task-"+I+"-lastduedate"),null!==y&&this.task.dueDateAsMoment(y?u(""+y):null),null!==(v=x.get("twProjects-task-"+I+"-laststartdate"))&&this.task.startDateAsMoment(v?u(""+v):null)),this.subscriptions.push(this.editingDueDateMoment=e.pureComputed(function(t){return function(){return null==t.task||e.unwrap(t.inheritingFromMilestone)?null:e.unwrap(t.task.dueDateAsMoment)}}(this))),this.subscriptions.push(this.dueDateMomentUI=e.pureComputed({read:this.editingDueDateMoment,write:function(t){return function(s){return t.removeDateTag("due"),null!==s?t.inheritingFromMilestone(!1):t.inheritingFromMilestone(e.unwrap(t.task.dueDateFromMilestone)),t.task.dueDateAsMoment(s)}}(this)})),this.subscriptions.push(this.task.startDate.subscribe(function(t){return function(s){var n,i,a;if((null!=(n=t.taskList)&&null!=(i=n.milestone)&&"function"==typeof i.deadline&&null!=(a=i.deadline())?a.isBefore(s):void 0)&&!t.task.dueDateAsMoment()&&t.dueDateMomentUI(u(s).subtract(1,"days")),(I=e.unwrap(t.task.parentTaskId))&&"19700101"!==s)return x.set("twProjects-task-"+I+"-laststartdate",s)}}(this))),this.subscriptions.push(this.task.dueDate.subscribe(function(t){return function(s){if((I=e.unwrap(t.task.parentTaskId))&&"19700101"!==s)return x.set("twProjects-task-"+I+"-lastduedate",s)}}(this))),this.ignoreSoftLimit=e.observable(!1),this.tmpDueDate=e.observable(this.startDateMoment()),this.tmpStartDate=e.observable(this.dueDateMomentUI()),this.subscriptions.push(this.startDateMoment.subscribe(function(t){return function(e){if(null!=e)return t.tmpStartDate(e)}}(this))),this.subscriptions.push(this.dueDateMomentUI.subscribe(function(t){return function(e){if(null!=e)return t.tmpDueDate(e)}}(this))),this.subscriptions.push(this.hasDateChanged=e.pureComputed(function(t){return function(){var e;return e=!1,t.tmpDueDate()!==t.startDateMoment()?e=!0:t.tmpStartDate()!==t.dueDateMomentUI()&&(e=!0),e}}(this))),null===this.taskList?(this.taskListLoaded(!1),app.api.get(app.prefixApi("tasklists/"+this.task.taskListId()+".json?getNewTaskDefaults=true&includeCustomFields=true","API_PREFIX_V1","API_PREFIX_V1")).then(function(t){return function(e){var s,n;if(t.taskList=new d(e.response.todoList),t.task.defaultsTaskId(null!=e.response.todoList.newTaskDefaults?e.response.todoList.newTaskDefaults.defaultsTaskId:0),"embed"===t.mode)return n=new o(null,t.taskList),s=n.GetNewJSON(),t.task.UpdateData(s),t.estimatedHoursPart(Math.floor(t.task.estimatedMinutes()/60)),t.estimatedMinsPart(t.task.estimatedMinutes()%60)}}(this)).finally(function(t){return function(){return t.taskListLoaded(!0)}}(this))):this.taskListLoaded(!0),this.formValidator=new m("#"+this.uniqueId),this.peopleEdited=e.observable(!1),this.initialResponsibleIsSet=!1,this.notifyByEmail=e.observable(!1),this.isSubmitting=e.observable(!1),this.canSubmit=e.pureComputed(function(t){return function(){return"newTaskDefaults"===t.mode||!!t.task.name().trim().length&&!!t.attachedFilesReady()}}(this)),this.subscriptions.push(this.canSubmit),this.privacyIds=e.observableArray([]),this.flatPrivacyIds=e.observableArray([]),this.commentFollowersReady=e.observable(!1),this.commentFollowers=e.observableArray([]),this.commentFollowersUpdated=e.observable(!1),this.subscriptions.push(this.commentFollowers.subscribe(function(t){return function(){return t.commentFollowersReady()&&t.commentFollowersUpdated(!0),t.commentFollowersReady(!0)}}(this),null,"arrayChange")),this.changeFollowersReady=e.observable(!1),this.changeFollowers=e.observableArray([]),this.changeFollowersUpdated=e.observable(!1),this.subscriptions.push(this.changeFollowers.subscribe(function(t){return function(){return t.changeFollowersReady()&&t.changeFollowersUpdated(!0),t.changeFollowersReady(!0)}}(this),null,"arrayChange")),this.showMultipleText="newTaskDefaults"!==this.mode&&0===this.task.id(),"template"===this.mode&&this.taskListLoaded()?this.setupTemplateOptions():this.taskListLoaded.subscribe(function(t){return function(e){if(null!=e&&e)return t.setupTemplateOptions()}}(this)),this.repeatOptions=e.observableArray([{id:"norepeat",text:app.tl("Does Not Repeat")},{id:"daily",text:app.tl("Daily")},{id:"weekdays",text:app.tl("Every Weekday")+" ("+app.tl("Mon")+"-"+app.tl("Fri")+")"},{id:"selecteddays",text:""+app.tl("On Selected Days")+app.localizationPreferences().ellipsis},{id:"weekly",text:app.tl("Weekly")},{id:"everyxdays",text:app.tl("Every X Days")},{id:"everyxdaysweekday",text:app.tl("Every X Days, only Weekdays")},{id:"every2weeks",text:app.tl("Every [_s] weeks",2)},{id:"every3weeks",text:app.tl("Every [_s] weeks",3)},{id:"every4weeks",text:app.tl("Every [_s] weeks",4)},{id:"every5weeks",text:app.tl("Every [_s] weeks",5)},{id:"every6weeks",text:app.tl("Every [_s] weeks",6)},{id:"monthly",text:app.tl("Monthly")},{id:"every2months",text:app.tl("Every [_s] months",2)},{id:"every3months",text:app.tl("Every [_s] months",3)},{id:"every4months",text:app.tl("Every [_s] months",4)},{id:"every6months",text:app.tl("Every [_s] months",6)},{id:"yearly",text:app.tl("Yearly")}]),this.everyXDaysText=app.tl("Every [_s] Days",4),this.everyXDaysTextPrefix=this.everyXDaysText.split("4")[0],this.everyXDaysTextSuffix=this.everyXDaysText.split("4")[1],this.subscriptions.push(app.ko.postbox.subscribe("editing-task",function(t){return function(e){if(e.taskId!==t.task.id())return t.OnClickCancel()}}(this))),app.ko.postbox.publish("editing-task",{taskId:this.task.id()}),null!=this.task.startDateOffset&&""===this.task.startDateOffset()&&this.task.startDateOffset(-1),null!=this.task.dueDateOffset&&""===this.task.dueDateOffset()&&this.task.dueDateOffset(-1),this.subscriptions.push(this.taskPrivacyType=e.pureComputed(function(t){return function(){return t.taskListLoaded()&&t.taskList.isPrivate()?"taskList":"task"}}(this))),this.subscriptions.push(this.taskPrivacyId=e.pureComputed(function(t){return function(){return t.taskListLoaded()&&null!=t.taskList&&t.taskList.isPrivate()?t.taskList.id():t.taskListLoaded()&&0===t.task.id()?0===t.task.parentTaskId()?t.task.defaultsTaskId():t.task.parentTaskId():t.task.id()}}(this))),this.taskId=0===this.task.id()?this.task.defaultsTaskId():this.task.id(),this.subscriptions.push(this.taskPrivacyId.subscribe(function(t){return function(s){return t.subscriptions.push(e.postbox.subscribe(t.taskPrivacyType()+"_"+s+"_ChangeFollowerIdsChanged",t.OnChangeFollowersChanged)),t.subscriptions.push(e.postbox.subscribe(t.taskPrivacyType()+"_"+s+"_CommentFollowerIdsChanged",t.OnCommentFollowersChanged))}}(this))),this.subscriptions.push(this.taskInputReady=e.pureComputed(function(t){return function(){return null!=t.taskPrivacyType()&&null!=t.taskPrivacyId()}}(this))),this.assignedToNames=e.observableArray([]),this.changeFollowerNames=e.observableArray([]),this.commentFollowerNames=e.observableArray([]),this.notifyKey="-task_"+this.taskPrivacyId(),this.typeaheadInputId="input-"+this.uniqueId,this.replaceUserOnTagAdded=e.observable(this.task.responsiblePartyIds().length>0),app.featureFlip.check("teams")()?(this.subscriptions.push(this.task.responsiblePartyIds.subscribe(this.OnBeforeChangeResponsibleIds,this,"beforeChange")),this.subscriptions.push(this.task.responsiblePartyIds.subscribe(this.OnChangeResponsibleIds))):this.subscriptions.push(e.postbox.subscribe("availablePeopleInitialized"+e.unwrap(this.notifyKey),function(t){return function(){return t.subscriptions.push(t.task.responsiblePartyIds.subscribe(t.OnBeforeChangeResponsibleIds,t,"beforeChange")),t.subscriptions.push(t.task.responsiblePartyIds.subscribe(t.OnChangeResponsibleIds))}}(this))),this.subscriptions.push(e.postbox.subscribe("privacyIdsChanged"+this.notifyKey,this.OnUpdatePrivacyIds)),this.subscriptions.push(e.postbox.subscribe(this.taskPrivacyType()+"_"+this.taskPrivacyId()+"_ChangeFollowerIdsChanged",this.OnChangeFollowersChanged)),this.subscriptions.push(e.postbox.subscribe(this.taskPrivacyType()+"_"+this.taskPrivacyId()+"_CommentFollowerIdsChanged",this.OnCommentFollowersChanged)),this.subscriptions.push(e.postbox.subscribe(this.typeaheadInputId+"-typeaheadItemAdded",this.OnTypeaheadItemAdded)),this.subscriptions.push(e.postbox.subscribe(this.typeaheadInputId+"-typeaheadItemRemoved",this.OnTypeaheadItemRemoved)),this.subscriptions.push(e.postbox.subscribe(this.typeaheadInputId+"-availablePeopleChanged",this.OnAvailablePeopleChanged)),this.subscriptions.push(e.postbox.subscribe("esc-btn-press",this.confirmCancel)),this.subscriptions.push(e.postbox.subscribe("people-picker-double-clicked",this.OnPeoplePickerDoubleClicked)),this.subscriptions.push(e.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent)),s="newTaskDefaults"===this.mode?this.taskList.newTaskDefaults.estimatedMinutes():this.task.estimatedMinutes(),this.estimatedHoursPart=e.observable(Math.floor(s/60)),this.estimatedMinsPart=e.observable(s%60),E=function(t){return function(){var e,s,n;return e=parseInt(t.estimatedHoursPart(),10),s=parseInt(t.estimatedMinsPart(),10),n=60*e+s,t.task.estimatedMinutes(n)}}(this),this.subscriptions.push(this.estimatedHoursPart.subscribe(E)),this.subscriptions.push(this.estimatedMinsPart.subscribe(E)),this.projectId="template"===this.mode&&("function"==typeof(i=this.task).projectId?i.projectId():void 0)>0?this.task.projectId():"template"===this.mode?this.taskList.projectId():"embed"===this.mode?this.params.projectId:null!=app.currentRoute().projectId?app.currentRoute().projectId:this.task.projectId(),this.project=app.projectInfo.get(this.projectId),c=function(t){return function(){return 0===t.task.id()&&(!!t.project().notifySettings.taskAssignee()&&(!!t.task.responsiblePartyIds().length&&(t.task.responsiblePartyIds().toString()!==app.loggedInUser.id().toString()&&"0"!==t.task.responsiblePartyIds().toString())))}}(this),null!=this.project()?this.notifyByEmail(c()):this.subscriptions.push(this.project.subscribe(function(t){return function(e){if(null!=e)return t.notifyByEmail(c())}}(this))),this.subscriptions.push(this.allowNotifyAnyone=e.pureComputed(function(t){return function(){var e;return null!=(e=t.project())?e.notifySettings.allowNotifyAnyone():void 0}}(this))),this.subscriptions.push(this.canAddFiles=e.pureComputed(function(t){return function(){return null!=t.project()&&t.project().permissions.canAddFiles()&&"1"===t.project().activePages.files().toString()}}(this))),this.subscriptions.push(this.canLogTime=e.pureComputed(function(t){return function(){var e;return null!=(e=t.project())?e.permissions.canLogTime():void 0}}(this))),this.subscriptions.push(this.canViewEstimates=e.pureComputed(function(t){return function(){var e;return null!=(e=t.project())?e.permissions.viewEstimatedTime():void 0}}(this))),this.subscriptions.push(this.canEditTags=e.pureComputed(function(t){return function(){var e;return null!=(e=t.project())?e.permissions.canAddTasks():void 0}}(this))),this.subscriptions.push(this.shouldShowNotifyByEmail=e.pureComputed(function(t){return function(){if(t.allowNotifyAnyone())return!0;if(app.featureFlip.check("teams")()){if(l.call(t.task.responsiblePartyIds(),"0")>=0)return!1}else if("0"===t.task.responsiblePartyIds())return!1;return!0}}(this))),this.subscriptions.push(this.shouldShowCustomFields=e.pureComputed(function(t){return function(){return app.featureFlip.check("customfieldstasks",{unwrap:!0})}}())),this.selectedCustomFields=e.observableArray(null!=(_="function"==typeof(a=this.task).customFields?a.customFields():void 0)?_:[]),this.subscriptions.push(this.canSetPrivacy=e.computed(function(t){return function(){var e;return!!t.taskListLoaded()&&(!t.taskList.isPrivate()&&(0===t.task.parentTaskId()&&(null!=(e=t.project())?e.permissions.canSetPrivacy():void 0)))}}(this))),this.stats=app.projectInfo.getStats(this.task.projectId(),{get:'{"columns":"count"}'}),this.subscriptions.push(this.canSelectColumn=e.pureComputed(function(t){return function(){var e;return parseInt(null!=(e=t.stats())?e.columns.count():void 0,10)>0}}(this))),this.subscriptions.push(this.isTemplateProject=e.pureComputed(function(t){return function(){var t;return null!=(t=app.currentRoute().project)?t.isTemplate():void 0}}())),this.oldBoardColumnId=null!=(A=this.task.boardColumn.id())?A:0,this.oldBoardColumnName=null!=(L=this.task.boardColumn.name())?L:"",this.tabs=[],this.tabs.push({name:app.tl("Who & When"),code:"whoAndWhen",iconClass:"user"}),this.tabs.push({name:app.tl("Description"),code:"description",iconClass:"description-tw"}),-1===["newTaskDefaults"].indexOf(this.mode)&&this.tabs.push({name:app.tl("Files"),code:"files",iconClass:"paperclip",enabled:this.canAddFiles}),"newTaskDefaults"===this.mode&&"function"==typeof(p=this.taskList).isPrivate&&p.isPrivate()||this.tabs.push({name:app.tl("Privacy"),code:"privacy",iconClass:"lock",enabled:this.canSetPrivacy}),this.tabs.push({name:app.tl("Priority"),code:"priority",iconClass:"priority"}),-1===["template"].indexOf(this.mode)&&this.tabs.push({name:app.tl("Progress & Time"),code:"progress",iconClass:"timer"}),this.tabs.push({name:app.tl("Followers"),code:"followers",iconClass:"followers"}),"newTaskDefaults"!==this.mode&&this.tabs.push({name:app.tl("Dependencies"),code:"dependencies",iconClass:"dependencies"}),"newTaskDefaults"!==this.mode&&0===this.task.parentTaskId()&&this.tabs.push({name:app.tl("Repeats"),code:"repeats",iconClass:"repeat"}),this.isTemplateProject()||this.tabs.push({name:app.tl("Reminders"),code:"reminders",iconClass:"reminders"}),this.tabs.push({name:app.tl("Tags"),code:"tags",iconClass:"tag",enabled:app.account.tagsEnabled}),this.tabs.push({name:app.tl("Board Column"),code:"column",iconClass:"columns",enabled:this.canSelectColumn}),this.tabs.push({name:app.tl("Custom Fields"),code:"customFields",iconClass:"custom-field",enabled:this.shouldShowCustomFields}),this.tabs.selCode=app.utility.EnsureObservable(this.params.selCode||"whoAndWhen"),this.OnTabChange(this.tabs.selCode()),this.subscriptions.push(this.tabs.selCode.subscribe(this.OnTabChange)),this.subscriptions.push(this.showingDescription=e.computed(function(t){return function(){return"description"===t.tabs.selCode()}}(this))),this.assigneePickerVisible=e.observable("whoAndWhen"===this.tabs.selCode()),this.privacyPickerVisible=e.observable("privacy"===this.tabs.selCode()),this.followersPickerVisible=e.observable("followers"===this.tabs.selCode()),this.canRenderReminders=e.observable(!1),this.startDateAsUserFormat=app.utility.GetReadWriteUserFormattedDateString(this.task.startDateAsMoment,{observableValueType:"moment"},this),this.dueDateAsUserFormat=app.utility.GetReadWriteUserFormattedDateString(this.task.dueDateAsMoment,{observableValueType:"moment"},this),S=["due","start"],b=function(t){return function(s){return t[s+"DateIsValid"]=e.pureComputed(function(){var e;return null!=(e=t.task[s+"DateAsMoment"]())&&e.isValid()}),t.subscriptions.push(t[s+"DateIsValid"])}}(this),T=0,w=S.length;T<w;T++)f=S[T],b(f);this.startAndDueDays=e.observableArray([{id:-1,text:app.tl("No Date")},{id:0,text:app.tl("Day [_s]",1)+" ("+app.tl("Today")+")"},{id:1,text:app.tl("Day [_s]",2)+" ("+app.tl("Tomorrow")+")"}].concat(app.utility.createOffsetDayOptions(2))),null==this.task.recurring&&(this.task.recurring={}),null==this.task.recurring.frequency&&(this.task.recurring.frequency=e.observable("norepeat")),null==this.task.recurring.days&&(this.task.recurring.days=e.observableArray([])),null==this.task.recurring.endOn&&(this.task.recurring.endOn=e.observable("")),null==this.task.recurring.monthlyOn&&(this.task.recurring.monthlyOn=e.observable("monthDay")),this.task.recurring.endDateOption=e.observable(""===this.task.recurring.endOn()?"noEndDate":"ends"),""===this.task.recurring.endOn()&&this.task.recurring.endOn((new u).add(6,"weeks")),this.task.recurring.endOnUserFormat=e.observable(u(this.task.recurring.endOn())),null==this.task.recurring.duration&&(this.task.recurring.duration=e.observable(2)),this.subscriptions.push(this.task.recurring.endOnUserFormat.subscribe(function(t){return function(){return t.task.recurring.endDateOption("ends")}}(this))),this.subscriptions.push(this.task.recurring.duration.subscribe(function(t){return function(){if(t.task.recurring.duration()<2&&(t.task.recurring.duration(2),app.flash.Warn(app.tl("Duration must be greater than [_s] day. To set a daily task choose the 'Daily' repeat option","1"))),t.task.recurring.duration()>364)return t.task.recurring.duration(364),app.flash.Warn(app.tl("Duration must be less than [_s] days. To set a yearly task choose the 'Yearly' repeat option","365"))}}(this))),this.templateTaskName=e.pureComputed({read:function(t){return function(){var e,s,i;return e=t.task.name(),t.doesTaskHaveRole()?(i=/^\[([^\]]*)\]/,null===(s=i.exec(e))?e:(s[1],n.trim(e.substring(s[0].length,e.length)))):e}}(this),write:function(t){return function(e){return t.task.name(e)}}(this),owner:this}),this.subscriptions.push(this.templateTaskName),this.previewDates=e.pureComputed(function(t){return function(){var e,s,n,i,a,o,r,l,p,d;if("template"===t.mode)return[];if("norepeat"===t.task.recurring.frequency())return[];if(null==(p=t.task.dueDateAsMoment()))return[];if(!p.isValid())return[];if("noEndDate"===t.task.recurring.endDateOption())n=p.clone().add(10,"years");else if(n=t.task.recurring.endOnUserFormat(),!(null!=n?n.isValid():void 0))return[];for(a=p.clone(),s=[a.clone()],e=0;a<n&&s.length<12&&e<100;){switch(e++,t.task.recurring.frequency()){case"daily":a.add(1,"days");break;case"weekdays":if(a.add(1,"days"),0===a.weekday()||a.weekday()>5)continue;break;case"selecteddays":if(a.add(1,"days"),-1===t.task.recurring.days().indexOf(""+(a.weekday()+1)))continue;break;case"everyxdaysweekday":a.add(t.task.recurring.duration(),"days"),0===a.day()?a.add(1,"days"):6===a.day()&&a.add(-1,"days");break;case"everyxdays":a.add(t.task.recurring.duration(),"days");break;case"weekly":a.add(7,"days");break;case"every2weeks":a.add(2,"weeks");break;case"every3weeks":a.add(3,"weeks");break;case"every4weeks":a.add(4,"weeks");break;case"every5weeks":a.add(5,"weeks");break;case"every6weeks":a.add(6,"weeks");break;case"yearly":a.add(1,"years");break;case"monthly":case"every2months":case"every3months":case"every4months":case"every6months":if(o=parseInt(t.task.recurring.frequency().replace("every",""),10)||1,"monthDay"===t.task.recurring.monthlyOn())a=p.clone().add(o*e,"month");else if("lastDayOfMonth"===t.task.recurring.monthlyOn())a.add(o,"month").endOf("month");else{if(r=p.nthWeekDayOfMonth(),l=a.clone(),l.date()<l.daysInMonth()-7)for(d=a.add(o,"month").startOf("month");r>0&&(d.weekday()===l.day()&&r--,0!==r);)d.add(1,"days");else for(d=a.clone().add(o,"month").endOf("month"),i=0;i<7&&d.weekday()!==a.weekday();)d.subtract(1,"day"),i++;a=d}break;default:a.add(1,"days")}a<n&&s.push(a.clone())}return s}}(this)),this.previewDates(),this.subscriptions.push(this.previewDates),this.subscriptions.push(this.previewDatesStart=e.pureComputed(function(t){return function(){return null!=t.previewDates()&&t.previewDates().length?app.tl("The first task's due date is [_s].",'<a href="javascript:;" style="font-size:12px;" class="blue">'+t.previewDates()[0].format("DD MMMM YYYY")+"</a>"):""}}(this))),this.subscriptions.push(this.previewDatesEnd=e.pureComputed(function(t){return function(){return null!=t.previewDates()&&t.previewDates().length>1?app.tl("The next due date is [_s].",'<a href="javascript:;" style="font-size:12px;" class="blue">'+t.previewDates()[1].format("DD MMMM YYYY")+"</a>"):""}}(this))),this.koObservable=e.observable(""),this.removeAllTasklistDefaultReminders=e.observable(!1),this.subscriptions.push(this.canAddFiles),this.subscriptions.push(this.canSubmit),this.subscriptions.push(this.taskPrivacyId),this.subscriptions.push(this.canLogTime),this.subscriptions.push(this.canViewEstimates),this.subscriptions.push(this.canEditTags),null==this.task.dueDateOffset||"newTaskDefaults"!==(M=this.mode)&&"template"!==M||this.subscriptions.push(this.task.dueDateOffset.subscribe(function(t){return function(e){var s,n;if(t.task.reminders().length>0){if(-1===parseInt(e,10))return app.flash.Error(app.tl("Reminders will be wiped if there is no due date."));if(n=!1,s=[],t.task.reminders().forEach(function(t,i){return t.relativeNumberOfDays()>parseInt(e,10)?n=!0:s.push(t)}),t.task.reminders(s),n)return app.flash.Error(app.tl("Some reminders were cleared as they would have been set in the past."))}}}(this))),app.ko.postbox.publish("recalculate-sidebar",!0),app.InitOnShow(this)}return t.prototype.OnShow=function(){},t.prototype.OnRendered=function(){this.FocusInput()},t.prototype.FocusInput=function(){null!=this.focusInputId()?setTimeout(function(t){return function(){var e;if(e=document.getElementById("customField_"+t.focusInputId()),"#"+t.holderId+" .editTaskForm",null!=e)return e.classList.contains("select2")?i(e).select2("open"):e.focus()}}(this),500):(app.FocusFirstInput(this.holderId),this.$input=n("#"+this.typeaheadInputId),setTimeout(function(t){return function(){return Mousetrap.unpause()}}(),100))},t.prototype.OnPickerFetch=function(t){var e,s,n,i,a,o,r,l;e=null!=(a=t.changeFollowers)?a:[],s=null!=(o=t.commentFollowers)?o:[],i=null!=(r=null!=(l=t.eventData)?l.initialPrivacyIds:void 0)?r:[],n=function(t){return t.map(function(t){switch(t.type){case"user":return""+t.id;case"company":return"c"+t.id;case"team":return"t"+t.id}})},i.length&&!this.privacyIds().length&&this.privacyIds(i),e.length&&!this.changeFollowers().length&&this.changeFollowers(n(e)),s.length&&!this.commentFollowers().length&&this.commentFollowers(n(s))},t.prototype.OnAssigneePickerChange=function(t){var e,s,n,i,a;for(s=[],a=t.selectedItems,n=0,i=a.length;n<i;n++)e=a[n],s.push({id:e.id,label:e.label,firstName:e.label,lastName:"",type:e.type});this.assignedToNames(s)},t.prototype.OnFollowersPickerChange=function(t){var e,s,n,i,a,o,r,l;for(s=[],r=t.changeFollowers,n=0,a=r.length;n<a;n++)e=r[n],s.push({id:e.id,label:e.label,type:e.type});for(this.changeFollowerNames(s),s=[],l=t.commentFollowers,i=0,o=l.length;i<o;i++)e=l[i],s.push({id:e.id,label:e.label,type:e.type});this.commentFollowerNames(s)},t.prototype.OnBeforeChangeResponsibleIds=function(t){this.initialResponsibleIsSet||(null!=t&&t.length>0&&(app.featureFlip.check("teams")()?this.initialResponsibleIds=app.utility.ConvertToArray(t):this.initialResponsibleIds=t.split(",").map(Number).filter(function(t){return function(t){return!isNaN(t)}}())),this.initialResponsibleIsSet=!0),app.featureFlip.check("teams")()?this._previousResponsibleIds=app.utility.ConvertToArray(t):this._previousResponsibleIds=parseInt(t,10)},t.prototype.OnChangeResponsibleIds=function(t){var s,n,i,a,o,r;if(null!=t){if(app.featureFlip.check("teams")()){if(null!=this._previousResponsibleIds&&app.utility.AreEqual(this._previousResponsibleIds,t))return;if(this.task.assignedTo(this.assignedToNames().filter(function(t){return"user"===t.type}).map(function(t){return{id:t.id,firstName:t.firstName,lastName:t.lastName}})),this.task.assignedToCompanies(this.assignedToNames().filter(function(t){return"company"===t.type}).map(function(t){return{companyId:t.id,companyName:t.label}})),this.task.assignedToTeams(this.assignedToNames().filter(function(t){return"team"===t.type}).map(function(t){return{teamId:t.id,teamName:t.label}})),null!=this._previousResponsibleIds){if(app.utility.ArrayHasSameValues(this._previousResponsibleIds,t))return;l.call(this._previousResponsibleIds,"0")>=0&&t.length>1?(o=t.filter(function(t){return"0"!==t.toString()}).slice(),this.task.responsiblePartyIds(o)):(l.call(t,"0")>=0&&!(l.call(this._previousResponsibleIds,"0")>=0)||!this.task.responsiblePartyIds().length)&&(this.task.responsiblePartyIds(["0"]),this.task.assignedTo([]),this.task.assignedToCompanies([]),this.task.assignedToTeams([]))}}else e.tasks.schedule(function(e){return function(){return"0"===t||"-1"===t?(e.task.assignedTo([]),e.task.assignedToCompanies([]),e.task.assignedToTeams([])):e.task.assignedTo(e.assignedToNames().map(function(t){return{id:t.id,firstName:t.firstName,lastName:t.lastName}}))}}(this));if("template"===this.mode){if((s=parseInt(t,10))===this._previousResponsibleIds)return;-1===s&&this.ShowRoleNameModal()}else r=this.notifyByEmail(),"0"===t.toString()||t.toString()===app.loggedInUser.id().toString()?r=!1:(null!=(n=this.project())?n.notifySettings.taskAssignee():void 0)&&("0"===(i=null!=(a=this._previousResponsibleIds)?a.toString():void 0)||i===app.loggedInUser.id().toString())&&(r=!0),this.notifyByEmail(r)}},t.prototype.OnTabChange=function(t){return b("Task action","Task form "+t),"description"===t?app.bodyDroppable(!1):app.bodyDroppable(this.bodyDroppableInitialState()),app.NextTick(function(e){return function(){switch(t){case"progress":return n("#taskEstimateHours"+e.task.id()).select();case"reminders":return e.canRenderReminders(!0);case"whoAndWhen":if(!e.assigneePickerVisible())return e.assigneePickerVisible(!0);break;case"privacy":if(!e.privacyPickerVisible())return e.privacyPickerVisible(!0);break;case"followers":if(!e.followersPickerVisible())return e.followersPickerVisible(!0)}}}(this))},t.prototype.OnNotifyTWEvent=function(t){var e,s;if("task"===t.itemType&&(null!=(e=this.taskList)?e.id():void 0)===t.taskListId&&"task-completed"===t.subType&&(null!=(s=this.task)?s.id():void 0)===t.itemId)return this.OnClickCancel()},t.prototype.OnSubmit=function(t,s){var n,a,o,r,p,d,c,k,h,m,f,b,x,g,T,y,v,w,I,D,O,C,_,A,L,S,M,P,E;if(null==t&&(t={}),this.formValidator.canSubmit()){if(!this.canSubmit())return!1;if(!this.isSubmitting()||t&&t.skipIsSubmittingCheck){if(this.isSubmitting(!0),this.params.task&&this.params.task.isUpdating(!0),f=function(t){return null!=t&&u.isMoment(t)?t.format("YYYYMMDD"):""},y=function(t){var e,s,n,i;for(i=[],e=0,s=t.length;e<s;e++)n=t[e],i.push({id:n.id(),color:n.color(),name:n.name(),projectId:n.projectId()});return i},m=function(t,e){return"string"==typeof t&&""===t.trim()&&(t=0),"string"==typeof e&&""===e.trim()&&(e=0),60*parseInt(t,10)+parseInt(e,10)},x=function(t){switch(t){case"none":case"":return"";case"low":return 200;case"medium":return 100;case"high":return 1;default:return-1}},c=function(t){var s,n,i,a;for(s=[],i=0,a=t.length;i<a;i++)n=t[i],s.push(e.unwrap(n.id));return s.join(",")},b=function(t,s){return t=e.unwrap(t),s=e.unwrap(s),null==s||"user"===s?t:t[0]===s[0]?t:s[0]+t},k=function(t,s){var n,i,a,o,r,l,p;if(null==s&&(s=app.tl("Nobody")),t.length,!t.length)return s;for(app.featureFlip.check("teams")()&&(p=["user","company","team"],t.sort(function(t,e){return p.indexOf(t.type)-p.indexOf(e.type)})),i=[],a=[],o=0,r=t.length;o<r;o++)n=t[o],i.push(b(n.id,n.type)),a.push(null!=(l=e.unwrap(n.label))?l:e.unwrap(n.firstName)+" "+e.unwrap(n.lastName));return app.utility.GetResponsibleSummary(i,a)},T=function(t){return"string"==typeof t?t:Array.isArray(t)?t.join(","):t},v=function(t){return e.mapping.toJS(t.predecessors())},d=function(t,s){var n;return null==t.predecessors?"":(t.id()>0&&(s=t.id()),n=e.utils.arrayMap(t.predecessors(),function(t){return t.id()}),n.push(s),n.join(","))},h=function(t){return null==t?"":t.locale("en").format("YYYYMMDD")},g=function(t){return function(s){var n,i,a,o,r,p,d,c,k,h,m,f,b;if(s.remindersLoaded())return k=t.flatPrivacyIds(),n=e.utils.arrayFilter(s.reminders(),function(t){var e;return!k.length||(t.userId()/1==0||(e=t.userId().toString(),l.call(k.map(String),e)>=0))}),d=e.utils.arrayMap(n,function(s){var n;return n=null!=s.usingOffSetDueDate&&s.usingOffSetDueDate()?{"user-id":s.userId(),time:s.time(),type:s.type(),note:s.note(),"people-assigned":null!=s.peopleAssigned&&e.unwrap(s.peopleAssigned),isRelative:s.isRelative(),"relative-number-days":s.relativeNumberOfDays(),usingOffSetDueDate:!0,userFirstname:s.userFirstname(),userLastname:s.userLastname(),relativeNumberOfDays:s.relativeNumberOfDays(),createdByUserFirstname:s.createdByUserFirstname(),createdByUserLastname:s.createdByUserLastname(),userId:s.userId()}:{"user-id":s.userId(),"date-time-utc":s.dateTimeUtc(),type:s.type(),note:s.note(),"people-assigned":null!=s.peopleAssigned&&e.unwrap(s.peopleAssigned),isRelative:s.isRelative(),"relative-number-days":s.relativeNumberOfDays(),usingOffSetDueDate:!1},"-3"===s.userId().toString()&&(n["user-id"]=T(t.task.responsiblePartyIds()),n.userId=n["user-id"]),n}),d.length||(t.subscriptions.push(t.shared=app.shared.get("tasklistDefaults/defaultReminders/list")),null!=t.shared()&&t.shared().useOffSetDueDate&&t.shared().allRemindersRemoved()&&t.removeAllTasklistDefaultReminders(!0)),d;if(null!=t.taskList&&null!=t.taskList.newTaskDefaults&&(null!=(m=t.taskList.newTaskDefaults.reminders())?m.length:void 0)){for(k=t.flatPrivacyIds(),f=e.utils.arrayFilter(t.taskList.newTaskDefaults.reminders(),function(t){var e,s;return 0===k.length||0===parseInt(t.userId(),10)||(e=t.userId().toString(),l.call(k,e)>=0)||(s=parseInt(t.userId(),10),l.call(k,s)>=0)}),r=0,p=f.length;r<p;r++)h=f[r],i=u(t.task.dueDateAsMoment()),a=e.observable(i),a(a().add(-1*e.unwrap(h.relativeNumberOfDays),"days")),b=e.unwrap(h.time).split(":",2),o=b[0],c=b[1],a(a().set({hour:o,minute:c})),h.dateTimeUtc=a;return d="newTaskDefaults"===t.mode?e.utils.arrayMap(f,function(t){return{"user-id":null!=t.userId?e.unwrap(t.userId):t["user-id"],type:e.unwrap(t.type),note:e.unwrap(t.note),"people-assigned":null!=t.peopleAssigned&&e.unwrap(t.peopleAssigned)||null!=t["people-assigned"]&&t["people-assigned"],isRelative:e.unwrap(t.isRelative),"relative-number-days":null!=t.relativeNumberOfDays?e.unwrap(t.relativeNumberOfDays):t["relative-number-days"],usingOffSetDueDate:!1,time:e.unwrap(t.time)}}):"template"===t.mode&&t.isSubmitting()?e.utils.arrayMap(f,function(t){return{"user-id":t.userId(),time:t.time(),type:t.type(),note:t.note(),"people-assigned":null!=t.peopleAssigned&&e.unwrap(t.peopleAssigned),isRelative:t.isRelative(),"relative-number-days":t.relativeNumberOfDays(),usingOffSetDueDate:!0,userFirstname:t.userFirstname(),userLastname:t.userLastname(),relativeNumberOfDays:t.relativeNumberOfDays(),createdByUserFirstname:t.createdByUserFirstname(),createdByUserLastname:t.createdByUserLastname(),userId:t.userId()}}):e.utils.arrayMap(f,function(t){return{"user-id":t.userId(),"date-time-utc":t.dateTimeUtc(),type:t.type(),note:t.note(),"people-assigned":null!=t.peopleAssigned&&e.unwrap(t.peopleAssigned),isRelative:t.isRelative(),"relative-number-days":t.relativeNumberOfDays(),usingOffSetDueDate:!1}})}return null}}(this),w=function(t){return function(){var e;return e=[],t.originalTask.name()!==t.task.name()&&e.push("name"),t.originalTask.description()!==t.task.description()&&e.push("description"),T(t.originalTask.responsiblePartyIds())!==T(t.task.responsiblePartyIds())&&e.push("assignee"),f(t.originalTask.startDateAsMoment())===f(t.task.startDateAsMoment())&&f(t.originalTask.dueDateAsMoment())===f(t.task.dueDateAsMoment())||e.push("date"),t.originalTask.priority()!==t.task.priority()&&e.push("priority"),t.originalTask.progress()!==t.task.progress()&&e.push("progress"),parseInt(t.originalTask.estimatedMinutes(),10)!==m(t.estimatedHoursPart(),t.estimatedMinsPart())&&e.push("estimate"),t.originalTask.boardColumn.id()!==t.task.boardColumn.id()&&e.push("column"),app.utility.AreEqual(y(t.originalTask.tags()),y(t.task.tags()))||e.push("tags"),(t.commentFollowersUpdated()||t.changeFollowersUpdated())&&e.push("followers"),null!=t.childDropzone()&&(t.childDropzone().getCheckedSelected(t.childDropzone().uploadedFiles()).length&&e.push("attachments"),t.childDropzone().buildFileIds(t.originalTask)!==t.childDropzone().buildFileIds(t.task)&&e.push("attachments")),e}}(this),M=w(),null==this.editRecurringOption&&this.task.isRecurring())if("norepeat"===this.task.recurring.frequency())this.editRecurringOption="One";else if("template"===this.mode)this.editRecurringOption="All";else if(M.length)return void app.api.get("tasks/"+this.task.id()+"/recurring.json").then(function(t){return function(e){var s,n,i;n=!1,null!=(null!=e&&null!=(i=e.response)?i.datesSet:void 0)&&(s=Object.values(e.response.datesSet).filter(function(e){return Number(e)!==t.task.id()}),n=s.length>0),n?app.modal.Show("recurringTasksPrompt",{action:"edit",task:t.task,onCloseCallBack:function(e){if(e.wasCancelled&&t.isSubmitting(!1),t.params.task&&t.params.task.isUpdating(!1),!e.wasCancelled)return t.editRecurringOption=e.editRecurringOption,t.OnSubmit({skipIsSubmittingCheck:!0})}}):app.modal.Show("confirm",{title:app.tl("Edit Recurring Task"),text:app.tl("This will change all following tasks. Are you sure you want to edit this task?"),task:t.task,callback:function(e){if(e.wasCancelled&&t.isSubmitting(!1),t.params.task&&t.params.task.isUpdating(!1),!e.wasCancelled)return t.editRecurringOption="Following",t.OnSubmit({skipIsSubmittingCheck:!0})}})}}(this));return(p=m(this.estimatedHoursPart(),this.estimatedMinsPart()))>app.consts.THRESHOLDS.estimatedMinutes?(app.flash.Error(app.tl("Estimated time can not exceed [_s] minutes. Please enter a lower estimate.",app.consts.THRESHOLDS.estimatedMinutes)),this.isSubmitting(!1),void(this.params.task&&this.params.task.isUpdating(!1))):isNaN(parseInt(p,10))?(app.flash.Error(app.tl("Estimated time must be numeric only")),this.isSubmitting(!1),void(this.params.task&&this.params.task.isUpdating(!1))):(this.canAddFiles()&&null!=this.childDropzone()&&(o={pendingFileAttachments:this.childDropzone().getCheckedSelected(this.childDropzone().uploadedFiles()),updateFiles:!0,attachments:this.childDropzone().buildFileIds(this.task),removeOtherFiles:!0,attachmentsCategoryIds:this.childDropzone().buildExistingFileCategories(this.task),pendingFileAttachmentsCategoryIds:this.childDropzone().buildNewFileCategories()}),"newTaskDefaults"===this.mode?(a={"todo-list":{"new-task-defaults":{description:this.task.description(),"start-date-offset":-1===parseInt(this.task.startDateOffset(),10)?"":this.task.startDateOffset(),"due-date-offset":-1===parseInt(this.task.dueDateOffset(),10)?"":this.task.dueDateOffset(),"responsible-party-id":T(this.task.responsiblePartyIds()),"responsible-party-summary":k(this.assignedToNames(),app.tl("Anyone")),priority:x(this.task.priority()),priorityText:this.task.priority(),"estimated-minutes":p,tags:y(this.task.tags()),"unparsed-tags":this.task.tags(),"column-id":this.task.boardColumn.id(),"column-name":this.task.boardColumn.name(),reminders:g(this.task),removeAllReminders:this.removeAllTasklistDefaultReminders()}}},D=a["todo-list"]["new-task-defaults"],app.featureFlip.check("teams")()?(D["comment-follower-ids"]="-1",this.commentFollowersReady()&&(D["comment-follower-ids"]=this.commentFollowers().toString(),D["comment-follower-summary"]=k(this.commentFollowerNames(),app.tl("Nobody"))),D["change-follower-ids"]="-1",this.changeFollowersReady()&&(D["change-follower-ids"]=this.changeFollowers().toString(),D["change-follower-summary"]=k(this.changeFollowerNames(),app.tl("Nobody")))):(D["comment-follower-ids"]=c(this.commentFollowers()),D["comment-follower-summary"]=k(this.commentFollowers(),app.tl("Nobody")),D["change-follower-ids"]=c(this.changeFollowers()),D["change-follower-summary"]=k(this.changeFollowers(),app.tl("Nobody"))),this.canSetPrivacy()&&(r=this.privacyIds().filter(function(t){return"0"!==t.toString()}),D["grant-access-to"]=r.join(","),D.private=r.length>0),this.shouldShowCustomFields()&&(D.customFields=app.customFieldsHelper.formatFieldsForSubmit(this.selectedCustomFields()),E=app.customFieldsHelper.validateFields(this.selectedCustomFields()),E.length>0)?(app.flash.Error(E),void this.isSubmitting(!1)):(null!=o&&i.extend(D,o),O=Object.assign({},D),O["responsible-party-id"]=app.utility.ConvertToArray(D["responsible-party-id"]),O["comment-follower-ready"]=this.commentFollowersReady(),this.commentFollowersReady()&&(O["comment-follower-ids"]=app.utility.ConvertToArray(D["comment-follower-ids"])),O["change-follower-ready"]=this.changeFollowersReady(),this.changeFollowersReady()&&(O["change-follower-ids"]=app.utility.ConvertToArray(D["change-follower-ids"])),O["assigned-to"]=null!=(C=this.task.assignedTo())?C:[],O["assigned-to-companies"]=null!=(_=this.task.assignedToCompanies())?_:[],O["assigned-to-teams"]=null!=(A=this.task.assignedToTeams())?A:[],0===this.task.taskListId()?Lightbox.close(O):app.api.put("tasklists/"+this.task.taskListId()+".json",a).then(function(t){return function(t){return Lightbox.close(O)}}()).catch(function(t){return function(t){return console.error(t)}}()).finally(function(t){return function(){return t.isSubmitting(!1),t.params.task&&t.params.task.isUpdating(!1),t.task.isUpdating(!1)}}(this)),app.trackerHelper.trackEvent("Add New Task Defaults"))):(0===this.task.id()?(I="post",P="tasklists/"+this.task.taskListId()+"/tasks.json"):(I="put",P="tasks/"+this.task.id()+".json"),this.task.reminders().length&&(n=e.utils.arrayFilter(this.task.reminders(),function(t){return null!=t.dateTimeUtc&&u(e.unwrap(t.dateTimeUtc))<u()}),n.length)?(app.flash.Error(app.tl("Reminders can not be set in the past")),this.isSubmitting(!1),!1):("completed"!==this.task.status()&&100===this.task.progress()&&this.task.status("completed"),a={"todo-item":{"use-defaults":!1,completed:"completed"===this.task.status(),content:this.task.name(),tasklistId:this.task.taskListId(),"creator-id":this.task.createdBy.id(),notify:this.notifyByEmail(),"responsible-party-id":T(this.task.responsiblePartyIds()),"start-date":h(this.task.startDateAsMoment()),"due-date":h(this.task.dueDateAsMoment()),description:this.task.description(),priority:this.task.priority(),progress:this.task.progress(),parentTaskId:this.task.parentTaskId(),tagIds:app.tags.getTagIds(this.task.tags()),"everyone-must-do":this.createMultiple(),predecessors:v(this.task),reminders:g(this.task),columnId:this.task.boardColumn.id()}},app.featureFlip.check("teams")()?(a["todo-item"].commentFollowerIds=this.commentFollowersReady()?this.commentFollowers().toString():"-1",a["todo-item"].changeFollowerIds=this.changeFollowersReady()?this.changeFollowers().toString():"-1"):(a["todo-item"].commentFollowerIds=c(this.commentFollowers()),a["todo-item"].changeFollowerIds=c(this.changeFollowers())),this.canSetPrivacy()&&(r=this.privacyIds().filter(function(t){return"0"!==t.toString()}),a["todo-item"]["grant-access-to"]=r.join(","),a["todo-item"].private=r.length>0),this.shouldShowCustomFields()&&(a["todo-item"].customFields=app.customFieldsHelper.formatFieldsForSubmit(this.selectedCustomFields()),E=app.customFieldsHelper.validateFields(this.selectedCustomFields()),E.length>0)?(app.flash.Error(E),void this.isSubmitting(!1)):(this.canViewEstimates()&&(a["todo-item"]["estimated-minutes"]=p),S=!1,this.task.id()>0&&(this.task.numActiveSubTasks()>0||this.task.numPredecessors()>0)&&(a["todo-item"]["push-subtasks"]=this.pushSubTasks(),this.task.boardColumn.id()>0&&app.api.get("boards/columns/"+this.task.boardColumn.id()+"/triggers.json").then(function(t){return function(t){var e;if(e=t.response.triggers.filter(function(t){return"CARD.COMPLETE"===t.type}),e.length>0)return S=!0}}())),this.task.id()>0&&this.task.numDependents()>0&&(a["todo-item"]["push-dependents"]=this.pushDependents()),null!=this.deskTicketId&&(a["todo-item"].ticketId=this.deskTicketId),null!=o&&i.extend(a["todo-item"],o),"template"===this.mode&&(a["todo-item"].isTemplateTask=!0,a["todo-item"].templateRoleName=null!=this.task.templateRoleName()&&"-1"===T(this.task.responsiblePartyIds())?this.task.templateRoleName():"",a["todo-item"]["start-date"]=+this.task.startDateOffset()>-1?app.utility.getOffsetDate(this.task.startDateOffset()).format("YYYYMMDD"):"",a["todo-item"]["due-date"]=+this.task.dueDateOffset()>-1?app.utility.getOffsetDate(this.task.dueDateOffset()).format("YYYYMMDD"):"",a["todo-item"].content=this.templateTaskName(),0===parseInt(a["todo-item"]["responsible-party-id"],10)&&""!==a["todo-item"].templateRoleName?a["todo-item"]["responsible-party-id"]=-1:a["todo-item"]["responsible-party-id"]>0&&""!==a["todo-item"].templateRoleName&&(a["todo-item"].templateRoleName="",a["todo-item"].content=this.task.name())),"template"===this.mode&&this.task.recurring.endDateOption("noEndDate"),L={selecteddays:this.task.recurring.days().join(","),editRecurringOption:this.editRecurringOption,repeatEndDate:"noEndDate"===this.task.recurring.endDateOption()?this.task.recurring.endDateOption():u.isMoment(e.unwrap(this.task.recurring.endOnUserFormat()))?this.task.recurring.endOnUserFormat().format(app.loggedInUser.localization.dateFormat()):this.task.recurring.endOnUserFormat(),repeatsFreq:this.task.recurring.frequency(),monthlyRepeatType:this.task.recurring.monthlyOn()},["everyxdaysweekday","everyxdays"].includes(this.task.recurring.frequency())&&(L.duration=this.task.recurring.duration()),a["todo-item"].repeatOptions=L,i(".editTaskForm").find("input, textarea").blur(),app.api[I](P,a).then(function(t){return function(e){var s,n,a,r,l,c,u,k,h,m,f,b,x,g;if(s=null!=(h=e.response.affectedTaskIds)?h:d(t.task,e.response.id),a=null!=(m=e.response.linkedCardId)?m:0,r=null!=(f=e.response.linkedColumnId)?f:0,l=null!=(b=e.response.linkedColumnName)?b:"",u=parseInt(t.oldBoardColumnId,10)!==parseInt(r,10)?t.oldBoardColumnId:null,k=t.oldBoardColumnName.toLowerCase().trim()!==l.toLowerCase().trim()?t.oldBoardColumnName:null,"OK"===e.response.STATUS&&(g={id:e.response.id},n={eventTime:new Date,itemType:"task",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:t.task.id(),taskListId:t.task.taskListId(),projectId:t.projectId,taskCopy:g,extraInfo:{data:{hasEstimatedTime:p>0,hasTags:t.task.tags().length>0,affectedTaskIds:s,cardId:a,columnId:r,columnName:l,oldColumnId:u,oldColumnName:k}}},0===t.task.id()&&(n.actionType=app.consts.ACTIONTYPE.ADDED),t.task.parentTaskId()>0&&(n.parentTaskId=t.task.parentTaskId()),t.createMultiple()&&(n.extraData={newSubtaskCount:T(t.task.responsiblePartyIds()).split(",").length}),t.canAddFiles()&&t.attachmentsEdited()&&(n.subType="attached-files",null==n.extraData&&(n.extraData={}),n.extraData.newFiles=null!=(null!=o?o.pendingFileAttachments:void 0)?o.pendingFileAttachments.length:0),0===t.task.id()?(t.task.name(""),t.task.description("")):(app.utility.PopulateDynamicResponsibleFields(t.task),t.params.task.name(t.task.name()),t.params.task.description(t.task.description()),t.params.task.assignedTo(t.task.assignedTo()),t.params.task.assignedToCompanies(t.task.assignedToCompanies()),t.params.task.assignedToTeams(t.task.assignedToTeams()),t.params.task.responsiblePartyIds(t.task.responsiblePartyIds()),t.params.task.responsiblePartySummary(t.task.responsiblePartySummary()),t.params.task.startDate(t.task.startDate()),t.params.task.dueDate(t.task.dueDate()),t.params.task.priority(t.task.priority()),t.params.task.progress(t.task.progress()),t.params.task.estimatedMinutes(p),t.params.task.tags(t.task.tags()),t.params.task.private(2===t.task.private()?2:t.privacyIds().length>0?1:0),t.params.task.predecessors(t.task.predecessors()),t.params.task.userFollowingComments(app.utility.FindIndexByKeyValue(t.commentFollowers(),"id",app.loggedInUser.id().toString())>-1),t.params.task.userFollowingChanges(app.utility.FindIndexByKeyValue(t.changeFollowers(),"id",app.loggedInUser.id().toString())>-1),"template"===t.mode&&t.params.task.name(""+(null!=t.task.templateRoleName()?t.task.templateRoleName():"")+t.task.name()),t.params.task.isEditMode(!1),t.task.isEditMode(!1)),app.ko.postbox.publish("allTWEvents",n),"embed"===t.mode&&null!=t.params.successCb&&(self!==top&&parent.postMessage("tw-task-created","*"),""!==t.params.successCb&&"undefined"!=typeof parent&&null!==parent&&"function"==typeof parent[c=t.params.successCb]&&parent[c](n)),null!=t.editRecurringOption&&"One"===t.editRecurringOption&&"put"===I&&(t.task.isRecurring(!1),t.task.recurring=null,t.params.task.isRecurring(!1),t.params.task.recurring=null),null!=t.taskList&&null!=t.taskList.newTaskDefaults&&t.taskList.newTaskDefaults.description().length?t.task.ResetData(t.taskList.newTaskDefaults.description()):t.task.ResetData(),null!=t.taskList&&null!=t.taskList.newTaskDefaults&&t.taskList.newTaskDefaults.reminders().length&&null!=t.task.dueDateAsMoment&&null!==t.task.dueDateAsMoment()&&t.task.ResetRemindersToDefault(t.taskList.newTaskDefaults.reminders(),t.task.dueDateAsMoment()),i("#"+t.typeaheadInputId).siblings(".bootstrap-tagsinput").find(".tt-input").removeClass("hasChanged"),t.canAddFiles()&&null!=t.childDropzone()&&null!=(x=t.childDropzone())&&x.ResetAttachmentLists(),app.ko.postbox.publish("task-text-reset",{focus:!0}),null!=e.response.relativeRemindersMoved&&e.response.relativeRemindersMoved))return""===t.task.dueDate()?app.flash.Info(app.tl("All reminders set relative to the task's due date have been cleared.")):app.flash.Success(app.tl("Relative reminders have been adjusted according to the task's new due date."))}}(this)).catch(function(t){return function(t){return console.error(t)}}()).finally(function(t){return function(){return S&&t.showTriggerInfoMessage(),t.isSubmitting(!1),t.params.task&&t.params.task.isUpdating(!1),t.task.isUpdating(!1),app.ko.postbox.publish("cancel-editing-task",{task:t.task}),setTimeout(function(){return t.isFocusedOnNameInput(!0)},100),app.utility.IgnoreFormChanges()}}(this))))))}}},t.prototype.OnClickCancel=function(){var t,e;Tipped.hideAll(),"newTaskDefaults"===this.mode?Lightbox.cancel():"embed"===this.mode&&null!=this.params.cancelCb?(self!==top&&parent.postMessage("tw-task-cancelled","*"),""!==this.params.cancelCb&&"undefined"!=typeof parent&&null!==parent&&"function"==typeof parent[t=this.params.cancelCb]&&parent[t]()):0===this.task.id()&&0===this.task.parentTaskId()?(e="embed"===this.mode?this.params.taskListId:this.params.task.taskList.id(),app.ko.postbox.publish("tasklist-"+e+"-cancel-adding-task",{task:this.task})):0!==this.task.parentTaskId()&&0===this.task.id()?app.ko.postbox.publish("task-"+this.params.task.parentTaskId()+"-cancel-adding-subtask",{task:this.task}):this.params.task.isEditMode(!1),app.ko.postbox.publish("cancel-editing-task",{task:this.task})},t.prototype.OnPeoplePickerDoubleClicked=function(){this.OnClickSelectMeInDropdown()},t.prototype.OnClickCreateMultiple=function(){return this.createMultiple(!this.createMultiple())},t.prototype.OnClickNotifyByEmail=function(){if(!this.allowNotifyAnyone())if(app.featureFlip.check("teams")()){if(l.call(this.task.responsiblePartyIds(),"0")>=0)return!1}else if("0"===this.task.responsiblePartyIds())return!1;this.notifyByEmail(!this.notifyByEmail()),this.notifyByEmail()||this.$input.tagsinput("removeType","notify")},t.prototype.OnUpdatePrivacyIds=function(t){this.privacyIds(t.ids),this.flatPrivacyIds(t.flatIds)},t.prototype.OnChangeFollowersChanged=function(t){this.changeFollowers(t)},t.prototype.OnCommentFollowersChanged=function(t){this.commentFollowers(t)},t.prototype.OnProgressUpdated=function(t){var e;return e=~~t,this.task.progress(e)},t.prototype.OnAutoCompleteChange=function(t){var e,s,n,i,a;switch(t.type){case"tag":t.id>0&&("select"===t.changeType?this.task.tags.push(new f(t)):(s=this.task.tags().filter(function(e){return parseInt(e.id(),10)!==parseInt(t.id,10)}),this.task.tags(s)),this.tabs.selCode("tags"));break;case"company":case"team":case"user":n=function(){switch(t.type){case"user":return""+t.id;case"company":return"c"+t.id;case"team":return"t"+t.id}}(),e=this.task.responsiblePartyIds().slice(),"select"===t.changeType?l.call(e,n)>=0||e.push(n):e=e.filter(function(t){return t.toString()!==n.toString()}),this.task.responsiblePartyIds(e),this.tabs.selCode("whoAndWhen");break;case"priority":"select"===t.changeType?t.id>0&&this.task.priority(t.code):this.task.priority(""),this.tabs.selCode("priority");break;case"date":"select"===t.changeType?"start"===t.subtype?(this.task.startDateAsMoment(t.date),(null!=(i=this.task.dueDateAsMoment())?i.isBefore(this.task.startDateAsMoment()):void 0)&&this.task.dueDateAsMoment(this.task.startDateAsMoment())):"due"===t.subtype&&(this.task.dueDateAsMoment(t.date),(null!=(a=this.task.startDateAsMoment())?a.isAfter(this.task.dueDateAsMoment()):void 0)&&this.task.startDateAsMoment(this.task.dueDateAsMoment())):this.task[t.data.subtype+"DateAsMoment"](null),this.tabs.selCode("whoAndWhen");break;case"duration":"select"===t.changeType?(this.estimatedHoursPart(Math.floor(t.duration.asHours())),this.estimatedMinsPart(Math.floor(p(t.duration.asMinutes(),60)))):(this.estimatedHoursPart(0),this.estimatedMinsPart(0)),this.tabs.selCode("progress")}return!0},t.prototype.OnKeyboardInput=function(t){},t.prototype.OnAutoCompleteFocus=function(t){},t.prototype.OnTypeaheadItemAdded=function(t){var e,s,n,i,a,o,r,l,p,d,c;if(null==t)return!1;switch(t.type){case"user":case"company":case"role":this.addUsers(t);break;case"notify":this.notifyByEmail(!0);break;case"tag":this.OnChangeTags(t,"added");break;case"priority":switch(t.value){case"!":this.task.priority("low");break;case"!!":this.task.priority("medium");break;case"!!!":this.task.priority("high");break;default:this.task.priority("")}break;case"time":switch(c=t.value,p=parseInt(c.substring(0,c.length-1),10),d=c.substring(c.length-1),i=0,a=0,e=this.$input.tagsinput("getItemsByType",{itemType:"time"}),e.length&&this.$input.tagsinput("remove",e[0]),d){case"m":a=p;break;case"h":i=p;break;case"d":i=24*p;break;case"w":i=168*p}this.estimatedHoursPart(i),this.estimatedMinsPart(a);break;case"date":"due"===t.dateType?(null!=this.task.dueDateAsMoment()&&(s=this.task.dueDateAsMoment().diff(u().startOf("day"),"days"),n=this.$input.tagsinput("getItemsByType",{itemType:"date",needle:"D"+s,haystack:"value"}),n.length&&this.$input.tagsinput("remove",n[0])),this.task.dueDateAsMoment(u().startOf("day").add(t.numDays,"days")),(null!=(o=this.task.startDateAsMoment())?o.isAfter(this.task.dueDateAsMoment()):void 0)&&(l=this.task.startDateAsMoment().diff(u().startOf("day"),"days"),n=this.$input.tagsinput("getItemsByType",{itemType:"date",needle:"S"+l,haystack:"value"}),n.length&&(this.$input.tagsinput("remove",n[0]),s=this.task.dueDateAsMoment().diff(u().startOf("day"),"days"),this.$input.tagsinput("add",{value:"S"+s,text:0===s?app.tl("Start Today"):app.tl("Start Tomorrow"),type:"date",dateType:"start",numDays:s})))):"start"===t.dateType&&(null!=this.task.startDateAsMoment()&&(l=this.task.startDateAsMoment().diff(u().startOf("day"),"days"),n=this.$input.tagsinput("getItemsByType",{itemType:"date",needle:"S"+l,haystack:"value"}),n.length&&this.$input.tagsinput("remove",n[0])),this.task.startDateAsMoment(u().startOf("day").add(t.numDays,"days")),(null!=(r=this.task.dueDateAsMoment())?r.isBefore(this.task.startDateAsMoment()):void 0)&&(s=this.task.dueDateAsMoment().diff(u().startOf("day"),"days"),n=this.$input.tagsinput("getItemsByType",{itemType:"date",needle:"D"+s,haystack:"value"}),n.length&&(this.$input.tagsinput("remove",n[0]),l=this.task.startDateAsMoment().diff(u().startOf("day"),"days"),this.$input.tagsinput("add",{value:"D"+l,text:1===l?app.tl("Due Tomorrow"):app.tl("Due Next Week"),type:"date",dateType:"due",numDays:l}))))}return!0},t.prototype.OnTypeaheadItemRemoved=function(t){if(null==t)return!1;switch(t.type){case"user":case"company":case"role":this.removeUsers(t),Tipped.hideAll();break;case"notify":this.notifyByEmail(!1);break;case"tag":this.OnChangeTags(t,"deleted");break;case"priority":this.task.priority("");break;case"time":this.estimatedHoursPart(0),this.estimatedMinsPart(0);break;case"date":"due"===t.dateType?this.task.dueDateAsMoment(null):"start"===t.dateType&&this.task.startDateAsMoment(null)}return!0},t.prototype.addUsers=function(t){var s,n,i,a,o,r,l,p,d;if(null==t)return!1;if(d=t.text.replace(/[^\x00-\x7F]/g,""),null!=(p=this.replaceUserOnTagAdded()||d===app.tl("Anyone")?[]:this.task.responsiblePartyIds())){for("string"==typeof p&&(p=p.split(",")),s=i=0,o=p.length;i<o;s=++i)n=p[s],p[s]=parseInt(n,10);switch(t.type){case"user":-1===p.indexOf(parseInt(t.id,10))&&p.push(parseInt(t.id,10));break;case"company":case"role":for(l=t.userIds,a=0,r=l.length;a<r;a++)n=l[a],-1===p.indexOf(parseInt(n,10))&&p.push(parseInt(n,10))}"string"==typeof this.task.responsiblePartyIds()&&(p=p.toString()),e.postbox.publish("responsibleUsersChanged"+this.notifyKey,p),this.replaceUserOnTagAdded(!1)}},t.prototype.removeUsers=function(t){var s,n,i,a,o,r,l,p,d,c,u,k,h,m,f,b,x,g,T,y,v,w;if(null==t)return!1;for(o=parseInt(t.id,10),m=this.task.responsiblePartyIds(),w=[],v=[],y=[],b=[],f={itemType:"role",val:"userIds"},n={itemType:"company"},T={itemType:"user",val:"id"},"string"==typeof m?m=m.split(","):0===m&&(m=[]),i=r=0,d=m.length;r<d;i=++r)a=m[i],m[i]=parseInt(a,10);for("user"!==t.type&&(w=this.$input.tagsinput("getItemsByType",T)),v=app.utility.Uniq(app.utility.Flatten(this.$input.tagsinput("getItemsByType",f))),s=this.$input.tagsinput("getItemsByType",n),l=0,c=s.length;l<c;l++)k=s[l],"company"===t.type&&parseInt(k.id,10)===o||(y=app.utility.Uniq(y.concat(k.userIds)));switch(b=app.utility.Uniq(w.concat(v,y)),t.type){case"user":g=m.indexOf(o),-1!==g&&-1===b.indexOf(o)&&m.splice(g,1);break;case"company":case"role":for(h=t.userIds,p=0,u=h.length;p<u;p++)x=h[p],-1!==(g=m.indexOf(parseInt(x,10)))&&-1===b.indexOf(x)&&m.splice(g,1)}"string"==typeof this.task.responsiblePartyIds()&&(m=m.toString()),e.postbox.publish("responsibleUsersChanged"+this.notifyKey,m)},t.prototype.OnChangeTags=function(t,s){var n,i;return i={color:t.color,name:t.text,id:t.id},n=app.tags.get(i),e.postbox.publish("tagsChanged",{tag:n,status:s})},t.prototype.OnClickSelectMeInDropdown=function(){var t;t=app.loggedInUser.id(),this.task.isAssignedToMe()&&(t="0"),app.featureFlip.check("teams")()&&(t=app.utility.ConvertToArray(t)),this.task.responsiblePartyIds(t)},t.prototype.showTriggerInfoMessage=function(){var t,e,s,n;e=null!=(s=this.task.numActiveSubTasks())?s:0,t=null!=(n=this.task.numPredecessors())?n:0,1===e?t>0?1===t?app.flash.Info(app.tl("Task cannot autocomplete because it has [_s] active subtask and [_s] dependency",1,1)):app.flash.Info(app.tl("Task cannot autocomplete because it has [_s] active subtask and [_s] dependencies",1,t)):app.flash.Info(app.tl("Task cannot autocomplete because it has [_s] active subtask",1)):0===e?t>1?app.flash.Info(app.tl("Task cannot autocomplete because it has [_s] dependencies",t)):1===t&&app.flash.Info(app.tl("Task cannot autocomplete because it has [_s] dependency",1)):e>1&&(t>1?app.flash.Info(app.tl("Task cannot autocomplete because it has [_s] active subtasks and [_s] dependencies",e,t)):1===t?app.flash.Info(app.tl("Task cannot autocomplete because it has [_s] active subtasks and [_s] dependency",e,1)):app.flash.Info(app.tl("Task cannot autocomplete because it has [_s] active subtasks",e)))},t.prototype.setupTemplateOptions=function(){var t;return this.task.templateRoleName=e.observable(this.getTemplateRoleName()),null!=this.task.startDateOffset&&""!==this.task.startDateOffset()||(t=this.getTemplateDaysOffset(this.task.startDate()),this.task.startDateOffset=e.observable(t)),null!=this.task.dueDateOffset&&""!==this.task.dueDateOffset()||(t=this.getTemplateDaysOffset(this.task.dueDate()),this.task.dueDateOffset=e.observable(t)),0===this.task.responsiblePartyIds().length&&null!=this.task.templateRoleName()&&this.task.responsiblePartyIds("-1"),this.taskList.isPrivate()&&this.task.private(2),this.chooseLaterTxt=e.pureComputed(function(t){return function(){return null!=t.task.templateRoleName()?t.task.templateRoleName()+" ("+app.tl("Choose Later")+app.localizationPreferences().ellipsis+")":app.tl("Choose later")+app.localizationPreferences().ellipsis}}(this)),this.subscriptions.push(this.chooseLaterTxt),this.initialOptions=e.observableArray([{id:0,text:app.tl("Anyone")},{id:-1,text:e.unwrap(this.chooseLaterTxt)}]),this.subscriptions.push(this.chooseLaterTxt.subscribe(function(t){return function(s){return e.postbox.publish("initialOptionChanged"+t.notifyKey,{id:-1,text:s})}}(this)))},t.prototype.removeDateTag=function(t){var e;e=this.$input.tagsinput("getItemsByType",{itemType:"date",needle:t,haystack:"dateType"}),(null!=e?e.length:void 0)&&this.$input.tagsinput("remove",e[0])},t.prototype.removeTimeTag=function(){var t;return"function"==typeof(t=this.$input).tagsinput&&t.tagsinput("removeType","time"),!0},t.prototype.removePriorityTags=function(){var t;return"function"==typeof(t=this.$input).tagsinput&&t.tagsinput("removeType","priority"),!0},t.prototype.OnAvailablePeopleChanged=function(t){var e,s,n,i,a,o,r,p,d,c,u,k,h,m,f,b,x,g,T;if(null!=this.initialResponsibleIds&&null!=this.task.responsiblePartyIds()&&this.task.responsiblePartyIds().length>0)if(this.currResponsibleIdsArr=this.task.responsiblePartyIds().split(",").map(Number).filter(function(t){return function(t){return!isNaN(t)}}()),this.initialResponsibleIds.length===this.currResponsibleIdsArr.length)for(h=this.initialResponsibleIds,a=0,p=h.length;a<p;a++)i=h[a],this.peopleEdited(l.call(this.currResponsibleIdsArr,i)<0);else this.peopleEdited(!0);if(this.$input.hasClass("js-tagsinput")){for(n=this.task.responsiblePartyIds(),T=this.$input.tagsinput("getItemsByType",{itemType:"user"}),b=this.$input.tagsinput("getItemsByType",{itemType:"role"}),s=this.$input.tagsinput("getItemsByType",{itemType:"company"}),"string"==typeof n?n=n.split(","):0===n&&(n=[]),x=function(t){return l.call(n,t)>=0},o=0,d=T.length;o<d;o++)g=T[o],m=g.id,l.call(n,m)<0&&this.$input.tagsinput("removeSilently",g);for(r=0,c=b.length;r<c;r++)f=b[r],f.userIds.every(x)||this.$input.tagsinput("removeSilently",f);for(k=0,u=s.length;k<u;k++)e=s[k],e.userIds.every(x)||this.$input.tagsinput("removeSilently",e)}},t.prototype.getTemplateDaysOffset=function(t){var e;return null==t||""===t?-1:(e=u.isMoment(t)?t.startOf("day"):u(t,"YYYYMMDD").startOf("day"),e.diff(app.consts.DATES.teamworkEpoch(),"days"))},t.prototype.doesTaskHaveRole=function(){var t;return t=this.task.name(),"["===t.substr(0,1)},t.prototype.getTemplateRoleName=function(){var t,e,s;return t=this.task.name(),this.doesTaskHaveRole()?(s=/^\[([^\]]*)\]/,e=s.exec(t),null===e?null:e[1]):null},t.prototype.ShowRoleNameModal=function(){var t,e,s;this.templateRolePromptVisible||(this.templateRolePromptVisible=!0,e=function(t){return function(e){t.templateRolePromptVisible=!1,e.wasCancelled||t.task.templateRoleName(e.answer)}}(this),t=null!=(s=this.task.templateRoleName())?s:app.tl("Somebody"),app.modal.Show("prompt",{title:app.tl("Who will do this?"),label:app.tl("Please provide a name for the type of person or group who will do this task"),onCloseCallBack:e,value:t,buttonText:app.tl("OK")}))},t.prototype.confirmCancel=function(){var t;return t=function(t){return function(e){if(e)return app.utility.IgnoreFormChanges(),t.OnClickCancel()}}(this),n(".hasChanged").confirmCancel({callback:t})},t.prototype.dispose=function(){app.bodyDroppable(this.bodyDroppableInitialState()),null!=this.subscriptions&&this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:g,template:t}}.apply(e,a))&&(t.exports=o)}).call(e,s(245),s(245))},3904:function(t,e,s){var n,i,a=function(t,e){return function(){return t.apply(e,arguments)}};n=[s(2677),s(1116),s(1125)],void 0!==(i=function(t,e,s){var n;return n=function(){function t(t){var n,i;null==t&&(t={}),this.OnClickRemove=a(this.OnClickRemove,this),this.OnClickSelectTasks=a(this.OnClickSelectTasks,this),console.assert("object"==typeof t.task),this.task=t.task,this.taskList=t.taskList,this.mode=null!=(n=t.mode)?n:"normal",i=app.prefixApi("tasks/"+this.task.id()+"/predecessors.json","API_PREFIX_V2","API_PREFIX_V2"),this.data=new e(i,{listField:"tasks",ItemClass:s,loadNow:0!==this.task.id(),onLoad:function(t){return function(){return t.task.predecessors(t.data.list())}}(this)}),app.InitOnShow(this)}return t.prototype.OnShow=function(){},t.prototype.OnClickSelectTasks=function(){app.modal.Show("dependenciesPicker",{task:this.task,taskListId:this.taskList.id(),projectId:this.taskList.projectId(),mode:this.mode})},t.prototype.OnClickRemove=function(t,e){Tipped.hideAll(),this.task.predecessors.remove(t)},t.prototype.dispose=function(){null!=this.subscriptions&&this.subscriptions.forEach(function(t){return t.dispose()}),this.data.dispose(),delete this.data},t}(),{viewModel:n,template:t}}.apply(e,n))&&(t.exports=i)},3927:function(t,e,s){(function(n,i){var a,o,r=function(t,e){return function(){return t.apply(e,arguments)}};a=[s(2710),s(1116),s(1125),s(1138),s(1119)],void 0!==(o=function(t,e,s,a,o){var l;return l=function(){function t(t){var n,i,a,o,l;null==t&&(t={}),this.getEstimatedMinutesForTaskList=r(this.getEstimatedMinutesForTaskList,this),this.ensureTaskFormIsAtEnd=r(this.ensureTaskFormIsAtEnd,this),this.getTaskListDescription=r(this.getTaskListDescription,this),this.getTaskListName=r(this.getTaskListName,this),this.getCompanyName=r(this.getCompanyName,this),this.getProjectName=r(this.getProjectName,this),this.restoreTaskList=r(this.restoreTaskList,this),this.deleteTaskListById=r(this.deleteTaskListById,this),this.addNewTasksToList=r(this.addNewTasksToList,this),this.removeNewTasksFromUnorderedList=r(this.removeNewTasksFromUnorderedList,this),this.reorderListItems=r(this.reorderListItems,this),this.fetchTaskListById=r(this.fetchTaskListById,this),this.buildTaskList=r(this.buildTaskList,this),this.closeOtherForms=r(this.closeOtherForms,this),this.isTaskListCollapsed=r(this.isTaskListCollapsed,this),this.isTaskListAddingTask=r(this.isTaskListAddingTask,this),this.isLastInTaskList=r(this.isLastInTaskList,this),this.isNewTaskList=r(this.isNewTaskList,this),this.shouldRenderRow=r(this.shouldRenderRow,this),this.getTaskListPrivacyParams=r(this.getTaskListPrivacyParams,this),this.OnAddTaskToTaskList=r(this.OnAddTaskToTaskList,this),this.OnClickToggleCollapse=r(this.OnClickToggleCollapse,this),this.OnNotifyTWEvent=r(this.OnNotifyTWEvent,this),this.OnRendered=r(this.OnRendered,this),this.OnCancelTaskEdit=r(this.OnCancelTaskEdit,this),this.OnClickShowAddTask=r(this.OnClickShowAddTask,this),this.OnClickShowEditTaskList=r(this.OnClickShowEditTaskList,this),this.subscriptions=[],this.pageSize=null!=t.pageSize?t.pageSize:t.pageSize=50,this.projectId=t.projectId,this.taskListId=null!=(n=t.taskListId)?n:null,this.taskList=null!=(i=t.taskList)?i:ko.observable(null),this.parent=t.parentVM,this.minFilterChars=3,this.mode=null!=(a=t.mode)?a:"all",this.taskMode=null!=(o=t.taskMode)?o:"flat",this.numberOfResults=null!=(l=t.numberOfResults)?l:ko.observable(0),this.filters=this.parent.filters,console.assert(ko.isObservable(this.numberOfResults)),this.sortOnLoad=ko.observable(!1),this.newTasksAdded=ko.observable(!1),this.totalEstimatedTime=ko.observable(0),this.subscriptions.push(this.totalEstimatedMinutes=ko.pureComputed(function(t){return function(){return t.totalEstimatedTime()%60}}(this))),this.subscriptions.push(this.totalEstimatedHours=ko.pureComputed(function(t){return function(){return Math.floor(t.totalEstimatedTime()/60)}}(this))),this.isTaskListPage="tasklists"===app.currentRoute()[1]||"task-templates"===app.currentRoute().page&&null!=app.currentRoute().taskTemplateId,this.project=app.projectInfo.get(this.projectId),this.projectDetails=ko.observableArray([]),this.taskListDetails=ko.observableArray([]),this.subscriptions.push(this.canAddTasks=ko.pureComputed(function(t){return function(){var e;return null!=(e=t.project())?e.permissions.canAddTasks():void 0}}(this))),this.subscriptions.push(this.canAddTaskLists=ko.pureComputed(function(t){return function(){var e;return null!=(e=t.project())?e.permissions.canAddTaskLists():void 0}}(this))),this.subscriptions.push(this.viewEstimatedTime=ko.pureComputed(function(t){return function(){var e;return null!=(e=t.project())?e.permissions.viewEstimatedTime():void 0}}(this))),this.subscriptions.push(this.includeCompletedTasks=ko.pureComputed(function(t){return function(){var e;return null!=(null!=(e=t.parent)?e.includeCompletedTasks:void 0)&&t.parent.includeCompletedTasks()}}(this))),this.pendingTaskUpdates=[],this.taskLists={},this.hasAddedTasks={},this.deletedTasks={},this.url=ko.computed(function(t){return function(){var e,s,n,i,a,o,r,l,p,d,c;if(e=function(t,e,s){var n,i,a;if(Array.isArray(s))for(n=0,i=s.length;n<i;n++)a=s[n],t=t+l(t)+e+"="+encodeURIComponent(a);else t=t+l(t)+e+"="+encodeURIComponent(s);return t},l=function(t){return".json"===t.substring(t.length-5,t.length)?"?":"&"},c=null!=t.taskListId?app.prefixApi("tasklists/"+t.taskListId+"/tasks.json?getFiles=1&sort=flattenedtasklist","API_PREFIX_V2","API_PREFIX_V2"):app.prefixApi("projects/"+t.projectId+"/tasks.json?getFiles=1&sort=flattenedtasklist","API_PREFIX_V2","API_PREFIX_V2"),t.parent.filterText().length>=t.minFilterChars&&(c=e(c,"filterText[]",t.parent.filterText())),null!=t.parent.includeBlockedTasks&&(c=e(c,"includeBlockedTasks",t.parent.includeBlockedTasks())),null!=t.parent.onlyTasksWithTickets&&(c=e(c,"onlyTasksWithTickets",t.parent.onlyTasksWithTickets())),null!=t.parent.onlyTasksWithUnreadComments&&(c=e(c,"onlyTasksWithUnreadComments",t.parent.onlyTasksWithUnreadComments())),p=["taskListNames","projectNames"],null!=t.parent.includeOverdueTasks&&t.parent.includeOverdueTasks()&&p.push("overdue"),null!=t.parent.includeTasksWithNoDate&&t.parent.includeTasksWithNoDate()&&p.push("nodate"),c=e(c,"include",p.join(",")),null!=t.parent.ignoreStartDates&&(c=e(c,"ignoreStartDates",t.parent.ignoreStartDates())),null!=t.parent.includeCompletedTasks&&(c=e(c,"includeCompletedTasks",t.parent.includeCompletedTasks())),null!=t.parent.getSubTasks&&(c=e(c,"getSubTasks",t.parent.getSubTasks())),("function"==typeof(s=t.parent).filterBoardColumnIds?s.filterBoardColumnIds().length:void 0)&&(c=e(c,"filterBoardColumnIds",t.parent.filterBoardColumnIds().join(","))),Array.isArray(t.parent.tagIds())&&t.parent.tagIds().length&&(c=e(c,"tagIds",t.parent.tagIds().toString())),("function"==typeof(n=t.parent).creatorIds?n.creatorIds().length:void 0)&&(c=e(c,"creatorIds",t.parent.creatorIds().join(","))),null!=t.parent.onlyUntaggedTasks&&(c=e(c,"onlyUntaggedTasks",t.parent.onlyUntaggedTasks())),c=null!=t.parent.matchAllTags?e(c,"matchAllTags",t.parent.matchAllTags()):e(c,"matchAllTags","true"),("function"==typeof(i=t.parent).excludeTagIds?i.excludeTagIds().length:void 0)&&(c=e(c,"excludeTagIds",t.parent.excludeTagIds().toString())),c=null!=t.parent.matchAllExcludedTags?e(c,"matchAllExcludedTags",t.parent.matchAllExcludedTags()):e(c,"matchAllExcludedTags","true"),Array.isArray(t.parent.responsiblePartyIds())&&t.parent.responsiblePartyIds().length&&(c=e(c,"responsible-party-ids",t.parent.responsiblePartyIds().toString())),Array.isArray(t.parent.assigneeCompanyIds())&&t.parent.assigneeCompanyIds().length&&(c=e(c,"assigneeCompanyIds",t.parent.assigneeCompanyIds().toString())),Array.isArray(t.parent.assigneeTeamIds())&&t.parent.assigneeTeamIds().length&&(c=e(c,"assigneeTeamIds",t.parent.assigneeTeamIds().toString())),null!=t.parent.includeAssigneeCompanies&&(c=e(c,"includeAssigneeCompanies",t.parent.includeAssigneeCompanies())),null!=t.parent.includeAssigneeTeams&&(c=e(c,"includeAssigneeTeams",t.parent.includeAssigneeTeams())),""!==(d=t.parent.priority())&&"any"!==d&&(c=e(c,"priority",t.parent.priority())),"function"==typeof(a=t.parent).dateCode?a.dateCode():void 0)switch(t.parent.dateCode()){case"custom":null!=t.parent.startDate()&&null!=t.parent.endDate()&&(c=e(c,"startdate",t.parent.startDate().format("YYYYMMDD")),c=e(c,"enddate",t.parent.endDate().format("YYYYMMDD")));break;case"thisweek":case"within":case"withinprev":r=app.utility.GetDatesFromRange(t.parent.dateCode(),"YYYYMMDD",t.parent.dateCustomInterval()),c=e(c,"startdate",r.startDate),c=e(c,"enddate",r.endDate);break;default:console.log("test"),c=e(c,"filter",t.parent.dateCode())}if("function"==typeof(o=t.parent).dateCreatedCode?o.dateCreatedCode():void 0)switch(t.parent.dateCreatedCode()){case"custom":null!=t.parent.createdAfterDate()&&null!=t.parent.createdBeforeDate()&&(c=e(c,"createdAfterDate",t.parent.createdAfterDate().utc().format("YYYY-MM-DDTHH:mm:ssZ")),c=e(c,"createdBeforeDate",t.parent.createdBeforeDate().add(1,"d").utc().format("YYYY-MM-DDTHH:mm:ssZ")));break;case"thisweek":case"lastweek":case"thismonth":case"lastmonth":case"last3months":case"last6months":case"within":case"withinprev":r=app.utility.GetDatesFromRange(t.parent.dateCreatedCode(),"YYYYMMDD",t.parent.createdDateCustomInterval()),c=e(c,"createdAfterDate",r.startDate),c=e(c,"createdBeforeDate",r.endDate),c=e(c,"createdFilter","custom");break;default:c=e(c,"createdFilter",t.parent.dateCreatedCode())}return c}}(this)),this.subscriptions.push(this.url),this.subscriptions.push(this.numTasksCompletedSinceLoad=ko.pureComputed(function(t){return function(){var e,s,n;return(null!=(s=t.data)?s.list:void 0)?(n=t.data.list().length,e=t.data.currentPaginator().page()*t.data.currentPaginator().pageSize(),Math.max(e-n,0)):0}}(this))),this.data=new e(this.url,{ItemClass:s,pageSize:this.pageSize,maxPageSize:250,offsetCount:this.numTasksCompletedSinceLoad,updatesAtBottom:ko.observable(!0),onLoad:function(t){return function(e){var s,n,i,a,o,r,l,p,d,c,u,k,h,m;if(u=e.response,m=u.tasks,h=u.taskLists,i=0,s=0,t.numberOfResults(t.data.totalRecords()),null!=h)for(r=0,p=h.length;r<p;r++)c=h[r],t.buildTaskList(c);for(t.newTasksAdded()&&(n=t.removeNewTasksFromUnorderedList(m)),k=t.data.list(),a=l=0,d=k.length;l<d;a=++l)o=k[a],t.sortOnLoad()&&(i+=t.reorderListItems(m,i,o.id(),a)),s+=o.estimatedMinutes(),"all"===t.mode&&(t.taskLists[o.taskListId()].lastIndex=a);return t.newTasksAdded()&&t.addNewTasksToList(n),t.totalEstimatedTime(s),t.sortOnLoad(!1),t.newTasksAdded(!1),app.cache.set("project"+t.projectId+"-lastTaskListId",t.taskListId,172800)}}(this),loadNow:!0}),this.data.on("loaded",function(t){return function(e){if(null!=e.projects&&t.projectDetails.push.apply(t.projectDetails,e.projects),null!=e.taskLists)return t.taskListDetails.push.apply(t.taskListDetails,e.taskLists)}}(this)),this.subscriptions.push(app.ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent)),this.notEditing=ko.observable(!0),this.subscriptions.push(app.ko.postbox.subscribe("cancel-editing-task",this.OnCancelTaskEdit)),this.subscriptions.push(app.ko.postbox.subscribe("close-all-other-task-forms",this.closeOtherForms)),"taskList"===this.mode&&(this.subscriptions.push(app.ko.postbox.subscribe("tasklist-"+this.taskListId+"-begin-adding-task",function(t){return function(){var e;return t.notEditing(!0),e=app.utility.FindIndexByKeyValue(t.data.fullList(),"id",0),-1===e?t.OnClickShowAddTask():app.utility.ScrollIntoViewIfNeeded(".editTaskForm",0)}}(this))),this.subscriptions.push(app.ko.postbox.subscribe("tasklist-"+this.taskListId+"-cancel-adding-task",function(t){return function(){if(t.notEditing(!0),t.taskList().isAddingTask(!1),t.data.fullList.pop(),t.pendingTaskUpdates.length>0)return t.pendingTaskUpdates=[],t.data.LoadUpdates().then(t.ensureTaskFormIsAtEnd)}}(this)))),this.subscriptions.push(this.shared=app.shared.get("viewModel/filtered-tasks")),this.shared(this),app.InitOnShow(this)}return t.prototype.OnShow=function(){},t.prototype.OnClickShowEditTaskList=function(t){var e,s;return e=this.taskLists[t],null!=(s=e.taskList())?s.OnClickShowEditTaskList(this.taskMode):void 0},t.prototype.OnClickShowAddTask=function(t){var e,n;if(null!=this.taskListId)app.ko.postbox.publish("close-all-other-task-forms",0),this.taskList().isAddingTask(!0),e=new s(null,this.taskList()),this.data.fullList.push(e);else{if(!t)return;app.ko.postbox.publish("close-all-other-task-forms",0),n=this.taskLists[t],e=new s(null,n.taskList()),this.data.fullList.splice(n.lastIndex+1,0,e)}},t.prototype.OnCancelTaskEdit=function(t){var e;if(this.notEditing(!0),"all"===this.mode&&(e=app.utility.FindIndexByKeyValue(this.data.fullList(),"id",0),-1!==e&&this.data.fullList.splice(e,1),this.pendingTaskUpdates.length>0))return this.pendingTaskUpdates=[],this.data.LoadUpdates().then(this.ensureTaskFormIsAtEnd)},t.prototype.OnRendered=function(){},t.prototype.OnNotifyTWEvent=function(t){var e,a,r,l,p,d,c,u,k,h,m;if(null==t.parentTaskId&&(t.parentTaskId=0),"taskList"!==(r=t.itemType)&&"taskListTemplate"!==r||t.actionType!==app.consts.ACTIONTYPE.DELETED||this.deleteTaskListById(t.taskListId),"taskList"!==(l=t.itemType)&&"taskListTemplate"!==l||t.actionType!==app.consts.ACTIONTYPE.UPDATED||(this.fetchTaskListById(t.taskListId),this.restoreTaskList(t.taskListId),this.data.LoadUpdates()),"tags"===t.itemType&&"task"===t.subType&&t.projectId===this.projectId&&this.data.LoadUpdates({itemIdsToRemoveIfNotLoaded:[t.itemId]}),"task"===t.itemType&&parseInt(t.taskListId,10)===this.taskListId&&"moveOrCopy"===t.subType&&"copy"===t.moveOrCopyMode&&0!==t.parentTaskId&&this.data.LoadUpdates(),"task"!==t.itemType&&"task_comment"!==t.itemType||(null==(null!=t?t.taskListId:void 0)||parseInt(t.taskListId,10)!==this.taskListId)&&"all"!==this.mode&&("moveOrCopy"!==t.subType||(p=this.taskListId)!==t.oldTaskListId&&p!==t.newTaskListId)||-1!==["task-reorder","task-drop"].indexOf(t.subType))"task"===t.itemType&&null!=(null!=t?t.subType:void 0)&&"task-drop"===t.subType?null!=t.newTaskListId&&null!=t.oldTaskListId&&(t.newTaskListId===this.taskListId&&t.oldTaskListId!==this.taskListId&&0===t.newParentTaskId||t.newTaskListId===this.taskListId&&0===t.newParentTaskId&&t.newParentTaskId!==t.oldParentTaskId?(this.taskList().numIncomplete(this.taskList().numIncomplete()+1),this.data.LoadUpdates()):(t.oldTaskListId===this.taskListId&&t.newTaskListId!==this.taskListId&&0===t.oldParentTaskId||t.oldTaskListId===this.taskListId&&0===t.oldParentTaskId&&0!==t.newParentTaskId)&&(this.data.DeleteItemById(t.itemId),this.taskList().numIncomplete(this.taskList().numIncomplete()-1))):"task"===t.itemType&&null!=(null!=t?t.subType:void 0)&&"task-reorder"===t.subType&&0===t.newParentTaskId&&parseInt(t.taskListId,10)===this.taskListId&&this.data.LoadUpdates();else{if(null!=t.userId&&t.userId!==app.loggedInUser.id()&&n(".editTaskForm").length>0)return void this.pendingTaskUpdates.push(t);if(null!=t?t.subType:void 0)switch(t.subType){case"moveOrCopy":if("move"===t.moveOrCopyMode&&t.newTaskListId===t.oldTaskListId)return;"move"===t.moveOrCopyMode&&this.taskListId===t.oldTaskListId?this.data.DeleteItemById(t.itemId):this.data.LoadUpdates();break;case"attached-files":case"removed-files":this.data.LoadUpdates();break;case"comment":null!=t.editMode&&t.editMode||this.data.LoadUpdates();break;case"sort":this.sortOnLoad(!0),this.data.LoadUpdates();break;default:this.data.LoadUpdates({itemIdsToRemoveIfNotLoaded:[t.itemId]})}else 0===this.pendingTaskUpdates.length&&(t.actionType===app.consts.ACTIONTYPE.ADDED?(a=this.data.fullList().length,"all"===this.mode&&this.newTasksAdded(!0),this.data.LoadUpdates().then(function(e){return function(){var s,n;if(e.data.fullList().length===a&&null!=(null!=(s=t.taskCopy)?s.id:void 0)&&"all"!==e.mode)return n=app.prefixApi("tasks/"+t.taskCopy.id+".json","API_PREFIX_V2","API_PREFIX_V2"),i.getJSON(n)}}(this)).then(function(t){return function(e){if(null!=(null!=e?e.task:void 0))return e=o.camelize(e),t.data.fullList.push(new s(e.task))}}(this)).then(this.ensureTaskFormIsAtEnd)):this.data.LoadUpdates({itemIdsToRemoveIfNotLoaded:[t.itemId]}).then(this.ensureTaskFormIsAtEnd));this.pendingTaskUpdates.length>0&&(this.pendingTaskUpdates=[],this.data.LoadUpdates().then(this.ensureTaskFormIsAtEnd))}(null!=(d=t.subType)?d.endsWith("bulkEditTasks"):void 0)&&(e=app.utility.ConvertToArray(null!=(c=null!=(u=t.extraInfo)&&null!=(k=u.data)?k.affectedTaskListIds:void 0)?c:"").map(Number),e.includes(this.taskListId)&&("modify"===(null!=(h=t.extraInfo)&&null!=(m=h.data)?m.operation:void 0)?this.data.LoadUpdates():this.data.Reload())),parseInt(t.taskListId,10)===this.taskListId&&t.actionType===app.consts.ACTIONTYPE.UPDATED&&null!=this.taskList()&&this.taskList().GetEstimatedTotalMinutes()},t.prototype.OnClickToggleCollapse=function(t){var e;if("all"===this.mode)return e=this.taskLists[t.taskListId()],null!=e&&e.isCollapsed(!e.isCollapsed()),Tipped.hideAll()},t.prototype.OnAddTaskToTaskList=function(){if(null!=this.taskList())return this.taskList().OnClickAddTask()},t.prototype.getTaskListPrivacyParams=function(t){var e;return e=this.taskLists[t].taskList(),{private:e.isPrivate,lockdownId:e.lockdownId,projectId:e.projectId,id:e.id,title:e.name,type:"tasklist"}},t.prototype.shouldRenderRow=function(t){return null==this.taskListId&&(0===t||this.data.list()[t].taskListId()!==this.data.list()[t-1].taskListId())},t.prototype.isNewTaskList=function(t){return null==this.taskListId&&(0===t||this.data.list()[t].taskListId()!==this.data.list()[t-1].taskListId())},t.prototype.isLastInTaskList=function(t){var e;return null==this.data.list()[t+1]||this.data.list()[t].taskListId()!==(null!=(e=this.data.list()[t+1])?e.taskListId():void 0)},t.prototype.isTaskListAddingTask=function(t){var e;return e=app.utility.FindIndexByKeyValue(this.data.fullList(),"id",0),t===e},t.prototype.isTaskListCollapsed=function(t){var e;return"all"===this.mode&&(e=this.taskLists[t.taskListId()],null!=e?e.isCollapsed():void 0)},t.prototype.closeOtherForms=function(t){var e,s,n,i,a,o;for(this.notEditing(!1),e=app.utility.FindIndexByKeyValue(this.data.fullList(),"id",0),"all"===this.mode?-1!==e&&this.data.fullList.splice(e,1):-1!==e&&(this.taskList().isAddingTask(!1),this.data.fullList.pop()),a=this.data.fullList(),o=[],n=0,i=a.length;n<i;n++)s=a[n],s.id()!==t?o.push(s.isEditMode(!1)):o.push(void 0);return o},t.prototype.buildTaskList=function(t){if("all"===this.mode&&!this.taskLists[t.id])return this.taskLists[t.id]={id:t.id,name:t.name,isCollapsed:ko.observable(!1),taskList:ko.observable(null)},this.fetchTaskListById(t.id)},t.prototype.fetchTaskListById=function(t){if(null!=t&&this.taskLists[t])return app.api.get(app.prefixApi("tasklists/"+t+".json?getNewTaskDefaults=true","API_PREFIX_V1","API_PREFIX_V1")).then(function(e){return function(s){var n;return n=new a(s.response.todoList),e.taskLists[t].taskList(n)}}(this))},t.prototype.reorderListItems=function(t,e,n,i){var a;return a=app.utility.FindIndexByKeyValue(t,"id",n),a>-1?(this.data.list().splice(i,1,new s(t[e])),1):0},t.prototype.removeNewTasksFromUnorderedList=function(t){var e,n,i,a,o;for(n={},i=0,a=t.length;i<a;i++)o=t[i],e=app.utility.FindIndexByKeyValue(this.data.list(),"id",o.id),null==this.hasAddedTasks[o.id]&&(this.data.list().splice(e,1),n[o.taskListId]=n[o.taskListId]||[],n[o.taskListId].push(new s(o)));return n},t.prototype.addNewTasksToList=function(t){var e,s,n,i,a,o,r,l,p,d,c;n=0,r=this.taskLists,p=[];for(i in r){if(c=r[i],s=c.lastIndex,t[i])for(n+=t[i].length,e=[s+1,0].concat(t[i]),Array.prototype.splice.apply(this.data.list(),e),l=t[i],a=0,o=l.length;a<o;a++)d=l[a],this.hasAddedTasks[d.id()]=!0;p.push(c.lastIndex+=n)}return p},t.prototype.deleteTaskListById=function(t){var e,s,n,i,a;for(a=[],n=this.data.list(),e=0,s=n.length;e<s;e++)i=n[e],i.taskListId()===t&&(a.push(i.id()),this.deletedTasks[t]=this.deletedTasks[t]||[],this.deletedTasks[t].push(i));return this.data.DeleteItemsById(a)},t.prototype.restoreTaskList=function(t){return Array.prototype.push.apply(this.data.list(),this.deletedTasks[t])},t.prototype.getProjectName=function(t){var e;return e=app.utility.FindIndexByKeyValue(this.projectDetails(),"id",t),-1===e?"":this.projectDetails()[e].name},t.prototype.getCompanyName=function(t){var e;return e=app.utility.FindIndexByKeyValue(this.projectDetails(),"id",t),-1===e?"":this.projectDetails()[e].companyName},t.prototype.getTaskListName=function(t){return null!=this.taskLists[t].taskList()?this.taskLists[t].taskList().name():this.taskLists[t].name||""},t.prototype.getTaskListDescription=function(t){return null!=this.taskLists[t].taskList()?this.taskLists[t].taskList().description():this.taskLists[t].description||""},t.prototype.ensureTaskFormIsAtEnd=function(){var t,e;if(null!=this.data)return t=app.utility.FindIndexByKeyValue(this.data.fullList(),"id",0),-1!==t?(e=this.data.fullList()[t],this.data.RepositionItemAtIndex(e,this.data.fullList().length)):void 0},t.prototype.getEstimatedMinutesForTaskList=function(t){var e,s,n,i,a,o;for(i=0,o=t.taskListId(),a=ko.utils.arrayFilter(this.data.list(),function(t){return t.taskListId()===o}),i=0,s=0,n=a.length;s<n;s++)e=a[s],i+=e.estimatedMinutes();return i},t.prototype.dispose=function(){null!=this.subscriptions&&this.subscriptions.forEach(function(t){return t.dispose()}),this.data.dispose(),delete this.data},t}(),{viewModel:l,template:t}}.apply(e,a))&&(t.exports=o)}).call(e,s(245),s(245))},4032:function(t,e,s){(function(n){var i,a,o=function(t,e){return function(){return t.apply(e,arguments)}};i=[s(2834),s(1206),s(1116)],void 0!==(a=function(t,e,s){var i;return i=function(){function t(t){var i,a,r,l,p,d;null==t&&(t={}),this.dispose=o(this.dispose,this),this.SortEntries=o(this.SortEntries,this),this.TryLoadAgain=o(this.TryLoadAgain,this),this.OnClickLogTimeOnTask=o(this.OnClickLogTimeOnTask,this),this.OnNotifyTWEvents=o(this.OnNotifyTWEvents,this),this.projectId=null!=(i=t.projectId)?i:app.currentRoute().projectId,this.task=null!=(a=t.task)?a:null,this.taskId=null!=(r=t.taskId)?r:this.task.id(),this.subscriptions=[],this.pageSize=250,this.recordLimit=1e3,this.hasLoaded=null!=(l=t.hasLoaded)?l:ko.observable(!1),this.loadDeferred=t.loadDeferred,null!=this.loadDeferred&&console.assert(n.isFunction(this.loadDeferred.promise)),this.subscriptions.push(this.project=ko.pureComputed(function(t){return function(){return null==t.projectId?null:ko.unwrap(app.projectInfo.get(t.projectId))}}(this))),this.subscriptions.push(this.projectIsActive=ko.pureComputed(function(t){return function(){return null==t.project()||t.project().isActive()}}(this))),this.subscriptions.push(this.billingEnabled=ko.pureComputed(function(t){return function(){var e;return null==t.project()||1===parseInt(null!=(e=t.project())?e.activePages.billing():void 0,10)}}(this))),this.subscriptions.push(this.canViewAllTimeLogs=ko.pureComputed(function(t){return function(){var e;return null!=(e=t.project())?e.permissions.viewAllTimeLogs():void 0}}(this))),this.subscriptions.push(this.canLogTime=ko.pureComputed(function(t){return function(){var e;return null!=(e=t.project())?e.permissions.canLogTime():void 0}}(this))),this.subscriptions.push(this.timeLogsMessage=ko.pureComputed(function(t){return function(){return t.canViewAllTimeLogs()?app.tl("No time entries have been logged against this task"):app.tl("You have not logged time entries against this task")}}(this))),d=app.prefixApi("tasks/"+ko.unwrap(this.taskId)+"/time_entries.json?getTotals=true&includeSubTasks=1","API_PREFIX_V2","API_PREFIX_V2"),p="timeEntries",this.data=new s(d,{listField:p,ItemClass:e,loadNow:!0,pageSize:this.pageSize,sort:this.SortEntries}),this.data.on("loaded",function(t){return function(e,s,n){var i,a,o,r,l;if(null!=t.data)return t.totalLoggedMins(parseInt(null!=(i=n.getResponseHeader("X-Total-Mins-Sum"))?i:0,10)),t.totalNonBillableMins(parseInt(null!=(a=n.getResponseHeader("X-Non-billable-Mins-Sum"))?a:0,10)),t.totalBillableMins(parseInt(null!=(o=n.getResponseHeader("X-Billable-Mins-Sum"))?o:0,10)),t.totalBilledMins(parseInt(null!=(r=n.getResponseHeader("X-Billed-Mins-Sum"))?r:0,10)),t.totalEstimatedMins(parseInt(null!=(l=n.getResponseHeader("X-Task-Estimated-Mins-Sum"))?l:0,10)),t.hasLoaded(!0)}}(this)),this.subscriptions.push(this.data.state.subscribe(function(t){return function(e){if(("blank"===e||"error"===e)&&null!=t.loadDeferred)return t.loadDeferred.resolve()}}(this))),this.subscriptions.push(app.ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvents)),this.tooManyText=app.tl("Displaying full filtered totals and the first [_s] records.",this.recordLimit),this.totalLoggedMins=ko.observable(0),this.totalLogged=ko.pureComputed(function(t){return function(){return{total:t.totalLoggedMins(),decimal:(t.totalLoggedMins()/60).toFixed(2)}}}(this)),this.subscriptions.push(this.totalLogged),this.totalNonBillableMins=ko.observable(0),this.totalNonBillable=ko.pureComputed(function(t){return function(){return{total:t.totalNonBillableMins(),decimal:(t.totalNonBillableMins()/60).toFixed(2)}}}(this)),this.subscriptions.push(this.totalNonBillable),this.totalBillableMins=ko.observable(0),this.totalBillable=ko.pureComputed(function(t){return function(){return{total:t.totalBillableMins(),decimal:(t.totalBillableMins()/60).toFixed(2)}}}(this)),this.subscriptions.push(this.totalBillable),this.totalBilledMins=ko.observable(0),this.totalBilled=ko.pureComputed(function(t){return function(){return{total:t.totalBilledMins(),decimal:(t.totalBilledMins()/60).toFixed(2)}}}(this)),this.subscriptions.push(this.totalBilled),this.totalEstimatedMins=ko.observable(0),this.totalEstimated=ko.pureComputed(function(t){return function(){return{total:t.totalEstimatedMins(),decimal:(t.totalEstimatedMins()/60).toFixed(2)}}}(this)),this.subscriptions.push(this.totalEstimated),this.subscriptions.push(this.timeEntryArrays=ko.pureComputed(function(t){return function(){return[t.data.list()]}}(this))),this.subscriptions.push(this.timeEntryIncrementalArrays=this.timeEntryArrays.extend({incrementalArray:null})),this.dateFormat=ko.pureComputed(function(t){return function(){return app.loggedInUser.localization.dateFormat().toUpperCase()}}()),this.subscriptions.push(this.dateFormat),this.timeFormat=ko.pureComputed(function(t){return function(){var t;return t=app.loggedInUser.localization.timeFormat(),"HH:MM"===t.toUpperCase()?"HH:mm":"h:mmA"}}()),this.subscriptions.push(this.timeFormat),app.InitOnShow(this)}return t.prototype.OnNotifyTWEvents=function(t){var e,s,n,i;if("task"===t.itemType&&parseInt(t.itemId,10)===ko.unwrap(this.taskId))null!=t.subType&&"task-estimate"===t.subType&&this.data.LoadUpdates();else if("time"===t.itemType){if(null==(null!=(e=this.data)?e.options:void 0))return;"time-moved"===t.subType&&parseInt(t.projectId,10)===this.projectId?this.data.Load():"time-bulkUpdated"===t.subType?this.data.LoadUpdates():t.actionType===app.consts.ACTIONTYPE.DELETED?null!=t.extraInfo&&"task"===t.extraInfo.objectType&&parseInt(t.extraInfo.objectId,10)===this.taskId&&(this.data.DeleteItemById(t.itemId),this.data.LoadUpdates()):t.actionType===app.consts.ACTIONTYPE.UPDATED?null!=t.extraInfo&&"task"===t.extraInfo.objectType&&parseInt(t.extraInfo.objectId,10)===this.taskId?("task"===(null!=(s=t.extraInfo.data)?s.newObjectType:void 0)&&parseInt(t.extraInfo.data.newObjectId,10)!==this.taskId&&this.data.DeleteItemById(t.itemId),this.data.LoadUpdates()):"task"===(null!=(n=t.extraInfo)&&null!=(i=n.data)?i.newObjectType:void 0)&&parseInt(t.extraInfo.data.newObjectId,10)===this.taskId?this.data.LoadUpdates():null!=t.extraInfo&&"invoice"===t.extraInfo.objectType&&parseInt(t.projectId,10)===this.projectId&&this.data.LoadUpdates():t.actionType===app.consts.ACTIONTYPE.ADDED&&null!=t.extraInfo&&"task"===t.extraInfo.objectType&&parseInt(t.extraInfo.objectId,10)===this.taskId&&this.data.LoadUpdates()}else"billinginvoice"===t.itemType&&parseInt(t.projectId,10)===this.projectId&&t.actionType===app.consts.ACTIONTYPE.DELETED&&this.data.LoadUpdates()},t.prototype.OnClickLogTimeOnTask=function(){var t;return t=function(t){return function(e){if(!e.wasCancelled)return t.task.hasLoggedTime(!0)}}(this),app.modal.Show("addOrEditTimeEntry",{task:this.task,projectId:this.task.projectId(),onCloseCallBack:t})},t.prototype.TryLoadAgain=function(){return this.data.Reload()},t.prototype.SortEntries=function(t,e){var s;return s=ko.unwrap(t.date)-ko.unwrap(e.date),0===s&&(s=t.id()-e.id()),s},t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()}),this.data.dispose(),delete this.data},t}(),{viewModel:i,template:t}}.apply(e,i))&&(t.exports=a)}).call(e,s(245))},4033:function(t,e,s){(function(n,i){var a,o,r=function(t,e){return function(){return t.apply(e,arguments)}};a=[s(2835),s(1125),s(1138),s(1116),s(1118),s(401)],void 0!==(o=function(t,e,s,a,o,l){var p;return p=function(){function t(t){var o,l,p,d;null==t&&(t={}),this.OnLoad=r(this.OnLoad,this),this.OnClickAddTimeEstimate=r(this.OnClickAddTimeEstimate,this),this.OnDownloadAllAttachments=r(this.OnDownloadAllAttachments,this),this.OnAttachFilesToTask=r(this.OnAttachFilesToTask,this),this.OnMoveTask=r(this.OnMoveTask,this),this.OnNotifyTWEvent=r(this.OnNotifyTWEvent,this),this.OnDragPasteFiles=r(this.OnDragPasteFiles,this),this.componentName="SectionProjectTask",this.subscriptions=[],this.taskId=null!=(o=t.taskId)?o:0,this.projectId=null!=(l=t.projectId)?l:null,ko.isObservable(this.projectId)||(this.projectId=ko.observable(this.projectId)),this.isQuickView=null!=(p=t.isQuickView)&&p,this.isEditing=t.isEditing,this.task=ko.observable(null),this.mode=t.mode,this.taskList=ko.observable(null),this.project=ko.observable(null),this.subscriptions.push(this.isTemplate=ko.pureComputed(function(t){return function(){var e;return null!=(e=t.project())?e.isTemplate():void 0}}(this))),this.subscriptions.push(this.readOnly=ko.pureComputed(function(t){return function(){return t.isTemplate()&&!app.loggedInUser.permissions.canManageProjectTemplates()}}(this))),this.subscriptions.push(this.canAddComments=ko.pureComputed(function(t){return function(){return!t.readOnly()&&t.projectIsActive()}}(this))),this.filesLoaded=ko.observable(!1),this.timeLoaded=ko.observable(!1),this.commentsLoaded=ko.observable(!1),this.loadDeferredArray=[],this.loadTimelogsDeferred=n.Deferred(),this.loadDeferredArray.push(this.loadTimelogsDeferred),null!=ko.unwrap(this.projectId)?this.project(ko.unwrap(app.projectInfo.get(this.projectId))):this.subscriptions.push(this.projectId.subscribe(function(t){return function(e){return t.project(ko.unwrap(app.projectInfo.get(e)))}}(this))),this.subscriptions.push(this.canViewMessagesAndFiles=ko.pureComputed(function(t){return function(){var e,s;return(null!=(e=t.project())?e.permissions.viewMessagesAndFiles():void 0)&&"1"===(null!=(s=t.project())?s.activePages.files().toString():void 0)}}(this))),this.subscriptions.push(this.canAddFiles=ko.pureComputed(function(t){return function(){var e;return(null!=(e=t.project())?e.permissions.canAddFiles():void 0)&&t.canViewMessagesAndFiles()&&!t.readOnly()&&"collaborator"!==app.loggedInUser.userType()}}(this))),this.subscriptions.push(this.canViewTimeLog=ko.pureComputed(function(t){return function(){var e,s,n,i;return(null!=(s=t.project())&&"function"==typeof(e=s.permissions).viewTimeLog?e.viewTimeLog():void 0)&&"1"===(null!=(n=t.project())?n.activePages.time().toString():void 0)&&(null!=(i=t.project())?i.type():void 0)!==app.consts.PROJECT_TEMPLATE}}(this))),this.subscriptions.push(this.projectIsActive=ko.pureComputed(function(t){return function(){return null==t.project()||t.project().isActive()}}(this))),this.subscriptions.push(this.shared=app.shared.get("viewModel/tasks/"+this.taskId)),this.widgetCommentOptions=ko.pureComputed(function(t){return function(){return null==t.task()?null:{mode:"inline",item:t.task(),projectId:t.task().projectId(),type:"task",isQuickView:t.isQuickView}}}(this)),this.shared(this),d=app.prefixApi("tasks/"+this.taskId+".json?getFiles=true&include=taskListNames,projectNames&includeCustomFields=true","API_PREFIX_V2","API_PREFIX_V2"),this.data=new a(d,{listField:"task",ItemClass:e,loadNow:!0,onLoad:function(t){return function(e){var n;if(t.isQuickView||app.UpdatePageTitle(t.data.first().name()+" - ("+app.tl("Tasks")+")"),null!=t.data.first())return t.projectId(t.data.first().projectId()),t.data.first().taskListName(e.response.taskLists[0].name),t.data.first().projectName(e.response.projects[0].name),t.data.first().companyName(e.response.projects[0].companyName),t.data.first().customFields?t.data.first().customFields(app.customFieldsHelper.normalizeFields(t.data.customFields,t.data.first().customFields())):t.data.first().customFields=ko.observableArray([]),t.task(t.data.first()),app.api.get(app.prefixApi("tasklists/"+t.task().taskListId()+".json?getNewTaskDefaults=true","API_PREFIX_V1","API_PREFIX_V1")).then(function(e){if(t.taskList(new s(e.response.todoList)),!t.isQuickView&&null!=t.data&&"embed"!==t.mode)return app.UpdatePageTitle(t.data.first().name()+" - "+t.taskList().name()+" - "+app.currentRoute().project.name()+" - "+app.account.name())}),i.extend({},t.task(),{showPrivacyBar:!0}),app.featureFlip.check("audittrail",{unwrap:!0})&&null!=(null!=(n=app.currentRoute().queryParams)?n.rev:void 0)?app.quickView.show("audit",{itemId:t.task().id(),itemType:"task",revisionId:app.currentRoute().queryParams.rev}):void 0}}(this)}),this.subscriptions.push(app.ko.postbox.subscribe("toggle-edit-mode-for-task-"+this.taskId,function(t){return function(e){return t.task().isEditMode(e)}}(this))),this.subscriptions.push(app.ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent)),this.showingDescription=ko.observable(!0),this.uniqueId=this.taskId+"-"+Date.now(),this.sharedKey="viewModel/WidgetFileAttachmentInline/widget-file-dropzone-inline-"+this.uniqueId,this.childDropzone=app.shared.get(this.sharedKey),this.subscriptions.push(this.childDropzone),this.attachedFilesReady=ko.observable(!0),this.subscriptions.push(app.ko.postbox.subscribe("widget-file-dropzone-"+this.uniqueId,function(t){return function(e){if("attachedFilesReady"===e.action&&t.attachedFilesReady(e.ready),"attachmentsEdited"===e.action&&"remove-inline"===e.subType&&null!=e.itemId)return"string"==typeof e.itemId?(t.cancelled=[],t.cancelled.push(e.itemId)):t.cancelled=e.itemId}}(this))),this.subscriptions.push(this.canDownloadAllAttachments=ko.computed(function(t){return function(){var e,s;if(null!=t.task()&&"function"==typeof(e=t.task()).attachments&&e.attachments()&&t.task().attachmentsCount()>1)return s=t.task().attachments().filter(function(t){return"teamworkpm"===ko.unwrap(t.fileSource)}),s.length>0}}(this)))}return t.prototype.OnDragPasteFiles=function(){var t,e,s,i,a,o;if(o="tasks/"+this.taskId+".json",e={objectId:this.taskId,objectType:"task",task:{content:this.task().name()}},this.canAddFiles())if(null==this.childDropzone())i={componentName:this.componentName,sharedKey:this.sharedKey},l.captureMessage("(v"+window.appVersionId+") - File Dropzone mismatch - widget target not found: "+ko.toJSON(i));else{if(this.pending=this.childDropzone().getCheckedSelected(this.childDropzone().uploadedFiles()),null!=this.cancelled&&(t=ko.utils.compareArrays(this.cancelled,this.pending),s=ko.utils.arrayFilter(t,function(t){return ko.unwrap("retained"!==t.status)}),!s.length))return;a={pendingFileAttachments:this.pending,updateFiles:!0,pendingFileAttachmentsCategoryIds:this.childDropzone().buildNewFileCategories()},n.extend(e.task,a)}return app.api.put(o,e).then(function(t){return function(e){var s;if("OK"===e.response.STATUS)return s=e.response,t.task().LoadUpdate().then(function(){var e;return e={eventTime:new Date,itemType:"task",actionType:app.consts.ACTIONTYPE.ADDED,subType:"drag-or-pasted-files",itemId:t.taskId,taskListId:t.task().taskListId(),addedItems:null!=s.assignedFileIds?s.assignedFileIds:s.assignedFileIds=[],projectId:ko.unwrap(t.projectId)},app.ko.postbox.publish("allTWEvents",e)})}}(this))},t.prototype.OnNotifyTWEvent=function(t){var e;null!=this.task()&&"task"===t.itemType&&t.itemId===this.task().id()&&(t.actionType!==app.consts.ACTIONTYPE.DELETED||null!=t.subType&&"removed-files"===t.subType?null!=(null!=t?t.subType:void 0)&&"moveOrCopy"===t.subType?"move"===t.action&&this.data.Reload():"properties"!==t.subType&&"attached-files"!==(e=t.subType)&&"removed-files"!==e&&this.task().UpdateData():this.isQuickView?app.quickView.close({type:"task",id:t.itemId}):app.GoTo("projects/"+this.task().projectId()+"/tasks"))},t.prototype.OnMoveTask=function(){app.modal.Show("moveOrCopyItem",{type:"task",item:this.task(),itemId:this.task().id(),projectId:this.task().projectId()})},t.prototype.OnAttachFilesToTask=function(){return app.modal.Show("attachFilesToTask",{task:this.task()})},t.prototype.OnDownloadAllAttachments=function(){return this.task().DownloadAllAttachments(),!1},t.prototype.OnClickAddTimeEstimate=function(){return function(t){return function(e){if(!e.wasCancelled)return t.task().estimatedMinutes(e.minutes)}}(this),app.modal.Show("addOrEditTimeEstimate",{item:this.task(),projectId:app.currentRoute().projectId,type:"task"})},t.prototype.OnLoad=function(){var t;if(null!=app.currentRoute().queryParams&&null!=(t=app.currentRoute().queryParams.scrollTo)){if("content"===t)return app.utility.ScrollIntoViewIfNeeded("#TaskContent");if(this.canViewTimeLog()&&"time"===t)return app.utility.ScrollIntoViewIfNeeded("#taskTime");if(this.canViewMessagesAndFiles()){if("comments"===t)return app.utility.ScrollIntoViewIfNeeded("#taskComments");if("files"===t)return app.utility.ScrollIntoViewIfNeeded("#taskFiles")}}},t.prototype.getUserAvatar=function(t){return t===app.loggedInUser.id()?app.loggedInUser.avatarUrl():"//cdn.teamwork.com/images/noPhoto2.png"},t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()}),this.data.dispose(),delete this.data},t}(),{viewModel:p,template:t}}.apply(e,a))&&(t.exports=o)}).call(e,s(245),s(245))},4034:function(t,e,s){var n,i,a=function(t,e){return function(){return t.apply(e,arguments)}};n=[s(2836),s(1116),s(1138),s(1118)],void 0!==(i=function(t,e,s,n){var i;return i=function(){function t(t){var n,i,o,r,l,p;null==t&&(t={}),this.OnNotifyTWEvent=a(this.OnNotifyTWEvent,this),this.subscriptions=[],this.mode=null!=(n=t.mode)?n:"project",this.taskListId=null!=(i=null!=(o=t.taskListId)?o:app.currentRoute().itemId)?i:0,this.isQuickView=null!=(r=t.isQuickView)&&r,this.taskList=ko.observable(null),this.project=ko.observable(null),this.numberOfResults=null!=(l=t.numberOfResults)?l:ko.observable(0),console.assert(ko.isObservable(this.numberOfResults)),this.subscriptions.push(this.projectId=ko.pureComputed(function(e){return function(){var s,n;return null!=t.projectId?t.projectId:null!=(s=null!=(n=e.taskList())?n.projectId():void 0)?s:0}}(this))),null!=ko.unwrap(this.projectId)&&ko.unwrap(this.projectId)>0?this.project(ko.unwrap(app.projectInfo.get(this.projectId))):this.subscriptions.push(this.projectId.subscribe(function(t){return function(e){return t.project(ko.unwrap(app.projectInfo.get(e)))}}(this))),this.parentSection=null!=(p=t.parentSection)?p:null,this.subscriptions.push(this.canAddTasks=ko.pureComputed(function(t){return function(){var e;return null!=(e=t.project())?e.permissions.canAddTasks():void 0}}(this))),this.subscriptions.push(this.canAddTaskLists=ko.pureComputed(function(t){return function(){var e;return null!=(e=t.project())?e.permissions.canAddTaskLists():void 0}}(this))),this.data=new e(app.prefixApi("tasklists/"+this.taskListId+".json?dataSet=full&showMilestones=1&getCompletedCount=1&getNewTaskDefaults=1&includeCustomFields=true","API_PREFIX_V1","API_PREFIX_V1"),{listField:"todo-list",ItemClass:s,loadNow:!0,onLoad:function(t){return function(){return t.taskList(t.data.fullList()[0]),t.numberOfResults(t.data.totalRecords()),t.isQuickView||"template"===t.mode||app.UpdatePageTitle(t.taskList().name()+" - "+app.currentRoute().project.name()+" - "+app.account.name()),app.cache.set("project"+t.projectId()+"-lastTaskListId",t.taskListId,172800)}}(this)}),this.subscriptions.push(app.ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent)),this.subscriptions.push(this.shared=app.shared.get("viewModel/taskLists/"+this.taskListId)),this.shared(this)}return t.prototype.OnNotifyTWEvent=function(t){var e;null==t.moveOrCopyMode&&(t.moveOrCopyMode=""),"taskList"!==(e=t.itemType)&&"taskListTemplate"!==e||t.itemId!==this.taskListId?"tasklist"===t.itemType&&parseInt(t.itemId,10)===this.taskListId&&t.actionType===app.consts.ACTIONTYPE.DELETED&&app.GoTo("projects/"+this.projectId()+"/tasks"):t.actionType===app.consts.ACTIONTYPE.DELETED||"moveOrCopy"===t.subType&&"move"===t.moveOrCopyMode?app.GoTo("projects/"+this.projectId()+"/tasks"):"moveOrCopy"!==t.subType&&this.data.LoadUpdates()},t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()}),this.data.dispose(),delete this.data},t}(),{viewModel:i,template:t}}.apply(e,n))&&(t.exports=i)},4115:function(t,e,s){(function(n){var i,a,o=function(t,e){return function(){return t.apply(e,arguments)}};i=[s(2936),s(1125),s(1138),s(1116),s(1118)],void 0!==(a=function(t,e,s,i,a){var r;return r=function(){function t(t){var e,n,i;null==t&&(t={}),this.OnToggleDisplayDescription=o(this.OnToggleDisplayDescription,this),this.OnDownloadAllAttachments=o(this.OnDownloadAllAttachments,this),this.OnAttachFilesToTask=o(this.OnAttachFilesToTask,this),this.OnNotifyTWEvent=o(this.OnNotifyTWEvent,this),this.OnDragPasteFiles=o(this.OnDragPasteFiles,this),this.componentName="SectionTaskDetails",this.subscriptions=[],this.task=null!=(e=t.task)?e:null,this.taskId=0,this.taskList=null!=(n=t.taskList)?n:null,this.projectId=null!=this.task?this.task.projectId():0,this.tab=null!=(i=t.tab)?i:"comments",this.taskListLoaded=ko.observable(!1),this.taskLoaded=ko.observable(!1),this.displayDescription=app.loggedInUser.preferences.taskQuickViewDisplayDescription,null!=this.task&&(this.taskId=this.task.id(),this.taskLoaded(!0)),this.project=app.projectInfo.get(this.projectId),this.subscriptions.push(this.readOnly=ko.pureComputed(function(t){return function(){var e;return(null!=(e=t.project())?e.isTemplate():void 0)&&!app.loggedInUser.permissions.canManageProjectTemplates()}}(this))),this.subscriptions.push(this.canViewMessagesAndFiles=ko.pureComputed(function(t){return function(){var e,s,n;return"tasklists-template"===(null!=(e=t.project())?e.type():void 0)||(null!=(s=t.project())?s.permissions.viewMessagesAndFiles():void 0)&&"1"===(null!=(n=t.project())?n.activePages.files().toString():void 0)}}(this))),this.subscriptions.push(this.canAddFiles=ko.pureComputed(function(t){return function(){var e,s;return"tasklists-template"===(null!=(e=t.project())?e.type():void 0)||t.canViewMessagesAndFiles()&&(null!=(s=t.project())?s.permissions.canAddFiles():void 0)}}(this))),this.subscriptions.push(this.canViewTimeLog=ko.pureComputed(function(t){return function(){var e,s,n;return(null==(e=t.project())||!e.isTemplate())&&((null!=(s=t.project())?s.permissions.viewTimeLog():void 0)&&"1"===(null!=(n=t.project())?n.activePages.time():void 0))}}(this))),this.shared=app.shared.get("viewModel/tasks/"+this.task.id()),this.subscriptions.push(this.shared),this.widgetCommentOptions=ko.pureComputed(function(t){return function(){return t.taskLoaded()?{mode:"inline",item:t.task,projectId:t.task.projectId(),type:"task",isQuickView:!0}:null}}(this)),this.shared(this),this.tabs=[{name:app.tl("Files"),routePart:"files",showCount:ko.pureComputed(function(t){return function(){return t.task.attachmentsCount()>0}}(this)),count:this.task.attachmentsCount,enabled:this.canViewMessagesAndFiles,markerClass:"label-default",showIfBlank:!0,selected:"files"===this.tab},{name:app.tl("Time Logs"),routePart:"time",showCount:!1,count:ko.observable(0),enabled:this.canViewTimeLog,markerClass:"label-default",showIfBlank:!0,selected:"time"===this.tab},{name:app.tl("Comments"),routePart:"comments",showCount:ko.pureComputed(function(t){return function(){return t.task.commentsCount()>0}}(this)),markerClass:"label-default",count:this.task.commentsCount,showIfBlank:!0,selected:"comments"===this.tab}],this.tabs.baseURL="#",this.selectedTab=ko.observable(this.tab||"comments"),null!=this.task&&null==this.taskList&&(this.taskListLoaded(!1),app.api.get(app.prefixApi("tasklists/"+this.task.taskListId()+".json?getNewTaskDefaults=true","API_PREFIX_V1","API_PREFIX_V1")).then(function(t){return function(e){return t.taskList=new s(e.response.todoList)}}(this)).finally(function(t){return function(){return t.taskListLoaded(!0)}}(this))),this.subscriptions.push(app.ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent)),this.uniqueId=ko.unwrap(this.projectId)+"-"+ko.unwrap(this.task.id)+"-"+(new Date).getTime(),this.childDropzone=app.shared.get("viewModel/WidgetFileAttachmentInline/widget-file-dropzone-inline-"+this.uniqueId),this.subscriptions.push(this.childDropzone),this.attachedFilesReady=ko.observable(!0),this.subscriptions.push(app.ko.postbox.subscribe("widget-file-dropzone-"+this.uniqueId,function(t){return function(e){if("attachedFilesReady"===e.action&&t.attachedFilesReady(e.ready),"attachmentsEdited"===e.action&&"remove-inline"===e.subType&&null!=e.itemId)return"string"==typeof e.itemId?(t.cancelled=[],t.cancelled.push(e.itemId)):t.cancelled=e.itemId}}(this))),this.subscriptions.push(this.canDownloadAllAttachments=ko.computed(function(t){return function(){var e,s;if(null!=t.task&&t.task.attachmentsCount()>1&&("function"==typeof(e=t.task).attachments?e.attachments():void 0))return s=t.task.attachments().filter(function(t){return"teamworkpm"===ko.unwrap(t.fileSource)}),s.length>0}}(this))),app.InitOnShow(this)}return t.prototype.OnDragPasteFiles=function(){var t,e,s,i,a;if(a="tasks/"+this.task.id()+".json",e={objectId:this.task.id(),objectType:"task",task:{content:this.task.name()}},this.canAddFiles()&&null!=this.childDropzone()){if(this.pending=this.childDropzone().getCheckedSelected(this.childDropzone().uploadedFiles()),null!=this.cancelled&&(t=ko.utils.compareArrays(this.cancelled,this.pending),s=ko.utils.arrayFilter(t,function(t){return ko.unwrap("retained"!==t.status)}),!s.length))return;i={pendingFileAttachments:this.pending,updateFiles:!0,pendingFileAttachmentsCategoryIds:this.childDropzone().buildNewFileCategories()},n.extend(e.task,i)}return app.api.put(a,e).then(function(t){return function(e){var s;if("OK"===e.response.STATUS)return s=e.response,t.task.LoadUpdate().then(function(){var e;return e={eventTime:new Date,itemType:"task",actionType:app.consts.ACTIONTYPE.ADDED,subType:"drag-or-pasted-files",itemId:t.task.id(),taskListId:t.task.taskListId(),addedItems:null!=s.assignedFileIds?s.assignedFileIds:s.assignedFileIds=[],projectId:t.projectId},app.ko.postbox.publish("allTWEvents",e)})}}(this))},t.prototype.OnNotifyTWEvent=function(t){if("task"===t.itemType&&t.itemId===this.task.id())t.actionType!==app.consts.ACTIONTYPE.DELETED||null!=t.subType&&"removed-files"===t.subType?null!=(null!=t?t.subType:void 0)&&"moveOrCopy"===t.subType?"move"===t.action&&this.task.LoadUpdate():null!=t.subType&&"properties"===t.subType||this.task.LoadUpdate():app.GoTo("projects/"+this.task.projectId()+"/tasks");else if("task_comment"===t.itemType&&t.itemId===this.task.id()&&null!=t.subType)switch(t.subType){case"task_comment-deleted":this.task.commentsCount(this.task.commentsCount()-1);break;case"task_comment-new":this.task.commentsCount(this.task.commentsCount()+1)}},t.prototype.OnAttachFilesToTask=function(){return app.modal.Show("attachFilesToTask",{task:this.task})},t.prototype.OnDownloadAllAttachments=function(){return this.task.DownloadAllAttachments(),!1},t.prototype.OnToggleDisplayDescription=function(){return this.displayDescription(!this.displayDescription()),app.loggedInUser.preferences.taskQuickViewDisplayDescription(this.displayDescription())},t.prototype.dispose=function(){null!=this.subscriptions&&this.subscriptions.forEach(function(t){return t.dispose()}),this.canAddFiles.dispose(),this.canViewMessagesAndFiles.dispose()},t}(),{viewModel:r,template:t}}.apply(e,i))&&(t.exports=a)}).call(e,s(245))},4231:function(t,e,s){var n,i,a=function(t,e){return function(){return t.apply(e,arguments)}};n=[s(3082),s(3081),s(1116),s(1119)],void 0!==(i=function(t,e,s,n){var i;return i=function(){function t(t){var i,o,r,l,p,d,c,u;null==t&&(t={}),this.InitAvailablePeople=a(this.InitAvailablePeople,this),this.OnPrivacyChanged=a(this.OnPrivacyChanged,this),this.subscriptions=[],this.companyTippedTemplate=e,this.type=null!=(i=t.type)?i:"task",this.id=null!=(o=t.id)?o:0,this.projectId=null!=(r=t.projectId)?r:app.currentRoute().project.id(),this.useRemoteData=null==(l=t.useRemoteData)||l,this.people=null!=(p=t.people)?p:ko.observableArray([]),this.availablePeople=ko.observableArray([]),this.subscriptions.push(this.changeFollowers=ko.pureComputed(this.GetFollowers.bind(this,"changes"))),this.subscriptions.push(this.commentFollowers=ko.pureComputed(this.GetFollowers.bind(this,"comments"))),this.privacyUpdated=ko.observable(!1),this.grantAccessTo=ko.observable(""),this.listenTo=null!=(d=t.listenTo)?d:"",this.availablePeopleInitialized=!1,this.searchText=ko.observable(""),this.followersSnapshot=null,this.initialChangeFollowers=null!=(c=ko.unwrap(t.initialChangeFollowers))?c:[],this.initialCommentFollowers=null!=(u=ko.unwrap(t.initialCommentFollowers))?u:[],this.people().length&&this.InitAvailablePeople(this.people()),this.subscriptions.push(this.people.subscribe(function(t){return function(e){return t.InitAvailablePeople(e)}}(this))),this.subscriptions.push(this.changeFollowers.subscribe(function(t){return function(e){return app.ko.postbox.publish(ko.unwrap(t.type)+"_"+ko.unwrap(t.id)+"_ChangeFollowerIdsChanged",ko.mapping.toJS(e))}}(this))),this.subscriptions.push(this.commentFollowers.subscribe(function(t){return function(e){return app.ko.postbox.publish(ko.unwrap(t.type)+"_"+ko.unwrap(t.id)+"_CommentFollowerIdsChanged",ko.mapping.toJS(e))}}(this))),""!==ko.unwrap(this.listenTo)&&this.subscriptions.push(app.ko.postbox.subscribe("privacyIdsChanged"+ko.unwrap(this.listenTo),this.OnPrivacyChanged)),this.subscriptions.push(this.url=ko.pureComputed(function(t){return function(){if(t.useRemoteData)return 0===ko.unwrap(t.id)||t.privacyUpdated()?"availablePeople.json?for=grantAccessTo&grantAccessTo="+t.grantAccessTo()+"&projectId="+ko.unwrap(t.projectId)+"&getFollowers=true&groupByCompany=true&includeObservers="+app.loggedInUser.inOwnerCompany():"availablePeople.json?for="+ko.unwrap(t.type)+"&id="+ko.unwrap(t.id)+"&getFollowers=true&groupByCompany=true&includeObservers="+app.loggedInUser.inOwnerCompany()}}(this))),this.peopleData=new s(this.url,{listField:"companies",loadNow:this.useRemoteData,params:{ignorePageSize:!0},onLoad:function(t){return function(){t.InitAvailablePeople(t.peopleData.list())}}(this)}),app.InitOnShow(this),this.isSelected=function(t){return function(t){return-1===["none",""].indexOf(t)}}(),this.subscriptions.push(this.filteredPeople=ko.computed(function(t){return function(){var e,s,i,a,o,r,l,p,d,c,u,k;if(""===t.searchText().trim())return t.availablePeople();for(u=n.removeDiacritics(t.searchText().trim()).toLowerCase(),d=t.availablePeople(),i=0,o=d.length;i<o;i++){for(e=d[i],s=0,c=e.people(),a=0,r=c.length;a<r;a++)p=c[a],l=n.removeDiacritics(p.firstName()+" "+p.lastName()).toLowerCase(),k=-1===l.indexOf(u),p.hiddenFromSearch=k,p.hiddenFromSearch&&s++;e.hiddenFromSearch=s===e.people().length}return t.availablePeople()}}(this)))}return t.prototype.OnPrivacyChanged=function(t){return null!=t.ids&&t.ids.length>0?(this.privacyUpdated(!0),this.grantAccessTo(t.ids.join(","))):(this.privacyUpdated(!1),this.grantAccessTo(""))},t.prototype.OnClickFollowerRow=function(t){return"none"===t.followerStatus()&&1===parseInt(t.receiveEmailsOnProject(),10)&&t.followerStatus("all"),!0},t.prototype.OnToggleFollowStatus=function(t){return"none"!==t.followerStatus()?t.followerStatus("none"):t.followerStatus("all")},t.prototype.InitAvailablePeople=function(t){var e,s,n,i,a,o,r,l,p,d,c,u,k,h,m,f;if(null==this.followersSnapshot)if(this.availablePeopleInitialized)for(this.followersSnapshot={},k=this.availablePeople(),n=0,r=k.length;n<r;n++)for(s=k[n],h=s.people(),i=0,l=h.length;i<l;i++)c=h[i],this.followersSnapshot[c.id()]="_"+c.followerStatus();else if(this.initialCommentFollowers.length>0||this.initialChangeFollowers.length>0){for(this.followersSnapshot={},m=this.initialCommentFollowers,a=0,p=m.length;a<p;a++)u=m[a],this.followersSnapshot[u]="_comments";for(f=this.initialChangeFollowers,o=0,d=f.length;o<d;o++)u=f[o],this.followersSnapshot[u]=null!=this.followersSnapshot[u]?"_all":"_changes"}e=ko.mapping.fromJS(t)(),e.forEach(function(t){return function(e){e.people().forEach(function(e){var s;null==e.followingChanges&&(e.followingChanges=ko.observable(!1)),null==e.followingComments&&(e.followingComments=ko.observable(!1)),e.followerStatus=ko.pureComputed({read:function(){var t,s,n,i;return s="1"===(n=e.followingComments())||1===n||!0===n,t="1"===(i=e.followingChanges())||1===i||!0===i,s&&t?"all":s?"comments":t?"changes":"none"},write:function(s){"_"===s[0]?s=s.substr(1):t.followersSnapshot=null,e.followingChanges("all"===s||"changes"===s),e.followingComments("all"===s||"comments"===s)}}),null!=t.followersSnapshot&&e.followerStatus(null!=(s=t.followersSnapshot[e.id()])?s:"_none")}),e.followerStatus=ko.pureComputed({read:function(){return e.people().reduce(function(t,e){switch(t){case"mixed":return"mixed";case"":return e.followerStatus();default:return t===e.followerStatus()?t:"mixed"}},"")},write:function(t){e.people().forEach(function(e){return e.followerStatus(t)})}})}}(this)),this.availablePeople(e),this.availablePeopleInitialized=!0},t.prototype.GetFollowers=function(t){var e,s,n,i,a,o,r,l,p,d;for(s=[],l=this.availablePeople(),n=0,a=l.length;n<a;n++)for(e=l[n],p=e.people(),i=0,o=p.length;i<o;i++)r=p[i],(d=r.followerStatus())!==t&&"all"!==d||s.push(r);return s},t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()}),this.peopleData.dispose(),delete this.peopleData},t}(),{viewModel:i,template:t}}.apply(e,n))&&(t.exports=i)},4289:function(t,e,s){var n,i,a=function(t,e){return function(){return t.apply(e,arguments)}},o=[].indexOf||function(t){for(var e=0,s=this.length;e<s;e++)if(e in this&&this[e]===t)return e;return-1};n=[s(3146),s(3145),s(1116),s(1927),s(1118),s(1119),s(1117),s(1187)],void 0!==(i=function(t,e,s,n,i,r,l,p){var d;return d=function(){function t(t){var i;null==t&&(t={}),this.removeArchivedItems=a(this.removeArchivedItems,this),this.filterTemporaryItems=a(this.filterTemporaryItems,this),this.sortTasks=a(this.sortTasks,this),this.OnRendered=a(this.OnRendered,this),this.OnTaskPaste=a(this.OnTaskPaste,this),this.OnTaskCreated=a(this.OnTaskCreated,this),this.OnNotifyTWEvent=a(this.OnNotifyTWEvent,this),this.OnClickArchiveTasks=a(this.OnClickArchiveTasks,this),this.subscriptions=[],this.actionsTippedContent=e,this.componentName="WidgetPersonalTasks",this.tempTaskId="list-"+this.boardColumnId+"-new-card-"+Date.now(),this.pendingTasks=ko.observableArray([new n]),this.isCollapsed=app.loggedInUser.preferences.personalTasksCollapsed,i="me/personaltasks.json",this.isAddingTask=ko.observable(!0),this.totalRecords=ko.observable(0),this.taskData=new s(i,{listField:"tasks",ItemClass:n,pageSize:50,loadNow:!0,sort:function(t,e){return t.position()-e.position()}}),this.taskData.on("loaded",function(t){return function(e,s,n){return t.totalRecords(n.getResponseHeader("X-Total-Records")),t.filterTemporaryItems(e)}}(this)),this.subscriptions.push(this.allTasks=ko.pureComputed(function(t){return function(){var e,s,n;return e=[],(null!=(n=t.taskData)&&"function"==typeof n.list?n.list():void 0)&&(s=t.taskData.isFiltered()?t.taskData.serverFilteredList:t.taskData.list,e=s().slice()),t.pendingTasks().length&&e.push.apply(e,t.pendingTasks()),e.sort(t.sortTasks)}}(this))),this.subscriptions.push(app.ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent)),p.addDrake("personalTasks",{revertOnSpill:!0,removeOnSpill:!1,moves:function(t,e,s,n){return!!t.classList.contains("w-quick-task__drag")||s.classList.contains("w-quick-task__drag")},accepts:function(t,e,s,n){return!0},dragulaEvents:{cloned:function(t){return function(t,e,s){}}()},afterDrop:function(t){return function(e){var s,n,i;return e.target,i=e.targetIndex/1,n=-1,n=i>0?t.allTasks()[e.targetIndex-1].id():0,s={positionAfterId:n},app.api.put("me/personaltasks/"+e.item.id()+"/reposition.json",s).then(function(t){return e.item.position(t.response.displayOrder/1)})}}(this)}),app.InitOnShow(this)}return t.prototype.OnClickArchiveTasks=function(){app.api.put("me/personaltasks/archive.json",{}).then(function(t){return function(){return t.taskData.Sync()}}(this))},t.prototype.OnNotifyTWEvent=function(t){var e,s,n,i,a;if(a=null!=(e=t.subType)?e:"","task"===t.itemType&&"moveOrCopy"===a)s=t.itemId/1,o.call(this.allTasks().map(function(t){return t.id()/1}),s)>=0&&(this.taskData.DeleteItemById(t.itemId),this.taskData.LoadUpdates());else if(null!=(null!=(n=t.extraInfo)&&null!=(i=n.data)?i.isPersonalTask:void 0)){if("task-completed"===a||"task-reopened"===a)return;this.taskData.LoadUpdates()}},t.prototype.OnTaskCreated=function(){return this.totalRecords(this.totalRecords()/1+1)},t.prototype.OnTaskPaste=function(t){var e,s,i,a,o;if(!t.task.isTemporaryTask())return!0;if(a=t.event.originalEvent.clipboardData.getData("Text"),i=a.split("\n"),i.length>1){for(t.event.preventDefault(),t.task.name(i[0]),t.task.Create(),e=1;e<i.length;)o=i[e],s=new n,s.name(o),s.Create(),this.pendingTasks.push(s),e++;this.pendingTasks.push(new n)}return!1},t.prototype.OnRendered=function(){},t.prototype.OnShow=function(){},t.prototype.sortTasks=function(t,e){return t.position()-e.position()},t.prototype.filterTemporaryItems=function(t){var e,s,n,i;return i=this.pendingTasks(),(null!=t&&null!=(s=t.tasks)?s.length:void 0)&&(n=t.tasks.map(function(t){return ko.unwrap(t.id)/1}),e=i.filter(function(t){var e;return e=t.id()/1,!(o.call(n,e)>=0)}),this.pendingTasks(e)),this.removeArchivedItems()},t.prototype.removeArchivedItems=function(){var t,e;return e=function(){var e,s,n,i;for(n=this.taskData.list(),i=[],e=0,s=n.length;e<s;e++)t=n[e],t.archived()&&i.push(t.id());return i}.call(this),this.taskData.DeleteItemsById(e)},t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:d,template:t}}.apply(e,n))&&(t.exports=i)},4304:function(t,e,s){(function(n){var i,a,o=function(t,e){return function(){return t.apply(e,arguments)}};i=[s(3176),s(3175),s(14)],void 0!==(a=function(t,e,s){var i;return i=function(){function t(t){this.dispose=o(this.dispose,this),this.updateItemDates=o(this.updateItemDates,this),this.dueDateAPIFN=o(this.dueDateAPIFN,this),this.startDateAPIFN=o(this.startDateAPIFN,this),this.dueDateTitleFN=o(this.dueDateTitleFN,this),this.startDateTitleFN=o(this.startDateTitleFN,this),this.getDateInterval=o(this.getDateInterval,this),this.addDaysToDueDate=o(this.addDaysToDueDate,this),this.getDaysToMonIfSoon=o(this.getDaysToMonIfSoon,this),this.setDueDateToday=o(this.setDueDateToday,this),this.clearDueDate=o(this.clearDueDate,this),this.addDaysToStartDate=o(this.addDaysToStartDate,this),this.setStartDateToday=o(this.setStartDateToday,this),this.clearStartDate=o(this.clearStartDate,this),this.init=o(this.init,this);var n,i,a,r;this.subscriptions=[],this.params=t,this.item=null!=t.item?t.item:t.item=null,this.id=t.id,this.useTipped=null!=t.useTipped?t.useTipped:t.useTipped=!1,this.dateFormat=null!=t.dateFormat?t.dateFormat:t.dateFormat="YYYYMMDD",this.updateImmediately=null!=t.updateImmediately?t.updateImmediately:t.updateImmediately=!1,this.tippedParentId=null!=(i=t.tippedParentId)?i:null,this.pushTippedContent=e,this.milestoneUrl=ko.observable(""),this.milestoneTitle=ko.observable(""),null!=this.item&&(this.item=ko.unwrap(this.item),this.item.dueDateFromMilestone()&&null!=this.item.taskListId&&app.api.get(app.prefixApi("tasklists/"+this.item.taskListId()+".json","API_PREFIX_V1","API_PREFIX_V1")).then(function(t){return function(e){var s;if(null!=(s=e.response.todoList)&&null!=s.milestoneId)return app.api.get(app.prefixApi("milestones/"+s.milestoneId+".json","API_PREFIX_V3","API_PREFIX_V3")).then(function(e){var s;if(null!=(s=e.response.milestone))return t.milestoneUrl("#/milestones/"+s.id),t.milestoneTitle(s.name)})}}(this))),this.isUpdating=ko.observable(!1),this.mode=null!=(a=t.mode)?a:"normal",this.today=s().startOf("day"),this.tomorrow=s().add(1,"days").startOf("day"),this.yesterday=s().subtract(1,"days").startOf("day"),this.originalStartDate=""===this.item.startDate()?null:s(this.item.startDate(),this.dateFormat),this.originalDueDate=""===this.item.dueDate()?null:s(this.item.dueDate(),this.dateFormat),this.tmpStartDate=ko.observable(this.originalStartDate),this.tmpDueDate=ko.observable(this.originalDueDate),this.subscriptions.push(this.startDateTitle=ko.pureComputed(this.startDateTitleFN,this)),this.subscriptions.push(this.dueDateTitle=ko.pureComputed(this.dueDateTitleFN,this)),this.subscriptions.push(this.dueDateAPIFormat=ko.pureComputed(this.dueDateAPIFN,this)),this.subscriptions.push(this.startDateAPIFormat=ko.pureComputed(this.startDateAPIFN,this)),this.isQuickView=this.item.isQuickView||!1,this.quickViewFlag=this.isQuickView?"-quickView":"",this.uniqueId=ko.unwrap(this.item.id)+"-"+(new Date).getTime(),this.uniqueId="task_"+this.item.id()+"_quick_date_set_s",this.startPickerId=this.uniqueId+"_start",this.duePickerId=this.uniqueId+"_due",this.pushSubTasks=app.loggedInUser.preferences.taskPushSubTasks,this.pushDependents=app.loggedInUser.preferences.taskPushDependentTasks,this.tippedPushTaskId="pushTaskTipped-"+Date.now(),this.languageIsEnglish="EN"===app.loggedInUser.localization.languageCode(),this.subscriptions.push(this.hasDateChanged=ko.pureComputed(function(t){return function(){var e;return e=!1,t.tmpDueDate()!==t.originalDueDate?e=!0:t.tmpStartDate()!==t.originalStartDate&&(e=!0),e}}(this))),this.selectTasksToPushOptions=[{id:"only",text:this.languageIsEnglish?"only":app.tl("This task only")}],this.allIsAnOption=ko.observable(!1),0===this.item.parentTaskId()?this.item.numActiveSubTasks()>0?(this.selectTasksToPushOptions.push({id:"subtasks",text:this.languageIsEnglish?"including subtasks":app.tl("Subtasks")}),this.item.numDependents()>0&&(this.selectTasksToPushOptions.push({id:"all",text:this.languageIsEnglish?"including subtasks and dependents":app.tl("Subtasks and dependents")}),this.allIsAnOption(!0))):this.item.numDependents()>0&&(this.selectTasksToPushOptions.push({id:"all",text:this.languageIsEnglish?"including dependents":app.tl("Dependents")}),this.allIsAnOption(!0)):this.item.numActiveSubTasks()>0?(this.selectTasksToPushOptions.push({id:"subtasks",text:this.languageIsEnglish?"including subtasks":app.tl("Subtasks")}),this.item.numDependents()>1&&(this.selectTasksToPushOptions.push({id:"all",text:this.languageIsEnglish?"including subtasks and dependents":app.tl("Subtasks and dependents")}),this.allIsAnOption(!0))):this.item.numDependents()>1&&(this.selectTasksToPushOptions.push({id:"all",text:this.languageIsEnglish?"including dependents":app.tl("Dependents")}),this.allIsAnOption(!0)),this.subscriptions.push(this.showDateOptions=ko.pureComputed(function(t){return function(){return t.selectTasksToPushOptions.length>1}}(this))),r=this.selectTasksToPushOptions.filter(function(t){return"subtasks"===t.id}).length>0,n="only",this.pushSubTasks()&&this.pushDependents()&&this.allIsAnOption()?n="all":this.pushSubTasks()&&this.pushDependents()&&!this.allIsAnOption()&&r?n="subtasks":!this.pushSubTasks()&&this.pushDependents()&&this.allIsAnOption()?n="all":this.pushSubTasks()&&!this.pushDependents()&&r&&(n="subtasks"),this.selectTasksToPush=ko.observable(n),this.subscriptions.push(this.selectTasksToPushText=ko.pureComputed(function(t){return function(){var e,s,n,i,a,o,r;for(o=t.selectTasksToPushOptions,r=t.selectTasksToPush(),e=0,n=o.length;e<n;e++)if(a=o[e],a.id===r)return a.text;if("all"===r)for(s=0,i=o.length;s<i;s++)if(a=o[s],"subtasks"===a.id)return"subtasks";return o[0].text}}(this))),this.updateImmediately&&(this.subscriptions.push(this.tmpStartDate.subscribe(function(t){return function(e){if(null==e||"string"!=typeof t.originalStartDate||t.originalStartDate!==e.format("YYYYMMDD"))return t.updateItemDates()}}(this))),this.subscriptions.push(this.tmpDueDate.subscribe(function(t){return function(e){if(null==e||"string"!=typeof t.originalDueDate||t.originalDueDate!==e.format("YYYYMMDD"))return t.updateItemDates()}}(this)))),this.subscriptions.push(this.selectTasksToPush.subscribe(function(t){return function(e){switch(e){case"only":t.pushSubTasks(!1),t.pushDependents(!1);break;case"all":t.pushSubTasks(!0),t.pushDependents(!0);break;case"subtasks":t.pushSubTasks(!0),t.pushDependents(!1)}return Tipped.hide("#"+t.tippedPushTaskId)}}(this))),this.subscriptions.push(app.ko.postbox.subscribe("task-utility-date-task-"+ko.unwrap(this.id)+"-closed",function(t){return function(e){return t.updateItemDates()}}(this)))}return t.prototype.init=function(){this.useTipped&&Tipped.create(n("taskDates"+ko.unwrap(this.id)+this.quickViewFlag),n("quick-date-set"+this.uniqueId),{position:{target:"topmiddle",tooltip:"bottommiddle"},skin:"light",showDelay:300,isTippedParent:!0,onShow:function(t){return function(t,e){return ko.contextFor(e).$data.displayMode("list-quickset")}}(),afterHide:function(t){return function(e,s){return ko.contextFor(s).$data.displayMode("list"),t.updateItemDates()}}(this)})},t.prototype.clearStartDate=function(){this.tmpStartDate(null)},t.prototype.setStartDateToday=function(){this.tmpStartDate(s())},t.prototype.addDaysToStartDate=function(t){var e;e=null,e=null!=this.tmpStartDate()?this.tmpStartDate():s(),e.add(t,"day"),this.tmpStartDate(e)},t.prototype.clearDueDate=function(){this.tmpDueDate(null)},t.prototype.setDueDateToday=function(){this.tmpDueDate(s())},t.prototype.setStartDateToMonday=function(){var t,e;e=this.getDaysToMonIfSoon(),t=s(),t.add(e,"day"),this.tmpStartDate(t)},t.prototype.setDueDateToMonday=function(){var t,e;e=this.getDaysToMonIfSoon(),t=s(),t.add(e,"day"),this.tmpDueDate(t)},t.prototype.getDaysToMonIfSoon=function(){var t;switch(t=s(),t.day()){case 5:return 3;case 6:return 2;case 0:return 1}return 0},t.prototype.addDaysToDueDate=function(t){var e;e=null,e=null!=this.tmpDueDate()?this.tmpDueDate():s(),e.add(t,"day"),this.tmpDueDate(e)},t.prototype.getDateInterval=function(t){var e,n;return n=s(new Date(this.tmpStartDate())),e=s(new Date(this.tmpDueDate())),"start"===t?n.format("YYYYMMDD")===this.today.format("YYYYMMDD")?app.tl("Today"):n.format("YYYYMMDD")===this.tomorrow.format("YYYYMMDD")?app.tl("Tomorrow"):n.format("YYYYMMDD")===this.yesterday.format("YYYYMMDD")?app.tl("Yesterday"):""+n.startOf("day").from(this.today):"due"===t?e.format("YYYYMMDD")===this.today.format("YYYYMMDD")?app.tl("Today"):e.format("YYYYMMDD")===this.tomorrow.format("YYYYMMDD")?app.tl("Tomorrow"):e.format("YYYYMMDD")===this.yesterday.format("YYYYMMDD")?app.tl("Yesterday"):(e.startOf("day"),Math.abs(e.diff(this.today,"days")),""+e.from(this.today)):void 0},t.prototype.startDateTitleFN=function(){return void 0===this.tmpStartDate()?"":s(new Date(this.tmpStartDate())).format("ddd MMM Do")+" ("+this.getDateInterval("start")+")"},t.prototype.dueDateTitleFN=function(){return void 0===this.tmpDueDate()?app.tl("No Due Date"):s(new Date(this.tmpDueDate())).format("ddd MMM Do")+" ("+this.getDateInterval("due")+")"},t.prototype.startDateAPIFN=function(){return void 0===this.tmpStartDate()?"":s(new Date(this.tmpStartDate())).format(this.dateFormat)},t.prototype.dueDateAPIFN=function(){return void 0===this.tmpDueDate()?"":s(new Date(this.tmpDueDate())).format(this.dateFormat)},t.prototype.isSameDay=function(t,e){return typeof t==typeof e&&(void 0===t&&void 0===e||(void 0===t&&(t=null),void 0===e&&(e=null),null!=t&&null!=e&&(!(!t.isValid()||!e.isValid())&&t.isSame(e))))},t.prototype.updateItemDates=function(t){var e,n,i,a,o,r,l,p;if(null==t&&(t={}),!this.isUpdating()||t&&t.skipIsSubmittingCheck){if(this.isUpdating(!0),i=!1,(null==this.tmpStartDate()&&null!=this.item.startDate()&&""!==this.item.startDate()||null!=this.tmpStartDate()&&null==this.item.startDate()||null!=this.tmpStartDate()&&this.tmpStartDate().format(this.dateFormat)!==this.item.startDate())&&(i=!0),(null==this.tmpDueDate()&&null!=this.item.dueDate()&&""!==this.item.dueDate()||null!=this.tmpDueDate()&&null==this.item.dueDate()||null!=this.tmpDueDate()&&this.tmpDueDate().format(this.dateFormat)!==this.item.dueDate())&&(i=!0),!i)return void this.isUpdating(!1);if(null==this.editRecurringOption&&this.item.isRecurring())if("norepeat"===this.item.recurring.frequency())this.editRecurringOption="One";else{if("template"!==this.mode)return e=function(t){return function(e){if(e.wasCancelled&&t.isUpdating(!1),null!=t.params.item&&ko.unwrap(t.params.item).isUpdating(!1),!e.wasCancelled)return t.editRecurringOption=e.editRecurringOption,t.updateItemDates({skipIsSubmittingCheck:!0})}}(this),void app.modal.Show("recurringTasksPrompt",{action:"edit",task:this.item,onCloseCallBack:e});this.editRecurringOption="All"}return null!=this.tmpDueDate()&&null!=this.tmpStartDate()&&this.tmpDueDate().format("x")<this.tmpStartDate().format("x")&&this.tmpStartDate().format("YYYYMMDD")!==this.tmpDueDate().format("YYYYMMDD")?(this.tmpStartDate(this.originalStartDate),this.tmpDueDate(this.originalDueDate),app.flash.Error(app.tl("Task start date can not be later than the task due date")),void this.isUpdating(!1)):(l=this.pushSubTasks(),r=this.pushDependents(),this.item.parentTaskId()>0&&0===this.item.numDependents()&&(r=!1),0===this.item.numActiveSubTasks()&&(l=!1),this.item.isUpdating(!0),n={"todo-item":{"use-defaults":!1,"start-date":null!=this.tmpStartDate()?this.tmpStartDate().format(this.dateFormat):"","due-date":null!=this.tmpDueDate()?this.tmpDueDate().format(this.dateFormat):"","push-subtasks":l,"push-dependents":r}},this.item.isRecurring()&&this.editRecurringOption&&(p={editRecurringOption:this.editRecurringOption,repeatsFreq:this.item.recurring.frequency()},"monthly"===this.item.recurring.frequency()&&null!=this.item.recurring.monthlyOn&&(p.monthlyRepeatType=this.item.recurring.monthlyOn()),n["todo-item"].repeatOptions=p),o=this.item.startDate(),a=this.item.dueDate(),this.item.startDate(null!=this.tmpStartDate()?this.tmpStartDate().format(this.dateFormat):""),this.item.dueDate(null!=this.tmpDueDate()?this.tmpDueDate().format(this.dateFormat):""),app.api.put("tasks/"+ko.unwrap(this.id)+".json",n,{emitError:!1}).then(function(t){return function(e){var n,i,a,o,r,l,p,d,c,u,k;if(t.item.startDate(null!=t.tmpStartDate()?t.tmpStartDate().format(t.dateFormat):""),t.item.dueDate(null!=t.tmpDueDate()?t.tmpDueDate().format(t.dateFormat):""),t.originalStartDate=""===t.item.startDate()?null:s(t.item.startDate(),t.dateFormat),t.originalDueDate=""===t.item.dueDate()?null:s(t.item.dueDate(),t.dateFormat),n=null!=(p=e.response.affectedTaskIds)?p:"",o=null!=(d=e.response.linkedCardId)?d:0,r=null!=(c=e.response.linkedColumnId)?c:0,l=null!=(u=e.response.linkedColumnName)?u:"",i=ko.unwrap(null!=(k=t.item.estimatedMinutes)?k:0),a={eventTime:new Date,itemType:"task",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:t.item.id(),taskListId:t.item.taskListId(),projectId:t.item.projectId(),extraInfo:{data:{affectedTaskIds:n,cardId:o,columnId:r,columnName:l,hasEstimatedTime:i>0}}},t.item.parentTaskId()>0&&(a.parentTaskId=t.item.parentTaskId()),app.ko.postbox.publish("allTWEvents",a),null!=e.response.relativeRemindersMoved&&e.response.relativeRemindersMoved)return""===t.item.dueDate()?app.flash.Info(app.tl("All reminders set relative to the task's due date have been cleared.")):app.flash.Success(app.tl("Relative reminders have been adjusted according to the task's new due date."))}}(this)).catch(function(t){return function(e){return t.item.startDate(o),t.item.dueDate(a),app.error.Ajax(e)}}(this)).finally(function(t){return function(){return t.item.isUpdating(!1),t.isUpdating(!1)}}(this)))}},t.prototype.dispose=function(){null!=this.subscriptions&&this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:i,template:t}}.apply(e,i))&&(t.exports=a)}).call(e,s(245))},4306:function(t,e,s){(function(n){var i,a,o=function(t,e){return function(){return t.apply(e,arguments)}},r=[].indexOf||function(t){for(var e=0,s=this.length;e<s;e++)if(e in this&&this[e]===t)return e;return-1};i=[s(3179),s(3178),s(1927),s(1117)],void 0!==(a=function(t,e,s,i){var a;return a=function(){function t(t){var s,n,i,a;null==t&&(t={}),this._fireCallback=o(this._fireCallback,this),this.getDateInterval=o(this.getDateInterval,this),this.OnSubmit=o(this.OnSubmit,this),this.OnRendered=o(this.OnRendered,this),this.OnRenderedInput=o(this.OnRenderedInput,this),this.OnPaste=o(this.OnPaste,this),this.OnBlur=o(this.OnBlur,this),this.OnKeyboardInput=o(this.OnKeyboardInput,this),this.OnClickCancel=o(this.OnClickCancel,this),this.OnAutoCompleteFocus=o(this.OnAutoCompleteFocus,this),this.OnAutoCompleteChange=o(this.OnAutoCompleteChange,this),this.OnClickTaskName=o(this.OnClickTaskName,this),this.OnNotifyTWEvent=o(this.OnNotifyTWEvent,this),this.subscriptions=[],this.actionsTippedContent=e,this.componentName="WidgetQuickTask",this.callbacks=null!=(s=t.callbacks)?s:{},this.task=t.task,this.uniqueId=ko.observable("quick-task-"+this.task.id()+"-"+Date.now()),this.onClickCallBack=null!=(n=t.onClickCallBack)?n:null,this.list=app.utility.EnsureObservable(null!=(i=t.list)?i:[]),this.isFocusedOnInput=ko.observable(!1),this.priority=ko.observable(this.task.priority()),this.description=ko.observable(this.task.description()),this.name=ko.observable(this.task.name()),this.dueDateAsMoment=ko.observable(null!=(a=this.task.dueDateAsMoment())?a:null),this.today=moment().startOf("day"),this.tomorrow=moment().add(1,"days").startOf("day"),this.yesterday=moment().subtract(1,"days").startOf("day"),this.subscriptions.push(this.dateText=ko.pureComputed(function(t){return function(){return null==t.task?"":"completed"===t.task.taskStatus()?"":""===t.task.dueDate()?"":app.tl("Due")+": "+t.getDateInterval()}}(this))),this.subscriptions.push(this.dateClass=ko.pureComputed(function(t){return function(){var e,s,n,i;return null==(null!=(s=t.task)?s.dueDate():void 0)?"":""===t.task.dueDate()?"":(e=t.task.dueDateAsMoment().startOf("day"),n=moment().startOf("day"),i=moment().startOf("day").add(1,"day"),e<moment().startOf("day")?"due-late":e.format("YYYYMMDD")===n.format("YYYYMMDD")?"due-today":e.format("YYYYMMDD")===i.format("YYYYMMDD")?"due-tomorrow":"")}}(this))),this.subscriptions.push(this.inputIsEnabled=ko.pureComputed(function(t){return function(){return!t.task.archived()&&(!t.task.deleted()&&"completed"!==t.task.status())}}(this)))}return t.prototype.OnNotifyTWEvent=function(t,e){var s,n,i,a,o,l,p,d,c,u,k;t.actionType===app.consts.ACTIONTYPE.UPDATED&&("card"===t.itemType&&(null!=(s=t.extraInfo)&&null!=(n=s.data)?n.columnId:void 0)&&(null!=(a=t.extraInfo)&&null!=(o=a.data)?o.cardId:void 0)===(null!=(l=activeComponent.data)?l.id():void 0)&&this.keymando.navigateTo(t.extraInfo.data.columnId,this.keymando.hasFocus),"task"!==t.itemType||null==t.subType||"task-completed"!==(p=t.subType)&&"task-reopened"!==p||!(null!=(null!=(d=t.extraInfo)&&null!=(c=d.data)?c.parentTaskId:void 0)&&+t.extraInfo.data.parentTaskId===this.task.id()||null!=(null!=(u=t.extraInfo)&&null!=(k=u.data)?k.affectedTaskIds:void 0)&&(i=this.task.id()+"",r.call(t.extraInfo.data.affectedTaskIds.split(","),i)>=0))||this.task.LoadUpdate())},t.prototype.OnClickTaskName=function(t,e){return null!=this.onClickCallBack?void this.onClickCallBack(this.task):!this.task.archived()||void this.task.isSelected(!this.task.isSelected())},t.prototype.OnAutoCompleteChange=function(t){switch(t.type){case"priority":"select"===t.changeType?t.id>0&&this.priority(t.code):this.priority("");break;case"date":"due"===t.subtype&&("select"===t.changeType?this.dueDateAsMoment(t.date):this.dueDateAsMoment(null))}return ko.tasks.schedule(function(t){return function(){return t.OnSubmit()}}(this)),!0},t.prototype.OnAutoCompleteFocus=function(t){},t.prototype.OnClickCancel=function(){},t.prototype.OnKeyboardInput=function(t){return 9===t.which?(t.preventDefault(),this.OnSubmit(),!1):27!==t.which||(t.preventDefault(),this.task.isTemporaryTask()?this.task.ResetData():void 0)},t.prototype.OnBlur=function(){if(!this.task.isTemporaryTask()||this.task.name().trim().length>=3)return app.utility.AreEqual(this.name(),this.task.name())?void 0:this.OnSubmit()},t.prototype.OnPaste=function(t){var e;return!this.task.isTemporaryTask()||(e={event:t,task:this.task},this._fireCallback("paste",e))},t.prototype.OnRenderedInput=function(){return setTimeout(function(t){return function(){return n("#"+t.uniqueId()).focus()}}(this),100)},t.prototype.OnRendered=function(){},t.prototype.OnSubmit=function(){var t,e,s;if(!this.task.name().toString().trim().length)return void app.flash.Warn(app.tl("Task name must not be blank"));if(!(app.utility.AreEqual(this.name().toString(),this.task.name().toString())&&app.utility.AreEqual(this.priority(),this.task.priority())&&app.utility.AreEqual(this.description().toString(),this.task.description().toString())&&app.utility.AreEqual(this.dueDateAsMoment(),this.task.dueDateAsMoment()))){if(t=null!=this.dueDateAsMoment()?this.dueDateAsMoment().format("YYYYMMDD"):"",this.task.priority(this.priority()),this.task.dueDate(t),!this.task.isTemporaryTask())return this.task.Save();if(!this.task.isUpdating())return this.task.isUpdating(!0),e=this.task.Clone(),this.list.push(e),this.task.ResetData(),this.task.isUpdating(!1),setTimeout(function(t){return function(){return t.isFocusedOnInput(!0)}}(this),100),s=function(t){return function(){return t._fireCallback("created")}}(this),e.Create(s)}},t.prototype.getDateInterval=function(){var t;return this.task.dueDate()===this.today.format("YYYYMMDD")?app.tl("Today"):this.task.dueDate()===this.tomorrow.format("YYYYMMDD")?app.tl("Tomorrow"):this.task.dueDate()===this.yesterday.format("YYYYMMDD")?app.tl("Yesterday"):(t=this.task.dueDateAsMoment().startOf("day"),t.from(this.today),t.format("ddd MMM Do"))},t.prototype._fireCallback=function(t,e){if(null==e&&(e={}),null!=this.callbacks[t]&&"function"==typeof this.callbacks[t])return this.callbacks[t](e)},t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:a,template:t}}.apply(e,i))&&(t.exports=a)}).call(e,s(245))},4340:function(t,e,s){var n,i,a=function(t,e){return function(){return t.apply(e,arguments)}};n=[s(3223)],void 0!==(i=function(t){var e;return e=function(){function t(t){null==t&&(t={}),this.dispose=a(this.dispose,this),this.task=null!=t.task?t.task:t.task=null,this.tippedEl=null!=t.tippedEl?t.tippedEl:t.tippedEl=null,this.targetEl=null!=t.targetEl?t.targetEl:t.targetEl=null,this.tippedExists=ko.observable(!1),this.mode=null!=t.mode?t.mode:t.mode="icon"}return t.prototype.dispose=function(){},t}(),{viewModel:e,template:t}}.apply(e,n))&&(t.exports=i)},4341:function(t,e,s){var n,i,a=function(t,e){return function(){return t.apply(e,arguments)}};n=[s(3224),s(3225),s(1125),s(1138),s(1118),s(1225)],void 0!==(i=function(t,e,s,n,i,o){var r;return r=function(){function t(t){var s,n,i;null==t&&(t={}),this.dispose=a(this.dispose,this),this.OnClickMakeDefault=a(this.OnClickMakeDefault,this),this.OnClickEditProperties=a(this.OnClickEditProperties,this),this.OnClickMoveOrCopy=a(this.OnClickMoveOrCopy,this),this.OnClickStartTimer=a(this.OnClickStartTimer,this),this.OnClickViewActivity=a(this.OnClickViewActivity,this),this.OnClickLogTime=a(this.OnClickLogTime,this),this.OnClickShowReminders=a(this.OnClickShowReminders,this),this.OnClickSendReminder=a(this.OnClickSendReminder,this),this.OnClickDeleteTask=a(this.OnClickDeleteTask,this),this.OnClickAddComment=a(this.OnClickAddComment,this),this.OnClickDuplicate=a(this.OnClickDuplicate,this),this.OnClickAttachFiles=a(this.OnClickAttachFiles,this),this.OnClickBulkEditSubtasks=a(this.OnClickBulkEditSubtasks,this),this.OnClickAddSubtasksFromTemplate=a(this.OnClickAddSubtasksFromTemplate,this),this.OnClickQuicklyAddSubtasks=a(this.OnClickQuicklyAddSubtasks,this),this.OnClickEditTask=a(this.OnClickEditTask,this),this.OnClickViewTask=a(this.OnClickViewTask,this),this.OnClickToggleAdvancedOptions=a(this.OnClickToggleAdvancedOptions,this),this.task=null!=t.task?t.task:t.task=null,this.taskList=null!=(s=t.taskList)?s:null,this.tippedContent=e,this.mode=null!=(n=t.mode)?n:"normal",this.isTemplateTask=["template","tlTemplate"].indexOf(this.mode)>-1,this.isQuickView=null!=(i=t.isQuickView)&&i,this.subscriptions=[],this.uniqueId="taskDropdown_"+this.task.id()+"_"+(new Date).getTime(),this.projectId=ko.unwrap(this.task.projectId),this.project=app.projectInfo.get(this.projectId),this.subscriptions.push(this.isProjectTemplate=ko.pureComputed(function(t){return function(){var e;return null!=(e=t.project())?e.isTemplate():void 0}}(this))),this.subscriptions.push(this.isProjectAdmin=ko.pureComputed(function(t){return function(){return null!=t.project()&&t.project().permissions.projectAdministrator()}}(this))),this.subscriptions.push(this.isAdmin=ko.pureComputed(function(t){return function(){return app.loggedInUser.permissions.administrator()}}())),this.subscriptions.push(this.canAddFiles=ko.pureComputed(function(t){return function(){var e;return null!=(e=t.project())?e.permissions.canAddFiles():void 0}}(this))),this.subscriptions.push(this.canStartTimer=ko.pureComputed(function(t){return function(){return t.task.canLogTime()&&"completed"!==t.task.status()}}(this))),this.subscriptions.push(this.activeTaskTimer=ko.pureComputed(function(t){return function(){var e;return e=app.timers().filter(function(e){return parseInt(e.taskId(),10)===parseInt(t.task.id(),10)}),e.length>0?e[0]:null}}(this))),this.subscriptions.push(this.canAddComment=ko.pureComputed(function(t){return function(){return null==t.project()||t.project().isActive()}}(this))),this.subscriptions.push(this.canAddSubtasks=ko.pureComputed(function(t){return function(){return"completed"!==t.task.status()&&t.task.canEdit()}}(this))),this.showAdvancedOpts=app.loggedInUser.preferences.taskDropdownShowAdvanced}return t.prototype.OnClickToggleAdvancedOptions=function(){return this.showAdvancedOpts(!this.showAdvancedOpts())},t.prototype.OnClickViewTask=function(){o("Task action","Dropdown View"),this.task.OnQuickView(),Tipped.hideAll()},t.prototype.OnClickEditTask=function(){o("Task action","Dropdown Edit"),this.task.OnClickEdit(),Tipped.hideAll()},t.prototype.OnClickQuicklyAddSubtasks=function(){o("Task action","Dropdown Quickly add"),Tipped.hideAll(),ko.tasks.schedule(function(t){return function(){return null!=t.taskList?app.modal.Show("quicklyAddTasksToTaskList",{taskList:ko.unwrap(t.taskList),parentTask:t.task}):app.api.get(app.prefixApi("tasklists/"+t.task.taskListId()+".json?getNewTaskDefaults=true","API_PREFIX_V1","API_PREFIX_V1")).then(function(e){return t.taskList=new n(e.response.todoList)}).finally(function(){return app.modal.Show("quicklyAddTasksToTaskList",{taskList:ko.unwrap(t.taskList),parentTask:t.task})})}}(this))},t.prototype.OnClickAddSubtasksFromTemplate=function(){o("Task action","Dropdown Add from template"),Tipped.hideAll(),app.modal.Show("addTasksFromTemplate",{parentTask:this.task,projectId:this.task.projectId(),startDateMoment:this.task.startDateAsMoment()})},t.prototype.OnClickBulkEditSubtasks=function(){o("Task action","Dropdown Bulk edit subtask"),Tipped.hideAll(),ko.tasks.schedule(function(t){return function(){return null!=t.taskList?app.modal.Show("bulkEditTasks",{type:"task",parentTask:t.task,taskListName:t.taskList.name(),isTemplate:"template"===t.mode}):app.api.get("tasklists/"+t.task.taskListId()+".json?getNewTaskDefaults=true").then(function(e){return t.taskList=new n(e.response.todoList)}).finally(function(){return app.modal.Show("bulkEditTasks",{type:"task",parentTask:t.task,taskListName:t.taskList.name(),isTemplate:"template"===t.mode})})}}(this))},t.prototype.OnClickAttachFiles=function(){o("Task action","Dropdown Attach file"),Tipped.hideAll(),app.modal.Show("attachFilesToTask",{task:this.task})},t.prototype.OnClickDuplicate=function(){o("Task action","Dropdown Duplicate"),Tipped.hideAll(),this.task.Duplicate()},t.prototype.OnClickAddComment=function(){o("Task action","Dropdown Add comment"),Tipped.hideAll(),app.modal.Show("addOrEditComment",{item:this.task,projectId:this.task.projectId(),type:"task"})},t.prototype.OnClickDeleteTask=function(){var t;o("Task action","Dropdown Delete"),this.task.Delete({isTemplateTask:null!=(t=this.taskList)&&"function"==typeof t.isTemplate?t.isTemplate():void 0})},t.prototype.OnClickSendReminder=function(){o("Task action","Dropdown Send reminder"),Tipped.hideAll(),app.modal.Show("sendTaskReminder",{task:this.task})},t.prototype.OnClickShowReminders=function(){o("Task action","Dropdown Show reminder"),Tipped.hideAll(),app.modal.Show("currentTaskReminders",{item:this.task,projectId:this.task.projectId()})},t.prototype.OnClickLogTime=function(){var t;o("Task action","Dropdown Log time"),t=function(t){return function(e){if(!e.wasCancelled)return t.task.hasLoggedTime(!0)}}(this),Tipped.hideAll(),app.modal.Show("addOrEditTimeEntry",{task:this.task,projectId:this.task.projectId(),onCloseCallBack:t})},t.prototype.OnClickViewActivity=function(){o("Task action","Dropdown View activity"),Tipped.hideAll(),app.featureFlip.check("audittrail",{unwrap:!0})?app.quickView.show("audit",{itemId:this.task.id(),itemType:"task"}):app.modal.Show("taskActivity",{taskId:this.task.id(),task:this.task})},t.prototype.OnClickStartTimer=function(){o("Task action","Dropdown Start timer"),Tipped.hideAll(),this.task.ToggleTimer()},t.prototype.OnClickMoveOrCopy=function(){o("Task action","Dropdown Move or copy"),Tipped.hideAll(),app.modal.Show("moveOrCopyItem",{item:this.task,itemId:this.task.id(),projectId:this.task.projectId(),type:"task"})},t.prototype.OnClickEditProperties=function(){var t;o("Task action","Dropdown Edit properties"),Tipped.hideAll(),t=function(t){return function(e){var s;if(!e.wasCancelled&&null!=(null!=e&&null!=(s=e.creator)?s.id:void 0))return t.task.createdBy.id(parseInt(e.creator.id,10)),t.task.createdBy.firstName(e.creator.firstName),t.task.createdBy.lastName(e.creator.lastName)}}(this),app.modal.Show("taskProperties",{id:this.task.id(),projectId:this.task.projectId(),task:this.task,onCloseCallBack:t})},t.prototype.OnClickMakeDefault=function(){o("Task action","Dropdown Make default"),Tipped.hideAll(),app.modal.Show("confirm",{title:app.tl("Use as Task Default?"),text:app.tl("Use the properties of this task as the default for new tasks?"),callback:function(t){return function(e){if(!e.wasCancelled)return app.api.put("tasks/"+t.task.id()+"/makedefault.json",{}).then(function(){return app.flash.Success(app.tl("Defaults Updated")),ko.postbox.publish("allTWEvents",{itemId:t.task.taskListId(),itemType:"taskList",actionType:app.consts.ACTIONTYPE.UPDATED,eventTime:new Date})})}}(this)})},t.prototype.dispose=function(){return this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:r,template:t}}.apply(e,n))&&(t.exports=i)},4342:function(t,e,s){(function(n){var i,a,o=function(t,e){return function(){return t.apply(e,arguments)}};i=[s(3226)],void 0!==(a=function(t){var e;return e=function(){function t(t){null==t&&(t={}),this.dispose=o(this.dispose,this),this.getEstimatedTime=o(this.getEstimatedTime,this),this.OnClickAddTimeEstimate=o(this.OnClickAddTimeEstimate,this),this.OnHover=o(this.OnHover,this),this.OnRendered=o(this.OnRendered,this),this.task=null!=t.task?t.task:t.task=null,this.taskList=null!=t.taskList?t.taskList:t.taskList=null,this.projectId=null!=t.projectId?t.projectId:t.projectId=null,this.tippedEl=null!=t.tippedEl?t.tippedEl:t.tippedEl=null,this.targetEl=null!=t.targetEl?t.targetEl:t.targetEl=null,this.tippedExists=ko.observable(!1),this.totalTime=ko.observable(0),this.totalSubTasksTime=ko.observable(0),this.uniqueId="taskEstimatedTime_"+this.task.id()+"_"+(new Date).getTime()}return t.prototype.OnRendered=function(t){return this.tippedEl=n("#"+this.uniqueId),this.targetEl=n("#target_"+this.uniqueId)},t.prototype.OnHover=function(){var t;this.tippedExists()||(t={skin:"light",hideOthers:!0,hideOnClickOutside:!0,hideOn:!1,hideAfter:300,showAfter:300,detach:!1,onShow:function(t){return function(e,s){return t.tippedExists()||t.tippedExists(!0),t.getEstimatedTime(),Tipped.refresh(s)}}(this)},Tipped.create(this.targetEl,this.tippedEl[0],t),Tipped.show(this.targetEl))},t.prototype.OnClickAddTimeEstimate=function(){var t;return Tipped.hideAll(),t=function(t){return function(e){var s,n;if(!e.wasCancelled)return n=t.taskList.estimatedTotalMinutes(),s=t.task.estimatedMinutes(),t.task.estimatedMinutes(e.minutes),0===e.minutes?t.taskList.estimatedTotalMinutes(n-s):s<e.minutes?t.taskList.estimatedTotalMinutes(n-(e.minutes-s)):t.taskList.estimatedTotalMinutes(n+(e.minutes-s))}}(this),app.modal.Show("addOrEditTimeEstimate",{item:this.task,projectId:this.projectId,type:"task",onCloseCallBack:t})},t.prototype.getEstimatedTime=function(){return app.api.get("tasks/"+this.task.id()+"/estimatedtime.json").then(function(t){return function(e){return t.totalTime(e.response.total),t.totalSubTasksTime(e.response.subTasks)}}(this)).finally(function(t){return function(){return app.NextTick(function(){return Tipped.refresh(this.targetEl)})}}())},t.prototype.dispose=function(){},t}(),{viewModel:e,template:t}}.apply(e,i))&&(t.exports=a)}).call(e,s(245))},4343:function(t,e,s){var n,i,a=function(t,e){return function(){return t.apply(e,arguments)}};n=[s(3227),s(1116),s(1226)],void 0!==(i=function(t,e,s){var n;return n=function(){function t(t){var n,i,o;null==t&&(t={}),this.OnNotifyTWEvent=a(this.OnNotifyTWEvent,this),this.OnRendered=a(this.OnRendered,this),this.subscriptions=[],this.task=t.task,this.id=null!=(n=t.id)?n:this.task.id,this.projectId=this.task.projectId,this.sortBy=ko.observable("size"),this.hasLoaded=null!=(i=t.hasLoaded)?i:ko.observable(!1),this.project=app.projectInfo.get(this.projectId),o="v/2/tasks/"+this.id()+"/files.json?getCategoryPath=true&getLikes=true&getVersions=true",this.data=new e(o,{listField:"files",ItemClass:s,parent:this.task,onLoad:function(t){return function(){var e,s,n,i,a,o,r,l,p,d,c;if((null==t.task.attachments||0===t.task.attachments().length)&&ko.unwrap(t.task.numAttachments)>0&&t.data.list().length>0){for(t.newFiles=[],d=t.data.list(),a=0,r=d.length;a<r;a++)s=d[a],p={categoryId:s.categoryId,categoryName:s.categoryName,fileId:s.id,filename:s.name,id:s.id,name:s.name,size:s.size,version:s.version,fileSource:s.fileSource},t.newFiles.push(p);return null!=t.task.attachments?t.task.attachments(t.newFiles):t.task.attachments=ko.observableArray(t.newFiles)}if("function"==typeof(e=t.task).attachments?e.attachments():void 0)for(c=t.task.attachments(),o=0,l=c.length;o<l;o++)i=c[o],null==i.fileSource&&(i.fileSource=ko.observable("")),null!=(n=ko.utils.arrayFirst(t.data.list(),function(t){return t.id()===i.id()}))&&i.fileSource(n.fileSource());return t.task.attachments.valueHasMutated()}}(this)}),this.data.Load({loadingMode:app.consts.LOADINGMODE.FILTER}),this.subscriptions.push(app.ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent)),app.InitOnShow(this)}return t.prototype.OnRendered=function(){app.UpdateTodaysAgos()},t.prototype.UpdateNewFiles=function(t){this.data.Load().then(function(e){return function(){var s,n,i,a,o;if(e.task.isUpdating(!1),n={},null!=t.addedItems){for(o=t.addedItems,i=0,a=o.length;i<a;i++)s=o[i],n[s]=!0;if(null!=e.data)return e.data.list().filter(function(t){if(n[t.id()])return t.doHighlight(!0)})}}}(this))},t.prototype.OnNotifyTWEvent=function(t){var e,s;if("task"===t.itemType&&ko.unwrap(this.projectId)===ko.unwrap(t.projectId)){if("task-file-comment"!==(e=t.subType)&&"project-file-edited"!==e||t.actionType!==app.consts.ACTIONTYPE.UPDATED||ko.unwrap(this.id)!==t.itemId||this.data.LoadUpdates().then(function(e){return function(){var s,n;return s=app.tl("File Updated"),null!=(null!=t&&null!=(n=t.extraInfo)?n.successMessage:void 0)&&(s=t.extraInfo.successMessage),"project-file-edited"===t.subType&&app.flash.Info(s,app.tl("File details were updated")),e.data.list().filter(function(e){if(t.fileId===e.id())return e.doHighlight(!0)})}}(this)),"attached-files"!==(s=t.subType)&&"drag-or-pasted-files"!==s||this.UpdateNewFiles(t),"removed-files"===t.subType&&t.actionType===app.consts.ACTIONTYPE.DELETED&&ko.unwrap(this.id)===t.itemId)return this.data.LoadUpdates().then(function(t){return function(){var e;if(e=void 0!==t.data?t.data.list().filter(function(t){return"deleted"!==t.status()}):{length:0},0===e.length)return t.task.attachmentsCount(0),t.task.displayPreferences.isDisplayingFiles(!1)}}(this))}else if("file"===t.itemType&&parseInt(ko.unwrap(this.projectId),10)===parseInt(ko.unwrap(t.projectId),10))return this.data.LoadUpdates().then(function(t){return function(e){var s,n;if(0===t.task.attachmentsCount()&&(null!=(s=e.project)&&null!=(n=s.files)?n.length:void 0)>0)return t.task.attachmentsCount(e.project.files.length)}}(this))},t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()}),this.data.dispose(),delete this.data},t}(),{viewModel:n,template:t}}.apply(e,n))&&(t.exports=i)},4344:function(t,e,s){var n,i;n=[s(3228)],void 0!==(i=function(t){var e;return e=function(){function t(t){null==t&&(t={}),this.task=t.task}return t.prototype.OnShowHarvestTimer=function(t,e){ko.contextFor(e).$data.displayMode("list-quickset")},t.prototype.OnHideHarvestTimer=function(t,e){ko.contextFor(e).$data.displayMode("list")},t}(),{viewModel:e,template:t}}.apply(e,n))&&(t.exports=i)},4347:function(t,e,s){(function(n){var i,a,o=function(t,e){return function(){return t.apply(e,arguments)}};i=[s(3231),s(1118),s(14),s(1225)],void 0!==(a=function(t,e,s,i){var a;return a=function(){function t(t){var e;null==t&&(t={}),this.dispose=o(this.dispose,this),this.getTemplateRelDate=o(this.getTemplateRelDate,this),this.getDateInterval=o(this.getDateInterval,this),this.getDueDateClass=o(this.getDueDateClass,this),this.OnClickViewCurrentTaskReminders=o(this.OnClickViewCurrentTaskReminders,this),this.OnClickAddTaskReminder=o(this.OnClickAddTaskReminder,this),this.OnClickViewTaskFiles=o(this.OnClickViewTaskFiles,this),this.OnClickViewTaskComments=o(this.OnClickViewTaskComments,this),this.OnAddTaskComment=o(this.OnAddTaskComment,this),this.OnClickTaskAttachments=o(this.OnClickTaskAttachments,this),this.OnClickToggleShowSubTasks=o(this.OnClickToggleShowSubTasks,this),this.OnClickQuickView=o(this.OnClickQuickView,this),this.OnClickViewTaskPrivacy=o(this.OnClickViewTaskPrivacy,this),this.OnClickTaskTags=o(this.OnClickTaskTags,this),this.ClickEventTracking=o(this.ClickEventTracking,this),this.subscriptions=[],this.level=t.level,this.task=t.task,this.type=null!=t.type?t.type:t.type="task",this.isQuickView=null!=t.isQuickView?t.isQuickView:t.isQuickView=!1,this.isMainTask=null!=t.isMainTask?t.isMainTask:t.isMainTask=!1,this.mode=app.utility.EnsureObservable(t.mode||"normal"),this.inFilteredList=null!=(e=t.inFilteredList)&&e,this.isFilteredTemplate="template"===this.mode()&&this.inFilteredList,this.permissionsLoaded=ko.observable(!1),this.project=ko.observable({}),this.project(app.projectInfo.get(this.task.projectId)()),this.subscriptions.push(this.isProjectTemplate=ko.pureComputed(function(t){return function(){var e;return null!=(e=t.project())?e.isTemplate():void 0}}(this))),this.subscriptions.push(this.project.subscribe(function(t){return function(e){if(t.isProjectTemplate())return t.mode("template")}}(this))),this.subscriptions.push(this.readOnly=ko.pureComputed(function(t){return function(){return t.isProjectTemplate()&&!app.loggedInUser.permissions.canManageProjectTemplates()}}(this))),this.subscriptions.push(this.showAttachments=ko.computed(function(e){return function(){var s;return"tasklists-template"===(null!=(s=e.project())?s.type():void 0)||(null!=t.showAttachments?t.showAttachments:t.showAttachments=!0)&&null!=e.project()&&e.task.canViewMessagesAndFiles&&e.task.canViewMessagesAndFiles()&&"1"===e.project().activePages.files()&&"task"!==e.mode()}}(this))),this.subscriptions.push(this.projectIsActive=ko.pureComputed(function(t){return function(){return null==t.project()||(t.project().isActive()||"tasklists-template"===t.project().type())}}(this))),this.subscriptions.push(this.canAddReminders=ko.pureComputed(function(t){return function(){return t.projectIsActive()&&"completed"!==t.task.status()&&("template"!==t.mode()||!t.isProjectTemplate())}}(this))),this.subscriptions.push(this.hasReminders=ko.pureComputed(function(t){return function(){var e;return t.task.hasReminders()||("function"==typeof(e=t.task).hasTemplateReminders?e.hasTemplateReminders():void 0)}}(this))),this.subscriptions.push(this.isTemplateProject=ko.pureComputed(function(t){return function(){var t;return null!=(t=app.currentRoute().project)?t.isTemplate():void 0}}())),this.today=s().startOf("day"),this.tomorrow=s().add(1,"days").startOf("day"),this.yesterday=s().subtract(1,"days").startOf("day"),this.stats=app.projectInfo.getStats(this.task.projectId(),{get:'{"columns":"count"}'}),this.subscriptions.push(this.hasColumns=ko.pureComputed(function(t){return function(){var e,s;return parseInt(null!=(e=t.stats())&&null!=(s=e.columns)?s.count():void 0,10)>0}}(this))),this.taskUniqueId="-"+Date.now(),this.taskRowOnShow=function(t){return function(t,e){var s;return i("Task action",null!=(s=e.attributes["aria-label"])?s.value:void 0),e.classList.add("tipped-exists"),n(e).parents(".task-row").addClass("options-visible")}}(),this.taskRowAfterHide=function(t,e){return n(e).parents(".task-row").removeClass("options-visible")}}return t.prototype.ClickEventTracking=function(t){return function(e){return function(){return i("Task action",t+" click")}}()},t.prototype.OnClickTaskTags=function(){return i("Task action","Task add tags")},t.prototype.OnClickViewTaskPrivacy=function(){return i("Task action","Task privacy")},t.prototype.OnClickQuickView=function(){return i("Task action","Task quickview"),this.task.OnQuickView()},t.prototype.OnClickToggleShowSubTasks=function(t,e){var s,n;return s=null!=(n=e.currentTarget.attributes["aria-label"])?n.value:void 0,i("Task action",s+" click"),this.isMainTask&&this.task.displayPreferences.isDisplayingDescription()&&this.task.displayPreferences.isDisplayingDescription(!1),this.task.OnClickToggleShowSubTasks()},t.prototype.OnClickTaskAttachments=function(){if(i("Task action","Task attachment"),!this.isQuickView&&"task"!==this.mode())return this.task.displayPreferences.isDisplayingFiles(!this.task.displayPreferences.isDisplayingFiles())},t.prototype.OnAddTaskComment=function(){i("Task action","Task Comments click"),app.modal.Show("addOrEditComment",{item:this.task,projectId:this.task.projectId(),type:"task"})},t.prototype.OnClickViewTaskComments=function(){return i("Task action","Task Comments set click"),app.api.put("tasks/"+this.task.id()+"/comments/markread.json",{}).then(function(t){return function(){return t.task.hasUnreadComments(!1)}}(this)),this.task.OnQuickView("comments")},t.prototype.OnClickViewTaskFiles=function(){return this.task.OnQuickView("files")},t.prototype.OnClickAddTaskReminder=function(){return i("Task action","Task reminder"),app.modal.Show("currentTaskReminders",{item:this.task,projectId:this.task.projectId(),addNew:!0})},t.prototype.OnClickViewCurrentTaskReminders=function(){return i("Task action","Task reminder set"),app.modal.Show("currentTaskReminders",{item:this.task,projectId:this.task.projectId()})},t.prototype.getDueDateClass=function(t){return null==this.task.dueDate()||""===this.task.dueDate()?"":this.task.dueDate()===this.today.format("YYYYMMDD")?"today":this.task.dueDate()===this.tomorrow.format("YYYYMMDD")?"tomorrow":this.task.dueDateAsMoment().isBefore(this.today)?"late":"other"},t.prototype.getDateInterval=function(t,e){var n,i,a,o;return null==e&&(e=!1),"start"===t?this.task.startDate()===this.today.format("YYYYMMDD")?app.tl("Today"):this.task.startDate()===this.tomorrow.format("YYYYMMDD")?app.tl("Tomorrow"):this.task.startDate()===this.yesterday.format("YYYYMMDD")?app.tl("Yesterday"):(o=this.task.startDateAsMoment().startOf("day"),i=this.task.startDateAsMoment().startOf("day").from(this.today),a="ddd MMM Do",o.format("YYYY")!==(new s).format("YYYY")&&(a="ddd MMM Do, YYYY"),e?""+i:o.format(a)):"due"===t?this.task.dueDate()===this.today.format("YYYYMMDD")?app.tl("Today"):this.task.dueDate()===this.tomorrow.format("YYYYMMDD")?app.tl("Tomorrow"):this.task.dueDate()===this.yesterday.format("YYYYMMDD")?app.tl("Yesterday"):(n=this.task.dueDateAsMoment().startOf("day"),i=n.from(this.today),a="ddd MMM Do",n.format("YYYY")!==(new s).format("YYYY")&&(a="ddd MMM Do, YYYY"),e?""+i:n.format(a)):void 0},t.prototype.getTemplateRelDate=function(t){var e,n;return n=s.isMoment(t)?t.startOf("day"):s(t,"YYYYMMDD").startOf("day"),e=n.diff(app.consts.DATES.teamworkEpoch(),"days"),0===e?app.tl("Day One"):app.tl("Day [_s]",e+1)},t.prototype.dispose=function(){null!=this.subscriptions&&this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:a,template:t}}.apply(e,i))&&(t.exports=a)}).call(e,s(245))},4348:function(t,e,s){var n,i,a=function(t,e){return function(){return t.apply(e,arguments)}};n=[s(3232)],void 0!==(i=function(t){var e;return e=function(){function t(t){var e,s;null==t&&(t={}),this.dispose=a(this.dispose,this),this.task=null!=(e=t.task)?e:null,console.assert(null!=this.task),this.taskId=null!=(s=t.taskId)?s:this.task.id}return t.prototype.dispose=function(){},t}(),{viewModel:e,template:t}}.apply(e,n))&&(t.exports=i)},4349:function(t,e,s){var n,i,a=function(t,e){return function(){return t.apply(e,arguments)}};n=[s(3233),s(1116)],void 0!==(i=function(t,e){var s;return s=function(){function t(t){var s,n,i;null==t&&(t={}),this.dispose=a(this.dispose,this),this.getImageUrl=a(this.getImageUrl,this),this.onClickOpenTaskQV=a(this.onClickOpenTaskQV,this),this.OnShow=a(this.OnShow,this),this.OnRendered=a(this.OnRendered,this),this.taskId=t.taskId,this.parentTaskId=t.parentTaskId,this.type=null!=(s=t.type)?s:"dependents",this.tippedEl=null!=(n=t.tippedEl)?n:null,i=app.prefixApi("tasks/"+ko.unwrap(this.taskId)+"/"+this.type+".json","API_PREFIX_V1","API_PREFIX_CF"),this.data=new e(i,{listField:this.type,loadNow:"parentTask"!==this.type,onLoad:function(t){return function(e){return null!=t.tippedEl?Tipped.refresh(t.tippedEl):Tipped.refresh()}}(this)})}return t.prototype.OnRendered=function(){null!=this.tippedEl?Tipped.refresh(this.tippedEl):Tipped.refresh()},t.prototype.OnShow=function(){},t.prototype.onClickOpenTaskQV=function(t){null!=t.id&&app.quickView.show("task",{id:t.id,taskId:t.id,projectId:parseInt(t.projectId,10)})},t.prototype.getImageUrl=function(t){return"dependents"===this.type?"//cdn.teamwork.com/images/icons/checkBox_cant"+t.dependentCant[0].toUpperCase()+t.dependentCant.substr(1)+".png?x=2":"predecessors"===this.type?"//cdn.teamwork.com/images/icons/dependency-must"+t.predecessorMust+"-cant"+t.dependentCant+"-strong.png?x=2":void 0},t.prototype.dispose=function(){this.data.dispose(),delete this.data},t}(),{viewModel:s,template:t}}.apply(e,n))&&(t.exports=i)},4350:function(t,e,s){var n,i,a=function(t,e){return function(){return t.apply(e,arguments)}};n=[s(3234),s(1118),s(14)],void 0!==(i=function(t,e,s){var n;return n=function(){function t(t){var e,n,i,o;null==t&&(t={}),this.dispose=a(this.dispose,this),this.removeRelativeReminders=a(this.removeRelativeReminders,this),this.loadReminders=a(this.loadReminders,this),this.formatTime=a(this.formatTime,this),this.formatDate=a(this.formatDate,this),this.formatRelativeTime=a(this.formatRelativeTime,this),this.OnClickDeleteReminder=a(this.OnClickDeleteReminder,this),this.OnClickEditReminder=a(this.OnClickEditReminder,this),this.OnClickAddTaskReminder=a(this.OnClickAddTaskReminder,this),this.OnNotifyTWEvent=a(this.OnNotifyTWEvent,this),this.subscriptions=[],this.task=null!=(e=t.task)?e:null,this.subscriptions.push(app.ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent)),this.mode=null!=(n=t.mode)?n:"modal",this.privacyIds=null!=(i=t.privacyIds)?i:[],this.useOffSetDueDate=null!=(o=t.useOffSetDueDate)&&o,"task-templates"===app.currentRoute().page&&(this.useOffSetDueDate=!0),this.allRemindersRemoved=ko.observable(!1),this.useOffSetDueDate&&(this.subscriptions.push(this.shared=app.shared.get("tasklistDefaults/defaultReminders/list")),this.shared(this)),this.subscriptions.push(this.project=ko.pureComputed(function(t){return function(){return null==t.task.projectId?null:ko.unwrap(app.projectInfo.get(t.task.projectId))}}(this))),this.subscriptions.push(this.isProjectTemplate=ko.pureComputed(function(t){return function(){var t;return null!=(t=app.currentRoute().project)?t.isTemplate():void 0}}())),this.subscriptions.push(this.readOnly=ko.pureComputed(function(t){return function(){return t.isProjectTemplate()&&!app.loggedInUser.permissions.canManageProjectTemplates()}}(this))),this.subscriptions.push(this.canAddReminders=ko.pureComputed(function(t){return function(){return!t.readOnly()&&(!app.loggedInUser.isCollaborator()&&(null==t.project()||null==t.task||(t.project().isActive()&&"completed"!==t.task.status()||"task-templates"===app.currentRoute().page)))}}(this))),this.autoSave="modal"===this.mode,"modal"===this.mode?this.loadReminders(!0):this.loadReminders(!0,!0),this.task&&this.subscriptions.push(this.task.dueDateAsMoment.subscribe(function(t){return function(e){var n,i,a,o,r,l,p,d,c,u;if(t.task.remindersLoaded(!1),e){for(c=[],d=t.task.reminders(),o=0,r=d.length;o<r;o++)p=d[o],0!==t.task.id()||p.isRelative()?0===parseInt(p.isRelative(),10)?c.push(p):(n=s(e),i=ko.observable(n),i(i().add(-1*ko.unwrap(p.relativeNumberOfDays),"days")),null!=p.time?(u=ko.unwrap(p.time).split(":",2),a=u[0],l=u[1]):(a=s(p.dateTimeUtc()).format("H"),l=s(p.dateTimeUtc()).format("mm")),i(i().set({hour:a,minute:l})),s()<i()&&(p.dateTimeUtc=i,p.usingOffSetDueDate=ko.observable(t.useOffSetDueDate),p.fromTaskListDefault=!0,c.push(p))):c.push(p);t.task.reminders([]),t.task.reminders(c)}else t.removeRelativeReminders();t.task.remindersLoaded(!0)}}(this)))}return t.prototype.OnNotifyTWEvent=function(t){var e,s,n,i,a;"task"===t.itemType&&t.itemId===this.task.id()&&(a="updated"===t.actionType,e=!0,(null==t.subType||"reminder"!==(s=t.subType)&&"taskReminder"!==s)&&(null==(null!=(n=t.extraInfo)?n.type:void 0)||"reminder"!==(i=t.extraInfo.type)&&"taskReminder"!==i)||this.loadReminders(a,e))},t.prototype.OnClickAddTaskReminder=function(){var t;return t=function(t){return function(e){var n,i,a,o,r,l,p,d;if(!e.wasCancelled&&!t.autoSave){for(n=e.reminder.assigneeDetails,a=0,o=n.length;a<o;a++)i=n[a],r={createdByUserFirstname:ko.observable(app.loggedInUser.firstName()),createdByUserId:ko.observable(app.loggedInUser.id()),createdByUserLastname:ko.observable(app.loggedInUser.lastName()),createdDateTime:ko.observable(s().format()),id:ko.observable(i.id+"_"+Date.now()),note:ko.observable(e.reminder.note),taskId:ko.observable(t.task.id()),type:ko.observable(e.reminder.type),userFirstname:ko.observable(i.firstName),userId:ko.observable(i.id),userLastname:ko.observable(i.lastName),peopleAssigned:ko.observable(null!=(l=e.reminder.peopleAssigned)&&l),wasSent:ko.observable("0"),isRelative:ko.observable(null!=(p=e.reminder.isRelative)?p:0),relativeNumberOfDays:ko.observable(null!=(d=e.reminder["relative-number-days"])?d:0)},t.useOffSetDueDate?(r.time=ko.observable(e.reminder.time),r.usingOffSetDueDate=ko.observable(!0)):(r.dateTimeUtc=ko.observable(e.reminder["date-time-utc"]),r.usingOffSetDueDate=ko.observable(!1)),t.task.reminders.push(r);return t.allRemindersRemoved(!1)}}}(this),app.modal.Show("addOrEditTaskReminder",{stack:!0,item:this.task,privacyIds:ko.unwrap(this.privacyIds),projectId:this.task.projectId(),useOffSetDueDate:this.useOffSetDueDate,onCloseCallBack:t,autoSave:this.autoSave})},t.prototype.OnClickEditReminder=function(t){var e;return e=function(t){return function(e){var s,n,i;if(!e.wasCancelled)return i=app.utility.FindIndexByKeyValue(t.task.reminders(),"id",e.reminder.id),-1!==i?(t.useOffSetDueDate?t.task.reminders()[i].time(e.reminder.time):t.task.reminders()[i].dateTimeUtc(e.reminder["date-time-utc"]),t.task.reminders()[i].note(e.reminder.note),t.task.reminders()[i].type(e.reminder.type),null!=e.reminder["relative-number-days"]&&t.task.reminders()[i].relativeNumberOfDays(e.reminder["relative-number-days"]),null!=e.reminder.assigneeDetails&&e.reminder.assigneeDetails.length&&(s=e.reminder.assigneeDetails[0]),null!=s&&(t.task.reminders()[i].userId(s.id),t.task.reminders()[i].userFirstname(s.firstName),t.task.reminders()[i].userLastname(s.lastName)),t.task.reminders()[i].peopleAssigned=ko.observable(null!=(n=e.reminder.peopleAssigned)&&n)):void 0}}(this),app.modal.Show("addOrEditTaskReminder",{stack:!0,item:this.task,privacyIds:ko.unwrap(this.privacyIds),reminder:t,projectId:this.task.projectId(),autoSave:this.autoSave,useOffSetDueDate:this.useOffSetDueDate,onCloseCallBack:e})},t.prototype.OnClickDeleteReminder=function(t){var e;this.autoSave?(e="task-templates"!==app.currentRoute().page?"taskreminders/"+t.id()+".json":"templateReminders/"+t.id()+".json",app.api.delete(e).then(function(e){return function(s){if(e.task.reminders.remove(t),0===e.task.reminders().length&&(e.task.hasReminders(!1),null!=e.task.hasTemplateReminders))return e.task.hasTemplateReminders(!1)}}(this))):(this.task.reminders.remove(t),0===this.task.reminders().length&&(this.allRemindersRemoved(!0),this.task.hasReminders(!1),null!=this.task.hasTemplateReminders&&this.task.hasTemplateReminders(!1)))},t.prototype.formatRelativeTime=function(t){return t=parseInt(t,10),1===t?app.tl("[_s] day before due date","1"):-1===t?app.tl("[_s] day after due date","1"):t>0?app.tl("[_s] days before due date",t):t<0?app.tl("[_s] days after due date",Math.abs(t)):0===t?app.tl("On the due date"):void 0},t.prototype.formatDate=function(t){var e;try{return e=s(this.task.reminders()[t()].dateTimeUtc()),e.format(app.loggedInUser.localization.dateFormat()+" "+app.loggedInUser.localization.timeFormat())}catch(t){t}},t.prototype.formatTime=function(t){var e,n;return"task-templates"===app.currentRoute().page?(e=s(),n=t.split(":"),e=e.hours(n[0]).minutes(n[1]).seconds(0).milliseconds(0),e.add(app.loggedInUser.localization.timezoneUTCOffsetMins(),"minutes").format("HH:mm")):t},t.prototype.loadReminders=function(t,e){var n,i,a,o,r,l,p,d,c,u,k;if(null==t&&(t=!1),null==e&&(e=!1),this.useOffSetDueDate&&0!==this.task.taskListId()){if(k="tasklist/"+this.task.taskListId()+"/defaultreminders.json","task-templates"===app.currentRoute().page){if(0===this.task.id())return void this.task.remindersLoaded(!0);k+="?taskId="+this.task.id()}app.api.get(k).then(function(e){return function(s){var n,i,a,o,r,l,p;if(l=ko.mapping.fromJS(s.response.reminders)(),"task-templates"===app.currentRoute().page&&"task-form"===e.mode){for(p=[],i=0,o=l.length;i<o;i++)n=l[i],parseInt(ko.unwrap(n.relativeNumberOfDays),10)<=parseInt(ko.unwrap(e.task.dueDateOffset),10)&&p.push(n);l=p}if(t)e.task.reminders(l);else for(a=0,r=l.length;a<r;a++)n=l[a],-1===app.utility.FindIndexByKeyValue(e.task.reminders(),"id",n.id())&&e.task.reminders.push(n);return e.task.remindersLoaded(!0)}}(this))}else{if(0===this.task.id()){if(null!=this.task.reminders&&this.task.reminders().length>0)if(this.task.dueDateAsMoment())for(c=[],d=this.task.reminders(),o=0,r=d.length;o<r;o++)p=d[o],n=s(this.task.dueDateAsMoment()),i=ko.observable(n),i(i().add(-1*ko.unwrap(p.relativeNumberOfDays),"days")),u=ko.unwrap(p.time).split(":",2),a=u[0],l=u[1],i(i().set({hour:a,minute:l})),s()<i()&&(p.dateTimeUtc=i,p.usingOffSetDueDate=ko.observable(this.useOffSetDueDate),p.fromTaskListDefault=this.useOffSetDueDate,c.push(p)),this.task.reminders(c);else this.removeRelativeReminders();return void this.task.remindersLoaded(!0)}app.api.get("tasks/"+this.task.id()+"/reminders.json").then(function(o){return function(r){var d,c,u,k,h,m,f;if(f=ko.mapping.fromJS(r.response.reminders)(),t)o.task.reminders(f);else for(c=0,k=f.length;c<k;c++)d=f[c],-1===app.utility.FindIndexByKeyValue(o.task.reminders(),"id",d.id())&&o.task.reminders.push(d);if(e)for(m=o.task.reminders(),u=0,h=m.length;u<h;u++)p=m[u],parseInt(p.isRelative(),10)&&p.relativeNumberOfDays()!==s(p.dateTimeUtc()).diff(o.task.dueDateAsMoment(),"days")&&(n=s(o.task.dueDateAsMoment()),i=ko.observable(n),i(i().add(-1*ko.unwrap(p.relativeNumberOfDays),"days")),a=s(p.dateTimeUtc()).format("H"),l=s(p.dateTimeUtc()).format("mm"),i(i().set({hour:a,minute:l})),p.dateTimeUtc=i);return o.task.remindersLoaded(!0)}}(this))}},t.prototype.removeRelativeReminders=function(){var t,e,s,n,i;for(s=[],i=this.task.reminders(),t=0,e=i.length;t<e;t++)n=i[t],0===this.task.id()?n.isRelative()||s.push(n):0===parseInt(n.isRelative(),10)&&s.push(n);this.task.reminders(s)},t.prototype.dispose=function(){null!=this.subscriptions&&this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:n,template:t}}.apply(e,n))&&(t.exports=i)},4351:function(t,e,s){var n,i,a=function(t,e){return function(){return t.apply(e,arguments)}},o=[].indexOf||function(t){for(var e=0,s=this.length;e<s;e++)if(e in this&&this[e]===t)return e;return-1};n=[s(3237),s(3235),s(3236),s(1118),s(1117),s(1225)],void 0!==(i=function(t,e,s,n,i,r){var l;return l=function(){function t(t){var n,i,o,r,l,p,d,c,u,k,h;null==t&&(t={}),this.dispose=a(this.dispose,this),this.taskHasTemplateRole=a(this.taskHasTemplateRole,this),this.loadTaskUpdates=a(this.loadTaskUpdates,this),this.cantStart=a(this.cantStart,this),this.cantComplete=a(this.cantComplete,this),this.getTemplateTaskNameNoRole=a(this.getTemplateTaskNameNoRole,this),this.getResponsibleText=a(this.getResponsibleText,this),this.OnEditClick=a(this.OnEditClick,this),this.OnClickTaskName=a(this.OnClickTaskName,this),this.OnHoverEstTime=a(this.OnHoverEstTime,this),this.OnClickAddTimeEstimate=a(this.OnClickAddTimeEstimate,this),this.OnNotifyTWEvent=a(this.OnNotifyTWEvent,this),this.countTippedContent=e,this.estTimeTippedContent=s,this.componentName="WidgetTaskRow",this.subscriptions=[],this.task=t.task,this.taskList=null!=(n=t.taskList)?n:null,this.mode=null!=(i=t.mode)?i:"normal",this.subscriptions.push(this.isProjectTemplate=ko.pureComputed(function(t){return function(){var t;return null!=(t=app.currentRoute().project)?t.isTemplate():void 0}}())),this.subscriptions.push(this.readOnly=ko.pureComputed(function(t){return function(){return t.isProjectTemplate()&&!app.loggedInUser.permissions.canManageProjectTemplates()}}(this))),(null!=(r=app.currentRoute().project)?r.isTemplate():void 0)&&(this.mode="template",this.task.canComplete(!1)),t.isEditing&&null!=this.task&&"boolean"==typeof t.isEditing&&this.task.isEditMode(t.isEditing),this.level=null!=(l=t.level)?l:1,this.parentVM=null!=(p=t.parentVM)?p:null,this.isMainTask=null!=(d=t.isMainTask)&&d,this.isQuickView=null!=(c=t.isQuickView)&&c,this.inCompletedList=null!=(u=t.inCompletedList)&&u,this.inFilteredList=null!=(k=t.inFilteredList)&&k,this.hasLoaded=null!=(h=t.hasLoaded)?h:ko.observable(!1),this.isFilteredTemplate="template"===this.mode&&this.inFilteredList,this.showDragHandle=null!=(o=t.showDragHandle)?o:null,null==this.showDragHandle&&(this.showDragHandle="flat"!==this.mode&&!this.isFilteredTemplate&&!this.isMainTask),this.projectId=null!=t.projectId?t.projectId:null!=app.currentRoute().project?app.currentRoute().projectId:"template"===this.mode||0===this.task.id()?ko.unwrap(this.taskList.projectId):ko.unwrap(this.task.projectId),null!=t.showIt?this.showIt=t.showIt:this.subscriptions.push(this.showIt=ko.pureComputed(function(t){return function(){return!!t.isMainTask||!("deleted"===t.task.status()||!t.task.visible())&&("completed"!==t.task.status()||(!("completed"!==t.task.status()||!ko.unwrap(t.inCompletedList))||t.task.showWhenComplete()))}}(this))),this.isMainTask&&(this.task.displayPreferences.isDisplayingDescription(!0),(this.task.numActiveSubTasks()>0||this.task.numCompletedSubTasks()>0)&&this.task.displayPreferences.isDisplayingSubTasksSection(!0)),this.project=app.projectInfo.get(this.projectId),this.subscriptions.push(this.harvestEnabledOnProject=ko.pureComputed(function(t){return function(){var e;return null!=(e=t.project())&&"function"==typeof e.harvestTimersEnabled?e.harvestTimersEnabled():void 0}}(this))),this.subscriptions.push(this.showAttachments=ko.computed(function(e){return function(){return(null!=t.showAttachments?t.showAttachments:t.showAttachments=!0)&&null!=e.project()&&e.task.canViewMessagesAndFiles&&e.task.canViewMessagesAndFiles()&&"1"===e.project().activePages.files()&&"task"!==e.mode}}(this))),this.subscriptions.push(this.projectIsActive=ko.pureComputed(function(t){return function(){return null==t.project()||t.project().isActive()}}(this))),this.subscriptions.push(app.ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent)),this.subscriptions.push(app.ko.postbox.subscribe("parent-task-updated",function(t){return function(e){e.id===t.task.parentTaskId()&&(t.task.LoadUpdate(),t.task.numActiveSubTasks()>0&&t.task.displayPreferences.isDisplayingSubTasksSection()&&app.ko.postbox.publish("parent-task-updated",{id:t.task.id(),parentTaskId:t.task.parentTaskId()}))}}(this))),this.tippedCountId="task_"+this.task.id()+"_tipped_count_"+(new Date).getTime(),this.subscriptions.push(this.showTippedCount=ko.pureComputed(function(t){return function(){return!t.task.canComplete()||"template"===t.mode&&t.task.numActiveSubTasks()>0||"flat"!==t.mode&&t.task.numActiveSubTasks()>0}}(this))),this.subscriptions.push(this.flatShowSubTaskCount=ko.pureComputed(function(t){return function(){return"flat"!==t.mode&&t.task.numActiveSubTasks()>0}}(this))),this.subscriptions.push(this.taskPadding=ko.pureComputed(function(t){return function(){return"task"===t.mode?"50px":"flat"===t.mode?"75px":"97px"}}(this))),this.subscriptions.push(this.elementsWidth=ko.pureComputed(function(t){return function(){return"task"===t.mode?"50px":"flat"===t.mode?"75px":"100px"}}(this))),this.subscriptions.push(this.subHoldMargin=ko.pureComputed(function(t){return function(){return"task"===t.mode&&t.task.id()===app.currentRoute().itemId?"10px":"task"===t.mode?"0px":""}}(this))),this.subscriptions.push(this.harvestEnabled=ko.pureComputed(function(t){return function(){var e;return(null!=(e=app.account.integrations.harvest)&&"function"==typeof e.enabled?e.enabled():void 0)&&t.harvestEnabledOnProject()}}(this))),this.subscriptions.push(this.task.isEditMode.subscribe(function(t){return function(e){if(!e)return t.focusInputId(null),t.editTabSelCode("whoAndWhen")}}(this))),this.subscriptions.push(this.attachmentIds=ko.pureComputed(function(t){return function(){return t.task.attachments().map(function(t){return t.id()})}}(this))),this.focusInputId=ko.observable(null),this.editTabSelCode=ko.observable("whoAndWhen"),this.nestedSubtaskLevels=ko.observable(0),this.totalEstimatedTime=ko.observable(0),this.totalEstimatedText=ko.observable(""),this.subscriptions.push(this.taskEstimatedText=ko.pureComputed(function(t){return function(){return null!=t.task.estimatedMinutes&&t.task.estimatedMinutes()?app.utility.MinutesIntToString(t.task.estimatedMinutes(),{showDays:!1,format:!0}):""}}(this))),this.subscriptions.push(this.shouldShowEstimatedTime=ko.pureComputed(function(t){return function(){var e,s;return"completed"!==t.task.status()&&(!t.task.isEditMode()&&(!app.loggedInUser.isCollaborator()&&(!(!t.projectIsActive()&&"template"!==t.mode)&&!!(("function"==typeof(e=t.task).canViewEstTime?e.canViewEstTime():void 0)||("function"==typeof(s=t.task).viewEstimatedTime?s.viewEstimatedTime():void 0)))))}}(this))),this.subscriptions.push(this.task.numActiveSubTasks.subscribe(function(t){return function(e){if(null!=e)return 0===e?Tipped.disable("#"+t.tippedCountId):Tipped.enable("#"+t.tippedCountId)}}(this))),this.subscriptions.push(this.sharedTaskData=app.shared.get("viewModel/taskRow/"+this.task.id())),this.sharedTaskData(this)}return t.prototype.OnNotifyTWEvent=function(t){var e,s,n,i,a,r,l,p,d,c,u,k,h;if("task"===t.itemType||"task_comment"===t.itemType){if(null==t.parentTaskId&&(t.parentTaskId=0),t.parentTaskId===this.task.id()){if(null!=(null!=t?t.subType:void 0))switch(t.subType){case"task-completed":this.task.numCompletedSubTasks(this.task.numCompletedSubTasks()+1),this.task.numActiveSubTasks(this.task.numActiveSubTasks()-1);break;case"task-reopened":this.task.numCompletedSubTasks(this.task.numCompletedSubTasks()-1),this.task.numActiveSubTasks(this.task.numActiveSubTasks()+1);break;case"moveOrCopy":"move"===t.moveOrCopyMode&&this.task.numActiveSubTasks(this.task.numActiveSubTasks()-1);break;case"task-deleted":this.task.numActiveSubTasks(this.task.numActiveSubTasks()-1);break;case"quick-add-subtasks":case"attached-files":this.task.LoadUpdate()}t.actionType===app.consts.ACTIONTYPE.ADDED&&((null!=t&&null!=(e=t.extraData)?e.newSubtaskCount:void 0)?this.task.numActiveSubTasks(this.task.numActiveSubTasks()+t.extraData.newSubtaskCount):t.subType||this.task.numActiveSubTasks(this.task.numActiveSubTasks()+1)),t.actionType===app.consts.ACTIONTYPE.DELETED&&("completed"===t.taskStatus?this.task.numCompletedSubTasks(this.task.numCompletedSubTasks()-1):this.task.numActiveSubTasks(this.task.numActiveSubTasks()-1))}t.itemId===this.task.parentTaskId()&&t.actionType===app.consts.ACTIONTYPE.UPDATED&&this.task.numActiveSubTasks()>0&&this.task.displayPreferences.isDisplayingSubTasksSection()&&app.ko.postbox.publish("parent-task-updated",{id:this.task.id(),parentTaskId:this.task.parentTaskId()}),null!=(null!=t?t.subType:void 0)&&"task-drop"===t.subType&&((s=this.task.id())!==t.newParentTaskId&&s!==t.oldParentTaskId||this.task.LoadUpdate(!1)),app.quickView.isOpen()&&t.actionType===app.consts.ACTIONTYPE.UPDATED&&t.itemId===this.task.id()&&null!=(null!=(r=t.extraInfo)&&null!=(l=r.data)?l.oldColumnId:void 0)&&null!=t.extraInfo.data.columnId&&this.task.LoadUpdate(),null!=(null!=t?t.subType:void 0)&&"task-estimate"===t.subType&&t.itemId===this.task.id()&&this.task.LoadUpdate(),null!=(null!=t?t.subType:void 0)&&"desk-ticket-added"===t.subType&&t.itemId===this.task.id()&&this.task.LoadUpdate(),"task"===t.itemType&&t.actionType===app.consts.ACTIONTYPE.UPDATED&&["task-completed","task-reopened"].includes(t.subType)&&(null!=(p=t.extraInfo)&&null!=(d=p.data)&&null!=(c=d.affectedTaskIds)?c.includes(this.task.id()):void 0)&&this.task.LoadUpdate(),null!=(null!=t?t.subType:void 0)&&null!=t.itemId&&null!=(null!=t?t.taskListId:void 0)&&parseInt(t.itemId,10)===this.task.id()&&this.task.id()>0&&("attached-files"===(u=t.subType)||"removed-files"===u)&&this.task.LoadUpdate(),"task"===t.itemType&&"removed-files-template"===t.subType&&null!=(null!=(k=t.extraInfo)?k.fileId:void 0)&&(h=t.extraInfo.fileId,o.call(this.attachmentIds(),h)>=0)&&"template"===this.mode&&t.actionType===app.consts.ACTIONTYPE.DELETED&&this.task.LoadUpdate(),parseInt(t.itemId,10)===this.task.id()&&this.isMainTask?t.subType&&"task-deleted"===t.subType?(app.flash.Info(app.tl("This task has been deleted")),this.isQuickView?app.quickView.close({type:"task",id:t.itemId}):app.GoTo("projects/"+this.task.projectId()+"/tasks")):this.task.displayPreferences.isDisplayingSubTasksSection()||this.task.LoadUpdate():this.isMainTask&&this.loadTaskUpdates(t),t.actionType===app.consts.ACTIONTYPE.UPDATED&&this.task.parentTaskId()>0&&parseInt(t.itemId,10)!==this.task.id()&&parseInt(t.parentTaskId,10)!==this.task.id()&&this.isListedInAffectedTasks(t,this.task.id())&&this.task.LoadUpdate()}else"comments"!==t.itemType||null==(null!=t?t.commentableType():void 0)||"todo_items"!==(n=t.commentableType())&&"task"!==n&&"tasks"!==n?"time"===t.itemType&&("time-moved"===t.subType&&parseInt(t.projectId)===this.task.projectId()||t.actionType===app.consts.ACTIONTYPE.DELETED&&parseInt(null!=(i=t.extraInfo)?i.objectId:void 0)===this.task.id()?this.task.LoadUpdate():"task"===(null!=(a=t.extraInfo)?a.objectType:void 0)&&parseInt(t.extraInfo.objectId)===this.task.id()&&this.task.hasLoggedTime(!0)):t.actionType===app.consts.ACTIONTYPE.DELETED&&t.commentableId()===this.task.id()&&this.task.commentsCount(this.task.commentsCount()-1)},t.prototype.OnClickAddTimeEstimate=function(t){var e;if(!this.task.canEdit())return void app.flash.Warn(app.tl("You do not have permission to edit this task"));e=function(t){return function(e){var s,n;if(!e.wasCancelled)return n=null!=t.taskList?t.taskList.estimatedTotalMinutes():0,s=t.task.estimatedMinutes(),t.task.estimatedMinutes(e.minutes),null!=t.taskList?0===e.minutes?t.taskList.estimatedTotalMinutes(n-s):s<e.minutes?t.taskList.estimatedTotalMinutes(n+(e.minutes-s)):t.taskList.estimatedTotalMinutes(n-(s-e.minutes)):void 0}}(this),app.modal.Show("addOrEditTimeEstimate",{item:this.task,projectId:this.projectId,type:"task",onCloseCallBack:e})},t.prototype.OnHoverEstTime=function(){var t;t=app.prefixApi("tasks/"+this.task.id()+"/estimatedtime.json","API_PREFIX_V2","API_PREFIX_V2"),app.api.get(t).then(function(t){return function(e){var s;return t.nestedSubtaskLevels(parseInt(null!=(s=e.xhr.getResponseHeader("X-Subtask-Levels"))?s:0,10)),t.totalEstimatedTime(parseInt(e.response.total,10)),t.totalEstimatedText(app.utility.MinutesIntToString(e.response.total,{showDays:!1,format:!0}))}}(this))},t.prototype.OnClickTaskName=function(t,e){return!(e.shiftKey||this.isQuickView&&!e.metaKey&&!this.isMainTask)||(this.task.OnQuickView(),!1)},t.prototype.OnEditClick=function(t){return function(e){return function(){return r("Task action","Open form pencil"),t.OnClickEdit()}}()},t.prototype.getResponsibleText=function(t){var e,s,n,i,a;return null==t&&(t="inline"),n="hint"===t?this.task.responsibleSummaryFormatted():this.task.responsiblePartySummary(),"template"!==(i=this.mode)&&"tlTemplate"!==i?n:("function"==typeof(s=this.task).responsiblePartyIds&&null!=(a=s.responsiblePartyIds())?a.length:void 0)||"["!==this.task.name().substr(0,1)?this.task.responsiblePartySummary():(e=this.task.name().match(/\[([^\]]*)\]/),null===e?this.task.responsiblePartySummary():e[1])},t.prototype.getTemplateTaskNameNoRole=function(){var t,e;return e=this.task.nameWithLinks(),this.taskHasTemplateRole()?(t=e.match(/\[([^\]]*)\]/),null===t?e:e.substr(t[0].length,e.length-t[0].length)):e},t.prototype.cantComplete=function(){return!this.task.canComplete()&&this.task.canStart()},t.prototype.cantStart=function(){return!this.task.canStart()||"flat"===this.mode&&this.task.numActiveSubTasks()>0||"template"===this.mode},t.prototype.loadTaskUpdates=function(t){var e,s,n,a;return null==(null!=(e=t.extraInfo)&&null!=(s=e.data)?s.affectedTaskIds:void 0)||""===t.extraInfo.data.affectedTaskIds?i.resolve():(a=app.utility.ConvertToArray(t.extraInfo.data.affectedTaskIds,!0),a=ko.utils.arrayMap(a,function(t){return parseInt(t,10)}),n=this.task.id(),o.call(a,n)>=0?this.task.LoadUpdate():i.resolve())},t.prototype.isListedInAffectedTasks=function(t,e){var s,n,i,a;return null!=(null!=(n=t.extraInfo)&&null!=(i=n.data)?i.affectedTaskIds:void 0)&&(s=app.utility.ConvertToArray(t.extraInfo.data.affectedTaskIds,!0),a=ko.utils.arrayMap(s,function(t){return parseInt(t,10)}),o.call(a,e)>=0)},t.prototype.taskHasTemplateRole=function(){return"template"===this.mode&&"["===this.task.nameWithLinks().substr(0,1)&&0===this.task.responsiblePartyIds().length},t.prototype.dispose=function(){null!=this.subscriptions&&this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:l,template:t}}.apply(e,n))&&(t.exports=i)},4354:function(t,e,s){(function(n){var i,a,o=function(t,e){return function(){return t.apply(e,arguments)}};i=[s(3240),s(1138),s(1118),s(3241),s(1015)],void 0!==(a=function(t,e,s,i,a){var r;return r=function(){function t(t){var e,s;null==t&&(t={}),this.dispose=o(this.dispose,this),this.getTaskList=o(this.getTaskList,this),this.OnDuplicateTaskListTemplate=o(this.OnDuplicateTaskListTemplate,this),this.OnClickDeleteTaskListTemplate=o(this.OnClickDeleteTaskListTemplate,this),this.OnEditTaskListTemplate=o(this.OnEditTaskListTemplate,this),this.OnUpdateSort=o(this.OnUpdateSort,this),this.OnHideIcon=o(this.OnHideIcon,this),this.OnShowIcon=o(this.OnShowIcon,this),this.OnGetTimeReport=o(this.OnGetTimeReport,this),this.OnGetTaskListReport=o(this.OnGetTaskListReport,this),this.OnPostTasksViaEmail=o(this.OnPostTasksViaEmail,this),this.OnQuicklyAddTasks=o(this.OnQuicklyAddTasks,this),this.OnSaveAsTemplate=o(this.OnSaveAsTemplate,this),this.OnAddTasksFromTemplate=o(this.OnAddTasksFromTemplate,this),this.OnClickMoveOrCopy=o(this.OnClickMoveOrCopy,this),this.OnPinUnpinTaskList=o(this.OnPinUnpinTaskList,this),this.OnClickDeleteTaskList=o(this.OnClickDeleteTaskList,this),this.OnCompleteTaskList=o(this.OnCompleteTaskList,this),this.OnClickBulkEditTasks=o(this.OnClickBulkEditTasks,this),this.OnEditTaskList=o(this.OnEditTaskList,this),this.OnRenderedTippedContent=o(this.OnRenderedTippedContent,this),this.OnRenderedTemplate=o(this.OnRenderedTemplate,this),this.OnClickToggleAdvancedOptions=o(this.OnClickToggleAdvancedOptions,this),this.subscriptions=[],this.tippedContent=i,console.assert(null!=t.taskList||null!=t.taskListId),this.shouldLoadTaskList=null==t.taskList,this.taskListId=null!=t.taskListId?t.taskListId:ko.unwrap(t.taskList).id(),this.loadedTaskList=ko.observable(null),this.subscriptions.push(this.taskList=ko.pureComputed(function(e){return function(){return e.shouldLoadTaskList?e.loadedTaskList():t.taskList}}(this))),this.uniqueId="taskListDropdown_"+this.taskListId+"_"+(new Date).getTime(),this.tippedEl=null!=t.tippedEl?t.tippedEl:t.tippedEl=null,this.selector=null!=t.selector?t.selector:t.selector="",this.mode=null!=t.mode?t.mode:t.mode="normal",this.isTemplate="template"===(e=this.mode)||"tlTemplate"===e,""!==this.selector&&null===this.tippedEl&&(this.tippedEl=n("#"+this.selector)),this.projectId=null!=t.projectId?t.projectId:t.projectId=null,this.showIcon=null!=t.showIcon?t.showIcon:t.showIcon=!0,this.useButton=null!=(s=t.useButton)&&s,this.tippedExists=ko.observable(!1),this.project=app.projectInfo.get(this.projectId),this.subscriptions.push(this.isProjectTemplate=ko.pureComputed(function(t){return function(){var e;return null!=(e=t.project())?e.isTemplate():void 0}}(this))),this.subscriptions.push(this.currentFilter=a.getFilter("projectTasks",this.projectId)),this.subscriptions.push(this.hasActiveFilter=ko.pureComputed(function(t){return function(){var e;return null!=(e=t.currentFilter())?e.active():void 0}}(this))),this.subscriptions.push(this.canEditAllTasks=ko.pureComputed(function(t){return function(){var e;return null!=(e=t.project())?e.permissions.canEditAllTasks():void 0}}(this))),this.subscriptions.push(this.canAddTasks=ko.pureComputed(function(t){return function(){var e;return null!=(e=t.project())?e.permissions.canAddTasks():void 0}}(this))),this.subscriptions.push(this.hideButton=ko.pureComputed(function(t){return function(){return t.isProjectTemplate()&&!app.loggedInUser.permissions.canManageProjectTemplates()}}(this))),this.subscriptions.push(this.canAddTaskLists=ko.pureComputed(function(t){return function(){var e;return null!=(e=t.project())?e.permissions.canAddTaskLists():void 0}}(this))),""===this.selector&&(this.selector=this.uniqueId),this.showAdvancedOpts=app.loggedInUser.preferences.tasklistDropdownShowAdvanced,this.subscriptions.push(this.sharedFilteredTasksData=app.shared.get("viewModel/filtered-tasks"))}return t.prototype.OnClickToggleAdvancedOptions=function(){return this.showAdvancedOpts(!this.showAdvancedOpts())},t.prototype.OnRenderedTemplate=function(t){return this.tippedEl=n("#"+this.uniqueId),this.targetEl=n("#target_"+this.uniqueId)},t.prototype.OnRenderedTippedContent=function(){if(Tipped.refresh(),null==this.taskList())return this.getTaskList()},t.prototype.OnEditTaskList=function(){ko.unwrap(this.taskList).OnClickShowEditTaskList(this.projectId),Tipped.hideAll()},t.prototype.OnClickBulkEditTasks=function(){var t,e,s,n;Tipped.hideAll(),(null!=(s=app.currentFilter())?s.active():void 0)&&null!=this.sharedFilteredTasksData()?(t=this.sharedFilteredTasksData().data.endpoint(),n=t.replace("projects/"+ko.unwrap(this.projectId)+"/tasks.json","tasklists/"+ko.unwrap(this.taskList).id()+"/tasks.json"),e={type:"all",projectId:app.currentRoute().projectId,dataURL:n,dataParams:{}}):e={type:"tasklist",parentTaskList:ko.unwrap(this.taskList),isTemplate:this.isTemplate||this.isProjectTemplate(),isProjectTemplate:this.isProjectTemplate(),lightboxDraggable:!1},app.modal.Show("bulkEditTasks",e)},t.prototype.OnCompleteTaskList=function(){Tipped.hideAll(),ko.unwrap(this.taskList).OnComplete()},t.prototype.OnClickDeleteTaskList=function(){var t,e;e=app.tl("Confirm Delete"),t=app.tl("Are you sure you want to delete this task list?"),app.modal.Show("confirm",{title:e,text:t,callback:function(t){return function(e){if(!e.wasCancelled)return Tipped.hideAll(),ko.unwrap(t.taskList).Delete()}}(this)})},t.prototype.OnPinUnpinTaskList=function(){ko.unwrap(this.taskList).OnClickTogglePinned(this.projectId)},t.prototype.OnClickMoveOrCopy=function(){Tipped.hideAll(),app.modal.Show("moveOrCopyItem",{item:ko.unwrap(this.taskList),itemId:ko.unwrap(this.taskList).id(),projectId:ko.unwrap(this.projectId),type:"tasklist"})},t.prototype.OnAddTasksFromTemplate=function(){Tipped.hideAll(),app.modal.Show("addTasksFromTemplate",{taskList:ko.unwrap(this.taskList),projectId:ko.unwrap(this.projectId)})},t.prototype.OnSaveAsTemplate=function(){Tipped.hideAll(),0===ko.unwrap(this.taskList).numIncomplete()?app.flash.Warn(app.tl("This task list has no tasks so a template can't be created")):app.modal.Show("saveTaskListAsTemplate",{taskList:ko.unwrap(this.taskList),projectId:ko.unwrap(this.projectId)})},t.prototype.OnQuicklyAddTasks=function(){Tipped.hideAll(),app.modal.Show("quicklyAddTasksToTaskList",{taskList:ko.unwrap(this.taskList)})},t.prototype.OnPostTasksViaEmail=function(){Tipped.hideAll(),app.modal.Show("postByProjectEmail",{type:"tasklists",projectId:ko.unwrap(this.projectId),taskList:ko.unwrap(this.taskList)})},t.prototype.OnGetTaskListReport=function(){Tipped.hideAll(),app.modal.Show("taskListReport",{taskList:ko.unwrap(this.taskList),projectId:ko.unwrap(this.projectId)})},t.prototype.OnGetTimeReport=function(){Tipped.hideAll(),app.modal.Show("taskListTimeReport",{taskList:ko.unwrap(this.taskList)})},t.prototype.OnShowIcon=function(t,e){n(e.currentTarget).find("i").addClass("fa-circle-o")},t.prototype.OnHideIcon=function(t,e){n(e.currentTarget).find("i").removeClass("fa-circle-o")},t.prototype.OnUpdateSort=function(t,e){var s;n(e.currentTarget).find("i").addClass("fa-circle-o"),Tipped.hideAll(),s={sortBy:t},app.api.put("tasklists/"+ko.unwrap(this.taskList).id()+"/sort.json",s).then(function(t){return function(e){return app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"task",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:0,taskListId:ko.unwrap(t.taskList).id(),subType:"sort"})}}(this))},t.prototype.OnEditTaskListTemplate=function(){return app.modal.Show("addOrEditTaskListTemplate",{taskListTemplate:ko.unwrap(this.taskList)}),Tipped.hideAll()},t.prototype.OnClickDeleteTaskListTemplate=function(){return ko.unwrap(this.taskList).DeleteTemplate()},t.prototype.OnDuplicateTaskListTemplate=function(){return app.api.form("./?action=invoke.taskListTemplates.ajaxDuplicateTemplate()&id="+ko.unwrap(this.taskList).id(),{},"get").then(function(t){return function(t){return app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"taskListTemplate",actionType:app.consts.ACTIONTYPE.ADDED,itemId:0})}}()),Tipped.hideAll()},t.prototype.getTaskList=function(){return app.api.get(app.prefixApi("tasklists/"+this.taskListId+".json","API_PREFIX_V1","API_PREFIX_V1")).then(function(t){return function(s){return t.loadedTaskList(new e(s.response.todoList))}}(this))},t.prototype.dispose=function(){return this.tippedExists()&&Tipped.remove(this.targetEl),this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:r,template:t}}.apply(e,i))&&(t.exports=a)}).call(e,s(245))},4389:function(t,e,s){var n,i,a=function(t,e){return function(){return t.apply(e,arguments)}};n=[s(3281),s(1125),s(14)],void 0!==(i=function(t,e,s){var n;return n=function(){function t(t){null==t&&(t={}),this.dispose=a(this.dispose,this),this.subscriptions=[],this.params=t,this.id=null!=t.id?t.id:t.id=0,this.parentTaskId=null!=t.parentTaskId?t.parentTaskId:t.parentTaskId=0,this.taskListId=null!=t.taskListId?t.taskListId:t.taskListId=0,this.task=null!=t.task?t.task:t.task=null,this.subscriptions.push(this.sharedTaskData=app.shared.get("viewModel/taskRow/"+ko.unwrap(this.id))),this.subscriptions.push(this.task=ko.pureComputed(function(s){return function(){var n;return null!=t.task?new e(t.task,null,null,!1):null==(null!=(n=s.sharedTaskData())?n.task:void 0)?null:s.sharedTaskData().task}}(this))),this.uniqueId=ko.unwrap(this.id)+"_task_utility_comments_"+Date.now()}return t.prototype.dispose=function(){ko.postbox.publish("task-utility-comments-task-"+ko.unwrap(this.id)+"-closed"),this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:n,template:t}}.apply(e,n))&&(t.exports=i)},4390:function(t,e,s){var n,i,a=function(t,e){return function(){return t.apply(e,arguments)}};n=[s(3282),s(1125),s(14)],void 0!==(i=function(t,e,s){var n;return n=function(){function t(t){var s,n,i;null==t&&(t={}),this.dispose=a(this.dispose,this),this.subscriptions=[],this.params=t,this.id=null!=(s=t.id)?s:0,this.taskId=null!=(n=t.taskId)?n:this.id,this.tippedParentId=null!=(i=t.tippedParentId)?i:null,this.subscriptions.push(this.sharedTaskData=app.shared.get("viewModel/taskRow/"+ko.unwrap(this.taskId))),this.subscriptions.push(this.task=ko.pureComputed(function(s){return function(){var n;return null!=t.task?new e(t.task,null,null,!1):null==(null!=(n=s.sharedTaskData())?n.task:void 0)?null:s.sharedTaskData().task}}(this))),this.uniqueId=ko.unwrap(this.id)+"_task_utility_date_"+Date.now()}return t.prototype.dispose=function(){ko.postbox.publish("task-utility-date-task-"+ko.unwrap(this.taskId)+"-closed"),this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:n,template:t}}.apply(e,n))&&(t.exports=i)},4391:function(t,e,s){var n,i,a=function(t,e){return function(){return t.apply(e,arguments)}},o=[].indexOf||function(t){for(var e=0,s=this.length;e<s;e++)if(e in this&&this[e]===t)return e;return-1};n=[s(3284),s(3283),s(1125),s(14)],void 0!==(i=function(t,e,s,n){var i;return i=function(){function t(t){var n,i;null==t&&(t={}),this.dispose=a(this.dispose,this),this.isNewCompany=a(this.isNewCompany,this),this.getFollowers=a(this.getFollowers,this),this.OnUpdateFollowers=a(this.OnUpdateFollowers,this),this.OnClickAddFollowers=a(this.OnClickAddFollowers,this),this.followersMenuTippedContent=e,this.subscriptions=[],this.params=t,this.id=null!=(n=t.id)?n:0,this.selector=null!=(i=t.selector)?i:"",this.taskFollowers=ko.observableArray([]),this.subscriptions.push(this.sharedTaskData=app.shared.get("viewModel/taskRow/"+ko.unwrap(this.id))),this.subscriptions.push(this.task=ko.pureComputed(function(e){return function(){var n;return null!=t.task?new s(t.task,null,null,!1):null==(null!=(n=e.sharedTaskData())?n.task:void 0)?null:e.sharedTaskData().task}}(this))),null!=this.task()?this.getFollowers():this.subscriptions.push(this.task.subscribe(function(t){return function(e){if(null!=e)return t.getFollowers()}}(this))),this.uniqueId=ko.unwrap(this.id)+"_task_utility_followers_"+Date.now()}return t.prototype.OnClickAddFollowers=function(){var t;if(this.task().canEdit())return Tipped.hideAll(),t=function(t){return function(e){var s,n;if(!e.wasCancelled)return t.task().userFollowingChanges((s=app.loggedInUser.id().toString(),o.call(e.changeFollowerIds,s)>=0)),t.task().userFollowingComments((n=app.loggedInUser.id().toString(),o.call(e.commentFollowerIds,n)>=0)),t.getFollowers()}}(this),app.modal.Show("taskFollowers",{task:this.task,onCloseCallBack:t})},t.prototype.OnUpdateFollowers=function(t){this.task().OnUpdateFollowing(t).then(function(e){return function(s){var n,i;if(-1!==(n=app.utility.FindIndexByKeyValue(e.taskFollowers(),"id",app.loggedInUser.id().toString()))&&t)switch(i=e.taskFollowers()[n],t){case"all":return i.followingComments(!0),i.followingChanges(!0);case"comments":return i.followingComments(!0),i.followingChanges(!1);case"changes":return i.followingComments(!1),i.followingChanges(!0);default:return i.followingComments(!1),i.followingChanges(!1)}else e.getFollowers()}}(this))},t.prototype.getFollowers=function(){return app.api.get("v/2/tasks/"+this.task().id()+"/followers.json?returnUserInfo=true").then(function(t){return function(e){var s,n,i,a;if(e.response.hasOwnProperty("followers")){for(n=ko.unwrap(ko.mapping.fromJS(e.response.followers)),i=0,a=n.length;i<a;i++)s=n[i],"team"===s.type()&&(s.teamLogoInfo={name:s.name(),logoUrl:s.logo(),logoColor:s.logoColor(),logoIcon:s.logoIcon(),defaultImageUrl:"./tko/public/assets/svg/team-regular.svg",logoIconSVG:ko.observable("")},s.logoIcon().length&&app.utility.SetTeamIcon(s.teamLogoInfo));return t.taskFollowers(n)}return t.taskFollowers([])}}(this)).finally(function(t){return function(){if(null!==ko.unwrap(t.tippedEl))return Tipped.refresh(ko.unwrap(t.tippedEl))}}(this))},t.prototype.isNewCompany=function(t){return 0===t||(this.taskFollowers()[t].type()!==this.taskFollowers()[t-1].type()||this.taskFollowers()[t].companyId()!==this.taskFollowers()[t-1].companyId())},t.prototype.dispose=function(){ko.postbox.publish("task-utility-"+this.utility+"-task-followers-closed"),this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:i,template:t}}.apply(e,n))&&(t.exports=i)},4392:function(t,e,s){var n,i,a=function(t,e){return function(){return t.apply(e,arguments)}};n=[s(3285),s(1125),s(14)],void 0!==(i=function(t,e,s){var n;return n=function(){function t(t){var s;null==t&&(t={}),this.dispose=a(this.dispose,this),this.OnRendered=a(this.OnRendered,this),this.subscriptions=[],this.params=t,this.id=null!=(s=t.id)?s:0,this.subscriptions.push(this.sharedTaskData=app.shared.get("viewModel/taskRow/"+ko.unwrap(this.id))),this.subscriptions.push(this.task=ko.pureComputed(function(s){return function(){var n;return null!=t.task?new e(t.task,null,null,!1):null==(null!=(n=s.sharedTaskData())?n.task:void 0)?null:s.sharedTaskData().task}}(this))),this.uniqueId=ko.unwrap(this.id)+"_task_utility_priority_"+(new Date).getTime()}return t.prototype.OnRendered=function(){return null!==ko.unwrap(this.tippedEl)&&Tipped.refresh(ko.unwrap(this.tippedEl)),!1},t.prototype.dispose=function(){ko.postbox.publish("task-utility-priority-task-"+ko.unwrap(this.id)+"-closed"),this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:n,template:t}}.apply(e,n))&&(t.exports=i)},4393:function(t,e,s){var n,i,a=function(t,e){return function(){return t.apply(e,arguments)}};n=[s(3286),s(1125),s(14),s(1223)],void 0!==(i=function(t,e,s){var n;return n=function(){function t(t){var s;null==t&&(t={}),this.dispose=a(this.dispose,this),this.OnSliderChanged=a(this.OnSliderChanged,this),this.OnSlide=a(this.OnSlide,this),this.OnRendered=a(this.OnRendered,this),this.subscriptions=[],this.params=t,this.id=null!=(s=t.id)?s:0,this.sliderVal=ko.observable(0),this.subscriptions.push(this.sharedTaskData=app.shared.get("viewModel/taskRow/"+ko.unwrap(this.id))),this.subscriptions.push(this.task=ko.pureComputed(function(s){return function(){var n;return null!=t.task?new e(t.task,null,null,!1):null==(null!=(n=s.sharedTaskData())?n.task:void 0)?null:s.sharedTaskData().task}}(this))),this.subscriptions.push(this.progressMax=ko.pureComputed(function(t){return function(){return t.task().numActiveSubTasks()>0||t.task().numPredecessors()>0?90:100}}(this))),null!=this.task()?this.sliderVal(this.task().progress()):this.subscriptions.push(this.task.subscribe(function(t){return function(e){if(null!=e)return t.sliderVal(e.progress())}}(this))),this.uniqueId=ko.unwrap(this.id)+"_task_utility_progress_"+(new Date).getTime()}return t.prototype.OnRendered=function(){return null!==ko.unwrap(this.tippedEl)&&Tipped.refresh(ko.unwrap(this.tippedEl)),!1},t.prototype.OnSlide=function(t){return this.task().progress(~~t)},t.prototype.OnSliderChanged=function(t){var e;return e=~~t,this.task().progress(e),100===e?this.task().OnClickComplete():this.task().OnUpdateProgress()},t.prototype.dispose=function(){ko.postbox.publish("task-utility-progress-task-"+ko.unwrap(this.id)+"-closed"),this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:n,template:t}}.apply(e,n))&&(t.exports=i)},4394:function(t,e,s){(function(n){var i,a,o=function(t,e){return function(){return t.apply(e,arguments)}};i=[s(3287),s(1125),s(14)],void 0!==(a=function(t,e,s){var i;return i=function(){function t(t){var s,i,a,r,l,p,d,c;null==t&&(t={}),this.dispose=o(this.dispose,this),this.getRecurring=o(this.getRecurring,this),this.OnCreateRecurringTask=o(this.OnCreateRecurringTask,this),this.subscriptions=[],this.params=t,this.id=null!=(s=t.id)?s:0,this.parentTaskId=null!=(i=t.parentTaskId)?i:0,this.taskListId=null!=(a=t.taskListId)?a:0,this.task=null!=(r=t.task)?r:null,this.utility=null!=(l=t.utility)?l:"",this.tippedEl=null!=(p=t.tippedEl)?p:null,this.selector=null!=(d=t.selector)?d:"",this.mode=null!=(c=t.mode)?c:"normal",""!==this.selector&&null===this.tippedEl&&(this.tippedEl=n("#"+this.selector)),this.recurringTasks=ko.observableArray([]).extend({rateLimit:100}),this.loadingRecurringTasks=ko.observable(!1),this.repeatMapping={norepeat:app.tl("Task will not repeat"),daily:app.tl("Task will repeat daily"),weekdays:app.tl("Task will repeat every weekday")+" ("+app.tl("Mon")+"-"+app.tl("Fri")+")",selecteddays:""+app.tl("Task will repeat on selected days")+app.localizationPreferences().ellipsis,weekly:app.tl("Task will repeat weekly"),every2weeks:app.tl("Task will repeat every [_s] weeks",2),every3weeks:app.tl("Task will repeat every [_s] weeks",3),every4weeks:app.tl("Task will repeat every [_s] weeks",4),every5weeks:app.tl("Task will repeat every [_s] weeks",5),every6weeks:app.tl("Task will repeat every [_s] weeks",6),monthly:app.tl("Task will repeat monthly"),every2months:app.tl("Task will repeat every [_s] months",2),every3months:app.tl("Task will repeat every [_s] months",3),every4months:app.tl("Task will repeat every [_s] months",4),every6months:app.tl("Task will repeat every [_s] months",6),yearly:app.tl("Task will repeat yearly")},this.subscriptions.push(this.sharedTaskData=app.shared.get("viewModel/taskRow/"+ko.unwrap(this.id))),this.subscriptions.push(this.task=ko.pureComputed(function(s){return function(){var n;return null!=t.task?new e(t.task,null,null,!1):null==(null!=(n=s.sharedTaskData())?n.task:void 0)?null:s.sharedTaskData().task}}(this))),null!=this.task()?this.getRecurring():this.subscriptions.push(this.task.subscribe(function(t){return function(e){if(null!=e)return t.getRecurring()}}(this))),this.templateRepeatTxt=ko.pureComputed(function(t){return function(){var e,s,n;return e=app.tl("Repeating task"),null!=t.task()&&null!=(s=t.task().recurring)&&"function"==typeof s.frequency&&s.frequency()&&null!=(n=t.repeatMapping[t.task().recurring.frequency()])?n:e}}(this)),this.uniqueId=ko.unwrap(this.id)+"_task_utility_"+this.utility+"_"+(new Date).getTime()}return t.prototype.OnCreateRecurringTask=function(t,e){var s;if(!t.isCreating)return t.isCreating=!0,s="./?action=invoke.tasks.ajaxOnCreateRecurTask()&taskId="+this.task().id()+"&duedate="+t.date.format("YYYYMMDD"),app.api.get(s).then(function(s){return function(n){return ko.postbox.publish("allTWEvents",{itemId:0,itemType:"task",actionType:app.consts.ACTIONTYPE.UPDATED,eventTime:new Date,taskListId:s.taskListId}),Tipped.hide(e.target.parentElement),t.taskId=n.response.taskId,t.exists(!0)}}(this)).finally(function(e){return function(){return delete t.isCreating}}())},t.prototype.getRecurring=function(){if("template"!==this.mode)return this.loadingRecurringTasks(!0),app.api.get("tasks/"+this.task().id()+"/recurring.json?onlyFutureDates=true").then(function(t){return function(e){var n,i,a,o,r,l,p;for(p=[],l=e.response.recurringDates,o=0,r=l.length;o<r;o++)a=l[o],i=s.utc(a),n=null!=e.response.datesSet[i.format("YYYYMMDD")],p.push({date:i,exists:ko.observable(n),taskId:n?e.response.datesSet[i.format("YYYYMMDD")]:0});return t.recurringTasks(p)}}(this)).finally(function(t){return function(){return t.loadingRecurringTasks(!1)}}(this))},t.prototype.dispose=function(){ko.postbox.publish("task-utility-recurring-task-"+ko.unwrap(this.id)+"-closed"),this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:i,template:t}}.apply(e,i))&&(t.exports=a)}).call(e,s(245))},4395:function(t,e,s){var n,i,a=function(t,e){return function(){return t.apply(e,arguments)}};n=[s(3288),s(1125),s(14)],void 0!==(i=function(t,e,s){var n;return n=function(){function t(t){var s;null==t&&(t={}),this.dispose=a(this.dispose,this),this.getLoggedTime=a(this.getLoggedTime,this),this.OnLogTaskTime=a(this.OnLogTaskTime,this),this.OnStartTaskTimer=a(this.OnStartTaskTimer,this),this.OnNotifyTWEvents=a(this.OnNotifyTWEvents,this),this.subscriptions=[],this.params=t,this.id=null!=(s=t.id)?s:0,this.loggedMinutes=ko.observable(0).extend({rateLimit:100}),this.billableMinutes=ko.observable(0),this.subtasksLoggedMinutes=ko.observable(0),this.subtasksBillableTimeLoggedMinutes=ko.observable(0),this.subscriptions.push(this.total_subtasksLoggedMinutes=ko.pureComputed(function(t){return function(){return t.subtasksLoggedMinutes()+t.subtasksBillableTimeLoggedMinutes()}}(this))),this.subscriptions.push(this.total_billableMinutes=ko.pureComputed(function(t){return function(){return t.billableMinutes()+t.subtasksBillableTimeLoggedMinutes()}}(this))),this.subscriptions.push(this.total_minutes=ko.pureComputed(function(t){return function(){return t.loggedMinutes()+t.subtasksLoggedMinutes()}}(this))),this.loadingTime=ko.observable(!1),this.subscriptions.push(this.sharedTaskData=app.shared.get("viewModel/taskRow/"+ko.unwrap(this.id))),this.subscriptions.push(this.task=ko.pureComputed(function(s){return function(){var n;return null!=t.task?new e(t.task,null,null,!1):null==(null!=(n=s.sharedTaskData())?n.task:void 0)?null:s.sharedTaskData().task}}(this))),null!=this.task()?this.getLoggedTime():this.subscriptions.push(this.task.subscribe(function(t){return function(e){if(null!=e)return t.getLoggedTime()}}(this))),this.subscriptions.push(this.activeTaskTimer=ko.pureComputed(function(t){return function(){var e;return null==t.task()?null:(e=app.timers().filter(function(e){return parseInt(e.taskId(),10)===parseInt(t.task().id(),10)}),e.length>0?e[0]:null)}}(this))),this.uniqueId=ko.unwrap(this.id)+"_task_utility_time_"+(new Date).getTime()}return t.prototype.OnNotifyTWEvents=function(t){var e,s,n;"time"===t.itemType&&("time-moved"===t.subType&&parseInt(t.projectId,10)===this.task().projectId()||"task"===(null!=(e=t.extraInfo)?e.objectType:void 0)&&this.task().id()===parseInt(t.extraInfo.objectId,10)||"task"===(null!=(s=t.extraInfo)&&null!=(n=s.data)?n.newObjectType:void 0)&&this.task().id()===parseInt(t.extraInfo.data.newObjectId,10))&&this.getLoggedTime()},t.prototype.OnStartTaskTimer=function(){Tipped.hideAll(),this.task().ToggleTimer()},t.prototype.OnLogTaskTime=function(){var t;t=function(t){return function(e){if(!e.wasCancelled)return t.task().hasLoggedTime(!0),t.getLoggedTime()}}(this),Tipped.hideAll(),app.modal.Show("addOrEditTimeEntry",{task:this.task(),projectId:this.task().projectId(),onCloseCallBack:t})},t.prototype.getLoggedTime=function(){return this.loadingTime(!0),app.api.get("tasks/"+this.task().id()+"/time_entries/total.json?getTimeLoggedOnSubTasks=1").then(function(t){return function(e){return t.loggedMinutes(parseInt(e.response.projects[0].tasklist.task.timeTotals.totalMinsSum,10)),t.billableMinutes(parseInt(e.response.projects[0].tasklist.task.timeTotals.billableMinsSum,10)),t.subtasksLoggedMinutes(parseInt(e.response.projects[0].tasklist.task.subTasks.totalTimeLogged),10),t.subtasksBillableTimeLoggedMinutes(parseInt(e.response.projects[0].tasklist.task.subTasks.billableTimeLogged,10))}}(this)).finally(function(t){return function(){if(t.loadingTime(!1),null!==ko.unwrap(t.tippedEl))return setTimeout(function(){return Tipped.refresh(ko.unwrap(t.tippedEl))},100)}}(this))},t.prototype.dispose=function(){ko.postbox.publish("task-utility-time-task-"+ko.unwrap(this.id)+"-closed"),this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:n,template:t}}.apply(e,n))&&(t.exports=i)}});
//# sourceMappingURL=tasksShared.97aff3f97e6f0c893882.js.map