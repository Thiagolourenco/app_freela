webpackJsonp([4],{1045:function(t,e,n){t.exports={"list-state-blank":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,3595)),"list-state-error":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,3596)),"list-state-loading-new":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,3597)),"list-state-loading":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,3598)),"list-state-onboarding":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,3599)),"modal-addOrEditTimer":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,3637)),"modal-contactForm":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,3671)),"modal-trialUpgrade":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,3812)),"nav-main":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,3825)),titlebar:Promise.all([n.e(0),n.e(4)]).then(n.bind(null,4149)),"ui-checkbox-icon":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,4152)),"ui-common-icon":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,1917)),"ui-common-icon":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,1917)),"ui-menuActions":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,4166)),"ui-milestone-icon":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,4172)),"ui-project-dropdown-button":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,4175)),"ui-tag":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,4179)),"widget-add-or-edit-comment":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,4183)),"widget-add-or-edit-message":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,4184)),"widget-available-people-picker":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,4189)),"widget-avatar-row":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,4190)),"widget-comment-icon":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,4201)),"widget-copy-text":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,1703)),"widget-header-notifications":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,4232)),"widget-include-deleted-users-checkbox":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,4233)),"widget-inline-help":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,4234)),"widget-itemFilter":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,4241)),"widget-custom-field-filter":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,4209)),"widget-custom-field-filter-item":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,4208)),"widget-people-picker-new":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,1704)),"widget-people-picker-tipped-followers":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,4286)),"widget-people-picker":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,4287)),"widget-projects-dropdown-new":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,4302)),"widget-projects-dropdown":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,4303)),"widget-quick-view":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,4307)),"widget-quickView-header":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,4309)),"widget-timer":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,4365)),"widget-timers-list":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,4366)),"widget-upgrade-path":Promise.all([n.e(0),n.e(4)]).then(n.bind(null,4402))}},1366:function(t,e,n){var i,s,o=function(t,e){return function(){return t.apply(e,arguments)}};i=[n(1719)],void 0!==(s=function(t){var e;return e=function(){function t(e,n){this.getEnabledUsers=o(this.getEnabledUsers,this),this.toggleUsers=o(this.toggleUsers,this);var i,s,a;null==e.logoUrl&&(e.logoUrl=""),null==e.isInNotifyDefaults&&(e.isInNotifyDefaults=!1),null==e.isFollowingChanges&&(e.isFollowingChanges=!1),null==e.isFollowingComments&&(e.isFollowingComments=!1),null==e.isInPrivacy&&(e.isInPrivacy=!1),e.isInNotifyDefaults&&(e.isFollowingComments=!0),i=null!=n&&null!=(s=n.privateCompanyIds)?s.indexOf(this.id):void 0,this.isInPrivacy=ko.observable(null!=(a=e.isInPrivacy)?a:i>-1),this.isResponsible=ko.observable(!1),this.isFollowingChanges=ko.observable(null!=e.isFollowingChanges&&e.isFollowingChanges),this.isFollowingComments=ko.observable(null!=e.isFollowingComments&&e.isFollowingComments),null==e.defaultImageUrl&&(e.defaultImageUrl="./tko/public/assets/svg/company-regular.svg"),null==e.canFollowChanges&&(e.canFollowChanges=!0),null==e.canFollowComments&&(e.canFollowComments=!0),null==e.shouldShowFollowerOptions&&(e.shouldShowFollowerOptions=e.isFollowingChanges||e.isFollowingComments),null==e.followersCollapsed&&(e.followersCollapsed=e.isFollowingChanges||e.isFollowingComments),null==e.changeFollowersCollapsed&&(e.changeFollowersCollapsed=e.isFollowingChanges),null==e.commentFollowersCollapsed&&(e.commentFollowersCollapsed=e.isFollowingComments),null==e.privacyCollapsed&&(e.privacyCollapsed=e.isInPrivacy),null==e.assigneesCollapsed&&(e.assigneesCollapsed=e.isResponsible),null==e.hasAccess&&(e.hasAccess=!1),null==e.membersCollapsed&&(e.membersCollapsed=!1),null==e.shouldPreselectMembers&&(e.shouldPreselectMembers=!1),null==e.membersLoaded&&(e.membersLoaded=!1),null==e.isLoadingMembers&&(e.isLoadingMembers=!1),null==e.isReminded&&(e.isReminded=!1),e.mentionImg='<img class="h-mention__img" src="'+e.logoUrl+'" onerror="this.src=\''+e.defaultImageUrl+"'\">",this.privateUsersCount=ko.pureComputed(function(t){return function(){var e,n,i,s,o;for(e=0,o="function"==typeof t.people?t.people():void 0,n=0,i=o.length;n<i;n++)s=o[n],("function"==typeof s.isInPrivacy?s.isInPrivacy():void 0)&&e++;return e}}(this)),this.followerStatus=ko.computed({read:function(t){return function(){return t.isFollowingChanges()&&t.isFollowingComments()?"all":t.isFollowingChanges()?"changes":t.isFollowingComments()?"comments":"none"}}(this),write:function(t){return function(e){switch(e){case"changes":t.isFollowingChanges(!0),t.isFollowingComments(!1);break;case"comments":t.isFollowingChanges(!1),t.isFollowingComments(!0);break;case"all":t.isFollowingChanges(!0),t.isFollowingComments(!0);break;default:t.isFollowingChanges(!1),t.isFollowingComments(!1)}}}(this),owner:this}),this.isInPrivacy.subscribe(function(t){return function(e){var n,i,s,o;for(o=t.people(),n=0,i=o.length;n<i;n++)s=o[n],s.isInCompanyPrivacy(e);return e&&!t.privacyCollapsed()?t.privacyCollapsed(!0):t.privacyCollapsed()&&!e?t.privacyCollapsed(!1):void 0}}(this)),this.isResponsible.subscribe(function(t){return function(e){var n,i,s,o;for(o=t.people(),n=0,i=o.length;n<i;n++)s=o[n],s.isInCompanyAssignees(e);return e&&!t.assigneesCollapsed()?t.assigneesCollapsed(!0):t.assigneesCollapsed()&&!e?t.assigneesCollapsed(!1):void 0}}(this)),this.isFollowingChanges.subscribe(function(t){return function(e){var n,i,s,o;for(o=t.people(),n=0,i=o.length;n<i;n++)s=o[n],s.isInCompanyChangeFollowers(e),e&&s.shouldShowFollowerOptions(!0);return e&&!t.changeFollowersCollapsed()?t.changeFollowersCollapsed(!0):t.changeFollowersCollapsed()&&!e&&t.changeFollowersCollapsed(!1),t.followersCollapsed(t.isFollowingChanges()||t.isFollowingComments())}}(this)),this.isFollowingComments.subscribe(function(t){return function(e){var n,i,s,o;for(o=t.people(),n=0,i=o.length;n<i;n++)s=o[n],s.isInCompanyCommentFollowers(e),e&&s.shouldShowFollowerOptions(!0);return e&&!t.commentFollowersCollapsed()?t.commentFollowersCollapsed(!0):t.commentFollowersCollapsed()&&!e&&t.commentFollowersCollapsed(!1),t.followersCollapsed(t.isFollowingChanges()||t.isFollowingComments())}}(this)),this.hasUsersInPrivacy=ko.pureComputed(function(t){return function(){return t.isInPrivacy()||t.privateUsersCount()>0}}(this)),this.allUsersAreObservers=ko.pureComputed(function(t){return function(){var e;return e=ko.utils.arrayFilter(t.people(),function(t){return app.loggedInUser.inOwnerCompany()?t.isObserving():0===t.roleIds().length&&t.isObserving()}),e.length===t.people().length}}(this)),app.ko.mapping.fromJS(e,t.mapping,this),null==this.pickerItemType&&(this.pickerItemType="company")}return t.prototype.toggleUsers=function(t,e){var n,i,s,o,a;for(null==t&&(t="isInPrivacy"),o=this.people(),a=[],n=0,i=o.length;n<i;n++)s=o[n],s[t](e),"isInPrivacy"===t?a.push(s.isInCompanyPrivacy(e)):a.push(void 0);return a},t.prototype.getEnabledUsers=function(t){var e;return null==t&&(t="isInPrivacy"),e=ko.utils.arrayFilter(this.people(),function(e){return e[t]()}),ko.utils.arrayMap(e,function(t){return ko.unwrap(t.id)})},t}(),e.mapping={people:{key:function(t){return app.ko.unwrap(t.id)},create:function(e){return new t(e.data,e.parent)}},id:{create:function(t){return parseInt(t.data,10)}}},e}.apply(e,i))&&(t.exports=s)},1674:function(t,e){t.exports='<div class="w-copy-text">\n\t<input class="w-copy-text__input-field " data-bind="value: value, attr: {id: id, readonly: !canEdit}" type="text" />\n\t<div class="w-copy-text__buttons-holder">\n\t\t<button type="button" class="{{copyButtonClass}}" data-bind="clipboard: {target: \'#\' + id}, click: OnClickCopy" data-tipped="{{tipped}}">\n\t\t\t<i class="fa fa-copy" data-bind="style: {\'margin-right\': ko.unwrap(label) != \'\' ? \'5px\' : \'\' }"></i>\n\t\t\t{{label}}\n\t\t</button>\n\t\t\x3c!-- ko foreach: {data: filteredButtons} --\x3e\n\t\t\t\x3c!-- ko if: $data.tipped != undefined --\x3e\n\t\t\t\t<button data-bind="html: label, click: action, css: $index() == $parent.extraButtons().length - 1 ? $data.class : \'w-copy-text__button--middle \' + $data.class" type="button" data-tipped="{{tipped}}" class="btn w-copy-text__button tipped-hide"></button>\n\t\t\t\x3c!--/ko--\x3e\n\t\t\t\x3c!-- ko if: $data.tipped == undefined --\x3e\n\t\t\t\t<button data-bind="html: label, click: action, css: $index() == $parent.extraButtons().length - 1 ? $data.class : \'w-copy-text__button--middle \' + $data.class" type="button" class="btn w-copy-text__button"></button>\n\t\t\t\x3c!--/ko--\x3e\n\t\t\x3c!-- /ko --\x3e\n\t</div>\n</div>'},1675:function(t,e){t.exports="<div class=\"flex flex-column\">\n\t<label class=\"subtle\">\n\t\t{{app.tl('Follow')}}\n\t</label>\n\n\t\x3c!-- ko if: pickerItemType == 'user' --\x3e\n\t\t<div class=\"py--small pr--large\">\n\t\t\t\x3c!-- ko component: {\n\t\t\t\t\tname: 'widget-toggleSwitch',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tvalue: canFollowChanges() ? isFollowingChanges : ko.observable(true),\n\t\t\t\t\t\tlabel: app.tl('Changes'),\n\t\t\t\t\t\tenabled: canFollowChanges,\n\t\t\t\t\t\ttip: canFollowChanges() ? '' : ( isInTeamChangeFollowers() ? app.tl('This user follows changes as part of a team') : app.tl('This user follows changes as part of a company') )\n\t\t\t\t\t}\n\t\t\t\t} --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</div>\n\n\t\t<div class=\"py--small pr--large\">\n\t\t\t\x3c!-- ko component: {\n\t\t\t\t\tname: 'widget-toggleSwitch',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tvalue: canFollowComments() ? isFollowingComments : ko.observable(true),\n\t\t\t\t\t\tlabel: app.tl('Comments'),\n\t\t\t\t\t\tenabled: canFollowComments,\n\t\t\t\t\t\ttip: canFollowComments() ? '' : ( isInTeamCommentFollowers() ? app.tl('This user follows comments as part of a team') : app.tl('This user follows comments as part of a company') )\n\t\t\t\t\t}\n\t\t\t\t} --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</div>\n\t\x3c!-- /ko --\x3e\n\n\t\x3c!-- ko if: pickerItemType != 'user' --\x3e\n\t\t<div class=\"py--small pr--large\">\n\t\t\t\x3c!-- ko component: {\n\t\t\t\t\tname: 'widget-toggleSwitch',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tvalue: isFollowingChanges,\n\t\t\t\t\t\tlabel: app.tl('Changes'),\n\t\t\t\t\t\tonChangeCallBack: $component.OnChangeGroupFollowStatus.bind(null, $data)\n\t\t\t\t\t}\n\t\t\t\t} --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</div>\n\n\t\t<div class=\"py--small pr--large\">\n\t\t\t\x3c!-- ko component: {\n\t\t\t\t\tname: 'widget-toggleSwitch',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tvalue: isFollowingComments,\n\t\t\t\t\t\tlabel: app.tl('Comments'),\n\t\t\t\t\t\tonChangeCallBack: $component.OnChangeGroupFollowStatus.bind(null, $data)\n\t\t\t\t\t}\n\t\t\t\t} --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</div>\n\t\x3c!-- /ko --\x3e\n</div>"},1676:function(t,e){t.exports='<div class="w-people-picker-new__list w-people-picker-new__list--overflow">\n\t\x3c!-- ko foreach: $component.selectedItems --\x3e\n\t\t\x3c!-- ko if: $index() >= ($component.numberOfAvatarsVisible() - 1) --\x3e\n\t\t\t<div class="w-people-picker-new__item">\n\t\t\t\t<div class="w-people-picker-new__item-avatar">\n\t\t\t\t\t\x3c!-- ko if: type == \'team\' --\x3e\n\t\t\t\t\t\t{{{ linkedItem.GetLogo([\'u-team-logo--tiny\']) }}}\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\x3c!-- ko if: type != \'team\' --\x3e\n\t\t\t\t\t\t<img data-bind="attr: { src: $data.img }"\n\t\t\t\t\t\t\tonerror="this.src=\'{{$data.defaultImg}}\'"\n\t\t\t\t\t\t\tclass="u-avatar--xxsmall">\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</div>\n\n\t\t\t\t<div class="w-people-picker-new__item-name">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{{$data.label}}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\n\t\t\t\t<span class="ml--auto"\n\t\t\t\t\tdata-bind="\n\t\t\t\t\t\tclick: $component.OnClickDeselectItem,\n\t\t\t\t\t\tclickBubble: false">\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tname: \'close-regular\'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\x3c!-- /ko --\x3e\n\t\x3c!-- /ko --\x3e\n</div>'},1677:function(t,e){t.exports='\x3c!-- ko if: visible --\x3e\n\t\x3c!-- ko if: format == \'button\' --\x3e\n\t\t<div class="w-people-picker-new">\n\t\t\t<div class="w-people-picker-new__button"\n\t\t\t\tid="{{uniqueId}}__button"\n\t\t\t\tdata-content="\x3c!-- ko template: { name: \'people-picker-simple\', data: $component } --\x3e\x3c!-- /ko --\x3e"\n\t\t\t\tdata-tipped-options="{{tippedOptions}}"\n\t\t\t\tdata-bind="\n\t\t\t\t\tclick: function(){ OnClickOpenModal() },\n\t\t\t\t\ttippedDelegate: {\n\t\t\t\t\t\tenabled: !useModal(),\n\t\t\t\t\t\tonShow: $component.OnShowTipped,\n\t\t\t\t\t\tafterHide: $component.OnHideTipped\n\t\t\t\t\t}">\n\t\t\t\t\x3c!-- ko if: showButtonIcon --\x3e\n\t\t\t\t\t<span class="w-people-picker-new__button-icon">\n\t\t\t\t\t\t\x3c!-- ko if: selectedItems().length != 1 --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\tname: buttonIcon\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}--\x3e\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\x3c!-- ko if: selectedItems().length == 1 --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko with: selectedItems()[0] --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- ko if: type == \'team\' --\x3e\n\t\t\t\t\t\t\t\t\t{{{ linkedItem.GetLogo([\'u-team-logo--tiny\']) }}}\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\x3c!-- ko if: type != \'team\' --\x3e\n\t\t\t\t\t\t\t\t\t<img data-bind="\n\t\t\t\t\t\t\t\t\t\t\tattr: {\n\t\t\t\t\t\t\t\t\t\t\t\tsrc: $data.img\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tevent: {\n\t\t\t\t\t\t\t\t\t\t\t\terror: app.OnImageThumbLoadFail.bind( $data, type )\n\t\t\t\t\t\t\t\t\t\t\t}">\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</span>\n\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\x3c!-- ko ifnot: isLoading --\x3e\n\t\t\t\t\t<span class="w-people-picker-new__button-label">\n\t\t\t\t\t\t{{selectedLabel}}\n\t\t\t\t\t</span>\n\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\x3c!-- ko if: isLoading --\x3e\n\t\t\t\t\t<span class="w-people-picker-new__button-label">\n\t\t\t\t\t\t{{app.tl(\'Loading\')}}{{{app.localizationPreferences().ellipsis}}}\n\t\t\t\t\t</span>\n\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\x3c!-- ko ifnot: useModal --\x3e\n\t\t\t\t\t<span class="w-people-picker-new__button-arrow">\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tname: \'angle-down-regular\',\n\t\t\t\t\t\t\t\t\tclass: \'h-icon-color--inherit\'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</span>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</div>\n\t\t</div>\n\t\x3c!-- /ko --\x3e\n\n\t\x3c!-- ko if: format == \'inline\' --\x3e\n\t\t\x3c!-- ko template: {\n\t\t\t\tname: \'people-picker-options\',\n\t\t\t\tdata: $component\n\t\t\t} --\x3e\n\t\t\x3c!-- /ko --\x3e\n\t\x3c!-- /ko --\x3e\n\n\t\x3c!-- ko if: format == \'select\' --\x3e\n\t\t<div class="w-people-picker-new__select"\n\t\t\tdata-bind="\n\t\t\t\tcss: {\n\t\t\t\t\t\'pb--none\': selectedItems().length > 0,\n\t\t\t\t\t\'w-people-picker-new--is-placeholder\': showPlaceholder\n\t\t\t\t},\n\t\t\t\tclick: function(){ OnClickOpenModal() }">\n\n\t\t\t\x3c!-- ko if: showPlaceholder --\x3e\n\t\t\t\t<div class="w-people-picker-new__placeholder">\n\t\t\t\t\t<span class="mr--auto">\n\t\t\t\t\t\t{{{ placeholderText }}}\n\t\t\t\t\t</span>\n\n\t\t\t\t\t\x3c!-- ko if: showIncludeMeOption --\x3e\n\t\t\t\t\t\t<label class="w-people-picker-new__placeholder-button"\n\t\t\t\t\t\t\tdata-bind="\n\t\t\t\t\t\t\t\tclickBubble: false,\n\t\t\t\t\t\t\t\tclick: function(){ return true; }">\n\t\t\t\t\t\t\t<input class="mt--none" type="checkbox" data-bind="checked: includeMe">\n\t\t\t\t\t\t\t{{app.tl(\'Include me\')}}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t<label class="w-people-picker-new__placeholder-button"\n\t\t\t\t\t\tdata-bind="click: function(){ OnClickOpenModal() }">\n\t\t\t\t\t\t{{app.tl(\'Edit\')}}\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\x3c!-- ko ifnot: showPlaceholder --\x3e\n\t\t\t\t\x3c!-- ko foreach: selectedItems --\x3e\n\t\t\t\t\t<div class="w-people-picker-new__select-item">\n\t\t\t\t\t\t\x3c!-- ko if: type == \'team\' --\x3e\n\t\t\t\t\t\t\t{{{ linkedItem.GetLogo([\'u-team-logo--tiny\']) }}}\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\x3c!-- ko if: type != \'team\' --\x3e\n\t\t\t\t\t\t\t<img data-bind="\n\t\t\t\t\t\t\t\tattr: {\n\t\t\t\t\t\t\t\t\tsrc: $data.img\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tevent: {\n\t\t\t\t\t\t\t\t\terror: app.OnImageThumbLoadFail.bind( $data, type )\n\t\t\t\t\t\t\t\t}">\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t<span class="w-people-picker-new__select-item-label">\n\t\t\t\t\t\t\t{{$data.label}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class="w-people-picker-new__select-item-remove"\n\t\t\t\t\t\t\tdata-bind="click: $component.OnClickDeselectItem, clickBubble: false">\n\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\tname: \'close-regular\'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t<div class="w-people-picker-new__select-item w-people-picker-new__select-item--placeholder"\n\t\t\t\t\tdata-bind="\n\t\t\t\t\t\tcss: {\n\t\t\t\t\t\t\t\'mb--small\': selectedItems().length > 0\n\t\t\t\t\t\t}">\n\t\t\t\t\t<span class="mx--small">\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tname: \'add-regular\'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<span class="w-people-picker-new__select-item-label">\n\t\t\t\t\t\t\x3c!-- ko if: value().length --\x3e\n\t\t\t\t\t\t\t{{app.tl(\'Add More\')}}\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\x3c!-- ko ifnot: value().length --\x3e\n\t\t\t\t\t\t\t{{app.tl(\'Select People\')}}\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</span>\n\n\t\t\t\t\t\x3c!-- ko ifnot: value().length --\x3e\n\t\t\t\t\t\t<span class="w-people-picker-new__select-item-secondary">\n\t\t\t\t\t\t\t&mdash; {{app.tl(\'Currently nobody will be notified\')}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</div>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</div>\n\t\x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n\n\n<script type="text/html" id="people-picker-team">\n\t<div class="w-people-picker-new__team">\n\t\t<div class="w-people-picker-new__team-header"\n\t\t\tdata-bind="template: {\n\t\t\t\tname: \'people-picker-group-header\',\n\t\t\t\tdata: $data\n\t\t\t}">\n\t\t</div>\n\n\t\t\x3c!-- ko ifnot: $component.checkIfGroupIsCollapsed($data) --\x3e\n\t\t\t\x3c!-- ko if: $data.children --\x3e\n\t\t\t\t<div class="w-people-picker-new__team-subteams">\n\t\t\t\t\t\x3c!-- ko foreach: $data.children --\x3e\n\t\t\t\t\t\t\x3c!-- ko template: {\n\t\t\t\t\t\t\t\tname: \'people-picker-team\',\n\t\t\t\t\t\t\t\tdata: $data\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</div>\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t<div class="w-people-picker-new__team-members"\n\t\t\t\tdata-bind="onRendered: function(){ $component.OnRenderedTeamMembers($data) }">\n\t\t\t\t\x3c!-- ko if: members().length == 0 --\x3e\n\t\t\t\t\t<div class="w-people-picker-new__team-members-placeholder">\n\t\t\t\t\t\t<span class="mr--small">\n\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\tname: \'info-circle-regular\',\n\t\t\t\t\t\t\t\t\t\tclass: \'h-icon-color--inherit\'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{{app.tl(\'There are no members available\')}}\n\t\t\t\t\t</div>\n\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\x3c!-- ko foreach: members --\x3e\n\t\t\t\t\t\x3c!-- ko with: $component.getLinkedUserObject($data) --\x3e\n\t\t\t\t\t\t\x3c!-- ko if: $component.checkIfUserIsVisible($data) --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko template: {\n\t\t\t\t\t\t\t\t\tname: \'people-picker-user\',\n\t\t\t\t\t\t\t\t\tdata: $data\n\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</div>\n\t\t\x3c!-- /ko --\x3e\n\t</div>\n<\/script>\n\n\n<script type="text/html" id="people-picker-group-header">\n\t<label class="w-people-picker-new__list-header h-show-hover--parent"\n\t\tdata-bind="\n\t\t\tcss: {\n\t\t\t\t\'w-people-picker-new__list-header--selected\': $data[$component.selectedKey]() && $component.shouldShowItemSelection()\n\t\t\t},\n\t\t\tclick: $component.OnClickGroup,\n\t\t\tclickBubble: false">\n\t\t\x3c!-- ko if: $component.allowDynamicSelection --\x3e\n\t\t\t\x3c!-- ko if: $component.showAdvancedFollowerOptions --\x3e\n\t\t\t\t<div class="w-people-picker-new__select-wrapper">\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: \'ui-checkbox-icon\',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tselected: shouldShowFollowerOptions\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</div>\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\x3c!-- ko if: !$component.showAdvancedFollowerOptions && $component.shouldShowItemSelection() --\x3e\n\t\t\t\t<div class="w-people-picker-new__select-wrapper">\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: \'ui-checkbox-icon\',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\treadonly: !$component.useModal(),\n\t\t\t\t\t\t\t\tselected: $data[$component.selectedKey]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</div>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t\x3c!-- /ko --\x3e\n\n\t\t<div class="w-people-picker-new__item-avatar">\n\t\t\t\x3c!-- ko if: pickerItemType == \'team\' --\x3e\n\t\t\t\t{{{ $data.GetLogo([\'u-team-logo--small\']) }}}\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\x3c!-- ko if: pickerItemType != \'team\' --\x3e\n\t\t\t\t<img data-bind="\n\t\t\t\t\t\tattr: {\n\t\t\t\t\t\t\tsrc: logoUrl\n\t\t\t\t\t\t},\n\t\t\t\t\t\tevent: {\n\t\t\t\t\t\t\terror: app.OnImageThumbLoadFail.bind( $data, pickerItemType )\n\t\t\t\t\t\t}">\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</div>\n\n\t\t<div class="w-people-picker-new__item-name">\n\t\t\t{{name}}\n\n\t\t\t\x3c!-- ko if: isLoadingMembers --\x3e\n\t\t\t\t<span class="ml--small color--gray-light">\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tname: \'circle-notch-regular\',\n\t\t\t\t\t\t\t\tclass: \'h-icon-color--inherit fas fa-spin\'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</span>\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\x3c!-- ko if: pickerItemType == \'team\' --\x3e\n\t\t\t\t<span class="w-people-picker-new__item-subtitle">\n\t\t\t\t\t{{formattedHandle}}\n\t\t\t\t</span>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</div>\n\n\t\t\x3c!-- ko if: $component.showAdvancedFollowerOptions --\x3e\n\t\t\t<button type="button"\n\t\t\t\tclass="btn btn-white btn-sm ml--medium"\n\t\t\t\tdata-tipped-options="\n\t\t\t\t\tskin: \'light\',\n\t\t\t\t\thideOn: false,\n\t\t\t\t\thideAfter: 300,\n\t\t\t\t\tshowDelay: 400,\n\t\t\t\t\tposition: \'bottommiddle\'"\n\t\t\t\tdata-content="{{$component.followOptionsTippedContent}}"\n\t\t\t\tdata-bind="\n\t\t\t\t\tvisible: shouldShowFollowerOptions,\n\t\t\t\t\ttippedDelegate,\n\t\t\t\t\tclickBubble: false,\n\t\t\t\t\tclick: function(){ return true; }">\n\t\t\t\t\x3c!-- ko switch: followerStatus --\x3e\n\t\t\t\t\t\x3c!-- ko case: \'all\' --\x3e\n\t\t\t\t\t\t{{app.tl(\'All notifications\')}}\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\x3c!-- ko case: \'changes\' --\x3e\n\t\t\t\t\t\t{{app.tl(\'Only changes\')}}\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\x3c!-- ko case: \'comments\' --\x3e\n\t\t\t\t\t\t{{app.tl(\'Only comments\')}}\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\x3c!-- ko case: $default --\x3e\n\t\t\t\t\t\t{{app.tl(\'Not following\')}}\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</button>\n\t\t\x3c!-- /ko --\x3e\n\n\t\t\x3c!-- ko if: $component.showAllNoneOptions --\x3e\n\t\t\t<div class="w-people-picker-new__item-quickselect h-show-hover--child">\n\t\t\t\t<a href="javascript:;"\n\t\t\t\t\tdata-bind="\n\t\t\t\t\t\tclick: $component.OnClickSelectAllInGroup,\n\t\t\t\t\t\tclickBubble: false">\n\t\t\t\t\t{{app.tl(\'All\')}}\n\t\t\t\t</a>\n\t\t\t\t<span>|</span>\n\t\t\t\t<a href="javascript:;"\n\t\t\t\t\tdata-bind="\n\t\t\t\t\t\tclick: $component.OnClickSelectNoneInGroup,\n\t\t\t\t\t\tclickBubble: false">\n\t\t\t\t\t{{app.tl(\'None\')}}\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t\x3c!-- /ko --\x3e\n\n\t\t<div class="w-people-picker-new__item-toggle"\n\t\t\tdata-bind="\n\t\t\t\tclick: $component.OnClickToggleUsersInGroup,\n\t\t\t\tclickBubble: false">\n\t\t\t\x3c!-- ko component: {\n\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tname: $component.checkIfGroupIsCollapsed($data) ? \'angle-down-regular\' : \'angle-up-regular\',\n\t\t\t\t\t\tclass: \'h-icon-color--inherit\'\n\t\t\t\t\t}\n\t\t\t\t} --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</div>\n\t</label>\n<\/script>\n\n\n<script type="text/html" id="people-picker-user">\n\t<label class="w-people-picker-new__item"\n\t\tdata-bind="\n\t\t\tclick: $component.OnClickPerson,\n\t\t\tclickBubble: false,\n\t\t\tcss: {\n\t\t\t\t\'w-people-picker-new__item--selected\': $component.shouldShowItemSelection() && $data[$component.selectedKey](),\n\t\t\t\t\'w-people-picker-new__item--in-group-selection\': $data[$component.teamKey]() || $data[$component.companyKey](),\n\t\t\t\t\'w-people-picker-new__item--hidden\': $component.currentFilterView() == \'people\' && !$data[$component.visibleKey]()\n\t\t\t}">\n\n\t\t\x3c!-- ko if: $component.showAdvancedFollowerOptions --\x3e\n\t\t\t<div class="w-people-picker-new__select-wrapper">\n\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\tname: \'ui-checkbox-icon\',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tdisabled: isFollowingDynamically,\n\t\t\t\t\t\t\tselected: shouldShowFollowerOptions\n\t\t\t\t\t\t}\n\t\t\t\t\t} --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</div>\n\t\t\x3c!-- /ko --\x3e\n\n\t\t\x3c!-- ko if: !$component.showAdvancedFollowerOptions && $component.shouldShowItemSelection() --\x3e\n\t\t\t<div class="w-people-picker-new__select-wrapper">\n\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\tname: \'ui-checkbox-icon\',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\treadonly: !$component.useModal(),\n\t\t\t\t\t\t\tdisabled: $data[$component.teamKey],\n\t\t\t\t\t\t\tselected: $data[$component.selectedKey],\n\t\t\t\t\t\t\tselectedAlways: isAdministrator && $component.pickerType == \'privacy\'\n\t\t\t\t\t\t}\n\t\t\t\t\t} --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</div>\n\t\t\x3c!-- /ko --\x3e\n\n\t\t<div class="w-people-picker-new__item-avatar">\n\t\t\t<img data-bind="\n\t\t\t\tattr: {\n\t\t\t\t\tsrc: avatarUrl\n\t\t\t\t},\n\t\t\t\tevent: {\n\t\t\t\t\terror: app.OnImageThumbLoadFail.bind( $data, pickerItemType )\n\t\t\t\t}">\n\t\t</div>\n\n\t\t<div class="w-people-picker-new__item-name">\n\t\t\t{{fullName}}\n\t\t\t\x3c!-- ko if: isCurrentUser --\x3e\n\t\t\t\t<span class="ml--small">({{app.tl(\'Me\')}})</span>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\x3c!-- ko foreach: userBadges --\x3e\n\t\t\t\t<span class="u-badge u-badge--{{key}} tipped-hide"\n\t\t\t\t\tdata-tipped={{label}}>\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tname: icon,\n\t\t\t\t\t\t\t\tclass: \'h-icon-color--inherit\'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</span>\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\x3c!-- ko if: $data[$component.teamKey] --\x3e\n\t\t\t\t<span class="text-muted font-size--default ml--small tipped-hide"\n\t\t\t\t\tdata-tipped="{{app.tl(\'This user is already part of a selected team\')}}">\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tname: \'users-regular\',\n\t\t\t\t\t\t\t\tclass: \'h-icon-color--inherit\'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</span>\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\x3c!-- ko if: $component.shouldShowUserEmailPreference --\x3e\n\t\t\t\t\x3c!-- ko ifnot: doesReceiveProjectEmails --\x3e\n\t\t\t\t\t<span class="text-muted font-size--default ml--small tipped-hide"\n\t\t\t\t\t\tdata-tipped="{{app.tl(\'[_s] does not receive emails from this project\', firstName)}}">\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tname: \'no-email\',\n\t\t\t\t\t\t\t\t\tclass: \'h-icon-color--inherit\'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</span>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\x3c!-- ko if: title.length --\x3e\n\t\t\t\t<span class="w-people-picker-new__item-subtitle">{{title}}</span>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</div>\n\n\t\t\x3c!-- ko if: $component.showAdvancedFollowerOptions --\x3e\n\t\t\t<button type="button"\n\t\t\t\tclass="btn btn-white btn-sm ml--medium"\n\t\t\t\tdata-tipped-options="\n\t\t\t\t\tskin: \'light\',\n\t\t\t\t\thideOn: false,\n\t\t\t\t\thideAfter: 300,\n\t\t\t\t\tshowDelay: 400,\n\t\t\t\t\tposition: \'bottommiddle\'"\n\t\t\t\tdata-content="{{$component.followOptionsTippedContent}}"\n\t\t\t\tdata-bind="\n\t\t\t\t\tvisible: shouldShowFollowerOptions,\n\t\t\t\t\ttippedDelegate,\n\t\t\t\t\tclickBubble: false,\n\t\t\t\t\tclick: function(){ return true; }">\n\t\t\t\t\x3c!-- ko switch: followerStatus --\x3e\n\t\t\t\t\t\x3c!-- ko case: \'all\' --\x3e\n\t\t\t\t\t\t{{app.tl(\'All notifications\')}}\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\x3c!-- ko case: \'changes\' --\x3e\n\t\t\t\t\t\t{{app.tl(\'Only changes\')}}\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\x3c!-- ko case: \'comments\' --\x3e\n\t\t\t\t\t\t{{app.tl(\'Only comments\')}}\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\x3c!-- ko case: $default --\x3e\n\t\t\t\t\t\t{{app.tl(\'Not following\')}}\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</button>\n\t\t\x3c!-- /ko --\x3e\n\t</label>\n<\/script>\n\n\n<script type="text/html" id="people-picker-simple">\n\t<div id="{{uniqueId}}"\n\t\tclass="\n\t\t\tw-people-picker-new\n\t\t\tw-people-picker-new--simple\n\t\t\tw-people-picker-new--no-border"\n\t\tdata-bind="\n\t\t\tcss: {\n\t\t\t\t\'w-people-picker-new--is-filtering\': isFiltersVisible\n\t\t\t}">\n\t\t<div class="w-people-picker-new__header">\n\t\t\t<div class="w-people-picker-new__search">\n\t\t\t\t<input type="search"\n\t\t\t\t\tclass="form-control"\n\t\t\t\t\tplaceholder="{{app.tl(\'Search\')}}"\n\t\t\t\t\tdata-bind="\n\t\t\t\t\t\ttextInput: searchTerm,\n\t\t\t\t\t\thasFocus: hasFocus">\n\t\t\t\t<span class="w-people-picker-new__search-icon">\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tname: \'search-regular\',\n\t\t\t\t\t\t\t\tclass: \'h-icon-color--inherit\'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="w-people-picker-new__body">\n\t\t\t\x3c!-- ko ifnot: shouldShowLoadingState --\x3e\n\t\t\t\t<div class="w-people-picker-new__content w-people-picker-new__content--main">\n\t\t\t\t\t<div class="w-people-picker-new__panels"\n\t\t\t\t\t\tdata-bind="css: {\n\t\t\t\t\t\t\t\'mt--none\': initialOptions().length > 0\n\t\t\t\t\t\t}">\n\t\t\t\t\t\t<div class="w-people-picker-new__panel">\n\t\t\t\t\t\t\t<div class="w-people-picker-new__list">\n\t\t\t\t\t\t\t\t\x3c!-- ko if: initialOptions().length --\x3e\n\t\t\t\t\t\t\t\t\t<div class="w-people-picker-new__list w-people-picker-new__list--initial">\n\t\t\t\t\t\t\t\t\t\t\x3c!-- ko foreach: initialOptions --\x3e\n\t\t\t\t\t\t\t\t\t\t\t<label class="w-people-picker-new__item"\n\t\t\t\t\t\t\t\t\t\t\t\tdata-bind="\n\t\t\t\t\t\t\t\t\t\t\t\t\tclick: $component.OnClickInitialOption,\n\t\t\t\t\t\t\t\t\t\t\t\t\tcss: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\'w-people-picker-new__item--selected\': isSelected() && $component.shouldShowItemSelection()\n\t\t\t\t\t\t\t\t\t\t\t\t\t}">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="w-people-picker-new__select-wrapper">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: \'ui-checkbox-icon\',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treadonly: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselected: isSelected\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko if: $component.shouldShowDefaultUserIcon && $component.showButtonIcon --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="w-people-picker-new__item-avatar mr--none">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: $component.buttonIcon\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}--\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="w-people-picker-new__item-name">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{text}}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\x3c!-- ko ifnot: shouldShowItemSelection --\x3e\n\t\t\t\t\t\t\t\t\t<div class="w-people-picker-new__list w-people-picker-new__list--initial">\n\t\t\t\t\t\t\t\t\t\t<label class="w-people-picker-new__item w-people-picker-new__item--selected"\n\t\t\t\t\t\t\t\t\t\t\tdata-bind="click: function(){\n\t\t\t\t\t\t\t\t\t\t\t\tOnClickOpenModal(true)\n\t\t\t\t\t\t\t\t\t\t\t}">\n\t\t\t\t\t\t\t\t\t\t\t<div class="w-people-picker-new__select-wrapper">\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: \'ui-checkbox-icon\',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treadonly: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselected: true\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t<div class="w-people-picker-new__item-name">\n\t\t\t\t\t\t\t\t\t\t\t\t{{selectedLabel}}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\x3c!-- ko if: showMeAtTop --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- ko if: compareNames($component.currentUser.fullName, $component.searchTerm()) --\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c!-- ko with: currentUserSyncStatus --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko if: $component.checkIfUserIsVisible($component.currentUser) --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko template: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: \'people-picker-user\',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata: $component.currentUser\n\t\t\t\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\x3c!-- ko foreach: filteredCompanies --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- ko if: $data && people().length && (people().length > 1 || !people()[0].isCurrentUser) --\x3e\n\t\t\t\t\t\t\t\t\t\t<label class="w-people-picker-new__list-header w-people-picker-new__list-header--secondary">\n\t\t\t\t\t\t\t\t\t\t\t{{name}}\n\t\t\t\t\t\t\t\t\t\t</label>\n\n\t\t\t\t\t\t\t\t\t\t\x3c!-- ko foreach: people --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko if: !(isCurrentUser && $component.showMeAtTop()) && $component.checkIfUserIsVisible($data) --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko template: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: \'people-picker-user\',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata: $data\n\t\t\t\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\x3c!-- ko if: allowDynamicSelection --\x3e\n\t\t\t\t\t\t\t\t<div class="w-people-picker-new__list">\n\t\t\t\t\t\t\t\t\t\x3c!-- ko if: filteredTeams().length --\x3e\n\t\t\t\t\t\t\t\t\t\t<label class="w-people-picker-new__list-header w-people-picker-new__list-header--secondary mt--medium">\n\t\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Teams\')}}\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\t\x3c!-- ko foreach: filteredTeams --\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c!-- ko template: {\n\t\t\t\t\t\t\t\t\t\t\t\tname: \'people-picker-team\',\n\t\t\t\t\t\t\t\t\t\t\t\tdata: $data\n\t\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\x3c!-- ko if: shouldShowPeopleBlankSlate() && shouldShowTeamsBlankSlate() --\x3e\n\t\t\t\t\t\t\t\t<div class="w-people-picker-new__state">\n\n\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\tname: \'search-regular\',\n\t\t\t\t\t\t\t\t\t\t\t\tclass: \'w-people-picker-new__state-icon\'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\t<h4>\n\t\t\t\t\t\t\t\t\t\t{{ usersBlankSlateTitle }}\n\t\t\t\t\t\t\t\t\t</h4>\n\n\t\t\t\t\t\t\t\t\t\x3c!-- ko if: allowInvite && projectAdministrator() --\x3e\n\t\t\t\t\t\t\t\t\t\t<div class="flex flex-column text-muted">\n\t\t\t\t\t\t\t\t\t\t\t{{app.tl("Can\'t find who you are looking for?")}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t<button class="btn btn-link"\n\t\t\t\t\t\t\t\t\t\t\tdata-bind="click: OnClickAddUserToProject">\n\t\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Add user to project\')}}\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko component: { name: "widget-inline-help", params: { type:\'peoplePickerV\' } } --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\x3c!-- ko if: shouldShowLoadingState --\x3e\n\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\tname: \'list-state-loading-new\',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\titemType: \'data\',\n\t\t\t\t\t\t\tformat: \'large\',\n\t\t\t\t\t\t\tshowText: false,\n\t\t\t\t\t\t\tuseDelay: false\n\t\t\t\t\t\t}\n\t\t\t\t\t} --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</div>\n\n\t\t<div class="w-people-picker-new__footer">\n\t\t\t\x3c!-- ko if: value().length --\x3e\n\t\t\t\t<button class="btn btn-link px--small mr--auto"\n\t\t\t\t\tdata-bind="click: OnClickClear">\n\t\t\t\t\t{{app.tl(\'Clear\')}}\n\t\t\t\t</button>\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t<button class="btn btn-link px--small ml--auto"\n\t\t\t\tdata-bind="\n\t\t\t\t\tcss: {\n\t\t\t\t\t\t\'mr--auto\': value().length == 0\n\t\t\t\t\t},\n\t\t\t\t\tclick: function(){\n\t\t\t\t\t\tOnClickOpenModal(true)\n\t\t\t\t\t}">\n\t\t\t\t{{app.tl(\'Choose more\')}}\n\t\t\t\t<span class="ml--small">\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tname: \'chevron-right-regular\',\n\t\t\t\t\t\t\t\tclass: \'h-icon-color--inherit\'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</span>\n\t\t\t</button>\n\t\t</div>\n\n\t\t<div class="hidden" data-bind="onRendered: $component.OnRenderedPicker"></div>\n\t</div>\n<\/script>\n\n\n<script type="text/html" id="people-picker-options">\n\t<div id="{{uniqueId}}"\n\t\tclass="w-people-picker-new"\n\t\tdata-bind="\n\t\t\tcss: {\n\t\t\t\t\'w-people-picker-new--is-filtering\': isFiltersVisible,\n\t\t\t\t\'w-people-picker-new--no-border\': format==\'button\',\n\t\t\t\t\'w-people-picker-new--inline\': format==\'inline\'\n\t\t\t}">\n\t\t<div class="w-people-picker-new__header">\n\n\t\t\t\x3c!-- ko if: $component.format == \'inline\' && selectedItems().length == 0 --\x3e\n\t\t\t\t<div class="w-people-picker-new__selection">\n\t\t\t\t\t<span class="w-people-picker-new__selection-placeholder">\n\t\t\t\t\t\t{{placeholderLabel}}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\x3c!-- ko if: $component.format == \'inline\' && selectedItems().length --\x3e\n\t\t\t\t<div class="w-people-picker-new__selection">\n\t\t\t\t\t\x3c!-- ko foreach: selectedItems --\x3e\n\t\t\t\t\t\t\x3c!-- ko if: $index() < ($component.numberOfAvatarsVisible() - 1) --\x3e\n\t\t\t\t\t\t\t<div class="w-people-picker-new__selection-item tipped-hide"\n\t\t\t\t\t\t\t\tdata-tipped="{{$data.label}}"\n\t\t\t\t\t\t\t\tdata-bind="click: $component.OnClickDeselectItem">\n\n\t\t\t\t\t\t\t\t\x3c!-- ko if: type == \'team\' --\x3e\n\t\t\t\t\t\t\t\t\t{{{ linkedItem.GetLogo([\'u-team-logo--list\']) }}}\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\x3c!-- ko if: type != \'team\' --\x3e\n\t\t\t\t\t\t\t\t\t<img data-bind="\n\t\t\t\t\t\t\t\t\t\t\tattr: {\n\t\t\t\t\t\t\t\t\t\t\t\tsrc: $data.img\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tevent: {\n\t\t\t\t\t\t\t\t\t\t\t\terror: app.OnImageThumbLoadFail.bind( $data, type )\n\t\t\t\t\t\t\t\t\t\t\t}">\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t<span class="w-people-picker-new__selection-item-overlay">\n\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\tname: \'close-regular\',\n\t\t\t\t\t\t\t\t\t\t\t\tclass: \'h-icon-color--white\'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\x3c!-- ko if: selectedItems().length > ($component.numberOfAvatarsVisible() - 1) --\x3e\n\t\t\t\t\t\t<div class="w-people-picker-new__selection-item w-people-picker-new__selection-item--overflow"\n\t\t\t\t\t\t\tdata-tipped-options="\n\t\t\t\t\t\t\t\tskin: \'light\',\n\t\t\t\t\t\t\t\thideOn: false,\n\t\t\t\t\t\t\t\thideAfter: 300,\n\t\t\t\t\t\t\t\tposition: \'bottommiddle\'"\n\t\t\t\t\t\t\tdata-content="{{$component.selectedItemsTippedContent}}"\n\t\t\t\t\t\t\tdata-bind="tippedDelegate">\n\t\t\t\t\t\t\t\x3c!-- ko if: ($component.selectedItems().length - ($component.numberOfAvatarsVisible() - 1)) < 100 --\x3e\n\t\t\t\t\t\t\t\t+{{$component.selectedItems().length - ($component.numberOfAvatarsVisible() - 1)}}\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: ($component.selectedItems().length - ($component.numberOfAvatarsVisible() - 1)) >= 100 --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\tname: \'ellipsis-h-regular\',\n\t\t\t\t\t\t\t\t\t\t\tclass: \'h-icon-color--inherit\'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t<div class="hidden" data-bind="onRendered: $component.OnRenderedPickerHeader"></div>\n\t\t\t\t</div>\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t<div class="w-people-picker-new__search">\n\t\t\t\t<input type="search"\n\t\t\t\t\tclass="form-control"\n\t\t\t\t\tplaceholder="{{app.tl(\'Search\')}}"\n\t\t\t\t\tdata-bind="\n\t\t\t\t\t\ttextInput: searchTerm,\n\t\t\t\t\t\thasFocus: hasFocus">\n\t\t\t\t<span class="w-people-picker-new__search-icon">\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tname: \'search-regular\',\n\t\t\t\t\t\t\t\tclass: \'h-icon-color--inherit\'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</span>\n\t\t\t</div>\n\n\t\t\t\x3c!-- ko if: showFilterOptions --\x3e\n\t\t\t\t<div class="w-people-picker-new__filter-toggle">\n\t\t\t\t\t<button class="btn {{filterButtonClass}}" data-bind="click: OnClickFilterButton">\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tname: \'filter-solid\',\n\t\t\t\t\t\t\t\t\tclass: \'h-icon-color--inherit\'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</div>\n\n\t\t<div class="w-people-picker-new__body">\n\t\t\t\x3c!-- ko ifnot: hasLoaded --\x3e\n\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\tname: \'list-state-loading-new\',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\titemType: \'data\',\n\t\t\t\t\t\t\tformat: \'large\',\n\t\t\t\t\t\t\tshowText: false,\n\t\t\t\t\t\t\tuseDelay: false\n\t\t\t\t\t\t}\n\t\t\t\t\t} --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\x3c!-- ko if: hasLoaded --\x3e\n\t\t\t\t<div class="w-people-picker-new__content w-people-picker-new__content--main">\n\t\t\t\t\t\x3c!-- ko if: showTabs --\x3e\n\t\t\t\t\t\t<div class="u-tabs mx--none">\n\t\t\t\t\t\t\t<button class="u-tabs__tab u-tabs__tab--is-selected" data-bind="click: function(){ selectedTab(\'people\') }, css: {\'u-tabs__tab--is-selected\': selectedTab() == \'people\'}">\n\t\t\t\t\t\t\t\t{{app.tl(\'People\')}}\n\t\t\t\t\t\t\t\t\x3c!-- ko if: selectedPeopleCount() > 0 --\x3e\n\t\t\t\t\t\t\t\t\t<span class="h-count h-count--active ml--medium"\n\t\t\t\t\t\t\t\t\t\tdata-bind="">\n\t\t\t\t\t\t\t\t\t\t{{selectedPeopleCount}}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t<button class="u-tabs__tab" data-bind="click: function(){ selectedTab(\'teams\') }, css: {\'u-tabs__tab--is-selected\': selectedTab() == \'teams\' }">\n\t\t\t\t\t\t\t\t{{app.tl(\'Teams\')}}\n\n\t\t\t\t\t\t\t\t\x3c!-- ko if: selectedTeamsCount() > 0 --\x3e\n\t\t\t\t\t\t\t\t\t<span class="h-count h-count--active ml--medium">\n\t\t\t\t\t\t\t\t\t\t{{selectedTeamsCount}}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t<div class="w-people-picker-new__panels"\n\t\t\t\t\t\tdata-bind="css: {\n\t\t\t\t\t\t\t\'mt--none\': initialOptions().length > 0\n\t\t\t\t\t\t}">\n\t\t\t\t\t\t<div class="w-people-picker-new__panel">\n\t\t\t\t\t\t\t<div class="w-people-picker-new__list"\n\t\t\t\t\t\t\t\tdata-bind="visible: selectedTab() == \'teams\'">\n\n\t\t\t\t\t\t\t\t\x3c!-- ko if: teamsData.state() == \'loading\' && filteredTeams().length == 0 --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\tname: \'list-state-loading-new\',\n\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\titemType: \'data\',\n\t\t\t\t\t\t\t\t\t\t\t\tformat: \'large\',\n\t\t\t\t\t\t\t\t\t\t\t\tshowText: false,\n\t\t\t\t\t\t\t\t\t\t\t\tuseDelay: false\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\x3c!-- ko foreach: filteredTeams --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- ko if: $component.isNewCompanyForTeams($index()) --\x3e\n\t\t\t\t\t\t\t\t\t\t<span class="w-people-picker-new__list-group-header">\n\t\t\t\t\t\t\t\t\t\t\t{{companyName}}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\t\x3c!-- ko if: $index() == 0 && projectId > 0 --\x3e\n\t\t\t\t\t\t\t\t\t\t<span class="w-people-picker-new__list-group-header">\n\t\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Teams only on this project\')}}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\t\x3c!-- ko if: $component.isNewSiteLevelGroup($index()) --\x3e\n\t\t\t\t\t\t\t\t\t\t<span class="w-people-picker-new__list-group-header">\n\t\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Teams on all projects\')}}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\t\x3c!-- ko template: {\n\t\t\t\t\t\t\t\t\t\t\tname: \'people-picker-team\',\n\t\t\t\t\t\t\t\t\t\t\tdata: $data\n\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\x3c!-- ko if: teamsData.state() != \'loading\' --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\tname: \'widget-loadMore\',\n\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\tdataLoader: teamsData,\n\t\t\t\t\t\t\t\t\t\t\t\tminimalTemplate: true,\n\t\t\t\t\t\t\t\t\t\t\t\tloadOnScroll: true\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\x3c!-- ko if: shouldShowTeamsBlankSlate --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\tname: \'list-state-blank\',\n\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\titemType: \'team\',\n\t\t\t\t\t\t\t\t\t\t\t\tshowButton: false,\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: teamsBlankSlateTitle,\n\t\t\t\t\t\t\t\t\t\t\t\tsize: \'small\',\n\t\t\t\t\t\t\t\t\t\t\t\tmsg: \'\',\n\t\t\t\t\t\t\t\t\t\t\t\tshowImage: false\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class="w-people-picker-new__list"\n\t\t\t\t\t\t\t\tdata-bind="visible: selectedTab() == \'people\'">\n\n\t\t\t\t\t\t\t\t\x3c!-- ko if: initialOptions().length --\x3e\n\t\t\t\t\t\t\t\t\t<div class="w-people-picker-new__list w-people-picker-new__list--initial">\n\t\t\t\t\t\t\t\t\t\t\x3c!-- ko foreach: initialOptions --\x3e\n\t\t\t\t\t\t\t\t\t\t\t<label class="w-people-picker-new__item"\n\t\t\t\t\t\t\t\t\t\t\t\tdata-bind="clickToggle: isSelected">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="w-people-picker-new__select-wrapper">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: \'ui-checkbox-icon\',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselected: isSelected\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="w-people-picker-new__item-name">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{text}}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\x3c!-- ko if: peopleAndCompaniesData.state() == \'loading\' && filteredCompanies().length == 0 --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\tname: \'list-state-loading-new\',\n\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\titemType: \'data\',\n\t\t\t\t\t\t\t\t\t\t\t\tformat: \'large\',\n\t\t\t\t\t\t\t\t\t\t\t\tshowText: false,\n\t\t\t\t\t\t\t\t\t\t\t\tuseDelay: false\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\x3c!-- ko foreach: filteredCompanies --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- ko template: {\n\t\t\t\t\t\t\t\t\t\t\tname: \'people-picker-group-header\',\n\t\t\t\t\t\t\t\t\t\t\tdata: $data\n\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\t\x3c!-- ko ifnot: $component.checkIfGroupIsCollapsed($data) --\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c!-- ko foreach: people --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko if: $component.checkIfUserIsVisible($data) --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko template: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: \'people-picker-user\',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata: $data\n\t\t\t\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\x3c!-- ko if: shouldShowPeopleBlankSlate --\x3e\n\n\t\t\t\t\t\t\t\t\t<div data-bind="css:{ w-people-picker-new--with-inline-help: showInviteInlineHelp}">\n\t\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\t\tname: \'list-state-blank\',\n\t\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\t\titemType: \'people\',\n\t\t\t\t\t\t\t\t\t\t\t\t\tshowButton: false,\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: usersBlankSlateTitle,\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize: \'small\',\n\t\t\t\t\t\t\t\t\t\t\t\t\tmsg: \'\',\n\t\t\t\t\t\t\t\t\t\t\t\t\tshowImage: false\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\x3c!-- ko if: peopleAndCompaniesData.state() != \'loading\' --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\tname: \'widget-loadMore\',\n\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\tdataLoader: peopleAndCompaniesData,\n\t\t\t\t\t\t\t\t\t\t\t\tminimalTemplate: true,\n\t\t\t\t\t\t\t\t\t\t\t\tloadOnScroll: true\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- ko if: peopleAndCompaniesData.state() != \'loading\' --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- ko component: { name: "widget-inline-help", params: { type:\'peoplePickerH\' } } --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t\x3c!-- ko if: showFilterOptions --\x3e\n\t\t\t\t\t<div class="w-people-picker-new__content w-people-picker-new__content--filters">\n\t\t\t\t\t\t<div class="w-people-picker-new__filters">\n\t\t\t\t\t\t\t<div class="u-filter-panel">\n\t\t\t\t\t\t\t\t<div class="u-filter-panel__header">\n\t\t\t\t\t\t\t\t\t<div class="u-filter-panel__title">\n\t\t\t\t\t\t\t\t\t\t<span>{{app.tl(\'Options\')}}</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class="u-filter-panel__body">\n\t\t\t\t\t\t\t\t\t\x3c!-- ko if: pickerType != \'access\' --\x3e\n\t\t\t\t\t\t\t\t\t\t<div class="flex p--medium">\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: \'widget-toggleSwitch\',\n\t\t\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: showObservers,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: app.tl(\'Show observers\'),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowTitle: false\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\t\x3c!-- ko if: shouldShowContactsFilter --\x3e\n\t\t\t\t\t\t\t\t\t\t<div class="flex p--medium">\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: \'widget-toggleSwitch\',\n\t\t\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: showContacts,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: app.tl(\'Show contacts\'),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowTitle: false\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\t\x3c!-- ko if: shouldShowCollaboratorsFilter --\x3e\n\t\t\t\t\t\t\t\t\t\t<div class="flex p--medium">\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: \'widget-toggleSwitch\',\n\t\t\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: showCollaborators,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: app.tl(\'Show collaborators\'),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowTitle: false\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\t\x3c!-- ko if: shouldShowGlobalTeamsFilter --\x3e\n\t\t\t\t\t\t\t\t\t\t<div class="flex p--medium">\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: \'widget-toggleSwitch\',\n\t\t\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: onlyGlobalTeamsWithProjectMembers,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: app.tl(\'Only show teams with members on project\'),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowTitle: false\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</div>\n\t\t<div class="hidden" data-bind="onRendered: $component.OnRenderedPicker"></div>\n\t</div>\n\n\t\x3c!-- ko if: canInvitePeople --\x3e\n\t\t<div class="p--medium text--center width--100 text-muted">\n\t\t\t{{app.tl("Can\'t find who you are looking for?")}}\n\t\t\t\x3c!-- ko ifnot: allowAddContact --\x3e\n\t\t\t\t<a href="javascript:;" class="m-add-team__add-user-link" data-bind="click: OnClickInviteNewUser">{{app.tl(\'Invite a new user\')}}</a>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\x3c!-- ko if: allowAddContact --\x3e\n\t\t\t\t<div>\n\t\t\t\t\t{{app.tl(\'Invite a new\')}}\n\t\t\t\t\t<a href="javascript:;" class="m-add-team__add-user-link" data-bind="click: OnClickInviteNewUser">{{app.tl(\'user\')}}</a>\n\t\t\t\t\t{{app.tl(\'or\')}}\n\t\t\t\t\t<a href="javascript:;" class="m-add-team__add-user-link" data-bind="click: OnClickAddContact">{{app.tl(\'contact\')}}</a>\n\t\t\t\t</div>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</div>\n\t\x3c!--/ko--\x3e\n<\/script>'},1703:function(t,e,n){(function(i){var s,o,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(164),n(1674)],void 0!==(o=function(t,e){var n;return n=function(){function e(e){var n,i,s,o;null==e&&(e={}),this.dispose=a(this.dispose,this),this.OnClickCopy=a(this.OnClickCopy,this),this.subscriptions=[],this.id="copyText"+Date.now()+Math.floor(1e3*Math.random()),this.extraButtons=t.observableArray(null!=(n=e.extraButtons)?n:[]),this.canEdit=null!=(i=e.canEdit)&&i,this.className=null!=(s=e.className)?s:"btn-default",this.label=null!=(o=e.label)?o:"",this.tipped=""===this.label?app.tl("Copy to Clipboard"):"",this.subscriptions.push(this.copyButtonClass=t.pureComputed(function(t){return function(){return"btn w-copy-text__button "+t.className+" tipped-hide "+(t.extraButtons().length>0?"w-copy-text__button--middle":"")}}(this))),this.subscriptions.push(this.filteredButtons=t.pureComputed(function(e){return function(){return t.utils.arrayFilter(e.extraButtons(),function(e){return null==e.enabled||null!=e.enabled&&t.unwrap(e.enabled)})}}(this))),this.canEdit?this.value=t.isObservable(e.value)?e.value:t.observable(e.value):this.value=t.isSubscribable(e.value)?e.value:t.observable(e.value)}return e.prototype.OnClickCopy=function(){return setTimeout(function(t){return function(){return i("#"+t.id).focus().select()}}(this),100)},e.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},e}(),{viewModel:n,template:e}}.apply(e,s))&&(t.exports=o)}).call(e,n(245))},1704:function(t,e,n){var i,s,o=function(t,e){return function(){return t.apply(e,arguments)}},a=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},r={}.hasOwnProperty;i=[n(1677),n(1718),n(1720),n(1367),n(1116),n(1128),n(1119),n(1675),n(1676)],void 0!==(s=function(t,e,n,i,s,l,p,c,d){var u;return u=function(){function t(t){var i,r,p,u,h,m,f,k,g,b,v,y,x,w,I,C,T,O,P,S,j,_,A,F,D,U,M,E,N,L,R,$,B,V,K,H,q,G,W,z,Y,J,Q,X,Z,tt,et,nt,it,st,ot,at,rt,lt,pt,ct,dt,ut;for(null==t&&(t={}),this.dispose=o(this.dispose,this),this.checkIfUserIsVisible=o(this.checkIfUserIsVisible,this),this.checkIfGroupIsCollapsed=o(this.checkIfGroupIsCollapsed,this),this.isNewSiteLevelGroup=o(this.isNewSiteLevelGroup,this),this.isNewCompanyForTeams=o(this.isNewCompanyForTeams,this),this._checkIfIsPublic=o(this._checkIfIsPublic,this),this._getSharedProperties=o(this._getSharedProperties,this),this._syncInitialOptions=o(this._syncInitialOptions,this),this._getRelativeEndpoint=o(this._getRelativeEndpoint,this),this._getGroupKey=o(this._getGroupKey,this),this._getFollowersKey=o(this._getFollowersKey,this),this._getVisibleKey=o(this._getVisibleKey,this),this._getSelectedKey=o(this._getSelectedKey,this),this._checkIfItemIsSelected=o(this._checkIfItemIsSelected,this),this._initMentionsListener=o(this._initMentionsListener,this),this.compareNames=o(this.compareNames,this),this._fireCallback=o(this._fireCallback,this),this._getSelectionAsText=o(this._getSelectionAsText,this),this._getPlaceholderText=o(this._getPlaceholderText,this),this._getButtonIcon=o(this._getButtonIcon,this),this._shouldPreventMultiselect=o(this._shouldPreventMultiselect,this),this._calculateSpaceForAvatars=o(this._calculateSpaceForAvatars,this),this._calculatePageSize=o(this._calculatePageSize,this),this._hideTip=o(this._hideTip,this),this.loadData=o(this.loadData,this),this._setPrivacy=o(this._setPrivacy,this),this._checkPrivacy=o(this._checkPrivacy,this),this._getItemsFromStore=o(this._getItemsFromStore,this),this._getCommentFollowers=o(this._getCommentFollowers,this),this._getChangeFollowers=o(this._getChangeFollowers,this),this._getSelectedItems=o(this._getSelectedItems,this),this._persistRemainingTeamMembers=o(this._persistRemainingTeamMembers,this),this._persistRemainingCompanyMembers=o(this._persistRemainingCompanyMembers,this),this._fetchInitialData=o(this._fetchInitialData,this),this._syncProperties=o(this._syncProperties,this),this._syncCompanyStore=o(this._syncCompanyStore,this),this._syncTeamStore=o(this._syncTeamStore,this),this._toggleGroupMembers=o(this._toggleGroupMembers,this),this._syncCurrentUser=o(this._syncCurrentUser,this),this._updateTeam=o(this._updateTeam,this),this._updateCompany=o(this._updateCompany,this),this.findMatchingData=o(this.findMatchingData,this),this.getLinkedUserObject=o(this.getLinkedUserObject,this),this.OnClickPerson=o(this.OnClickPerson,this),this.OnClickAddContact=o(this.OnClickAddContact,this),this.OnClickInviteNewUser=o(this.OnClickInviteNewUser,this),this.OnClickAddUserToProject=o(this.OnClickAddUserToProject,this),this.OnClickFilterButton=o(this.OnClickFilterButton,this),this.OnClickDisplayFollowerOptions=o(this.OnClickDisplayFollowerOptions,this),this.OnChangeGroupFollowStatus=o(this.OnChangeGroupFollowStatus,this),this.OnClickToggleUsersInGroup=o(this.OnClickToggleUsersInGroup,this),this.OnClickGroup=o(this.OnClickGroup,this),this.OnClickSelectNoneInGroup=o(this.OnClickSelectNoneInGroup,this),this.OnClickSelectAllInGroup=o(this.OnClickSelectAllInGroup,this),this.OnClickDeselectItem=o(this.OnClickDeselectItem,this),this.OnClickOpenModal=o(this.OnClickOpenModal,this),this.OnClickInitialOption=o(this.OnClickInitialOption,this),this.OnClickClear=o(this.OnClickClear,this),this.OnHideTipped=o(this.OnHideTipped,this),this.OnShowTipped=o(this.OnShowTipped,this),this.OnRenderedTeamMembers=o(this.OnRenderedTeamMembers,this),this.OnRenderedPicker=o(this.OnRenderedPicker,this),this.OnRenderedPickerHeader=o(this.OnRenderedPickerHeader,this),this.OnShow=o(this.OnShow,this),this.params=t,this.subscriptions=[],this.followOptionsTippedContent=c,this.selectedItemsTippedContent=d,ut=null!=(u=t.tippedOptions)?u:{},this.tippedOptions=JSON.stringify(Object.assign(this.tippedConfig,ut)),this.tippedOptions=this.tippedOptions.substr(1,this.tippedOptions.length-2),this.pickerType=null!=(h=t.pickerType)?h:"responsible",this.format=null!=(C=t.format)?C:"button",this.item=null!=(M=t.item)?M:{},this.value=app.utility.EnsureObservable(null!=(G=t.value)?G:[],!0),this.initialValue=this.value().slice(),this.changeFollowerIds=app.utility.EnsureObservable(null!=(it=t.changeFollowerIds)?it:[],!0),this.commentFollowerIds=app.utility.EnsureObservable(null!=(rt=t.commentFollowerIds)?rt:[],!0),this.itemType=app.utility.EnsureObservable(null!=(lt=t.itemType)?lt:""),this.itemId=app.utility.EnsureObservable(null!=(pt=t.itemId)?pt:0),this.parentType=app.utility.EnsureObservable(null!=(ct=t.parentType)?ct:""),this.parentId=app.utility.EnsureObservable(null!=(m=t.parentId)?m:0),this.projectId=app.utility.EnsureObservable(null!=(f=t.projectId)?f:0),this.privacyIds=app.utility.EnsureObservable(null!=(k=t.privacyIds)?k:[],!0),this.lockdownId=app.utility.EnsureObservable(null!=(g=t.lockdownId)?g:0),this.useModal=app.utility.EnsureObservable(null==(b=t.useModal)||b),this.selectedTab=null!=(v=t.selectedTab)?v:ko.observable("people"),this.currentFilterView=ko.observable(this.selectedTab()),this.uniqueId="w-people-picker-new__"+Date.now(),this.callbacks=null!=(y=t.callbacks)?y:{},this.includeMe=app.utility.EnsureObservable(null!=(x=t.includeMe)&&x),this.projectId()/1>0&&(this.project=app.projectInfo.get(this.projectId())),this.subscriptions.push(this.ssoEnabledAutoStart=ko.pureComputed(function(t){return function(){var t,e;return(null!=(e=app.account.SSO)&&"function"==typeof e.enabled?e.enabled():void 0)&&"SSO automatic-start"===("function"==typeof(t=app.account.SSO).loginStyle?t.loginStyle():void 0)}}())),this.shouldManageData=!1,this.sharedKey=app.utility.EnsureObservable(null!=(w=t.sharedKey)?w:"picker__project"+this.projectId()+"-item"+this.itemType()+this.itemId()),this.subscriptions.push(this.shared=app.shared.get(this.sharedKey())),null==this.shared()&&(this.shouldManageData=!0,this.shared(this)),this.pickerCompanies=ko.observableArray([]),this.pickerTeams=ko.observableArray([]),this.companyStore=this.shouldManageData?ko.observable({}):this.shared().companyStore,this.teamStore=this.shouldManageData?ko.observable({}):this.shared().teamStore,this.shouldInitPickers=this.shouldManageData?ko.observable(!1):this.shared().shouldInitPickers,this.prefetchLoaded=this.shouldManageData?ko.observable(!1):this.shared().prefetchLoaded,this.isLoadingPrefetch=this.shouldManageData?ko.observable(!1):this.shared().isLoadingPrefetch,this.currentUser=this.shouldManageData?{}:this.shared().currentUser,this.currentUserSyncStatus=this.shouldManageData?ko.observable(null):this.shared().currentUserSyncStatus,this.peopleEndpoint=app.utility.EnsureObservable(null!=(I=t.peopleEndpoint)?I:""),this.teamsEndpoint=app.utility.EnsureObservable(null!=(T=t.teamsEndpoint)?T:""),this.prefetchEndpoint=app.utility.EnsureObservable(null!=(O=t.prefetchEndpoint)?O:""),this.getAllUsers=app.utility.EnsureObservable(null==(P=t.getAllUsers)||P),this.initialOptions=app.utility.EnsureObservable(null!=(S=t.initialOptions)?S:[],!0),this.shouldShowDefaultUserIcon=app.utility.EnsureObservable(null!=(j=t.shouldShowDefaultUserIcon)&&j),_=this.initialOptions(),r=0,p=_.length;r<p;r++)i=_[r],A=i.id.toString(),dt=a.call(this.value().map(String),A)>=0,null==i.isSelected&&(i.isSelected=ko.observable(dt));this.shouldFetchData=null!=t.fetchData?t.fetchData:!!(this.prefetchEndpoint().length||this.itemId()>0||"comment"===this.itemType()&&this.parentId()>0),this.subscriptions.push(this.peopleUrl=ko.pureComputed(function(t){return function(){return t.peopleEndpoint().length?t.peopleEndpoint():t._getRelativeEndpoint("people")}}(this))),this.subscriptions.push(this.teamsUrl=ko.pureComputed(function(t){return function(){return t.teamsEndpoint().length?t.teamsEndpoint():t._getRelativeEndpoint("teams")}}(this))),this.showInviteInlineHelp=ko.pureComputed(function(t){return function(){var t;if("function"==typeof app.inlineHelp&&null!=(t=app.inlineHelp())&&"function"==typeof t.show?t.show():void 0)return app.inlineHelp().show("invite")}}()),this.subscriptions.push(this.prefetchUrl=ko.pureComputed(function(t){return function(){return t.prefetchEndpoint().length?t.prefetchEndpoint():t.shouldFetchData&&0===t.itemId()&&0===t.parentId()?"prefetch/people.json?ids="+t.initialValue.toString():t._getRelativeEndpoint("defaults")}}(this))),this.clientSort=new l("people-teams",{sortBy:"picker",sortOrder:"asc",sortOptions:[],sortExtras:{includeCompanyTeams:!0,includeProjectTeams:!0}}),this.visible=null==(F=t.visible)||F,this.showTabs=null==(D=t.showTabs)||D,this.numberOfAvatarsVisible=ko.observable(0),this.hasFocus=app.utility.EnsureObservable(null==(U=t.hasFocus)||U),this.tippedIsVisible=ko.observable(!1),this.showAllNoneOptions=null!=(E=t.showAllNoneOptions)&&E,this.shouldDisplayEmailPreference="project"!==this.itemType()&&("responsible"===(N=this.pickerType)||"followers"===N||"reminders"===N),this.showIncludeMeOption=app.utility.EnsureObservable(null!=(L=t.showIncludeMe)&&L),this.everyBodyText=null!=(R=t.everyBodyText)?R:app.tl("Everybody on the project"),this.showPlaceholder=app.utility.EnsureObservable(null!=($=t.showPlaceholder)&&$),this.placeholderText=app.utility.EnsureObservable(null!=(B=t.placeholderText)?B:""),this.showButtonIcon=null==(V=t.showButtonIcon)||V,this.showMeAtTop=app.utility.EnsureObservable(null!=(K=t.showMeAtTop)&&K),this.buttonIcon=this._getButtonIcon(),this.searchTerm=ko.observable("").extend({rateLimit:{method:"notifyWhenChangesStop",timeout:600}}),this.delayedFilter=ko.observable("").extend({rateLimit:{method:"notifyWhenChangesStop",timeout:600}}),this.hasActiveFilter=app.utility.EnsureObservable(null!=(H=t.hasActiveFilter)&&H),this.isFiltersVisible=app.utility.EnsureObservable(null!=(q=t.isFiltersVisible)&&q),this.showObservers=app.loggedInUser.preferences.itemNotificationsShowObservers,this.showContacts=app.utility.EnsureObservable(null==(W=t.showContacts)||W),this.showCollaborators=app.utility.EnsureObservable(null==(z=t.showCollaborators)||z),this.onlyGlobalTeamsWithProjectMembers=app.utility.EnsureObservable(null!=(Y=t.onlyGlobalTeamsWithProjectMembers)?Y:app.loggedInUser.preferences.onlyGlobalTeamsWithProjectMembers),this.showFilterOptions=null==(J=t.showFilterOptions)||J,this.shouldShowContactsFilter=null!=(Q=t.shouldShowContactsFilter)?Q:this.showFilterOptions,this.shouldShowCollaboratorsFilter=null!=(X=t.shouldShowCollaboratorsFilter)?X:this.showFilterOptions,this.shouldShowGlobalTeamsFilter=this.projectId()/1>0&&this.showTabs,this.showAdvancedFollowerOptions=null!=(Z=t.showAdvancedFollowerOptions)&&Z,this.companyId=app.utility.EnsureObservable(null!=(tt=t.companyId)?tt:0),this.companyName=app.utility.EnsureObservable(null!=(et=t.companyName)?et:""),this.allowInvite=null!=(nt=t.allowInvite)&&nt,this.allowAddContact=null!=(st=t.allowAddContact)&&st,this.allowDynamicSelection=null!=(ot=t.allowDynamicSelection)?ot:"access"!==this.pickerType,this.selectedKey=this._getSelectedKey(),this.companyKey=this._getGroupKey("Company"),this.teamKey=this._getGroupKey("Team"),this.visibleKey=this._getVisibleKey(),this.followersKey=this._getFollowersKey(),"access"!==this.pickerType&&(this.shouldShowContactsFilter=!1,this.shouldShowCollaboratorsFilter=!1),"inline"!==(at=this.format)&&"button"!==at&&"select"!==at&&"notify"!==at&&(this.format="button"),this.showAdvancedFollowerOptions&&"followers"!==this.pickerType&&(this.showAdvancedFollowerOptions=!1),this.itemId(this.itemId()/1),ko.isComputed(this.projectId)||this.projectId(this.projectId()/1),this.parentId(this.parentId()/1),this.lockdownId(this.lockdownId()/1),this.peopleAndCompaniesData=new s(this.peopleUrl,{ItemClass:e,listField:"companies",pageSize:this._calculatePageSize("people"),loadNow:!1,filter:{generateFilterParams:function(e){return function(){return e.shouldInitPickers()?(t={groupByCompany:!0,usePagination:!0},t.includeObservers=e.showObservers(),t.sort="company",t["owner-company-first"]=!0,!e.getAllUsers()&&e.lockdownId()>0&&(t.includeAllUsers=!1),e.searchTerm().trim().length&&(t.searchTerm=e.searchTerm().trim()),t):-1}}(this)},callbackBeforeRender:function(t){return function(e){var n,i,s,o,r,l;for(n=[],o=[],r=t.value().filter(function(t){return"t"!==t.toString()[0]}),i=0,s=r.length;i<s;i++)switch(l=r[i],(""+l)[0]){case"c":n.push(l.replace("c","")/1);break;default:o.push(l/1)}return n=ko.utils.arrayGetDistinctValues(n),o=ko.utils.arrayGetDistinctValues(o),e.forEach(function(e){var i,s,r,l,p,c,d,u,h,m;for(i=null,null!=t.companyStore()[e.id]?(i=t.companyStore()[e.id],t._syncProperties(e,i)):(d=e.id/1,a.call(n,d)>=0&&e[t.selectedKey](!0)),u=e.people(),m=[],r=0,s=u.length;r<s;r++)l=u[r],l[t.selectedKey](!1),l.companyId=e.id,h=l.id/1,a.call(o,h)>=0||!0===e[t.selectedKey]()?(null!=i&&(p=i.people().filter(function(t){return t.id/1==l.id/1}),c=p.length?p[0]:null),null!=c?m.push(t._syncProperties(l,c)):m.push(l[t.selectedKey](!0))):m.push(void 0);return m})}}(this),onLoad:function(t){return function(){return ko.tasks.schedule(function(){return t._syncInitialOptions(),t.pickerCompanies(t.peopleAndCompaniesData.list())})}}(this)}),this.teamsData=new s(this.teamsUrl,{ItemClass:n,listField:"teams",loadNow:!1,pageSize:this._calculatePageSize("teams"),callbackBeforeRender:function(t){return function(e){var n,i;return n=t.value().filter(function(t){return"t"===t.toString()[0]}),i=n.map(function(t){return t.toString().substr(1)/1}),e.forEach(function(e){var n;return null!=t.teamStore()[e.id]?t._syncProperties(e,t.teamStore()[e.id]):(n=e.id/1,a.call(i,n)>=0?e[t.selectedKey](!0):void 0)})}}(this),filter:{generateFilterParams:function(e){return function(){var n,i;return e.shouldInitPickers()?"inline"===e.format&&"teams"!==e.currentFilterView()?-1:(t={usePagination:!0,includeGlobalTeams:!0,includeCompanyTeams:!0,onlyGlobalTeamsWithProjectMembers:!1,includeProjectTeams:!0,includeSubteams:!0,useCaching:!0,sortBy:"picker",sortOrder:"asc"},e.shouldShowGlobalTeamsFilter&&(t.onlyGlobalTeamsWithProjectMembers=e.onlyGlobalTeamsWithProjectMembers()),0!==e.projectId()&&"project"!==(n=e.itemType())&&"projecttemplate"!==n||(t.includeProjectTeams=!1),e.projectId()>0&&("project"===(i=e.itemType())||"projecttemplate"===i)&&(t.isInPrivacyOfProjectId=e.projectId()),e.searchTerm().trim().length&&(t.searchTerm=e.searchTerm().trim()),t):-1}}(this)},onLoad:function(t){return function(){return t._syncInitialOptions(),t.pickerTeams(t.teamsData.list())}}(this)}),this.subscriptions.push(this.filterButtonClass=ko.pureComputed(function(t){return function(){return t.isFiltersVisible()||t.hasActiveFilter()?["btn-primary"]:["btn-white"]}}(this))),this.subscriptions.push(this.projectAdministrator=ko.pureComputed(function(t){return function(){var e;return t.projectId()/1>0&&null!=t.project()&&(null!=(e=t.project())?e.permissions.projectAdministrator():void 0)}}(this))),this.subscriptions.push(this.isLoading=ko.pureComputed(function(t){return function(){return"loading"===t.peopleAndCompaniesData.state()||"loading"===t.teamsData.state()}}(this))),this.subscriptions.push(this.hasLoaded=ko.pureComputed(function(t){return function(){var e,n;return"content"===(e=t.peopleAndCompaniesData.state())||"blank"===e||"content"===(n=t.teamsData.state())||"blank"===n}}(this))),this.subscriptions.push(this.shouldShowLoadingState=ko.pureComputed(function(t){return function(){return!t.hasLoaded()&&(!("button"===t.format&&!t.useModal()&&(t.peopleAndCompaniesData.currentLoadId>0||t.teamsData.currentLoadId>0))&&t.isLoading())}}(this))),this.subscriptions.push(this.shouldShowPeopleBlankSlate=ko.pureComputed(function(t){return function(){return!("people"!==t.currentFilterView()&&!t.tippedIsVisible())&&("blank"===t.peopleAndCompaniesData.state()||"content"===t.peopleAndCompaniesData.state()&&!t.filteredCompanies().length)}}(this))),this.subscriptions.push(this.shouldShowTeamsBlankSlate=ko.pureComputed(function(t){return function(){return!("teams"!==t.currentFilterView()&&!t.tippedIsVisible())&&("blank"===t.teamsData.state()||"content"===t.teamsData.state()&&!t.filteredTeams().length)}}(this))),this.subscriptions.push(this.isFiltered=ko.pureComputed(function(t){return function(){return t.searchTerm().length>0}}(this))),this.subscriptions.push(this.shouldShowItemSelection=ko.pureComputed(function(t){return function(){return!!t.useModal()||t.value().length<=1}}(this))),this.subscriptions.push(this.placeholderLabel=ko.pureComputed(this._getPlaceholderText)),this.subscriptions.push(this.selectedLabel=ko.pureComputed(this._getSelectionAsText)),this.subscriptions.push(this.selectedItems=ko.pureComputed(this._getSelectedItems)),this.subscriptions.push(this.usersBlankSlateTitle=ko.pureComputed(function(t){return function(){return t.isFiltered()?app.tl("No users match your search"):app.tl("No users")}}(this))),this.subscriptions.push(this.teamsBlankSlateTitle=ko.pureComputed(function(t){return function(){return t.isFiltered()?app.tl("No teams match your search"):app.tl("No teams")}}(this))),this.subscriptions.push(this.canInvitePeople=ko.pureComputed(function(t){return function(){return!!t.allowInvite&&(!t.ssoEnabledAutoStart()&&(app.loggedInUser.permissions.canManagePeople()||t.projectAdministrator()&&app.account.allowProjectAdminsCreateUsers()))}}(this))),this.subscriptions.push(this.people=ko.computed(function(t){return function(){var e,n;return e=Object.values(t.companyStore()),0===e.length?[]:1===e.length?e[0].people():(n=e.reduce(function(t,e){return t instanceof Array?t.concat(e.people()):t.people().concat(e.people())}),n.sort(function(t,e){return t.id===app.loggedInUser.id()?-1:e.id===app.loggedInUser.id()?1:0}))}}(this))),this.subscriptions.push(this.filteredTeams=ko.computed(function(t){return function(){var e,n,i,s,o,a,r,l,p;if(i=[],s=[],r=t.searchTerm(),{},"inline"!==t.format&&!t.tippedIsVisible())return[];for(o=t.pickerTeams(),e=0,n=o.length;e<n;e++)l=o[e],p=null!=(a=t.teamStore()[l.id])?a:l,t.compareNames(p.name,r)&&t._checkPrivacy(p,"team")&&s.push(p);return i=t.isFiltered()?s:app.utility.ListToTree(s,"id","parentTeamId"),i=i.sort(t.clientSort.sort)}}(this))),this.subscriptions.push(this.filteredCompanies=ko.computed(function(t){return function(){var e,n,i,s,o,a,r,l,p,c,d,u,h,m,f,k,g,b;if(o={},k=t.searchTerm(),g={},!t.pickerCompanies().length)return[];if("inline"!==t.format&&!t.tippedIsVisible())return[];for(e=t.companyStore(),h=t.pickerCompanies(),a=0,r=h.length;a<r;a++)n=h[a],i=null!=(m=t.companyStore()[n.id])?m:n,c=t.compareNames(i.name,k),t.companyId()/1>0&&n.id/1!=t.companyId()/1&&(c=!1),c&&t._checkPrivacy(i,"company")&&(o[n.id]=i);for(f=t.people(),p=0,l=f.length;p<l;p++)u=f[p],c=null!=o[u.companyId]||t.compareNames(u.name,k),t.showMeAtTop()&&u.isCurrentUser&&(c=!0),t.companyId()/1>0&&u.companyId/1!=t.companyId()/1&&(c=!1),"milestone"===t.itemType()&&u.isCurrentUser&&!t.project().member()&&(c=!1),("contact"===u.type&&!t.showContacts()||"collaborator"===u.type&&!t.showCollaborators())&&(c=!1),c&&t._checkPrivacy(u,"person")&&(null==g[d=u.companyId]&&(g[d]=[]),g[u.companyId].push(u)),("inline"===t.format||t.tippedIsVisible())&&u[t.visibleKey](c);for(s in g)null==o[s]&&(o[s]=e[s]);return b=Object.values(o).filter(function(t){return null!=t}),b.sort(function(t,e){return t.id/1==app.account.companyid()/1?-1:e.id/1==app.account.companyid()/1?1:t.name.localeCompare(e.name)})}}(this))),this.subscriptions.push(this.selectedIds=ko.pureComputed(function(t){return function(){var e,n,i,s,o,a,r,l,p,c,d,u,h,m,f;for(e=[],c=t.initialOptions(),s=0,o=c.length;s<o;s++)l=c[s],l.isSelected()&&e.push(l.id);d=t.teamStore();for(i in d)f=d[i],t._checkPrivacy(f,"team")&&t._checkIfItemIsSelected(f)&&e.push("t"+f.id);u=t.companyStore();for(i in u)if(n=u[i],t._checkIfItemIsSelected(n))t._checkPrivacy(n,"company")?e.push("c"+n.id):(m=n.people().filter(function(e){return e[t.companyKey]()&&t._checkPrivacy(e,"person")}),m.length&&e.push("c"+n.id));else for(h=n.people(),r=0,a=h.length;r<a;r++)p=h[r],p[t.companyKey]()||p[t.teamKey]()||t._checkPrivacy(p,"person")&&t._checkIfItemIsSelected(p)&&e.push(p.id);return e}}(this))),this.subscriptions.push(this.selectedTeamsCount=ko.pureComputed(function(t){return function(){return t.selectedIds().filter(function(t){return t.toString().includes("t")}).length}}(this))),this.subscriptions.push(this.selectedPeopleCount=ko.pureComputed(function(t){return function(){return t.selectedIds().filter(function(t){return!t.toString().includes("t")}).length}}(this))),this.subscriptions.push(this.selectedChangeFollowerIds=ko.pureComputed(function(t){return function(){var e,n,i,s,o,a,r,l,p,c;e=[],r=t.teamStore();for(i in r)c=r[i],c.isFollowingChanges()&&e.push("t"+c.id);l=t.companyStore();for(i in l)if(n=l[i],n.isFollowingChanges())e.push("c"+n.id);else for(p=n.people(),s=0,o=p.length;s<o;s++)a=p[s],a.isFollowingChanges()&&e.push(a.id);return e}}(this))),this.subscriptions.push(this.selectedCommentFollowerIds=ko.pureComputed(function(t){return function(){var e,n,i,s,o,a,r,l,p,c;e=[],r=t.teamStore();for(i in r)c=r[i],c.isFollowingComments()&&e.push("t"+c.id);l=t.companyStore();for(i in l)if(n=l[i],n.isFollowingComments())e.push("c"+n.id);else for(p=n.people(),s=0,o=p.length;s<o;s++)a=p[s],a.isFollowingComments()&&e.push(a.id);return e}}(this))),this.subscriptions.push(this.selectedTab.subscribe(function(t){return function(e){return ko.tasks.schedule(function(){return t.currentFilterView(e)})}}(this))),this.subscriptions.push(this.pickerTeams.subscribe(this._syncTeamStore)),this.subscriptions.push(this.pickerCompanies.subscribe(this._syncCompanyStore)),this._isSyncingChanges=!1,this.subscriptions.push(this.selectedIds.subscribe(function(t){return function(e){if(t._isSyncingChanges)return!1;if((e.length||Object.keys(t.teamStore()).length||Object.keys(t.companyStore()).length)&&(t._calculateSpaceForAvatars(),!app.utility.AreEqual(e,t.value())))return t.value(e),"followers"!==t.pickerType?ko.tasks.schedule(function(){return t._fireCallback("change")}):void 0}}(this))),"followers"===this.pickerType&&(this.subscriptions.push(this.selectedChangeFollowerIds.subscribe(function(t){return function(e){return t._fireCallback("change")}}(this))),this.subscriptions.push(this.selectedCommentFollowerIds.subscribe(function(t){return function(e){return t._fireCallback("change")}}(this)))),this.subscriptions.push(this.selectedChangeFollowerIds.subscribe(this.changeFollowerIds)),this.subscriptions.push(this.selectedCommentFollowerIds.subscribe(this.commentFollowerIds)),this.subscriptions.push(this.privacyIds.subscribe(this._setPrivacy)),this.subscriptions.push(this.value.subscribe(function(t){return function(e){var n,i,s,o,r,l,p,c,d,u,h,m,f,k,g,b,v,y,x,w,I,C,T,O,P,S;if(!t.isLoading()&&!app.utility.AreEqual(e,t.selectedIds())){for(t._isSyncingChanges=!0,P=[],n=[],m=[],r=0,l=e.length;r<l;r++)switch(S=e[r],S=S.toString(),(""+S)[0]){case"t":P.push(S.replace("t","")/1);break;case"c":n.push(S.replace("c","")/1);break;default:m.push(S/1)}for(g=t.initialOptions(),d=0,p=g.length;d<p;d++)h=g[d],h.isSelected((b=h.id/1,a.call(m,b)>=0));v=t.teamStore();for(o in v)T=v[o],y=T.id/1,O=a.call(P,y)>=0,T[t.selectedKey]()!==O&&(T[t.selectedKey](O),t._updateTeam(T));x=t.companyStore();for(o in x)i=x[o],w=i.id/1,s=a.call(n,w)>=0,i[t.selectedKey]()!==s&&(i[t.selectedKey](s),t._updateCompany(i));for(I=t.people(),u=0,c=I.length;u<c;u++)f=I[u],f[t.teamKey]()||f[t.companyKey]()||(C=f.id/1,k=a.call(m,C)>=0,f[t.selectedKey](k));return ko.tasks.schedule(function(){return t._syncTeamStore(),t._syncCompanyStore(),t._isSyncingChanges=!1})}}}(this))),this._syncTeamStore(),this._syncCompanyStore(),this._getSharedProperties(),this._fetchInitialData("inline"===this.format),this._initMentionsListener(),app.InitOnShow(this)}return t.prototype.tippedConfig={showOn:"click",skin:"light",hideOn:!1,hideOnClickOutside:!0,containment:{selector:".tipped-container"},position:{target:"bottomleft",tooltip:"topleft"},offset:{y:1},voila:!1,padding:!1,shadow:!1,stem:!1},t.prototype.OnShow=function(t){return app.FocusFirstInput(t)},t.prototype.OnRenderedPickerHeader=function(){setTimeout(function(t){return function(){return t._calculateSpaceForAvatars()}}(this),100)},t.prototype.OnRenderedPicker=function(){setTimeout(function(t){return function(){return app.FocusFirstInput(t.uniqueId)}}(this),300)},t.prototype.OnRenderedTeamMembers=function(t){if(!t.membersLoaded)return this._persistRemainingTeamMembers(t)},t.prototype.OnShowTipped=function(){return this.tippedIsVisible(!0),this.loadData()},t.prototype.OnHideTipped=function(){return this.searchTerm(""),this.tippedIsVisible(!1)},t.prototype.OnClickClear=function(){return this.value([])},t.prototype.OnClickInitialOption=function(t){if(t.isSelected(!t.isSelected()),this._shouldPreventMultiselect())return ko.tasks.schedule(function(e){return function(){return e.value([ko.unwrap(t.id)]),e._hideTip()}}(this))},t.prototype.OnClickOpenModal=function(t){var e,n,i;if(null==t&&(t=!1),"boolean"==typeof t&&t||(this.tippedIsVisible()&&this._hideTip(10),this.useModal()))return e=this.value(),n=function(){switch(this.pickerType){case"privacy":return app.tl("Set Privacy");case"responsible":return app.tl("Choose Assignees");case"access":case"reminders":return app.tl("Choose People");default:return app.tl("Choose Followers")}}.call(this),i=function(t){return function(n){n.wasCancelled&&t.value(e),t._fireCallback("close",{wasCancelled:n.wasCancelled})}}(this),app.modal.Show("itemNotifications",{type:this.pickerType,pickerType:this.pickerType,parentItem:this.item,itemType:this.itemType(),itemId:this.itemId(),parentType:this.parentType(),parentId:this.parentId(),projectId:this.projectId(),companyId:this.companyId(),privacyIds:this.privacyIds(),lockdownId:this.lockdownId(),peopleEndpoint:this.peopleEndpoint,teamsEndpoint:this.teamsEndpoint,value:this.value,autoSave:!1,stack:!0,title:n,initialOptions:this.initialOptions,onCloseCallBack:i,showFilterOptions:this.showFilterOptions,showTabs:this.showTabs,sharedKey:this.sharedKey})},t.prototype.OnClickDeselectItem=function(t,e){var n,i;if(null!=(n=null!=(i=t.linkedItem)?i:null))return this.showAdvancedFollowerOptions?(n.shouldShowFollowerOptions(!1),n.isFollowingChanges(!1),n.isFollowingComments(!1)):n[this.selectedKey](!1),"team"===t.type?this._updateTeam(n):"company"===t.type&&this._updateCompany(n),setTimeout(function(){return Tipped.refresh(),Tipped.hide(".tipped-hide")},150)},t.prototype.OnClickSelectAllInGroup=function(t){var e;return this.checkIfGroupIsCollapsed(t)&&("team"===t.pickerItemType&&(t.membersLoaded||(t.shouldPreselectMembers=!0)),this.OnClickToggleUsersInGroup(t)),"company"===t.pickerItemType&&this.peopleAndCompaniesData.currentPaginator().page()<this.peopleAndCompaniesData.currentPaginator().pages()&&(e=this.filteredCompanies()[this.filteredCompanies().length-1],e.id/1==t.id/1&&(t.membersLoaded||(t.shouldPreselectMembers=!0),this._persistRemainingCompanyMembers(t))),this._toggleGroupMembers(t,!0)},t.prototype.OnClickSelectNoneInGroup=function(t){return this._toggleGroupMembers(t,!1)},t.prototype.OnClickGroup=function(t){var e,n;return!!this.allowDynamicSelection&&(this.showAdvancedFollowerOptions?this.OnClickDisplayFollowerOptions(t):(e=t[this.selectedKey],n=e(),e(!n),"team"===t.pickerItemType?this._updateTeam(t):"company"===t.pickerItemType&&this._updateCompany(t),this._shouldPreventMultiselect()&&ko.tasks.schedule(function(e){return function(){var n;return n=""+t.pickerItemType.toLowerCase()[0]+t.id,e.value([n]),e._hideTip()}}(this)),!0))},t.prototype.OnClickToggleUsersInGroup=function(t){var e;return(e=function(){switch(this.pickerType){case"access":case"reminders":return t.membersCollapsed;case"responsible":return t.assigneesCollapsed;case"privacy":return t.privacyCollapsed;case"followers":return this.showAdvancedFollowerOptions?t.followersCollapsed:"isFollowingComments"===this.followersKey?t.commentFollowersCollapsed:t.changeFollowersCollapsed}}.call(this))(!e())},t.prototype.OnChangeGroupFollowStatus=function(t,e){if("team"===t.pickerItemType)return this._updateTeam(t)},t.prototype.OnClickDisplayFollowerOptions=function(t){var e,n,i,s;if(t.shouldShowFollowerOptions(!t.shouldShowFollowerOptions()),e="team"===(n=t.pickerItemType)||"company"===n,t.shouldShowFollowerOptions()){if(t.isFollowingChanges()||t.isFollowingChanges(!0),!t.isFollowingComments())return t.isFollowingComments(!0)}else i=!0,s=!0,e||((t.isInCompanyChangeFollowers()||t.isInTeamChangeFollowers())&&(i=!1),(t.isInCompanyCommentFollowers()||t.isInTeamCommentFollowers())&&(s=!1)),i&&t.isFollowingChanges(!1),s&&t.isFollowingComments(!1)},t.prototype.OnClickFilterButton=function(){this.isFiltersVisible(!this.isFiltersVisible())},t.prototype.OnClickAddUserToProject=function(){if(this.allowInvite&&this.projectAdministrator())return app.modal.Show("addPeopleToProject",{project:this.project()})},t.prototype.OnClickInviteNewUser=function(){var t;if(this.canInvitePeople())return t=function(t){return function(t){t.wasCancelled}}(),app.modal.Show("inviteNewUsers",{stack:!0,hideProjectsStep:!0,companyId:this.companyId,companyName:this.companyName,projectId:this.projectId(),onCloseCallBack:t})},t.prototype.OnClickAddContact=function(){var t;if(this.canInvitePeople())return t=function(t){return function(t){t.wasCancelled}}(),app.modal.Show("addOrEditPerson",{stack:!0,type:"contact",onCloseCallBack:t})},t.prototype.OnClickPerson=function(t){var e,n,i,s,o,a;if(this.showAdvancedFollowerOptions)return this.OnClickDisplayFollowerOptions(t);if(t[this.teamKey]()&&!this._shouldPreventMultiselect())return!1;if(n=t[this.selectedKey],i=n(),n(!i),t[this.companyKey]()&&!n())for(a=Object.values(this.companyStore()),s=0,o=a.length;s<o;s++)if(e=a[s],e.id.toString()===t.companyId.toString()){e[this.selectedKey](!1),this._updateCompany(e);break}return this._shouldPreventMultiselect()&&ko.tasks.schedule(function(e){return function(){return e.value([t.id]),e._hideTip()}}(this)),!1},t.prototype.getLinkedUserObject=function(t){var e,n;return n=ko.unwrap(t.id)/1,e=this.people().filter(function(t){return ko.unwrap(t.id)/1===n}),e.length?e[0]:null},t.prototype.findMatchingData=function(t){var i;return i=function(t){return function(i){var s,o,r,l,p,c,d,u,h,m,f,k,g,b,v,y,x,w,I,C,T;for(null!=(v=i.response.defaults)?v:{},T=null!=(y=i.response.teams)?y:[],s=null!=(x=i.response.companies)?x:[],b=null!=(w=i.response.people)?w:[],C=s.map(function(t){return t.id/1}),p=0,d=b.length;p<d;p++)g=b[p],g.isInNotifyDefaults&&0===t.itemId()&&(g.isFollowingComments=!0),r=g.companyId/1,a.call(C,r)>=0||(l={id:r,name:g.companyName},g.isInCompanyPrivacy&&(l.isInPrivacy=!0),s.push(l),C.push(r));for(c=0,u=s.length;c<u;c++)for(o=s[c],null==o.people&&(o.people=b.filter(function(t){return t.companyId/1==o.id/1})),I=o.people,m=0,h=I.length;m<h;m++)g=I[m],g.companyId=o.id/1;if(f=s.map(function(t){return new e(t)}),k=T.map(function(t){return new n(t)}),f.length&&t._syncCompanyStore(f),k.length)return t._syncTeamStore(k)}}(this),null==this.filterSubscription&&(this.filterSubscription=this.delayedFilter.subscribe(function(t){return function(e){var n,s;return n=Object.assign({},t.peopleAndCompaniesData.filterParams()),n.searchTerm=e,n.accessList=t.privacyIds().toString(),app.api.get(t.peopleUrl(),n).then(i),s=Object.assign({},t.teamsData.filterParams()),s.searchTerm=e,s.accessList=t.privacyIds().toString(),app.api.get(t.teamsUrl(),s).then(i)}}(this)),this.subscriptions.push(this.filterSubscription)),this.delayedFilter(t)},t.prototype._updateCompany=function(t){var e,n,i,s,o;if(!this.allowDynamicSelection)return!1;for(e=t[this.selectedKey](),o=t.people(),n=0,i=o.length;n<i;n++)s=o[n],s[this.companyKey](e),s[this.teamKey]()||s[this.selectedKey](e),this.showAdvancedFollowerOptions&&(s.isInTeamChangeFollowers()||s.isInTeamCommentFollowers()||s.shouldShowFollowerOptions(t.shouldShowFollowerOptions()));return!1},t.prototype._updateTeam=function(t){var e,n,i,s,o,l,p,c,d,u,h;if(!this.allowDynamicSelection)return!1;for(d={isFollowingChanges:"isInTeamChangeFollowers",isFollowingComments:"isInTeamCommentFollowers",isResponsible:"isInTeamAssignees",isInPrivacy:"isInTeamPrivacy",isReminded:"isInTeamReminder",shouldShowFollowerOptions:"shouldShowFollowerOptions",hasAccess:"isInTeamAccess"},this.showAdvancedFollowerOptions?h={isFollowingChanges:t.isFollowingChanges(),isFollowingComments:t.isFollowingComments(),shouldShowFollowerOptions:t.isFollowingChanges()||t.isFollowingComments()}:(h={},h[""+this.selectedKey]=t[this.selectedKey]()),u=t.people().map(function(t){return t.id}),n=function(t){return function(e){var n,i,s,o,r,l,p,c,d,u,h,m;if(null==e&&(e={}),n=!1,m=null!=(l=e.userId)?l:0,i=null!=(p=e.ignoreTeamId)?p:0,u=null!=(c=e.selectionKey)?c:"",0===m||!u.length)return!1;if(d=Object.values(t.teamStore()).filter(function(e){if(null!=e[u])return!(!t._checkIfIsPublic()&&!e.isInPrivacy())&&(e[u]()&&e.id!==i)}),!d.length)return!1;for(s=0,o=d.length;s<o;s++)if(h=d[s],r=h.people().map(function(t){return t.id}),a.call(r,m)>=0){n=!0;break}return n}}(this),l=this.people(),i=0,s=l.length;i<s;i++)if(o=l[i],p=o.id,a.call(u,p)>=0)for(c in h)r.call(h,c)&&(e=h[c],e?(o[c](!0),o[d[c]](!0)):n({userId:o.id,ignoreTeamId:t.id,selectionKey:c})||(o[c]()&&o[c](!1),o[d[c]]()&&o[d[c]](!1)));return!1},t.prototype._syncCurrentUser=function(){var t,n,s,o,a,r;if("synced"!==this.currentUserSyncStatus()){if(n=[],t=this.companyStore()[app.loggedInUser.companyId()],null!=t&&(n=t.people().filter(function(t){return t.id.toString()===app.loggedInUser.id().toString()})),n.length)return this.currentUser=n[0],void this.currentUserSyncStatus("synced");a={id:app.loggedInUser.companyId(),name:app.loggedInUser.companyName(),people:[]},o={id:app.loggedInUser.id(),firstName:app.loggedInUser.firstName(),lastName:app.loggedInUser.lastName(),avatarUrl:app.loggedInUser.avatarUrl(),isAdministrator:app.loggedInUser.administrator(),type:app.loggedInUser.userType(),companyId:app.loggedInUser.companyId()},o[""+this.selectedKey]=app.loggedInUser.isSelected(),o[""+this.companyKey]=!1,r=o,null!=t&&(!0===t.hasAccess()&&(r[this.selectedKey]=!0),r[this.companyKey]=this._checkIfItemIsSelected(t)),null==t&&(t=new e(a),this.companyStore()[app.loggedInUser.companyId()]=t),s=new i(r),t.people().push(s),this.currentUser=s,this.currentUserSyncStatus("temp")}},t.prototype._toggleGroupMembers=function(t,e){var n,i,s,o,r,l,p,c,d,u,h;switch(u=t.pickerItemType){case"team":for(h=t.people().map(function(t){return t.id}),p=this.people(),i=0,o=p.length;i<o;i++)l=p[i],c=l.id,a.call(h,c)>=0&&l[this.selectedKey](e);break;case"company":for(n=t.id,d=this.people().filter(function(t){return t.isVisible()}),s=0,r=d.length;s<r;s++)l=d[s],l.companyId/1==n/1&&l[this.selectedKey](e)}return e||(t[this.selectedKey](e),"team"===u&&this._updateTeam(t)),this._fireCallback("groupClick",{group:t,type:u,setting:e})},t.prototype._syncTeamStore=function(t){var e,n,i,s;for(null==t&&(t=this.pickerTeams()),e=!1,n=0,i=t.length;n<i;n++)s=t[n],this.teamStore()[s.id]||(e=!0,this.teamStore()[s.id]=s);return e&&this.teamStore.valueHasMutated()},t.prototype._syncCompanyStore=function(t,e){var n,i,s,o,r,l,p,c,d,u,h;for(null==e&&(e=!0),null==t&&(t=this.pickerCompanies()),o=0,l=t.length;o<l;o++){for(n=t[o],i=null,c=[],s=[],null!=this.companyStore()[n.id]&&(i=this.companyStore()[n.id],c=i.people().slice(),s=c.map(function(t){return t.id/1})),u=n.people(),r=0,p=u.length;r<p;r++)d=u[r],h=d.id/1,a.call(s,h)<0&&c.push(d);n.people(c),this.companyStore()[n.id]=n}if(t.length&&this._syncCurrentUser(),e)return this.companyStore.valueHasMutated()},t.prototype._syncProperties=function(t,e){var n,i,s,o,a,r;if(null!=t&&null!=e){for(o=["isInPrivacy","isResponsible","isFollowingChanges","isFollowingComments","isInNotifyDefaults","isReminded","hasAccess","isInTeamPrivacy","isInTeamAssignees","isInTeamChangeFollowers","isInTeamCommentFollowers","isInTeamReminder","isInTeamAccess","isInTeamSelection","isInCompanyPrivacy","isInCompanyAssignees","isInCompanyChangeFollowers","isInCompanyCommentFollowers","IsInCompanyReminder","isInCompanyAccess","isInCompanySelection","membersCollapsed","assigneesCollapsed","privacyCollapsed","followersCollapsed","commentFollowersCollapsed","changeFollowersCollapsed","isVisibleInAssignees","isVisibleInPrivacy","isVisibleInFollowers","isVisible"],a=[],n=0,s=o.length;n<s;n++)i=o[n],null!=e[i]&&null!=t[i]&&ko.isObservable(t[i])?(r=ko.unwrap(e[i]),a.push(t[i](r))):a.push(void 0);return a}},t.prototype._fetchInitialData=function(t){var i,s;if(null==t&&(t=!1),!t){if(!this.shouldManageData)return;if(this.isLoading())return}return this.shouldFetchData?this.prefetchLoaded()||this.isLoadingPrefetch()?this.loadData():(this.isLoadingPrefetch(!0),s={removeMeFromNotify:!0},i=[],app.api.get(this.prefetchUrl(),s).then(function(t){return function(s){var o,a,r,l,p,c,d,u,h,m,f,k,g,b,v,y,x,w,I,C,T,O,P,S,j,_,A,F;for(l=null!=(C=s.response.defaults)?C:{},F=null!=(T=s.response.teams)?T:[],o=null!=(O=s.response.companies)?O:[],x=null!=(P=s.response.people)?P:[],_=t.shouldFetchData&&t.initialValue.length&&0===t.itemId(),null==l.inPrivacy&&(l.inPrivacy=""),I=app.utility.ConvertToArray(l.inPrivacy,!1,!0),i=I.slice(),j=o.reduce(function(t,e){return t[~~e.id]=!0,t},{}),p=t.initialValue.reduce(function(t,e){return t[e]=!0,t},{}),c=0,u=x.length;c<u;c++)y=x[c],y.isInNotifyDefaults&&0===t.itemId()&&(y.isFollowingComments=!0),_&&p[y.id]&&(y[t.selectedKey]=!0),r=y.companyId/1,j[r]||(o.push({id:r,name:y.companyName}),j[r]=!0);for(d=0,h=o.length;d<h;d++)if(a=o[d],null==a.people&&(a.people=x.filter(function(t){return t.companyId/1==a.id/1})),_&&p["c"+a.id])for(a[t.selectedKey]=!0,S=a.people,k=0,m=S.length;k<m;k++)w=S[k],w[t.companyKey]=a[t.selectedKey];if(_)for(v=0,f=F.length;v<f;v++)A=F[v],p["t"+A.id]&&(A[t.selectedKey]=!0);if(g=o.map(function(t){return new e(t)}),b=F.map(function(t){return new n(t)}),g.length&&t._syncCompanyStore(g),b.length&&t._syncTeamStore(b),"privacy"===t.pickerType&&!t.value().length&&!_)return t.value(I)}}(this)).finally(function(t){return function(){if(t.prefetchLoaded(!0),t.isLoadingPrefetch(!1),ko.tasks.schedule(function(){return t._fireCallback("prefetch",{initialPrivacyIds:i})}),"inline"===t.format)return t.loadData()}}(this))):this.loadData()},t.prototype._persistRemainingCompanyMembers=function(t){var e;return e={getAll:!0},this.projectId()>0&&(e.projectId=this.projectId()),t.isLoadingMembers(!0),ko.tasks.schedule(function(n){return function(){return app.api.get("companies/"+t.id+"/people.json",e).then(function(e){var s,o,r,l,p,c,d,u,h,m;for(c=null!=(h=e.response.people)?h:[],o=n.value().slice(),s=t.people().map(function(t){return t.id/1}),d=c.filter(function(t){var e;return e=t.id/1,!(a.call(s,e)>=0)}),r=0,l=d.length;r<l;r++)u=d[r],m="c"+u.companyId,a.call(o.map(String),m)>=0&&(u[n.companyKey]=!0),t[n.selectedKey]()&&(u[n.companyKey]=!0),t.shouldPreselectMembers&&!t[n.selectedKey]()&&(u[n.selectedKey]=!0),p=new i(u),t.people().push(p);return ko.tasks.schedule(function(){return n._syncCompanyStore([t],!0)})}).finally(function(){return t.isLoadingMembers(!1),t.membersLoaded=!0})}}(this))},t.prototype._persistRemainingTeamMembers=function(t){var n;return n={getAll:!0},this.projectId()>0&&(n.projectId=this.projectId()),this.companyId()>0&&(n.companyIds=this.companyId()),t.isLoadingMembers(!0),ko.tasks.schedule(function(s){return function(){return app.api.get("teams/"+t.id+"/people.json",n).then(function(n){var o,r,l,p,c,d,u,h,m,f,k,g,b,v,y,x,w;for(k=null!=(b=n.response.people)?b:[],d=s.value().slice(),o=Object.values(s.companyStore()),r=Object.keys(s.companyStore()).map(Number),u=0,m=k.length;u<m;u++)g=k[u],v="c"+g.companyId,a.call(d.map(String),v)>=0&&(g[s.companyKey]=!0),t[s.selectedKey]()&&(g[s.teamKey]=!0),t.shouldPreselectMembers&&!t[s.selectedKey]()&&(g[s.selectedKey]=!0),y=g.companyId/1,a.call(r,y)>=0||(x=new e({id:g.companyId,name:g.companyName,people:[]}),o.push(x));for(l=[],h=0,f=o.length;h<f;h++)p=o[h],c=p.people().map(function(t){return ko.unwrap(t.id)/1}),w=k.filter(function(t){var e;return e=t.id/1,!(a.call(c,e)>=0)&&t.companyId/1==p.id/1}),w.length&&(w.forEach(function(t){var e;return e=new i(t),p.people().push(e)}),l.push(p));return ko.tasks.schedule(function(){return s._syncCompanyStore(l,!1)})}).finally(function(){var e;return t.isLoadingMembers(!1),t.membersLoaded=!0,e=t.members().sort(function(t,e){var n,i;return n=s.getLinkedUserObject(t),i=s.getLinkedUserObject(e),null!=n&&null!=i?n.fullName.localeCompare(i.fullName):0}),t.members(e)})}}(this))},t.prototype._getSelectedItems=function(){return this._getItemsFromStore(this.selectedIds())},t.prototype._getChangeFollowers=function(){return this._getItemsFromStore(this.selectedChangeFollowerIds())},t.prototype._getCommentFollowers=function(){return this._getItemsFromStore(this.selectedCommentFollowerIds())},t.prototype._getItemsFromStore=function(t){var e,n,i,s,o;if(i=[],!(null!=t?t.length:void 0))return[];for(s=0,o=t.length;s<o;s++)switch(n=t[s],n=n.toString(),n.toString()[0]){case"t":e=Object.values(this.teamStore()).filter(function(t){return"t"+t.id===n}),(null!=e?e.length:void 0)&&i.push({label:e[0].name,type:"team",id:e[0].id,linkedItem:e[0],img:e[0].GetLogo(["u-team-logo--tiny"]),listImg:e[0].GetLogo(["u-team-logo--list"])});break;case"c":e=Object.values(this.companyStore()).filter(function(t){return"c"+t.id===n}),(null!=e?e.length:void 0)&&i.push({label:e[0].name,type:"company",id:e[0].id,linkedItem:e[0],img:e[0].logoUrl,defaultImg:"./tko/public/assets/svg/company-regular.svg"});break;default:e=this.people().filter(function(t){return""+t.id===n}),(null!=e?e.length:void 0)&&i.push({label:e[0].fullName,type:"user",id:e[0].id,linkedItem:e[0],img:e[0].avatarUrl,defaultImg:"./images/noPhoto2.png"})}return i},t.prototype._checkPrivacy=function(t,e){if(null==e&&(e="person"),this._checkIfIsPublic())return!0;if("privacy"===this.pickerType)return!0;if("access"===this.pickerType)return!0;switch(e){case"person":return t.isInPrivacy()||t.isInCompanyPrivacy()||t.isInTeamPrivacy();case"company":case"team":return t.isInPrivacy()}},t.prototype._setPrivacy=function(t){var e,n,i,s,o,r,l,p,c,d,u,h,m,f;for(t=app.utility.ConvertToArray(t).map(String),f=[],l=Object.values(this.teamStore()),n=0,s=l.length;n<s;n++)h=l[n],h.isInPrivacy((p="t"+h.id,a.call(t,p)>=0)),h.isInPrivacy()?f.push.apply(f,h.people().map(function(t){return t.id.toString()})):this._checkIfIsPublic(t)||(h.isResponsible(!1),h.isFollowingChanges(!1),h.isFollowingComments(!1));for(c=Object.values(this.companyStore()),u=[],i=0,o=c.length;i<o;i++)e=c[i],e.isInPrivacy((d="c"+e.id,a.call(t,d)>=0)),u.push(function(){var n,i,s,o;for(s=e.people(),o=[],i=0,n=s.length;i<n;i++)r=s[i],m=""+r.id,r.isInCompanyPrivacy(e.isInPrivacy()),r.isInPrivacy(a.call(t,m)>=0||e.isInPrivacy()),r.isInTeamPrivacy(a.call(f,m)>=0),this._checkIfIsPublic(t)||r.isInTeamPrivacy()?o.push(void 0):(r.isInTeamAssignees(!1),r.isInTeamChangeFollowers(!1),o.push(r.isInTeamCommentFollowers(!1)));return o}.call(this));return u},t.prototype.loadData=function(){var t;(t=this.shouldInitPickers())||this.shouldInitPickers(!0)},t.prototype._hideTip=function(t){return null==t&&(t=0),setTimeout(function(t){return function(){return Tipped.hide("#"+t.uniqueId+"__button")}}(this),t)},t.prototype._calculatePageSize=function(t){return null==t&&(t="people"),null!=this.params.pageSize?ko.unwrap(this.params.pageSize):"button"===this.format&&this.useModal()&&"teams"===t?25:50},t.prototype._calculateSpaceForAvatars=function(){var t,e,n,i;if(10,t=32,!(this._avatarSpaceIsCalculated&&this.numberOfAvatarsVisible()>0))return n=document.querySelector("#"+this.uniqueId),null!=n?(i=n.clientWidth,e=Math.round(i/t),e>0?(this.numberOfAvatarsVisible(e),this._avatarSpaceIsCalculated=!0):this.numberOfAvatarsVisible(10)):this.numberOfAvatarsVisible(10)},t.prototype._shouldPreventMultiselect=function(){return!this.useModal()&&this.tippedIsVisible()},t.prototype._getButtonIcon=function(){switch(this.pickerType){case"responsible":case"access":return"user-regular";case"privacy":return"lock-regular";case"followers":return"messages-regular";case"reminders":return"notifications-regular"}},t.prototype._getPlaceholderText=function(){return this.showPlaceholder()&&this.placeholderText().length?this.placeholderText():this.allowDynamicSelection&&this.showTabs?app.tl("Choose from people, teams and companies"):this.allowDynamicSelection?app.tl("Choose from people and companies"):app.tl("Choose people")},t.prototype._getSelectionAsText=function(){var t,e,n,i,s,o,a,r;if(o=[],this.isLoading())return app.tl("Loading");if(!this.selectedIds().length||1===this.selectedIds().length&&"0"===this.selectedIds()[0]){if("0"===this.selectedIds().toString()&&(t=this.initialOptions().filter(function(t){return"0"===t.id.toString()}),t.length))return t[0].text;switch(this.pickerType){case"privacy":return this.everyBodyText;case"responsible":case"access":case"reminders":return this.allowDynamicSelection?app.tl("Choose people or teams"):app.tl("Choose people");case"followers":return app.tl("Nobody")}}for(r=this.selectedIds(),s=0,a=r.length;s<a;s++)switch(i=r[s],i=i.toString(),i.toString()[0]){case"t":e=Object.values(this.teamStore()).filter(function(t){return"t"+t.id===i}),(null!=e?e.length:void 0)&&o.push(e[0].name);break;case"c":e=Object.values(this.companyStore()).filter(function(t){return"c"+t.id===i}),(null!=e?e.length:void 0)&&o.push(e[0].name);break;default:n=this.initialOptions().filter(function(t){return t.id/1==i/1}),(null!=n?n.length:void 0)&&o.push(n[0].text),e=this.people().filter(function(t){return""+t.id===i}),(null!=e?e.length:void 0)&&o.push(e[0].fullName)}return app.utility.GetLabelsAsList(o)},t.prototype._fireCallback=function(t,e){var n;if(null==e&&(e={}),null!=this.callbacks[t]&&"function"==typeof this.callbacks[t])return n={eventName:t,pickerType:this.pickerType,value:this.selectedIds(),selectedItems:this._getSelectedItems(),people:this.people(),teams:Object.values(this.teamStore()),eventData:e},"followers"!==this.pickerType&&"prefetch"!==t||(n.changeFollowers=this._getChangeFollowers(),n.commentFollowers=this._getCommentFollowers()),this.callbacks[t](n)},t.prototype.compareNames=function(t,e){return!e.length||(t=p.removeDiacritics(t),e=p.removeDiacritics(e),t.toLowerCase().includes(e.toLowerCase()))},t.prototype._initMentionsListener=function(){if("followers"===this.pickerType)return this.subscriptions.push(ko.postbox.subscribe(this.sharedKey()+"-mention",function(t){return function(e){var n;switch(e.type){case"user":if(n=t.people().filter(function(t){return t.id.toString()===e.id.toString()}),!(null!=n?n.length:void 0))return;return n[0][t.selectedKey](!0);case"team":if(n=Object.values(t.teamStore()).filter(function(t){return t.id.toString()===e.id.toString()}),!(null!=n?n.length:void 0))return;return n[0][t.selectedKey](!0);case"company":if(n=Object.values(t.companyStore()).filter(function(t){return t.id.toString()===e.id.toString()}),!(null!=n?n.length:void 0))return;return n[0][t.selectedKey](!0);case"role":return console.info("Role mention: not implemented yet")}}}(this)))},t.prototype._checkIfItemIsSelected=function(t){return this.showAdvancedFollowerOptions?t.isFollowingChanges()||t.isFollowingComments():t[this.selectedKey]()},t.prototype._getSelectedKey=function(){var t;switch(this.pickerType){case"privacy":return"isInPrivacy";case"responsible":return"isResponsible";case"access":return"hasAccess";case"reminders":return"isReminded";case"followers":return"comment"===(t=this.itemType())||"message"===t?"isFollowingComments":"isFollowingChanges"}},t.prototype._getVisibleKey=function(){switch(this.pickerType){case"privacy":return"isVisibleInPrivacy";case"responsible":return"isVisibleInAssignees";case"followers":return"isVisibleInFollowers";default:return"isVisible"}},t.prototype._getFollowersKey=function(){switch(this.itemType()){case"comment":case"message":return"isFollowingComments";default:return"isFollowingChanges"}},t.prototype._getGroupKey=function(t){var e;switch(null==t&&(t="Company"),this.pickerType){case"privacy":return"isIn"+t+"Privacy";case"responsible":return"isIn"+t+"Assignees";case"access":return"isIn"+t+"Access";case"reminders":return"isIn"+t+"Reminder";default:return"comment"===(e=this.itemType())||"message"===e?"isIn"+t+"CommentFollowers":"isIn"+t+"ChangeFollowers"}},t.prototype._getRelativeEndpoint=function(t){var e,n;return null==t&&(t="people"),e=function(t){return null==t&&(t=""),t=ko.unwrap(t),"s"===t[t.length-1]?t:t+"s"},n=e(this.itemType()),"board"===this.itemType()&&"project"===ko.unwrap(this.item.boardType)&&(n="portfolio/boards"),this.itemId()>0?n+"/"+this.itemId()+"/"+t+".json":"comment"===this.itemType()&&this.parentId()>0?e(this.parentType())+"/"+this.parentId()+"/comments/"+t+".json":this.projectId()>0?"teams"===t?"projects/"+this.projectId()+"/"+t+".json":"projects/"+this.projectId()+"/"+n+"/"+t+".json":"board"===this.itemType()?n+"/"+t+".json":t+".json"},t.prototype._syncInitialOptions=function(){var t,e,n,i,s,o,r;if((null==this._initialOptionsSynced||!this._initialOptionsSynced)&&this.initialOptions().length){for(t=this.value().filter(function(t){var e;return!("t"===(e=t.toString()[0])||"c"===e)}),i=t.map(function(t){return t/1}),o=this.initialOptions(),e=0,n=o.length;e<n;e++)s=o[e],s.isSelected((r=s.id/1,a.call(i,r)>=0));return this._initialOptionsSynced=!0}},t.prototype._getSharedProperties=function(){var t,e,n;return null!=(null!=(e=this.shared())?e.hasLoaded:void 0)&&(this.hasLoaded=null!=(n=this.shared())?n.hasLoaded:void 0),t=function(t){return function(){var e;return e=t.initialValue.length&&!app.utility.AreEqual(t.initialValue,t.value()),ko.tasks.schedule(function(){return e&&t.value(t.initialValue),t._fireCallback("loaded")})}}(this),this.hasLoaded()&&t(),this.subscriptions.push(this.hasLoaded.subscribe(t))},t.prototype._checkIfIsPublic=function(t){return null==t&&(t=this.privacyIds()),!t.length||"0"===t.toString()},t.prototype.isNewCompanyForTeams=function(t){var e,n;return!!this.filteredTeams().length&&(e=this.filteredTeams()[t],e.companyId>0&&(0===t||(n=this.filteredTeams()[t-1],e.companyId!==n.companyId)))},t.prototype.isNewSiteLevelGroup=function(t){var e,n;return!!this.filteredTeams().length&&(0!==t&&(e=this.filteredTeams()[t],n=this.filteredTeams()[t-1],e.projectId/1==0&&n.projectId/1>0))},t.prototype.checkIfGroupIsCollapsed=function(t){switch(this.pickerType){case"access":case"reminders":return t.membersCollapsed();case"responsible":return t.assigneesCollapsed();case"privacy":return t.privacyCollapsed();case"followers":return this.showAdvancedFollowerOptions?t.followersCollapsed():"isFollowingComments"===this.followersKey?t.commentFollowersCollapsed():t.changeFollowersCollapsed()}},t.prototype.checkIfUserIsVisible=function(t){if("access"===this.pickerType)return!0;if("privacy"===this.pickerType)return!0;if(!this._checkPrivacy(t,"person"))return!1;switch(this.pickerType){case"responsible":if(~~t.id==~~this.currentUser.id)return this.project().member()}return!t.isObserving||app.loggedInUser.inOwnerCompany()&&this.showObservers()},t.prototype.dispose=function(){return this.shouldManageData&&this.shared(null),null!=this.peopleAndCompaniesData&&this.peopleAndCompaniesData.dispose(),null!=this.teamsData&&this.teamsData.dispose(),this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:u,template:t}}.apply(e,i))&&(t.exports=s)},1714:function(t,e,n){var i,s,o=function(t,e){return function(){return t.apply(e,arguments)}},a=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};i=[n(1244)],void 0!==(s=function(t){return function(){function e(e,n,i){var s,a;null==n&&(n={}),null==i&&(i={}),this.dispose=o(this.dispose,this),this.disposeOf=o(this.disposeOf,this),this.disposeOfChildren=o(this.disposeOfChildren,this),this.unpause=o(this.unpause,this),this.pause=o(this.pause,this),this.trigger=o(this.trigger,this),this.getComponent=o(this.getComponent,this),this.components={},this.events={},this.inFocus=[],this.hasFocus=e,this.currentTarget=e,this.useDOM=null==(s=i.useDOM)||s,this.focusOnFirstChild=null!=(a=i.focusOnFirstChild)&&a,this.parent=e,this.pausedEvents=[],this.mousetrap=new t,this.register(e,n)}return e.prototype.register=function(t,e){var n,i,s,o,a,r,l,p,c,d,u;null!=this.components[t]&&this.removeFromNavigation(this.components[t].parent,t),this.components[t]={id:t,parent:null!=(i=e.parent)?i:null,navigation:null!=(s=e.navigation)?s:[],current:null!=(o=e.current)?o:-1,onFocus:null!=(a=e.onFocus)?a:function(){},onBlur:null!=(r=e.onBlur)?r:function(){},events:null!=(l=e.events)?l:{},data:null!=(p=e.data)?p:null,displayIndex:null!=(c=e.displayIndex)?c:null},null!=e.parent&&null!=e.displayIndex&&this.addToNavigation(e.parent,t,e.displayIndex),d=e.events;for(u in d)n=d[u],this.registerEvent(u,n);e.initFocus&&this.selectElement(t)},e.prototype.registerEvent=function(t,e){var n;if(null!=this.events[t])return this.events[t]=!!(null!=e?e.allowBulk:void 0);this.events[t]=!!(null!=e?e.allowBulk:void 0),n=function(t){return function(e,n){var i;if(null!=t.components[t.hasFocus])if("function"==typeof n.preventDefault&&n.preventDefault(),t.events[e])for(i=t.inFocus.length;i--;)t.fireEventChain(e,n,t.inFocus[i]);else t.fireEventChain(e,n,t.hasFocus)}}(this),this.mousetrap.bind(t,function(e){return n(t,e)})},e.prototype.fireEventChain=function(t,e,n){var i,s,o,a,r;this.pausedEvents.indexOf(t)>-1||null!=(i=this.components[n])&&(null!=(null!=(s=i.events)?s[t]:void 0)&&this.fireEvent(t,e,n,i),null==i.parent||(null!=(o=i.events[t])?o.cancelBubble:void 0)||(null!=(a=this.components[i.parent])&&null!=(r=a.events)?r[t]:void 0,this.fireEventChain(t,e,i.parent)))},e.prototype.fireEvent=function(e,n,i,s){var o,a,r;r=s.events[e],o=r.event,a=r.overrideGlobal,a||t.trigger(e),null!=o&&o(n,i,s,{back:this.back.bind(this),forward:this.forward.bind(this)})},e.prototype.selectElement=function(t){var e;null!=this.components[t]&&(e=this.hasFocus,this.inFocus.indexOf(t)<0&&this.inFocus.push(t),this.hasFocus=t,this.components[t].onFocus(t,e),this.useDOM&&null!=document.getElementById(t)&&document.getElementById(t).focus())},e.prototype.unselectElement=function(t,e){var n;null!=this.components[t]&&(n=this.inFocus.indexOf(t),n>-1&&this.inFocus.splice(n,1),this.components[t].onBlur(t,e),this.useDOM&&null!=document.getElementById(t)&&document.getElementById(t).blur())},e.prototype.softUnselectElement=function(t,e){null!=this.components[t]&&(this.components[t].onBlur(t,e,!0),this.useDOM&&null!=document.getElementById(t)&&document.getElementById(t).blur())},e.prototype.childHasFocus=function(t){var e,n,i;if(null!=this.components[t]){for(i=this.components[t].navigation,e=0,n=i.length;e<n;e++)if(i[e]===this.hasFocus)return!0;return!1}},e.prototype.navigate=function(t,e,n){var i;if(null==n&&(n=!1),null!=this.components[t]){for(this.components[t].current+e>-1&&this.components[t].current+e<this.components[t].navigation.length&&(this.components[t].current+=e),i=this.inFocus.length;i--;)n?this.softUnselectElement(this.inFocus[i],this.components[t].navigation[this.components[t].current]):this.inFocus[i]!==t&&this.unselectElement(this.inFocus[i],this.components[t].navigation[this.components[t].current]);null!=this.components[t].navigation[this.components[t].current]&&this.selectElement(this.components[t].navigation[this.components[t].current])}},e.prototype.forward=function(t,e){null==e&&(e=!1),this.navigate(t,1,e)},e.prototype.back=function(t,e){null==e&&(e=!1),this.navigate(t,-1,e)},e.prototype.focus=function(t,e){null==e&&(e=!1),this.navigate(t,0,e)},e.prototype.navigateTo=function(t,e,n){var i,s;if(null==n&&(n=!1),null!=this.components[t]&&(null!=(s=this.components[t].navigation.indexOf(e))||s<0)){if(this.components[t].current=s,!n)for(i=this.inFocus.length;i--;)this.unselectElement(this.inFocus[i],this.components[t].navigation[this.components[t].current]);null!=this.components[t].navigation[this.components[t].current]&&this.selectElement(this.components[t].navigation[this.components[t].current])}},e.prototype.addToNavigation=function(t,e,n){var i;null!=(i=this.components[t])&&(i.navigation.indexOf(e)>-1||(null==n&&n&&(n=i.navigation.length),this.components[t].navigation.splice(n,0,e)))},e.prototype.removeFromNavigation=function(t,e){var n,i;null!=(i=this.components[t])&&((n=i.navigation.indexOf(e))<0||this.components[t].navigation.splice(n,1))},e.prototype.getPosition=function(t,e){var n;return n=this.components[t],null==n?null:n.navigation.indexOf(e)},e.prototype.getPositionFromBottom=function(t,e){var n;return n=this.getPosition(t,e),this.getNavigationLength(t)-1-n},e.prototype.getNavigationLength=function(t){var e;return e=this.components[t],null==e?null:e.navigation.length},e.prototype.resetNavigation=function(t,e){var n,i;null!=this.components[t]&&(this.components[t].current=-1,n=null!=(i=this.components[t].navigation)?i[0]:void 0,this.focusOnFirstChild&&(this.hasFocus=null!=n?n:t,this.inFocus=this.inFocus.filter(function(e){return function(n){return!(a.call(e.components[t].navigation,n)>=0)}}(this)),null!=n&&this.inFocus.push(n)),this.useDOM&&!e&&(null!=document.getElementById(n)&&document.getElementById(n).focus(),null!=document.getElementById(t)&&document.getElementById(t).focus()))},e.prototype.clearNavigation=function(t){null!=this.components[t]&&(this.components[t].navigation=[])},e.prototype.getParent=function(t){var e,n;if(null!=(null!=(e=this.components[t])?e.parent:void 0))return null!=(n=this.components[this.components[t].parent])&&n},e.prototype.getComponent=function(t){var e;return null!=(e=this.components[t])&&e},e.prototype.trigger=function(t){this.mousetrap.trigger(t)},e.prototype.pause=function(t){var e,n,i;if(null==t)return this.mousetrap.pause();for(e=0,n=t.length;e<n;e++)i=t[e],this.pausedEvents.indexOf(i)<0&&this.pausedEvents.push(i)},e.prototype.unpause=function(t){var e,n,i;if(null==t)return this.mousetrap.unpause();for(e=0,n=t.length;e<n;e++)i=t[e],this.pausedEvents.indexOf(i)>-1&&this.pausedEvents.splice(this.pausedEvents.indexOf(i),1)},e.prototype.disposeOfChildren=function(t){var e,n,i,s;if(null!=this.components[t]){for(s=this.components[t].navigation,n=0,i=s.length;n<i;n++)e=s[n],delete this.components[e];this.components[t].navigation=[]}},e.prototype.disposeOf=function(t,e){var n,i,s,o,a,r;if(null!=this.components[t]){for(o=this.components[t].parent,a=this.components[t].navigation,i=0,s=a.length;i<s;i++)n=a[i],this.disposeOf(n);this.removeFromNavigation(o,t),this.hasFocus!==t&&!this.childHasFocus(t)||e||(null!=this.components[o].navigation[0]?this.navigateTo(o,this.components[o].navigation[0]):null!=(null!=(r=this.components[this.components[o].parent])?r.navigation[0]:void 0)?this.navigateTo(this.components[o].parent,o):this.hasFocus=null),delete this.components[t]}},e.prototype.dispose=function(){this.mousetrap.reset()},e}()}.apply(e,i))&&(t.exports=s)},1719:function(t,e,n){var i,s,o=function(t,e){return function(){return t.apply(e,arguments)}};i=[n(14)],void 0!==(s=function(t){return function(){function t(t,e){this.mustHavePrivacy=o(this.mustHavePrivacy,this),this.getShortName=o(this.getShortName,this),this.getFullName=o(this.getFullName,this),t.id=parseInt(t.id,10),null==t.roleIds&&(t.roleIds=[]),null==t.companyId&&(t.companyId=0),null==t.defaultImageUrl&&(t.defaultImageUrl="./images/noPhoto2.png"),null==t.isInNotifyDefaults&&(t.isInNotifyDefaults=!1),null==t.isFollowingChanges&&(t.isFollowingChanges=!1),null==t.isFollowingComments&&(t.isFollowingComments=!1),t.isInNotifyDefaults&&(t.isFollowingComments=!0),null==t.isInPrivacy&&(t.isInPrivacy=!1),null==t.isResponsible&&(t.isResponsible=!1),null==t.isFollowingChanges&&(t.isFollowingChanges=!1),null==t.isFollowingComments&&(t.isFollowingComments=!1),null==t.isObserving&&(t.isObserving=!1),null==t.isAdministrator&&(t.isAdministrator=!1),null==t.isResponsible&&(t.isResponsible=!1),null==t.isInCompanyAssignees&&(t.isInCompanyAssignees=!1),null==t.isInCompanyChangeFollowers&&(t.isInCompanyChangeFollowers=!1),null==t.isInCompanyCommentFollowers&&(t.isInCompanyCommentFollowers=!1),null==t.isInTeamChangeFollowers&&(t.isInTeamChangeFollowers=!1),null==t.isInTeamCommentFollowers&&(t.isInTeamCommentFollowers=!1),null==t.isInTeamPrivacy&&(t.isInTeamPrivacy=!1),null==t.isInTeamAssignees&&(t.isInTeamAssignees=!1),null==t.firstName&&(t.firstName=""),null==t.lastName&&(t.lastName=""),null==t.title&&(t.title=""),null==t.isVisible&&(t.isVisible=!0),null==t.isVisibleInAssignees&&(t.isVisibleInAssignees=!0),null==t.isVisibleInPrivacy&&(t.isVisibleInPrivacy=!0),null==t.isVisibleInFollowers&&(t.isVisibleInFollowers=!0),null==t.hasAccess&&(t.hasAccess=!1),null==t.isInCompanyAccess&&(t.isInCompanyAccess=!1),null==t.isInTeamAccess&&(t.isInTeamAccess=!1),null==t.isReminded&&(t.isReminded=!1),null==t.isInCompanyReminder&&(t.isInCompanyReminder=!1),null==t.isInTeamReminder&&(t.isInTeamReminder=!1),null==t.isUnsubscribed&&(t.isUnsubscribed=!1),null==t.doesReceiveProjectEmails&&(t.doesReceiveProjectEmails=!1),null==t.shouldShowFollowerOptions&&(t.shouldShowFollowerOptions=t.isFollowingChanges||t.isFollowingComments),t.firstName=t.firstName.toString(),t.lastName=t.lastName.toString(),t.name=t.firstName+" "+t.lastName,t.mentionName=""+t.firstName.toLowerCase().replace(/\s/g,"")+t.lastName.charAt(0).toLowerCase(),t.searchName=""+t.firstName+t.lastName,t.mentionType="person",t.mentionImg='<img class="h-mention__img" src="'+t.avatarUrl+'" onerror="this.src=\''+t.defaultImageUrl+"'\">",app.ko.mapping.fromJS(t,{},this),null==this.pickerItemType&&(this.pickerItemType="user"),this.parentCompany=e,this.isCurrentUser=this.id()===app.loggedInUser.id(),this.userBadge=ko.pureComputed(function(t){return function(){if(null==t.type||null==t.isAdministrator)return"";if(t.isAdministrator())return"administrator";if(t.isObserving())return"observer";switch(t.type()){case"account":return"";default:return t.type()}}}(this)),this.userBadgeTip=ko.pureComputed(function(t){return function(){if(!t.userBadge().length)return"";switch(t.userBadge()){case"administrator":return app.tl("Administrator");case"contact":return app.tl("Contact");case"account":return app.tl("Account");case"collaborator":return app.tl("Collaborator");case"observer":return app.tl("Observer");default:return""}}}(this)),this.isFollowingDynamically=ko.pureComputed(function(t){return function(){return!!(t.isInTeamChangeFollowers()||t.isInTeamCommentFollowers()||t.isInTeamAccess())||!!(t.isInCompanyChangeFollowers()||t.isInCompanyCommentFollowers()||t.isInCompanyAccess())}}(this)),this.followerStatus=ko.computed({read:function(t){return function(){return(t.isFollowingChanges()||t.isInCompanyChangeFollowers()||t.isInTeamChangeFollowers())&&(t.isFollowingComments()||t.isInCompanyCommentFollowers()||t.isInTeamCommentFollowers())?"all":t.isFollowingChanges()||t.isInCompanyChangeFollowers()||t.isInTeamChangeFollowers()?"changes":t.isFollowingComments()||t.isInCompanyCommentFollowers()||t.isInTeamCommentFollowers()?"comments":"none"}}(this),write:function(t){return function(e){switch(e){case"changes":t.isFollowingChanges(!0),t.isFollowingComments(!1);break;case"comments":t.isFollowingChanges(!1),t.isFollowingComments(!0);break;case"all":t.isFollowingChanges(!0),t.isFollowingComments(!0);break;default:t.isFollowingChanges(!1),t.isFollowingComments(!1)}}}(this),owner:this}),this.fullName=ko.pureComputed(this.getFullName),this.shortName=ko.pureComputed(this.getShortName),this.isInCompanyPrivacy=ko.pureComputed({read:function(t){return function(){return t.parentCompany.isInPrivacy()}}(this),write:function(t){return function(e){t.parentCompany.isInPrivacy(e)}}(this)}),this.canFollowChanges=ko.pureComputed(function(t){return function(){return!(t.isInTeamChangeFollowers()||t.isInCompanyChangeFollowers())}}(this)),this.canFollowComments=ko.pureComputed(function(t){return function(){return!(t.isInTeamCommentFollowers()||t.isInCompanyCommentFollowers())}}(this))}return t.prototype.getFullName=function(){return this.firstName()+" "+this.lastName()},t.prototype.getShortName=function(){return this.firstName()+" "+this.lastName().charAt(0).toUpperCase()+"."},t.prototype.mustHavePrivacy=function(){return this.isAdministrator()&&this.parentCompany.id===app.account.companyid()||this.id()===app.loggedInUser.id()},t}()}.apply(e,i))&&(t.exports=s)},1917:function(t,e,n){var i,s,o=function(t,e){return function(){return t.apply(e,arguments)}};i=[n(2983),n(1286)],void 0!==(s=function(t,e){var n,i;return n=e.default,i=function(){function t(t){var e,i,s,a,r,l;null==t&&(t={}),this.dispose=o(this.dispose,this),this.subscriptions=[],this.icon=ko.observable(""),e=t.color,a=t.size,this.iconClasses=null!=(i=t.class)?i:"",l=null!=(s=t.class)?s.split(" "):void 0,r=t.style,n(t.name,{size:a,color:e,classes:l,styles:r},{asNode:!1}).then(function(t){return function(e){return t.icon(e)}}(this))}return t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:i,template:t}}.apply(e,i))&&(t.exports=s)},2305:function(t,e){t.exports='<div class="u-blank-slate" data-bind="\n\tonRendered:OnRendered,\n\ttemplate: {\n\t\tname: template\n\t},\n\tcss: {\n\t\t\'u-blank-slate--is-in-tipped\': isInTipped,\n\t\t\'large\': size() == \'large\',\n\t\t\'medium\': size() == \'medium\',\n\t\t\'small\': size() == \'small\'\n\t},\n\tstyle: {\n\t\tpaddingTop: paddingTop,\n\t\tmarginTop: params.marginTop ? params.marginTop +\'\' : null\n\t}">\n</div>\n\n<script id="blank-slate" type="text/html">\n<div class="u-blank-slate__holder">\n\t\x3c!-- ko if: backgroundImage != \'\' --\x3e\n\t\t<div class="u-blank-slate__image">\n\t\t\t<img data-bind="attr: { src: backgroundImage }" loading="lazy" width="auto" height="{{backgroundHeight}}" class="{{imgClass}}">\n\t\t</div>\n\t\x3c!-- /ko --\x3e\n\t\x3c!-- ko if: backgroundIcon != \'\' --\x3e\n\t\t<div class="u-blank-slate__image u-blank-slate__image--is-icon">\n\t\t\t\x3c!-- ko component: {\n\t\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tname: backgroundIcon,\n\t\t\t\t\t\tclass: \'h-icon-color--blankslate\'\n\t\t\t\t\t}\n\t\t\t\t} --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</div>\n\t\x3c!-- /ko --\x3e\n\t<div class="u-blank-slate__text">\n\t\t<h3>{{params.title}}</h3>\n\n\t\t<p>\n\t\t\t\x3c!-- ko if: hasActiveFilter --\x3e\n\t\t\t\t\x3c!-- ko if: allowClearFilter --\x3e\n\t\t\t\t\t<a href="javascript:;" data-bind="click:OnClickClearFilter">{{app.tl(\'Clear the filter\')}}</a> {{app.tl(\'to see all [_s]\', itemTextPlural)}}\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\x3c!-- ko ifnot: hasActiveFilter --\x3e\n\t\t\t\t{{{params.msg}}}\n\t\t\t\t\x3c!-- ko if: params.msg2 && params.showButton --\x3e\n\t\t\t\t\t<br/>\n\t\t\t\t\t{{{params.msg2}}}\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</p>\n\t</div>\n\t\x3c!-- ko if: params.showButton && params.onClickButton --\x3e\n\t\t<div class="u-blank-slate__action">\n\t\t\t<button class="btn btn-success" data-bind="click: params.onClickButton, css:cssClass">\n\t\t\t\t{{params.buttonText}}\n\t\t\t</button>\n\n\t\t\t\x3c!-- ko if: params.buttonSubText --\x3e\n\t\t\t\t<p class="subText">{{{params.buttonSubText}}}</p>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</div>\n\t\x3c!-- /ko --\x3e\n\t\x3c!-- ko if: params.showHelpDocs --\x3e\n\t\t<div class="u-blank-slate__help-docs">\n\t\t\t<a href="{{params.helpDocURL}}">{{params.helpDocText}}</a>\n\t\t</div>\n\t\x3c!-- /ko --\x3e\n</div>\n<\/script>\n\n<script id="blank-slate-dashboard" type="text/html">\n<div class="u-blank-slate__holder">\n\t\x3c!-- ko if: backgroundImage != \'\' --\x3e\n\t\t<div class="u-blank-slate__image">\n\t\t\t<img data-bind="attr: { src: backgroundImage }" loading="lazy" width="auto" height="{{backgroundHeight}}" class="{{imgClass}}">\n\t\t</div>\n\t\x3c!-- /ko --\x3e\n\n\t<div class="u-blank-slate__text">\n\t\t<h2>{{params.title}}</h2>\n\t\t<p>\n\t\t\t<small>\n\t\t\t\t\x3c!-- ko if: hasActiveFilter --\x3e\n\t\t\t\t\t\x3c!-- ko if: allowClearFilter --\x3e\n\t\t\t\t\t\t<a href="javascript:;" data-bind="click:OnClickClearFilter">{{app.tl(\'Clear the filter\')}}</a> {{app.tl(\'to see all [_s]\', itemTextPlural)}}\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\x3c!-- ko ifnot: hasActiveFilter --\x3e\n\t\t\t\t\t{{{params.msg}}}\n\t\t\t\t\t\x3c!-- ko if: params.msg2 && params.showButton --\x3e\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t{{{params.msg2}}}\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</small>\n\t\t</p>\n\t</div>\n\n\t\x3c!-- ko if: params.showButton && params.onClickButton && projectIsActive() --\x3e\n\t\t<div class="u-blank-slate__action">\n\t\t\t<button class="btn btn-success" data-bind="click: params.onClickButton, css:cssClass">\n\t\t\t\t{{params.buttonText}}\n\t\t\t</button>\n\n\t\t\t\x3c!-- ko if: params.buttonSubText --\x3e\n\t\t\t\t<p class="subText">{{{params.buttonSubText}}}</p>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</div>\n\t\x3c!-- /ko --\x3e\n</div>\n<\/script>\n'},2306:function(t,e){t.exports='<div class="u-blank-slate" data-bind="onRendered: OnRendered, style: {backgroundImage: backgroundImage, paddingTop:backgroundImage?\'120px\':\'20px\'}">\n\t<div class="u-blank-slate__holder">\n\t\t\x3c!-- Access Denied --\x3e\n\t\t\x3c!-- ko if: ko.unwrap(errorStatus) === 404 --\x3e\n\t\t\t<div class="u-blank-slate__text">\n\t\t\t\t<h3>{{app.tl(\'Sorry, Access Denied.\')}}</h3>\n\t\t\t\t<p>{{app.tl(\'Your account doesn\\\'t have access to this page.\')}}</p>\n\t\t\t</div>\n\t\t\t<div class="u-blank-slate__action">\n\t\t\t\t<button data-bind="click: OnClickReload" class="btn btn-success">\n\t\t\t\t\t<i class="icon-refresh"></i>\n\t\t\t\t\t{{app.tl(\'Please Check Again\')}}\n\t\t\t\t</button>\n\t\t\t\t{{app.tl(\'or\')}}\n\n\n\t\t\t\t\x3c!-- ko if: projectId != null --\x3e\n\t\t\t\t\t<button data-bind="click: OnClickHome" class="btn btn-success">\n\t\t\t\t\t\t<i class="icon-home"></i>\n\t\t\t\t\t\t{{app.tl(\'Go to Project Home\')}}\n\t\t\t\t\t</button>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\x3c!-- ko if: projectId == null --\x3e\n\t\t\t\t\t<button data-bind="click: OnClickHome" class="btn btn-success">\n\t\t\t\t\t\t<i class="icon-home"></i>\n\t\t\t\t\t\t{{app.tl(\'Go to Dashboard\')}}\n\t\t\t\t\t</button>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</div>\n\t\t\x3c!-- /ko --\x3e\n\n\t\t\x3c!-- Error loading --\x3e\n\t\t\x3c!-- ko ifnot: ko.unwrap(errorStatus) === 404 --\x3e\n\t\t\t<div class="u-blank-slate__text">\n\t\t\t\t<h3>{{title}}</h3>\n\t\t\t\t<p>{{message}}</p>\n\t\t\t</div>\n\t\t\t\x3c!-- ko if: onTryAgainAction --\x3e\n\t\t\t\t<div class="u-blank-slate__action">\n\t\t\t\t\t<button data-bind="click: OnClickTryAgain" class="btn btn-success btn-lg">\n\t\t\t\t\t\t<span class="fa fa-repeat" style="margin-right: 5px;"></span>\n\t\t\t\t\t\t{{app.tl(\'Try Again\')}}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t\x3c!-- /ko --\x3e\n\t</div>\n</div>'},2307:function(t,e){t.exports='<div class="w-preloading"\n\tdata-bind="css: {\n\t\t\'w-preloading--inline\': (format == \'inline\'),\n\t\t\'w-preloading--delayed\': useDelay\n\t}">\n\n\t\x3c!-- ko if: format == \'dashboard\' --\x3e\n\t\t<img src="/tko/public/assets/blankslates/summary.gif" loading="lazy" height="200">\n\t\x3c!-- /ko --\x3e\n\n\t\x3c!-- ko ifnot: format == \'dashboard\' --\x3e\n\t\t<div class="w-preloading__circle"></div>\n\t\x3c!-- /ko --\x3e\n\n\t\x3c!-- ko if: showText --\x3e\n\t\t<p class="w-preloading__label">\n\t\t\t{{loadingText}}\n\t\t</p>\n\t\x3c!-- /ko --\x3e\n</div>\n'},2308:function(t,e){t.exports='<div class="w-preloading">\n\t<div class="w-preloading__circle"></div>\n\t<p class="w-preloading__label">\n\t\t{{loadingText}}\n\t</p>\n</div>'},2309:function(t,e){t.exports='<div class="w-starter-overlay w-starter-overlay--{{section}}">\n\t<div class="w-starter-overlay__content">\n\t\t<img\n\t\t\tclass="w-starter-overlay__icon-base"\n\t\t\twidth="{{assetWidth}}"\n\t\t\theight="{{assetHeight}}"\n\t\t\tsrc="//cdn-pjs.teamwork.com/tko/public/assets/png/onboarding/{{assetName}}.png"\n\t\t\tsrcset="//cdn-pjs.teamwork.com/tko/public/assets/png/onboarding/{{assetName}}@2x.png 2x">\n\n\t\t<h2 class="w-starter-overlay__title">\n\t\t\t{{{title}}}\n\t\t</h2>\n\n\t\t<div class="w-starter-overlay__description">\n\t\t\t<p>\n\t\t\t\t{{{description}}}\n\t\t\t</p>\n\t\t</div>\n\n\t\t<a \tid="onboardingStateGetStarted_{{section}}"\n\t\t\thref="javascript:;"\n\t\t\tdata-bind="click: function() { app.onBoarding.set($component.section) }"\n\t\t\tclass="btn btn-primary">\n\t\t\t{{app.tl(\'Get Started\')}}\n\t\t</a>\n\n\t\t<a \tid="onboardingStateLearnMore_{{section}}"\n\t\t\thref="javascript:;"\n\t\t\tdata-bind="click: OnClickLearnMore"\n\t\t\tclass="btn btn-link">\n\t\t\t{{app.tl(\'Learn more\')}}\n\t\t</a>\n\t</div>\n</div>'},2368:function(t,e){t.exports='<div class="sectionFormLightbox" data-bind="attr:{id:holderId}">\n\n\t<div class="modal-header cursor--move">\n\t\t<h2 class="modal-title">\n\t\t\t{{modalTitle}}\n\t\t</h2>\n\t</div>\n\n\t<form data-bind="submit: OnSubmit">\n\n\t\t<div class="modal-body">\n\t\t\t<div class="lhs width--100 mb--small">\n\t\t\t\t<div class="lhs width--100 mb--medium">\n\t\t\t\t\t<label class="large mb--none">\n\t\t\t\t\t\t{{app.tl(\'Project\')}}\n\t\t\t\t\t</label>\n\t\t\t\t\t<select data-bind="\n\t\t\t\t\t\tselect2:{\n\t\t\t\t\t\t\tvalue: projectId,\n\t\t\t\t\t\t\tendpoint: \'time/projects.json?type=canAddItem\',\n\t\t\t\t\t\t\ttextKey: \'name\',\n\t\t\t\t\t\t\tgroupById: \'companyId\',\n\t\t\t\t\t\t\tgroupByName: \'companyName\',\n\t\t\t\t\t\t\tautofocus: true,\n\t\t\t\t\t\t\tminimumResultsForSearch: 10,\n\t\t\t\t\t\t\tinitialValue: initialProjectValue,\n\t\t\t\t\t\t\tplaceholder: app.tl(\'Choose a project\')+app.localizationPreferences().ellipsis,\n\t\t\t\t\t\t\tselectCallback: OnSelectedProject,\n\t\t\t\t\t\t}" style="width:100%">\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="lhs width--100 mb--medium" data-bind="visible: projectId() > 0">\n\t\t\t\t\t<label class="large mb--none">\n\t\t\t\t\t\t{{app.tl(\'Task\')}}\n\t\t\t\t\t</label>\n\t\t\t\t\t<select data-bind="\n\t\t\t\t\t\tselect2:{\n\t\t\t\t\t\t\tvalue: taskId,\n\t\t\t\t\t\t\tendpoint: tasksUrl,\n\t\t\t\t\t\t\tajaxData: AjaxData,\n\t\t\t\t\t\t\tallowClear: true,\n\t\t\t\t\t\t\tresponseType: \'tasks\',\n\t\t\t\t\t\t\tinitialValue: initialTaskValue,\n\t\t\t\t\t\t\tplaceholder: app.tl(\'Choose a Task\')+app.localizationPreferences().ellipsis,\n\t\t\t\t\t\t\tselectCallback: OnSelectedTask,\n\t\t\t\t\t\t\tdelay: 500\n\t\t\t\t\t\t}" style="width:100%">\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="lhs width--100 mb--medium" data-bind="visible: projectId() > 0">\n\t\t\t\t\t<label class="large mb--none">\n\t\t\t\t\t\t{{app.tl(\'Description\')}}\n\t\t\t\t\t</label>\n\t\t\t\t\t<textarea class="lhs width--100 border-box"\n\t\t\t\t\t\tstyle="min-height: 100px; font-size: 12px;"\n\t\t\t\t\t\tdata-bind="textInput: description"></textarea>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="lhs width--100 mb--medium" data-bind="visible: projectId() > 0">\n\t\t\t\t\t<label class="large mb--none">\n\t\t\t\t\t\t<input type="checkbox" data-bind="checked: isBillable" class="mr--small">\n\t\t\t\t\t\t{{app.tl(\'Billable\')}}\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="modal-footer flex">\n\t\t\t<button type="button" class="btn btn-default" data-bind="click: Lightbox.cancel, css: {warning: canSubmit()}">{{app.tl(\'Close\')}}</button>\n\t\t\t\x3c!-- ko if: timer --\x3e\n\t\t\t\t<button type="button" class="btn btn-danger" data-bind="click: OnClickDeleteTimer">\n\t\t\t\t\t<span class="fa fa-times mr--small"></span>\n\t\t\t\t\t{{app.tl(\'Delete\')}}\n\t\t\t\t</button>\n\t\t\t\x3c!--/ko--\x3e\n\t\t\t<button class="action btn btn-success ml--auto mr--none" data-bind="css:{disabledSubmit: !canSubmit()}, loader:isSubmitting, click:OnSubmit">{{ submitButtonText }}</button>\n\t\t</div>\n\t</form>\n</div>\n<span data-bind="template: {afterRender: OnShow}"></span>'},2407:function(t,e){t.exports='<div class="sectionFormLightbox m-contact-form {{modalClass}}" data-bind="attr: {id: holderId}">\n\n\t<form id="contact-form" data-bind="submit: OnSubmit">\n\n\t\t<div class="modal-body">\n\t\t\t<div class="mb--xlarge">\n\t\t\t\t<h2 class="modal-title">\n\t\t\t\t\t{{ modalTitle }}\n\t\t\t\t</h2>\n\n\t\t\t\t<p>\n\t\t\t\t\t\x3c!-- ko if: subtitle.length --\x3e\n\t\t\t\t\t\t{{{ subtitle }}}\n\t\t\t\t\t\t<br>\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\x3c!-- ko ifnot: subtitle.length --\x3e\n\t\t\t\t\t\t{{app.tl(\'Have a question about your account or an upgrade?\')}}<br>\n\t\t\t\t\t\t{{app.tl(\'Send a message to [_s] Support.\', \'Teamwork\')}}\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</p>\n\t\t\t</div>\n\n\t\t\t\x3c!-- ko if: showEmailAddress --\x3e\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<label for="contactFormEmailInput">\n\t\t\t\t\t\t{{app.tl(\'Email\')}}\n\t\t\t\t\t</label>\n\t\t\t\t\t<input id="contactFormEmailInput" type="text" class="form-control" data-bind="textInput: inputEmail" data-required="true">\n\t\t\t\t</div>\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\x3c!-- ko if: showPhoneNumber --\x3e\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<label for="contactFormPhoneInput">\n\t\t\t\t\t\t{{app.tl(\'Phone number\')}}\n\t\t\t\t\t\t<small>({{app.tl(\'Optional\')}})</small>\n\t\t\t\t\t</label>\n\t\t\t\t\t<input id="contactFormPhoneInput" type="text" class="form-control" data-bind="textInput: inputPhoneNumber">\n\t\t\t\t</div>\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t<div class="form-group">\n\t\t\t\t<label for="contactFormMessageInput">\n\t\t\t\t\t{{app.tl(\'Message\')}}\n\t\t\t\t</label>\n\t\t\t\t<textarea id="contactFormMessageInput" class="form-control" name="" id="" rows="7" data-bind="attr: {maxLength: maxLen}, textInput: inputMessage"></textarea>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="modal-footer flex">\n\t\t\t<button type="button" class="btn btn-link ml--auto" data-bind="click: Lightbox.cancel">\n\t\t\t\t{{ app.tl(\'Cancel\') }}\n\t\t\t</button>\n\n\t\t\t<button type="submit" class="btn btn-success m-contact-form__btn-submit ml--medium mr--none" data-bind="loader: isSubmitting, css: {disabledSubmit: !canSubmit()}">\n\t\t\t\t{{ ( isSubmitting() ? app.tl(\'Submitting\') : app.tl(\'Submit\')) }}\n\t\t\t</button>\n\t\t</div>\n\n\t</form>\n\n</div>\n<span data-bind="template: {afterRender: OnShow}"></span>'},2558:function(t,e){t.exports='<div class="sectionFormLightbox m-trial-upgrade" data-bind="attr: {id: holderId}">\n\t<div class="m-trial-upgrade__base">\n\t\t<div class="m-trial-upgrade__content">\n\t\t\t<h2 class="m-trial-upgrade__title">{{ title }}</h2>\n\t\t\t<div class="m-trial-upgrade__description">\n\t\t\t\t<p>\n\t\t\t\t\t{{text}}\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div class="m-trial-upgrade__action-buttons">\n\t\t\t\t<button class="btn btn-primary mr--medium" type="button" data-bind="click: OnClickConfirm">\n\t\t\t\t\t{{app.tl(\'Try it out\')}}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="m-trial-upgrade__secondary">\n\t\t\t<img class="m-trial-upgrade__image" alt=" "\n\t\t\t\tsrc="tko/public/assets/svg/upgradepath/Admin_unlock.svg"\n\t\t\t\twidth="138" height="130">\n\t\t</div>\n\t</div>\n</div>\n\n<span data-bind="template: {afterRender: OnShow}"></span>'},2571:function(t,e){t.exports='<ul>\n\t<li id="tl_dashboard" data-bind="css: {sel: app.currentRoute().request_.split(\'/\', 1)==\'dashboard\'}"><a href="#dashboard" data-bind="text:app.tl(\'Dashboard\')"></a></li>\n\t<li id="tl_projects" data-bind="css: {sel: app.currentRoute().request_.split(\'/\', 1)==\'projects\'}"><a href="#projects" data-bind="text:app.tl(\'Projects\')"></a></li>\n\t<li id="tl_everything" data-bind="css: {sel: app.currentRoute().request_.split(\'/\', 1)==\'everything\'}"><a href="#everything" data-bind="text:app.tl(\'Everything\'), attr:{\'title\':app.tl(\'View tasks, milestones & messages across all projects\')}"></a></li>\n\t<li id="tl_calendar" data-bind="css: {sel: app.currentRoute().request_.split(\'/\', 1)==\'calendar\'}"><a href="#calendar" data-bind="text:app.tl(\'Calendar\')"></a></li>\n\t\x3c!-- ko if: app.loggedInUser.inOwnerCompany() --\x3e\n\t<li id="tl_statuses" data-bind="css: {sel: app.currentRoute().request_.split(\'/\', 1)==\'statuses\'}"><a href="#statuses" data-bind="text:app.tl(\'Statuses\')"></a></li>\n\t\x3c!-- /ko --\x3e\n\t\x3c!-- ko if: app.loggedInUser.administrator() || app.loggedInUser.inOwnerCompany() || app.loggedInUser.permissions.canManagePeople() --\x3e\n\t<li id="tl_people" data-bind="css: {sel: [\'people\',\'person\',\'companies\'].indexOf(app.currentRoute().request_.split(\'/\', 1).toString())>-1}"><a href="#people" data-bind="text:app.tl(\'People\')"></a></li>\n\t\x3c!-- /ko --\x3e\n</ul>\n\x3c!-- IMPORTANT - Mark this template loaded --\x3e\n\x3c!-- ko if: $data.readyToShow != null && readyToShow --\x3e\n    <div data-bind="template:{afterRender:function(){templateLoaded(true)}}" class="hidden"></div>\n\x3c!-- /ko --\x3e'},2977:function(t,e){t.exports='<header class="sections--header">\n    <div class="padding-wrap">\n        <h2 class="title-label" data-bind="text:title"></h2>\n        \x3c!-- ko if: subnav != null && subnav.length --\x3e\n            <nav class="settings-nav">\n                <div class="btn-group">\n                    \x3c!-- ko repeat: { foreach: subnav } --\x3e\n                        <a class="btn btn-default" data-bind="text:$item().name, attr: { \'href\': subnav.baseURL + $item().routePart },css:{ \'active\': $item().routePart === app.currentRoute()[subnav.routePartName] }"></a>\n                    \x3c!-- /ko --\x3e\n                </div>\n            </nav>\x3c!-- menu --\x3e\n        \x3c!-- /ko --\x3e\n    </div>\x3c!-- padding wrapper --\x3e\n</header>\n\n\x3c!-- IMPORTANT - Mark this template loaded --\x3e\n\x3c!-- ko if: $data.readyToShow != null && readyToShow --\x3e\n    <div data-bind="template:{afterRender:function(){templateLoaded(true)}}" class="hidden"></div>\n\x3c!-- /ko --\x3e'},2980:function(t,e){t.exports='<svg class="u-checkbox-icon"\n\t\tdata-bind="\n\t\t\tcss: {\n\t\t\t\t\'u-checkbox-icon--is-readonly\': readonly,\n\t\t\t\t\'u-checkbox-icon--is-selected\': selected,\n\t\t\t\t\'u-checkbox-icon--small\': size == \'small\',\n\t\t\t\t\'u-checkbox-icon--is-selected-always\': selectedAlways,\n\t\t\t\t\'u-checkbox-icon--is-disabled\': disabled\n\t\t\t}"\n\t\t\txmlns="http://www.w3.org/2000/svg"\n\t\t\twidth="14"\n\t\t\theight="14"\n\t\t\tviewBox="0 0 14 14">\n\t<g fill="none">\n\t  <path class="u-checkbox-icon__box"  fill="#fff" stroke="#aaa" d="M3,0.5 C1.61928812,0.5 0.5,1.61928812 0.5,3 L0.5,11 C0.5,12.3807118 1.61928814,13.5 3,13.5 L11,13.5 C12.3807118,13.5 13.5,12.3807118 13.5,11 L13.5,3 C13.5,1.61928814 12.3807118,0.5 11,0.5 L3,0.5 Z"/>\n\t  <path class="u-checkbox-icon__check" fill="#FFF" d="M5.39644042,10.8428802 C5.59169433,11.0523698 5.90827636,11.0523698 6.10354981,10.8429012 L11.8535498,4.67427625 C12.0488037,4.46478677 12.0488037,4.12515735 11.8535498,3.91568882 L11.1464599,3.15710139 C10.951206,2.94763287 10.6346045,2.94763287 10.4393506,3.15710139 L5.74999511,8.18782424 L3.56063964,5.83910312 C3.36538574,5.62961365 3.04878417,5.62961365 2.85353027,5.83910312 L2.14644042,6.59769056 C1.95118653,6.80718004 1.95118653,7.14680946 2.14644042,7.35627798 L5.39644042,10.8428802 Z"/>\n\t</g>\n</svg>'},2983:function(t,e){t.exports='<span class="u-common-icon {{iconClasses}}" data-bind="bindHtml: icon"></span>'},2995:function(t,e){t.exports='<div class="u-menu-actions u-menu-actions--{{size}}">\n\t\x3c!-- ko if: showTitle --\x3e\n\t\t<div class="u-menu-actions__title">\n\t\t\t<span>{{title}}</span>\n\t\t</div>\n\t\x3c!-- /ko --\x3e\n\t\x3c!-- ko foreach: visibleActions --\x3e\n\t\t\x3c!-- ko if: $data.link --\x3e\n\t\t\t<a class="u-menu-action u-menu-action--link u-menu-action--{{$component.size}}" href="{{link}}" data-bind="template: {name: \'u-menu-action-content\', data: $data}"></a>\n\t\t\x3c!-- /ko --\x3e\n\t\t\x3c!-- ko ifnot: $data.link --\x3e\n\t\t\t<button class="u-menu-action u-menu-action__button" data-bind="click: click, template: {name: \'u-menu-action-content\', data: $data}"></button>\n\t\t\x3c!-- /ko --\x3e\n\t\x3c!-- /ko  --\x3e\n</div>\n\n\n<script type="text/html" id="u-menu-action-content">\n\t\x3c!-- ko if: $data.shortcutLabel && shortcutLabel != \'\' --\x3e\n\t<div class="u-menu-action__shortcut">\n\t\t<span>{{shortcutLabel}}</span>\n\t</div>\n\t\x3c!-- /ko --\x3e\n\t<div class="u-menu-action__icon">\n\t\x3c!-- ko component: {\n\t\t\tname: \'ui-common-icon\',\n\t\t\tparams: {\n\t\t\t\tname: icon,\n\t\t\t\tclass: iconClass,\n\t\t\t\tsize: iconSize\n\t\t\t}\n\t\t} --\x3e\n\t\x3c!-- /ko  --\x3e\n\t</div>\n\t<div class="u-menu-action__label">\n\t\t<span>{{label}}</span>\n\t</div>\n<\/script>\n\n\x3c!-- IMPORTANT - Mark this template loaded --\x3e\n\x3c!-- ko if: $data.readyToShow != null && readyToShow --\x3e\n    <div data-bind="template:{afterRender:function(){templateLoaded(true)}}" class="hidden"></div>\n\x3c!-- /ko --\x3e\n\n'},3002:function(t,e){t.exports='\n<svg class="u-milestone-icon {{ svgClass }}" viewbox="0 0 512 512">\n\t<use xlink:href="/tko/public/assets/svg/milestone.svg?v=2"\n\t\tdata-bind="attr: {\n\t\t\t\'xlink:href\': \'/tko/public/assets/svg/milestone.svg?=v2#milestone\'\n\t\t}">\n\t</use>\n</svg>\n'},3005:function(t,e){t.exports="<span\n    data-tipped-options=\"{{tippedOptionsStr}}\"\n    data-bind=\"\n        style: style,\n        css: css,\n        attr: {\n            'data-component': JSON.stringify({\n                name: 'widget-projects-dropdown-new',\n                params: {\n                    projectId: projectId,\n                    projectName: projectName,\n                    type: 'project',\n                    selector: selector\n                }\n            }),\n            id: selector !== '' ? selector : null\n        },\n        tippedDelegate: {\n            onShow: OnShowDropdown,\n            afterHide: AfterHideDropdown\n        }\">\n    \x3c!-- ko component: {\n            name: 'ui-common-icon',\n            params: {\n                name: 'ellipsis-v-regular',\n            }\n        } --\x3e\n    \x3c!-- /ko  --\x3e\n</span>"},3009:function(t,e){t.exports='<button class="u-tag {{ GetTagStyleClasses() }} {{ selectedClass() }} {{ inactiveClass()  }}" data-bind="click: OnClickTag, style: tagStyles, attr: { title: tag.name }">\n\t<div class="u-tag__indicator">\n\t\t<div class="u-indicator {{ GetIndicatorStyleClasses() }}" data-bind="style: indicatorStyles"></div>\n\t</div>\n\t<div class="u-tag__text">\n\t\t<span>{{tag.name}}</span>\n\t</div>\n\t\x3c!-- ko if: showCount --\x3e\n\t\t<div class="u-tag__count">\n\t\t\t<span>{{ $component.GetFormattedCount(tag.count) }} </span>\n\t\t</div>\n\t\x3c!-- /ko --\x3e\n</button>\n\n'},3013:function(t,e){t.exports="\x3c!-- ko if: displayMode == 'modal' --\x3e\n\t<div class=\"py--small px--xlarge color--muted radius--small\" style=\"background-color: rgba(211,232,232,0.47);\">\n\t\t<p class=\"mb--none\">\n\t\t\t<strong>{{titleType}}</strong>: <span>{{titleText}}</span>\n\t\t</p>\n\t</div>\n\n\t\x3c!-- ko if: privacyText() !== '' && (!editMode || (loadedComment() != null && loadedComment().private() == 1) ) --\x3e\n\t\t<div style=\"margin: 10px 0px 0px -20px;\" class=\"privacy-bar\" data-bind=\"attr:{title: app.tl('Only visible to: [_s]', privacyText().longText) }\">\n\t\t\t<a href=\"javascript:;\" class=\"pi\"></a> &nbsp; {{app.tl('Only visible to: [_s]', privacyText().shortText)}}\n\t\t</div>\n\t\x3c!--/ko--\x3e\n\n\t\x3c!-- ko if: editMode && loadedComment() != null && loadedComment().lockdownId() != 0 && loadedComment().private() == 2 --\x3e\n\t\t\x3c!-- ko component: { name:\"widget-privacy-icon\", params: {private:loadedComment().private, lockdownId:loadedComment().lockdownId, showPrivacyBar:true, projectId:loadedComment().projectId, id:loadedComment().commentableId, title:loadedComment().itemName, type:loadedComment().commentableType} } --\x3e\x3c!-- /ko --\x3e\n\t\x3c!--/ko--\x3e\n\x3c!--/ko--\x3e\n\n<form\n\tid=\"addCommentForm{{uniqueId}}\"\n\tclass=\"useMarkdown w-add-comment\"\n\tistrackingchanges=\"true\"\n\tdata-bind=\"\n\t\tevent: {\n\t\t\tdragenter: OnDragDropEvent\n\t\t},\n\t\tcss: {\n\t\t\t'has-changed': formHasChanges,\n\t\t\t'is-opened': optionsShowing(),\n\t\t\t'w-add-comment--modal': displayMode == 'modal'\n\t\t},\n\t\tsubmit: OnSubmit\n\t\t\">\n\n\t<div class=\"w-add-comment__textarea-utilities color--gray-light\">\n\t\t\x3c!-- ko if: optionsShowing --\x3e\n\t\t\t\t\x3c!-- ko component: {name: 'widget-autosave', params: { postboxPrefix: postboxPrefix} } --\x3e\x3c!--/ko--\x3e\n\t\t\x3c!--/ko--\x3e\n\t</div>\n\n\t<div class=\"w-add-comment__row\" data-bind=\"css: {'froalaEditor': !useMarkdown(), 'markdownEditor': useMarkdown()}\">\n\t\t\x3c!-- ko if: displayMode == 'inline' --\x3e\n\t\t<div class=\"w-comments__avatar\">\n\t\t\t<span class=\"w-comments__avatar-link\" data-bind=\"style: { 'backgroundImage': 'url('+ app.loggedInUser.avatarUrl() +')' }\">\n\t\t\t\t<img data-bind=\"attr: {'title': app.loggedInUser.fullName, src: app.loggedInUser.avatarUrl }\" onerror=\"this.src='//cdn.teamwork.com/images/noPhoto2.png'\" class=\"w-comments__avatar-img\">\n\t\t\t</span>\n\t\t</div>\n\t\t\x3c!--/ko--\x3e\n\n\t\t<div class=\"w-add-comment__content\">\n\n\t\t\t<div class=\"w-add-comment__textarea\">\n\n\t\t\t\t\x3c!-- ko if: !useMarkdown() && commentTextLoaded() --\x3e\n\t\t\t\t\t\x3c!-- ko if: !optionsShowing() --\x3e\n\t\t\t\t\t\t<span class=\"pseudo-textarea\" data-bind=\"text: placeholder, click: wysiwygEditorActivate\"></span>\n\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\x3c!-- ko if: optionsShowing() --\x3e\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: 'widget-wysiwyg-editor',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tcontext: 'comment',\n\t\t\t\t\t\t\t\tinitialContent: initialContent,\n\t\t\t\t\t\t\t\tnewLineMode: 'br',\n\t\t\t\t\t\t\t\tatJsInitCallback: wysiwygAtJsInitCallback,\n\t\t\t\t\t\t\t\tcontentHasChangedCallback: wysiwygContentHasChangedCallback,\n\t\t\t\t\t\t\t\tpassBackContentGetter: wysiwygPassBackContentGetter,\n\t\t\t\t\t\t\t\timageUploadsStartedCallback: wysiwygImageUploadsStartedCallback,\n\t\t\t\t\t\t\t\timageUploadsCompletedCallback: wysiwygImageUploadsCompletedCallback,\n\t\t\t\t\t\t\t\tplaceholder: placeholder,\n\t\t\t\t\t\t\t\tminHeight: 165,\n\t\t\t\t\t\t\t\tmaxHeight: maxHeight(),\n\t\t\t\t\t\t\t\tmaxLength: maxLength,\n\t\t\t\t\t\t\t\tautoFocus: true,\n\t\t\t\t\t\t\t\tshortcuts:[{\n\t\t\t\t\t\t\t\t\tpattern: 'meta+enter',\n\t\t\t\t\t\t\t\t\tdesc: app.tl('submit'),\n\t\t\t\t\t\t\t\t\tcmdFunc: function(){$component.OnSubmit();}\n\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}--\x3e\x3c!--/ko--\x3e\n\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\x3c!-- ko if: useMarkdown() --\x3e\n\t\t\t\t\t\x3c!-- ko if: !optionsShowing() --\x3e\n\t\t\t\t\t\t<span class=\"pseudo-textarea\" data-bind=\"text: placeholder, click: OnActivateComment\"></span>\n\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\x3c!-- ko if: optionsShowing() --\x3e\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: 'widget-mentions',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tkoObservable: commentText,\n\t\t\t\t\t\t\t\titem: comment,\n\t\t\t\t\t\t\t\tid: commentId,\n\t\t\t\t\t\t\t\ttype: 'comment',\n\t\t\t\t\t\t\t\tparentItem: item,\n\t\t\t\t\t\t\t\tparentType: ko.unwrap(type),\n\t\t\t\t\t\t\t\tprojectId: ko.unwrap(projectId),\n\t\t\t\t\t\t\t\tpostboxPrefix: postboxPrefix,\n\t\t\t\t\t\t\t\tautofocus: true,\n\t\t\t\t\t\t\t\tplaceholder: app.tl('Add your comment here')\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}--\x3e\x3c!--/ko--\x3e\n\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\x3c!-- ko if: !useMarkdown() --\x3e\n\t\t\t\t\t<div class=\"blurHolder\"></div>\n\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t</div>\n\n\t\t\t\x3c!-- ko if: displayMode == 'modal' || (displayMode == 'inline' && optionsShowing()) --\x3e\n\n\t\t\t\t<div class=\"mb--large\">\n\t\t\t\t\t<div class=\"comment-options is-drop-zone\">\n\n\t\t\t\t\t\t<div class=\"mb--small\">\n\t\t\t\t\t\t\t\x3c!-- ko if: editMode --\x3e\n\t\t\t\t\t\t\t<span class=\"flex-inline\" data-bind=\"click: OnUpdateSkipNotifications\">\n\t\t\t\t\t\t\t\t<input type=\"checkbox\" class=\"mb--none mr--small\" name=\"smallChange\" data-bind=\"checked: skipNotifications()\">\n\t\t\t\t\t\t\t\t<label>{{ app.tl('This is only a small change, don\\'t send any notifications') }}</label>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\x3c!-- ko ifnot: isTemplate --\x3e\n\t\t\t\t\t\t\t<div class=\"clearfix mb--large\" data-bind=\"visible: !editMode || !skipNotifications()\">\n\t\t\t\t\t\t\t\t\x3c!-- ko ifnot: app.featureFlip.check('teams') --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- ko component: { name:'widget-people-picker', params:{ item: comment, projectId: projectId, parentItem:item, parentType: ko.unwrap(type), itemType: 'comment', id:commentId, pickerType: 'followers', notifyKey: notifyKey, useModal: true, mode: modeName, mentionsPrefix: postboxPrefix, modalPrivacyIds: privacyIds, format:'select', title:app.tl('Who should be notified?') } } --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\x3c!-- ko if: app.featureFlip.check('teams') --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\tname: 'widget-item-notify-picker',\n\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\tprojectId: projectId,\n\t\t\t\t\t\t\t\t\t\t\t\titem: comment,\n\t\t\t\t\t\t\t\t\t\t\t\titemType: 'comment',\n\t\t\t\t\t\t\t\t\t\t\t\titemId: commentId,\n\t\t\t\t\t\t\t\t\t\t\t\tparentType: parentType,\n\t\t\t\t\t\t\t\t\t\t\t\tparentId: parentId,\n\t\t\t\t\t\t\t\t\t\t\t\tnotifiedIds: notifiedIds,\n\t\t\t\t\t\t\t\t\t\t\t\tprivacyIds: privacyIds,\n\t\t\t\t\t\t\t\t\t\t\t\tincludeMe: includeMeInNotify,\n\t\t\t\t\t\t\t\t\t\t\t\tnotifyByDefault: notifyByDefault,\n\t\t\t\t\t\t\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tprefetch: $component.OnPeoplePickerLoaded\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t<div class=\"flex flex-items-start\">\n\t\t\t\t\t\t\t\x3c!-- ko ifnot: parentItemIsPrivate --\x3e\n\t\t\t\t\t\t\t\t<div class=\"mr--large\" data-bind=\"visible: canSetPrivacy\">\n\t\t\t\t\t\t\t\t\t<label class=\"block font-weight--semibold\">{{app.tl('Privacy')}}</label>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\x3c!-- ko ifnot: app.featureFlip.check('teams') --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko component: { name:'widget-people-picker', params:{ item: comment, projectId: projectId, parentItem:item, parentType: ko.unwrap(type), itemType: 'comment', id:commentId, pickerType: 'privacy', notifyKey: notifyKey, mode: modeName } } --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\t\t\x3c!-- ko if: app.featureFlip.check('teams') --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: 'widget-item-privacy-picker',\n\t\t\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tprojectId: projectId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\titem: comment,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\titemType: 'comment',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\titemId: commentId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tparentType: parentType,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tparentId: parentId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tprivacyIds: privacyIds,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tformat: 'button',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tloaded: $component.OnPrivacyPickerChange,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchange: $component.OnPrivacyPickerChange\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\t\t\t\x3c!-- ko if: parentItemIsPrivate --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- ko ifnot: app.featureFlip.check('teams') --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- ko component: { name:'widget-people-picker', params:{ item: comment, projectId: projectId, parentItem:item, parentType: ko.unwrap(type), itemType: 'comment', id:commentId, pickerType: 'privacy', notifyKey: notifyKey, mode: modeName, visible:false } } --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\x3c!-- ko if: app.featureFlip.check('teams') --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\tname: 'widget-item-privacy-picker',\n\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\tprojectId: projectId,\n\t\t\t\t\t\t\t\t\t\t\t\titem: comment,\n\t\t\t\t\t\t\t\t\t\t\t\titemType: 'comment',\n\t\t\t\t\t\t\t\t\t\t\t\titemId: commentId,\n\t\t\t\t\t\t\t\t\t\t\t\tparentType: parentType,\n\t\t\t\t\t\t\t\t\t\t\t\tparentId: parentId,\n\t\t\t\t\t\t\t\t\t\t\t\tprivacyIds: privacyIds,\n\t\t\t\t\t\t\t\t\t\t\t\tformat: 'button',\n\t\t\t\t\t\t\t\t\t\t\t\tvisible: false,\n\t\t\t\t\t\t\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tloaded: $component.OnPrivacyPickerChange,\n\t\t\t\t\t\t\t\t\t\t\t\t\tchange: $component.OnPrivacyPickerChange\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\t\t\t\x3c!-- ko component: { name:'widget-file-attachment-picker', params:{ notifyKey: uniqueId, attachedTo: comment, projectId: ko.unwrap(projectId) } } --\x3e\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\x3c!-- ko component: { name:'widget-file-attachment-dropzone', params:{ notifyKey: uniqueId, parentVM: $component, attachedTo: comment, projectId: ko.unwrap(projectId), defaultPrivacyIds: privacyIds, enableInnerScrolling: displayMode=='modal', innerScrollingHeight: 180  } } --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\t<input class=\"killFroalaFocus mousetrap h-visually-hidden\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t\x3c!-- ko if: displayMode == 'inline' --\x3e\n\t\t\t\t\t<div class=\"w-add-comment__action-buttons\">\n\t\t\t\t\t\t<button type=\"submit\" class=\"btn btn-success\" data-style=\"expand-right\" data-bind=\"loader: isSubmitting, css: { disabledSubmit: !canSubmit() }\">\n\t\t\t\t\t\t\t{{ isSubmitting() ? app.tl('Saving') : app.tl('Save Comment') }}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<span class=\"ml--medium mr--small\">{{app.tl('or')}}</span>\n\t\t\t\t\t\t<a href=\"#0\" class=\"btn btn-link px--small\" data-bind=\"click: OnClickCancelComment\">{{app.tl('Cancel')}}</a>\n\t\t\t\t\t</div>\n\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\x3c!--/ko--\x3e\n\n\t\t</div>\n\n\t</div>\n\n\t\x3c!-- ko if: displayMode == 'modal' --\x3e\n\t\t<div class=\"modal-footer flex\">\n\t\t\t<button type=\"button\" class=\"btn btn-default\" data-bind=\"click: OnClickCancelComment, css: {warning: canSubmit}\">{{app.tl('Close')}}</button>\n\t\t\t<button type=\"submit\" class=\"btn btn-success ml--auto mr--none\" data-style=\"expand-right\" data-bind=\"loader: isSubmitting, click: OnSubmit, css: { disabledSubmit: !canSubmit() }\">\n\t\t\t\t{{ isSubmitting() ? app.tl('Saving') : app.tl('Save Comment') }}\n\t\t\t</button>\n\t\t</div>\n\t\x3c!--/ko--\x3e\n\n</form>\n"},3014:function(t,e){t.exports="\n<div class=\"w-add-edit-message\">\n\t<form\n\t\tclass=\"w-add-edit-message__form\"\n\t\tdata-bind=\"\n\t\t\tcss: {\n\t\t\t\thasChanged: formHasChanges\n\t\t\t},\n\t\t\tsubmit:OnSubmit\n\t\t\"\n\t>\n\n\t\x3c!-- ko ifnot: item.isReply --\x3e\n\t\t<div class=\"w-add-edit-message__subject\">\n\t\t\t<input data-required=\"true\"\n\t\t\t\tonfocus=\"Tipped.hideAll();\"\n\t\t\t\ttype=\"text\"\n\t\t\t\tmaxlength=\"255\"\n\t\t\t\tplaceholder=\"{{app.tl('Message Subject')}}\"\n\t\t\t\tdata-bind=\"textInput:title\">\n\t\t</div>\n\t\x3c!-- /ko --\x3e\n\n\t<div class=\"w-add-edit-message__body\">\n\t\t\x3c!-- ko if: item.contentType()=='HTML' || ( mode == 'add' && !app.loggedInUser.useMarkdown() ) --\x3e\n\t\t\t\x3c!-- ko component: {\n\t\t\t\t\tname: 'widget-wysiwyg-editor',\n\t\t\t\t\tparams:{\n\t\t\t\t\t\tinitialContent: body,\n\t\t\t\t\t\tcontext: 'message',\n\t\t\t\t\t\tnewLineMode: true,\n\t\t\t\t\t\tatJsInitCallback: wysiwygAtJsInitCallback,\n\t\t\t\t\t\tcontentHasChangedCallback: wysiwygContentHasChangedCallback,\n\t\t\t\t\t\tpassBackContentGetter: wysiwygPassBackContentGetter,\n\t\t\t\t\t\tpassBackContentSetter: wysiwygPassBackContentSetter,\n\t\t\t\t\t\timageUploadsStartedCallback: wysiwygImageUploadsStartedCallback,\n\t\t\t\t\t\timageUploadsCompletedCallback: wysiwygImageUploadsCompletedCallback,\n\t\t\t\t\t\tplaceholder: app.tl('Type your message here'),\n\t\t\t\t\t\tminHeight: 250,\n\t\t\t\t\t\tmaxHeight: 700,\n\t\t\t\t\t\tautoFocus: true,\n\t\t\t\t\t\tshortcuts:[{\n\t\t\t\t\t\t\tpattern: 'meta+enter',\n\t\t\t\t\t\t\tdesc: app.tl('submit'),\n\t\t\t\t\t\t\tcmdFunc: function(){$component.OnSubmit();}\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t}--\x3e\n\t\t\t\x3c!--/ko--\x3e\n\t\t\x3c!--/ko--\x3e\n\n\t\t\x3c!-- ko if: item.contentType()=='TEXT' || ( mode == 'add' && app.loggedInUser.useMarkdown() ) --\x3e\n\t\t\t\x3c!-- ko component: {\n\t\t\t\t\tname: 'widget-mentions',\n\t\t\t\t\tparams:{\n\t\t\t\t\t\tkoObservable: body,\n\t\t\t\t\t\titem: item,\n\t\t\t\t\t\tid: ko.unwrap(item.id),\n\t\t\t\t\t\ttype: item.isReply() ? 'reply' : 'message',\n\t\t\t\t\t\tparentItem: item.isReply() ? {id: messageId()} : undefined,\n\t\t\t\t\t\tparentType: item.isReply() ? 'message' : undefined,\n\t\t\t\t\t\tprojectId: ko.unwrap(projectId),\n\t\t\t\t\t\tpostboxPrefix: postboxPrefix,\n\t\t\t\t\t\tplaceholder: app.tl('Type your message here')\n\t\t\t\t\t}\n\t\t\t\t}--\x3e\n\t\t\t\x3c!--/ko--\x3e\n\t\t\x3c!--/ko--\x3e\n\n\t\t<div class=\"hidden\" data-bind=\"onRendered: OnRenderedMessageBody\"></div>\n\t</div>\n\n\t<div class=\"is-drop-zone\">\n\t\t<div class=\"w-add-edit-message__autosave\">\n\t\t\t\x3c!-- ko component: {\n\t\t\t\t\tname: 'widget-autosave',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tpostboxPrefix: postboxPrefix\n\t\t\t\t\t}\n\t\t\t\t} --\x3e\n\t\t\t\x3c!--/ko--\x3e\n\t\t</div>\n\n\t\t<div class=\"w-add-edit-message__options\">\n\t\t\t\x3c!-- ko ifnot: $component.isTemplate --\x3e\n\t\t\t\t<label>\n\t\t\t\t\t<input type=\"checkbox\" data-bind=\"checked: $component.skipNotifications\">\n\t\t\t\t\t{{app.tl(\"This is only a small change, don't send any notifications\")}}\n\t\t\t\t</label>\n\t\t\t\x3c!--/ko--\x3e\n\t\t</div>\n\n\t\t<div class=\"w-add-edit-message__notified\"\n\t\t\tdata-bind=\"css: {\n\t\t\t\t'hidden': $component.skipNotifications\n\t\t\t}\">\n\t\t\t\x3c!-- ko ifnot: $component.isTemplate --\x3e\n\t\t\t\t\x3c!-- ko ifnot: app.featureFlip.check('teams') --\x3e\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: 'widget-people-picker',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tprojectId: projectId,\n\t\t\t\t\t\t\t\titem: item,\n\t\t\t\t\t\t\t\titemType: 'message',\n\t\t\t\t\t\t\t\tid: ko.unwrap(item.messageId),\n\t\t\t\t\t\t\t\tpickerType: 'followers',\n\t\t\t\t\t\t\t\tnotifyKey: '-add-message',\n\t\t\t\t\t\t\t\tuseModal: true,\n\t\t\t\t\t\t\t\tselectedIds: notifiedIds,\n\t\t\t\t\t\t\t\tmentionsPrefix: postboxPrefix,\n\t\t\t\t\t\t\t\tformat: 'select',\n\t\t\t\t\t\t\t\ttitle: app.tl('Who should be notified?'),\n\t\t\t\t\t\t\t\tvisible: !$component.skipNotifications(),\n\t\t\t\t\t\t\t\tmode: ko.unwrap(item.messageId) > 0 ? 'edit' : 'add'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\x3c!-- ko if: app.featureFlip.check('teams') --\x3e\n\t\t\t\t\t<div data-bind=\"visible: !$component.skipNotifications()\">\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: 'widget-item-notify-picker',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tprojectId: projectId,\n\t\t\t\t\t\t\t\t\titem: item,\n\t\t\t\t\t\t\t\t\titemType: 'message',\n\t\t\t\t\t\t\t\t\titemId: messageId,\n\t\t\t\t\t\t\t\t\tnotifiedIds: notifiedIds,\n\t\t\t\t\t\t\t\t\tprivacyIds: privacyIds,\n\t\t\t\t\t\t\t\t\tincludeMe: includeMeInNotify,\n\t\t\t\t\t\t\t\t\tnotifyByDefault: notifyByDefault,\n\t\t\t\t\t\t\t\t\tcallbacks: {\n\t\t\t\t\t\t\t\t\t\tloaded: $component.OnPeoplePickerLoaded\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</div>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</div>\n\n\t\t<div class=\"w-add-edit-message__extra\">\n\t\t\t\x3c!-- ko ifnot: item.isReply --\x3e\n\t\t\t\t<div class=\"mr--medium\">\n\t\t\t\t\t<label class=\"subtle\">\n\t\t\t\t\t\t{{app.tl('Category')}}\n\t\t\t\t\t</label>\n\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: 'widget-tipped-category',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tprojectId: projectId,\n\t\t\t\t\t\t\t\ttype: 'messages',\n\t\t\t\t\t\t\t\tcategoryId: categoryId\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</div>\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t<div class=\"mr--medium\" data-bind=\"visible: canSetPrivacy\">\n\t\t\t\t<label class=\"subtle\">{{app.tl('Privacy')}}</label>\n\t\t\t\t\x3c!-- ko ifnot: app.featureFlip.check('teams') --\x3e\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: 'widget-people-picker',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tprojectId: projectId,\n\t\t\t\t\t\t\t\titem: item,\n\t\t\t\t\t\t\t\titemType: 'message',\n\t\t\t\t\t\t\t\tid: 0,\n\t\t\t\t\t\t\t\tpickerType: 'privacy',\n\t\t\t\t\t\t\t\tnotifyKey: '-add-message',\n\t\t\t\t\t\t\t\tselectedIds:privacyIds\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\x3c!-- ko if: app.featureFlip.check('teams') --\x3e\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: 'widget-item-privacy-picker',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tprojectId: projectId,\n\t\t\t\t\t\t\t\titem: item,\n\t\t\t\t\t\t\t\titemType: 'message',\n\t\t\t\t\t\t\t\titemId: messageId,\n\t\t\t\t\t\t\t\tprivacyIds: privacyIds,\n\t\t\t\t\t\t\t\tformat: 'button'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</div>\n\n\t\t\t\x3c!-- ko component: {\n\t\t\t\t\tname: 'widget-file-attachment-picker',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tnotifyKey: $component.uniqueId,\n\t\t\t\t\t\tattachedTo: item,\n\t\t\t\t\t\tprojectId: ko.unwrap($component.projectId)\n\t\t\t\t\t}\n\t\t\t\t} --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\x3c!-- ko if: $component.canAddTags --\x3e\n\t\t\t\t<div class=\"mr--medium\">\n\t\t\t\t\t<label class=\"subtle\">{{app.tl('Tags')}}</label>\n\t\t\t\t\t<div id=\"messageAddTags\" style=\"margin-bottom: 5px;\">\n\t\t\t\t\t\t\x3c!-- Tags Listing --\x3e\n\t\t\t\t\t\t\x3c!-- ko component: { name:\"widget-tags-list\",\n\t\t\t\t\t\t\tparams:{\n\t\t\t\t\t\t\t\titem: itemCopy,\n\t\t\t\t\t\t\t\ttype: \"message\",\n\t\t\t\t\t\t\t\texcludeSpecial: true,\n\t\t\t\t\t\t\t\tcanEdit: true,\n\t\t\t\t\t\t\t\tautosave: false\n\t\t\t\t\t\t\t}}--\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\x3c!-- Add tags --\x3e\n\t\t\t\t\t\t\x3c!-- ko component: { name: \"widget-tags-addIcon\",\n\t\t\t\t\t\t\tparams:{\n\t\t\t\t\t\t\t\titem: itemCopy,\n\t\t\t\t\t\t\t\ttype: \"message\",\n\t\t\t\t\t\t\t\tprojectId: projectId,\n\t\t\t\t\t\t\t\tshowText: true,\n\t\t\t\t\t\t\t\tshowIcon: true,\n\t\t\t\t\t\t\t\tautosave: false\n\t\t\t\t\t\t\t} } --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</div>\n\n\t\t<div class=\"w-add-edit-message__dropzone\">\n\t\t\t\x3c!-- ko component: {\n\t\t\t\t\tname: 'widget-file-attachment-dropzone',\n\t\t\t\t\tparams:{\n\t\t\t\t\t\tnotifyKey: ($component.uniqueId),\n\t\t\t\t\t\tparentVM: $component,\n\t\t\t\t\t\tattachedTo: item,\n\t\t\t\t\t\tprojectId: ko.unwrap($component.projectId),\n\t\t\t\t\t\tdefaultPrivacyIds: privacyIds\n\t\t\t\t\t}\n\t\t\t\t} --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</div>\n\t</div>\n\t<div class=\"w-add-edit-message__footer\">\n\t\t<button type=\"submit\" class=\"btn btn-success\"\n\t\t\tdata-bind=\"\n\t\t\t\tcss: {\n\t\t\t\t\t'disabledSubmit': !canSubmit(),\n\t\t\t\t\t'rhs': messageId() == 0\n\t\t\t\t}\">\n\t\t\t{{submitButtonText}}\n\t\t</button>\n\n\t\t\x3c!-- ko if: messageId() > 0 --\x3e\n\t\t\t<span>{{app.tl('or')}}</span>\n\t\t\t<a href=\"javascript:;\" data-bind=\"click:OnCancelMessageOrReply\">{{app.tl('Cancel')}}</a>\n\t\t\x3c!-- /ko --\x3e\n\t</div>\n</form>"},3021:function(t,e){t.exports='<select class="notracking people-picker-select2" style="width:100%;" data-bind="\n\tselect2:{\n\t\tminimumResultsForSearch: 0,\n\t\tplaceholder: placeholder,\n\t\tonSelect: OnChangeDropdownUsers,\n\t\tonOpen: OnOpen,\n\t\tdblclickCallback: $component.OnDblClickAssignedTo,\n\t\tautofocus: autofocus,\n\t\ttemplateResult: app.select2PersonTemplateResult,\n\t\ttemplateSelection: app.select2PersonTemplateResult\n\t},\n\tvalue: koObservable,\n\tattr: {\n\t\t\'name\': formName,\n\t\tdisabled: !peopleLoaded()\n\t}">\n\t\x3c!-- ko foreach: ko.unwrap(initialOptions) --\x3e\n\t\t<option data-bind="text:text, attr:{value:id}"></option>\n\t\x3c!-- /ko --\x3e\n\t\x3c!-- ko if: $component.displayMeFirst && $component.loggedInUserAvailable()--\x3e\n\t\t<option data-user-img="{{app.loggedInUser.avatarUrl}}" data-bind="text:app.tl(\'Me\') + \' (\' + app.loggedInUser.fullName() + \')\', attr:{value: app.loggedInUser.id}"></option>\n\t\x3c!--/ko--\x3e\n\t\x3c!-- ko foreach: filteredAvailablePeople() --\x3e\n\t\t\x3c!-- ko if: $component.groupByCompany --\x3e\n\t\t\t\x3c!-- ko if: people && people.length > 0 --\x3e\n\t\t\t\t<optgroup label="Teamwork" data-bind="attr:{\'label\':name}">\n\t\t\t\t\t\x3c!-- ko foreach: people --\x3e\n\t\t\t\t\t\t\x3c!-- ko if: id == app.loggedInUser.id() && !$component.displayMeFirst--\x3e\n\t\t\t\t\t\t\t<option data-user-img="{{avatarUrl}}" data-bind="text:app.tl(\'Me\') + \' (\' + firstName + \' \' + lastName + \')\', attr:{value:id}"></option>\n\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\x3c!-- ko ifnot: id == app.loggedInUser.id() --\x3e\n\t\t\t\t\t\t\t<option data-user-img="{{avatarUrl}}" data-bind="attr:{value:id}">{{firstName}} {{lastName}}</option>\n\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t</optgroup>\n\t\t\t\x3c!--/ko--\x3e\n\t\t\t\x3c!-- ko if: id !== -2 && people && people.length == 0 && (($data.hasOwnProperty(\'temporary\') && id.indexOf(\',\') > -1) || !$data.hasOwnProperty(\'temporary\')) --\x3e\n\t\t\t\t<option data-bind="attr:{value:id, \'data-temporary\':$data.hasOwnProperty(\'temporary\')}">{{name}}</option>\n\t\t\t\x3c!--/ko--\x3e\n\t\t\t\x3c!-- ko if: id == -2 && $component.showMultiple() && $component.getAvailablePeopleCount() > 1 --\x3e\n\t\t\t\t<option data-bind="attr:{value:id}">{{name}}</option>\n\t\t\t\x3c!--/ko--\x3e\n\t\t\x3c!--/ko--\x3e\n\t\t\x3c!-- ko ifnot: $component.groupByCompany --\x3e\n\t\t\t\x3c!-- ko if: id == app.loggedInUser.id() --\x3e\n\t\t\t\t\x3c!-- ko if: $component.showAvatar --\x3e\n\t\t\t\t\t<option data-user-img="{{avatarUrl}}" data-bind="text:app.tl(\'Me\') + \' (\' + firstName + \' \' + lastName + \')\', attr:{value:id}"></option>\n\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\x3c!-- ko ifnot: $component.showAvatar --\x3e\n\t\t\t\t\t<option data-bind="attr:{value:id}">{{app.tl("Me")}}, {{firstName}} {{lastName}}</option>\n\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\x3c!--/ko--\x3e\n\t\t\t\x3c!-- ko ifnot: id == app.loggedInUser.id() --\x3e\n\t\t\t\t\x3c!-- ko if: $component.showAvatar --\x3e\n\t\t\t\t\t<option data-user-img="{{avatarUrl}}" data-bind="attr:{value:id}">{{firstName}} {{lastName}}</option>\n\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\x3c!-- ko ifnot: $component.showAvatar --\x3e\n\t\t\t\t\t<option data-bind="attr:{value:id}">{{firstName}} {{lastName}}</option>\n\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\x3c!--/ko--\x3e\n\t\t\x3c!--/ko--\x3e\n\t\x3c!--/ko--\x3e\n</select>\n\n<div class="widget-available-people-picker-inline-help">\n\t\x3c!-- ko component: { name: "widget-inline-help", params: { type:\'peoplePickerV\' } } --\x3e\x3c!-- /ko --\x3e\n</div>\n\n<div class="hidden" data-bind="onRendered: OnRenderedPicker"></div>\n\n\x3c!-- ko if: allowMultiple && getAvailablePeopleCount() > 1 --\x3e\n\t<div class="available-people-picker-multi-label" data-bind="style:{\'float\':float==\'right\'?\'right\':\'none\'}">\n\t\t<div>\n\t\t\t<a id="{{uniqueId}}_handler" class="inline-option-link tipped-click" style="margin-top: 6px;"\n\t\t\t\tdata-bind="tippedDelegate"\n\t\t\t\tdata-content="{{tippedContent}}"\n\t\t\t\tdata-tipped-options="{{tippedContentOptions}}">\n\t\t\t\t<span class="fa fa-plus-square-o"></span>\n\t\t\t\t<span>{{app.tl(\'Multiple People\')}}</span>\n\t\t\t</a>\n\t\t</div>\n\t</div>\n\x3c!--/ko--\x3e'},3022:function(t,e){t.exports='<div class="w-available-people-picker" data-bind="style:{\'width\': showMultipleText ? \'300px\' : \'210px\'}">\n\n\t<div class="mb--small">\n\t\t\x3c!-- ko component: { name: "widget-text-input", params:{ value:searchText, placeholder:app.tl(\'Search\'), mode:\'small\' } } --\x3e\x3c!-- /ko --\x3e\n\t</div>\n\n\t<ul class="w-available-people-picker__list" data-bind="foreach: filteredPeople()">\n        \x3c!-- ko if: people.length>0 && ($component.searchText().trim() == \'\' || !$data.hiddenFromSearch) --\x3e\n        <li class="w-available-people-picker__company">\n            <div class="w-available-people-picker__company-label">\n                {{name}}\n                <span class="w-available-people-picker__company-options">\n                    <a href="javascript:;" data-bind="click:$component.OnSelectAllInCompany">{{app.tl(\'All\')}}</a> | <a href="javascript:;" data-bind="click:$component.OnSelectNoneInCompany">{{app.tl(\'None\')}}</a>\n                </span>\n            </div>\n\n            <ul data-bind="foreach: people" class="w-available-people-picker__users">\n                \x3c!-- ko if: $component.searchText().trim() == \'\' || !$data.hiddenFromSearch --\x3e\n                <li class="w-available-people-picker__user">\n                    <a href="javascript:;" data-bind="click: $component.OnSelectPerson">\n                        <i class="h-check-icon fa" data-bind="css: {\n                            \'sel\': $component.assignedTo().indexOf($data)>-1 || $component.koObservable()==id,\n                            \'fa-square-o\':!($component.assignedTo().indexOf($data)>-1 || $component.koObservable()==id),\n                            \'fa-check-square\':($component.assignedTo().indexOf($data)>-1 || $component.koObservable()==id)}">\n                        </i>\n\n                        \x3c!-- ko if: id == app.loggedInUser.id() --\x3e\n                            {{app.tl(\'Me\')}} ({{firstName}} {{lastName}})\n                        \x3c!--/ko--\x3e\n                        \x3c!-- ko ifnot: id == app.loggedInUser.id() --\x3e\n                            {{firstName}} {{lastName}}\n                        \x3c!--/ko--\x3e\n                    </a>\n                </li>\n                \x3c!--/ko--\x3e\n            </ul>\n\n\n        </li>\n        \x3c!--/ko--\x3e\n    </ul>\n    <div class="w-available-people-picker__footer">\n        \x3c!-- ko if: showMultipleText --\x3e\n\t\t\t<div class="w-available-people-picker__footer-multiple-people">\n\t\t\t\t<input type="checkbox" id="w-available-people-create-multiple" class="mr--small" data-bind="checked:createMultiple">\n\t\t\t\t<label for="w-available-people-create-multiple">{{app.tl(\'Each selected person must do this\')}}</label>\n\t\t\t</div>\n        \x3c!--/ko--\x3e\n        <button class="btn btn-success" onclick="Tipped.hideAll()">{{app.tl(\'Done\')}}</button>\n    </div>\n</div>\n'},3023:function(t,e){t.exports='<div class="w-avatar-row">\n\t<ul class="w-avatar-row__avatar-list" data-bind="foreach: selectedUsers">\n\t\t\x3c!-- ko if: $index() < $component.avatarLimit --\x3e\n\t\t\t<li class="w-avatar-row__avatar">\n\t\t\t\t<img width="50" height="50" class="w-avatar-row__img tipped-hide" data-bind="attr: { src: avatarUrl, alt: $component.getFullName($data) }, event: { error:app.OnImageThumbLoadFail.bind($data,\'person\') }" data-tipped="{{$component.getFullName($data)}} is scheduled to receive this report"/>\n\t\t\t</li>\n\t\t\x3c!--/ko--\x3e\n\t\t\x3c!-- ko if: $index() == $component.avatarLimit --\x3e\n\t\t\t<li class="w-avatar-row__avatar w-avatar-row__avatar--has-more"\n\t\t\t\tdata-bind="tippedDelegate"\n\t\t\t\tdata-tipped-options="\n\t\t\t\t\tskin: \'light\',\n\t\t\t\t\thideOn: false,\n\t\t\t\t\thideAfter: 300,\n\t\t\t\t\tpadding: false"\n\t\t\t\tdata-content="{{$component.tippedContent}}">\n\t\t\t\t<span class="u-label u-label--rounded u-label--default">\n\t\t\t\t\t<small>\n\t\t\t\t\t\t+{{$component.selectedUsers.length - $component.avatarLimit}}\n\t\t\t\t\t</small>\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t\x3c!--/ko--\x3e\n\t</ul>\n</div>'},3024:function(t,e){t.exports='<ul class="w-avatar-row__tipped-list" data-bind="foreach: $component.selectedUsers">\n    \x3c!-- ko if: $index() >= $component.avatarLimit --\x3e\n    <li  class="w-avatar-row__tipped-item">\n        <img class="w-avatar-row__img" width="50" height="50" data-bind="attr: { src: avatarUrl, alt: $component.getFullName($data) }, event: { error:app.OnImageThumbLoadFail.bind($data,\'person\') }" />\n        <span class="w-avatar-row__tipped-name">{{$component.getFullName($data)}}</span>\n    </li>\n    \x3c!--/ko--\x3e\n</ul>'},3038:function(t,e){t.exports='\x3c!-- ko if: item[countKey]()==0 && canAddComment() --\x3e\n\t<span class="w-comment-icon w-comment-icon--add-comment">\n\t\t<a href="javascript:;" data-tipped="{{ app.tl(\'Add Comment\') }}" aria-label="{{ app.tl(\'Add Comment\') }}" data-bind="click: OnClickIcon" class="w-comment-icon__link-hold tipped-hide">\n\t\t\t\x3c!-- ko if: type == \'file\' || type == \'notebook\'  --\x3e\n\t\t\t\t<i class="w-comment-icon__icon fa fa-comment" aria-hidden="true"><span class="w-comment-icon__icon-plus">+</span></i>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\x3c!-- ko if: type == \'milestone\' || type == \'link\' --\x3e\n\t\t\t\t<i class="w-comment-icon__icon fa fa-comment" aria-hidden="true"></i>\n\t\t\t\t<span class="w-comment-icon__comment-label">\n\t\t\t\t\t{{ app.tl(\'Add Comment\') }}\n\t\t\t\t</span>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</a>\n\t</span>\n\x3c!--/ko--\x3e\n\n\x3c!-- ko if: item[countKey]() > 0 --\x3e\n\t<span class="w-comment-icon" data-bind="tippedDelegate, css: { \'w-comment-icon--has-comments\': type == \'file\' || type == \'notebook\' }" data-tipped-options="\n\t\tshowOn: \'mouseover\',\n\t\thideOnClickOutside: true,\n\t\thideOn: false,\n\t\thideAfter: 300,\n\t\tposition:{\n\t\t\ttarget: \'topmiddle\',\n\t\t\ttooltip: \'bottommiddle\'\n\t\t},\n\t\tcontainment: true,\n\t\tcontainer: $(\'body\'),\n\t\tskin: \'light\',\n\t\thideOthers: true" data-content="{{tippedContent}}">\n\n\t\t<a href="javascript:;" class="w-comment-icon__link-hold tipped" aria-label="{{app.tl(\'Comments\')}}" data-bind="click: OnClickIcon, css: {\'is-unread\': ko.unwrap(item.hasUnreadComments)}">\n\t\t\t<i class="w-comment-icon__icon fa fa-comment" aria-hidden="true"></i>\n\t\t\t<span class="w-comment-icon__count-label">{{item[countKey]}}</span>\n\t\t\t<span class="w-comment-icon__comment-label">{{ (item[countKey]()==1 ? app.tl(\'Comment\') : app.tl(\'Comments\')) }}</span>\n\t\t</a>\n\n\t</span>\n\x3c!--/ko--\x3e'},3039:function(t,e){t.exports="<div style=\"min-width:100px;min-height:50px;overflow:hidden;\">\n\t\x3c!-- ko component: { name:'widget-tipped-last-comments', params:{ selectedItem:item, id:item.id(), type:$component.getPlural(type), countKey: countKey } } --\x3e\x3c!-- /ko --\x3e\n</div>"},3048:function(t,e){t.exports='<div>\n    <div class="mb--small">\n        <select data-bind="select2:{ \n                value: fieldId, \n                data: customFieldsForDropdown,\n                placeholder: app.tl(\'Select a field\')\n            }" \n            style="width: 100%;">\n        </select>\n    </div>\n\n    \x3c!-- ko if: hasSelectedField --\x3e\n        <div class="mb--small">\n            <select data-bind="select2:{ \n                    value: operator, \n                    data: availableOperators, \n                    placeholder: app.tl(\'Select option\')\n                }" \n                style="width: 100%;">\n            </select> \n        </div>\n        \n        <div class="mb--small">\n            \x3c!-- ko if: inputType() === \'input\' --\x3e\n                <input \n                    type="text" \n                    class="form-control filters-sidebar__form-control pl--medium" \n                    data-bind="textInput: searchTerm"\n                    placeholder="{{app.tl(\'Search\') + app.localizationPreferences().ellipsis}}">      \n            \x3c!-- /ko --\x3e\n            \x3c!-- ko if: inputType() === \'range\' --\x3e\n                <div class="flex flex-items-center">\n                    <span>\n                        <input \n                            type="text" \n                            class="form-control filters-sidebar__form-control pl--medium" \n                            data-bind="textInput: minRangeValue"\n                            placeholder="{{app.tl(\'Min\') + app.localizationPreferences().ellipsis}}"> \n                    </span>\n                    <span class="mx--medium">{{ app.tl (\'to\') }}</span>\n                    <span>\n                        <input \n                            type="text" \n                            class="form-control filters-sidebar__form-control pl--medium" \n                            data-bind="textInput: maxRangeValue"\n                            placeholder="{{app.tl(\'Max\') + app.localizationPreferences().ellipsis}}"> \n                    </span>\n\n                </div>\n            \x3c!-- /ko --\x3e\n            \x3c!-- ko if: inputType() === \'multi\' --\x3e\n                <div>\n                    \x3c!-- ko component: {\n                        name: \'widget-itemFilter\',\n                        params: {\n                            dataSource: dropdownOptionsDataSource,\n                            placeholder: app.tl(\'Choose dropdown options\')\n                        }\n                    }--\x3e\n                    \x3c!-- /ko --\x3e\n                </div>\n            \x3c!-- /ko --\x3e\n            \x3c!-- ko if: inputType() === \'dropdown\' --\x3e\n                <div>\n                    <select data-bind="select2: { \n                            value: searchTerm, \n                            data: dropdownSelect2Options,\n                            templateResult: app.select2CustomFieldTemplateResult,\n                            templateSelection: app.select2CustomFieldTemplateResult,\n                            placeholder: app.tl(\'Choose dropdown option\'),\n                            allowClear: true\n                        }" \n                        style="width: 100%;">\n                    </select> \n                </div>\n            \x3c!-- /ko --\x3e\n        </div>                \n    \x3c!-- /ko --\x3e\n\n    <div>\n        <a href="javascript:;" class="w-custom-field-filter__clear-btn" data-bind="click: OnClickClear">{{app.tl(\'Clear\')}}</a>\n    </div>\n</div>\n\n\n'},3049:function(t,e){t.exports="\x3c!-- ko if: customFieldsData.state() == 'content' --\x3e\n    \x3c!-- ko foreach: userSelectedFilters --\x3e\n        <div class=\"w-custom-field-filter\">\n            \x3c!-- ko component: {\n                    name: 'widget-custom-field-filter-item',\n                    params: {\n                        fieldId: fieldId,\n                        operator: operator,\n                        value: value,\n                        uuid: uuid,\n                        allCustomFields: $component.customFieldsData,\n                        selectedCustomFieldIds: $component.selectedCustomFieldIds\n                    }\n                }\n            --\x3e\x3c!-- /ko --\x3e        \n        </div>\n    \x3c!-- /ko --\x3e\n    <div class=\"w-custom-field-filter\">\n        <button type=\"button\" class=\"w-custom-field-filter__add-btn btn btn-sm btn-link lhs no-outline\" data-bind=\"click: OnClickAddFilter\">\n            <span class=\"mr--small\">\n                \x3c!-- ko component: {\n                        name: 'ui-common-icon',\n                        params: {\n                            name: 'add-regular',\n                            size: '1x'\n                        }\n                    } --\x3e\n                \x3c!-- /ko --\x3e\n            </span>\n            {{app.tl('Add Custom Field Filter')}}\n        </button>\n    </div>\n\x3c!-- /ko --\x3e\n\x3c!-- ko if: customFieldsData.state() == 'loading' --\x3e\n    <div class=\"flex flex-items-center\">\n        <p class=\"text-center\">\n            <i class=\"fa fa-circle-o-notch fa-spin fa-fw mr--small\"></i> {{app.tl('Loading')}}\n        </p>\n    </div>\n\x3c!-- /ko --\x3e\n\x3c!-- ko if: customFieldsData.state() == 'blank' --\x3e\n    <p>{{app.tl('You have no custom fields available yet')}}</p>\n    \x3c!-- ko if: app.loggedInUser.permissions.canManageCustomFields --\x3e\n        <button class=\"btn btn-link btn-sm lhs no-outline px--none\" data-bind=\"click: OnClickCreateField\">{{app.tl('Create a custom field')}}</button>\n    \x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n"},3083:function(t,e){t.exports='\x3c!-- transform: translate3d(0,0,0); forces the browser to create a separate layer for the\nnotification box, which greatly reduces the paint time when scrolling long lists with\nthe notification box visible. --\x3e\n<div id="notifGroup" style="transform: translate3d(0,0,0); min-width:385px; top:50px;"\n\tdata-bind="\n\t\tstyle: {\n\t\t\t\'z-index\':app.consts.ZINDICES.NOTIFICATIONS\n\t\t},\n\t\tcss: {\n\t\t\tfloating: app.currentScrollTop() > 5\n\t\t}"\n\t\tclass="widgetHeaderNotifications block">\n\t<div id="notifBar" class="noSel">\n\t\t<div id="notifBarLHS" class="noSel">{{app.tl(\'Notifications\')}}</div>\n\t\t<span id="nCog" style="float:right;display:inline-block;padding:6px 5px 0 0;margin:5px 5px;" class="tipped-click cursor--pointer" data-tipped-options="inline:\'notificationsPreference\',skin:\'light\',hideAfter:200,position:\'topmiddle\',showOn:\'click\', container: \'.widgetHeaderNotifications\', hideOnClickOutside:true,hideOn:{tooltip:\'mouseleave\',element:\'click\'}">\n\t\t\t<a id="nCogOn" href="javascript:" class="fa fa-cog" data-bind="style:{\'opacity\':app.notifications.isOn()?\'1\':\'0.5\'}"></a>\n\t\t</span>\n\t\t\x3c!-- ko if: app.notifications.unreadCount() > 0 --\x3e\n\t\t<a id="nCb" class="b" href="javascript:;" data-bind="click:function(){ app.notifications.MarkAllAsRead() }">{{app.tl(\'All Read\')}}</a>\n\t\t\x3c!-- /ko --\x3e\n\t</div>\n\n\t<div style="display: none;" id="notificationsPreference">\n\t\t<p class="mb--none flex flex-items-center text-nowrap">\n\t\t\t\x3c!-- ko if: app.notifications.isOn() --\x3e\n\t\t\t\t<span class="mr--medium color--gray">{{ app.tl(\'Disable Notifications\') }}</span>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\x3c!-- ko if: !app.notifications.isOn() --\x3e\n\t\t\t\t<span class="mr--medium">{{ app.tl(\'Enable Notifications\') }}</span>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t\t<a class=\'onOffToggle\' title="{{app.tl(\'Notifications Enabled?\')}}" data-bind="css: {\'onOffToggleOff\': !app.notifications.isOn(), \'onOffToggleOn\': app.notifications.isOn()}, click: function(){ app.notifications.TogglePreference() }"></a>\n\t\t</p>\n\t</div>\n\n\t\x3c!-- ko if: app.notifications.isOn() --\x3e\n\t\t\x3c!-- ko if: app.notifications.isLoading() --\x3e\n\t\t\t<div id="twimMsg">{{app.tl("Loading")}}{{{app.localizationPreferences().ellipsis}}}</div>\n\t\t\x3c!-- /ko --\x3e\n\t\t\x3c!-- ko ifnot: app.notifications.isConnected() --\x3e\n\t\t\t<div id="twimMsg">{{app.tl("Not Connected")}}</div>\n\t\t\x3c!-- /ko --\x3e\n\t\t\x3c!-- ko if: !app.notifications.isLoading() && app.notifications.isConnected() && app.notifications.eventList().length == 0 --\x3e\n\t\t\t<div id="twimMsg">{{app.tl("No Notifications")}}</div>\n\t\t\x3c!-- /ko --\x3e\n\t\x3c!-- /ko --\x3e\n\t\x3c!-- ko ifnot: app.notifications.isOn() --\x3e\n\t\t<div id="twimMsg">{{app.tl("Notifications are Disabled")}}</div>\n\t\x3c!-- /ko --\x3e\n\n\t\x3c!-- ko if: app.notifications.isOn() --\x3e\n\t\t\x3c!-- ko if: app.notifications.isConnected() --\x3e\n\t\t<div id="notifPopStack" data-bind="style:{\'max-height\':app.notifications.maxListHeight()+\'px\'}, event:{\'scroll\': OnScrollList}, outsidescroll: false">\n\t\t\t\x3c!-- ko foreach: app.notifications.eventList --\x3e\n\n\t\t\t\x3c!-- ko if: $component.isNewDay($index()) --\x3e\n\t\t\t\t<div class="date-divider">{{ app.utility.GetRelativeDate(eventTimeUTC) }}</div>\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t<div id="notifiHover" class="notifPopWrap " style="display: block; height: 70px; opacity: 1;">\n\t\t\t\t<div class="notifPopWrap2">\n\t\t\t\t\t<div class="notifPop" data-bind="attr:{id:\'notif\'+_timestamp}">\n\t\t\t\t\t\t<div class="userPhotoWrap">\n\t\t\t\t\t\t\t<img class="userPhoto" data-bind="attr:{\'src\':userImage}">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\x3c!-- ko if: lockdownId != null && lockdownId != \'\' && lockdownId != \'0\' --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko component: { name:"widget-privacy-icon", params: {private:isPrivate, lockdownId:lockdownId, projectId:projectId, id:itemId, title:description, type:itemType, closeOnScroll:true} } --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\x3c!-- <img style="position:absolute;top:41px;left:40px;" src="//cdn.teamwork.com/images/icons/private.png" class="tipped"> --\x3e\n\n\t\t\t\t\t\t<a id="markAsRead" class="x tipped-hide" href="javascript:;" title="{{app.tl(\'Mark as Read\')}}" data-bind="click:app.notifications.MarkAsRead">\n\t\t\t\t\t\t\t<i class="fa fa-circle on"></i>\n\t\t\t\t\t\t\t<i class="fa fa-circle-o off"></i>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<span class="d" data-bind="text: moment(eventTimeUTC).format(app.loggedInUser.localization.timeFormat()), tippedDelegate" data-content="{{moment(eventTimeUTC).format(app.notifications.GetDateTimeFormat())}}">H:mmA</span>\n\t\t\t\t\t\t<div class="l1">\n\t\t\t\t\t\t\t{{app.notifications.GetEventTitle($data)}}\n\t\t\t\t\t\t\t\x3c!-- ko ifnot: actionType == \'deleted\' || itemType == \'project\' || itemType == \'status\' --\x3e\n\t\t\t\t\t\t\t\t<i id="notificationQVIcon" data-bind="click: $component.onClickOpenNotificationQV" class="fa fa-search-plus" aria-hidden="true"></i>\n\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="l2">\n\t\t\t\t\t\t\t<div class="rhs">\n\t\t\t\t\t\t\t\t<a class="ql task new" href="javascript:;" data-bind="attr:{\'class\':\'ql \'+itemType+\' \'+actionType, href: actionType == \'deleted\' ? \'javascript:;\' : \'#\'+itemLink }, click: $component.OnClickLink">\n\t\t\t\t\t\t\t\t\t<span data-bind="attr:{\'class\':app.notifications.GetTypeClass($data)}"></span>\n\t\t\t\t\t\t\t\t\t{{description}}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="l3">\n\t\t\t\t\t\t\t\x3c!-- ko if: extraDesc != \'\' --\x3e\n\t\t\t\t\t\t\t<a class="l3 ql" data-bind="text:extraDesc, attr:{\'href\':\'#\'+extraLink}, click: function(i,e){app.notifications.MarkAsRead($data, e); return true;}">Extra Description</a>\n\t\t\t\t\t\t\t<a>-</a>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t<a class="l3 ql" data-bind="attr:{\'href\':\'#projects/\'+projectId+\'/overview\'}, text:projectName, click: function(i,e){app.notifications.MarkAsRead($data, e); return true;}">Project Name</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</div>\n\t\t\x3c!-- /ko --\x3e\n\t\t<a id="notifShowRead" href="javascript:;" class="btn btn-default btn-sm">{{app.tl(\'Show read notifications\')}}</a>\n\t\x3c!-- /ko --\x3e\n</div>\n\n\n\x3c!-- IMPORTANT - Mark this template loaded --\x3e\n\x3c!-- ko if: $data.readyToShow != null && readyToShow --\x3e\n    <div data-bind="template:{afterRender:function(){templateLoaded(true)}}" class="hidden"></div>\n\x3c!-- /ko --\x3e\n'},3084:function(t,e){t.exports='<ul class="options-list">\n\t<li class="has-border">\n\t\t<label class="mb--none cursor--pointer">\n\t\t\t<input type="checkbox" data-bind="checked: includeDeletedUsers" style="margin-top: 6px;">\n\t\t\t<span class="mr--small">{{app.tl(\'Include deleted users\')}}</span>\n\t\t\t\x3c!-- ko component: {\n\t\t\t\tname: \'widget-tip\',\n\t\t\t\tparams: {\n\t\t\t\t\thtml: text,\n\t\t\t\t\tmaxWidth: 200\n\t\t\t\t}\n\t\t\t} --\x3e\x3c!-- /ko --\x3e\n\t\t</label>\n\t</li>\n</ul>'},3085:function(t,e){t.exports='\x3c!-- ko if: help --\x3e\n    \x3c!-- ko if: type == \'taskList\' || type == \'task\' || type == \'project\' || type == \'milestone\' || isInPromo --\x3e\n        <div class="w-inline-help">\n            <div class="w-inline-help__image">\n                <img data-bind="attr: {src: help().image}, css: {\'w-inline-help__promo-icon\':isInPromo}">\n            </div>\n            <div class="w-inline-help__detail">\n                <h3 class="w-inline-help__title">{{help().title}}</h3>\n                <p class="w-inline-help__content">{{help().content}}</p>\n            </div>\n\n            \x3c!-- ko if: help().id == \'invite\' --\x3e\n                <button type="button" class="w-inline-help__invite btn btn-primary" data-bind="click: OnClickShowModalInvite">{{app.tl(\'Invite users\')}}</button>\n            \x3c!-- /ko --\x3e\n\n            \x3c!-- ko if: help().url --\x3e\n                <a class="w-inline-help__more-info" href="javascript:;" data-bind="click: OnMoreInfoClick">\n                    \x3c!-- ko if: help().button --\x3e\n                        {{help().button}}\n                    \x3c!-- /ko --\x3e\n                    \x3c!-- ko ifnot: help().button --\x3e\n                        \x3c!-- ko if: help().id != \'invite\' --\x3e\n                            {{app.tl(\'Learn More\')}}\n                        \x3c!-- /ko --\x3e\n                        \x3c!-- ko if: help().id == \'invite\' --\x3e\n                            <i class="fa fa-question-circle mr--small" aria-hidden="true"></i>\n                        \x3c!-- /ko --\x3e\n                    \x3c!-- /ko --\x3e\n                </a>\n            \x3c!-- /ko --\x3e\n            <div class="w-inline-help__close" data-bind="click: OnCloseClick">\n                \x3c!-- ko component: {\n                    name: \'ui-common-icon\',\n                    params: {\n                        name: "times"\n                    }\n                } --\x3e\n            \x3c!-- /ko  --\x3e\n            </div>\n        </div>\n    \x3c!-- /ko --\x3e\n    \x3c!-- ko if: type == \'peoplePickerV\' || type == \'peoplePickerH\' --\x3e\n        <div class="w-inline-help__people"\n            data-bind="css: {\n                \'w-inline-help__people--vertical\': type == \'peoplePickerV\',\n                \'w-inline-help__people--horizontal\': type == \'peoplePickerH\',\n            }">\n            <div class="w-inline-help__people__close" data-bind="click: OnCloseClick">\n                \x3c!-- ko component: {\n                    name: \'ui-common-icon\',\n                    params: {\n                        name: "times"\n                    }\n                } --\x3e\n            \x3c!-- /ko  --\x3e\n            </div>\n            <div class="w-inline-help__people__body">\n                <div class="w-inline-help__people__image">\n                    <img data-bind="attr: {src: help().image}">\n                </div>\n                <div class="w-inline-help__people__main">\n                    <h3 class="w-inline-help__people__title">{{help().title}}</h3>\n                    \x3c!-- ko if: type == \'peoplePickerH\' --\x3e\n                        <p class="w-inline-help__people__content">{{help().content}}</p>\n                    \x3c!-- /ko --\x3e\n                    <button type="button" class="w-inline-help__people__invite btn btn-primary" data-bind="click: OnClickShowModalInvite">{{app.tl(\'Invite users\')}}</button>\n                </div>\n            </div>\n\n            \x3c!-- ko if: help().url --\x3e\n                <a class="w-inline-help__people__more-info" href="javascript:;" data-bind="click: OnMoreInfoClick">\n                    <i class="fa fa-question-circle mr--small" aria-hidden="true"></i>\n                </a>\n            \x3c!-- /ko --\x3e\n        </div>\n    \x3c!-- /ko --\x3e\n\n\x3c!-- /ko --\x3e\n'},3092:function(t,e){t.exports='<div class="w-filter-items">\n\t\x3c!-- Selected items --\x3e\n\t<ul class="w-filter-items__selected w-filter-items__selected--list-vertical" data-bind="css: { w-filter-items__selected--list-vertical--scroll: $component.hasScrollbar}">\n\t\t\x3c!-- ko foreach: $component.selectedItems --\x3e\n\t\t\t\x3c!-- ko if: $index() >= $component.maxVisibleSelection --\x3e\n\t\t\t\t<li>\n\t\t\t\t\t<div class="w-filter-items__item">\n\t\t\t\t\t\t<div class="w-filter-items__item-text">\n\t\t\t\t\t\t\t\x3c!-- ko bindHtml: suggestionTemplate --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t<a href="#" class="w-filter-items__item-clear fa fa-times" data-bind="click: $component.OnRemoveSelectedItem"></a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t\x3c!-- /ko --\x3e\n\t</ul>\n</div>\n'},3093:function(t,e){t.exports='<div class="w-filter-items">\n\n\t\x3c!-- Selected items --\x3e\n\t<ul class="w-filter-items__selected list-inline">\n\t\t\x3c!-- ko foreach: selectedItems --\x3e\n\t\t\t\x3c!-- ko if: $index() < $component.maxVisibleSelection --\x3e\n\t\t\t\t<li>\n\t\t\t\t\t<div class="w-filter-items__item">\n\t\t\t\t\t\t<div class="w-filter-items__item-text">\n\t\t\t\t\t\t\t\x3c!-- ko bindHtml: suggestionTemplate --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="w-filter-items__item-remove">\n\t\t\t\t\t\t\t<a href="#" class="w-filter-items__item-clear fa fa-times" data-bind="click: $component.OnRemoveSelectedItem"></a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t\x3c!-- /ko --\x3e\n\n\t\t\x3c!-- ko if: $component.selectedItems().length > $component.maxVisibleSelection --\x3e\n\t\t\t<li data-bind="tippedDelegate"\n\t\t\t\tdata-tipped-options="\n\t\t\t\t\tshowOn: \'click\',\n\t\t\t\t\tskin: \'light\',\n\t\t\t\t\tposition: \'lefttop\',\n\t\t\t\t\thideOn: false,\n \t\t\t\t\thideAfter: 1000"\n\t\t\t\tdata-content="{{$component.overflowItemsContent}}">\n\t\t\t\t<div class="w-filter-items__item w-filter-items__item--extra">\n\t\t\t\t\t+<strong>{{$component.selectedItems().length - $component.maxVisibleSelection}}</strong>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t\x3c!-- /ko --\x3e\n\t</ul>\n\n\t<div\n\t\tclass="w-filter-items__search"\n\t\tdata-bind="event: { focusin: OnFocusIn, focusout: OnFocusOut, mouseover: OnMouseOver, mouseout: OnMouseOut }">\n\n\t\t\x3c!-- Search field --\x3e\n\t\t<div class="w-filter-items__search-head">\n\t\t\t<input\n\t\t\t\ttype="text"\n\t\t\t\tclass="form-control filters-sidebar__form-control w-filter-items__search-input"\n\t\t\t\tplaceholder="{{placeholder}}"\n\t\t\t\tdata-bind="\n\t\t\t\t\tdisable: disabled,\n\t\t\t\t\ttextInput: searchTerm,\n\t\t\t\t\thasFocus: searchTermFieldHasFocus,\n\t\t\t\t\tevent: { keyup: OnKeyUp }"\n\t\t\t>\n\n\t\t\t<button\n\t\t\t\ttype="reset"\n\t\t\t\tclass="btn btn-link w-filter-items__search-input-reset"\n\t\t\t\taria-label="Reset items"\n\t\t\t\tdata-bind="click: OnResetSearchTerm, css: { hidden: searchTerm().length === 0 }"\n\t\t\t>\n\t\t\t\t<i class="fa fa-times" aria-hidden="true" title="Reset"></i>\n\t\t\t</button>\n\t\t</div>\n\n\t\t\x3c!-- Search results --\x3e\n\t\t<div class="w-filter-items__search-collapse" data-bind="css: { \'is-open\': shouldShowDropdown }">\n\t\t\t<ul id="{{uniqueId}}" class="w-filter-items__search-results list-unstyled">\n\t\t\t\t\x3c!-- ko foreach: matchingData --\x3e\n\t\t\t\t\t\x3c!-- ko if: $component.isNewBlock($index()) --\x3e\n\t\t\t\t\t\t<li class="px--medium py--small text-muted">\n\t\t\t\t\t\t\t{{{ $component.getNewBlockText($index()) }}}\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t<li data-bind="keymando: $component.getKeymandoBindingItem($data, $index)">\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref="#"\n\t\t\t\t\t\t\ttabindex="-1"\n\t\t\t\t\t\t\tclass="w-filter-items__item-block"\n\t\t\t\t\t\t\tdata-bind="\n\t\t\t\t\t\t\t\tclick: $component.OnSelectItem,\n\t\t\t\t\t\t\t\tbindHtml: suggestionTemplate\n\t\t\t\t\t\t\t"\n\t\t\t\t\t\t></a>\n\t\t\t\t\t</li>\n\t\t\t\t\t\x3c!-- ko if: $data.children --\x3e\n\t\t\t\t\t\t\x3c!-- ko foreach: $data.children --\x3e\n\t\t\t\t\t\t<li data-bind="keymando: $component.getKeymandoBindingItem($data, $index)">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref="#"\n\t\t\t\t\t\t\t\t\ttabindex="-1"\n\t\t\t\t\t\t\t\t\tclass="w-filter-items__item-block"\n\t\t\t\t\t\t\t\t\tdata-bind="\n\t\t\t\t\t\t\t\t\t\tclick: $component.OnSelectItem,\n\t\t\t\t\t\t\t\t\t\tbindHtml: suggestionTemplate"\n\t\t\t\t\t\t\t\t></a>\n\t\t\t\t\t\t\t</li>\n\n\t\t\t\t\t\t\t\x3c!-- ko if: $data.children --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- ko foreach: $data.children --\x3e\n\t\t\t\t\t\t\t\t<li data-bind="keymando: $component.getKeymandoBindingItem($data, $index)">\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\thref="#"\n\t\t\t\t\t\t\t\t\t\t\ttabindex="-1"\n\t\t\t\t\t\t\t\t\t\t\tclass="w-filter-items__item-block"\n\t\t\t\t\t\t\t\t\t\t\tdata-bind="\n\t\t\t\t\t\t\t\t\t\t\t\tclick: $component.OnSelectItem,\n\t\t\t\t\t\t\t\t\t\t\t\tbindHtml: suggestionTemplate"\n\t\t\t\t\t\t\t\t\t\t></a>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t<li data-bind="keymando: $component.keymandoLoadMoreBinding()">\n\t\t\t\t\t<a href="#"\n\t\t\t\t\t\ttabindex="-1"\n\t\t\t\t\t\tclass="w-filter-items__item-block"\n\t\t\t\t\t\tdata-bind="\n\t\t\t\t\t\t\tclick: OnClickLoadMore,\n\t\t\t\t\t\t\tcss: {\n\t\t\t\t\t\t\t\tinvisible: !hasMoreRecords()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t">\n\t\t\t\t\t\t\x3c!-- ko if: isLoadingData --\x3e\n\t\t\t\t\t\t\t<i class="fa fa-spin fa-circle-o-notch mr--small"></i>\n\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\x3c!-- ko ifnot: isLoadingData --\x3e\n\t\t\t\t\t\t\t<i class="fa fa-ellipsis-h mr--small"></i>\n\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t{{loadMoreText}}\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\n\t\t\t\t\x3c!-- ko if: isLoadingData() && !hasMatchingData() --\x3e\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a href="javascript:;"\n\t\t\t\t\t\t\ttabindex="-1"\n\t\t\t\t\t\t\tclass="w-filter-items__item-block">\n\t\t\t\t\t\t\t<i class="fa fa-spin fa-circle-o-notch mr--small"></i>\n\t\t\t\t\t\t\t{{app.tl(\'Loading\')}}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\x3c!-- ko if: !isLoadingData() && !hasMatchingData() --\x3e\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<span class="w-filter-items__no-results">{{app.tl(\'No results found\')}}</span>\n\t\t\t\t\t</li>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</ul>\n\t\t</div>\n\n\t</div>\n</div>\n'},3141:function(t,e){t.exports='\x3c!-- ko if: shared() != null --\x3e\n\t<div data-bind="onRendered: OnRendered">\n\t\t<label style="width: 100%">\n\t\t\t<span style="float:left; margin-right: 5px;">\n\t\t\t\t\x3c!-- ko component: {name: \'widget-toggleSwitch\', params:{value: shared().item.includeSelf}} --\x3e\x3c!--/ko--\x3e\n\t\t\t</span>\n\t\t\t{{app.tl(\'Include Me\')}}\n\t\t</label>\n\t\t<div data-bind="visible: shared().item.visiblePeople().length > 0">\n\t\t\t<div id="followers-tip-list" style="cursor:pointer; max-width: 400px; min-width: 150px; max-height: 200px; overflow-y:auto;">\n\t\t\t\t\x3c!-- ko foreach: shared().item.visiblePeople() --\x3e\n\t\t\t\t\t<h3 style="font:11px normal Helvetica,Arial,sans-serif; margin:8px 0 4px;">{{name}}</h3>\n\t\t\t\t\t\x3c!-- ko foreach: people() --\x3e\n\t\t\t\t\t\t<div style="position:relative;font-size:10px;padding:4px 20px 4px 26px;color:#444;" data-bind="visible:$data[$component.shared().followerKey]">\n\t\t\t\t\t\t\t{{fullName}}\n\t\t\t\t\t\t\t<img data-bind="attr:{src: ko.unwrap(avatarUrl)}, event: {error:app.OnImageThumbLoadFail.bind($data,\'person\')}" width="16" height="16" alt="" border="0" style="position:absolute;left:5px;top:4px;border-radius:2px;">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t</div>\n\t\t\t<div><a class="subtle" data-bind="attr:{href:\'javascript:;\'}, click:shared().clearAll">{{app.tl(\'Clear All\')}}</a></div>\n\t\t</div>\n\t</div>\n\x3c!--/ko--\x3e'},3142:function(t,e){t.exports='\x3c!-- FIXME: due to reborn / develop inconsistencies, the BEM classes in this component have the \'-reborn\' postfix. Remove it after reborn is merged to develop.--\x3e\n\x3c!-- ko if: visible --\x3e\n\t<div class="w-people-picker-reborn">\n\t\t\x3c!-- ko if: isRequired--\x3e\n\t\t\t<label class="hidden" for="responsible">{{app.tl(\'Who is responsible?\')}}</label>\n\t\t\t<input id="responsible" type="hidden" data-required="true" data-bind="value: enabledIds">\n\t\t\x3c!-- /ko --\x3e\n\n\t\t\x3c!-- ko if: format == \'button\' --\x3e\n\t\t\t<div data-bind="onRendered: OnRendered">\n\t\t\t\t\x3c!-- ko if: useTipped || useModal --\x3e\n\t\t\t\t\t\x3c!-- todo: refactor and remove ppd. Also remove inline styles after the refactor--\x3e\n\t\t\t\t\t<a class="w-people-picker-reborn__privacy-opts ppd tipped text-decoration--none"\n\t\t\t\t\t\thref="javascript:;"\n\t\t\t\t\t\tdata-bind="\n\t\t\t\t\t\t\tclick: OnDropdownClicked,\n\t\t\t\t\t\t\tstyle: { minWidth: (minWidth ? minWidth + \'px\' : 0) },\n\t\t\t\t\t\t\ttippedDelegate: {\n\t\t\t\t\t\t\t\tenabled: useTipped,\n\t\t\t\t\t\t\t\tonShow: OnShow\n\t\t\t\t\t\t\t}"\n\t\t\t\t\t\tdata-tipped-options="\n\t\t\t\t\t\t\tshowOn: \'click\',\n\t\t\t\t\t\t\tcloseButtonSkin: \'light\',\n\t\t\t\t\t\t\tskin: \'light\',\n\t\t\t\t\t\t\thideOn: false,\n\t\t\t\t\t\t\thideOnClickOutside: true,\n\t\t\t\t\t\t\toffset: {\n\t\t\t\t\t\t\t\tx: 0,\n\t\t\t\t\t\t\t\ty: 1\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tposition: {\n\t\t\t\t\t\t\t\ttarget:\'bottomleft\',\n\t\t\t\t\t\t\t\ttooltip: \'topleft\'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tstem: false"\n\t\t\t\t\t\tdata-content="{{$component.tippedContent}}">\n\n\t\t\t\t\t\t\x3c!-- ko if: showIcon --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: pickerType == \'responsible\' --\x3e\n\t\t\t\t\t\t\t\t<i class="fa fa-user mr--small" style="font-size: 12px;"></i>\n\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: pickerType == \'privacy\' --\x3e\n\t\t\t\t\t\t\t\t<i class="fa fa-lock mr--small"></i>\n\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: pickerType == \'followers\' --\x3e\n\t\t\t\t\t\t\t\t<i class="fa fa-envelope mr--small" style="font-size: 10px;"></i>\n\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\t\t<span class="w-people-picker-reborn__assignees-text" data-bind="attr: {title: ko.unwrap(assigneesText).longText}, text: ko.unwrap(assigneesText).shortText, style: { minWidth: (minWidth ? minWidth-30 + \'px\' : 0) }">{{app.tl(\'Everybody on project\')}}</span>\n\n\t\t\t\t\t\t\x3c!-- ko if: !useModal --\x3e\n\t\t\t\t\t\t\t<span class="fa fa-chevron-down" style="font-size:10px;display:inline-block;">&nbsp;</span>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\x3c!-- ko if: useModal --\x3e\n\t\t\t\t\t\t\t<span style="float:right; margin-left: 10px; margin-right:5px;" data-bind="visible: pickerType==\'followers\', attr: {\'data-component\': JSON.stringify({\n\t\t\t\t\t\t\t\tname: \'widget-people-picker-tipped-followers\',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tsharedKey: followersTippedUniqueId\n\t\t\t\t\t\t\t\t}})\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttippedDelegate" class="notify-icon ignore-click" data-tipped-options="skin:\'light\', hideOn:false, hideAfter:300">\n\t\t\t\t\t\t\t\t<i class="fa fa-info-circle ignore-click"></i>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t</a>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\x3c!-- ko if: !useTipped && !useModal --\x3e\n\t\t\t\t\t<div data-bind="bindHtml: $component.tippedContent" class="people-dropdown-wrapper"></div>\n\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t</div>\n\t\t\x3c!--/ko--\x3e\n\n\t\t\x3c!-- TODO: This below (and using this widget with format:\'select\') is altogether another widget - there\'s very little overlap with the privacy picking. Ideally migrate it to another new widget.--\x3e\n\t\t\x3c!-- ko if: format == \'select\' --\x3e\n\t\t\t\x3c!-- ko if: ko.unwrap(title) != \'\' --\x3e\n\t\t\t\t<label class="block">\n\t\t\t\t\t\x3c!-- ko if: pickerType == \'followers\' --\x3e\n\t\t\t\t\t\t<i class="fa fa-envelope-o mr--small" aria-hidden="true"></i>\n\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{{title}}\n\t\t\t\t\t</span>\n\t\t\t\t\t\x3c!-- ko if: enabledIds().length > 0 --\x3e\n\t\t\t\t\t\t<span style="margin-left: 5px; font-size: 100%;">( <a href="javascript:;" data-bind="click: OnClickClearAll" style="text-decoration: underline; color: #888;">{{app.tl(\'Remove All\')}}</a>) </span>\n\t\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\t\x3c!-- ko if: false --\x3e\n\t\t\t\t\t\t<span style="float:right; font-size:100%;" data-bind="click: OnClickViewAllSelected">{{app.tl(\'Show All\')}}</span>\n\t\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\t\x3c!-- ko if: loadingPeople --\x3e\n\t\t\t\t\t\t<i class="fa fa-circle-o-notch fa-spin fa-fw color--muted"></i>\n\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t</label>\n\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\x3c!-- ko ifnot: loadingPeople --\x3e\n\t\t\t\t<div class="notify-user-list w-notify-users" data-bind="click: OnDropdownClicked, css:{\'is-empty\': enabledIds().length == 0, \'show-all\': isViewingAll}">\n\t\t\t\t\t<ul class="w-notify-users__list">\n\t\t\t\t\t\t\x3c!-- ko foreach: people --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: $data[$component.selectedKey]() --\x3e\n\t\t\t\t\t\t\t\t<li class="notify-user-list-user w-notify-users__user" data-bind="css:{\'is-current-user\': id() == app.loggedInUser.id()}, clickBubble: false">\n\t\t\t\t\t\t\t\t\t<span class="w-notify-users__user-block">\n\t\t\t\t\t\t\t\t\t\t<img class="w-notify-users__image" alt="{{firstName()}} {{lastName()}}" data-bind="attr: {src: ko.unwrap(avatarUrl)}, event: {error: app.OnImageThumbLoadFail.bind($data,\'person\')}">\n\t\t\t\t\t\t\t\t\t\t\x3c!-- ko if: id() == app.loggedInUser.id() --\x3e\n\t\t\t\t\t\t\t\t\t\t\t<span class="w-notify-users__name">{{app.tl(\'Me\')}}</span>\n\t\t\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c!-- ko ifnot: id() == app.loggedInUser.id() --\x3e\n\t\t\t\t\t\t\t\t\t\t\t<span class="w-notify-users__name">{{firstName()}} {{lastName()}}</span>\n\t\t\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<a href="#0" class="w-notify-users__remove" data-bind="clickBubble: false, click: function() { $data[$component.selectedKey](false) }">\xd7</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<button type="button" class="w-notify-users__select-people">\n\t\t\t\t\t\t\t\t<i class="fa fa-plus fa-btn"></i>\n\t\t\t\t\t\t\t\t\x3c!-- ko if: enabledIds().length == 0 --\x3e\n\t\t\t\t\t\t\t\t\t<span>{{app.tl(\'Select People\')}}</span>\n\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\t\x3c!-- ko if: enabledIds().length > 0 --\x3e\n\t\t\t\t\t\t\t\t\t<span>{{app.tl(\'Add More\')}}</span>\n\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t<div class="w-notify-users__nobody-text color--gray-light" data-bind="visible: enabledIds().length == 0">\n\t\t\t\t\t\t<span class="mr--medium">&mdash;</span>\n\t\t\t\t\t\t{{ app.tl(\'Currently nobody will be notified\') }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\x3c!--/ko--\x3e\n\t\t\x3c!--/ko--\x3e\n\t</div>\n\x3c!--/ko--\x3e\n'},3143:function(t,e){t.exports='<div class="w-people-picker-reborn__content" data-bind="css:{\'is-privacy-modal\': isInPrivacyModal}">\n\t<div class="mb--medium">\n\t\t\x3c!-- ko component: { name:\'widget-text-input\', params:{ value:$component.userFilter, placeholder:app.tl(\'Search\') } } --\x3e\x3c!-- /ko --\x3e\n\t</div>\n\n\t\x3c!-- ko if: showToggleAll --\x3e\n\t\t<div class="w-people-picker-reborn__everybody">\n\t\t\t<label>\n\t\t\t\t<input type="checkbox" data-bind="checked: $component.selectedCount() == 0, click:setAllSelected">\n\t\t\t\t{{app.tl(\'Everybody on project\')}}\n\t\t\t</label>\n\t\t</div>\n\n\t\t<div class="w-people-picker-reborn__separator" data-bind="css:{\'is-red\': selectedCount() != 0}">\n\t\t\t<div class="w-people-picker-reborn__separator-line"></div>\n\t\t\t<small class="w-people-picker-reborn__separator-text">{{ ( selectedCount() == 0 ? app.tl(\'or show only to\') : app.tl(\'only showing to\') ) }}</small>\n\t\t\t<div class="w-people-picker-reborn__separator-line"></div>\n\t\t</div>\n\t\x3c!--/ko--\x3e\n\n\t\x3c!-- ko if: filteredCompanies().length > 0 --\x3e\n\t\t<div class="w-people-picker-reborn__people">\n\t\t\t\x3c!-- ko component: { name:\'widget-list-picker\', params:listPickerParams} --\x3e\x3c!-- /ko --\x3e\n\t\t</div>\n\t\x3c!--/ko--\x3e\n\n\t\x3c!-- ko if: filteredCompanies().length == 0 --\x3e\n\t\t<p class="w-people-picker-reborn__no-results">\n\t\t\t{{app.tl(\'No users found\')}}\n\t\t</p>\n\t\x3c!--/ko--\x3e\n\n\t<div class="w-people-picker-reborn__footer">\n\t\t<span>{{app.tl(\'[_s] selected\', selectedCount())}}</span>\n\t\t\x3c!--ko if: $component.useTipped--\x3e\n\t\t\t<button type="submit" class="btn btn-success" data-bind="click:Tipped.hideAll">{{ app.tl(\'Done\')}}</button>\n\t\t\x3c!--/ko--\x3e\n\t</div>\n</div>'},3172:function(t,e){t.exports="<div class=\"w-projects-dropdown\">\n\t\x3c!-- ko ifnot: project --\x3e\n\t\t\x3c!-- ko component: {\n\t\t\t\tname: 'list-state-loading-new',\n\t\t\t\tparams: {\n\t\t\t\t\titemType: 'data',\n\t\t\t\t\tformat: 'large',\n\t\t\t\t\tshowText: false\n\t\t\t\t}\n\t\t\t} --\x3e\n\t\t\x3c!-- /ko --\x3e\n\t\x3c!-- /ko --\x3e\n\n\t\x3c!-- ko if: project --\x3e\n\t\t\x3c!-- ko if: $component.showHeader --\x3e\n\t\t\t<div class=\"w-projects-dropdown__header\">\n\t\t\t\t<div class=\"w-projects-dropdown__star\" data-bind=\"css:{ 'w-projects-dropdown__star--active': project().starred }, click: OnClickStarProject\">\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: 'ui-common-icon',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tname: 'star-solid',\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</div>\n\t\t\t\t<div class=\"w-projects-dropdown__title\">\n\t\t\t\t\t<span> {{ project().name }} </span>\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- ko if: ko.unwrap(isAdministrator) && ko.unwrap(project().isActive) --\x3e\n\t\t\t\t\t<div class=\"w-projects-dropdown__edit\" data-bind=\"click: OnClickEditProject\" data-tipped=\"{{app.tl('Edit Project')}}\">\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: 'ui-common-icon',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tname: 'edit-solid',\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</div>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</div>\n\t\t\x3c!-- /ko --\x3e\n\t\t<div class=\"w-projects-dropdown__body\">\n\t\t\t<div class=\"w-projects-dropdown__section\"\n\t\t\t\tdata-bind=\"\n\t\t\t\t\tvisible: quickAddActions().length,\n\t\t\t\t\tcss: {\n\t\t\t\t\t\t'w-projects-dropdown__section--is-open': selectedSection() == 'quickAdd'\n\t\t\t\t\t}\">\n\t\t\t\t<div class=\"w-projects-dropdown__section-header\" data-bind=\"click: function(){ selectedSection('quickAdd') }\">\n\t\t\t\t\t<div class=\"w-projects-dropdown__section-label\">\n\t\t\t\t\t\t<span>{{app.tl('Quick Add')}}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"w-projects-dropdown__section-toggle\"\n\t\t\t\t\t\tdata-bind=\"visible: $component.showToggles\">\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: 'ui-common-icon',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tname: 'angle-down-regular',\n\t\t\t\t\t\t\t\t\tclass: 'h-text-color--light',\n\t\t\t\t\t\t\t\t\tsize: '1x'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"w-projects-dropdown__section-body\">\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: 'ui-menuActions',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tactions: quickAddActions,\n\t\t\t\t\t\t\t\tprojectId: project.id,\n\t\t\t\t\t\t\t\tprojectName: project.name\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"w-projects-dropdown__section\"\n\t\t\t\tdata-bind=\"\n\t\t\t\t\tvisible: quickJumpActions().length,\n\t\t\t\t\tcss: {\n\t\t\t\t\t\t'w-projects-dropdown__section--is-open': selectedSection() == 'jumpTo'\n\t\t\t\t\t}\">\n\t\t\t\t<div class=\"w-projects-dropdown__section-header\" data-bind=\"click: function(){ selectedSection('jumpTo') }\">\n\t\t\t\t\t<div class=\"w-projects-dropdown__section-label\">\n\t\t\t\t\t\t<span>{{app.tl('Jump To')}}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"w-projects-dropdown__section-toggle\"\n\t\t\t\t\t\tdata-bind=\"visible: $component.showToggles\">\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: 'ui-common-icon',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tname: 'angle-down-regular',\n\t\t\t\t\t\t\t\t\tclass: 'h-text-color--light',\n\t\t\t\t\t\t\t\t\tsize: '1x'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"w-projects-dropdown__section-body\">\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: 'ui-menuActions',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tactions: quickJumpActions\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"w-projects-dropdown__section\"\n\t\t\t\tdata-bind=\"\n\t\t\t\t\tvisible: quickManageActions().length,\n\t\t\t\t\tcss: {\n\t\t\t\t\t\t'w-projects-dropdown__section--is-open': selectedSection() == 'manageProject'\n\t\t\t\t\t}\">\n\t\t\t\t<div class=\"w-projects-dropdown__section-header\" data-bind=\"click: function(){ selectedSection('manageProject') }\">\n\t\t\t\t\t<div class=\"w-projects-dropdown__section-label\">\n\t\t\t\t\t\t<span>{{app.tl('Manage Project')}}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"w-projects-dropdown__section-toggle\"\n\t\t\t\t\t\tdata-bind=\"visible: $component.showToggles\">\n\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: 'ui-common-icon',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\tname: 'angle-down-regular',\n\t\t\t\t\t\t\t\t\tclass: 'h-text-color--light',\n\t\t\t\t\t\t\t\t\tsize: '1x'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"w-projects-dropdown__section-body\">\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\tname: 'ui-menuActions',\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tactions: quickManageActions\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\x3c!-- /ko --\x3e\n</div>"},3173:function(t,e){t.exports="\x3c!-- ko component: { name:'widget-tipped-tasks', params:{ id: projectId } } --\x3e\x3c!-- /ko --\x3e\n"},3174:function(t,e){t.exports='<div data-bind="css: { \'widgetAjaxloader\': !permissionsLoaded() || projectId == 0 }" data-tipped-child="true">\n\x3c!-- ko if: !permissionsLoaded() || projectId == 0 --\x3e\n\t\t<div class="mliLoading" style="margin:0px;color:black;" data-bind="template:{afterRender: OnRendered}">{{app.tl(\'Loading\')}}{{{app.localizationPreferences().ellipsis}}}</div>\n\t\x3c!-- /ko --\x3e\n\t\x3c!-- ko if: permissionsLoaded() && projectId != 0 --\x3e\n\t<div class="render" data-bind="template:{afterRender: OnRendered}">\n\t\t\t<div style="margin-bottom:7px;">\n\t\t\t\t<ul class="tippedMenu" style="max-width:340px">\n\t\t\t\t\t<li>\n\t\t\t\t\t\t\x3c!-- ko if: permissions.projectSettings() --\x3e\n\t\t\t\t\t\t\t<a data-bind="click: OnClickEditProject" href="javascript:;" class="tipped rhs text-center" data-tipped="{{app.tl(\'Edit Project\')}}">\n\t\t\t\t\t\t\t\t<i class="fa fa-pencil"></i>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t<a data-bind="attr: {href: \'#projects/\'+projectId+\'/overview\'}" class="tipped" style="overflow:hidden;text-overflow:ellipsis;">\n\t\t\t\t\t\t\t<i class="icon-home icon-large"></i>\n\t\t\t\t\t\t\t{{project().name()}}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div class="tippedLightInner">\n\t\t\t\t\x3c!-- ko if: project().status() !== \'archived\' --\x3e\n\t\t\t\t\t<div style="display:block;float:left;padding-right:10px;clear:both;">\n\t\t\t\t\t\t<ul class="tippedMenu">\n\t\t\t\t\t\t\t\x3c!-- ko if: permissions.tasks() --\x3e\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a data-bind="tippedDelegate, attr: {href: \'#projects/\'+projectId+\'/tasks\'+taskView}"\n\t\t\t\t\t\t\t\t\t\tdata-tipped-parent="{{selector}}"\n\t\t\t\t\t\t\t\t\t\tdata-content="{{tasksTippedContent}}"\n\t\t\t\t\t\t\t\t\t\tdata-tipped-options="tippedParent:\'{{selector}}\',hideOn:false,showDelay:300,hideAfter:50,hideOthers:false,skin:\'light\',stacked:true,position:{target:\'rightmiddle\',tooltip:\'leftmiddle\'}"\n\t\t\t\t\t\t\t\t\t\tstyle="padding-left:38px;">\n\t\t\t\t\t\t\t\t\t\t<span style="background:url(\'//cdn.teamwork.com/images/twim/twimIcons9.png\') no-repeat 0px -96px;display:inline-block;width:16px;height:16px;position:absolute;top:50%;margin-top:-8px;left:10px;"></span>\n\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Tasks\')}}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: permissions.milestones() --\x3e\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a  data-bind="attr: {href: \'#projects/\'+projectId+\'/milestones\'}"\n\t\t\t\t\t\t\t\t\t\tclass="tipped"\n\t\t\t\t\t\t\t\t\t\tstyle="padding-left:38px;">\n\t\t\t\t\t\t\t\t\t\t<span style="background:url(\'//cdn.teamwork.com/images/twim/twimIcons9.png\') no-repeat -64px -96px;display:inline-block;width:16px;height:16px;position:absolute;top:50%;margin-top:-8px;left:10px;"></span>\n\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Milestones\')}}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: permissions.messages() --\x3e\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a  data-bind="attr: {href: \'#projects/\'+projectId+\'/messages\'}"\n\t\t\t\t\t\t\t\t\tclass="tipped"\n\t\t\t\t\t\t\t\t\tstyle="padding-left:38px;">\n\t\t\t\t\t\t\t\t\t<span style="background:url(\'//cdn.teamwork.com/images/twim/twimIcons9.png\') no-repeat -96px -96px;display:inline-block;width:16px;height:16px;position:absolute;top:50%;margin-top:-8px;left:10px;"></span>\n\t\t\t\t\t\t\t\t\t{{app.tl(\'Messages\')}}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: permissions.files() --\x3e\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a  data-bind="attr: {href: \'#projects/\'+projectId+\'/files\'}"\n\t\t\t\t\t\t\t\t\t\tclass="tipped"\n\t\t\t\t\t\t\t\t\t\tstyle="padding-left:38px;">\n\t\t\t\t\t\t\t\t\t\t<span style="background:url(\'//cdn.teamwork.com/images/twim/twimIcons9.png\') no-repeat -128px -96px;display:inline-block;width:16px;height:16px;position:absolute;top:50%;margin-top:-8px;left:10px;"></span>\n\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Files\')}}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: permissions.time() --\x3e\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a  data-bind="attr: {href: \'#projects/\'+projectId+\'/time\'}"\n\t\t\t\t\t\t\t\t\t\tclass="tipped"\n\t\t\t\t\t\t\t\t\t\tstyle="padding-left:38px;">\n\t\t\t\t\t\t\t\t\t\t<span style="background:url(\'//cdn.teamwork.com/images/twim/twimIcons9.png\') no-repeat -96px -128px;display:inline-block;width:16px;height:16px;position:absolute;top:50%;margin-top:-8px;left:10px;"></span>\n\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Time\')}}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: permissions.notebooks() --\x3e\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a  data-bind="attr: {href: \'#projects/\'+projectId+\'/notebooks\'}"\n\t\t\t\t\t\t\t\t\t\tclass="tipped"\n\t\t\t\t\t\t\t\t\t\tstyle="padding-left:38px;">\n\t\t\t\t\t\t\t\t\t\t<span style="background:url(\'//cdn.teamwork.com/images/twim/twimIcons9.png\') no-repeat -160px -96px;display:inline-block;width:16px;height:16px;position:absolute;top:50%;margin-top:-8px;left:10px;"></span>\n\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Notebooks\')}}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: permissions.risks() --\x3e\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a  data-bind="attr: {href: \'#projects/\'+projectId+\'/risks\'}"\n\t\t\t\t\t\t\t\t\t\tclass="tipped"\n\t\t\t\t\t\t\t\t\t\tstyle="padding-left:38px;">\n\t\t\t\t\t\t\t\t\t\t<span style="background:url(\'//cdn.teamwork.com/images/twim/twimIcons9.png\') no-repeat -128px -128px;display:inline-block;width:16px;height:16px;position:absolute;top:50%;margin-top:-8px;left:10px;"></span>\n\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Risks\')}}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: permissions.links() --\x3e\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a  data-bind="attr: {href: \'#projects/\'+projectId+\'/links\'}"\n\t\t\t\t\t\t\t\t\t\tclass="tipped"\n\t\t\t\t\t\t\t\t\t\tstyle="padding-left:38px;">\n\t\t\t\t\t\t\t\t\t\t<span style="background:url(\'//cdn.teamwork.com/images/twim/twimIcons9.png\') no-repeat -192px -96px;display:inline-block;width:16px;height:16px;position:absolute;top:50%;margin-top:-8px;left:10px;"></span>\n\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Links\')}}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: permissions.billing() --\x3e\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a  data-bind="attr: {href: \'#projects/\'+projectId+\'/billing\'}"\n\t\t\t\t\t\t\t\t\t\tclass="tipped"\n\t\t\t\t\t\t\t\t\t\tstyle="padding-left:38px;">\n\t\t\t\t\t\t\t\t\t\t<span style="background:url(\'//cdn.teamwork.com/images/twim/twimIcons9.png\') no-repeat 0px -128px;display:inline-block;width:16px;height:16px;position:absolute;top:50%;margin-top:-8px;left:10px;"></span>\n\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Billing\')}}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: permissions.comments() --\x3e\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a  data-bind="attr: {href: \'#projects/\'+projectId+\'/comments\'}"\n\t\t\t\t\t\t\t\t\t\tclass="tipped"\n\t\t\t\t\t\t\t\t\t\tstyle="padding-left:38px;">\n\t\t\t\t\t\t\t\t\t\t<span style="background:url(\'//cdn.teamwork.com/images/twim/twimIcons9.png\') no-repeat -224px -95px;display:inline-block;width:16px;height:16px;position:absolute;top:50%;margin-top:-8px;left:10px;"></span>\n\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Comments\')}}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: permissions.people() --\x3e\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a  data-bind="attr: {href: \'#projects/\'+projectId+\'/people\'}" class="tipped" style="padding-left:11px;"><i style="padding-right:7px;color:#4E7FB2" class="fa-users icon-large"></i>{{app.tl(\'People\')}}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\x3c!-- ko if: app.loggedInUser.userType() == \'account\' --\x3e\n\t\t\t\t<div style="display:block;float:left;margin-left:10px;" data-bind="css: { \'single-column\': project().status() == \'archived\' }">\n\t\t\t\t\t<ul class="tippedMenu" style="min-width:160px;">\n\t\t\t\t\t\t\x3c!-- ko if: project().status() !== \'archived\' --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: permissions.projectSettings() --\x3e\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a  data-bind="attr: {href: \'#projects/\'+projectId+\'/settings\'}"\n\t\t\t\t\t\t\t\t\t\tclass="block">\n\t\t\t\t\t\t\t\t\t\t<i class="icon-cog icon-large"></i>\n\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Project Settings\')}}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: permissions.starProject() --\x3e\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a data-bind="click: OnClickStarProject" href="javascript:;" class="block">\n\t\t\t\t\t\t\t\t\t\t<i class="icon-large" data-bind="css:{ \'icon-star-empty\' : project().starred(), \'icon-star\': (!project().starred()) }"></i>\n\t\t\t\t\t\t\t\t\t\t\x3c!-- ko if: project().starred() --\x3e\n\t\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Unstar this Project\')}}\n\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\t\t\x3c!-- ko ifnot: project().starred() --\x3e\n\t\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Star this Project\')}}\n\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\x3c!-- ko if: permissions.copyProject --\x3e\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a href="javascript:;" data-bind="click: OnClickCloneProject" class="block"><i class="icon-copy icon-large"></i>\n\t\t\t\t\t\t\t\t\t\x3c!-- ko if: app.loggedInUser.accounts && app.loggedInUser.accounts().length > 0 --\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c!-- ko if: isTemplate --\x3e\n\t\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Copy/Move this Template\')}}\n\t\t\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c!-- ko ifnot: isTemplate --\x3e\n\t\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Copy/Move this Project\')}}\n\t\t\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- ko ifnot: app.loggedInUser.accounts && app.loggedInUser.accounts().length > 0 --\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c!-- ko if: isTemplate --\x3e\n\t\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Copy this Template\')}}\n\t\t\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c!-- ko ifnot: isTemplate --\x3e\n\t\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Copy this Project\')}}\n\t\t\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\x3c!-- ko if: app.loggedInUser.permissions.canManageProjectTemplates --\x3e\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a href="javascript:;" data-bind="click: OnClickNewProject" class="block"><i class="icon-copy icon-large"></i>\n\t\t\t\t\t\t\t\t{{app.tl(\'Create New Project\')}}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\x3c!-- ko if: project().status() !== \'archived\' --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: permissions.overviewSettings() &&\n\t\t\t\t\t\t\t\t\t\tapp.currentRoute().project &&\n\t\t\t\t\t\t\t\t\t\tapp.currentRoute().project.status() == \'active\' &&\n\t\t\t\t\t\t\t\t\t\tapp.currentRoute().projectTab == \'overview\' &&\n\t\t\t\t\t\t\t\t\t\tapp.currentRoute()[2] == \'summary\' --\x3e\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:;" data-bind="click: OnClickProjectSummarySettings" class="block">\n\t\t\t\t\t\t\t\t\t\t<i class="ico-settings icon-large"></i>\n\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Overview Settings\')}}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\x3c!-- ko if: permissions.projectReport() --\x3e\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a  data-bind="attr: {href: \'#projects/\'+projectId+\'/report\'}"\n\t\t\t\t\t\t\t\t\tclass="block">\n\t\t\t\t\t\t\t\t\t<i class="icon-bar-chart icon-large"></i>\n\t\t\t\t\t\t\t\t\t{{app.tl(\'Project Report\')}}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\x3c!-- ko if: project().status() !== \'archived\' --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: permissions.projectRoles() --\x3e\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a  data-bind="attr: {href: \'#projects/\'+projectId+\'/people/roles\'}"\n\t\t\t\t\t\t\t\t\t\tclass="block">\n\t\t\t\t\t\t\t\t\t\t<i class="icon-group icon-large"></i>\n\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Project Roles\')}}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: permissions.projectDates() --\x3e\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:;" data-bind="click: OnClickEditProjectDates" class="block">\n\t\t\t\t\t\t\t\t\t\t<i class="icon-calendar icon-large"></i>\n\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Set Start & End Dates\')}}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: permissions.projectTrashCan() --\x3e\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:;" data-bind="click: OnClickTrashCan" class="block">\n\t\t\t\t\t\t\t\t\t\t<i class="icon-trash icon-large"></i>\n\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Trash Can\')}}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: project().subStatus && project().subStatus() !== \'completed\' && permissions.completeProject() --\x3e\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:;" data-bind="click: project().Complete" class="block">\n\t\t\t\t\t\t\t\t\t\t<i class="fa fa-check-square-o"></i>\n\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Complete Project\')}}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: project().subStatus && project().subStatus() === \'completed\' && permissions.completeProject() --\x3e\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:;" data-bind="click: project().Uncomplete" class="block">\n\t\t\t\t\t\t\t\t\t\t<i class="fa fa-check-square-o"></i>\n\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Uncomplete Project\')}}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: permissions.archiveProject() --\x3e\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:;" data-bind="click: OnClickArchiveProject" class="block"><i class="icon-archive icon-large"></i>\n\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Archive Project\')}}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\x3c!-- ko if: project().status() === \'archived\' --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko if: permissions.archiveProject() --\x3e\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:;" data-bind="click: OnClickSetProjectActive" class="block"><i class="icon-archive icon-large"></i>\n\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Set Project Active\')}}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\n\t\t\t\t\t\t\x3c!-- ko if: permissions.deleteProject() --\x3e\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a href="javascript:;" data-bind="click: OnClickDeleteProject" class="block">\n\t\t\t\t\t\t\t\t\t<i class="fa fa-times-circle"></i>\n\t\t\t\t\t\t\t\t\t{{app.tl(\'Delete Project\')}}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</div>\n\t</div>\n\t\x3c!-- /ko --\x3e\n</div>\n'},3180:function(t,e){t.exports='\x3c!-- if index is 0, then set opacity to normal, otherwise decrease it slightly --\x3e\n<div class="quick--view-overlay"\n\tdata-bind="\n\t\tclick: app.quickView.pop,\n\t\tcss: { \'stacked\': position() > 0 },\n\t\tstyle:{ \'z-index\': zIndex }">\n</div>\n\n<section class="lboxContents quick--view position-right" id="{{uniqueId}}" data-bind="css: productIntegration, style:{\'z-index\': zIndex()+1}, template:{afterRender:OnRendered}" data-qv-index="{{position}}">\n\t\x3c!-- ko if: isBackgroundLayer --\x3e\n\t\t<div class="previous-section-target tipped"\n\t\t\tdata-tipped="{{app.quickView.views()[position()].title}}"\n\t\t\tdata-tipped-options="behavior: \'mouse\'"\n\t\t\tdata-bind="click: function(){ app.quickView.jumpTo(position()) }"></div>\n\t\x3c!--/ko--\x3e\n\n\t<div class="inner-wrapper sectionContent {{paddingClass}}" data-bind="style: {paddingTop: qvTitle() ? null : \'25px\'}">\n\t\t<header class="view-header main-header" data-bind="visible: qvTitle(), if: qvTitle()">\n\t\t\t\x3c!-- ko component: { name: ko.unwrap(headerComponent), params: headerParams } --\x3e\x3c!-- /ko --\x3e\n\t\t\t<div class="main-header__right">\n\t\t\t\t\x3c!-- ko if: ko.unwrap(headerActions) !== \'\' --\x3e\n\t\t\t\t\t\t\x3c!-- ko component: { name: ko.unwrap(headerActions), params: ko.unwrap(templateParams) } --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t</div>\n\t\t\t<div class="header-close" data-bind="click: OnClickCloseButton, event:{mousemove: OnMouseOverClose, mouseleave:function(){isHoveringAndHoldingShift(false)}}">\n\t\t\t\t<button class="btn btn-clear main-header__button">\n\t\t\t\t\t<i class="fa" data-bind="css:{\'fa-times\': !isHoveringAndHoldingShift(), \'fa-expand\': isHoveringAndHoldingShift()}"></i>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</header>\n\t\t<section class="view-body tipped-container" data-bind="visible: showIt">\n\t\t\t\x3c!-- ko if: ko.unwrap(templateName) !== \'\' --\x3e\n\t\t\t\t\x3c!-- ko component: { name: ko.unwrap(templateName), params: ko.unwrap(templateParams) } --\x3e\x3c!-- /ko --\x3e\n\t\t\t\x3c!--/ko--\x3e\n\t\t\t\x3c!-- ko if: ko.unwrap(templateName) === \'\' --\x3e\n\t\t\t\t\x3c!-- ko text: app.tl(\'No template loaded\') --\x3e\x3c!--/ko--\x3e\n\t\t\t\x3c!--/ko--\x3e\n\t\t</section>\n\n\t\t<div class="header-close fixed hidden" data-bind="click: OnClickCloseButton">\n\t\t\t<button class="btn btn-clear">\n\t\t\t\t<i class="fa fa-times"></i>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</section>\n'},3182:function(t,e){t.exports='<h2 class="header-title">{{{qvTitle}}}</h2>'},3253:function(t,e){t.exports='\x3c!-- ko if: initialised --\x3e\n\t<div id="timerBar" data-bind="css: {\'timer-collapsed\': collapsed}" class="timerBar" style="overflow: hidden;">\n\t\t<div data-bind="click: OnClickToggleCollapse" class="timer-header">\n\t\t\t<div class="timer-time-wrapper">\n\t\t\t\t<button data-bind="click: OnClickToggleTimer, css: {pause: running, resume: !running()}" id="btnPauseStart"></button>\n\t\t\t\t<button data-bind="click: OnClickLogTime, attr: {title: app.tl(\'Log this Time\')}" class="timer-log-time ico-timer"></button>\n\t\t\t\t<div data-bind="css: {paused: !running()}" id="twTimer" class="timer">\n\t\t\t\t\t<span id="loggedTime">{{formattedTime}}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<span class="timer-task-title">\n\t\t\t\t{{task() ? task().name : \'\'}}\n\t\t\t</span>\n\n\t\t\t<span class="timer-chevron"></span>\n\t\t</div>\n\n\t\t<div class="timer-body">\n\t\t\t<form data-bind="submit:OnClickLogTime">\n\t\t\t\t\x3c!-- ko if: project --\x3e\n\t\t\t\t\t<span class="twTimerLink">\n\t\t\t\t\t\t<strong>{{app.tl(\'Project\')}}:</strong>\n\t\t\t\t\t\t<a data-bind="attr: {href: \'#projects/\' + projectId()}">{{project().name}}</a>\n\t\t\t\t\t</span>\n\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\x3c!-- ko if: task --\x3e\n\t\t\t\t\t<span class="twTimerLink">\n\t\t\t\t\t\t<strong>{{app.tl(\'Task\')}}:</strong>\n\t\t\t\t\t\t<a data-bind="attr: {href: \'#tasks/\' + taskId(), \'data-component\': JSON.stringify({ name: \'widget-tipped-timer-task-info\', params: { name: \'test\', task: task(), project: projectInfo(), taskList: taskListInfo() } }) }, tippedDelegate" data-tipped-options="behavior: \'twSticky\',skin: \'light\'">{{task().name}}</a>\n\t\t\t\t\t</span>\n\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t<textarea id="timerDesc" noChangeTracking placeholder="{{app.tl(\'Optional Description\')}}" data-bind="textInput:desc,style:{height:descTextAreaHeight}"></textarea>\n\n\t\t\t\t<span class="cb">\n\t\t\t\t\t<label style="cursor:pointer;">\n\t\t\t\t\t\t<input data-bind="checked: billable" type="checkbox" />\n\t\t\t\t\t\t{{app.tl(\'Billable\')}}\n\t\t\t\t\t</label>\n\t\t\t\t</span>\n\n\t\t\t\t<button type="submit" data-bind="click:OnClickLogTime" class="log btn btn-success">\n\t\t\t\t\t{{app.tl(\'Log Time\')}}\n\t\t\t\t</button>\n\n\t\t\t\t<div class="cancelTimer">\n\t\t\t\t\t<a data-bind="click: OnClickDelete" class="cancel" href="javascript:;">{{app.tl(\'Delete\')}}</a>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</div>\n\n\t</div>\n\x3c!-- /ko --\x3e'},3254:function(t,e){t.exports='\x3c!-- ko if: activeTimers().length --\x3e\n\t<div class="timers-wrapper"\n\t\tdata-bind="\n\t\t\tcss: {\n\t\t\t\t\'timers-wrapper--has-multiple\': hasMultipleTimers,\n\t\t\t\t\'timers-wrapper--has-running-timer\': hasRunningTimer\n\t\t\t}">\n\t\t<div class="timers-list">\n\t\t\t\x3c!-- ko foreach: filteredTimersList --\x3e\n\t\t\t\t\x3c!-- ko if: $index() == 0 && $component.hasMultipleTimers --\x3e\n\t\t\t\t\t<div class="timers-list__header"\n\t\t\t\t\tdata-click="$component.OnClickTimersHeader">\n\t\t\t\t\t\t<span class="timers-list__drag-handle"\n\t\t\t\t\t\t\tdata-bind="draggable: {\n\t\t\t\t\t\t\taxis: \'x\',\n\t\t\t\t\t\t\tselector: \'.timers-wrapper\',\n\t\t\t\t\t\t\thandleDragClass: \'timers-list__drag-handle--dragging\'\n\t\t\t\t\t\t}"></span>\n\n\t\t\t\t\t\t<span class="timers-list__header-title h-pointer-e--none">\n\t\t\t\t\t\t\t{{app.tl(\'[_s] Active Timers\', $component.activeTimers().length)}}\n\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t<span class="timers-list__header-options">\n\t\t\t\t\t\t\t\x3c!-- ko if: $component.showAllTimers --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- ko if: $component.sholdShowPagination --\x3e\n\t\t\t\t\t\t\t\t\t<div class="btn-group btn-sm" role="group">\n\t\t\t\t\t\t\t\t\t\t<button class="btn btn-sm btn-default"\n\t\t\t\t\t\t\t\t\t\t\tdata-bind="disable: !$component.canLoadPrevPage()"\n\t\t\t\t\t\t\t\t\t\t\tdata-click="$component.OnClickPrevTimersPage">\n\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-fw fa-angle-left h-pointer-e--none"></i>\n\t\t\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t\t\t<button class="btn btn-sm btn-default"\n\t\t\t\t\t\t\t\t\t\t\tdata-bind="disable: !$component.canLoadNextPage()"\n\t\t\t\t\t\t\t\t\t\t\tdata-click="$component.OnClickNextTimersPage">\n\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-fw fa-angle-right h-pointer-e--none"></i>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\t\t\t\t<i class="fa fa-fw fa-lg fa-angle-down tipped-hide"\n\t\t\t\t\t\t\t\t\tdata-tipped="{{app.tl(\'Show current timer only\')}}"\n\t\t\t\t\t\t\t\t\tdata-click="$component.OnClickTimersHeader">\n\t\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\t\t\t\x3c!-- ko ifnot: $component.showAllTimers --\x3e\n\t\t\t\t\t\t\t\t<i class="fa fa-fw fa-lg fa-angle-up tipped-hide"\n\t\t\t\t\t\t\t\t\tdata-tipped="{{app.tl(\'Show all timers\')}}"\n\t\t\t\t\t\t\t\t\tdata-click="$component.OnClickTimersHeader">\n\t\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t<div class="timers-list__timer"\n\t\t\t\t\tdata-bind="css: {\n\t\t\t\t\t\t\'timers-list__timer--active\': running\n\t\t\t\t\t}">\n\t\t\t\t\t<div class="timers-list__timer-contents">\n\n\t\t\t\t\t\t\x3c!-- ko ifnot: $component.hasMultipleTimers --\x3e\n\t\t\t\t\t\t\t<span class="timers-list__drag-handle"\n\t\t\t\t\t\t\t\tdata-bind="draggable: {\n\t\t\t\t\t\t\t\t\taxis: \'x\',\n\t\t\t\t\t\t\t\t\tselector: \'.timers-wrapper\',\n\t\t\t\t\t\t\t\t\thandleDragClass: \'timers-list__drag-handle--dragging\'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcss: {\n\t\t\t\t\t\t\t\t\t\'pb--medium\': taskId() > 0\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t"></span>\n\t\t\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\t\t<div class="timers-list__timer-info">\n\t\t\t\t\t\t\t\x3c!-- ko if: taskId() > 0 --\x3e\n\t\t\t\t\t\t\t\t<label class="timers-list__timer-info-meta">\n\t\t\t\t\t\t\t\t\t<a href="#/projects/{{projectId}}">\n\t\t\t\t\t\t\t\t\t\t{{projectName}}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</label>\n\n\t\t\t\t\t\t\t\t<label class="timers-list__timer-info-main"\n\t\t\t\t\t\t\t\t\tdata-tipped-options="\n\t\t\t\t\t\t\t\t\t\tskin: \'light\',\n\t\t\t\t\t\t\t\t\t\thideOn: false,\n\t\t\t\t\t\t\t\t\t\thideAfter: 300,\n\t\t\t\t\t\t\t\t\t\tposition: \'right\',\n\t\t\t\t\t\t\t\t\t\tshowDelay: 1000,\n\t\t\t\t\t\t\t\t\t\tmaxWidth: 400,\n\t\t\t\t\t\t\t\t\t\tcontainer: \'.timers-list\'"\n\t\t\t\t\t\t\t\t\tdata-bind="tippedDelegate"\n\t\t\t\t\t\t\t\t\tdata-content="{{$component.timerInfoTippedContent}}">\n\t\t\t\t\t\t\t\t\t<a href="javascript:;">{{timerTitle}}</a>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\t\t\t\x3c!-- ko if: taskId() == 0 --\x3e\n\t\t\t\t\t\t\t\t<label class="timers-list__timer-info-main">\n\t\t\t\t\t\t\t\t\t<a href="#/projects/{{projectId}}">{{timerTitle}}</a>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<button class="btn btn-sm btn-clear timers-list__timer-edit"\n\t\t\t\t\t\t\tdata-bind=" tippedDelegate, click: ToggleEdit"\n\t\t\t\t\t\t\tdata-content="{{editToggleTitle}}"\n\t\t\t\t\t\t\tdata-tipped-options="behavior: \'hide\', offset: { y: 5 }, position: \'topmiddle\'">\n\t\t\t\t\t\t\t<i class="fa fa-lg mr--none"\n\t\t\t\t\t\t\t\tdata-bind="\n\t\t\t\t\t\t\t\t\tcss: {\n\t\t\t\t\t\t\t\t\t\t\'fa-angle-up\': isEditing(),\n\t\t\t\t\t\t\t\t\t\t\'fa-angle-down\': !isEditing()\n\t\t\t\t\t\t\t\t\t}">\n\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t<div class="timers-list__timer-counter">\n\t\t\t\t\t\t\t{{formattedTime}}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="timers-list__timer-controls">\n\t\t\t\t\t\t\t<button class="btn btn-sm timers-list__timer-action"\n\t\t\t\t\t\t\t\tdata-click="Toggle"\n\t\t\t\t\t\t\t\tdata-bind="css: {\n\t\t\t\t\t\t\t\t\t\'btn-default\': !running(),\n\t\t\t\t\t\t\t\t\t\'btn-primary\': running()\n\t\t\t\t\t\t\t\t}">\n\n\t\t\t\t\t\t\t\t\x3c!-- ko if: !isCompleting() && showUpdatingLoader() --\x3e\n\t\t\t\t\t\t\t\t\t<i class="fa fa-circle-o-notch fa-spin fa-fw"></i>\n\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\t\x3c!-- ko ifnot: !isCompleting() && showUpdatingLoader() --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- ko if: running --\x3e\n\t\t\t\t\t\t\t\t\t\t<i class="fa fa-pause fa-fw h-pointer-e--none"></i>\n\t\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- ko ifnot: running --\x3e\n\t\t\t\t\t\t\t\t\t\t<i class="fa fa-play fa-fw h-pointer-e--none"></i>\n\t\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\t\t\t\t{{ running() ? app.tl(\'Pause\') : app.tl(\'Start\') }}\n\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t<button class="btn btn-sm btn-success timers-list__timer-submit"\n\t\t\t\t\t\t\t\tdata-click="Complete"\n\t\t\t\t\t\t\t\tdata-bind="">\n\n\t\t\t\t\t\t\t\t\x3c!-- ko if: isCompleting --\x3e\n\t\t\t\t\t\t\t\t\t<i class="fa fa-circle-o-notch fa-spin fa-fw"></i>\n\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\t\t\x3c!-- ko ifnot: isCompleting --\x3e\n\t\t\t\t\t\t\t\t\t<i class="fa fa-clock-o fa-fw h-pointer-e--none"></i>\n\t\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\t\t\t\t{{app.tl(\'Log\')}}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t\x3c!-- ko if: isEditing --\x3e\n\t\t\t\t\t\t<div class="timers-list__timer-quick-edit">\n\t\t\t\t\t\t\t<form data-bind="submit: Save" noChangeTracking>\n\t\t\t\t\t\t\t\t<div class="form-content">\n\t\t\t\t\t\t\t\t\t\x3c!-- ko if: $component.showMoreOptions --\x3e\n\t\t\t\t\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t\t\t\t\t<label>{{app.tl(\'Project\')}}</label>\n\t\t\t\t\t\t\t\t\t\t\t<select data-bind="\n\t\t\t\t\t\t\t\t\t\t\t\tselect2:{\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: projectId,\n\t\t\t\t\t\t\t\t\t\t\t\t\tendpoint: \'time/projects.json?type=featurenabled\',\n\t\t\t\t\t\t\t\t\t\t\t\t\ttextKey: \'name\',\n\t\t\t\t\t\t\t\t\t\t\t\t\tgroupById: \'companyId\',\n\t\t\t\t\t\t\t\t\t\t\t\t\tgroupByName: \'companyName\',\n\t\t\t\t\t\t\t\t\t\t\t\t\tminimumResultsForSearch: 10,\n\t\t\t\t\t\t\t\t\t\t\t\t\tinitialValue: initialProjectValue,\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder: app.tl(\'Choose a project\')+app.localizationPreferences().ellipsis,\n\t\t\t\t\t\t\t\t\t\t\t\t\tselectCallback: OnSelectedProject,\n\t\t\t\t\t\t\t\t\t\t\t\t}" style="width:100%;">\n\t\t\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t<div class="form-group" data-bind="visible: projectId() > 0">\n\t\t\t\t\t\t\t\t\t\t\t<label>{{app.tl(\'Task\')}}</label>\n\t\t\t\t\t\t\t\t\t\t\t<select data-bind="\n\t\t\t\t\t\t\t\t\t\t\t\tselect2:{\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: taskId,\n\t\t\t\t\t\t\t\t\t\t\t\t\tendpoint: tasksUrl,\n\t\t\t\t\t\t\t\t\t\t\t\t\tajaxData: $component.ajaxData,\n\t\t\t\t\t\t\t\t\t\t\t\t\tallowClear: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\tresponseType: \'tasks\',\n\t\t\t\t\t\t\t\t\t\t\t\t\tinitialValue: initialTaskValue,\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder: app.tl(\'Choose a Task\')+app.localizationPreferences().ellipsis,\n\t\t\t\t\t\t\t\t\t\t\t\t\tselectCallback: OnSelectedTask,\n\t\t\t\t\t\t\t\t\t\t\t\t\tdelay: 500\n\t\t\t\t\t\t\t\t\t\t\t\t}" style="width:100%;">\n\t\t\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t\t\t\t<label>{{app.tl(\'Description\')}}</label>\n\t\t\t\t\t\t\t\t\t\t<textarea class="form-control" data-bind="textInput: description" rows="5"></textarea>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div class="form-group form-group--row">\n\t\t\t\t\t\t\t\t\t\t\x3c!-- ko if: false --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: \'widget-toggleSwitch\',\n\t\t\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: billable,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: app.tl(\'Billable\')\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\t\t<input id="w-timers-list-edit-billable" data-bind="checked: billable" type="checkbox"/>\n\t\t\t\t\t\t\t\t\t\t<label for="w-timers-list-edit-billable" title="{{ app.tl(\'Billable?\') }}">{{app.tl(\'Billable\')}}</label>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div class="form-group form-group--row mr--none">\n\t\t\t\t\t\t\t\t\t\t<button class="btn btn-link btn-sm lhs hidden" type="button" data-bind="tippedDelegate" data-content="{{$component.moreOptionsLabel}}" data-click="$component.OnClickMoreOptionsToggle">\n\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-ellipsis-h"></i>\n\t\t\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\t\t\t\tname: \'widget-toggleSwitch\',\n\t\t\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: $component.showMoreOptions,\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: app.tl(\'Show More Options\')\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\t\t<button class="btn btn-danger btn-sm mr--none ml--auto" type="button" data-click="Delete">\n\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-times h-pointer-e--none"></i>\n\t\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Delete\')}}\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t<div class="hidden" data-bind="onRendered: $component.OnRenderedTimerForm"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t</div>\n\t\t\t\x3c!--/ko--\x3e\n\t\t</div>\n\t</div>\n\x3c!--/ko--\x3e'},3255:function(t,e){t.exports='<div class="timer-info-popup">\n\t\x3c!-- ko ifnot: $component.timerDetails --\x3e\n\t\t<i class="fa fa-circle-o-notch fa-lg fa-fw fa-spin"></i>\n\t\x3c!-- /ko --\x3e\n\n\t\x3c!-- ko with: $component.timerDetails --\x3e\n\t\t<ul>\n\t\t\t\x3c!-- ko if: projectId > 0 --\x3e\n\t\t\t\t<li>\n\t\t\t\t\t<label>{{app.tl(\'Project\')}}</label>\n\t\t\t\t\t<a href="#/projects/{{projectId}}">{{projectName}}</a> <span class="text-muted">({{companyName}})</span>\n\t\t\t\t</li>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\x3c!-- ko if: tasklistId > 0 --\x3e\n\t\t\t\t<li>\n\t\t\t\t\t<label>{{app.tl(\'Task List\')}}</label>\n\t\t\t\t\t<a href="#/tasklists/{{tasklistId}}">{{tasklistName}}</a>\n\t\t\t\t</li>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\x3c!-- ko if: parentTaskId > 0 --\x3e\n\t\t\t\t<li>\n\t\t\t\t\t<label>{{app.tl(\'Parent Task\')}}</label>\n\t\t\t\t\t<a href="#/tasks/{{parentTaskId}}">{{parentTaskName}}</a>\n\t\t\t\t</li>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\x3c!-- ko if: taskId > 0 --\x3e\n\t\t\t\t<li>\n\t\t\t\t\t<label>{{app.tl(\'Task\')}}</label>\n\t\t\t\t\t<a href="#/tasks/{{taskId}}">{{taskName}}</a>\n\t\t\t\t</li>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</ul>\n\t\x3c!-- /ko --\x3e\n</div>\n\n<div class="hidden" data-bind="onRendered: $component.OnRenderedTimerInfo"></div>'},3298:function(t,e){t.exports='\x3c!-- ko with: upgradeInfo --\x3e\n    \x3c!-- ko if: $component.mode == \'inline\' --\x3e\n        <div class="w-inline-help" id="upgradePrompt_{{$component.feature}}">\n            <div class="w-inline-help__image">\n                <img data-bind="attr: {\n                    src: $component.getAssetFromPath(\'inline.svg\')\n                }">\n            </div>\n            <div class="w-inline-help__detail">\n                <h3 class="w-inline-help__title">{{ title }}</h3>\n                <p class="w-inline-help__content">{{ snippet }}</p>\n            </div>\n\n            \x3c!-- ko if: app.loggedInUser.administrator --\x3e\n                \x3c!-- ko ifnot: $component.trialHasLapsed --\x3e\n                    <button class="btn btn-link mx--xlarge w-inline-help__submit--trial"\n                        data-bind="\n                            loader: $component.isUpgrading,\n                            click: $component.OnClickTrial">\n                        {{app.tl(\'Try it out\')}}\n                    </button>\n                \x3c!-- /ko --\x3e\n\n                \x3c!-- ko if: $component.trialHasLapsed --\x3e\n                    <button class="btn btn-link mx--xlarge w-inline-help__submit--upgrade"\n                        data-bind="\n                            loader: $component.isUpgrading,\n                            click: $component.OnClickUpgrade">\n                        {{app.tl(\'Upgrade\')}}\n                    </button>\n                \x3c!-- /ko --\x3e\n\n                <div class="w-inline-help__close" data-bind="click: $component.OnClickDismiss">\n                    \x3c!-- ko component: {\n                            name: \'ui-common-icon\',\n                            params: {\n                                name: "times"\n                            }\n                        } --\x3e\n                    \x3c!-- /ko  --\x3e\n                </div>\n            \x3c!-- /ko --\x3e\n\n            \x3c!-- ko ifnot: app.loggedInUser.administrator --\x3e\n                <button class="btn btn-link mx--xlarge w-inline-help__submit--request"\n                    data-bind="\n                        loader: $component.isRequestingAccess,\n                        click: $component.OnClickRequest">\n                    {{app.tl(\'Request access\')}}\n                </button>\n            \x3c!-- /ko --\x3e\n        </div>\n    \x3c!-- /ko --\x3e\n\n    \x3c!-- ko if: $component.mode != \'inline\' --\x3e\n        <div class="w-upgrade-path" id="upgradePrompt_{{$component.feature}}">\n            <div class="w-upgrade-path__preview">\n                <img data-bind="\n                    attr: {\n                        src: image\n                    }">\n            </div>\n\n            <div class="w-upgrade-path__info">\n                <h1>\n                    {{ title }}\n                </h1>\n\n                <p>\n                    {{ text }}\n                </p>\n\n                <div class="w-upgrade-path__info-actions">\n                    \x3c!-- ko ifnot: app.loggedInUser.administrator --\x3e\n                        <button class="w-upgrade-path__submit w-upgrade-path__submit--request"\n                            data-bind="\n                                loader: $component.isRequestingAccess,\n                                click: $component.OnClickRequest">\n                            {{app.tl(\'Request access\')}}\n                        </button>\n                    \x3c!-- /ko --\x3e\n\n                    \x3c!-- ko if: app.loggedInUser.administrator --\x3e\n                        \x3c!-- ko ifnot: $component.trialHasLapsed --\x3e\n                            <button class="w-upgrade-path__submit w-upgrade-path__submit--trial"\n                                data-bind="\n                                    loader: $component.isUpgrading,\n                                    click: $component.OnClickTrial">\n                                {{app.tl(\'Try it out\')}}\n                            </button>\n                        \x3c!-- /ko --\x3e\n\n                        \x3c!-- ko if: $component.trialHasLapsed --\x3e\n                            <button class="w-upgrade-path__submit w-upgrade-path__submit--upgrade"\n                                data-bind="\n                                    loader: $component.isUpgrading,\n                                    click: $component.OnClickUpgrade">\n                                {{app.tl(\'Upgrade\')}}\n                            </button>\n                        \x3c!-- /ko --\x3e\n\n                        <button class="w-upgrade-path__dismiss"\n                            data-bind="click: $component.OnClickDismiss">\n                            {{app.tl(\'No thanks\')}}\n                        </button>\n                    \x3c!-- /ko --\x3e\n                </div>\n            </div>\n        </div>\n    \x3c!-- /ko --\x3e\n\x3c!-- /ko --\x3e\n'},3595:function(t,e,n){var i,s,o=function(t,e){return function(){return t.apply(e,arguments)}};i=[n(2305)],void 0!==(s=function(t){var e;return e=function(){function t(t){var e,n,i,s,a,r,l,p;null==t&&(t={}),this.dispose=o(this.dispose,this),this.getItemText=o(this.getItemText,this),this.OnClickButton=o(this.OnClickButton,this),this.OnClickClearFilter=o(this.OnClickClearFilter,this),this.OnRendered=o(this.OnRendered,this),this.subscriptions=[],this.itemType=t.itemType,this.projectId=null!=(e=t.projectId)?e:0,this.categoryId=null!=(n=t.categoryId)?n:0,this.backgroundImage="",this.backgroundIcon="",this.backgroundHeight=0,this.allowClearFilter=null==(i=t.allowClearFilter)||i,this.filter=null!=(s=t.filter)?s:ko.observable(null),this.template=t.template?"blank-slate-"+t.template:"blank-slate",this.isInTipped=null!=(a=t.isInTipped)&&a,this.showImage=null==(r=t.showImage)||r,this.subscriptions=[],this.subscriptions.push(this.hasActiveFilter=ko.pureComputed(function(t){return function(){var e;return null!=(e=t.filter())?e.active():void 0}}(this))),this.assets[this.itemType]&&(this.assets[this.itemType].image?this.backgroundImage="/tko/public/assets/blankslates/"+this.assets[this.itemType].image:this.backgroundIcon=this.assets[this.itemType].icon,this.backgroundHeight=this.assets[this.itemType].height,this.isInTipped&&(this.backgroundHeight=Math.round(this.backgroundHeight/2))),this.showImage||(this.backgroundIcon="",this.backgroundImage=""),this.subscriptions.push(this.size=ko.pureComputed(function(e){return function(){return null!=t.size?t.size:e.isInTipped?"small--tipped":"large"}}(this))),this.imgClass="board"===this.itemType?"mb--xlarge":"",null!=app.currentRoute().projectId&&0===this.projectId&&(this.projectId=app.currentRoute().projectId),this.subscriptions.push(this.cssClass=ko.pureComputed(function(t){return function(){return"large"===t.size()?"btn-lg blank-slate-"+t.itemType:t.itemType}}(this))),this.subscriptions.push(this.project=ko.pureComputed(function(t){return function(){if(0!==t.projectId)return ko.unwrap(app.projectInfo.get(t.projectId))}}(this))),this.subscriptions.push(this.projectIsActive=ko.pureComputed(function(t){return function(){return null==t.project()||t.project().isActive()}}(this))),this.params=t,null==t.showButton&&(t.showButton=!1),this.itemText=function(){switch(this.itemType){case"time":return"time log";case"taskList":return"task list";case"risk":return"risk entry";default:return this.getItemText(this.itemType).toLowerCase()}}.call(this),this.itemTextPlural=function(){switch(this.itemType){case"time":return"time logs";case"activity":return"activity";case"taskList":return"task lists";default:return(this.getItemText(this.itemType)+"s").toLowerCase()}}.call(this),this.filterTitle=app.tl("There are no [_s] that match your filter",app.tl(this.itemTextPlural)),null!=t.title&&(t.title=ko.unwrap(t.title)),this.hasActiveFilter()?t.title=this.filterTitle:t.title||(t.title=function(){switch(this.itemType){case"project":return app.tl("No Projects Yet");case"time":return app.tl("No Time Entries Yet");default:return app.tl("No "+this.getItemText(this.itemType))}}.call(this)),null!=t.msg&&(t.msg=ko.unwrap(t.msg)),t.msg||""===t.msg||(t.msg=function(){switch(this.itemType){case"time":return p=app.tl("There was no time logged for the time frame and people specified."),t.showButton&&(p+=" "+app.tl("Add the first time entry by clicking the button below.")),p;case"project":return app.tl("There are no Projects Yet.");case"reminder":return app.tl("There are no reminders on this task yet.");default:return this.projectId<=0?t.msg=app.tl("There are no "+this.itemTextPlural+" yet."):this.categoryId<=0?t.msg=app.tl("There are no "+this.itemTextPlural+" on this project yet."):t.msg=app.tl("There are no "+this.itemTextPlural+" in this category yet.")}}.call(this)),null!=t.buttonText&&(t.buttonText=ko.unwrap(t.buttonText)),this.hasActiveFilter()?"time"===this.itemType?t.buttonText=app.tl("Log Time"):t.buttonText=app.tl("Add a new [_s]",app.serverTranslate(this.itemText)):t.buttonText||(t.buttonText=app.tl("Add the First [_s]",app.serverTranslate(app.utility.Capitalize(this.itemText)))),"noSearchResults"===(l=this.itemType)||"search"===l||"people"===l||"team"===l?this.paddingTop="40px":"small"===this.size()?"task"===this.itemType?this.paddingTop="40px":this.paddingTop="20px":this.paddingTop=null}return t.prototype.assets={activity:{image:"activity.gif",height:200,label:"Activity"},notification:{image:"notifications.gif",height:200,label:"Notification"},notificationsDisabled:{image:"notifications_disabled.png",height:200,"Notifications Disabled":"Notifications Disabled"},notificationsDisconnected:{image:"notifications_disconnected.png",height:200,label:"Notifications Disconnected"},board:{image:"board-empty.png",height:280,label:"Board"},comment:{image:"comments.gif",height:200,label:"Comment"},company:{image:"companies.gif",height:200,label:"Companies"},event:{image:"events.gif",height:200,label:"Event"},file:{image:"files.gif",height:200,label:"File"},link:{image:"links.gif",height:200,label:"Link"},loginHistory:{image:"people.gif",height:200,label:"Login History"},message:{image:"messages.gif",height:200,label:"Message"},milestone:{image:"milestones.gif",height:200,label:"Milestone"},noSearchResults:{image:"noSearchResults.png",height:112,label:"No Search Results"},notebook:{image:"notebooks.gif",height:200,label:"Notebook"},people:{image:"people.gif",height:200,label:"People"},person:{image:"people.gif",height:200,label:"Person"},portfolioBoard:{image:"projectBoardsEmpty.gif",height:220,label:"Portfolio Board"},project:{image:"projects.gif",height:200,label:"Project"},projectReport:{image:"projects.gif",height:200,label:"Project Report"},projectUpdate:{image:"productupdates.gif",height:200,label:"Project Update"},reactions:{image:"people.gif",height:200,label:"Reactions"},risk:{image:"risks.gif",height:200,label:"Risk"},role:{image:"people.gif",height:200,label:"Role"},search:{image:"search.png",height:112,label:"Search"},shortcut:{image:"shortcuts.gif",height:200,label:"Shortcut"},status:{image:"statuses.gif",height:200,label:"Status"},dashboard:{image:"summary.gif",height:200,label:"Dashboard"},task:{image:"tasks.gif",height:200,label:"Task"},taskList:{image:"tasklist.gif",height:200,label:"Task List"},time:{image:"time.gif",height:200,label:"Time"},reminder:{image:"events.gif",height:200,label:"Reminder"},archived:{image:"tasks.gif",height:200,label:"Archived"},tag:{image:"shortcuts.gif",height:200,label:"Tag"},clockIn:{image:"time.gif",height:200,label:"Clock In"},backlog:{image:"tasks.gif",height:200,label:"Backlog"},reporting:{image:"reporting.gif",height:200,label:"Reporting"},team:{image:"teams.gif",height:200,label:"Team"}},t.prototype.OnRendered=function(t){},t.prototype.OnClickClearFilter=function(){if(null!=this.filter&&this.allowClearFilter)return this.filter().Clear()},t.prototype.OnClickButton=function(){this.params.onClickButton&&this.params.onClickButton()},t.prototype.getItemText=function(t){return void 0!==this.assets[t]?this.assets[t].label:"Matching Value"},t.prototype.dispose=function(){null!=this.subscriptions&&this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:e,template:t}}.apply(e,i))&&(t.exports=s)},3596:function(t,e,n){var i,s,o=function(t,e){return function(){return t.apply(e,arguments)}};i=[n(2306)],void 0!==(s=function(t){var e;return e=function(){function t(t){var e,n;null==t&&(t={}),this.dispose=o(this.dispose,this),this.GetData=o(this.GetData,this),this.OnClickTryAgain=o(this.OnClickTryAgain,this),this.OnClickHome=o(this.OnClickHome,this),this.OnClickReload=o(this.OnClickReload,this),this.OnRendered=o(this.OnRendered,this),this.projectId=t.projectId,this.itemType=t.itemType,this.errorStatus=ko.unwrap(t.errorStatus),null!=this.errorStatus&&this.errorStatus!==parseInt(this.errorStatus,10)&&(this.errorStatus=app.serverTranslate(this.errorStatus)),this.onTryAgainAction=t.onTryAgainAction,this.backgroundImage=this.images[this.itemType]?"url('//cdn.teamwork.com/"+this.images[this.itemType]+"')":void 0,this.title=null!=(e=t.title)?e:app.tl("Error Loading Data"),this.message=null!=(n=t.message)?n:app.tl("Sorry we ran into a problem loading the data for this page."),this.subscriptions=[]}return t.prototype.images={task:"images/newui/blankslates/noTasks.png",milestone:"images/newui/blankslates/noMilestones.png",message:"images/newui/blankslates/noMessages.png",file:"images/newui/blankslates/noFiles.png",time:"images/newui/blankslates/noTasks.png",notebook:"images/newui/blankslates/noNotebooks.png",risk:"images/newui/blankslates/noRisks.png",link:"images/newui/blankslates/noLinks.png",shortcut:"images/newui/blankslates/noLinks.png",people:"images/newui/blankslates/noPeople.png"},t.prototype.OnRendered=function(t){},t.prototype.OnClickReload=function(){return location.reload()},t.prototype.OnClickHome=function(){return void 0!==this.projectId?app.GoTo("#projects/"+this.projectId+"/overview/activity"):app.GoTo("#dashboard")},t.prototype.OnClickTryAgain=function(){if(this.onTryAgainAction)return this.onTryAgainAction()},t.prototype.GetData=function(t){},t.prototype.dispose=function(){null!=this.subscriptions&&this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:e,template:t}}.apply(e,i))&&(t.exports=s)},3597:function(t,e,n){var i,s;i=[n(2307)],void 0!==(s=function(t){var e;return e=function(){function t(t){var e,n,i,s;null==t&&(t={}),e=this.translations[t.itemType],this.loadingText=null!=t.loadingText?t.loadingText:e?app.tl("Loading [_s]",e):app.tl("Loading"),this.showText=null==(n=t.showText)||n,this.format=null!=(i=t.format)?i:"normal",this.useDelay=null==(s=t.useDelay)||s}return t.prototype.translations={activity:"Activity",backlog:"Backlog",board:"Board",boards:"Boards",clockIn:"Clock Ins",comment:"Comments",company:"Companies",dashboard:"Dashboard",event:"Events",file:"Files",link:"Links",loginHistory:"Login History",message:"Messages",milestone:"Milestones",notebook:"Notebooks",people:"People",breakdown:"Breakdown",person:"",plan:"Plans",project:"Projects",projectReport:"Project Report",risk:"Risks",shortcut:"Shortcuts",status:"Statuses",tag:"Tags",task:"Tasks",taskList:"Task Lists",time:"Time Entries",workload:"Workload",paymen:"Payment"},t}(),{viewModel:e,template:t}}.apply(e,i))&&(t.exports=s)},3598:function(t,e,n){var i,s;i=[n(2308)],void 0!==(s=function(t){var e;return e=function(){function t(t){var e,n,i;null==t&&(t={}),e=this.translations[t.itemType],this.loadingText=e?app.tl("Loading [_s]",e):app.tl("Loading"),this.format=null!=(n=t.format)?n:"normal",this.showText=null==(i=t.showText)||i,this.showText||(this.loadingText="")}return t.prototype.translations={activity:"Activity",comment:"Comments",company:"Companies",data:"Data",file:"Files",link:"Links",loginHistory:"Login History",message:"Messages",milestone:"Milestones",notebook:"Notebooks",people:"People",person:"",plan:"Plans",shortcut:"Shortcuts",project:"Projects",risk:"Risks",status:"Statuses",task:"Tasks",taskList:"Task Lists",time:"Time Entries",workload:"Workload",reactions:"Reactions",projectReport:"Project Report",board:"Board"},t}(),{viewModel:e,template:t}}.apply(e,i))&&(t.exports=s)},3599:function(t,e,n){var i,s,o=function(t,e){return function(){return t.apply(e,arguments)}};i=[n(2309)],void 0!==(s=function(t){var e;return e=function(){function t(t){var e,n,i,s,a,r,l,p;null==t&&(t={}),this.dispose=o(this.dispose,this),this.OnClickLearnMore=o(this.OnClickLearnMore,this),this.OnRendered=o(this.OnRendered,this),this.subscriptions=[],this.section=null!=(n=t.section)?n:"",this.title=null!=(i=t.title)?i:"",this.description=null!=(s=t.description)?s:"",e=null!=(a=this.assets[this.section])?a:{},this.assetName=null!=(r=e.name)?r:"",this.assetWidth=null!=(l=e.width)?l:150,this.assetHeight=null!=(p=e.height)?p:150}return t.prototype.assets={"project-overview":{name:"onboardingProjectOverview",width:141,height:101},"project-tasks":{name:"onboardingStarterProject",width:147,height:109}},t.prototype.OnRendered=function(t){},t.prototype.OnClickLearnMore=function(){app.quickView.show("help",{doc:this.section})},t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:e,template:t}}.apply(e,i))&&(t.exports=s)},3637:function(t,e,n){var i,s,o=function(t,e){return function(){return t.apply(e,arguments)}};i=[n(2368)],void 0!==(s=function(t){var e;return e=function(){function t(t){var e,n,i;null==t&&(t={}),this.dispose=o(this.dispose,this),this.AjaxData=o(this.AjaxData,this),this.OnSubmit=o(this.OnSubmit,this),this.OnSelectedProject=o(this.OnSelectedProject,this),this.OnSelectedTask=o(this.OnSelectedTask,this),this.OnClickDeleteTimer=o(this.OnClickDeleteTimer,this),this.modalRef=t.modalRef,this.args=this.modalRef.args,null!=app.quickAddProject()&&(this.args.projectId=app.quickAddProject().id(),this.args.projectName=app.quickAddProject().name()),this.params=t,this.holderId="addOrEditTimer",this.subscriptions=[],this.projectId=ko.observable(ko.unwrap(this.args.projectId||(null!=(e=app.currentRoute().project)?e.id:void 0)||0)),this.projectName=ko.observable(ko.unwrap(this.args.projectName||(null!=(n=app.currentRoute().project)?n.name:void 0)||"")),this.taskId=ko.observable(0),this.taskName=ko.observable(""),this.description=ko.observable(""),this.running=ko.observable(!0),this.isBillable=ko.observable(app.loggedInUser.preferences.timeDefaultBillable()),this.modalTitle=ko.observable(app.tl("Add Timer")),app.currentRoute().project&&app.currentRoute().project.id()===this.projectId()&&!app.currentRoute().project.permissions.canLogTime()&&this.projectId(0),this.timer=null!=(i=this.args.timer)?i:null,null!=this.timer&&(this.mode="edit",this.projectId(this.timer.projectId()),this.projectName(this.timer.projectName()),this.taskId(this.timer.taskId()),this.taskName(this.timer.taskName()),this.isBillable(this.timer.billable()),this.description(this.timer.description()),this.running(this.timer.running()),this.modalTitle(app.tl("Edit Timer"))),this.initialProjectValue=!this.projectId()>0?null:null!=this.timer?{id:this.timer.projectId(),text:this.timer.projectName()}:{id:this.projectId(),text:this.projectName()},this.initialTaskValue=this.taskId()>0&&null!=this.timer?{id:this.timer.taskId(),text:this.timer.taskName()}:null,this.subscriptions.push(this.tasksUrl=ko.pureComputed(function(t){return function(){return app.prefixApi("projects/"+t.projectId()+"/tasks.json","API_PREFIX_V2","API_PREFIX_V2")}}(this))),this.subscriptions.push(this.canSubmit=ko.pureComputed(function(t){return function(){return null!=t.projectId()&&t.projectId()>0}}(this))),this.subscriptions.push(this.submitButtonText=ko.pureComputed(function(t){return function(){return"edit"===t.mode?t.isSubmitting()?app.tl("Updating Timer"):app.tl("Update Timer"):t.isSubmitting()?app.tl("Starting Timer"):app.tl("Start Timer")}}(this))),this.isSubmitting=ko.observable(!1)}return t.prototype.OnShow=function(){var t;t=function(t){return function(e){t.args.onCloseCallBack&&t.args.onCloseCallBack(e),app.modals.remove(t.modalRef)}}(this),Lightbox.showBoxByID(this.holderId,450,650,!0,{clickOverlayToClose:!1,onCloseCallBack:t,stack:this.args.stack}),app.FocusFirstInput(this.holderId)},t.prototype.OnClickDeleteTimer=function(){this.timer.Delete()},t.prototype.OnSelectedTask=function(t){return null!=t.type&&"select2:unselect"===t.type?(this.taskId("0"),this.taskName("")):(this.taskId(t.params.data.id),this.taskName(t.params.data.name))},t.prototype.OnSelectedProject=function(t){this.projectId(t.params.data.id),this.projectName(t.params.data.name),this.initialTaskValue=null,this.taskId("0")},t.prototype.OnSubmit=function(){var t,e,n,i;if(!this.isSubmitting())return this.isSubmitting(!0),e={timer:{taskId:this.taskId(),projectId:this.projectId(),description:this.description(),isBillable:this.isBillable(),isRunning:this.running()}},null==this.timer?(n="post",i="me/timers.json",t=app.consts.ACTIONTYPE.ADDED):(n="put",i="me/timers/"+this.timer.id()+".json",t=app.consts.ACTIONTYPE.UPDATED),app.api[n](i,e).then(function(e){return function(i){var s;return s="post"===n?parseInt(i.response.id,10):e.timer.id(),ko.postbox.publish("allTWEvents",{eventTime:new Date,actionType:t,itemType:"userTimer",itemId:s,projectId:e.projectId(),taskId:e.taskId()}),app.loggedInUser.preferences.timeDefaultBillable(e.isBillable()),Lightbox.close()}}(this)).finally(function(t){return function(){return t.isSubmitting(!1)}}(this))},t.prototype.AjaxData=function(t){return{page:t.page,pageSize:50,getSubTasks:!0,nestSubTasks:null==t.term||null!=t.term&&t.term.length<1,include:"taskListNames",sort:"manual",includeCompletedTasks:!1,includeCompletedSubtasks:!1,"filterText[]":t.term}},t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:e,template:t}}.apply(e,i))&&(t.exports=s)},3671:function(t,e,n){var i,s,o=function(t,e){return function(){return t.apply(e,arguments)}};i=[n(2407),n(1129)],void 0!==(s=function(t,e){var n;return n=function(){function t(t){var n,i,s,a,r,l,p;null==t&&(t={}),this.OnShow=o(this.OnShow,this),this.modalRef=t.modalRef,this.args=this.modalRef.args,this.params=t,this.subscriptions=[],this.holderId="contactFormModal",this.subtitle=null!=(n=this.args.subtitle)?n:"",this.modalTitle=null!=(i=this.args.title)?i:app.tl("Contact us"),this.modalClass=null!=(s=this.args.modalClass)?s:"",this.inputEmail=ko.observable(""),this.inputPhoneNumber=ko.observable(""),this.inputMessage=ko.observable(null!=(a=this.args.message)?a:""),this.isSubmitting=ko.observable(!1),this.onSubmitCallBack=null!=(r=this.args.onSubmitCallBack)?r:null,this.showEmailAddress=null==(l=this.args.showEmailAddress)||l,this.showPhoneNumber=null==(p=this.args.showPhoneNumber)||p,this.formValidator=new e("#contact-form"),this.subscriptions.push(this.canSubmit=ko.pureComputed(function(t){return function(){return!!t.inputMessage().length&&!(t.showEmailAddress&&!t.inputEmail().length)}}(this)))}return t.prototype.maxLen=1200,t.prototype.OnShow=function(){var t,e;t=function(t){return function(e){app.modals.remove(t.modalRef)}}(this),Lightbox.showBoxByID(this.holderId,480,500,!0,{clickOverlayToClose:!1,onCloseCallBack:t,bodyScroll:!1,stack:null!=(e=this.args.stack)&&e})},t.prototype.OnSubmit=function(){var t,e,n;if(null!=this.onSubmitCallBack&&"function"==typeof this.onSubmitCallBack)return this.onSubmitCallBack({message:this.inputMessage().trim()}),void Lightbox.close();if(this.formValidator.canSubmit()&&!this.isSubmitting())return this.isSubmitting(!0),n="feedback.json",e="post",t={feedback:{source:"Teamwork Projects",type:"Account Upgrade",summary:"Contact Form - Account Upgrade",message:this.inputMessage().trim()}},app.api[e](n,t).then(function(t){return function(){return app.flash.Success(app.tl("Thank you [_s], for contacting us. We will contact you as soon as possible.",app.loggedInUser.firstName())),Lightbox.close()}}()).catch(function(t){return function(){return app.flash.Error(app.tl("Sorry an error has occurred submitting the contact form. Please retry."))}}()).finally(function(t){return function(){return t.isSubmitting(!1)}}(this)),!1},t}(),{viewModel:n,template:t}}.apply(e,i))&&(t.exports=s)},3812:function(t,e,n){var i,s,o=function(t,e){return function(){return t.apply(e,arguments)}};i=[n(2558)],void 0!==(s=function(t){var e;return e=function(){function t(t){var e,n;null==t&&(t={}),this.dispose=o(this.dispose,this),this.OnClickConfirm=o(this.OnClickConfirm,this),this.OnClickCancel=o(this.OnClickCancel,this),this.OnShow=o(this.OnShow,this),this.subscriptions=[],this.modalRef=t.modalRef,this.args=this.modalRef.args,this.params=t,this.holderId="ModalTrialUpgrade",this.title=null!=(e=this.args.title)?e:"",this.text=null!=(n=this.args.text)?n:""}return t.prototype.OnShow=function(){var t,e;t=function(t){return function(e){t.args.onCloseCallBack&&t.args.onCloseCallBack(e),app.modals.remove(t.modalRef)}}(this),Lightbox.showBoxByID(this.holderId,480,430,!0,{clickOverlayToClose:!1,onCloseCallBack:t,stack:null!=(e=this.args.stack)&&e,bodyScroll:!1,containerCustomClass:"w-trial-expired__holder"}),app.FocusFirstInput(this.holderId)},t.prototype.OnClickCancel=function(){return Lightbox.cancel()},t.prototype.OnClickConfirm=function(){return Lightbox.close()},t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:e,template:t}}.apply(e,i))&&(t.exports=s)},3825:function(t,e,n){(function(i){var s,o;s=[n(164),n(2571)],void 0!==(o=function(t,e){var n;return n=function(){function e(e){null==e&&(e={}),this.shouldShowProductSwitch=t.observable(!1),app.InitOnShow(this),this.unreadUpdatesCount=t.observable(0),this.collapsed=t.observable(!1)}return e.prototype.refreshIfNeeded=function(){return"dashboard/projects"!==app.hasher.getHash()||(app.RefreshMainPage(),!0)},e.prototype.ShowOrHide=function(t,e){var n,s,o;return"tickets"!==app.currentRoute().page||(n=i("#menuTicket"),o=i(n).data("toggle-target"),s=i(n).data("toggle-parent"),i(o).toggleClass("menu-open"),i(s).toggleClass("menu-open"),i("#ticket-main-content").toggleClass("menu-open"),i("#new-ticket-content").toggleClass("menu-open"))},e.prototype.OnClickReports=function(t){return app.loggedInUser.onboarding.exploreReports()||app.UpdateOnboarding("exploreReports",!0),!0},e.prototype.OnClickHelpdocs=function(t){return app.loggedInUser.onboarding.exploreHelpsites()||app.UpdateOnboarding("exploreHelpsites",!0),!0},e.prototype.dispose=function(){},e}(),{viewModel:n,template:e}}.apply(e,s))&&(t.exports=o)}).call(e,n(245))},4149:function(t,e,n){var i,s;i=[n(164),n(2977)],void 0!==(s=function(t,e){var n;return n=function(t){var e,n,i,s;if(this.title=t.title,this.subnav=t.subnav,this.routePartName=t.routePartName,null!=this.subnav)for(s=this.subnav,e=0,n=s.length;e<n;e++)i=s[e],i.url=this.subnav.baseURL+"/"+i.routePart;app.InitOnShow(this)},{viewModel:n,template:e}}.apply(e,i))&&(t.exports=s)},4152:function(t,e,n){var i,s,o=function(t,e){return function(){return t.apply(e,arguments)}};i=[n(2980)],void 0!==(s=function(t){var e;return e=function(){function t(t){var e,n,i,s,a;null==t&&(t={}),this.dispose=o(this.dispose,this),this.subscriptions=[],this.size=null!=(e=t.size)?e:"normal",this.readonly=app.utility.EnsureObservable(null!=(n=t.readonly)&&n),this.selected=app.utility.EnsureObservable(null!=(i=t.selected)&&i),this.selectedAlways=app.utility.EnsureObservable(null!=(s=t.selectedAlways)&&s),this.disabled=app.utility.EnsureObservable(null!=(a=t.disabled)&&a)}return t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:e,template:t}}.apply(e,i))&&(t.exports=s)},4166:function(t,e,n){var i,s;i=[n(164),n(2995)],void 0!==(s=function(t,e){var n;return n=function(){function e(e){var n,i,s,o;null==e&&(e={}),this.subscriptions=[],this.actions=null!=(n=e.actions)?n:[],this.actions=app.utility.EnsureObservable(this.actions),this.size=null!=(i=e.size)?i:"normal",this.title=null!=(s=e.title)?s:"",this.showTitle=null!=(o=e.showTitle)?o:this.title.length>0,this.subscriptions.push(this.visibleActions=t.pureComputed(function(e){return function(){var n;return n=e.actions().map(function(e){return null==e.click&&(e.click=function(){}),null==e.icon&&(e.icon=""),null==e.iconClass&&(e.iconClass=""),null==e.iconSize&&(e.iconSize="1x"),null==e.label&&(e.label=""),null==e.actionModifierClass&&(e.actionModifierClass=""),null==e.shortcutLabel&&(e.shortcutLabel=""),null==e.enabled&&(e.enabled=t.observable(!0)),e.enabled=app.utility.EnsureObservable(e.enabled),e}),n.filter(function(t){return t.enabled()})}}(this))),app.InitOnShow(this)}return e.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},e}(),{viewModel:n,template:e}}.apply(e,i))&&(t.exports=s)},4172:function(t,e,n){var i,s;i=[n(3002)],void 0!==(s=function(t){var e;return e=function(){function t(t){null==t&&(t={}),this.svgClass=ko.observable(t.svgClass||"")}return t}(),{viewModel:e,template:t}}.apply(e,i))&&(t.exports=s)},4175:function(t,e,n){var i,s,o=function(t,e){return function(){return t.apply(e,arguments)}},a={}.hasOwnProperty;i=[n(164),n(3005)],void 0!==(s=function(t,e){var n;return n=function(){function t(t){var e,n,i,s,r,l,p,c,d,u;null==t&&(t={}),this.AfterHideDropdown=o(this.AfterHideDropdown,this),this.OnShowDropdown=o(this.OnShowDropdown,this),this.params=t,p="company"===(c=app.currentRoute().page)||"person"===c?"right":{target:"left",tooltip:"right"},e={tippedOptions:{isTippedParent:!0,skin:"light",padding:!1,showOn:"click",hideOn:!1,hideAfter:800,hideOnClickOutside:!0,position:p,offset:{x:5,y:0}},type:"project",selector:"",style:{}},n=Object.assign({},e,t,{tippedOptions:Object.assign({},e.tippedOptions,t.tippedOptions)}),this.projectName=n.projectName,this.projectId=n.projectId,this.type=n.type,this.selector=n.selector,s=n.classModifier,this.style=n.style,d=n.tippedOptions,r="w-project__menu",i=s?r+"--"+s:"",this.css=r+" "+i,this.tippedOptionsStr=function(){var t;t=[];for(l in d)a.call(d,l)&&(u=d[l],t.push(l+":"+JSON.stringify(u)));return t}().join(","),this.subscriptions=[],app.InitOnShow(this)}return t.prototype.OnShowDropdown=function(t,e){null!=this.params.onShow&&this.params.onShow(t,e)},t.prototype.AfterHideDropdown=function(t,e){null!=this.params.afterHide&&this.params.afterHide(t,e)},t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:n,template:e}}.apply(e,i))&&(t.exports=s)},4179:function(t,e,n){var i,s,o=function(t,e){return function(){return t.apply(e,arguments)}};i=[n(164),n(3009)],void 0!==(s=function(t,e){var n;return n=function(){function e(e){var n,i,s,a;null==e&&(e={}),this.GetIndicatorStyleClasses=o(this.GetIndicatorStyleClasses,this),this.GetTagStyleClasses=o(this.GetTagStyleClasses,this),this.GetFormattedCount=o(this.GetFormattedCount,this),this.OnClickTag=o(this.OnClickTag,this),this.subscriptions=[],this.tag=e.tag,this.displayType=null!=(n=e.displayType)?n:"",this.enableInactiveState=null!=(i=e.enableInactiveState)&&i,this.showCount=null!=(s=e.showCount)&&s,this.tagClasses=null!=(a=e.tagClasses)?a:[],this.OnClickTagEvent=e.OnClickTagEvent,this.subscriptions.push(this.inactiveClass=t.pureComputed(function(t){return function(){return null==t.tag.isSelected||null==t.tag.count?"":t.enableInactiveState&&!t.tag.isSelected()&&0===parseInt(t.tag.count(),10)?"u-tag--is-inactive":""}}(this))),this.subscriptions.push(this.selectedClass=t.pureComputed(function(t){return function(){return null==t.tag.isSelected?"":t.tag.isSelected()?"u-tag--is-selected":""}}(this))),this.subscriptions.push(this.tagStyles=t.pureComputed(function(t){return function(){var e,n;return{background:("function"==typeof(e=t.tag).isSelected?e.isSelected():void 0)?t.tag.color():null,border:("function"==typeof(n=t.tag).isSelected?n.isSelected():void 0)?"1px solid "+t.tag.color():null}}}(this))),this.subscriptions.push(this.indicatorStyles=t.pureComputed(function(t){return function(){var e,n;return{background:("function"==typeof(e=t.tag).isSelected?e.isSelected():void 0)?null:t.tag.color(),border:("function"==typeof(n=t.tag).isSelected?n.isSelected():void 0)?null:"1px solid "+t.tag.color()}}}(this))),app.InitOnShow(this)}return e.prototype.OnShow=function(){},e.prototype.OnClickTag=function(){this.OnClickTagEvent&&this.OnClickTagEvent(this.tag)},e.prototype.GetFormattedCount=function(e){var n;return n=t.unwrap(e),n>100?"100+":n},e.prototype.GetTagStyleClasses=function(){var t;return t=[],this.tagClasses.length&&(t=t.concat(this.tagClass)),"list"===this.displayType&&t.push("u-tag--is-list-item"),t.join(" ")},e.prototype.GetIndicatorStyleClasses=function(){var t;return t=[],"list"===this.displayType&&t.push("u-indicator--is-list-item"),t.join(" ")},e.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},e}(),{viewModel:n,template:e}}.apply(e,i))&&(t.exports=s)},4183:function(t,e,n){(function(i){var s,o,a=function(t,e){return function(){return t.apply(e,arguments)}},r=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};s=[n(3013),n(1120),n(1116),n(1189),n(1129),n(14),n(1203)],void 0!==(o=function(t,e,n,s,o,l,p){var c;return c=function(){function t(t){var e,i,r,l,p,c,d,u;null==t&&(t={}),this.dispose=a(this.dispose,this),this.SubmitComment=a(this.SubmitComment,this),this.WatchForEditTimeExpiring=a(this.WatchForEditTimeExpiring,this),this.getItemTitleType=a(this.getItemTitleType,this),this.getItemTitleText=a(this.getItemTitleText,this),this.OnSubmit=a(this.OnSubmit,this),this.OnDragDropEvent=a(this.OnDragDropEvent,this),this.OnClickCancelComment=a(this.OnClickCancelComment,this),this.OnClickRemoveAll=a(this.OnClickRemoveAll,this),this.OnUpdateSkipNotifications=a(this.OnUpdateSkipNotifications,this),this.wysiwygAtJsInitCallback=a(this.wysiwygAtJsInitCallback,this),this.wysiwygImageUploadsCompletedCallback=a(this.wysiwygImageUploadsCompletedCallback,this),this.wysiwygImageUploadsStartedCallback=a(this.wysiwygImageUploadsStartedCallback,this),this.wysiwygEditorActivate=a(this.wysiwygEditorActivate,this),this.wysiwygPassBackContentGetter=a(this.wysiwygPassBackContentGetter,this),this.wysiwygContentHasChangedCallback=a(this.wysiwygContentHasChangedCallback,this),this.OnActivateComment=a(this.OnActivateComment,this),this.OnUpdatePrivacyIds=a(this.OnUpdatePrivacyIds,this),this.OnUpdateNotifyIds=a(this.OnUpdateNotifyIds,this),this.OnPrivacyPickerChange=a(this.OnPrivacyPickerChange,this),this.OnPeoplePickerLoaded=a(this.OnPeoplePickerLoaded,this),this.subscriptions=[],this.componentName="WidgetAddOrEditComment",this.uniqueId="addEditComment-"+(new Date).getTime(),this.params=t,this.item=ko.unwrap(this.params.item),this.type=this.params.type,this.maxLength=null!=(l=this.params.maxLength)?l:6e4,this.numCommentsReference=null!=this.item.numComments?this.item.numComments:null!=this.item.numberOfComments?this.item.numberOfComments:null,this.numComments=ko.unwrap(this.numCommentsReference),this.parentModal=null!=(p=this.params.parentModal)?p:null,this.displayMode=null!=(e=this.params).displayMode?e.displayMode:e.displayMode="inline",null!=this.params.comment?this.comment=this.params.comment:this.comment=new s,this.commentId=0,null!=(null!=(c=this.params.comment)?c.id:void 0)&&(this.commentId=this.comment.id()),this.editMode=null!=(null!=(d=this.params.comment)?d.id:void 0)&&this.params.comment.id()/1>0,this.modeName=this.editMode?"edit":"add",this.notifyKey="-"+this.modeName+"-comment",this.projectId=null!=(i=this.params).projectId?i.projectId:i.projectId=null!=(u=app.currentRoute().project)?u.id:void 0,null==this.projectId&&null!=this.item.projectId()&&(this.projectId=this.item.projectId()),this.parentType=function(){switch(ko.unwrap(this.type)){case"file":case"files":case"fileversion":case"fileversion":return"file";default:return ko.unwrap(this.type)}}.call(this),this.parentId=function(){switch(ko.unwrap(this.type)){case"file":case"files":return this.item.versionId;default:return this.item.id}}.call(this),this.isQuickView=null!=t.isQuickView?t.isQuickView:t.isQuickView=!1,this.commentText=ko.observable(""),this.initialContent=this.commentText(),this.commentTextLoaded=ko.observable(!1),this.includeSelf=ko.observable(!1),this.skipNotifications=ko.observable(this.editMode),this.commentFollowersReady=ko.observable(!1),this.notifiedIds=ko.observableArray([]),this.subscriptions.push(this.notifiedIds.subscribe(function(t){return function(){return t.commentFollowersReady(!0)}}(this),null,"arrayChange")),this.privacyIds=ko.observableArray([]),this.privacyText=ko.observable(""),this.notifiedText=ko.observable(app.tl("Nobody")),this.optionsShowing=ko.observable(!("inline"===this.displayMode&&!this.editMode)),this.loadedComment=ko.observable(null),this.subscriptions.push(this.titleText=ko.pureComputed(this.getItemTitleText)),this.subscriptions.push(this.titleType=ko.pureComputed(this.getItemTitleType)),this.notifiedChangesCount=ko.observable(0),this.privacyChangesCount=ko.observable(0),this.notifyKey=this.editMode?"-edit-comment":"-add-comment",this.wysiwygEditorImageUploadInProgress=ko.observable(!1),this.subscriptions.push(this.useMarkdown=ko.pureComputed(function(t){return function(){return!t.editMode&&app.loggedInUser.useMarkdown()||t.editMode&&"TEXT"===t.comment.contentType()}}(this))),this.subscriptions.push(this.placeholder=ko.pureComputed(function(t){return function(){return(t.useMarkdown()?t.commentText():app.utility.StripHTML(t.commentText()))||app.tl("Add your comment here")}}(this))),this.subscriptions.push(this.maxHeight=ko.pureComputed(function(t){return function(){return"modal"===t.displayMode?165:t.editMode?500:null}}(this))),this.autosaveKey="autosave_"+ko.unwrap(this.type)+"_"+this.item.id()+"_comment_"+ko.unwrap(this.commentId)+"_p"+ko.unwrap(this.projectId)+"_u"+app.loggedInUser.id(),r=this.cleanCachedText(app.cache.get(this.autosaveKey)),r&&(this.commentText(r),this.initialContent=this.commentText()),this.subscriptions.push(this.formHasChanges=ko.pureComputed(function(t){return function(){return!!t.optionsShowing()&&(!t.editMode&&""!==t.commentText().replace(/<br>/g,"").replace(/&nbsp;/g,"").replace(/<div>\s*<\/div>/g,"").trim()||(!(!t.editMode||null==t.loadedComment()||t.commentText()===t.loadedComment().body())||(t.notifiedChangesCount()>1||t.privacyChangesCount()>1)))}}(this))),this.subscriptions.push(this.parentItemIsPrivate=ko.pureComputed(function(t){return function(){var e,n,i;if(null!=t.item&&null!=t.item.id)return e=function(){switch(ko.unwrap(this.type).toLowerCase()){case"notebook":case"notebooks":case"milestone":case"milestones":case"link":case"links":case"message":case"messages":case"file":case"files":case"fileversions":return"private";case"task":case"tasks":case"todo_items":case"todo_item":case"tasklist":case"tasklists":return"isPrivate"}}.call(t),"isPrivate"===e&&null==t.item.isPrivate&&null!=t.item.private&&(e="private"),i=t.item[e](),"string"==typeof i?"true"===(n=i.toLowerCase())||"1"===n||"yes"===n:"number"==typeof i?i>0:"boolean"==typeof i?i:void 0}}(this))),this.childDropzone=app.shared.get("viewModel/WidgetFileAttachmentDropzone/widget-file-dropzone-"+this.uniqueId),this.subscriptions.push(this.childDropzone),this.attachedFilesReady=ko.observable(!0),this.subscriptions.push(app.ko.postbox.subscribe("widget-file-dropzone-"+this.uniqueId,function(t){return function(e){if("attachedFilesReady"===e.action)return t.attachedFilesReady(e.ready)}}(this))),this.subscriptions.push(app.loggedInUser.useMarkdown.subscribe(function(t){return function(){return t.OnClickCancelComment()}}(this))),this.isSubmitting=ko.observable(!1),this.subscriptions.push(this.canSubmit=ko.pureComputed(function(t){return function(){var e,n;if(n=t.commentText(),n=n.split("<div class='fr-view'>").join(""),n=n.split("</div>").join(""),n=n.split("<p>").join(""),n=n.split("</p>").join(""),n=n.split("&nbsp;").join(""),n=n.split("<br>").join(""),""!==(e=n.trim())&&"<div>"!==e)return t.attachedFilesReady()&&!t.wysiwygEditorImageUploadInProgress()}}(this))),this.formValidator=new o("#addCommentForm"+this.uniqueId),this.subscriptions.push(this.commentIsPrivate=ko.pureComputed(function(t){return function(){var e,n;return t.editMode?0!==t.comment.private():null!=(null!=(e=t.item)?e.private:void 0)?0!==t.item.private():null!=(null!=(n=t.item)?n.isPrivate:void 0)&&0!==t.item.isPrivate()}}(this))),this.subscriptions.push(app.ko.postbox.subscribe("privacyIdsChanged"+this.notifyKey,function(t){return function(e){return t.privacyChangesCount(t.privacyChangesCount()+1),0===e.ids.length?(t.privacyText(""),t.privacyIds([])):(t.privacyText(e.label),t.privacyIds(e.ids)),Tipped.refresh()}}(this))),this.subscriptions.push(app.ko.postbox.subscribe("followerIdsChanged"+this.notifyKey,function(t){return function(e){return t.notifiedChangesCount(t.notifiedChangesCount()+1),0===e.ids.length&&(t.notifiedText(app.tl("Nobody")),t.includeSelf(!1)),t.OnUpdateNotifyIds(e)}}(this))),this.postboxPrefix="comments-"+(this.editMode?"edit":"add")+"-"+this.commentId+"-"+(new Date).getTime(),this.editMode?this.commentData=new n("v/2/comments/"+this.comment.id()+".json?returnEditInfo=true",{listField:"comment",ItemClass:s,onLoad:function(t){return function(){return t.loadedComment(t.commentData.list()[0]),r=t.cleanCachedText(app.cache.get(t.autosaveKey)),r?(t.commentText(r),t.initialContent=t.commentText()):(t.commentText(t.loadedComment().body()),t.initialContent=t.commentText()),t.commentTextLoaded(!0)}}(this),loadNow:!0}):this.commentTextLoaded(!0),this.permissionsLoaded=ko.observable(!1),this.projectPermissions={},this.project=app.projectInfo.get(this.projectId),this.subscriptions.push(this.isTemplate=ko.pureComputed(function(t){return function(){var e;return null!=(e=t.project())?e.isTemplate():void 0}}(this))),this.subscriptions.push(this.canViewMessagesAndFiles=ko.pureComputed(function(t){return function(){var e,n;return(null!=(e=t.project())?e.permissions.viewMessagesAndFiles():void 0)&&"1"===(null!=(n=t.project())?n.activePages.files():void 0)}}(this))),this.subscriptions.push(this.canAddFiles=ko.pureComputed(function(t){return function(){var e;return t.canViewMessagesAndFiles()&&(null!=(e=t.project())?e.permissions.canAddFiles():void 0)}}(this))),this.subscriptions.push(this.canSetPrivacy=ko.pureComputed(function(t){return function(){var e,n;return null!=(e=t.project())&&null!=(n=e.permissions)?n.canSetPrivacy():void 0}}(this))),this.subscriptions.push(this.canEditForever=ko.pureComputed(function(t){return function(){var e;return!!app.loggedInUser.administrator()||!(null==(e=t.project())||!e.permissions.projectAdministrator())}}(this))),this.notifyByDefault=ko.observable(!1),this.includeMeInNotify=ko.observable(!1),this.editMode&&!this.canEditForever()&&this.WatchForEditTimeExpiring(),this.shared=app.shared.get("viewModel/froala/"+this.postboxPrefix),this.subscriptions.push(this.shared),this.shared(this)}return t.prototype.OnPeoplePickerLoaded=function(t){var e,n;if(e=app.loggedInUser.id().toString(),r.call(t.value.map(String),e)>=0)return n=this.notifiedIds().filter(function(t){return t.toString()!==e}),ko.tasks.schedule(function(t){return function(){return t.notifiedIds(n)}}(this))},t.prototype.OnPrivacyPickerChange=function(t){var e,n;return t.selectedItems.length?(e=t.selectedItems.map(function(t){return t.label}),n=app.utility.GetLabelsAsList(e),this.privacyText({shortText:n})):this.privacyText("")},t.prototype.OnUpdateNotifyIds=function(t){this.notifiedIds(t.ids),this.notifiedText(t.label)},t.prototype.OnUpdatePrivacyIds=function(t){this.privacyIds(t.ids)},t.prototype.OnActivateComment=function(){this.optionsShowing(!0)},t.prototype.wysiwygContentHasChangedCallback=function(){if(null!=this.wysiwygGetContent)return this.commentText(this.wysiwygGetContent()),app.cache.set(this.autosaveKey,{text:this.wysiwygGetContent(),date:l(),useMarkdown:!1}),app.ko.postbox.publish(this.postboxPrefix+"-autosave",l())},t.prototype.wysiwygPassBackContentGetter=function(t){return this.wysiwygGetContent=t},t.prototype.wysiwygEditorActivate=function(){return"undefined"!=typeof Mousetrap&&null!==Mousetrap&&Mousetrap.pause(),this.optionsShowing(!0)},t.prototype.wysiwygImageUploadsStartedCallback=function(){return this.wysiwygEditorImageUploadInProgress(!0)},t.prototype.wysiwygImageUploadsCompletedCallback=function(){return this.wysiwygEditorImageUploadInProgress(!1)},t.prototype.wysiwygAtJsInitCallback=function(t){var e;return e={itemId:this.commentId,itemType:"comment",projectId:this.projectId},p(this.comment,this.postboxPrefix,t,e).forEach(function(t){return function(e){return t.subscriptions.push(e)}}(this))},t.prototype.OnUpdateSkipNotifications=function(){return this.skipNotifications(!this.skipNotifications()),!0},t.prototype.OnClickRemoveAll=function(){app.ko.postbox.publish("followerIdsChanged"+this.notifyKey+"-clearAll")},t.prototype.OnClickCancelComment=function(){var t;app.cache.remove(this.autosaveKey),"inline"!==this.displayMode?Lightbox.cancel():(t=app.tl("Are you sure you want to discard this comment?"),this.editMode&&(t=app.tl("Are you sure you want to discard your changes to this comment?")),""!==this.commentText()?app.modal.Show("confirm",{title:app.tl("Are You Sure?"),text:t,callback:function(t){return function(e){if(!e.wasCancelled)return t.cancelComment()}}(this)}):this.cancelComment())},t.prototype.cancelComment=function(){this.commentText(""),this.initialContent=this.commentText(),app.ko.postbox.publish("widget-file-dropzone-"+this.uniqueId,{action:"showDropZone",clicked:!1}),this.optionsShowing(!1),this.editMode&&this.comment.isEditing(!1)},t.prototype.OnDragDropEvent=function(t,e){if("dragenter"===e.type)return this.optionsShowing(!0),app.ko.postbox.publish("drag-file-"+this.uniqueId,{}),!0;console.log(e.type),e.preventDefault()},t.prototype.OnSubmit=function(){var t,e;if(this.formValidator.canSubmit()&&this.canSubmit())return e=app.tl("Are You Sure?"),t=!app.loggedInUser.notifications.receiveNotifyWarnings()||this.skipNotifications()?"":0===this.notifiedIds().length?app.tl("No one will be notified of this comment. Post this comment anyway?"):1===this.notifiedIds().length&&this.notifiedIds()[0]===app.loggedInUser.id()?app.tl("You are the only user who will be notified of this comment. Post this comment anyway?"):"",t?app.modal.Show("confirm",{title:e,text:t,callback:function(t){return function(e){if(!e.wasCancelled)return t.SubmitComment()}}(this)}):this.SubmitComment()},t.prototype.getItemTitleText=function(){switch(this.type){case"notebook":return this.item.name()+" V."+this.item.version();case"milestone":case"milestones":return this.item.title()+" ("+this.item.deadlineInWords()+")";case"link":case"task":case"tasks":return""+this.item.name();case"file":case"files":case"fileversions":return this.item.name()+" V."+this.item.version();default:return this.type}},t.prototype.getItemTitleType=function(){switch(this.type){case"notebooks":return"notebook";case"milestones":return"milestone";case"tasks":return"task";case"fileversions":return"file";case"links":return"link";default:return this.type}},t.prototype.WatchForEditTimeExpiring=function(){return this.editTimeWatcher=setInterval(function(t){return function(){var e;return t.canEditForever()?void clearInterval(t.editTimeWatcher):(e=15-l().diff(t.params.comment.datetime(),"minutes"),e<10?(app.flash.Warn(app.tl("The [_s] minute period for editing this comment will close in [_s] minutes",15,e)),clearInterval(t.editTimeWatcher)):void 0)}}(this),5e3)},t.prototype.SubmitComment=function(){var t,e,n,s,o,a,l,p,c,d,u,h,m,f,k;!this.isSubmitting()&&this.canSubmit()&&(this.isSubmitting(!0),"modal"===this.displayMode&&this.numComments===ko.unwrap(this.numCommentsReference)&&("files"===(c=this.type)||"file"===c||"fileversions"===c?(n=0,"files"===this.type?n=ko.unwrap(this.item.versionId):"fileversions"===this.type&&(n=ko.unwrap(this.item.id)),h="fileversions/"+n+"/comments/markread.json"):h="task"===(d=this.type)||"milestone"===d||"notebook"===d||"link"===d?this.type+"s/"+ko.unwrap(this.item.id())+"/comments/markread.json":this.type+"/"+ko.unwrap(this.item.id())+"/comments/markread.json",app.api.put(h,{}).then(function(t){return function(){if(null!=t.item.hasUnreadComments)return t.item.hasUnreadComments(!1)}}(this))),null!=this.wysiwygGetContent&&this.commentText(this.wysiwygGetContent()),l=this.editMode?"put":"post",m=this.item.id(),f=this.titleType(),"fileversions"===this.type?(m=this.item.id(),f="fileversion"):"file"!==(u=this.titleType())&&"files"!==u||(m=this.item.versionId(),f="fileversion"),k=this.editMode?"comments/"+this.loadedComment().id()+".json":f+"s/"+m+"/comments.json",function(t){return 0===t.length?"":t.join(",")},o=function(t){return 0===t.length?"":t.join(",")},a=function(t){return function(){var e,n,i;return e=t.notifiedIds().map(String),n=app.loggedInUser.id().toString(),i=r.call(e,n)>=0,app.featureFlip.check("teams")()?t.includeMeInNotify()||i:t.notifyByDefault()&&t.includeMeInNotify()||i}}(this),p=this.commentFollowersReady()?o(this.notifiedIds()):-1,t={objectId:m,objectType:f,comment:{body:this.commentText(),"author-id":app.loggedInUser.id(),"content-type":this.useMarkdown()?"TEXT":"HTML",notify:this.notifyByDefault()?"ALL":p,"notify-current-user":a(),skipNotifications:this.skipNotifications()}},this.canSetPrivacy()&&(!this.editMode||null!=this.loadedComment()&&2!==this.loadedComment().private())&&(s=this.privacyIds().filter(function(t){return"0"!==t.toString()}),t.comment["grant-access-to"]=s.toString(),t.comment.private=0===s.length?0:1),this.canAddFiles()&&null!=this.childDropzone()&&(e={pendingFileAttachments:this.childDropzone().getCheckedSelected(this.childDropzone().uploadedFiles()),updateFiles:!0,fileIds:this.childDropzone().buildFileIds(this.comment),attachmentsCategoryIds:this.childDropzone().buildExistingFileCategories(this.comment),pendingFileAttachmentsCategoryIds:this.childDropzone().buildNewFileCategories()},i.extend(t.comment,e)),this.editMode&&this.comment.body(this.commentText()),app.api[l](k,t).then(function(t){return function(e){var n,i,s,o,a;if("OK"===e.response.STATUS){if(t.optionsShowing(!1),app.cache.remove(t.autosaveKey),t.type.indexOf("milestone")>-1?ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"milestone_comment",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:t.item.id(),subType:"comment"}):t.type.indexOf("notebook")>-1?app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"notebookComments",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:t.item.id(),subType:"comment"}):t.type.indexOf("link")>-1?app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"link_comment",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:t.item.id(),subType:"comment"}):"task"===(s=t.type)||"tasks"===s||"todo_items"===s?(i={eventTime:new Date,itemType:"task_comment",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:t.item.id(),taskListId:t.item.taskListId(),subType:"comment",editMode:t.editMode},t.item.parentTaskId()>0&&(i.parentTaskId=t.item.parentTaskId()),null!=t.item.componentName&&"Task"===t.item.componentName?("function"==typeof(n=t.item).cardId?n.cardId():void 0)&&t.item.cardId()>0&&(i.extraInfo={data:{cardId:t.item.cardId(),columnId:t.item.boardColumn.id()}}):null!=t.item.componentName&&"TaskCard"===t.item.componentName&&(i.extraInfo={data:{cardId:t.item.id(),columnId:t.item.columnId()}}),app.ko.postbox.publish("allTWEvents",i)):"file"===(o=t.type)||"files"===o||"fileversions"===o?null!=(null!=(a=t.item.parentVM)?a.componentName:void 0)&&"Task"===t.item.parentVM.componentName?app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"task",projectId:t.projectId,actionType:app.consts.ACTIONTYPE.UPDATED,itemId:ko.unwrap(t.item.parentVM.id()),subType:"task-file-comment"}):app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"file_comment",projectId:t.projectId,actionType:app.consts.ACTIONTYPE.UPDATED,itemId:ko.unwrap(t.item.id()),subType:"comment"}):"todo_item"===t.type&&app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"task_comment",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:ko.unwrap(t.item.id()),subType:"comment"}),"modal"===t.displayMode)return Lightbox.closeAll();if(app.ko.postbox.publish("widget-file-dropzone-"+t.uniqueId,{action:"showDropZone",clicked:!1}),t.commentText(""),t.initialContent=t.commentText(),t.privacyText(""),t.notifiedText(app.tl("Nobody")),t.optionsShowing(!1),t.editMode)return t.comment.isEditing(!1)}}}(this)).finally(function(t){return function(){return t.isSubmitting(!1)}}(this)))},t.prototype.cleanCachedText=function(t){return null==t?"":this.useMarkdown()&&null!=t.useMarkdown&&!t.useMarkdown?app.utility.StripHTML(t.text):t.text},t.prototype.dispose=function(){null!=this.subscriptions&&this.subscriptions.forEach(function(t){return t.dispose()}),null!=this.commentData&&this.commentData.dispose(),delete this.commentData,this.editTimeWatcher&&clearInterval(this.editTimeWatcher)},t}(),{viewModel:c,template:t}}.apply(e,s))&&(t.exports=o)}).call(e,n(245))},4184:function(t,e,n){(function(i){var s,o,a=function(t,e){return function(){return t.apply(e,arguments)}},r=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};s=[n(3014),n(1120),n(1116),n(1205),n(1129),n(14),n(1203)],void 0!==(o=function(t,e,n,s,o,l,p){var c;return c=function(){function t(t){var e,n,i,s;null==t&&(t={}),this.dispose=a(this.dispose,this),this.wysiwygImageUploadsCompletedCallback=a(this.wysiwygImageUploadsCompletedCallback,this),this.wysiwygImageUploadsStartedCallback=a(this.wysiwygImageUploadsStartedCallback,this),this.wysiwygAtJsInitCallback=a(this.wysiwygAtJsInitCallback,this),this.wysiwygPassBackContentSetter=a(this.wysiwygPassBackContentSetter,this),this.wysiwygPassBackContentGetter=a(this.wysiwygPassBackContentGetter,this),this.wysiwygContentHasChangedCallback=a(this.wysiwygContentHasChangedCallback,this),this.OnSubmit=a(this.OnSubmit,this),this.OnCancelMessageOrReply=a(this.OnCancelMessageOrReply,this),this.OnClickClose=a(this.OnClickClose,this),this.OnUpdatePrivacyIds=a(this.OnUpdatePrivacyIds,this),this.OnUpdateNotifyIds=a(this.OnUpdateNotifyIds,this),this.OnRenderedMessageBody=a(this.OnRenderedMessageBody,this),this.OnPeoplePickerLoaded=a(this.OnPeoplePickerLoaded,this),this.componentName="WidgetAddOrEditMessage",this.subscriptions=[],this.params=t,this.item=ko.unwrap(this.params.item),this.itemCopy=this.item.Clone(),this.mode=null!=(n=this.params.mode)?n:"add",this.mode=app.utility.EnsureObservable(this.mode),this.showCreatedNotification=null!=(i=this.params.showCreatedNotification)&&i,this.project=ko.observable(null),this.projectId=ko.observable(0).extend({number:null}),this.messageId=ko.observable(0).extend({number:null}),this.categoryId=ko.observable(0).extend({number:null}),this.postId=ko.observable(0).extend({number:null}),null!=this.item.projectId&&this.projectId(this.item.projectId()),null!=app.currentRoute().project&&this.projectId(app.currentRoute().project.id()),null!=this.item.messageId&&this.messageId(this.item.messageId()),null!=this.item.postId&&this.postId(this.item.postId()),null!=(null!=(s=this.item.category)?s.id:void 0)&&this.categoryId(this.item.category.id()),this.skipNotifications=ko.observable(this.messageId()>0),this.subscriptions.push(this.projectId.subscribe(function(t){return function(e){if(e>0)return t.project(app.projectInfo.get(e))}}(this))),this.projectId()>0&&this.project(app.projectInfo.get(this.projectId)),this.subscriptions.push(this.isTemplate=ko.pureComputed(function(t){return function(){var e,n;return"function"==typeof(e=t.project())&&null!=(n=e())?n.isTemplate():void 0}}(this))),this.uniqueId="addOrEditMessage-"+(new Date).getTime(),this.title=ko.observable(ko.unwrap(this.item.title||"")),this.body=ko.observable(ko.unwrap(this.item.body||"")),this.notifiedText=ko.observable(app.tl("Nobody")),this.notifiedIds=ko.observableArray([]),this.privacyIds=ko.observableArray([]),this.projects=ko.observableArray([]),this.projectsLoaded=ko.observable(!1),this.postboxPrefix="add-edit-message-"+this.uniqueId,this.wysiwygEditorImageUploadInProgress=ko.observable(!1),this.childDropzone=app.shared.get("viewModel/WidgetFileAttachmentDropzone/widget-file-dropzone-"+this.uniqueId),this.subscriptions.push(this.childDropzone),this.attachedFilesReady=ko.observable(!0),this.attachmentsEdited=ko.observable(!1),this.subscriptions.push(app.ko.postbox.subscribe("widget-file-dropzone-"+this.uniqueId,function(t){return function(e){if("attachedFilesReady"===e.action&&t.attachedFilesReady(e.ready),"attachmentsEdited"===e.action&&("edited"===e.subType&&t.attachmentsEdited(!0),"unedited"===e.subType))return t.attachmentsEdited(!1)}}(this))),this.canChangeProject=null!=t.canChangeProject&&t.canChangeProject,this.subscriptions.push(this.canAddTags=ko.pureComputed(function(t){return function(){return!!app.account.tagsEnabled()&&!t.item.isReply()}}(this))),this.subscriptions.push(this.canViewMessagesAndFiles=ko.computed(function(t){return function(){var e,n,i,s,o;if(null!=t.project())return(null!=(e=ko.unwrap(t.project()))&&null!=(n=e.permissions)?n.viewMessagesAndFiles():void 0)&&"1"===(null!=(i=ko.unwrap(t.project()))&&null!=(s=i.activePages)&&null!=(o=s.files())?o.toString():void 0)}}(this))),this.subscriptions.push(this.canAddFiles=ko.computed(function(t){return function(){var e,n;if(null!=t.project())return(null!=(e=ko.unwrap(t.project()))&&null!=(n=e.permissions)?n.canAddFiles():void 0)&&t.canViewMessagesAndFiles()}}(this))),this.subscriptions.push(this.canSetPrivacy=ko.computed(function(t){return function(){var e,n;if(null!=t.project())return!t.item.isReply()&&(null!=(e=ko.unwrap(t.project()))&&null!=(n=e.permissions)?n.canSetPrivacy():void 0)}}(this))),this.subscriptions.push(this.canSubmit=ko.pureComputed(function(t){return function(){var e,n,i;return n=t.body().replace(/<br>/g,"").replace(/&nbsp;/g,"").replace(/<div>\s*<\/div>/g,"").trim(),i=t.title().trim(),e=t.item.isReply(),!t.wysiwygEditorImageUploadInProgress()&&(0!==t.projectId()&&(""!==n&&!(!e&&""===i)))}}(this))),this.subscriptions.push(this.formHasChanges=ko.pureComputed(function(t){return function(){var e,n;return!app.utility.AreEqual(t.getTags(t.item.tags()),t.getTags(t.itemCopy.tags()))||((t.categoryId()||0)!==parseInt((null!=(n=t.item.category)?n.id():void 0)||0,10)||(!app.utility.AreEqual(t.privacyIds(),(("function"==typeof(e=t.item).lockdownPrivacyArray?e.lockdownPrivacyArray():void 0)||[]).map(Number))||(!!t.attachmentsEdited()||("add"===ko.unwrap(t.mode)?t.body().replace(/<br>/g,"").replace(/&nbsp;/g,"").replace(/<div>\s*<\/div>/g,"").trim().length>0:ko.unwrap(t.body)!==ko.unwrap(t.item.body)))))}}(this))),this.isSubmitting=ko.observable(!1),this.subscriptions.push(this.submitButtonText=ko.computed(function(t){return function(){return t.messageId()>0?t.isSubmitting()?app.tl("Saving Changes"):app.tl("Save Changes"):t.isSubmitting()?app.tl("Posting Message"):app.tl("Post Message")}}(this))),this.subscriptions.push(this.autosaveKey=ko.pureComputed(function(t){return function(){var e,n,i;return i=null!=(e=ko.unwrap(null!=(n=app.loggedInUser)?n.id:void 0))?e:0,ko.unwrap(t.item.isReply)?"autosave_message_"+t.messageId()+"_reply_"+t.item.postId()+"_p"+t.projectId()+"_u"+i:"autosave__0_message_"+t.messageId()+"_p"+t.projectId()+"_u"+i}}(this))),this.subscriptions.push(this.useMarkdown=ko.pureComputed(function(t){return function(){var e;return"TEXT"===ko.unwrap(t.item.contentType)||"add"===ko.unwrap(t.mode)&&ko.unwrap(null!=(e=app.loggedInUser)?e.useMarkdown:void 0)}}(this))),e=this.cleanCachedText(app.cache.get(this.autosaveKey())),e&&this.body(e),this.subscriptions.push(app.loggedInUser.useMarkdown.subscribe(function(t){return function(){return t.OnCancelMessageOrReply()}}(this))),this.subscriptions.push(app.ko.postbox.subscribe("followerIdsChanged-add-message",this.OnUpdateNotifyIds)),this.subscriptions.push(app.ko.postbox.subscribe("privacyIdsChanged-add-message",this.OnUpdatePrivacyIds)),this.notifyByDefault=ko.observable(!1),this.includeMeInNotify=ko.observable(!1),this.shared=app.shared.get("viewModel/froala/"+this.postboxPrefix),this.subscriptions.push(this.shared),this.shared(this),this.formValidator=new o("#"+this.holderId)}return t.prototype.OnPeoplePickerLoaded=function(t){var e,n;if(e=app.loggedInUser.id().toString(),r.call(t.value.map(String),e)>=0)return n=this.notifiedIds().filter(function(t){return t.toString()!==e}),ko.tasks.schedule(function(t){return function(){return t.notifiedIds(n)}}(this))},t.prototype.OnRenderedMessageBody=function(){return app.FocusFirstInput(this.holderId)},t.prototype.OnUpdateNotifyIds=function(t){this.notifiedIds(t.ids),this.notifiedText(t.label)},t.prototype.OnUpdatePrivacyIds=function(t){this.privacyIds(t.ids)},t.prototype.OnClickClose=function(){this.item.isEditing(!1)},t.prototype.OnCancelMessageOrReply=function(){this.item.isEditing(!1),app.cache.remove(this.autosaveKey())},t.prototype.OnSubmit=function(){var t,e;if(this.formValidator.canSubmit()&&!this.wysiwygEditorImageUploadInProgress()&&(null!=this.wysiwygGetContent&&this.body(this.wysiwygGetContent()),""!==this.body().replace(/<br>/g,"").replace(/&nbsp;/g,"").replace(/<div>\s*<\/div>/g,"").trim()&&!this.isSubmitting()&&this.canSubmit()))return e=function(t){return function(){var e,n,s,o,a,l,p;return t.isSubmitting(!0),app.cache.remove(t.autosaveKey()),function(t){return 0===t.length?"":t.join(",")},o=function(t){return 0===t.length?"0":t.join(",")},a=function(){var e,n,i;return e=t.notifiedIds().map(String),n=app.loggedInUser.id().toString(),i=r.call(e,n)>=0,app.featureFlip.check("teams")()?t.includeMeInNotify()||i:t.notifyByDefault()&&t.includeMeInNotify()||i},e={post:{body:t.body(),"content-type":t.useMarkdown()?"TEXT":"HTML",notify:t.notifyByDefault()?"ALL":o(t.notifiedIds()),"notify-current-user":a(),skipNotifications:t.skipNotifications()}},t.item.isReply()||(s=t.privacyIds().filter(function(t){return"0"!==t.toString()}),l={title:t.title(),"category-id":t.categoryId(),private:0===s.length?0:1,"grant-access-to":s.toString(),tagIds:app.tags.getTagIds(t.itemCopy.tags())},i.extend(e.post,l)),t.canAddFiles()&&null!=t.childDropzone()&&(n={pendingFileAttachments:t.childDropzone().getCheckedSelected(t.childDropzone().uploadedFiles()),updateFiles:!0,attachments:t.childDropzone().buildFileIds(t.item),removeOtherFiles:!0,attachmentsCategoryIds:t.childDropzone().buildExistingFileCategories(t.item),pendingFileAttachmentsCategoryIds:t.childDropzone().buildNewFileCategories()},i.extend(e.post,n)),t.messageId()>0?(p=t.item.isReply()?t.item.postId():t.messageId(),app.api.put((t.item.isReply()?"messageReplies":"messages")+"/"+p+".json",e).then(function(e){return t.item.body(t.body()),t.item.tags(t.itemCopy.tags()),t.item.isEditing(!1),app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:t.item.isReply()?"reply":"message",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:t.messageId(),projectId:t.projectId()})}).catch(function(t){return app.flash.Error(app.tl("Error saving message"))}).finally(function(){return app.cache.remove(t.autosaveKey()),t.isSubmitting(!1),t.skipNotifications(!0)})):app.api.post("projects/"+t.projectId()+"/messages.json",e).then(function(e){var n,i;if(app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"message",actionType:app.consts.ACTIONTYPE.ADDED,itemId:e.response.messageId,projectId:t.projectId()}),t.showCreatedNotification&&null!=e.response.messageId&&e.response.messageId>0)return n="#messages/"+e.response.messageId,i=app.tl("Message Created")+" - <a href='"+n+"'>"+app.tl("View Message")+"</a>",app.flash.Success(i)}).finally(function(){return app.cache.remove(t.autosaveKey()),t.body(""),t.isSubmitting(!1),t.skipNotifications(!0)})}}(this),t=app.loggedInUser.notifications.receiveNotifyWarnings()?this.skipNotifications()?"":0===this.notifiedIds().length?app.tl("No one will be notified of this new message. Send this message anyway?"):"":"",t?app.modal.Show("confirm",{title:app.tl("Are you sure?"),text:t,callback:function(t){if(!t.wasCancelled)return e()}}):e()},t.prototype.wysiwygContentHasChangedCallback=function(){if(null!=this.wysiwygGetContent)return this.body(this.wysiwygGetContent()),app.cache.set(this.autosaveKey(),{text:this.body(),date:l(),useMarkdown:!1}),app.ko.postbox.publish(this.postboxPrefix+"-autosave",l())},t.prototype.wysiwygPassBackContentGetter=function(t){return this.wysiwygGetContent=t},t.prototype.wysiwygPassBackContentSetter=function(t){return this.wysiwygSetContent=t},t.prototype.wysiwygAtJsInitCallback=function(t){var e;return e={itemId:this.messageId(),itemType:"message",projectId:this.projectId()},p(this.item,this.postboxPrefix,t,e).forEach(function(t){return function(e){return t.subscriptions.push(e)}}(this))},t.prototype.wysiwygImageUploadsStartedCallback=function(){return this.wysiwygEditorImageUploadInProgress(!0)},t.prototype.wysiwygImageUploadsCompletedCallback=function(){return this.wysiwygEditorImageUploadInProgress(!1)},t.prototype.getTags=function(t){return t.map(function(t){return t.name()}).join(",")},t.prototype.cleanCachedText=function(t){return null==t?"":this.useMarkdown()&&null!=t.useMarkdown&&!t.useMarkdown?app.utility.StripHTML(t.text):t.text},t.prototype.dispose=function(){app.cache.remove(this.autosaveKey()),null!=this.subscriptions&&this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:c,template:t}}.apply(e,s))&&(t.exports=o)}).call(e,n(245))},4189:function(t,e,n){(function(i){var s,o,a=function(t,e){return function(){return t.apply(e,arguments)}},r=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};s=[n(3021),n(3022)],void 0!==(o=function(t,e){var n;return n=function(){function t(t){var n,s,o,l,p,c,d,u,h,m,f,k,g,b,v,y,x,w,I,C,T,O,P,S,j,_,A,F,D,U,M,E,N,L,R,$;null==t&&(t={}),this.dispose=a(this.dispose,this),this.getAvailablePeopleCount=a(this.getAvailablePeopleCount,this),this.getFirstPerson=a(this.getFirstPerson,this),this.findAvailablePersonById=a(this.findAvailablePersonById,this),this.updateBasedOnPrivacy=a(this.updateBasedOnPrivacy,this),this.setInitialValue=a(this.setInitialValue,this),this.OnNewUserAdded=a(this.OnNewUserAdded,this),this.OnClickInviteUser=a(this.OnClickInviteUser,this),this.OnInitialOptionChanged=a(this.OnInitialOptionChanged,this),this.OnResponsibleUsersChanged=a(this.OnResponsibleUsersChanged,this),this.OnChangeDropdownUsers=a(this.OnChangeDropdownUsers,this),this.OnPrivacyChanged=a(this.OnPrivacyChanged,this),this.OnSelectPerson=a(this.OnSelectPerson,this),this.OnSelectNoneInCompany=a(this.OnSelectNoneInCompany,this),this.OnSelectAllInCompany=a(this.OnSelectAllInCompany,this),this.OnDblClickAssignedTo=a(this.OnDblClickAssignedTo,this),this.OnRenderedPicker=a(this.OnRenderedPicker,this),this.tippedContent=e,this.params=t,this.subscriptions=[],this.float=null!=(d=t.float)?d:"left",this.itemType=null!=(u=t.itemType)?u:null,this.item=null!=(I=t.item)?I:{},this.itemId=null!=(U=t.itemId)?U:null,this.projectId=ko.unwrap(null!=(M=t.projectId)?M:0),this.groupByCompany=null!=(E=t.groupByCompany)&&E,this.displayMeFirst=null==(N=t.displayMeFirst)||N,c=null!=(L=t.people)?L:ko.observableArray([]),this.availablePeople=ko.observableArray(c().slice()),this.autoSelectIfOne=null!=(R=t.autoSelectIfOne)&&R,this.getFollowers=null!=($=t.getFollowers)&&$,this.getRoles=null!=(h=t.getRoles)&&h,this.includeObservers=null!=(m=t.includeObservers)?m:app.loggedInUser.inOwnerCompany(),this.includeCollaborators=null==(f=t.includeCollaborators)||f,this.allowedPermissions=["canLogTime"],this.searchText=ko.observable(""),this.permission=null!=(k=t.permission)?k:"",this.showAvatar=!!t.showAvatar,console.assert(!t.permission||(g=t.permission,r.call(this.allowedPermissions,g)>=0)),this.isQuickView=null!=(b=t.isQuickView)&&b,this.tippedContainer=null!=(v=t.tippedContainer)?v:".tipped-container",this.tippedParentContainer=this.isQuickView?".quick-view":this.tippedContainer,this.subscriptions.push(this.tippedContentOptions=ko.pureComputed(function(t){return function(){return"showOn: 'click', hideOn: false, hideOnClickOutside: true, skin: 'light', position: 'topmiddle', voila: false, container: '"+ko.unwrap(t.tippedParentContainer)+"', containment: { selector: '"+ko.unwrap(t.tippedContainer)+"'}"}}(this))),this.allowMultiple=null!=(y=t.multiple)&&y,this.koObservable=null!=(x=t.koObservable)?x:ko.observable(""),this.initialOptions=null!=(w=t.initialOptions)?w:[{id:0,text:app.tl("Anyone")}],this.autofocus=null!=(C=t.autofocus)&&C,this.formName=null!=(T=t.formName)?T:"",this.initialValue=this.koObservable(),0!==this.initialOptions.length||this.koObservable()||this.koObservable(""),this.subscriptions.push(this.peopleLoaded=ko.pureComputed(function(t){return function(){return t.availablePeople().length>0}}(this))),this.subscriptions.push(this.placeholder=ko.pureComputed(function(t){return function(){var e;return t.peopleLoaded()||0===ko.unwrap(t.initialOptions).length?0===(null!=(e=t.initialOptions[0])?e.id:void 0)?t.initialOptions[0].text:app.tl("Select")+app.localizationPreferences().ellipsis:app.tl("Loading")}}(this))),this.listenTo=null!=(O=t.listenTo)?O:"",this.namesObservable=null!=(P=t.namesObservable)?P:ko.observableArray([]),this.typeaheadId=null!=(S=t.typeaheadId)?S:null,this.displayNamesObservable=t.displayNamesObservable,this.initialPrivacyIds=null!=(j=t.initialPrivacyIds)?j:null,this.itemIsPrivate=ko.observable(null!=this.initialPrivacyIds&&this.initialPrivacyIds.length),this.taskId=null!=(_=t.taskId)?_:0,this.createMultiple=null!=(A=t.createMultiple)?A:ko.observable(!1),this.showMultipleText=null!=(F=t.showMultipleText)&&F,""!==ko.unwrap(this.listenTo)&&(this.subscriptions.push(app.ko.postbox.subscribe("privacyIdsChanged"+ko.unwrap(this.listenTo),this.OnPrivacyChanged)),this.subscriptions.push(app.ko.postbox.subscribe("responsibleUsersChanged"+ko.unwrap(this.listenTo),this.OnResponsibleUsersChanged)),this.subscriptions.push(app.ko.postbox.subscribe("initialOptionChanged"+ko.unwrap(this.listenTo),this.OnInitialOptionChanged)),this.subscriptions.push(app.ko.postbox.subscribe("newUserAdded"+ko.unwrap(this.listenTo),this.OnNewUserAdded))),this.subscriptions.push(ko.postbox.subscribe(this.typeaheadId+"-newUsersAdded",function(t){return function(e){if(null!=(null!=e?e.users:void 0))return t.OnNewUserAdded(e.users)}}(this))),this.assignedTo=ko.observableArray([]),this.assignedToNoPrivacy=[],this.uniqueId="assignMultiplePeopleTipped_"+ko.unwrap(this.itemType)+"_"+ko.unwrap(this.itemId)+"_"+(new Date).getTime(),this.initialized=!1,this.subscriptions.push(this.availablePeople.subscribe(function(t){return function(e){var n;if(t.setInitialValue(),null!=t.item.availablePeople&&t.item.availablePeople(t.postProcessPeople(t.availablePeople())),null!=e&&e.length>0){if(n=e[e.length-1],null!=(null!=n?n.temporary:void 0))return t.koObservable(n.id);"-3"===t.initialValue&&t.initialOptions.length&&null!=t.initialOptions[0].isForReminders||setTimeout(function(){return t.updateBasedOnPrivacy()},250)}}}(this))),this.subscriptions.push(this.filteredAvailablePeople=ko.pureComputed(function(t){return function(){return!0===t.displayMeFirst?t.availablePeople().filter(function(t){return 1!==t.people.length||t.people[0].id!==app.loggedInUser.id().toString()}):t.availablePeople()}}(this))),this.subscriptions.push(this.loggedInUserAvailable=ko.pureComputed(function(t){return function(){var e,n,i,s;if(t.groupByCompany){for(s=t.availablePeople(),n=0,i=s.length;n<i;n++)if(e=s[n],app.utility.FindIndexByKeyValue(e.people,"id",app.loggedInUser.id().toString())>-1)return!0;return!1}return app.utility.FindIndexByKeyValue(t.availablePeople(),"id",app.loggedInUser.id().toString())>-1}}(this))),this.subscriptions.push(this.filteredPeople=ko.computed(function(t){return function(){var e,n,i,s,o,a,r,l,p,c,d,u;if(""===t.searchText().trim())return t.availablePeople();for(d=t.searchText().trim().toLowerCase(),p=t.availablePeople(),i=0,o=p.length;i<o;i++){for(e=p[i],n=0,c=e.people,s=0,a=c.length;s<a;s++)l=c[s],r=(l.firstName+" "+l.lastName).toLowerCase(),u=-1===r.indexOf(d),l.hiddenFromSearch=u,l.hiddenFromSearch&&n++;e.hiddenFromSearch=n===e.people.length}return t.availablePeople()}}(this))),this.peopleLoaded()||""!==this.listenTo?this.peopleLoaded()&&this.setInitialValue():(this.itemIsPrivate()?(s=ko.unwrap(this.itemId),o=ko.unwrap(this.itemType),l=0,null!=this.item.taskListId&&(l=ko.unwrap(this.item.taskListId)),"task"===(null!=(D=this.item.componentName)?D.toLowerCase():void 0)&&"taskList"===o.toLowerCase()&&l===s&&("function"==typeof(n=this.item).privacyIsInherited?n.privacyIsInherited():void 0)&&(s=ko.unwrap(this.item.id),o="task"),p={for:"grantAccessTo",grantAccessTo:this.initialPrivacyIds.join(","),projectId:this.projectId,followedItem:o,id:s,groupByCompany:ko.unwrap(this.groupByCompany),getFollowers:this.getFollowers,getRoles:this.getRoles,includeObservers:this.includeObservers,includeCollaborators:this.includeCollaborators}):(p={for:ko.unwrap(this.itemType),id:ko.unwrap(this.itemId),groupByCompany:ko.unwrap(this.groupByCompany),getFollowers:this.getFollowers,getRoles:this.getRoles,includeObservers:this.includeObservers,includeCollaborators:this.includeCollaborators},0!==ko.unwrap(this.projectId)&&(p.projectId=ko.unwrap(this.projectId)),p.permission=this.permission),app.GetAvailableUsers(p,this.availablePeople)),this.subscriptions.push(this.assignedTo.subscribe(function(t){return function(e){var n,i,s,o,a,r,l,p,c;if(e.updatedBasedOnPrivacy?delete e.updatedBasedOnPrivacy:t.assignedToNoPrivacy=e.slice(0),t.namesObservable(e),0===e.length)return null!=(null!=(l=t.availablePeople()[t.availablePeople().length-1])?l.temporary:void 0)&&t.availablePeople.pop(),parseInt(t.koObservable(),10)>0&&t.koObservable(0!==ko.unwrap(t.initialOptions).length?ko.unwrap(t.initialOptions)[0].id:""),!0;for(n=[],o=0,a=e.length;o<a;o++)s=e[o],n.push(s.id);return i=app.utility.ComputeDisplayablePeopleNames(e,2),null!=t.displayNamesObservable&&t.displayNamesObservable(i),r={name:i,id:n.join(","),people:[],temporary:!0},r.id.indexOf(",")>-1?null==(null!=(p=t.availablePeople()[t.availablePeople().length-1])?p.temporary:void 0)?t.availablePeople.push(r):(t.availablePeople.pop(),t.availablePeople.push(r)):(null!=(null!=(c=t.availablePeople()[t.availablePeople().length-1])?c.temporary:void 0)&&t.availablePeople.pop(),t.koObservable(r.id))}}(this))),this.subscriptions.push(this.showMultiple=ko.pureComputed(function(t){return function(){var e;return"string"!=typeof(e=t.koObservable())||-1===e.indexOf(",")}}(this))),this.subscriptions.push(this.koObservable.subscribe(function(t){return function(e){var n,s,o,a,r,l;if(null!=e){if(Array.isArray(e)&&(e=e.join(",")),-3===parseInt(e,10)&&t.initialOptions.length&&null!=t.initialOptions[0].isForReminders){for(l=null!=t.initialOptions[0].ids.split?t.initialOptions[0].ids.split(","):t.initialOptions[0].ids.slice(),n=[],a=0,r=l.length;a<r;a++)o=l[a],null!==(s=t.findAvailablePersonById(o))&&n.push(s);return t.namesObservable(n)}if(-2===parseInt(e,10)&&t.allowMultiple)return t.assignedTo([]),i("#"+t.uniqueId+"_handler").click();if(-3===parseInt(e,10))return t.OnClickInviteUser();if("string"==typeof e&&-1===e.indexOf(",")){if(null!=t.displayNamesObservable&&"0"===e&&t.displayNamesObservable(app.tl("Anyone")),1===t.assignedTo().length&&t.assignedTo()[0].id===e)return;if(null!=(s=t.findAvailablePersonById(e)))return t.assignedTo([s]);if(t.assignedTo().length>0)return t.assignedTo([])}}}}(this)))}return t.prototype.OnRenderedPicker=function(){return this.koObservable(this.initialValue)},t.prototype.OnDblClickAssignedTo=function(t){return app.ko.postbox.publish("people-picker-double-clicked",{})},t.prototype.OnSelectAllInCompany=function(t){var e,n,i,s;for(s=t.people,n=0,i=s.length;n<i;n++)e=s[n],-1===this.assignedTo().indexOf(e)&&this.assignedTo.push(e);return this.OnChangeDropdownUsers()},t.prototype.OnSelectNoneInCompany=function(t){var e,n,i,s;for(s=t.people,n=0,i=s.length;n<i;n++)e=s[n],-1!==this.assignedTo().indexOf(e)&&this.assignedTo.remove(e);return this.OnChangeDropdownUsers()},t.prototype.OnSelectPerson=function(t){return-1===this.assignedTo().indexOf(t)?this.assignedTo.push(t):this.assignedTo.remove(t),this.OnChangeDropdownUsers()},t.prototype.OnPrivacyChanged=function(t){var e,n,i,s,o,a;return 0===t.ids.length?(this.itemIsPrivate(!1),o={for:ko.unwrap(this.itemType),id:ko.unwrap(this.itemId),groupByCompany:ko.unwrap(this.groupByCompany),getFollowers:this.getFollowers,getRoles:this.getRoles,includeObservers:this.includeObservers},0!==ko.unwrap(this.projectId)&&(o.projectId=ko.unwrap(this.projectId)),app.GetAvailableUsers(o,this.availablePeople)):(this.itemIsPrivate(!0),n=ko.unwrap(this.itemId),i=ko.unwrap(this.itemType),s=0,null!=this.item.taskListId&&(s=ko.unwrap(this.item.taskListId)),"task"===(null!=(a=this.item.componentName)?a.toLowerCase():void 0)&&"taskList"===i.toLowerCase()&&s===n&&("function"==typeof(e=this.item).privacyIsInherited?e.privacyIsInherited():void 0)&&(n=ko.unwrap(this.item.id),i="task"),this.availablePeople().length>0&&this.availablePeople([]),o={for:"grantAccessTo",grantAccessTo:t.ids.join(","),projectId:this.projectId,followedItem:i,id:n,groupByCompany:ko.unwrap(this.groupByCompany),getFollowers:this.getFollowers,getRoles:this.getRoles,includeObservers:this.includeObservers},app.GetAvailableUsers(o,this.availablePeople).then(this.OnChangeDropdownUsers))},t.prototype.OnChangeDropdownUsers=function(){return app.NextTick(function(t){return function(){if(null!=t.typeaheadId)return ko.postbox.publish(t.typeaheadId+"-availablePeopleChanged")}}(this))},t.prototype.OnOpen=function(){return document.querySelector(".select2-results").appendChild(document.querySelector(".widget-available-people-picker-inline-help"))},t.prototype.OnResponsibleUsersChanged=function(t){var e,n,i,s,o;for("string"==typeof t&&(t=t.split(",")),e=[],i=0,s=t.length;i<s;i++)n=t[i],null!==(o=this.findAvailablePersonById(n))&&e.push(o);this.assignedTo(e)},t.prototype.OnInitialOptionChanged=function(t){var e,n,i,s,o;if("function"==typeof this.initialOptions?this.initialOptions():void 0){for(o=this.initialOptions(),n=i=0,s=o.length;i<s;n=++i)e=o[n],parseInt(e.id,10)===parseInt(t.id,10)&&this.initialOptions.splice(n,1,t);return this.koObservable(t.id)}},t.prototype.OnClickInviteUser=function(){var t;return t=function(t){return function(e){if(null!=e.users&&e.users.length)return t.OnNewUserAdded(e.users)}}(this),app.modal.Show("inviteNewUsers",{projectId:this.projectId,hideProjectsStep:!0,onCloseCallBack:t})},t.prototype.OnNewUserAdded=function(t){var e;return!!t&&(!this.itemIsPrivate()&&(e={for:ko.unwrap(this.itemType),id:ko.unwrap(this.itemId),groupByCompany:ko.unwrap(this.groupByCompany),getFollowers:this.getFollowers,getRoles:this.getRoles,includeObservers:this.includeObservers},0!==ko.unwrap(this.projectId)&&(e.projectId=ko.unwrap(this.projectId)),app.GetAvailableUsers(e,this.availablePeople).then(function(e){return function(){return app.NextTick(function(){var n,i,s,o,a;for(o=[],i=0,s=t.length;i<s;i++)a=t[i],n=e.findAvailablePersonById(a.id),null!=n?o.push(e.OnSelectPerson(n)):o.push(void 0);return o})}}(this))))},t.prototype.setInitialValue=function(){this.initialized||(this.initialized=!0,this.peopleLoaded()&&("string"==typeof this.initialValue?"-3"===this.initialValue&&this.initialOptions.length&&null!=this.initialOptions[0].isForReminders?this.setInitialValueWhenEmpty():""===this.initialValue?this.setInitialValueWhenEmpty():this.assignedTo(this.initialValue.split(",").map(this.findAvailablePersonById).filter(function(t){return t})):Array.isArray(this.initialValue)?1===this.initialValue.length&&isNaN(this.initialValue[0])||0===this.initialValue.length?this.setInitialValueWhenEmpty():this.assignedTo(this.initialValue.map(this.findAvailablePersonById).filter(function(t){return t})):"number"==typeof this.initialValue?this.initialValue<=0?this.setInitialValueWhenEmpty():this.koObservable(null!=this.findAvailablePersonById(this.initialValue)?this.initialValue:this.getFirstPerson()):this.setInitialValueWhenEmpty()),app.NextTick(function(t){return function(){return ko.postbox.publish("availablePeopleInitialized"+ko.unwrap(t.listenTo))}}(this)),ko.tasks.runEarly())},t.prototype.setInitialValueWhenEmpty=function(){this.autoSelectIfOne&&1===this.getAvailablePeopleCount()?this.koObservable(this.getFirstPerson()):ko.unwrap(this.initialOptions).length>0&&this.koObservable(ko.unwrap(this.initialOptions)[0].id)},t.prototype.updateBasedOnPrivacy=function(){var t,e,n,i,s,o;for(t=[],o=this.assignedToNoPrivacy,n=0,i=o.length;n<i;n++)e=o[n],null!=(s=this.findAvailablePersonById(e.id))&&t.push(s);t.updatedBasedOnPrivacy=!0,this.assignedTo(t)},t.prototype.findAvailablePersonById=function(t){var e,n,i,s,o,a,r,l,p,c,d;if(this.groupByCompany){for(p=this.availablePeople(),i=0,o=p.length;i<o;i++)for(e=p[i],c=e.people,s=0,a=c.length;s<a;s++)if(n=c[s],parseInt(n.id,10)===parseInt(t,10))return n}else for(d=this.availablePeople(),l=0,r=d.length;l<r;l++)if(e=d[l],parseInt(e.id,10)===parseInt(t,10))return e;return null},t.prototype.getFirstPerson=function(){return this.groupByCompany?this.availablePeople()[0].people[0].id:this.availablePeople()[0].id},t.prototype.getAvailablePeopleCount=function(){var t,e,n,i,s,o,a,r,l;if(e=0,this.groupByCompany)for(r=this.availablePeople(),n=0,s=r.length;n<s;n++)t=r[n],!t.temporary&&t.id>0&&(e+=t.people.length);else for(l=this.availablePeople(),i=0,o=l.length;i<o;i++)a=l[i],!a.temporary&&ko.unwrap(a.id)>0&&e++;return e},t.prototype.postProcessPeople=function(t){var e,n,i,s,o,a,r,l,p;for(s=0,a=t.length;s<a;s++)if(e=t[s],null!=e.people)for(n=e.id,i=e.name,p=e.people,o=0,r=p.length;o<r;o++)l=p[o],l.companyId=n,l.companyName=i;return t},t.prototype.dispose=function(){null!=this.subscriptions&&this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:n,template:t}}.apply(e,s))&&(t.exports=o)}).call(e,n(245))},4190:function(t,e,n){var i,s,o=function(t,e){return function(){return t.apply(e,arguments)}};i=[n(164),n(3023),n(3024)],void 0!==(s=function(t,e,n){var i;return i=function(){function t(t){null==t&&(t={}),this.getFullName=o(this.getFullName,this),this.subscriptions=[],this.tippedContent=n,this.selectedUsers=t.selectedUsers,this.avatarLimit=5}return t.prototype.getFullName=function(t){return t.firstName()+" "+t.lastName()},t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:i,template:e}}.apply(e,i))&&(t.exports=s)},4201:function(t,e,n){var i,s,o=function(t,e){return function(){return t.apply(e,arguments)}};i=[n(3038),n(3039)],void 0!==(s=function(t,e){var n;return n=function(){function t(t){null==t&&(t={}),this.dispose=o(this.dispose,this),this.OnClickIcon=o(this.OnClickIcon,this),this.OnNotifyTWEvent=o(this.OnNotifyTWEvent,this),this.subscriptions=[],this.tippedContent=e,this.item=t.item,this.type=null!=t.type?t.type:t.type="",this.theme=null!=t.theme?t.theme:t.theme="generic",this.element=null,this.isRendered=ko.observable(!1),this.countKey=function(){switch(this.type){case"link":case"file":case"notebook":return"numberOfComments";default:return"commentsCount"}}.call(this),"file"===this.type&&null==this.item[this.countKey]&&(this.countKey="commentsCount"),this.project=ko.observable(null),this.subscriptions.push(this.readOnly=ko.pureComputed(function(t){return function(){var e;return(null!=(e=t.project())?e.isTemplate():void 0)&&!app.loggedInUser.permissions.canManageProjectTemplates()}}(this))),this.subscriptions.push(this.canAddComment=ko.pureComputed(function(t){return function(){return null==t.project()||t.project().isActive()&&!t.readOnly()}}(this))),null!=this.item.projectId&&this.project(app.projectInfo.get(ko.unwrap(this.item.projectId))()),this.subscriptions.push(ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent))}return t.prototype.OnNotifyTWEvent=function(t){var e,n;if("comments"===t.itemType&&("notebooks"===(n=t.commentableType())||"milestones"===n||"messages"===n||"links"===n||"files"===n)){if(e="files"===t.commentableType()?this.item.versionId():this.item.id(),t.actionType===app.consts.ACTIONTYPE.DELETED&&t.commentableId()===e)return this.item[this.countKey](this.item[this.countKey]()-1);if(t.actionType===app.consts.ACTIONTYPE.UPDATED&&t.commentableId()===e)return this.item[this.countKey](this.item[this.countKey]()+1)}},t.prototype.OnClickIcon=function(){var t,e,n;this.canAddComment()&&(null!=this.item.hasUnreadComments&&this.item.hasUnreadComments(!1),t=0,"file"===this.type?t=ko.unwrap(this.item.versionId):"fileversions"===this.type&&(t=ko.unwrap(this.item.id)),n="file"===(e=this.type)||"fileversions"===e?"fileversions/"+t+"/comments/markread.json":this.type+"s/"+ko.unwrap(this.item.id)+"/comments/markread.json",this.item[this.countKey]()>0&&app.api.put(n),app.modal.Show("addOrEditComment",{item:this.item,projectId:this.item.projectId(),type:this.type}))},t.prototype.getPlural=function(t){switch(t){case"task":return"tasks";case"tasklist":return"tasklists";case"notebook":return"notebooks";case"message":return"messages";case"milestone":return"milestones";case"link":return"links";case"file":return"files";default:return t}},t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:n,template:t}}.apply(e,i))&&(t.exports=s)},4208:function(t,e,n){var i,s,o=function(t,e){return function(){return t.apply(e,arguments)}},a=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};i=[n(3048),n(164),n(4417)],void 0!==(s=function(t,e,n){var i;return i=function(){function t(t){null==t&&(t={}),this.resetOperatorAndValues=o(this.resetOperatorAndValues,this),this.getFieldById=o(this.getFieldById,this),this.isMultiValueValid=o(this.isMultiValueValid,this),this.isRangeValueValid=o(this.isRangeValueValid,this),this.isValueValid=o(this.isValueValid,this),this.isFilterValid=o(this.isFilterValid,this),this.initializeValue=o(this.initializeValue,this),this.OnClickClear=o(this.OnClickClear,this),this.subscriptions=[],this.fieldId=t.fieldId,this.operator=t.operator,this.value=t.value,this.uuid=t.uuid,this.allCustomFields=t.allCustomFields,this.selectedCustomFieldIds=t.selectedCustomFieldIds,this.previousFieldType=null,this.searchTerm=e.observable("").extend({rateLimit:{method:"notifyWhenChangesStop",timeout:300}}),this.minRangeValue=e.observable(null).extend({rateLimit:{method:"notifyWhenChangesStop",timeout:300}}),this.maxRangeValue=e.observable(null).extend({rateLimit:{method:"notifyWhenChangesStop",timeout:300}}),this.selectedDropdownOptions=e.observableArray([]),this.subscriptions.push(this.fieldType=e.pureComputed(function(t){return function(){var e;return null==t.fieldId()?null:(e=t.getFieldById(t.fieldId()),null==e?null:e.type())}}(this))),this.subscriptions.push(this.inputType=e.pureComputed(function(t){return function(){return"dropdown"===t.fieldType()?"eq"===t.operator()?"dropdown":"multi":"number-integer"===t.fieldType()&&"range"===t.operator()?"range":"input"}}(this))),this.subscriptions.push(this.currentlySelectedField=e.computed(function(t){return function(){return t.allCustomFields.list().find(function(e){return~~e.id()==~~t.fieldId()})}}(this))),this.subscriptions.push(this.availableDropdownOptions=e.computed(function(t){return function(){return null==t.currentlySelectedField()?[]:t.currentlySelectedField().options.choices()}}(this))),this.subscriptions.push(this.dropdownSelect2Options=e.pureComputed(function(t){return function(){var n;return n=e.mapping.toJS(t.availableDropdownOptions()),n.map(function(t){return{id:t.value,text:t.value,color:t.color}})}}(this))),this.subscriptions.push(this.dropdownOptionsDataSource=new n({selectedOption:this.selectedDropdownOptions,availableOptions:this.availableDropdownOptions})),this.initializeValue(),this.subscriptions.push(this.customFieldsForDropdown=e.pureComputed(function(t){return function(){var e;return e=t.selectedCustomFieldIds().map(function(t){return~~t}).filter(function(e){return e!==~~t.fieldId()}),t.allCustomFields.list().map(function(t){return{id:~~t.id(),text:t.name()}}).filter(function(t){var n;return n=t.id,a.call(e,n)<0})}}(this))),this.subscriptions.push(this.availableOperators=e.pureComputed(function(t){return function(){switch(t.fieldType()){case"text-short":return[{id:"like",text:app.tl("contains")},{id:"eq",text:app.tl("matches")},{id:"starts",text:app.tl("starts with")},{id:"ends",text:app.tl("ends with")},{id:"not-like",text:app.tl("doesn't contain")}];case"number-integer":return[{id:"eq",text:app.tl("equals")},{id:"lt",text:app.tl("less than")},{id:"gt",text:app.tl("greater than")},{id:"range",text:app.tl("within range")}];case"dropdown":return[{id:"eq",text:app.tl("equals")},{id:"any",text:app.tl("matches any of")},{id:"not",text:app.tl("matches none of")}]}return[]}}(this))),this.subscriptions.push(this.hasSelectedField=e.pureComputed(function(t){return function(){return 0!==t.fieldId()}}(this))),this.subscriptions.push(this.formattedFilter=e.pureComputed(function(t){return function(){var e,n,i,s,o;switch(e={id:t.fieldId(),operator:t.operator()},t.inputType()){case"range":i=null!=(s=t.minRangeValue())?s:null,n=null!=(o=t.maxRangeValue())?o:null,e.value=[i,n];break;case"multi":e.value=t.selectedDropdownOptions();break;default:e.value=t.searchTerm()}return e}}(this))),this.subscriptions.push(this.formattedFilter.subscribe(function(t){return function(n){if(t.isFilterValid(n))return e.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"custom-field-filter",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:t.uuid,extraData:{filter:n}})}}(this))),this.subscriptions.push(this.fieldId.subscribe(function(t){return function(){if(t.selectedDropdownOptions([]),"dropdown"===t.fieldType())return t.searchTerm("")}}(this))),this.subscriptions.push(this.fieldType.subscribe(function(t){return function(e){return e!==t.previousFieldType&&t.resetOperatorAndValues(),t.previousFieldType=e}}(this)))}return t.prototype.OnClickClear=function(){e.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"custom-field-filter",actionType:app.consts.ACTIONTYPE.DELETED,itemId:this.uuid})},t.prototype.initializeValue=function(){switch(this.inputType()){case"range":if(2!==this.value().length)return;return this.minRangeValue(this.value()[0]),this.maxRangeValue(this.value()[1]);case"multi":if(!Array.isArray(this.value()))return;return this.selectedDropdownOptions(this.value());default:return this.searchTerm(this.value())}},t.prototype.isFilterValid=function(t){var e,n,i;return e=null!=t.id&&0!==t.id,n=null!=t.operator&&""!==t.operator,i=this.isValueValid(t.value),!!(e&&n&&i)||!(e||n||i)},t.prototype.isValueValid=function(t){return null!=t&&(""!==t&&("range"===this.inputType()?this.isRangeValueValid(t):"multi"===this.inputType()?this.isMultiValueValid(t):"number-integer"!==this.fieldType()||!isNaN(parseInt(t,10))))},t.prototype.isRangeValueValid=function(t){return!!Array.isArray(t)&&(2===t.length&&(!isNaN(parseInt(t[0],10))&&!isNaN(parseInt(t[1],10))))},t.prototype.isMultiValueValid=function(t){return!!Array.isArray(t)&&!!t.length},t.prototype.getFieldById=function(t){var e,n;if((n=app.utility.FindIndexByKeyValue(this.allCustomFields.list(),"id",~~t))>-1)return e=this.allCustomFields.list()[n],null==e?null:e},t.prototype.resetOperatorAndValues=function(){return this.operator("eq"),this.minRangeValue(null),this.maxRangeValue(null),this.searchTerm("")},t.prototype.dispose=function(){var t,e,n,i;for(n=this.subscriptions,t=0,e=n.length;t<e;t++)i=n[t],i.dispose()},t}(),{viewModel:i,template:t}}.apply(e,i))&&(t.exports=s)},4209:function(t,e,n){var i,s,o=function(t,e){return function(){return t.apply(e,arguments)}};i=[n(3049),n(164),n(1116),n(1364)],void 0!==(s=function(t,e,n,i){var s;return s=function(){function t(t){var s;null==t&&(t={}),this.syncSelectedFilters=o(this.syncSelectedFilters,this),this.doesFilterExist=o(this.doesFilterExist,this),this.updateUserSelectedFilters=o(this.updateUserSelectedFilters,this),this.OnClickCreateField=o(this.OnClickCreateField,this),this.OnClickAddFilter=o(this.OnClickAddFilter,this),this.OnNotifyTWEvents=o(this.OnNotifyTWEvents,this),this.subscriptions=[],this.customFieldFilters=t.customFieldFilters,this.userSelectedFilters=e.observableArray([]),this.entityType=null!=(s=t.entityType)?s:"project",this.customFieldsData=new n(app.prefixApi("customfields.json?entities="+this.entityType,"API_PREFIX_V3","API_PREFIX_V3"),{ItemClass:i,loadNow:!0,onLoad:function(t){return function(){return t.updateUserSelectedFilters(t.customFieldFilters())}}(this)}),this.subscriptions.push(this.selectedCustomFieldIds=e.pureComputed(function(t){return function(){return t.userSelectedFilters().map(function(t){return~~t.fieldId()})}}(this))),this.subscriptions.push(this.rawFilterData=e.pureComputed(function(t){return function(){return t.userSelectedFilters().filter(t.isFilterPopulated).map(function(t){return{fieldId:t.fieldId(),operator:t.operator(),value:t.value()}})}}(this))),this.subscriptions.push(this.customFieldFilters.subscribe(this.syncSelectedFilters)),this.subscriptions.push(e.postbox.subscribe("allTWEvents",this.OnNotifyTWEvents))}return t.prototype.OnNotifyTWEvents=function(t){var e,n,i;"custom-field-filter"===t.itemType&&(e=app.utility.FindIndexByKeyValue(this.userSelectedFilters(),"uuid",t.itemId))>-1&&(t.actionType===app.consts.ACTIONTYPE.UPDATED?(i=t.extraData.filter,n=this.userSelectedFilters()[e],n.fieldId(i.id),n.operator(i.operator),n.value(i.value)):t.actionType===app.consts.ACTIONTYPE.DELETED&&this.userSelectedFilters.splice(e,1),this.customFieldFilters(this.rawFilterData()))},t.prototype.OnClickAddFilter=function(){var t;return t=this.createNewEmptyFilter(),this.userSelectedFilters.push(t)},t.prototype.OnClickCreateField=function(){app.GoTo("settings/customfields")},t.prototype.updateUserSelectedFilters=function(t){var n,i;i=t.filter(this.doesFilterExist).map(function(t){var n,i,s;return{uuid:app.utility.generateRandomNumericID(),fieldId:e.observable(null!=(n=t.fieldId)?n:0),operator:e.observable(null!=(i=t.operator)?i:null),value:e.observable(null!=(s=t.value)?s:null)}}),i.length||(n=this.createNewEmptyFilter(),i.push(n)),this.userSelectedFilters(i)},t.prototype.createNewEmptyFilter=function(){return{uuid:app.utility.generateRandomNumericID(),fieldId:e.observable(0),operator:e.observable(null),value:e.observable(null)}},t.prototype.isFilterPopulated=function(t){var n,i,s,o,a,r;return n=e.unwrap(t.fieldId),a=e.unwrap(t.operator),r=e.unwrap(t.value),i=null!=n&&0!==n,s=null!=a&&""!==a,o=null!=r&&r.length>0,i&&s&&o},t.prototype.doesFilterExist=function(t){var e;return null!=this.customFieldsData&&(null!=t.fieldId&&!isNaN(t.fieldId)&&(e=app.utility.FindIndexByKeyValue(this.customFieldsData.list(),"id",~~t.fieldId),!!(e>-1)))},t.prototype.syncSelectedFilters=function(t){if(Array.isArray(t)&&!app.utility.AreEqual(t,this.rawFilterData()))return this.updateUserSelectedFilters(t)},t.prototype.dispose=function(){var t,e,n,i;for(n=this.subscriptions,t=0,e=n.length;t<e;t++)i=n[t],i.dispose()},t}(),{viewModel:s,template:t}}.apply(e,i))&&(t.exports=s)},4232:function(t,e,n){var i,s,o=function(t,e){return function(){return t.apply(e,arguments)}};i=[n(3083)],void 0!==(s=function(t){var e;return e=function(){function t(t){null==t&&(t={}),this.OnClickLink=o(this.OnClickLink,this),this.onClickOpenNotificationQV=o(this.onClickOpenNotificationQV,this),this.OnScrollList=o(this.OnScrollList,this),this.subscriptions=[],app.InitOnShow(this),this.subscriptions.push(app.notifications.unreadCount.subscribe(this.OnNotificationRead))}return t.prototype.OnScrollList=function(t,e){if(e.target.scrollHeight-(e.target.scrollTop+(window.innerHeight-170))<=70)return app.notifications.GetNextEvents()},t.prototype.onClickOpenNotificationQV=function(t,e){var n,i,s,o,a,r;app.notifications.MarkAsRead(t,e),(i=ko.unwrap(t.link)||ko.unwrap(t.commentLink)||ko.unwrap(t.itemLink))&&0!==(r=null!=t.projectId?ko.unwrap(t.projectId):null!=app.currentRoute().projectId?app.currentRoute().projectId:0)&&(o=/^#?(\w+)s\/(\d+).*$/.exec(i),o&&(s=o[1],n=o[2]),"tasklist"===s&&(s="taskList"),"task"===s||"milestone"===s||"link"===s||"notebook"===s||"message"===s||"file"===s||"taskList"===s?(a={projectId:r},a[s+"Id"]=n,a.id=n,app.quickView.show(s,a)):console.warn("need to handle this type:",t))},t.prototype.OnClickLink=function(t,e){if(app.notifications.MarkAsRead(t,e),"statusrequest"===t.itemType&&app.loggedInUser.inOwnerCompany())return app.modal.Show("addOrEditStatus",{}),!1;if(2===e.which){if(null==t.itemLink)return;return window.open(t.itemLink,"_blank"),!1}return!0},t.prototype.isNewDay=function(t){var e,n;return 0===t||(e=moment(app.notifications.eventList()[t].eventTimeUTC),n=moment(app.notifications.eventList()[t-1].eventTimeUTC),!e.isSame(n,"day"))},t.prototype.OnNotificationRead=function(){0===app.notifications.unreadCount()&&app.notifications.isShowing(!app.notifications.isShowing())},t.prototype.dispose=function(){null!=this.subscriptions&&this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:e,template:t}}.apply(e,i))&&(t.exports=s)},4233:function(t,e,n){var i,s;i=[n(3084)],void 0!==(s=function(t){var e;return e=function(){function t(t){var e,n;null==t&&(t={}),this.includeDeletedUsers=null!=(e=t.includeDeletedUsers)&&e,this.text=null!=(n=t.text)?n:""}return t}(),{viewModel:e,template:t}}.apply(e,i))&&(t.exports=s)},4234:function(t,e,n){(function(i){var s,o,a=function(t,e){return function(){return t.apply(e,arguments)}},r=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};s=[n(3085)],void 0!==(o=function(t){var e;return e=function(){function t(t){var e,n;null==t&&(t={}),this.sendRequestEmail=a(this.sendRequestEmail,this),this.tasklistHasTasks=a(this.tasklistHasTasks,this),this.subscriptions=[],this.help=null,this.promo=["crm","desk","spaces"],n=t.type,(!(r.call(this.promo,n)<0)||("function"==typeof(e=app.account).trialDaysRemaining?e.trialDaysRemaining():void 0)>0)&&(this.data=t.data,this.type=t.type,this.cacheKeyPromo="twProjects-inline-help-promo",this.skipsPromo=ko.observableArray(app.cache.get(this.cacheKeyPromo)||[]),this.showPromo=function(t){return function(e){return!t.skipsPromo().includes(e)}}(this),this.isInPromo=ko.pureComputed(function(t){return function(){var e;return e=t.type,r.call(t.promo,e)>=0}}(this)),this.imgPath=function(t){return"//cdn-pjs.teamwork.com/tko/public/assets/svg/inlinehelp/"+t},this.help=ko.pureComputed(function(t){return function(){var e,n,i,s,o;if(t.isInPromo())app.loggedInUser.administrator()&&app.loggedInUser.inOwnerCompany()?(e=app.tl("Try now for free"),o="integration"):(e=app.loggedInUser.administrator()?app.tl("Contact an owner company admin & start your trial?"):app.tl("Contact your admin & start your trial?"),o="email");else{if(!app.inlineHelp().trialProgress)return;n=app.inlineHelp()}switch(t.type){case"peoplePickerV":case"peoplePickerH":if(n.show("invite")&&app.loggedInUser.isAccount())return{id:"invite",image:t.imgPath("peoplePickerV"===t.type?"inviteusers.svg":"inviteusers-largetri.svg"),title:app.tl("Why not Invite People?"),content:app.tl("Invite users to your site to assign them to tasks and start collaborating today!")};break;case"taskList":if(n.show("tasklist"))return{id:"tasklist",image:t.imgPath("tasklist.svg"),title:app.tl("Add a task list!"),content:app.tl("Having a list of tasks is the most effective way to group your work together and keep an eye on its progress."),url:"creating-task-list"};if(n.show("task"))return{id:"task",image:t.imgPath("task.svg"),title:app.tl("Add a task!"),content:app.tl("Use tasks to set out the pieces of work everyone has to do to move your project forward."),url:"adding-task"};if(n.show("comment")&&t.tasklistHasTasks())return{id:"comment",image:t.imgPath("comment.svg"),title:app.tl("Add a comment!"),content:app.tl("Use comments to communicate and collaborate with colleagues on a task and get stuff done."),url:"commenting"};if(n.show("invite")&&app.loggedInUser.isAccount())return{id:"invite",image:t.imgPath("inviteusers.svg"),title:app.tl("Why not invite People?"),content:app.tl("Invite users to your site to assign them to tasks and start collaborating today!")};break;case"task":if(n.show("comment"))return{id:"comment",image:t.imgPath("comment.svg"),title:app.tl("Add a comment!"),content:app.tl("Use comments to communicate and collaborate with colleagues on a task and get stuff done."),url:"commenting"};break;case"project":if(n.show("project")&&app.loggedInUser.permissions.canAddProjects())return{id:"project",image:t.imgPath("projects.svg"),title:app.tl("Add a project!"),content:app.tl("To get started with Teamwork Projects add a project of your own and start getting organised."),url:"add-project"};if(n.show("invite")&&app.loggedInUser.isAccount())return{id:"invite",image:t.imgPath("inviteusers.svg"),title:app.tl("Why not invite People?"),content:app.tl("Invite users to your site to assign them to tasks and start collaborating today!")};break;case"milestone":if(n.show("milestone"))return{id:"milestone",image:t.imgPath("milestone.svg"),title:app.tl("Add a milestone!"),content:app.tl("Use milestones to plan and set the important dates, deadlines and deliverables on your project."),url:"add-milestone"};if(n.show("milestoneLink")&&(null!=(i=t.data)&&null!=(s=i.data)&&"function"==typeof s.totalRecords?s.totalRecords():void 0))return{id:"milestoneLink",image:t.imgPath("milestonetasklist.svg"),title:app.tl("Link a milestone to a task list!"),content:app.tl("Link one of your milestone to a task list to track progress towards achieving your milestone."),url:"link-milestone"};break;case"crm":if(t.showPromo("crm")&&!app.account.CRMEnabled())return{id:"crm",image:"tko/public/assets/brand/icons/primary_icon_CRM.svg",title:app.tl("Using [_s] for your sales process? Why not check out [_s].","Teamwork","Teamwork CRM"),content:app.tl("[_s] is designed to help you organize your process, manage your sales pipeline, report on what matters and grow the bottom line.","Teamwork CRM"),button:e,url:o};break;case"desk":if(t.showPromo("desk")&&!app.account.deskEnabled())return{id:"desk",image:"tko/public/assets/brand/icons/primary_icon_desk.svg",title:app.tl("Using [_s] to manage client communications? Why not check out [_s].","Teamwork","Teamwork Desk"),content:app.tl("[_s] allows you to manage all incoming client communications from one shared  space to give your team full visibility over all interactions \u2014 so you can support your clients more efficiently at scale.","Teamwork Desk"),button:e,url:o};break;case"spaces":if(t.showPromo("spaces")&&!app.account.spacesEnabled())return{id:"spaces",image:"tko/public/assets/brand/icons/primary_icon_spaces.svg",title:app.tl("Finding [_s] helpful but want more? Why not check out [_s].","Notebooks","Teamwork Spaces"),content:app.tl("[_s] enables you to collaborate on, organize and store all of your content and documentation, to ensure your company and teams are kept up to date with the latest information.","Teamwork Spaces"),button:e,url:o}}}}(this)))}return t.prototype.OnCloseClick=function(){return this.isInPromo()?(this.skipsPromo.push(this.type),app.cache.set(this.cacheKeyPromo,this.skipsPromo())):app.inlineHelp().skipThisHelp(this.help().id)},t.prototype.OnClickShowModalInvite=function(){return i(".people-picker-select2").select2("close"),app.modal.Show("trialInviteUsers",{})},t.prototype.OnMoreInfoClick=function(){return this.isInPromo()?app.loggedInUser.administrator()&&app.loggedInUser.inOwnerCompany()?app.GoTo("settings/integrations/teamwork"):this.sendRequestEmail():app.quickView.show("help",{doc:this.help().url})},t.prototype.tasklistHasTasks=function(){var t,e,n;return!!(t=null!=(e=this.data)&&null!=(n=e.data)&&"function"==typeof n.fullList?n.fullList():void 0)&&t.some(function(t){return t.numComplete()||t.numIncomplete()})},t.prototype.sendRequestEmail=function(){var t,e,n;return e="",t="","crm"===this.type?(e="CRM",t=app.tl("I'd like to start a [_s] Trial. [_s] can easily map to our sales process and integrates well with [_s]. As a [_s] Admin, can you set the trial up by clicking on","Teamwork CRM","Teamwork CRM","Teamwork","Teamwork")):"desk"===this.type?(e="Desk",t=app.tl("I'd like to start a [_s] trial. [_s] can help us manage our client requests more efficiently and integrates well with [_s]. As a [_s] Admin, can you set the trial up by clicking on","Teamwork Desk","Teamwork Desk","Teamwork","Teamwork")):"spaces"===this.type&&(e="Spaces",t=app.tl("I'd like to start a [_s] Trial. [_s] can easily integrate with [_s]. As the admin, can you set the trial up by clicking on","Teamwork Spaces","Teamwork Spaces","Teamwork")),n={trial:{productName:e,message:t}},app.api.post("account/producttrial/request.json",n).then(function(t){return function(){return app.flash.Success(app.tl("A request has been sent to your administrator"))}}())},t.prototype.dispose=function(){return this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:e,template:t}}.apply(e,s))&&(t.exports=o)}).call(e,n(245))},4241:function(t,e,n){var i,s,o=function(t,e){return function(){return t.apply(e,arguments)}};i=[n(3093),n(3092),n(164),n(1117),n(1134),n(1714)],void 0!==(s=function(t,e,n,i,s,a){var r;return r=function(){function t(t){var i,r,l,p,c,d,u;null==t&&(t={}),this.getNewBlockText=o(this.getNewBlockText,this),this.isNewBlock=o(this.isNewBlock,this),this.handleSelectItem=o(this.handleSelectItem,this),this.getKeymandoBindingItem=o(this.getKeymandoBindingItem,this),this.getEventsByType=o(this.getEventsByType,this),this.OnCloseList=o(this.OnCloseList,this),this.OnClickLoadMore=o(this.OnClickLoadMore,this),this.OnResetSearchTerm=o(this.OnResetSearchTerm,this),this.OnRemoveSelectedItem=o(this.OnRemoveSelectedItem,this),this.OnSelectItem=o(this.OnSelectItem,this),this.OnMouseOut=o(this.OnMouseOut,this),this.OnMouseOver=o(this.OnMouseOver,this),this.OnFocusOut=o(this.OnFocusOut,this),this.OnFocusIn=o(this.OnFocusIn,this),this.OnKeyUp=o(this.OnKeyUp,this),this.subscriptions=[],this.overflowItemsContent=e,this.uniqueId="dataSourceSearchResults_"+Date.now(),this.keymandoId="keymando_"+Date.now(),this.focusWhenVisible=null!=(i=t.focusWhenVisible)&&i,this.keepOpen=null!=(r=t.keepOpen)&&r,this.isHidden=app.utility.EnsureObservable(null!=(l=t.isHidden)&&l),this.disabled=app.utility.EnsureObservable(null!=(p=t.disabled)&&p),this.dataSource=t.dataSource,console.assert(this.dataSource instanceof s),this.selectedItems=this.dataSource.selectedItems,this.matchingData=this.dataSource.matchingData,this.dataLoader=this.dataSource.dataLoader,this.lastFullQueryMode=this.dataSource.fullQueryMode(),this.maxVisibleSelection=null!=(c=t.maxVisibleSelection)?c:3,this.separator=null!=(d=t.separator)?d:"",this.subscriptions.push(this.keymando=new a(this.keymandoId,{events:{up:{event:function(t,e,n,i){i.back(e)}},down:{event:function(t,e,n,i){i.forward(e)}}}})),this.keymando.pause(),this.subscriptions.push(this.canSelectMoreItems=n.pureComputed(function(t){return function(){return!t.dataSource.IsSelectedItemsLimitReached()}}(this))),this.subscriptions.push(this.hasMoreRecords=n.pureComputed(function(t){return function(){return!!t.canSelectMoreItems()&&(null!=n.unwrap(t.dataLoader)&&n.unwrap(t.dataLoader).hasMoreRecords())}}(this))),this.subscriptions.push(this.isLoadingData=n.pureComputed(function(t){return function(){return null!=n.unwrap(t.dataLoader)&&n.unwrap(t.dataLoader).isLoading()}}(this))),this.subscriptions.push(this.loadMoreText=n.pureComputed(function(t){return function(){return t.isLoadingData()?app.tl("Loading"):app.tl("Load more")}}(this))),this.subscriptions.push(this.keymandoLoadMoreBinding=n.pureComputed(function(t){return function(){return t.hasMoreRecords()?{id:t.keymandoId+"_loadMore",parent:t.keymandoId,keymando:t.keymando,displayIndex:t.loadMoreIndex(),events:t.getEventsByType("loadMore"),activeClass:"isActive"}:null}}(this))),this.subscriptions.push(this.loadMoreIndex=n.computed(function(t){return function(){return null==t.matchingData()?null:t.matchingData().length}}(this))),this.subscriptions.push(this.hasMoreRecords.subscribe(function(t){return function(e){e||t.keymando.disposeOf(t.keymandoId+"_loadMore",!0)}}(this))),this.searchTerm=n.observable("").extend({rateLimit:{method:"notifyWhenChangesStop",timeout:300}}),this.searchTermFieldHasFocus=n.observable(!1),this.isMousingOver=!1,this.placeholder=null!=(u=t.placeholder)?u:app.tl("Search for item"),this.hasFocus=n.observable(!1).extend({rateLimit:{method:"notifyWhenChangesStop",timeout:300}}),this.subscriptions.push(app.ko.postbox.subscribe("savedFilter-cleared",this.OnResetSearchTerm)),this.subscriptions.push(this.hasMatchingData=n.pureComputed(function(t){return function(){var e;return(null!=(e=t.matchingData())?e.length:void 0)>0}}(this))),this.subscriptions.push(this.shouldShowDropdown=n.pureComputed(function(t){return function(){return(t.hasFocus()||t.keepOpen)&&(t.searchTerm().length>0||t.hasMatchingData()||t.isLoadingData())}}(this))),this.subscriptions.push(this.hasScrollbar=n.pureComputed(function(t){return function(){return t.selectedItems().length-t.maxVisibleSelection>7}}(this))),this.subscriptions.push(this.searchTerm.subscribe(function(t){return function(e){t.hasFocus()&&(t.dataSource.fullQuery(e),t.keymando.resetNavigation(t.keymandoId,!0))}}(this))),this.subscriptions.push(this.hasFocus.subscribe(function(t){return function(e){t.keepOpen&&(e=!0),e?(t.lastFullQueryMode=t.dataSource.fullQueryMode(),t.dataSource.fullQueryMode(!0),t.dataSource.fullQuery(t.searchTerm()),t.dataSource.OnSelectionStart(),t.keymando.resetNavigation(t.keymandoId,!0),t.keymando.unpause(),app.ko.postbox.publish("pause-board-keymando-instance")):(t.dataSource.fullQueryMode(t.lastFullQueryMode),t.dataSource.OnSelectionComplete(),t.keymando.disposeOfChildren(t.keymandoId),t.keymando.pause(),app.ko.postbox.publish("unpause-board-keymando-instance"))}}(this))),this.keepOpen&&this.hasFocus(!0),this.subscriptions.push(this.isHidden.subscribe(function(t){return function(e){if(t.focusWhenVisible&&!e)return t.searchTermFieldHasFocus(!0)}}(this)))}return t.prototype.OnKeyUp=function(t,e){switch(e.which){case 38:this.keymando.trigger("up");break;case 40:this.keymando.trigger("down")}},t.prototype.OnFocusIn=function(){this.hasFocus(!0)},t.prototype.OnFocusOut=function(){this.isMousingOver||this.hasFocus(!1)},t.prototype.OnMouseOver=function(){return this.isMousingOver=!0},t.prototype.OnMouseOut=function(){return this.isMousingOver=!1},t.prototype.OnSelectItem=function(t){this.searchTermFieldHasFocus(!0),this.handleSelectItem(t)},t.prototype.OnRemoveSelectedItem=function(t){this.selectedItems(this.selectedItems().filter(function(e){return e.id!==t.id||e.type!==t.type}))},t.prototype.OnResetSearchTerm=function(){this.searchTerm("")},t.prototype.OnClickLoadMore=function(){var t,e,n;t=document.querySelector("#"+this.uniqueId),e=t.scrollHeight,n=function(n){return function(){return t.scrollTo(0,e-t.clientHeight)}}(),t.addEventListener("scroll",n),this.dataSource.LoadMoreData().then(function(e){return function(e){return app.NextTick(function(){return t.removeEventListener("scroll",n)})}}())},t.prototype.OnCloseList=function(){if(!this.searchTermFieldHasFocus())return void this.searchTermFieldHasFocus(!0);this.hasFocus(!1)},t.prototype.getEventsByType=function(t){var e;return e={item:function(t){return function(e,n,i,s){return t.handleSelectItem(i.data)}}(this),loadMore:function(t){return function(e,n,i,s){return t.dataSource.LoadMoreData().then(function(e){return app.NextTick(function(){return t.keymando.back(t.keymandoId)})})}}(this)},{enter:{event:e[t]},esc:{event:function(t){return function(e,n,i,s){return t.OnCloseList()}}(this)}}},t.prototype.getKeymandoBindingItem=function(t,e){return{id:this.keymandoId+"_"+t.id,parent:this.keymandoId,keymando:this.keymando,data:t,displayIndex:n.unwrap(e),events:this.getEventsByType("item"),activeClass:"isActive"}},t.prototype.handleSelectItem=function(t){var e;e=this.keymando.getPositionFromBottom(this.keymandoId,this.keymandoId+"_"+t.id),i.resolve(t.action(t)).catch(function(){return null}).then(function(t){return function(n){null==n||t.selectedItems().find(function(t){return t.id===n.id&&t.type===n.type})||(t.selectedItems(t.selectedItems().concat(n)),app.NextTick(function(){return t.keymando.disposeOf(t.keymandoId+"_"+n.id,!0),e>0?t.keymando.focus(t.keymandoId):t.keymando.back(t.keymandoId)}))}}(this))},t.prototype.isNewBlock=function(t){return""!==this.separator.trim()&&(0===t||this.matchingData()[t][this.separator]!==this.matchingData()[t-1][this.separator])},t.prototype.getNewBlockText=function(t){return""===this.separator.trim()?"":this.matchingData()[t][this.separator]},t.prototype.dispose=function(){var t,e,n,i;for(n=this.subscriptions,t=0,e=n.length;t<e;t++)i=n[t],i.dispose();app.ko.postbox.publish("unpause-board-keymando-instance")},t}(),{viewModel:r,template:t}}.apply(e,i))&&(t.exports=s)},4286:function(t,e,n){var i,s,o=function(t,e){return function(){return t.apply(e,arguments)}};i=[n(3141),n(1366)],void 0!==(s=function(t,e){var n;return n=function(){function t(t){null==t&&(t={}),this.dispose=o(this.dispose,this),this.OnRendered=o(this.OnRendered,this),this.subscriptions=[],this.sharedKey=t.sharedKey,this.subscriptions.push(this.shared=app.shared.get(this.sharedKey)),this.subscriptions.push(this.includeSelf=ko.pureComputed(function(t){return function(){var e;return null!=(e=t.shared())?e.item.includeSelf():void 0}}(this)))}return t.prototype.OnRendered=function(t){return this.element=t,Tipped.refresh()},t.prototype.dispose=function(){if(null!=this.subscriptions)return this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:n,template:t}}.apply(e,i))&&(t.exports=s)},4287:function(t,e,n){(function(i){var s,o,a=function(t,e){return function(){return t.apply(e,arguments)}},r=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};s=[n(3142),n(1366),n(3143)],void 0!==(o=function(t,e,n){var s;return s=function(){function t(t){var e,i,s,o,l,p,c,d,u,h,m,f,k,g,b,v,y,x,w,I,C,T,O,P,S,j,_,A,F,D,U,M,E,N,L,R,$,B;null==t&&(t={}),this.dispose=a(this.dispose,this),this.getSelectedAsListOfIds=a(this.getSelectedAsListOfIds,this),this.toggleUserSelected=a(this.toggleUserSelected,this),this.toggleCompanySelected=a(this.toggleCompanySelected,this),this.setAllSelected=a(this.setAllSelected,this),this.notifyEnabledChange=a(this.notifyEnabledChange,this),this.getFlatIds=a(this.getFlatIds,this),this.getPrivacyCount=a(this.getPrivacyCount,this),this.getSelectedCount=a(this.getSelectedCount,this),this.personIsEnabled=a(this.personIsEnabled,this),this.getAssigneeNames=a(this.getAssigneeNames,this),this.getPersonNameInfo=a(this.getPersonNameInfo,this),this.getAssigneesText=a(this.getAssigneesText,this),this.loadCompanies=a(this.loadCompanies,this),this.getAvailablePeople=a(this.getAvailablePeople,this),this.updateSelectedIds=a(this.updateSelectedIds,this),this.resetUsersBasedOnPrivacy=a(this.resetUsersBasedOnPrivacy,this),this.OnClickClearAll=a(this.OnClickClearAll,this),this.toggleSelf=a(this.toggleSelf,this),this.mustHavePrivacy=a(this.mustHavePrivacy,this),this.OnShow=a(this.OnShow,this),this.OnModalCloseCallBack=a(this.OnModalCloseCallBack,this),this.OnDropdownClicked=a(this.OnDropdownClicked,this),this.OnClickViewAllSelected=a(this.OnClickViewAllSelected,this),this.OnSelect2Rendered=a(this.OnSelect2Rendered,this),this.OnRendered=a(this.OnRendered,this),this.subscriptions=[],this.tippedContent=n,this.notifyKey=null!=(m=t.notifyKey)?m:"",this.pickerType=null!=(f=t.pickerType)?f:"responsible",this.showToggleAll=null==(O=t.showToggleAll)||O,this.includeObservers=null!=(M=t.includeObservers)?M:app.loggedInUser.inOwnerCompany(),this.title=null!=(E=t.title)?E:"",this.minWidth=null!=(N=t.minWidth)?N:null,this.isRequired=null!=(L=t.isRequired)&&L,this.uniqueId="picker"+this.pickerType+"_"+Date.now(),this.itemLink=null!=(R=t.itemLink)?R:"",this.isViewingAll=ko.observable(!1),this.loadingPeople=ko.observable(!1),this.hasLoaded=null!=($=t.hasLoaded)?$:ko.observable(!1),this.isInPrivacyModal=null!=t.isInPrivacyModal?t.isInPrivacyModal:t.isInPrivacyModal=!1,this.useTipped=null==(B=t.useTipped)||B,this.useModal=null!=(k=t.useModal)&&k,this.useModal&&(this.useTipped=!1),this.getAllUsers=null==(g=t.getAllUsers)||g,this.userFilter=ko.observable(""),this.item=null!=(b=t.item)?b:{},this.setPrivacyForSelectedIds=null!=(v=t.setPrivacyForSelectedIds)&&v,this.itemType=t.itemType,this.lockdownId=null!=(y=t.lockdownId)?y:0,this.showIcon=null==(x=t.showIcon)||x,this.parentItem=null!=(w=t.parentItem)?w:{},this.parentType=null!=(I=t.parentType)?I:"",this.id=null!=(C=t.id)?C:0,this.mode=null!=(T=ko.unwrap(t.mode))?T:"add",this.format=null!=(P=t.format)?P:"button",this.projectId=ko.observable(null!=(S=ko.unwrap(t.projectId))?S:null),this.currentUserId=app.loggedInUser.id(),this.currentUserCompanyId=app.loggedInUser.companyId(),this.usePostbox=null==(j=t.usePostbox)||j,this.visible=null==(_=t.visible)||_,("function"==typeof(i=this.item).includeSelf?i.includeSelf():void 0)||(this.item.includeSelf=ko.observable(!1)),("function"==typeof(s=this.item).defaultPrivacyLoaded?s.defaultPrivacyLoaded():void 0)||(this.item.defaultPrivacyLoaded=ko.observable(!1)),("function"==typeof(o=this.item).notifyPreferenceLoaded?o.notifyPreferenceLoaded():void 0)||(this.item.notifyPreferenceLoaded=ko.observable(!1)),("function"==typeof(l=this.item).defaultPrivacy?l.defaultPrivacy():void 0)||(this.item.defaultPrivacy=ko.observable(0)),("function"==typeof(p=this.item).lockdownPrivacyArray?p.lockdownPrivacyArray():void 0)||(this.item.lockdownPrivacyArray=ko.observableArray([])),this.followersTippedUniqueId="followers_tipped_"+Date.now(),this.subscriptions.push(this.shared=app.shared.get(this.followersTippedUniqueId)),this.shared(this),ko.unwrap(this.item.projectId)>0&&!(ko.unwrap(this.projectId)>0)&&(this.projectId=this.item.projectId),this.selectedUsers=ko.observable(null),this.selectedKey=function(){var t;switch(this.pickerType){case"privacy":return"isInPrivacy";case"responsible":return"isResponsible";case"followers":return"comment"===(t=ko.unwrap(this.itemType))||"message"===t?"isFollowingComments":"isFollowingChanges"}}.call(this),this.followerKey="comment"===(A=ko.unwrap(this.itemType))||"message"===A?"isFollowingComments":"isFollowingChanges",this.koObservable=null!=t.koObservable?t.koObservable:t.koObservable=null,null!==this.koObservable&&null==(null!=t?t.usePostbox:void 0)&&(this.usePostbox=!1),this.responsibleIds=null!=(F=ko.unwrap(t.responsibleIds))?F:null,this.followerIds=null!=(D=ko.unwrap(t.followerIds))?D:null,this.selectedIds=app.utility.EnsureObservable(null!=(U=t.selectedIds)?U:[]),null==this.item.shouldOverwriteFollowers&&(this.item.shouldOverwriteFollowers=ko.observable(!1)),null==this.item.privateItemEveryone&&(this.item.privateItemEveryone=ko.observable(!1)),null==this.item.includeByDefault&&(this.item.includeByDefault=ko.observable(!1)),this.project=ko.unwrap(this.projectId)>0?app.projectInfo.get(this.projectId):ko.observable(null),this.subscriptions.push(this.projectSettings=ko.pureComputed(function(t){return function(){var e;return null!=(e=t.project())?e.notifySettings:void 0}}(this))),null!=this.project()?("owner company"===this.project().defaultPrivacy()&&"add"===this.mode&&-1===["task","comment"].indexOf(ko.unwrap(this.itemType))&&this.item.defaultPrivacy(app.account.companyid()),this.item.defaultPrivacyLoaded(!0)):this.subscriptions.push(this.project.subscribe(function(t){return function(e){if(null!=e)return"owner company"===e.defaultPrivacy()&&"add"===t.mode&&-1===["task","comment"].indexOf(ko.unwrap(t.itemType))&&t.item.defaultPrivacy(app.account.companyid()),t.item.defaultPrivacyLoaded(!0)}}(this))),this.subscriptions.push(this.item.defaultSettingsLoaded=ko.computed(function(t){return function(){return!(null==t.projectSettings()||!t.item.notifyPreferenceLoaded()||!t.item.defaultPrivacyLoaded())}}(this))),"edit"===this.mode&&"isFollowingComments"===this.followerKey&&this.item.notifyPreferenceLoaded(!0),"add"!==this.mode&&"isFollowingChanges"!==this.followerKey||(this.item.includeSelf(!1),this.item.notifyPreferenceLoaded(!0)),("function"==typeof(c=this.item).changeFollowerIds?c.changeFollowerIds().length:void 0)&&"edit"===this.mode&&app.utility.IsUserInSelection(this.item.changeFollowerIds)&&this.item.includeSelf(!0),"s"===this.parentType[this.parentType.length-1]&&(this.parentType=this.parentType.substr(0,this.parentType.length-1)),this.modalPrivacyIds=ko.observableArray([]),("function"==typeof(d=this.item).pickerRoles?d.pickerRoles():void 0)||(this.item.pickerRoles=ko.observableArray([])),("function"==typeof(u=this.item).pickerCompanies?u.pickerCompanies():void 0)||(this.item.pickerCompanies=ko.observableArray([])),this.subscriptions.push(this.item.pickerCompanies.subscribe(function(t){return function(e){var n,i,s,o,a,r;for(r=[],i=0,s=e.length;i<s;i++)n=e[i],o=n.name(),n.displayName=app.tl("Everyone in")+" <b>"+o+"</b>",r.push(function(){var t,e,i,s;for(i=ko.unwrap(n.people),s=[],t=0,e=i.length;t<e;t++)a=i[t],a.displayName=ko.unwrap(a.name),s.push(a.alwaysOn=this.mustHavePrivacy(a));return s}.call(t));return r}}(this))),("function"==typeof(h=this.item).visiblePeople?h.visiblePeople():void 0)||this.subscriptions.push(this.item.visiblePeople=ko.pureComputed(function(t){return function(){var e,n,i,s,o,a,r,l,p,c;for(e=[],p=t.item.pickerCompanies(),i=0,o=p.length;i<o;i++)if(n=p[i],l=n.people().filter(function(e){return e[t.followerKey]()}),l.length)for(c=n.people(),s=0,a=c.length;s<a;s++)if(r=c[s],r[t.followerKey]()){e.push(n);break}return e}}(this))),this.usePostbox&&null!=t.mentionsPrefix&&(this.subscriptions.push(app.ko.postbox.subscribe(t.mentionsPrefix+"-mentioned",function(t){return function(e){var n,i,s,o,a;for(o=t.people(),n=0,i=o.length;n<i;n++)s=o[n],s.id().toString()===e.id.toString()&&s[t.selectedKey](!0);if(null!=(null!=(a=t.$element)?a.find("a.ppd"):void 0))return t.$element.find("a.ppd").addClass("highlighted"),setTimeout(function(){return t.$element.find("a.ppd").removeClass("highlighted")},300)}}(this))),this.subscriptions.push(app.ko.postbox.subscribe(t.mentionsPrefix+"-mentioned-role",function(t){return function(e){var n,i,s,o,a,l,p,c;for(c=e.users,o=t.people(),n=0,i=o.length;n<i;n++)s=o[n],a=s.id().toString(),(r.call(c,a)>=0||(l=parseInt(s.id(),10),r.call(c,l)>=0))&&s[t.selectedKey](!0);if(null!=(null!=(p=t.$element)?p.find("a.ppd"):void 0))return t.$element.find("a.ppd").addClass("highlighted"),setTimeout(function(){return t.$element.find("a.ppd").removeClass("highlighted")},300)}}(this)))),this.subscriptions.push(this.item.defaultSettingsLoaded.subscribe(function(t){return function(e){var n,i;if(null!=e&&e)return t.item.privateItemEveryone(t.projectSettings().privateItemEveryone()),"add"===t.mode&&("message"!==(i=ko.unwrap(t.itemType))&&"notebook"!==i&&"link"!==i&&"file"!==i||(n=ko.unwrap(t.itemType)+"Everyone","message"===ko.unwrap(t.itemType)&&ko.unwrap(t.id)>0||t.item.includeByDefault(t.projectSettings()[n]()))),t.getAvailablePeople()}}(this))),ko.unwrap(this.projectId)>0||this.getAvailablePeople(),"project"===this.itemType&&"add"===this.mode&&this.getAvailablePeople(!0),window.devMode&&this.subscriptions.push(app.ko.postbox.subscribe("allTWEvents",function(t){return function(e){if("project"===e.itemType&&"permissions"===e.subType&&ko.unwrap(t.projectId)===parseInt(e.itemId,10))return t.getAvailablePeople(!0)}}(this))),this.subscriptions.push(this.people=ko.computed(function(t){return function(){var e,n;return e=t.item.pickerCompanies(),0===e.length?[]:1===e.length?e[0].people():(n=e.reduce(function(t,e){return t instanceof Array?t.concat(e.people()):t.people().concat(e.people())}),n.sort(function(t,e){return t.id()===app.loggedInUser.id()?-1:e.id()===app.loggedInUser.id()?1:0}))}}(this))),this.subscriptions.push(this.filteredCompanies=ko.computed(function(t){return function(){var e,n,i,s,o,a,r;if(e=[],""===t.userFilter().trim())e=t.item.pickerCompanies();else for(o=t.item.pickerCompanies(),i=0,s=o.length;i<s;i++)n=o[i],""===t.userFilter().trim().toLowerCase()||-1!==n.name().toLowerCase().indexOf(t.userFilter().trim().toLowerCase())?e.push(n):(r=ko.utils.arrayFilter(n.people(),function(e){return-1!==e.name().toLowerCase().indexOf(t.userFilter().toLowerCase())}),r.length>0&&(a={getEnabledUsers:n.getEnabledUsers,hasUsersInPrivacy:n.hasUsersInPrivacy,id:n.id,isFollowingChanges:n.isFollowingChanges,isFollowingComments:n.isFollowingComments,isInPrivacy:n.isInPrivacy,isObserving:n.isObserving,isResponsible:n.isResponsible,name:n.name,displayName:app.tl("Everyone in")+" <b>"+ko.unwrap(n.name)+"</b>",people:ko.observableArray(r),privateUsersCount:n.privateUsersCount,toggleUsers:n.toggleUsers,allUsersAreObservers:n.allUsersAreObservers},e.push(a)));return e}}(this))),this.subscriptions.push(this.selectedCount=ko.pureComputed(this.getSelectedCount)),this.subscriptions.push(this.privacyCount=ko.pureComputed(this.getPrivacyCount)),this.subscriptions.push(this.enabledIds=ko.pureComputed(function(t){return function(){var e;return e=[],"privacy"===t.pickerType?t.item.pickerCompanies().forEach(function(n){return n[t.selectedKey]()&&e.push("c"+ko.unwrap(n.id)),n.people().forEach(function(i){if(!n[t.selectedKey]()&&i[t.selectedKey]())return e.push(i.id())})}):t.people().forEach(function(n){if(n[t.selectedKey]())return e.push(n.id())}),e}}(this))),this.subscriptions.push(this.enabledIds.subscribe(this.notifyEnabledChange)),this.subscriptions.push(this.assigneesText=ko.pureComputed(this.getAssigneesText)),"privacy"!==this.pickerType&&this.subscriptions.push(ko.postbox.subscribe("privacyIdsChanged"+this.notifyKey,function(t){return function(e){if(t.modalPrivacyIds(e.ids),"followers"===t.pickerType)if(t.item.privateItemEveryone()&&"milestone"!==t.itemType){if(t.item.shouldOverwriteFollowers())return 0===e.ids.length?t.setAllSelected():t.updateSelectedIds(e.ids)}else if(0!==e.ids.length)return t.resetUsersBasedOnPrivacy(e.ids)}}(this))),e="<span class=\"tipped-hide w-people-picker-reborn__administrator w-list-picker__text-secondary\"\n    data-bind='visible:$data.item().parentCompany != null && $data.item().parentCompany.id == app.account.companyid() && $data.item().isAdministrator != null && $data.item().isAdministrator()'\n    data-tipped='{{app.tl(\"This user is an admin and can access all items\")}}'>\n    ({{app.tl('Administrator')}}\n    <i class='fa fa-user'></i>)\n<span>",this.listPickerParams={list:this.filteredCompanies,childrenPropertyName:"people",useMultiSelect:!0,collapseSelectedChildren:!0,defaultOptions:{textPropertyName:"displayName",afterTemplate:e,displayCheckboxes:!0,alwaysOnPropertyName:"alwaysOn"},selectionPropertyName:this.selectedKey,displayMode:["small","inline-tipped"],collapsible:!0,propagateSelectionDown:!0,maxHeight:"100%"}}return t.prototype.OnRendered=function(t){return this.element=t,this.$element=i(this.element)},t.prototype.OnSelect2Rendered=function(){return setTimeout(function(t){return function(){return t.selectedUsers(t.getSelectedAsListOfIds())}}(this),200)},t.prototype.OnClickViewAllSelected=function(){return this.isViewingAll(!0)},t.prototype.OnDropdownClicked=function(t,e){var n;return this.userFilter(""),!e.target.classList.contains("ignore-click")&&(this.useModal&&(n=this.enabledIds().slice(),app.modal.Show("itemNotifications",{type:this.pickerType,parentType:this.parentType,parentItem:this.parentItem,itemType:this.itemType,itemId:this.id,privacyIds:this.modalPrivacyIds(),userIds:n,projectId:this.projectId,autoSave:this.autoSave,stack:!0,onCloseCallBack:this.OnModalCloseCallBack})),!1)},t.prototype.OnModalCloseCallBack=function(t){t.wasCancelled||null==t.userIds||this.updateSelectedIds(t.userIds)},t.prototype.OnShow=function(t){return app.FocusFirstInput(t)},t.prototype.mustHavePrivacy=function(t){return"privacy"===this.pickerType&&t.mustHavePrivacy()},t.prototype.toggleSelf=function(t){var e,n,i;-1!==(n=app.utility.FindIndexByKeyValue(this.item.pickerCompanies(),"id",app.loggedInUser.companyId()))&&(e=this.item.pickerCompanies()[n],-1!==(i=app.utility.FindIndexByKeyValue(e.people(),"id",this.currentUserId))&&(!t&&e[this.followerKey]()&&e[this.followerKey](t),null!=e.people()[i][this.followerKey]&&e.people()[i][this.followerKey](t),setTimeout(function(){return Tipped.refresh()},100)))},t.prototype.OnClickClearAll=function(){var t,e,n,i;for(this.item.shouldOverwriteFollowers(!0),i=this.item.pickerCompanies(),e=0,n=i.length;e<n;e++)t=i[e],t[this.selectedKey](!1),t.toggleUsers(this.selectedKey,!1);return this.item.includeSelf(!1)},t.prototype.resetUsersBasedOnPrivacy=function(t){var e,n,i,s,o,a,l,p,c,d,u;for(l=this.item.pickerCompanies(),n=0,s=l.length;n<s;n++)for(e=l[n],e[this.selectedKey]()&&(p="c"+ko.unwrap(e.id),r.call(t,p)<0)&&(e[this.selectedKey](!1),e.toggleUsers(this.selectedKey,!1)),c=e.people(),i=0,o=c.length;i<o;i++)a=c[i],a[this.selectedKey]()&&(d=a.id(),r.call(t,d)<0)&&(u="c"+ko.unwrap(e.id),r.call(t,u)<0)&&a[this.selectedKey](!1);return!0},t.prototype.updateSelectedIds=function(t){var e,n,i,s,o,a,l,p,c,d,u,h,m,f,k,g,b,v,y,x,w,I;for(i=0,k=this.item.pickerCompanies(),s=0,a=k.length;s<a;s++)if(n=k[s],g="c"+ko.unwrap(n.id),r.call(t,g)>=0)for(n[this.selectedKey](!0),b=n.people(),o=0,l=b.length;o<l;o++)f=b[o],i++,f[this.selectedKey](!0);else for(n[this.selectedKey](!1),v=n.people(),u=0,p=v.length;u<p;u++)f=v[u],y=ko.unwrap(f.id).toString(),e=r.call(t,y)>=0||(x=parseInt(ko.unwrap(f.id),10),r.call(t,x)>=0),e&&i++,f[this.selectedKey](e);if(0===i&&t.length>0&&"responsible"===this.pickerType&&"milestone"===this.itemType)for(w=this.item.pickerCompanies(),h=0,c=w.length;h<c;h++)for(n=w[h],I=n.people(),m=0,d=I.length;m<d;m++)return f=I[m],void f[this.selectedKey](!0);return this.item.includeSelf(app.utility.IsUserInSelection(t))},t.prototype.getAvailablePeople=function(t){var e,n,i,s;if(null==t&&(t=!1),null==this.item.isLoadingpickerCompanies||t)return this.item.isLoadingpickerCompanies=!0,n=null!=(s=ko.unwrap(this.item.lockdownId))?s:0,ko.unwrap(this.lockdownId)>0&&0===n&&(n=ko.unwrap(this.lockdownId)),i="lockdown/"+n+".json",this.item.lockdownPrivacyArray([]),e=function(t){return function(e){var n,i,s,o;if(null!=(o=e.response.lockdown.items)&&o.length)for(i=0,s=o.length;i<s;i++)n=o[i],"company"===n.type?t.item.lockdownPrivacyArray.push("c"+n.id):"team"===n.type?t.item.lockdownPrivacyArray.push("t"+n.id):t.item.lockdownPrivacyArray.push(n.id);if(0===t.modalPrivacyIds().length&&t.item.lockdownPrivacyArray().length>0)return t.modalPrivacyIds(t.item.lockdownPrivacyArray())}}(this),0===n||""===n?this.loadCompanies():app.api.get(i).then(e).finally(function(t){return function(){return t.loadCompanies()}}(this))},t.prototype.loadCompanies=function(){var t,n,i,s,o,a,l,p;return"add"===this.mode?n="message"===ko.unwrap(this.itemType)&&ko.unwrap(this.id)>0?this.getPlural(ko.unwrap(this.itemType))+"/"+ko.unwrap(this.id)+"/people.json?groupByCompany=1&getRoles=true&includeObservers="+ko.unwrap(this.includeObservers):("file"===(i=ko.unwrap(this.itemType))||"files"===i)&&ko.unwrap(this.id)>0?"files/"+ko.unwrap(this.parentItem.versionId)+"/people.json?groupByCompany=1&getRoles=true&includeObservers="+ko.unwrap(this.includeObservers):"task_comment"===(s=ko.unwrap(this.itemType))||"milestone_comment"===s||"link_comment"===s?ko.unwrap(this.itemLink)+"/comments/people.json?groupByCompany=1&getRoles=true&includeObservers="+ko.unwrap(this.includeObservers):"file_comment"===ko.unwrap(this.itemType)?"comments/"+ko.unwrap(this.id)+"/people.json?groupByCompany=1&getRoles=true&includeObservers="+ko.unwrap(this.includeObservers):"comment"===ko.unwrap(this.itemType)?"file"===(o=ko.unwrap(this.parentType))||"files"===o?"files/"+ko.unwrap(this.parentItem.versionId)+"/comments/people.json?groupByCompany=1&getRoles=true&includeObservers="+ko.unwrap(this.includeObservers):"fileversion"===(a=ko.unwrap(this.parentType))||"fileversions"===a?"files/"+ko.unwrap(this.parentItem.id)+"/comments/people.json?groupByCompany=1&getRoles=true&includeObservers="+ko.unwrap(this.includeObservers):this.getPlural(ko.unwrap(this.parentType))+"/"+this.parentItem.id()+"/comments/people.json?groupByCompany=1&getRoles=true&includeObservers="+ko.unwrap(this.includeObservers):"board"===ko.unwrap(this.itemType)&&"project"===this.item.boardType?"portfolio/boards/people.json?groupByCompany=1&getRoles=true&includeObservers="+ko.unwrap(this.includeObservers):"projects/"+this.projectId()+"/"+this.getPlural(ko.unwrap(this.itemType))+"/availablepeople.json?groupByCompany=1&getRoles=true&includeObservers="+ko.unwrap(this.includeObservers):"file"===ko.unwrap(this.itemType)?(null!=this.parentItem.versionId?t=this.parentItem.versionId:null!=this.item.fileVersionId?t=this.item.fileVersionId:(window.devMode&&console.warn("Files should be api referenced by fileVersionId!!!"),t=ko.unwrap(this.id)),n=this.getPlural(ko.unwrap(this.itemType))+"/"+ko.unwrap(t)+"/people.json?groupByCompany=1&getRoles=true&includeObservers="+ko.unwrap(this.includeObservers)):n="comment"===(l=ko.unwrap(this.itemType))||"file_comment"===l?"comments/"+ko.unwrap(this.id)+"/people.json?groupByCompany=1&getRoles=true&includeObservers="+ko.unwrap(this.includeObservers):"task_comment"===(p=ko.unwrap(this.itemType))||"milestone_comment"===p||"link_comment"===p?ko.unwrap(this.itemLink)+"/comments/people.json?groupByCompany=1&getRoles=true&includeObservers="+ko.unwrap(this.includeObservers):"board"===ko.unwrap(this.itemType)&&"project"===this.item.boardType?"portfolio/boards/"+ko.unwrap(this.id)+"/people.json?groupByCompany=1&getRoles=true&includeObservers="+ko.unwrap(this.includeObservers):this.getPlural(ko.unwrap(this.itemType))+"/"+ko.unwrap(this.id)+"/people.json?groupByCompany=1&getRoles=true&includeObservers="+ko.unwrap(this.includeObservers),!ko.unwrap(this.getAllUsers)&&parseInt(ko.unwrap(this.lockdownId),10)>0&&(n+="&includeAllUsers=false"),this.loadingPeople(!0),app.api.get(n).then(function(t){return function(n){var i,s,o,a,l,p,c,d,u,h,m,f,k,g,b,v,y,x,w,I,C,T,O,P,S,j,_,A,F,D,U,M,E,N,L,R,$,B,V,K,H,q,G,W,z,Y,J,Q,X;for(s=[],null!=n.response.roles&&(s=n.response.roles),i=n.response.companies,Q=("function"==typeof(o=t.item).pickerCompanies?o.pickerCompanies():void 0)&&t.item.pickerCompanies().length,m=0,k=i.length;m<k;m++){if(c=i[m],A=0,!c.isInPrivacy&&t.item.lockdownPrivacyArray().length&&(c.isInPrivacy=(W="c"+c.id,r.call(t.item.lockdownPrivacyArray(),W)>=0)),null!=t.responsibleIds||null!=t.followerIds){for(z=c.people,f=0,g=z.length;f<g;f++)h=z[f],null!=t.followerIds&&(h[t.followerKey]=(Y=parseInt(h.id,10),r.call(t.followerIds,Y)>=0||(U=h.id.toString(),r.call(t.followerIds,U)>=0))),null!=t.responsibleIds&&(h.isResponsible=(M=parseInt(h.id,10),r.call(t.responsibleIds,M)>=0||(E=h.id.toString(),r.call(t.responsibleIds,E)>=0))),h.isInPrivacy||(h.isInPrivacy=c.isInPrivacy),h.isInPrivacy&&A++;A===c.people.length&&(c.isInPrivacy=!0)}else if(0!==t.item.defaultPrivacy()){if(c.id.toString()===t.item.defaultPrivacy().toString()&&("add"===t.mode||c.isInPrivacy))for(t.item.includeByDefault()&&(c[t.followerKey]=!0),c.isInPrivacy=!0,N=c.people,T=0,b=N.length;T<b;T++)h=N[T],h.isInPrivacy=!0,h.isInCompanyPrivacy=!0,"add"===t.mode&&"milestone"===t.itemType&&parseInt(h.id,10)===t.currentUserId&&(h.isResponsible=!0),t.item.includeByDefault()&&("comment"!==t.itemType&&"followers"!==t.pickerType||h.id.toString()!==t.currentUserId.toString()?h[t.followerKey]=!0:(h.isFollowingComments=t.item.includeSelf(),h.isInNotifyDefaults=t.item.includeSelf()))}else if(t.item.includeByDefault())for(c[t.followerKey]=!0,L=c.people,O=0,v=L.length;O<v;O++)h=L[O],"comment"!==t.itemType&&"followers"!==t.pickerType||h.id.toString()!==t.currentUserId.toString()?h[t.followerKey]=!0:(h.isFollowingComments=t.item.includeSelf(),h.isInNotifyDefaults=t.item.includeSelf()),"add"===t.mode&&"milestone"===t.itemType&&parseInt(h.id,10)===t.currentUserId&&(h.isResponsible=!0),h.isInPrivacy||(h.isInPrivacy=c.isInPrivacy);else for(R=c.people,P=0,y=R.length;P<y;P++)h=R[P],"comment"!==($=t.itemType)&&"milestone"!==$&&"file"!==$&&"notebook"!==$&&"link"!==$||h.id.toString()!==t.currentUserId.toString()||(h.isFollowingComments=t.item.includeSelf(),h.isInNotifyDefaults=t.item.includeSelf(),h.isFollowingChanges=t.item.includeSelf()),!h.isInPrivacy&&t.item.lockdownPrivacyArray().length&&(h.isInPrivacy=(B=h.id.toString(),r.call(t.item.lockdownPrivacyArray(),B)>=0)),"add"===t.mode&&"milestone"===t.itemType&&parseInt(h.id,10)===t.currentUserId&&(h.isResponsible=!0),"comment"===t.itemType&&h.id.toString()!==t.currentUserId.toString()&&h.isInNotifyDefaults&&!h.isFollowingComments&&(h.isFollowingComments=!0),h.isInPrivacy||(h.isInPrivacy=c.isInPrivacy),h.isInPrivacy&&A++;if(Q&&(p=app.utility.FindIndexByKeyValue(t.item.pickerCompanies(),"id",parseInt(c.id,10)))>-1)for(a=t.item.pickerCompanies()[p],c.isFollowingChanges=a.isFollowingChanges(),c.isFollowingComments=a.isFollowingComments(),c.isInPrivacy=a.isInPrivacy(),c.isResponsible=a.isResponsible(),V=c.people,F=0,x=V.length;F<x;F++)h=V[F],(j=app.utility.FindIndexByKeyValue(a.people(),"id",parseInt(h.id,10)))>-1&&(S=a.people()[j],h.isFollowingChanges=S.isFollowingChanges(),h.isFollowingComments=S.isFollowingComments(),h.isInPrivacy=S.isInPrivacy(),h.isResponsible=S.isResponsible())}if(t.setPrivacyForSelectedIds&&t.selectedIds().length){for(l=[],K=t.selectedIds(),u=D=0,w=K.length;D<w;u=++D)d=K[u],d=d.toString(),"c"===d.charAt(0)&&l.push(t.selectedIds().splice(u)[0].substr(1));for(J=0,I=i.length;J<I;J++)if(a=i[J],H=a.id.toString(),r.call(l,H)>=0)a.isInPrivacy=!0;else for(q=a.people,X=0,C=q.length;X<C;X++)S=q[X],G=parseInt(S.id,10),r.call(t.selectedIds(),G)>=0&&(S.isInPrivacy=!0)}return _=[],ko.utils.arrayForEach(i,function(n){var i;return i=new e(n,t),_.push(i)}),ko.isObservable(t.item.pickerRoles)?t.item.pickerRoles(s):t.item.pickerRoles=ko.observableArray(s),ko.isObservable(t.item.pickerCompanies)?t.item.pickerCompanies(_):t.item.pickerCompanies=ko.observableArray(_)}}(this)).finally(function(t){return function(){if(t.hasLoaded(!0),t.loadingPeople(!1),null!=t.item.includeSelf)return t.toggleSelf(t.item.includeSelf())}}(this))},t.prototype.getAssigneesText=function(){var t,e,n;return t=[],"followers"===this.pickerType&&(e=ko.utils.arrayFilter(this.enabledIds(),function(t){return t.toString().indexOf("c")>-1}),e.length===this.item.pickerCompanies().length)?(n=app.tl("Everyone"),{shortText:n,longText:n}):(t=this.getAssigneeNames(),n="","responsible"===this.pickerType&&(!this.selectedCount()||this.privacyCount()&&0===t.length)?n=app.tl("Please select a user"):"followers"===this.pickerType&&(!this.selectedCount()||this.privacyCount()&&0===t.length)?n=app.tl("Nobody"):"privacy"!==this.pickerType||this.privacyCount()?t.length===this.people().length&&"followers"===this.pickerType&&(n=app.tl("Everyone")):n=app.tl("Everybody on project"),""!==n?{shortText:n,longText:n}:1===t.length?{shortText:t[0].shortName,longText:t[0].longName}:2===t.length?{shortText:t[0].shortName+" & "+t[1].shortName,longText:t[0].longName+" & "+t[1].longName}:3===t.length?{shortText:t[0].shortName+", "+t[1].shortName+" & "+t[2].shortName,longText:t[0].longName+", "+t[1].longName+" & "+t[2].longName}:{shortText:t[0].shortName+", "+t[1].shortName+", "+t[2].shortName+" & "+(t.length-3)+" more",longText:t[0].longName+", "+t[1].longName+", "+t[2].longName+" & "+(t.length-3)+" more"})},t.prototype.getPersonNameInfo=function(t,e){return null!=t.shortName?e.push({shortName:t.shortName(),longName:t.firstName()+" "+t.lastName()}):e.push({shortName:t.firstName()+" "+t.lastName().charAt(0)+".",longName:t.firstName()+" "+t.lastName()}),e},t.prototype.getAssigneeNames=function(){var t,e,n,i,s,o,a,r,l;for(o=[],r=this.item.pickerCompanies(),e=0,i=r.length;e<i;e++)if(t=r[e],"responsible"!==this.pickerType&&t[this.selectedKey]())1===t.people().length&&this.personIsEnabled(t.people()[0])?this.getPersonNameInfo(t.people()[0],o):o.push({shortName:t.name(),longName:t.name()});else for(l=t.people(),n=0,s=l.length;n<s;n++)a=l[n],this.personIsEnabled(a)&&this.getPersonNameInfo(a,o);return o},t.prototype.personIsEnabled=function(t){return t[this.selectedKey]()&&(t.isInPrivacy()||t.isInCompanyPrivacy()||0===this.privacyCount())},t.prototype.getSelectedCount=function(){return this.people().filter(function(t){return function(e){return e[t.selectedKey]()}}(this)).length},t.prototype.getPrivacyCount=function(){return this.people().filter(function(t){return function(t){return("function"==typeof t.isInPrivacy?t.isInPrivacy():void 0)||("function"==typeof t.isInCompanyPrivacy?t.isInCompanyPrivacy():void 0)}}()).length},t.prototype.getFlatIds=function(){return this.people().filter(function(t){return function(t){return("function"==typeof t.isInPrivacy?t.isInPrivacy():void 0)||("function"==typeof t.isInCompanyPrivacy?t.isInCompanyPrivacy():void 0)}}()).map(function(t){return t.id()})},t.prototype.notifyEnabledChange=function(t){var e;if(null!=this.koObservable&&this.koObservable(t),this.usePostbox)return e="followers"===this.pickerType?"follower":this.pickerType,ko.postbox.publish(e+"IdsChanged"+ko.unwrap(this.notifyKey),{ids:t,label:this.getAssigneesText(),flatIds:this.getFlatIds()})},t.prototype.setAllSelected=function(){var t;return 0!==this.selectedCount()&&(this.item.shouldOverwriteFollowers(!0),t="privacy"!==this.pickerType,this.people().forEach(function(e){return function(n){return n[e.selectedKey](t)}}(this)),this.item.pickerCompanies().forEach(function(e){return function(n){return n[e.selectedKey](t)}}(this)),!0)},t.prototype.toggleCompanySelected=function(t){var e,n,i,s,o;for(this.item.shouldOverwriteFollowers(!0),i=!t[this.selectedKey](),t[this.selectedKey](i),o=this.item.pickerCompanies(),e=0,n=o.length;e<n;e++)s=o[e],ko.unwrap(s.id)===ko.unwrap(t.id)&&s[this.selectedKey](i);return t.people().forEach(function(e){return function(n){var o,a,r,l;if("privacy"===e.pickerType){for(n[e.selectedKey](t[e.selectedKey]()),r=e.item.pickerCompanies(),l=[],o=0,a=r.length;o<a;o++)s=r[o],ko.unwrap(s.id)===ko.unwrap(t.id)?l.push(s.people().filter(function(t){if(t.id()===n.id())return t[e.selectedKey](i)})):l.push(void 0);return l}return n[e.selectedKey]((n.isInPrivacy()||0===e.privacyCount())&&t[e.selectedKey]())}}(this))},t.prototype.toggleUserSelected=function(t){var e,n,i,s,o;if(this.item.shouldOverwriteFollowers(!0),s=!t[this.selectedKey](),t[this.selectedKey](s),"isInPrivacy"===this.selectedKey)for(o=this.item.pickerCompanies(),n=0,i=o.length;n<i;n++)e=o[n],e.people().filter(function(e){return function(n){if(n.id()===t.id())return n[e.selectedKey](s)}}(this));if("isInPrivacy"===this.selectedKey&&!t.isInPrivacy()&&t.isResponsible)return t.isResponsible(!1)},t.prototype.getPlural=function(t){return null==t&&(t=""),t=ko.unwrap(t),"s"===t[t.length-1]?t:t+"s"},t.prototype.getSelectedAsListOfIds=function(){return this.people().filter(function(t){return function(e){var n;return"function"==typeof e[n=t.selectedKey]?e[n]():void 0}}(this)).map(function(t){return t.id()})},t.prototype.dispose=function(){var t,e;if(null!=this.item.pickerRoles&&(this.item.pickerRoles=null),null!=this.item.pickerCompanies&&(this.item.pickerCompanies=null),null!=this.item.isLoadingpickerCompanies&&(this.item.isLoadingpickerCompanies=null),("function"==typeof(t=this.item).defaultPrivacyLoaded?t.defaultPrivacyLoaded():void 0)&&this.item.defaultPrivacyLoaded(!1),("function"==typeof(e=this.item).notifyPreferenceLoaded?e.notifyPreferenceLoaded():void 0)&&this.item.notifyPreferenceLoaded(!1),null!=this.subscriptions)return this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:s,template:t}}.apply(e,s))&&(t.exports=o)}).call(e,n(245))},4302:function(t,e,n){var i,s,o=function(t,e){return function(){return t.apply(e,arguments)}},a=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};i=[n(3172),n(1118),n(14)],void 0!==(s=function(t,e,n){var i;return i=function(){function t(t){var n,i,s,r;null==t&&(t={}),this.dispose=o(this.dispose,this),this.OnClickViewProjectChangeHistory=o(this.OnClickViewProjectChangeHistory,this),this.OnClickConvertProject=o(this.OnClickConvertProject,this),this.OnClickCopyProject=o(this.OnClickCopyProject,this),this.OnClickTrashCan=o(this.OnClickTrashCan,this),this.OnClickUncomplete=o(this.OnClickUncomplete,this),this.OnClickComplete=o(this.OnClickComplete,this),this.OnClickSetDates=o(this.OnClickSetDates,this),this.OnClickSetOwner=o(this.OnClickSetOwner,this),this.OnClickArchive=o(this.OnClickArchive,this),this.OnClickDelete=o(this.OnClickDelete,this),this.OnClickReassignItems=o(this.OnClickReassignItems,this),this.OnClickViewEvents=o(this.OnClickViewEvents,this),this.OnClickViewUpdates=o(this.OnClickViewUpdates,this),this.OnClickAddProjectUpdate=o(this.OnClickAddProjectUpdate,this),this.OnClickAddPeople=o(this.OnClickAddPeople,this),this.OnClickAddInvoice=o(this.OnClickAddInvoice,this),this.OnClickLogTime=o(this.OnClickLogTime,this),this.OnClickStartTimer=o(this.OnClickStartTimer,this),this.OnClickAddRisk=o(this.OnClickAddRisk,this),this.OnClickAddEvent=o(this.OnClickAddEvent,this),this.OnClickAddNotebook=o(this.OnClickAddNotebook,this),this.OnClickAddLink=o(this.OnClickAddLink,this),this.OnClickAddFile=o(this.OnClickAddFile,this),this.OnClickAddMessage=o(this.OnClickAddMessage,this),this.OnClickAddMilestone=o(this.OnClickAddMilestone,this),this.OnClickAddTask=o(this.OnClickAddTask,this),this.OnClickStarProject=o(this.OnClickStarProject,this),this.OnClickEditProject=o(this.OnClickEditProject,this),this.subscriptions=[],this.projectId=null!=(n=t.projectId)?n:0,this.project=app.shared.get("project/"+this.projectId+"/projectInfo")()?app.shared.get("project/"+this.projectId+"/projectInfo"):ko.observable(null),this.project()||(null!=t.project&&t.project instanceof e?this.project(t.project):this.project=app.projectInfo.get(this.projectId)),this.sections=null!=(i=t.sections)?i:["quickAdd","jumpTo","manageProject"],this.selectedSection=this.sections.includes(app.loggedInUser.preferences.projectDropdownOpenSection())?app.loggedInUser.preferences.projectDropdownOpenSection:ko.observable(this.sections[0]),this.subscriptions.push(this.selectedSection.subscribe(function(t){return function(t){return app.loggedInUser.preferences.projectDropdownOpenSection(t)}}())),this.selector=null!=(s=t.selector)?s:"",this.showHeader=null==(r=t.showHeader)||r,app.isQuickAddOpen(!0),this.subscriptions.push(this.isProjectAndTemplate=ko.pureComputed(function(t){return function(){var e,n;return[null!=(e=app.currentRoute().project)?e.type():void 0,null!=(n=t.project())?n.type():void 0].includes(app.consts.PROJECT_TEMPLATE)}}(this))),this.subscriptions.push(this.isAdministrator=ko.pureComputed(function(t){return function(){var e;return null!=t.project()&&(e=t.project().permissions,e.projectAdministrator()||app.loggedInUser.administrator())}}(this))),this.subscriptions.push(this.quickAddActions=ko.pureComputed(function(t){return function(){var e,n;return a.call(t.sections,"quickAdd")<0?[]:null==t.project()?[]:t.project().isActive()?(n=t.project().permissions,e=t.project().activePages,app.quickAddProject(t.project()),[{icon:"tasks-regular",iconClass:"h-text-color--tasks",click:t.OnClickAddTask,label:app.tl("Add Task"),shortcutLabel:"t",enabled:n.canAddTasks()&&"0"!==e.tasks()},{icon:"milestone-tw-solid",iconClass:"h-text-color--milestone",click:t.OnClickAddMilestone,label:app.tl("Add Milestone"),shortcutLabel:"m",enabled:n.canAddMilestones()&&"0"!==e.milestones()},{icon:"messages-regular",iconClass:"h-text-color--messages",click:t.OnClickAddMessage,label:app.tl("Add Message"),shortcutLabel:"n",enabled:n.canAddMessages()&&"0"!==e.messages()},{icon:"file-regular",iconClass:"h-text-color--files",click:t.OnClickAddFile,label:app.tl("Add File"),enabled:n.canAddFiles()&&"0"!==e.files()},{icon:"link-regular",iconClass:"h-text-color--links",click:t.OnClickAddLink,label:app.tl("Add Link"),enabled:n.canAddLinks()&&"0"!==e.links()},{icon:"book-regular",iconClass:"h-text-color--notebooks",click:t.OnClickAddNotebook,label:app.tl("Add Notebook"),enabled:n.canAddNotebooks()&&"0"!==e.notebooks()},{icon:"event-regular",iconClass:"h-text-color--events",click:t.OnClickAddEvent,label:app.tl("Add Event"),shortcutLabel:"e",enabled:app.loggedInUser.inOwnerCompany()&&app.loggedInUser.isAccount()&&!t.isProjectAndTemplate()},{icon:"caution-tw",iconClass:"h-text-color--risks",click:t.OnClickAddRisk,label:app.tl("Add Risk"),enabled:n.canAddRisks()&&"0"!==e.riskRegister()},{icon:"timer-regular",iconClass:"h-text-color--time",click:t.OnClickStartTimer,label:app.tl("Start Timer"),shortcutLabel:"s",enabled:n.canLogTime()&&"0"!==e.time()&&!t.isProjectAndTemplate()},{icon:"clock-regular",iconClass:"h-text-color--time",click:t.OnClickLogTime,label:app.tl("Log Time"),shortcutLabel:"l",enabled:n.canLogTime()&&"0"!==e.time()&&!t.isProjectAndTemplate()},{icon:"billing-regular",iconClass:"h-text-color--billing",click:t.OnClickAddInvoice,label:app.tl("Add Invoice"),enabled:n.canAccessInvoiceTracking()&&"0"!==e.billing()&&!t.isProjectAndTemplate()},{icon:"people-regular",iconClass:"h-text-color--people",click:t.OnClickAddPeople,label:app.tl("Add User"),enabled:t.isAdministrator()},{icon:"status-regular",iconClass:"h-text-color--project",click:t.OnClickAddProjectUpdate,label:app.tl("Add Update"),enabled:app.featureFlip.check("projectupdates",{unwrap:!0})&&(t.isAdministrator()||n.canAddProjectUpdate())&&!t.isProjectAndTemplate()}]):[]}}(this))),this.subscriptions.push(this.quickJumpActions=ko.pureComputed(function(t){return function(){var e,n,i;return a.call(t.sections,"jumpTo")<0?[]:null==t.project()?[]:(n=t.project().permissions,e=t.project().activePages,[{icon:"tasks-regular",iconClass:"h-text-color--tasks",type:"link",link:"/#/projects/"+t.project().id()+"/tasks",label:app.tl("Tasks"),enabled:n.viewTasksAndMilestones()&&"0"!==e.tasks()},{icon:"milestone-tw-solid",iconClass:"h-text-color--milestone",type:"link",link:"/#/projects/"+t.project().id()+"/milestones",label:app.tl("Milestones"),enabled:n.viewTasksAndMilestones()&&"0"!==e.milestones()},{icon:"messages-regular",iconClass:"h-text-color--messages",type:"link",link:"/#/projects/"+t.project().id()+"/messages",label:app.tl("Messages"),enabled:n.viewMessagesAndFiles()&&"0"!==e.messages()},{icon:"file-regular",iconClass:"h-text-color--files",type:"link",link:"/#/projects/"+t.project().id()+"/files",label:app.tl("Files"),enabled:n.viewMessagesAndFiles()&&"0"!==e.files()},{icon:"link-regular",iconClass:"h-text-color--links",type:"link",link:"/#/projects/"+t.project().id()+"/links",label:app.tl("Links"),enabled:n.viewLinks()&&"0"!==e.links()},{icon:"book-regular",iconClass:"h-text-color--notebooks",type:"link",link:"/#/projects/"+t.project().id()+"/notebooks",label:app.tl("Notebooks"),enabled:n.viewNotebook()&&"0"!==e.notebooks()},{icon:"event-regular",iconClass:"h-text-color--events",click:t.OnClickViewEvents,label:app.tl("Events"),enabled:app.loggedInUser.inOwnerCompany()&&app.loggedInUser.isAccount()&&!t.isProjectAndTemplate()},{icon:"caution-tw",iconClass:"h-text-color--risks",type:"link",link:"/#/projects/"+t.project().id()+"/risks",label:app.tl("Risks"),enabled:n.viewRiskRegister()&&"0"!==e.riskRegister()},{icon:"clock-regular",iconClass:"h-text-color--time",type:"link",link:"/#/projects/"+t.project().id()+"/time",label:app.tl("Time"),enabled:n.viewTimeLog()&&"0"!==e.time()&&!t.isProjectAndTemplate()},{icon:"billing-regular",iconClass:"h-text-color--billing",type:"link",link:"/#/projects/"+t.project().id()+"/billing",label:app.tl("Billing"),enabled:n.canAccessInvoiceTracking()&&"0"!==e.billing()},{icon:"comment-regular",iconClass:"h-text-color--comments",type:"link",link:"/#/projects/"+t.project().id()+"/comments",label:app.tl("Comments"),enabled:"0"!==e.comments()},{icon:"people-regular",iconClass:"h-text-color--people",type:"link",link:"/#/projects/"+t.project().id()+"/people",label:app.tl("People"),enabled:!app.enforceProject()&&(n.canViewProjectMembers()||n.projectAdministrator()||app.loggedInUser.administrator())},{icon:"graph-regular",iconClass:"h-text-color--report",type:"link",link:"/#/projects/"+t.project().id()+"/report",label:app.tl("Report"),enabled:n.projectAdministrator()||app.loggedInUser.administrator()||n.viewTasksAndMilestones()},{icon:"status-regular",iconClass:"h-text-color--project",click:t.OnClickViewUpdates,label:app.tl("Updates"),enabled:app.featureFlip.check("projectupdates",{unwrap:!0})&&(n.projectAdministrator()||n.canViewProjectUpdate())&&!t.isProjectAndTemplate()},{icon:"settings-regular",iconClass:"h-text-color--settings",type:"link",link:"/#/projects/"+t.project().id()+"/settings",label:app.tl("Settings"),enabled:t.isAdministrator()&&(null!=(i=t.project())?i.isActive():void 0)&&!app.enforceProject()}])}}(this))),this.subscriptions.push(this.quickManageActions=ko.pureComputed(function(t){return function(){var e,n,i,s,o,r,l,p,c;return a.call(t.sections,"manageProject")<0?[]:null==t.project()?[]:(t.project().permissions,t.project().activePages,e=[],t.isAdministrator()&&e.push.apply(e,[{icon:"close-regular",iconClass:"h-text-color--settings",click:t.OnClickDelete,label:app.tl("Delete"),enabled:!app.enforceProject()},{icon:"archive-regular",iconClass:"h-text-color--settings",click:t.OnClickArchive,label:(null!=(s=t.project())?s.isActive():void 0)?app.tl("Archive"):app.tl("Set Active"),enabled:!t.isProjectAndTemplate()&&!app.enforceProject()},{icon:"owner-regular",iconClass:"h-text-color--settings",click:t.OnClickSetOwner,label:app.tl("Set Owner"),enabled:null!=(o=t.project())?o.isActive():void 0},{icon:"event-regular",iconClass:"h-text-color--settings",click:t.OnClickSetDates,label:app.tl("Set Dates"),enabled:(null!=(r=t.project())?r.isActive():void 0)&&!t.isProjectAndTemplate()},{icon:"delete-regular",iconClass:"h-text-color--settings",click:t.OnClickTrashCan,label:app.tl("Trash Can"),enabled:(null!=(l=t.project())?l.isActive():void 0)&&!app.enforceProject()}]),(app.loggedInUser.administrator()||app.loggedInUser.permissions.canAddProjects())&&e.push({icon:"clone-regular",iconClass:"h-text-color--settings",click:t.OnClickCopyProject,label:app.loggedInUser.accounts&&app.loggedInUser.accounts().length>0&&!t.isProjectAndTemplate()?app.tl("Copy/Move"):app.tl("Copy"),enabled:!app.enforceProject()&&app.loggedInUser.administrator()||app.loggedInUser.permissions.canAddProjects()}),(app.loggedInUser.administrator()||app.loggedInUser.permissions.canManageProjectTemplates())&&e.push({icon:"template-regular",iconClass:"h-text-color--settings",click:t.OnClickConvertProject,label:app.tl("Save as Template"),actionModifierClass:"fit-label",enabled:app.featureFlip.check("projecttemplates",{unwrap:!0})&&(app.loggedInUser.administrator()||app.loggedInUser.permissions.canManageProjectTemplates())&&!t.isProjectAndTemplate()}),t.isAdministrator()&&e.push.apply(e,[{icon:"check-regular",iconClass:"h-text-color--settings",click:"completed"===(null!=(p=t.project())?p.subStatus():void 0)?t.OnClickUncomplete:t.OnClickComplete,label:"completed"===(null!=(c=t.project())?c.subStatus():void 0)?app.tl("Uncomplete"):app.tl("Complete"),enabled:(null!=(n=t.project())?n.isActive():void 0)&&!t.isProjectAndTemplate()},{icon:"reassign-regular",iconClass:"h-text-color--settings",click:t.OnClickReassignItems,label:app.tl("Reassign Items"),enabled:null!=(i=t.project())?i.isActive():void 0,actionModifierClass:"fit-label"},{icon:"bolt-regular",iconClass:"h-text-color--settings",click:t.OnClickViewProjectChangeHistory,label:app.tl("View History"),enabled:app.featureFlip.check("audittrail",{unwrap:!0})}]),e)}}(this))),this.subscriptions.push(this.showToggles=ko.pureComputed(function(t){return function(){var e,n,i;return e=t.quickAddActions().length>0,n=t.quickJumpActions().length>0,i=t.quickJumpActions().length>0,(e?1:0)+(n?1:0)+(i?1:0)>=2}}(this)))}return t.prototype.OnClickEditProject=function(){return Tipped.hideAll(),app.modal.Show("addOrEditProject",{mode:"edit",project:this.project()}),!1},t.prototype.OnClickStarProject=function(){return this.project().OnClickStar()},t.prototype.OnClickAddTask=function(){Tipped.hideAll(),app.modal.Show("quicklyAddTasksToTaskList",{})},t.prototype.OnClickAddMilestone=function(){return Tipped.hideAll(),app.modal.Show("addOrEditMilestone",{projectId:this.project().id()})},t.prototype.OnClickAddMessage=function(){return Tipped.hideAll(),app.modal.Show("addMessage",{projectId:this.project().id()})},t.prototype.OnClickAddFile=function(){return Tipped.hideAll(),app.modal.Show("projectsAddFiles",{projectId:this.project().id()})},t.prototype.OnClickAddLink=function(){return Tipped.hideAll(),app.modal.Show("addOrEditLink",{projectId:this.project().id()})},t.prototype.OnClickAddNotebook=function(){return Tipped.hideAll(),app.GoTo("projects/"+this.project().id()+"/notebooks/create")},t.prototype.OnClickAddEvent=function(){return Tipped.hideAll(),app.modal.Show("addOrEditEvent",{project:this.project()})},t.prototype.OnClickAddRisk=function(){return Tipped.hideAll(),app.modal.Show("addOrEditRiskEntry",{projectId:this.project().id()})},t.prototype.OnClickStartTimer=function(){return Tipped.hideAll(),app.modal.Show("addOrEditTimer",{projectId:this.project().id,projectName:this.project().name})},t.prototype.OnClickLogTime=function(){return Tipped.hideAll(),app.modal.Show("quick-add-time",{projectId:this.project().id()})},t.prototype.OnClickAddInvoice=function(){return Tipped.hideAll(),app.modal.Show("addOrEditInvoice",{projectId:this.project().id()})},t.prototype.OnClickAddPeople=function(){return Tipped.hideAll(),app.modal.Show("addPeopleToProject",{project:this.project()})},t.prototype.OnClickAddProjectUpdate=function(){return Tipped.hideAll(),app.modal.Show("addOrEditProjectUpdate",{projectId:this.project().id()})},t.prototype.OnClickViewUpdates=function(){return this.project().ViewUpdates()},t.prototype.OnClickViewEvents=function(){return this.project().ViewUpcomingEvents()},t.prototype.OnClickReassignItems=function(){return app.modal.Show("userReassignItems",{projectId:this.project().id()})},t.prototype.OnClickDelete=function(){return this.project().Delete()},t.prototype.OnClickArchive=function(){return this.project().Archive()},t.prototype.OnClickSetOwner=function(){return this.project().SetOwner()},t.prototype.OnClickSetDates=function(){return this.project().EditDates()},t.prototype.OnClickComplete=function(){return this.project().Complete()},t.prototype.OnClickUncomplete=function(){return this.project().Uncomplete()},t.prototype.OnClickTrashCan=function(){return this.project().OpenTrashCan()},t.prototype.OnClickCopyProject=function(){return this.project().CopyProject()},t.prototype.OnClickConvertProject=function(){return this.project().ConvertProject()},t.prototype.OnClickViewProjectChangeHistory=function(){if(app.featureFlip.check("audittrail",{unwrap:!0}))return Tipped.hideAll(),app.quickView.show("audit",{itemId:this.project().id(),itemType:"project"})},t.prototype.dispose=function(){app.isQuickAddOpen(!1),app.quickAddProject(null),this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:i,template:t}}.apply(e,i))&&(t.exports=s)},4303:function(t,e,n){var i,s,o=function(t,e){return function(){return t.apply(e,arguments)}};i=[n(3174),n(3173),n(1118),n(14)],void 0!==(s=function(t,e,n,i){var s;return s=function(){function t(t){null==t&&(t={}),this.dispose=o(this.dispose,this),this.validatePermissions=o(this.validatePermissions,this),this.OnClickTrashCan=o(this.OnClickTrashCan,this),this.OnClickEditProjectDates=o(this.OnClickEditProjectDates,this),this.OnClickProjectSummarySettings=o(this.OnClickProjectSummarySettings,this),this.OnClickNewProject=o(this.OnClickNewProject,this),this.OnClickCloneProject=o(this.OnClickCloneProject,this),this.OnClickSetProjectActive=o(this.OnClickSetProjectActive,this),this.OnClickDeleteProject=o(this.OnClickDeleteProject,this),this.OnClickArchiveProject=o(this.OnClickArchiveProject,this),this.OnClickStarProject=o(this.OnClickStarProject,this),this.OnClickEditProject=o(this.OnClickEditProject,this),this.OnRendered=o(this.OnRendered,this),this.tasksTippedContent=e,this.subscriptions=[],this.localProject=ko.observable({}),this.type=null!=t.type?t.type:t.type="project",this.projectId=null!=t.projectId?t.projectId:t.projectId=0,this.selector=null!=t.selector?t.selector:t.selector="",this.projectLoaded=ko.observable(!1),this.permissionsLoaded=ko.observable(!1),this.subscriptions.push(this.permissionsLoaded.subscribe(function(t){return function(){return Tipped.refresh()}}())),this.permissions={tasks:ko.observable(!1),milestones:ko.observable(!1),messages:ko.observable(!1),files:ko.observable(!1),time:ko.observable(!1),notebooks:ko.observable(!1),risks:ko.observable(!1),links:ko.observable(!1),billing:ko.observable(!1),comments:ko.observable(!1),people:ko.observable(!1),projectSettings:ko.observable(!1),starProject:ko.observable(!1),copyProject:ko.observable(!1),overviewSettings:ko.observable(!1),projectReport:ko.observable(!1),projectRoles:ko.observable(!1),projectDates:ko.observable(!1),projectTrashCan:ko.observable(!1),completeProject:ko.observable(!1),archiveProject:ko.observable(!1),deleteProject:ko.observable(!1)},this.subscriptions.push(this.project=ko.pureComputed(function(t){return function(){return 0===t.projectId?null:ko.unwrap(app.projectInfo.get(t.projectId))}}(this))),this.subscriptions.push(this.isTemplate=ko.pureComputed(function(t){return function(){return"function"==typeof t.project?t.project().isTemplate():void 0}}(this))),this.project.subscribe(this.validatePermissions),this.validatePermissions(),this.taskView="","board"===app.loggedInUser.preferences.projectTasksViewMode()&&(this.taskView="/board"),this.tasksUniqueId="projects_dropdown_tasks_list_"+(new Date).getTime()}return t.prototype.OnRendered=function(){return Tipped.refresh()},t.prototype.OnClickEditProject=function(){return!!this.permissions.projectSettings()&&(Tipped.hideAll(),app.modal.Show("addOrEditProject",{mode:"edit",project:this.project()}),!1)},t.prototype.OnClickStarProject=function(){return this.project().OnClickStar()},t.prototype.OnClickArchiveProject=function(t,e){var n,i;return Tipped.hideAll(),i=app.tl("Archive this Project?"),n=app.tl("Are you sure you want to archive this project?"),app.modal.Show("confirm",{title:i,text:n,callback:function(t){return function(e){if(!e.wasCancelled)return app.api.put("./projects/"+t.projectId+"/archive.json",{status:"inactive"}).then(function(e){if("OK"===e.response.STATUS)return app.UpdateProjectAndPermissions(t.projectId),app.ko.postbox.publish("projects-updated",{}),app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"project",actionType:app.consts.ACTIONTYPE.UPDATED,subType:"archived",itemId:t.projectId})})}}(this)}),!1},t.prototype.OnClickDeleteProject=function(t,e){var n,i;return Tipped.hideAll(),i=app.tl("Confirm Delete"),n=app.tl("This project will be moved to the trash can. After [_s] days this project and all attached files will be completely removed.","30"),app.modal.Show("confirm",{title:i,text:n,callback:function(t){return function(e){if(!e.wasCancelled)return app.api.delete("projects/"+t.projectId+".json").then(function(e){if("OK"===e.response.STATUS&&(t.project().status("deleted"),app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"project",actionType:app.consts.ACTIONTYPE.DELETED,itemId:t.projectId}),app.ko.postbox.publish("projects-updated",{}),app.flash.Success(app.tl("Project Deleted")),null!=app.currentRoute().projectId&&app.currentRoute().projectId===t.projectId))return app.GoTo("#")})}}(this)}),!1},t.prototype.OnClickSetProjectActive=function(t,e){return Tipped.hideAll(),app.api.put("./projects/"+this.projectId+"/archive.json",{status:"active"}).then(function(t){return function(e){var n,i;return"OK"===e.response.STATUS?(app.UpdateProjectAndPermissions(t.projectId),app.ko.postbox.publish("projects-update-stats",{}),app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"project",actionType:app.consts.ACTIONTYPE.UPDATED,subType:"active",itemId:t.projectId})):"UPGRADE_REQUIRED"===e.response.STATUS?(i=app.tl("Oops, upgrade required!"),n=app.tl("You have already reached the maximum number of projects allowed with your current price plan"),app.loggedInUser.inOwnerCompany()&&app.loggedInUser.administrator()?app.GoTo("settings/subscription"):(i=app.tl("Project limit reached"),n=app.tl("Please contact the site owner")),app.flash.Error(i,n)):void 0}}(this)),!1},t.prototype.OnClickCloneProject=function(){return Tipped.hideAll(),app.modal.Show("cloneProject",{item:this.project(),isTemplate:this.isTemplate}),!1},t.prototype.OnClickNewProject=function(){return Tipped.hideAll(),app.modal.Show("cloneProject",{item:this.project(),isTemplate:!0,newFromTemplate:!0}),!1},t.prototype.OnClickProjectSummarySettings=function(){return Tipped.hideAll(),app.quickView.show("project-summary-settings",{title:app.tl("Project Summary Settings"),item:this.project()}),!1},t.prototype.OnClickEditProjectDates=function(){var t;return Tipped.hideAll(),t=function(t){return function(e){if(!e.wasCancelled)return e.updated?(t.project().startDate(i(e.start,"YYYYMMDD")),t.project().endDate(i(e.end,"YYYYMMDD"))):e.cleared?(t.project().startDate(""),t.project().endDate("")):void 0}}(this),app.modal.Show("editProjectDates",{item:this.project(),onCloseCallBack:t}),!1},t.prototype.OnClickTrashCan=function(t,e){return Tipped.hideAll(),app.modal.Show("trashCan",{item:this.project()}),!1},t.prototype.validatePermissions=function(){var t,e;if(null!=this.project())return e=this.project().permissions,t=this.project().activePages,this.permissions.tasks(e.viewTasksAndMilestones()&&"0"!==t.tasks()),this.permissions.milestones(e.viewTasksAndMilestones()&&"0"!==t.milestones()),this.permissions.messages(e.viewMessagesAndFiles()&&"0"!==t.messages()),this.permissions.files(e.viewMessagesAndFiles()&&"0"!==t.files()),this.permissions.time(e.viewTimeLog()&&"0"!==t.time()),this.permissions.notebooks(e.viewNotebook()&&"0"!==t.notebooks()),this.permissions.risks(e.viewRiskRegister()&&"0"!==t.riskRegister()),this.permissions.links(e.viewLinks()&&"0"!==t.links()),this.permissions.billing(e.canAccessInvoiceTracking()&&"0"!==t.billing()),this.permissions.comments("0"!==t.comments()),this.permissions.people(e.projectAdministrator()||app.loggedInUser.administrator()||e.canViewProjectMembers()),this.permissions.projectSettings(e.projectAdministrator()||app.loggedInUser.administrator()),this.permissions.starProject(!0),this.permissions.copyProject(app.loggedInUser.administrator()||app.loggedInUser.permissions.canAddProjects()),this.permissions.overviewSettings(!0),this.permissions.projectReport(e.projectAdministrator()||app.loggedInUser.administrator()||e.viewTasksAndMilestones()),this.permissions.projectRoles(e.projectAdministrator()||app.loggedInUser.administrator()),this.permissions.projectDates(e.projectAdministrator()||app.loggedInUser.administrator()),this.permissions.projectTrashCan(!0),this.permissions.completeProject(e.projectAdministrator()||app.loggedInUser.administrator()),this.permissions.archiveProject(e.projectAdministrator()||app.loggedInUser.administrator()),this.permissions.deleteProject(e.projectAdministrator()||app.loggedInUser.administrator()),this.permissionsLoaded(!0),this.projectLoaded(!0),Tipped.refresh()},t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:s,template:t}}.apply(e,i))&&(t.exports=s)},4307:function(t,e,n){(function(i){var s,o,a=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(3180),n(1116)],void 0!==(o=function(t,e){var n;return n=function(){function t(t){var e;null==t&&(t={}),this.dispose=a(this.dispose,this),this.OnRendered=a(this.OnRendered,this),this.OnClickBackground=a(this.OnClickBackground,this),this.OnMouseOverClose=a(this.OnMouseOverClose,this),this.OnClickCloseButton=a(this.OnClickCloseButton,this),this.subscriptions=[],this.productIntegration=ko.observable(t.productIntegration),this.templateName=ko.observable(t.name),this.headerActions=ko.observable(t.header),this.headerComponent=ko.observable(null!=(null!=(e=t.params)?e.headerComponent:void 0)?t.params.headerComponent:"widget-quickView-header"),this.templateParams=ko.observable(t.params),this.qvTitle=ko.isObservable(t.title)?t.title:ko.observable(t.title),this.headerParams={title:this.qvTitle,params:this.templateParams()},this.qvType=ko.observable(t.type),this.viewWidth=ko.observable(900),this.position=t.position,this.originalPadding=null,this.id=t.id,this.zIndexBase=app.consts.ZINDICES.QUICKVIEW,this.isHoveringAndHoldingShift=ko.observable(!1),this.uniqueId="qv-wrapper-"+Date.now(),this.closeTippedInstances=function(){return Tipped.hide(".closeOnScroll")},i("#quickViewScroller").on("scroll",this.closeTippedInstances),this.subscriptions.push(this.paddingClass=ko.pureComputed(function(t){return function(){var e,n,i,s,o,a,r,l,p,c,d,u,h,m,f,k;return null==(null!=(o=t.templateParams())?o.removePadding:void 0)?"":"boolean"!=typeof(null!=(p=t.templateParams())?p.removePadding:void 0)||t.templateParams().removePadding?"boolean"==typeof(null!=(c=t.templateParams())?c.removePadding:void 0)&&t.templateParams().removePadding?"no-padding":"object"==typeof(null!=(d=t.templateParams())?d.removePadding:void 0)?(s=null!=(u=null!=(h=t.templateParams())?h.removePadding.top:void 0)&&u,i=null!=(m=null!=(f=t.templateParams())?f.removePadding.right:void 0)&&m,e=null!=(k=null!=(a=t.templateParams())?a.removePadding.bottom:void 0)&&k,n=null!=(r=null!=(l=t.templateParams())?l.removePadding.left:void 0)&&r,(s?"no-padding-top":"")+(i?" no-padding-right":"")+(e?" no-padding-bottom":"")+(n?" no-padding-left":"")):"":""}}(this))),this.subscriptions.push(this.stackOffset=ko.computed(function(t){return function(){var e,n;return n=app.quickView.views().length,e=t.position()+1,t.originalPadding+30*(n-e)+"px"}}(this))),this.subscriptions.push(this.stackOffset.subscribe(function(t){return function(e){return i("#"+t.uniqueId).animate({"padding-right":e})}}(this))),this.subscriptions.push(this.zIndex=ko.computed(function(t){return function(){return t.zIndexBase+t.position()}}(this))),this.subscriptions.push(this.showIt=ko.computed(function(t){return function(){var e,n;return n=app.quickView.views(),t.position()===n.length-1||null!=(null!=(e=n[t.position()+1].params)?e.showLayeredContent:void 0)&&n[t.position()+1].params.showLayeredContent}}(this))),this.subscriptions.push(this.isBackgroundLayer=ko.computed(function(t){return function(){var e;return e=app.quickView.views(),t.position()!==e.length-1}}(this))),this.subscriptions.push(this.taskListSharedPureComputed=ko.pureComputed(function(t){return function(){return"taskList"===t.qvType()?app.shared.getPureComputed("viewModel/taskLists/"+t.templateParams().taskListId):ko.pureComputed(function(){return null})}}(this))),this.taskList=ko.pureComputed(function(t){return function(){var e;return null!=(e=t.taskListSharedPureComputed()())?e.taskList():void 0}}(this))}return t.prototype.OnClickCloseButton=function(t,e){return this.isHoveringAndHoldingShift()||e.shiftKey?app.quickView.empty(app.hasher.getHash()):app.quickView.pop()},t.prototype.OnMouseOverClose=function(t,e){return this.isHoveringAndHoldingShift(e.shiftKey)},t.prototype.OnClickBackground=function(){return app.quickView.pop()},t.prototype.OnRendered=function(){return app.isScrollUpDisabled(!0),ko.tasks.schedule(function(t){return function(){return t.originalPadding=parseInt(i("#"+t.uniqueId).css("padding-right").replace("px",""),10)}}(this))},t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()}),app.isScrollUpDisabled(!1)},t}(),{viewModel:n,template:t}}.apply(e,s))&&(t.exports=o)}).call(e,n(245))},4309:function(t,e,n){var i,s;i=[n(3182)],void 0!==(s=function(t){var e;return e=function(){function t(t){null==t&&(t={}),this.subscriptions=[],this.qvTitle=t.title,app.InitOnShow(this)}return t.prototype.OnShow=function(){},t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:e,template:t}}.apply(e,i))&&(t.exports=s)},4365:function(t,e,n){var i,s,o=function(t,e){return function(){return t.apply(e,arguments)}};i=[n(164),n(3253),n(14),n(245)],void 0!==(s=function(t,e,n,i){var s;return s=function(){function e(e){null==e&&(e={}),this.CheckIfResumed=o(this.CheckIfResumed,this),this.CheckIfPaused=o(this.CheckIfPaused,this),this.CheckIfDeleted=o(this.CheckIfDeleted,this),this.CheckIfAlreadyLogged=o(this.CheckIfAlreadyLogged,this),this.GetData=o(this.GetData,this),this.LogTime=o(this.LogTime,this),this.LoadTimer=o(this.LoadTimer,this),this.SaveTimer=o(this.SaveTimer,this),this.Reset=o(this.Reset,this),this.Resume=o(this.Resume,this),this.Pause=o(this.Pause,this),this.Initialise=o(this.Initialise,this),this.UpdateTime=o(this.UpdateTime,this),this.OnRunningStateChange=o(this.OnRunningStateChange,this),this.OnNotifyTWEvent=o(this.OnNotifyTWEvent,this),this.OnClickDelete=o(this.OnClickDelete,this),this.OnClickLogTime=o(this.OnClickLogTime,this),this.OnClickToggleTimer=o(this.OnClickToggleTimer,this),this.OnClickToggleCollapse=o(this.OnClickToggleCollapse,this),this.OnTimerStopped=o(this.OnTimerStopped,this),this.OnTimerPaused=o(this.OnTimerPaused,this),this.OnTimerStarted=o(this.OnTimerStarted,this),this.subscriptions=[],this.id=null,this.initialised=t.observable(!1),this.running=t.observable(!1),this.projectId=t.observable(),this.taskId=t.observable(),this.startedAt=t.observable(),this.seconds=t.observable(0),this.totalTime=t.observable(0),this.interval=null,this.timerCheckInterval=null,this.resumeCheckInterval=null,this.billable=t.observable(!0),this.project=t.observable(),this.task=t.observable(),this.taskListInfo=t.observable(),this.projectInfo=t.observable(),this.desc=t.observable(app.cache.get("lastTimerDesc")||""),this.collapsed=t.observable(!0),this.subscriptions.push(t.postbox.subscribe("timer-started",this.OnTimerStarted)),this.subscriptions.push(t.postbox.subscribe("timer-paused",this.OnTimerPaused)),this.subscriptions.push(t.postbox.subscribe("timer-stopped",this.OnTimerStopped)),this.subscriptions.push(app.ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent)),this.subscriptions.push(this.billable.subscribe(this.SaveTimer)),this.subscriptions.push(this.desc.subscribe(function(t){return function(t){return app.cache.set("lastTimerDesc",t)}}())),this.subscriptions.push(this.running.subscribe(this.OnRunningStateChange)),this.descTextAreaHeight=t.pureComputed(function(t){return function(){var e,n,s;return t.desc(),s=app.viewPortHeight()-200,n=i("#timerDesc").get(0),n.style.height="1px",e=Math.min(Math.max(24,n.scrollHeight),s),n.style.height=e+"px",e}}(this)),this.formattedTime=t.pureComputed(function(t){return function(){var e,n,i,s;return 0===(s=t.totalTime())?"00 : 00 : 00":(e=Math.floor(s/3600),n=Math.floor((s-3600*e)/60),i=s-3600*e-60*n,e<10&&(e="0"+e),n<10&&(n="0"+n),i<10&&(i="0"+i),e+" : "+n+" : "+i)}}(this)),this.subscriptions.push(this.formattedTime),this.timerCheckInterval=setInterval(function(t){return function(){return t.LoadTimer()}}(this),1e3),this.LoadTimer(),app.timer=this}return e.prototype.OnTimerStarted=function(t){var e,n;return null==t&&(t={}),this.initialised()?null!=t.taskId&&(n=parseInt(t.taskId,10),this.taskId()!==n)?app.flash.Error(app.tl("A timer is already running")):null!=t.projectId&&(e=parseInt(t.projectId,10),this.projectId()!==e)?app.flash.Error(app.tl("A timer is already running")):this.running()?void 0:this.Resume():this.Initialise(t)},e.prototype.OnTimerPaused=function(){if(this.running())return this.Pause()},e.prototype.OnTimerStopped=function(){if(this.initialised())return this.Reset()},e.prototype.OnClickToggleCollapse=function(){this.collapsed(!this.collapsed()),this.SaveTimer(),this.collapsed()||setTimeout(function(t){return function(){return i("#timerDesc").focus()}}(),250)},e.prototype.OnClickToggleTimer=function(t,e){return e.stopImmediatePropagation(),this.running()?this.Pause():this.Resume()},e.prototype.OnClickLogTime=function(t,e){var n;e.stopImmediatePropagation(),n=this.billable()?app.tl("Are you sure you want to stop this timer and log the time as billable?"):app.tl("Are you sure you want to stop this timer and log the time as not billable?"),app.modal.Show("confirm",{title:app.tl("Log this Time?"),text:n,callback:function(t){return function(e){if(!e.wasCancelled)return t.LogTime()}}(this)})},e.prototype.OnClickDelete=function(){app.modal.Show("confirm",{title:app.tl("Are You Sure?"),text:app.tl("Are you sure you want to cancel this timer and not log time?"),callback:function(t){return function(e){if(!e.wasCancelled)return t.Reset()}}(this)})},e.prototype.OnNotifyTWEvent=function(t){t.actionType===app.consts.ACTIONTYPE.DELETED&&("task"===t.itemType&&t.itemId===this.taskId()||"project"===t.itemType&&t.itemId===this.projectId())&&this.Reset()},e.prototype.OnRunningStateChange=function(t){if(!0===t)return clearInterval(this.timerCheckInterval);if(!this.initialised())return this.timerCheckInterval=setInterval(function(t){return function(){return t.LoadTimer()}}(this),1e3)},e.prototype.UpdateTime=function(){var t,e;return(this.CheckIfAlreadyLogged()||this.CheckIfDeleted())&&this.Reset(),this.CheckIfPaused(),this.running()?(t=n(),e=this.startedAt(),this.totalTime(this.seconds()+t.diff(e,"s"))):this.totalTime(this.seconds())},e.prototype.Initialise=function(t){var e,s;if(null==t&&(t={}),!t.projectId)throw new Error("projectId is required");if(e=parseInt(t.projectId,10),isNaN(e))throw new Error("projectId is not a number");if(e<=0)throw new Error("projectId must be greater than 0");if(null!=t.taskId){if(s=parseInt(t.taskId,10),isNaN(s))throw new Error("taskId is not a number");if(s<=0)throw new Error("taskId must be greater than 0")}this.initialised(!0),this.projectId(e),this.taskId(s),this.id=null!=t.id?parseInt(t.id,10):Date.now(),this.running(null==t.running||t.running),this.startedAt(null!=t.startedAt?n(t.startedAt):n()),this.seconds(null!=t.seconds?t.seconds:0),this.collapsed(null!=t.collapsed?t.collapsed:this.collapsed()),null!=t.billable?this.billable(t.billable):this.billable(app.loggedInUser.preferences.timeDefaultBillable()),this.running()&&(this.interval=setInterval(this.UpdateTime,1e3)),this.UpdateTime(),this.SaveTimer(),this.GetData(),t.callback&&t.callback(),this.running()||(this.resumeCheckInterval=setInterval(this.CheckIfResumed,1e3)),setTimeout(function(t){return function(){return i("#timerDesc").focus()}}(),250)},e.prototype.Pause=function(t){var e;null==t&&(t=!0),e=this.totalTime(),this.running(!1),clearInterval(this.interval),this.seconds(e),this.UpdateTime(),t&&this.SaveTimer(),this.resumeCheckInterval=setInterval(this.CheckIfResumed,1e3)},e.prototype.Resume=function(t,e){null==t&&(t=!0),clearInterval(this.resumeCheckInterval),this.running(!0),this.startedAt(e||n()),this.interval=setInterval(this.UpdateTime,1e3),this.UpdateTime(),t&&this.SaveTimer()},e.prototype.Reset=function(){if(app.cache.set("last-deleted-timer-id",this.id),app.cache.remove("lastTimerDesc"),app.cache.remove("timer"),clearInterval(this.interval),this.id=null,this.desc(""),this.running(!1),this.initialised(!1),this.projectId(null),this.taskId(null),this.startedAt(null),this.seconds(0),this.collapsed(!1),this.interval=null,this.project(null),this.task(null),!this.timerCheckInterval)return this.timerCheckInterval=setInterval(function(t){return function(){return t.LoadTimer()}}(this),1e3)},e.prototype.SaveTimer=function(){var t;return t={id:this.id,running:this.running(),projectId:this.projectId(),taskId:this.taskId(),startedAt:this.startedAt(),seconds:this.seconds(),billable:this.billable(),collapsed:this.collapsed()},app.cache.set("timer",t)},e.prototype.LoadTimer=function(){var t;if(!this.initialised()&&(t=app.cache.get("timer"))&&null!=t.projectId)return this.Initialise(t)},e.prototype.LogTime=function(){var e,i,s,o,a;if(this.initialised())return this.running()&&this.Pause(),this.CheckIfAlreadyLogged()?(app.flash.Warn(app.tl("This timer has already been logged and cannot be logged again.")),void this.Reset()):this.CheckIfDeleted()?(app.flash.Error(app.tl("This timer has already been deleted and cannot be logged.")),void this.Reset()):(o=this.totalTime(),i=Math.floor(o/3600),s=Math.round((o-3600*i)/60),i<1&&s<1&&(s=1),this.startedAt(n().subtract(o,"seconds")),e={"time-entry":{hours:i,minutes:s,"person-id":app.loggedInUser.id(),date:this.startedAt().format("YYYYMMDD"),time:this.startedAt().format("HH:mm"),isBillable:this.billable(),description:this.desc()}},a=null!=this.taskId()?"tasks/"+this.taskId()+"/time_entries.json":"projects/"+this.projectId()+"/time_entries.json",app.api.post(app.prefixApi(a,"API_PREFIX_V1","API_PREFIX_CF"),e).then(function(n){return function(i){var s,o;return s=n.projectId(),o=n.taskId(),n.Reset(),app.flash.Success(app.tl("Time logged successfully")),app.cache.set("last-logged-timer-id",n.id),t.postbox.publish("allTWEvents",{itemId:i.id,itemType:"time",actionType:app.consts.ACTIONTYPE.ADDED,eventTime:new Date,projectId:s,extraInfo:{objectType:"task",objectId:o}}),setTimeout(function(){return app.modal.Show("updateSavedTimer",{id:i.id,projectId:s,taskId:o,data:e})},500)}}(this)),app.loggedInUser.preferences.timeDefaultBillable(this.billable()))},e.prototype.GetData=function(){var t,e;return null!=this.taskId()?(e=app.prefixApi("tasks/"+this.taskId()+".json?include=taskListNames,projectNames","API_PREFIX_V2","API_PREFIX_V2"),app.api.get(e).then(function(t){return function(e){if(t.task(e.response.task),null!=e.response.projects&&t.projectInfo(e.response.projects[0]),null!=e.response.taskLists)return t.taskListInfo(e.response.taskLists[0])}}(this))):(t=app.prefixApi("projects/"+this.projectId()+".json?formatMarkdown=false","API_PREFIX_V2","API_PREFIX_V2"),app.api.get(t).then(function(t){return function(e){return t.project(e.response.project)}}(this)))},e.prototype.CheckIfAlreadyLogged=function(){var t;return t=parseInt(app.cache.get("last-logged-timer-id"),10),!isNaN(t)&&t===this.id},e.prototype.CheckIfDeleted=function(){var t;return t=parseInt(app.cache.get("last-deleted-timer-id"),10),!isNaN(t)&&t===this.id},e.prototype.CheckIfPaused=function(){var t,e;if((t=app.cache.get("timer"))&&parseInt(t.id,10)===this.id)return e=n(t.startedAt),e.isSame(this.startedAt())&&!t.running&&this.running()?this.Pause(!1):void 0},e.prototype.CheckIfResumed=function(){var t,e;return this.CheckIfAlreadyLogged()||this.CheckIfDeleted()?this.Reset():(t=app.cache.get("timer"))&&parseInt(t.id,10)===this.id?(e=n(t.startedAt),e.isAfter(this.startedAt())&&t.running&&!this.running()?this.Resume(!1,e):void 0):void 0},e.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()}),clearInterval(this.interval),clearInterval(this.timerCheckInterval),clearInterval(this.resumeCheckInterval)},e}(),{viewModel:s,template:e}}.apply(e,i))&&(t.exports=s)},4366:function(t,e,n){(function(i){var s,o,a=function(t,e){return function(){return t.apply(e,arguments)}},r=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};s=[n(3254),n(3255),n(14),n(1116),n(4465),n(1158),n(245)],void 0!==(o=function(t,e,n,s,o,l,p){var c;return c=function(){function t(t){null==t&&(t={}),this.ajaxData=a(this.ajaxData,this),this.detectLocalStorageTimer=a(this.detectLocalStorageTimer,this),this.removeLocalStorageTimer=a(this.removeLocalStorageTimer,this),this.setCurrentPage=a(this.setCurrentPage,this),this.OnRenderedTimerInfo=a(this.OnRenderedTimerInfo,this),this.OnRenderedTimerForm=a(this.OnRenderedTimerForm,this),this.OnClickMoreOptionsToggle=a(this.OnClickMoreOptionsToggle,this),this.OnClickNextTimersPage=a(this.OnClickNextTimersPage,this),this.OnClickPrevTimersPage=a(this.OnClickPrevTimersPage,this),this.OnClickTimersHeader=a(this.OnClickTimersHeader,this),this.OnTimerExpanded=a(this.OnTimerExpanded,this),this.OnTimerStarted=a(this.OnTimerStarted,this),this.OnNotifyTWEvent=a(this.OnNotifyTWEvent,this),this.timerInfoTippedContent=e,this.subscriptions=[],this.timers=app.timers,this.showMoreOptions=ko.observable(!1),this.subscriptions.push(app.ko.postbox.subscribe("stop-other-timers",this.OnTimerStarted)),this.subscriptions.push(app.ko.postbox.subscribe("collapse-other-timers",this.OnTimerExpanded)),this.subscriptions.push(app.ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent)),this.timerDetails=ko.observable(null),this.showAllTimers=app.loggedInUser.preferences.showAllActiveTimers,this.currentPage=ko.observable(1),this.visiblePageSize=3,t={include:"projects,tasks,tasks.tasklists,tasks.parentTasks"},this.utility=new l,this.utility.AddSparseFields(t,{tasks:"tasklistId,parentTaskId,name",projects:"name"}),this.data=new s(app.prefixApi("me/timers.json","API_PREFIX_V3","API_PREFIX_V3"),{params:t,ItemClass:o,pageSize:100,loadNow:!0,getList:function(t){return function(t){var e;return null!=(null!=(e=t.timers)?e.length:void 0)&&t.timers.forEach(function(e){var n;e.projectId>0&&(e.projectName=t.included.projects[e.projectId].name),e.taskId>0&&(e.taskName=t.included.tasks[e.taskId].name,e.tasklistId=t.included.tasks[e.taskId].tasklistId,e.tasklistName=t.included.tasklists[e.tasklistId].name,e.parentTaskId=t.included.tasks[e.taskId].parentTaskId,e.parentTaskId>0&&null!=t.included.tasks[e.parentTaskId]&&(e.parentTaskName=null!=(n=t.included.tasks[e.parentTaskId])?n.name:void 0))}),t.timers}}(),onLoad:function(t){return function(e){var n;if(n=t.data.list().filter(function(t){return!t.deleted()}),t.setCurrentPage(),t.timers(n),0===n.length)return t.detectLocalStorageTimer()}}(this)}),this.subscriptions.push(this.activeTimers=ko.pureComputed(function(t){return function(){return t.timers().filter(function(t){return!t.deleted()})}}(this))),this.subscriptions.push(this.filteredTimersList=ko.pureComputed(function(t){return function(){var e,n,i;return t.showAllTimers()?(n=(t.currentPage()-1)*t.visiblePageSize,i=n+t.visiblePageSize,t.activeTimers().slice(n,i)):(e=t.activeTimers().filter(function(t){return t.running()}),e.length>0?e:t.activeTimers().slice(0,1))}}(this))),this.subscriptions.push(this.hasMultipleTimers=ko.pureComputed(function(t){return function(){return t.timers().length>1}}(this))),this.subscriptions.push(this.hasRunningTimer=ko.pureComputed(function(t){return function(){return t.timers().filter(function(t){return t.running()}).length>0}}(this))),this.subscriptions.push(this.canLoadNextPage=ko.pureComputed(function(t){return function(){return t.currentPage()*t.visiblePageSize<t.activeTimers().length}}(this))),this.subscriptions.push(this.canLoadPrevPage=ko.pureComputed(function(t){return function(){return t.currentPage()>1}}(this))),this.subscriptions.push(this.sholdShowPagination=ko.pureComputed(function(t){return function(){return t.timers().length>t.visiblePageSize}}(this))),this.subscriptions.push(this.moreOptionsLabel=ko.pureComputed(function(t){return function(){var e;return null==(null!=(e=app.loggedInUser)?e.preferences:void 0)?"":t.showMoreOptions()?app.tl("Show fewer options"):app.tl("Show more options")}}(this)))}return t.prototype.OnNotifyTWEvent=function(t){var e,n,i,s,o,a;"usertimer"===t.itemType.toLowerCase()?this.data.LoadUpdates():"time"===t.itemType&&null!=(null!=(e=t.extraInfo)?e.timerId:void 0)?(this.data.DeleteItemById(t.extraInfo.timerId),this.data.Load()):"task"!==t.itemType||(n=t.actionType)!==app.consts.ACTIONTYPE.UPDATED&&n!==app.consts.ACTIONTYPE.DELETED?(s=t.itemType,r.call("project",s)>=0&&((o=t.actionType)===app.consts.ACTIONTYPE.UPDATED||o===app.consts.ACTIONTYPE.DELETED)&&(a=t.itemId,r.call(this.data.list().map(function(t){return t.projectId()}),a)>=0&&this.data.LoadUpdates())):0!==t.itemId&&(i=t.itemId,r.call(this.data.list().map(function(t){return t.taskId()}),i)>=0)&&this.data.LoadUpdates()},t.prototype.OnMouseEnterLogTimeButton=function(t,e){if(null!=(null!=e?e.currentTarget:void 0))return e.currentTarget.classList.add("btn-success"),e.currentTarget.classList.remove("btn-white")},t.prototype.OnMouseOutLogTimeButton=function(t,e){if(null!=(null!=e?e.currentTarget:void 0))return e.currentTarget.classList.add("btn-white"),e.currentTarget.classList.remove("btn-success")},t.prototype.OnTimerStarted=function(t){var e,n,i,s;for(i=this.timers(),e=0,n=i.length;e<n;e++)s=i[e],s.id()!==t&&(s.running()&&s.updateDuration(),s.running(!1));return this.setCurrentPage()},t.prototype.OnTimerExpanded=function(t){var e,n,i,s,o;for(i=this.timers(),s=[],e=0,n=i.length;e<n;e++)o=i[e],o.id()!==t&&o.isEditing()?s.push(o.isEditing(!1)):s.push(void 0);return s},t.prototype.OnClickTimersHeader=function(t,e){return Tipped.hideAll(),this.setCurrentPage(),this.showAllTimers(!this.showAllTimers())},t.prototype.OnClickPrevTimersPage=function(){this.canLoadPrevPage()&&this.currentPage(this.currentPage()-1)},t.prototype.OnClickNextTimersPage=function(){this.canLoadNextPage()&&this.currentPage(this.currentPage()+1)},t.prototype.OnClickMoreOptionsToggle=function(){this.showMoreOptions(!this.showMoreOptions())},t.prototype.OnRenderedTimerForm=function(t){return setTimeout(function(){return i(t).siblings("form").find("textarea").focus()},200)},t.prototype.OnRenderedTimerInfo=function(t){var e;if((e=ko.dataFor(t))instanceof o)return this.timerDetails(null),app.api.get("timers/"+e.id()+".json?includeDetails=true").then(function(t){return function(e){return t.timerDetails(e.response.timer)}}(this))},t.prototype.setCurrentPage=function(){var t,e,n,i;return t=this.data.list().filter(function(t){return!t.deleted()}),t.length,e=this.visiblePageSize,n=1,i=app.utility.FindIndexByKeyValue(t,"running",!0)+1,i>0&&(n=Math.ceil(i/e)),this.currentPage(n)},t.prototype.removeLocalStorageTimer=function(){var t,e,n;if(null!=(n=null!=(t=app.cache.get("timer"))?t:null))return app.cache.set("timer_bak",n),app.cache.remove("timer"),null!=(null!=(e=app.timer)?e.Reset:void 0)?app.timer.Reset():void 0},t.prototype.detectLocalStorageTimer=function(){var t,e,i,s,o,a,r,l,p;if(p=null!=(s=app.cache.get("timer"))?s:null,e=null!=(o=app.cache.get("lastTimerDesc"))?o:"",null!=p&&null==p.projectId&&this.removeLocalStorageTimer(),null!=(null!=p?p.projectId:void 0)&&!this.timers().length)return this.removeLocalStorageTimer(),p.running?(r=p.seconds,l=n(p.startedAt),i=n().diff(l,"s"),r+=i):r=p.seconds,t={timer:{taskId:null!=(a=p.taskId)?a:0,projectId:p.projectId,description:e,isBillable:p.billable,isRunning:p.running,seconds:r}},app.api.post("me/timers.json",t).then(function(t){return function(e){return t.removeLocalStorageTimer(),ko.postbox.publish("allTWEvents",{eventTime:new Date,actionType:app.consts.ACTIONTYPE.ADDED,itemType:"userTimer",itemId:e.response.id,projectId:p.projectId,taskId:p.taskId})}}(this))},t.prototype.ajaxData=function(t){return{page:t.page,pageSize:50,getSubTasks:!0,nestSubTasks:null==t.term||null!=t.term&&t.term.length<1,include:"taskListNames",sort:"manual",includeCompletedTasks:!1,includeCompletedSubtasks:!1,"filterText[]":t.term}},t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:c,template:t}}.apply(e,s))&&(t.exports=o)}).call(e,n(245))},4402:function(t,e,n){var i,s,o=function(t,e){return function(){return t.apply(e,arguments)}},a=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};i=[n(3298)],void 0!==(s=function(t){var e;return e=function(){function t(t){var e,n,i;null==t&&(t={}),this._checkIfPromptShouldShow=o(this._checkIfPromptShouldShow,this),this.OnClickUpgrade=o(this.OnClickUpgrade,this),this.OnClickTrial=o(this.OnClickTrial,this),this.subscriptions=[],this.data=t.data,this.feature=null!=(e=t.feature)?e:"",this.mode=null!=(n=t.mode)?n:"inline",this.callbacks=null!=(i=t.callbacks)?i:{},this.isRequestingAccess=ko.observable(!1),this.isUpgrading=ko.observable(!1),console.assert(this.feature.length),this.getAssetFromPath=function(t,e){return null==e&&(e="svg"),(window.devMode?"":"//cdn-pjs.teamwork.com")+"/tko/public/assets/"+e+"/upgradepath/"+t},this.subscriptions.push(this.upgradeInfo=ko.pureComputed(function(t){return function(){if(!t._checkIfPromptShouldShow())return null;switch(t.feature.toLowerCase()){case"portfolio":return{image:t.getAssetFromPath("portfolio.svg"),title:app.tl("See the bigger picture with [_s]","Portfolio"),snippet:app.tl("Unlock the [_s] feature to get a big picture view of how your projects are tracking with a free trial of our [_s] plan for [_s] days.","Project Portfolio","Premium","30"),text:app.tl("Whether you need high-level updates, real-time status reports for clients, or a quick way to jump to the details, [_s] gives you a big picture view of where all of your projects stand. Unlock [_s] and more great features with a free trial of our [_s] plan for [_s] days.","Portfolio","Portfolio","Premium","30"),basePlanId:22};case"manageworkloadcapacity":case"viewworkloadcapacity":case"workloadplanner":return{image:t.getAssetFromPath("workload.svg"),title:app.tl("Do more with [_s]","Workload"),snippet:app.tl("Unlock premium [_s] features to help you manage your team's capacity and resource projects more effectively with a free [_s]-day trial of [_s].","Workload","30","Teamwork Premium"),text:app.tl("Use our advanced [_s] feature to view your team's capacity at a glance, better manage your resources, and quickly break down bottlenecks. Try [_s] [_s] free for [_s] days to see first-hand how Workload (and all our other great premium features!) can help your team to do more.","Workload","Teamwork","Premium","30"),basePlanId:22};default:return null}}}(this))),this.subscriptions.push(this.trialHasLapsed=ko.pureComputed(function(t){return function(){return null!=app.account.priceplanTrialData&&app.account.priceplanTrialData.remainingDays()<=0}}()))}return t.prototype.OnClickRequest=function(){var t;if(!this.isRequestingAccess()&&this.upgradeInfo().basePlanId)return t=function(t){return function(e){var n;return t.isRequestingAccess(!0),n={trial:{planId:t.upgradeInfo().basePlanId,feature:t.feature.toLowerCase(),message:e.message}},app.api.post("account/plantrial/request.json",n).then(function(){return app.flash.Success(app.tl("A request has been sent to your administrator"))}).finally(function(){return t.isRequestingAccess(!1)})}}(this),app.modal.Show("contactForm",{title:"Ask My Admin",subtitle:"Send a message to your admin to request this feature",message:"Hey there,\n\nWe can take out a free trial of the Teamwork Premium plan for 30 days to get access to some more advanced features that I think will really help our workflow. (It won't affect our billing!) As an admin, could you log in and enable this?\n\nThanks!",showEmailAddress:!1,showPhoneNumber:!1,modalClass:"m-contact-form--trial-upgrade",stack:!0,onSubmitCallBack:t})},t.prototype.OnClickDismiss=function(){var t,e;if(t=this._getIngoredPrompts(),e=this.feature.toLowerCase(),!(a.call(t,e)>=0))return t.push(this.feature.toLowerCase()),app.account.preferences.ignoredUpgradePrompts(t),null!=this.callbacks.dismiss?this.callbacks.dismiss():void 0},t.prototype.OnClickTrial=function(){var t;if(!this.isUpgrading()&&this.upgradeInfo().basePlanId)return t=function(t){return function(e){var n;e.wasCancelled||(t.isUpgrading(!0),n={trial:{planId:t.upgradeInfo().basePlanId,feature:t.feature.toLowerCase()}},app.api.post("account/plantrial.json",n).then(function(t){return window.location.reload()}).finally(function(){return t.isUpgrading(!1)}))}}(this),app.modal.Show("trialUpgrade",{title:"Try Premium For Free",text:"Want to explore our Premium plan? Try it free for 30 days. This won\u2019t affect your billing and your whole team will have access to Premium features.",stack:!0,onCloseCallBack:t})},t.prototype.OnClickUpgrade=function(){var t;return"perUser"===(null!=(t=app.account)&&"function"==typeof t.priceplanType?t.priceplanType():void 0)?(this.subscriptionRef=ko.observable(null),this.subscriptionRefTime=ko.observable(new Date),app.CheckoutHelper.getCheckoutURL(this.subscriptionRef,this.subscriptionRefTime,"#ref=").then(function(t){return function(t){return document.location.href=t}}())):app.GoTo("settings/subscription")},t.prototype._getIngoredPrompts=function(){return app.account.preferences.ignoredUpgradePrompts().map(function(t){return t.toLowerCase()})},t.prototype._checkIfPromptShouldShow=function(){var t;return!app.featureFlip.check(this.feature)()&&(t=this.feature.toLowerCase(),!(a.call(this._getIngoredPrompts(),t)>=0)&&("peruser"===app.account.priceplanData.type().toLowerCase()&&!!app.loggedInUser.inOwnerCompany()))},t.prototype.dispose=function(){return this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:e,template:t}}.apply(e,i))&&(t.exports=s)},4417:function(t,e,n){var i,s,o=function(t,e){return function(){return t.apply(e,arguments)}},a=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;i=[n(164),n(1134)],void 0!==(s=function(t,e){return function(e){function n(e){this.GetAllData=o(this.GetAllData,this),this.SyncIds=o(this.SyncIds,this);var i;n.__super__.constructor.call(this,e),this.empty=null!=(i=e.empty)&&i,console.assert("boolean"==typeof t.unwrap(this.empty)),this.mapViewIdItems={},this.selectedOption=e.selectedOption,console.assert(null==this.selectedOption||t.isObservable(this.selectedOption)&&Array.isArray(this.selectedOption())),this.availableOptions=e.availableOptions,console.assert(null==this.availableOptions||t.isObservable(this.availableOptions)&&Array.isArray(this.availableOptions())),this.SyncIds(this.selectedOption,this.selectedItems)}return a(n,e),n.prototype.order=app.consts.AUTO_COMPLETE_ORDER.CUSTOM_FIELD_DROPDOWN,n.prototype.excludeSelected=!0,n.prototype.SyncIds=function(e,n){this.ManageView(e,n,{map:function(t){return t.id},mapViewItem:function(e){return function(n){var i;return n in e.mapViewIdItems&&!t.isObservable(e.mapViewIdItems[n])?e.mapViewIdItems[n]:e.mapViewIdItems[n]=null!=(i=e.GetAllData().filter(function(t){return t.id===n})[0])?i:null}}(this)})},n.prototype.GetAllData=function(){return("function"==typeof this.availableOptions?this.availableOptions().length:void 0)?this.availableOptions().map(function(t){return function(e){return t.NormalizeDataItem({id:e.value().toLowerCase(),label:e.value(),value:e.value(),color:e.color(),suggestionTemplate:"<i class='fa fa-circle mr--small' data-bind='style: { color: color }'></i> <span>{{label}}</span>"})}}(this)):[]},n}(e)}.apply(e,i))&&(t.exports=s)},4465:function(t,e,n){var i,s,o=function(t,e){return function(){return t.apply(e,arguments)}};i=[n(164),n(14),n(1117)],void 0!==(s=function(t,e,n){return function(){function i(n){this.OnSelectedProject=o(this.OnSelectedProject,this),this.OnSelectedTask=o(this.OnSelectedTask,this),this.Complete=o(this.Complete,this),this.Undelete=o(this.Undelete,this),this.Delete=o(this.Delete,this),this.Resume=o(this.Resume,this),this.Pause=o(this.Pause,this),this.Toggle=o(this.Toggle,this),this.Save=o(this.Save,this),this.ToggleEdit=o(this.ToggleEdit,this),this.UpdateTime=o(this.UpdateTime,this),this.UpdateInitialPickerValues=o(this.UpdateInitialPickerValues,this),this.UpdateData=o(this.UpdateData,this),this.setupComputedsAndObservables=o(this.setupComputedsAndObservables,this),this.updateDuration=o(this.updateDuration,this),this.componentName="UserTimer",n=this.updateProperties(n),t.mapping.fromJS(n,i.mapping,this),this.isDeleted=t.observable(!1),this.clientServerOffset=e(this.serverTime()).diff(e()),this.setupComputedsAndObservables(),this.UpdateInitialPickerValues(),this.UpdateTime(),this.running.subscribe(function(e){return function(n){if(null!=n)return n?t.postbox.publish("stop-other-timers",e.id()):void 0}}(this)),this.isEditing.subscribe(function(e){return function(n){if(null!=n)return n?t.postbox.publish("collapse-other-timers",e.id()):void 0}}(this)),this.description.extend({rateLimit:{method:"notifyWhenChangesStop",timeout:300}})}return i.prototype.updateDuration=function(){var t,n,i;return n=e().add(this.clientServerOffset,"milliseconds"),i=n.diff(this.lastStartedAt(),"seconds"),t=i+this.duration(),this.duration(t)},i.prototype.updateProperties=function(t){var e;return t.id=parseInt(t.id,10),t.taskId=parseInt(null!=(e=t.taskId)?e:0,10),t.projectId=parseInt(t.projectId,10),t.duration=parseInt(t.duration,10),t.userId=parseInt(t.userId,10),null==t.isEditing&&(t.isEditing=t.id===app.cache.get("expanded-timer-id")),t},i.prototype.setupComputedsAndObservables=function(){if(null!=this.interval&&clearInterval(this.interval),this.running()&&(this.interval=setInterval(this.UpdateTime,1e3)),t.isObservable(this.projectName)||(this.projectName=t.observable("")),t.isObservable(this.taskName)||(this.taskName=t.observable("")),t.isObservable(this.totalTime)||(this.totalTime=t.observable(0)),t.isObservable(this.isUpdating)||(this.isUpdating=t.observable(!1)),t.isObservable(this.showUpdatingLoader)||(this.showUpdatingLoader=t.observable(!1)),t.isObservable(this.isCompleting)||(this.isCompleting=t.observable(!1)),t.isComputed(this.timerTitle)||(this.timerTitle=t.pureComputed(function(t){return function(){return t.taskId()>0?t.taskName():t.projectId()>0?t.projectName():""}}(this))),t.isComputed(this.editToggleTitle)||(this.editToggleTitle=t.pureComputed(function(t){return function(){return t.isEditing()?app.tl("Hide edit details"):app.tl("Show edit details")}}(this))),t.isComputed(this.tasksUrl)||(this.tasksUrl=t.pureComputed(function(t){return function(){return app.prefixApi("projects/"+t.projectId()+"/tasks.json","API_PREFIX_V2","API_PREFIX_V2")}}(this))),t.isComputed(this.formattedTime)||(this.formattedTime=t.pureComputed(function(t){return function(){var e,n,i,s;return 0===(s=t.totalTime())?"00:00:00":(e=Math.floor(s/3600),n=Math.floor((s-3600*e)/60),i=s-3600*e-60*n,e<10&&(e="0"+e),n<10&&(n="0"+n),i<10&&(i="0"+i),e+":"+n+":"+i)}}(this))),!t.isComputed(this.editableProperties))return this.editableProperties=t.pureComputed(function(t){return function(){return{billable:t.billable(),description:t.description(),projectId:t.projectId(),taskId:t.taskId()}}}(this)),this.editableProperties.subscribe(this.Save)},i.prototype.UpdateData=function(e){if(null!=e)return e=this.updateProperties(e),t.mapping.fromJS(e,i.mapping,this),this.setupComputedsAndObservables(),this.UpdateTime()},i.prototype.UpdateInitialPickerValues=function(){return this.initialProjectValue=!this.projectId()>0?null:{id:this.projectId(),text:this.projectName()},this.initialTaskValue=!this.taskId()>0?null:{id:this.taskId(),text:this.taskName()}},i.prototype.UpdateTime=function(){var t;return t=e().add(this.clientServerOffset,"milliseconds"),this.lastStartedAt()>t&&this.lastStartedAt(t),this.running()?this.totalTime(this.duration()+t.diff(this.lastStartedAt(),"seconds")):this.totalTime(this.duration())},i.prototype.ToggleEdit=function(){return this.isEditing(!this.isEditing()),this.isEditing()?app.cache.set("expanded-timer-id",this.id()):app.cache.remove("expanded-timer-id")},i.prototype.Save=function(){var e,n,i,s;if(!this.isUpdating()&&!this.isDeleted())return this.isUpdating(!0),n={timer:{taskId:this.taskId(),projectId:this.projectId(),isBillable:this.billable(),isRunning:this.running(),description:this.description()}},0===this.id()?(i="post",s="me/timers.json",e=app.consts.ACTIONTYPE.ADDED):(i="put",s="me/timers/"+this.id()+".json",e=app.consts.ACTIONTYPE.UPDATED),app.api[i](s,n).then(function(n){return function(s){if("post"===i)return n.id(parseInt(s.response.timerId,10)),t.postbox.publish("allTWEvents",{eventTime:new Date,actionType:e,itemType:"userTimer",itemId:n.id(),projectId:n.projectId(),taskId:n.taskId()})}}(this)).finally(function(t){return function(){return t.isUpdating(!1)}}(this))},i.prototype.Toggle=function(){if(!this.isUpdating()&&!this.isCompleting())return this.running()?this.Pause():this.Resume()},i.prototype.Pause=function(e,i){var s;return null==e&&(e=!1),null==i&&(i=!1),e||this.running()?(this.isUpdating(!0),this.showUpdatingLoader(!0),s=this.duration(),this.updateDuration(),clearInterval(this.interval),this.running(!1),app.api.put("me/timers/"+this.id()+"/pause.json").then(function(e){return function(){if(i)return t.postbox.publish("allTWEvents",{eventTime:new Date,actionType:app.consts.ACTIONTYPE.UPDATED,itemType:"userTimer",itemId:e.id(),projectId:e.projectId()})}}(this)).catch(function(t){return function(e){return t.duration(s),t.running(!0)}}(this)).finally(function(t){return function(){return t.isUpdating(!1),t.showUpdatingLoader(!1)}}(this))):n.resolve()},i.prototype.Resume=function(n){var i,s;if(null==n&&(n=!1),!this.running())return this.isUpdating(!0),this.showUpdatingLoader(!0),this.interval=setInterval(this.UpdateTime,1e3),i=this.lastStartedAt(),s=e().add(this.clientServerOffset,"milliseconds"),this.lastStartedAt(s),this.running(!0),app.api.put("me/timers/"+this.id()+"/resume.json").then(function(e){return function(){if(n)return t.postbox.publish("allTWEvents",{eventTime:new Date,actionType:app.consts.ACTIONTYPE.UPDATED,itemType:"userTimer",itemId:e.id(),projectId:e.projectId()})}}(this)).catch(function(t){return function(e){return t.lastStartedAt(i),t.running(!1)}}(this)).finally(function(t){return function(){return t.isUpdating(!1),t.showUpdatingLoader(!1)}}(this))},i.prototype.Delete=function(){var e,n;n=app.tl("Confirm Delete"),e=app.tl("Are you sure you want to delete this timer?"),app.modal.Show("confirm",{title:n,text:e,callback:function(e){return function(n){if(!n.wasCancelled)return clearInterval(e.interval),app.api.delete("me/timers/"+e.id()+".json").then(function(n){return e.isDeleted(!0),app.flash.Success(app.tl("Timer has been deleted"),{undo:e.Undelete}),t.postbox.publish("allTWEvents",{eventTime:new Date,actionType:app.consts.ACTIONTYPE.DELETED,itemType:"userTimer",itemId:e.id(),projectId:e.projectId()}),Lightbox.close()}).catch(function(t){return console.error(t),app.flash.Error(app.tl("Sorry, this timer wasn't deleted. Please try again."))})}}(this)})},i.prototype.Undelete=function(){return app.flash.Success(""+app.tl("Restoring")+app.localizationPreferences().ellipsis),app.api.put("me/timers/"+this.id()+"/undelete.json").then(function(e){return function(n){return e.isDeleted(!1),app.flash.Success(app.tl("Timer has been restored")),t.postbox.publish("allTWEvents",{eventTime:new Date,actionType:app.consts.ACTIONTYPE.UPDATED,itemType:"userTimer",itemId:e.id(),projectId:e.projectId(),taskId:e.taskId()})}}(this))},i.prototype.Complete=function(){var e,n,i,s;this.isUpdating()||this.isCompleting()||(s=this.running(),this.running(!1),this.isCompleting(!0),i=this.billable()?app.tl("Are you sure you want to stop this timer and log the time as billable?"):app.tl("Are you sure you want to stop this timer and log the time as not billable?"),n=function(e){return function(){return app.api.put("me/timers/"+e.id()+"/complete.json",{}).then(function(n){var i,s,o,a,r,l,p,c;return s=e.projectId(),l=e.taskId(),i=e.duration(),app.flash.Success(app.tl("Time logged successfully")),p=null!=(o=n.response.timeLogId)?o:0,i=null!=(a=n.response.duration)?a:0,c=null!=(r=n.response.timerLastIntervalEnd)?r:0,t.postbox.publish("allTWEvents",{itemId:n.id,itemType:"time",actionType:app.consts.ACTIONTYPE.ADDED,eventTime:new Date,projectId:s,extraInfo:{objectType:"task",objectId:l,timerId:e.id()}}),setTimeout(function(){return app.modal.Show("updateSavedTimer",{id:p,projectId:s,taskId:l,duration:i,timer:e,timerLastIntervalEnd:c})},500)}).finally(function(){return e.isCompleting(!1)}),app.loggedInUser.preferences.timeDefaultBillable(e.billable())}}(this),e=function(t){return function(){return app.modal.Show("confirm",{title:app.tl("Log this Time?"),text:i,callback:function(e){return e.wasCancelled?void t.isCompleting(!1):n()}})}}(this),s?this.Pause(!0,!1).then(e):e())},i.prototype.OnSelectedTask=function(t){return null!=t.type&&"select2:unselect"===t.type?(this.taskId("0"),this.taskName("")):(this.taskId(t.params.data.id),this.taskName(t.params.data.name))},i.prototype.OnSelectedProject=function(t){this.projectId(t.params.data.id),this.projectName(t.params.data.name),this.initialTaskValue=null,this.taskId("0")},i.mapping={dateCreated:{create:function(n){return t.observable(e(n.data,"YYYY-MM-DDTHH:mm:ssZ"))}},dateUpdated:{create:function(n){return t.observable(e(n.data,"YYYY-MM-DDTHH:mm:ssZ"))}},lastStartedAt:{create:function(n){return t.observable(e(n.data,"YYYY-MM-DDTHH:mm:ssZ"))}},dateDeleted:{create:function(n){return t.observable(e(n.data,"YYYY-MM-DDTHH:mm:ssZ"))}},serverTime:{create:function(n){return t.observable(e(n.data,"YYYY-MM-DDTHH:mm:ssZ"))}}},i}()}.apply(e,i))&&(t.exports=s)}});
//# sourceMappingURL=core.2cd9e9e2895252c26cf6.js.map