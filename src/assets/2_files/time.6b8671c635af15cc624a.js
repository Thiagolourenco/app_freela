webpackJsonp([30],{1109:function(t,e,n){t.exports={"modal-addOrEditTimeEntry":Promise.all([n.e(0),n.e(30)]).then(n.bind(null,3635)),"modal-moveTimeLogProject":Promise.all([n.e(0),n.e(30)]).then(n.bind(null,3757)),"section-everything-time":Promise.all([n.e(0),n.e(30)]).then(n.bind(null,3921)),"section-project-time":Promise.all([n.e(0),n.e(30)]).then(n.bind(null,4039)),"section-project-time-header-buttons":Promise.all([n.e(0),n.e(30)]).then(n.bind(null,4038)),"sidebar-project-time":Promise.all([n.e(0),n.e(30)]).then(n.bind(null,4148)),"widget-time-list":Promise.all([n.e(0),n.e(30)]).then(n.bind(null,4358)),"widget-time-filter":Promise.all([n.e(0),n.e(30)]).then(n.bind(null,4356)),"widget-time-totals":Promise.all([n.e(0),n.e(30)]).then(n.bind(null,4359))}},1721:function(t,e,n){var i,s,a=function(t,e){return function(){return t.apply(e,arguments)}};i=[n(1206),n(14)],void 0!==(s=function(t,e){return function(){function t(t){null==t&&(t={}),this.groupTitle=a(this.groupTitle,this),this.timeEntries=function(){if(Array.isArray(t.timeEntries))return ko.observableArray(t.timeEntries);if(ko.isObservable(t.timeEntries)){if(Array.isArray(t.timeEntries()))return t.timeEntries;throw new Error('TimeEntryGroup: "params.timeEntries" must be an Array, an observable containing an Array, or omitted')}return ko.observableArray([])}(),this.subscriptions=[],this.projectId=ko.computed(function(t){return function(){return t.timeEntries().length?t.timeEntries()[0].projectId():0}}(this)),this.subscriptions.push(this.projectId),this.project=ko.computed(function(t){return function(){return t.timeEntries().length?t.timeEntries()[0].projectName():""}}(this)),this.subscriptions.push(this.project),this.company=ko.computed(function(t){return function(){return t.timeEntries().length?t.timeEntries()[0].companyName():""}}(this)),this.subscriptions.push(this.company),this.companyId=ko.computed(function(t){return function(){return t.timeEntries().length?t.timeEntries()[0].companyId():""}}(this)),this.subscriptions.push(this.companyId),this.date=ko.computed(function(t){return function(){return t.timeEntries().length?t.timeEntries()[0].date():e()}}(this)),this.subscriptions.push(this.date),this.user=ko.computed(function(t){return function(){return t.timeEntries().length?t.timeEntries()[0].userName():""}}(this)),this.subscriptions.push(this.user),this.task=ko.computed(function(t){return function(){return t.timeEntries().length?t.timeEntries()[0].taskName():""}}(this)),this.subscriptions.push(this.task),this.tasklist=ko.computed(function(t){return function(){return t.timeEntries().length?t.timeEntries()[0].tasklistName():""}}(this)),this.subscriptions.push(this.tasklist),this.totalLogged=ko.pureComputed(function(t){return function(){var e,n,i,s,a,o;for(a={total:0,minutes:0,hours:0,decimal:0},o=t.timeEntries(),n=i=0,s=o.length;i<s;n=++i)e=o[n],a.total+=e.totalMinutes();return a.minutes=a.total%60,a.hours=Math.floor(a.total/60),a.decimal=(a.total/60).toFixed(2),a.nonRoundDecimal=(Math.floor(a.total/60*100)/100).toFixed(2),a}}(this)),this.totalNonBillable=ko.pureComputed(function(t){return function(){var e,n,i,s,a,o;for(a={total:0,minutes:0,hours:0,decimal:0},o=t.timeEntries(),n=i=0,s=o.length;i<s;n=++i)e=o[n],e.isBillable()||(a.total+=e.totalMinutes());return a.minutes=a.total%60,a.hours=Math.floor(a.total/60),a.decimal=(a.total/60).toFixed(2),a}}(this)),this.totalBillable=ko.pureComputed(function(t){return function(){var e,n,i,s,a,o;for(a={total:0,minutes:0,hours:0,decimal:0},o=t.timeEntries(),n=i=0,s=o.length;i<s;n=++i)e=o[n],e.isBillable()&&(a.total+=e.totalMinutes());return a.minutes=a.total%60,a.hours=Math.floor(a.total/60),a.decimal=(a.total/60).toFixed(2),a}}(this)),this.totalBilled=ko.pureComputed(function(t){return function(){var e,n,i,s,a,o;for(a={total:0,minutes:0,hours:0,decimal:0},o=t.timeEntries(),n=i=0,s=o.length;i<s;n=++i)e=o[n],e.isBilled()&&(a.total+=e.totalMinutes());return a.minutes=a.total%60,a.hours=Math.floor(a.total/60),a.decimal=(a.total/60).toFixed(2),a}}(this)),this.distinctTaskTimers=ko.pureComputed(function(t){return function(){var e,n,i,s,a,o,r;for(o=[],r=[],a=t.timeEntries(),n=i=0,s=a.length;i<s;n=++i)e=a[n],e.taskId()>0&&-1===r.indexOf(e.taskId())&&(o.push(e),r.push(e.taskId()));return o}}(this)),this.totalEstimated=ko.pureComputed(function(t){return function(){var e,n,i,s,a,o;for(a={total:0,minutes:0,hours:0,decimal:0},o=t.distinctTaskTimers(),n=i=0,s=o.length;i<s;n=++i)e=o[n],a.total+=e.taskEstimatedTime();return a.minutes=a.total%60,a.hours=Math.floor(a.total/60),a.decimal=(a.total/60).toFixed(2),a}}(this))}return t.prototype.groupTitle=function(t){var n;switch(n="dddd, DD MMMM",(new e).format("YYYY")!==this.date().format("YYYY")&&(n+=", YYYY"),t){case"project":return this.project()+" ("+this.company()+")";case"date":return this.date().format(n);case"user":return this.user();case"company":return this.company();case"task":return this.timeEntries().length&&0===this.timeEntries()[0].taskId()?app.tl("Not assigned to a task"):this.task();case"tasklist":return this.timeEntries().length&&0===this.timeEntries()[0].taskId()?app.tl("Not assigned to a task"):this.tasklist();default:return this.date().format(n)}},t.prototype.dispose=function(){return this.subscriptions.forEach(function(t){return t.dispose()})},t}()}.apply(e,i))&&(t.exports=s)},2366:function(t,e){t.exports='<div class="sectionFormLightbox m-add-edit-time-entry" data-bind="attr: {id: holderId}">\n\n\t<div class="modal-header">\n\t\t<h2 class="modal-title">{{pageTitle}}</h2>\n\t</div>\n\n\t\x3c!-- ko if: isBilled --\x3e\n\t\t<div class="modal-body">\n\t\t\t<p>{{app.tl(\'This time log entry cannot be modified.\')}}</p>\n\t\t\t<p>\x3c!-- ko html: app.tl(\'It has already been assigned to invoice [_s].\', \'<a href="\' + app.utility.SafeHTML(invoiceUrl) + \'">\' + app.utility.SafeHTML(invoiceNo) + \'</a>\') --\x3e\x3c!-- /ko --\x3e</p>\n\t\t</div>\n\t\t<div class="modal-footer flex">\n\t\t\t<button type="button" class="btn btn-default" data-bind="click:Lightbox.cancel, css:{warning:true}">{{app.tl(\'Close\')}}</button>\n\t\t</div>\n\t\x3c!-- /ko --\x3e\n\n\t\x3c!-- ko ifnot: isBilled --\x3e\n\t\t\x3c!-- ko if: hasTask --\x3e\n\t\t\t<div class="u-modal-info-bar">\n\t\t\t\t<p class="u-modal-info-bar__wrapper">\n\t\t\t\t\t<span class="u-modal-info-bar__label">{{app.tl(\'Task\')}}</span>\n\t\t\t\t\t<span class="u-modal-info-bar__content">{{task().name()}}</span>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\x3c!--/ko--\x3e\n\n\t\t\x3c!-- ko if: hasTask --\x3e\n\t\t\t\x3c!-- ko if: isTaskCompleted() && totalLoggedMins() > 0 --\x3e\n\t\t\t<div class="u-modal-info-bar">\n\t\t\t\t<p class="u-modal-info-bar__wrapper">\n\t\t\t\t\t<strong class="mr--small">{{app.tl(\'Current Time Logged\')}}:</strong>\n\t\t\t\t\t<span class="mr--small">{{totalLoggedText()}}</span>\n\t\t\t\t\t<span class="mr--small">({{app.tl(\'Billable\')}}:</span>\n\t\t\t\t\t<span>{{totalBillableText()}}))</span>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t\x3c!--/ko--\x3e\n\n\t\t<form data-bind="submit: OnSubmit">\n\t\t\t<div class="modal-body">\n\t\t\t\t<div class="form-content form-content--row">\n\t\t\t\t\t\x3c!-- ko if: projectId() > 0 && showWidget --\x3e\n\t\t\t\t\t\t<div class="form-group m-add-edit-time-entry__who-select">\n\t\t\t\t\t\t\t<label title="{{ app.tl(\'Who\') }}">{{ app.tl(\'Who\') }}</label>\n\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\tname: \'widget-available-people-picker\',\n\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\titemType: \'time\',\n\t\t\t\t\t\t\t\t\titemId: parseInt(ko.unwrap(timeEntry.id),10) || 0,\n\t\t\t\t\t\t\t\t\tgroupByCompany: true,\n\t\t\t\t\t\t\t\t\tkoObservable: userId,\n\t\t\t\t\t\t\t\t\tmultiple: !editing,\n\t\t\t\t\t\t\t\t\tprojectId: projectId,\n\t\t\t\t\t\t\t\t\tinitialOptions: [],\n\t\t\t\t\t\t\t\t\tautofocus: false,\n\t\t\t\t\t\t\t\t\tpermission: \'canLogTime\',\n\t\t\t\t\t\t\t\t\tincludeObservers: app.loggedInUser.inOwnerCompany(),\n\t\t\t\t\t\t\t\t\tincludeCollaborators: true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} --\x3e\x3c!--/ko--\x3e\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\tname: \'widget-timeRangeInput\',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tdurationLabel: app.tl(\'Time Spent\'),\n\t\t\t\t\t\t\tstartMoment: startMoment,\n\t\t\t\t\t\t\tendMoment: endMoment,\n\t\t\t\t\t\t\tduration: timeSpent,\n\t\t\t\t\t\t\tminDuration: minDuration,\n\t\t\t\t\t\t\tmaxDuration: maxDuration,\n\t\t\t\t\t\t\tediting: editing\n\t\t\t\t\t\t}\n\t\t\t\t\t} --\x3e\x3c!-- /ko --\x3e\n\n\t\t\t\t\t<div class="form-group form-group--row form-group--inline-input mr--none">\n\t\t\t\t\t\t<input id="m-add-edit-time-entry-billable" data-bind="checked: billable" type="checkbox" />\n\t\t\t\t\t\t<label for="m-add-edit-time-entry-billable" title="{{ app.tl(\'Billable?\') }}">{{ app.tl(\'Billable?\') }}</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="lightBoxTabs">\n\n\t\t\t\t\t\x3c!-- ko component: {name: "ui-simple-tabs", params: { tabs: tabs } } --\x3e\x3c!-- /ko --\x3e\n\n\t\t\t\t\t<div class="tab-pane" data-bind="css: { active: tabs.selCode() == \'description\'}">\n\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t<label>{{app.tl(\'Description\')}}</label>\n\t\t\t\t\t\t\t<textarea id="{{holderId}}DescriptionInput" class="form-control" data-bind="textInput: description"></textarea>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="tab-pane" data-bind="css: { active: tabs.selCode() == \'task\'}">\n\t\t\t\t\t\t\x3c!-- ko if: task --\x3e\n\t\t\t\t\t\t<p class="mb--large">\n\t\t\t\t\t\t\t<span>{{task().name}}</span> <a data-bind="click: OnClickDetachTask, text: \'(\' + app.tl(\'Detach Task\') + \')\'" href="javascript:;"></a>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\x3c!-- ko ifnot: task --\x3e\n\t\t\t\t\t\t<p class="mb--large">\n\t\t\t\t\t\t\t<a data-bind="click: OnClickChooseTask" href="javascript:;">{{app.tl("Choose an Existing Task")}}{{{app.localizationPreferences().ellipsis}}}</a>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="tab-pane" data-bind="css: { active: tabs.selCode() == \'tags\'}">\n\t\t\t\t\t\t<div class="mb--xlarge">\n\t\t\t\t\t\t\t<label>{{app.tl(\'Tags\')}}</label>\n\t\t\t\t\t\t\t<div class="w-tags w-tags--add">\n\t\t\t\t\t\t\t\t\x3c!-- Tags Listing --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- ko component: { name:"widget-tags-list", params:{ item:timeEntry, type:"time", excludeSpecial:true, canEdit:true, autosave: false }}--\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- Add tags --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- ko component: { name:"widget-tags-addIcon", params:{ item:timeEntry, type:"time", projectId:projectId, showText:true, showIcon:true, autosave: false } } --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t\x3c!-- ko if: hasTask && !isTaskCompleted() --\x3e\n\t\t\t\t\t<div>\n\t\t\t\t\t\t\x3c!-- ko if: taskHasDependencies() --\x3e\n\t\t\t\t\t\t\t<div class="form-group form-group--row">\n\t\t\t\t\t\t\t\t<input type="checkbox" disabled="true" name="markComplete">\n\t\t\t\t\t\t\t\t<label>{{app.tl(\'Task cannot be completed. Dependencies Exist.\')}}</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\t\t\x3c!-- ko ifnot: taskHasDependencies() --\x3e\n\t\t\t\t\t\t\t<div class="form-group form-group--row" data-bind="click:function(){taskComplete(!taskComplete()); return true;}">\n\t\t\t\t\t\t\t\t<input type="checkbox" name="markComplete" data-bind="checked:taskComplete()">\n\t\t\t\t\t\t\t\t<label>{{app.tl(\'Task is Now Complete\')}}</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="modal-footer flex">\n\n\t\t\t\t<button type="button" class="btn btn-default mr--medium" data-bind="click: Lightbox.cancel, css:{warning:true}">{{app.tl(\'Close\')}}</button>\n\n\t\t\t\t\x3c!-- ko if: editing--\x3e\n\t\t\t\t<button data-bind="click: OnClickDeleteTimeEntry" type="button" class="btn btn-danger">\n\t\t\t\t\t<span class="fa fa-times"></span>\n\t\t\t\t\t{{app.tl(\'Delete [_s]\', app.tl(\'Entry\') )}}\n\t\t\t\t</button>\n\t\t\t\t<button class="btn btn-default ml--auto mr--small" type="button" data-bind="click: OnClickMoveTimeLog">\n\t\t\t\t\t\t{{app.tl(\'Move to Another Project\')}}\n\t\t\t\t</button>\n\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t<button data-bind="loader: isSubmitting, enable:!isSubmitting()" class="action btn btn-success ml--auto mr--none" >\n\t\t\t\t    {{isSubmitting() ? app.tl(\'Saving\') : ( editing?app.tl(\'Update\') : app.tl(\'Log this Time\') )}}\n\t\t\t\t</button>\n\n\t\t\t</div>\n\t\t</form>\n\n\t\x3c!-- /ko --\x3e\n</div>\n\x3c!-- IMPORTANT - Mark this template loaded --\x3e\n\x3c!-- ko if: $data.readyToShow != null && readyToShow --\x3e\n\t<div data-bind="template:{afterRender:function(){templateLoaded(true)}}" class="hidden"></div>\n\x3c!-- /ko --\x3e\n'},2502:function(t,e){t.exports='<div class="sectionFormLightbox" data-bind="attr:{id:holderId}">\n\t\n\t<div class="modal-header">\n\t\t<h2 class="modal-title">{{app.tl(\'Move Time Entry to Another Project\')}}</h2>\n\t</div>\n\n\t<div class="modal-body">\n\t\t\x3c!-- ko if: hasAttachedTask --\x3e\n\t\t\t<p class="mb--medium ml--medium">{{app.tl(\'The task attached to this time entry will become unattached\')}}</p>\n\t\t\x3c!--/ko--\x3e\n\n\t\t<div class="form-content">\n\t\t\t<div class="form-group">\n\t\t\t\t<label for="projectId" >{{app.tl(\'Project to move the time entry to\')}}:</label>\n\t\t\t\t\x3c!-- ko if: initialProjectLoaded --\x3e\n\t\t\t\t\t<select id="searchSelProjectId" data-bind="select2:{\n\t\t\t\t\t\tvalue:selectedProjectId,\n\t\t\t\t\t\tendpoint:\'time/projects.json?type=featurenabled&skipIds=\'+currentProjectId,\n\t\t\t\t\t\ttextKey:\'name\',\n\t\t\t\t\t\tgroupById:\'companyId\',\n\t\t\t\t\t\tgroupByName:\'companyName\',\n\t\t\t\t\t\tminimumResultsForSearch:10,\n\t\t\t\t\t\tinitialValue: initialProject,\n\t\t\t\t\t\tplaceholder:app.tl(\'Please choose a project\')+app.localizationPreferences().ellipsis\n\t\t\t\t\t}" style="width:100%"></select>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</div>\n\n\t\t\t\x3c!-- ko if: showTaskOption --\x3e\n\t\t\t\t\x3c!-- ko if: tasksLoading --\x3e\n\t\t\t\t\t<i class="fa fa-circle-o-notch fa-spin fa-fw ml--medium mr--medium" ></i>\n\t\t\t\t\t{{app.tl(\'Please wait while we load your tasks\')}}{{{app.localizationPreferences().ellipsis}}}\n\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\x3c!-- ko ifnot: tasksLoading --\x3e\n\t\t\t\t\t\x3c!-- ko if: tasksExist --\x3e\n\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t<label>{{app.tl(\'You can pick a task from the new [_s] to associate this time log with\',\'project\')}}:</label>\n\t\t\t\t\t\t\t<select data-bind="select2:{\n\t\t\t\t\t\t\t\tendpoint: tasksEndpoint,\n\t\t\t\t\t\t\t\tajaxData: tasksAjaxData,\n\t\t\t\t\t\t\t\tresponseType: \'tasks\',\n\t\t\t\t\t\t\t\tplaceholder: app.tl(\'Choose a task\'),\n\t\t\t\t\t\t\t\tselectCallback: OnSelectedTask,\n\t\t\t\t\t\t\t\tdelay: 500\n\t\t\t\t\t\t\t}" style="width:100%"></select>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<p class="form-group form-group--row">\n\t\t\t\t\t\t\t<input type="checkbox" id="time_includeCompleted" data-bind="checked:includeCompletedTasks">\n\t\t\t\t\t\t\t<label for="time_includeCompleted">{{app.tl(\'Include completed tasks\')}}</label>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\t\x3c!-- ko ifnot: tasksExist --\x3e\n\t\t\t\t\t\t<h3 class="mb--none">{{app.tl(\'No Tasks Available\')}}</h3>\n\t\t\t\t\t\t<p>{{app.tl(\'This project doesn\\\'t have any tasks available to choose from\')}}</p>\n\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\x3c!--/ko--\x3e\n\t\t</div>\n\n\t</div>\n\n\t<div class="modal-footer flex">\n\t\t<button type="button" class="btn btn-default" data-bind="click:Lightbox.cancel, css:{warning:canSubmit}">{{app.tl(\'Close\')}}</button>\n\t\t<button type="submit" class="btn btn-success ml--auto mr--none" data-bind="loader:isSubmitting, click:OnSubmit, disable:!canSubmit()">\n\t\t\t{{isSubmitting()?app.tl(\'Moving Time Entry\'):app.tl(\'Move Time Entry\')}}\n\t\t</button>\n\t</div>\n\n</div>\n<span data-bind="template: { afterRender: function(){ OnShow() } }"></span>\n'},2702:function(t,e){t.exports='\n<header class="main-header">\n\t\x3c!-- ko if: projectId == 0 --\x3e\n\t\t<div class="main-header__base">\n\t\t\t<div class="main-header__left">\n\t\t\t\t<h1 class="main-header__title">\n\t\t\t\t\t{{app.tl(\'All Time\')}}\n\t\t\t\t</h1>\n\t\t\t</div>\n\n\t\t\t<div class="main-header__right">\n\t\t\t\t\x3c!-- ko if: app.loggedInUser.userType() === \'account\' --\x3e\n\t\t\t\t\t<button type="button"\n\t\t\t\t\t\tclass="btn btn-success main-header__button mr--small"\n\t\t\t\t\t\tdata-bind="click: OnClickLogTime">\n\t\t\t\t\t\t<i class="fa fa-clock-o fa-lg"></i>\n\t\t\t\t\t\t{{app.tl(\'Log Time\')}}\n\t\t\t\t\t</button>\n\n\t\t\t\t\t<button type="button"\n\t\t\t\t\t\tclass="btn btn-default main-header__button mr--small"\n\t\t\t\t\t\tdata-bind="click: OnClickStartTimer">\n\t\t\t\t\t\t<i class="fa fa-play mr"></i>\n\t\t\t\t\t\t<span>{{app.tl(\'Start Timer\')}}</span>\n\t\t\t\t\t</button>\n\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\x3c!-- ko if: data.state() == \'content\' --\x3e\n\t\t\t\t\t<button type="button"\n\t\t\t\t\tclass="btn btn-default main-header__button tipped-click"\n\t\t\t\t\tdata-bind="tippedDelegate"\n\t\t\t\t\tdata-content="{{tippedExportOptions}}"\n\t\t\t\t\taria-label="Export"\n\t\t\t\t\tdata-tipped-options="\n\t\t\t\t\t\tshowOn: \'click\',\n\t\t\t\t\t\thideOthers: true,\n\t\t\t\t\t\thideOn: \'click\',\n\t\t\t\t\t\thideOnClickOutside: true,\n\t\t\t\t\t\tskin: \'light\',\n\t\t\t\t\t\tpadding: 0,\n\t\t\t\t\t\tshowDelay: 0,\n                        hideAfter: 0,\n                        fadeIn: 120,\n                        fadeOut: 0,\n\t\t\t\t\t\tposition:{\n\t\t\t\t\t\t\ttarget: \'bottommiddle\',\n\t\t\t\t\t\t\ttooltip: \'topmiddle\'\n\t\t\t\t\t\t}">\n\t\t\t\t\t\t<i class="fa fa-fw fa-cloud-download mr--small"></i>\n\t\t\t\t\t\t{{app.tl(\'Export\')}}\n\t\t\t\t\t</button>\n\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\x3c!-- ko if: data.state() == \'content\' && hasActiveFilter() --\x3e\n\t\t\t\t\t<button type="button"\n\t\t\t\t\t\taria-label="More Options"\n\t\t\t\t\t\tclass="btn btn-default main-header__button mr--small tipped-click"\n\t\t\t\t\t\tdata-tipped-options="isTippedParent: true, hideOn:\'click\', hideOnClickOutside:true, inline:\'allTimeOptions\', skin:\'light\', position:\'bottommiddle\', hideOthers:true, showOn:\'click\'">\n\t\t\t\t\t\t<svg class="tipped-hide ma" data-tipped="{{app.tl(\'Options\')}}" width="3" height="13" viewBox="0 0 3 13" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t\t\t<path data-bind="attr: {d: app.consts.SVG.options}" fill-rule="evenodd"/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</button>\n\n\t\t\t\t\t<ul class="tippedMenu" id="allTimeOptions" style="display: none; list-style:none">\n\t\t\t\t\t\t\x3c!-- ko if: invoicedType() != \'invoiced\'  --\x3e\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<a data-bind="click: OnClickBulkEdit" href="javascript:;">\n\t\t\t\t\t\t\t\t\t\t<i class="fa fa-check-square"></i>\n\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Bulk Update Time Logs\')}}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\x3c!-- ko ifnot: app.account.isFreeAccount --\x3e\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<a data-bind="click: OnClickShareFilter" href="javascript:;">\n\t\t\t\t\t\t\t\t\t\t<i class="fa fa-share"></i>\n\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Share Filter\')}}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t</ul>\n\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\tname: \'ui-filterButton\',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\thasActiveFilter: hasActiveFilter\n\t\t\t\t\t\t}\n\t\t\t\t\t} --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</div>\n\t\t</div>\n\t\x3c!-- /ko --\x3e\n\t\x3c!-- ko ifnot: isTemplate --\x3e\n\t\t\x3c!-- ko component: {\n\t\t\t\tname: \'ui-filterInfo\',\n\t\t\t\tparams: {\n\t\t\t\t\tfilter: filters(),\n\t\t\t\t\tnumberOfRecords: totalRecords,\n\t\t\t\t\tmode: \'bar\'\n\t\t\t\t}\n\t\t\t} --\x3e\n\t\t\x3c!-- /ko --\x3e\n\t\x3c!-- /ko --\x3e\n\t\x3c!-- ko if: app.hasFixedSecondaryNav() && projectId == 0 --\x3e\n\t\t<div class="main-header__sticky-filters-gutter"></div>\n\t\x3c!--/ko--\x3e\n\n\t<div class="main-header__secondary"\n\t\tdata-bind="\n\t\t\tcss: {\n\t\t\t\t\'is-fixed\': app.hasFixedSecondaryNav() && projectId == 0\n\t\t\t}">\n\t\t<div class="main-header__left">\n\t\t\t\x3c!-- ko if: (!hasActiveFilter() || (app.hasFixedSecondaryNav() && projectId == 0)) && !isTemplate() --\x3e\n\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\tname: \'ui-filterInfo\',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tfilter: filters(),\n\t\t\t\t\t\t\tnumberOfRecords: totalRecords,\n\t\t\t\t\t\t\tmode: \'inline\',\n\t\t\t\t\t\t\tshowFilterTitle: app.hasFixedSecondaryNav() && projectId == 0\n\t\t\t\t\t\t}\n\t\t\t\t\t} --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</div>\n\n\t\t<div class="main-header__right main-header__secondary-filters ">\n\t\t\t\x3c!-- ko if: data.state() == \'content\' --\x3e\n\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\tname: \'ui-sortOptions\',\n\t\t\t\t\t\tparams:{\n\t\t\t\t\t\t\tsortOptions: sortByOptions,\n\t\t\t\t\t\t\tsortBy: sortBy,\n\t\t\t\t\t\t\tsortOrder: sortOrder\n\t\t\t\t\t\t}\n\t\t\t\t\t} --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\x3c!-- ko if: app.hasFixedSecondaryNav() && projectId == 0 --\x3e\n\t\t\t\t<span class="ml--medium"></span>\n\n\t\t\t\t<button type="button"\n\t\t\t\t\tclass="btn btn-success main-header__button btn-sm mr--small"\n\t\t\t\t\tdata-bind="click: OnClickLogTime">\n\t\t\t\t\t\t<i class="fa fa-clock-o fa-lg fa-btn"></i>\n\t\t\t\t\t\t<span>{{app.tl(\'Log Time\')}}</span>\n\t\t\t\t</button>\n\n\t\t\t\t<button type="button"\n\t\t\t\t\tclass="btn btn-default main-header__button btn-sm mr--small"\n\t\t\t\t\tdata-bind="click: OnClickStartTimer">\n\t\t\t\t\t\t<i class="fa fa-play fa-btn"></i>\n\t\t\t\t\t\t<span>{{app.tl(\'Start Timer\')}}</span>\n\t\t\t\t</button>\n\n\t\t\t\t\x3c!-- ko if: data.state() == \'content\' --\x3e\n\t\t\t\t\t<button type="button"\n\t\t\t\t\t\taria-label="Export"\n\t\t\t\t\t\tclass="btn btn-default main-header__button btn-sm mr--small tipped-click"\n\t\t\t\t\t\tdata-tipped-options="hideOn:\'click\', hideOnClickOutside:true, inline:\'allTimeOptions-sticky_exportOptions\', skin:\'light\', position:\'bottommiddle\', hideOthers:true, showOn:\'click\'">\n\t\t\t\t\t\t\t<i class="fa fa-fw fa-cloud-download fa-btn"></i>\n\t\t\t\t\t\t\t<span>{{app.tl(\'Export\')}}</span>\n\t\t\t\t\t</button>\n\n\t\t\t\t\t<ul class="tippedMenu" id="allTimeOptions-sticky_exportOptions" style="display:none; list-style:none">\n\t\t\t\t\t\t\x3c!-- ko foreach: exportOptions --\x3e\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a href="javascript:;" data-bind="click: click">\n\t\t\t\t\t\t\t\t\t<i class="fa fa-{{icon}}"></i>\n\t\t\t\t\t\t\t\t\t{{label}}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t</ul>\n\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\x3c!-- ko if: data.state() == \'content\' && hasActiveFilter() --\x3e\n\t\t\t\t\t<button type="button"\n\t\t\t\t\t\taria-label="More Options"\n\t\t\t\t\t\tclass="btn btn-default main-header__button btn-sm tipped-click"\n\t\t\t\t\t\tdata-tipped-options="hideOn:\'click\', hideOnClickOutside:true, inline:\'allTimeOptions-sticky\', skin:\'light\', position:\'bottommiddle\', hideOthers:true, showOn:\'click\'">\n\t\t\t\t\t\t<svg class="tipped-hide ma" data-tipped="{{app.tl(\'Options\')}}" width="3" height="13" viewBox="0 0 3 13" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t\t\t<path data-bind="attr: {d: app.consts.SVG.options}" fill-rule="evenodd"/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</button>\n\n\t\t\t\t\t<ul class="tippedMenu" id="allTimeOptions-sticky" style="display: none; list-style:none">\n\t\t\t\t\t\t\x3c!-- ko if: invoicedType() != \'invoiced\'  --\x3e\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<a data-bind="click: OnClickBulkEdit" href="javascript:;">\n\t\t\t\t\t\t\t\t\t\t<i class="fa fa-check-square"></i>\n\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Bulk Update Time Logs\')}}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t\t\x3c!-- ko ifnot: app.account.isFreeAccount --\x3e\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<a data-bind="click: OnClickShareFilter" href="javascript:;">\n\t\t\t\t\t\t\t\t\t\t<i class="fa fa-share"></i>\n\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Share Filter\')}}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t\t\t</ul>\n\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\tname: \'ui-filterButton\',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\thasActiveFilter: hasActiveFilter,\n\t\t\t\t\t\t\tbuttonClasses: [\'btn-sm\']\n\t\t\t\t\t\t}\n\t\t\t\t\t} --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</div>\n\t</div>\n</header>\n\n<div>\n\n\t\x3c!-- ko if: data.state() == \'loading\' --\x3e\n\t\t\x3c!-- ko component: { name: \'list-state-loading-new\', params: { itemType: \'time\'} } --\x3e\x3c!-- /ko --\x3e\n\t\x3c!-- /ko --\x3e\n\t\x3c!-- ko if: data.state() == \'error\' --\x3e\n\t\t\x3c!-- ko component: {name: \'list-state-error\', params:{itemType: \'time\', onTryAgainAction: data.TryLoadAgain, errorStatus: data.APIErrorStatus}} --\x3e\x3c!-- /ko --\x3e\n\t\x3c!-- /ko --\x3e\n\t\x3c!-- ko if: data.state() == \'blank\' --\x3e\n\t\t\x3c!-- ko component: {name: \'list-state-blank\', params:{itemType: \'time\', filter: filters, title: blankStateTitle, msg: blankStateMessage, showButton: canLogTime(), onClickButton: OnClickLogTime}} --\x3e\x3c!-- /ko --\x3e\n\t\x3c!-- /ko --\x3e\n\n\n\t<div id="timeReportData">\n\t\t\x3c!-- "Filtered totals" shown below the filter --\x3e\n\t\t\x3c!-- ko if: data.state() == \'content\' --\x3e\n\t\t\t\x3c!-- ko component: {name: \'widget-time-totals\', params:{parent: $data}} --\x3e\x3c!-- /ko --\x3e\n\t\t\x3c!-- /ko --\x3e\n\n\t\t\x3c!-- List the actual time entries --\x3e\n\t\t\x3c!-- ko foreach: timeEntryIncrementalArrays --\x3e\n\t\t\t\x3c!-- ko component: {\n\t\t\t\t\tname: \'widget-time-list\',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\ttimeEntryIncrementalArray: $data,\n\t\t\t\t\t\tgridHeading: true,\n\t\t\t\t\t\tprojectId: $component.projectId,\n\t\t\t\t\t\tselectedCustomColumns: $component.selectedCustomColumns,\n\t\t\t\t\t\tdisplayTotals: $component.canDisplayGroupTotals($index),\n\t\t\t\t\t\tsortBy: $component.sortBy,\n\t\t\t\t\t\tsortOrder: $component.sortOrder\n\t\t\t\t\t}\n\t\t\t\t} --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\t\t\x3c!-- /ko --\x3e\n\t</div>\n\n\t\x3c!-- ko if: !data.isLoading() && timeEntryIncrementalArrays().inSync() --\x3e\n\t\t\x3c!-- ko component: {name: \'widget-loadMore\', params: {dataLoader: data}} --\x3e\x3c!-- /ko --\x3e\n\t\x3c!-- /ko --\x3e\n\n\t\x3c!-- Form for handling PDF/Excel exports --\x3e\n\t<form data-bind="attr: {\n\t\taction: app.account.pdfServerLink\n\t\ttarget: app.isElectron()? \'_self\' : \'_blank\'\n\t}" name="downloadTimeReportForm" id="downloadTimeReportForm" method="post" data-bind="attr:{ target: formUseSelf ? \'_self\' : \'_blank\' }">\n\t\t<input type="hidden" name="action" value="Time_DownloadReport">\n\t\t<input type="hidden" name="reportType">\n\n\t\t<input data-bind="value: exportParams().startDate" type="hidden" name="startDate">\n\t\t<input data-bind="value: exportParams().endDate" type="hidden" name="endDate">\n\n\t\t<input data-bind="value: exportParams().projectId" type="hidden" name="projectId">\n\t\t<input data-bind="value: exportParams().userId" type="hidden" name="userId">\n\t\t<input data-bind="value: exportParams().invoicedType" type="hidden" name="invoicedType">\n\t\t<input data-bind="value: exportParams().billableType" type="hidden" name="billableType">\n\t\t<input data-bind="value: exportParams().sortBy" type="hidden" name="sortBy">\n\t\t<input data-bind="value: exportParams().sortOrder" type="hidden" name="sortOrder">\n\t\t<input data-bind="value: exportParams().tagIds" type="hidden" name="tagIds">\n\t\t<input data-bind="value: exportParams().companyId" type="hidden" name="companyId">\n\t\t<input data-bind="value: exportParams().taskTagIds" type="hidden" name="taskTagIds">\n\t\t<input data-bind="value: exportParams().matchAllTags" type="hidden" name="matchAllTags">\n\t\t<input data-bind="value: exportParams().projectsFromCompanyId" type="hidden" name="projectsFromCompanyId">\n\t\t<input data-bind="value: exportParams().projectStatus" type="hidden" name="projectStatus">\n\t\t<input data-bind="value: exportParams().onlyStarredProjects" type="hidden" name="onlyStarredProjects">\n\t\t<input data-bind="value: exportParams().includeArchivedProjects" type="hidden" name="includeArchivedProjects">\n\n\t\t<input data-bind="value: exportParams().selectedColumns" type="hidden" name="selectedColumns">\n\n\t\t<input type="hidden" name="includeTags" value="true">\n\t</form>\n</div>\n\n\x3c!-- IMPORTANT - Mark this template loaded --\x3e\n\x3c!-- ko if: $data.readyToShow != null && readyToShow --\x3e\n\t<div data-bind="template:{afterRender:function(){templateLoaded(true)}}" class="hidden"></div>\n\x3c!-- /ko --\x3e\n'},2703:function(t,e){t.exports='<div class="w-options-list w-options-list--tipped">\n    <ul class="w-options-list__list" id="allTimeOptions_exportOptions">\n        \x3c!-- ko foreach: exportOptions --\x3e\n            <li>\n                <a class="w-options-list__item" href="javascript:;" data-bind="click: click">\n                    <i class="w-options-list__icon fa fa-{{icon}}"></i>\n                    <span class="w-options-list__text">{{label}}</span>\n                </a>\n            </li>\n        \x3c!-- /ko --\x3e\n    </ul>\n</div>'},2844:function(t,e){t.exports='\x3c!-- ko if: canLogTime --\x3e\n\t<button\n\t\ttype="button"\n\t\tclass="btn btn-success main-header__button mr--small"\n\t\tdata-click="OnClickLogTime">\n\t\t\t<span class="fa fa-clock-o fa-lg"></span>\n\t\t\t{{app.tl(\'Log Time\')}}\n\t</button>\n\n\t<button\n\t\ttype="button"\n\t\tclass="btn btn-white main-header__button mr--small"\n\t\tdata-click="OnClickStartTimer">\n\t\t\x3c!-- ko if: activeProjectTimer --\x3e\n\t\t\t\x3c!-- ko if: activeProjectTimer().running --\x3e\n\t\t\t\t<span class="fa fa-square mr"></span>\n\t\t\t\t{{app.tl(\'Stop Timer\')}}\n\t\t\t\x3c!--/ko--\x3e\n\t\t\t\x3c!-- ko ifnot: activeProjectTimer().running --\x3e\n\t\t\t\t<span class="fa fa-play mr"></span>\n\t\t\t\t{{app.tl(\'Resume Timer\')}}\n\t\t\t\x3c!--/ko--\x3e\n\t\t\x3c!--/ko--\x3e\n\t\t\x3c!-- ko ifnot: activeProjectTimer --\x3e\n\t\t\t<span class="fa fa-play mr"></span>\n\t\t\t{{app.tl(\'Start Timer\')}}\n\t\t\x3c!--/ko--\x3e\n\t</button>\n\n\t<button type="button"\n\t\tclass="btn btn-default main-header__button tipped-click mr--small"\n\t\taria-label="More Options"\n\t\tdata-bind="tippedDelegate"\n\t\tdata-content="{{tippedOptionsContent}}"\n\t\tdata-tipped-options="\n\t\t\tshowOn: \'click\',\n\t\t\thideOn: \'click\',\n\t\t\thideOthers: true,\n\t\t\tskin: \'light\',\n\t\t\thideOnClickOutside: true,\n\t\t\tpadding: false,\n\t\t\tshowDelay: 0,\n\t\t\thideAfter: 0,\n\t\t\tfadeIn: 120,\n\t\t\tfadeOut: 0,\n\t\t\tposition: {\n\t\t\t\ttarget: \'bottommiddle\',\n\t\t\t\ttooltip: \'topright\'\n\t\t\t}">\n\t\t\t<svg class="tipped-hide ma" width="3" height="13" viewBox="0 0 3 13" xmlns="http://www.w3.org/2000/svg" data-tipped="{{app.tl(\'Options\')}}">\n\t\t\t\t<path data-bind="attr: {d: app.consts.SVG.options}" fill-rule="evenodd"/>\n\t\t\t</svg>\n\t</button>\n\x3c!-- /ko --\x3e\n\n\x3c!-- ko ifnot: canLogTime() || isTemplate()  --\x3e\n\t<button type="button"\n\t\taria-label="Export"\n\t\tclass="btn btn-default main-header__button mr--small tipped-click"\n\t\tdata-tipped-options="hideOn:\'click\', hideOnClickOutside:true, inline:\'allTimeOptions_exportOptions\', skin:\'light\', position:\'bottommiddle\', hideOthers:true, showOn:\'click\'">\n\t\t<i class="fa fa-fw fa-cloud-download mr--small"></i>\n\t\t{{app.tl(\'Export\')}}\n\t</button>\n\t<ul class="tippedMenu" id="allTimeOptions_exportOptions" style="display:none; list-style:none">\n\t\t\x3c!-- ko foreach: exportOptions --\x3e\n\t\t\t<li>\n\t\t\t\t<a href="javascript:;" data-bind="click: click">\n\t\t\t\t\t<i class="fa fa-{{icon}}"></i>\n\t\t\t\t\t{{label}}\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t\x3c!-- /ko --\x3e\n\t</ul>\n\x3c!-- /ko --\x3e\n'},2845:function(t,e){t.exports='<div class="w-options-list w-options-list--tipped">\n\t<ul class="w-options-list__list">\n\t\t\x3c!-- ko if: hasActiveFilter() && !app.account.isFreeAccount() && shared().invoicedType() != \'invoiced\' --\x3e\n\t\t\t<li>\n\t\t\t\t<a class="w-options-list__item" data-bind="click: OnClickBulkEdit" href="javascript:;">\n\t\t\t\t\t<i class="w-options-list__icon fa fa-check-square"></i>\n\t\t\t\t\t<span class="w-options-list__text">{{app.tl(\'Bulk Update Time Logs\')}}</span>\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t\x3c!-- /ko --\x3e\n\n\t\t\x3c!-- ko if: hasActiveFilter() && !app.account.isFreeAccount() --\x3e\n\t\t\t<li>\n\t\t\t\t<a class="w-options-list__item" data-bind="click: OnClickShareFilter" href="javascript:;">\n\t\t\t\t\t<i class="w-options-list__icon fa fa-fw fa-share"></i>\n\t\t\t\t\t<span class="w-options-list__text">{{app.tl(\'Share Filter\')}}</span>\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t\x3c!-- /ko --\x3e\n\t\t<li>\n\t\t\t<a class="w-options-list__item" data-bind="click: OnClickMoveTimeLogs" href="javascript:;">\n\t\t\t\t<i class="w-options-list__icon fa fa-fw fa-arrows"></i>\n\t\t\t\t<span class="w-options-list__text">{{app.tl(\'Move Time Logs\')}}</span>\n\t\t\t</a>\n\t\t</li>\n\t\t<li>\n\t\t\t<div class="tipped"\n\t\t\t\tdata-tipped-parent="tippedParent"\n\t\t\t\tdata-tipped-options="\n\t\t\t\t\tinline: \'allTimeOptions_exportOptions\',\n\t\t\t\t\tstacked: true,\n\t\t\t\t\tskin: \'light\',\n\t\t\t\t\thideOn: false,\n\t\t\t\t\thideAfter: 300,\n\t\t\t\t\thideOthers: false,\n\t\t\t\t\tposition: \'left\',\n\t\t\t\t\tshowOn: \'mouseenter\',\n\t\t\t\t\tpadding: false\n\t\t\t\t">\n\t\t\t\t<a class="w-options-list__item" href="javascript:;">\n\t\t\t\t\t<i class="w-options-list__icon fa fa-fw fa-download"></i>\n\t\t\t\t\t<span class="w-options-list__text">{{app.tl(\'Export\')}}</span>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t\t<ul class="w-options-list__list w-options-list__list--hidden" id="allTimeOptions_exportOptions" style="display:none; list-style:none">\n\t\t\t\t\x3c!-- ko foreach: exportOptions --\x3e\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a class="w-options-list__item" href="javascript:;" data-bind="click: click">\n\t\t\t\t\t\t\t<i class="w-options-list__icon fa fa-fw fa-{{icon}}"></i>\n\t\t\t\t\t\t\t<span class="w-options-list__text">{{label}}</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</ul>\n\n\t\t</li>\n\t</ul>\n</div>'},2846:function(t,e){t.exports='\x3c!-- ko if: app.currentRoute().projectTab && app.currentRoute().projectTab == \'time\' --\x3e\n\t<div class="section-everything-time" style="position: relative;">\n\t\t\x3c!-- ko component: {\n\t\t\tname: \'section-everything-time\',\n\t\t\tparams: {\n\t\t\t\tprojectId: projectId\n\t\t\t}\n\t\t} --\x3e\x3c!-- /ko --\x3e\n\t</div>\n\x3c!-- /ko --\x3e\n\n\x3c!-- IMPORTANT - Mark this template loaded --\x3e\n\x3c!-- ko if: $data.readyToShow != null && readyToShow --\x3e\n\t<div data-bind="template:{afterRender:function(){templateLoaded(true)}}" class="hidden"></div>\n\x3c!-- /ko --\x3e\n'},2976:function(t,e){t.exports='\x3c!-- ko if: projectPermissions.viewTimeLog() && !isTemplate() --\x3e\n<div data-bind="onRendered: OnRendered">\n\n\t<div class="app-sidebar__block">\n\t\t<div class="app-sidebar__block-header">\n\t\t\t<h3 class="app-sidebar__block-title no-icon">\n\t\t\t\t{{app.tl(\'Total Time Logged\')}}\n\t\t\t</h3>\n\t\t</div>\n\t\t<div class="app-sidebar__block-content app-sidebar__block-content--expanded">\n\t\t\t<p class="mb--none">{{ totalLoggedText }}</p>\n\t\t</div>\n\t</div>\n\n\t<div class="app-sidebar__block">\n\t\t<div class="app-sidebar__block-header">\n\t\t\t<h3 class="app-sidebar__block-title no-icon">\n\t\t\t\t{{app.tl(\'Total Non-billable Time\')}}\n\t\t\t</h3>\n\t\t</div>\n\t\t<div class="app-sidebar__block-content app-sidebar__block-content--expanded">\n\t\t\t<p class="mb--none">{{ totalNonBillableText }}</p>\n\t\t</div>\n\t</div>\n\n\t<div class="app-sidebar__block">\n\t\t<div class="app-sidebar__block-header">\n\t\t\t<h3 class="app-sidebar__block-title no-icon">\n\t\t\t\t{{app.tl(\'Total Billable Time\')}}\n\t\t\t</h3>\n\t\t</div>\n\t\t<div class="app-sidebar__block-content app-sidebar__block-content--expanded">\n\t\t\t<p class="mb--none">{{ totalBillableText }}</p>\n\t\t</div>\n\t</div>\n\n\t<div class="app-sidebar__block">\n\t\t<div class="app-sidebar__block-header">\n\t\t\t<h3 class="app-sidebar__block-title no-icon">\n\t\t\t\t{{app.tl(\'Total Billed Time\')}}\n\t\t\t</h3>\n\t\t</div>\n\t\t<div class="app-sidebar__block-content app-sidebar__block-content--expanded">\n\t\t\t<p class="mb--none">{{ totalBilledText }}</p>\n\t\t</div>\n\t</div>\n\n\t\x3c!-- ko if: projectPermissions.viewEstimatedTime() --\x3e\n\t\t<div class="app-sidebar__block" data-bind="visible: totalEstimatedLogged().total > 0">\n\t\t\t<div class="app-sidebar__block-header">\n\t\t\t\t<h3 class="app-sidebar__block-title no-icon">\n\t\t\t\t\t{{app.tl(\'Total Estimated Time\')}}\n\t\t\t\t\t<i class="fa fa-info-circle tipped-hide font-size--default cursor--pointer pl--small" style="position: static" data-tipped="{{app.tl(\'Total estimated time only on tasks in this project with time logged against them\')}}" data-tipped-options="maxWidth: 200, skin:\'light\'"></i>\n\t\t\t\t</h3>\n\t\t\t</div>\n\t\t\t<div class="app-sidebar__block-content app-sidebar__block-content--expanded">\n\t\t\t\t<p>{{totalEstimatedLoggedText}}</p>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="app-sidebar__block">\n\t\t\t<div class="app-sidebar__block-header">\n\t\t\t\t<h3 class="app-sidebar__block-title no-icon">\n\t\t\t\t\t{{app.tl(\'Overall Project Estimated Time\')}}\n\t\t\t\t\t<i class="fa fa-info-circle tipped-hide font-size--default cursor--pointer pl--small" style="position: static" data-tipped="{{app.tl(\'Total estimated time on all tasks in this project whether time is logged against them or not\')}}" data-tipped-options="maxWidth: 200, skin:\'light\'"></i>\n\t\t\t\t</h3>\n\t\t\t</div>\n\t\t\t<div class="app-sidebar__block-content app-sidebar__block-content--expanded">\n\t\t\t\t<p class="mb--none">{{ totalEstimatedText }}</p>\n\t\t\t</div>\n\t\t</div>\n\t\x3c!--/ko--\x3e\n</div>\n\x3c!-- /ko --\x3e'},3243:function(t,e){t.exports='<div id="timeReportScale" class="widget-time-filter u-filters-box">\n\t<form id="allTimeReportForm" data-bind="submit: OnSubmitFilter" noChangeTracking>\n\n\t\t<div class="u-filters-box__form" data-bind="css: {tip: displayTip}">\n\n\t\t\t<div class="form-group" data-bind="event: {dblclick:OnDoubleClickWhoLabel}">\n\t\t\t\t<label class="title-label">\n\t\t\t\t\t{{app.tl(\'Who\')}}\n\t\t\t\t</label>\n\n\t\t\t\t\x3c!-- ko if: initialUserValue() && !loadingPerson() --\x3e\n\t\t\t\t\t<select class="form-control" data-bind="select2:{\n\t\t\t\t\t\tvalue: personValue,\n\t\t\t\t\t\tendpoint: peopleUrl,\n\t\t\t\t\t\titemClass: userModel,\n\t\t\t\t\t\thasAvatar: true,\n\t\t\t\t\t\tsort: sort,\n\t\t\t\t\t\tgroupById: \'companyId\',\n\t\t\t\t\t\tgroupByName: \'companyName\',\n\t\t\t\t\t\tminimumResultsForSearch: 10,\n\t\t\t\t\t\tplaceholder: app.tl(\'Select\')+app.localizationPreferences().ellipsis,\n\t\t\t\t\t\tinitialValue: initialUserValue,\n\t\t\t\t\t\tdefaultOptions:[{\n\t\t\t\t\t\t\tid: \'0\',\n\t\t\t\t\t\t\ttext: app.tl(\'Everyone\')\n\t\t\t\t\t\t}]}"\n\t\t\t\t\t\tname="userId" id="{{userElementId}}" style="width: 200px; height:32px;"></select>\n\t\t\t\t\t<span class="hidden" data-bind="onRendered: OnPersonFilterRendered"></span>\n\t\t\t\t\x3c!--/ko--\x3e\n\t\t\t</div>\n\n\t\t\t \x3c!-- ko ifnot: isTemplate --\x3e\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<label class="title-label">\n\t\t\t\t\t\t{{app.tl(\'Date Range\')}}\n\t\t\t\t\t</label>\n\t\t\t\t\t<div class="w-date-range">\n\t\t\t\t\t\t<span class="mx--medium" data-bind="visible: selectedRange() == \'alldates\'">\n\t\t\t\t\t\t\t{{allDatesText}}\n\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\x3c!-- ko if: selectedRange() != \'alldates\' --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\tname: \'widget-dateInput\',\n\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\tdate: startDateText,\n\t\t\t\t\t\t\t\t\t\tdateInputOptions: {\n\t\t\t\t\t\t\t\t\t\t\tallowEmpty: true\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tdisplayShortcuts: false,\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t<span class="w-date-range__divider" data-bind="visible: selectedRange() != \'alldates\'">&mdash;</span>\n\n\t\t\t\t\t\t\x3c!-- ko if: selectedRange() != \'alldates\' --\x3e\n\t\t\t\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\t\t\t\t\tname: \'widget-dateInput\',\n\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\tdate: endDateText,\n\t\t\t\t\t\t\t\t\t\tdateInputOptions: {\n\t\t\t\t\t\t\t\t\t\t\tallowEmpty: true\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tdisplayShortcuts: false,\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} --\x3e\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t<a \tclass="w-date-range__date-dropdown"\n\t\t\t\t\t\t\thref="javascript:;"\n\t\t\t\t\t\t\tdata-bind="tippedDelegate: {\n\t\t\t\t\t\t\t\tonShow: function(c,e){$(e).addClass(\'on\');},\n\t\t\t\t\t\t\t\tafterHide: function(c,e){$(e).removeClass(\'on\');}\n\t\t\t\t\t\t\t}"\n\t\t\t\t\t\t\tdata-content="{{tippedContent}}"\n\t\t\t\t\t\t\tdata-tipped-options="\n\t\t\t\t\t\t\t\tskin:\'light\',\n\t\t\t\t\t\t\t\tshowOn: \'click\',\n\t\t\t\t\t\t\t\tcontainment:false,\n\t\t\t\t\t\t\t\tposition: {\n\t\t\t\t\t\t\t\t\ttarget:\'bottomright\',\n\t\t\t\t\t\t\t\t\ttooltip: \'topright\'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tzIndex:33,\n\t\t\t\t\t\t\t\thideOn: false,\n\t\t\t\t\t\t\t\thideAfter: 300\n\t\t\t\t\t\t\t">\n\t\t\t\t\t\t\t<i class="fa fa-caret-down w-date-range__date-dropdown-icon"></i>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\x3c!-- ko ifnot: projectId() > 0 --\x3e\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<label class="title-label">\n\t\t\t\t\t\t{{app.tl(\'Projects\')}}\n\t\t\t\t\t</label>\n\t\t\t\t\t<select class="form-control" name="projectType" id="projectType" style="width: 160px; height:32px;" data-bind="select2: { data: $component.projectTypes, value:projectType }"></select>\n\t\t\t\t</div>\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\x3c!-- ko if: displayBillableFilter --\x3e\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<label class="title-label">\n\t\t\t\t\t\t{{app.tl(\'Filter\')}}\n\t\t\t\t\t</label>\n\t\t\t\t\t<select class="form-control" name="typeOfTime" id="typeOfTime" style="width: 150px; height:32px;" data-bind="select2: { data: $component.timeTypes, value:billableValue }"></select>\n\t\t\t\t</div>\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\x3c!-- ko if: displayInvoicedFilter && billingEnabled() --\x3e\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<label class="title-label">\n\t\t\t\t\t\t{{app.tl(\'Invoiced\')}}?\n\t\t\t\t\t</label>\n\t\t\t\t\t<select class="form-control" name="invoiced" id="invoiced" style="width: 150px; height:32px;" data-bind="select2: { data: $component.invoiceTypes, value:invoicedValue }"></select>\n\t\t\t\t</div>\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t<div class="form-group">\n\t\t\t\t<label class="title-label">\n\t\t\t\t\t{{app.tl(\'Sort By\')}}\n\t\t\t\t</label>\n\t\t\t\t<select class="form-control" name="sortBy" id="sortBy" style="width:150px; height:32px;" data-bind="select2: { data: $component.sortOptions, value: $component.sortBy }"></select>\n\t\t\t</div>\n\n\t\t\t<div class="form-group">\n\t\t\t\t<label class="title-label">\n\t\t\t\t\t{{app.tl(\'Sort Order\')}}\n\t\t\t\t</label>\n\t\t\t\t<select class="form-control" name="sortOrder" id="sortOrder" style="width:150px; height:32px;" data-bind="select2: { data: $component.sortOrderOpts, value:sortOrder }"></select>\n\t\t\t</div>\n\n\t\t\t\x3c!-- ko if: projectIsActive() --\x3e\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<button data-bind="loader: isSubmitting, disable: isSubmitting()" class="action btn btn-success rhs" >\n\t\t\t\t\t\t{{app.tl(\'Update\')}}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t</div>\n\t</form>\n</div>\n'},3244:function(t,e){t.exports='<ul class="tippedMenu">\n\t<li data-bind="visible: allowAllDates">\n\t\t<a data-bind="click: function(d,e){OnClickDateFilter(\'alldates\')}" href="javascript:;">{{app.tl(\'All Dates\')}}</a>\n\t</li>\n\t<li>\n\t\t<a data-bind="click: function(d,e){OnClickDateFilter(\'yesterday\')}" href="javascript:;">{{app.tl(\'Yesterday\')}}</a>\n\t</li>\n\t<li>\n\t\t<a data-bind="click: function(d,e){OnClickDateFilter(\'today\')}" href="javascript:;">{{app.tl(\'Today\')}}</a>\n\t</li>\n\t<li>\n\t\t<a data-bind="click: function(d,e){OnClickDateFilter(\'thisweek\')}" href="javascript:;">{{thisWeekText}}</a>\n\t</li>\n\t<li>\n\t\t<a data-bind="click: function(d,e){OnClickDateFilter(\'lastweek\')}" href="javascript:;">{{lastWeekText}}</a>\n\t</li>\n\t<li>\n\t\t<a data-bind="click: function(d,e){OnClickDateFilter(\'thismonth\')}" href="javascript:;">{{app.tl(\'This Month\')}}</a>\n\t</li>\n\t<li>\n\t\t<a data-bind="click: function(d,e){OnClickDateFilter(\'lastmonth\')}" href="javascript:;">{{app.tl(\'Last Month\')}}</a>\n\t</li>\n\t<li>\n\t\t<a data-bind="click: function(d,e){OnClickDateFilter(\'last3months\')}" href="javascript:;">{{last3monthsText}}</a>\n\t</li>\n\t<li>\n\t\t<a data-bind="click: function(d,e){OnClickDateFilter(\'last6months\')}" href="javascript:;">{{last6monthsText}}</a>\n\t</li>\n</ul>'},3246:function(t,e){t.exports='<div class="w-time-list {{hiddenColumnClassList}}">\n\t\x3c!-- ko with: timeEntryGroup --\x3e\n\t\t\x3c!-- ko if: $component.showGridHeading --\x3e\n\t\t\t\x3c!-- ko if: $component.sortBy() == \'project\' --\x3e\n\t\t\t\t\x3c!-- ko component: {\n\t\t\t\t\tname: \'ui-project-header\',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tid: projectId(),\n\t\t\t\t\t\tname: project(),\n\t\t\t\t\t\tcompanyName: company(),\n\t\t\t\t\t\tcompanyId: companyId()\n\t\t\t\t\t}\n\t\t\t\t} --\x3e\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\x3c!-- ko ifnot: $component.sortBy() == \'project\' --\x3e\n\t\t\t\t<h4 class="gridHeading subTitle">\n\t\t\t\t\t{{ groupTitle($component.sortBy()) }}\n\t\t\t\t</h4>\n\t\t\t\x3c!-- /ko --\x3e\n\t\t\x3c!-- /ko --\x3e\n\n\t\t<table width="100%" border="0" class="w-time-grid" cellspacing="0" cellpadding="0">\n\t\t\t<tbody>\n\t\t\t\t<tr>\n\t\t\t\t\t\x3c!-- ko if: $component.sortBy() != \'date\' || $component.taskId > 0 --\x3e\n\t\t\t\t\t\t<th class="w-time-grid__date-column" data-time-column="date" width="80">{{app.tl(\'Date\')}}</th>\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\x3c!-- ko if: $component.sortBy() != \'project\' && $component.projectId == 0 --\x3e\n\t\t\t\t\t\t<th data-time-column="project" width="200">{{app.tl(\'Project\')}}</th>\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\x3c!-- ko if: $component.sortBy() != \'user\' --\x3e\n\t\t\t\t\t\t<th data-time-column="whoLoggedTime" width="125">{{app.tl(\'Who\')}}</th>\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t<th data-time-column="descriptionAndTags">{{app.tl(\'Description\')}}</th>\n\n\t\t\t\t\t\x3c!-- ko ifnot: $component.taskId > 0 --\x3e\n\t\t\t\t\t\t<th data-time-column="attachedTaskList" width="200">{{app.tl(\'Task List\')}}</th>\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\x3c!-- ko if: $component.taskId > 0 --\x3e\n\t\t\t\t\t\t<th>{{app.tl(\'Type\')}}</th>\n\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t<th data-time-column="startTime" width="75">{{app.tl(\'Start\')}}</th>\n\t\t\t\t\t<th data-time-column="endTime" width="75">{{app.tl(\'End\')}}</th>\n\t\t\t\t\t<th data-time-column="isEntryBillable" width="70">{{app.tl(\'Billable\')}}</th>\n\t\t\t\t\t<th data-time-column="hasEntryBeenBilled" data-bind="css: { \'hidden\': !$component.billingEnabled() }" width="70">{{app.tl(\'Billed\')}}</th>\n\t\t\t\t\t<th data-time-column="timeTaken" width="105">{{app.tl(\'Time\')}}</th>\n\t\t\t\t\t<th data-time-column="hoursTaken" width="30">{{app.tl(\'Hours\')}}</th>\n\t\t\t\t\t<th width="30">&nbsp;</th>\n\t\t\t\t</tr>\n\n\t\t\t\t\x3c!-- ko foreach: $component.timeEntryIncrementalArray.observable --\x3e\n\t\t\t\t\t<tr class="h-show-hover--parent" data-bind="attr: {\'data-id\': id}, onRendered:$component.OnEntryRendered">\n\t\t\t\t\t\t\x3c!-- ko if: $component.sortBy() != \'date\' || $component.taskId > 0 --\x3e\n\t\t\t\t\t\t\t<td class="w-time-grid__date-column" data-time-column="date" data-bind="attr: {title: app.tl(\'Logged: [_s]\', createdAt.format($component.dateFormat() + \' \' + $component.timeFormat()))}">{{date().format($component.dateFormat())}}</td>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\x3c!-- ko if: $component.sortBy() != \'project\' && $component.projectId == 0 --\x3e\n\t\t\t\t\t\t\t<td data-time-column="project">\n\t\t\t\t\t\t\t\t<a class="text-decoration--underline" data-bind="attr: {href: \'#projects/\' + projectId()}">{{projectName()}}</a>&nbsp;-&nbsp;<a class="text-decoration--underline" data-bind="attr: {href: \'#companies/\' + companyId()}">({{companyName()}})</a>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\x3c!-- ko if: $component.sortBy() != \'user\' --\x3e\n\t\t\t\t\t\t\t<td data-time-column="whoLoggedTime">{{userName}}</td>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t<td data-time-column="descriptionAndTags">\n\t\t\t\t\t\t\t\x3c!-- ko if: taskId --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- ko if: !taskIsSubTask() && !$component.taskId > 0 --\x3e\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t \x3c!-- ko if: taskIsPrivate --\x3e\n\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-lock mr--small"></i>\n\t\t\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Task\')}}:\n\n\t\t\t\t\t\t\t\t\t\t<a class="text-decoration--underline" data-bind="attr: {href: \'#tasks/\' + taskId()}">{{taskName}}</a>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\x3c!-- ko if: ($component.taskId > 0 && taskId() != $component.taskId) || (taskIsSubTask() && !$component.taskId > 0) --\x3e\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t{{app.tl(\'Subtask\')}}: <a class="text-decoration--underline" data-bind="attr: {href: \'#tasks/\' + taskId()}">{{ taskName() + \' (\' + parentTaskName() + \')\' }}</a>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t<div data-bind="visible: (taskId() && $component.taskId == 0) || description().length || !taskId()">\n\t\t\t\t\t\t\t\t<span data-bind="html: $component.FormatDescription($data)"></span>\n\n\t\t\t\t\t\t\t\t\x3c!-- ko ifnot: taskId() || description().length --\x3e\n\t\t\t\t\t\t\t\t\t<small>{{app.tl(\'no description\')}}</small>\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<p class="mb--none">\n\t\t\t\t\t\t\t\t\x3c!-- ko component: {name: \'widget-tags-list\', params:{item: $data, type:\'timelog\', canEdit: canEdit(), enabled: true, canAddTags: (! app.account.tagsLockedToAdmins() || app.loggedInUser.administrator()) }} --\x3e\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\t\x3c!-- ko if: canEdit --\x3e\n\t\t\t\t\t\t\t\t\t\x3c!-- ko component: {name: \'widget-tags-addIcon\', params:{item: $data, type: \'timelog\', projectId: projectId, enabled: true, canAddTags: true}} --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</td>\n\n\t\t\t\t\t\t\x3c!-- ko ifnot: $component.taskId > 0 --\x3e\n\t\t\t\t\t\t\t<td data-time-column="attachedTaskList">\n\t\t\t\t\t\t\t\t\x3c!-- ko if: tasklistId --\x3e\n\t\t\t\t\t\t\t\t\t<a class="text-decoration--underline" data-bind="attr: {href: \'#tasklists/\' + tasklistId()}">{{tasklistName}}</a>\n\t\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\x3c!-- ko if: $component.taskId > 0 --\x3e\n\t\t\t\t\t\t\t<td> {{ $component.taskId == taskId() ? app.tl(\'Current Task\') : app.tl(\'Subtask\') }}</td>\n\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t<td data-time-column="startTime" data-bind="attr: {title: app.tl(\'Logged: [_s]\', createdAt.format($component.dateFormat() + \' \' + $component.timeFormat()))}">\n\t\t\t\t\t\t\t\x3c!-- ko ifnot: hasStartTime --\x3e\n\t\t\t\t\t\t\t\t&mdash;\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\x3c!-- ko if: hasStartTime --\x3e\n\t\t\t\t\t\t\t\t{{ date().format($component.timeFormat()) }}\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t</td>\n\n\t\t\t\t\t\t<td data-time-column="endTime" data-bind="attr: {title: app.tl(\'Logged: [_s]\', createdAt.format($component.dateFormat() + \' \' + $component.timeFormat()))}">\n\t\t\t\t\t\t\t\x3c!-- ko ifnot: hasStartTime --\x3e\n\t\t\t\t\t\t\t\t&mdash;\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\x3c!-- ko if: hasStartTime --\x3e\n\t\t\t\t\t\t\t\t{{ date().clone().add(totalMinutes(), \'minutes\').format($component.timeFormat()) }}\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t</td>\n\n\t\t\t\t\t\t<td data-time-column="isEntryBillable" class="w-time-grid__check">\n\t\t\t\t\t\t\t\x3c!-- ko if: !canEdit() || isBilled() --\x3e\n\t\t\t\t\t\t\t\t<span data-bind="css: {\'fa-check\': isBillable(), \'fa-times\': !isBillable()}" class="fa">&nbsp;</span>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\x3c!-- ko if: canEdit() && !isBilled() --\x3e\n\t\t\t\t\t\t\t\t<a data-bind="click: $component.OnClickToggleBillable" href="javascript:;">\n\t\t\t\t\t\t\t\t\t<span data-bind="css: {\'fa-check\': isBillable(), \'fa-times\': !isBillable()}" class="fa">&nbsp;</span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t</td>\n\n\t\t\t\t\t\t<td data-time-column="hasEntryBeenBilled" class="w-time-grid__check" data-bind="css: { \'hidden\': !$component.billingEnabled() }">\n\t\t\t\t\t\t\t\x3c!-- ko if: $data.project() && $data.project().activePages.billing() == \'1\' --\x3e\n\t\t\t\t\t\t\t\t<span data-bind="css: {\'fa-check\': isBilled(), \'fa-times\': !isBilled()}, attr:{title:invoiceNo}" class="fa">&nbsp;</span>\n\t\t\t\t\t\t\t\x3c!--/ko--\x3e\n\n\t\t\t\t\t\t\t\x3c!-- ko ifnot: $data.project() && $data.project().activePages.billing() == \'1\' --\x3e\n\t\t\t\t\t\t\t\t<div>--</div>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t</td>\n\n\t\t\t\t\t\t<td data-time-column="timeTaken" data-bind="attr: {\'data-time\': totalMinutes}">\n\t\t\t\t\t\t\t\x3c!-- ko if: hours() > 0 --\x3e\n\t\t\t\t\t\t\t\t{{hours}}\n\n\t\t\t\t\t\t\t\t<span>{{app.tl(\'hrs\')}}</span>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\n\t\t\t\t\t\t\t\x3c!-- ko if: minutes() > 0 --\x3e\n\t\t\t\t\t\t\t\t{{minutes}}\n\n\t\t\t\t\t\t\t\t<span>{{app.tl(\'mins\')}}</span>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t</td>\n\n\t\t\t\t\t\t<td data-time-column="hoursTaken" data-bind="attr: {\'data-time\': decimalHours}">{{decimalHours}}</td>\n\n\t\t\t\t\t\t<td class="text-center">\n\t\t\t\t\t\t\t\x3c!-- ko if: canEdit() && !isBilled() --\x3e\n\t\t\t\t\t\t\t\t<a data-bind="click: $component.OnClickEdit" class="fa fa-pencil h-show-hover--child" href="javascript:;"></a>\n\t\t\t\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</tbody>\n\t\t</table>\n\n\t\t\x3c!-- ko if: !($component.taskId > 0) --\x3e\n\t\t\t<div class="w-time-list__totals" data-bind="if: ko.unwrap($component.displayTotals)">\n\t\t\t\t<table class="w-time-list__totals-table" align="right">\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<span>{{app.tl(\'Total\')}}</span>\n\t\t\t\t\t\t\t</td>\n\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<span>{{app.utility.MinutesIntToString(totalLogged().total)}}</span>\n\t\t\t\t\t\t\t</td>\n\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<span>{{totalLogged().decimal}}</span>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\n\t\t\t\t\t\t<tr data-bind="visible: $component.canViewEstimates() && totalEstimated().total > 0">\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<span> {{app.tl(\'Estimated Time\')}} </span>\n\t\t\t\t\t\t\t</td>\n\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<span> {{app.utility.MinutesIntToString(totalEstimated().total)}} </span>\n\t\t\t\t\t\t\t</td>\n\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<span> {{totalEstimated().decimal}} </span>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\n\t\t\t\t\t\t<tr data-bind="visible: totalNonBillable().total > 0">\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<span>{{app.tl(\'Non-billable Time\')}}</span>\n\t\t\t\t\t\t\t</td>\n\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<span>{{app.utility.MinutesIntToString(totalNonBillable().total)}}</span>\n\t\t\t\t\t\t\t</td>\n\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<span>{{totalNonBillable().decimal}}</span>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\n\t\t\t\t\t\t<tr data-bind="visible: totalBillable().total > 0">\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<span>{{app.tl(\'Billable Time\')}}</span>\n\t\t\t\t\t\t\t</td>\n\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<span>{{app.utility.MinutesIntToString(totalBillable().total)}}</span>\n\t\t\t\t\t\t\t</td>\n\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<span>{{totalBillable().decimal}}</span>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\n\t\t\t\t\t\t<tr data-bind="visible: totalBilled().total > 0  && $component.billingEnabled()">\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<span>{{app.tl(\'Billed Time\')}}</span>\n\t\t\t\t\t\t\t</td>\n\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<span>{{app.utility.MinutesIntToString(totalBilled().total)}}</span>\n\t\t\t\t\t\t\t</td>\n\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<span>{{totalBilled().decimal}}</span>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t\x3c!-- /ko --\x3e\n\t\x3c!-- /ko --\x3e\n</div>'},3247:function(t,e){t.exports='<div class="w-time-totals">\n\t<label class="w-time-totals__section">\n\t\t<span class="mr--medium">\n\t\t\t\x3c!-- ko component: { name:\'widget-tip\', params:{ html: app.tl(\'Totals are rounded to the nearest [_s] decimal places\', 2) + \'<a target="_blank" class="ml--small" href="\' + app.consts.HELPDOCS.URL+\'/\'+app.consts.HELPDOCS.EVERYTHING.ROUTE+\'/\'+app.consts.HELPDOCS.EVERYTHING.ARTICLE.TIME_TOTALS + \'"> \'+app.tl(\'More\') +\' </a>\' } } --\x3e\x3c!-- /ko --\x3e\n\t\t</span>\n\n\t\t<strong> {{app.tl(\'Filtered Totals\')}}: </strong>\n\t</label>\n\n\n\t<div class="w-time-totals__section">\n\t\t<label class="w-time-totals__label">{{app.tl(\'Logged\')}}:</label>\n\t\t<span>{{totalLogged}}</span>\n\t</div>\n\n\t\x3c!-- ko if: parent.totalNonBillable().total > 0 --\x3e\n\t\t<div class="w-time-totals__section">\n\t\t\t<label class="w-time-totals__label">{{app.tl(\'Non-billable\')}}:</label>\n\t\t\t<span>{{totalNonBillable}}</span>\n\t\t</div>\n\t\x3c!-- /ko --\x3e\n\n\t\x3c!-- ko if: parent.totalBillable().total > 0 --\x3e\n\t\t<div class="w-time-totals__section">\n\t\t\t<label class="w-time-totals__label">{{app.tl(\'Billable\')}}:</label>\n\t\t\t<span>{{totalBillable}}</span>\n\t\t</div>\n\t\x3c!-- /ko --\x3e\n\n\t\x3c!-- ko if: parent.totalEstimated().total > 0 --\x3e\n\t\t<div class="w-time-totals__section">\n\t\t\t<label class="w-time-totals__label">{{app.tl(\'Estimated\')}}:</label>\n\t\t\t<span>{{totalEstimated}}</span>\n\t\t</div>\n\t\x3c!-- /ko --\x3e\n\n\t\x3c!-- ko if: parent.totalBilled().total > 0 && billingEnabled() --\x3e\n\t\t<div class="w-time-totals__section">\n\t\t\t<label class="w-time-totals__label">{{app.tl(\'Billed\')}}:</label>\n\t\t\t<span>{{totalBilled}}</span>\n\t\t</div>\n\t\x3c!-- /ko --\x3e\n\n\n\t\x3c!-- ko if: app.currentRoute().project && app.currentRoute().project.permissions.canLogTime() && parent.taskId > 0 --\x3e\n\t\t<div class="w-time-totals__action-buttons">\n\t\t\t<button type="button" data-bind="click: parent.OnClickLogTimeOnTask" class="btn btn-success">\n\t\t\t\t<i class="fa fa-clock-o fa-lg"></i>\n\n\t\t\t\t<span> {{app.tl(\'Log More Time\')}} </span>\n\t\t\t</button>\n\t\t</div>\n\t\x3c!-- /ko --\x3e\n</div>'},3635:function(t,e,n){(function(i){var s,a,o=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){return(+t%(e=+e)+e)%e};s=[n(14),n(2366),n(1116),n(1120),n(1188)],void 0!==(a=function(t,e,n,s,a){var l;return l=function(){function e(e){var i,a,r,l;null==e&&(e={}),this.dispose=o(this.dispose,this),this.SubmitEdit=o(this.SubmitEdit,this),this.SubmitAdd=o(this.SubmitAdd,this),this.PrepareData=o(this.PrepareData,this),this.ValidateForm=o(this.ValidateForm,this),this.UndoDelete=o(this.UndoDelete,this),this.createFormattedTime=o(this.createFormattedTime,this),this.OnClickMoveTimeLog=o(this.OnClickMoveTimeLog,this),this.OnClickChooseTask=o(this.OnClickChooseTask,this),this.OnClickDetachTask=o(this.OnClickDetachTask,this),this.OnSubmit=o(this.OnSubmit,this),this.OnClickDeleteTimeEntry=o(this.OnClickDeleteTimeEntry,this),this.OnShow=o(this.OnShow,this),app.InitOnShow(this),this.modalRef=e.modalRef,this.args=this.modalRef.args,this.params=e,this.holderId="addOrEditTimeEntry",this.subscriptions=[],this.maxTimeSpentDuration=app.consts.SERVER.TIME_LOG_MAX_DURATION,this.editing=null!=this.args.timeEntry,this.hasTask=null!=this.args.task,this.isBilled=this.editing&&this.args.timeEntry.isBilled(),this.tabs=[{name:app.tl("Description"),code:"description"},{name:app.tl("Task"),code:"task",enabled:!this.hasTask},{name:app.tl("Tags"),code:"tags",enabled:app.account.tagsEnabled}],this.timeEntry=null!=(a=this.args.timeEntry)?a:{tags:ko.observableArray([])},this.initialTagsArray=this.timeEntry.tags().slice(),this.isBilled?(this.invoiceNo=this.args.timeEntry.invoiceNo(),this.invoiceUrl="#projects/"+this.args.timeEntry.projectId()+"/billing/completed"):(this.invoiceNo="",this.invoiceUrl=""),this.pageTitle=this.isBilled?app.tl("Cannot Edit"):this.hasTask?app.tl("Log Time on Task"):this.editing?app.tl("Edit Logged Time"):app.tl("Log Time"),this.showWidget=ko.observable(!0),this.isSubmitting=ko.observable(!1),this.tabs.selCode=ko.observable(this.tabs[0].code),this.itemId=null!=this.args.timeEntry?this.args.timeEntry.id():0,this.projectId=ko.observable(0),this.task=null!=(i=this.args).task?i.task:i.task=ko.observable(null),ko.isObservable(this.task)||(this.task=ko.observable(this.task)),null!=this.args.projectId?this.projectId(ko.unwrap(this.args.projectId)):this.editing?this.projectId(this.args.timeEntry.projectId()):null!=app.currentRoute().project&&this.projectId(app.currentRoute().project.id()),this.currUserId=app.loggedInUser.id().toString(),this.userId=ko.observable(this.currUserId),this.endMoment=ko.observable(t()),this.minDuration=t.duration(1,"minutes"),this.maxDuration=t.duration(this.maxTimeSpentDuration,"hours"),this.timeSpent=ko.observable(app.loggedInUser.preferences.timeDefaultTimeSpent()),"string"==typeof this.timeSpent()?this.timeSpent(t.duration(30,"minutes")):t.isDuration(this.timeSpent())||this.timeSpent(t.duration(this.timeSpent())),this.startMoment=ko.observable(t().subtract(this.timeSpent().asMinutes(),"minutes")),this.subscriptions.push(this.timeFormat=ko.pureComputed(function(t){return function(){var t;return t=app.loggedInUser.localization.timeFormat(),"HH:MM"===t.toUpperCase()?"HH:mm":"h:mmA"}}())),this.subscriptions.push(this.dateFormat=ko.pureComputed(function(t){return function(){return app.loggedInUser.localization.dateFormat()}}())),this.description=ko.observable(""),this.editing?this.billable=ko.observable(!0):this.billable=ko.observable(app.loggedInUser.preferences.timeDefaultBillable()),this.taskComplete=ko.observable(!1),this.taskHasDependencies=ko.pureComputed(function(t){return function(){var e;return null!=("function"==typeof t.task?t.task():void 0)&&("function"==typeof t.task&&"function"==typeof(e=t.task()).numActiveSubTasks?e.numActiveSubTasks():void 0)>0}}(this)),this.subscriptions.push(this.taskHasDependencies),this.isTaskCompleted=ko.pureComputed(function(t){return function(){var e;return"completed"===("function"==typeof t.task&&"function"==typeof(e=t.task()).status?e.status():void 0)}}(this)),this.subscriptions.push(this.isTaskCompleted),this.totalLoggedMins=ko.pureComputed(function(t){return function(){var e;return null==(null!=(e=t.task())?e.totalTimeLogged:void 0)?0:parseInt(t.task().totalTimeLogged(),10)+parseInt(t.task().totalBillableTimeLogged(),10)}}(this)),this.subscriptions.push(this.totalLoggedMins),this.totalLoggedText=ko.pureComputed(function(t){return function(){return null==t.task()?"":t.createFormattedTime(t.totalLoggedMins(),0)}}(this)),this.subscriptions.push(this.totalLoggedText),this.totalBillableText=ko.pureComputed(function(t){return function(){return null==t.task()?"":t.createFormattedTime(t.task().totalBillableTimeLogged(),0)}}(this)),this.subscriptions.push(this.totalBillableText),this.editing&&(l=this.args.timeEntry,this.userId(l.userId().toString()),this.startMoment(l.date()),this.timeSpent(t.duration(l.totalMinutes(),"minutes")),this.endMoment(this.startMoment().clone().add(this.timeSpent().asMinutes(),"minutes")),this.description(l.description()),this.billable(l.isBillable()),l.taskId()>0&&(r={id:l.taskId(),name:l.taskName()},this.task(r))),this.subscriptions.push(this.peopleUrl=ko.pureComputed(function(t){return function(){return app.prefixApi("projects/"+t.projectId()+"/people.json","API_PREFIX_V2","API_PREFIX_V2")}}(this))),this.people=new n(this.peopleUrl,{ItemClass:s,pagingMode:"pageByPage"}),this.subscriptions.push(this.sortedPeople=ko.pureComputed(function(t){return function(){var e,n,i,s,a,o,r,l,p;for(l=t.people.list(),l.sort(function(e,n){return e.companyId()<n.companyId()?-1:e.companyId()>n.companyId()?1:t.currUserId===parseInt(e.id(),10)?-1:t.currUserId===parseInt(n.id(),10)?1:e.fullName().toLowerCase()<n.fullName().toLowerCase()?-1:e.fullName().toLowerCase()>n.fullName().toLowerCase()?1:0}),e=[],a={},i=o=0,r=l.length;o<r;i=++o)p=l[i],n=p.companyId(),s=a[n],null==s&&(e.push({name:p.companyName(),users:[]}),s=e.length-1,a[n]=s),e[s].users.push(p);return e}}(this))),this.who=ko.observable("")}return e.prototype.OnShow=function(){var t,e,n;Tipped.hideAll(),e=function(t){return function(){return setTimeout(function(){return i("#"+t.holderId+"DescriptionInput").focus()},200)}}(this),t=function(t){return function(e){t.showWidget(!1),t.args.onCloseCallBack&&t.args.onCloseCallBack(e),e.wasCancelled&&t.timeEntry.tags(t.initialTagsArray),app.modals.remove(t.modalRef)}}(this),Lightbox.showBoxByID(this.holderId,820,400,!0,{clickOverlayToClose:!1,onCloseCallBack:t,onShowCallBack:e,stack:null!=(n=this.args.stack)&&n})},e.prototype.OnClickDeleteTimeEntry=function(){var t,e;this.editing&&(e=app.tl("Confirm Delete"),t=app.tl("Delete this time log?"),app.modal.Show("confirm",{title:e,text:t,callback:function(t){return function(e){t.editing&&(e.wasCancelled||app.api.delete("time_entries/"+t.args.timeEntry.id()+".json").then(function(){return app.flash.Success(app.tl("Time entry deleted successfully."),{undo:t.UndoDelete}),ko.postbox.publish("allTWEvents",{itemId:t.args.timeEntry.id(),itemType:"time",actionType:app.consts.ACTIONTYPE.DELETED,eventTime:new Date,extraInfo:{objectId:null!=t.task()?ko.unwrap(t.task().id):0,objectType:"task"},projectId:t.projectId()}),Lightbox.closeAll()}))}}(this)}))},e.prototype.OnSubmit=function(){var t;return!this.isSubmitting()&&(!!this.ValidateForm()&&(this.taskHasDependencies()&&this.taskComplete()&&app.flash.Error(app.tl("Cannot complete task."),app.tl("Dependencies Exist.")),t=this.PrepareData(),this.isSubmitting(!0),this.editing?this.SubmitEdit(t):(this.SubmitAdd(t),app.loggedInUser.preferences.timeDefaultTimeSpent(this.timeSpent()),this.editing||app.loggedInUser.preferences.timeDefaultBillable(this.billable())),!1))},e.prototype.OnClickDetachTask=function(){var t,e;e=app.tl("Confirm"),t=app.tl("Are you sure you want to detach this task from this time log?"),app.modal.Show("confirm",{title:e,text:t,callback:function(t){return function(e){if(!e.wasCancelled)return t.task(null)}}(this)})},e.prototype.OnClickChooseTask=function(){var t;t=function(t){return function(e){return t.task(e)}}(this),app.modal.Show("chooseTask",{projectId:this.projectId(),callback:t,stack:!0})},e.prototype.OnClickMoveTimeLog=function(){var t;t=function(t){return function(t){t.wasCancelled}}(),app.modal.Show("moveTimeLogProject",{timeEntry:this.timeEntry,currentProjectId:this.projectId(),onCloseCallBack:t})},e.prototype.createFormattedTime=function(t,e){var n,i,s;return null==t||["","0",0].indexOf(t)>-1?e:(n=t>=60?Math.floor(t/60):null,t=t>=60?t%60:t,null!=n?(i=n>1?app.tl("hours"):app.tl("hour"),s=t>1?app.tl("minutes"):app.tl("minute"),t>0?n+" "+i+" "+t+" "+s:n+" "+i):t+" "+s)},e.prototype.UndoDelete=function(){return app.flash.Success(app.tl("Restoring")+app.localizationPreferences().ellipsis),app.api.put("trashcan/timelogs/"+this.args.timeEntry.id()+"/restore.json").then(function(t){return function(e){return app.flash.Success(app.tl("Time entry has been restored")),ko.postbox.publish("allTWEvents",{eventTime:new Date,actionType:app.consts.ACTIONTYPE.UPDATED,subType:"time-undeleted",itemType:"time",itemId:t.args.timeEntry.id(),extraInfo:{objectId:null!=t.task()?ko.unwrap(t.task().id):0,objectType:"task"},projectId:t.projectId()})}}(this))},e.prototype.ValidateForm=function(){return this.timeSpent().asMinutes()>=this.minDuration.asMinutes()?parseInt(this.userId(),10)>0||(app.flash.Error(app.tl("Please select a person")),!1):(app.flash.Error(app.tl("Logged time must be a minimum of [_s] minute",this.minDuration.asMinutes())),!1)},e.prototype.PrepareData=function(){var t;return t={"time-entry":{hours:Math.floor(this.timeSpent().asMinutes()/60),minutes:r(this.timeSpent().asMinutes(),60),date:this.startMoment().format("YYYYMMDD"),time:this.startMoment().format("HH:mm"),description:this.description(),isBillable:this.billable(),tagIds:app.tags.getTagIds(this.timeEntry.tags())}},this.task()?t["time-entry"]["todo-item-id"]=ko.unwrap(this.task().id):this.editing&&(t["time-entry"]["todo-item-id"]=0),t},e.prototype.SubmitAdd=function(t){var e,n,i,s,a,o,r;if(!(this.projectId()>0))return app.flash.Error(app.tl("No project ID provided")),!1;for(this.task()&&(a=ko.unwrap(this.task().id)),o=this.task()?"tasks/"+a+"/time_entries.json":"projects/"+this.projectId()+"/time_entries.json",r=this.userId().toString().split(","),e=i=0,s=r.length;i<s;e=++i)n=r[e],t["time-entry"]["person-id"]=n,this.task()&&e===r.length-1&&(t["time-entry"].markTaskComplete=this.taskComplete()),app.api.post(o,t).then(function(e){return function(n){var i,s,a,o,r,l,p;return s=null!=(r=n.response.linkedCardId)?r:0,a=null!=(l=n.response.linkedColumnId)?l:0,o=null!=(p=n.response.linkedColumnName)?p:"",i=n.response.budgetExceeded,app.flash.Success(app.tl("Time logged successfully")),ko.postbox.publish("allTWEvents",{itemId:n.id,itemType:"time",actionType:app.consts.ACTIONTYPE.ADDED,eventTime:new Date,extraInfo:{objectId:t["time-entry"]["todo-item-id"],objectType:"task",data:{cardId:s,columnId:a,columnName:o}},projectId:e.projectId()}),e.taskComplete()&&app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"task",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:ko.unwrap(e.task().id),taskListId:e.args.task.taskListId(),subType:"task-completed",extraInfo:{data:{cardId:s,columnId:a,columnName:o,loggedTimeCompletedTask:!0}}}),null==i||app.loggedInUser.preferences.budgetExceededDontShowAgain()?Lightbox.close():app.modal.Show("budgetExceeded",{exceededData:i})}}(this))},e.prototype.SubmitEdit=function(t){t["time-entry"]["person-id"]=this.userId(),app.api.put("time_entries/"+this.args.timeEntry.id()+".json",t).then(function(e){return function(){var n,i;return app.flash.Success(app.tl("Time log updated successfully.")),i=!1,e.args.timeEntry.isBillable()!==t["time-entry"].isBillable?i=!0:e.args.timeEntry.date().format("YYYYMMDD")!==t["time-entry"].date&&(i=!0),n={itemId:e.args.timeEntry.id(),itemType:"time",actionType:app.consts.ACTIONTYPE.UPDATED,eventTime:new Date,extraInfo:{objectId:ko.unwrap(e.timeEntry.taskId),objectType:"task",validateTimeLogId:i},projectId:e.projectId()},n.extraInfo.objectId!==t["time-entry"]["todo-item-id"]&&(n.extraInfo.data={},n.extraInfo.data.newObjectId=t["time-entry"]["todo-item-id"],n.extraInfo.data.newObjectType="task"),ko.postbox.publish("allTWEvents",n),e.taskComplete()&&app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"task",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:ko.unwrap(e.task().id)}),Lightbox.close()}}(this)).finally(function(t){return function(){return t.isSubmitting(!1)}}(this))},e.prototype.dispose=function(){return this.subscriptions.forEach(function(t){return t.dispose()}),this.people.dispose(),delete this.people},e}(),{viewModel:l,template:e}}.apply(e,s))&&(t.exports=a)}).call(e,n(245))},3757:function(t,e,n){var i,s,a=function(t,e){return function(){return t.apply(e,arguments)}};i=[n(2502)],void 0!==(s=function(t){var e;return e=function(){function t(t){null==t&&(t={}),this.dispose=a(this.dispose,this),this.tasksAjaxData=a(this.tasksAjaxData,this),this.MoveTimeLog=a(this.MoveTimeLog,this),this.OnSelectedTask=a(this.OnSelectedTask,this),this.OnSubmit=a(this.OnSubmit,this),this.modalRef=t.modalRef,this.args=this.modalRef.args,this.holderId="moveTimeLogProject",this.subscriptions=[],this.currentProjectId=this.args.currentProjectId,this.selectedProjectId=ko.observable(0),this.timeEntry=this.args.timeEntry,this.hasAttachedTask=ko.observable(0!==this.timeEntry.taskId()),this.tasksExist=ko.observable(!1),this.tasksLoading=ko.observable(!0),this.showTaskOption=ko.observable(!1),this.selectedTask=ko.observable(null),this.includeCompletedTasks=app.loggedInUser.preferences.chooseTaskIncludeCompleted,this.tasksEndpoint=ko.observable(""),this.subscriptions.push(this.selectedProjectId.subscribe(function(t){return function(e){if(t.selectedTask(null),t.tasksExist(!1),null!==e&&t.canSubmit())return t.tasksExist(!1),t.tasksLoading(!0),t.showTaskOption(!0),t.tasksEndpoint(app.prefixApi("projects/"+ko.unwrap(t.selectedProjectId)+"/tasks.json","API_PREFIX_V2","API_PREFIX_V2")),app.api.get(t.tasksEndpoint()+"?includeCompletedTasks="+t.includeCompletedTasks()+"&dataSet=basic&pageSize=10").then(function(e){return e.response.tasks.length&&t.tasksExist(!0),t.tasksLoading(!1)})}}(this))),this.isSubmitting=ko.observable(!1),this.subscriptions.push(this.canSubmit=ko.pureComputed(function(t){return function(){return 0!==parseInt(t.selectedProjectId(),10)&&(parseInt(t.selectedProjectId(),10)!==t.currentProjectId||(t.showTaskOption(!1),app.flash.Error(app.tl("You can not select the current project of this time entry")),!1))}}(this))),this.lastProjectId=ko.observable(app.loggedInUser.preferences.moveItemLastProjectId()),this.subscriptions.push(this.initialProject=ko.pureComputed(function(t){return function(){var e;if(t.lastProjectId()>0&&t.lastProjectId()!==t.currentProjectId){t.lastProject=ko.observable(null);try{t.lastProject=app.projectInfo.get(t.lastProjectId())}catch(t){}if(t.lastProject()&&"deleted"!==(e=t.lastProject().status())&&"archived"!==e&&app.projectInfo.checkSectionIsActive(t.lastProjectId(),"time"))return{id:t.lastProject().id,text:t.lastProject().name}}return{id:0,text:app.tl("Please select a project")}}}(this))),this.subscriptions.push(this.initialProjectLoaded=ko.pureComputed(function(t){return function(){return!(!t.initialProject()||null==t.initialProject().id)&&(t.selectedProjectId(ko.unwrap(t.initialProject().id)),!0)}}(this)))}return t.prototype.OnShow=function(){var t;t=function(t){return function(e){t.args.onCloseCallBack&&t.args.onCloseCallBack(e),app.modals.remove(t.modalRef)}}(this),Lightbox.showBoxByID(this.holderId,600,500,!0,{clickOverlayToClose:!1,stack:!0,onCloseCallBack:t})},t.prototype.OnSubmit=function(){var t,e;return e=app.tl("Confirm"),t=app.tl("Are you sure you want to move this time entry?"),this.hasAttachedTask()&&(t=app.tl("Are you sure you want to move this time entry? The attached task will be unattached.")),app.modal.Show("confirm",{title:e,text:t,callback:function(t){return function(e){if(!e.wasCancelled)return t.MoveTimeLog()}}(this)}),!1},t.prototype.OnSelectedTask=function(t){return this.selectedTask(t.params.data)},t.prototype.MoveTimeLog=function(){var t,e,n;return!!this.canSubmit()&&(this.isSubmitting(!0),n="time_entries/"+this.timeEntry.id()+"/move_project.json",e=-1,null!=this.selectedTask()&&(e=this.selectedTask().id),t={currentProjectId:this.timeEntry.projectId(),selectedProjectId:this.selectedProjectId(),oldTaskId:this.timeEntry.taskId(),newTaskId:e},app.loggedInUser.preferences.moveItemLastProjectId(this.selectedProjectId()),null!=this.selectedTask()&&(t.newTaskId=this.selectedTask().id),app.api.put(n,t).then(function(t){return function(e){return app.flash.Success(app.tl("Time Entry Moved")),"everything"===app.currentRoute().page?ko.postbox.publish("allTWEvents",{itemType:"time",subType:"move",actionType:app.consts.ACTIONTYPE.UPDATED,eventTime:new Date}):"project"===app.currentRoute().page&&app.GoTo("projects/"+t.selectedProjectId()+"/time"),setTimeout(function(){return Lightbox.closeAll()},150)}}(this)).finally(function(t){return function(){return t.isSubmitting(!1)}}(this)))},t.prototype.tasksAjaxData=function(t){return{page:t.page,pageSize:50,getSubTasks:!0,nestSubTasks:null==t.term||null!=t.term&&t.term.length<1,include:"taskListNames",sort:"manual",includeCompletedTasks:this.includeCompletedTasks(),includeCompletedSubtasks:this.includeCompletedTasks(),"filterText[]":t.term}},t.prototype.dispose=function(){null!=this.subscriptions&&this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:e,template:t}}.apply(e,i))&&(t.exports=s)},3921:function(t,e,n){(function(i){var s,a,o=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(2702),n(2703),n(1206),n(14),n(1116),n(1015),n(1128)],void 0!==(a=function(t,e,n,s,a,r,l){var p;return p=function(){function t(t){var i,p,d,c,u,h,m,f;null==t&&(t={}),this.dispose=o(this.dispose,this),this.canDisplayGroupTotals=o(this.canDisplayGroupTotals,this),this.getEndDate=o(this.getEndDate,this),this.getStartDate=o(this.getStartDate,this),this.SameFilter=o(this.SameFilter,this),this.OnLoaded=o(this.OnLoaded,this),this.SubmitReport=o(this.SubmitReport,this),this.OnClickExport=o(this.OnClickExport,this),this.GenerateFilterParams=o(this.GenerateFilterParams,this),this.getBilledTimeNum=o(this.getBilledTimeNum,this),this.getTypeOfTimeNum=o(this.getTypeOfTimeNum,this),this.getProjectStatusNum=o(this.getProjectStatusNum,this),this.getExportParams=o(this.getExportParams,this),this.GetNonRoundedDecimal=o(this.GetNonRoundedDecimal,this),this.OnClickMoveTimeLogs=o(this.OnClickMoveTimeLogs,this),this.OnGenerateCustomReport=o(this.OnGenerateCustomReport,this),this.OnClickShareFilter=o(this.OnClickShareFilter,this),this.OnClickResetFilters=o(this.OnClickResetFilters,this),this.OnNotifyTWEventQuickAddTime=o(this.OnNotifyTWEventQuickAddTime,this),this.OnClickBulkEdit=o(this.OnClickBulkEdit,this),this.OnClickStartTimer=o(this.OnClickStartTimer,this),this.OnClickLogTime=o(this.OnClickLogTime,this),this.OnNotifyTWEvents=o(this.OnNotifyTWEvents,this),this.subscriptions=[],this.tippedExportOptions=e,this.projectId=(null!=t?t.projectId:void 0)||0,this.filterKey=0===this.projectId?"allTime":"projectTime",this.prefsPrefix=0===this.projectId?"allT":"t",this.mode=app.loggedInUser.preferences[this.prefsPrefix+"imeMode"],this.subscriptions.push(this.filters=r.getFilter(this.filterKey)),this.filterProjectId=0!==this.projectId?ko.observable(this.projectId):this.filters().parameters.projectId,this.projectsFromCompanyId=this.filters().parameters.projectsFromCompanyId,this.projectStatus=this.filters().parameters.projectStatus,this.projectsType=this.filters().parameters.projectsType,this.userFilterMode=this.filters().parameters.userFilterMode,this.onlyStarredProjects=this.filters().parameters.onlyStarredProjects,this.includeArchivedProjects=this.filters().parameters.includeArchivedProjects,this.includesSort=this.filters().includesSort,this.sortBy=this.filters().parameters.sortBy,this.sortOrder=this.filters().parameters.sortOrder,this.sortByPreference=app.loggedInUser.preferences[this.filterKey+"SortBy"],this.sortOrderPreference=app.loggedInUser.preferences[this.filterKey+"SortOrder"],f=function(t){return function(){if(!t.includesSort())return t.sortBy(t.sortByPreference()),t.sortOrder(t.sortOrderPreference())}}(this),this.subscriptions.push(this.isTemplate=ko.pureComputed(function(t){return function(){return null!=app.currentRoute().project&&app.currentRoute().project.isTemplate()}}())),this.subscriptions.push(this.totalRecords=ko.pureComputed(function(t){return function(){return t.data.serverFilteredList().length}}(this))),this.subscriptions.push(this.includesSort.subscribe(f)),this.subscriptions.push(this.sortBy.subscribe(this.sortByPreference)),this.subscriptions.push(this.sortOrder.subscribe(this.sortOrderPreference)),f(),null!=(null!=(i=app.currentRoute().queryParams)?i.userid:void 0)&&this.filters().parameters.userIds([app.currentRoute().queryParams.userid]),this.userIds=this.filters().parameters.userIds,this.filterCompanyId=this.filters().parameters.companyId,this.tagIds=this.filters().parameters.tagIds,this.matchAllTags=this.filters().parameters.matchAllTags,this.invoicedType=this.filters().parameters.invoicedType,this.billableType=this.filters().parameters.billableType,this.tagsType=this.filters().parameters.tagsType,null==(null!=(p=app.currentRoute().queryParams)?p.startdate:void 0)&&null==(null!=(d=app.currentRoute().queryParams)?d.enddate:void 0)&&null==(null!=(c=app.currentRoute().queryParams)?c.userid:void 0)||this.filters().parameters.dateCode("custom"),this.dateCode=this.filters().parameters.dateCode,this.dateCustomInterval=this.filters().parameters.dateCustomInterval,null!=(null!=(u=app.currentRoute().queryParams)?u.startdate:void 0)&&this.filters().parameters.startDate(s(app.currentRoute().queryParams.startdate,"YYYYMMDD")),this.startDate=this.filters().parameters.startDate,null!=(null!=(h=app.currentRoute().queryParams)?h.enddate:void 0)&&this.filters().parameters.endDate(s(app.currentRoute().queryParams.enddate,"YYYYMMDD")),this.endDate=this.filters().parameters.endDate,null!=(null!=(m=app.currentRoute().queryParams)?m.includearchivedprojects:void 0)&&this.filters().parameters.includeArchivedProjects(app.currentRoute().queryParams.includearchivedprojects),this.selectedCustomColumns=this.filters().parameters.selectedColumns,this.hasActiveFilter=this.filters().active,this.sortByOptions=ko.observableArray([{id:"user",text:app.tl("Who Logged Time?")},{id:"date",text:app.tl("Date")},{id:"task",text:app.tl("Task")},{id:"tasklist",text:app.tl("Task List")}]),"allTime"===this.filterKey&&(this.sortByOptions.push({id:"project",text:app.tl("Project")}),this.sortByOptions.push({id:"company",text:app.tl("Company")})),this.subscriptions.push(this.updatesAtBottom=ko.pureComputed(function(t){return function(){return"desc"===t.sortOrder()&&"date"===t.sortBy()}}(this))),this.subscriptions.push(this.formattedStartDate=ko.pureComputed(this.getStartDate)),this.subscriptions.push(this.formattedEndDate=ko.pureComputed(this.getEndDate)),this.subscriptions.push(this.canLogTime=ko.pureComputed(function(t){return function(){var e;return!t.isTemplate()&&(!!app.loggedInUser.administrator()||null!=app.currentRoute().project&&(e=app.currentRoute().project.permissions,e.projectAdministrator()||e.canLogTime()))}}(this))),this.subscriptions.push(this.blankStateMessage=ko.pureComputed(function(t){return function(){return t.isTemplate()?app.tl("Time cannot be logged on a project template."):t.hasActiveFilter()?0===ko.unwrap(t.projectId)?app.tl("There was no time logged to match your search."):app.tl("There was no time logged to match your search. Add the first time entry by clicking the button below."):t.canLogTime()?app.tl("There is no time logged. Add the first time entry by clicking the button below."):app.tl("There is no time logged.")}}(this))),this.subscriptions.push(this.blankStateTitle=ko.pureComputed(function(t){return function(){return t.isTemplate()?app.tl("No Time Entries."):t.hasActiveFilter()?app.tl("No Time Entries Found"):app.tl("No Time Entries Yet")}}(this))),this.subscriptions.push(this.url=ko.pureComputed(function(t){return function(){return null!=app.currentRoute().project?app.prefixApi("projects/"+app.currentRoute().project.id()+"/time_entries.json","API_PREFIX_V2","API_PREFIX_V2"):app.prefixApi("time.json","API_PREFIX_V2","API_PREFIX_V2")}}())),this.clientSort=new l("everything-time",{sortBy:this.sortBy,sortOrder:this.sortOrder,sortOptions:this.sortByOptions}),this.data=new a(this.url,{ItemClass:n,pageSize:100,initNumPagesToLoad:2,filter:{generateFilterParams:this.GenerateFilterParams},sort:this.clientSort.sort}),this.data.on("loaded",this.OnLoaded),this.subscriptions.push(app.ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvents)),this.subscriptions.push(app.ko.postbox.subscribe("quickly-log-time-added",this.OnNotifyTWEventQuickAddTime)),this.subscriptions.push(app.ko.postbox.subscribe("time-generate-custom-report",this.OnGenerateCustomReport)),this.subscriptions.push(app.ko.postbox.subscribe("project-time-move-time-logs",this.OnClickMoveTimeLogs)),this.subscriptions.push(this.exportParams=ko.pureComputed(this.getExportParams)),this.exportOptions=[{label:app.tl("to [_s]","PDF"),click:function(t){return function(){return t.OnClickExport("pdf")}}(this),icon:"file-pdf-o"},{label:app.tl("to [_s]","Excel"),click:function(t){return function(){return t.OnClickExport("excel")}}(this),icon:"file-excel-o"},{label:app.tl("to [_s]","CSV"),click:function(t){return function(){return t.OnClickExport("csv")}}(this),icon:"table"}],this.subscriptions.push(app.currentRoute.subscribe(function(t){return function(e){if(null!=e&&("everything"===e.page&&"time"===e.everythingPageTab||"reporting"===e.page&&"time"===e.reportingPageTab))return t.data.Load()}}(this))),this.subscriptions.push(this.timeEntryArrays=ko.pureComputed(function(t){return function(){var e,n,i,s,a,o,r;for(e=t.data.list(),r=[],a=null,i=n=0,s=e.length;n<s;i=++n)o=e[i],t.SameFilter(o,a)||r.push([]),r[r.length-1].push(o),a=o;return r}}(this))),this.subscriptions.push(this.timeEntryIncrementalArrays=this.timeEntryArrays.extend({incrementalArray:null})),this.totalLoggedMins=ko.observable(0),this.totalLogged=ko.pureComputed(function(t){return function(){return{total:t.totalLoggedMins(),decimal:(t.totalLoggedMins()/60).toFixed(2)}}}(this)),this.subscriptions.push(this.totalLogged),this.totalNonBillableMins=ko.observable(0),this.totalNonBillable=ko.pureComputed(function(t){return function(){return{total:t.totalNonBillableMins(),decimal:(t.totalNonBillableMins()/60).toFixed(2)}}}(this)),this.subscriptions.push(this.totalNonBillable),this.totalBillableMins=ko.observable(0),this.totalBillable=ko.pureComputed(function(t){return function(){return{total:t.totalBillableMins(),decimal:(t.totalBillableMins()/60).toFixed(2)}}}(this)),this.subscriptions.push(this.totalBillable),this.totalBilledMins=ko.observable(0),this.totalBilled=ko.pureComputed(function(t){return function(){return{total:t.totalBilledMins(),decimal:(t.totalBilledMins()/60).toFixed(2)}}}(this)),this.subscriptions.push(this.totalBilled),this.totalEstimatedMins=ko.observable(0),this.totalEstimated=ko.pureComputed(function(t){return function(){return{total:t.totalEstimatedMins(),decimal:(t.totalEstimatedMins()/60).toFixed(2)}}}(this)),this.subscriptions.push(this.totalEstimated),this.dateFormat=ko.pureComputed(function(t){return function(){return app.loggedInUser.localization.dateFormat().toUpperCase()}}()),this.subscriptions.push(this.dateFormat),this.timeFormat=ko.pureComputed(function(t){return function(){var t;return t=app.loggedInUser.localization.timeFormat(),"HH:MM"===t.toUpperCase()?"HH:mm":"h:mmA"}}()),this.subscriptions.push(this.timeFormat),this.subscriptions.push(this.shared=app.shared.get("viewModel/"+this.filterKey)),this.shared(this),app.InitOnShow(this)}return t.prototype.OnNotifyTWEvents=function(t){var e;if("time"===t.itemType){if(null==(null!=(e=this.data)?e.options:void 0))return;this.data.LoadUpdates().then(function(e){return function(n){var i,s;if(null!=t.itemId&&null!=(null!=(i=t.extraInfo)?i.validateTimeLogId:void 0)&&t.extraInfo.validateTimeLogId&&(s="",null!=(null!=n?n.timeEntries:void 0)?s="timeEntries":null!=(null!=n?n["time-entries"]:void 0)&&(s="time-entries"),""!==s&&-1===app.utility.FindIndexByKeyValue(n[s],"id",t.itemId,!0)))return e.data.DeleteItemById(t.itemId)}}(this))}else"billinginvoice"===t.itemType&&t.actionType===app.consts.ACTIONTYPE.DELETED&&this.data.LoadUpdates()},t.prototype.OnClickLogTime=function(){0===this.projectId?app.modal.Show("allTimeLogTime",{}):app.modal.Show("addOrEditTimeEntry",{})},t.prototype.OnClickStartTimer=function(){return app.modal.Show("addOrEditTimer",{})},t.prototype.OnClickBulkEdit=function(){var t;t=this.data.options.filter.generateFilterParams(),t.invoicedType="noninvoiced",app.modal.Show("bulkUpdateTimeLogs",{dataParams:t})},t.prototype.OnNotifyTWEventQuickAddTime=function(t){null==t&&(t={}),this.data.Load({loadingMode:app.consts.LOADINGMODE.UPDATES})},t.prototype.OnClickResetFilters=function(){this.RemoveQString(),this.filters().Clear()},t.prototype.OnClickShareFilter=function(){this.filters().Share()},t.prototype.OnGenerateCustomReport=function(t){this.selectedCustomColumns(t.selectedColumns)},t.prototype.OnClickMoveTimeLogs=function(t,e){return app.modal.Show("moveTimelogs",{timeEntries:ko.observableArray(this.data.list().filter(function(t){return!t.isBilled()})),projectId:this.projectId,onCloseCallBack:function(t){return function(){return t.data.Load()}}(this)})},t.prototype.GetNonRoundedDecimal=function(t){return(Math.floor(100*t)/100).toFixed(2)},t.prototype.RemoveQString=function(){app.hasher.changed.active=!1,app.hasher.setHash(app.hasher.getHash().replace(/\?.*/,"")),app.hasher.changed.active=!0},t.prototype.getExportParams=function(){var t;return t={projectId:0!==this.projectId?ko.observable(this.projectId):this.filterProjectId().toString(),companyId:"company"===this.userFilterMode()&&("function"==typeof this.filterCompanyId?this.filterCompanyId():void 0)?this.filterCompanyId().toString():"0",userId:"user"===this.userFilterMode()&&("function"==typeof this.userIds?this.userIds():void 0)?this.userIds().toString():"0",sortBy:this.sortBy(),sortOrder:this.sortOrder(),billableType:this.billableType(),invoicedType:this.invoicedType(),startDate:this.formattedStartDate(),endDate:this.formattedEndDate(),selectedColumns:this.selectedCustomColumns(),onlyStarredProjects:null!=this.onlyStarredProjects&&this.onlyStarredProjects(),includeArchivedProjects:this.includeArchivedProjects()},null!=this.tagIds()&&this.tagIds().length&&(t[this.tagsType()]=this.tagIds().toString()),t.matchAllTags=this.matchAllTags(),t.projectsFromCompanyId=null!=this.projectsType&&"company"===this.projectsType()&&("function"==typeof this.projectsFromCompanyId?this.projectsFromCompanyId():void 0)&&this.projectsFromCompanyId().length?this.projectsFromCompanyId().toString():"0",t.projectStatus=("function"==typeof this.projectStatus?this.projectStatus():void 0)?this.projectStatus():"",t},t.prototype.getProjectStatusNum=function(t){switch(t){case"all":return 0;case"active":return 1;case"archived":return 2}},t.prototype.getTypeOfTimeNum=function(t){switch(t){case"all":return 0;case"billable":return 1;case"nonbillable":return 2}},t.prototype.getBilledTimeNum=function(t){switch(t){case"all":return 0;case"invoiced":return 1;case"noninvoiced":return 2}},t.prototype.GenerateFilterParams=function(){var t;return this.isQuickView||"everything"===app.currentRoute().page&&"time"===app.currentRoute().everythingPageTab||"reporting"===app.currentRoute().page&&"time"===app.currentRoute().reportingPageTab||"project"===app.currentRoute().page&&"time"===app.currentRoute().projectTab?(t={},t.getTotals=!0,t.projectId=("function"==typeof this.filterProjectId?this.filterProjectId():void 0)?this.filterProjectId().toString():"0",t.companyId="company"===this.userFilterMode()&&("function"==typeof this.filterCompanyId?this.filterCompanyId():void 0)?this.filterCompanyId().toString():"0",t.userId="user"===this.userFilterMode()&&("function"==typeof this.userIds?this.userIds():void 0)?this.userIds().toString():"0",t.invoicedType=this.invoicedType(),t.billableType=this.billableType(),t.fromDate=this.formattedStartDate(),t.toDate=this.formattedEndDate(),t.sortBy=this.sortBy(),t.sortOrder=this.sortOrder(),null!=this.onlyStarredProjects&&(t.onlyStarredProjects=this.onlyStarredProjects()),t.includeArchivedProjects=this.includeArchivedProjects(),null!=this.tagIds()&&this.tagIds().length&&(t[this.tagsType()]=this.tagIds().toString()),t.matchAllTags=this.matchAllTags(),t.projectStatus=("function"==typeof this.projectStatus?this.projectStatus():void 0)?this.projectStatus():"",("function"==typeof this.projectsType?this.projectsType():void 0)&&"any"!==this.projectsType()&&(t.projectsFromCompanyId=("function"==typeof this.projectsFromCompanyId?this.projectsFromCompanyId():void 0)&&this.projectsFromCompanyId().length?this.projectsFromCompanyId().toString():"0"),t):-1},t.prototype.OnClickExport=function(t){if(-1!==["pdf","excel","csv"].indexOf(t))return this.SubmitReport(t)},t.prototype.SubmitReport=function(t){var e,n,a;if(null!=t){if(app.featureFlip.check("reporting")())return"excel"===t&&(t="xls"),n=this.getExportParams(),null!=n.startDate&&""===n.startDate?delete n.startDate:n.startDate=s(n.startDate).format("YYYY-MM-DD"),null!=n.endDate&&""===n.endDate?delete n.endDate:n.endDate=s(n.endDate).format("YYYY-MM-DD"),null==n.projectId||""!==n.projectId&&"0"!==n.projectId||delete n.projectId,"0"===n.projectsFromCompanyId&&delete n.projectsFromCompanyId,null!=n.userId&&"0"!==n.userId&&(n.assignedToUserIds=n.userId),null!=n.companyId&&"0"!==n.companyId&&(n.assignedToCompanyIds=n.companyId),null!=n.sortBy&&(n.orderBy=n.sortBy),null!=n.sortOrder&&(n.orderMode=n.sortOrder),n.selectedColumns=n.selectedColumns.toString(),a=app.prefixApi("time."+t+"?"+i.param(n),"API_PREFIX_V3","API_PREFIX_V3"),window.open(a,"_blank"),!1;if(e=i("#downloadTimeReportForm"),e.length)return e.find('input[name="reportType"]').val(t),e.submit(),!1}},t.prototype.OnLoaded=function(t,e,n){var i,s,a,o,r;this.totalLoggedMins(parseInt(null!=(i=n.getResponseHeader("X-Total-Mins-Sum"))?i:0,10)),this.totalNonBillableMins(parseInt(null!=(s=n.getResponseHeader("X-Non-billable-Mins-Sum"))?s:0,10)),this.totalBillableMins(parseInt(null!=(a=n.getResponseHeader("X-Billable-Mins-Sum"))?a:0,10)),this.totalBilledMins(parseInt(null!=(o=n.getResponseHeader("X-Billed-Mins-Sum"))?o:0,10)),this.totalEstimatedMins(parseInt(null!=(r=n.getResponseHeader("X-Task-Estimated-Mins-Sum"))?r:0,10)),ko.postbox.publish("time-entries-loaded")},t.prototype.SameFilter=function(t,e){var n,i;if(null==e)return!1;switch(this.sortBy()){case"date":return n=t.date().clone().startOf("day"),i=e.date().clone().startOf("day"),i.isSame(n);case"user":return t.userId()===e.userId();case"company":return t.companyId()===e.companyId();case"task":return t.taskId()===e.taskId();case"tasklist":return t.tasklistId()===e.tasklistId();case"project":return t.projectId()===e.projectId()}return!1},t.prototype.getStartDate=function(){var t;switch(this.dateCode()){case"anytime":return"";case"custom":return null!=this.startDate()?this.startDate().format("YYYYMMDD"):"";default:return t=app.utility.GetDatesFromRange(this.dateCode(),"YYYYMMDD",this.dateCustomInterval()),t.startDate}},t.prototype.getEndDate=function(){var t;switch(this.dateCode()){case"anytime":return"";case"custom":return null!=this.endDate()?this.endDate().format("YYYYMMDD"):"";default:return t=app.utility.GetDatesFromRange(this.dateCode(),"YYYYMMDD",this.dateCustomInterval()),t.endDate}},t.prototype.canDisplayGroupTotals=function(t){return ko.pureComputed(function(e){return function(){var n;return t()<e.timeEntryArrays().length-1||!(null!=(n=e.data)?n.currentPaginator().hasMoreRecords():void 0)}}(this))},t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()}),this.data.dispose(),delete this.data},t}(),{viewModel:p,template:t}}.apply(e,s))&&(t.exports=a)}).call(e,n(245))},4038:function(t,e,n){(function(i){var s,a,o=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(2844),n(2845),n(1015)],void 0!==(a=function(t,e,n){var s;return s=function(){function t(t){this.SubmitReport=o(this.SubmitReport,this),this.OnClickExport=o(this.OnClickExport,this),this.OnClickMoveTimeLogs=o(this.OnClickMoveTimeLogs,this),this.OnClickStartTimer=o(this.OnClickStartTimer,this),this.OnClickBulkEdit=o(this.OnClickBulkEdit,this),this.OnClickLogTime=o(this.OnClickLogTime,this),this.OnClickShareFilter=o(this.OnClickShareFilter,this),this.subscriptions=[],this.tippedOptionsContent=e,this.subscriptions.push(this.shared=app.shared.get("viewModel/projectTime")),this.subscriptions.push(this.project=ko.pureComputed(function(t){return function(){if(null!=app.currentRoute().projectId)return app.projectInfo.get(app.currentRoute().projectId)()}}())),this.subscriptions.push(this.isTemplate=ko.pureComputed(function(t){return function(){var e;return null!=(e=t.project())?e.isTemplate():void 0}}(this))),this.subscriptions.push(this.canLogTime=ko.pureComputed(function(t){return function(){return(!app.currentRoute().project||!app.currentRoute().project.isTemplate())&&(null!=t.project()&&t.project().permissions.canLogTime())}}(this))),this.subscriptions.push(this.filters=n.getFilter("projectTime")),this.hasActiveFilter=this.filters().active,this.subscriptions.push(this.activeProjectTimer=ko.pureComputed(function(t){return function(){var t;return t=app.timers().filter(function(t){return parseInt(t.projectId(),10)===app.projectId()&&0===parseInt(t.taskId(),10)}),t.length>0?t[0]:null}}())),this.subscriptions.push(this.dataLoader=ko.computed(function(t){return function(){var e;return null==(null!=(e=t.shared())?e.data:void 0)?null:t.shared().data}}(this))),this.subscriptions.push(this.totalRecords=ko.pureComputed(function(t){return function(){return null==t.dataLoader()?0:t.dataLoader().totalRecords()}}(this))),this.exportOptions=[{label:app.tl("to [_s]","PDF"),click:function(t){return function(){return t.OnClickExport("pdf")}}(this),icon:"file-pdf-o"},{label:app.tl("to [_s]","Excel"),click:function(t){return function(){return t.OnClickExport("excel")}}(this),icon:"file-excel-o"},{label:app.tl("to [_s]","CSV"),click:function(t){return function(){return t.OnClickExport("csv")}}(this),icon:"table"}]}return t.prototype.OnClickShareFilter=function(){return this.filters().Share()},t.prototype.OnClickLogTime=function(){return app.modal.Show("addOrEditTimeEntry",{})},t.prototype.OnClickBulkEdit=function(){var t;app.projectId()>0&&(t=this.dataLoader().options.filter.generateFilterParams(),t.projectId=app.projectId(),t.invoicedType="noninvoiced",app.modal.Show("bulkUpdateTimeLogs",{dataParams:t,projectId:app.projectId()}))},t.prototype.OnClickStartTimer=function(){var t;return null!=this.activeProjectTimer()?this.activeProjectTimer().Toggle():(t={timer:{projectId:app.currentRoute().projectId,isBillable:app.loggedInUser.preferences.timeDefaultBillable()}},app.api.post("me/timers.json",t).then(function(t){return function(t){var e;return e=t.response.id,ko.postbox.publish("allTWEvents",{eventTime:new Date,actionType:app.consts.ACTIONTYPE.ADDED,itemType:"userTimer",itemId:e,projectId:app.currentRoute().projectId,taskId:0})}}()))},t.prototype.OnClickMoveTimeLogs=function(t,e){ko.postbox.publish("project-time-move-time-logs")},t.prototype.OnClickExport=function(t){if(-1!==["pdf","excel","csv"].indexOf(t))return this.SubmitReport(t)},t.prototype.SubmitReport=function(t){var e;if(null!=t&&(e=i("#downloadTimeReportForm"),e.length))return e.find('input[name="reportType"]').val(t),e.submit(),!1},t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:s,template:t}}.apply(e,s))&&(t.exports=a)}).call(e,n(245))},4039:function(t,e,n){var i,s,a=function(t,e){return function(){return t.apply(e,arguments)}};i=[n(2846),n(1206),n(14),n(1116),n(1015)],void 0!==(s=function(t,e,n,i,s){var o;return o=function(){function t(t){null==t&&(t={}),this.dispose=a(this.dispose,this),this.subscriptions=[],this.projectId=app.currentRoute().projectId,app.InitOnShow(this)}return t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:o,template:t}}.apply(e,i))&&(t.exports=s)},4148:function(t,e,n){(function(i){var s,a,o=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(2976)],void 0!==(a=function(t){var e;return e=function(){function t(t){null==t&&(t={}),this.dispose=o(this.dispose,this),this.MapToObservable=o(this.MapToObservable,this),this.GetData=o(this.GetData,this),this.getFormattedTime=o(this.getFormattedTime,this),this.OnNotifyTWEvents=o(this.OnNotifyTWEvents,this),this.OnRendered=o(this.OnRendered,this),this.projectId=app.currentRoute().projectId,this.projectPermissions=app.currentRoute().project.permissions,this.totalLogged=ko.observable({}),this.totalNonBillable=ko.observable({}),this.totalBillable=ko.observable({}),this.totalBilled=ko.observable({}),this.totalEstimatedLogged=ko.observable({}),this.totalEstimated=ko.observable({}),this.subscriptions=[],this.subscriptions.push(app.ko.postbox.subscribe("allTWEvents",this.OnNotifyTWEvents)),this.subscriptions.push(this.totalLoggedText=ko.pureComputed(function(t){return function(){return t.getFormattedTime(t.totalLogged().total)}}(this))),this.subscriptions.push(this.totalNonBillableText=ko.pureComputed(function(t){return function(){return t.getFormattedTime(t.totalNonBillable().total)}}(this))),this.subscriptions.push(this.totalBillableText=ko.pureComputed(function(t){return function(){return t.getFormattedTime(t.totalBillable().total)}}(this))),this.subscriptions.push(this.totalBilledText=ko.pureComputed(function(t){return function(){return t.getFormattedTime(t.totalBilled().total)}}(this))),this.subscriptions.push(this.totalEstimatedLoggedText=ko.pureComputed(function(t){return function(){return t.getFormattedTime(t.totalEstimatedLogged().total)}}(this))),this.subscriptions.push(this.totalEstimatedText=ko.pureComputed(function(t){return function(){return t.getFormattedTime(t.totalEstimated().total)}}(this))),this.project=app.projectInfo.get(this.projectId),this.subscriptions.push(this.isTemplate=ko.pureComputed(function(t){return function(){var e;return null!=(e=t.project())?e.isTemplate():void 0}}(this))),this.subscriptions.push(this.billingEnabled=ko.pureComputed(function(t){return function(){var e;return null!=t.project()&&1===parseInt(null!=(e=t.project())?e.activePages.billing():void 0,10)}}(this))),this.subscriptions.push(app.currentRoute.subscribe(function(t){return function(){var e,n;if(null!=(e=app.currentRoute())&&null!=(n=e.project)&&"function"==typeof n.id&&n.id()&&"project"===app.currentRoute().page&&"time"===app.currentRoute().projectTab)return t.GetData()}}(this))),this.GetData()}return t.prototype.minuteText=app.tl("minute"),t.prototype.minutesText=app.tl("minutes"),t.prototype.hourText=app.tl("hour"),t.prototype.hoursText=app.tl("hours"),t.prototype.noneText=app.tl("None"),t.prototype.OnRendered=function(t){},t.prototype.OnNotifyTWEvents=function(t){"time"===t.itemType&&("time-bulkUpdated"!==t.subType&&("time-moved"!==t.subType||parseInt(t.projectId,10)!==this.projectId&&parseInt(t.extraInfo.objectId,10)!==this.projectId)&&parseInt(t.projectId,10)!==this.projectId||this.GetData())},t.prototype.getFormattedTime=function(t){return app.utility.MinutesIntToString(t,{zeroVal:app.tl("None"),showDays:!1})},t.prototype.GetData=function(t){var e,n;return e=this,n=this.projectId>0?"projects/"+app.currentRoute().project.id()+"/time_entries/total.json":"time_entries/total.json",i.getJSON(n,function(t){return function(t,n,i){var s,a;if(null!=(a=t.projects)?a.length:void 0)return s=t.projects[0],e.MapToObservable(e.totalLogged,s["time-totals"]["total-mins-sum"]),e.MapToObservable(e.totalNonBillable,s["time-totals"]["non-billable-mins-sum"]),e.MapToObservable(e.totalBillable,s["time-totals"]["billable-mins-sum"]),e.MapToObservable(e.totalBilled,s["time-totals"]["billed-mins-sum"]),e.MapToObservable(e.totalEstimatedLogged,s["time-estimates"].totalWithTimeLoggedEstimatedMins),e.MapToObservable(e.totalEstimated,s["time-estimates"]["total-mins-estimated"])}}()).fail(function(t){return function(t,e){return app.error.Ajax(t)}}())},t.prototype.MapToObservable=function(t,e){var n,i,s;return n=null!=(s=parseInt(e,10))?s:0,i={total:n,minutes:n%60,hours:Math.floor(n/60),decimal:(n/60).toFixed(2)},t(i)},t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:e,template:t}}.apply(e,s))&&(t.exports=a)}).call(e,n(245))},4356:function(t,e,n){var i,s,a=function(t,e){return function(){return t.apply(e,arguments)}};i=[n(164),n(14),n(245),n(3243),n(3244)],void 0!==(s=function(t,e,n,i,s){var o;return o=function(){function i(i){var o,r,l,p,d;null==i&&(i={}),this.dispose=a(this.dispose,this),this.GetDatesFromRange=a(this.GetDatesFromRange,this),this.InitEndDate=a(this.InitEndDate,this),this.InitStartDate=a(this.InitStartDate,this),this.SavePrefs=a(this.SavePrefs,this),this.ToJSON=a(this.ToJSON,this),this.GetUserFilterObject=a(this.GetUserFilterObject,this),this.EndDateChanged=a(this.EndDateChanged,this),this.StartDateChanged=a(this.StartDateChanged,this),this.SortByFullName=a(this.SortByFullName,this),this.OnSubmitFilter=a(this.OnSubmitFilter,this),this.OnClickDateFilter=a(this.OnClickDateFilter,this),this.OnDoubleClickWhoLabel=a(this.OnDoubleClickWhoLabel,this),this.OnPersonFilterRendered=a(this.OnPersonFilterRendered,this),this.subscriptions=[],this.userElementId="WidgetTimeFilter-userId-"+Math.floor(1e6*Math.random()),this.userElementSelector="#"+this.userElementId,this.OnSubmitFilterCallback=i.OnSubmitFilterCallback,this.projectId=t.observable(null!=app.currentRoute().project?app.currentRoute().project.id():0),this.subscriptions.push(this.project=t.pureComputed(function(e){return function(){return 0===e.projectId()?null:t.unwrap(app.projectInfo.get(e.projectId()))}}(this))),this.sortOrderOpts=[{id:"asc",text:app.tl("Ascending")},{id:"desc",text:app.tl("Descending")}],null!=i.sortOptions?this.sortOptions=i.sortOptions:(this.sortOptions=[{id:"date",text:app.tl("Date")},{id:"company",text:app.tl("Company")},{id:"user",text:app.tl("User")}],this.projectId()>0?this.sortOptions.push({id:"task",text:app.tl("Task")},{id:"tasklist",text:app.tl("Task List")}):this.sortOptions.unshift({id:"project",text:app.tl("Project")})),this.subscriptions.push(this.isTemplate=t.pureComputed(function(t){return function(){var e;return"function"==typeof t.project&&null!=(e=t.project())?e.isTemplate():void 0}}(this))),this.allowAllDates=null!=(o=i.allowAllDates)&&o,this.allDatesText=null!=(r=i.allDatesText)?r:app.tl("All Dates"),null!=i.preferencePrefix?this.prefPrefix=i.preferencePrefix:this.prefPrefix=this.projectId()>0?"project":"everything",this.selectedRange=t.observable(app.loggedInUser.preferences[this.prefPrefix+"TimeFilterSelectedRange"]()),this.isTemplate()&&(this.allowAllDates=!0,this.selectedRange("alldates"),this.sortOptions=this.sortOptions.filter(function(t){return function(t){return"date"!==t.id}}())),this.displayTip=null==(l=i.displayTip)||l,this.displayInvoicedFilter=null==(p=i.displayInvoicedFilter)||p,this.displayBillableFilter=null==(d=i.displayBillableFilter)||d,this.subscriptions.push(app.currentRoute.subscribe(function(t){return function(e){if(null!=e.project&&e.project.id()!==t.projectId())return t.projectId(e.project.id()),n(t.userElementSelector).val(0).trigger("change"),t.OnSubmitFilter(!1)}}(this))),this.subscriptions.push(this.billingEnabled=t.pureComputed(function(e){return function(){var n;return null==t.unwrap(e.project)||1===parseInt(null!=(n=e.project())?n.activePages.billing():void 0,10)}}(this))),this.people=t.observableArray([]),this.isSubmitting=t.observable(!1),this.tippedContent=s,this.subscriptions.push(this.dateFormat=t.pureComputed(function(t){return function(){return app.loggedInUser.localization.dateFormat()}}())),this.projectTypes=[{id:"all",text:app.tl("Active and Archived")},{id:"active",text:app.tl("Active Only")},{id:"archived",text:app.tl("Archived Only")}],this.timeTypes=[{id:"all",text:app.tl("All Logs")},{id:"billable",text:app.tl("Billable Only")},{id:"non-billable",text:app.tl("Non-billable Only")}],this.invoiceTypes=[{id:"all",text:app.tl("Both")},{id:"invoiced",text:app.tl("Invoiced only")},{id:"non-invoiced",text:app.tl("Non-invoiced only")}],this.subscriptions.push(this.projectIsActive=t.pureComputed(function(t){return function(){return null==t.project()||t.project().isActive()}}(this))),this.startDate=this.InitStartDate(i),this.endDate=this.InitEndDate(i),this.startDateText=t.observable(this.startDate),this.endDateText=t.observable(this.endDate),this.subscriptions.push(this.startDateText.subscribe(this.StartDateChanged)),this.subscriptions.push(this.endDateText.subscribe(this.EndDateChanged)),this.overrideUserId=t.observable(null!=i.userId?i.userId:null),this.overrideUserName=t.observable(null),this.loadingPerson=t.observable(null!=this.overrideUserId()),null!=this.overrideUserId()&&app.api.get(app.prefixApi("people/"+this.overrideUserId()+".json","API_PREFIX_V2","API_PREFIX_V2")).then(function(t){return function(e){var n;return n=e.response.person,t.overrideUserId(n.id),t.overrideUserName(n.firstName+" "+n.lastName)}}(this)).finally(function(t){return function(){return t.loadingPerson(!1)}}(this)),this.personValue=t.observable(""),this.projectType=t.observable(app.loggedInUser.preferences.everythingTimeFilterProjectType()),this.billableValue=t.observable(app.loggedInUser.preferences[this.prefPrefix+"TimeFilterBillableType"]()),this.invoicedValue=t.observable(app.loggedInUser.preferences[this.prefPrefix+"TimeFilterInvoicedType"]()),this.sortBy=t.observable(app.loggedInUser.preferences[this.prefPrefix+"TimeFilterSortBy"]()),this.sortOrder=t.observable(app.loggedInUser.preferences[this.prefPrefix+"TimeFilterSortOrder"]()),this.isTemplate()&&"date"===this.sortBy()&&(this.sortBy("cost"),this.sortOrder("desc")),this.subscriptions.push(this.peopleUrl=t.pureComputed(function(t){return function(){return t.projectId()>0?"projects/"+t.projectId()+"/time_entries/people.json":"time_entries/people.json"}}(this))),this.userModel=function(t){return{id:t.id,text:t.firstName+" "+t.lastName,avatar:t["avatar-url"]}},this.sort=function(t,e){return parseInt(t.companyId,10)<parseInt(e.companyId,10)?-1:parseInt(t.companyId,10)>parseInt(e.companyId,10)?1:app.loggedInUser.id()===parseInt(t.id,10)?-1:app.loggedInUser.id()===parseInt(e.id,10)?1:(t.firstName+" "+t.lastName).toLowerCase()<(e.firstName+" "+e.lastName).toLowerCase()?-1:(t.firstName+" "+t.lastName).toLowerCase()>(e.firstName+" "+e.lastName).toLowerCase()?1:0},this.subscriptions.push(this.initialUserValue=t.pureComputed(function(e){return function(){var n;if(null==e.overrideUserId()||null==e.overrideUserName()||e.loadingPerson()){if(""!==app.loggedInUser.preferences[e.prefPrefix+"TimeFilterUserInfo"]()){try{n="object"==typeof app.loggedInUser.preferences[e.prefPrefix+"TimeFilterUserInfo"]()?app.loggedInUser.preferences[e.prefPrefix+"TimeFilterUserInfo"]():JSON.parse(app.loggedInUser.preferences[e.prefPrefix+"TimeFilterUserInfo"]()),"0"===n.id&&null==n.text&&(n.text=app.tl("Everyone"))}catch(t){t,n={id:0,text:app.tl("Everyone")}}return null==n.projectId||n.projectId.toString()!==e.projectId().toString()?{id:0,text:app.tl("Everyone")}:(0===parseInt(n.id,10)&&(n.text=t.unwrap(n.text)),n)}return{id:0,text:app.tl("Everyone")}}return{id:e.overrideUserId(),text:e.overrideUserName()}}}(this))),this.subscriptions.push(this.thisWeekText=t.pureComputed(function(t){return function(){return app.loggedInUser.localization.startOnSunday()?app.tl("This Week")+" ("+app.tl("Sun")+" - "+app.tl("Sat")+")":app.tl("This Week")+" ("+app.tl("Mon")+" - "+app.tl("Sun")+")"}}())),this.subscriptions.push(this.lastWeekText=t.pureComputed(function(t){return function(){return app.loggedInUser.localization.startOnSunday()?app.tl("Last Week")+" ("+app.tl("Sun")+" - "+app.tl("Sat")+")":app.tl("Last Week")+" ("+app.tl("Mon")+" - "+app.tl("Sun")+")"}}())),this.subscriptions.push(this.last3monthsText=t.pureComputed(function(t){return function(){var t,n;return n=e().startOf("month").subtract(2,"months").format("MMM"),t=e().format("MMM"),app.tl("Last [_s] months","3")+" ("+n+" - "+t+")"}}())),this.subscriptions.push(this.last6monthsText=t.pureComputed(function(t){return function(){var t,n;return n=e().startOf("month").subtract(5,"months").format("MMM"),t=e().format("MMM"),app.tl("Last [_s] months","6")+" ("+n+" - "+t+")"}}())),this.subscriptions.push(t.postbox.subscribe("time-entries-loaded",function(t){return function(){return t.isSubmitting(!1)}}(this)))}return i.prototype.OnPersonFilterRendered=function(){return this.personValue(this.initialUserValue().id),setTimeout(function(t){return function(){return t.OnSubmitFilter(!1)}}(this),0)},i.prototype.OnDoubleClickWhoLabel=function(t){this.personValue(""+app.loggedInUser.id()),0===n(this.userElementSelector+" option[value='"+app.loggedInUser.id()+"']").length&&n(this.userElementSelector).append(n("<option>",{value:app.loggedInUser.id(),text:app.tl("Me")+" ("+app.loggedInUser.fullName()+")"}))},i.prototype.OnClickDateFilter=function(t){var e;if(null!=(e=this.GetDatesFromRange(t)))return this.selectedRange(t),this.startDate=e.startDate,this.endDate=e.endDate,this.ignoreSDTextChange=!0,this.ignoreEDTextChange=!0,this.startDateText(this.startDate),this.endDateText(this.endDate),Tipped.hideAll()},i.prototype.OnSubmitFilter=function(e){var n;return null==e&&(e=!0),this.isSubmitting(!0),null!=this.startDate&&null!=this.endDate&&this.startDate.isAfter(this.endDate)&&(this.endDate=this.startDate.clone(),this.endDateText(this.endDate.format(this.dateFormat()))),n=this.ToJSON(),e&&this.SavePrefs(n),"function"==typeof this.OnSubmitFilterCallback&&this.OnSubmitFilterCallback(n,function(t){return function(){return t.isSubmitting(!1)}}(this)),t.postbox.publish("time-listing-filter-updated",n)},i.prototype.SortByFullName=function(t,e){return t.firstName.toLowerCase()===e.firstName.toLowerCase()&&(t.lastName.toLowerCase(),e.lastName.toLowerCase()),t.firstName.toLowerCase()>e.firstName.toLowerCase()?1:-1},i.prototype.StartDateChanged=function(t){var n;return this.ignoreSDTextChange?this.ignoreSDTextChange=!1:(n=e(t,this.dateFormat()),n.isValid()&&(this.startDate=n),this.selectedRange(""))},i.prototype.EndDateChanged=function(t){var n;return this.ignoreEDTextChange?this.ignoreEDTextChange=!1:(n=e(t,this.dateFormat()),n.isValid()&&(this.endDate=n),this.selectedRange(""))},i.prototype.GetUserFilterObject=function(){var t;return t=n(this.userElementSelector).select2("data"),null!=t[0]?t[0]:{id:0,text:app.tl("Everyone")}},i.prototype.ToJSON=function(){return{startDate:null!=this.startDate?this.startDate.format():"",endDate:null!=this.endDate?this.endDate.format():"",selectedRange:this.selectedRange(),userId:this.GetUserFilterObject().id,projectType:this.projectType(),billable:this.billableValue(),invoiced:this.invoicedValue(),sortBy:this.sortBy(),sortOrder:this.sortOrder()}},i.prototype.SavePrefs=function(t){null!=t.startDate&&app.loggedInUser.preferences[this.prefPrefix+"TimeFilterStartDate"](this.startDate),null!=t.endDate&&app.loggedInUser.preferences[this.prefPrefix+"TimeFilterEndDate"](this.endDate),null!=t.selectedRange&&app.loggedInUser.preferences[this.prefPrefix+"TimeFilterSelectedRange"](t.selectedRange),null!=t.userId&&app.loggedInUser.preferences[this.prefPrefix+"TimeFilterUserInfo"]({projectId:this.projectId().toString(),id:this.GetUserFilterObject().id,text:this.GetUserFilterObject().text}),null!=t.projectType&&app.loggedInUser.preferences.everythingTimeFilterProjectType(t.projectType),null!=t.billable&&app.loggedInUser.preferences[this.prefPrefix+"TimeFilterBillableType"](t.billable),null!=t.invoiced&&app.loggedInUser.preferences[this.prefPrefix+"TimeFilterInvoicedType"](t.invoiced),null!=t.sortBy&&app.loggedInUser.preferences[this.prefPrefix+"TimeFilterSortBy"](t.sortBy),null!=t.sortOrder&&app.loggedInUser.preferences[this.prefPrefix+"TimeFilterSortOrder"](t.sortOrder)},i.prototype.InitStartDate=function(n){var i,s;return null!=n.startDate?e(n.startDate,"YYYYMMDD").isValid()?e(n.startDate,"YYYYMMDD"):e().startOf("month"):null!=this.selectedRange&&""!==this.selectedRange()&&null==n.startDate&&null==n.endDate&&null!=(i=this.GetDatesFromRange(this.selectedRange()))?i.startDate:(s=t.unwrap(app.loggedInUser.preferences[this.prefPrefix+"TimeFilterStartDate"]),(null!=s?s.isValid():void 0)?s:e().startOf("month"))},i.prototype.InitEndDate=function(n){var i,s,a,o;return null!=(null!=n?n.endDate:void 0)?e(n.endDate,"YYYYMMDD").isValid()?e(n.endDate,"YYYYMMDD"):e().endOf("month"):null!=this.selectedRange&&""!==this.selectedRange()&&null==n.startDate&&null==n.endDate&&null!=(i=this.GetDatesFromRange(this.selectedRange()))?i.endDate:(a=t.unwrap(app.loggedInUser.preferences[this.prefPrefix+"TimeFilterEndDate"]),s=null!=a?a.clone().startOf("day"):void 0,o=e().startOf("day"),(null!=a?a.isValid():void 0)&&!o.isAfter(s)?a:this.endDate=e().startOf("day"))},i.prototype.GetDatesFromRange=function(t){var n,i,s,a;if(a=app.loggedInUser.GetWeekString(),i=["alldates","yesterday","today","thisweek","lastweek","thismonth","lastmonth","last3months","last6months"],-1===i.indexOf(t))return null;switch(t){case"alldates":s=null,n=null;break;case"yesterday":s=e().startOf("day").subtract(1,"day"),n=s.clone();break;case"today":s=e().startOf("day"),n=s.clone();break;case"thisweek":s=e().startOf(a),n=e().endOf(a);break;case"lastweek":s=e().startOf(a).subtract(1,"week"),n=e().endOf(a).subtract(1,"week");break;case"thismonth":s=e().startOf("month"),n=e().endOf("month");break;case"lastmonth":s=e().subtract(1,"month").startOf("month"),n=e().subtract(1,"month").endOf("month");break;case"last3months":s=e().startOf("month").subtract(2,"months"),n=e().endOf("month");break;case"last6months":s=e().startOf("month").subtract(5,"months"),n=e().endOf("month")}return{startDate:s,endDate:n}},i.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},i}(),{viewModel:o,template:i}}.apply(e,i))&&(t.exports=s)},4358:function(t,e,n){(function(i){var s,a,o=function(t,e){return function(){return t.apply(e,arguments)}};s=[n(164),n(3246),n(1721),n(1211)],void 0!==(a=function(t,e,n,s){var a;return a=function(){function e(e){var s,a,r,l,p,d,c,u;null==e&&(e={}),this.FormatDescription=o(this.FormatDescription,this),this.OnEntryRendered=o(this.OnEntryRendered,this),this.OnClickEdit=o(this.OnClickEdit,this),this.OnClickToggleBillable=o(this.OnClickToggleBillable,this),this.subscriptions=[],this.taskId=null!=(s=e.taskId)?s:0,this.projectId=null!=(a=e.projectId)?a:0,this.showGridHeading=null!=(r=e.gridHeading)&&r,this.parent=e.parent,this.timeEntryIncrementalArray=e.timeEntryIncrementalArray,this.project=this.projectId>0?app.projectInfo.get(this.projectId):null,this.subscriptions.push(this.billingEnabled=t.pureComputed(function(e){return function(){var n;return null==t.unwrap(e.project)||1===parseInt(null!=(n=e.project())?n.activePages.billing():void 0,10)}}(this))),this.subscriptions.push(this.canViewEstimates=t.pureComputed(function(e){return function(){var n;return!(!app.loggedInUser.administrator()||!app.loggedInUser.inOwnerCompany())||(null!=(n=t.unwrap(e.project))?n.permissions.viewEstimatedTime():void 0)}}(this))),this.filterOpts=null!=(l=e.filterOpts)?l:null,this.sortBy=null!=(p=e.sortBy)?p:t.observable("date"),this.sortOrder=null!=(d=e.sortOrder)?d:t.observable("asc"),null!=this.filterOpts&&null!=t.unwrap(this.filterOpts).sortBy&&this.sortBy("date"),null!=this.filterOpts&&null!=t.unwrap(this.filterOpts).sortOrder&&this.sortOrder("asc"),this.displayTotals=null==(c=e.displayTotals)||c,console.assert("boolean"==typeof t.unwrap(this.displayTotals)),this.loadDeferred=e.loadDeferred,null!=this.loadDeferred&&(console.assert(i.isFunction(this.loadDeferred.promise)),this.timeEntryLoadedCounter=0),this.selectedCustomColumns=null!=(u=e.selectedCustomColumns)?u:t.observable(this.availableColumns),this.subscriptions.push(this.timeEntryGroup=new n({timeEntries:this.timeEntryIncrementalArray.source})),this.subscriptions.push(this.hiddenColumnClassList=t.pureComputed(function(t){return function(){var e,n,i,s,a;for(n=[],a=t.availableColumns,i=0,s=a.length;i<s;i++)e=a[i],-1===t.selectedCustomColumns().indexOf(e)&&n.push(e);return n.join(" ")}}(this))),this.subscriptions.push(this.dateFormat=t.pureComputed(function(t){return function(){return app.loggedInUser.localization.dateFormat().toUpperCase()}}())),this.subscriptions.push(this.timeFormat=t.pureComputed(function(t){return function(){var t;return t=app.loggedInUser.localization.timeFormat(),"HH:MM"===t.toUpperCase()?"HH:mm":"h:mmA"}}()))}return e.prototype.availableColumns=["date","project","whoLoggedTime","descriptionAndTags","attachedTaskList","startTime","endTime","isEntryBillable","hasEntryBeenBilled","timeTaken","hoursTaken"],e.prototype.OnClickToggleBillable=function(e,n){var i,s,a,o;return s=function(t){return t?"1":"0"},o=e.isBillable(),a=!o,null!=e.isbillable&&e.isbillable(a),null==e.isBillable||t.isPureComputed(e.isBillable)||t.isComputed(e.isBillable)||!t.isObservable(e.isBillable)||e.isBillable(a),i={"time-entry":{isbillable:s(a)}},app.api.put("time_entries/"+e.id()+".json",i).then(function(n){return function(n){var i;if(i=n.response.budgetExceeded,t.postbox.publish("allTWEvents",{itemId:e.id(),itemType:"time",actionType:app.consts.ACTIONTYPE.UPDATED,eventTime:new Date,projectId:e.projectId(),extraInfo:{objectType:"task",objectId:e.taskId()||0,validateTimeLogId:!0}}),app.flash.Success(!0===e.isBillable()||1===parseInt(e.isBillable(),10)?app.tl("Time log marked as billable"):app.tl("Time log marked as non-billable")),null!=i&&!app.loggedInUser.preferences.budgetExceededDontShowAgain())return app.modal.Show("budgetExceeded",{exceededData:i})}}()).catch(function(n){return function(n){null!=e.isbillable&&e.isbillable(a),null==e.isBillable||t.isPureComputed(e.isBillable)||t.isComputed(e.isBillable)||!t.isObservable(e.isBillable)||e.isBillable(o)}}())},e.prototype.OnClickEdit=function(t,e){t.canLogTime()?this.ShowEditModal(t):this.ShowDisabledMessage(t)},e.prototype.OnEntryRendered=function(){null!=this.loadDeferred&&(this.timeEntryLoadedCounter===this.timeEntryIncrementalArray.observable().length-1&&this.loadDeferred.resolve(),this.timeEntryLoadedCounter++)},e.prototype.FormatDescription=function(t){return s(t.description()).replace(/\n/g,"<br>")},e.prototype.ShowEditModal=function(t){app.modal.Show("addOrEditTimeEntry",{timeEntry:t})},e.prototype.ShowDisabledMessage=function(t){app.flash.Info(app.tl('Time logging has been disabled for the project: "[_s]"',t.projectName()))},e.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},e}(),{viewModel:a,template:e}}.apply(e,s))&&(t.exports=a)}).call(e,n(245))},4359:function(t,e,n){var i,s,a=function(t,e){return function(){return t.apply(e,arguments)}};i=[n(3247)],void 0!==(s=function(t){var e;return e=function(){function t(t){var e;null==t&&(t={}),this.GetTotalsText=a(this.GetTotalsText,this),this.parent=t.parent,null!=app.currentRoute().project&&(this.projectPermissions=app.currentRoute().project.permissions),this.subscriptions=[],this.billingEnabled=null!=(e=this.parent.billingEnabled)?e:ko.observable(!0),this.subscriptions.push(this.totalLogged=ko.pureComputed(function(t){return function(){return t.GetTotalsText(t.parent.totalLogged)}}(this))),this.subscriptions.push(this.totalNonBillable=ko.pureComputed(function(t){return function(){return t.GetTotalsText(t.parent.totalNonBillable)}}(this))),this.subscriptions.push(this.totalBillable=ko.pureComputed(function(t){return function(){return t.GetTotalsText(t.parent.totalBillable)}}(this))),this.subscriptions.push(this.totalEstimated=ko.pureComputed(function(t){return function(){return t.GetTotalsText(t.parent.totalEstimated)}}(this))),this.subscriptions.push(this.totalBilled=ko.pureComputed(function(t){return function(){return t.GetTotalsText(t.parent.totalBilled)}}(this)))}return t.prototype.GetTotalsText=function(t){var e,n;return e=ko.unwrap(t),n=app.utility.MinutesIntToString(e.total,{zeroVal:app.tl("None"),showDays:!1}),n+=" ("+e.decimal+")"},t.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},t}(),{viewModel:e,template:t}}.apply(e,i))&&(t.exports=s)}});
//# sourceMappingURL=time.6b8671c635af15cc624a.js.map