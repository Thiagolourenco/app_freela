webpackJsonp([0],{1015:function(t,e,i){var n,r;n=[i(164),i(1175)],void 0!==(r=function(t,e){var i;return i=function(){function i(i,n,r,o){var s;console.assert("string"==typeof n),console.assert("number"==typeof r),console.assert("boolean"==typeof o),this.subscriptions=[],!0===app.isAddEditReport()?this.userSavedFilter=new e({section:n,projectId:r}):this.userSavedFilter=null!=(s=app.loggedInUser.defaultFilters)[n]?s[n]:s[n]=new e({section:n,projectId:r}),this.userSavedFilter.subscriptions.length||this.userSavedFilter._buildSubscriptions(),this.userSavedFilter.sections().length||this.userSavedFilter._getSections(),i(this.userSavedFilter),this.subscriptions.push(this.userSavedFilter.sections.subscribe(function(t){return function(e){var i,n,r;null!=(n=app.loggedInUser.preferences[t.userSavedFilter.orderPreferenceName])&&(i=function(){var t,i,n;for(n=[],t=0,i=e.length;t<i;t++)r=e[t],n.push(r.type);return n}(),app.utility.AreEqual(n(),i)||n(i))}}(this))),this.subscriptions.push(this.editedWithRateLimit=t.pureComputed(this.userSavedFilter.edited)),this.editedWithRateLimit.extend({rateLimit:{method:"notifyWhenChangesStop",delay:500}}),this.subscriptions.push(this.editedWithRateLimit.subscribe(function(t){return function(e){0!==e&&t.userSavedFilter.isTemporary()&&t.userSavedFilter.Save({isTemporary:!0,title:"",description:""})}}(this))),0!==r&&this.userSavedFilter.isProjectSpecific()&&r!==this.userSavedFilter.projectId()&&this.userSavedFilter.Clear(),o&&(this.userSavedFilter.UpdatePrivateFilterProperties(),app.currentFilter(this.userSavedFilter)),this.userSavedFilter.UpdateSelectedFilterList()}return i.normalizeParams=function(e,i,n){var r,o;return o=t.unwrap(e),o="string"==typeof o?o:"",r=parseInt(t.unwrap(i),10)||0,null==n&&(n=!0),[o,r,n]},i.prototype.dispose=function(){var t,e,i,n;for(null!=this.userSavedFilter.dispose&&this.userSavedFilter.dispose(),i=this.subscriptions,t=0,e=i.length;t<e;t++)n=i[t],n.dispose()},i.getFilter=app.shared.getResource.bind(app.shared,"filter"),i}(),app.shared.registerResourceProvider("filter",i),i}.apply(e,n))&&(t.exports=r)},1116:function(t,e,i){(function(n,r){var o,s,a=function(t,e){return function(){return t.apply(e,arguments)}},l=function(t,e){function i(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},c={}.hasOwnProperty,u=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};o=[i(164),i(14),i(1119),i(1698),i(246),i(401),i(1117)],void 0!==(s=function(t,e,i,o,s,c,p){var d,h;return d=s.LOADINGMODE,h=function(){function t(t){this.getNumCanLoadNext=a(this.getNumCanLoadNext,this),this.getHasMoreRecords=a(this.getHasMoreRecords,this),this.getNumRemainingRecords=a(this.getNumRemainingRecords,this),this.page=ko.observable(0),this.pageSize=ko.observable(0),this.maxPageSize=ko.observable(250),this.pages=ko.observable(0),this.nextPageToken=ko.observable(""),this.totalRecords=ko.observable(0),this.numRemainingRecords=ko.pureComputed(this.getNumRemainingRecords),this.hasMoreRecords=ko.pureComputed(this.getHasMoreRecords),this.numCanLoadNext=ko.pureComputed(this.getNumCanLoadNext),this.update(t)}return t.prototype.update=function(t){var e,i,n,r,o,s;if(n=t.page,r=t.pageSize,e=t.maxPageSize,o=t.pages,s=t.totalRecords,i=t.nextPageToken,null!=n&&this.page(n),null!=r&&this.pageSize(r),null!=e&&this.maxPageSize(e),null!=o&&this.pages(o),null!=s&&this.totalRecords(s),null!=i)return this.nextPageToken(i)},t.prototype.getNumRemainingRecords=function(){return this.totalRecords()-this.page()*this.pageSize()},t.prototype.getHasMoreRecords=function(){return this.numRemainingRecords()>0},t.prototype.getNumCanLoadNext=function(){return this.pageSize()<this.numRemainingRecords()?this.pageSize():this.numRemainingRecords()},t}(),function(t){function o(t,i){this.RepositionItemAtIndex=a(this.RepositionItemAtIndex,this),this.InsertItemAtIndex=a(this.InsertItemAtIndex,this),this.InsertItem=a(this.InsertItem,this),this.DeleteItemsById=a(this.DeleteItemsById,this),this.DeleteItemById=a(this.DeleteItemById,this),this.deleteItemFromList=a(this.deleteItemFromList,this),this.defaultIsItemDeleted=a(this.defaultIsItemDeleted,this),this.TryLoadAgain=a(this.TryLoadAgain,this),this.filter=a(this.filter,this),this.SetParams=a(this.SetParams,this),this.dispose=a(this.dispose,this);var r,o,s,l;this.subscriptions=[],this.isDisposed=!1,this.options={pageSize:50,maxPageSize:250,loadAllMaxPages:-1,pagingMode:"pageByPage",updatesAtBottom:ko.observable(!0),params:{},getList:null,listFilter:null,filter:{clientListFilter:null,generateFilterParams:null,isFiltered:null},defaultProperties:{},redirectIfAccessDenied:!1,isItemDeleted:this.defaultIsItemDeleted,itemKeyField:"id"},n.extend(this.options,i),this.options.maxPageSize>0&&(this.options.pageSize=Math.min(this.options.pageSize,this.options.maxPageSize)),this.setupPaginators({page:1,pageSize:this.options.pageSize,maxPageSize:this.options.maxPageSize}),this.hasClientSideFilterFunction=null!=this.options.filter.clientListFilter,this.currentLoadId=0,this.currentFullLoadId=0,this.currentLoadingMode=ko.observable(d.ACTIVE),this.subscriptions.push(this.currentPaginator=ko.pureComputed(function(t){return function(){return t.getPaginator(t.currentLoadingMode())}}(this))),this.subscriptions.push(this.first=ko.pureComputed(function(t){return function(){return 0===t.list().length?null:t.list()[0]}}(this))),this.subscriptions.push(this.page=ko.pureComputed(function(t){return function(){return t.currentPaginator().page()}}(this))),this.subscriptions.push(this.pages=ko.pureComputed(function(t){return function(){return t.currentPaginator().pages()}}(this))),this.subscriptions.push(this.totalRecords=ko.computed(function(t){return function(){return t.currentPaginator().totalRecords()}}(this))),this.subscriptions.push(this.hasMoreRecords=ko.pureComputed(function(t){return function(){return t.currentPaginator().hasMoreRecords()}}(this))),this.hasLoadedFullList=!1,this.endpoint=t,this.subscriptions=[],"function"==typeof this.endpoint&&this.subscriptions.push(this.endpoint.subscribe(function(t){return function(e){if(null!=e&&"string"==typeof e)return t.Reload()}}(this))),o=this.options.defaultProperties;for(r in o)l=o[r],this[r]=l;console.assert(["pageByPage","lessThanLastId"].indexOf(this.options.pagingMode)>-1,"Invalid paging mode"),console.assert("lessThanLastId"!==this.options.pagingMode||null!=this.options.maxIdAPIParam,"maxIdAPIParam not passed"),this.hasStartedLoad=ko.observable(!1),this.isLoading=ko.observable(!0),this.hasLoadError=ko.observable(!1),this.APIErrorStatus=ko.observable(null),this.APIErrorStatusText=ko.observable(""),this.loadUpdatesInterval=45,this.lastLoadTimestamp=e(),this.serverFilteredList=ko.observableArray(),this.filterParamsAsJson=ko.observable("{}"),this.subscriptions.push(ko.computed(function(t){return function(){var e;return t.filterParamsAsJson(JSON.stringify(("function"==typeof(e=t.options.filter).generateFilterParams?e.generateFilterParams():void 0)||{}))}}(this))),this.subscriptions.push(this.filterParams=ko.pureComputed(function(t){return function(){return JSON.parse(t.filterParamsAsJson())}}(this))),null!=this.filterParams()&&this.subscriptions.push(this.filterParams.subscribe(function(t){return function(){if(-1!==t.filterParams()&&(t.isFiltered()||(t.currentLoadingMode(d.ACTIVE),!t.hasLoadedFullList)))return setTimeout(t.filter,0)}}(this))),"function"==typeof this.options.filter.isFiltered?this.isFiltered=this.options.filter.isFiltered:(this.isFiltered=ko.observable(!1),s=function(t){return function(){var e,i,n,r;n=function(){if(-1===this.filterParams())return!1;if(r=Object.prototype.toString,"[object Object]"===!r.call(this.filterParams()))try{throw new Error("DL FilterParams must be an object")}catch(t){e=t,i={url:this.endpoint,params:this.options.params},c.captureException("(v"+window.appVersionId+") - DL FilterParams must be an object: "+ko.toJSON(i))}return null!=this.filterParams()&&0!==Object.keys(this.filterParams()).length}.call(t),t.isFiltered(n)}}(this),s(),this.subscriptions.push(this.filterParams.subscribe(s))),this.options.fullListObservableArray?this.fullList=this.options.fullListObservableArray:this.fullList=ko.observableArray(),this.hasClientSideFilterFunction&&this.subscriptions.push(this.clientFilteredList=ko.pureComputed(function(t){return function(){return t.fullList().filter(t.options.filter.clientListFilter)}}(this))),this.subscriptions.push(this.list=ko.pureComputed(function(t){return function(){var e;return e=t.fullList(),t.isFiltered()&&(!t.serverFilteredList().length&&t.hasClientSideFilterFunction&&(e=t.clientFilteredList()),t.serverFilteredList().length&&(e=t.serverFilteredList())),null!=t.options.sort&&(e=e.sort(t.options.sort)),e}}(this))),this.subscriptions.push(this.state=ko.pureComputed(function(t){return function(){var e;return t.hasStartedLoad()?t.hasLoadError()?"error":(e=t.list(),0===e.length&&t.isLoading()?"loading":0===e.length?"blank":"content"):"not-loaded"}}(this))),this.options.loadNow&&this.Load.apply(this,this.options.loadNowArgs?this.options.loadNowArgs:[])}return l(o,t),o.prototype.dispose=function(){return this.isDisposed=!0,this.subscriptions.forEach(function(t){return t.dispose()})},o.prototype.setupPaginators=function(t){return this.paginators={},this.paginators[d.ACTIVE]=new h(t),this.paginators[d.FILTER]=new h(t)},o.prototype.getPaginator=function(t){return this.paginators[t]},o.prototype.SetParams=function(t){return r.extend(this.options.params,t)},o.prototype.setLoadOptionsDefaults=function(t){var e;return e={loadingMode:this.currentLoadingMode()},r.extend(e,t),e.paginator=this.getPaginator(e.loadingMode),e},o.prototype.Load=function(t){var e,i,o,a,l,c,u,h,f,m,g,y,v,b,w,k,x,T,C,I,_,S,A,O,P,E,M,L;if(null==t&&(t={}),null==t.params&&(t.params={}),null==t.isLoadingInitialPage&&(t.isLoadingInitialPage=!1),g=this.setLoadOptionsDefaults(t),y=g.loadingMode===d.ACTIVE,v=g.loadingMode===d.FILTER,g.loadingMode!==d.UPDATES&&this.currentLoadingMode(g.loadingMode),this.hasStartedLoad(!0),this.isLoading(!0),this.hasLoadError(!1),this.APIErrorStatus(null),this.APIErrorStatusText(""),c=r.extend({},this.options.params),c.page=this.page,c=r.extend(t.params,c),""!==this.currentPaginator().nextPageToken()&&(c.nextPageToken=this.currentPaginator().nextPageToken()),c.pageSize=this.options.pageSize,this.isFiltered()){x=this.filterParams();for(h in x)L=x[h],c[h]=L}if(g.isFiltered=this.isFiltered(),g.page=null!=(T=g.page)?T:1,null!=t.offsetCount&&(c.offsetCount=t.offsetCount),null!=t.skipParams)for(console.assert(Array.isArray(t.skipParams)),C=t.skipParams,u=0,f=C.length;u<f;u++)k=C[u],null!=c[k]&&delete c[k];return(y||v)&&("pageByPage"===this.options.pagingMode?(c.page=g.page,1===c.page&&(g.isLoadingInitialPage=!0)):"lessThanLastId"===this.options.pagingMode&&(null!=g.maxId?c[this.options.maxIdAPIParam]=g.maxId:g.isLoadingInitialPage=!0)),g.loadingMode===d.UPDATES&&(M=this.lastLoadTimestamp.clone().subtract(this.loadUpdatesInterval,"s"),o="string"!=typeof this.endpoint?this.endpoint():this.endpoint,E=o.includes(s.API_PREFIX_V3)?"YYYY-MM-DDTHH:mm:ssZ":"YYYYMMDDHHmmss",null==c.showDeleted&&(c.showDeleted=1),c.deletedAfterDate=M.locale("en").utc().format(E),null!=this.options.updatesExtraURLParams&&r.extend(c,this.options.updatesExtraURLParams),g.noDefaultUpdatedAfterDate||(c.updatedAfterDate=M.locale("en").utc().format(E)),g.noDefaultUpdatedAfterDate||(c.archivedAfterDate=M.locale("en").utc().format(E)),c.page=1,null!=g.pageSize&&(c.pageSize=g.pageSize)),b=null!=(I=g.maxPageSize)?I:this.options.maxPageSize,b>0&&(c.pageSize=Math.min(c.pageSize,b)),(_=g.loadingMode)===d.ACTIVE||_===d.FILTER?(this.currentLoadId++,1===g.page&&(this.serverFilteredList([]),this.currentFullLoadId++),m=this.currentLoadId):m=this.currentFullLoadId,window.initialData&&window.initialData.enabled&&(i=ko.unwrap(this.endpoint),r.isEmptyObject(c)||(i+=(-1===i.indexOf("?")?"?":"&")+n.param(c)),initialData[i])?(window.devMode&&console.info("DATALOADER CACHE FOUND for ",i),A=initialData[i],delete initialData[i],w=this.getOnLoadHandler(m,g,c),l={getResponseHeader:function(){return null}},p.resolve(w(A,{},l))):(S=""+ko.unwrap(this.endpoint)+ko.toJSON(c),null==(e=app.dataLoaderRequests)[S]&&(e[S]=[]),app.dataLoaderRequests[S].push(this),O=!0,app.dataLoaderRequests[S].length>1&&(O=!1),P=function(t){return function(e,i,n,r){var o,s,a,l,c;for(c=app.dataLoaderRequests[S],o=function(o){return t.getOnLoadHandler.bind(o)(e,i,n,r.response,r.xhr)},s=0,a=c.length;s<a;s++)l=c[s],o(l);return app.dataLoaderRequests[S]=[],r.response}}(this),a=function(t){return function(t){var e,i,n,r,o;for(t instanceof Error&&console.error(t),o=app.dataLoaderRequests[S],e=function(e){return e.hasLoadError(!0),e.APIErrorStatus(t.status),e.APIErrorStatusText(t.statusText),e.emit("dlError",t),app.error.Ajax(t,{redirectIfAccessDenied:e.options.redirectIfAccessDenied,requestURL:ko.unwrap(e.endpoint)})},i=0,n=o.length;i<n;i++)r=o[i],e(r);return app.dataLoaderRequests[S]=[]}}(),O?app.api.get(ko.unwrap(this.endpoint),c,{camelize:!1}).then(function(t){return function(t,e,i){return P(m,g,c,t,e,i)}}()).catch(a):p.resolve())},function(t){var e,i;return t.setRequestHeader("twProjectsVer","2.0"),t.setRequestHeader("Time-Zone","undefined"!=typeof app&&null!==app&&null!=(e=app.loggedInUser)&&null!=(i=e.localization)?i.timezoneJavaRefCode():void 0),t.setRequestHeader("Teams-Enabled",!0)},o.prototype.filter=function(){if(!this.hasClientSideFilterFunction||this.paginators[d.ACTIVE].hasMoreRecords())return this.isLoading(!0),this.getPaginator(d.FILTER).update({page:1}),this.Load({page:1,loadingMode:d.FILTER})},o.prototype.LoadMore=function(t){var e,i,n,o;if(null==t&&(t={}),this.hasMoreRecords()||this.currentPaginator().page()<this.currentPaginator().pages())return this.isLoading(!0),i={},i.page=this.currentPaginator().page()+1,e=this.list(),o=null!=(n=t.updatesAtBottom)?n:this.options.updatesAtBottom,null!=this.options.offsetCount&&(i.offsetCount=this.options.offsetCount()),"lessThanLastId"===this.options.pagingMode&&e.length>0&&(ko.unwrap(o)?i.maxId=ko.unwrap(e[e.length-1].id):i.maxId=ko.unwrap(e[0].id)),this.Load(r.extend(i,t))},o.prototype.LoadAllItems=function(){var t;return t=null!=this.options.loadAll&&this.options.loadAll,this.hasMoreRecords.subscribe(function(e){return function(i){if(!i)return e.options.loadAll=t}}(this)),this.options.loadAll=!0,this.LoadMore()},o.prototype.LoadUpdates=function(t){return null==t&&(t={}),this.Load(r.extend(t,{loadingMode:d.UPDATES}))},o.prototype.TryLoadAgain=function(){return this.Load()},o.prototype.Reload=function(){return this.Reset(!0)},o.prototype.Sync=function(t){var e,i,n,o;return null==t&&(t={}),i=this.options.itemKeyField,o=this.options.pageSize,this.list().length>o&&(o=this.list().length),n={noDefaultUpdatedAfterDate:!0,itemIdsToRemoveIfNotLoaded:function(){var t,n,r,o;for(r=this.list(),o=[],t=0,n=r.length;t<n;t++)e=r[t],o.push(ko.unwrap(e[i]));return o}.call(this),pageSize:o},this.LoadUpdates(r.extend(n,t))},o.prototype.Reset=function(t){var e,i,n;null==t&&(t=!1),n=this.paginators;for(e in n)i=n[e],i.page(1);if(this.fullList([]),t)return this.TryLoadAgain()},o.prototype.GetAllItems=function(){return this.fullList().concat(this.serverFilteredList())},o.prototype.getCacheKey=function(t){return"dl2."+ko.unwrap(this.endpoint)+"?"+r.param(t)},o.prototype.getOnLoadHandler=function(t,i,n,o,s){var a,l,c,p,d,h,f,m,g,y,v,b,w,k,x,T,C,I,_,S,A,O,P,E,M,L;if(a=s.getResponseHeader("appVersionNo"),null!=a&&app.latestAvailableVersion(a),A=s.getResponseHeader("promptBrowserReload"),null!=A&&app.promptBrowserReload(A),_=s.getResponseHeader("outageErrorMessage"),null!=_&&app.outageErrorMessage(_),!this.isDisposed&&(this.lastLoadTimestamp=e(s.getResponseHeader("X-lastUpdated"),"YYYY-MM-DDTHH:mm:ssZ"),i.paginator=this.getPaginator(i.loadingMode),S={page:this.getPageNumber(s),pages:this.getTotalPages(s),totalRecords:this.getTotalRecords(s),nextPageToken:null!=o?o.nextPageToken:void 0},null!=i.paginator&&(i.paginator.update(S),this.currentLoadingMode()!==i.loadingMode&&(l=this.getPaginator(this.currentLoadingMode()),l.update(S))),this.emit("loaded",o,this,s),o)){if(y=Object.keys(o),E=y.indexOf("STATUS"),-1!==E&&y.splice(E,1),null!=this.options.getList)I=this.options.getList(o);else if(null==this.options.listField)c=ko.unwrap(this.endpoint),L=c.split(".json")[0].split("/"),b=L[L.length-1],u.call(y,b)>=0?this.options.listField=b:this.options.listField=y[0],I=o[this.options.listField];else if(-1===this.options.listField.indexOf("."))I=o[this.options.listField];else for(I=o,O=this.options.listField.split("."),f=0,w=O.length;f<w;f++)T=O[f],I=I[T];if(null==I&&(I=[]),r.isArray(I)||(I=[I]),null!=this.options.listField)for(m=0,k=y.length;m<k;m++)g=y[m],M=this.options.listField.split(".")[0],g!==M&&(null!=this[g]&&("function"==typeof this[g]?this[g]():void 0)?this[g](ko.unwrap(ko.mapping.fromJS(o[g]))):this[g]=ko.mapping.fromJS(o[g]));if(i.itemIdsToRemoveIfNotLoaded){for(h=this.options.itemKeyField,C=I.map(function(t){return t[h]}),d=[],P=i.itemIdsToRemoveIfNotLoaded,v=0,x=P.length;v<x;v++)p=P[v],-1===C.indexOf(p)&&d.push(p);d.length&&this.DeleteItemsById(d)}this.addListData(I,i,n,o),ko.tasks.schedule(function(t){return function(){if(null!=t.options.onLoad)return t.options.onLoad({dataloader:t,newList:I,loadOpts:i,getParams:n,response:o,xhr:s})}}(this))}},o.prototype.getTotalRecords=function(t){var e,i,n;return null!=t.getResponseHeader("X-Total-Records")?t.getResponseHeader("X-Total-Records")/1:null!=t.getResponseHeader("X-Records")?t.getResponseHeader("X-Records")/1:null!=(null!=(e=t.responseJSON)&&null!=(i=e.meta)&&null!=(n=i.page)?n.count:void 0)?parseInt(t.responseJSON.meta.page.count,10):0},o.prototype.getTotalPages=function(t){var e,i,n,r;return null!=t.getResponseHeader("X-Pages")?parseInt(null!=(e=t.getResponseHeader("X-Pages"))?e:1,10):(null!=(i=t.responseJSON)&&null!=(n=i.meta)&&null!=(r=n.page)?r.pageSize:void 0)&&null!=t.responseJSON.meta.page.count?Math.ceil(t.responseJSON.meta.page.count/t.responseJSON.meta.page.pageSize):1},o.prototype.getPageNumber=function(t){var e,i,n,r;return null!=t.getResponseHeader("X-Page")?parseInt(null!=(e=t.getResponseHeader("X-Page"))?e:1,10):null!=(null!=(i=t.responseJSON)&&null!=(n=i.meta)&&null!=(r=n.page)?r.pageOffset:void 0)?parseInt(t.responseJSON.meta.page.pageOffset,10)+1:1},o.prototype.addListData=function(t,e,r,o,s){var a,l,c,u,p,h,f,m,g,y,v,b,w,k,x,T,C;if(null==o&&(o={}),null==s&&(s=!1),console.assert(n.isArray(t)),C=null!=(T=e.updatesAtBottom)?T:this.options.updatesAtBottom,null==(t=i.camelize(t)))return void this.isLoading(!1);if(b=e.isFiltered?this.serverFilteredList:this.fullList,this.isFiltered()||(this.hasLoadedFullList=!0),e.loadingMode===d.ACTIVE&&e.isLoadingInitialPage&&0===t.length)return b([]),void this.isLoading(!1);if(null==this.options.ItemClass)w=t;else for(w=[],l=h=0,g=t.length;h<g;l=++h)p=t[l],w.push(new this.options.ItemClass(p,this.options.parent,o));if(e.isLoadingInitialPage)e.callbackBeforeRender?e.callbackBeforeRender(w,e,o):this.options.callbackBeforeRender&&this.options.callbackBeforeRender(w,e,o),b(w.filter(function(t){return function(e){return!t.options.isItemDeleted(e)}}(this)));else{if(e.loadingMode!==d.UPDATES||ko.unwrap(C)||(w=w.slice(0).reverse()),v=b(),e.loadingMode===d.ACTIVE)e.loadingMode===d.ACTIVE||ko.unwrap(C)?v.push.apply(v,w.filter(function(t){return function(e){return!t.options.isItemDeleted(e)}}(this))):v.unshift.apply(v,w.filter(function(t){return function(e){return!t.options.isItemDeleted(e)}}(this)));else for(f=0,y=w.length;f<y;f++)if(p=w[f],m=this.options.itemKeyField,c=app.utility.FindIndexByKeyValue(v,m,ko.unwrap(p[m])),u=e.loadingMode===d.UPDATES&&this.options.isItemDeleted(p),a=app.utility.FindIndexByKeyValue(t,m,ko.unwrap(p[m]),!0),c>-1)if(u)v.splice(c,1);else{if(k=v[c],null!=k.displayPreferences&&"object"==typeof k.displayPreferences)for(x in k.displayPreferences)p.displayPreferences[x](k.displayPreferences[x]());null!=k.UpdateData?k.UpdateData(t[a]):v.splice(c,1,p)}else u||(e.loadingMode===d.ACTIVE||ko.unwrap(C)?v.push(p):v.unshift(p));e.callbackBeforeRender?e.callbackBeforeRender(v,e,o):this.options.callbackBeforeRender&&this.options.callbackBeforeRender(v,e,o),b.valueHasMutated()}if(this.isLoading(!1),this.options.loadAllMaxPages>-1&&this.options.loadAll&&(this.options.loadAll=!1,this.options.initNumPagesToLoad=this.options.loadAllMaxPages),(e.loadingMode===d.ACTIVE||e.loadingMode===d.FILTER)&&(null!=this.options.initNumPagesToLoad||this.options.loadAll)){if((null!=this.options.initNumPagesToLoad&&e.paginator.page()<this.options.initNumPagesToLoad||this.options.loadAll)&&e.paginator.page()<e.paginator.pages())return this.LoadMore();if(this.options.onAllLoaded)return this.options.onAllLoaded({dataloader:this,list:b,loadOpts:e,getParams:r})}},o.prototype.defaultIsItemDeleted=function(t){return null!=t.status&&"deleted"===ko.unwrap(t.status)},o.prototype.deleteItemFromList=function(t){var e;if(this.isFiltered()){if(-1===(e=app.utility.FindIndexByKeyValue(this.serverFilteredList(),"id",t,!0)))return!1;this.serverFilteredList.splice(e,1)}return-1!==(e=app.utility.FindIndexByKeyValue(this.fullList(),"id",t,!0))&&(this.fullList.splice(e,1),!0)},o.prototype.DeleteItemById=function(t){return this.deleteItemFromList(t),this.isFiltered()&&this.serverFilteredList.notifySubscribers(),this.fullList.notifySubscribers(),!0},o.prototype.DeleteItemsById=function(t){var e,i,n;for(null==t&&(t=[]),i=0,n=t.length;i<n;i++)e=t[i],this.deleteItemFromList(e);return this.isFiltered()&&this.serverFilteredList.notifySubscribers(),this.fullList.notifySubscribers(),!0},o.prototype.InsertItem=function(t){var e;e=this.isFiltered()?this.serverFilteredList:this.fullList,e.push(t)},o.prototype.InsertItemAtIndex=function(t,e){var i;return i=this.isFiltered()?this.serverFilteredList:this.fullList,null!=e&&0===e?i.unshift(t):null!=e&&e<i().length?i.splice(e,0,t):null==e||null!=e&&e>=i().length||-1===e?i.push(t):void 0},o.prototype.RepositionItemAtIndex=function(t,e){var i,n,r;if(null!=t&&null!=e){if(i=this.isFiltered()?this.serverFilteredList:this.fullList,n=0,-1===(r=app.utility.FindIndexByKeyValue(i(),"id",t.id())))return!1;n=-1===e?0:e>i().length?i().length-1:e,0===n?i.unshift(t):i.splice(n,0,t),n<r?i.splice(r+1,1):i.splice(r,1),i.notifySubscribers()}},o}(o)}.apply(e,o))&&(t.exports=s)}).call(e,i(245),i(245))},1117:function(t,e,i){(function(e,n,r){/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2013-2015 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
!function(e){t.exports=e()}(function(){return function t(e,i,n){function r(s,a){if(!i[s]){if(!e[s]){var l="function"==typeof _dereq_&&_dereq_;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=i[s]={exports:{}};e[s][0].call(u.exports,function(t){var i=e[s][1][t];return r(i||t)},u,u.exports,t,e,i,n)}return i[s].exports}for(var o="function"==typeof _dereq_&&_dereq_,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(t,e,i){"use strict";e.exports=function(t){function e(t){var e=new i(t),n=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),n}var i=t._SomePromiseArray;t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},{}],2:[function(t,i,n){"use strict";function r(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new u(16),this._normalQueue=new u(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=c}function o(t,e,i){this._lateQueue.push(t,e,i),this._queueTick()}function s(t,e,i){this._normalQueue.push(t,e,i),this._queueTick()}function a(t){this._normalQueue._pushOne(t),this._queueTick()}var l;try{throw new Error}catch(t){l=t}var c=t("./schedule"),u=t("./queue"),p=t("./util");r.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},r.prototype.hasCustomScheduler=function(){return this._customScheduler},r.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},r.prototype.disableTrampolineIfNecessary=function(){p.hasDevTools&&(this._trampolineEnabled=!1)},r.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},r.prototype.fatalError=function(t,i){i?(e.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),e.exit(2)):this.throwLater(t)},r.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},p.hasDevTools?(r.prototype.invokeLater=function(t,e,i){this._trampolineEnabled?o.call(this,t,e,i):this._schedule(function(){setTimeout(function(){t.call(e,i)},100)})},r.prototype.invoke=function(t,e,i){this._trampolineEnabled?s.call(this,t,e,i):this._schedule(function(){t.call(e,i)})},r.prototype.settlePromises=function(t){this._trampolineEnabled?a.call(this,t):this._schedule(function(){t._settlePromises()})}):(r.prototype.invokeLater=o,r.prototype.invoke=s,r.prototype.settlePromises=a),r.prototype.invokeFirst=function(t,e,i){this._normalQueue.unshift(t,e,i),this._queueTick()},r.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var i=t.shift(),n=t.shift();e.call(i,n)}else e._settlePromises()}},r.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},r.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},r.prototype._reset=function(){this._isTickUsed=!1},i.exports=r,i.exports.firstLineError=l},{"./queue":26,"./schedule":29,"./util":36}],3:[function(t,e,i){"use strict";e.exports=function(t,e,i,n){var r=!1,o=function(t,e){this._reject(e)},s=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(o,o,null,this,t)},a=function(t,e){0==(50397184&this._bitField)&&this._resolveCallback(e.target)},l=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(o){r||(r=!0,t.prototype._propagateFrom=n.propagateFromFunction(),t.prototype._boundValue=n.boundValueFunction());var c=i(o),u=new t(e);u._propagateFrom(this,1);var p=this._target();if(u._setBoundTo(c),c instanceof t){var d={promiseRejectionQueued:!1,promise:u,target:p,bindingPromise:c};p._then(e,s,void 0,u,d),c._then(a,l,void 0,u,d),u._setOnCancel(c)}else u._resolveCallback(p);return u},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},t.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},t.bind=function(e,i){return t.resolve(i).bind(e)}}},{}],4:[function(t,e,i){"use strict";function n(){try{Promise===o&&(Promise=r)}catch(t){}return o}var r;"undefined"!=typeof Promise&&(r=Promise);var o=t("./promise")();o.noConflict=n,e.exports=o},{"./promise":22}],5:[function(t,e,i){"use strict";var n=Object.create;if(n){var r=n(null),o=n(null);r[" size"]=o[" size"]=0}e.exports=function(e){function i(t,i){var n;if(null!=t&&(n=t[i]),"function"!=typeof n){var r="Object "+a.classString(t)+" has no method '"+a.toString(i)+"'";throw new e.TypeError(r)}return n}function n(t){return i(t,this.pop()).apply(t,this)}function r(t){return t[this]}function o(t){var e=+this;return 0>e&&(e=Math.max(0,e+t.length)),t[e]}var s,a=t("./util"),l=a.canEvaluate;a.isIdentifier,e.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(n,void 0,void 0,e,void 0)},e.prototype.get=function(t){var e;if("number"==typeof t)e=o;else if(l){var i=s(t);e=null!==i?i:r}else e=r;return this._then(e,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(t,e,i){"use strict";e.exports=function(e,i,n,r){var o=t("./util"),s=o.tryCatch,a=o.errorObj,l=e._async;e.prototype.break=e.prototype.cancel=function(){if(!r.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t.isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var i=t._cancellationParent;if(null==i||!i.isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),e=t,t=i}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this.isCancellable()&&(this._setCancelled(),l.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t))for(var i=0;i<t.length;++i)this._doInvokeOnCancel(t[i],e);else if(void 0!==t)if("function"==typeof t){if(!e){var n=s(t).call(this._boundValue());n===a&&(this._attachExtraTrace(n.e),l.throwLater(n.e))}}else t._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),l.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this.isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,i){"use strict";e.exports=function(e){function i(t,i,a){return function(l){var c=a._boundValue();t:for(var u=0;u<t.length;++u){var p=t[u];if(p===Error||null!=p&&p.prototype instanceof Error){if(l instanceof p)return o(i).call(c,l)}else if("function"==typeof p){var d=o(p).call(c,l);if(d===s)return d;if(d)return o(i).call(c,l)}else if(n.isObject(l)){for(var h=r(p),f=0;f<h.length;++f){var m=h[f];if(p[m]!=l[m])continue t}return o(i).call(c,l)}}return e}}var n=t("./util"),r=t("./es5").keys,o=n.tryCatch,s=n.errorObj;return i}},{"./es5":13,"./util":36}],8:[function(t,e,i){"use strict";e.exports=function(t){function e(){this._trace=new e.CapturedTrace(n())}function i(){return r?new e:void 0}function n(){var t=o.length-1;return t>=0?o[t]:void 0}var r=!1,o=[];return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},e.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,o.push(this._trace))},e.prototype._popContext=function(){if(void 0!==this._trace){var t=o.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},e.CapturedTrace=null,e.create=i,e.deactivateLongStackTraces=function(){},e.activateLongStackTraces=function(){var i=t.prototype._pushContext,o=t.prototype._popContext,s=t._peekContext,a=t.prototype._peekContext,l=t.prototype._promiseCreated;e.deactivateLongStackTraces=function(){t.prototype._pushContext=i,t.prototype._popContext=o,t._peekContext=s,t.prototype._peekContext=a,t.prototype._promiseCreated=l,r=!1},r=!0,t.prototype._pushContext=e.prototype._pushContext,t.prototype._popContext=e.prototype._popContext,t._peekContext=t.prototype._peekContext=n,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},e}},{}],9:[function(t,i,n){"use strict";i.exports=function(i,n){function r(t,e){return{promise:e}}function o(){return!1}function s(t,e,i){var n=this;try{t(e,i,function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+U.toString(t));n._attachCancellationCallback(t)})}catch(t){return t}}function a(t){if(!this.isCancellable())return this;var e=this._onCancel();void 0!==e?U.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function l(){return this._onCancelField}function c(t){this._onCancelField=t}function u(){this._cancellationParent=void 0,this._onCancelField=void 0}function p(t,e){if(0!=(1&e)){this._cancellationParent=t;var i=t._branchesRemainingToCancel;void 0===i&&(i=0),t._branchesRemainingToCancel=i+1}0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function d(t,e){0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function h(){var t=this._boundTo;return void 0!==t&&t instanceof i?t.isFulfilled()?t.value():void 0:t}function f(){this._trace=new M(this._peekContext())}function m(t,e){if(z(t)){var i=this._trace;if(void 0!==i&&e&&(i=i._parent),void 0!==i)i.attachExtraTrace(t);else if(!t.__stackCleaned__){var n=C(t);U.notEnumerableProp(t,"stack",n.message+"\n"+n.stack.join("\n")),U.notEnumerableProp(t,"__stackCleaned__",!0)}}}function g(t,e,i,n,r){if(void 0===t&&null!==e&&q){if(void 0!==r&&r._returnedNonUndefined())return;if(0==(65535&n._bitField))return;i&&(i+=" ");var o="a promise was created in a "+i+"handler but was not returned from it";n._warn(o,!0,e)}}function y(t,e){var i=t+" is deprecated and will be removed in a future version.";return e&&(i+=" Use "+e+" instead."),v(i)}function v(t,e,n){if(rt.warnings){var r,o=new R(t);if(e)n._attachExtraTrace(o);else if(rt.longStackTraces&&(r=i._peekContext()))r.attachExtraTrace(o);else{var s=C(o);o.stack=s.message+"\n"+s.stack.join("\n")}Z("warning",o)||I(o,"",!0)}}function b(t,e){for(var i=0;i<e.length-1;++i)e[i].push("From previous event:"),e[i]=e[i].join("\n");return i<e.length&&(e[i]=e[i].join("\n")),t+"\n"+e.join("\n")}function w(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}function k(t){for(var e=t[0],i=1;i<t.length;++i){for(var n=t[i],r=e.length-1,o=e[r],s=-1,a=n.length-1;a>=0;--a)if(n[a]===o){s=a;break}for(var a=s;a>=0;--a){var l=n[a];if(e[r]!==l)break;e.pop(),r--}e=n}}function x(t){for(var e=[],i=0;i<t.length;++i){var n=t[i],r="    (No stack trace)"===n||H.test(n),o=r&&et(n);r&&!o&&(Y&&" "!==n.charAt(0)&&(n="    "+n),e.push(n))}return e}function T(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),i=0;i<e.length;++i){var n=e[i];if("    (No stack trace)"===n||H.test(n))break}return i>0&&(e=e.slice(i)),e}function C(t){var e=t.stack,i=t.toString();return e="string"==typeof e&&e.length>0?T(t):["    (No stack trace)"],{message:i,stack:x(e)}}function I(t,e,i){if("undefined"!=typeof console){var n;if(U.isObject(t)){var r=t.stack;n=e+$(r,t)}else n=e+String(t);"function"==typeof j?j(n,i):("function"==typeof console.log||"object"==typeof console.log)&&console.log(n)}}function _(t,e,i,n){var r=!1;try{"function"==typeof e&&(r=!0,"rejectionHandled"===t?e(n):e(i,n))}catch(t){F.throwLater(t)}"unhandledRejection"===t?Z(t,i,n)||r||I(i,"Unhandled rejection "):Z(t,n)}function S(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t&&"function"==typeof t.toString?t.toString():U.toString(t);if(/\[object [a-zA-Z0-9$_]+\]/.test(e))try{e=JSON.stringify(t)}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+A(e)+">, no stack trace)"}function A(t){return t.length<41?t:t.substr(0,38)+"..."}function O(){return"function"==typeof nt}function P(t){var e=t.match(it);return e?{fileName:e[1],line:parseInt(e[2],10)}:void 0}function E(t,e){if(O()){for(var i,n,r=t.stack.split("\n"),o=e.stack.split("\n"),s=-1,a=-1,l=0;l<r.length;++l){var c=P(r[l]);if(c){i=c.fileName,s=c.line;break}}for(var l=0;l<o.length;++l){var c=P(o[l]);if(c){n=c.fileName,a=c.line;break}}0>s||0>a||!i||!n||i!==n||s>=a||(et=function(t){if(B.test(t))return!0;var e=P(t);return!!(e&&e.fileName===i&&s<=e.line&&e.line<=a)})}}function M(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);nt(this,M),e>32&&this.uncycle()}var L,D,j,N=i._getDomain,F=i._async,R=t("./errors").Warning,U=t("./util"),z=U.canAttachTrace,B=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,H=null,$=null,Y=!1,V=!(0==U.env("BLUEBIRD_DEBUG")||!U.env("BLUEBIRD_DEBUG")&&"development"!==U.env("NODE_ENV")),G=!(0==U.env("BLUEBIRD_WARNINGS")||!V&&!U.env("BLUEBIRD_WARNINGS")),W=!(0==U.env("BLUEBIRD_LONG_STACK_TRACES")||!V&&!U.env("BLUEBIRD_LONG_STACK_TRACES")),q=0!=U.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(G||!!U.env("BLUEBIRD_W_FORGOTTEN_RETURN"));i.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|524288},i.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),F.invokeLater(this._notifyUnhandledRejection,this,void 0))},i.prototype._notifyUnhandledRejectionIsHandled=function(){_("rejectionHandled",L,void 0,this)},i.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},i.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},i.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),_("unhandledRejection",D,t,this)}},i.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},i.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},i.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},i.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},i.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},i.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},i.prototype._warn=function(t,e,i){return v(t,e,i||this)},i.onPossiblyUnhandledRejection=function(t){var e=N();D="function"==typeof t?null===e?t:e.bind(t):void 0},i.onUnhandledRejectionHandled=function(t){var e=N();L="function"==typeof t?null===e?t:e.bind(t):void 0};var X=function(){};i.longStackTraces=function(){if(F.haveItemsQueued()&&!rt.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!rt.longStackTraces&&O()){var t=i.prototype._captureStackTrace,e=i.prototype._attachExtraTrace;rt.longStackTraces=!0,X=function(){if(F.haveItemsQueued()&&!rt.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");i.prototype._captureStackTrace=t,i.prototype._attachExtraTrace=e,n.deactivateLongStackTraces(),F.enableTrampoline(),rt.longStackTraces=!1},i.prototype._captureStackTrace=f,i.prototype._attachExtraTrace=m,n.activateLongStackTraces(),F.disableTrampolineIfNecessary()}},i.hasLongStackTraces=function(){return rt.longStackTraces&&O()};var Q=function(){try{var t=document.createEvent("CustomEvent");return t.initCustomEvent("testingtheevent",!1,!0,{}),U.global.dispatchEvent(t),function(t,e){var i=document.createEvent("CustomEvent");return i.initCustomEvent(t.toLowerCase(),!1,!0,e),!U.global.dispatchEvent(i)}}catch(t){}return function(){return!1}}(),K=function(){return U.isNode?function(){return e.emit.apply(e,arguments)}:U.global?function(t){var e="on"+t.toLowerCase(),i=U.global[e];return!!i&&(i.apply(U.global,[].slice.call(arguments,1)),!0)}:function(){return!1}}(),J={promiseCreated:r,promiseFulfilled:r,promiseRejected:r,promiseResolved:r,promiseCancelled:r,promiseChained:function(t,e,i){return{promise:e,child:i}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,i){return{reason:e,promise:i}},rejectionHandled:r},Z=function(t){var e=!1;try{e=K.apply(null,arguments)}catch(t){F.throwLater(t),e=!0}var i=!1;try{i=Q(t,J[t].apply(null,arguments))}catch(t){F.throwLater(t),i=!0}return i||e};i.config=function(t){if(t=Object(t),"longStackTraces"in t&&(t.longStackTraces?i.longStackTraces():!t.longStackTraces&&i.hasLongStackTraces()&&X()),"warnings"in t){var e=t.warnings;rt.warnings=!!e,q=rt.warnings,U.isObject(e)&&"wForgottenReturn"in e&&(q=!!e.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!rt.cancellation){if(F.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");i.prototype._clearCancellationData=u,i.prototype._propagateFrom=p,i.prototype._onCancel=l,i.prototype._setOnCancel=c,i.prototype._attachCancellationCallback=a,i.prototype._execute=s,tt=p,rt.cancellation=!0}"monitoring"in t&&(t.monitoring&&!rt.monitoring?(rt.monitoring=!0,i.prototype._fireEvent=Z):!t.monitoring&&rt.monitoring&&(rt.monitoring=!1,i.prototype._fireEvent=o))},i.prototype._fireEvent=o,i.prototype._execute=function(t,e,i){try{t(e,i)}catch(t){return t}},i.prototype._onCancel=function(){},i.prototype._setOnCancel=function(t){},i.prototype._attachCancellationCallback=function(t){},i.prototype._captureStackTrace=function(){},i.prototype._attachExtraTrace=function(){},i.prototype._clearCancellationData=function(){},i.prototype._propagateFrom=function(t,e){};var tt=d,et=function(){return!1},it=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;U.inherits(M,Error),n.CapturedTrace=M,M.prototype.uncycle=function(){var t=this._length;if(!(2>t)){for(var e=[],i={},n=0,r=this;void 0!==r;++n)e.push(r),r=r._parent;t=this._length=n;for(var n=t-1;n>=0;--n){var o=e[n].stack;void 0===i[o]&&(i[o]=n)}for(var n=0;t>n;++n){var s=e[n].stack,a=i[s];if(void 0!==a&&a!==n){a>0&&(e[a-1]._parent=void 0,e[a-1]._length=1),e[n]._parent=void 0,e[n]._length=1;var l=n>0?e[n-1]:this;t-1>a?(l._parent=e[a+1],l._parent.uncycle(),l._length=l._parent._length+1):(l._parent=void 0,l._length=1);for(var c=l._length+1,u=n-2;u>=0;--u)e[u]._length=c,c++;return}}}},M.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=C(t),i=e.message,n=[e.stack],r=this;void 0!==r;)n.push(x(r.stack.split("\n"))),r=r._parent;k(n),w(n),U.notEnumerableProp(t,"stack",b(i,n)),U.notEnumerableProp(t,"__stackCleaned__",!0)}};var nt=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():S(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,H=t,$=e;var i=Error.captureStackTrace;return et=function(t){return B.test(t)},function(t,e){Error.stackTraceLimit+=6,i(t,e),Error.stackTraceLimit-=6}}var n=new Error;if("string"==typeof n.stack&&n.stack.split("\n")[0].indexOf("stackDetection@")>=0)return H=/@/,$=e,Y=!0,function(t){t.stack=(new Error).stack};var r;try{throw new Error}catch(t){r="stack"in t}return"stack"in n||!r||"number"!=typeof Error.stackTraceLimit?($=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?S(e):e.toString()},null):(H=t,$=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(j=function(t){console.warn(t)},U.isNode&&e.stderr.isTTY?j=function(t,e){var i=e?"\x1b[33m":"\x1b[31m";console.warn(i+t+"\x1b[0m\n")}:U.isNode||"string"!=typeof(new Error).stack||(j=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var rt={warnings:G,longStackTraces:!1,cancellation:!1,monitoring:!1};return W&&i.longStackTraces(),{longStackTraces:function(){return rt.longStackTraces},warnings:function(){return rt.warnings},cancellation:function(){return rt.cancellation},monitoring:function(){return rt.monitoring},propagateFromFunction:function(){return tt},boundValueFunction:function(){return h},checkForgottenReturns:g,setBounds:E,warn:v,deprecated:y,CapturedTrace:M,fireDomEvent:Q,fireGlobalEvent:K}}},{"./errors":12,"./util":36}],10:[function(t,e,i){"use strict";e.exports=function(t){function e(){return this.value}function i(){throw this.reason}t.prototype.return=t.prototype.thenReturn=function(i){return i instanceof t&&i.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:i},void 0)},t.prototype.throw=t.prototype.thenThrow=function(t){return this._then(i,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,i,void 0,{reason:t},void 0);var e=arguments[1],n=function(){throw e};return this.caught(t,n)},t.prototype.catchReturn=function(i){if(arguments.length<=1)return i instanceof t&&i.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:i},void 0);var n=arguments[1];n instanceof t&&n.suppressUnhandledRejections();var r=function(){return n};return this.caught(i,r)}}},{}],11:[function(t,e,i){"use strict";e.exports=function(t,e){function i(){return o(this)}function n(t,i){return r(t,i,e,e)}var r=t.reduce,o=t.all;t.prototype.each=function(t){return this.mapSeries(t)._then(i,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return r(this,t,e,e)},t.each=function(t,e){return n(t,e)._then(i,void 0,void 0,t,void 0)},t.mapSeries=n}},{}],12:[function(t,e,i){"use strict";function n(t,e){function i(n){return this instanceof i?(p(this,"message","string"==typeof n?n:e),p(this,"name",t),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new i(n)}return u(i,Error),i}function r(t){return this instanceof r?(p(this,"name","OperationalError"),p(this,"message",t),this.cause=t,this.isOperational=!0,void(t instanceof Error?(p(this,"message",t.message),p(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new r(t)}var o,s,a=t("./es5"),l=a.freeze,c=t("./util"),u=c.inherits,p=c.notEnumerableProp,d=n("Warning","warning"),h=n("CancellationError","cancellation error"),f=n("TimeoutError","timeout error"),m=n("AggregateError","aggregate error");try{o=TypeError,s=RangeError}catch(t){o=n("TypeError","type error"),s=n("RangeError","range error")}for(var g="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),y=0;y<g.length;++y)"function"==typeof Array.prototype[g[y]]&&(m.prototype[g[y]]=Array.prototype[g[y]]);a.defineProperty(m.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),m.prototype.isOperational=!0;var v=0;m.prototype.toString=function(){var t=Array(4*v+1).join(" "),e="\n"+t+"AggregateError of:\n";v++,t=Array(4*v+1).join(" ");for(var i=0;i<this.length;++i){for(var n=this[i]===this?"[Circular AggregateError]":this[i]+"",r=n.split("\n"),o=0;o<r.length;++o)r[o]=t+r[o];n=r.join("\n"),e+=n+"\n"}return v--,e},u(r,Error);var b=Error.__BluebirdErrorTypes__;b||(b=l({CancellationError:h,TimeoutError:f,OperationalError:r,RejectionError:r,AggregateError:m}),a.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:o,RangeError:s,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:d}},{"./es5":13,"./util":36}],13:[function(t,e,i){var n=function(){"use strict";return void 0===this}();if(n)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(t,e){var i=Object.getOwnPropertyDescriptor(t,e);return!(i&&!i.writable&&!i.set)}};else{var r={}.hasOwnProperty,o={}.toString,s={}.constructor.prototype,a=function(t){var e=[];for(var i in t)r.call(t,i)&&e.push(i);return e},l=function(t,e){return{value:t[e]}},c=function(t,e,i){return t[e]=i.value,t},u=function(t){return t},p=function(t){try{return Object(t).constructor.prototype}catch(t){return s}},d=function(t){try{return"[object Array]"===o.call(t)}catch(t){return!1}};e.exports={isArray:d,keys:a,names:a,defineProperty:c,getDescriptor:l,freeze:u,getPrototypeOf:p,isES5:n,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,i){"use strict";e.exports=function(t,e){var i=t.map;t.prototype.filter=function(t,n){return i(this,t,n,e)},t.filter=function(t,n,r){return i(t,n,r,e)}}},{}],15:[function(t,e,i){"use strict";e.exports=function(e,i){function n(t,e,i){this.promise=t,this.type=e,this.handler=i,this.called=!1,this.cancelPromise=null}function r(t){this.finallyHandler=t}function o(t,e){return null!=t.cancelPromise&&(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0)}function s(){return l.call(this,this.promise._target()._settledValue())}function a(t){return o(this,t)?void 0:(p.e=t,p)}function l(t){var n=this.promise,l=this.handler;if(!this.called){this.called=!0;var c=this.isFinallyHandler()?l.call(n._boundValue()):l.call(n._boundValue(),t);if(void 0!==c){n._setReturnedNonUndefined();var d=i(c,n);if(d instanceof e){if(null!=this.cancelPromise){if(d.isCancelled()){var h=new u("late cancellation observer");return n._attachExtraTrace(h),p.e=h,p}d.isPending()&&d._attachCancellationCallback(new r(this))}return d._then(s,a,void 0,this,void 0)}}}return n.isRejected()?(o(this),p.e=t,p):(o(this),t)}var c=t("./util"),u=e.CancellationError,p=c.errorObj;return n.prototype.isFinallyHandler=function(){return 0===this.type},r.prototype._resultCancelled=function(){o(this.finallyHandler)},e.prototype._passThrough=function(t,e,i,r){return"function"!=typeof t?this.then():this._then(i,r,void 0,new n(this,e,t),void 0)},e.prototype.lastly=e.prototype.finally=function(t){return this._passThrough(t,0,l,l)},e.prototype.tap=function(t){return this._passThrough(t,1,l)},n}},{"./util":36}],16:[function(t,e,i){"use strict";e.exports=function(e,i,n,r,o,s){function a(t,i,n){for(var o=0;o<i.length;++o){n._pushContext();var s=h(i[o])(t);if(n._popContext(),s===d){n._pushContext();var a=e.reject(d.e);return n._popContext(),a}var l=r(s,n);if(l instanceof e)return l}return null}function l(t,i,r,o){if(s.cancellation()){var a=new e(n),l=this._finallyPromise=new e(n);this._promise=a.lastly(function(){return l}),a._captureStackTrace(),a._setOnCancel(this)}else{(this._promise=new e(n))._captureStackTrace()}this._stack=o,this._generatorFunction=t,this._receiver=i,this._generator=void 0,this._yieldHandlers="function"==typeof r?[r].concat(f):f,this._yieldedPromise=null,this._cancellationPhase=!1}var c=t("./errors"),u=c.TypeError,p=t("./util"),d=p.errorObj,h=p.tryCatch,f=[];p.inherits(l,o),l.prototype._isResolved=function(){return null===this._promise},l.prototype._cleanup=function(){this._promise=this._generator=null,s.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},l.prototype._promiseCancelled=function(){if(!this._isResolved()){var t;if(void 0!==this._generator.return)this._promise._pushContext(),t=h(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var i=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=i,this._promise._attachExtraTrace(i),this._promise._pushContext(),t=h(this._generator.throw).call(this._generator,i),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},l.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=h(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},l.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=h(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},l.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},l.prototype.promise=function(){return this._promise},l.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},l.prototype._continue=function(t){var i=this._promise;if(t===d)return this._cleanup(),this._cancellationPhase?i.cancel():i._rejectCallback(t.e,!1);var n=t.value;if(!0===t.done)return this._cleanup(),this._cancellationPhase?i.cancel():i._resolveCallback(n);var o=r(n,this._promise);if(!(o instanceof e)&&null===(o=a(o,this._yieldHandlers,this._promise)))return void this._promiseRejected(new u("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",n)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));o=o._target();var s=o._bitField;0==(50397184&s)?(this._yieldedPromise=o,o._proxy(this,null)):0!=(33554432&s)?this._promiseFulfilled(o._value()):0!=(16777216&s)?this._promiseRejected(o._reason()):this._promiseCancelled()},e.coroutine=function(t,e){if("function"!=typeof t)throw new u("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var i=Object(e).yieldHandler,n=l,r=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new n(void 0,void 0,i,r),s=o.promise();return o._generator=e,o._promiseFulfilled(void 0),s}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new u("expecting a function but got "+p.classString(t));f.push(t)},e.spawn=function(t){if(s.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof t)return i("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=new l(t,this),r=n.promise();return n._run(e.spawn),r}}},{"./errors":12,"./util":36}],17:[function(t,e,i){"use strict";e.exports=function(e,i,n,r){var o=t("./util");o.canEvaluate,o.tryCatch,o.errorObj,e.join=function(){var t,e=arguments.length-1;if(e>0&&"function"==typeof arguments[e]){t=arguments[e];var n}var r=[].slice.call(arguments);t&&r.pop();var n=new i(r).promise();return void 0!==t?n.spread(t):n}}},{"./util":36}],18:[function(t,e,i){"use strict";e.exports=function(e,i,n,r,o,s){function a(t,e,i,n){this.constructor$(t),this._promise._captureStackTrace();var r=c();this._callback=null===r?e:r.bind(e),this._preservedValues=n===o?new Array(this.length()):null,this._limit=i,this._inFlight=0,this._queue=i>=1?[]:h,this._init$(void 0,-2)}function l(t,e,i,r){if("function"!=typeof e)return n("expecting a function but got "+u.classString(e));var o="object"==typeof i&&null!==i?i.concurrency:0;return o="number"==typeof o&&isFinite(o)&&o>=1?o:0,new a(t,e,o,r).promise()}var c=e._getDomain,u=t("./util"),p=u.tryCatch,d=u.errorObj,h=[];u.inherits(a,i),a.prototype._init=function(){},a.prototype._promiseFulfilled=function(t,i){var n=this._values,o=this.length(),a=this._preservedValues,l=this._limit;if(0>i){if(i=-1*i-1,n[i]=t,l>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(l>=1&&this._inFlight>=l)return n[i]=t,this._queue.push(i),!1;null!==a&&(a[i]=t);var c=this._promise,u=this._callback,h=c._boundValue();c._pushContext();var f=p(u).call(h,t,i,o),m=c._popContext();if(s.checkForgottenReturns(f,m,null!==a?"Promise.filter":"Promise.map",c),f===d)return this._reject(f.e),!0;var g=r(f,this._promise);if(g instanceof e){g=g._target();var y=g._bitField;if(0==(50397184&y))return l>=1&&this._inFlight++,n[i]=g,g._proxy(this,-1*(i+1)),!1;if(0==(33554432&y))return 0!=(16777216&y)?(this._reject(g._reason()),!0):(this._cancel(),!0);f=g._value()}n[i]=f}return++this._totalResolved>=o&&(null!==a?this._filter(n,a):this._resolve(n),!0)},a.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,i=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var n=t.pop();this._promiseFulfilled(i[n],n)}},a.prototype._filter=function(t,e){for(var i=e.length,n=new Array(i),r=0,o=0;i>o;++o)t[o]&&(n[r++]=e[o]);n.length=r,this._resolve(n)},a.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return l(this,t,e,null)},e.map=function(t,e,i,n){return l(t,e,i,n)}}},{"./util":36}],19:[function(t,e,i){"use strict";e.exports=function(e,i,n,r,o){var s=t("./util"),a=s.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("expecting a function but got "+s.classString(t));return function(){var n=new e(i);n._captureStackTrace(),n._pushContext();var r=a(t).apply(this,arguments),s=n._popContext();return o.checkForgottenReturns(r,s,"Promise.method",n),n._resolveFromSyncValue(r),n}},e.attempt=e.try=function(t){if("function"!=typeof t)return r("expecting a function but got "+s.classString(t));var n=new e(i);n._captureStackTrace(),n._pushContext();var l;if(arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1],u=arguments[2];l=s.isArray(c)?a(t).apply(u,c):a(t).call(u,c)}else l=a(t)();var p=n._popContext();return o.checkForgottenReturns(l,p,"Promise.try",n),n._resolveFromSyncValue(l),n},e.prototype._resolveFromSyncValue=function(t){t===s.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,i){"use strict";function n(t){return t instanceof Error&&u.getPrototypeOf(t)===Error.prototype}function r(t){var e;if(n(t)){e=new c(t),e.name=t.name,e.message=t.message,e.stack=t.stack;for(var i=u.keys(t),r=0;r<i.length;++r){var o=i[r];p.test(o)||(e[o]=t[o])}return e}return s.markAsOriginatingFromRejection(t),t}function o(t,e){return function(i,n){if(null!==t){if(i){var o=r(a(i));t._attachExtraTrace(o),t._reject(o)}else if(e){var s=[].slice.call(arguments,1);t._fulfill(s)}else t._fulfill(n);t=null}}}var s=t("./util"),a=s.maybeWrapAsError,l=t("./errors"),c=l.OperationalError,u=t("./es5"),p=/^(?:name|message|stack|cause)$/;e.exports=o},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,i){"use strict";e.exports=function(e){function i(t,e){var i=this;if(!o.isArray(t))return n.call(i,t,e);var r=a(e).apply(i._boundValue(),[null].concat(t));r===l&&s.throwLater(r.e)}function n(t,e){var i=this,n=i._boundValue(),r=void 0===t?a(e).call(n,null):a(e).call(n,null,t);r===l&&s.throwLater(r.e)}function r(t,e){var i=this;if(!t){var n=new Error(t+"");n.cause=t,t=n}var r=a(e).call(i._boundValue(),t);r===l&&s.throwLater(r.e)}var o=t("./util"),s=e._async,a=o.tryCatch,l=o.errorObj;e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var o=n;void 0!==e&&Object(e).spread&&(o=i),this._then(o,r,void 0,this,t)}return this}}},{"./util":36}],22:[function(t,i,n){"use strict";i.exports=function(){function i(){}function n(t,e){if("function"!=typeof e)throw new v("expecting a function but got "+h.classString(e));if(t.constructor!==r)throw new v("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}function r(t){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,t!==w&&(n(this,t),this._resolveFromExecutor(t)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function o(t){this.promise._resolveCallback(t)}function s(t){this.promise._rejectCallback(t,!1)}function a(t){var e=new r(w);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}var l,c=function(){return new v("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},u=function(){return new r.PromiseInspection(this._target())},p=function(t){return r.reject(new v(t))},d={},h=t("./util");l=h.isNode?function(){var t=e.domain;return void 0===t&&(t=null),t}:function(){return null},h.notEnumerableProp(r,"_getDomain",l);var f=t("./es5"),m=t("./async"),g=new m;f.defineProperty(r,"_async",{value:g});var y=t("./errors"),v=r.TypeError=y.TypeError;r.RangeError=y.RangeError;var b=r.CancellationError=y.CancellationError;r.TimeoutError=y.TimeoutError,r.OperationalError=y.OperationalError,r.RejectionError=y.OperationalError,r.AggregateError=y.AggregateError;var w=function(){},k={},x={},T=t("./thenables")(r,w),C=t("./promise_array")(r,w,T,p,i),I=t("./context")(r),_=I.create,S=t("./debuggability")(r,I),A=(S.CapturedTrace,t("./finally")(r,T)),O=t("./catch_filter")(x),P=t("./nodeback"),E=h.errorObj,M=h.tryCatch;return r.prototype.toString=function(){return"[object Promise]"},r.prototype.caught=r.prototype.catch=function(t){var e=arguments.length;if(e>1){var i,n=new Array(e-1),r=0;for(i=0;e-1>i;++i){var o=arguments[i];if(!h.isObject(o))return p("expecting an object but got "+h.classString(o));n[r++]=o}return n.length=r,t=arguments[i],this.then(void 0,O(n,t,this))}return this.then(void 0,t)},r.prototype.reflect=function(){return this._then(u,u,void 0,this,void 0)},r.prototype.then=function(t,e){if(S.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var i=".then() only accepts functions but was passed: "+h.classString(t);arguments.length>1&&(i+=", "+h.classString(e)),this._warn(i)}return this._then(t,e,void 0,void 0,void 0)},r.prototype.done=function(t,e){this._then(t,e,void 0,void 0,void 0)._setIsFinal()},r.prototype.spread=function(t){return"function"!=typeof t?p("expecting a function but got "+h.classString(t)):this.all()._then(t,void 0,void 0,k,void 0)},r.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},r.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new C(this).promise()},r.prototype.error=function(t){return this.caught(h.originatesFromRejection,t)},r.is=function(t){return t instanceof r},r.fromNode=r.fromCallback=function(t){var e=new r(w);e._captureStackTrace();var i=arguments.length>1&&!!Object(arguments[1]).multiArgs,n=M(t)(P(e,i));return n===E&&e._rejectCallback(n.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},r.all=function(t){return new C(t).promise()},r.cast=function(t){var e=T(t);return e instanceof r||(e=new r(w),e._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},r.resolve=r.fulfilled=r.cast,r.reject=r.rejected=function(t){var e=new r(w);return e._captureStackTrace(),e._rejectCallback(t,!0),e},r.setScheduler=function(t){if("function"!=typeof t)throw new v("expecting a function but got "+h.classString(t));return g.setScheduler(t)},r.prototype._then=function(t,e,i,n,o){var s=void 0!==o,a=s?o:new r(w),c=this._target(),u=c._bitField;s||(a._propagateFrom(this,3),a._captureStackTrace(),void 0===n&&0!=(2097152&this._bitField)&&(n=0!=(50397184&u)?this._boundValue():c===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,a));var p=l();if(0!=(50397184&u)){var d,h,f=c._settlePromiseCtx;0!=(33554432&u)?(h=c._rejectionHandler0,d=t):0!=(16777216&u)?(h=c._fulfillmentHandler0,d=e,c._unsetRejectionIsUnhandled()):(f=c._settlePromiseLateCancellationObserver,h=new b("late cancellation observer"),c._attachExtraTrace(h),d=e),g.invoke(f,c,{handler:null===p?d:"function"==typeof d&&p.bind(d),promise:a,receiver:n,value:h})}else c._addCallbacks(t,e,a,n,p);return a},r.prototype._length=function(){return 65535&this._bitField},r.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},r.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},r.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},r.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},r.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},r.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},r.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},r.prototype._isFinal=function(){return(4194304&this._bitField)>0},r.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},r.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},r.prototype._setAsyncGuaranteed=function(){g.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},r.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];return e===d?void 0:void 0===e&&this._isBound()?this._boundValue():e},r.prototype._promiseAt=function(t){return this[4*t-4+2]},r.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},r.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},r.prototype._boundValue=function(){},r.prototype._migrateCallback0=function(t){var e=(t._bitField,t._fulfillmentHandler0),i=t._rejectionHandler0,n=t._promise0,r=t._receiverAt(0);void 0===r&&(r=d),this._addCallbacks(e,i,n,r,null)},r.prototype._migrateCallbackAt=function(t,e){var i=t._fulfillmentHandlerAt(e),n=t._rejectionHandlerAt(e),r=t._promiseAt(e),o=t._receiverAt(e);void 0===o&&(o=d),this._addCallbacks(i,n,r,o,null)},r.prototype._addCallbacks=function(t,e,i,n,r){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=i,this._receiver0=n,"function"==typeof t&&(this._fulfillmentHandler0=null===r?t:r.bind(t)),"function"==typeof e&&(this._rejectionHandler0=null===r?e:r.bind(e));else{var s=4*o-4;this[s+2]=i,this[s+3]=n,"function"==typeof t&&(this[s+0]=null===r?t:r.bind(t)),"function"==typeof e&&(this[s+1]=null===r?e:r.bind(e))}return this._setLength(o+1),o},r.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},r.prototype._resolveCallback=function(t,e){if(0==(117506048&this._bitField)){if(t===this)return this._rejectCallback(c(),!1);var i=T(t,this);if(!(i instanceof r))return this._fulfill(t);e&&this._propagateFrom(i,2);var n=i._target();if(n===this)return void this._reject(c());var o=n._bitField;if(0==(50397184&o)){var s=this._length();s>0&&n._migrateCallback0(this);for(var a=1;s>a;++a)n._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(n)}else if(0!=(33554432&o))this._fulfill(n._value());else if(0!=(16777216&o))this._reject(n._reason());else{var l=new b("late cancellation observer");n._attachExtraTrace(l),this._reject(l)}}},r.prototype._rejectCallback=function(t,e,i){var n=h.ensureErrorObject(t),r=n===t;if(!r&&!i&&S.warnings()){var o="a promise was rejected with a non-error: "+h.classString(t);this._warn(o,!0)}this._attachExtraTrace(n,!!e&&r),this._reject(t)},r.prototype._resolveFromExecutor=function(t){var e=this;this._captureStackTrace(),this._pushContext();var i=!0,n=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,i)});i=!1,this._popContext(),void 0!==n&&e._rejectCallback(n,!0)},r.prototype._settlePromiseFromHandler=function(t,e,i,n){var r=n._bitField;if(0==(65536&r)){n._pushContext();var o;e===k?i&&"number"==typeof i.length?o=M(t).apply(this._boundValue(),i):(o=E,o.e=new v("cannot .spread() a non-array: "+h.classString(i))):o=M(t).call(e,i);var s=n._popContext();0==(65536&(r=n._bitField))&&(o===x?n._reject(i):o===E?n._rejectCallback(o.e,!1):(S.checkForgottenReturns(o,s,"",n,this),n._resolveCallback(o)))}},r.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},r.prototype._followee=function(){return this._rejectionHandler0},r.prototype._setFollowee=function(t){this._rejectionHandler0=t},r.prototype._settlePromise=function(t,e,n,o){var s=t instanceof r,a=this._bitField,l=0!=(134217728&a);0!=(65536&a)?(s&&t._invokeInternalOnCancel(),n instanceof A&&n.isFinallyHandler()?(n.cancelPromise=t,M(e).call(n,o)===E&&t._reject(E.e)):e===u?t._fulfill(u.call(n)):n instanceof i?n._promiseCancelled(t):s||t instanceof C?t._cancel():n.cancel()):"function"==typeof e?s?(l&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,n,o,t)):e.call(n,o,t):n instanceof i?n._isResolved()||(0!=(33554432&a)?n._promiseFulfilled(o,t):n._promiseRejected(o,t)):s&&(l&&t._setAsyncGuaranteed(),0!=(33554432&a)?t._fulfill(o):t._reject(o))},r.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,i=t.promise,n=t.receiver,o=t.value;"function"==typeof e?i instanceof r?this._settlePromiseFromHandler(e,n,o,i):e.call(n,o,i):i instanceof r&&i._reject(o)},r.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},r.prototype._settlePromise0=function(t,e,i){var n=this._promise0,r=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(n,t,r,e)},r.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},r.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var i=c();return this._attachExtraTrace(i),this._reject(i)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!=(134217728&e)?this._settlePromises():g.settlePromises(this))}},r.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16))return this._setRejected(),this._fulfillmentHandler0=t,this._isFinal()?g.fatalError(t,h.isNode):void((65535&e)>0?g.settlePromises(this):this._ensurePossibleRejectionHandled())},r.prototype._fulfillPromises=function(t,e){for(var i=1;t>i;i++){var n=this._fulfillmentHandlerAt(i),r=this._promiseAt(i),o=this._receiverAt(i);this._clearCallbackDataAtIndex(i),this._settlePromise(r,n,o,e)}},r.prototype._rejectPromises=function(t,e){for(var i=1;t>i;i++){var n=this._rejectionHandlerAt(i),r=this._promiseAt(i),o=this._receiverAt(i);this._clearCallbackDataAtIndex(i),this._settlePromise(r,n,o,e)}},r.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!=(16842752&t)){var i=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,i,t),this._rejectPromises(e,i)}else{var n=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,n,t),this._fulfillPromises(e,n)}this._setLength(0)}this._clearCancellationData()},r.prototype._settledValue=function(){var t=this._bitField;return 0!=(33554432&t)?this._rejectionHandler0:0!=(16777216&t)?this._fulfillmentHandler0:void 0},r.defer=r.pending=function(){return S.deprecated("Promise.defer","new Promise"),{promise:new r(w),resolve:o,reject:s}},h.notEnumerableProp(r,"_makeSelfResolutionError",c),t("./method")(r,w,T,p,S),t("./bind")(r,w,T,S),t("./cancel")(r,C,p,S),t("./direct_resolve")(r),t("./synchronous_inspection")(r),t("./join")(r,C,T,w,S),r.Promise=r,t("./map.js")(r,C,p,T,w,S),t("./call_get.js")(r),t("./using.js")(r,p,T,_,w,S),t("./timers.js")(r,w,S),t("./generators.js")(r,p,w,T,i,S),t("./nodeify.js")(r),t("./promisify.js")(r,w),t("./props.js")(r,C,T,p),t("./race.js")(r,w,T,p),t("./reduce.js")(r,C,p,T,w,S),t("./settle.js")(r,C,S),t("./some.js")(r,C,p),t("./filter.js")(r,w),t("./each.js")(r,w),t("./any.js")(r),h.toFastProperties(r),h.toFastProperties(r.prototype),a({a:1}),a({b:2}),a({c:3}),a(1),a(function(){}),a(void 0),a(!1),a(new r(w)),S.setBounds(m.firstLineError,h.lastLineError),r}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(t,e,i){"use strict";e.exports=function(e,i,n,r,o){function s(t){switch(t){case-2:return[];case-3:return{}}}function a(t){var n=this._promise=new e(i);t instanceof e&&n._propagateFrom(t,3),n._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var l=t("./util");return l.isArray,l.inherits(a,o),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function t(i,o){var a=n(this._values,this._promise);if(a instanceof e){a=a._target();var c=a._bitField;if(this._values=a,0==(50397184&c))return this._promise._setAsyncGuaranteed(),a._then(t,this._reject,void 0,this,o);if(0==(33554432&c))return 0!=(16777216&c)?this._reject(a._reason()):this._cancel();a=a._value()}if(null===(a=l.asArray(a))){var u=r("expecting an array or an iterable object but got "+l.classString(a)).reason();return void this._promise._rejectCallback(u,!1)}return 0===a.length?void(-5===o?this._resolveEmptyArray():this._resolve(s(o))):void this._iterate(a)},a.prototype._iterate=function(t){var i=this.getActualLength(t.length);this._length=i,this._values=this.shouldCopyValues()?new Array(i):this._values;for(var r=this._promise,o=!1,s=null,a=0;i>a;++a){var l=n(t[a],r);l instanceof e?(l=l._target(),s=l._bitField):s=null,o?null!==s&&l.suppressUnhandledRejections():null!==s?0==(50397184&s)?(l._proxy(this,a),this._values[a]=l):o=0!=(33554432&s)?this._promiseFulfilled(l._value(),a):0!=(16777216&s)?this._promiseRejected(l._reason(),a):this._promiseCancelled(a):o=this._promiseFulfilled(l,a)}o||r._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},a.prototype._cancel=function(){!this._isResolved()&&this._promise.isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},a.prototype._promiseFulfilled=function(t,e){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var i=0;i<t.length;++i)t[i]instanceof e&&t[i].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(t){return t},a}},{"./util":36}],24:[function(t,e,i){"use strict";e.exports=function(e,i){function n(t){return!w.test(t)}function r(t){try{return!0===t.__isPromisified__}catch(t){return!1}}function o(t,e,i){var n=d.getDataPropertyOrDefault(t,e+i,v);return!!n&&r(n)}function s(t,e,i){for(var n=0;n<t.length;n+=2){var r=t[n];if(i.test(r))for(var o=r.replace(i,""),s=0;s<t.length;s+=2)if(t[s]===o)throw new y("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}function a(t,e,i,n){for(var a=d.inheritedDataKeys(t),l=[],c=0;c<a.length;++c){var u=a[c],p=t[u],h=n===k||k(u,p,t);"function"!=typeof p||r(p)||o(t,u,e)||!n(u,p,t,h)||l.push(u,p)}return s(l,e,i),l}function l(t,n,r,o,s,a){function l(){var r=n;n===p&&(r=this);var o=new e(i);o._captureStackTrace();var s="string"==typeof u&&this!==c?this[u]:t,l=h(o,a);try{s.apply(r,f(arguments,l))}catch(t){o._rejectCallback(m(t),!0,!0)}return o._isFateSealed()||o._setAsyncGuaranteed(),o}var c=function(){return this}(),u=t;return"string"==typeof u&&(t=o),d.notEnumerableProp(l,"__isPromisified__",!0),l}function c(t,e,i,n,r){for(var o=new RegExp(x(e)+"$"),s=a(t,e,o,i),l=0,c=s.length;c>l;l+=2){var u=s[l],h=s[l+1],f=u+e;if(n===T)t[f]=T(u,p,u,h,e,r);else{var m=n(h,function(){return T(u,p,u,h,e,r)});d.notEnumerableProp(m,"__isPromisified__",!0),t[f]=m}}return d.toFastProperties(t),t}function u(t,e,i){return T(t,e,void 0,t,null,i)}var p={},d=t("./util"),h=t("./nodeback"),f=d.withAppended,m=d.maybeWrapAsError,g=d.canEvaluate,y=t("./errors").TypeError,v={__isPromisified__:!0},b=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],w=new RegExp("^(?:"+b.join("|")+")$"),k=function(t){return d.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t},x=function(t){return t.replace(/([$])/,"\\$")},T=g?void 0:l;e.promisify=function(t,e){if("function"!=typeof t)throw new y("expecting a function but got "+d.classString(t));if(r(t))return t;e=Object(e);var i=void 0===e.context?p:e.context,o=!!e.multiArgs,s=u(t,i,o);return d.copyDescriptors(t,s,n),s},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new y("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");e=Object(e);var i=!!e.multiArgs,n=e.suffix;"string"!=typeof n&&(n="Async");var r=e.filter;"function"!=typeof r&&(r=k);var o=e.promisifier;if("function"!=typeof o&&(o=T),!d.isIdentifier(n))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var s=d.inheritedDataKeys(t),a=0;a<s.length;++a){var l=t[s[a]];"constructor"!==s[a]&&d.isClass(l)&&(c(l.prototype,n,r,o,i),c(l,n,r,o,i))}return c(t,n,r,o,i)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,e,i){"use strict";e.exports=function(e,i,n,r){function o(t){var e,i=!1;if(void 0!==a&&t instanceof a)e=p(t),i=!0;else{var n=u.keys(t),r=n.length;e=new Array(2*r);for(var o=0;r>o;++o){var s=n[o];e[o]=t[s],e[o+r]=s}}this.constructor$(e),this._isMap=i,this._init$(void 0,-3)}function s(t){var i,s=n(t);return c(s)?(i=s instanceof e?s._then(e.props,void 0,void 0,void 0,void 0):new o(s).promise(),s instanceof e&&i._propagateFrom(s,2),i):r("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var a,l=t("./util"),c=l.isObject,u=t("./es5");"function"==typeof Map&&(a=Map);var p=function(){function t(t,n){this[e]=t,this[e+i]=n,e++}var e=0,i=0;return function(n){i=n.size,e=0;var r=new Array(2*n.size);return n.forEach(t,r),r}}(),d=function(t){for(var e=new a,i=t.length/2|0,n=0;i>n;++n){var r=t[i+n],o=t[n];e.set(r,o)}return e};l.inherits(o,i),o.prototype._init=function(){},o.prototype._promiseFulfilled=function(t,e){if(this._values[e]=t,++this._totalResolved>=this._length){var i;if(this._isMap)i=d(this._values);else{i={};for(var n=this.length(),r=0,o=this.length();o>r;++r)i[this._values[r+n]]=this._values[r]}return this._resolve(i),!0}return!1},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return s(this)},e.props=function(t){return s(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,i){"use strict";function n(t,e,i,n,r){for(var o=0;r>o;++o)i[o+n]=t[o+e],t[o+e]=void 0}function r(t){this._capacity=t,this._length=0,this._front=0}r.prototype._willBeOverCapacity=function(t){return this._capacity<t},r.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1),this[this._front+e&this._capacity-1]=t,this._length=e+1},r.prototype._unshiftOne=function(t){var e=this._capacity;this._checkCapacity(this.length()+1);var i=this._front,n=(i-1&e-1^e)-e;this[n]=t,this._front=n,this._length=this.length()+1},r.prototype.unshift=function(t,e,i){this._unshiftOne(i),this._unshiftOne(e),this._unshiftOne(t)},r.prototype.push=function(t,e,i){var n=this.length()+3;if(this._willBeOverCapacity(n))return this._pushOne(t),this._pushOne(e),void this._pushOne(i);var r=this._front+n-3;this._checkCapacity(n);var o=this._capacity-1;this[r+0&o]=t,this[r+1&o]=e,this[r+2&o]=i,this._length=n},r.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},r.prototype.length=function(){return this._length},r.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},r.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t,n(this,0,this,e,this._front+this._length&e-1)},e.exports=r},{}],27:[function(t,e,i){"use strict";e.exports=function(e,i,n,r){function o(t,o){var l=n(t);if(l instanceof e)return a(l);if(null===(t=s.asArray(t)))return r("expecting an array or an iterable object but got "+s.classString(t));var c=new e(i);void 0!==o&&c._propagateFrom(o,3);for(var u=c._fulfill,p=c._reject,d=0,h=t.length;h>d;++d){var f=t[d];(void 0!==f||d in t)&&e.cast(f)._then(u,p,void 0,c,null)}return c}var s=t("./util"),a=function(t){return t.then(function(e){return o(e,t)})};e.race=function(t){return o(t,void 0)},e.prototype.race=function(){return o(this,void 0)}}},{"./util":36}],28:[function(t,e,i){"use strict";e.exports=function(e,i,n,r,o,s){function a(t,i,n,r){this.constructor$(t);var s=d();this._fn=null===s?i:s.bind(i),void 0!==n&&(n=e.resolve(n),n._attachCancellationCallback(this)),this._initialValue=n,this._currentCancellable=null,this._eachValues=r===o?[]:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function l(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function c(t,e,i,r){return"function"!=typeof e?n("expecting a function but got "+h.classString(e)):new a(t,e,i,r).promise()}function u(t){this.accum=t,this.array._gotAccum(t);var i=r(this.value,this.array._promise);return i instanceof e?(this.array._currentCancellable=i,i._then(p,void 0,void 0,this,void 0)):p.call(this,i)}function p(t){var i=this.array,n=i._promise,r=f(i._fn);n._pushContext();var o;(o=void 0!==i._eachValues?r.call(n._boundValue(),t,this.index,this.length):r.call(n._boundValue(),this.accum,t,this.index,this.length))instanceof e&&(i._currentCancellable=o);var a=n._popContext();return s.checkForgottenReturns(o,a,void 0!==i._eachValues?"Promise.each":"Promise.reduce",n),o}var d=e._getDomain,h=t("./util"),f=h.tryCatch;h.inherits(a,i),a.prototype._gotAccum=function(t){void 0!==this._eachValues&&t!==o&&this._eachValues.push(t)},a.prototype._eachComplete=function(t){return this._eachValues.push(t),this._eachValues},a.prototype._init=function(){},a.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},a.prototype.shouldCopyValues=function(){return!1},a.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},a.prototype._resultCancelled=function(t){return t===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel()))},a.prototype._iterate=function(t){this._values=t;var i,n,r=t.length;if(void 0!==this._initialValue?(i=this._initialValue,n=0):(i=e.resolve(t[0]),n=1),this._currentCancellable=i,!i.isRejected())for(;r>n;++n){var o={accum:null,value:t[n],index:n,length:r,array:this};i=i._then(u,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(i=i._then(this._eachComplete,void 0,void 0,this,void 0)),i._then(l,l,void 0,i,this)},e.prototype.reduce=function(t,e){return c(this,t,e,null)},e.reduce=function(t,e,i,n){return c(t,e,i,n)}}},{"./util":36}],29:[function(t,i,o){"use strict";var s,a=t("./util"),l=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},c=a.getNativePromise();if(a.isNode&&"undefined"==typeof MutationObserver){var u=n.setImmediate,p=e.nextTick;s=a.isRecentNode?function(t){u.call(n,t)}:function(t){p.call(e,t)}}else if("function"==typeof c){var d=c.resolve();s=function(t){d.then(t)}}else s="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&window.navigator.standalone?void 0!==r?function(t){r(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:l:function(){var t=document.createElement("div"),e={attributes:!0},i=!1,n=document.createElement("div");new MutationObserver(function(){t.classList.toggle("foo"),i=!1}).observe(n,e);var r=function(){i||(i=!0,n.classList.toggle("foo"))};return function(i){var n=new MutationObserver(function(){n.disconnect(),i()});n.observe(t,e),r()}}();i.exports=s},{"./util":36}],30:[function(t,e,i){"use strict";e.exports=function(e,i,n){function r(t){this.constructor$(t)}var o=e.PromiseInspection;t("./util").inherits(r,i),r.prototype._promiseResolved=function(t,e){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},r.prototype._promiseFulfilled=function(t,e){var i=new o;return i._bitField=33554432,i._settledValueField=t,this._promiseResolved(e,i)},r.prototype._promiseRejected=function(t,e){var i=new o;return i._bitField=16777216,i._settledValueField=t,this._promiseResolved(e,i)},e.settle=function(t){return n.deprecated(".settle()",".reflect()"),new r(t).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(t,e,i){"use strict";e.exports=function(e,i,n){function r(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(t,e){if((0|e)!==e||0>e)return n("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var i=new r(t),o=i.promise();return i.setHowMany(e),i.init(),o}var s=t("./util"),a=t("./errors").RangeError,l=t("./errors").AggregateError,c=s.isArray,u={};s.inherits(r,i),r.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var t=c(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},r.prototype.init=function(){this._initialized=!0,this._init()},r.prototype.setUnwrap=function(){this._unwrap=!0},r.prototype.howMany=function(){return this._howMany},r.prototype.setHowMany=function(t){this._howMany=t},r.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},r.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},r.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(u),this._checkOutcome())},r.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new l,e=this.length();e<this._values.length;++e)this._values[e]!==u&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},r.prototype._fulfilled=function(){return this._totalResolved},r.prototype._rejected=function(){return this._values.length-this.length()},r.prototype._addRejected=function(t){this._values.push(t)},r.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},r.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},r.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new a(e)},r.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return o(t,e)},e.prototype.some=function(t){return o(this,t)},e._SomePromiseArray=r}},{"./errors":12,"./util":36}],32:[function(t,e,i){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var i=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},n=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=e.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},s=e.prototype.isPending=function(){return 0==(50397184&this._bitField)},a=e.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};e.prototype.isCancelled=t.prototype._isCancelled=function(){return 65536==(65536&this._bitField)},t.prototype.isCancelled=function(){return this._target()._isCancelled()},t.prototype.isPending=function(){return s.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return r.call(this._target())},t.prototype.isResolved=function(){return a.call(this._target())},t.prototype.value=function(){return i.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),n.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,i){"use strict";e.exports=function(e,i){function n(t,n){if(u(t)){if(t instanceof e)return t;var r=o(t);if(r===c){n&&n._pushContext();var l=e.reject(r.e);return n&&n._popContext(),l}if("function"==typeof r){if(s(t)){var l=new e(i);return t._then(l._fulfill,l._reject,void 0,l,null),l}return a(t,r,n)}}return t}function r(t){return t.then}function o(t){try{return r(t)}catch(t){return c.e=t,c}}function s(t){return p.call(t,"_promise0")}function a(t,n,r){function o(t){a&&(a._resolveCallback(t),a=null)}function s(t){a&&(a._rejectCallback(t,p,!0),a=null)}var a=new e(i),u=a;r&&r._pushContext(),a._captureStackTrace(),r&&r._popContext();var p=!0,d=l.tryCatch(n).call(t,o,s);return p=!1,a&&d===c&&(a._rejectCallback(d.e,!0,!0),a=null),u}var l=t("./util"),c=l.errorObj,u=l.isObject,p={}.hasOwnProperty;return n}},{"./util":36}],34:[function(t,e,i){"use strict";e.exports=function(e,i,n){function r(t){this.handle=t}function o(t){return clearTimeout(this.handle),t}function s(t){throw clearTimeout(this.handle),t}var a=t("./util"),l=e.TimeoutError;r.prototype._resultCancelled=function(){clearTimeout(this.handle)};var c=function(t){return u(+this).thenReturn(t)},u=e.delay=function(t,o){var s,a;return void 0!==o?(s=e.resolve(o)._then(c,null,null,t,void 0),n.cancellation()&&o instanceof e&&s._setOnCancel(o)):(s=new e(i),a=setTimeout(function(){s._fulfill()},+t),n.cancellation()&&s._setOnCancel(new r(a))),s._setAsyncGuaranteed(),s};e.prototype.delay=function(t){return u(t,this)};var p=function(t,e,i){var n;n="string"!=typeof e?e instanceof Error?e:new l("operation timed out"):new l(e),a.markAsOriginatingFromRejection(n),t._attachExtraTrace(n),t._reject(n),null!=i&&i.cancel()};e.prototype.timeout=function(t,e){t=+t;var i,a,l=new r(setTimeout(function(){i.isPending()&&p(i,e,a)},t));return n.cancellation()?(a=this.then(),i=a._then(o,s,void 0,l,void 0),i._setOnCancel(l)):i=this._then(o,s,void 0,l,void 0),i}}},{"./util":36}],35:[function(t,e,i){"use strict";e.exports=function(e,i,n,r,o,s){function a(t){setTimeout(function(){throw t},0)}function l(t){var e=n(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}function c(t,i){function r(){if(s>=c)return u._fulfill();var o=l(t[s++]);if(o instanceof e&&o._isDisposable()){try{o=n(o._getDisposer().tryDispose(i),t.promise)}catch(t){return a(t)}if(o instanceof e)return o._then(r,a,null,null,null)}r()}var s=0,c=t.length,u=new e(o);return r(),u}function u(t,e,i){this._data=t,this._promise=e,this._context=i}function p(t,e,i){this.constructor$(t,e,i)}function d(t){return u.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function h(t){this.length=t,this.promise=null,this[t-1]=null}var f=t("./util"),m=t("./errors").TypeError,g=t("./util").inherits,y=f.errorObj,v=f.tryCatch;u.prototype.data=function(){return this._data},u.prototype.promise=function(){return this._promise},u.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null},u.prototype.tryDispose=function(t){var e=this.resource(),i=this._context;void 0!==i&&i._pushContext();var n=null!==e?this.doDispose(e,t):null;return void 0!==i&&i._popContext(),this._promise._unsetDisposable(),this._data=null,n},u.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},g(p,u),p.prototype.doDispose=function(t,e){return this.data().call(t,t,e)},h.prototype._resultCancelled=function(){for(var t=this.length,i=0;t>i;++i){var n=this[i];n instanceof e&&n.cancel()}},e.using=function(){var t=arguments.length;if(2>t)return i("you must pass at least 2 arguments to Promise.using");var r=arguments[t-1];if("function"!=typeof r)return i("expecting a function but got "+f.classString(r));var o,a=!0;2===t&&Array.isArray(arguments[0])?(o=arguments[0],t=o.length,a=!1):(o=arguments,t--);for(var l=new h(t),p=0;t>p;++p){var m=o[p];if(u.isDisposer(m)){var g=m;m=m.promise(),m._setDisposable(g)}else{var b=n(m);b instanceof e&&(m=b._then(d,null,null,{resources:l,index:p},void 0))}l[p]=m}for(var w=new Array(l.length),p=0;p<w.length;++p)w[p]=e.resolve(l[p]).reflect();var k=e.all(w).then(function(t){for(var e=0;e<t.length;++e){var i=t[e];if(i.isRejected())return y.e=i.error(),y;if(!i.isFulfilled())return void k.cancel();t[e]=i.value()}x._pushContext(),r=v(r);var n=a?r.apply(void 0,t):r(t),o=x._popContext();return s.checkForgottenReturns(n,o,"Promise.using",x),n}),x=k.lastly(function(){var t=new e.PromiseInspection(k);return c(l,t)});return l.promise=x,x._setOnCancel(l),x},e.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new p(t,this,r());throw new m}}},{"./errors":12,"./util":36}],36:[function(t,r,o){"use strict";function s(){try{var t=A;return A=null,t.apply(this,arguments)}catch(t){return E.e=t,E}}function a(t){return A=t,s}function l(t){return null==t||!0===t||!1===t||"string"==typeof t||"number"==typeof t}function c(t){return"function"==typeof t||"object"==typeof t&&null!==t}function u(t){return l(t)?new Error(b(t)):t}function p(t,e){var i,n=t.length,r=new Array(n+1);for(i=0;n>i;++i)r[i]=t[i];return r[i]=e,r}function d(t,e,i){if(!O.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var n=Object.getOwnPropertyDescriptor(t,e);return null!=n?null==n.get&&null==n.set?n.value:i:void 0}function h(t,e,i){if(l(t))return t;var n={value:i,configurable:!0,enumerable:!1,writable:!0};return O.defineProperty(t,e,n),t}function f(t){throw t}function m(t){try{if("function"==typeof t){var e=O.names(t.prototype),i=O.isES5&&e.length>1,n=e.length>0&&!(1===e.length&&"constructor"===e[0]),r=j.test(t+"")&&O.names(t).length>0;if(i||n||r)return!0}return!1}catch(t){return!1}}function g(t){function e(){}e.prototype=t;for(var i=8;i--;)new e;return t}function y(t){return N.test(t)}function v(t,e,i){for(var n=new Array(t),r=0;t>r;++r)n[r]=e+r+i;return n}function b(t){try{return t+""}catch(t){return"[no string representation]"}}function w(t){return null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function k(t){try{h(t,"isOperational",!0)}catch(t){}}function x(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===t.isOperational)}function T(t){return w(t)&&O.propertyIsWritable(t,"stack")}function C(t){return{}.toString.call(t)}function I(t,e,i){for(var n=O.names(t),r=0;r<n.length;++r){var o=n[r];if(i(o))try{O.defineProperty(e,o,O.getDescriptor(t,o))}catch(t){}}}function _(t,e){return z?i.i({DEBUG:void 0,NODE_ENV:"production"})[t]:e}function S(){if("function"==typeof Promise)try{var t=new Promise(function(){});if("[object Promise]"==={}.toString.call(t))return Promise}catch(t){}}var A,O=t("./es5"),P="undefined"==typeof navigator,E={e:{}},M="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:void 0!==this?this:null,L=function(t,e){function i(){this.constructor=t,this.constructor$=e;for(var i in e.prototype)n.call(e.prototype,i)&&"$"!==i.charAt(i.length-1)&&(this[i+"$"]=e.prototype[i])}var n={}.hasOwnProperty;return i.prototype=e.prototype,t.prototype=new i,t.prototype},D=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var i=0;i<t.length;++i)if(t[i]===e)return!0;return!1};if(O.isES5){var i=Object.getOwnPropertyNames;return function(t){for(var n=[],r=Object.create(null);null!=t&&!e(t);){var o;try{o=i(t)}catch(t){return n}for(var s=0;s<o.length;++s){var a=o[s];if(!r[a]){r[a]=!0;var l=Object.getOwnPropertyDescriptor(t,a);null!=l&&null==l.get&&null==l.set&&n.push(a)}}t=O.getPrototypeOf(t)}return n}}var n={}.hasOwnProperty;return function(i){if(e(i))return[];var r=[];t:for(var o in i)if(n.call(i,o))r.push(o);else{for(var s=0;s<t.length;++s)if(n.call(t[s],o))continue t;r.push(o)}return r}}(),j=/this\s*\.\s*\S+\s*=/,N=/^[a-z$_][a-z$_0-9]*$/i,F=function(){return"stack"in new Error?function(t){return T(t)?t:new Error(b(t))}:function(t){if(T(t))return t;try{throw new Error(b(t))}catch(t){return t}}}(),R=function(t){return O.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var U="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,i=[],n=t[Symbol.iterator]();!(e=n.next()).done;)i.push(e.value);return i};R=function(t){return O.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?U(t):null}}var z=void 0!==e&&"[object process]"===C(e).toLowerCase(),B={isClass:m,isIdentifier:y,inheritedDataKeys:D,getDataPropertyOrDefault:d,thrower:f,isArray:O.isArray,asArray:R,notEnumerableProp:h,isPrimitive:l,isObject:c,isError:w,canEvaluate:P,errorObj:E,tryCatch:a,inherits:L,withAppended:p,maybeWrapAsError:u,toFastProperties:g,filledRange:v,toString:b,canAttachTrace:T,ensureErrorObject:F,originatesFromRejection:x,markAsOriginatingFromRejection:k,classString:C,copyDescriptors:I,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:z,env:_,global:M,getNativePromise:S};B.isRecentNode=B.isNode&&function(){var t=e.versions.node.split(".").map(Number);return 0===t[0]&&t[1]>10||t[0]>0}(),B.isNode&&B.toFastProperties(e);try{throw new Error}catch(t){B.lastLineError=t}r.exports=B},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(e,i(166),i(28),i(403).setImmediate)},1118:function(t,e,i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}};n=[i(164),i(1133),i(1175),i(1923)],void 0!==(r=function(t,e,i,n){var r;return r=function(){function r(t){return this.ViewUpcomingEvents=o(this.ViewUpcomingEvents,this),this.ViewUpdates=o(this.ViewUpdates,this),this.ConvertProject=o(this.ConvertProject,this),this.CopyProject=o(this.CopyProject,this),this.OpenTrashCan=o(this.OpenTrashCan,this),this.SetOwner=o(this.SetOwner,this),this.Archive=o(this.Archive,this),this.UndoDelete=o(this.UndoDelete,this),this.Delete=o(this.Delete,this),this.defaultFilters={},this.UpdateData(t),n.storeSync(app.hybrid.store,function(e){return e.project.records[t.id]},this,["status","subStatus"]),this}return r.prototype.UpdateData=function(n){var r,o,s,a,l,c,u,p,d,h,f,m,g,y,v,b,w,k,x,T,C,I;if(n.id=parseInt(n.id,10),null!=(null!=(y=n.company)?y.id:void 0)&&(n.company.id=parseInt(n.company.id,10)),null==n.isSelected&&(n.isSelected=!1),null==n.chatChannelEnabled&&(n.chatChannelEnabled=!1),null==n.harvestTimersEnabled&&(n.harvestTimersEnabled=!1),"boolean"!=typeof n.harvestTimersEnabled&&(C=parseInt(n.harvestTimersEnabled,10))&&(n.harvestTimersEnabled=!!C),null==(null!=n?n.announcement:void 0)&&(n.announcement=""),null==n.isSampleProject&&(n.isSampleProject=!1),null==n.isOnBoardingProject&&(n.isOnBoardingProject=!1),null==n.canEdit&&(n.canEdit=(app.loggedInUser.administrator()||(null!=(v=n.permissions)?v.projectAdministrator:void 0))&&app.loggedInUser.inOwnerCompany()),null==n.cardId&&(n.cardId=0),null==n.startDate&&(n.startDate=""),null==n.endDate&&(n.endDate=""),null==n.type&&(n.type="normal"),null==n.isPrivate&&(n.isPrivate=!1),null==n.milestones&&(n.milestones={dueDates:{},numberOfMilestones:0}),null!=n.activePages){b=n.activePages;for(f in b)d=b[f],!0===d?n.activePages[f]="1":!1===d&&(n.activePages[f]="0")}null==n.portfolioBoards&&(n.portfolioBoards=[]),null==(null!=(w=n.boardData)?w.board:void 0)&&(n.boardData={board:{name:"",id:0,color:""},card:{id:0},column:{name:"",id:0,color:"transparent"}}),""===n.boardData.column.color&&(n.boardData.column.color="transparent"),n.boardColumn=n.boardData.column,n.cardId=parseInt(n.boardData.card.id,10),null==(null!=n?n.dateArchived:void 0)&&(n.dateArchived=""),null==(null!=n?n.archivedByUserId:void 0)&&(n.archivedByUserId=0),null==(null!=n?n.archivedByUserName:void 0)&&(n.archivedByUserName=""),null==(null!=n?n.endDate:void 0)&&(n.endDate=""),null==(null!=n?n.tags:void 0)&&(n.tags=[]),null==(null!=n?n.people:void 0)&&(n.people=[]),null==n.category&&(n.category={id:"",name:"",color:""}),null!=n.category&&(null==(r=n.category).color&&(r.color=""),""===n.category.color?n.category.color="transparent":n.category.color=app.utility.GetValidHex(n.category.color,!1)),null==n.tasksStartPage&&(n.tasksStartPage="default"),"projectoverview"===n.startPage?n.startPage="overview":"notebook"===n.startPage?n.startPage="notebooks":"riskregister"===n.startPage&&(n.startPage="risks"),"overview"===n.startPage&&(null==n.overviewStartPage&&(n.overviewStartPage="default"),"default"===n.overviewStartPage?(h=null!=(k=app.cache.get("last-overview-section"))?k:"summary",n.startPage="summary"===h||"activity"===h?"overview/"+h:"overview/summary"):"summary"===n.overviewStartPage?n.startPage="overview/summary":"activity"===n.overviewStartPage&&(n.startPage="overview/activity")),null!=n.activePages&&null!=n.permissions&&"comments"!==n.startPage&&(m="risks"===n.startPage?"riskRegister":n.startPage,g=function(){switch(m){case"tasks":case"milestones":return"viewTasksAndMilestones";case"messages":case"files":return"viewMessagesAndFiles";case"time":return"viewTimeLog";case"notebooks":return"viewNotebook";case"riskRegister":return"viewRiskRegister";case"links":return"viewLinks";case"billing":return"canAccessInvoiceTracking"}}(),-1!==m.indexOf("overview")||"0"!==n.activePages[m]&&n.permissions[g]||(n.startPage="overview/summary")),app.loggedInUser.administrator()||app.loggedInUser.permissions.canManageProjectTemplates(),T=null!=(x=n.defaultFilters)?x:{};for(I in T)p=T[I],null!=this.defaultFilters[I]?this.defaultFilters[I].Update(p):this.defaultFilters[I]=new i(p);return null!=n.permissions&&(null==(o=n.permissions).canAddProjectUpdate&&(o.canAddProjectUpdate=!1),null==(s=n.permissions).canViewProjectUpdate&&(s.canViewProjectUpdate=!1),null==(a=n.permissions).canViewProjectMembers&&(a.canViewProjectMembers=!1),null==(l=n.permissions).canAddRisks&&(l.canAddRisks=!1),null==(c=n.permissions).canAddExpenses&&(c.canAddExpenses=!0),null==(u=n.permissions).viewRiskRegister&&(u.viewRiskRegister=!1)),null==n.update&&(n.update={id:0,health:0}),null==n.owner&&(n.owner={id:0,fullName:""}),null==n.projectOwnerId&&(n.projectOwnerId=0),null==n.lastWorkedOn&&(n.lastWorkedOn=""),0!==n.owner.id&&(n.projectOwnerId=n.owner.id),null!=n.owner.avatarUrl&&(n.owner.avatarUrl=n.owner.avatarUrl.replace(/https:\/\/s3.amazonaws.com\/tw-desk\/i\//gi,"https://tw-desk-files.teamwork.com/i/")),e.fromJS(n,{ignore:["defaultFilters","milestones"]},this),this.milestones=t.observable(n.milestones),null==this.isActive&&(this.isActive=t.pureComputed(function(t){return function(){return"archived"!==t.status()}}(this))),this.isTemplate=t.pureComputed(function(t){return function(){return t.type()===app.consts.PROJECT_TEMPLATE}}(this)),this.duration=t.pureComputed(function(e){return function(){var i,r,o,s;return"projects-template"===n.type?s=app.consts.DATES.teamworkEpoch().format("YYYYMMDD"):null!=(null!=(r=e.minMaxAvailableDates)?r.suggestedStartDate:void 0)&&(s=t.unwrap(e.minMaxAvailableDates.suggestedStartDate)),i=(null!=(o=e.minMaxAvailableDates)&&"function"==typeof o.deadlinesFound?o.deadlinesFound():void 0)?app.utility.getDatesDuration(s,e.minMaxAvailableDates.suggestedEndDate(),!1):1,{label:1===i?app.tl("[_s] Day",i):app.tl("[_s] Days",i),numDays:i}}}(this)),null==this.lastView&&(this.lastView=t.observable(app.cache.get("project-"+this.id()+"-view")||"new")),this.componentName="Project",this},r.prototype.OnClickStar=function(){this.starred(!this.starred()),app.api.put("./projects/"+this.id()+"/"+(this.starred()?"star.json":"unstar.json"),{}).then(function(t){return function(e){var i;if("OK"!==e.response.STATUS&&(app.flash.Error(app.tl("Oops! Something went wrong, please try again")),t.starred(!t.starred())),app.ko.postbox.publish("projects-update-stats",{}),app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"project",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:t.id(),subType:t.starred()?"starred":"unstarred"}),null!=(null!=(i=app.cachedProjects)?i[t.id()]:void 0))return app.cachedProjects[t.id()].starred(t.starred())}}(this))},r.prototype.ViewHistory=function(){if(app.featureFlip.check("audittrail",{unwrap:!0}))return app.quickView.show("audit",{itemId:this.id(),itemType:"project"})},r.prototype.Edit=function(){if(this.isActive()&&(this.permissions.projectAdministrator()||app.loggedInUser.administrator()))return app.modal.Show("addOrEditProject",{mode:"edit",project:this,tab:"description"})},r.prototype.EditDates=function(){if(this.isActive()&&(this.permissions.projectAdministrator()||app.loggedInUser.administrator()))return app.modal.Show("addOrEditProject",{mode:"edit",project:this,tab:"dates"})},r.prototype.EditDescription=function(){if(this.isActive()&&(this.permissions.projectAdministrator()||app.loggedInUser.administrator()))return app.modal.Show("addOrEditProject",{mode:"edit",project:this,tab:"description"})},r.prototype.EditColumn=function(){if(this.isActive()&&(this.permissions.projectAdministrator()||app.loggedInUser.administrator()))return app.modal.Show("changeBoardColumn",{boardId:this.boardData.board.id(),boardType:"project",item:this})},r.prototype.EditCategory=function(){if(this.isActive()&&(this.permissions.projectAdministrator()||app.loggedInUser.administrator()))return app.modal.Show("addOrEditProject",{mode:"edit",project:this,tab:"advanced"})},r.prototype.QuickView=function(){return app.quickView.show("project",{id:this.id(),project:this,title:t.observable("<a href='#projects/"+this.id()+"'>"+app.utility.SafeHTML(this.name())+"</a>"),projectId:this.id(),isQuickView:!0})},r.prototype.Complete=function(){Tipped.hideAll(),app.api.put("projects/"+this.id()+"/complete.json").then(function(t){return function(){return app.flash.Success(app.tl("This project has been marked complete")),null!=t.subStatus&&t.subStatus("completed"),null!=app.currentRoute().project?app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"project",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:t.id(),subType:"completed"}):app.ko.postbox.publish("projects-updated",{})}}(this))},r.prototype.Uncomplete=function(){Tipped.hideAll(),app.api.put("projects/"+this.id()+"/uncomplete.json").then(function(t){return function(){var e,i,n,r;return app.flash.Success(app.tl("This project has been marked incomplete")),n="current",r=moment().startOf("day"),i=moment(t.startDate()).startOf("day"),e=moment(t.endDate()).startOf("day"),i.diff(r,"days")>0?n="upcoming":e.diff(r,"days")<0&&(n="late"),null!=t.subStatus&&t.subStatus(n),null!=app.currentRoute().project?app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"project",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:t.id(),subType:"uncompleted"}):app.ko.postbox.publish("projects-updated",{})}}(this))},r.prototype.BrowseTo=function(){app.GoTo("projects/"+this.urlCode()+"/"+this.lastView())},r.prototype.Delete=function(t){var e,i;t||(t=this.id()),i=app.tl("Confirm Delete"),e=app.tl("This project will be moved to the trash can. After [_s] days this project and all attached files will be completely removed.","30"),app.modal.Show("confirm",{title:i,text:e,callback:function(e){return function(i){if(!i.wasCancelled)return app.api.delete("projects/"+t+".json").then(function(i){var n;return e.status("deleted"),app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"project",actionType:app.consts.ACTIONTYPE.DELETED,itemId:t}),null!=app.currentRoute().projectId&&app.currentRoute().projectId===t?(n="#/projects/"+app.currentRoute().projectId,app.flash.Success(app.tl("Project deleted"),{undo:function(){return e.UndoDelete(n)}}),app.GoTo("#")):app.flash.Success(app.tl("Project deleted"),{undo:e.UndoDelete})})}}(this)})},r.prototype.UndoDelete=function(t){var e;return e="trashcan/projects/"+this.id()+"/restore.json",app.api.put(e,{}).then(function(e){return function(i){var n;if(app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"project",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:e.id()}),null!=(null!=(n=app.cachedProjects)?n[e.id()]:void 0)&&app.cachedProjects[e.id()].status("active"),app.flash.Success(app.tl("Project restored")),"string"==typeof t)return app.GoTo(t)}}(this))},r.prototype.Archive=function(){var t,e,i;return e=["active","inactive"][!!this.isActive()/1],"active"===e?(i=app.tl("Unarchive this project?"),t=app.tl("Are you sure you want to unarchive this project?")):(i=app.tl("Archive this project?"),t=app.tl("Are you sure you want to archive this project?")),app.modal.Show("confirm",{title:i,text:t,callback:function(t){return function(n){if(!n.wasCancelled)return app.api.put("projects/"+t.id()+"/archive.json",{status:e}).then(function(e){var n;return"OK"===e.response.STATUS?(app.UpdateProjectAndPermissions(t.id()),app.ko.postbox.publish("projects-updated",{}),app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"project",actionType:app.consts.ACTIONTYPE.UPDATED,subType:"archived",itemId:t.id()})):"UPGRADE_REQUIRED"===e.response.STATUS?(i=app.tl("Oops, upgrade required!"),n=app.tl("You have already reached the maximum number of projects allowed with your current price plan"),app.loggedInUser.inOwnerCompany()&&app.loggedInUser.administrator()?app.GoTo("settings/subscription"):(i=app.tl("Project limit reached"),n=app.tl("Please contact the site owner")),app.flash.Error(i,n)):void 0})}}(this)})},r.prototype.SetOwner=function(){return app.modal.Show("changeProjectOwner",{projectId:this.id(),user:this.owner})},r.prototype.OpenTrashCan=function(){return app.modal.Show("trashCan",{item:this})},r.prototype.CopyProject=function(){return app.modal.Show("cloneProject",{item:this,isTemplate:this.isTemplate()})},r.prototype.ConvertProject=function(){return app.modal.Show("cloneProject",{item:this,toTemplate:!0})},r.prototype.ViewUpdates=function(){return app.quickView.show("projectUpdates",{projectId:this.id()})},r.prototype.ViewUpcomingEvents=function(){return app.quickView.show("events-new",{title:app.tl("Events"),projectId:this.id(),isQuickView:!0})},r.prototype.LoadUpdate=function(t){var e;return e=app.prefixApi("projects/"+this.id()+".json?getPermissions=true&getNotificationSettings=true&getActivePages=true&getDateInfo=true&getEmailAddress=true&formatMarkdown=false&includeProjectOwner=true&includeCustomFields=true","API_PREFIX_V2","API_PREFIX_V2"),app.api.get(e).then(function(t){return function(e){return t.UpdateData(e.response.project)}}(this))},r}(),r.mapping={projects:{key:function(e){return t.unwrap(e.id)},create:function(t){return new r(t.data)}}},r}.apply(e,n))&&(t.exports=r)},1119:function(t,e,i){(function(n){var r,o=function(t,e){return function(){return t.apply(e,arguments)}};void 0!==(r=function(){return new(function(){function t(){this.nl2br=o(this.nl2br,this),this.getFirstLetter=o(this.getFirstLetter,this),this.removeDiacritics=o(this.removeDiacritics,this),this.initDiacritics=o(this.initDiacritics,this),this.dashCase=o(this.dashCase,this),this.diacriticsMap={}}return t.prototype.camelize=function(){var t,e,i,n,r,o,s,a,l;return l=function(e){return e&&"object"==typeof e?n(e)||r(e)?e:i(e)?o(e,l):a(s(e),function(i,n){var r;return r=t(n),i[r]=l(e[n]),i},{}):e},t=function(t){return t.replace(/[_.-](\w|$)/g,function(t,e){return e.toUpperCase()})},o=function(t,e){var i,n;if(t.map)return t.map(e);for(n=[],i=0;i<t.length;)n.push(e(t[i],i)),i++;return n},a=function(t,e,i){var n;if(t.reduce)return t.reduce(e,i);for(n=0;n<t.length;)i=e(i,t[n],n),n++;return i},i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},n=function(t){return"[object Date]"===Object.prototype.toString.call(t)},r=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},e=Object.prototype.hasOwnProperty,s=Object.keys||function(t){var i,n;n=[];for(i in t)e.call(t,i)&&n.push(i);return n},function(e){return"string"==typeof e?t(e):l(e)}}(),t.prototype.defaultDiacriticsRemovalMap=[{base:"A",letters:"A\u24b6\uff21\xc0\xc1\xc2\u1ea6\u1ea4\u1eaa\u1ea8\xc3\u0100\u0102\u1eb0\u1eae\u1eb4\u1eb2\u0226\u01e0\xc4\u01de\u1ea2\xc5\u01fa\u01cd\u0200\u0202\u1ea0\u1eac\u1eb6\u1e00\u0104\u023a\u2c6f"},{base:"AA",letters:"\ua732"},{base:"AE",letters:"\xc6\u01fc\u01e2"},{base:"AO",letters:"\ua734"},{base:"AU",letters:"\ua736"},{base:"AV",letters:"\ua738\ua73a"},{base:"AY",letters:"\ua73c"},{base:"B",letters:"B\u24b7\uff22\u1e02\u1e04\u1e06\u0243\u0182\u0181"},{base:"C",letters:"C\u24b8\uff23\u0106\u0108\u010a\u010c\xc7\u1e08\u0187\u023b\ua73e"},{base:"D",letters:"D\u24b9\uff24\u1e0a\u010e\u1e0c\u1e10\u1e12\u1e0e\u0110\u018b\u018a\u0189\ua779\xd0"},{base:"DZ",letters:"\u01f1\u01c4"},{base:"Dz",letters:"\u01f2\u01c5"},{base:"E",letters:"E\u24ba\uff25\xc8\xc9\xca\u1ec0\u1ebe\u1ec4\u1ec2\u1ebc\u0112\u1e14\u1e16\u0114\u0116\xcb\u1eba\u011a\u0204\u0206\u1eb8\u1ec6\u0228\u1e1c\u0118\u1e18\u1e1a\u0190\u018e"},{base:"F",letters:"F\u24bb\uff26\u1e1e\u0191\ua77b"},{base:"G",letters:"G\u24bc\uff27\u01f4\u011c\u1e20\u011e\u0120\u01e6\u0122\u01e4\u0193\ua7a0\ua77d\ua77e"},{base:"H",letters:"H\u24bd\uff28\u0124\u1e22\u1e26\u021e\u1e24\u1e28\u1e2a\u0126\u2c67\u2c75\ua78d"},{base:"I",letters:"I\u24be\uff29\xcc\xcd\xce\u0128\u012a\u012c\u0130\xcf\u1e2e\u1ec8\u01cf\u0208\u020a\u1eca\u012e\u1e2c\u0197"},{base:"J",letters:"J\u24bf\uff2a\u0134\u0248"},{base:"K",letters:"K\u24c0\uff2b\u1e30\u01e8\u1e32\u0136\u1e34\u0198\u2c69\ua740\ua742\ua744\ua7a2"},{base:"L",letters:"L\u24c1\uff2c\u013f\u0139\u013d\u1e36\u1e38\u013b\u1e3c\u1e3a\u0141\u023d\u2c62\u2c60\ua748\ua746\ua780"},{base:"LJ",letters:"\u01c7"},{base:"Lj",letters:"\u01c8"},{base:"M",letters:"M\u24c2\uff2d\u1e3e\u1e40\u1e42\u2c6e\u019c"},{base:"N",letters:"N\u24c3\uff2e\u01f8\u0143\xd1\u1e44\u0147\u1e46\u0145\u1e4a\u1e48\u0220\u019d\ua790\ua7a4"},{base:"NJ",letters:"\u01ca"},{base:"Nj",letters:"\u01cb"},{base:"O",letters:"O\u24c4\uff2f\xd2\xd3\xd4\u1ed2\u1ed0\u1ed6\u1ed4\xd5\u1e4c\u022c\u1e4e\u014c\u1e50\u1e52\u014e\u022e\u0230\xd6\u022a\u1ece\u0150\u01d1\u020c\u020e\u01a0\u1edc\u1eda\u1ee0\u1ede\u1ee2\u1ecc\u1ed8\u01ea\u01ec\xd8\u01fe\u0186\u019f\ua74a\ua74c"},{base:"OI",letters:"\u01a2"},{base:"OO",letters:"\ua74e"},{base:"OU",letters:"\u0222"},{base:"OE",letters:"\x8c\u0152"},{base:"oe",letters:"\x9c\u0153"},{base:"P",letters:"P\u24c5\uff30\u1e54\u1e56\u01a4\u2c63\ua750\ua752\ua754"},{base:"Q",letters:"Q\u24c6\uff31\ua756\ua758\u024a"},{base:"R",letters:"R\u24c7\uff32\u0154\u1e58\u0158\u0210\u0212\u1e5a\u1e5c\u0156\u1e5e\u024c\u2c64\ua75a\ua7a6\ua782"},{base:"S",letters:"S\u24c8\uff33\u1e9e\u015a\u1e64\u015c\u1e60\u0160\u1e66\u1e62\u1e68\u0218\u015e\u2c7e\ua7a8\ua784"},{base:"T",letters:"T\u24c9\uff34\u1e6a\u0164\u1e6c\u021a\u0162\u1e70\u1e6e\u0166\u01ac\u01ae\u023e\ua786"},{base:"TZ",letters:"\ua728"},{base:"U",letters:"U\u24ca\uff35\xd9\xda\xdb\u0168\u1e78\u016a\u1e7a\u016c\xdc\u01db\u01d7\u01d5\u01d9\u1ee6\u016e\u0170\u01d3\u0214\u0216\u01af\u1eea\u1ee8\u1eee\u1eec\u1ef0\u1ee4\u1e72\u0172\u1e76\u1e74\u0244"},{base:"V",letters:"V\u24cb\uff36\u1e7c\u1e7e\u01b2\ua75e\u0245"},{base:"VY",letters:"\ua760"},{base:"W",letters:"W\u24cc\uff37\u1e80\u1e82\u0174\u1e86\u1e84\u1e88\u2c72"},{base:"X",letters:"X\u24cd\uff38\u1e8a\u1e8c"},{base:"Y",letters:"Y\u24ce\uff39\u1ef2\xdd\u0176\u1ef8\u0232\u1e8e\u0178\u1ef6\u1ef4\u01b3\u024e\u1efe"},{base:"Z",letters:"Z\u24cf\uff3a\u0179\u1e90\u017b\u017d\u1e92\u1e94\u01b5\u0224\u2c7f\u2c6b\ua762"},{base:"a",letters:"a\u24d0\uff41\u1e9a\xe0\xe1\xe2\u1ea7\u1ea5\u1eab\u1ea9\xe3\u0101\u0103\u1eb1\u1eaf\u1eb5\u1eb3\u0227\u01e1\xe4\u01df\u1ea3\xe5\u01fb\u01ce\u0201\u0203\u1ea1\u1ead\u1eb7\u1e01\u0105\u2c65\u0250"},{base:"aa",letters:"\ua733"},{base:"ae",letters:"\xe6\u01fd\u01e3"},{base:"ao",letters:"\ua735"},{base:"au",letters:"\ua737"},{base:"av",letters:"\ua739\ua73b"},{base:"ay",letters:"\ua73d"},{base:"b",letters:"b\u24d1\uff42\u1e03\u1e05\u1e07\u0180\u0183\u0253"},{base:"c",letters:"c\u24d2\uff43\u0107\u0109\u010b\u010d\xe7\u1e09\u0188\u023c\ua73f\u2184"},{base:"d",letters:"d\u24d3\uff44\u1e0b\u010f\u1e0d\u1e11\u1e13\u1e0f\u0111\u018c\u0256\u0257\ua77a"},{base:"dz",letters:"\u01f3\u01c6"},{base:"e",letters:"e\u24d4\uff45\xe8\xe9\xea\u1ec1\u1ebf\u1ec5\u1ec3\u1ebd\u0113\u1e15\u1e17\u0115\u0117\xeb\u1ebb\u011b\u0205\u0207\u1eb9\u1ec7\u0229\u1e1d\u0119\u1e19\u1e1b\u0247\u025b\u01dd"},{base:"f",letters:"f\u24d5\uff46\u1e1f\u0192\ua77c"},{base:"g",letters:"g\u24d6\uff47\u01f5\u011d\u1e21\u011f\u0121\u01e7\u0123\u01e5\u0260\ua7a1\u1d79\ua77f"},{base:"h",letters:"h\u24d7\uff48\u0125\u1e23\u1e27\u021f\u1e25\u1e29\u1e2b\u1e96\u0127\u2c68\u2c76\u0265"},{base:"hv",letters:"\u0195"},{base:"i",letters:"i\u24d8\uff49\xec\xed\xee\u0129\u012b\u012d\xef\u1e2f\u1ec9\u01d0\u0209\u020b\u1ecb\u012f\u1e2d\u0268\u0131"},{base:"j",letters:"j\u24d9\uff4a\u0135\u01f0\u0249"},{base:"k",letters:"k\u24da\uff4b\u1e31\u01e9\u1e33\u0137\u1e35\u0199\u2c6a\ua741\ua743\ua745\ua7a3"},{base:"l",letters:"l\u24db\uff4c\u0140\u013a\u013e\u1e37\u1e39\u013c\u1e3d\u1e3b\u017f\u0142\u019a\u026b\u2c61\ua749\ua781\ua747"},{base:"lj",letters:"\u01c9"},{base:"m",letters:"m\u24dc\uff4d\u1e3f\u1e41\u1e43\u0271\u026f"},{base:"n",letters:"n\u24dd\uff4e\u01f9\u0144\xf1\u1e45\u0148\u1e47\u0146\u1e4b\u1e49\u019e\u0272\u0149\ua791\ua7a5"},{base:"nj",letters:"\u01cc"},{base:"o",letters:"o\u24de\uff4f\xf2\xf3\xf4\u1ed3\u1ed1\u1ed7\u1ed5\xf5\u1e4d\u022d\u1e4f\u014d\u1e51\u1e53\u014f\u022f\u0231\xf6\u022b\u1ecf\u0151\u01d2\u020d\u020f\u01a1\u1edd\u1edb\u1ee1\u1edf\u1ee3\u1ecd\u1ed9\u01eb\u01ed\xf8\u01ff\u0254\ua74b\ua74d\u0275"},{base:"oi",letters:"\u01a3"},{base:"ou",letters:"\u0223"},{base:"oo",letters:"\ua74f"},{base:"p",letters:"p\u24df\uff50\u1e55\u1e57\u01a5\u1d7d\ua751\ua753\ua755"},{base:"q",letters:"q\u24e0\uff51\u024b\ua757\ua759"},{base:"r",letters:"r\u24e1\uff52\u0155\u1e59\u0159\u0211\u0213\u1e5b\u1e5d\u0157\u1e5f\u024d\u027d\ua75b\ua7a7\ua783"},{base:"s",letters:"s\u24e2\uff53\xdf\u015b\u1e65\u015d\u1e61\u0161\u1e67\u1e63\u1e69\u0219\u015f\u023f\ua7a9\ua785\u1e9b"},{base:"t",letters:"t\u24e3\uff54\u1e6b\u1e97\u0165\u1e6d\u021b\u0163\u1e71\u1e6f\u0167\u01ad\u0288\u2c66\ua787"},{base:"tz",letters:"\ua729"},{base:"u",letters:"u\u24e4\uff55\xf9\xfa\xfb\u0169\u1e79\u016b\u1e7b\u016d\xfc\u01dc\u01d8\u01d6\u01da\u1ee7\u016f\u0171\u01d4\u0215\u0217\u01b0\u1eeb\u1ee9\u1eef\u1eed\u1ef1\u1ee5\u1e73\u0173\u1e77\u1e75\u0289"},{base:"v",letters:"v\u24e5\uff56\u1e7d\u1e7f\u028b\ua75f\u028c"},{base:"vy",letters:"\ua761"},{base:"w",letters:"w\u24e6\uff57\u1e81\u1e83\u0175\u1e87\u1e85\u1e98\u1e89\u2c73"},{base:"x",letters:"x\u24e7\uff58\u1e8b\u1e8d"},{base:"y",letters:"y\u24e8\uff59\u1ef3\xfd\u0177\u1ef9\u0233\u1e8f\xff\u1ef7\u1e99\u1ef5\u01b4\u024f\u1eff"},{base:"z",letters:"z\u24e9\uff5a\u017a\u1e91\u017c\u017e\u1e93\u1e95\u01b6\u0225\u0240\u2c6c\ua763"}],t.prototype.dashCase=function(t){return t.replace(/\.?([A-Z]+)/g,function(t){return function(t,e){return"-"+e.toLowerCase()}}()).replace(/^-/,"")},t.prototype.initDiacritics=function(){var t,e,i,n,r,o,s;if(!(this.diacriticsMap.length>0))for(t=i=0,o=this.defaultDiacriticsRemovalMap.length;i<o;t=i+=1)for(r=this.defaultDiacriticsRemovalMap[t].letters,e=n=0,s=r.length;n<s;e=n+=1)this.diacriticsMap[r[e]]=this.defaultDiacriticsRemovalMap[t].base},t.prototype.removeDiacritics=function(t){return this.initDiacritics(),t.replace(/[^\u0000-\u007E]/g,function(t){return function(e){var i;return null!=(i=t.diacriticsMap[e])?i:e}}(this))},t.prototype.getFirstLetter=function(t){var e;return e=t.substring(0,1),/[\uD800-\uDFFF]/.test(e)&&(e=t.substring(0,2)),e},t.prototype.nl2br=function(t){return ko.unwrap(t).replace(/(?:\r\n|\r|\n)/g,"<br />")},t.prototype.camelCaseToTitleCase=function(t){var e;return e=t.replace(/([A-Z])/g," $1"),e.charAt(0).toUpperCase()+e.slice(1)},t.prototype.pluralToSingularItemType=function(t){return"people"===t?t:"companies"===t?"company":t.slice(0,-1)},t.prototype.serverCompare=function(t,e,i){var r,o,s,a,l,c,u,p,d,h;if(l={blanksLast:!1,sortOrder:"asc"},i=n.extend(!0,{},l,i),i.sortOrder=null!=(c=i.sortOrder)&&"function"==typeof c.toLowerCase?c.toLowerCase():void 0,(h=!e-!t)&&i.blanksLast)return-h;if(!t||!e)return"desc"===i.sortOrder&&(h=-h),h;for(s=a=0,u=Math.max(t.length,e.length);a<u&&(r=null!=(p=t[s])?p.charCodeAt(0):void 0,o=null!=(d=e[s])?d.charCodeAt(0):void 0,!(h=r>=0&&r<128&&o>=0&&o<128?t[s].toUpperCase().charCodeAt(0)-e[s].toUpperCase().charCodeAt(0):(null!=t[s])-(null!=e[s])||t[s].localeCompare(e[s])));s=a+=1);return"desc"===i.sortOrder&&(h=-h),h},t}())}.call(e,i,e,t))&&(t.exports=r)}).call(e,i(245))},1120:function(t,e,i){(function(n){var r,o,s=function(t,e){return function(){return t.apply(e,arguments)}};r=[i(14),i(1119),i(245),i(164)],void 0!==(o=function(t,e,i,r){var o;return o=function(){function o(t){this.ViewHistory=s(this.ViewHistory,this),this.GetIntegrations=s(this.GetIntegrations,this),this.HasIntegration=s(this.HasIntegration,this),this.SetIntegration=s(this.SetIntegration,this),this.AddToTeams=s(this.AddToTeams,this),this.componentName="User",null==t&&(t=this.GetNewJSON()),null==t.hasFeatureUpdates&&(t.hasFeatureUpdates=!1),null==t.featureUpdatesCount&&(t.featureUpdatesCount=0),null==t.canAccessCurrentProject&&(t.canAccessCurrentProject=!0),null==t.privateNotes&&(t.privateNotes=""),null==t.privateNotesText&&(t.privateNotesText=""),null==t.isClockedIn&&(t.isClockedIn=!1),null==t.twitter&&(t.twitter=""),null==t.address&&(t.address={zipcode:"",countrycode:"",state:"",line1:"",line2:"",city:"",country:""}),null==t.textFormat&&(t.textFormat="TEXT"),null==t.isCollaborator&&(t.isCollaborator="collaborator"===t.userType),null==t.isContact&&(t.isContact="contact"===t.userType),null==t.isAccount&&(t.isAccount="account"===t.userType),null!=t.avatarUrl&&(t.avatarUrl=t.avatarUrl.replace(/https:\/\/s3.amazonaws.com\/tw-desk\/i\//gi,"https://tw-desk-files.teamwork.com/i/")),null==t.teams&&(t.teams=[]),null==t.teamIds&&(t.teamIds=[]),null==t.teamsCount&&(t.teamsCount=0),null==t.isSelected&&(t.isSelected=!1),null==t.canEdit&&(t.canEdit=!1),null==t.workingHours&&(t.workingHours={sunday:{taskHours:0},monday:{taskHours:8},tuesday:{taskHours:8},wednesday:{taskHours:8},thursday:{taskHours:8},friday:{taskHours:8},saturday:{taskHours:0}}),i.isEmptyObject(t.workingHours)&&(t.workingHours={sunday:{taskHours:0},monday:{taskHours:8},tuesday:{taskHours:8},wednesday:{taskHours:8},thursday:{taskHours:8},friday:{taskHours:8},saturday:{taskHours:0}}),this.integrations=r.observable(app.integrationBetaFeatures.reduce(function(t){return function(t,e){var i;return i={},i[e.toLowerCase()]=r.observable(!1),Object.assign(t,i)}}(),{})),this.ApplyUpdates(t),this.invitedDateFormatted=app.ko.pureComputed(this.invitedDateFormattedFN,this),this.lastChangedOnFormatted=app.ko.pureComputed(this.lastChangedOnFormattedFN,this),this.lastLoginFormatted=app.ko.pureComputed(this.lastLoginFormattedFN,this),this.fullName=app.ko.pureComputed(this.getFullNameFN,this),this.shortName=app.ko.pureComputed(this.getShortNameFN,this),this.teamNames=r.pureComputed(function(t){return function(){return t.teams().join(", ")}}(this)),this.canEdit(this.IsEditable()),this.useMarkdown=r.pureComputed({read:function(t){return function(){return"TEXT"===t.textFormat()}}(this),write:function(t){return function(e){t.textFormat(e?"TEXT":"HTML")}}(this),owner:this}),this.useAdvancedMarkdownEditor=r.pureComputed({read:function(t){return function(){return app.loggedInUser.preferences.useAdvancedMarkdownEditor()}}(),write:function(t){return function(t){app.loggedInUser.preferences.useAdvancedMarkdownEditor(t)}}(),owner:this})}return o.prototype.mapping={workingHours:{create:function(t){return app.utility.normalizeWorkingHours(t.data)},update:function(t){return app.utility.normalizeWorkingHours(t.data)}}},o.prototype.ApplyUpdates=function(t){var e,i,n;if(null!=t){if(t.id=parseInt(t.id,10),t.userInvited=parseInt(t.userInvited,10),null!=t.companyId&&(t.companyId=parseInt(t.companyId,10)),null!=t.featureUpdatesCount&&(t.featureUpdatesCount=parseInt(t.featureUpdatesCount,10)),null!=t.localization&&(t.localization.timezoneId=parseInt(t.localization.timezoneId,10),t.localization.dateFormatId=parseInt(t.localization.dateFormatId,10),t.localization.timeFormatId=parseInt(t.localization.timeFormatId,10),t.localization.timeFormat=t.localization.timeFormat.replace("tt","A"),t.localization.timeDiff=parseInt(t.localization.timeDiff,10),null!=t.localization.languageCode&&(t.localization.languageCode=t.localization.languageCode.toUpperCase())),null!=t.inOwnerCompany&&("string"==typeof t.inOwnerCompany?t.inOwnerCompany=1===parseInt(t.inOwnerCompany,10):"number"==typeof t.inOwnerCompany&&(t.inOwnerCompany=1===t.inOwnerCompany)),null!=t.impersonatingPreviousUserId&&(t.impersonatingPreviousUserId=parseInt(t.impersonatingPreviousUserId,10)),null!=t.localization&&null!=t.localization.dateFormat&&(t.localization.dateFormat=t.localization.dateFormat.toUpperCase()),null!=t.permissions){n=t.permissions;for(e in n)i=n[e],t.permissions[e]=!0===i||1===i||"1"===i}null!=t.lastActive&&null!==t.lastActive||(t.lastActive=""),null!=t.lastLogin&&null!==t.lastLogin||(t.lastLogin=""),r.mapping.fromJS(t,this.mapping,this)}},o.prototype.IsEditable=function(){var t;if(null==("undefined"!=typeof app&&null!==app?app.loggedInUser:void 0))return!1;if(t=app.loggedInUser,this.id()===t.id())return!0;if(t.siteOwner())return!0;if("function"==typeof this.administrator?this.administrator():void 0){if(t.administrator()&&t.inOwnerCompany())return!0}else{if(t.administrator())return!0;if(t.permissions.canManagePeople())return!0}return!1},o.prototype.Handle=function(){return(this.firstName()+this.lastName().charAt(0)).replace(/\s+/g,"").toLowerCase()},o.prototype.IsActive=function(){return"active"===this.status()},o.prototype.ToggleSelected=function(t,e,i){var n;if(null==i&&(i=!1),i||this.canEdit())return!(null==(null!=e&&null!=(n=e.target)?n.classList:void 0)||!e.target.classList.contains("tipped-delegate"))||(this.isSelected(!this.isSelected()),!0)},o.prototype.ResendInvite=function(t){var e;return null==t&&(t={force:!1,projectId:0}),e=t.projectId>0?"projects/"+t.projectId+"/users/"+this.id()+"/sendinvite.json":"users/"+this.id()+"/sendinvite.json",t.force&&(e+="?canResend=true"),app.api.put(e).then(function(t){return function(e){return app.flash.Success(app.tl("The invite was resent to [_s]",t.fullName())),null!=t.userInvitedStatus&&t.userInvitedStatus("PENDING"),null!=t.userInvited&&t.userInvited(!0),app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"person",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:t.id()})}}(this))},o.prototype.AddToTeams=function(t,e){var i,n;return null==t&&(t=0),"number"==(n=typeof t)||"string"===n?t/=1:t=0,i=function(t){return function(i){var n,r,o,s,a,l;if(!i.wasCancelled){for(null==i.teamIds&&(i.teamIds=[]),s=0,o=i.teamIds,a=[],n=0,r=o.length;n<r;n++)l=o[n],a.push(function(n){var r;return r={userIds:t.id(),action:"add"},app.api.put("teams/"+n+"/people.json",r).then(function(t){return app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"team",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:n})}).finally(function(){if((s+=1)>=i.teamIds.length&&(1===s?app.flash.Success(app.tl("[_s] team has been updated",1)):app.flash.Success(app.tl("[_s] teams have been updated",s)),null!=e&&"function"==typeof e))return e(i)})}(l));return a}}}(this),app.modal.Show("chooseTeams",{userId:this.id(),projectId:r.unwrap(t),onCloseCallBack:i})},o.prototype.SetIntegration=function(t,e){return null!=this.integrations()[t]?this.integrations()[t](e):console.info("no such user integration - "+t+" - found")},o.prototype.HasIntegration=function(t){var e;return!!("function"==typeof(e=this.integrations())[t]?e[t]():void 0)},o.prototype.GetIntegrations=function(){var t;t={userId:this.id(),mode:"list_user"},app.api.get("integrations.json",t).then(function(t){return function(e){var i,n,r,o,s,a,l;if(null!=(o=e.response)&&null!=(s=o.integrations)?s.length:void 0){for(a=e.response.integrations,l=[],n=0,r=a.length;n<r;n++)i=a[n],l.push(function(e){return null!=t.integrations()[e.code]&&t.SetIntegration(e.code,e.enabled)}(i));return l}}}(this))},o.prototype.QuickView=function(){if(null!=app.currentRoute().project)return Tipped.hideAll(),app.quickView.show("person",{id:this.id(),title:"",isQuickView:!0,userId:this.id(),user:this,projectId:app.currentRoute().project.id(),type:"person"})},o.prototype.UpdateProjectObserving=function(t){var e;return e={permissions:{isObserving:!this.permissions.isObserving()}},app.api.put("./projects/"+r.unwrap(t)+"/people/"+this.id()+".json",e)},o.prototype.invitedDateFormattedFN=function(){var e;return(e=this.userInvitedDate)?(e=e(),"string"==typeof e&&e.length>0?t(e).format("dddd MMM Do"):""):""},o.prototype.lastChangedOnFormattedFN=function(){var e;if(e=this.lastChangedOn)return e=e(),""===e?"":t(e).format("dddd MMM Do")},o.prototype.lastLoginFormattedFN=function(){var e;if(e=this.lastLogin)return e=e(),""===e?"":t(e).format("dddd MMM Do, YYYY")},o.prototype.getFullNameFN=function(){return this.firstName()+" "+this.lastName()},o.prototype.getShortNameFN=function(){return this.firstName()+" "+this.lastName().charAt(0)+"."},o.prototype.GetNewJSON=function(){return e.camelize({id:0,administrator:!1,companyId:app.loggedInUser.companyId(),companyName:app.loggedInUser.companyName(),"email-address":"","first-name":"",hubspotEnabled:!0,"im-handle":"","im-service":"","last-changed-on":"2015-08-18T19:59:21Z","last-login":"2015-10-14T10:31:03Z","last-name":"",notes:"","phone-number-fax":"","phone-number-home":"","phone-number-mobile":"","phone-number-mobile-parts":{countryCode:"",prefix:"",phone:""},"phone-number-office":"","phone-number-office-ext":"",pid:"","private-notes":"","private-notes-text":"",profile:"","profile-text":"",tags:[],twitter:"","user-name":"","user-todays-tasks-display-all":"0","user-type":app.account.defaultUserType(),userUUID:"",openId:"",lengthOfDay:8,textFormat:"HTML",social:{googleplus:"",facebook:"",twitter:"",website:"",linkedin:""},notifications:{"receive-daily-reports-at-weekend":!0,"notify-on-added-as-follower":!0,"notify-on-status-update":!0,"daily-report-sort-by":"DATE","notify-on-task-complete":!0,"receive-notify-warnings":!0,"receive-daily-reports":!1,"receive-my-notifications-only":!1,"receive-daily-reports-if-empty":!0,"receive-daily-reports-at-time":5,"daily-report-days-filter":14,"daily-report-events-type":"MINE","sound-alerts-enabled":!0},localization:{timeFormat:app.loggedInUser.localization.timeFormat(),languageCode:app.loggedInUser.localization.languageCode(),timezoneId:app.loggedInUser.localization.timezoneId(),timezone:app.loggedInUser.localization.timezone(),timezoneJavaRefCode:app.loggedInUser.localization.timezoneJavaRefCode(),"start-on-sunday":app.loggedInUser.localization.startOnSunday(),dateFormat:app.loggedInUser.localization.dateFormat(),dateFormatId:app.loggedInUser.localization.dateFormatId(),timeFormatId:app.loggedInUser.localization.timeFormatId()},"user-late-upcoming-display-all":"1",permissions:{"can-manage-people":!1,"has-access-to-new-projects":!1,"can-add-projects":!1,"can-access-templates":!1,canAccessCalendar:!1,canAccessPortfolio:!1,canManagePortfolio:!1,administrator:!1,canManageProjectTemplates:!1,canViewProjectTemplates:!1,canManageCustomFields:!1},"user-invited-status":"NOT SENT",address:{zipcode:"",countrycode:"",state:"",line1:"",country:"",line2:"",city:""},"created-at":"2010-09-27T12:46:53Z","user-invited-date":"2015-06-29T17:46:18Z","avatar-url":"","in-owner-company":"0","user-invited":"0","email-alt-1":"","email-alt-2":"","email-alt-3":"",title:"","site-owner":!1,numActiveProjects:0,APIEnabled:!1,useShorthandDurations:!1,isClockedIn:!1})},o.prototype.ShowEdit=function(t){var e;e={tab:"essentials"},null!=t&&n.extend(e,t),e.personId=this.id(),app.modal.Show("addOrEditPerson",e)},o.prototype.ShowDelete=function(t){var e;e={},null!=t&&n.extend(e,t),e.userId=this.id(),e.user=this,app.modal.Show("userConfirmDelete",e)},o.prototype.ShowSetProjectsAccess=function(){app.modal.Show("userProjectsAccess",{userId:this.id()})},o.prototype.ShowBulkEditProjectPermissions=function(){app.modal.Show("bulkEditProjectPermissions",{userId:this.id()})},o.prototype.ReassignItems=function(t){var e;e={stack:!0},null!=t&&n.extend(e,t),e.userId=this.id(),e.user=this,app.modal.Show("userReassignItems",e)},o.prototype.ViewHistory=function(){if(app.featureFlip.check("audittrail",{unwrap:!0}))return app.quickView.show("audit",{itemId:this.id(),itemType:"user"})},o.prototype.Impersonate=function(t){null==t&&(t={}),i(".hasChanged").confirmCancel({callback:function(e){return function(i){var r,o;i&&(app.flash.Success(app.tl("Impersonating")),r={},null!=t&&n.extend(r,t),o="./people/"+e.id()+"/impersonate.json",r.projectId&&(o+="?projectId="+r.projectId),app.api.put(o).then(function(){return app.utility.IgnoreFormChanges(),location.reload()}))}}(this)})},o.prototype.MakeSiteOwner=function(t){var e,i;null==t&&(t={}),i=app.tl("Please Confirm"),e=app.tl("Are you certain you want to make [_s] the site owner?",this.firstName()),app.modal.Show("confirm",{title:i,text:e,callback:function(t){return function(e){if(!e.wasCancelled)return app.api.put("./account/siteowner.json",{userId:t.id()}).then(function(e){return app.flash.Success(e.response.msg),app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"person",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:t.id()})})}}(this)})},o.prototype.ShowChangeCompany=function(t){var e;e={},null!=t&&n.extend(e,t),e.userId=this.id(),e.user=this,app.modal.Show("userChangeCompany",e)},o.prototype.ShowDowngradeToContact=function(t){var e;e={},null!=t&&n.extend(e,t),e.userId=this.id(),e.user=this,app.modal.Show("userDowngradeToContact",e)},o.prototype.UpdateContactToStandardUser=function(t){this.UpdateContactUserType(t,"account")},o.prototype.UpdateContactToCollaborator=function(t){this.UpdateContactUserType(t,"collaborator")},o.prototype.UpdateCollaboratorToStandardUser=function(t){this.UpdateUserType(t,"account")},o.prototype.UpdateUserToCollaborator=function(t){this.UpdateUserType(t,"collaborator")},o.prototype.UpdateContactUserType=function(t,e){var i,n,r;i=function(t){return function(){var i,n;return n=app.tl("Send Invite Now?"),i=app.tl("You can send an invite to this user now or later. Would you like to send the invite now?"),app.modal.Show("confirm",{title:n,text:i,cancelMessage:app.tl("No, Thanks"),confirmMessage:app.tl("Yes, Send an Invite"),callback:function(i){var n;return n={person:{sendInvite:!0!==i.wasCancelled,"user-type":e}},app.api.put("./people/"+t.id()+".json",n).then(function(e){return app.flash.Success(app.tl("Contact updated")),app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"person",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:t.id()})}).catch(function(t){var e,i;return(null!=(e=t.responseJSON)&&null!=(i=e.MESSAGE)?i.includes("Email address already used by another user"):void 0)||"Email address already used by another user"===t.statusText?app.flash.Error(app.tl("Sorry that email address is already associated with another user on your account")):app.flash.Error(t.statusText)})}})}}(this),"account"!==e&&"collaborator"!==e||(r=app.tl("Please Confirm"),n=app.tl("Are you certain you want to upgrade this contact to be able to log in?"),app.modal.Show("confirm",{title:r,text:n,callback:function(t){return function(t){if(!t.wasCancelled)return setTimeout(i,500)}}()}))},o.prototype.UpdateUserType=function(t,e){var i,n,r;i=function(t){return function(){var i;return i={person:{"user-type":e}},app.api.put("./people/"+t.id()+".json",i).then(function(e){return app.flash.Success(app.tl("User Updated")),app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"person",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:t.id()})})}}(this),"account"!==e&&"collaborator"!==e||(r=app.tl("Please Confirm"),n=app.tl("Are you certain you want to upgrade this collaborator to a standard user?"),"collaborator"===e&&(n=app.tl("Are you certain you want to downgrade this user to be a collaborator?")),app.modal.Show("confirm",{title:r,text:n,callback:function(t){return function(t){if(!t.wasCancelled)return setTimeout(i,500)}}()}))},o.prototype.GetVCard=function(){var e;return e="BEGIN:VCARD\nVERSION:4.0\n",e+="N:"+this.lastName()+";"+this.firstName()+"\n",e+="FN:"+this.fullName()+"\n",""!==this.avatarUrl()&&(e+="PHOTOMEDIATYPE=image/jpeg:"+this.avatarUrl()+"\n"),""!==this.companyName()&&(e+="ORG:"+this.companyName()+"\n"),""!==this.title()&&(e+="TITLE:"+this.title()+"\n"),""!==this.phoneNumberOffice()&&(e+="TEL;type=WORK;type=pref:"+this.phoneNumberOffice()+"\n"),""!==this.phoneNumberMobile()&&(e+="TEL;type=CELL:"+this.phoneNumberMobile()+"\n"),""!==this.phoneNumberFax()&&(e+="TEL;type=FAX:"+this.phoneNumberFax()+"\n"),""!==this.phoneNumberHome()&&(e+="TEL;type=HOME:"+this.phoneNumberHome()+"\n"),""!==this.emailAddress()&&(e+="EMAIL:"+this.emailAddress()+"\n"),e+="REV:"+t().format("20YYMMDDTHHMMSS")+"#}Z\n",e+="END:VCARD"},o.prototype.LoadUpdates=function(t){var e,i;if((e=null!=(i=null!=t?t.projectId:void 0)?i:0)>0)return app.api.get(app.prefixApi("projects/"+e+"/people/"+this.id()+".json","API_PREFIX_V2","API_PREFIX_V2")).then(function(t){return function(e){var i;i=e.response.people[0],null!=i?(t.canAccessCurrentProject(!0),t.ApplyUpdates(i)):t.canAccessCurrentProject(!1)}}(this));throw new Error("UserModel.LoadUpdates without projectId currently not supported")},o}(),o.GetRoles=function(){return app.api.get("v1/users/roles.json")},o.GetUserById=function(t){return app.users().find(function(e){return function(e){return e.id()===t}}())},o.Delete=function(t){return app.api.delete("v1/users/"+t+".json")},o}.apply(e,r))&&(t.exports=o)}).call(e,i(245))},1125:function(t,e,i){(function(n,r){var o,s,a=function(t,e){return function(){return t.apply(e,arguments)}},l=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};o=[i(14),i(1119),i(164),i(1133),i(1118),i(1225)],void 0!==(s=function(t,e,i,o,s,c){return function(){function u(t,e,n){this.DownloadAllAttachments=a(this.DownloadAllAttachments,this),this.LoadUpdate=a(this.LoadUpdate,this),this.GetFiles=a(this.GetFiles,this),this.ResetRemindersToDefault=a(this.ResetRemindersToDefault,this),this.setupComputedsAndObservables=a(this.setupComputedsAndObservables,this),this.ResetData=a(this.ResetData,this),this.OnQuickView=a(this.OnQuickView,this),this.OnUpdateFollowing=a(this.OnUpdateFollowing,this),this.OnUpdateProgress=a(this.OnUpdateProgress,this),this.OnUpdatePriority=a(this.OnUpdatePriority,this),this.ToggleTimer=a(this.ToggleTimer,this),this.LogTime=a(this.LogTime,this),this.OnClickEditAssigned=a(this.OnClickEditAssigned,this),this.Duplicate=a(this.Duplicate,this),this.Delete=a(this.Delete,this),this.OnClickComplete=a(this.OnClickComplete,this),this.OnClickToggleShowSubTasks=a(this.OnClickToggleShowSubTasks,this),this.OnClickEdit=a(this.OnClickEdit,this),this.componentName="Task",this.taskList=null!=e?e:e=null,this.parentTask=null!=n?n:n=null,null==t&&(t=this.GetNewJSON()),null!=t.description&&(t.description=t.description.replace(/https:\/\/s3.amazonaws.com\/tw-desk\/i\//gi,"https://tw-desk-files.teamwork.com/i/")),t.uniqueTaskId="task-"+t.id+"-"+Date.now(),t=this.renameData(t),t=this.updateProperties(t),this.mapping={key:function(t){return i.unwrap(t.id)},reminders:{create:function(t){var e,n;return null!=t.data.dateTimeUtc&&(n=t.data.dateTimeUtc),e=o.fromJS(t.data,{ignore:["dateTimeUtc"]}),n&&(e.dateTimeUtc=i.observable(n)),e}}},o.fromJS(t,this.mapping,this),this.setupComputedsAndObservables()}return u.prototype.OnClickEdit=function(){var t;if(this.canEdit()&&"completed"!==this.status()){if(null!=app.quickView.peek()&&"breakdown"===app.quickView.peek().type)return this.OnQuickView(null,!0);t=function(t){return function(e){if(e)return t.isEditMode(!t.isEditMode()),app.ko.postbox.publish("close-all-other-task-forms",t.id())}}(this),n(".hasChanged").confirmCancel({callback:t})}},u.prototype.OnClickToggleShowSubTasks=function(){this.displayPreferences.isDisplayingSubTasksSection(!this.displayPreferences.isDisplayingSubTasksSection()),app.cache.set("task-"+this.id()+"-displaying-subtasks",this.displayPreferences.isDisplayingSubTasksSection())},u.prototype.OnClickComplete=function(e,i){var n,r;if(Tipped.hideAll(),this.numActiveSubTasks()>0)return this.displayPreferences.isDisplayingSubTasksSection(!this.displayPreferences.isDisplayingSubTasksSection()),void app.cache.set("task-"+this.id()+"-displaying-subtasks",this.displayPreferences.isDisplayingSubTasksSection());this.canComplete()&&this.canStart()&&(this.displayPreferences.isDisplayingSubTasksSection(!1),this.displayPreferences.isDisplayingDescription(!1),this.displayPreferences.isDisplayingFiles(!1),this.displayPreferences.isDisplayingComments(!1),this.isUpdating(!0),r="tasks/"+this.id()+"/"+("completed"===this.status()?"uncomplete":"complete")+".json",n=this.status(),app.api.put(r).then(function(e){return function(r){var o,s,a,l,c,u,p,d,h;if("OK"===r.response.STATUS)return o=null!=(u=r.response.affectedTaskIds)?u:"",a=null!=(p=r.response.linkedCardId)?p:0,l=null!=(d=r.response.linkedColumnId)?d:0,c=null!=(h=r.response.linkedColumnName)?h:"",e.isUpdating(!1),"completed"===n?(e.status("reopened"),e.progress(0)):(e.completedBy.firstName(app.loggedInUser.firstName()),e.completedBy.lastName(app.loggedInUser.lastName()),e.completedBy.avatarUrl(app.loggedInUser.avatarUrl()),e.completedOn(t(new Date)),e.showWhenComplete(!0),e.status("completed"),((null!=i?i.ctrlKey:void 0)||(null!=i?i.metaKey:void 0))&&app.modal.Show("addOrEditComment",{item:e,projectId:e.projectId(),type:"task"})),s={eventTime:new Date,itemType:"task",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:e.id(),projectId:e.projectId(),taskListId:e.taskListId(),subType:"task-"+e.status(),extraInfo:{data:{hasEstimatedTime:e.estimatedMinutes()>0,hasTags:e.tags().length>0,affectedTaskIds:o,cardId:a,columnId:l,columnName:c}}},0!==e.parentTaskId()&&(s.parentTaskId=e.parentTaskId()),app.ko.postbox.publish("allTWEvents",s)}}(this)))},u.prototype.Delete=function(t){var e;if(null==t&&(t={}),Tipped.hideAll(),!this.isRecurring())return this.isUpdating(!0),app.api.delete("tasks/"+this.id()+".json").then(function(t){return function(e){var n,r,o,s,a,l,c,u,p,d;return n=null!=(l=e.response.affectedTaskIds)?l:"",o=null!=(c=e.response.linkedCardId)?c:0,s=null!=(u=e.response.linkedColumnId)?u:0,a=null!=(p=e.response.linkedColumnName)?p:0,d=function(){var e;return app.flash.Info(app.tl("Restoring")+app.localizationPreferences().ellipsis),e={includeComments:!0},app.api.put("trashcan/tasks/"+t.id()+"/restore.json",e).then(function(e){var r;return r=app.tl("Task [_s] has been restored",'"'+app.utility.SafeHTML(i.unwrap(t.name()))+'"'),app.flash.Success(r),app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"task",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:t.id(),projectId:t.projectId(),taskListId:t.taskListId(),parentTaskId:t.parentTaskId(),subType:"task-reopened",extraInfo:{data:{hasEstimatedTime:t.estimatedMinutes()>0,hasTags:t.tags().length>0,affectedTaskIds:n,cardId:o,columnId:s,columnName:a}}}),t.status("reopened")})},app.flash.Success(app.tl("Task [_s] has been deleted",'"'+app.utility.SafeHTML(i.unwrap(t.name()))+'"'),{undo:d}),r={eventTime:new Date,itemType:"task",actionType:app.consts.ACTIONTYPE.DELETED,itemId:t.id(),projectId:t.projectId(),taskListId:t.taskListId(),taskStatus:t.status(),parentTaskId:t.parentTaskId(),extraInfo:{data:{hasEstimatedTime:t.estimatedMinutes()>0,hasTags:t.tags().length>0,affectedTaskIds:n,cardId:o,columnId:s,columnName:a}}},t.status("deleted"),app.ko.postbox.publish("allTWEvents",r)}}(this)).finally(function(t){return function(){return t.isUpdating(!1)}}(this));e=function(t){return function(e){if(!e.wasCancelled)return app.api.get("./?action=deleteTask&taskId="+t.id()+"&editRecurringOption="+e.editRecurringOption.toLowerCase()).then(function(e){var i,n;return null!=(n=e.response.affectedTaskIds)?n:"",app.flash.Success(e.response.msg),i={eventTime:new Date,itemType:"task",actionType:app.consts.ACTIONTYPE.DELETED,itemId:t.id(),projectId:t.projectId(),taskListId:t.taskListId(),parentTaskId:t.parentTaskId(),extraInfo:{data:{hasEstimatedTime:t.estimatedMinutes()>0,hasTags:t.tags().length>0,affectedTaskIds:""}}},app.ko.postbox.publish("allTWEvents",i)})}}(this),t.isTemplateTask?e({editRecurringOption:"all"}):app.modal.Show("recurringTasksPrompt",{action:"delete",task:this,onCloseCallBack:e})},u.prototype.Duplicate=function(){app.api.post("./tasks/"+this.id()+"/duplicate.json").then(function(t){return function(e){var i;return app.flash.Success(app.tl("Task Duplicated")),i={eventTime:new Date,actionType:app.consts.ACTIONTYPE.UPDATED,itemType:"task",itemId:e.id,taskListId:parseInt(e.response.taskListId,10),newTaskListId:parseInt(e.response.taskListId,10),oldTaskListId:parseInt(e.response.taskListId,10),moveOrCopyMode:"copy",subType:"moveOrCopy",action:"copy",extraInfo:{data:{hasEstimatedTime:t.estimatedMinutes()>0,hasTags:t.tags().length>0,affectedTaskIds:""}}},t.parentTaskId()>0&&(i.parentTaskId=t.parentTaskId()),app.ko.postbox.publish("allTWEvents",i)}}(this)).catch(function(t){return function(t){return app.flash.Error(app.tl("Editing duplicating task"))}}())},u.prototype.OnClickEditAssigned=function(){var t;return c("Task action","Open form assignee click"),!(!this.canEdit()||"completed"===this.status())&&(null!=app.quickView.peek()&&"breakdown"===app.quickView.peek().type?this.OnQuickView(null,!0):(t=function(t){return function(e){if(e)return t.isEditMode(!t.isEditMode()),app.ko.postbox.publish("close-all-other-task-forms",t.id())}}(this),void n(".hasChanged").confirmCancel({callback:t})))},u.prototype.LogTime=function(){var t;return t=function(t){return function(e){if(!e.wasCancelled)return t.hasLoggedTime(!0)}}(this),Tipped.hideAll(),app.modal.Show("addOrEditTimeEntry",{task:this,projectId:this.projectId(),onCloseCallBack:t})},u.prototype.ToggleTimer=function(){var t,e;if(this.canLogTime())return e=app.timers().filter(function(t){return function(e){return e.taskId()===t.id()}}(this)),e.length>0?e[0].Toggle():(t={timer:{taskId:this.id(),projectId:this.projectId(),isBillable:app.loggedInUser.preferences.timeDefaultBillable()}},app.api.post("me/timers.json",t).then(function(t){return function(e){var n;return n=e.response.id,i.postbox.publish("allTWEvents",{eventTime:new Date,actionType:app.consts.ACTIONTYPE.ADDED,itemType:"userTimer",itemId:n,projectId:t.projectId(),taskId:t.id()})}}(this)))},u.prototype.OnUpdatePriority=function(t){var e,i,n;t!==this.priority()&&(Tipped.hideAll(),e=this.priority(),this.priority(t.toLowerCase()),n=function(){switch(t){case"none":return 0;case"low":return 200;case"medium":return 100;case"high":return 1;default:return-1}}(),i={"todo-item":{priority:n}},app.api.put("tasks/"+this.id()+".json",i).then(function(t){return function(i){var n,r,o,s,a,l,c;return r=null!=(a=i.response.linkedCardId)?a:0,o=null!=(l=i.response.linkedColumnId)?l:0,s=null!=(c=i.response.linkedColumnName)?c:"","OK"===i.response.STATUS?(n={eventTime:new Date,itemType:"task",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:t.id(),projectId:t.projectId(),taskListId:t.taskListId(),extraInfo:{data:{cardId:r,columnId:o,columnName:s}}},0!==t.parentTaskId()&&(n.parentTaskId=t.parentTaskId()),app.ko.postbox.publish("allTWEvents",n)):t.priority(e)}}(this)).catch(function(t){return function(){return t.priority(e)}}(this)))},u.prototype.OnUpdateProgress=function(){var t;return t={progress:this.progress()},app.api.put("tasks/"+this.id()+"/progress.json",t).then(function(t){return function(e){var i,n,r,o,s,a,l;if(n=null!=(s=e.response.linkedCardId)?s:0,r=null!=(a=e.response.linkedColumnId)?a:0,o=null!=(l=e.response.linkedColumnName)?l:"","OK"===e.response.STATUS)return i={eventTime:new Date,itemType:"task",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:t.id(),projectId:t.projectId(),taskListId:t.taskListId(),extraInfo:{data:{cardId:n,columnId:r,columnName:o}}},0!==t.parentTaskId()&&(i.parentTaskId=t.parentTaskId()),app.ko.postbox.publish("allTWEvents",i)}}(this))},u.prototype.OnUpdateFollowing=function(t){var e,i,n,r;return Tipped.hideAll(),e="none"!==t&&t?"follow":"unfollow",n="changes"===t||"all"===t,r="comments"===t||"all"===t,i={"follow-changes":n,"follow-comments":r},app.api.put("tasks/"+this.id()+"/"+e+".json",i).then(function(t){return function(e){return t.userFollowingChanges(n),t.userFollowingComments(r),t.LoadUpdate()}}(this))},u.prototype.OnQuickView=function(t,e){if(this.id()>0)return app.quickView.show("task",{id:this.id(),isSubtask:this.parentTaskId()>0,taskId:this.id(),projectId:this.projectId(),task:this,tab:t,wrapperName:null!=t?"task-view":null,title:null!=t?app.utility.Truncate((this.parentTaskId()>0?app.tl("Subtask"):app.tl("Task"))+": "+app.utility.HTMLToString(this.name()),60):void 0,isQuickView:!0,isEditing:e})},u.prototype.ResetData=function(t){return this.name(""),null!=t?this.description(t):this.description(""),this.predecessors([]),this.progress(0),this.reminders([])},u.prototype.setupComputedsAndObservables=function(){var e,n,r,o,s;for(null!=this.isAssignedToMe&&i.isComputed(this.isAssignedToMe)||(this.isAssignedToMe=i.pureComputed(function(t){return function(){var e,i,n,r,o,s,a,c,u;if(null==t.responsiblePartyIds())return!1;if(n=app.utility.ConvertToArray(t.responsiblePartyIds()).map(String),o=app.loggedInUser.id().toString(),l.call(n,o)>=0)return!0;if(s="c"+app.loggedInUser.companyId(),l.call(n,s)>=0)return!0;for(e=!1,a=app.loggedInUser.teamIds(),i=0,r=a.length;i<r;i++)u=a[i],c="t"+u,l.call(n,c)>=0&&(e=!0);return!!e}}(this))),null!=this.isEditMode&&i.isObservable(this.isEditMode)||(this.isEditMode=i.observable(0===this.id())),null!=this.showMoreOptions&&i.isObservable(this.showMoreOptions)||(this.showMoreOptions=i.observable(this.id()>0)),null!=this.isSelected&&i.isObservable(this.isSelected)||(this.isSelected=i.observable(!1)),null!=this.isUpdating&&i.isObservable(this.isUpdating)||(this.isUpdating=i.observable(this.id()<0)),null==this.displayPreferences&&(this.displayPreferences={isDisplayingSubTasksSection:i.observable(null!=app.cache.get("task-"+this.id()+"-displaying-subtasks")&&this.numActiveSubTasks()>0&&app.cache.get("task-"+this.id()+"-displaying-subtasks")),isDisplayingDescription:i.observable(!1),isDisplayingFiles:i.observable(!1),isDisplayingComments:i.observable(!1)}),null!=this.activeSubTasksTipped&&i.isComputed(this.activeSubTasksTipped)||(this.activeSubTasksTipped=i.pureComputed(function(t){return function(){var e;return 0===t.numActiveSubTasks()?"":(e=t.numActiveSubTasks()+" ",e+=t.numActiveSubTasks()>1?app.tl("subtasks"):app.tl("subtask"),e+=" "+app.tl("incomplete")+" ")}}(this))),null!=this.canStart&&i.isComputed(this.canStart)||(this.canStart=i.pureComputed(function(t){return function(){return!(t.numPredecessors()>0&&t.numPredecessors()>t.numActiveSubTasks())}}(this))),s=["start","due"],n=function(e){return function(n){if(null==e[n+"DateAsMoment"]||!i.isComputed(e[n+"DateAsMoment"]))return e[n+"DateAsMoment"]=i.pureComputed({read:function(){var i;return i=e[n+"Date"](),null==i?null:8!==i.length?null:t(i,"YYYYMMDD")},write:function(i){var r;r=t.isMoment(i)?i.format("YYYYMMDD"):"",e[n+"Date"](r)},owner:e})}}(this),r=0,o=s.length;r<o;r++)e=s[r],n(e);if(null!=this.nameWithLinks&&i.isComputed(this.nameWithLinks)||(this.nameWithLinks=i.pureComputed(function(t){return function(){return t.nameWithLinksFN()}}(this))),0===this.projectId()||isNaN(this.projectId())?this.project=i.observable(null):this.project=app.projectInfo.get(this.projectId()),this.isProjectTemplate=i.pureComputed(function(t){return function(){var e;return null!=(e=t.project())?e.isTemplate():void 0}}(this)),this.isProjectTemplate()&&this.canEdit(app.loggedInUser.permissions.canManageProjectTemplates()||app.loggedInUser.permissions.administrator()),this.canViewMessagesAndFiles=i.pureComputed(function(t){return function(){return null!=t.project()&&t.project().permissions.viewMessagesAndFiles()&&"1"===t.project().activePages.files().toString()}}(this)),null!=this.harvestProjectData&&i.isComputed(this.harvestProjectData)||(this.harvestProjectData=i.pureComputed(function(t){return function(){var e,i;return e=t.projectName()||(null!=(i=app.currentRoute().project)&&"function"==typeof i.name?i.name():void 0)||"",e=e.replace(/['"]/g," ").replace(/\s{2,}/g," "),'{"id":"'+t.projectId()+'","name":"'+e+'"}'}}(this))),null!=this.harvestItemData&&i.isComputed(this.harvestItemData)||(this.harvestItemData=i.pureComputed(function(t){return function(){var e;return e=t.name().replace(/['"]/g," ").replace(/\s{2,}/g," "),'{"id":"'+t.id()+'","name":"'+e+'"}'}}(this))),null==this.responsibleSummaryFormatted||!i.isComputed(this.responsibleSummaryFormatted))return this.responsibleSummaryFormatted=i.pureComputed(function(t){return function(){var e,n,r,o,s;return e=("function"==typeof t.responsiblePartyIds&&null!=(r=t.responsiblePartyIds())?r.length:void 0)>0&&Array.isArray(t.responsiblePartyIds())&&"0"!==t.responsiblePartyIds().toString(),n=(null!=(o=i.unwrap(t.responsiblePartyNames))?o.length:void 0)>0,s=e&&n?i.unwrap(t.responsiblePartyNames).toString().split("|").join(", "):app.tl("Unassigned"),i.unwrap(t.canEdit)||(s+="\n",s+=app.tl("Editing not allowed")),s}}(this))},u.prototype.UpdateData=function(t){if(null!=t)return this.isUpdating(!0),null!=t.projectName&&""===t.projectName&&null!=this.projectName&&i.unwrap(""!==this.projectName)&&(t.projectName=i.unwrap(this.projectName)),null!=t.companyName&&""===t.companyName&&null!=this.companyName&&i.unwrap(""!==this.companyName)&&(t.companyName=i.unwrap(this.companyName)),null!=t.taskListName&&""===t.taskListName&&null!=this.taskListName&&i.unwrap(""!==this.taskListName)&&(t.taskListName=i.unwrap(this.taskListName)),null!=this.reminders&&(t.reminders=i.unwrap(this.reminders)),null!=this.remindersLoaded&&(t.remindersLoaded=i.unwrap(this.remindersLoaded)),null!=this.visible&&(t.visible=i.unwrap(this.visible)),null!=this.showWhenComplete&&(t.showWhenComplete=i.unwrap(this.showWhenComplete)),t=this.renameData(t),t=this.updateProperties(t),o.fromJS(t,{},this),this.setupComputedsAndObservables(),0===this.numActiveSubTasks()&&(this.displayPreferences.isDisplayingSubTasksSection(!1),app.cache.set("task-"+this.id()+"-displaying-subtasks",!1)),this.isUpdating(!1),null!=t.isPrivate&&"string"==typeof t.isPrivate?"inherited"===t.isPrivate?this.private(2):"true"===t.isPrivate?this.private(1):this.private(0):void 0},u.prototype.ResetRemindersToDefault=function(e,n){var r,o,s,a,l,c,u;for(s=0,a=e.length;s<a;s++)c=e[s],r=i.observable(t(n)),r(r().add(-1*i.unwrap(c.relativeNumberOfDays),"days")),u=i.unwrap(c.time).split(":",2),o=u[0],l=u[1],r(r().set({hour:o,minute:l})),c.dateTimeUtc=r,c.fromTaskListDefault=!0;this.reminders(e)},u.prototype.GetFiles=function(t){if(null==t&&(t=!0),0!==this.id())return this.isUpdating(t),app.api.get("v/2/tasks/"+this.id()+"/files.json").then(function(t){return function(e){return t.attachments=i.observableArray([]),o.fromJS(e.response.files,{},t.attachments),t.isUpdating(!1)}}(this))},u.prototype.EditColumn=function(){if(this.canEdit())return app.modal.Show("changeBoardColumn",{boardId:0,boardType:"task",item:this})},u.prototype.LoadUpdate=function(t){var e;if(null==t&&(t=!0),0!==this.id())return this.isUpdating(t),e=app.prefixApi("tasks/"+this.id()+".json?getFiles=1&getSubTasks=0&include=taskListNames,projectNames&includeCustomFields=true","API_PREFIX_V2","API_PREFIX_V2"),app.api.get(e).then(function(t){return function(e){var i;return i=e.response.task,i.taskListName=e.response.taskLists[0].name,i.projectName=e.response.projects[0].name,i.companyName=e.response.projects[0].companyName,null!=e.response.customFields&&(i.customFields=app.customFieldsHelper.normalizeFields(e.response.customFields,i.customFields)),t.UpdateData(i)}}(this))},u.prototype.nwlExp=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/\*%?=~_|!:,.;\]\[]*[-A-Z0-9+&@#\/\*%=~_|\]\[])/gi,u.prototype.nameWithLinksFN=function(){return String(this.name()).replace(/\"/g,"&quot;").replace(/\'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(this.nwlExp,"<a href='$1' style='word-break: break-word' target=_blank class=blue>$1</a>")},u.prototype.GetNewJSON=function(){var i,n,o;return n={id:0,cardId:0,name:"",canComplete:!0,description:"",order:2e3,private:0,taskListId:0,tags:[],"has-predecessors":0,dueDate:"",dueDateFromMilestone:!1,userFollowingChanges:!1,progress:"0",priority:"",timeIsLogged:"0",hasLoggedTime:!1,hasFollowers:!1,lockdownId:"",status:"new",startDate:"",predecessors:[],canEdit:!1,completed:!1,"attachments-count":0,"comments-count":0,"company-id":0,"creator-id":app.loggedInUser.id(),"lockdown-id":0,position:1e6,projectId:0,parentTaskId:0,numEstMins:0,"estimated-minutes":0,responsiblePartyIds:[],responsiblePartySummary:"Anyone",hasReminders:!1,canLogTime:!1,userFollowingComments:!1,hasTickets:!1,customFields:[],boardColumn:{id:0,name:"",color:""}},i=e.camelize(n),o={},null!==this.taskList&&(o=app.ko.mapping.toJS(this.taskList.newTaskDefaults),null!==this.parentTask&&0===this.taskList.id()?i.taskListId=this.parentTask.taskListId():i.taskListId=this.taskList.id(),parseInt(o.startDateOffset,10)>=0&&(i.startDate=t().add(o.startDateOffset,"days").format("YYYYMMDD")),parseInt(o.dueDateOffset,10)>=0&&(i.dueDate=t().add(o.dueDateOffset,"days").format("YYYYMMDD")),i.numEstMins=o.estimatedMinutes,i.estimatedMinutes=o.estimatedMinutes,i.projectId=this.taskList.projectId(),1===this.taskList.isPrivate()&&(i.private=2,o.private=2)),r.extend(i,o),null!==this.parentTask&&(i.parentTaskId=this.parentTask.id(),i.projectId=this.parentTask.projectId(),i.taskListId=this.parentTask.taskListId(),i.private=this.parentTask.private(),i.priority=this.parentTask.priority(),i.startDate=this.parentTask.startDate(),i.dueDate=this.parentTask.dueDate(),i.responsiblePartyIds=this.parentTask.responsiblePartyIds(),i.responsiblePartySummary=this.parentTask.responsiblePartySummary()),i},u.prototype.renameData=function(t){return null!=t.content&&null==t.name&&(t.name=t.content,t.content=void 0),null==t.description&&(t.description=""),null==t.todoListId||t.taskListId||(t.taskListId=t.todoListId,t.todoListId=void 0),null==t.creatorFirstName&&null==t.creatorFirstname||(t.createdBy={id:t.creatorId,firstName:t.creatorFirstName?t.creatorFirstName:t.creatorFirstname,lastName:t.creatorLastName?t.creatorLastName:t.creatorLastname,avatarUrl:t.creatorAvatarUrl},delete t.creatorId,delete t.creatorFirstName,delete t.creatorLastName,delete t.creatorFirstname,delete t.creatorLastname,delete t.creatorAvatarUrl),null==t.completer_id&&null==t.completerId||(t.completedBy={id:t.completer_id?t.completer_id:t.completerId,firstName:t.completerFirstName,lastName:t.completerLastName,avatarUrl:t.completerAvatarUrl},null==t.completedOn&&(t.completedOn=t.completed_on),delete t.completer_id,delete t.completerId,delete t.completerFirstName,delete t.completerLastName,delete t.completerAvatarUrl,delete t.completed_on),null==t.completedBy&&(t.completedBy={id:0,firstName:"",lastName:"",avatarUrl:""}),null==t.completedOn&&(t.completedOn=null),null!=t.followingChanges&&null==t.userFollowingChanges&&(t.userFollowingChanges=t.followingChanges,delete t.followingChanges),null!=t.followingComments&&null==t.userFollowingComments&&(t.userFollowingComments=t.followingComments,delete t.followingComments),t},u.prototype.updateProperties=function(t){var e,i,n,r,o,s;if(t.id=parseInt(t.id,10),t.projectId=parseInt(t.projectId,10),t.order=parseInt(t.order,10),null!=t.numComments?t.commentsCount=parseInt(t.numComments,10):t.commentsCount=parseInt(t.commentsCount,10),null!=t.private?t.private=parseInt(t.private,10):t.private=0,t.taskListId=parseInt(t.taskListId,10),t.hasDependencies=parseInt(t.hasDependencies,10),t.hasPredecessors=parseInt(t.hasPredecessors,10),t.position=parseInt(t.position,10),t.estimatedMinutes=parseInt(t.numEstMins,10),t.attachmentsCount=parseInt(t.numAttachments,10),t.progress=parseInt(t.progress,10),t.parentTaskId=""===t.parentTaskId?-1:parseInt(t.parentTaskId,10),t.companyId=parseInt(t.companyId,10),t.timeIsLogged=parseInt(t.timeIsLogged,10),t.lockdownId=parseInt(t.lockdownId,10),null==t.boardColumn&&(t.boardColumn={id:0,name:"",color:""}),null==t.cardId?t.cardId=0:t.cardId=parseInt(t.cardId,10),null==t.reminders&&(t.reminders=[]),null==t.remindersLoaded&&(t.remindersLoaded=!1),null==t.startDate&&(t.startDate=""),null==t.dueDate&&(t.dueDate=""),null==t.priority&&(t.priority=""),null!=t.changeFollowerIds&&"string"==typeof t.changeFollowerIds&&(""===t.changeFollowerIds?t.changeFollowerIds=[]:t.changeFollowerIds=t.changeFollowerIds.split(",")),null!=t.commentFollowerIds&&"string"==typeof t.commentFollowerIds&&(""===t.commentFollowerIds?t.commentFollowerIds=[]:t.commentFollowerIds=t.commentFollowerIds.split(",")),t.createdBy||(t.createdBy={id:0,firstName:"",lastName:""}),app.utility.PopulateDynamicFields(t),app.featureFlip.check("teams")()&&!t.responsiblePartyIds.length&&(t.responsiblePartyIds=["0"]),null!=t.isPrivate&&"boolean"==typeof t.isPrivate&&t.isPrivate&&(t.private=1),null!=t.privacyIsInherited&&t.privacyIsInherited&&(t.private=2),null==t.isPrivate&&(t.isPrivate=t.private>0),null==t.hasLoggedTime&&null!=t.timeIsLogged&&(t.hasLoggedTime=1===t.timeIsLogged),null==t.defaultsTaskId&&(t.defaultsTaskId=0),null!=t.isPrivate&&"string"==typeof t.isPrivate&&("inherited"===t.isPrivate?t.private=2:"true"===t.isPrivate?t.private=1:t.private=0),null==t.status&&(t.status=t.completed?"completed":"new"),null==t.showWhenComplete&&(t.showWhenComplete="completed"!==t.status),isNaN(t.estimatedMinutes)&&(t.estimatedMinutes=0),null==t.numActiveSubTasks&&(t.numActiveSubTasks=0),null==t.numCompletedSubTasks&&(t.numCompletedSubTasks=0),null==t.projectName&&(t.projectName=""),null==t.companyName&&(t.companyName=""),null!=t.todoListName&&(t.taskListName=t.todoListName),null==t.taskListName&&(t.taskListName=""),null==t.taskListDisplayOrder&&(t.taskListDisplayOrder=4e3),null==t.responsiblePartySummary&&(t.responsiblePartySummary=app.tl("Anyone")),t.hasUnreadComments=t.numCommentsRead<t.numComments,null==t.tags&&(t.tags=[]),null==t.canStart&&(t.canStart=!0),null==t.canComplete&&(t.canComplete=!0),null==t.predecessors&&(t.predecessors=[]),null==t.numDependents&&(t.numDependents=null!=t.numDependencies?t.numDependencies:0),null==t.numPredecessors&&(t.numPredecessors=null!=t.predecessors?t.predecessors.length:0),t.responsiblePartyIds=app.utility.ConvertToArray(t.responsiblePartyIds),console.assert("object"==typeof t.responsiblePartyIds),t.isRecurring=null!=t.recurring,null!=t.recurring&&"string"==typeof t.recurring.days&&(t.recurring.days=t.recurring.days.split(",")),null==t.availablePeople&&(t.availablePeople=[]),null==t.visible&&(t.visible=!0),t.attachmentsCount>0&&null!=t.attachments)for(r=t.attachments,i=0,n=r.length;i<n;i++)e=r[i],e.checked=!0,null==e.extension?(e.isDisplayableImage=!1,e.isPlayableVideo=!1,e.isExternalVideo=!1,e.isBlockedVideo=!1):(e.isDisplayableImage=["png","jpg","jpeg","gif","webp","svg"].indexOf(e.extension.toLowerCase())>-1,e.isPlayableVideo=(o=e.extension.toLowerCase(),l.call(app.consts.FILES.PLAYABLEVIDEO,o)>=0),e.isExternalVideo=e.isPlayableVideo&&"teamworkpm"!==e.fileSource,e.isBlockedVideo=(s=e.extension.toLowerCase(),l.call(app.consts.FILES.BLOCKEDVIDEOS,s)>=0));else 0===t.attachmentsCount&&(t.attachments=[]);return t},u.prototype.GetProjectDetails=function(){return app.GetProjectAndPermissions(this.projectId()).then(function(t){return function(e){var i;if(i=null!=e.componentName&&"Project"===e.componentName?e:new s(e.response.project),t.projectName(i.name()),t.companyName(i.company.name()),null==app.cachedProjects[t.projectId()])return app.cachedProjects[t.projectId()]=i}}(this))},u.prototype.Clone=function(){var t;return t=i.mapping.toJS(this),new u(t)},u.prototype.DownloadAllAttachments=function(){var t,e,i;return i=function(){var e,i,n,r;for(n=this.attachments(),r=[],e=0,i=n.length;e<i;e++)t=n[e],r.push(t.id());return r}.call(this),0===i.length?(console.warn("No task attachments to download"),!1):(e={fileIds:i.join(",")},app.api.post("files/archive.json",e).then(function(t){return window.location.href=t.response.downloadURL}),!0)},u}()}.apply(e,o))&&(t.exports=s)}).call(e,i(245),i(245))},1126:function(t,e,i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function i(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},a={}.hasOwnProperty,l=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};n=[i(164),i(1117),i(1134),i(4468),i(4479),i(1933)],void 0!==(r=function(t,e,i,n,r,a){return function(c){function u(e){var r,s,a,l,c,p,d,h,f,m,g,y,v,b,w,k,x,T,C;null==e&&(e={}),this.AddUserAction=o(this.AddUserAction,this),this.SyncIds=o(this.SyncIds,this),this.GetAllData=o(this.GetAllData,this),this.GetQueryTokens=o(this.GetQueryTokens,this),this.GetQueryAfterCaret=o(this.GetQueryAfterCaret,this),this.GetQueryBeforeCaret=o(this.GetQueryBeforeCaret,this),u.__super__.constructor.call(this,e),this.params=e,this.showUsers=null==(s=e.showUsers)||s,console.assert("boolean"==typeof this.showUsers),this.showCompanies=null!=(a=e.showCompanies)&&a,console.assert("boolean"==typeof this.showCompanies),this.showRoles=null!=(y=e.showRoles)&&y,console.assert("boolean"==typeof this.showRoles),this.showEveryone=null!=(v=e.showEveryone)&&v,console.assert("boolean"==typeof t.unwrap(this.showEveryone)),this.showOnlyMe=null!=(b=e.showOnlyMe)&&b,console.assert("boolean"==typeof t.unwrap(this.showOnlyMe)),this.showAnyone=null!=(w=e.showAnyone)&&w,console.assert("boolean"==typeof t.unwrap(this.showAnyone)),this.showAddUser=null!=(k=e.showAddUser)&&k,console.assert("boolean"==typeof t.unwrap(this.showAddUser)),this.showCurrentUser=null==(x=e.showCurrentUser)||x,console.assert("boolean"==typeof t.unwrap(this.showCurrentUser)),this.userType=null!=(T=e.userType)?T:"all",console.assert("string"==typeof t.unwrap(this.userType)),this.type=null!=(C=e.type)?C:"",console.assert("string"==typeof t.unwrap(this.type)),this.includeDeletedUsers=e.includeDeletedUsers,this.initialOptions=null!=(l=e.initialOptions)?l:[],console.assert(Array.isArray(t.unwrap(this.initialOptions))),this.OnQueryUpdated=e.OnQueryUpdated,this.includeUsersWithoutProjects=null!=(c=e.includeUsersWithoutProjects)&&c,console.assert("boolean"==typeof t.unwrap(this.includeUsersWithoutProjects)),this.mapViewIdItems={},this.empty=null!=(p=e.empty)&&p,console.assert("boolean"==typeof t.unwrap(this.empty)),this.projectId=null!=(d=e.projectId)?d:0,console.assert("number"==typeof t.unwrap(this.projectId)),this.projectStatus=null!=(h=e.projectStatus)?h:"",console.assert("string"==typeof t.unwrap(this.projectStatus)),this.itemType=null!=(f=e.itemType)?f:"",console.assert("string"==typeof this.itemType),this.itemId=null!=(m=e.itemId)?m:0,console.assert("number"==typeof this.itemId),this.privacyIds=null!=(g=e.privacyIds)?g:t.observable([]),console.assert(Array.isArray(t.unwrap(this.privacyIds))),this.selectedUserIds=e.selectedUserIds,console.assert(null==this.selectedUserIds||t.isObservable(this.selectedUserIds)&&Array.isArray(this.selectedUserIds())),this.selectedCompanyIds=e.selectedCompanyIds,console.assert(null==this.selectedCompanyIds||t.isObservable(this.selectedCompanyIds)&&Array.isArray(this.selectedCompanyIds())),this.selectedRoleIds=e.selectedRoleIds,console.assert(null==this.selectedRoleIds||t.isObservable(this.selectedRoleIds)&&Array.isArray(this.selectedRoleIds())),this.anyoneItem=this.NormalizeDataItem({id:0,label:r=app.tl("Anyone"),fullName:r,value:this.ComputeValue(r),color:"#5bc0de",avatarUrl:"//cdn.teamwork.com/images/noPhoto2.png",suggestionTemplate:"<span class=\"w-auto-complete__item-icon\">\n    \x3c!-- ko component: {\n            name: 'ui-common-icon',\n            params: {\n                name: 'user-regular',\n                class: 'h-icon-color--inherit'\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n</span>\n<span class=\"w-auto-complete__item-title\">\n    {{label}}\n</span>",order:this.order+5e5+1}),this.everyoneItem=this.NormalizeDataItem({id:i.SPECIAL_ITEMS.ALL,label:r=app.tl("Everyone"),fullName:r,value:this.ComputeValue(r),color:"#5bc0de",avatarUrl:"//cdn.teamwork.com/images/noPhoto2.png",suggestionTemplate:"<span class=\"w-auto-complete__item-icon\">\n    \x3c!-- ko component: {\n            name: 'ui-common-icon',\n            params: {\n                name: 'user-regular',\n                class: 'h-icon-color--inherit'\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n</span>\n<span class=\"w-auto-complete__item-title\">\n    {{label}}\n</span>",order:this.order+5e5+1}),this.onlyMeItem=this.NormalizeDataItem({id:-2,label:r=app.tl("Only me"),value:this.ComputeValue(r),color:"#5bc0de",avatarUrl:"//cdn.teamwork.com/images/noPhoto2.png",suggestionTemplate:"<span class=\"w-auto-complete__item-icon\">\n    \x3c!-- ko component: {\n            name: 'ui-common-icon',\n            params: {\n                name: 'user-regular',\n                class: 'h-icon-color--inherit'\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n</span>\n<span class=\"w-auto-complete__item-title\">\n    {{label}}\n</span>",order:this.order+5e5+1}),this.addUserItem=this.NormalizeDataItem({id:i.SPECIAL_ITEMS.ADD_NEW,label:r=app.tl("Add User")+app.localizationPreferences().ellipsis,suggestionTemplate:"<span class=\"w-auto-complete__item-icon\">\n    \x3c!-- ko component: {\n            name: 'ui-common-icon',\n            params: {\n                name: 'add-regular',\n                class: 'h-icon-color--inherit'\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n</span>\n<span class=\"w-auto-complete__item-title\">\n    {{label}}\n</span>",action:this.AddUserAction}),this.subscriptions.push(this.normalizedQuery=t.pureComputed(function(t){return function(){var e;return null==(e=t.query())?null:(t.fullQueryMode()||(e=e.substring(1)),e.trim().toLowerCase())}}(this))),null!=this.OnQueryUpdated&&"function"==typeof this.OnQueryUpdated&&this.subscriptions.push(this.normalizedQuery.subscribe(this.OnQueryUpdated)),this.subscriptions.push(this.getParams=t.pureComputed(function(i){return function(){var n;return e={empty:i.empty,itemType:i.itemType,itemId:i.itemId,projectId:t.unwrap(i.projectId),projectStatus:i.projectStatus,privacyIds:i.privacyIds,getRoles:i.showRoles,userType:i.userType,type:i.type},(null!=(n=i.normalizedQuery())?n.length:void 0)>3&&(e.searchTerm=i.normalizedQuery()),null!=t.unwrap(i.includeDeletedUsers)&&(e.includeDeletedUsers=i.includeDeletedUsers),t.unwrap(i.includeUsersWithoutProjects)&&(e.includeUsersWithoutProjects=i.includeUsersWithoutProjects),e}}(this))),null!=this.params.remoteUsers?this.remoteUsers=this.params.remoteUsers:(this.subscriptions.push(this.remoteUsers=n.getAvailablePeople(this.getParams)),this.subscriptions.push(this.remoteUsers.subscribe(function(t){return function(e){return t.dataLoader(e.dataLoader)}}(this)))),this.SyncIds("user",this.selectedUserIds,this.selectedItems),this.SyncIds("company",this.selectedCompanyIds,this.selectedItems),this.SyncIds("role",this.selectedRoleIds,this.selectedItems)}return s(u,c),u.prototype.defaultType="user",u.prototype.order=app.consts.AUTO_COMPLETE_ORDER.USER,u.prototype.noMatchingDataMessage=app.tl("User Not Found"),u.prototype.excludeSelected=!0,u.prototype.GetQueryBeforeCaret=function(){var t,e;return null!=(t=null!=(e=/(?:^|\s)(@[\u00C0-\u1FFF\u2C00-\uD7FF\w]*)$/.exec(this.fullQueryBeforeCaret()))?e[1]:void 0)?t:null},u.prototype.GetQueryAfterCaret=function(){var t,e;return null!=(t=null!=(e=/^[\u00C0-\u1FFF\u2C00-\uD7FF\w]*/.exec(this.fullQueryAfterCaret()))?e[0]:void 0)?t:null},u.prototype.GetQueryTokens=function(){var t;return t=this.normalizedQuery(),null==t?null:this.fullQueryMode()?t.split(/\s+/):[t]},u.prototype.GetAllData=function(){var e,i,n,r,o,s,a,l,c,u,p,d,h,f,m,g,y,v,b;if(e=[],t.unwrap(this.initialOptions).length)for(d=t.unwrap(this.initialOptions),r=0,a=d.length;r<a;r++)u=d[r],p=Object.assign({id:0,label:"",color:"#5bc0de"},u),e.push(this.NormalizeDataItem({id:p.id,label:p.label,fullName:p.label,value:this.ComputeValue(p.label),color:p.color,suggestionTemplate:"<span class=\"w-auto-complete__item-icon\">\n    \x3c!-- ko component: {\n            name: 'ui-common-icon',\n            params: {\n                name: 'user-regular',\n                class: 'h-icon-color--inherit'\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n</span>\n<span class=\"w-auto-complete__item-title\">\n    {{label}}\n</span>",order:this.order+5e5+1}));for(t.unwrap(this.showAnyone)&&e.push(this.anyoneItem),t.unwrap(this.showEveryone)&&e.push(this.everyoneItem),t.unwrap(this.showOnlyMe)&&e.push(this.onlyMeItem),n={},y={},h=this.remoteUsers(),o=0,l=h.length;o<l;o++)if(v=h[o],b=this.UserToRawItem(v),this.showUsers&&(!this.showCurrentUser&&b.isMe||e.push(b)),this.showCompanies&&v.companyId>0&&null!=v.companyName&&(i=n[v.companyId],null==i&&e.push(n[v.companyId]=i=this.CompanyToRawItem({id:v.companyId,name:v.companyName})),i.userIds.push(b.id)),this.showRoles&&v.roles)for(f=v.roles,s=0,c=f.length;s<c;s++)m=f[s],g=y[m.id],null==g&&e.push(y[m.id]=g=this.RoleToRawItem(m)),g.userIds.push(b.id);return this.NormalizeData(e)},u.prototype.GetMatchingData=function(e){var i;return i=u.__super__.GetMatchingData.call(this,e),t.unwrap(this.showAddUser)&&0===i.length?[this.addUserItem]:(i.sort(function(t,e){var i;return(i=!!e.isMe-!!t.isMe)?i:null==t.companyName&&null==e.companyName?0:(i=(null!=t.companyName)-(null!=e.companyName))?i:i=t.companyName===app.account.companyname()&&t.companyName===e.companyName?t.label.localeCompare(e.label):t.companyName===app.account.companyname()?-1:e.companyName===app.account.companyname()?1:t.companyName.localeCompare(e.companyName)||t.label.localeCompare(e.label)}),i)},u.prototype.GetSelectedItemsLimitMessage=function(){return app.tl("Only [_s] users are allowed.",this.selectedItemsLimit)},u.prototype.IsItemSelected=function(t){var e,i,n,r,o,s,a,c,p,d;if(u.__super__.IsItemSelected.call(this,t))return!0;if("user"===t.type){if(null!=(e=this.selectedItemsMap().company))for(n in e)if(i=e[n],r=t.id,l.call(i.userIds,r)>=0)return!0;if(null!=(p=this.selectedItemsMap().role))for(c in p)if(a=p[c],o=t.id,l.call(a.userIds,o)>=0)return!0}return!("company"!==(s=t.type)&&"role"!==s||null==(d=this.selectedItemsMap().user)||!t.userIds.every(function(t){return d[t]}))},u.prototype.OnAutoComplete=function(t){var e;e=t.item,this.IsItemSelected(e)||this.selectedItems(this.selectedItems().concat(e))},u.prototype.ComputeValue=function(t){return this.RemoveNonLetters(t).toLowerCase()},u.prototype.RemoveNonLetters=function(t){return t.replace(/[^\u00C0-\u1FFF\u2C00-\uD7FF\w]/g,"")},u.prototype.SyncIds=function(e,i,n){this.ManageView(i,n,{filter:function(t){return t.type===e},map:function(t){return t.id},mapViewItem:function(i){return function(n){var o,s,l,c,u,p;if(null!=i.params.remoteUsers){if(!i.remoteUsers().length)return}else if(!i.remoteUsers().ready)return;return(c=e+"_"+n)in i.mapViewIdItems&&!t.isObservable(i.mapViewIdItems[c])?i.mapViewIdItems[c]:null!=(l=i.allData().find(function(t){return t.type===e&&t.id===n})||null)?(null!=l&&(i.mapViewIdItems[c]=l),l):(p=null,"user"===e?u=null!=(o=i.mapViewIdItems)[c]?o[c]:o[c]=r.getUser(n):"company"===e&&(u=null!=(s=i.mapViewIdItems)[c]?s[c]:s[c]=a.getCompany(n)),("function"==typeof u?u():void 0)?(l=u(),"user"===e?p=i.UserToRawItem(l):"company"===e&&(p=i.CompanyToRawItem(l)),l.ready?(u.dispose(),i.mapViewIdItems[c]=null!=l.error?null:p):void 0):null)}}(this)})},u.prototype.UserToRawItem=function(t){var e,i,n,r,o;return{id:e=parseInt(t.id,10),isMe:i=(null!=(r=app.loggedInUser)?r.id():void 0)===e,type:"user",label:n=(t.firstName+" "+t.lastName).trim(),value:this.ComputeValue(n),color:"#5bc0de",suggestionTemplate:'<img class="w-auto-complete__item-image"\n    onerror="this.src=\'//cdn.teamwork.com/images/noPhoto2.png\'"\n    data-bind="\n        attr: {\n            src: avatarUrl\n        }">\n<span class="w-auto-complete__item-title">\n    {{ isMe ? app.tl("Me") + " (" + label + ")" : label }}\n</span>',firstName:t.firstName,lastName:t.lastName,fullName:n,avatarUrl:null!=(o=t.avatarUrl)?o:"//cdn.teamwork.com/images/noPhoto2.png",companyName:t.companyName,order:this.order+5e5+(i?0:50),alternateValues:i?["me"]:[],_ref:t}},u.prototype.CompanyToRawItem=function(t){var e,i,n,r;return{id:e=parseInt(t.id,10),type:"company",label:n=t.name.trim(),value:this.ComputeValue(n),color:"#3b5574",suggestionTemplate:"<span class=\"w-auto-complete__item-icon\">\n    \x3c!-- ko component: {\n            name: 'ui-common-icon',\n            params: {\n                name: 'company-regular',\n                class: 'h-icon-color--inherit'\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n</span>\n<span class=\"w-auto-complete__item-title\">\n    {{label}}\n</span>",name:t.name,isMyCompany:i=(null!=(r=app.loggedInUser)?r.companyId():void 0)===e,order:this.order+5e5+(i?100:150),userIds:[]}},u.prototype.RoleToRawItem=function(t){var e;return{id:parseInt(t.id,10),type:"role",label:e=t.name.trim(),value:this.ComputeValue(e),color:"#428bca",suggestionTemplate:"<span class=\"w-auto-complete__item-icon\">\n    \x3c!-- ko component: {\n            name: 'ui-common-icon',\n            params: {\n                name: 'users-regular',\n                class: 'h-icon-color--inherit'\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n</span>\n<span class=\"w-auto-complete__item-title\">\n    {{label}}\n</span>",order:this.order+5e5+250,name:t.name,userIds:[]}},u.prototype.AddUserAction=function(){return new e(function(e){return function(n,r){app.modal.Show("inviteNewUsers",{projectId:t.unwrap(e.projectId),hideProjectsStep:!0,addExistingUsersToProjects:!0,onCloseCallBack:function(t){var r;n(t.wasCancelled?null:e.NormalizeDataItem({id:i.SPECIAL_ITEMS.GROUP,label:app.tl("New Users")+app.localizationPreferences().ellipsis,color:"#5bc0de",order:e.order+5e5+99,items:function(){var e,i,n,o;for(n=t.users,o=[],e=0,i=n.length;e<i;e++)r=n[e],o.push(this.NormalizeDataItem(this.UserToRawItem(r)));return o}.call(e)}))}})}}(this))},u}(i)}.apply(e,n))&&(t.exports=r)},1128:function(t,e,i){(function(n){var r,o,s=function(t,e){return function(){return t.apply(e,arguments)}},a=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};r=[i(164),i(1119)],void 0!==(o=function(t,e){return function(){function i(e,i){this.errorInSection=s(this.errorInSection,this),this.errorInSortBy=s(this.errorInSortBy,this),this.sort=s(this.sort,this),this.compare=s(this.compare,this),this.reportError=s(this.reportError,this);var n,r,o;if(this.sortBy=null!=(n=i.sortBy)?n:"",this.sortOrder=null!=(r=i.sortOrder)?r:"",this.sortOptions=t.unwrap(i.sortOptions),this.sortExtras=null!=(o=i.sortExtras)?o:{},null==this.sortOptions)return void this.reportError("Missing required sortOptions array");this.sortOptions=this.sortOptions.map(function(t){return t.id}),this.sectionToSort=e}return i.prototype.reportError=function(t,e){if(null==e&&(e=!0),t="clientSort: "+t,window.devMode&&e)throw new Error(t);console.info(t)},i.prototype.compare=function(i,r,o,s,a){var l,c,u,p,d,h,f,m;if(null==a&&(a={}),p={blanksLast:!1,sortOrder:null!=(d=t.unwrap(this.sortOrder))&&"function"==typeof d.toLowerCase?d.toLowerCase():void 0,errorIfNotExist:!0},null==a||"object"!=typeof a)return void this.reportError("Options must be of type object");if(a=n.extend(!0,{},p,a),a.sortOrder=null!=(h=a.sortOrder)&&"function"==typeof h.toLowerCase?h.toLowerCase():void 0,"asc"!==(f=a.sortOrder)&&"desc"!==f)return void this.reportError("Sort order must be either asc or desc");if(c=app.utility.refFromKey(r,s),u=app.utility.refFromKey(o,s),m=0,(null==c||null==u)&&a.errorIfNotExist)return s?this.reportError("At least one of the items compared doesn't have key [ "+s+" ].",!1):this.reportError("At least one of the values being being compared is null/undefined"),m;switch(i){case"locale":return e.serverCompare(c,u,a);case"integer":m=c-u;break;case"boolean":l=function(t){return(null!=t?t.length:void 0)&&"0"!==t||!!t},m=l(c)-l(u);break;case"date":if(m=!!c-!!u,!c||!u)break;null==c.unix&&(c=moment(c,["YYYYMMDD","YYYY-MM-DDTHH:mm:ssZ"])),null==u.unix&&(u=moment(u,["YYYYMMDD","YYYY-MM-DDTHH:mm:ssZ"])),m=c.unix()-u.unix();break;default:return void this.reportError("Invalid compare type [ "+i+" ] selected.")}return"desc"===a.sortOrder&&(m=-m),m},i.prototype.sort=function(e,i){var n,r,o,s,l,c,u,p,d,h,f,m,g,y,v,b,w,k;if(m=t.unwrap(this.sortBy),g=t.unwrap(this.sortOrder),""===this.sectionToSort||""===g||""===m)return void this.reportError("Missing required params (sectionToSort,sortOrder,sortBy)");if(!(a.call(this.sortOptions,m)>=0)&&this.sortOptions.length>0&&""!==m)return void this.reportError("Invalid sortBy option [ "+m+" ] selected. Must be one of ["+this.sortOptions.join(",")+"].");switch(this.sectionToSort){case"project-files":case"everything-files":switch(m){case"projectName":k=this.compare("locale",e,i,"projectName");break;case"categoryName":k=this.compare("locale",e,i,"categoryName",{blanksLast:!0})||this.compare("locale",e,i,"projectName",{sortOrder:"asc"})||this.compare("date",e,i,"uploadedDate",{sortOrder:"asc"});break;case"dateUploaded":k=this.compare("date",e,i,"uploadedDate");break;case"name":k=this.compare("locale",e,i,"name");break;case"size":k=this.compare("integer",e,i,"size");break;default:return void this.errorInSortBy()}break;case"everything-time":switch(m){case"user":k=this.compare("locale",e,i,"userName")||this.compare("date",e,i,"date")||this.compare("locale",e,i,"projectName")||this.compare("locale",e,i,"companyName");break;case"date":k=this.compare("date",e,i,"date")||this.compare("integer",e,i,"id");break;case"task":l=(e.taskName()+" "+e.taskId()+" "+e.parentTaskName()+" "+e.parentTaskId()).toLowerCase(),c=(i.taskName()+" "+i.taskId()+" "+i.parentTaskName()+" "+i.parentTaskId()).toLowerCase(),k=this.compare("locale",l,c)||this.compare("date",e,i,"date")||this.compare("locale",e,i,"projectName")||this.compare("locale",e,i,"companyName");break;case"tasklist":k=this.compare("locale",e,i,"tasklistName")||this.compare("locale",e,i,"projectName")||this.compare("date",e,i,"date")||this.compare("locale",e,i,"companyName")||this.compare("locale",e,i,"taskName");break;case"project":k=this.compare("locale",e,i,"projectName")||this.compare("locale",e,i,"companyName")||this.compare("date",e,i,"date")||this.compare("integer",i,e,"id");break;case"company":k=this.compare("locale",e,i,"companyName")||this.compare("locale",e,i,"projectName")||this.compare("locale",e,i,"taskName")||this.compare("date",e,i,"date")||this.compare("integer",i,e,"id");break;default:return void this.errorInSortBy()}break;case"messages":case"everything-messages":switch(m){case"project":k=this.compare("locale",e,i,"project.name");break;case"author":k=this.compare("locale",e,i,"author.fullName");break;case"category":k=this.compare("locale",e,i,"category.name");break;case"lastupdated":k=this.compare("date",e,i,"lastCommentDate");break;case"dateposted":k=this.compare("date",e,i,"postedOn");break;default:return void this.errorInSortBy()}k||(k=this.compare("locale",e,i,"project.name")||this.compare("date",e,i,"lastCommentDate"));break;case"people-people":switch(m){case"firstName":k=this.compare("locale",e,i,"firstName");break;case"lastName":k=this.compare("locale",e,i,"lastName");break;case"title":k=this.compare("locale",e,i,"title");break;case"company":app.utility.refFromKey(this.sortExtras,"ownerCompanyFirst")&&(k=this.compare("boolean",e,i,"inOwnerCompany",{sortOrder:"desc"})),k=k||this.compare("locale",e,i,"companyName");break;case"dateAdded":k=this.compare("integer",e,i,"id");break;default:return void this.errorInSortBy()}k||(k=this.compare("locale",e,i,"fullName")||this.compare("integer",e,i,"id"));break;case"people-teams":switch(h=t.unwrap(this.sortExtras.includeProjectTeams),h||(h=(null!=(b=t.unwrap(this.sortExtras.projectIds))?b:[]).length>0),d=t.unwrap(this.sortExtras.includeCompanyTeams),m){case"name":case"picker":h&&(k=this.compare("integer",e,i,"projectId",{sortOrder:"desc"})),d&&(k||(k=this.compare("integer",e,i,"companyId",{sortOrder:"asc"}))),k||(k=this.compare("integer",e,i,"parentTeamId",{sortOrder:"asc"})||this.compare("locale",e,i,"name"));break;case"dateAdded":h&&(k=this.compare("integer",e,i,"projectId",{sortOrder:"desc"})),d&&(k||(k=this.compare("integer",e,i,"companyId",{sortOrder:"asc"}))),k||(k=this.compare("date",e,i,"dateCreated")||this.compare("integer",e,i,"id"));break;default:return void this.errorInSortBy()}break;case"people-companies":switch(m){case"owner":k=this.compare("boolean",e,i,"isowner",{sortOrder:"desc"})||this.compare("locale",e,i,"name");break;case"dateAdded":k=this.compare("date",e,i,"createdOn")||this.compare("integer",e,i,"id");break;case"accounts":case"collaborators":case"contacts":k=this.compare("integer",e,i,m);break;case"name":case"country":case"website":case"email":case"phone":case"fax":case"industry":k=this.compare("locale",e,i,m);break;default:return void this.errorInSortBy()}break;case"everything-notebooks":switch(m){case"date":k=this.compare("date",e,i,"updatedDate");break;case"name":k=this.compare("locale",e,i,"name");break;case"category":k=this.compare("locale",e,i,"categoryName",{blanksLast:!0});break;case"project":k=this.compare("boolean",e,i,"categoryId",{sortOrder:"desc"})||this.compare("locale",e,i,"projectName");break;default:return void this.errorInSortBy()}k||(k=this.compare("locale",e,i,"name",{sortOrder:"asc"}));break;case"everything-comments":switch(m){case"date":k=this.compare("date",e,i,"datetime");break;case"type":k=this.compare("locale",e,i,"type",{sortOrder:"asc"});break;case"user":k=this.compare("locale",e,i,"author.firstName")||this.compare("locale",e,i,"author.lastName");break;case"project":k=this.compare("locale",e,i,"project.name");break;default:return void this.errorInSortBy()}k||(k=this.compare("date",e,i,"datetime"));break;case"everything-workload":switch(m){case"user":k=this.compare("locale",e,i,"userFirstName")||this.compare("locale",e,i,"userLastName");break;case"company":k=this.compare("locale",e,i,"companyName");break;case"project":k=this.compare("locale",e,i,"projectName")||this.compare("locale",e,i,"companyName",{sortOrder:"asc"})||this.compare("locale",e,i,"userFirstName",{sortOrder:"asc"});break;default:return void this.errorInSortBy()}break;case"everything-workload-manage":if(0===t.unwrap(e.id))return-1;if(0===t.unwrap(i.id))return 1;switch(m){case"name":k=this.compare("locale",e,i,"firstName")||this.compare("locale",e,i,"lastName");break;case"company":k=this.compare("locale",e,i,"companyName");break;case"capacity":k=this.compare("integer",e,i,"capacity")||this.compare("locale",e,i,"companyName",{sortOrder:"asc"});break;default:return void this.errorInSortBy()}break;case"everything-workload-planner":switch(m){case"user":k=this.compare("locale",e,i,"userName");break;case"company":k=this.compare("locale",e,i,"companyName");break;default:return void this.errorInSortBy()}break;case"section-links-list":switch(m){case"date":k=this.compare("date",e,i,"createdDate");break;case"name":k=this.compare("locale",e,i,"name");break;case"project":k=this.compare("locale",e,i,"projectName")||this.compare("date",e,i,"createdDate");break;case"category":k=this.compare("locale",e,i,"categoryName",{blanksLast:!0})||this.compare("locale",e,i,"name",{sortOrder:"asc"});break;default:return void this.errorInSortBy()}break;case"section-milestones-list":switch(m){case"date":f=app.utility.refFromKey(this.sortExtras,"isQuickView"),p=f?void 0:app.utility.refFromKey(this.sortExtras,"formattedStartDate"),u=f?void 0:app.utility.refFromKey(this.sortExtras,"formattedEndDate"),p&&u&&(k=this.compare("boolean",e,i,"completed",{sortOrder:"asc"})),k=k||this.compare("date",e,i,"deadline");break;case"dueDateOffset":k=this.compare("integer",e,i,"dueDateOffset");break;case"name":k=this.compare("locale",e,i,"title");break;case"user":k=this.compare("locale",e,i,"responsiblePartyFullNames");break;case"project":k=this.compare("locale",e,i,"projectName")||this.compare("integer",e,i,"projectId");break;default:return void this.errorInSortBy()}k||(k=this.compare("locale",e,i,"title")||this.compare("integer",e,i,"id"));break;case"section-risks-list":switch(m){case"result":k=this.compare("integer",e,i,"result");break;case"datecreated":k=this.compare("date",e,i,"createdOn");break;case"source":k=this.compare("locale",e,i,"source");break;case"probability":k=this.compare("integer",e,i,"probabilityValue");break;case"impact":k=this.compare("integer",e,i,"impactValue");break;case"project":k=this.compare("locale",e,i,"projectName")||this.compare("integer",e,i,"projectId");break;default:return void this.errorInSortBy()}break;case"section-projects-list":switch(m){case"starredName":k=this.compare("boolean",e,i,"starred",{sortOrder:"desc"})||this.compare("locale",e,i,"name");break;case"companyName":k=this.compare("locale",e,i,"company.name")||this.compare("locale",e,i,"name",{sortOrder:"asc"});break;case"lastActivityDate":k=this.compare("date",e,i,"lastChangedOn");break;case"name":k=this.compare("locale",e,i,"name");break;case"ownerCompany":k=this.compare("boolean",e,i,"company.isOwner")||this.compare("locale",e,i,"company.name",{sortOrder:"asc"})||this.compare("locale",e,i,"status",{sortOrder:"desc"})||this.compare("locale",e,i,"name",{sortOrder:"asc"});break;case"createdOn":case"endDate":k=this.compare("date",e,i,m);break;default:return void this.errorInSortBy()}break;case"section-events-list-new":switch(m){case"date":k=this.compare("date",e,i,"start");break;case"name":k=this.compare("locale",e,i,"title");break;case"type":k=this.compare("locale",e,i,"type.name",{blanksLast:!0,errorIfNotExist:!1});break;case"project":k=this.compare("locale",e,i,"privacy.projectName",{blanksLast:!0,errorIfNotExist:!1});break;default:return void this.errorInSortBy()}k||(k=this.compare("locale",e,i,"title",{sortOrder:"asc"}));break;case"section-shortcuts-list":switch(m){case"name":k=this.compare("integer",e,i,"pinned",{sortOrder:"desc"})||this.compare("locale",e,i,"name");break;case"datecreated":k=this.compare("integer",e,i,"pinned",{sortOrder:"desc"})||this.compare("date",e,i,"dateCreated");break;case"objecttype":k=this.compare("integer",e,i,"pinned",{sortOrder:"desc"})||this.compare("locale",e,i,"objectType");break;default:return void this.errorInSortBy()}break;case"section-tasks-list":switch(m){case"startdate":k=this.compare("boolean",i,e,"startDate")||this.compare("date",e,i,"startDate")||this.compare("locale",e,i,"projectName",{sortOrder:"asc"})||this.compare("locale",e,i,"taskListName",{sortOrder:"asc",errorIfNotExist:!1})||this.compare("integer",e,i,"parentTaskId",{sortOrder:"asc"})||this.compare("integer",e,i,"order",{sortOrder:"asc"});break;case"duedate":k=this.compare("boolean",e,i,"dueDate",{sortOrder:"desc"})||this.compare("date",e,i,"dueDate")||this.compare("locale",e,i,"projectName",{sortOrder:"asc"})||this.compare("locale",e,i,"taskListName",{sortOrder:"asc",errorIfNotExist:!1})||this.compare("integer",e,i,"parentTaskId",{sortOrder:"asc"})||this.compare("integer",e,i,"order",{sortOrder:"asc"});break;case"dateadded":v=["low","medium","high"],r=v.indexOf(t.unwrap(e.priority)),s=v.indexOf(t.unwrap(i.priority)),k=this.compare("date",e,i,"dateCreated")||this.compare("date",e,i,"dueDate",{sortOrder:"asc"})||this.compare("integer",r,s,void 0,{sortOrder:"asc"})||this.compare("integer",e,i,"parentTaskId",{sortOrder:"asc"})||this.compare("integer",e,i,"order",{sortOrder:"asc"});break;case"project":k=this.compare("locale",e,i,"projectName")||this.compare("integer",e,i,"companyId",{sortOrder:"asc"})||this.compare("integer",e,i,"taskListDisplayOrder",{sortOrder:"asc"})||this.compare("locale",e,i,"taskListName",{sortOrder:"asc",errorIfNotExist:!1})||this.compare("boolean",e,i,"dueDate",{sortOrder:"desc"})||this.compare("date",e,i,"dueDate",{sortOrder:"asc"})||this.compare("integer",e,i,"parentTaskId",{sortOrder:"asc"})||this.compare("integer",e,i,"order",{sortOrder:"asc"});break;case"priority":v=["low","medium","high"],r=v.indexOf(t.unwrap(e.priority))+1,s=v.indexOf(t.unwrap(i.priority))+1,k=this.compare("boolean",r,s,void 0,{sortOrder:"desc"})||this.compare("integer",r,s)||this.compare("locale",e,i,"projectName",{sortOrder:"asc"})||this.compare("locale",e,i,"taskListName",{sortOrder:"asc",errorIfNotExist:!1})||this.compare("boolean",e,i,"dueDate",{sortOrder:"desc"})||this.compare("date",e,i,"dueDate",{sortOrder:"asc"})||this.compare("integer",e,i,"parentTaskId",{sortOrder:"asc"})||this.compare("integer",e,i,"order",{sortOrder:"asc"});break;case"company":y=""+(null!=(w=app.loggedInUser)?w.companyId():void 0),n=""+t.unwrap(e.companyId)===y,o=""+t.unwrap(i.companyId)===y,k=this.compare("boolean",o,n)||this.compare("locale",e,i,"companyName")||this.compare("locale",e,i,"projectName",{sortOrder:"asc"})||this.compare("integer",e,i,"taskListDisplayOrder",{sortOrder:"asc"})||this.compare("locale",e,i,"tasklistName",{sortOrder:"asc",errorIfNotExist:!1})||this.compare("integer",e,i,"parentTaskId",{sortOrder:"asc"})||this.compare("integer",e,i,"order",{sortOrder:"asc"});break;default:return void this.errorInSortBy()}break;case"everything-completed-tasks":switch(m){case"datecompleted":k=this.compare("date",e,i,"completedOn");break;case"startdate":k=this.compare("date",e,i,"startDate");break;case"duedate":k=this.compare("date",e,i,"dueDate");break;case"dateadded":k=this.compare("date",e,i,"createdOn");break;case"project":k=this.compare("locale",e,i,"projectName");break;case"company":k=this.compare("locale",e,i,"companyName");break;case"priority":v=["low","medium","high"],r=v.indexOf(t.unwrap(e.priority)),s=v.indexOf(t.unwrap(i.priority)),k=this.compare("integer",r,s);break;default:return void this.errorInSortBy()}break;case"widget-projects-chart":if((null!=e?e.isEmptyRow:void 0)||(null!=i?i.isEmptyRow:void 0))return 0;switch(m){case"startDate":k=this.compare("date",e,i,"start");break;case"endDate":k=this.compare("date",e,i,"end");break;case"name":k=this.compare("locale",e,i,"content");break;case"companyName":k=this.compare("locale",e,i,"company");break;default:return void this.errorInSortBy()}break;case"section-tags-list":switch(m){case"name":k=this.compare("locale",e,i,"name");break;case"count":k=this.compare("integer",e,i,"count");break;case"dateLastUpdated":k=this.compare("date",e,i,"dateUpdated");break;case"color":k=this.compare("locale",e,i,"color");break;default:return void this.errorInSortBy()}break;default:return void this.errorInSection()}return k||(k=this.compare("integer",e,i,"id",{sortOrder:"asc"})),k},i.prototype.errorInSortBy=function(){this.reportError("Section: "+this.sectionToSort+": Could not match sortBy for '"+t.unwrap(this.sortBy)+"'")},i.prototype.errorInSection=function(){this.reportError("Section: "+this.sectionToSort+": No such section in clientSort config")},i}()}.apply(e,r))&&(t.exports=o)}).call(e,i(245))},1129:function(t,e,i){(function(i){var n,r;n=[],void 0!==(r=function(){return function(){function t(t){this.formSelector=t,this.id="-fv-"+Date.now()+Math.floor(1e3*Math.random()),this.getRequiredFields=function(){var t,e;return t=i(this.formSelector).find("form").addBack("form"),e=[],t.find("[data-required=true]").each(function(){var t,n,r,o,s,a;if(t=i(this),s="",o=i("label[for='"+t.attr("id")+"']"),s=o.length>0?app.tl("Required: [_s]",o.text()):app.tl("This field can not be empty"),t.is("[type=text]")&&""===t.val().trim()&&(t.hasClass("tt-input")?e.push({input:t,element:t.parents().eq(1),message:s}):e.push({input:t,element:t,message:s})),t.is("[type=hidden]")){if(""===t.val().trim())return e.push({input:null,element:t.siblings("div").children().eq(0),message:s})}else if(t.is("textarea")){if(""===t.val().trim())return e.push({input:t,element:t,message:s})}else if(t.is("[type=checkbox]")){if(!t.is(":checked"))return e.push({input:t,element:t,message:s})}else if(t.hasClass("checkboxes")){if(n=t.find(":input"),r=!0,n.filter(function(){if(i(this).is(":checked"))return r=!1,!1}),r)return e.push({input:t,element:t,message:s})}else if(t.is("[type=radio]")){if(!t.is(":checked"))return e.push({input:t,element:t,message:s})}else if(t.hasClass("radios")){if(a=t.find(":input"),r=!0,a.filter(function(){if(i(this).is(":checked"))return r=!1,!1}),r)return e.push({input:t,element:t,message:s})}else if("SELECT"===t.prop("tagName")&&!t.val())return t.hasClass("select2-hidden-accessible")?e.push({input:null,element:t.next(),message:s}):e.push({input:t,element:t,message:s})}),e},this.canSubmit=function(t){var e,i,n,r,o,s,a;if(app.flash.Clear(),i=this.getRequiredFields(),i.length>0){if(n=i[0],a="",t&&i.length>1){for(a+="<ul>",r=0,s=i.length;r<s;r++)e=i[r],a+="<li>"+e.message+"</li>";a+="</ul>"}else a=n.message;return app.flash.Warn(a),n.element&&(n.input&&n.input.focus(),n.element.addClass("inputHighlight"),n.element.hasClass("checkboxes")||n.element.hasClass("radios")?(o=n.element.find(":input"),o.change(function(){if(n.element.hasClass("inputHighlight"))return n.element.removeClass("inputHighlight")})):null==n.input?n.element.click(function(){if(n.element.hasClass("inputHighlight"))return n.element.removeClass("inputHighlight")}):n.input.on("input propertychange",function(){if(n.element.hasClass("inputHighlight"))return n.element.removeClass("inputHighlight")})),!1}return!0}}return t}()}.apply(e,n))&&(t.exports=r)}).call(e,i(245))},1133:function(t,e,i){!function(t){t(i(164),e)}(function(t,e){function i(){for(var t,e,i,n=arguments,r=n.length,o={},s=[];r--;)for(i=n[r],t=i.length;t--;)e=i[t],o[e]||(o[e]=1,s.push(e));return s}function n(t,r){var o;for(var s in r)if(r.hasOwnProperty(s)&&r[s])if(o=e.getType(t[s]),s&&t[s]&&"array"!==o&&"string"!==o)n(t[s],r[s]);else{var a="array"===e.getType(t[s])&&"array"===e.getType(r[s]);t[s]=a?i(t[s],r[s]):r[s]}}function r(t,e){var i={};return n(i,t),n(i,e),i}function o(t,e){for(var i=r({},t),n=C.length-1;n>=0;n--){var o=C[n];i[o]&&(i[""]instanceof Object||(i[""]={}),i[""][o]=i[o],delete i[o])}return e&&(i.ignore=s(e.ignore,i.ignore),i.include=s(e.include,i.include),i.copy=s(e.copy,i.copy),i.observe=s(e.observe,i.observe)),i.ignore=s(i.ignore,S.ignore),i.include=s(i.include,S.include),i.copy=s(i.copy,S.copy),i.observe=s(i.observe,S.observe),i.mappedProperties=i.mappedProperties||{},i.copiedProperties=i.copiedProperties||{},i}function s(i,n){return"array"!==e.getType(i)&&(i="undefined"===e.getType(i)?[]:[i]),"array"!==e.getType(n)&&(n="undefined"===e.getType(n)?[]:[n]),t.utils.arrayGetDistinctValues(i.concat(n))}function a(e,i){var n=t.dependentObservable;t.dependentObservable=function(i,n,r){r=r||{},i&&"object"==typeof i&&(r=i);var o=r.deferEvaluation,s=!1;r.deferEvaluation=!0;var a=new x(i,n,r);return o||(a=function(i){var n=t.dependentObservable;t.dependentObservable=x;var r=t.isWriteableObservable(i);t.dependentObservable=n;var o=x({read:function(){return s||(t.utils.arrayRemoveItem(e,i),s=!0),i.apply(i,arguments)},write:r&&function(t){return i(t)},deferEvaluation:!0});return w&&(o._wrapper=!0),o.__DO=i,o}(a),e.push(a)),a},t.dependentObservable.fn=x.fn,t.computed=t.dependentObservable;var r=i();return t.dependentObservable=n,t.computed=t.dependentObservable,r}function l(i,n,o,s,u,m,g){var y="array"===e.getType(t.utils.unwrapObservable(n));if(m=m||"",e.isMapped(i)){var w=t.utils.unwrapObservable(i)[k];o=r(w,o)}var x={data:n,parent:g||u},T=function(){return o[s]&&o[s].create instanceof Function},C=function(e){return a(v,function(){return t.utils.unwrapObservable(u)instanceof Array?o[s].create({data:e||x.data,parent:x.parent,skip:I}):o[s].create({data:e||x.data,parent:x.parent})})},_=function(){return o[s]&&o[s].update instanceof Function},S=function(e,i){var n={data:i||x.data,parent:x.parent,target:t.utils.unwrapObservable(e)};return t.isWriteableObservable(e)&&(n.observable=e),o[s].update(n)},A=b.get(n);if(A)return A;if(s=s||"",y){var O=[],P=!1,E=function(t){return t};o[s]&&o[s].key&&(E=o[s].key,P=!0),t.isObservable(i)||(i=t.observableArray([]),i.mappedRemove=function(t){var e="function"==typeof t?t:function(e){return e===E(t)};return i.remove(function(t){return e(E(t))})},i.mappedRemoveAll=function(e){var n=d(e,E);return i.remove(function(e){return-1!=t.utils.arrayIndexOf(n,E(e))})},i.mappedDestroy=function(t){var e="function"==typeof t?t:function(e){return e===E(t)};return i.destroy(function(t){return e(E(t))})},i.mappedDestroyAll=function(e){var n=d(e,E);return i.destroy(function(e){return-1!=t.utils.arrayIndexOf(n,E(e))})},i.mappedIndexOf=function(e){var n=d(i(),E),r=E(e);return t.utils.arrayIndexOf(n,r)},i.mappedGet=function(t){return i()[i.mappedIndexOf(t)]},i.mappedCreate=function(e){if(-1!==i.mappedIndexOf(e))throw new Error("There already is an object with the key that you specified.");var n=T()?C(e):e;if(_()){var r=S(n,e);t.isWriteableObservable(n)?n(r):n=r}return i.push(n),n});var M=d(t.utils.unwrapObservable(i),E).sort(),L=d(n,E);P&&L.sort();var D,j,N=t.utils.compareArrays(M,L),F={},R=t.utils.unwrapObservable(n),U={},z=!0;for(D=0,j=R.length;D<j;D++){var B=E(R[D]);if(void 0===B||B instanceof Object){z=!1;break}U[B]=R[D]}var H=[],$=0;for(D=0,j=N.length;D<j;D++){var Y,B=N[D],V=m+"["+D+"]";switch(B.status){case"added":var G=z?U[B.value]:p(t.utils.unwrapObservable(n),B.value,E);Y=l(void 0,G,o,s,i,V,u),T()||(Y=t.utils.unwrapObservable(Y));var W=c(t.utils.unwrapObservable(n),G,F);Y===I?$++:H[W-$]=Y,F[W]=!0;break;case"retained":var G=z?U[B.value]:p(t.utils.unwrapObservable(n),B.value,E);Y=p(i,B.value,E),l(Y,G,o,s,i,V,u);var W=c(t.utils.unwrapObservable(n),G,F);H[W]=Y,F[W]=!0;break;case"deleted":Y=p(i,B.value,E)}O.push({event:B.status,item:Y})}i(H),o[s]&&o[s].arrayChanged&&t.utils.arrayForEach(O,function(t){o[s].arrayChanged(t.event,t.item)})}else if(f(n)){if(!(i=t.utils.unwrapObservable(i))){if(T()){var q=C();return _()&&(q=S(q)),q}if(_())return S(q);i={}}if(_()&&(i=S(i)),b.save(n,i),_())return i;h(n,function(e){var r=m.length?m+"."+e:e;if(-1==t.utils.arrayIndexOf(o.ignore,r)){if(-1!=t.utils.arrayIndexOf(o.copy,r))return void(i[e]=n[e]);if("object"!=typeof n[e]&&"array"!=typeof n[e]&&o.observe.length>0&&-1==t.utils.arrayIndexOf(o.observe,r))return i[e]=n[e],void(o.copiedProperties[r]=!0);var s=b.get(n[e]),a=l(i[e],n[e],o,e,i,r,i),c=s||a;if(o.observe.length>0&&-1==t.utils.arrayIndexOf(o.observe,r))return i[e]=t.utils.unwrapObservable(c),void(o.copiedProperties[r]=!0);t.isWriteableObservable(i[e])?(c=t.utils.unwrapObservable(c),i[e]()!==c&&i[e](c)):(c=void 0===i[e]?c:t.utils.unwrapObservable(c),i[e]=c),o.mappedProperties[r]=!0}})}else switch(e.getType(n)){case"function":_()?t.isWriteableObservable(n)?(n(S(n)),i=n):i=S(n):i=n;break;default:if(t.isWriteableObservable(i)){if(_()){var X=S(i);return i(X),X}var X=t.utils.unwrapObservable(n);return i(X),X}var Q=T()||_();if(i=T()?C():t.observable(t.utils.unwrapObservable(n)),_()&&i(S(i)),Q)return i}return i}function c(t,e,i){for(var n=0,r=t.length;n<r;n++)if(!0!==i[n]&&t[n]===e)return n;return null}function u(i,n){var r;return n&&(r=n(i)),"undefined"===e.getType(r)&&(r=i),t.utils.unwrapObservable(r)}function p(e,i,n){e=t.utils.unwrapObservable(e);for(var r=0,o=e.length;r<o;r++){var s=e[r];if(u(s,n)===i)return s}throw new Error("When calling ko.update*, the key '"+i+"' was not found!")}function d(e,i){return t.utils.arrayMap(t.utils.unwrapObservable(e),function(t){return i?u(t,i):t})}function h(t,i){if("array"===e.getType(t))for(var n=0;n<t.length;n++)i(n);else for(var r in t)i(r)}function f(t){var i=e.getType(t);return("object"===i||"array"===i)&&null!==t}function m(t,i,n){var r=t||"";return"array"===e.getType(i)?t&&(r+="["+n+"]"):(t&&(r+="."),r+=n),r}function g(){var e=[],i=[];this.save=function(n,r){var o=t.utils.arrayIndexOf(e,n);o>=0?i[o]=r:(e.push(n),i.push(r))},this.get=function(n){var r=t.utils.arrayIndexOf(e,n);return r>=0?i[r]:void 0}}function y(){var t={},e=function(e){var i;try{i=e}catch(t){i="$$$"}var n=t[i];return void 0===n&&(n=new g,t[i]=n),n};this.save=function(t,i){e(t).save(t,i)},this.get=function(t){try{return e(t).get(t)}catch(e){return void console.error(e,t)}}}var v,b,w=!0,k="__ko_mapping__",x=t.dependentObservable,T=0,C=["create","update","key","arrayChanged"],I={},_={include:["_destroy"],ignore:[],copy:[],observe:[]},S=_;e.isMapped=function(e){var i=t.utils.unwrapObservable(e);return i&&i[k]},e.fromJS=function(t){if(0==arguments.length)throw new Error("When calling ko.fromJS, pass the object you want to convert.");try{T++||(v=[],b=new y);var e,i;2==arguments.length&&(arguments[1][k]?i=arguments[1]:e=arguments[1]),3==arguments.length&&(e=arguments[1],i=arguments[2]),i&&(e=r(e,i[k])),e=o(e);var n=l(i,t,e);if(i&&(n=i),!--T)for(;v.length;){var s=v.pop();s&&(s(),s.__DO.throttleEvaluation=s.throttleEvaluation)}return n[k]=r(n[k],e),n}catch(t){throw T=0,t}},e.fromJSON=function(i){var n=t.utils.parseJson(i);return arguments[0]=n,e.fromJS.apply(this,arguments)},e.updateFromJS=function(t){throw new Error("ko.mapping.updateFromJS, use ko.mapping.fromJS instead. Please note that the order of parameters is different!")},e.updateFromJSON=function(t){throw new Error("ko.mapping.updateFromJSON, use ko.mapping.fromJSON instead. Please note that the order of parameters is different!")},e.toJS=function(i,n){if(S||e.resetDefaultOptions(),0==arguments.length)throw new Error("When calling ko.mapping.toJS, pass the object you want to convert.");if("array"!==e.getType(S.ignore))throw new Error("ko.mapping.defaultOptions().ignore should be an array.");if("array"!==e.getType(S.include))throw new Error("ko.mapping.defaultOptions().include should be an array.");if("array"!==e.getType(S.copy))throw new Error("ko.mapping.defaultOptions().copy should be an array.");return n=o(n,i[k]),e.visitModel(i,function(e){return t.utils.unwrapObservable(e)},n)},e.toJSON=function(i,n){var r=e.toJS(i,n);return t.utils.stringifyJson(r)},e.defaultOptions=function(){if(!(arguments.length>0))return S;S=arguments[0]},e.resetDefaultOptions=function(){S={include:_.include.slice(0),ignore:_.ignore.slice(0),copy:_.copy.slice(0),observe:_.observe.slice(0)}},e.getType=function(t){if(t&&"object"==typeof t){if(t.constructor===Date)return"date";if(t.constructor===Array)return"array"}return typeof t},e.visitModel=function(i,n,r){r=r||{},r.visitedObjects=r.visitedObjects||new y;var s,a=t.utils.unwrapObservable(i);if(!f(a))return n(i,r.parentName);r=o(r,a[k]),n(i,r.parentName),s="array"===e.getType(a)?[]:{},r.visitedObjects.save(i,s);var l=r.parentName;return h(a,function(i){if(!r.ignore||-1==t.utils.arrayIndexOf(r.ignore,i)){var o=a[i];if(r.parentName=m(l,a,i),-1!==t.utils.arrayIndexOf(r.copy,i)||-1!==t.utils.arrayIndexOf(r.include,i)||!a[k]||!a[k].mappedProperties||a[k].mappedProperties[i]||!a[k].copiedProperties||a[k].copiedProperties[i]||"array"===e.getType(a)){switch(e.getType(t.utils.unwrapObservable(o))){case"object":case"array":case"undefined":var c=r.visitedObjects.get(o);s[i]="undefined"!==e.getType(c)?c:e.visitModel(o,n,r);break;default:s[i]=n(o,r.parentName)}}}}),s}})},1134:function(t,e,i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}};n=[i(164),i(1117),i(1119)],void 0!==(r=function(t,e,i){var n,r;return r=function(t){return t},n=function(e,i){t.isWritableObservable(e)&&(i._dataSourceSync=!0,e(i),t.tasks.schedule(function(){i._dataSourceSync=!1}))},function(){function s(e){var i,n,r;null==e&&(e={}),this.ManageView=o(this.ManageView,this),this.LoadMoreData=o(this.LoadMoreData,this),this.GetAllData=o(this.GetAllData,this),this.GetQueryTokens=o(this.GetQueryTokens,this),this.subscriptions=[],this.fullQueryMode=t.isObservable(e.fullQueryMode)?e.fullQueryMode:t.observable(null!=(i=e.fullQueryMode)&&i),console.assert("boolean"==typeof this.fullQueryMode()),this.fullQuery=t.observable(""),this.caretIndex=t.observable(0),this.selectedItems=null!=(n=e.selectedItems)?n:t.observable([]),console.assert(t.isWritableObservable(this.selectedItems)),console.assert(Array.isArray(this.selectedItems())),this.dataLoader=null!=(r=e.dataLoader)?r:t.observable(null),console.assert(t.isObservable(this.dataLoader)),null!=e.selectedItemsLimit&&(this.selectedItemsLimit=e.selectedItemsLimit),console.assert("number"==typeof this.selectedItemsLimit),this.subscriptions.push(this.fullQueryBeforeCaret=t.pureComputed(function(t){return function(){return t.fullQuery().substring(0,t.caretIndex())}}(this))),this.subscriptions.push(this.fullQueryAfterCaret=t.pureComputed(function(t){return function(){return t.fullQuery().substring(t.caretIndex())}}(this))),this.subscriptions.push(this.queryBeforeCaret=t.pureComputed(function(t){return function(){return t.fullQueryMode()?t.fullQueryBeforeCaret():t.GetQueryBeforeCaret()}}(this))),this.subscriptions.push(this.queryAfterCaret=t.pureComputed(function(t){return function(){return t.fullQueryMode()?t.fullQueryAfterCaret():t.GetQueryAfterCaret()}}(this))),this.subscriptions.push(this.queryStartIndex=t.pureComputed(function(t){return function(){return null==t.queryBeforeCaret()||null==t.queryAfterCaret()?null:t.caretIndex()-t.queryBeforeCaret().length}}(this))),this.subscriptions.push(this.queryEndIndex=t.pureComputed(function(t){return function(){return null==t.queryBeforeCaret()||null==t.queryAfterCaret()?null:t.caretIndex()+t.queryAfterCaret().length}}(this))),this.subscriptions.push(this.query=t.pureComputed(function(t){return function(){return null==t.queryBeforeCaret()||null==t.queryAfterCaret()?null:t.queryBeforeCaret()+t.queryAfterCaret()}}(this))),this.subscriptions.push(this.queryTokens=t.pureComputed(this.GetQueryTokens)),this.subscriptions.push(this.freeText=t.pureComputed(function(t){return function(){var e;return e=t.fullQuery(),null==t.query()?e:e.substring(0,t.queryStartIndex())+e.substring(t.queryEndIndex())}}(this))),this.subscriptions.push(this.allData=t.pureComputed(this.GetAllData)),this.subscriptions.push(this.selectedItemsMap=t.pureComputed(function(t){return function(){var e,i,n,r,o,s,a;for(a=Object.create(null),s=t.selectedItems(),n=0,r=s.length;n<r;n++)i=s[n],e=null!=a[o=i.type]?a[o]:a[o]=Object.create(null),e[i.id]=i;return a}}(this))),this.subscriptions.push(this.matchingData=t.pureComputed(function(t){return function(){var e;return e=t.queryTokens(),null==e?null:t.IsSelectedItemsLimitReached()?[t.GetSelectedItemsLimitItem()]:t.GetMatchingData(e)}}(this)))}return s.SPECIAL_ITEMS={ALL:-1,GROUP:-2,ADD_NEW:-1e3,SHOW_ALL:-1001,MESSAGE:-2e3},s.prototype.defaultType="",s.prototype.order=0,s.prototype.noMatchingDataMessage=app.tl("No Results"),s.prototype.selectedItemsLimit=Infinity,s.prototype.excludeSelected=!1,s.prototype.GetQueryBeforeCaret=function(){return null},s.prototype.GetQueryAfterCaret=function(){return null},s.prototype.GetQueryTokens=function(){return null==this.query()?null:[this.query()]},s.prototype.GetAllData=function(){return[]},s.prototype.GetMatchingData=function(t){return this.allData().filter(function(e){return function(i){return!e.ShouldExcludeItem(i)&&e.MatchesTokens(i,t)}}(this))},s.prototype.IsSelectedItemsLimitReached=function(){var t;return this.selectedItemsLimit<Infinity&&(null!=(t=this.selectedItemsMap()[this.defaultType])&&this.selectedItemsLimit<=Object.keys(t).length)},s.prototype.GetSelectedItemsLimitMessage=function(){return app.tl("Too many items")},s.prototype.GetSelectedItemsLimitItem=function(){return this.NormalizeDataItem({id:s.SPECIAL_ITEMS.MESSAGE,label:this.GetSelectedItemsLimitMessage(),action:function(){return null}})},s.prototype.IsItemSelected=function(t){var e;return null!=(null!=(e=this.selectedItemsMap()[t.type])?e[t.id]:void 0)},s.prototype.ShouldExcludeItem=function(t){return this.excludeSelected&&this.IsItemSelected(t)},s.prototype.MatchesToken=function(t,e){return t.value.indexOf(e)>=0||t.alternateValues.length&&t.alternateValues.filter(function(t){return t.includes(e)}).length},s.prototype.MatchesTokens=function(t,e){return e.every(function(e){return function(i){return e.MatchesToken(t,i)}}(this))},s.prototype.OnAutoComplete=function(){},s.prototype.OnSelectionStart=function(){},s.prototype.OnSelectionComplete=function(){},s.prototype.LoadMoreData=function(){return null==this.dataLoader()?e.resolve():this.dataLoader().LoadMore()},s.prototype.ManageView=function(e,i,r){var o,s,a,l,c,u,p;if(null==r&&(r={}),t.isObservable(e)&&t.isObservable(i)){if(console.assert(Array.isArray(e())),console.assert(Array.isArray(i())),e._dataSourceView&&!1===app.isAddEditReport())throw new Error("View is already managed");e._dataSourceView=!0,this.subscriptions.push({dispose:function(){e._dataSourceView=!1}}),s=null!=(c=r.filter)?c:function(t){return!0},a=null!=(u=r.map)?u:function(t){return t},l=null!=(p=r.mapViewItem)?p:function(t){return t},o=function(t,e){return t.length===e.length&&t.every(function(t,i){return t===e[i]})},this.subscriptions.push(t.computed(function(t){return function(){var t,r,a,c,u,p,d,h;if(h=e(),!h._dataSourceSync){for(a=i.peek(),p=a.filter(function(t){return!s(t)}),t=[],c=0,u=h.length;c<u;c++)d=h[c],r=l(d),null!==r&&t.push(d),null!=r&&p.push(r);t.length!==h.length&&n(e,t),o(p,a)||n(i,p)}}}())),this.subscriptions.push(t.computed(function(r){return function(){var r,l,c;r=i(),r._dataSourceSync||t.computedContext.isInitial()||(c=e.peek(),l=r.filter(s).map(a),o(l,c)||n(e,l))}}()))}},s.prototype.NormalizeDataItem=function(t){var e;if(null==t||"object"!=typeof t)throw new Error("Each data item must be an object");if(null==t.id?t.id=0:"number"!=typeof t.id&&(e=t.id/1,isNaN(e)||(t.id=e)),"string"!=typeof t.type&&(t.type=this.defaultType),"string"!=typeof t.label)throw new Error("item.label must be a string");return"string"!=typeof t.value&&(t.value=t.label),"string"!=typeof t.color&&(t.color="#a6a6a6"),"number"!=typeof t.order&&(t.order=this.order+5e5),t.order=Math.max(t.order,this.order),t.order=Math.min(t.order,this.order+1e6-1),null==t.alternateValues&&(t.alternateValues=[]),Array.isArray(t.alternateValues)||(t.alternateValues=[]),"string"!=typeof t.suggestionTemplate&&(t.suggestionTemplate="<span>{{label}}</span>"),"string"!=typeof t.replacementTemplate&&(t.replacementTemplate="<span>{{label}}</span>"),"function"!=typeof t.action&&(t.action=r),t.dataSource=this,t},s.prototype.NormalizeData=function(t,e){var n,r,o;if(null==e&&(e=void 0),!Array.isArray(t))throw new Error("data must be an Array");for(r=0,o=t.length;r<o;r++)n=t[r],this.NormalizeDataItem(n);return null!=e?t.sort(e):t.sort(function(t,e){var n;return n=t.order-e.order,0===n&&(n=i.serverCompare(t.label,e.label)),n})},s.prototype.dispose=function(){var t,e,i,n;for(i=this.subscriptions,t=0,e=i.length;t<e;t++)n=i[t],n.dispose()},s}()}.apply(e,n))&&(t.exports=r)},1136:function(t,e,i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function i(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=[i(164),i(1117),i(1134),i(4473),i(4474)],void 0!==(r=function(t,e,i,n,r){return function(e){function i(e){var n,s,a,l;null==e&&(e={}),this.ProjectToRawItem=o(this.ProjectToRawItem,this),this.SyncIds=o(this.SyncIds,this),this.LoadData=o(this.LoadData,this),this.OnSelectionStart=o(this.OnSelectionStart,this),this.GetQueryTokens=o(this.GetQueryTokens,this),this.GetQueryAfterCaret=o(this.GetQueryAfterCaret,this),this.GetQueryBeforeCaret=o(this.GetQueryBeforeCaret,this),i.__super__.constructor.call(this,e),this.selectedProjectIds=e.selectedProjectIds,console.assert(null==this.selectedProjectIds||t.isObservable(this.selectedProjectIds)&&Array.isArray(this.selectedProjectIds())),this.mapViewIdItems={},this.itemType=null!=(n=e.itemType)?n:void 0,this.itemId=null!=(s=e.itemId)?s:void 0,this.status=null!=(a=e.status)?a:void 0,this.featuresEnabledOnProject=null!=(l=e.featuresEnabledOnProject)?l:void 0,this.subscriptions.push(this.normalizedQuery=t.pureComputed(function(t){return function(){var e;return null==(e=t.query())?null:(t.fullQueryMode()||(e=e.substring(1)),e.trim())}}(this))),this.projectIds=t.observable(this.selectedProjectIds().slice()),this.subscriptions.push(this.projectParams=t.pureComputed(function(e){return function(){var i;return i=e.queryTokens(),null==i?{empty:!0}:(console.assert("string"==typeof i[0]),{delay:""===i[0]?0:500,skipIds:e.projectIds().toString(),searchTerm:i[0],itemType:e.itemType,itemId:e.itemId,status:e.status,featuresEnabledOnProject:JSON.stringify(t.unwrap(e.featuresEnabledOnProject))})}}(this))),this.subscriptions.push(this.projects=r.getProjects(this.projectParams)),this.subscriptions.push(this.projects.subscribe(function(t){return function(e){return t.dataLoader(e.dataLoader)}}(this))),this.SyncIds(this.selectedProjectIds,this.selectedItems)}return s(i,e),i.prototype.defaultType="project",i.prototype.order=app.consts.AUTO_COMPLETE_ORDER.PROJECT,i.prototype.noMatchingDataMessage=app.tl("Project Not Found"),i.prototype.excludeSelected=!0,i.prototype.GetQueryBeforeCaret=function(){var t,e;return null!=(t=null!=(e=/(?:^|\s)(\/[^\/\n\r]{0,15})$/.exec(this.fullQueryBeforeCaret()))?e[1]:void 0)?t:null},i.prototype.GetQueryAfterCaret=function(){return""},i.prototype.GetQueryTokens=function(){var t;return t=this.normalizedQuery(),null==t?null:[t]},i.prototype.GetMatchingData=function(t){var e;return e=this.projects().filter(function(t){return function(e){return-1===t.selectedProjectIds().indexOf(parseInt(e.id,10))}}(this)),this.NormalizeData(e.map(this.ProjectToRawItem))},i.prototype.GetSelectedItemsLimitMessage=function(){return app.tl("Only [_s] projects are allowed.",this.selectedItemsLimit)},i.prototype.OnSelectionStart=function(){return this.projectIds(this.selectedProjectIds().slice())},i.prototype.LoadData=function(){return this.fullQueryMode(!0),this.fullQuery(""),this.OnSelectionStart()},i.prototype.OnAutoComplete=function(t){var e;e=t.item,this.IsItemSelected(e)||this.selectedItems(this.selectedItems().concat(e))},i.prototype.SyncIds=function(e,i){this.ManageView(e,i,{filter:function(t){return"project"===t.type},map:function(t){return t.id},mapViewItem:function(e){return function(i){var r,o,s;return i in e.mapViewIdItems&&!t.isObservable(e.mapViewIdItems[i])?e.mapViewIdItems[i]:(s=null!=(r=e.mapViewIdItems)[i]?r[i]:r[i]=n.getProject(i),o=s(),o.ready?(s.dispose(),e.mapViewIdItems[i]=null!=o.error?null:e.NormalizeDataItem(e.ProjectToRawItem(o))):void 0)}}(this)})},i.prototype.ProjectToRawItem=function(t){return{id:t.id,type:"project",label:t.name,value:t.name.toLowerCase(),suggestionTemplate:'<span class="ml">{{label}}</span>',name:t.name,companyName:null!=t.company?t.company.name:null!=t.companyName?t.companyName:""}},i.prototype.dispose=function(){var e,n,r;i.__super__.dispose.call(this),n=this.mapViewIdItems;for(e in n)r=n[e],t.isObservable(r)&&"function"==typeof r.dispose&&r.dispose()},i}(i)}.apply(e,n))&&(t.exports=r)},1137:function(t,e,i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function i(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},a={}.hasOwnProperty,l=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};n=[i(164),i(1117),i(1134),i(4475),i(4476)],void 0!==(r=function(t,e,i,n,r){return function(a){function c(e){var n,s;null==e&&(e={}),this.AddTagAction=o(this.AddTagAction,this),this.ShowAllAction=o(this.ShowAllAction,this),this.TagToRawItem=o(this.TagToRawItem,this),this.SyncIds=o(this.SyncIds,this),this.SyncNames=o(this.SyncNames,this),this.GetAllData=o(this.GetAllData,this),this.GetQueryTokens=o(this.GetQueryTokens,this),this.GetQueryAfterCaret=o(this.GetQueryAfterCaret,this),this.GetQueryBeforeCaret=o(this.GetQueryBeforeCaret,this),c.__super__.constructor.call(this,e),this.showAddTag=null!=(n=e.showAddTag)&&n,console.assert("boolean"==typeof this.showAddTag),this.selectedTagNames=e.selectedTagNames,console.assert(null==this.selectedTagNames||t.isObservable(this.selectedTagNames)&&Array.isArray(this.selectedTagNames())),this.selectedTagIds=e.selectedTagIds,console.assert(null==this.selectedTagIds||t.isObservable(this.selectedTagIds)&&Array.isArray(this.selectedTagIds())),this.mapViewNameItems={},this.mapViewIdItems={},this.clientSideMode=t.observable(!1),this.globalTagsOnly=null!=(s=e.globalTagsOnly)&&s,this.projectIds=e.projectIds,this.globalTagsOnly||console.assert(null==this.projectIds||t.isObservable(this.projectIds)&&Array.isArray(this.projectIds())),this.searchRightOnly=t.observable(!1),this.showAllItem=this.NormalizeDataItem({id:i.SPECIAL_ITEMS.SHOW_ALL,label:app.tl("All Tags")+app.localizationPreferences().ellipsis,action:this.ShowAllAction}),this.showAddTag&&(this.addTagItem=this.NormalizeDataItem({id:i.SPECIAL_ITEMS.ADD_NEW,label:app.tl("Add Tag")+app.localizationPreferences().ellipsis,action:this.AddTagAction,suggestionTemplate:"<span class=\"w-auto-complete__item-icon\">\n    \x3c!-- ko component: {\n            name: 'ui-common-icon',\n            params: {\n                name: 'add-regular',\n                class: 'h-icon-color--inherit'\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n</span>\n<span class=\"w-auto-complete__item-title\">\n    {{label}}\n</span>"})),this.subscriptions.push(this.normalizedQuery=t.pureComputed(function(t){return function(){var e;return null==(e=t.query())?null:(t.fullQueryMode()||(e=e.substring(1)),e.trim())}}(this))),this.subscriptions.push(this.skipIds=t.pureComputed(function(t){return function(){var e;if(null!=(e=t.selectedItemsMap().tag))return Object.keys(e)}}(this))),this.subscriptions.push(this.queryTokens.subscribe(function(t){return function(e){null==e&&t.clientSideMode(!1)}}(this))),this.subscriptions.push(this.tagsParams=t.pureComputed(function(e){return function(){var i,n;return n=e.queryTokens(),i={},null==n?i.empty=!0:e.clientSideMode()?i.loadAll=!0:""===n[0]?(i.skipIds=e.skipIds(),i.filter="recent"):(console.assert("string"==typeof n[0]),i={delay:500,skipIds:e.skipIds(),query:n[0],searchRightOnly:e.searchRightOnly()}),e.globalTagsOnly?i.projectIds=[0]:null!=e.projectIds&&(e.projectIds().length>0&&e.projectIds().length<100?(i.projectIds=t.toJS(e.projectIds()),l.call(i.projectIds,0)<0&&i.projectIds.unshift(0)):i.showAll=!0),i}}(this))),this.subscriptions.push(this.tags=r.getTags(this.tagsParams)),this.subscriptions.push(this.tags.subscribe(function(t){return function(e){return t.dataLoader(e.dataLoader)}}(this))),this.SyncNames(this.selectedTagNames,this.selectedItems),this.SyncIds(this.selectedTagIds,this.selectedItems)}return s(c,a),c.prototype.defaultType="tag",c.prototype.order=app.consts.AUTO_COMPLETE_ORDER.TAG,c.prototype.noMatchingDataMessage=app.tl("Tag Not Found"),c.prototype.excludeSelected=!0,c.prototype.GetQueryBeforeCaret=function(){var t,e;return null!=(t=null!=(e=/(?:^|\s)(#[^#\n\r]{0,15})$/.exec(this.fullQueryBeforeCaret()))?e[1]:void 0)?t:null},c.prototype.GetQueryAfterCaret=function(){return""},c.prototype.GetQueryTokens=function(){var t;return t=this.normalizedQuery(),null==t?null:this.clientSideMode()?t.split(/\s+/):[t]},c.prototype.GetAllData=function(){return this.NormalizeData(this.tags().map(this.TagToRawItem),this.sortTags)},c.prototype.GetMatchingData=function(t){var e;return this.clientSideMode()?e=c.__super__.GetMatchingData.call(this,t):(e=this.allData(),this.tags().hasMore&&(e=e.slice(),e.push(this.showAllItem))),this.showAddTag&&0===e.length?[this.addTagItem]:e},c.prototype.GetSelectedItemsLimitMessage=function(){return app.tl("Only [_s] tags are allowed.",this.selectedItemsLimit)},c.prototype.OnAutoComplete=function(t){var e;e=t.item,this.IsItemSelected(e)||this.selectedItems(this.selectedItems().concat(e))},c.prototype.SyncNames=function(e,i){this.ManageView(e,i,{filter:function(t){return"tag"===t.type},map:function(t){return t.label},mapViewItem:function(e){return function(i){var n,o,s;return i in e.mapViewNameItems&&!t.isObservable(e.mapViewNameItems[i])?e.mapViewNameItems[i]:(s=null!=(n=e.mapViewNameItems)[i]?n[i]:n[i]=r.getTags({query:i}),s().ready?(o=s().find(function(t){return t.name===i}),s.dispose(),e.mapViewNameItems[i]=null!=o?e.NormalizeDataItem(e.TagToRawItem(o)):null):void 0)}}(this)})},c.prototype.ComputeValue=function(t){return this.RemoveNonLetters(t).toLowerCase()},c.prototype.RemoveNonLetters=function(t){return t.replace(/[^\u00C0-\u1FFF\u2C00-\uD7FF\w]/g,"")},c.prototype.SyncIds=function(e,i){this.ManageView(e,i,{filter:function(t){return"tag"===t.type},map:function(t){return t.id},mapViewItem:function(e){return function(i){var r,o,s;return i in e.mapViewIdItems&&!t.isObservable(e.mapViewIdItems[i])?e.mapViewIdItems[i]:(s=null!=(r=e.mapViewIdItems)[i]?r[i]:r[i]=n.getTag(i),o=s(),o.ready?(s.dispose(),e.mapViewIdItems[i]=null!=o.error?null:e.NormalizeDataItem(e.TagToRawItem(o))):void 0)}}(this)})},c.prototype.TagToRawItem=function(t){var e,i;return e=0===parseInt(t.projectId,10),i="<i class='autoCompleteBinding__icon autoCompleteBinding__tag' data-bind='style: { backgroundColor: color }'></i> <span data-bind='tippedDelegate' data-content='{{ app.tl(\"Project: [_s]\", projectName) }}' data-tipped-options=' showOn: \"mouseenter\", hideOn: \"mouseleave\", showDelay: 500, maxWidth: 330' >{{label}}</span>",{id:t.id,isGlobal:e,type:"tag",label:t.name,value:t.name.toLowerCase(),color:t.color,name:t.name,projectName:e?app.tl("All Projects"):t.projectName,suggestionTemplate:i,order:this.order+5e5+(e?0:t.projectId)}},c.prototype.ShowAllAction=function(){this.clientSideMode(!0)},c.prototype.AddTagAction=function(){return new e(function(t){return function(e,i){var n;app.modal.Show("addTag",{tagName:null!=(n=t.normalizedQuery())?n:"",onCloseCallBack:function(i){e(i.wasCancelled?null:t.NormalizeDataItem(t.TagToRawItem(i)))}})}}(this))},c.prototype.sortTags=function(t,e){return t.isGlobal?1:e.isGlobal?-1:t.projectName.localeCompare(e.projectName)},c.prototype.dispose=function(){var e,i,n,r;c.__super__.dispose.call(this),i=this.mapViewNameItems;for(e in i)r=i[e],t.isObservable(r)&&"function"==typeof r.dispose&&r.dispose();n=this.mapViewIdItems;for(e in n)r=n[e],t.isObservable(r)&&"function"==typeof r.dispose&&r.dispose()},c}(i)}.apply(e,n))&&(t.exports=r)},1138:function(t,e,i){(function(n){var r,o,s=function(t,e){return function(){return t.apply(e,arguments)}};r=[i(164),i(1133),i(1119),i(1152)],void 0!==(o=function(t,e,i,r){var o;return o=function(){function r(t){this.DeleteTemplate=s(this.DeleteTemplate,this),this.Delete=s(this.Delete,this),this.OnComplete=s(this.OnComplete,this),this.OnQuickView=s(this.OnQuickView,this),this.OnClickAddTask=s(this.OnClickAddTask,this),this.OnClickShowEditTaskList=s(this.OnClickShowEditTaskList,this),this.OnClickTogglePinned=s(this.OnClickTogglePinned,this),this.OnClickToggleCollapse=s(this.OnClickToggleCollapse,this),this.componentName="TaskList",null==t&&(t=this.GetNewJSON()),this.UpdateData(t)}return r.prototype.UpdateData=function(i){var o,s;return i=n.extend({},i),i.id=parseInt(i.id,10),i.milestoneId=null!=(null!=i?i.milestoneId:void 0)&&""!==i.milestoneId?parseInt(i.milestoneId,10):0,i.uncompletedCount=parseInt(t.unwrap(i.uncompletedCount,10)),i.completedCount=parseInt(t.unwrap(i.completedCount,10)),i.position=parseInt(i.position,10),null!=i.projectId&&(i.projectId=parseInt(i.projectId,10)),null!=i.DLM&&(i.DLM=parseInt(i.DLM,10)),null==i.isEditing&&(i.isEditing=!1),null==i.color&&(i.color=app.utility.GetRandomNiceColor()),isNaN(i.uncompletedCount)&&(i.uncompletedCount=0),isNaN(i.completedCount)&&(i.completedCount=0),null==(null!=i?i.pinned:void 0)&&(i.pinned=!1),null==(null!=i?i.tags:void 0)&&(i.tags=[]),i.newTaskDefaults||(i.newTaskDefaults={commentFollowerSummary:"Nobody",estimatedMinutes:0,userFollowingChanges:!1,description:"",hasTickets:!1,priority:"",defaultsTaskId:0,private:0,viewEstimatedTime:!1,userFollowingComments:!1,startDateOffset:"",changeFollowerSummary:"Nobody",changeFollowerIds:"",grantAccessTo:"",dueDateOffset:"",tags:[],reminders:[],content:"",commentFollowerIds:"",lockdownId:0,"responsible-party-ids":"","responsible-party-names":"","responsible-party-summary":"",customFields:[],boardColumn:{id:0,name:"",color:""}}),null==(o=i.newTaskDefaults).boardColumn&&(o.boardColumn={id:0,name:"",color:""}),null==(s=i.newTaskDefaults).customFields&&(s.customFields=[]),app.utility.PopulateDynamicFields(i.newTaskDefaults),i.isPrivate=null!=i.private&&i.private?1:0,i.private=void 0,i.numIncomplete=i.uncompletedCount,i.numComplete=i.completedCount,i.uncompletedCount=void 0,i.completedCount=void 0,null==(null!=i?i.status:void 0)&&(i.status=i.complete?"completed":"new"),e.fromJS(i,r.mapping,this),null==i.newTaskDefaults.responsiblePartyIds&&(delete this.newTaskDefaults.responsiblePartyIds,delete this.newTaskDefaults.responsiblePartySummary),this.canComplete=t.pureComputed(function(t){return function(){var e;return("new"===(e=t.status())||"reopened"===e)&&0===t.numIncomplete()&&t.numComplete()>0}}(this)),null==this.descriptionAsHTML?this.descriptionAsHTML=t.observable(t.unwrap(this.description)).extend({linkify:!0}):this.descriptionAsHTML(t.unwrap(this.description)),null==this.collapsed||null!=this.collapsed&&"function"!=typeof this.collapsed?(this.collapsed=t.observable(null!=app.cache.get("taskList-"+this.id()+"-collapsed")&&app.cache.get("taskList-"+this.id()+"-collapsed")),this.processTags=t.observable(!0),this.isAddingTask=t.observable(!1),this.isShowingCompletedTasks=t.observable(!1),this.isShowingBlankSlateCompletedTasks=t.observable(!1),this.estimatedTotalMinutes=t.observable(0),this.estimatedHours=t.pureComputed(function(t){return function(){return Math.floor(t.estimatedTotalMinutes()/60)}}(this)),void(this.estimatedMinutes=t.pureComputed(function(t){return function(){return t.estimatedTotalMinutes()%60}}(this)))):this},r.prototype.OnClickToggleCollapse=function(){Tipped.hideAll(),this.collapsed(!this.collapsed()),this.isAddingTask(!1),app.cache.set("taskList-"+this.id()+"-collapsed",this.collapsed()),app.NextTick(function(){return app.ko.postbox.publish("recalculate-sidebar")})},r.prototype.OnClickTogglePinned=function(e){Tipped.hideAll(),this.pinned(!this.pinned()),app.api.form("./?action=TaskLists_PinOrUnPin&taskListId="+this.id()+"&projectId="+t.unwrap(e)+"&pinState="+(this.pinned()?1:0),{},"post").then(function(t){return function(){if(t.complete)return app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"taskList",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:t.id(),taskListId:t.id()})}}(this)).catch(function(t){return function(){return t.pinned(!t.pinned())}}(this))},r.prototype.OnClickShowEditTaskList=function(t){null==t&&(t="normal"),Tipped.hideAll(),"template"===t?app.modal.Show("addOrEditTaskListTemplate",{taskListTemplate:this}):app.modal.Show("addOrEditTaskList",{projectId:this.projectId(),taskListId:this.id(),isTemplate:!1})},r.prototype.OnClickAddTask=function(t){this.collapsed(!1),this.isAddingTask(!0),app.NextTick(function(t){return function(){return app.ko.postbox.publish("tasklist-"+t.id()+"-begin-adding-task",{})}}(this))},r.prototype.OnQuickView=function(){return app.quickView.show("taskList",{id:this.id(),taskListId:this.id(),projectId:this.projectId()})},r.prototype.OnComplete=function(){var t;this.complete(!0),t={"todo-list":{complete:!0}},app.api.put("tasklists/"+this.id()+".json",t).then(function(t){return function(e){return app.flash.Success(app.tl("Task List Completed")),app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"taskList",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:t.id(),taskListId:t.id(),subType:"tasklist-completed"})}}(this)).catch(function(t){return function(){return t.complete(!1)}}(this))},r.prototype.Delete=function(){return app.api.delete("tasklists/"+this.id()+".json").then(function(e){return function(i){var n;return n=function(){return app.flash.Success(app.tl("Restoring")+app.localizationPreferences().ellipsis),app.api.put("tasklists/"+e.id()+"/undelete.json").then(function(i){return app.flash.Success(app.tl("Task list [_s] has been restored",'"'+app.utility.SafeHTML(t.unwrap(e.name()))+'"'),{timer:2e3}),app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"taskList",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:e.id(),taskListId:e.id()})})},app.flash.Success(app.tl("Task list [_s] has been deleted",'"'+t.unwrap(e.name())+'"'),{timer:5e3,undo:n}),app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"taskList",actionType:app.consts.ACTIONTYPE.DELETED,itemId:e.id(),taskListId:e.id()})}}(this))},r.prototype.DeleteTemplate=function(){var t,e;return Tipped.hideAll(),e=app.tl("Confirm Delete"),t=app.tl("Are you sure you want to delete this template?"),app.modal.Show("confirm",{title:e,text:t,callback:function(t){return function(e){if(!e.wasCancelled)return app.api.form("./?action=deleteTaskList&taskListId="+t.id()+"&viewpage=false",{},"get").then(function(e){return app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"taskListTemplate",actionType:app.consts.ACTIONTYPE.DELETED,itemId:t.id()}),app.GoTo("#task-templates")})}}(this)})},r.prototype.Clone=function(){var e;return e=t.mapping.toJS(this),new r(e)},r.prototype.Reset=function(){return new r},r.prototype.GetNewJSON=function(){return i.camelize({newTaskDefaults:{commentFollowerSummary:"Nobody","estimated-minutes":0,numEstMins:0,userFollowingChanges:!1,description:"",hasTickets:!1,priority:"",defaultsTaskId:0,private:0,viewEstimatedTime:!1,userFollowingComments:!1,startDateOffset:"",changeFollowerSummary:"Nobody",changeFollowerIds:"",grantAccessTo:"",dueDateOffset:"",tags:[],reminders:[],content:"",commentFollowerIds:"",lockdownId:0,"responsible-party-ids":"","responsible-party-names":"","responsible-party-summary":"",customFields:[],boardColumn:{id:0,name:app.tl("None"),color:""}},name:"",color:"transparent",description:"","milestone-id":"","uncompleted-count":0,complete:!1,private:!1,tags:[],pinned:!1,id:0,position:"4000",lockdownId:0,"completed-count":0,status:"new"})},r.prototype.GetEstimatedTotalMinutes=function(){return app.api.get("tasklists/"+this.id()+"/time_entries/total.json").then(function(t){return function(e){var i;return i=parseInt(e.response.projects[0].tasklist.timeEstimates.activeMinsEstimated,10),t.estimatedTotalMinutes(i)}}(this))},r}(),o.mapping={milestone:{create:function(t){return new r(t.data)},update:function(t){return t.target.UpdateData(t.data)}}},o}.apply(e,r))&&(t.exports=o)}).call(e,i(245))},1139:function(t,e,i){!function(e,i){t.exports=i()}(window,function(){return function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="https://common-assets.teamwork.com/common-icons/1.2.30/",e(e.s=20)}([function(t,e,i){var n=i(11);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals),(0,i(9).default)("2b346ace",n,!1,{})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(8);e.default={createComponent:function(t){var e=Promise.resolve(t),i=null;return t.startsWith("http")?e=function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return i>3?Promise.reject():new Promise(function(n,r){var o=new XMLHttpRequest;o.onload=function(){return n(o.responseText)},o.onerror=function(){return n(t(e,i+1))},o.ontimeout=o.onerror,o.open("GET",e),o.send()})}(t).then(function(t){var e=document.createElement("div");return e.setAttribute("style","position: absolute; visibility: hidden;"),e.innerHTML=t,document.documentElement.insertBefore(e,document.documentElement.firstChild),i="",""}).catch(function(){return i=t,t}):i=t,{spriteLoaded:e,render:this.render,props:{id:{type:String,required:!0},size:{type:Number,default:0},color:{type:String,default:""},title:{type:String,default:""},spin:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},x:{type:Number,default:0},y:{type:Number,default:0}},data:function(){return{base:null,isIE:n.isIE}},computed:{sprite:function(t){return t.base+"#"+function(t){return"ci-"+t}(t.id)}},created:function(){var t=this,n=function(e){t.base=e};i?n(i):e.then(n)}}}}},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);e.default=r.a},function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return null===t.base||t.inline?null!==t.base&&t.inline?i("g",{staticClass:"w-svg-inline-sprite",attrs:{transform:t.isIE?"translate("+t.x+" "+t.y+") scale("+t.size/512+")":"",fill:t.color}},[i("use",t._b({key:t.sprite,attrs:{"xlink:href":t.sprite}},"use",t.isIE?{}:{x:t.x,y:t.y,width:t.size,height:t.size},!1))]):t._e():i("svg",{class:["w-svg-sprite",{"w-svg-sprite--spin":t.spin}],style:[t.size?{height:t.size+"em"}:{}]},[t.title?i("title",[t._v(t._s(t.title))]):t._e(),t._v(" "),i("use",{key:t.sprite,attrs:{"xlink:href":t.sprite,fill:t.color}})])},r=[];n._withStripped=!0,i.d(e,"a",function(){return n}),i.d(e,"b",function(){return r})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var i=[],n={},r=0;r<e.length;r++){var o=e[r],s=o[0],a={id:t+":"+r,css:o[1],media:o[2],sourceMap:o[3]};n[s]?n[s].parts.push(a):i.push(n[s]={id:s,parts:[a]})}return i}},function(t,e,i){"use strict";function n(t,e,i,n,r,o,s,a){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=i,c._compiled=!0),n&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),s?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},c._ssrRegister=l):r&&(l=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var p=c.beforeCreate;c.beforeCreate=p?[].concat(p,l):[l]}return{exports:t,options:c}}i.d(e,"a",function(){return n})},function(t,e,i){"use strict";i.r(e);var n=i(3),r=i(2);for(var o in r)"default"!==o&&function(t){i.d(e,t,function(){return r[t]})}(o);i(12);var s=i(5),a=Object(s.a)(r.default,n.a,n.b,!1,null,null,null);a.options.__file="src/components/TwIcon.vue",e.default=a.exports},function(t,e,i){"use strict";function n(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).asNewDefault,i=void 0!==e&&e,n=Object.keys(st),r=i?function(t){return~n.indexOf(t)&&!~rt.indexOf(t)}:function(t){return~n.indexOf(t)};Object.keys(t).forEach(function(e){r(e)&&(st[e]=t[e])})}function r(t){if(t&&H){var e=R.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;for(var i=R.head.childNodes,n=null,r=i.length-1;r>-1;r--){var o=i[r];["STYLE","LINK"].indexOf((o.tagName||"").toUpperCase())>-1&&(n=o)}return R.head.insertBefore(e,n),t}}function o(){return++ht}function s(t){for(var e=[],i=(t||[]).length>>>0;i--;)e[i]=t[i];return e}function a(t){return t.classList?s(t.classList):(t.getAttribute("class")||"").split(" ").filter(function(t){return t})}function l(t){return(""+t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function c(t){return Object.keys(t||{}).reduce(function(e,i){return e+(i+": ")+t[i]+";"},"")}function u(t){return t.size!==dt.size||t.x!==dt.x||t.y!==dt.y||t.rotate!==dt.rotate||t.flipX||t.flipY}function p(t){var e=t.transform,i=t.containerWidth,n=t.iconWidth;return{outer:{transform:"translate("+i/2+" 256)"},inner:{transform:"translate("+32*e.x+", "+32*e.y+")  scale("+e.size/16*(e.flipX?-1:1)+", "+e.size/16*(e.flipY?-1:1)+")  rotate("+e.rotate+" 0 0)"},path:{transform:"translate("+n/2*-1+" -256)"}}}function d(t){var e=t.icons,i=e.main,n=e.mask,r=t.prefix,s=t.iconName,a=t.transform,l=t.symbol,c=t.title,u=t.extra,p=t.watchable,d=void 0!==p&&p,h=n.found?n:i,f=h.width,m=h.height,g="fa-w-"+Math.ceil(f/m*16),y=[st.replacementClass,s?st.familyPrefix+"-"+s:"",g].concat(u.classes).join(" "),v={children:[],attributes:et({},u.attributes,{"data-prefix":r,"data-icon":s,class:y,role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 "+f+" "+m})};d&&(v.attributes[V]=""),c&&v.children.push({tag:"title",attributes:{id:v.attributes["aria-labelledby"]||"title-"+o()},children:[c]});var b=et({},v,{prefix:r,iconName:s,main:i,mask:n,transform:a,symbol:l,styles:u.styles}),w=n.found&&i.found?mt(b):gt(b),k=w.children,x=w.attributes;return b.children=k,b.attributes=x,l?vt(b):yt(b)}function h(t){var e=t.content,i=t.width,n=t.height,r=t.transform,o=t.title,s=t.extra,a=t.watchable,l=void 0!==a&&a,p=et({},s.attributes,o?{title:o}:{},{class:s.classes.join(" ")});l&&(p[V]="");var d=et({},s.styles);u(r)&&(d.transform=function(t){var e=t.transform,i=t.width,n=void 0===i?Y:i,r=t.height,o=void 0===r?Y:r,s=t.startCentered,a=void 0!==s&&s,l="";return l+=a&&$?"translate("+(e.x/pt-n/2)+"em, "+(e.y/pt-o/2)+"em) ":a?"translate(calc(-50% + "+e.x/pt+"em), calc(-50% + "+e.y/pt+"em)) ":"translate("+e.x/pt+"em, "+e.y/pt+"em) ",(l+="scale("+e.size/pt*(e.flipX?-1:1)+", "+e.size/pt*(e.flipY?-1:1)+") ")+"rotate("+e.rotate+"deg) "}({transform:r,startCentered:!0,width:i,height:n}),d["-webkit-transform"]=d.transform);var h=c(d);h.length>0&&(p.style=h);var f=[];return f.push({tag:"span",attributes:p,children:[e]}),o&&f.push({tag:"span",attributes:{class:"sr-only"},children:[o]}),f}function f(t){return t.reduce(function(t,e){var i=function(t,e){var i,n=e.split("-"),r=n[0],o=n.slice(1).join("-");return r!==t||""===o||(i=o,~J.indexOf(i))?null:o}(st.familyPrefix,e);if(Et[e])t.prefix=e;else if(i){var n="fa"===t.prefix?Ot[i]||{prefix:null,iconName:null}:{};t.iconName=n.iconName||i,t.prefix=n.prefix||t.prefix}else e!==st.replacementClass&&0!==e.indexOf("fa-w-")&&t.rest.push(e);return t},Mt())}function m(t,e,i){if(t&&t[e]&&t[e][i])return{prefix:e,iconName:i,icon:t[e][i]}}function g(t){var e=t.tag,i=t.attributes,n=void 0===i?{}:i,r=t.children,o=void 0===r?[]:r;return"string"==typeof t?l(t):"<"+e+" "+function(t){return Object.keys(t||{}).reduce(function(e,i){return e+(i+'="')+l(t[i])+'" '},"").trim()}(n)+">"+o.map(g).join("")+"</"+e+">"}function y(t){return"string"==typeof(t.getAttribute?t.getAttribute(V):null)}function v(t,e){var i="function"==typeof e?e:Lt;0===t.length?i():(F.requestAnimationFrame||function(t){return t()})(function(){var e=!0===st.autoReplaceSvg?Dt.replace:Dt[st.autoReplaceSvg]||Dt.replace,n=Tt.begin("mutate");t.map(e),n(),i()})}function b(t){this.name="MissingIcon",this.message=t||"Icon unavailable",this.stack=(new Error).stack}function w(t,e){var i={found:!1,width:512,height:512,icon:Xt};if(t&&e&&Qt[e]&&Qt[e][t]){var n=Qt[e][t];i={found:!0,width:n[0],height:n[1],icon:{tag:"path",attributes:{fill:"currentColor",d:n.slice(4)[0]}}}}else if(t&&e&&!st.showMissingIcons)throw new b("Icon is missing for prefix "+e+" with icon name "+t);return i}function k(t){var e=function(t){var e=Rt(t),i=e.iconName,n=e.prefix,r=e.rest,o=Ft(t),s=zt(t),a=Bt(t),l=Ht(t),c=$t(t);return{iconName:i,title:t.getAttribute("title"),prefix:n,transform:s,symbol:a,mask:c,extra:{classes:r,styles:o,attributes:l}}}(t);return~e.extra.classes.indexOf(Kt)?function(t,e){var i=e.title,n=e.transform,r=e.extra,o=null,s=null;if($){var a=parseInt(getComputedStyle(t).fontSize,10),l=t.getBoundingClientRect();o=l.width/a,s=l.height/a}return st.autoA11y&&!i&&(r.attributes["aria-hidden"]="true"),[t,h({content:t.innerHTML,width:o,height:s,transform:n,title:i,extra:r,watchable:!0})]}(t,e):function(t,e){var i=e.iconName,n=e.title,r=e.prefix,o=e.transform,s=e.symbol,a=e.mask,l=e.extra;return[t,d({icons:{main:w(i,r),mask:w(a.iconName,a.prefix)},prefix:r,iconName:i,transform:o,symbol:s,mask:a,title:n,extra:l,watchable:!0})]}(t,e)}function x(t){"function"==typeof t.remove?t.remove():t&&t.parentNode&&t.parentNode.removeChild(t)}function T(t){if(H){var e=Tt.begin("searchPseudoElements");jt=!0,s(t.querySelectorAll("*")).forEach(function(t){[":before",":after"].forEach(function(e){var i=F.getComputedStyle(t,e),n=i.getPropertyValue("font-family").match(Jt),r=s(t.children).filter(function(t){return t.getAttribute(G)===e})[0];if(r&&(r.nextSibling&&r.nextSibling.textContent.indexOf(G)>-1&&x(r.nextSibling),x(r),r=null),n&&!r){var o=i.getPropertyValue("content"),a=R.createElement("i");a.setAttribute("class",""+Zt[n[1]]),a.setAttribute(G,e),a.innerText=3===o.length?o.substr(1,1):o,":before"===e?t.insertBefore(a,t.firstChild):t.appendChild(a)}})}),jt=!1,e()}}function C(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(H){var i=R.documentElement.classList,n=function(t){return i.add(W+"-"+t)},r=function(t){return i.remove(W+"-"+t)},o=Object.keys(Qt),a=["."+Kt+":not(["+V+"])"].concat(o.map(function(t){return"."+t+":not(["+V+"])"})).join(", ");if(0!==a.length){var l=s(t.querySelectorAll(a));if(l.length>0){n("pending"),r("complete");var c=Tt.begin("onTree"),u=l.reduce(function(t,e){try{var i=k(e);i&&t.push(i)}catch(t){q||t instanceof b&&console.error(t)}return t},[]);c(),v(u,function(){n("active"),n("complete"),r("pending"),"function"==typeof e&&e()})}}}}function I(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=k(t);i&&v([i],e)}function _(t){return{found:!0,width:t[0],height:t[1],icon:{tag:"path",attributes:{fill:"currentColor",d:t.slice(4)[0]}}}}function S(){st.autoAddCss&&(ee||r(te()),ee=!0)}function A(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(function(t){return g(t)})}}),Object.defineProperty(t,"node",{get:function(){if(H){var e=R.createElement("div");return e.innerHTML=t.html,e.children}}}),t}function O(t){var e=t.prefix,i=void 0===e?"fa":e,n=t.iconName;if(n)return m(ie.definitions,i,n)||m(lt.styles,i,n)}Object.defineProperty(e,"__esModule",{value:!0});/*!
 * Font Awesome Free 5.0.13 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */
var P=function(){},E={},M={},L=null,D={mark:P,measure:P};try{"undefined"!=typeof window&&(E=window),"undefined"!=typeof document&&(M=document),"undefined"!=typeof MutationObserver&&(L=MutationObserver),"undefined"!=typeof performance&&(D=performance)}catch(t){}var j=(E.navigator||{}).userAgent,N=void 0===j?"":j,F=E,R=M,U=L,z=D,B=!!F.document,H=!!R.documentElement&&!!R.head&&"function"==typeof R.addEventListener&&"function"==typeof R.createElement,$=~N.indexOf("MSIE")||~N.indexOf("Trident/"),Y=16,V="data-fa-i2svg",G="data-fa-pseudo-element",W="fontawesome-i2svg",q=function(){try{return!0}catch(t){return!1}}(),X=[1,2,3,4,5,6,7,8,9,10],Q=X.concat([11,12,13,14,15,16,17,18,19,20]),K=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],J=["xs","sm","lg","fw","ul","li","border","pull-left","pull-right","spin","pulse","rotate-90","rotate-180","rotate-270","flip-horizontal","flip-vertical","stack","stack-1x","stack-2x","inverse","layers","layers-text","layers-counter"].concat(X.map(function(t){return t+"x"})).concat(Q.map(function(t){return"w-"+t})),Z=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},tt=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),et=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},it=function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)},nt=F.FontAwesomeConfig||{},rt=Object.keys(nt),ot=et({familyPrefix:"fa",replacementClass:"svg-inline--fa",autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},nt);ot.autoReplaceSvg||(ot.observeMutations=!1);var st=et({},ot);F.FontAwesomeConfig=st;var at=F||{};at.___FONT_AWESOME___||(at.___FONT_AWESOME___={}),at.___FONT_AWESOME___.styles||(at.___FONT_AWESOME___.styles={}),at.___FONT_AWESOME___.hooks||(at.___FONT_AWESOME___.hooks={}),at.___FONT_AWESOME___.shims||(at.___FONT_AWESOME___.shims=[]);var lt=at.___FONT_AWESOME___,ct=[],ut=!1;H&&((ut=(R.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(R.readyState))||R.addEventListener("DOMContentLoaded",function t(){R.removeEventListener("DOMContentLoaded",t),ut=1,ct.map(function(t){return t()})}));var pt=Y,dt={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1},ht=0,ft={x:0,y:0,width:"100%",height:"100%"},mt=function(t){var e=t.children,i=t.attributes,n=t.main,r=t.mask,s=t.transform,a=n.width,l=n.icon,c=r.width,u=r.icon,d=p({transform:s,containerWidth:c,iconWidth:a}),h={tag:"rect",attributes:et({},ft,{fill:"white"})},f={tag:"g",attributes:et({},d.inner),children:[{tag:"path",attributes:et({},l.attributes,d.path,{fill:"black"})}]},m={tag:"g",attributes:et({},d.outer),children:[f]},g="mask-"+o(),y="clip-"+o(),v={tag:"defs",children:[{tag:"clipPath",attributes:{id:y},children:[u]},{tag:"mask",attributes:et({},ft,{id:g,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[h,m]}]};return e.push(v,{tag:"rect",attributes:et({fill:"currentColor","clip-path":"url(#"+y+")",mask:"url(#"+g+")"},ft)}),{children:e,attributes:i}},gt=function(t){var e=t.children,i=t.attributes,n=t.main,r=t.transform,o=c(t.styles);if(o.length>0&&(i.style=o),u(r)){var s=p({transform:r,containerWidth:n.width,iconWidth:n.width});e.push({tag:"g",attributes:et({},s.outer),children:[{tag:"g",attributes:et({},s.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:et({},n.icon.attributes,s.path)}]}]})}else e.push(n.icon);return{children:e,attributes:i}},yt=function(t){var e=t.children,i=t.main,n=t.mask,r=t.attributes,o=t.styles,s=t.transform;if(u(s)&&i.found&&!n.found){var a={x:i.width/i.height/2,y:.5};r.style=c(et({},o,{"transform-origin":a.x+s.x/16+"em "+(a.y+s.y/16)+"em"}))}return[{tag:"svg",attributes:r,children:e}]},vt=function(t){var e=t.prefix,i=t.iconName,n=t.children,r=t.attributes,o=t.symbol,s=!0===o?e+"-"+st.familyPrefix+"-"+i:o;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:et({},r,{id:s}),children:n}]}]},bt=function(){},wt=st.measurePerformance&&z&&z.mark&&z.measure?z:{mark:bt,measure:bt},kt='FA "5.0.13"',xt=function(t){wt.mark(kt+" "+t+" ends"),wt.measure(kt+" "+t,kt+" "+t+" begins",kt+" "+t+" ends")},Tt={begin:function(t){return wt.mark(kt+" "+t+" begins"),function(){return xt(t)}},end:xt},Ct=function(t,e,i,n){var r,o,s,a=Object.keys(t),l=a.length,c=void 0!==n?function(t,e){return function(i,n,r,o){return t.call(e,i,n,r,o)}}(e,n):e;for(void 0===i?(r=1,s=t[a[0]]):(r=0,s=i);r<l;r++)s=c(s,t[o=a[r]],o,t);return s},It=lt.styles,_t=lt.shims,St={},At={},Ot={},Pt=function(){var t=function(t){return Ct(It,function(e,i,n){return e[n]=Ct(i,t,{}),e},{})};St=t(function(t,e,i){return t[e[3]]=i,t}),At=t(function(t,e,i){var n=e[2];return t[i]=i,n.forEach(function(e){t[e]=i}),t});var e="far"in It;Ot=Ct(_t,function(t,i){var n=i[0],r=i[1],o=i[2];return"far"!==r||e||(r="fas"),t[n]={prefix:r,iconName:o},t},{})};Pt();var Et=lt.styles,Mt=function(){return{prefix:null,iconName:null,rest:[]}},Lt=function(){},Dt={replace:function(t){var e=t[0],i=t[1].map(function(t){return g(t)}).join("\n");if(e.parentNode&&e.outerHTML)e.outerHTML=i+(st.keepOriginalSource&&"svg"!==e.tagName.toLowerCase()?"\x3c!-- "+e.outerHTML+" --\x3e":"");else if(e.parentNode){var n=document.createElement("span");e.parentNode.replaceChild(n,e),n.outerHTML=i}},nest:function(t){var e=t[0],i=t[1];if(~a(e).indexOf(st.replacementClass))return Dt.replace(t);var n=new RegExp(st.familyPrefix+"-.*");delete i[0].attributes.style;var r=i[0].attributes.class.split(" ").reduce(function(t,e){return e===st.replacementClass||e.match(n)?t.toSvg.push(e):t.toNode.push(e),t},{toNode:[],toSvg:[]});i[0].attributes.class=r.toSvg.join(" ");var o=i.map(function(t){return g(t)}).join("\n");e.setAttribute("class",r.toNode.join(" ")),e.setAttribute(V,""),e.innerHTML=o}},jt=!1,Nt=null,Ft=function(t){var e=t.getAttribute("style"),i=[];return e&&(i=e.split(";").reduce(function(t,e){var i=e.split(":"),n=i[0],r=i.slice(1);return n&&r.length>0&&(t[n]=r.join(":").trim()),t},{})),i},Rt=function(t){var e,i,n=t.getAttribute("data-prefix"),r=t.getAttribute("data-icon"),o=void 0!==t.innerText?t.innerText.trim():"",s=f(a(t));return n&&r&&(s.prefix=n,s.iconName=r),s.prefix&&o.length>1?s.iconName=(e=s.prefix,i=t.innerText,At[e][i]):s.prefix&&1===o.length&&(s.iconName=function(t,e){return St[t][e]}(s.prefix,function(t){for(var e="",i=0;i<t.length;i++)e+=("000"+t.charCodeAt(i).toString(16)).slice(-4);return e}(t.innerText))),s},Ut=function(t){var e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t?t.toLowerCase().split(" ").reduce(function(t,e){var i=e.toLowerCase().split("-"),n=i[0],r=i.slice(1).join("-");if(n&&"h"===r)return t.flipX=!0,t;if(n&&"v"===r)return t.flipY=!0,t;if(r=parseFloat(r),isNaN(r))return t;switch(n){case"grow":t.size=t.size+r;break;case"shrink":t.size=t.size-r;break;case"left":t.x=t.x-r;break;case"right":t.x=t.x+r;break;case"up":t.y=t.y-r;break;case"down":t.y=t.y+r;break;case"rotate":t.rotate=t.rotate+r}return t},e):e},zt=function(t){return Ut(t.getAttribute("data-fa-transform"))},Bt=function(t){var e=t.getAttribute("data-fa-symbol");return null!==e&&(""===e||e)},Ht=function(t){var e=s(t.attributes).reduce(function(t,e){return"class"!==t.name&&"style"!==t.name&&(t[e.name]=e.value),t},{}),i=t.getAttribute("title");return st.autoA11y&&(i?e["aria-labelledby"]=st.replacementClass+"-title-"+o():e["aria-hidden"]="true"),e},$t=function(t){var e=t.getAttribute("data-fa-mask");return e?f(e.split(" ").map(function(t){return t.trim()})):Mt()};b.prototype=Object.create(Error.prototype),b.prototype.constructor=b;var Yt,Vt={fill:"currentColor"},Gt={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},Wt={tag:"path",attributes:et({},Vt,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})},qt=et({},Gt,{attributeName:"opacity"}),Xt={tag:"g",children:[Wt,{tag:"circle",attributes:et({},Vt,{cx:"256",cy:"364",r:"28"}),children:[{tag:"animate",attributes:et({},Gt,{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:et({},qt,{values:"1;0;1;1;0;1;"})}]},{tag:"path",attributes:et({},Vt,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:[{tag:"animate",attributes:et({},qt,{values:"1;0;0;0;0;1;"})}]},{tag:"path",attributes:et({},Vt,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:et({},qt,{values:"0;0;1;1;0;0;"})}]}]},Qt=lt.styles,Kt="fa-layers-text",Jt=/Font Awesome 5 (Solid|Regular|Light|Brands)/,Zt={Solid:"fas",Regular:"far",Light:"fal",Brands:"fab"},te=function(){var t="svg-inline--fa",e=st.familyPrefix,i=st.replacementClass,n='svg:not(:root).svg-inline--fa {\n  overflow: visible; }\n\n.svg-inline--fa {\n  display: inline-block;\n  font-size: inherit;\n  height: 1em;\n  overflow: visible;\n  vertical-align: -.125em; }\n  .svg-inline--fa.fa-lg {\n    vertical-align: -.225em; }\n  .svg-inline--fa.fa-w-1 {\n    width: 0.0625em; }\n  .svg-inline--fa.fa-w-2 {\n    width: 0.125em; }\n  .svg-inline--fa.fa-w-3 {\n    width: 0.1875em; }\n  .svg-inline--fa.fa-w-4 {\n    width: 0.25em; }\n  .svg-inline--fa.fa-w-5 {\n    width: 0.3125em; }\n  .svg-inline--fa.fa-w-6 {\n    width: 0.375em; }\n  .svg-inline--fa.fa-w-7 {\n    width: 0.4375em; }\n  .svg-inline--fa.fa-w-8 {\n    width: 0.5em; }\n  .svg-inline--fa.fa-w-9 {\n    width: 0.5625em; }\n  .svg-inline--fa.fa-w-10 {\n    width: 0.625em; }\n  .svg-inline--fa.fa-w-11 {\n    width: 0.6875em; }\n  .svg-inline--fa.fa-w-12 {\n    width: 0.75em; }\n  .svg-inline--fa.fa-w-13 {\n    width: 0.8125em; }\n  .svg-inline--fa.fa-w-14 {\n    width: 0.875em; }\n  .svg-inline--fa.fa-w-15 {\n    width: 0.9375em; }\n  .svg-inline--fa.fa-w-16 {\n    width: 1em; }\n  .svg-inline--fa.fa-w-17 {\n    width: 1.0625em; }\n  .svg-inline--fa.fa-w-18 {\n    width: 1.125em; }\n  .svg-inline--fa.fa-w-19 {\n    width: 1.1875em; }\n  .svg-inline--fa.fa-w-20 {\n    width: 1.25em; }\n  .svg-inline--fa.fa-pull-left {\n    margin-right: .3em;\n    width: auto; }\n  .svg-inline--fa.fa-pull-right {\n    margin-left: .3em;\n    width: auto; }\n  .svg-inline--fa.fa-border {\n    height: 1.5em; }\n  .svg-inline--fa.fa-li {\n    width: 2em; }\n  .svg-inline--fa.fa-fw {\n    width: 1.25em; }\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0; }\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -.125em;\n  width: 1em; }\n  .fa-layers svg.svg-inline--fa {\n    -webkit-transform-origin: center center;\n            transform-origin: center center; }\n\n.fa-layers-text, .fa-layers-counter {\n  display: inline-block;\n  position: absolute;\n  text-align: center; }\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center; }\n\n.fa-layers-counter {\n  background-color: #ff253a;\n  border-radius: 1em;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #fff;\n  height: 1.5em;\n  line-height: 1;\n  max-width: 5em;\n  min-width: 1.5em;\n  overflow: hidden;\n  padding: .25em;\n  right: 0;\n  text-overflow: ellipsis;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right; }\n\n.fa-layers-bottom-right {\n  bottom: 0;\n  right: 0;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right; }\n\n.fa-layers-bottom-left {\n  bottom: 0;\n  left: 0;\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left; }\n\n.fa-layers-top-right {\n  right: 0;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right; }\n\n.fa-layers-top-left {\n  left: 0;\n  right: auto;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top left;\n          transform-origin: top left; }\n\n.fa-lg {\n  font-size: 1.33333em;\n  line-height: 0.75em;\n  vertical-align: -.0667em; }\n\n.fa-xs {\n  font-size: .75em; }\n\n.fa-sm {\n  font-size: .875em; }\n\n.fa-1x {\n  font-size: 1em; }\n\n.fa-2x {\n  font-size: 2em; }\n\n.fa-3x {\n  font-size: 3em; }\n\n.fa-4x {\n  font-size: 4em; }\n\n.fa-5x {\n  font-size: 5em; }\n\n.fa-6x {\n  font-size: 6em; }\n\n.fa-7x {\n  font-size: 7em; }\n\n.fa-8x {\n  font-size: 8em; }\n\n.fa-9x {\n  font-size: 9em; }\n\n.fa-10x {\n  font-size: 10em; }\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em; }\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: 2.5em;\n  padding-left: 0; }\n  .fa-ul > li {\n    position: relative; }\n\n.fa-li {\n  left: -2em;\n  position: absolute;\n  text-align: center;\n  width: 2em;\n  line-height: inherit; }\n\n.fa-border {\n  border: solid 0.08em #eee;\n  border-radius: .1em;\n  padding: .2em .25em .15em; }\n\n.fa-pull-left {\n  float: left; }\n\n.fa-pull-right {\n  float: right; }\n\n.fa.fa-pull-left,\n.fas.fa-pull-left,\n.far.fa-pull-left,\n.fal.fa-pull-left,\n.fab.fa-pull-left {\n  margin-right: .3em; }\n\n.fa.fa-pull-right,\n.fas.fa-pull-right,\n.far.fa-pull-right,\n.fal.fa-pull-right,\n.fab.fa-pull-right {\n  margin-left: .3em; }\n\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n          animation: fa-spin 2s infinite linear; }\n\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n          animation: fa-spin 1s infinite steps(8); }\n\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg); }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg); } }\n\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg); }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg); } }\n\n.fa-rotate-90 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg); }\n\n.fa-rotate-180 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg); }\n\n.fa-rotate-270 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg); }\n\n.fa-flip-horizontal {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1); }\n\n.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1); }\n\n.fa-flip-horizontal.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1); }\n\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical {\n  -webkit-filter: none;\n          filter: none; }\n\n.fa-stack {\n  display: inline-block;\n  height: 2em;\n  position: relative;\n  width: 2em; }\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0; }\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1em; }\n\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2em; }\n\n.fa-inverse {\n  color: #fff; }\n\n.sr-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px; }\n\n.sr-only-focusable:active, .sr-only-focusable:focus {\n  clip: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  position: static;\n  width: auto; }\n';if("fa"!==e||i!==t){var r=new RegExp("\\.fa\\-","g"),o=new RegExp("\\."+t,"g");n=n.replace(r,"."+e+"-").replace(o,"."+i)}return n},ee=!1,ie=new(function(){function t(){Z(this,t),this.definitions={}}return tt(t,[{key:"add",value:function(){for(var t=this,e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];var r=i.reduce(this._pullDefinitions,{});Object.keys(r).forEach(function(e){t.definitions[e]=et({},t.definitions[e]||{},r[e]),function t(e,i){var n=Object.keys(i).reduce(function(t,e){var n=i[e];return n.icon?t[n.iconName]=n.icon:t[e]=n,t},{});"function"==typeof lt.hooks.addPack?lt.hooks.addPack(e,n):lt.styles[e]=et({},lt.styles[e]||{},n),"fas"===e&&t("fa",i)}(e,r[e])})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,e){var i=e.prefix&&e.iconName&&e.icon?{0:e}:e;return Object.keys(i).map(function(e){var n=i[e],r=n.prefix,o=n.iconName,s=n.icon;t[r]||(t[r]={}),t[r][o]=s}),t}}]),t}()),ne=function(){n({autoReplaceSvg:!1,observeMutations:!1}),Nt&&Nt.disconnect()},re={i2svg:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(H){S();var e=t.node,i=void 0===e?R:e,n=t.callback,r=void 0===n?function(){}:n;st.searchPseudoElements&&T(i),C(i,r)}},css:te,insertCss:function(){r(te())}},oe={transform:function(t){return Ut(t)}},se=(Yt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.transform,n=void 0===i?dt:i,r=e.symbol,s=void 0!==r&&r,a=e.mask,l=void 0===a?null:a,c=e.title,u=void 0===c?null:c,p=e.classes,h=void 0===p?[]:p,f=e.attributes,m=void 0===f?{}:f,g=e.styles,y=void 0===g?{}:g;if(t){var v=t.prefix,b=t.iconName,w=t.icon;return A(et({type:"icon"},t),function(){return S(),st.autoA11y&&(u?m["aria-labelledby"]=st.replacementClass+"-title-"+o():m["aria-hidden"]="true"),d({icons:{main:_(w),mask:l?_(l.icon):{found:!1,width:null,height:null,icon:{}}},prefix:v,iconName:b,transform:et({},dt,n),symbol:s,title:u,extra:{attributes:m,styles:y,classes:h}})})}},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(t||{}).icon?t:O(t||{}),n=e.mask;return n&&(n=(n||{}).icon?n:O(n||{})),Yt(i,et({},e,{mask:n}))}),ae=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.transform,n=void 0===i?dt:i,r=e.title,o=void 0===r?null:r,s=e.classes,a=void 0===s?[]:s,l=e.attributes,c=void 0===l?{}:l,u=e.styles,p=void 0===u?{}:u;return A({type:"text",content:t},function(){return S(),h({content:t,transform:et({},dt,n),title:o,extra:{attributes:c,styles:p,classes:[st.familyPrefix+"-layers-text"].concat(it(a))}})})},le=function(t){return A({type:"layer"},function(){S();var e=[];return t(function(t){Array.isArray(t)?t.map(function(t){e=e.concat(t.abstract)}):e=e.concat(t.abstract)}),[{tag:"span",attributes:{class:st.familyPrefix+"-layers"},children:e}]})},ce={noAuto:ne,dom:re,library:ie,parse:oe,findIconDefinition:O,icon:se,text:ae,layer:le},ue=function(){H&&st.autoReplaceSvg&&ce.dom.i2svg({node:R})};Object.defineProperty(ce,"config",{get:function(){return st},set:function(t){n(t)}}),H&&function(t){try{!function(){B&&(F.FontAwesome||(F.FontAwesome=ce),t=function(){Object.keys(lt.styles).length>0&&ue(),st.observeMutations&&"function"==typeof MutationObserver&&function(t){if(U){var e=t.treeCallback,i=t.nodeCallback,n=t.pseudoElementsCallback;Nt=new U(function(t){jt||s(t).forEach(function(t){if("childList"===t.type&&t.addedNodes.length>0&&!y(t.addedNodes[0])&&(st.searchPseudoElements&&n(t.target),e(t.target)),"attributes"===t.type&&t.target.parentNode&&st.searchPseudoElements&&n(t.target.parentNode),"attributes"===t.type&&y(t.target)&&~K.indexOf(t.attributeName))if("class"===t.attributeName){var r=f(a(t.target)),o=r.prefix,s=r.iconName;o&&t.target.setAttribute("data-prefix",o),s&&t.target.setAttribute("data-icon",s)}else i(t.target)})}),H&&Nt.observe(R.getElementsByTagName("body")[0],{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}({treeCallback:C,nodeCallback:I,pseudoElementsCallback:T})},H&&(ut?setTimeout(t,0):ct.push(t))),lt.hooks=et({},lt.hooks,{addPack:function(t,e){lt.styles[t]=et({},lt.styles[t]||{},e),Pt(),ue()},addShims:function(t){var e;(e=lt.shims).push.apply(e,it(t)),Pt(),ue()}});var t}()}catch(t){if(!q)throw t}}();var pe=ce.config;e.config=pe,e.icon=se,e.noAuto=ne,e.layer=le,e.text=ae,e.library=ie,e.dom=re,e.parse=oe,e.findIconDefinition=O,e.default=ce},function(t,e,i){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function r(t){var e=t.querySelectorAll("path");return[].map.call(e,function(t){return t.getAttribute("d")}).join(" ")}function o(t){var e=t.querySelector("svg").getAttribute("viewBox").split(" "),i=l(e,4);return{width:i[2],height:i[3]}}function s(t,e){var i=o(e);return{prefix:"tw",iconName:t,icon:[i.width,i.height,[],"",r(e)]}}function a(t,e,i,r){var o=i?{color:i}:{};return{title:"",classes:["fa-"+(t||"1x")].concat(n(e)),styles:Object.assign(o,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.applyCustom=e.isIE=e.isEdge=e.isFirefox=void 0;var l=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};e.combinePaths=r,e.getViewBox=o,e.getCustomDefinition=s,e.getExtras=a,e.createStyles=function(t){if(!t)return{};var e=t.replace(/\s/g,"").split(";").map(function(t){return t.split(":")});return Object.assign.apply(Object,n(e.map(function(t){return t[0]?function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({},t[0],t[1]):{}})))};var c,u=(c=i(7))&&c.__esModule?c:{default:c},p=navigator.userAgent;e.isFirefox=p.includes("Firefox"),e.isEdge=p.includes("Edge"),e.isIE=["MSIE ","Trident/"].some(function(t){return p.includes(t)});var d=e.applyCustom=function(t,e,i,n,r,o){var l=s(e,document.createRange().createContextualFragment(t)),c=a(i,r,n,o);return u.default.icon(l,c)};e.default={applyCustom:d}},function(t,e,i){"use strict";function n(t,e,i,n){g=i,v=n||{};var o=c()(t,e);return r(o),function(e){for(var i=[],n=0;n<o.length;n++){var s=o[n];(a=d[s.id]).refs--,i.push(a)}for(e?r(o=c()(t,e)):o=[],n=0;n<i.length;n++){var a;if(0===(a=i[n]).refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete d[a.id]}}}}function r(t){for(var e=0;e<t.length;e++){var i=t[e],n=d[i.id];if(n){n.refs++;for(var r=0;r<n.parts.length;r++)n.parts[r](i.parts[r]);for(;r<i.parts.length;r++)n.parts.push(s(i.parts[r]));n.parts.length>i.parts.length&&(n.parts.length=i.parts.length)}else{var o=[];for(r=0;r<i.parts.length;r++)o.push(s(i.parts[r]));d[i.id]={id:i.id,refs:1,parts:o}}}}function o(){var t=document.createElement("style");return t.type="text/css",h.appendChild(t),t}function s(t){var e,i,n=document.querySelector("style["+b+'~="'+t.id+'"]');if(n){if(g)return y;n.parentNode.removeChild(n)}if(w){var r=m++;n=f||(f=o()),e=a.bind(null,n,r,!1),i=a.bind(null,n,r,!0)}else n=o(),e=function(t,e){var i=e.css,n=e.media,r=e.sourceMap;if(n&&t.setAttribute("media",n),v.ssrId&&t.setAttribute(b,e.id),r&&(i+="\n/*# sourceURL="+r.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}.bind(null,n),i=function(){n.parentNode.removeChild(n)};return e(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;e(t=n)}else i()}}function a(t,e,i,n){var r=i?"":n.css;if(t.styleSheet)t.styleSheet.cssText=k(e,r);else{var o=document.createTextNode(r),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}i.r(e),i.d(e,"default",function(){return n});var l=i(4),c=i.n(l),u="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!u)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var p,d={},h=u&&(document.head||document.getElementsByTagName("head")[0]),f=null,m=0,g=!1,y=function(){},v=null,b="data-vue-ssr-id",w="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase()),k=(p=[],function(t,e){return p[t]=e,p.filter(Boolean).join("\n")})},function(t,e,i){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i=function(t,e){var i,n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var o=(i=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");return[n].concat(r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"})).concat([o]).join("\n")}return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+i+"}":i}).join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},r=0;r<this.length;r++){var o=this[r][0];"number"==typeof o&&(n[o]=!0)}for(r=0;r<t.length;r++){var s=t[r];"number"==typeof s[0]&&n[s[0]]||(i&&!s[2]?s[2]=i:i&&(s[2]="("+s[2]+") and ("+i+")"),e.push(s))}},e}},function(t,e,i){(t.exports=i(10)(!1)).push([t.i,"\n.w-svg-sprite {\n    display: inline-block;\n    /* width: 1em - wasn't strictly unheld (Chrome at least) */\n    min-width: 1em;\n    max-width: 1em;\n    height: 1em;\n    vertical-align: -.125em;\n}\n.w-svg-sprite--spin {\n  -webkit-animation: 4s linear 0s infinite sprite_spin;\n          animation: 4s linear 0s infinite sprite_spin;\n}\n@-webkit-keyframes sprite_spin {\nfrom { -webkit-transform:rotate(0deg);\n}\nto { -webkit-transform:rotate(360deg);\n}\n}\n@keyframes sprite_spin {\nfrom { transform:rotate(0deg);\n}\nto { transform:rotate(360deg);\n}\n}\n",""])},function(t,e,i){"use strict";var n=i(0);i.n(n).a},,,,,,,function(t,e,i){t.exports=i.p+"sprites/common-icons.svg"},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.spriteLoaded=void 0;var r=n(i(19)),o=n(i(6)).default.createComponent(r.default),s=o.spriteLoaded;e.spriteLoaded=s,e.default=o}])})},1141:function(t,e,i){!function(e,i){t.exports=i()}(window,function(){return function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="https://common-assets.teamwork.com/common-icons/1.2.30/",e(e.s=24)}([function(t,e,i){var n=i(11);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals),(0,i(9).default)("2b346ace",n,!1,{})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(8);e.default={createComponent:function(t){var e=Promise.resolve(t),i=null;return t.startsWith("http")?e=function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return i>3?Promise.reject():new Promise(function(n,r){var o=new XMLHttpRequest;o.onload=function(){return n(o.responseText)},o.onerror=function(){return n(t(e,i+1))},o.ontimeout=o.onerror,o.open("GET",e),o.send()})}(t).then(function(t){var e=document.createElement("div");return e.setAttribute("style","position: absolute; visibility: hidden;"),e.innerHTML=t,document.documentElement.insertBefore(e,document.documentElement.firstChild),i="",""}).catch(function(){return i=t,t}):i=t,{spriteLoaded:e,render:this.render,props:{id:{type:String,required:!0},size:{type:Number,default:0},color:{type:String,default:""},title:{type:String,default:""},spin:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},x:{type:Number,default:0},y:{type:Number,default:0}},data:function(){return{base:null,isIE:n.isIE}},computed:{sprite:function(t){return t.base+"#"+function(t){return"ci-"+t}(t.id)}},created:function(){var t=this,n=function(e){t.base=e};i?n(i):e.then(n)}}}}},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);e.default=r.a},function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return null===t.base||t.inline?null!==t.base&&t.inline?i("g",{staticClass:"w-svg-inline-sprite",attrs:{transform:t.isIE?"translate("+t.x+" "+t.y+") scale("+t.size/512+")":"",fill:t.color}},[i("use",t._b({key:t.sprite,attrs:{"xlink:href":t.sprite}},"use",t.isIE?{}:{x:t.x,y:t.y,width:t.size,height:t.size},!1))]):t._e():i("svg",{class:["w-svg-sprite",{"w-svg-sprite--spin":t.spin}],style:[t.size?{height:t.size+"em"}:{}]},[t.title?i("title",[t._v(t._s(t.title))]):t._e(),t._v(" "),i("use",{key:t.sprite,attrs:{"xlink:href":t.sprite,fill:t.color}})])},r=[];n._withStripped=!0,i.d(e,"a",function(){return n}),i.d(e,"b",function(){return r})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var i=[],n={},r=0;r<e.length;r++){var o=e[r],s=o[0],a={id:t+":"+r,css:o[1],media:o[2],sourceMap:o[3]};n[s]?n[s].parts.push(a):i.push(n[s]={id:s,parts:[a]})}return i}},function(t,e,i){"use strict";function n(t,e,i,n,r,o,s,a){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=i,c._compiled=!0),n&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),s?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},c._ssrRegister=l):r&&(l=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var p=c.beforeCreate;c.beforeCreate=p?[].concat(p,l):[l]}return{exports:t,options:c}}i.d(e,"a",function(){return n})},function(t,e,i){"use strict";i.r(e);var n=i(3),r=i(2);for(var o in r)"default"!==o&&function(t){i.d(e,t,function(){return r[t]})}(o);i(12);var s=i(5),a=Object(s.a)(r.default,n.a,n.b,!1,null,null,null);a.options.__file="src/components/TwIcon.vue",e.default=a.exports},function(t,e,i){"use strict";function n(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).asNewDefault,i=void 0!==e&&e,n=Object.keys(st),r=i?function(t){return~n.indexOf(t)&&!~rt.indexOf(t)}:function(t){return~n.indexOf(t)};Object.keys(t).forEach(function(e){r(e)&&(st[e]=t[e])})}function r(t){if(t&&H){var e=R.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;for(var i=R.head.childNodes,n=null,r=i.length-1;r>-1;r--){var o=i[r];["STYLE","LINK"].indexOf((o.tagName||"").toUpperCase())>-1&&(n=o)}return R.head.insertBefore(e,n),t}}function o(){return++ht}function s(t){for(var e=[],i=(t||[]).length>>>0;i--;)e[i]=t[i];return e}function a(t){return t.classList?s(t.classList):(t.getAttribute("class")||"").split(" ").filter(function(t){return t})}function l(t){return(""+t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function c(t){return Object.keys(t||{}).reduce(function(e,i){return e+(i+": ")+t[i]+";"},"")}function u(t){return t.size!==dt.size||t.x!==dt.x||t.y!==dt.y||t.rotate!==dt.rotate||t.flipX||t.flipY}function p(t){var e=t.transform,i=t.containerWidth,n=t.iconWidth;return{outer:{transform:"translate("+i/2+" 256)"},inner:{transform:"translate("+32*e.x+", "+32*e.y+")  scale("+e.size/16*(e.flipX?-1:1)+", "+e.size/16*(e.flipY?-1:1)+")  rotate("+e.rotate+" 0 0)"},path:{transform:"translate("+n/2*-1+" -256)"}}}function d(t){var e=t.icons,i=e.main,n=e.mask,r=t.prefix,s=t.iconName,a=t.transform,l=t.symbol,c=t.title,u=t.extra,p=t.watchable,d=void 0!==p&&p,h=n.found?n:i,f=h.width,m=h.height,g="fa-w-"+Math.ceil(f/m*16),y=[st.replacementClass,s?st.familyPrefix+"-"+s:"",g].concat(u.classes).join(" "),v={children:[],attributes:et({},u.attributes,{"data-prefix":r,"data-icon":s,class:y,role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 "+f+" "+m})};d&&(v.attributes[V]=""),c&&v.children.push({tag:"title",attributes:{id:v.attributes["aria-labelledby"]||"title-"+o()},children:[c]});var b=et({},v,{prefix:r,iconName:s,main:i,mask:n,transform:a,symbol:l,styles:u.styles}),w=n.found&&i.found?mt(b):gt(b),k=w.children,x=w.attributes;return b.children=k,b.attributes=x,l?vt(b):yt(b)}function h(t){var e=t.content,i=t.width,n=t.height,r=t.transform,o=t.title,s=t.extra,a=t.watchable,l=void 0!==a&&a,p=et({},s.attributes,o?{title:o}:{},{class:s.classes.join(" ")});l&&(p[V]="");var d=et({},s.styles);u(r)&&(d.transform=function(t){var e=t.transform,i=t.width,n=void 0===i?Y:i,r=t.height,o=void 0===r?Y:r,s=t.startCentered,a=void 0!==s&&s,l="";return l+=a&&$?"translate("+(e.x/pt-n/2)+"em, "+(e.y/pt-o/2)+"em) ":a?"translate(calc(-50% + "+e.x/pt+"em), calc(-50% + "+e.y/pt+"em)) ":"translate("+e.x/pt+"em, "+e.y/pt+"em) ",(l+="scale("+e.size/pt*(e.flipX?-1:1)+", "+e.size/pt*(e.flipY?-1:1)+") ")+"rotate("+e.rotate+"deg) "}({transform:r,startCentered:!0,width:i,height:n}),d["-webkit-transform"]=d.transform);var h=c(d);h.length>0&&(p.style=h);var f=[];return f.push({tag:"span",attributes:p,children:[e]}),o&&f.push({tag:"span",attributes:{class:"sr-only"},children:[o]}),f}function f(t){return t.reduce(function(t,e){var i=function(t,e){var i,n=e.split("-"),r=n[0],o=n.slice(1).join("-");return r!==t||""===o||(i=o,~J.indexOf(i))?null:o}(st.familyPrefix,e);if(Et[e])t.prefix=e;else if(i){var n="fa"===t.prefix?Ot[i]||{prefix:null,iconName:null}:{};t.iconName=n.iconName||i,t.prefix=n.prefix||t.prefix}else e!==st.replacementClass&&0!==e.indexOf("fa-w-")&&t.rest.push(e);return t},Mt())}function m(t,e,i){if(t&&t[e]&&t[e][i])return{prefix:e,iconName:i,icon:t[e][i]}}function g(t){var e=t.tag,i=t.attributes,n=void 0===i?{}:i,r=t.children,o=void 0===r?[]:r;return"string"==typeof t?l(t):"<"+e+" "+function(t){return Object.keys(t||{}).reduce(function(e,i){return e+(i+'="')+l(t[i])+'" '},"").trim()}(n)+">"+o.map(g).join("")+"</"+e+">"}function y(t){return"string"==typeof(t.getAttribute?t.getAttribute(V):null)}function v(t,e){var i="function"==typeof e?e:Lt;0===t.length?i():(F.requestAnimationFrame||function(t){return t()})(function(){var e=!0===st.autoReplaceSvg?Dt.replace:Dt[st.autoReplaceSvg]||Dt.replace,n=Tt.begin("mutate");t.map(e),n(),i()})}function b(t){this.name="MissingIcon",this.message=t||"Icon unavailable",this.stack=(new Error).stack}function w(t,e){var i={found:!1,width:512,height:512,icon:Xt};if(t&&e&&Qt[e]&&Qt[e][t]){var n=Qt[e][t];i={found:!0,width:n[0],height:n[1],icon:{tag:"path",attributes:{fill:"currentColor",d:n.slice(4)[0]}}}}else if(t&&e&&!st.showMissingIcons)throw new b("Icon is missing for prefix "+e+" with icon name "+t);return i}function k(t){var e=function(t){var e=Rt(t),i=e.iconName,n=e.prefix,r=e.rest,o=Ft(t),s=zt(t),a=Bt(t),l=Ht(t),c=$t(t);return{iconName:i,title:t.getAttribute("title"),prefix:n,transform:s,symbol:a,mask:c,extra:{classes:r,styles:o,attributes:l}}}(t);return~e.extra.classes.indexOf(Kt)?function(t,e){var i=e.title,n=e.transform,r=e.extra,o=null,s=null;if($){var a=parseInt(getComputedStyle(t).fontSize,10),l=t.getBoundingClientRect();o=l.width/a,s=l.height/a}return st.autoA11y&&!i&&(r.attributes["aria-hidden"]="true"),[t,h({content:t.innerHTML,width:o,height:s,transform:n,title:i,extra:r,watchable:!0})]}(t,e):function(t,e){var i=e.iconName,n=e.title,r=e.prefix,o=e.transform,s=e.symbol,a=e.mask,l=e.extra;return[t,d({icons:{main:w(i,r),mask:w(a.iconName,a.prefix)},prefix:r,iconName:i,transform:o,symbol:s,mask:a,title:n,extra:l,watchable:!0})]}(t,e)}function x(t){"function"==typeof t.remove?t.remove():t&&t.parentNode&&t.parentNode.removeChild(t)}function T(t){if(H){var e=Tt.begin("searchPseudoElements");jt=!0,s(t.querySelectorAll("*")).forEach(function(t){[":before",":after"].forEach(function(e){var i=F.getComputedStyle(t,e),n=i.getPropertyValue("font-family").match(Jt),r=s(t.children).filter(function(t){return t.getAttribute(G)===e})[0];if(r&&(r.nextSibling&&r.nextSibling.textContent.indexOf(G)>-1&&x(r.nextSibling),x(r),r=null),n&&!r){var o=i.getPropertyValue("content"),a=R.createElement("i");a.setAttribute("class",""+Zt[n[1]]),a.setAttribute(G,e),a.innerText=3===o.length?o.substr(1,1):o,":before"===e?t.insertBefore(a,t.firstChild):t.appendChild(a)}})}),jt=!1,e()}}function C(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(H){var i=R.documentElement.classList,n=function(t){return i.add(W+"-"+t)},r=function(t){return i.remove(W+"-"+t)},o=Object.keys(Qt),a=["."+Kt+":not(["+V+"])"].concat(o.map(function(t){return"."+t+":not(["+V+"])"})).join(", ");if(0!==a.length){var l=s(t.querySelectorAll(a));if(l.length>0){n("pending"),r("complete");var c=Tt.begin("onTree"),u=l.reduce(function(t,e){try{var i=k(e);i&&t.push(i)}catch(t){q||t instanceof b&&console.error(t)}return t},[]);c(),v(u,function(){n("active"),n("complete"),r("pending"),"function"==typeof e&&e()})}}}}function I(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=k(t);i&&v([i],e)}function _(t){return{found:!0,width:t[0],height:t[1],icon:{tag:"path",attributes:{fill:"currentColor",d:t.slice(4)[0]}}}}function S(){st.autoAddCss&&(ee||r(te()),ee=!0)}function A(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(function(t){return g(t)})}}),Object.defineProperty(t,"node",{get:function(){if(H){var e=R.createElement("div");return e.innerHTML=t.html,e.children}}}),t}function O(t){var e=t.prefix,i=void 0===e?"fa":e,n=t.iconName;if(n)return m(ie.definitions,i,n)||m(lt.styles,i,n)}Object.defineProperty(e,"__esModule",{value:!0});/*!
 * Font Awesome Free 5.0.13 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */
var P=function(){},E={},M={},L=null,D={mark:P,measure:P};try{"undefined"!=typeof window&&(E=window),"undefined"!=typeof document&&(M=document),"undefined"!=typeof MutationObserver&&(L=MutationObserver),"undefined"!=typeof performance&&(D=performance)}catch(t){}var j=(E.navigator||{}).userAgent,N=void 0===j?"":j,F=E,R=M,U=L,z=D,B=!!F.document,H=!!R.documentElement&&!!R.head&&"function"==typeof R.addEventListener&&"function"==typeof R.createElement,$=~N.indexOf("MSIE")||~N.indexOf("Trident/"),Y=16,V="data-fa-i2svg",G="data-fa-pseudo-element",W="fontawesome-i2svg",q=function(){try{return!0}catch(t){return!1}}(),X=[1,2,3,4,5,6,7,8,9,10],Q=X.concat([11,12,13,14,15,16,17,18,19,20]),K=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],J=["xs","sm","lg","fw","ul","li","border","pull-left","pull-right","spin","pulse","rotate-90","rotate-180","rotate-270","flip-horizontal","flip-vertical","stack","stack-1x","stack-2x","inverse","layers","layers-text","layers-counter"].concat(X.map(function(t){return t+"x"})).concat(Q.map(function(t){return"w-"+t})),Z=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},tt=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),et=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},it=function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)},nt=F.FontAwesomeConfig||{},rt=Object.keys(nt),ot=et({familyPrefix:"fa",replacementClass:"svg-inline--fa",autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},nt);ot.autoReplaceSvg||(ot.observeMutations=!1);var st=et({},ot);F.FontAwesomeConfig=st;var at=F||{};at.___FONT_AWESOME___||(at.___FONT_AWESOME___={}),at.___FONT_AWESOME___.styles||(at.___FONT_AWESOME___.styles={}),at.___FONT_AWESOME___.hooks||(at.___FONT_AWESOME___.hooks={}),at.___FONT_AWESOME___.shims||(at.___FONT_AWESOME___.shims=[]);var lt=at.___FONT_AWESOME___,ct=[],ut=!1;H&&((ut=(R.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(R.readyState))||R.addEventListener("DOMContentLoaded",function t(){R.removeEventListener("DOMContentLoaded",t),ut=1,ct.map(function(t){return t()})}));var pt=Y,dt={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1},ht=0,ft={x:0,y:0,width:"100%",height:"100%"},mt=function(t){var e=t.children,i=t.attributes,n=t.main,r=t.mask,s=t.transform,a=n.width,l=n.icon,c=r.width,u=r.icon,d=p({transform:s,containerWidth:c,iconWidth:a}),h={tag:"rect",attributes:et({},ft,{fill:"white"})},f={tag:"g",attributes:et({},d.inner),children:[{tag:"path",attributes:et({},l.attributes,d.path,{fill:"black"})}]},m={tag:"g",attributes:et({},d.outer),children:[f]},g="mask-"+o(),y="clip-"+o(),v={tag:"defs",children:[{tag:"clipPath",attributes:{id:y},children:[u]},{tag:"mask",attributes:et({},ft,{id:g,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[h,m]}]};return e.push(v,{tag:"rect",attributes:et({fill:"currentColor","clip-path":"url(#"+y+")",mask:"url(#"+g+")"},ft)}),{children:e,attributes:i}},gt=function(t){var e=t.children,i=t.attributes,n=t.main,r=t.transform,o=c(t.styles);if(o.length>0&&(i.style=o),u(r)){var s=p({transform:r,containerWidth:n.width,iconWidth:n.width});e.push({tag:"g",attributes:et({},s.outer),children:[{tag:"g",attributes:et({},s.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:et({},n.icon.attributes,s.path)}]}]})}else e.push(n.icon);return{children:e,attributes:i}},yt=function(t){var e=t.children,i=t.main,n=t.mask,r=t.attributes,o=t.styles,s=t.transform;if(u(s)&&i.found&&!n.found){var a={x:i.width/i.height/2,y:.5};r.style=c(et({},o,{"transform-origin":a.x+s.x/16+"em "+(a.y+s.y/16)+"em"}))}return[{tag:"svg",attributes:r,children:e}]},vt=function(t){var e=t.prefix,i=t.iconName,n=t.children,r=t.attributes,o=t.symbol,s=!0===o?e+"-"+st.familyPrefix+"-"+i:o;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:et({},r,{id:s}),children:n}]}]},bt=function(){},wt=st.measurePerformance&&z&&z.mark&&z.measure?z:{mark:bt,measure:bt},kt='FA "5.0.13"',xt=function(t){wt.mark(kt+" "+t+" ends"),wt.measure(kt+" "+t,kt+" "+t+" begins",kt+" "+t+" ends")},Tt={begin:function(t){return wt.mark(kt+" "+t+" begins"),function(){return xt(t)}},end:xt},Ct=function(t,e,i,n){var r,o,s,a=Object.keys(t),l=a.length,c=void 0!==n?function(t,e){return function(i,n,r,o){return t.call(e,i,n,r,o)}}(e,n):e;for(void 0===i?(r=1,s=t[a[0]]):(r=0,s=i);r<l;r++)s=c(s,t[o=a[r]],o,t);return s},It=lt.styles,_t=lt.shims,St={},At={},Ot={},Pt=function(){var t=function(t){return Ct(It,function(e,i,n){return e[n]=Ct(i,t,{}),e},{})};St=t(function(t,e,i){return t[e[3]]=i,t}),At=t(function(t,e,i){var n=e[2];return t[i]=i,n.forEach(function(e){t[e]=i}),t});var e="far"in It;Ot=Ct(_t,function(t,i){var n=i[0],r=i[1],o=i[2];return"far"!==r||e||(r="fas"),t[n]={prefix:r,iconName:o},t},{})};Pt();var Et=lt.styles,Mt=function(){return{prefix:null,iconName:null,rest:[]}},Lt=function(){},Dt={replace:function(t){var e=t[0],i=t[1].map(function(t){return g(t)}).join("\n");if(e.parentNode&&e.outerHTML)e.outerHTML=i+(st.keepOriginalSource&&"svg"!==e.tagName.toLowerCase()?"\x3c!-- "+e.outerHTML+" --\x3e":"");else if(e.parentNode){var n=document.createElement("span");e.parentNode.replaceChild(n,e),n.outerHTML=i}},nest:function(t){var e=t[0],i=t[1];if(~a(e).indexOf(st.replacementClass))return Dt.replace(t);var n=new RegExp(st.familyPrefix+"-.*");delete i[0].attributes.style;var r=i[0].attributes.class.split(" ").reduce(function(t,e){return e===st.replacementClass||e.match(n)?t.toSvg.push(e):t.toNode.push(e),t},{toNode:[],toSvg:[]});i[0].attributes.class=r.toSvg.join(" ");var o=i.map(function(t){return g(t)}).join("\n");e.setAttribute("class",r.toNode.join(" ")),e.setAttribute(V,""),e.innerHTML=o}},jt=!1,Nt=null,Ft=function(t){var e=t.getAttribute("style"),i=[];return e&&(i=e.split(";").reduce(function(t,e){var i=e.split(":"),n=i[0],r=i.slice(1);return n&&r.length>0&&(t[n]=r.join(":").trim()),t},{})),i},Rt=function(t){var e,i,n=t.getAttribute("data-prefix"),r=t.getAttribute("data-icon"),o=void 0!==t.innerText?t.innerText.trim():"",s=f(a(t));return n&&r&&(s.prefix=n,s.iconName=r),s.prefix&&o.length>1?s.iconName=(e=s.prefix,i=t.innerText,At[e][i]):s.prefix&&1===o.length&&(s.iconName=function(t,e){return St[t][e]}(s.prefix,function(t){for(var e="",i=0;i<t.length;i++)e+=("000"+t.charCodeAt(i).toString(16)).slice(-4);return e}(t.innerText))),s},Ut=function(t){var e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t?t.toLowerCase().split(" ").reduce(function(t,e){var i=e.toLowerCase().split("-"),n=i[0],r=i.slice(1).join("-");if(n&&"h"===r)return t.flipX=!0,t;if(n&&"v"===r)return t.flipY=!0,t;if(r=parseFloat(r),isNaN(r))return t;switch(n){case"grow":t.size=t.size+r;break;case"shrink":t.size=t.size-r;break;case"left":t.x=t.x-r;break;case"right":t.x=t.x+r;break;case"up":t.y=t.y-r;break;case"down":t.y=t.y+r;break;case"rotate":t.rotate=t.rotate+r}return t},e):e},zt=function(t){return Ut(t.getAttribute("data-fa-transform"))},Bt=function(t){var e=t.getAttribute("data-fa-symbol");return null!==e&&(""===e||e)},Ht=function(t){var e=s(t.attributes).reduce(function(t,e){return"class"!==t.name&&"style"!==t.name&&(t[e.name]=e.value),t},{}),i=t.getAttribute("title");return st.autoA11y&&(i?e["aria-labelledby"]=st.replacementClass+"-title-"+o():e["aria-hidden"]="true"),e},$t=function(t){var e=t.getAttribute("data-fa-mask");return e?f(e.split(" ").map(function(t){return t.trim()})):Mt()};b.prototype=Object.create(Error.prototype),b.prototype.constructor=b;var Yt,Vt={fill:"currentColor"},Gt={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},Wt={tag:"path",attributes:et({},Vt,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})},qt=et({},Gt,{attributeName:"opacity"}),Xt={tag:"g",children:[Wt,{tag:"circle",attributes:et({},Vt,{cx:"256",cy:"364",r:"28"}),children:[{tag:"animate",attributes:et({},Gt,{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:et({},qt,{values:"1;0;1;1;0;1;"})}]},{tag:"path",attributes:et({},Vt,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:[{tag:"animate",attributes:et({},qt,{values:"1;0;0;0;0;1;"})}]},{tag:"path",attributes:et({},Vt,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:et({},qt,{values:"0;0;1;1;0;0;"})}]}]},Qt=lt.styles,Kt="fa-layers-text",Jt=/Font Awesome 5 (Solid|Regular|Light|Brands)/,Zt={Solid:"fas",Regular:"far",Light:"fal",Brands:"fab"},te=function(){var t="svg-inline--fa",e=st.familyPrefix,i=st.replacementClass,n='svg:not(:root).svg-inline--fa {\n  overflow: visible; }\n\n.svg-inline--fa {\n  display: inline-block;\n  font-size: inherit;\n  height: 1em;\n  overflow: visible;\n  vertical-align: -.125em; }\n  .svg-inline--fa.fa-lg {\n    vertical-align: -.225em; }\n  .svg-inline--fa.fa-w-1 {\n    width: 0.0625em; }\n  .svg-inline--fa.fa-w-2 {\n    width: 0.125em; }\n  .svg-inline--fa.fa-w-3 {\n    width: 0.1875em; }\n  .svg-inline--fa.fa-w-4 {\n    width: 0.25em; }\n  .svg-inline--fa.fa-w-5 {\n    width: 0.3125em; }\n  .svg-inline--fa.fa-w-6 {\n    width: 0.375em; }\n  .svg-inline--fa.fa-w-7 {\n    width: 0.4375em; }\n  .svg-inline--fa.fa-w-8 {\n    width: 0.5em; }\n  .svg-inline--fa.fa-w-9 {\n    width: 0.5625em; }\n  .svg-inline--fa.fa-w-10 {\n    width: 0.625em; }\n  .svg-inline--fa.fa-w-11 {\n    width: 0.6875em; }\n  .svg-inline--fa.fa-w-12 {\n    width: 0.75em; }\n  .svg-inline--fa.fa-w-13 {\n    width: 0.8125em; }\n  .svg-inline--fa.fa-w-14 {\n    width: 0.875em; }\n  .svg-inline--fa.fa-w-15 {\n    width: 0.9375em; }\n  .svg-inline--fa.fa-w-16 {\n    width: 1em; }\n  .svg-inline--fa.fa-w-17 {\n    width: 1.0625em; }\n  .svg-inline--fa.fa-w-18 {\n    width: 1.125em; }\n  .svg-inline--fa.fa-w-19 {\n    width: 1.1875em; }\n  .svg-inline--fa.fa-w-20 {\n    width: 1.25em; }\n  .svg-inline--fa.fa-pull-left {\n    margin-right: .3em;\n    width: auto; }\n  .svg-inline--fa.fa-pull-right {\n    margin-left: .3em;\n    width: auto; }\n  .svg-inline--fa.fa-border {\n    height: 1.5em; }\n  .svg-inline--fa.fa-li {\n    width: 2em; }\n  .svg-inline--fa.fa-fw {\n    width: 1.25em; }\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0; }\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -.125em;\n  width: 1em; }\n  .fa-layers svg.svg-inline--fa {\n    -webkit-transform-origin: center center;\n            transform-origin: center center; }\n\n.fa-layers-text, .fa-layers-counter {\n  display: inline-block;\n  position: absolute;\n  text-align: center; }\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center; }\n\n.fa-layers-counter {\n  background-color: #ff253a;\n  border-radius: 1em;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #fff;\n  height: 1.5em;\n  line-height: 1;\n  max-width: 5em;\n  min-width: 1.5em;\n  overflow: hidden;\n  padding: .25em;\n  right: 0;\n  text-overflow: ellipsis;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right; }\n\n.fa-layers-bottom-right {\n  bottom: 0;\n  right: 0;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right; }\n\n.fa-layers-bottom-left {\n  bottom: 0;\n  left: 0;\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left; }\n\n.fa-layers-top-right {\n  right: 0;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right; }\n\n.fa-layers-top-left {\n  left: 0;\n  right: auto;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top left;\n          transform-origin: top left; }\n\n.fa-lg {\n  font-size: 1.33333em;\n  line-height: 0.75em;\n  vertical-align: -.0667em; }\n\n.fa-xs {\n  font-size: .75em; }\n\n.fa-sm {\n  font-size: .875em; }\n\n.fa-1x {\n  font-size: 1em; }\n\n.fa-2x {\n  font-size: 2em; }\n\n.fa-3x {\n  font-size: 3em; }\n\n.fa-4x {\n  font-size: 4em; }\n\n.fa-5x {\n  font-size: 5em; }\n\n.fa-6x {\n  font-size: 6em; }\n\n.fa-7x {\n  font-size: 7em; }\n\n.fa-8x {\n  font-size: 8em; }\n\n.fa-9x {\n  font-size: 9em; }\n\n.fa-10x {\n  font-size: 10em; }\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em; }\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: 2.5em;\n  padding-left: 0; }\n  .fa-ul > li {\n    position: relative; }\n\n.fa-li {\n  left: -2em;\n  position: absolute;\n  text-align: center;\n  width: 2em;\n  line-height: inherit; }\n\n.fa-border {\n  border: solid 0.08em #eee;\n  border-radius: .1em;\n  padding: .2em .25em .15em; }\n\n.fa-pull-left {\n  float: left; }\n\n.fa-pull-right {\n  float: right; }\n\n.fa.fa-pull-left,\n.fas.fa-pull-left,\n.far.fa-pull-left,\n.fal.fa-pull-left,\n.fab.fa-pull-left {\n  margin-right: .3em; }\n\n.fa.fa-pull-right,\n.fas.fa-pull-right,\n.far.fa-pull-right,\n.fal.fa-pull-right,\n.fab.fa-pull-right {\n  margin-left: .3em; }\n\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n          animation: fa-spin 2s infinite linear; }\n\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n          animation: fa-spin 1s infinite steps(8); }\n\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg); }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg); } }\n\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg); }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg); } }\n\n.fa-rotate-90 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg); }\n\n.fa-rotate-180 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg); }\n\n.fa-rotate-270 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg); }\n\n.fa-flip-horizontal {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1); }\n\n.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1); }\n\n.fa-flip-horizontal.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1); }\n\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical {\n  -webkit-filter: none;\n          filter: none; }\n\n.fa-stack {\n  display: inline-block;\n  height: 2em;\n  position: relative;\n  width: 2em; }\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0; }\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1em; }\n\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2em; }\n\n.fa-inverse {\n  color: #fff; }\n\n.sr-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px; }\n\n.sr-only-focusable:active, .sr-only-focusable:focus {\n  clip: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  position: static;\n  width: auto; }\n';if("fa"!==e||i!==t){var r=new RegExp("\\.fa\\-","g"),o=new RegExp("\\."+t,"g");n=n.replace(r,"."+e+"-").replace(o,"."+i)}return n},ee=!1,ie=new(function(){function t(){Z(this,t),this.definitions={}}return tt(t,[{key:"add",value:function(){for(var t=this,e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];var r=i.reduce(this._pullDefinitions,{});Object.keys(r).forEach(function(e){t.definitions[e]=et({},t.definitions[e]||{},r[e]),function t(e,i){var n=Object.keys(i).reduce(function(t,e){var n=i[e];return n.icon?t[n.iconName]=n.icon:t[e]=n,t},{});"function"==typeof lt.hooks.addPack?lt.hooks.addPack(e,n):lt.styles[e]=et({},lt.styles[e]||{},n),"fas"===e&&t("fa",i)}(e,r[e])})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,e){var i=e.prefix&&e.iconName&&e.icon?{0:e}:e;return Object.keys(i).map(function(e){var n=i[e],r=n.prefix,o=n.iconName,s=n.icon;t[r]||(t[r]={}),t[r][o]=s}),t}}]),t}()),ne=function(){n({autoReplaceSvg:!1,observeMutations:!1}),Nt&&Nt.disconnect()},re={i2svg:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(H){S();var e=t.node,i=void 0===e?R:e,n=t.callback,r=void 0===n?function(){}:n;st.searchPseudoElements&&T(i),C(i,r)}},css:te,insertCss:function(){r(te())}},oe={transform:function(t){return Ut(t)}},se=(Yt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.transform,n=void 0===i?dt:i,r=e.symbol,s=void 0!==r&&r,a=e.mask,l=void 0===a?null:a,c=e.title,u=void 0===c?null:c,p=e.classes,h=void 0===p?[]:p,f=e.attributes,m=void 0===f?{}:f,g=e.styles,y=void 0===g?{}:g;if(t){var v=t.prefix,b=t.iconName,w=t.icon;return A(et({type:"icon"},t),function(){return S(),st.autoA11y&&(u?m["aria-labelledby"]=st.replacementClass+"-title-"+o():m["aria-hidden"]="true"),d({icons:{main:_(w),mask:l?_(l.icon):{found:!1,width:null,height:null,icon:{}}},prefix:v,iconName:b,transform:et({},dt,n),symbol:s,title:u,extra:{attributes:m,styles:y,classes:h}})})}},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(t||{}).icon?t:O(t||{}),n=e.mask;return n&&(n=(n||{}).icon?n:O(n||{})),Yt(i,et({},e,{mask:n}))}),ae=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.transform,n=void 0===i?dt:i,r=e.title,o=void 0===r?null:r,s=e.classes,a=void 0===s?[]:s,l=e.attributes,c=void 0===l?{}:l,u=e.styles,p=void 0===u?{}:u;return A({type:"text",content:t},function(){return S(),h({content:t,transform:et({},dt,n),title:o,extra:{attributes:c,styles:p,classes:[st.familyPrefix+"-layers-text"].concat(it(a))}})})},le=function(t){return A({type:"layer"},function(){S();var e=[];return t(function(t){Array.isArray(t)?t.map(function(t){e=e.concat(t.abstract)}):e=e.concat(t.abstract)}),[{tag:"span",attributes:{class:st.familyPrefix+"-layers"},children:e}]})},ce={noAuto:ne,dom:re,library:ie,parse:oe,findIconDefinition:O,icon:se,text:ae,layer:le},ue=function(){H&&st.autoReplaceSvg&&ce.dom.i2svg({node:R})};Object.defineProperty(ce,"config",{get:function(){return st},set:function(t){n(t)}}),H&&function(t){try{!function(){B&&(F.FontAwesome||(F.FontAwesome=ce),t=function(){Object.keys(lt.styles).length>0&&ue(),st.observeMutations&&"function"==typeof MutationObserver&&function(t){if(U){var e=t.treeCallback,i=t.nodeCallback,n=t.pseudoElementsCallback;Nt=new U(function(t){jt||s(t).forEach(function(t){if("childList"===t.type&&t.addedNodes.length>0&&!y(t.addedNodes[0])&&(st.searchPseudoElements&&n(t.target),e(t.target)),"attributes"===t.type&&t.target.parentNode&&st.searchPseudoElements&&n(t.target.parentNode),"attributes"===t.type&&y(t.target)&&~K.indexOf(t.attributeName))if("class"===t.attributeName){var r=f(a(t.target)),o=r.prefix,s=r.iconName;o&&t.target.setAttribute("data-prefix",o),s&&t.target.setAttribute("data-icon",s)}else i(t.target)})}),H&&Nt.observe(R.getElementsByTagName("body")[0],{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}({treeCallback:C,nodeCallback:I,pseudoElementsCallback:T})},H&&(ut?setTimeout(t,0):ct.push(t))),lt.hooks=et({},lt.hooks,{addPack:function(t,e){lt.styles[t]=et({},lt.styles[t]||{},e),Pt(),ue()},addShims:function(t){var e;(e=lt.shims).push.apply(e,it(t)),Pt(),ue()}});var t}()}catch(t){if(!q)throw t}}();var pe=ce.config;e.config=pe,e.icon=se,e.noAuto=ne,e.layer=le,e.text=ae,e.library=ie,e.dom=re,e.parse=oe,e.findIconDefinition=O,e.default=ce},function(t,e,i){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function r(t){var e=t.querySelectorAll("path");return[].map.call(e,function(t){return t.getAttribute("d")}).join(" ")}function o(t){var e=t.querySelector("svg").getAttribute("viewBox").split(" "),i=l(e,4);return{width:i[2],height:i[3]}}function s(t,e){var i=o(e);return{prefix:"tw",iconName:t,icon:[i.width,i.height,[],"",r(e)]}}function a(t,e,i,r){var o=i?{color:i}:{};return{title:"",classes:["fa-"+(t||"1x")].concat(n(e)),styles:Object.assign(o,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.applyCustom=e.isIE=e.isEdge=e.isFirefox=void 0;var l=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};e.combinePaths=r,e.getViewBox=o,e.getCustomDefinition=s,e.getExtras=a,e.createStyles=function(t){if(!t)return{};var e=t.replace(/\s/g,"").split(";").map(function(t){return t.split(":")});return Object.assign.apply(Object,n(e.map(function(t){return t[0]?function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({},t[0],t[1]):{}})))};var c,u=(c=i(7))&&c.__esModule?c:{default:c},p=navigator.userAgent;e.isFirefox=p.includes("Firefox"),e.isEdge=p.includes("Edge"),e.isIE=["MSIE ","Trident/"].some(function(t){return p.includes(t)});var d=e.applyCustom=function(t,e,i,n,r,o){var l=s(e,document.createRange().createContextualFragment(t)),c=a(i,r,n,o);return u.default.icon(l,c)};e.default={applyCustom:d}},function(t,e,i){"use strict";function n(t,e,i,n){g=i,v=n||{};var o=c()(t,e);return r(o),function(e){for(var i=[],n=0;n<o.length;n++){var s=o[n];(a=d[s.id]).refs--,i.push(a)}for(e?r(o=c()(t,e)):o=[],n=0;n<i.length;n++){var a;if(0===(a=i[n]).refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete d[a.id]}}}}function r(t){for(var e=0;e<t.length;e++){var i=t[e],n=d[i.id];if(n){n.refs++;for(var r=0;r<n.parts.length;r++)n.parts[r](i.parts[r]);for(;r<i.parts.length;r++)n.parts.push(s(i.parts[r]));n.parts.length>i.parts.length&&(n.parts.length=i.parts.length)}else{var o=[];for(r=0;r<i.parts.length;r++)o.push(s(i.parts[r]));d[i.id]={id:i.id,refs:1,parts:o}}}}function o(){var t=document.createElement("style");return t.type="text/css",h.appendChild(t),t}function s(t){var e,i,n=document.querySelector("style["+b+'~="'+t.id+'"]');if(n){if(g)return y;n.parentNode.removeChild(n)}if(w){var r=m++;n=f||(f=o()),e=a.bind(null,n,r,!1),i=a.bind(null,n,r,!0)}else n=o(),e=function(t,e){var i=e.css,n=e.media,r=e.sourceMap;if(n&&t.setAttribute("media",n),v.ssrId&&t.setAttribute(b,e.id),r&&(i+="\n/*# sourceURL="+r.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}.bind(null,n),i=function(){n.parentNode.removeChild(n)};return e(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;e(t=n)}else i()}}function a(t,e,i,n){var r=i?"":n.css;if(t.styleSheet)t.styleSheet.cssText=k(e,r);else{var o=document.createTextNode(r),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}i.r(e),i.d(e,"default",function(){return n});var l=i(4),c=i.n(l),u="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!u)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var p,d={},h=u&&(document.head||document.getElementsByTagName("head")[0]),f=null,m=0,g=!1,y=function(){},v=null,b="data-vue-ssr-id",w="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase()),k=(p=[],function(t,e){return p[t]=e,p.filter(Boolean).join("\n")})},function(t,e,i){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i=function(t,e){var i,n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var o=(i=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");return[n].concat(r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"})).concat([o]).join("\n")}return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+i+"}":i}).join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},r=0;r<this.length;r++){var o=this[r][0];"number"==typeof o&&(n[o]=!0)}for(r=0;r<t.length;r++){var s=t[r];"number"==typeof s[0]&&n[s[0]]||(i&&!s[2]?s[2]=i:i&&(s[2]="("+s[2]+") and ("+i+")"),e.push(s))}},e}},function(t,e,i){(t.exports=i(10)(!1)).push([t.i,"\n.w-svg-sprite {\n    display: inline-block;\n    /* width: 1em - wasn't strictly unheld (Chrome at least) */\n    min-width: 1em;\n    max-width: 1em;\n    height: 1em;\n    vertical-align: -.125em;\n}\n.w-svg-sprite--spin {\n  -webkit-animation: 4s linear 0s infinite sprite_spin;\n          animation: 4s linear 0s infinite sprite_spin;\n}\n@-webkit-keyframes sprite_spin {\nfrom { -webkit-transform:rotate(0deg);\n}\nto { -webkit-transform:rotate(360deg);\n}\n}\n@keyframes sprite_spin {\nfrom { transform:rotate(0deg);\n}\nto { transform:rotate(360deg);\n}\n}\n",""])},function(t,e,i){"use strict";var n=i(0);i.n(n).a},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(21),o=n(i(20)),s=n(i(18)),a=n(i(16));e.default={props:{id:{type:String,required:!0},size:{type:Number,default:0},color:{type:String,default:""},title:{type:String,default:""},spin:{type:Boolean,default:!1},inline:{type:Boolean,default:!1},x:{type:Number,default:0},y:{type:Number,default:0}},computed:{component:function(){var t=r.bundles[r.map[this.id]-1],e={projects:s.default,teamwork:a.default,common:o.default}[t];if(!e)throw"Icon ID ("+this.id+") not found";return e}}}},function(t,e,i){"use strict";i.r(e);var n=i(13),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);e.default=r.a},function(t,e,i){t.exports=i.p+"sprites/teamwork-icons.svg"},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.spriteLoaded=void 0;var r=n(i(15)),o=n(i(6)).default.createComponent(r.default),s=o.spriteLoaded;e.spriteLoaded=s,e.default=o},function(t,e,i){t.exports=i.p+"sprites/projects-icons.svg"},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.spriteLoaded=void 0;var r=n(i(17)),o=n(i(6)).default.createComponent(r.default),s=o.spriteLoaded;e.spriteLoaded=s,e.default=o},function(t,e,i){t.exports=i.p+"sprites/common-icons.svg"},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.spriteLoaded=void 0;var r=n(i(19)),o=n(i(6)).default.createComponent(r.default),s=o.spriteLoaded;e.spriteLoaded=s,e.default=o},function(t){t.exports={bundles:["projects-dashboard","projects","teamwork","common","gantt"],map:{activity:1,"comments-tw":1,dashboard:1,events:1,"messages-tw":1,projects:1,task:1,welcome:1,archive:2,"archive-solid":2,at:2,"at-solid":2,billing:2,"billing-solid":2,bolt:2,"bolt-solid":2,bug:2,"bug-solid":2,bullhorn:2,"bullhorn-solid":2,"bullhorn-light":2,bullseye:2,"bullseye-solid":2,checklist:2,"checklist-solid":2,"check-circle":2,"check-circle-solid":2,"circle-notch":2,"circle-notch-solid":2,clone:2,"clone-solid":2,compress:2,"compress-solid":2,copy:2,"copy-solid":2,"custom-field":2,sort:2,"sort-solid":2,"sort-amount-up":2,"sort-amount-up-solid":2,"sort-amount-down":2,"sort-amount-down-solid":2,delete:2,"delete-solid":2,dependencies:2,"dependencies-solid":2,edit:2,"edit-solid":2,event:2,"event-solid":2,expand:2,"expand-solid":2,"external-link":2,"external-link-solid":2,fax:2,"fax-solid":2,file:2,"file-solid":2,"file-light":2,"file-download":2,"file-download-solid":2,"file-upload":2,"file-upload-solid":2,filter:2,flask:2,"flask-solid":2,followers:2,"followers-solid":2,globe:2,"globe-solid":2,grid:2,"grid-solid":2,"landline-phone":2,"landline-phone-solid":2,lightbulb:2,"lightbulb-solid":2,list:2,"list-solid":2,merge:2,"merge-solid":2,"mobile-phone":2,"mobile-phone-solid":2,"no-email":2,observer:2,"observer-solid":2,owner:2,"owner-solid":2,pause:2,"pause-solid":2,people:2,"people-solid":2,pin:2,"pin-solid":2,play:2,"play-solid":2,plus:4,"plus-solid":4,project:2,"project-solid":2,"puzzle-piece":2,"puzzle-piece-solid":2,quickview:2,"quickview-solid":2,reassign:2,"reassign-solid":2,repeat:2,"repeat-solid":2,save:2,"save-solid":2,search:2,"search-solid":2,shield:2,"shield-solid":2,sliders:2,status:2,"status-solid":2,stop:2,"stop-solid":2,subtask:2,"subtask-solid":2,tasks:2,"tasks-solid":2,template:2,"template-solid":2,"template-light":2,timer:2,"timer-solid":2,users:2,"users-solid":2,wrench:2,"wrench-solid":2,"board-tw":3,"card-tw":3,"caution-tw":3,"chat-logo-tw":3,"spaces-logo-tw":3,"collapsed-tw":3,"crm-logo-mono-tw":3,"description-tw":3,"desk-logo-mono-tw":3,"desk-logo-tw":3,"draghandle-tw":3,"error-tw":3,"everything-tw":3,"expanded-tw":3,"gantt-tw":3,"grid-tw":3,"list-tw":3,"milestone-tw":3,"projects-logo-tw":3,"simple-tw":3,"table-tw":3,add:4,"add-solid":4,"alert-success":4,"alert-success-solid":4,"angle-down":4,"angle-down-solid":4,"angle-up":4,"angle-up-solid":4,"arrow-from-left":4,"arrow-from-left-solid":4,"arrow-to-right":4,"arrow-to-right-solid":4,book:4,"book-solid":4,"book-light":4,bookmark:4,"bookmark-solid":4,briefcase:4,"briefcase-solid":4,"briefcase-light":4,sync:4,"sync-solid":4,calendar:4,"calendar-solid":4,"calendar-check":4,"calendar-check-solid":4,"calendar-check-light":4,"clipboard-list-check":4,"clipboard-list-check-solid":4,"clipboard-list-check-light":4,"chart-line":4,"chart-line-solid":4,check:4,"check-solid":4,"chevron-down":4,"chevron-down-solid":4,"chevron-left":4,"chevron-left-solid":4,"chevron-right":4,"chevron-right-solid":4,"chevron-up":4,"chevron-up-solid":4,clock:4,"clock-solid":4,"clock-light":4,company:4,"company-solid":4,close:4,"close-solid":4,columns:4,"columns-solid":4,comment:4,"comment-solid":4,comments:4,"comments-solid":4,"ellipsis-h":4,"ellipsis-h-solid":4,"ellipsis-v":4,"ellipsis-v-solid":4,envelope:4,"envelope-solid":4,"exclamation-triangle":4,"exclamation-triangle-solid":4,excel:4,"excel-solid":4,favorite:4,"favorite-solid":4,folder:4,"folder-solid":4,gift:4,"gift-solid":4,"glass-cheers":4,"glass-cheers-solid":4,"glass-cheers-light":4,graph:4,"graph-solid":4,"hands-helping":4,"hands-helping-solid":4,"hands-helping-light":4,info:4,"info-solid":4,"info-circle":4,"info-circle-solid":4,key:4,"key-solid":4,link:4,"link-solid":4,"link-light":4,location:4,"location-solid":4,"location-alt":4,"location-alt-solid":4,lock:4,"lock-solid":4,"users-class":4,"users-class-solid":4,"users-class-light":4,messages:4,"messages-solid":4,minus:4,"minus-solid":4,note:4,"note-solid":4,notifications:4,"notifications-solid":4,"notifications-disabled":4,"notifications-disabled-solid":4,paperclip:4,"paperclip-solid":4,"paint-brush":4,"paint-brush-solid":4,"paint-brush-light":4,pane:4,"project-diagram":4,"project-diagram-solid":4,power:4,"power-solid":4,priority:4,"priority-solid":4,reminders:4,"reminders-solid":4,reply:4,"reply-solid":4,rss:4,"rss-solid":4,settings:4,"settings-solid":4,shortcut:4,"shortcut-solid":4,"smile-plus":4,"smile-plus-solid":4,star:4,"star-solid":4,success:4,"success-solid":4,tag:4,"tag-solid":4,"thumbs-up":4,"thumbs-up-solid":4,undo:4,"undo-solid":4,unlink:4,"unlink-solid":4,user:4,"user-solid":4,"question-circle":4,"question-circle-solid":4,code:4,"code-solid":4,times:4,"times-solid":4,building:4,"building-solid":4,"comment-alt-dots":4,"comment-alt-dots-solid":4,"lock-alt":4,"lock-alt-solid":4,"code-branch":4,"code-branch-solid":4,"file-check":4,"file-check-solid":4,desktop:4,"desktop-solid":4,calculator:4,"calculator-solid":4,smile:4,"smile-solid":4,"alarm-clock":4,"alarm-clock-solid":4,"envelope-open":4,"envelope-open-solid":4,"code-commit":4,"code-commit-solid":4,"info-square":4,"info-square-solid":4,images:4,"images-solid":4,handshake:4,"handshake-solid":4,cog:4,"cog-solid":4,"address-book":4,"address-book-solid":4,"address-card":4,"address-card-solid":4,bell:4,"bell-solid":4,"box-full":4,"box-full-solid":4,browser:4,"browser-solid":4,"calendar-alt":4,"calendar-alt-solid":4,"camera-retro":4,"camera-retro-solid":4,"chart-bar":4,"chart-bar-solid":4,"chart-bar-light":4,"chart-pie":4,"chart-pie-solid":4,"chart-pie-light":4,"clipboard-check":4,"clipboard-check-solid":4,"clipboard-list":4,"clipboard-list-solid":4,cloud:4,"cloud-solid":4,"cloud-download":4,"cloud-download-solid":4,"cloud-upload":4,"cloud-upload-solid":4,coffee:4,"coffee-solid":4,"credit-card":4,"credit-card-solid":4,cut:4,"cut-solid":4,"file-alt":4,"file-alt-solid":4,"file-edit":4,"file-edit-solid":4,"file-exclamation":4,"file-exclamation-solid":4,"file-plus":4,"file-plus-solid":4,"folder-open":4,"folder-open-solid":4,frown:4,"frown-solid":4,home:4,"home-solid":4,"list-alt":4,"list-alt-solid":4,"map-marker-alt":4,"map-marker-alt-solid":4,meh:4,"meh-solid":4,paste:4,"paste-solid":4,"pencil-alt":4,"pencil-alt-solid":4,phone:4,"phone-solid":4,print:5,"print-solid":5,fullscreen:5,"fullscreen-solid":5,redo:5,"redo-solid":5,"show-all":5,"show-all-solid":5,"zoom-in":5,"zoom-in-solid":5,"zoom-out":5,"zoom-out-solid":5}}},function(t,e,i){"use strict";var n=function(){var t=this.$createElement;return(this._self._c||t)(this.component,this._b({tag:"component"},"component",this.$props,!1))},r=[];n._withStripped=!0,i.d(e,"a",function(){return n}),i.d(e,"b",function(){return r})},,function(t,e,i){"use strict";i.r(e);var n=i(22),r=i(14);for(var o in r)"default"!==o&&function(t){i.d(e,t,function(){return r[t]})}(o);var s=i(5),a=Object(s.a)(r.default,n.a,n.b,!1,null,null,null);a.options.__file="src/components/SupersetIcon.vue",e.default=a.exports}])})},1151:function(t,e,i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}};n=[i(164)],void 0!==(r=function(t){return function(){function e(t){this.OnClick=o(this.OnClick,this),this.Listen=o(this.Listen,this),this.Emit=o(this.Emit,this),console.assert(!("function"==typeof t?t('Metric missing it\'s "name"'):void 0)),this.name=t}return e.prototype.Emit=function(e,i){return t.postbox.publish("ui-metric-events-"+this.name,{type:e,data:i})},e.prototype.Listen=function(e){return t.postbox.subscribe("ui-metric-events-"+this.name,e)},e.prototype.OnClick=function(t){return this.Emit("click",t)},e}()}.apply(e,n))&&(t.exports=r)},1152:function(t,e,i){(function(n){var r,o,s=function(t,e){return function(){return t.apply(e,arguments)}};r=[i(14),i(164)],void 0!==(o=function(t,e){var i;return i=function(){function i(t){this.getUpdatedProgress=s(this.getUpdatedProgress,this),this.undoDelete=s(this.undoDelete,this),this.delete=s(this.delete,this),this.detachTaskList=s(this.detachTaskList,this),this.attachTaskList=s(this.attachTaskList,this),this.markAsIncomplete=s(this.markAsIncomplete,this),this.markAsComplete=s(this.markAsComplete,this),this.toggle=s(this.toggle,this),this.updateTags=s(this.updateTags,this),this.OnQuickView=s(this.OnQuickView,this),this.OnUpdateFollowing=s(this.OnUpdateFollowing,this),this.OnUpdatePrivacy=s(this.OnUpdatePrivacy,this),this.getDescAsHTML=s(this.getDescAsHTML,this),this.getRelativeDueDate=s(this.getRelativeDueDate,this),this.getDueMonth=s(this.getDueMonth,this),this.sortTaskListsById=s(this.sortTaskListsById,this),this.getResponsibleText=s(this.getResponsibleText,this),this.getResponsibleMeClass=s(this.getResponsibleMeClass,this),this.componentName="Milestone",this.isUpdating=e.observable(!1),this.UpdateData(t)}return i.prototype.UpdateData=function(r){var o;return o=n.extend({},r),null!=o.reminder&&("no"===o.reminder?o.reminder=!1:"yes"===o.reminder&&(o.reminder=!0)),null==o.tasklists&&(o.tasklists=[]),null==o.completerId&&(o.completerId=0),null==o.completerFirstname&&(o.completerFirstname=""),null==o.completerLastname&&(o.completerLastname=""),null==o.completedOn&&(o.completedOn=""),o.commentsCount=parseInt(o.commentsCount,10),o.numCommentsRead=parseInt(o.numCommentsRead||o.commentsCount,10),null!=o.companyId&&(o.companyId=parseInt(o.companyId,10)),o.creatorId=parseInt(o.creatorId,10),o.id=parseInt(o.id,10),o.projectId=parseInt(o.projectId,10),null!=o.completerId&&(o.completerId=parseInt(o.completerId,10)),null==o.lockdownId&&(o.lockdownId=0),o.lockdownId=parseInt(o.lockdownId,10),null==o.dueDateOffset&&(o.dueDateOffset=app.utility.getOffsetDays(o.deadline)),o.dueDateOffset=~~o.dueDateOffset,app.ko.mapping.fromJS(o,i.mapping,this),null==this.descriptionAsHTML?this.descriptionAsHTML=e.observable(e.unwrap(this.description)).extend({linkify:!0}):this.descriptionAsHTML(e.unwrap(this.description)),null==this.responsibleMeClass&&(this.lockdownId=null!=o.lockdownId&&this.private()?e.observable(parseInt(o.lockdownId,10)):e.observable(0),this.hasUnreadComments=e.pureComputed({read:function(t){return function(){return t.commentsCount()!==t.numCommentsRead()}}(this),write:function(t){return function(e){if(!1===e)return t.numCommentsRead(t.commentsCount())}}(this)}),this.responsibleMeClass=e.pureComputed(this.getResponsibleMeClass),this.responsiblePartyText=e.pureComputed(this.getResponsibleText),this.deadlineDDMMYY=e.pureComputed(function(t){return function(){return t.deadline().format("DDMMYY")}}(this)),this.deadlineYYYYMMDD=e.pureComputed(function(t){return function(){return parseInt(t.deadline().format("YYYYMMDD"),10)}}(this)),this.deadlineInWords=e.pureComputed(function(t){return function(){return t.deadline().format("DD MMMM YYYY")}}(this)),this.dueMonth=e.pureComputed(this.getDueMonth),this.dueWeekday=e.pureComputed(function(t){return function(){return t.deadline().format("dddd")}}(this)),this.dueDay=e.pureComputed(function(t){return function(){return t.deadline().format("D")}}(this)),this.dueWhen=e.pureComputed(this.getRelativeDueDate),this.dueToday=e.pureComputed(function(t){return function(){return t.dueWhen()===app.tl("Today")}}(this)),this.progress=null!=o.getProgress?e.observable(Math.floor(o.getProgress)):e.observable(null),this.progressText=null!=o.getProgress?e.observable(app.tl("[_s]% Complete",this.progress())):e.observable(""),this.isLate=e.pureComputed(function(e){return function(){return t().startOf("day")>e.deadline()}}(this)),this.commentClass=e.pureComputed(function(t){return function(){return 0===t.commentsCount()?"huh":""}}(this)),this.isShowingTasklistDropdown=e.observable(!1),this.sortTaskListsById()),this},i.prototype.getResponsibleMeClass=function(){return 1===this.responsiblePartyNames().length&&this.responsiblePartyIds[0]===app.loggedInUser.id()?"me":""},i.prototype.getResponsibleText=function(){var t,e,i,n,r,o,s;if(o="",s=0,n=this.responsiblePartyNames(),!n.length)return"";if(n.length>=2){for(r=this.responsiblePartyIds(),e=t=0,i=r.length;t<i;e=++t)r[e]===app.loggedInUser.id()&&(o+=app.tl("You")+" + ",s=e);""===o&&(o+=n[0]+" + "),n.length>2?o+=n.length-1+" "+app.tl("others"):o+=1===s?n[0]:n[1]}else o=1===n.length&&this.responsiblePartyIds()[0]===app.loggedInUser.id()?app.tl("You are"):n.join(" + ");return o+=" "+app.tl("responsible")},i.prototype.sortTaskListsById=function(){if(null!=("function"==typeof this.tasklists?this.tasklists():void 0)&&this.tasklists().length)return this.tasklists.sort(function(t){return function(t,e){var i,n;return i=t.status,n=e.status,"new"===t.status&&(i="reopened"),"new"===e.status&&(n="reopened"),i===n?parseInt(t.order,10>parseInt(e.order,10))?1:parseInt(t.order,10<parseInt(e.order,10))?-1:0:parseInt(t.order,10<parseInt(e.order,10))?1:parseInt(t.order,10>parseInt(e.order,10))?-1:0}}())},i.prototype.getDueMonth=function(){var i,n,r;return r=t(),n=this.deadline().format("M"),i=[app.tl("January"),app.tl("February"),app.tl("March"),app.tl("April"),app.tl("May"),app.tl("June"),app.tl("July"),app.tl("August"),app.tl("September"),app.tl("October"),app.tl("November"),app.tl("December")],this.deadline().isSame(r,"year")?e.unwrap(i[n-1]):e.unwrap(i[n-1])+" "+e.unwrap(this.deadline().format("YYYY"))},i.prototype.getRelativeDueDate=function(){var e,i;return i=t(),e=Math.ceil(this.deadline().diff(i,"days",!0)),0===e?app.tl("Today"):1===e?app.tl("Tomorrow"):-1===e?app.tl("Yesterday"):e>0?app.tl("[_s] days away",e):e<0?app.tl("[_s] days ago",-1*e):void 0},i.prototype.getDescAsHTML=function(){var t,e;return""===this.description()?"":(t=String(this.description()).replace(/\"/g,"&quot").replace(/\'/g,"&#39").replace(/</g,"&lt").replace(/>/g,"&gt"),e=/(^|[\s\n]|<br\/?>)((?:https?|ftp|file):\/\/[\-A-Z0-9+\u0026\u2019@#\/%?=()~_|!:,.]*[\-A-Z0-9+\u0026@#\/%=~()_|])/gi,t=t.replace(e,"$1<a href='$2' style='word-break: break-all' target=_blank class=blue>$2</a>").replace("\n","<br/>"))},i.prototype.OnUpdatePrivacy=function(t){var e;e=this.responsiblePartyIds().filter(function(e){return function(e){return-1!==t.indexOf(e)}}()),e.length||e.push(app.loggedInUser.id()),this.responsiblePartyIds(e)},i.prototype.OnUpdateFollowing=function(t){var e;Tipped.hideAll(),e={"follow-changes":"changes"===t||"all"===t,"follow-comments":"comments"===t||"all"===t},"none"===t?app.api.put("milestones/"+this.id()+"/unfollow.json").then(function(t){return function(e){return t.userFollowingChanges(!1),t.userFollowingComments(!1)}}(this)):app.api.put("milestones/"+this.id()+"/follow.json",e).then(function(e){return function(i){return e.userFollowingChanges("changes"===t||"all"===t),e.userFollowingComments("comments"===t||"all"===t)}}(this))},i.prototype.OnQuickView=function(){return app.quickView.show("milestone",{id:this.id(),milestoneId:this.id(),projectId:this.projectId(),isQuickView:!0})},i.prototype.updateTags=function(t){var i,n,r,o;r=e.unwrap(this.id),i=t.map(function(t){return t.name()}).join(","),o="milestones/"+r+"/tags.json?getTags=true&replaceExistingTags=true",n={tags:{content:i}},app.api.put(o,n)},i.prototype.toggle=function(t,e){return this.completed()?this.markAsIncomplete(t,e):this.markAsComplete(t,e)},i.prototype.markAsComplete=function(t,i){var n,r;if(!this.isUpdating())return r=e.unwrap(this.id),n=this.status(),this.isUpdating(!0),this.completed(!0),this.status("completed"),(null!=i?i.ctrlKey:void 0)&&app.modal.Show("addOrEditComment",{item:this,projectId:this.projectId(),type:"milestone"}),app.api.put("milestones/"+r+"/complete.json").then(function(t){return function(){return e.postbox.publish("allTWEvents",{eventTime:new Date,actionType:app.consts.ACTIONTYPE.UPDATED,itemType:"milestone",itemId:r,extraInfo:{action:"completed"}})}}()).catch(function(t){return function(){return t.status(n),t.completed(!1)}}(this)).finally(function(t){return function(){return setTimeout(function(){return t.isUpdating(!1)},200)}}(this))},i.prototype.markAsIncomplete=function(){var i,n;if(!this.isUpdating())return n=e.unwrap(this.id),i=this.status(),this.completed(!1),this.isUpdating(!0),this.status(t().isBefore(this.deadline())?"upcoming":"late"),app.api.put("milestones/"+n+"/uncomplete.json").then(function(t){return function(){return e.postbox.publish("allTWEvents",{eventTime:new Date,actionType:app.consts.ACTIONTYPE.UPDATED,itemType:"milestone",itemId:n,extraInfo:{action:"incompleted"}})}}()).catch(function(t){return function(){return t.status(i),t.completed(!0)}}(this)).finally(function(t){return function(){return setTimeout(function(){return t.isUpdating(!1)},200)}}(this))},i.prototype.attachTaskList=function(t,i){var n,r,o;if(r=e.unwrap(this.id),o=e.unwrap(t.id),n={"todo-list":{"milestone-id":r}},o)return app.api.put("tasklists/"+o+".json",n).then(function(t){return function(){return i()}}()).finally(function(t){return function(){return t.isShowingTasklistDropdown(!1)}}(this))},i.prototype.detachTaskList=function(t,i){var n,r;return r=e.unwrap(t.id),n={"todo-list":{"milestone-id":0}},app.api.put("tasklists/"+r+".json",n).then(function(t){return function(){return i(),e.postbox.publish("milestone-tasklists-changed",{id:t.id()})}}(this))},i.prototype.delete=function(){var t;return t=e.unwrap(this.id),app.api.delete("milestones/"+t+".json").then(function(i){return function(){return app.flash.Success(app.tl("Milestone has been deleted"),{undo:i.undoDelete}),e.postbox.publish("allTWEvents",{eventTime:new Date,actionType:app.consts.ACTIONTYPE.DELETED,itemType:"milestone",itemId:t})}}(this))},i.prototype.undoDelete=function(){var t;return t=e.unwrap(this.id),app.flash.Success(app.tl("Restoring")+app.localizationPreferences().ellipsis),app.api.put("trashcan/milestones/"+t+"/restore.json").then(function(i){return function(i){return app.flash.Success(app.tl("Milestone has been restored")),e.postbox.publish("allTWEvents",{eventTime:new Date,actionType:app.consts.ACTIONTYPE.UPDATED,itemType:"milestone",itemId:t})}}())},i.prototype.getUpdatedProgress=function(){return app.api.get("milestones/"+this.id()+".json?getProgress=true").then(function(t){return function(e){return t.progress(parseInt(e.response.milestone.getProgress,10)),t.progressText(app.tl("[_s]% Complete",t.progress()))}}(this))},i.prototype.Clone=function(){var t,n;return t=e.mapping.toJS(this),n=t.deadline.format("YYYYMMDD"),t.deadline=n,new i(t)},i}(),i.mapping={deadline:{create:function(e){return app.ko.observable(t(e.data,"YYYYMMDD"))},update:function(e){return t(e.data,"YYYYMMDD")}},responsiblePartyIds:{create:function(t){var i,n;return n="string"==typeof t.data&&t.data.length>0?t.data.split(",").map(function(t){return function(t){var e;return"t"===(e=t.toString()[0])||"c"===e?t:parseInt(t,10)}}()):null!=(i=t.data)?i:[],e.observableArray(n)},update:function(t){var e;return"string"==typeof t.data&&t.data.length>0?t.data.split(",").map(function(t){return function(t){var e;return"t"===(e=t.toString()[0])||"c"===e?t:parseInt(t,10)}}()):null!=(e=t.data)?e:[]}},responsiblePartyNames:{create:function(t){var i,n,r,o;return o=[],(null!=(n=t.data)?n.length:void 0)&&(o=null!=(r="function"==typeof(i=t.data).split?i.split("|"):void 0)?r:t.data),e.observableArray(o)},update:function(t){var e,i,n,r;return r=[],(null!=(i=t.data)?i.length:void 0)&&(r=null!=(n="function"==typeof(e=t.data).split?e.split("|"):void 0)?n:t.data),r}},changeFollowerIds:{create:function(t){var i,n;return i="string"==typeof t.data&&t.data.length>0?t.data.split(",").map(function(t){return function(t){var e;return"t"===(e=t.toString()[0])||"c"===e?t:parseInt(t,10)}}()):null!=(n=t.data)?n:[],e.observable(i)},update:function(t){var e;return"string"==typeof t.data&&t.data.length>0?t.data.split(",").map(function(t){return function(t){var e;return"t"===(e=t.toString()[0])||"c"===e?t:parseInt(t,10)}}()):null!=(e=t.data)?e:[]}},commentFollowerIds:{create:function(t){var i,n;return i="string"==typeof t.data&&t.data.length>0?t.data.split(",").map(function(t){return function(t){var e;return"t"===(e=t.toString()[0])||"c"===e?t:parseInt(t,10)}}()):null!=(n=t.data)?n:[],e.observableArray(i)},update:function(t){var e;return"string"==typeof t.data&&t.data.length>0?t.data.split(",").map(function(t){return function(t){var e;return"t"===(e=t.toString()[0])||"c"===e?t:parseInt(t,10)}}()):null!=(e=t.data)?e:[]}}},i}.apply(e,r))&&(t.exports=o)}).call(e,i(245))},1153:function(t,e,i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}},s=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};n=[i(164),i(1117)],void 0!==(r=function(t,e){var i,n,r,a,l,c;return c=["messages","files","notebooks","links","projects","default-message","default-file","default-notebook","default-link","default-task-list","default-column"],l=function(t,e){var i;switch(i=e>0?"projects/"+e+"/":"",t){case"messages":return i+"messagecategories.json";case"files":return i+"filecategories.json";case"notebooks":return i+"notebookcategories.json";case"links":return i+"linkcategories.json";case"projects":return"projectcategories.json";case"default-message":return"templates/messages/categories.json";case"default-file":return"templates/files/categories.json";case"default-notebook":return"templates/notebooks/categories.json";case"default-link":return"templates/links/categories.json";case"default-task-list":return"templates/tasklists/categories.json";case"default-column":return"templates/columns/categories.json"}},a=function(t,e){switch(t){case"messages":return"messagecategories/"+e+".json";case"files":return"filecategories/"+e+".json";case"notebooks":return"notebookcategories/"+e+".json";case"links":return"linkcategories/"+e+".json";case"projects":return"projectcategories/"+e+".json";case"default-message":return"templates/messages/categories/"+e+".json";case"default-file":return"templates/files/categories/"+e+".json";case"default-notebook":return"templates/notebooks/categories/"+e+".json";case"default-link":return"templates/links/categories/"+e+".json";case"default-task-list":return"templates/tasklists/categories/"+e+".json";case"default-column":return"templates/columns/categories/"+e+".json"}},n=function(e,i,n){var r,o;return r=e+"-category-"+n+"-closed",i>0&&(r=i+"-"+r),o=t.observable(1===app.cache.get(r)),o.subscribe(function(t){return t?app.cache.set(r,1,10080):app.cache.remove(r)}),o},r=function(t,e){var i,n,o,s;if(null==t)return null;for(n=0,o=t.length;n<o;n++){if(i=t[n],e===i.id)return i;if(null!=(s=r(i.children,e)))return s}return null},i=function(){function i(e,i,n,r){this.loadCategories=o(this.loadCategories,this),this.OnNotifyTWEvent=o(this.OnNotifyTWEvent,this),this.requestUpdate=o(this.requestUpdate,this),this.checkForPendingUpdates=o(this.checkForPendingUpdates,this);var a;console.assert(s.call(c,i)>=0),console.assert("number"==typeof n),console.assert(null===r||"string"==(a=typeof r)||"undefined"===a),this.subscriptions=[],this.pendingRequests=[],this.categories=e,this.type=i,this.projectId=n,this.projectStatus=r,this.categories([]),app.pulse.listen({interval:3e4,key:this.type+"-categories",callback:this.checkForPendingUpdates}),"projects"===i&&null===r||(this.loadCategories(),this.subscriptions.push(t.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent)),this.subscriptions.push(t.postbox.subscribe(this.type+"-categories-updated",this.loadCategories)))}return i.normalizeParams=function(t,e,i){return[t,null!=e?e:0,i]},i.prototype.checkForPendingUpdates=function(){if(this.pendingRequests.length)return this.loadCategories()},i.prototype.requestUpdate=function(t){if(null==t&&(t=!1),this.pendingRequests.push(moment()),t)return this.checkForPendingUpdates()},i.prototype.OnNotifyTWEvent=function(t){var e,i,n,r;if(e=null!=t.userId?t.userId/1:app.loggedInUser.id(),r=app.loggedInUser.id()===e,"droppedCategory"===t.subType&&parseInt(t.projectId,10)===this.projectId)this.requestUpdate(r);else if("category"===t.itemType&&null!=(null!=(i=t.extraInfo)&&null!=(n=i.data)?n.categoryType:void 0))t.extraInfo.data.categoryType===this.type&&this.requestUpdate(r);else switch(this.type){case"messages":"message"===t.itemType&&parseInt(t.projectId,10)===this.projectId&&this.requestUpdate(r);break;case"files":"file"===t.itemType&&parseInt(t.projectId,10)===this.projectId&&this.requestUpdate(r);break;case"notebooks":"notebook"===t.itemType&&parseInt(t.projectId,10)===this.projectId&&this.requestUpdate(r);break;case"links":"link"===t.itemType&&parseInt(t.projectId,10)===this.projectId&&this.requestUpdate(r);break;case"projects":"project"!==t.itemType&&"projects"!==t.itemType||this.requestUpdate(r)}},i.prototype.loadCategories=function(){var e,i,n,r,o,s;switch(e=app.tl("All"),r="",s="",n="",o="",i=l(this.type,this.projectId),this.type){case"messages":e=app.tl("All Messages"),r="X-Total-Messages",s="X-Total-Messages-Uncategorized",n="X-Total-Messages-Archived",i+="?returnArchivedCount=1";break;case"files":e=app.tl("All Files"),r="X-Total-Files",s="X-Total-Files-Uncategorized",o="X-Total-Files-Locked";break;case"notebooks":e=app.tl("All Notebooks"),r="X-Total-Notebooks",s="X-Total-Notebooks-Uncategorized";break;case"links":e=app.tl("All Links"),r="X-Total-Links",s="X-Total-Links-Uncategorized";break;case"projects":e=app.tl("All Projects"),r="X-Total-Projects",s="X-Total-Projects-Uncategorized",null!=this.projectStatus&&(i+="?status="+this.projectStatus)}app.api.get(i).then(function(i){return function(a){var l,c,u,p,d,h,f,m,g;for(l=t.observable(a.xhr.getResponseHeader(r)||0),g=t.observable(a.xhr.getResponseHeader(s)||0),c=t.observable(a.xhr.getResponseHeader(n)||0),m=t.observable(a.xhr.getResponseHeader(o)||0),u=a.response.categories,h=0,f=u.length;h<f;h++)d=u[h],d.id=parseInt(d.id,10),d.parentId=parseInt(d.parentId,10)||0,d.displayOrder=parseInt(d.displayOrder,10)||0,d.color?-1===d.color.indexOf("#")&&(d.color="#"+d.color):d.color="";return p={allLabel:e,allCount:l,archivedCount:c,lockedCount:m,noCategoryCount:g},i.categories(i.formatCategories(u,p))}}(this)).finally(function(t){return function(){return t.pendingRequests=[]}}(this))},i.prototype.formatCategories=function(e,i){var r,o,s,a,l,c,u,p,d,h,f,m,g,y,v,b,w,k,x,T,C;for(l=[],e.sort(function(t,e){return t.parentId-e.parentId}),function(t){var e;if(b)return null!=(null!=(e=t.children)?e.length:void 0)?t.count(t.children.length):t.count(0),t.elementsCount(t.count())},c=function(e){return t.utils.arrayMap(e.children,function(t){return t.elementsCount()}).reduce(function(t,e){return t+e})},u=function(t){var e,i,n,r,o,s,a,l,u,p;for(p=[],n=0,o=t.length;n<o;n++)if(a=t[n],a.hasChildren){for(0,u=a.children,r=0,s=u.length;r<s;r++)e=u[r],i=0,e.hasChildren&&(i=c(e)),e.count(e.elementsCount()+i),a.count(a.count()+i);l=c(a),p.push(a.count(a.count()+l))}else p.push(void 0);return p},b=null==(null!=(w=e[0])?w.count:void 0),h=0,m=e.length;h<m;h++)p=e[h],p.isClosed=n(this.type,this.projectId,p.id),p.count=t.observable(Number(null!=(k=p.count)?k:0)),p.elementsCount=t.observable(Number(null!=(x=p.elementsCount)?x:0)),p.count(p.elementsCount()),p.hasChildren=!1,p.text=p.name,p.name=t.observable(p.name),p.isArchiveLink=!1,p.isLockedLink=!1,p.children=t.utils.arrayFilter(e,function(t){return t.parentId===p.id}),p.hasChildren=p.children.length>0;for(l=t.utils.arrayFilter(e,function(t){return 0===t.parentId}),u(l),r={id:-1,count:i.allCount,children:[],hasChildren:!1,name:i.allLabel,elementsCount:i.allCount,isClosed:t.observable(!1),isArchiveLink:!1,isLockedLink:!1,color:"",specialCategory:!0},a={id:0,count:i.noCategoryCount,children:[],hasChildren:!1,name:app.tl("No Category"),elementsCount:i.noCategoryCount,isClosed:t.observable(!1),isArchiveLink:!1,isLockedLink:!1,color:"",specialCategory:!0},o={id:999999,count:i.archivedCount,children:[],hasChildren:!1,name:app.tl("Archived Messages"),elementsCount:i.archivedCount,isClosed:t.observable(!1),isArchiveLink:!0,isLockedLink:!1,color:"",specialCategory:!0},s={id:888888,count:i.lockedCount,children:[],hasChildren:!1,name:app.tl("Locked Files"),elementsCount:i.lockedCount,isClosed:t.observable(!1),isArchiveLink:!1,isLockedLink:!0,color:"",specialCategory:!0},r.text=r.name,a.text=a.name,o.text=o.name,s.text=s.name,f=0,g=l.length;f<g;f++)if(p=l[f],p.hasChildren)for(p.children.sort(function(t,e){return t.name().localeCompare(e.name())}),T=p.children,v=0,y=T.length;v<y;v++)d=T[v],d.hasChildren&&d.children.sort(function(t,e){return t.name().localeCompare(e.name())});return"default-column"===(C=this.type)||"default-task-list"===C?l.sort(function(t,e){return t.displayOrder-e.displayOrder}):l.sort(function(t,e){return t.name().localeCompare(e.name())}),l.push(a),l.unshift(r),i.archivedCount()>0&&l.push(o),i.lockedCount()>0&&l.push(s),l},i.prototype.dispose=function(){app.pulse.forget({interval:3e4,key:this.type+"-categories",callback:this.checkForPendingUpdates}),this.subscriptions.forEach(function(t){return t.dispose()})},i.noSpecialCategories=function(e){return console.assert(t.isObservable(e)),console.assert(Array.isArray(e())),t.pureComputed(function(){return e().filter(function(t){return!t.specialCategory})})},i.noCategoryFirst=function(e){return console.assert(t.isObservable(e)),console.assert(Array.isArray(e())),t.pureComputed(function(){var t,i;return i=null,t=e().filter(function(t){return 0===t.id&&(i=t),!t.specialCategory}),null!=i&&t.unshift(i),t})},i.getCategory=function(e,i){return r(t.unwrap(e),t.unwrap(i))},i.getComputedCategory=function(e,n){return t.pureComputed(i.getCategory.bind(i,e,n))},i.getCategoryName=function(e,n){var r;return t.unwrap(null!=(r=i.getCategory(e,n))?r.name:void 0)||""},i.getComputedCategoryName=function(e,n){return t.pureComputed(i.getCategoryName.bind(i,e,n))},i.addCategory=function(i){var n,r,o,s,a,c,u;return c=i.type,a=i.projectId,o=i.name,s=i.parentId,n=i.color,u=l(c,a),r={category:{name:o,"parent-id":s,color:n}},app.api.post(u,r,{emitError:!1}).then(function(e){return function(e){var i;return i="default-task-list"===c?app.tl("Task List Added"):"default-column"===c?app.tl("Column Added"):app.tl("Category Added"),app.flash.Success(i),t.postbox.publish(c+"-categories-updated"),e}}()).catch(function(t){return function(t){return 409===(null!=t?t.status:void 0)?app.flash.Error("default-task-list"===c?app.tl("This task list already exists!"):"default-column"===c?app.tl("This column already exists"):app.tl("This category already exists!")):app.flash.Error(app.tl("Oh no!"),app.tl("Something went wrong, please try again")),e.reject(t)}}())},i.updateCategory=function(e){var i,n,r,o,s,l,c;return r=e.id,l=e.type,o=e.name,s=e.parentId,i=e.color,c=a(l,r),n={category:{name:o,"parent-id":s,color:i}},app.api.put(c,n).then(function(e){var i;return i="default-task-list"===l?app.tl("Task List Updated"):"default-column"===l?app.tl("Column Updated"):app.tl("Category Updated"),app.flash.Success(i),t.postbox.publish(l+"-categories-updated"),e})},i.addOrUpdateCategory=function(t){return t.id>0?i.updateCategory(t):i.addCategory(t)},i.deleteCategory=function(e){var i,n,r;return i=e.id,n=e.type,r=a(n,i),app.api.delete(r).then(function(e){var i;return i="default-task-list"===n?app.tl("Task List Deleted"):"default-column"===n?app.tl("Column Deleted"):app.tl("Category Deleted"),app.flash.Success(i),t.postbox.publish(n+"-categories-updated",{}),e})},i.repositionCategory=function(e){var i,n,r,o,s;return s=e.type,r=e.id,o=e.positionAfterId,n={positionAfterId:o},i="","default-task-list"===s?i="tasklists":"default-column"===s&&(i="columns"),app.api.put("templates/"+i+"/categories/"+r+"/reposition.json",n).then(function(e){return function(e){return t.postbox.publish(s+"-categories-updated",{})}}())},i.getCategories=app.shared.getResource.bind(app.shared,"categories"),i}(),app.shared.registerResourceProvider("categories",i),i}.apply(e,n))&&(t.exports=r)},1156:function(t,e){!function(e,i){"object"==typeof t&&t.exports?t.exports=e.document?i(e):i:e.Highcharts=i(e)}("undefined"!=typeof window?window:this,function(t){var e=function(){var e=void 0===t?window:t,i=e.document,n=e.navigator&&e.navigator.userAgent||"",r=i&&i.createElementNS&&!!i.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,o=/(edge|msie|trident)/i.test(n)&&!e.opera,s=-1!==n.indexOf("Firefox"),a=-1!==n.indexOf("Chrome"),l=s&&4>parseInt(n.split("Firefox/")[1],10);return e.Highcharts?e.Highcharts.error(16,!0):{product:"Highcharts",version:"6.1.0",deg2rad:2*Math.PI/360,doc:i,hasBidiBug:l,hasTouch:i&&void 0!==i.documentElement.ontouchstart,isMS:o,isWebKit:-1!==n.indexOf("AppleWebKit"),isFirefox:s,isChrome:a,isSafari:!a&&-1!==n.indexOf("Safari"),isTouchDevice:/(Mobile|Android|Windows Phone)/.test(n),SVG_NS:"http://www.w3.org/2000/svg",chartCount:0,seriesTypes:{},symbolSizes:{},svg:r,win:e,marginNames:["plotTop","marginRight","marginBottom","plotLeft"],noop:function(){},charts:[]}}();!function(t){t.timers=[];var e=t.charts,i=t.doc,n=t.win;t.error=function(e,i){if(e=t.isNumber(e)?"Highcharts error #"+e+": www.highcharts.com/errors/"+e:e,i)throw Error(e);n.console&&console.log(e)},t.Fx=function(t,e,i){this.options=e,this.elem=t,this.prop=i},t.Fx.prototype={dSetter:function(){var t,e=this.paths[0],i=this.paths[1],n=[],r=this.now,o=e.length;if(1===r)n=this.toD;else if(o===i.length&&1>r)for(;o--;)t=parseFloat(e[o]),n[o]=isNaN(t)?i[o]:r*parseFloat(i[o]-t)+t;else n=i;this.elem.attr("d",n,null,!0)},update:function(){var t=this.elem,e=this.prop,i=this.now,n=this.options.step;this[e+"Setter"]?this[e+"Setter"]():t.attr?t.element&&t.attr(e,i,null,!0):t.style[e]=i+this.unit,n&&n.call(t,i,this)},run:function(e,i,r){var o=this,s=o.options,a=function(t){return!a.stopped&&o.step(t)},l=n.requestAnimationFrame||function(t){setTimeout(t,13)},c=function(){for(var e=0;e<t.timers.length;e++)t.timers[e]()||t.timers.splice(e--,1);t.timers.length&&l(c)};e!==i||this.elem["forceAnimate:"+this.prop]?(this.startTime=+new Date,this.start=e,this.end=i,this.unit=r,this.now=this.start,this.pos=0,a.elem=this.elem,a.prop=this.prop,a()&&1===t.timers.push(a)&&l(c)):(delete s.curAnim[this.prop],s.complete&&0===t.keys(s.curAnim).length&&s.complete.call(this.elem))},step:function(e){var i,n=+new Date,r=this.options,o=this.elem,s=r.complete,a=r.duration,l=r.curAnim;return o.attr&&!o.element?e=!1:e||n>=a+this.startTime?(this.now=this.end,this.pos=1,this.update(),i=l[this.prop]=!0,t.objectEach(l,function(t){!0!==t&&(i=!1)}),i&&s&&s.call(o),e=!1):(this.pos=r.easing((n-this.startTime)/a),this.now=this.start+(this.end-this.start)*this.pos,this.update(),e=!0),e},initPath:function(e,i,n){function r(t){var e,i;for(u=t.length;u--;)e="M"===t[u]||"L"===t[u],i=/[a-zA-Z]/.test(t[u+3]),e&&i&&t.splice(u+1,0,t[u+1],t[u+2],t[u+1],t[u+2])}function o(t,e){for(;t.length<l;){t[0]=e[l-t.length];var i=t.slice(0,f);[].splice.apply(t,[0,0].concat(i)),g&&(i=t.slice(t.length-f),[].splice.apply(t,[t.length,0].concat(i)),u--)}t[0]="M"}function s(t,e){for(var i=(l-t.length)/f;0<i&&i--;)c=t.slice().splice(t.length/y-f,f*y),c[0]=e[l-f-i*f],h&&(c[f-6]=c[f-2],c[f-5]=c[f-1]),[].splice.apply(t,[t.length/y,0].concat(c)),g&&i--}i=i||"";var a,l,c,u,p=e.startX,d=e.endX,h=-1<i.indexOf("C"),f=h?7:3;i=i.split(" "),n=n.slice();var m,g=e.isArea,y=g?2:1;if(h&&(r(i),r(n)),p&&d){for(u=0;u<p.length;u++){if(p[u]===d[0]){a=u;break}if(p[0]===d[d.length-p.length+u]){a=u,m=!0;break}}void 0===a&&(i=[])}return i.length&&t.isNumber(a)&&(l=n.length+a*y*f,m?(o(i,n),s(n,i)):(o(n,i),s(i,n))),[i,n]}},t.Fx.prototype.fillSetter=t.Fx.prototype.strokeSetter=function(){this.elem.attr(this.prop,t.color(this.start).tweenTo(t.color(this.end),this.pos),null,!0)},t.merge=function(){var e,i,n=arguments,r={},o=function(e,i){return"object"!=typeof e&&(e={}),t.objectEach(i,function(n,r){!t.isObject(n,!0)||t.isClass(n)||t.isDOMElement(n)?e[r]=i[r]:e[r]=o(e[r]||{},n)}),e};for(!0===n[0]&&(r=n[1],n=Array.prototype.slice.call(n,2)),i=n.length,e=0;e<i;e++)r=o(r,n[e]);return r},t.pInt=function(t,e){return parseInt(t,e||10)},t.isString=function(t){return"string"==typeof t},t.isArray=function(t){return"[object Array]"===(t=Object.prototype.toString.call(t))||"[object Array Iterator]"===t},t.isObject=function(e,i){return!(!e||"object"!=typeof e||i&&t.isArray(e))},t.isDOMElement=function(e){return t.isObject(e)&&"number"==typeof e.nodeType},t.isClass=function(e){var i=e&&e.constructor;return!(!t.isObject(e,!0)||t.isDOMElement(e)||!i||!i.name||"Object"===i.name)},t.isNumber=function(t){return"number"==typeof t&&!isNaN(t)&&1/0>t&&-1/0<t},t.erase=function(t,e){for(var i=t.length;i--;)if(t[i]===e){t.splice(i,1);break}},t.defined=function(t){return void 0!==t&&null!==t},t.attr=function(e,i,n){var r;return t.isString(i)?t.defined(n)?e.setAttribute(i,n):e&&e.getAttribute&&((r=e.getAttribute(i))||"class"!==i||(r=e.getAttribute(i+"Name"))):t.defined(i)&&t.isObject(i)&&t.objectEach(i,function(t,i){e.setAttribute(i,t)}),r},t.splat=function(e){return t.isArray(e)?e:[e]},t.syncTimeout=function(t,e,i){if(e)return setTimeout(t,e,i);t.call(0,i)},t.clearTimeout=function(e){t.defined(e)&&clearTimeout(e)},t.extend=function(t,e){var i;t||(t={});for(i in e)t[i]=e[i];return t},t.pick=function(){var t,e,i=arguments,n=i.length;for(t=0;t<n;t++)if(void 0!==(e=i[t])&&null!==e)return e},t.css=function(e,i){t.isMS&&!t.svg&&i&&void 0!==i.opacity&&(i.filter="alpha(opacity="+100*i.opacity+")"),t.extend(e.style,i)},t.createElement=function(e,n,r,o,s){e=i.createElement(e);var a=t.css;return n&&t.extend(e,n),s&&a(e,{padding:0,border:"none",margin:0}),r&&a(e,r),o&&o.appendChild(e),e},t.extendClass=function(e,i){var n=function(){};return n.prototype=new e,t.extend(n.prototype,i),n},t.pad=function(t,e,i){return Array((e||2)+1-String(t).replace("-","").length).join(i||0)+t},t.relativeLength=function(t,e,i){return/%$/.test(t)?e*parseFloat(t)/100+(i||0):parseFloat(t)},t.wrap=function(t,e,i){var n=t[e];t[e]=function(){var t=Array.prototype.slice.call(arguments),e=arguments,r=this;return r.proceed=function(){n.apply(r,arguments.length?arguments:e)},t.unshift(n),t=i.apply(this,t),r.proceed=null,t}},t.formatSingle=function(e,i,n){var r=/\.([0-9])/,o=t.defaultOptions.lang;return/f$/.test(e)?(n=(n=e.match(r))?n[1]:-1,null!==i&&(i=t.numberFormat(i,n,o.decimalPoint,-1<e.indexOf(",")?o.thousandsSep:""))):i=(n||t.time).dateFormat(e,i),i},t.format=function(e,i,n){for(var r,o,s,a,l,c="{",u=!1,p=[];e&&-1!==(c=e.indexOf(c));){if(r=e.slice(0,c),u){for(r=r.split(":"),o=r.shift().split("."),a=o.length,l=i,s=0;s<a;s++)l&&(l=l[o[s]]);r.length&&(l=t.formatSingle(r.join(":"),l,n)),p.push(l)}else p.push(r);e=e.slice(c+1),c=(u=!u)?"}":"{"}return p.push(e),p.join("")},t.getMagnitude=function(t){return Math.pow(10,Math.floor(Math.log(t)/Math.LN10))},t.normalizeTickInterval=function(e,i,n,r,o){var s,a=e;for(n=t.pick(n,1),s=e/n,i||(i=o?[1,1.2,1.5,2,2.5,3,4,5,6,8,10]:[1,2,2.5,5,10],!1===r&&(1===n?i=t.grep(i,function(t){return 0==t%1}):.1>=n&&(i=[1/n]))),r=0;r<i.length&&(a=i[r],!(o&&a*n>=e||!o&&s<=(i[r]+(i[r+1]||i[r]))/2));r++);return a=t.correctFloat(a*n,-Math.round(Math.log(.001)/Math.LN10))},t.stableSort=function(t,e){var i,n,r=t.length;for(n=0;n<r;n++)t[n].safeI=n;for(t.sort(function(t,n){return i=e(t,n),0===i?t.safeI-n.safeI:i}),n=0;n<r;n++)delete t[n].safeI},t.arrayMin=function(t){for(var e=t.length,i=t[0];e--;)t[e]<i&&(i=t[e]);return i},t.arrayMax=function(t){for(var e=t.length,i=t[0];e--;)t[e]>i&&(i=t[e]);return i},t.destroyObjectProperties=function(e,i){t.objectEach(e,function(t,n){t&&t!==i&&t.destroy&&t.destroy(),delete e[n]})},t.discardElement=function(e){var i=t.garbageBin;i||(i=t.createElement("div")),e&&i.appendChild(e),i.innerHTML=""},t.correctFloat=function(t,e){return parseFloat(t.toPrecision(e||14))},t.setAnimation=function(e,i){i.renderer.globalAnimation=t.pick(e,i.options.chart.animation,!0)},t.animObject=function(e){return t.isObject(e)?t.merge(e):{duration:e?500:0}},t.timeUnits={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},t.numberFormat=function(e,i,n,r){e=+e||0,i=+i;var o,s,a=t.defaultOptions.lang,l=(e.toString().split(".")[1]||"").split("e")[0].length,c=e.toString().split("e");return-1===i?i=Math.min(l,20):t.isNumber(i)?i&&c[1]&&0>c[1]&&(o=i+ +c[1],0<=o?(c[0]=(+c[0]).toExponential(o).split("e")[0],i=o):(c[0]=c[0].split(".")[0]||0,e=20>i?(c[0]*Math.pow(10,c[1])).toFixed(i):0,c[1]=0)):i=2,s=(Math.abs(c[1]?c[0]:e)+Math.pow(10,-Math.max(i,l)-1)).toFixed(i),l=String(t.pInt(s)),o=3<l.length?l.length%3:0,n=t.pick(n,a.decimalPoint),r=t.pick(r,a.thousandsSep),e=(0>e?"-":"")+(o?l.substr(0,o)+r:""),e+=l.substr(o).replace(/(\d{3})(?=\d)/g,"$1"+r),i&&(e+=n+s.slice(-i)),c[1]&&0!=+e&&(e+="e"+c[1]),e},Math.easeInOutSine=function(t){return-.5*(Math.cos(Math.PI*t)-1)},t.getStyle=function(e,i,r){return"width"===i?Math.min(e.offsetWidth,e.scrollWidth)-t.getStyle(e,"padding-left")-t.getStyle(e,"padding-right"):"height"===i?Math.min(e.offsetHeight,e.scrollHeight)-t.getStyle(e,"padding-top")-t.getStyle(e,"padding-bottom"):(n.getComputedStyle||t.error(27,!0),(e=n.getComputedStyle(e,void 0))&&(e=e.getPropertyValue(i),t.pick(r,"opacity"!==i)&&(e=t.pInt(e))),e)},t.inArray=function(e,i,n){return(t.indexOfPolyfill||Array.prototype.indexOf).call(i,e,n)},t.grep=function(e,i){return(t.filterPolyfill||Array.prototype.filter).call(e,i)},t.find=Array.prototype.find?function(t,e){return t.find(e)}:function(t,e){var i,n=t.length;for(i=0;i<n;i++)if(e(t[i],i))return t[i]},t.some=function(e,i,n){return(t.somePolyfill||Array.prototype.some).call(e,i,n)},t.map=function(t,e){for(var i=[],n=0,r=t.length;n<r;n++)i[n]=e.call(t[n],t[n],n,t);return i},t.keys=function(e){return(t.keysPolyfill||Object.keys).call(void 0,e)},t.reduce=function(e,i,n){return(t.reducePolyfill||Array.prototype.reduce).call(e,i,n)},t.offset=function(t){var e=i.documentElement;return t=t.parentElement?t.getBoundingClientRect():{top:0,left:0},{top:t.top+(n.pageYOffset||e.scrollTop)-(e.clientTop||0),left:t.left+(n.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}},t.stop=function(e,i){for(var n=t.timers.length;n--;)t.timers[n].elem!==e||i&&i!==t.timers[n].prop||(t.timers[n].stopped=!0)},t.each=function(e,i,n){return(t.forEachPolyfill||Array.prototype.forEach).call(e,i,n)},t.objectEach=function(t,e,i){for(var n in t)t.hasOwnProperty(n)&&e.call(i||t[n],t[n],n,t)},t.addEvent=function(e,i,n){var r,o=e.addEventListener||t.addEventListenerPolyfill;return r="function"==typeof e&&e.prototype?e.prototype.protoEvents=e.prototype.protoEvents||{}:e.hcEvents=e.hcEvents||{},o&&o.call(e,i,n,!1),r[i]||(r[i]=[]),r[i].push(n),function(){t.removeEvent(e,i,n)}},t.removeEvent=function(e,i,n){function r(i,n){var r=e.removeEventListener||t.removeEventListenerPolyfill;r&&r.call(e,i,n,!1)}function o(n){var o,s;e.nodeName&&(i?(o={},o[i]=!0):o=n,t.objectEach(o,function(t,e){if(n[e])for(s=n[e].length;s--;)r(e,n[e][s])}))}var s,a;t.each(["protoEvents","hcEvents"],function(l){var c=e[l];c&&(i?(s=c[i]||[],n?(a=t.inArray(n,s),-1<a&&(s.splice(a,1),c[i]=s),r(i,n)):(o(c),c[i]=[])):(o(c),e[l]={}))})},t.fireEvent=function(e,n,r,o){var s,a,l,c,u;r=r||{},i.createEvent&&(e.dispatchEvent||e.fireEvent)?(s=i.createEvent("Events"),s.initEvent(n,!0,!0),t.extend(s,r),e.dispatchEvent?e.dispatchEvent(s):e.fireEvent(n,s)):t.each(["protoEvents","hcEvents"],function(i){if(e[i])for(a=e[i][n]||[],l=a.length,r.target||t.extend(r,{preventDefault:function(){r.defaultPrevented=!0},target:e,type:n}),c=0;c<l;c++)(u=a[c])&&!1===u.call(e,r)&&r.preventDefault()}),o&&!r.defaultPrevented&&o.call(e,r)},t.animate=function(e,i,n){var r,o,s,a,l="";t.isObject(n)||(a=arguments,n={duration:a[2],easing:a[3],complete:a[4]}),t.isNumber(n.duration)||(n.duration=400),n.easing="function"==typeof n.easing?n.easing:Math[n.easing]||Math.easeInOutSine,n.curAnim=t.merge(i),t.objectEach(i,function(a,c){t.stop(e,c),s=new t.Fx(e,n,c),o=null,"d"===c?(s.paths=s.initPath(e,e.d,i.d),s.toD=i.d,r=0,o=1):e.attr?r=e.attr(c):(r=parseFloat(t.getStyle(e,c))||0,"opacity"!==c&&(l="px")),o||(o=a),o&&o.match&&o.match("px")&&(o=o.replace(/px/g,"")),s.run(r,o,l)})},t.seriesType=function(e,i,n,r,o){var s=t.getOptions(),a=t.seriesTypes;return s.plotOptions[e]=t.merge(s.plotOptions[i],n),a[e]=t.extendClass(a[i]||function(){},r),a[e].prototype.type=e,o&&(a[e].prototype.pointClass=t.extendClass(t.Point,o)),a[e]},t.uniqueKey=function(){var t=Math.random().toString(36).substring(2,9),e=0;return function(){return"highcharts-"+t+"-"+e++}}(),n.jQuery&&(n.jQuery.fn.highcharts=function(){var i=[].slice.call(arguments);if(this[0])return i[0]?(new(t[t.isString(i[0])?i.shift():"Chart"])(this[0],i[0],i[1]),this):e[t.attr(this[0],"data-highcharts-chart")]})}(e),function(t){var e=t.each,i=t.isNumber,n=t.map,r=t.merge,o=t.pInt;t.Color=function(e){if(!(this instanceof t.Color))return new t.Color(e);this.init(e)},t.Color.prototype={parsers:[{regex:/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,parse:function(t){return[o(t[1]),o(t[2]),o(t[3]),parseFloat(t[4],10)]}},{regex:/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,parse:function(t){return[o(t[1]),o(t[2]),o(t[3]),1]}}],names:{none:"rgba(255,255,255,0)",white:"#ffffff",black:"#000000"},init:function(e){var i,r,o,s;if((this.input=e=this.names[e&&e.toLowerCase?e.toLowerCase():""]||e)&&e.stops)this.stops=n(e.stops,function(e){return new t.Color(e[1])});else if(e&&e.charAt&&"#"===e.charAt()&&(i=e.length,e=parseInt(e.substr(1),16),7===i?r=[(16711680&e)>>16,(65280&e)>>8,255&e,1]:4===i&&(r=[(3840&e)>>4|(3840&e)>>8,(240&e)>>4|240&e,(15&e)<<4|15&e,1])),!r)for(o=this.parsers.length;o--&&!r;)s=this.parsers[o],(i=s.regex.exec(e))&&(r=s.parse(i));this.rgba=r||[]},get:function(t){var n,o=this.input,s=this.rgba;return this.stops?(n=r(o),n.stops=[].concat(n.stops),e(this.stops,function(e,i){n.stops[i]=[n.stops[i][0],e.get(t)]})):n=s&&i(s[0])?"rgb"===t||!t&&1===s[3]?"rgb("+s[0]+","+s[1]+","+s[2]+")":"a"===t?s[3]:"rgba("+s.join(",")+")":o,n},brighten:function(t){var n,r=this.rgba;if(this.stops)e(this.stops,function(e){e.brighten(t)});else if(i(t)&&0!==t)for(n=0;3>n;n++)r[n]+=o(255*t),0>r[n]&&(r[n]=0),255<r[n]&&(r[n]=255);return this},setOpacity:function(t){return this.rgba[3]=t,this},tweenTo:function(t,e){var i=this.rgba,n=t.rgba;return n.length&&i&&i.length?(t=1!==n[3]||1!==i[3],e=(t?"rgba(":"rgb(")+Math.round(n[0]+(i[0]-n[0])*(1-e))+","+Math.round(n[1]+(i[1]-n[1])*(1-e))+","+Math.round(n[2]+(i[2]-n[2])*(1-e))+(t?","+(n[3]+(i[3]-n[3])*(1-e)):"")+")"):e=t.input||"none",e}},t.color=function(e){return new t.Color(e)}}(e),function(t){var e,i,n=t.addEvent,r=t.animate,o=t.attr,s=t.charts,a=t.color,l=t.css,c=t.createElement,u=t.defined,p=t.deg2rad,d=t.destroyObjectProperties,h=t.doc,f=t.each,m=t.extend,g=t.erase,y=t.grep,v=t.hasTouch,b=t.inArray,w=t.isArray,k=t.isFirefox,x=t.isMS,T=t.isObject,C=t.isString,I=t.isWebKit,_=t.merge,S=t.noop,A=t.objectEach,O=t.pick,P=t.pInt,E=t.removeEvent,M=t.stop,L=t.svg,D=t.SVG_NS,j=t.symbolSizes,N=t.win;e=t.SVGElement=function(){return this},m(e.prototype,{opacity:1,SVG_NS:D,textProps:"direction fontSize fontWeight fontFamily fontStyle color lineHeight width textAlign textDecoration textOverflow textOutline".split(" "),init:function(t,e){this.element="span"===e?c(e):h.createElementNS(this.SVG_NS,e),this.renderer=t},animate:function(e,i,n){return i=t.animObject(O(i,this.renderer.globalAnimation,!0)),0!==i.duration?(n&&(i.complete=n),r(this,e,i)):(this.attr(e,null,n),i.step&&i.step.call(this)),this},complexColor:function(e,i,n){var r,o,s,a,l,c,p,d,h,m,g,y,v=this.renderer,b=[];t.fireEvent(this.renderer,"complexColor",{args:arguments},function(){e.radialGradient?o="radialGradient":e.linearGradient&&(o="linearGradient"),o&&(s=e[o],l=v.gradients,p=e.stops,m=n.radialReference,w(s)&&(e[o]=s={x1:s[0],y1:s[1],x2:s[2],y2:s[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===o&&m&&!u(s.gradientUnits)&&(a=s,s=_(s,v.getRadialAttr(m,a),{gradientUnits:"userSpaceOnUse"})),A(s,function(t,e){"id"!==e&&b.push(e,t)}),A(p,function(t){b.push(t)}),b=b.join(","),l[b]?g=l[b].attr("id"):(s.id=g=t.uniqueKey(),l[b]=c=v.createElement(o).attr(s).add(v.defs),c.radAttr=a,c.stops=[],f(p,function(e){0===e[1].indexOf("rgba")?(r=t.color(e[1]),d=r.get("rgb"),h=r.get("a")):(d=e[1],h=1),e=v.createElement("stop").attr({offset:e[0],"stop-color":d,"stop-opacity":h}).add(c),c.stops.push(e)})),y="url("+v.url+"#"+g+")",n.setAttribute(i,y),n.gradient=b,e.toString=function(){return y})})},applyTextOutline:function(e){var i,n,r,s,a,l=this.element;if(-1!==e.indexOf("contrast")&&(e=e.replace(/contrast/g,this.renderer.getContrast(l.style.fill))),e=e.split(" "),n=e[e.length-1],(r=e[0])&&"none"!==r&&t.svg){for(this.fakeTS=!0,e=[].slice.call(l.getElementsByTagName("tspan")),this.ySetter=this.xSetter,r=r.replace(/(^[\d\.]+)(.*?)$/g,function(t,e,i){return 2*e+i}),a=e.length;a--;)i=e[a],"highcharts-text-outline"===i.getAttribute("class")&&g(e,l.removeChild(i));s=l.firstChild,f(e,function(t,e){0===e&&(t.setAttribute("x",l.getAttribute("x")),e=l.getAttribute("y"),t.setAttribute("y",e||0),null===e&&l.setAttribute("y",0)),t=t.cloneNode(1),o(t,{class:"highcharts-text-outline",fill:n,stroke:n,"stroke-width":r,"stroke-linejoin":"round"}),l.insertBefore(t,s)})}},attr:function(t,e,i,n){var r,o,s,a,l=this.element,c=this;return"string"==typeof t&&void 0!==e&&(r=t,t={},t[r]=e),"string"==typeof t?c=(this[t+"Getter"]||this._defaultGetter).call(this,t,l):(A(t,function(e,i){s=!1,n||M(this,i),this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)$/.test(i)&&(o||(this.symbolAttr(t),o=!0),s=!0),!this.rotation||"x"!==i&&"y"!==i||(this.doTransform=!0),s||(a=this[i+"Setter"]||this._defaultSetter,a.call(this,e,i,l),this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(i)&&this.updateShadows(i,e,a))},this),this.afterSetters()),i&&i.call(this),c},afterSetters:function(){this.doTransform&&(this.updateTransform(),this.doTransform=!1)},updateShadows:function(t,e,i){for(var n=this.shadows,r=n.length;r--;)i.call(n[r],"height"===t?Math.max(e-(n[r].cutHeight||0),0):"d"===t?this.d:e,t,n[r])},addClass:function(t,e){var i=this.attr("class")||"";return-1===i.indexOf(t)&&(e||(t=(i+(i?" ":"")+t).replace("  "," ")),this.attr("class",t)),this},hasClass:function(t){return-1!==b(t,(this.attr("class")||"").split(" "))},removeClass:function(t){return this.attr("class",(this.attr("class")||"").replace(t,""))},symbolAttr:function(t){var e=this;f("x y r start end width height innerR anchorX anchorY".split(" "),function(i){e[i]=O(t[i],e[i])}),e.attr({d:e.renderer.symbols[e.symbolName](e.x,e.y,e.width,e.height,e)})},clip:function(t){return this.attr("clip-path",t?"url("+this.renderer.url+"#"+t.id+")":"none")},crisp:function(t,e){var i;return e=e||t.strokeWidth||0,i=Math.round(e)%2/2,t.x=Math.floor(t.x||this.x||0)+i,t.y=Math.floor(t.y||this.y||0)+i,t.width=Math.floor((t.width||this.width||0)-2*i),t.height=Math.floor((t.height||this.height||0)-2*i),u(t.strokeWidth)&&(t.strokeWidth=e),t},css:function(t){var e,i,n=this.styles,r={},s=this.element,a="",c=!n,u=["textOutline","textOverflow","width"];return t&&t.color&&(t.fill=t.color),n&&A(t,function(t,e){t!==n[e]&&(r[e]=t,c=!0)}),c&&(n&&(t=m(n,r)),e=this.textWidth=t&&t.width&&"auto"!==t.width&&"text"===s.nodeName.toLowerCase()&&P(t.width),this.styles=t,e&&!L&&this.renderer.forExport&&delete t.width,s.namespaceURI===this.SVG_NS?(i=function(t,e){return"-"+e.toLowerCase()},A(t,function(t,e){-1===b(e,u)&&(a+=e.replace(/([A-Z])/g,i)+":"+t+";")}),a&&o(s,"style",a)):l(s,t),this.added&&("text"===this.element.nodeName&&this.renderer.buildText(this),t&&t.textOutline&&this.applyTextOutline(t.textOutline))),this},strokeWidth:function(){return this["stroke-width"]||0},on:function(t,e){var i=this,n=i.element;return v&&"click"===t?(n.ontouchstart=function(t){i.touchEventFired=Date.now(),t.preventDefault(),e.call(n,t)},n.onclick=function(t){(-1===N.navigator.userAgent.indexOf("Android")||1100<Date.now()-(i.touchEventFired||0))&&e.call(n,t)}):n["on"+t]=e,this},setRadialReference:function(t){var e=this.renderer.gradients[this.element.gradient];return this.element.radialReference=t,e&&e.radAttr&&e.animate(this.renderer.getRadialAttr(t,e.radAttr)),this},translate:function(t,e){return this.attr({translateX:t,translateY:e})},invert:function(t){return this.inverted=t,this.updateTransform(),this},updateTransform:function(){var t=this.translateX||0,e=this.translateY||0,i=this.scaleX,n=this.scaleY,r=this.inverted,o=this.rotation,s=this.matrix,a=this.element;r&&(t+=this.width,e+=this.height),t=["translate("+t+","+e+")"],u(s)&&t.push("matrix("+s.join(",")+")"),r?t.push("rotate(90) scale(-1,1)"):o&&t.push("rotate("+o+" "+O(this.rotationOriginX,a.getAttribute("x"),0)+" "+O(this.rotationOriginY,a.getAttribute("y")||0)+")"),(u(i)||u(n))&&t.push("scale("+O(i,1)+" "+O(n,1)+")"),t.length&&a.setAttribute("transform",t.join(" "))},toFront:function(){var t=this.element;return t.parentNode.appendChild(t),this},align:function(t,e,i){var n,r,o,s,a={};r=this.renderer,o=r.alignedObjects;var l,c;return t?(this.alignOptions=t,this.alignByTranslate=e,(!i||C(i))&&(this.alignTo=n=i||"renderer",g(o,this),o.push(this),i=null)):(t=this.alignOptions,e=this.alignByTranslate,n=this.alignTo),i=O(i,r[n],r),n=t.align,r=t.verticalAlign,o=(i.x||0)+(t.x||0),s=(i.y||0)+(t.y||0),"right"===n?l=1:"center"===n&&(l=2),l&&(o+=(i.width-(t.width||0))/l),a[e?"translateX":"x"]=Math.round(o),"bottom"===r?c=1:"middle"===r&&(c=2),c&&(s+=(i.height-(t.height||0))/c),a[e?"translateY":"y"]=Math.round(s),this[this.placed?"animate":"attr"](a),this.placed=!0,this.alignAttr=a,this},getBBox:function(t,e){var i,n,r,o,s,a=this.renderer,l=this.element,c=this.styles,d=this.textStr,h=a.cache,g=a.cacheKeys;if(e=O(e,this.rotation),n=e*p,r=c&&c.fontSize,u(d)&&(s=d.toString(),-1===s.indexOf("<")&&(s=s.replace(/[0-9]/g,"0")),s+=["",e||0,r,this.textWidth,c&&c.textOverflow].join()),s&&!t&&(i=h[s]),!i){if(l.namespaceURI===this.SVG_NS||a.forExport){try{(o=this.fakeTS&&function(t){f(l.querySelectorAll(".highcharts-text-outline"),function(e){e.style.display=t})})&&o("none"),i=l.getBBox?m({},l.getBBox()):{width:l.offsetWidth,height:l.offsetHeight},o&&o("")}catch(t){}(!i||0>i.width)&&(i={width:0,height:0})}else i=this.htmlGetBBox();if(a.isSVG&&(t=i.width,a=i.height,c&&"11px"===c.fontSize&&17===Math.round(a)&&(i.height=a=14),e&&(i.width=Math.abs(a*Math.sin(n))+Math.abs(t*Math.cos(n)),i.height=Math.abs(a*Math.cos(n))+Math.abs(t*Math.sin(n)))),s&&0<i.height){for(;250<g.length;)delete h[g.shift()];h[s]||g.push(s),h[s]=i}}return i},show:function(t){return this.attr({visibility:t?"inherit":"visible"})},hide:function(){return this.attr({visibility:"hidden"})},fadeOut:function(t){var e=this;e.animate({opacity:0},{duration:t||150,complete:function(){e.attr({y:-9999})}})},add:function(t){var e,i=this.renderer,n=this.element;return t&&(this.parentGroup=t),this.parentInverted=t&&t.inverted,void 0!==this.textStr&&i.buildText(this),this.added=!0,(!t||t.handleZ||this.zIndex)&&(e=this.zIndexSetter()),e||(t?t.element:i.box).appendChild(n),this.onAdd&&this.onAdd(),this},safeRemoveChild:function(t){var e=t.parentNode;e&&e.removeChild(t)},destroy:function(){var t=this,e=t.element||{},i=t.renderer.isSVG&&"SPAN"===e.nodeName&&t.parentGroup,n=e.ownerSVGElement,r=t.clipPath;if(e.onclick=e.onmouseout=e.onmouseover=e.onmousemove=e.point=null,M(t),r&&n&&(f(n.querySelectorAll("[clip-path],[CLIP-PATH]"),function(t){var e=t.getAttribute("clip-path"),i=r.element.id;(-1<e.indexOf("(#"+i+")")||-1<e.indexOf('("#'+i+'")'))&&t.removeAttribute("clip-path")}),t.clipPath=r.destroy()),t.stops){for(n=0;n<t.stops.length;n++)t.stops[n]=t.stops[n].destroy();t.stops=null}for(t.safeRemoveChild(e),t.destroyShadows();i&&i.div&&0===i.div.childNodes.length;)e=i.parentGroup,t.safeRemoveChild(i.div),delete i.div,i=e;return t.alignTo&&g(t.renderer.alignedObjects,t),A(t,function(e,i){delete t[i]}),null},shadow:function(t,e,i){var n,r,s,a,l,c,u=[],p=this.element;if(t){if(!this.shadows){for(a=O(t.width,3),l=(t.opacity||.15)/a,c=this.parentInverted?"(-1,-1)":"("+O(t.offsetX,1)+", "+O(t.offsetY,1)+")",n=1;n<=a;n++)r=p.cloneNode(0),s=2*a+1-2*n,o(r,{isShadow:"true",stroke:t.color||"#000000","stroke-opacity":l*n,"stroke-width":s,transform:"translate"+c,fill:"none"}),i&&(o(r,"height",Math.max(o(r,"height")-s,0)),r.cutHeight=s),e?e.element.appendChild(r):p.parentNode&&p.parentNode.insertBefore(r,p),u.push(r);this.shadows=u}}else this.destroyShadows();return this},destroyShadows:function(){f(this.shadows||[],function(t){this.safeRemoveChild(t)},this),this.shadows=void 0},xGetter:function(t){return"circle"===this.element.nodeName&&("x"===t?t="cx":"y"===t&&(t="cy")),this._defaultGetter(t)},_defaultGetter:function(t){return t=O(this[t+"Value"],this[t],this.element?this.element.getAttribute(t):null,0),/^[\-0-9\.]+$/.test(t)&&(t=parseFloat(t)),t},dSetter:function(t,e,i){t&&t.join&&(t=t.join(" ")),/(NaN| {2}|^$)/.test(t)&&(t="M 0 0"),this[e]!==t&&(i.setAttribute(e,t),this[e]=t)},dashstyleSetter:function(t){var e,i=this["stroke-width"];if("inherit"===i&&(i=1),t=t&&t.toLowerCase()){for(t=t.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(","),e=t.length;e--;)t[e]=P(t[e])*i;t=t.join(",").replace(/NaN/g,"none"),this.element.setAttribute("stroke-dasharray",t)}},alignSetter:function(t){this.alignValue=t,this.element.setAttribute("text-anchor",{left:"start",center:"middle",right:"end"}[t])},opacitySetter:function(t,e,i){this[e]=t,i.setAttribute(e,t)},titleSetter:function(t){var e=this.element.getElementsByTagName("title")[0];e||(e=h.createElementNS(this.SVG_NS,"title"),this.element.appendChild(e)),e.firstChild&&e.removeChild(e.firstChild),e.appendChild(h.createTextNode(String(O(t),"").replace(/<[^>]*>/g,"").replace(/&lt;/g,"<").replace(/&gt;/g,">")))},textSetter:function(t){t!==this.textStr&&(delete this.bBox,this.textStr=t,this.added&&this.renderer.buildText(this))},fillSetter:function(t,e,i){"string"==typeof t?i.setAttribute(e,t):t&&this.complexColor(t,e,i)},visibilitySetter:function(t,e,i){"inherit"===t?i.removeAttribute(e):this[e]!==t&&i.setAttribute(e,t),this[e]=t},zIndexSetter:function(t,e){var i,n,r,o=this.renderer,s=this.parentGroup,a=(s||o).element||o.box,l=this.element,o=a===o.box;i=this.added;var c;if(u(t)&&(l.zIndex=t,t=+t,this[e]===t&&(i=!1),this[e]=t),i){for((t=this.zIndex)&&s&&(s.handleZ=!0),e=a.childNodes,c=e.length-1;0<=c&&!n;c--)s=e[c],i=s.zIndex,r=!u(i),s!==l&&(0>t&&r&&!o&&!c?(a.insertBefore(l,e[c]),n=!0):(P(i)<=t||r&&(!u(t)||0<=t))&&(a.insertBefore(l,e[c+1]||null),n=!0));n||(a.insertBefore(l,e[o?3:0]||null),n=!0)}return n},_defaultSetter:function(t,e,i){i.setAttribute(e,t)}}),e.prototype.yGetter=e.prototype.xGetter,e.prototype.translateXSetter=e.prototype.translateYSetter=e.prototype.rotationSetter=e.prototype.verticalAlignSetter=e.prototype.rotationOriginXSetter=e.prototype.rotationOriginYSetter=e.prototype.scaleXSetter=e.prototype.scaleYSetter=e.prototype.matrixSetter=function(t,e){this[e]=t,this.doTransform=!0},e.prototype["stroke-widthSetter"]=e.prototype.strokeSetter=function(t,i,n){this[i]=t,this.stroke&&this["stroke-width"]?(e.prototype.fillSetter.call(this,this.stroke,"stroke",n),n.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0):"stroke-width"===i&&0===t&&this.hasStroke&&(n.removeAttribute("stroke"),this.hasStroke=!1)},i=t.SVGRenderer=function(){this.init.apply(this,arguments)},m(i.prototype,{Element:e,SVG_NS:D,init:function(t,e,i,r,s,a){var c;r=this.createElement("svg").attr({version:"1.1",class:"highcharts-root"}).css(this.getStyle(r)),c=r.element,t.appendChild(c),o(t,"dir","ltr"),-1===t.innerHTML.indexOf("xmlns")&&o(c,"xmlns",this.SVG_NS),this.isSVG=!0,this.box=c,this.boxWrapper=r,this.alignedObjects=[],this.url=(k||I)&&h.getElementsByTagName("base").length?N.location.href.replace(/#.*?$/,"").replace(/<[^>]*>/g,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",this.createElement("desc").add().element.appendChild(h.createTextNode("Created with Highcharts 6.1.0")),this.defs=this.createElement("defs").add(),this.allowHTML=a,this.forExport=s,this.gradients={},this.cache={},this.cacheKeys=[],this.imgCount=0,this.setSize(e,i,!1);var u;k&&t.getBoundingClientRect&&(e=function(){l(t,{left:0,top:0}),u=t.getBoundingClientRect(),l(t,{left:Math.ceil(u.left)-u.left+"px",top:Math.ceil(u.top)-u.top+"px"})},e(),this.unSubPixelFix=n(N,"resize",e))},getStyle:function(t){return this.style=m({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},t)},setStyle:function(t){this.boxWrapper.css(this.getStyle(t))},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var t=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),d(this.gradients||{}),this.gradients=null,t&&(this.defs=t.destroy()),this.unSubPixelFix&&this.unSubPixelFix(),this.alignedObjects=null},createElement:function(t){var e=new this.Element;return e.init(this,t),e},draw:S,getRadialAttr:function(t,e){return{cx:t[0]-t[2]/2+e.cx*t[2],cy:t[1]-t[2]/2+e.cy*t[2],r:e.r*t[2]}},getSpanWidth:function(t){return t.getBBox(!0).width},applyEllipsis:function(t,e,i,n){var r,o,s=t.rotation,a=i,l=0,c=i.length,u=function(t){e.removeChild(e.firstChild),t&&e.appendChild(h.createTextNode(t))};if(t.rotation=0,a=this.getSpanWidth(t,e),o=a>n){for(;l<=c;)r=Math.ceil((l+c)/2),a=i.substring(0,r)+"\u2026",u(a),a=this.getSpanWidth(t,e),l===c?l=c+1:a>n?c=r-1:l=r;0===c&&u("")}return t.rotation=s,o},escapes:{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},buildText:function(t){var e,i,n,r=t.element,s=this,a=s.forExport,c=O(t.textStr,"").toString(),u=-1!==c.indexOf("<"),p=r.childNodes,d=o(r,"x"),m=t.styles,g=t.textWidth,v=m&&m.lineHeight,w=m&&m.textOutline,k=m&&"ellipsis"===m.textOverflow,x=m&&"nowrap"===m.whiteSpace,T=m&&m.fontSize,C=p.length,m=g&&!t.added&&this.box,I=function(t){var e;return e=/(px|em)$/.test(t&&t.style.fontSize)?t.style.fontSize:T||s.style.fontSize||12,v?P(v):s.fontMetrics(e,t.getAttribute("style")?t:r).h},_=function(t,e){return A(s.escapes,function(i,n){e&&-1!==b(i,e)||(t=t.toString().replace(new RegExp(i,"g"),n))}),t},S=function(t,e){var i;if(i=t.indexOf("<"),t=t.substring(i,t.indexOf(">")-i),-1!==(i=t.indexOf(e+"="))&&(i=i+e.length+1,'"'===(e=t.charAt(i))||"'"===e))return t=t.substring(i+1),t.substring(0,t.indexOf(e))};if((i=[c,k,x,v,w,T,g].join())!==t.textCache){for(t.textCache=i;C--;)r.removeChild(p[C]);u||w||k||g||-1!==c.indexOf(" ")?(m&&m.appendChild(r),c=u?c.replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g):[c],c=y(c,function(t){return""!==t}),f(c,function(i,c){var u,p=0;i=i.replace(/^\s+|\s+$/g,"").replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||"),u=i.split("|||"),f(u,function(i){if(""!==i||1===u.length){var f,m,y={},v=h.createElementNS(s.SVG_NS,"tspan");if((f=S(i,"class"))&&o(v,"class",f),(f=S(i,"style"))&&(f=f.replace(/(;| |^)color([ :])/,"$1fill$2"),o(v,"style",f)),(m=S(i,"href"))&&!a&&(o(v,"onclick",'location.href="'+m+'"'),o(v,"class","highcharts-anchor"),l(v,{cursor:"pointer"}))," "!==(i=_(i.replace(/<[a-zA-Z\/](.|\n)*?>/g,"")||" "))){if(v.appendChild(h.createTextNode(i)),p?y.dx=0:c&&null!==d&&(y.x=d),o(v,y),r.appendChild(v),!p&&n&&(!L&&a&&l(v,{display:"block"}),o(v,"dy",I(v))),g){y=i.replace(/([^\^])-/g,"$1- ").split(" "),m=1<u.length||c||1<y.length&&!x;var b,w=[],T=I(v),C=t.rotation;for(k&&(e=s.applyEllipsis(t,v,i,g));!k&&m&&(y.length||w.length);)t.rotation=0,b=s.getSpanWidth(t,v),i=b>g,void 0===e&&(e=i),i&&1!==y.length?(v.removeChild(v.firstChild),w.unshift(y.pop())):(y=w,w=[],y.length&&!x&&(v=h.createElementNS(D,"tspan"),o(v,{dy:T,x:d}),f&&o(v,"style",f),r.appendChild(v)),b>g&&(g=b)),y.length&&v.appendChild(h.createTextNode(y.join(" ").replace(/- /g,"-")));t.rotation=C}p++}}}),n=n||r.childNodes.length}),e&&t.attr("title",_(t.textStr,["&lt;","&gt;"])),m&&m.removeChild(r),w&&t.applyTextOutline&&t.applyTextOutline(w)):r.appendChild(h.createTextNode(_(c)))}},getContrast:function(t){return t=a(t).rgba,510<t[0]+t[1]+t[2]?"#000000":"#FFFFFF"},button:function(t,e,i,r,o,s,a,l,c){var u=this.label(t,e,i,c,null,null,null,null,"button"),p=0;u.attr(_({padding:8,r:2},o));var d,h,f,g;return o=_({fill:"#f7f7f7",stroke:"#cccccc","stroke-width":1,style:{color:"#333333",cursor:"pointer",fontWeight:"normal"}},o),d=o.style,delete o.style,s=_(o,{fill:"#e6e6e6"},s),h=s.style,delete s.style,a=_(o,{fill:"#e6ebf5",style:{color:"#000000",fontWeight:"bold"}},a),f=a.style,delete a.style,l=_(o,{style:{color:"#cccccc"}},l),g=l.style,delete l.style,n(u.element,x?"mouseover":"mouseenter",function(){3!==p&&u.setState(1)}),n(u.element,x?"mouseout":"mouseleave",function(){3!==p&&u.setState(p)}),u.setState=function(t){1!==t&&(u.state=p=t),u.removeClass(/highcharts-button-(normal|hover|pressed|disabled)/).addClass("highcharts-button-"+["normal","hover","pressed","disabled"][t||0]),u.attr([o,s,a,l][t||0]).css([d,h,f,g][t||0])},u.attr(o).css(m({cursor:"default"},d)),u.on("click",function(t){3!==p&&r.call(u,t)})},crispLine:function(t,e){return t[1]===t[4]&&(t[1]=t[4]=Math.round(t[1])-e%2/2),t[2]===t[5]&&(t[2]=t[5]=Math.round(t[2])+e%2/2),t},path:function(t){var e={fill:"none"};return w(t)?e.d=t:T(t)&&m(e,t),this.createElement("path").attr(e)},circle:function(t,e,i){return t=T(t)?t:{x:t,y:e,r:i},e=this.createElement("circle"),e.xSetter=e.ySetter=function(t,e,i){i.setAttribute("c"+e,t)},e.attr(t)},arc:function(t,e,i,n,r,o){return T(t)?(n=t,e=n.y,i=n.r,t=n.x):n={innerR:n,start:r,end:o},t=this.symbol("arc",t,e,i,i,n),t.r=i,t},rect:function(t,e,i,n,r,s){r=T(t)?t.r:r;var a=this.createElement("rect");return t=T(t)?t:void 0===t?{}:{x:t,y:e,width:Math.max(i,0),height:Math.max(n,0)},void 0!==s&&(t.strokeWidth=s,t=a.crisp(t)),t.fill="none",r&&(t.r=r),a.rSetter=function(t,e,i){o(i,{rx:t,ry:t})},a.attr(t)},setSize:function(t,e,i){var n=this.alignedObjects,r=n.length;for(this.width=t,this.height=e,this.boxWrapper.animate({width:t,height:e},{step:function(){this.attr({viewBox:"0 0 "+this.attr("width")+" "+this.attr("height")})},duration:O(i,!0)?void 0:0});r--;)n[r].align()},g:function(t){var e=this.createElement("g");return t?e.attr({class:"highcharts-"+t}):e},image:function(t,e,i,r,o,s){var a,l={preserveAspectRatio:"none"},c=function(t,e){t.setAttributeNS?t.setAttributeNS("http://www.w3.org/1999/xlink","href",e):t.setAttribute("hc-svg-href",e)};return 1<arguments.length&&m(l,{x:e,y:i,width:r,height:o}),a=this.createElement("image").attr(l),s?(c(a.element,"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),l=new N.Image,n(l,"load",function(e){c(a.element,t),s.call(a,e)}),l.src=t):c(a.element,t),a},symbol:function(t,e,i,n,r,o){var a,p,d,g=this,y=/^url\((.*?)\)$/,v=y.test(t),b=!v&&(this.symbols[t]?t:"circle"),w=b&&this.symbols[b],k=u(e)&&w&&w.call(this.symbols,Math.round(e),Math.round(i),n,r,o);return w?(a=this.path(k),a.attr("fill","none"),m(a,{symbolName:b,x:e,y:i,width:n,height:r}),o&&m(a,o)):v&&(p=t.match(y)[1],a=this.image(p),a.imgwidth=O(j[p]&&j[p].width,o&&o.width),a.imgheight=O(j[p]&&j[p].height,o&&o.height),d=function(){a.attr({width:a.width,height:a.height})},f(["width","height"],function(t){a[t+"Setter"]=function(t,e){var i={},n=this["img"+e],r="width"===e?"translateX":"translateY";this[e]=t,u(n)&&(this.element&&this.element.setAttribute(e,n),this.alignByTranslate||(i[r]=((this[e]||0)-n)/2,this.attr(i)))}}),u(e)&&a.attr({x:e,y:i}),a.isImg=!0,u(a.imgwidth)&&u(a.imgheight)?d():(a.attr({width:0,height:0}),c("img",{onload:function(){var t=s[g.chartIndex];0===this.width&&(l(this,{position:"absolute",top:"-999em"}),h.body.appendChild(this)),j[p]={width:this.width,height:this.height},a.imgwidth=this.width,a.imgheight=this.height,a.element&&d(),this.parentNode&&this.parentNode.removeChild(this),!--g.imgCount&&t&&t.onload&&t.onload()},src:p}),this.imgCount++)),a},symbols:{circle:function(t,e,i,n){return this.arc(t+i/2,e+n/2,i/2,n/2,{start:0,end:2*Math.PI,open:!1})},square:function(t,e,i,n){return["M",t,e,"L",t+i,e,t+i,e+n,t,e+n,"Z"]},triangle:function(t,e,i,n){return["M",t+i/2,e,"L",t+i,e+n,t,e+n,"Z"]},"triangle-down":function(t,e,i,n){return["M",t,e,"L",t+i,e,t+i/2,e+n,"Z"]},diamond:function(t,e,i,n){return["M",t+i/2,e,"L",t+i,e+n/2,t+i/2,e+n,t,e+n/2,"Z"]},arc:function(t,e,i,n,r){var o=r.start,s=r.r||i,a=r.r||n||i,l=r.end-.001;i=r.innerR,n=O(r.open,.001>Math.abs(r.end-r.start-2*Math.PI));var c=Math.cos(o),p=Math.sin(o),d=Math.cos(l),l=Math.sin(l);return r=.001>r.end-o-Math.PI?0:1,s=["M",t+s*c,e+a*p,"A",s,a,0,r,1,t+s*d,e+a*l],u(i)&&s.push(n?"M":"L",t+i*d,e+i*l,"A",i,i,0,r,0,t+i*c,e+i*p),s.push(n?"":"Z"),s},callout:function(t,e,i,n,r){var o=Math.min(r&&r.r||0,i,n),s=o+6,a=r&&r.anchorX;r=r&&r.anchorY;var l;return l=["M",t+o,e,"L",t+i-o,e,"C",t+i,e,t+i,e,t+i,e+o,"L",t+i,e+n-o,"C",t+i,e+n,t+i,e+n,t+i-o,e+n,"L",t+o,e+n,"C",t,e+n,t,e+n,t,e+n-o,"L",t,e+o,"C",t,e,t,e,t+o,e],a&&a>i?r>e+s&&r<e+n-s?l.splice(13,3,"L",t+i,r-6,t+i+6,r,t+i,r+6,t+i,e+n-o):l.splice(13,3,"L",t+i,n/2,a,r,t+i,n/2,t+i,e+n-o):a&&0>a?r>e+s&&r<e+n-s?l.splice(33,3,"L",t,r+6,t-6,r,t,r-6,t,e+o):l.splice(33,3,"L",t,n/2,a,r,t,n/2,t,e+o):r&&r>n&&a>t+s&&a<t+i-s?l.splice(23,3,"L",a+6,e+n,a,e+n+6,a-6,e+n,t+o,e+n):r&&0>r&&a>t+s&&a<t+i-s&&l.splice(3,3,"L",a-6,e,a,e-6,a+6,e,i-o,e),l}},clipRect:function(e,i,n,r){var o=t.uniqueKey(),s=this.createElement("clipPath").attr({id:o}).add(this.defs);return e=this.rect(e,i,n,r,0).add(s),e.id=o,e.clipPath=s,e.count=0,e},text:function(t,e,i,n){var r={};return!n||!this.allowHTML&&this.forExport?(r.x=Math.round(e||0),i&&(r.y=Math.round(i)),(t||0===t)&&(r.text=t),t=this.createElement("text").attr(r),n||(t.xSetter=function(t,e,i){var n,r,o=i.getElementsByTagName("tspan"),s=i.getAttribute(e);for(r=0;r<o.length;r++)n=o[r],n.getAttribute(e)===s&&n.setAttribute(e,t);i.setAttribute(e,t)}),t):this.html(t,e,i)},fontMetrics:function(t,e){return t=t||e&&e.style&&e.style.fontSize||this.style&&this.style.fontSize,t=/px/.test(t)?P(t):/em/.test(t)?parseFloat(t)*(e?this.fontMetrics(null,e.parentNode).f:16):12,e=24>t?t+3:Math.round(1.2*t),{h:e,b:Math.round(.8*e),f:t}},rotCorr:function(t,e,i){var n=t;return e&&i&&(n=Math.max(n*Math.cos(e*p),4)),{x:-t/3*Math.sin(e*p),y:n}},label:function(i,n,r,o,s,a,l,c,p){var d,h,g,y,v,b,w,k,x,T,C,I,S,A=this,O=A.g("button"!==p&&"label"),P=O.text=A.text("",0,0,l).attr({zIndex:1}),M=0,L=3,D=0,j={},N=/^url\((.*?)\)$/.test(o),F=N;p&&O.addClass("highcharts-"+p),F=N,T=function(){return(k||0)%2/2},C=function(){var t=P.element.style,e={};h=(void 0===g||void 0===y||w)&&u(P.textStr)&&P.getBBox(),O.width=(g||h.width||0)+2*L+D,O.height=(y||h.height||0)+2*L,x=L+A.fontMetrics(t&&t.fontSize,P).b,F&&(d||(O.box=d=A.symbols[o]||N?A.symbol(o):A.rect(),d.addClass(("button"===p?"":"highcharts-label-box")+(p?" highcharts-"+p+"-box":"")),d.add(O),t=T(),e.x=t,e.y=(c?-x:0)+t),e.width=Math.round(O.width),e.height=Math.round(O.height),d.attr(m(e,j)),j={})},I=function(){var t,e=D+L;t=c?0:x,u(g)&&h&&("center"===w||"right"===w)&&(e+={center:.5,right:1}[w]*(g-h.width)),e===P.x&&t===P.y||(P.attr("x",e),void 0!==t&&P.attr("y",t)),P.x=e,P.y=t},S=function(t,e){d?d.attr(t,e):j[t]=e},O.onAdd=function(){P.add(O),O.attr({text:i||0===i?i:"",x:n,y:r}),d&&u(s)&&O.attr({anchorX:s,anchorY:a})},O.widthSetter=function(e){g=t.isNumber(e)?e:null},O.heightSetter=function(t){y=t},O["text-alignSetter"]=function(t){w=t},O.paddingSetter=function(t){u(t)&&t!==L&&(L=O.padding=t,I())},O.paddingLeftSetter=function(t){u(t)&&t!==D&&(D=t,I())},O.alignSetter=function(t){(t={left:0,center:.5,right:1}[t])!==M&&(M=t,h&&O.attr({x:v}))},O.textSetter=function(t){void 0!==t&&P.textSetter(t),C(),I()},O["stroke-widthSetter"]=function(t,e){t&&(F=!0),k=this["stroke-width"]=t,S(e,t)},O.strokeSetter=O.fillSetter=O.rSetter=function(t,e){"r"!==e&&("fill"===e&&t&&(F=!0),O[e]=t),S(e,t)},O.anchorXSetter=function(t,e){s=O.anchorX=t,S(e,Math.round(t)-T()-v)},O.anchorYSetter=function(t,e){a=O.anchorY=t,S(e,t-b)},O.xSetter=function(t){O.x=t,M&&(t-=M*((g||h.width)+2*L),O["forceAnimate:x"]=!0),v=Math.round(t),O.attr("translateX",v)},O.ySetter=function(t){b=O.y=Math.round(t),O.attr("translateY",b)};var R=O.css;return m(O,{css:function(t){if(t){var e={};t=_(t),f(O.textProps,function(i){void 0!==t[i]&&(e[i]=t[i],delete t[i])}),P.css(e),"width"in e&&C()}return R.call(O,t)},getBBox:function(){return{width:h.width+2*L,height:h.height+2*L,x:h.x-L,y:h.y-L}},shadow:function(t){return t&&(C(),d&&d.shadow(t)),O},destroy:function(){E(O.element,"mouseenter"),E(O.element,"mouseleave"),P&&(P=P.destroy()),d&&(d=d.destroy()),e.prototype.destroy.call(O),O=A=C=I=S=null}})}}),t.Renderer=i}(e),function(t){var e=t.attr,i=t.createElement,n=t.css,r=t.defined,o=t.each,s=t.extend,a=t.isFirefox,l=t.isMS,c=t.isWebKit,u=t.pick,p=t.pInt,d=t.SVGRenderer,h=t.win,f=t.wrap;s(t.SVGElement.prototype,{htmlCss:function(t){var e=this.element;return(e=t&&"SPAN"===e.tagName&&t.width)&&(delete t.width,this.textWidth=e,this.htmlUpdateTransform()),t&&"ellipsis"===t.textOverflow&&(t.whiteSpace="nowrap",t.overflow="hidden"),this.styles=s(this.styles,t),n(this.element,t),this},htmlGetBBox:function(){var t=this.element;return{x:t.offsetLeft,y:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight}},htmlUpdateTransform:function(){if(this.added){var t=this.renderer,e=this.element,i=this.translateX||0,s=this.translateY||0,a=this.x||0,l=this.y||0,c=this.textAlign||"left",u={left:0,center:.5,right:1}[c],d=this.styles,h=d&&d.whiteSpace;if(n(e,{marginLeft:i,marginTop:s}),this.shadows&&o(this.shadows,function(t){n(t,{marginLeft:i+1,marginTop:s+1})}),this.inverted&&o(e.childNodes,function(i){t.invertChild(i,e)}),"SPAN"===e.tagName){var f,d=this.rotation,m=this.textWidth&&p(this.textWidth),g=[d,c,e.innerHTML,this.textWidth,this.textAlign].join();(f=m!==this.oldTextWidth)&&!(f=m>this.oldTextWidth)&&((f=this.textPxLength)||(n(e,{width:"",whiteSpace:h||"nowrap"}),f=e.offsetWidth),f=f>m),f&&/[ \-]/.test(e.textContent||e.innerText)&&(n(e,{width:m+"px",display:"block",whiteSpace:h||"normal"}),this.oldTextWidth=m),g!==this.cTT&&(h=t.fontMetrics(e.style.fontSize).b,r(d)&&d!==(this.oldRotation||0)&&this.setSpanRotation(d,u,h),this.getSpanCorrection(!r(d)&&this.textPxLength||e.offsetWidth,h,u,d,c)),n(e,{left:a+(this.xCorr||0)+"px",top:l+(this.yCorr||0)+"px"}),this.cTT=g,this.oldRotation=d}}else this.alignOnAdd=!0},setSpanRotation:function(t,e,i){var r={},o=this.renderer.getTransformKey();r[o]=r.transform="rotate("+t+"deg)",r[o+(a?"Origin":"-origin")]=r.transformOrigin=100*e+"% "+i+"px",n(this.element,r)},getSpanCorrection:function(t,e,i){this.xCorr=-t*i,this.yCorr=-e}}),s(d.prototype,{getTransformKey:function(){return l&&!/Edge/.test(h.navigator.userAgent)?"-ms-transform":c?"-webkit-transform":a?"MozTransform":h.opera?"-o-transform":""},html:function(t,n,r){var a=this.createElement("span"),l=a.element,c=a.renderer,p=c.isSVG,d=function(t,e){o(["opacity","visibility"],function(i){f(t,i+"Setter",function(t,i,n,r){t.call(this,i,n,r),e[n]=i})}),t.addedSetters=!0};return a.textSetter=function(t){t!==l.innerHTML&&delete this.bBox,this.textStr=t,l.innerHTML=u(t,""),a.doTransform=!0},p&&d(a,a.element.style),a.xSetter=a.ySetter=a.alignSetter=a.rotationSetter=function(t,e){"align"===e&&(e="textAlign"),a[e]=t,a.doTransform=!0},a.afterSetters=function(){this.doTransform&&(this.htmlUpdateTransform(),this.doTransform=!1)},a.attr({text:t,x:Math.round(n),y:Math.round(r)}).css({fontFamily:this.style.fontFamily,fontSize:this.style.fontSize,position:"absolute"}),l.style.whiteSpace="nowrap",a.css=a.htmlCss,p&&(a.add=function(t){var n,r=c.box.parentNode,u=[];if(this.parentGroup=t){if(!(n=t.div)){for(;t;)u.push(t),t=t.parentGroup;o(u.reverse(),function(t){function o(e,i){t[i]=e,"translateX"===i?l.left=e+"px":l.top=e+"px",t.doTransform=!0}var l,c=e(t.element,"class");c&&(c={className:c}),n=t.div=t.div||i("div",c,{position:"absolute",left:(t.translateX||0)+"px",top:(t.translateY||0)+"px",display:t.display,opacity:t.opacity,pointerEvents:t.styles&&t.styles.pointerEvents},n||r),l=n.style,s(t,{classSetter:function(t){return function(e){this.element.setAttribute("class",e),t.className=e}}(n),on:function(){return u[0].div&&a.on.apply({element:u[0].div},arguments),t},translateXSetter:o,translateYSetter:o}),t.addedSetters||d(t,l)})}}else n=r;return n.appendChild(l),a.added=!0,a.alignOnAdd&&a.htmlUpdateTransform(),a}),a}})}(e),function(t){var e=t.defined,i=t.each,n=t.extend,r=t.merge,o=t.pick,s=t.timeUnits,a=t.win;t.Time=function(t){this.update(t,!1)},t.Time.prototype={defaultOptions:{},update:function(e){var i=o(e&&e.useUTC,!0),n=this;this.options=e=r(!0,this.options||{},e),this.Date=e.Date||a.Date,this.timezoneOffset=(this.useUTC=i)&&e.timezoneOffset,this.getTimezoneOffset=this.timezoneOffsetFunction(),(this.variableTimezone=!(i&&!e.getTimezoneOffset&&!e.timezone))||this.timezoneOffset?(this.get=function(t,e){var i=e.getTime(),r=i-n.getTimezoneOffset(e);return e.setTime(r),t=e["getUTC"+t](),e.setTime(i),t},this.set=function(e,i,r){var o;-1!==t.inArray(e,["Milliseconds","Seconds","Minutes"])?i["set"+e](r):(o=n.getTimezoneOffset(i),o=i.getTime()-o,i.setTime(o),i["setUTC"+e](r),e=n.getTimezoneOffset(i),o=i.getTime()+e,i.setTime(o))}):i?(this.get=function(t,e){return e["getUTC"+t]()},this.set=function(t,e,i){return e["setUTC"+t](i)}):(this.get=function(t,e){return e["get"+t]()},this.set=function(t,e,i){return e["set"+t](i)})},makeTime:function(e,i,n,r,s,a){var l,c,u;return this.useUTC?(l=this.Date.UTC.apply(0,arguments),c=this.getTimezoneOffset(l),l+=c,u=this.getTimezoneOffset(l),c!==u?l+=u-c:c-36e5!==this.getTimezoneOffset(l-36e5)||t.isSafari||(l-=36e5)):l=new this.Date(e,i,o(n,1),o(r,0),o(s,0),o(a,0)).getTime(),l},timezoneOffsetFunction:function(){var e=this,i=this.options,n=a.moment;if(!this.useUTC)return function(t){return 6e4*new Date(t).getTimezoneOffset()};if(i.timezone){if(n)return function(t){return 6e4*-n.tz(t,i.timezone).utcOffset()};t.error(25)}return this.useUTC&&i.getTimezoneOffset?function(t){return 6e4*i.getTimezoneOffset(t)}:function(){return 6e4*(e.timezoneOffset||0)}},dateFormat:function(e,i,n){if(!t.defined(i)||isNaN(i))return t.defaultOptions.lang.invalidDate||"";e=t.pick(e,"%Y-%m-%d %H:%M:%S");var r=this,o=new this.Date(i),s=this.get("Hours",o),a=this.get("Day",o),l=this.get("Date",o),c=this.get("Month",o),u=this.get("FullYear",o),p=t.defaultOptions.lang,d=p.weekdays,h=p.shortWeekdays,f=t.pad,o=t.extend({a:h?h[a]:d[a].substr(0,3),A:d[a],d:f(l),e:f(l,2," "),w:a,b:p.shortMonths[c],B:p.months[c],m:f(c+1),y:u.toString().substr(2,2),Y:u,H:f(s),k:s,I:f(s%12||12),l:s%12||12,M:f(r.get("Minutes",o)),p:12>s?"AM":"PM",P:12>s?"am":"pm",S:f(o.getSeconds()),L:f(Math.round(i%1e3),3)},t.dateFormats);return t.objectEach(o,function(t,n){for(;-1!==e.indexOf("%"+n);)e=e.replace("%"+n,"function"==typeof t?t.call(r,i):t)}),n?e.substr(0,1).toUpperCase()+e.substr(1):e},getTimeTicks:function(t,r,a,l){var c,u,p=this,d=[],h={},f=new p.Date(r),m=t.unitRange,g=t.count||1;if(e(r)){p.set("Milliseconds",f,m>=s.second?0:g*Math.floor(p.get("Milliseconds",f)/g)),m>=s.second&&p.set("Seconds",f,m>=s.minute?0:g*Math.floor(p.get("Seconds",f)/g)),m>=s.minute&&p.set("Minutes",f,m>=s.hour?0:g*Math.floor(p.get("Minutes",f)/g)),m>=s.hour&&p.set("Hours",f,m>=s.day?0:g*Math.floor(p.get("Hours",f)/g)),m>=s.day&&p.set("Date",f,m>=s.month?1:g*Math.floor(p.get("Date",f)/g)),m>=s.month&&(p.set("Month",f,m>=s.year?0:g*Math.floor(p.get("Month",f)/g)),c=p.get("FullYear",f)),m>=s.year&&p.set("FullYear",f,c-c%g),m===s.week&&p.set("Date",f,p.get("Date",f)-p.get("Day",f)+o(l,1)),c=p.get("FullYear",f),l=p.get("Month",f);var y=p.get("Date",f),v=p.get("Hours",f);for(r=f.getTime(),p.variableTimezone&&(u=a-r>4*s.month||p.getTimezoneOffset(r)!==p.getTimezoneOffset(a)),f=f.getTime(),r=1;f<a;)d.push(f),f=m===s.year?p.makeTime(c+r*g,0):m===s.month?p.makeTime(c,l+r*g):!u||m!==s.day&&m!==s.week?u&&m===s.hour&&1<g?p.makeTime(c,l,y,v+r*g):f+m*g:p.makeTime(c,l,y+r*g*(m===s.day?1:7)),r++;d.push(f),m<=s.hour&&1e4>d.length&&i(d,function(t){0==t%18e5&&"000000000"===p.dateFormat("%H%M%S%L",t)&&(h[t]="day")})}return d.info=n(t,{higherRanks:h,totalRange:m*g}),d}}}(e),function(t){var e=t.color,i=t.merge;t.defaultOptions={colors:"#7cb5ec #434348 #90ed7d #f7a35c #8085e9 #f15c80 #e4d354 #2b908f #f45b5b #91e8e1".split(" "),symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),decimalPoint:".",numericSymbols:"kMGTPE".split(""),resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{},time:t.Time.prototype.defaultOptions,chart:{borderRadius:0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}},width:null,height:null,borderColor:"#335cad",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"},title:{text:"Chart title",align:"center",margin:15,widthAdjust:-44},subtitle:{text:"",align:"center",widthAdjust:-44},plotOptions:{},labels:{style:{position:"absolute",color:"#333333"}},legend:{enabled:!0,align:"center",alignColumns:!0,layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{activeColor:"#003399",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",fontSize:"12px",fontWeight:"bold",textOverflow:"ellipsis"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#cccccc"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:t.svg,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},footerFormat:"",padding:8,snap:t.isTouchDevice?25:10,backgroundColor:e("#f7f7f7").setOpacity(.85).get(),borderWidth:1,headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">\u25cf</span> {series.name}: <b>{point.y}</b><br/>',shadow:!0,style:{color:"#333333",cursor:"default",fontSize:"12px",pointerEvents:"none",whiteSpace:"nowrap"}},credits:{enabled:!0,href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"9px"},text:"Highcharts.com"}},t.setOptions=function(e){return t.defaultOptions=i(!0,t.defaultOptions,e),t.time.update(i(t.defaultOptions.global,t.defaultOptions.time),!1),t.defaultOptions},t.getOptions=function(){return t.defaultOptions},t.defaultPlotOptions=t.defaultOptions.plotOptions,t.time=new t.Time(i(t.defaultOptions.global,t.defaultOptions.time)),t.dateFormat=function(e,i,n){return t.time.dateFormat(e,i,n)}}(e),function(t){var e=t.correctFloat,i=t.defined,n=t.destroyObjectProperties,r=t.fireEvent,o=t.isNumber,s=t.merge,a=t.pick,l=t.deg2rad;t.Tick=function(t,e,i,n){this.axis=t,this.pos=e,this.type=i||"",this.isNewLabel=this.isNew=!0,i||n||this.addLabel()},t.Tick.prototype={addLabel:function(){var t,n=this.axis,r=n.options,o=n.chart,l=n.categories,c=n.names,u=this.pos,p=r.labels,d=n.tickPositions,h=u===d[0],f=u===d[d.length-1],c=l?a(l[u],c[u],u):u,l=this.label,d=d.info;n.isDatetimeAxis&&d&&(t=r.dateTimeLabelFormats[d.higherRanks[u]||d.unitName]),this.isFirst=h,this.isLast=f,r=n.labelFormatter.call({axis:n,chart:o,isFirst:h,isLast:f,dateTimeLabelFormat:t,value:n.isLog?e(n.lin2log(c)):c,pos:u}),i(l)?l&&l.attr({text:r}):((this.label=l=i(r)&&p.enabled?o.renderer.text(r,0,0,p.useHTML).css(s(p.style)).add(n.labelGroup):null)&&(l.textPxLength=l.getBBox().width),this.rotation=0)},getLabelSize:function(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0},handleOverflow:function(t){var e,i=this.axis,n=i.options.labels,r=t.x,o=i.chart.chartWidth,s=i.chart.spacing,c=a(i.labelLeft,Math.min(i.pos,s[3])),s=a(i.labelRight,Math.max(i.isRadial?0:i.pos+i.len,o-s[1])),u=this.label,p=this.rotation,d={left:0,center:.5,right:1}[i.labelAlign||u.attr("align")],h=u.getBBox().width,f=i.getSlotWidth(),m=f,g=1,y={};p||!1===n.overflow?0>p&&r-d*h<c?e=Math.round(r/Math.cos(p*l)-c):0<p&&r+d*h>s&&(e=Math.round((o-r)/Math.cos(p*l))):(o=r+(1-d)*h,r-d*h<c?m=t.x+m*(1-d)-c:o>s&&(m=s-t.x+m*d,g=-1),m=Math.min(f,m),m<f&&"center"===i.labelAlign&&(t.x+=g*(f-m-d*(f-Math.min(h,m)))),(h>m||i.autoRotation&&(u.styles||{}).width)&&(e=m)),e&&(y.width=e,(n.style||{}).textOverflow||(y.textOverflow="ellipsis"),u.css(y))},getPosition:function(e,i,n,o){var s=this.axis,a=s.chart,l=o&&a.oldChartHeight||a.chartHeight;return e={x:e?t.correctFloat(s.translate(i+n,null,null,o)+s.transB):s.left+s.offset+(s.opposite?(o&&a.oldChartWidth||a.chartWidth)-s.right-s.left:0),y:e?l-s.bottom+s.offset-(s.opposite?s.height:0):t.correctFloat(l-s.translate(i+n,null,null,o)-s.transB)},r(this,"afterGetPosition",{pos:e}),e},getLabelPosition:function(t,e,n,o,s,a,c,u){var p=this.axis,d=p.transA,h=p.reversed,f=p.staggerLines,m=p.tickRotCorr||{x:0,y:0},g=s.y,y=o||p.reserveSpaceDefault?0:-p.labelOffset*("center"===p.labelAlign?.5:1),v={};return i(g)||(g=0===p.side?n.rotation?-8:-n.getBBox().height:2===p.side?m.y+8:Math.cos(n.rotation*l)*(m.y-n.getBBox(!1,0).height/2)),t=t+s.x+y+m.x-(a&&o?a*d*(h?-1:1):0),e=e+g-(a&&!o?a*d*(h?1:-1):0),f&&(n=c/(u||1)%f,p.opposite&&(n=f-n-1),e+=p.labelOffset/f*n),v.x=t,v.y=Math.round(e),r(this,"afterGetLabelPosition",{pos:v}),v},getMarkPath:function(t,e,i,n,r,o){return o.crispLine(["M",t,e,"L",t+(r?0:-i),e+(r?i:0)],n)},renderGridLine:function(t,e,i){var n=this.axis,r=n.options,o=this.gridLine,s={},a=this.pos,l=this.type,c=n.tickmarkOffset,u=n.chart.renderer,p=l?l+"Grid":"grid",d=r[p+"LineWidth"],h=r[p+"LineColor"],r=r[p+"LineDashStyle"];o||(s.stroke=h,s["stroke-width"]=d,r&&(s.dashstyle=r),l||(s.zIndex=1),t&&(s.opacity=0),this.gridLine=o=u.path().attr(s).addClass("highcharts-"+(l?l+"-":"")+"grid-line").add(n.gridGroup)),!t&&o&&(t=n.getPlotLinePath(a+c,o.strokeWidth()*i,t,!0))&&o[this.isNew?"attr":"animate"]({d:t,opacity:e})},renderMark:function(t,e,i){var n=this.axis,r=n.options,o=n.chart.renderer,s=this.type,l=s?s+"Tick":"tick",c=n.tickSize(l),u=this.mark,p=!u,d=t.x;t=t.y;var h=a(r[l+"Width"],!s&&n.isXAxis?1:0),r=r[l+"Color"];c&&(n.opposite&&(c[0]=-c[0]),p&&(this.mark=u=o.path().addClass("highcharts-"+(s?s+"-":"")+"tick").add(n.axisGroup),u.attr({stroke:r,"stroke-width":h})),u[p?"attr":"animate"]({d:this.getMarkPath(d,t,c[0],u.strokeWidth()*i,n.horiz,o),opacity:e}))},renderLabel:function(t,e,i,n){var r=this.axis,s=r.horiz,l=r.options,c=this.label,u=l.labels,p=u.step,r=r.tickmarkOffset,d=!0,h=t.x;t=t.y,c&&o(h)&&(c.xy=t=this.getLabelPosition(h,t,c,s,u,r,n,p),this.isFirst&&!this.isLast&&!a(l.showFirstLabel,1)||this.isLast&&!this.isFirst&&!a(l.showLastLabel,1)?d=!1:!s||u.step||u.rotation||e||0===i||this.handleOverflow(t),p&&n%p&&(d=!1),d&&o(t.y)?(t.opacity=i,c[this.isNewLabel?"attr":"animate"](t),this.isNewLabel=!1):(c.attr("y",-9999),this.isNewLabel=!0))},render:function(e,i,n){var r=this.axis,o=r.horiz,s=this.getPosition(o,this.pos,r.tickmarkOffset,i),l=s.x,c=s.y,r=o&&l===r.pos+r.len||!o&&c===r.pos?-1:1;n=a(n,1),this.isActive=!0,this.renderGridLine(i,n,r),this.renderMark(s,n,r),this.renderLabel(s,i,n,e),this.isNew=!1,t.fireEvent(this,"afterRender")},destroy:function(){n(this,this.axis)}}}(e);var i=function(t){var e=t.addEvent,i=t.animObject,n=t.arrayMax,r=t.arrayMin,o=t.color,s=t.correctFloat,a=t.defaultOptions,l=t.defined,c=t.deg2rad,u=t.destroyObjectProperties,p=t.each,d=t.extend,h=t.fireEvent,f=t.format,m=t.getMagnitude,g=t.grep,y=t.inArray,v=t.isArray,b=t.isNumber,w=t.isString,k=t.merge,x=t.normalizeTickInterval,T=t.objectEach,C=t.pick,I=t.removeEvent,_=t.splat,S=t.syncTimeout,A=t.Tick,O=function(){this.init.apply(this,arguments)};return t.extend(O.prototype,{defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,labels:{enabled:!0,style:{color:"#666666",cursor:"default",fontSize:"11px"},x:0},maxPadding:.01,minorTickLength:2,minorTickPosition:"outside",minPadding:.01,startOfWeek:1,startOnTick:!1,tickLength:10,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",title:{align:"middle",style:{color:"#666666"}},type:"linear",minorGridLineColor:"#f2f2f2",minorGridLineWidth:1,minorTickColor:"#999999",lineColor:"#ccd6eb",lineWidth:1,gridLineColor:"#e6e6e6",tickColor:"#ccd6eb"},defaultYAxisOptions:{endOnTick:!0,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8},maxPadding:.05,minPadding:.05,startOnTick:!0,title:{rotation:270,text:"Values"},stackLabels:{allowOverlap:!1,enabled:!1,formatter:function(){return t.numberFormat(this.total,-1)},style:{fontSize:"11px",fontWeight:"bold",color:"#000000",textOutline:"1px contrast"}},gridLineWidth:1,lineWidth:0},defaultLeftAxisOptions:{labels:{x:-15},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15},title:{rotation:90}},defaultBottomAxisOptions:{labels:{autoRotation:[-45],x:0},title:{rotation:0}},defaultTopAxisOptions:{labels:{autoRotation:[-45],x:0},title:{rotation:0}},init:function(t,i){var n=i.isX,r=this;r.chart=t,r.horiz=t.inverted&&!r.isZAxis?!n:n,r.isXAxis=n,r.coll=r.coll||(n?"xAxis":"yAxis"),h(this,"init",{userOptions:i}),r.opposite=i.opposite,r.side=i.side||(r.horiz?r.opposite?0:2:r.opposite?1:3),r.setOptions(i);var o=this.options,s=o.type;r.labelFormatter=o.labels.formatter||r.defaultLabelFormatter,r.userOptions=i,r.minPixelPadding=0,r.reversed=o.reversed,r.visible=!1!==o.visible,r.zoomEnabled=!1!==o.zoomEnabled,r.hasNames="category"===s||!0===o.categories,r.categories=o.categories||r.hasNames,r.names||(r.names=[],r.names.keys={}),r.plotLinesAndBandsGroups={},r.isLog="logarithmic"===s,r.isDatetimeAxis="datetime"===s,r.positiveValuesOnly=r.isLog&&!r.allowNegativeLog,r.isLinked=l(o.linkedTo),r.ticks={},r.labelEdge=[],r.minorTicks={},r.plotLinesAndBands=[],r.alternateBands={},r.len=0,r.minRange=r.userMinRange=o.minRange||o.maxZoom,r.range=o.range,r.offset=o.offset||0,r.stacks={},r.oldStacks={},r.stacksTouched=0,r.max=null,r.min=null,r.crosshair=C(o.crosshair,_(t.options.tooltip.crosshairs)[n?0:1],!1),i=r.options.events,-1===y(r,t.axes)&&(n?t.axes.splice(t.xAxis.length,0,r):t.axes.push(r),t[r.coll].push(r)),r.series=r.series||[],t.inverted&&!r.isZAxis&&n&&void 0===r.reversed&&(r.reversed=!0),T(i,function(t,i){e(r,i,t)}),r.lin2log=o.linearToLogConverter||r.lin2log,r.isLog&&(r.val2lin=r.log2lin,r.lin2val=r.lin2log),h(this,"afterInit")},setOptions:function(t){this.options=k(this.defaultOptions,"yAxis"===this.coll&&this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],k(a[this.coll],t)),h(this,"afterSetOptions",{userOptions:t})},defaultLabelFormatter:function(){var e,i=this.axis,n=this.value,r=i.chart.time,o=i.categories,s=this.dateTimeLabelFormat,l=a.lang,c=l.numericSymbols,l=l.numericSymbolMagnitude||1e3,u=c&&c.length,p=i.options.labels.format,i=i.isLog?Math.abs(n):i.tickInterval;if(p)e=f(p,this,r);else if(o)e=n;else if(s)e=r.dateFormat(s,n);else if(u&&1e3<=i)for(;u--&&void 0===e;)r=Math.pow(l,u+1),i>=r&&0==10*n%r&&null!==c[u]&&0!==n&&(e=t.numberFormat(n/r,-1)+c[u]);return void 0===e&&(e=1e4<=Math.abs(n)?t.numberFormat(n,-1):t.numberFormat(n,-1,void 0,"")),e},getSeriesExtremes:function(){var t=this,e=t.chart;h(this,"getSeriesExtremes",null,function(){t.hasVisibleSeries=!1,t.dataMin=t.dataMax=t.threshold=null,t.softThreshold=!t.isXAxis,t.buildStacks&&t.buildStacks(),p(t.series,function(i){if(i.visible||!e.options.chart.ignoreHiddenSeries){var o,s=i.options,a=s.threshold;t.hasVisibleSeries=!0,t.positiveValuesOnly&&0>=a&&(a=null),t.isXAxis?(s=i.xData,s.length&&(i=r(s),o=n(s),b(i)||i instanceof Date||(s=g(s,b),i=r(s),o=n(s)),s.length&&(t.dataMin=Math.min(C(t.dataMin,s[0],i),i),t.dataMax=Math.max(C(t.dataMax,s[0],o),o)))):(i.getExtremes(),o=i.dataMax,i=i.dataMin,l(i)&&l(o)&&(t.dataMin=Math.min(C(t.dataMin,i),i),t.dataMax=Math.max(C(t.dataMax,o),o)),l(a)&&(t.threshold=a),(!s.softThreshold||t.positiveValuesOnly)&&(t.softThreshold=!1))}})}),h(this,"afterGetSeriesExtremes")},translate:function(t,e,i,n,r,o){var s=this.linkedParent||this,a=1,l=0,c=n?s.oldTransA:s.transA;n=n?s.oldMin:s.min;var u=s.minPixelPadding;return r=(s.isOrdinal||s.isBroken||s.isLog&&r)&&s.lin2val,c||(c=s.transA),i&&(a*=-1,l=s.len),s.reversed&&(a*=-1,l-=a*(s.sector||s.len)),e?(t=(t*a+l-u)/c+n,r&&(t=s.lin2val(t))):(r&&(t=s.val2lin(t)),t=b(n)?a*(t-n)*c+l+a*u+(b(o)?c*o:0):void 0),t},toPixels:function(t,e){return this.translate(t,!1,!this.horiz,null,!0)+(e?0:this.pos)},toValue:function(t,e){return this.translate(t-(e?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(t,e,i,n,r){var o,s,a,l=this.chart,c=this.left,u=this.top,p=i&&l.oldChartHeight||l.chartHeight,d=i&&l.oldChartWidth||l.chartWidth;o=this.transB;var h=function(t,e,i){return(t<e||t>i)&&(n?t=Math.min(Math.max(e,t),i):a=!0),t};return r=C(r,this.translate(t,null,null,i)),r=Math.min(Math.max(-1e5,r),1e5),t=i=Math.round(r+o),o=s=Math.round(p-r-o),b(r)?this.horiz?(o=u,s=p-this.bottom,t=i=h(t,c,c+this.width)):(t=c,i=d-this.right,o=s=h(o,u,u+this.height)):(a=!0,n=!1),a&&!n?null:l.renderer.crispLine(["M",t,o,"L",i,s],e||1)},getLinearTickPositions:function(t,e,i){var n,r=s(Math.floor(e/t)*t);i=s(Math.ceil(i/t)*t);var o,a=[];if(s(r+t)===r&&(o=20),this.single)return[e];for(e=r;e<=i&&(a.push(e),(e=s(e+t,o))!==n);)n=e;return a},getMinorTickInterval:function(){var t=this.options;return!0===t.minorTicks?C(t.minorTickInterval,"auto"):!1===t.minorTicks?null:t.minorTickInterval},getMinorTickPositions:function(){var t=this,e=t.options,i=t.tickPositions,n=t.minorTickInterval,r=[],o=t.pointRangePadding||0,s=t.min-o,o=t.max+o,a=o-s;if(a&&a/n<t.len/3)if(t.isLog)p(this.paddedTicks,function(e,i,o){i&&r.push.apply(r,t.getLogTickPositions(n,o[i-1],o[i],!0))});else if(t.isDatetimeAxis&&"auto"===this.getMinorTickInterval())r=r.concat(t.getTimeTicks(t.normalizeTimeTickInterval(n),s,o,e.startOfWeek));else for(e=s+(i[0]-s)%n;e<=o&&e!==r[0];e+=n)r.push(e);return 0!==r.length&&t.trimTicks(r),r},adjustForMinRange:function(){var t,e,i,o,s,a,c,u,d=this.options,h=this.min,f=this.max;this.isXAxis&&void 0===this.minRange&&!this.isLog&&(l(d.min)||l(d.max)?this.minRange=null:(p(this.series,function(t){for(a=t.xData,o=c=t.xIncrement?1:a.length-1;0<o;o--)s=a[o]-a[o-1],(void 0===i||s<i)&&(i=s)}),this.minRange=Math.min(5*i,this.dataMax-this.dataMin))),f-h<this.minRange&&(e=this.dataMax-this.dataMin>=this.minRange,u=this.minRange,t=(u-f+h)/2,t=[h-t,C(d.min,h-t)],e&&(t[2]=this.isLog?this.log2lin(this.dataMin):this.dataMin),h=n(t),f=[h+u,C(d.max,h+u)],e&&(f[2]=this.isLog?this.log2lin(this.dataMax):this.dataMax),(f=r(f))-h<u&&(t[0]=f-u,t[1]=C(d.min,f-u),h=n(t))),this.min=h,this.max=f},getClosest:function(){var t;return this.categories?t=1:p(this.series,function(e){var i=e.closestPointRange,n=e.visible||!e.chart.options.chart.ignoreHiddenSeries;!e.noSharedTooltip&&l(i)&&n&&(t=l(t)?Math.min(t,i):i)}),t},nameToX:function(t){var e,i=v(this.categories),n=i?this.categories:this.names,r=t.options.x;return t.series.requireSorting=!1,l(r)||(r=!1===this.options.uniqueNames?t.series.autoIncrement():i?y(t.name,n):C(n.keys[t.name],-1)),-1===r?i||(e=n.length):e=r,void 0!==e&&(this.names[e]=t.name,this.names.keys[t.name]=e),e},updateNames:function(){var e=this,i=this.names;0<i.length&&(p(t.keys(i.keys),function(t){delete i.keys[t]}),i.length=0,this.minRange=this.userMinRange,p(this.series||[],function(t){t.xIncrement=null,t.points&&!t.isDirtyData||(t.processData(),t.generatePoints()),p(t.points,function(i,n){var r;i.options&&void 0!==(r=e.nameToX(i))&&r!==i.x&&(i.x=r,t.xData[n]=r)})}))},setAxisTranslation:function(t){var e,i=this,n=i.max-i.min,r=i.axisPointRange||0,o=0,s=0,a=i.linkedParent,l=!!i.categories,c=i.transA,u=i.isXAxis;(u||l||r)&&(e=i.getClosest(),a?(o=a.minPointOffset,s=a.pointRangePadding):p(i.series,function(t){var n=l?1:u?C(t.options.pointRange,e,0):i.axisPointRange||0;t=t.options.pointPlacement,r=Math.max(r,n),i.single||(o=Math.max(o,w(t)?0:n/2),s=Math.max(s,"on"===t?0:n))}),a=i.ordinalSlope&&e?i.ordinalSlope/e:1,i.minPointOffset=o*=a,i.pointRangePadding=s*=a,i.pointRange=Math.min(r,n),u&&(i.closestPointRange=e)),t&&(i.oldTransA=c),i.translationSlope=i.transA=c=i.options.staticScale||i.len/(n+s||1),i.transB=i.horiz?i.left:i.bottom,i.minPixelPadding=c*o,h(this,"afterSetAxisTranslation")},minFromRange:function(){return this.max-this.range},setTickInterval:function(e){var i,n,r,o,a=this,c=a.chart,u=a.options,d=a.isLog,f=a.isDatetimeAxis,g=a.isXAxis,y=a.isLinked,v=u.maxPadding,w=u.minPadding,k=u.tickInterval,T=u.tickPixelInterval,I=a.categories,_=b(a.threshold)?a.threshold:null,S=a.softThreshold;f||I||y||this.getTickAmount(),r=C(a.userMin,u.min),o=C(a.userMax,u.max),y?(a.linkedParent=c[a.coll][u.linkedTo],c=a.linkedParent.getExtremes(),a.min=C(c.min,c.dataMin),a.max=C(c.max,c.dataMax),u.type!==a.linkedParent.options.type&&t.error(11,1)):(!S&&l(_)&&(a.dataMin>=_?(i=_,w=0):a.dataMax<=_&&(n=_,v=0)),a.min=C(r,i,a.dataMin),a.max=C(o,n,a.dataMax)),d&&(a.positiveValuesOnly&&!e&&0>=Math.min(a.min,C(a.dataMin,a.min))&&t.error(10,1),a.min=s(a.log2lin(a.min),15),a.max=s(a.log2lin(a.max),15)),a.range&&l(a.max)&&(a.userMin=a.min=r=Math.max(a.dataMin,a.minFromRange()),a.userMax=o=a.max,a.range=null),h(a,"foundExtremes"),a.beforePadding&&a.beforePadding(),a.adjustForMinRange(),!(I||a.axisPointRange||a.usePercentage||y)&&l(a.min)&&l(a.max)&&(c=a.max-a.min)&&(!l(r)&&w&&(a.min-=c*w),!l(o)&&v&&(a.max+=c*v)),b(u.softMin)&&!b(a.userMin)&&(a.min=Math.min(a.min,u.softMin)),b(u.softMax)&&!b(a.userMax)&&(a.max=Math.max(a.max,u.softMax)),b(u.floor)&&(a.min=Math.max(a.min,u.floor)),b(u.ceiling)&&(a.max=Math.min(a.max,u.ceiling)),S&&l(a.dataMin)&&(_=_||0,!l(r)&&a.min<_&&a.dataMin>=_?a.min=_:!l(o)&&a.max>_&&a.dataMax<=_&&(a.max=_)),a.tickInterval=a.min===a.max||void 0===a.min||void 0===a.max?1:y&&!k&&T===a.linkedParent.options.tickPixelInterval?k=a.linkedParent.tickInterval:C(k,this.tickAmount?(a.max-a.min)/Math.max(this.tickAmount-1,1):void 0,I?1:(a.max-a.min)*T/Math.max(a.len,T)),g&&!e&&p(a.series,function(t){t.processData(a.min!==a.oldMin||a.max!==a.oldMax)}),a.setAxisTranslation(!0),a.beforeSetTickPositions&&a.beforeSetTickPositions(),a.postProcessTickInterval&&(a.tickInterval=a.postProcessTickInterval(a.tickInterval)),a.pointRange&&!k&&(a.tickInterval=Math.max(a.pointRange,a.tickInterval)),e=C(u.minTickInterval,a.isDatetimeAxis&&a.closestPointRange),!k&&a.tickInterval<e&&(a.tickInterval=e),f||d||k||(a.tickInterval=x(a.tickInterval,null,m(a.tickInterval),C(u.allowDecimals,!(.5<a.tickInterval&&5>a.tickInterval&&1e3<a.max&&9999>a.max)),!!this.tickAmount)),this.tickAmount||(a.tickInterval=a.unsquish()),this.setTickPositions()},setTickPositions:function(){var t,e=this.options,i=e.tickPositions;t=this.getMinorTickInterval();var n=e.tickPositioner,r=e.startOnTick,o=e.endOnTick;this.tickmarkOffset=this.categories&&"between"===e.tickmarkPlacement&&1===this.tickInterval?.5:0,this.minorTickInterval="auto"===t&&this.tickInterval?this.tickInterval/5:t,this.single=this.min===this.max&&l(this.min)&&!this.tickAmount&&(parseInt(this.min,10)===this.min||!1!==e.allowDecimals),this.tickPositions=t=i&&i.slice(),!t&&(t=this.isDatetimeAxis?this.getTimeTicks(this.normalizeTimeTickInterval(this.tickInterval,e.units),this.min,this.max,e.startOfWeek,this.ordinalPositions,this.closestPointRange,!0):this.isLog?this.getLogTickPositions(this.tickInterval,this.min,this.max):this.getLinearTickPositions(this.tickInterval,this.min,this.max),t.length>this.len&&(t=[t[0],t.pop()],t[0]===t[1]&&(t.length=1)),this.tickPositions=t,n&&(n=n.apply(this,[this.min,this.max])))&&(this.tickPositions=t=n),this.paddedTicks=t.slice(0),this.trimTicks(t,r,o),this.isLinked||(this.single&&2>t.length&&(this.min-=.5,this.max+=.5),i||n||this.adjustTickAmount()),h(this,"afterSetTickPositions")},trimTicks:function(t,e,i){var n=t[0],r=t[t.length-1],o=this.minPointOffset||0;if(!this.isLinked){if(e&&-1/0!==n)this.min=n;else for(;this.min-o>t[0];)t.shift();if(i)this.max=r;else for(;this.max+o<t[t.length-1];)t.pop();0===t.length&&l(n)&&!this.options.tickPositions&&t.push((r+n)/2)}},alignToOthers:function(){var t,e={},i=this.options;return!1===this.chart.options.chart.alignTicks||!1===i.alignTicks||!1===i.startOnTick||!1===i.endOnTick||this.isLog||p(this.chart[this.coll],function(i){var n=i.options,n=[i.horiz?n.left:n.top,n.width,n.height,n.pane].join();i.series.length&&(e[n]?t=!0:e[n]=1)}),t},getTickAmount:function(){var t=this.options,e=t.tickAmount,i=t.tickPixelInterval;!l(t.tickInterval)&&this.len<i&&!this.isRadial&&!this.isLog&&t.startOnTick&&t.endOnTick&&(e=2),!e&&this.alignToOthers()&&(e=Math.ceil(this.len/i)+1),4>e&&(this.finalTickAmt=e,e=5),this.tickAmount=e},adjustTickAmount:function(){var t=this.tickInterval,e=this.tickPositions,i=this.tickAmount,n=this.finalTickAmt,r=e&&e.length,o=C(this.threshold,this.softThreshold?0:null);if(this.hasData()){if(r<i){for(;e.length<i;)e.length%2||this.min===o?e.push(s(e[e.length-1]+t)):e.unshift(s(e[0]-t));this.transA*=(r-1)/(i-1),this.min=e[0],this.max=e[e.length-1]}else r>i&&(this.tickInterval*=2,this.setTickPositions());if(l(n)){for(t=i=e.length;t--;)(3===n&&1==t%2||2>=n&&0<t&&t<i-1)&&e.splice(t,1);this.finalTickAmt=void 0}}},setScale:function(){var t,e;this.oldMin=this.min,this.oldMax=this.max,this.oldAxisLength=this.len,this.setAxisSize(),e=this.len!==this.oldAxisLength,p(this.series,function(e){(e.isDirtyData||e.isDirty||e.xAxis.isDirty)&&(t=!0)}),e||t||this.isLinked||this.forceRedraw||this.userMin!==this.oldUserMin||this.userMax!==this.oldUserMax||this.alignToOthers()?(this.resetStacks&&this.resetStacks(),this.forceRedraw=!1,this.getSeriesExtremes(),this.setTickInterval(),this.oldUserMin=this.userMin,this.oldUserMax=this.userMax,this.isDirty||(this.isDirty=e||this.min!==this.oldMin||this.max!==this.oldMax)):this.cleanStacks&&this.cleanStacks(),h(this,"afterSetScale")},setExtremes:function(t,e,i,n,r){var o=this,s=o.chart;i=C(i,!0),p(o.series,function(t){delete t.kdTree}),r=d(r,{min:t,max:e}),h(o,"setExtremes",r,function(){o.userMin=t,o.userMax=e,o.eventArgs=r,i&&s.redraw(n)})},zoom:function(t,e){var i=this.dataMin,n=this.dataMax,r=this.options,o=Math.min(i,C(r.min,i)),r=Math.max(n,C(r.max,n));return t===this.min&&e===this.max||(this.allowZoomOutside||(l(i)&&(t<o&&(t=o),t>r&&(t=r)),l(n)&&(e<o&&(e=o),e>r&&(e=r))),this.displayBtn=void 0!==t||void 0!==e,this.setExtremes(t,e,!1,void 0,{trigger:"zoom"})),!0},setAxisSize:function(){var e=this.chart,i=this.options,n=i.offsets||[0,0,0,0],r=this.horiz,o=this.width=Math.round(t.relativeLength(C(i.width,e.plotWidth-n[3]+n[1]),e.plotWidth)),s=this.height=Math.round(t.relativeLength(C(i.height,e.plotHeight-n[0]+n[2]),e.plotHeight)),a=this.top=Math.round(t.relativeLength(C(i.top,e.plotTop+n[0]),e.plotHeight,e.plotTop)),i=this.left=Math.round(t.relativeLength(C(i.left,e.plotLeft+n[3]),e.plotWidth,e.plotLeft));this.bottom=e.chartHeight-s-a,this.right=e.chartWidth-o-i,this.len=Math.max(r?o:s,0),this.pos=r?i:a},getExtremes:function(){var t=this.isLog;return{min:t?s(this.lin2log(this.min)):this.min,max:t?s(this.lin2log(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},getThreshold:function(t){var e=this.isLog,i=e?this.lin2log(this.min):this.min,e=e?this.lin2log(this.max):this.max;return null===t||-1/0===t?t=i:1/0===t?t=e:i>t?t=i:e<t&&(t=e),this.translate(t,0,1,0,1)},autoLabelAlign:function(t){return t=(C(t,0)-90*this.side+720)%360,15<t&&165>t?"right":195<t&&345>t?"left":"center"},tickSize:function(t){var e=this.options,i=e[t+"Length"],n=C(e[t+"Width"],"tick"===t&&this.isXAxis?1:0);if(n&&i)return"inside"===e[t+"Position"]&&(i=-i),[i,n]},labelMetrics:function(){var t=this.tickPositions&&this.tickPositions[0]||0;return this.chart.renderer.fontMetrics(this.options.labels.style&&this.options.labels.style.fontSize,this.ticks[t]&&this.ticks[t].label)},unsquish:function(){var t,e,i,n=this.options.labels,r=this.horiz,o=this.tickInterval,a=o,u=this.len/(((this.categories?1:0)+this.max-this.min)/o),d=n.rotation,h=this.labelMetrics(),f=Number.MAX_VALUE,m=function(t){return t/=u||1,t=1<t?Math.ceil(t):1,s(t*o)};return r?(i=!n.staggerLines&&!n.step&&(l(d)?[d]:u<C(n.autoRotationLimit,80)&&n.autoRotation))&&p(i,function(i){var n;(i===d||i&&-90<=i&&90>=i)&&(e=m(Math.abs(h.h/Math.sin(c*i))),(n=e+Math.abs(i/360))<f&&(f=n,t=i,a=e))}):n.step||(a=m(h.h)),this.autoRotation=i,this.labelRotation=C(t,d),a},getSlotWidth:function(){var t=this.chart,e=this.horiz,i=this.options.labels,n=Math.max(this.tickPositions.length-(this.categories?0:1),1),r=t.margin[3];return e&&2>(i.step||0)&&!i.rotation&&(this.staggerLines||1)*this.len/n||!e&&(i.style&&parseInt(i.style.width,10)||r&&r-t.spacing[3]||.33*t.chartWidth)},renderUnsquish:function(){var t,e,i,n=this.chart,r=n.renderer,o=this.tickPositions,s=this.ticks,a=this.options.labels,l=this.horiz,c=this.getSlotWidth(),u=Math.max(1,Math.round(c-2*(a.padding||5))),d={},h=this.labelMetrics(),f=a.style&&a.style.textOverflow,m=0;if(w(a.rotation)||(d.rotation=a.rotation||0),p(o,function(t){(t=s[t])&&t.label&&t.label.textPxLength>m&&(m=t.label.textPxLength)}),this.maxLabelLength=m,this.autoRotation)m>u&&m>h.h?d.rotation=this.labelRotation:this.labelRotation=0;else if(c&&(t=u,!f))for(e="clip",u=o.length;!l&&u--;)i=o[u],(i=s[i].label)&&(i.styles&&"ellipsis"===i.styles.textOverflow?i.css({textOverflow:"clip"}):i.textPxLength>c&&i.css({width:c+"px"}),i.getBBox().height>this.len/o.length-(h.h-h.f)&&(i.specificTextOverflow="ellipsis"));d.rotation&&(t=m>.5*n.chartHeight?.33*n.chartHeight:n.chartHeight,f||(e="ellipsis")),(this.labelAlign=a.align||this.autoLabelAlign(this.labelRotation))&&(d.align=this.labelAlign),p(o,function(i){var n=(i=s[i])&&i.label,r={};n&&(n.attr(d),!t||a.style&&a.style.width||!(t<n.textPxLength||"SPAN"===n.element.tagName)||(r.width=t,f||(r.textOverflow=n.specificTextOverflow||e),n.css(r)),delete n.specificTextOverflow,i.rotation=d.rotation)}),this.tickRotCorr=r.rotCorr(h.b,this.labelRotation||0,0!==this.side)},hasData:function(){return this.hasVisibleSeries||l(this.min)&&l(this.max)&&this.tickPositions&&0<this.tickPositions.length},addTitle:function(t){var e,i=this.chart.renderer,n=this.horiz,r=this.opposite,o=this.options.title;this.axisTitle||((e=o.textAlign)||(e=(n?{low:"left",middle:"center",high:"right"}:{low:r?"right":"left",middle:"center",high:r?"left":"right"})[o.align]),this.axisTitle=i.text(o.text,0,0,o.useHTML).attr({zIndex:7,rotation:o.rotation||0,align:e}).addClass("highcharts-axis-title").css(k(o.style)).add(this.axisGroup),this.axisTitle.isNew=!0),o.style.width||this.isRadial||this.axisTitle.css({width:this.len}),this.axisTitle[t?"show":"hide"](!0)},generateTick:function(t){var e=this.ticks;e[t]?e[t].addLabel():e[t]=new A(this,t)},getOffset:function(){var t,e,i,n=this,r=n.chart,o=r.renderer,s=n.options,a=n.tickPositions,c=n.ticks,u=n.horiz,d=n.side,h=r.inverted&&!n.isZAxis?[1,0,3,2][d]:d,f=0,m=0,g=s.title,y=s.labels,v=0,b=r.axisOffset,r=r.clipOffset,w=[-1,1,1,-1][d],k=s.className,x=n.axisParent,I=this.tickSize("tick");t=n.hasData(),n.showAxis=e=t||C(s.showEmpty,!0),n.staggerLines=n.horiz&&y.staggerLines,n.axisGroup||(n.gridGroup=o.g("grid").attr({zIndex:s.gridZIndex||1}).addClass("highcharts-"+this.coll.toLowerCase()+"-grid "+(k||"")).add(x),n.axisGroup=o.g("axis").attr({zIndex:s.zIndex||2}).addClass("highcharts-"+this.coll.toLowerCase()+" "+(k||"")).add(x),n.labelGroup=o.g("axis-labels").attr({zIndex:y.zIndex||7}).addClass("highcharts-"+n.coll.toLowerCase()+"-labels "+(k||"")).add(x)),t||n.isLinked?(p(a,function(t,e){n.generateTick(t,e)}),n.renderUnsquish(),n.reserveSpaceDefault=0===d||2===d||{1:"left",3:"right"}[d]===n.labelAlign,C(y.reserveSpace,"center"===n.labelAlign||null,n.reserveSpaceDefault)&&p(a,function(t){v=Math.max(c[t].getLabelSize(),v)}),n.staggerLines&&(v*=n.staggerLines),n.labelOffset=v*(n.opposite?-1:1)):T(c,function(t,e){t.destroy(),delete c[e]}),g&&g.text&&!1!==g.enabled&&(n.addTitle(e),e&&!1!==g.reserveSpace&&(n.titleOffset=f=n.axisTitle.getBBox()[u?"height":"width"],i=g.offset,m=l(i)?0:C(g.margin,u?5:10))),n.renderLine(),n.offset=w*C(s.offset,b[d]),n.tickRotCorr=n.tickRotCorr||{x:0,y:0},o=0===d?-n.labelMetrics().h:2===d?n.tickRotCorr.y:0,m=Math.abs(v)+m,v&&(m=m-o+w*(u?C(y.y,n.tickRotCorr.y+8*w):y.x)),n.axisTitleMargin=C(i,m),b[d]=Math.max(b[d],n.axisTitleMargin+f+w*n.offset,m,t&&a.length&&I?I[0]+w*n.offset:0),s=s.offset?0:2*Math.floor(n.axisLine.strokeWidth()/2),r[h]=Math.max(r[h],s)},getLinePath:function(t){var e=this.chart,i=this.opposite,n=this.offset,r=this.horiz,o=this.left+(i?this.width:0)+n,n=e.chartHeight-this.bottom-(i?this.height:0)+n;return i&&(t*=-1),e.renderer.crispLine(["M",r?this.left:o,r?n:this.top,"L",r?e.chartWidth-this.right:o,r?n:e.chartHeight-this.bottom],t)},renderLine:function(){this.axisLine||(this.axisLine=this.chart.renderer.path().addClass("highcharts-axis-line").add(this.axisGroup),this.axisLine.attr({stroke:this.options.lineColor,"stroke-width":this.options.lineWidth,zIndex:7}))},getTitlePosition:function(){var t=this.horiz,e=this.left,i=this.top,n=this.len,r=this.options.title,o=t?e:i,s=this.opposite,a=this.offset,l=r.x||0,c=r.y||0,u=this.axisTitle,p=this.chart.renderer.fontMetrics(r.style&&r.style.fontSize,u),u=Math.max(u.getBBox(null,0).height-p.h-1,0),n={low:o+(t?0:n),middle:o+n/2,high:o+(t?n:0)}[r.align],e=(t?i+this.height:e)+(t?1:-1)*(s?-1:1)*this.axisTitleMargin+[-u,u,p.f,-u][this.side];return{x:t?n+l:e+(s?this.width:0)+a+l,y:t?e+c-(s?this.height:0)+a:n+c}},renderMinorTick:function(t){var e=this.chart.hasRendered&&b(this.oldMin),i=this.minorTicks;i[t]||(i[t]=new A(this,t,"minor")),e&&i[t].isNew&&i[t].render(null,!0),i[t].render(null,!1,1)},renderTick:function(t,e){var i=this.isLinked,n=this.ticks,r=this.chart.hasRendered&&b(this.oldMin);(!i||t>=this.min&&t<=this.max)&&(n[t]||(n[t]=new A(this,t)),r&&n[t].isNew&&n[t].render(e,!0,.1),n[t].render(e))},render:function(){var e,n,r=this,o=r.chart,s=r.options,a=r.isLog,l=r.isLinked,c=r.tickPositions,u=r.axisTitle,d=r.ticks,f=r.minorTicks,m=r.alternateBands,g=s.stackLabels,y=s.alternateGridColor,v=r.tickmarkOffset,w=r.axisLine,k=r.showAxis,x=i(o.renderer.globalAnimation);r.labelEdge.length=0,r.overlap=!1,p([d,f,m],function(t){T(t,function(t){t.isActive=!1})}),(r.hasData()||l)&&(r.minorTickInterval&&!r.categories&&p(r.getMinorTickPositions(),function(t){r.renderMinorTick(t)}),c.length&&(p(c,function(t,e){r.renderTick(t,e)}),v&&(0===r.min||r.single)&&(d[-1]||(d[-1]=new A(r,-1,null,!0)),d[-1].render(-1))),y&&p(c,function(i,s){n=void 0!==c[s+1]?c[s+1]+v:r.max-v,0==s%2&&i<r.max&&n<=r.max+(o.polar?-v:v)&&(m[i]||(m[i]=new t.PlotLineOrBand(r)),e=i+v,m[i].options={from:a?r.lin2log(e):e,to:a?r.lin2log(n):n,color:y},m[i].render(),m[i].isActive=!0)}),r._addedPlotLB||(p((s.plotLines||[]).concat(s.plotBands||[]),function(t){r.addPlotBandOrLine(t)}),r._addedPlotLB=!0)),p([d,f,m],function(t){var e,i=[],n=x.duration;T(t,function(t,e){t.isActive||(t.render(e,!1,0),t.isActive=!1,i.push(e))}),S(function(){for(e=i.length;e--;)t[i[e]]&&!t[i[e]].isActive&&(t[i[e]].destroy(),delete t[i[e]])},t!==m&&o.hasRendered&&n?n:0)}),w&&(w[w.isPlaced?"animate":"attr"]({d:this.getLinePath(w.strokeWidth())}),w.isPlaced=!0,w[k?"show":"hide"](!0)),u&&k&&(s=r.getTitlePosition(),b(s.y)?(u[u.isNew?"attr":"animate"](s),u.isNew=!1):(u.attr("y",-9999),u.isNew=!0)),g&&g.enabled&&r.renderStackTotals(),r.isDirty=!1,h(this,"afterRender")},redraw:function(){this.visible&&(this.render(),p(this.plotLinesAndBands,function(t){t.render()})),p(this.series,function(t){t.isDirty=!0})},keepProps:"extKey hcEvents names series userMax userMin".split(" "),destroy:function(t){var e,i=this,n=i.stacks,r=i.plotLinesAndBands;if(h(this,"destroy",{keepEvents:t}),t||I(i),T(n,function(t,e){u(t),n[e]=null}),p([i.ticks,i.minorTicks,i.alternateBands],function(t){u(t)}),r)for(t=r.length;t--;)r[t].destroy();p("stackTotalGroup axisLine axisTitle axisGroup gridGroup labelGroup cross".split(" "),function(t){i[t]&&(i[t]=i[t].destroy())});for(e in i.plotLinesAndBandsGroups)i.plotLinesAndBandsGroups[e]=i.plotLinesAndBandsGroups[e].destroy();T(i,function(t,e){-1===y(e,i.keepProps)&&delete i[e]})},drawCrosshair:function(t,e){var i,n,r=this.crosshair,s=C(r.snap,!0),a=this.cross;if(h(this,"drawCrosshair",{e:t,point:e}),t||(t=this.cross&&this.cross.e),this.crosshair&&!1!==(l(e)||!s)){if(s?l(e)&&(n=C(e.crosshairPos,this.isXAxis?e.plotX:this.len-e.plotY)):n=t&&(this.horiz?t.chartX-this.pos:this.len-t.chartY+this.pos),l(n)&&(i=this.getPlotLinePath(e&&(this.isXAxis?e.x:C(e.stackY,e.y)),null,null,null,n)||null),!l(i))return void this.hideCrosshair();s=this.categories&&!this.isRadial,a||(this.cross=a=this.chart.renderer.path().addClass("highcharts-crosshair highcharts-crosshair-"+(s?"category ":"thin ")+r.className).attr({zIndex:C(r.zIndex,2)}).add(),a.attr({stroke:r.color||(s?o("#ccd6eb").setOpacity(.25).get():"#cccccc"),"stroke-width":C(r.width,1)}).css({"pointer-events":"none"}),r.dashStyle&&a.attr({dashstyle:r.dashStyle})),a.show().attr({d:i}),s&&!r.width&&a.attr({"stroke-width":this.transA}),this.cross.e=t}else this.hideCrosshair();h(this,"afterDrawCrosshair",{e:t,point:e})},hideCrosshair:function(){this.cross&&this.cross.hide()}}),t.Axis=O}(e);return function(t){var e=t.Axis,i=t.getMagnitude,n=t.normalizeTickInterval,r=t.timeUnits;e.prototype.getTimeTicks=function(){return this.chart.time.getTimeTicks.apply(this.chart.time,arguments)},e.prototype.normalizeTimeTickInterval=function(t,e){var o=e||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]];e=o[o.length-1];var s,a=r[e[0]],l=e[1];for(s=0;s<o.length&&(e=o[s],a=r[e[0]],l=e[1],!(o[s+1]&&t<=(a*l[l.length-1]+r[o[s+1][0]])/2));s++);return a===r.year&&t<5*a&&(l=[1,2,5]),t=n(t/a,l,"year"===e[0]?Math.max(i(t/a),1):1),{unitRange:a,count:t,unitName:e[0]}}}(e),function(t){var e=t.Axis,i=t.getMagnitude,n=t.map,r=t.normalizeTickInterval,o=t.pick;e.prototype.getLogTickPositions=function(t,e,s,a){var l=this.options,c=this.len,u=[];if(a||(this._minorAutoInterval=null),.5<=t)t=Math.round(t),u=this.getLinearTickPositions(t,e,s);else if(.08<=t)for(var p,d,h,f,m,c=Math.floor(e),l=.3<t?[1,2,4]:.15<t?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];c<s+1&&!m;c++)for(d=l.length,p=0;p<d&&!m;p++)h=this.log2lin(this.lin2log(c)*l[p]),h>e&&(!a||f<=s)&&void 0!==f&&u.push(f),f>s&&(m=!0),f=h;else e=this.lin2log(e),s=this.lin2log(s),t=a?this.getMinorTickInterval():l.tickInterval,t=o("auto"===t?null:t,this._minorAutoInterval,l.tickPixelInterval/(a?5:1)*(s-e)/((a?c/this.tickPositions.length:c)||1)),t=r(t,null,i(t)),u=n(this.getLinearTickPositions(t,e,s),this.log2lin),a||(this._minorAutoInterval=t/5);return a||(this.tickInterval=t),u},e.prototype.log2lin=function(t){return Math.log(t)/Math.LN10},e.prototype.lin2log=function(t){return Math.pow(10,t)}}(e),function(t,e){var i=t.arrayMax,n=t.arrayMin,r=t.defined,o=t.destroyObjectProperties,s=t.each,a=t.erase,l=t.merge,c=t.pick;t.PlotLineOrBand=function(t,e){this.axis=t,e&&(this.options=e,this.id=e.id)},t.PlotLineOrBand.prototype={render:function(){var e=this,i=e.axis,n=i.horiz,o=e.options,s=o.label,a=e.label,u=o.to,p=o.from,d=o.value,h=r(p)&&r(u),f=r(d),m=e.svgElem,g=!m,y=[],v=o.color,b=c(o.zIndex,0),w=o.events,y={class:"highcharts-plot-"+(h?"band ":"line ")+(o.className||"")},k={},x=i.chart.renderer,T=h?"bands":"lines";if(i.isLog&&(p=i.log2lin(p),u=i.log2lin(u),d=i.log2lin(d)),f?(y={stroke:v,"stroke-width":o.width},o.dashStyle&&(y.dashstyle=o.dashStyle)):h&&(v&&(y.fill=v),o.borderWidth&&(y.stroke=o.borderColor,y["stroke-width"]=o.borderWidth)),k.zIndex=b,T+="-"+b,(v=i.plotLinesAndBandsGroups[T])||(i.plotLinesAndBandsGroups[T]=v=x.g("plot-"+T).attr(k).add()),g&&(e.svgElem=m=x.path().attr(y).add(v)),f)y=i.getPlotLinePath(d,m.strokeWidth());else{if(!h)return;y=i.getPlotBandPath(p,u,o)}return g&&y&&y.length?(m.attr({d:y}),w&&t.objectEach(w,function(t,i){m.on(i,function(t){w[i].apply(e,[t])})})):m&&(y?(m.show(),m.animate({d:y})):(m.hide(),a&&(e.label=a=a.destroy()))),s&&r(s.text)&&y&&y.length&&0<i.width&&0<i.height&&!y.flat?(s=l({align:n&&h&&"center",x:n?!h&&4:10,verticalAlign:!n&&h&&"middle",y:n?h?16:10:h?6:-4,rotation:n&&!h&&90},s),this.renderLabel(s,y,h,b)):a&&a.hide(),e},renderLabel:function(t,e,r,o){var s=this.label,a=this.axis.chart.renderer;s||(s={align:t.textAlign||t.align,rotation:t.rotation,class:"highcharts-plot-"+(r?"band":"line")+"-label "+(t.className||"")},s.zIndex=o,this.label=s=a.text(t.text,0,0,t.useHTML).attr(s).add(),s.css(t.style)),o=e.xBounds||[e[1],e[4],r?e[6]:e[1]],e=e.yBounds||[e[2],e[5],r?e[7]:e[2]],r=n(o),a=n(e),s.align(t,!1,{x:r,y:a,width:i(o)-r,height:i(e)-a}),s.show()},destroy:function(){a(this.axis.plotLinesAndBands,this),delete this.axis,o(this)}},t.extend(e.prototype,{getPlotBandPath:function(t,e){var i,n=this.getPlotLinePath(e,null,null,!0),r=this.getPlotLinePath(t,null,null,!0),o=[],s=this.horiz,a=1;if(t=t<this.min&&e<this.min||t>this.max&&e>this.max,r&&n)for(t&&(i=r.toString()===n.toString(),a=0),t=0;t<r.length;t+=6)s&&n[t+1]===r[t+1]?(n[t+1]+=a,n[t+4]+=a):s||n[t+2]!==r[t+2]||(n[t+2]+=a,n[t+5]+=a),o.push("M",r[t+1],r[t+2],"L",r[t+4],r[t+5],n[t+4],n[t+5],n[t+1],n[t+2],"z"),o.flat=i;return o},addPlotBand:function(t){return this.addPlotBandOrLine(t,"plotBands")},addPlotLine:function(t){return this.addPlotBandOrLine(t,"plotLines")},addPlotBandOrLine:function(e,i){var n=new t.PlotLineOrBand(this,e).render(),r=this.userOptions;return n&&(i&&(r[i]=r[i]||[],r[i].push(e)),this.plotLinesAndBands.push(n)),n},removePlotBandOrLine:function(t){for(var e=this.plotLinesAndBands,i=this.options,n=this.userOptions,r=e.length;r--;)e[r].id===t&&e[r].destroy();s([i.plotLines||[],n.plotLines||[],i.plotBands||[],n.plotBands||[]],function(e){for(r=e.length;r--;)e[r].id===t&&a(e,e[r])})},removePlotBand:function(t){this.removePlotBandOrLine(t)},removePlotLine:function(t){this.removePlotBandOrLine(t)}})}(e,i),function(t){var e=t.each,i=t.extend,n=t.format,r=t.isNumber,o=t.map,s=t.merge,a=t.pick,l=t.splat,c=t.syncTimeout,u=t.timeUnits;t.Tooltip=function(){this.init.apply(this,arguments)},t.Tooltip.prototype={init:function(t,e){this.chart=t,this.options=e,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.split=e.split&&!t.inverted,this.shared=e.shared||this.split},cleanSplit:function(t){e(this.chart.series,function(e){var i=e&&e.tt;i&&(!i.isActive||t?e.tt=i.destroy():i.isActive=!1)})},getLabel:function(){var t=this.chart.renderer,e=this.options;return this.label||(this.split?this.label=t.g("tooltip"):(this.label=t.label("",0,0,e.shape||"callout",null,null,e.useHTML,null,"tooltip").attr({padding:e.padding,r:e.borderRadius}),this.label.attr({fill:e.backgroundColor,"stroke-width":e.borderWidth}).css(e.style).shadow(e.shadow)),this.label.attr({zIndex:8}).add()),this.label},update:function(t){this.destroy(),s(!0,this.chart.options.tooltip.userOptions,t),this.init(this.chart,s(!0,this.options,t))},destroy:function(){this.label&&(this.label=this.label.destroy()),this.split&&this.tt&&(this.cleanSplit(this.chart,!0),this.tt=this.tt.destroy()),t.clearTimeout(this.hideTimer),t.clearTimeout(this.tooltipTimeout)},move:function(e,n,r,o){var s=this,a=s.now,l=!1!==s.options.animation&&!s.isHidden&&(1<Math.abs(e-a.x)||1<Math.abs(n-a.y)),c=s.followPointer||1<s.len;i(a,{x:l?(2*a.x+e)/3:e,y:l?(a.y+n)/2:n,anchorX:c?void 0:l?(2*a.anchorX+r)/3:r,anchorY:c?void 0:l?(a.anchorY+o)/2:o}),s.getLabel().attr(a),l&&(t.clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){s&&s.move(e,n,r,o)},32))},hide:function(e){var i=this;t.clearTimeout(this.hideTimer),e=a(e,this.options.hideDelay,500),this.isHidden||(this.hideTimer=c(function(){i.getLabel()[e?"fadeOut":"hide"](),i.isHidden=!0},e))},getAnchor:function(t,i){var n,r,s,a=this.chart,c=a.inverted,u=a.plotTop,p=a.plotLeft,d=0,h=0;return t=l(t),n=t[0].tooltipPos,this.followPointer&&i&&(void 0===i.chartX&&(i=a.pointer.normalize(i)),n=[i.chartX-a.plotLeft,i.chartY-u]),n||(e(t,function(t){r=t.series.yAxis,s=t.series.xAxis,d+=t.plotX+(!c&&s?s.left-p:0),h+=(t.plotLow?(t.plotLow+t.plotHigh)/2:t.plotY)+(!c&&r?r.top-u:0)}),d/=t.length,h/=t.length,n=[c?a.plotWidth-h:d,this.shared&&!c&&1<t.length&&i?i.chartY-u:c?a.plotHeight-d:h]),o(n,Math.round)},getPosition:function(t,e,i){var n,r=this.chart,o=this.distance,s={},l=r.inverted&&i.h||0,c=["y",r.chartHeight,e,i.plotY+r.plotTop,r.plotTop,r.plotTop+r.plotHeight],u=["x",r.chartWidth,t,i.plotX+r.plotLeft,r.plotLeft,r.plotLeft+r.plotWidth],p=!this.followPointer&&a(i.ttBelow,!r.inverted==!!i.negative),d=function(t,e,i,n,r,a){var c=i<n-o,u=n+o+i<e,d=n-o-i;if(n+=o,p&&u)s[t]=n;else if(!p&&c)s[t]=d;else if(c)s[t]=Math.min(a-i,0>d-l?d:d-l);else{if(!u)return!1;s[t]=Math.max(r,n+l+i>e?n:n+l)}},h=function(t,e,i,n){var r;return n<o||n>e-o?r=!1:s[t]=n<i/2?1:n>e-i/2?e-i-2:n-i/2,r},f=function(t){var e=c;c=u,u=e,n=t},m=function(){!1!==d.apply(0,c)?!1!==h.apply(0,u)||n||(f(!0),m()):n?s.x=s.y=0:(f(!0),m())};return(r.inverted||1<this.len)&&f(),m(),s},defaultFormatter:function(t){var e,i=this.points||l(this);return e=[t.tooltipFooterHeaderFormatter(i[0])],e=e.concat(t.bodyFormatter(i)),e.push(t.tooltipFooterHeaderFormatter(i[0],!0)),e},refresh:function(i,n){var r,o,s,c=this.options,u=i,p={},d=[];r=c.formatter||this.defaultFormatter;var h,p=this.shared;c.enabled&&(t.clearTimeout(this.hideTimer),this.followPointer=l(u)[0].series.tooltipOptions.followPointer,s=this.getAnchor(u,n),n=s[0],o=s[1],!p||u.series&&u.series.noSharedTooltip?p=u.getLabelConfig():(e(u,function(t){t.setState("hover"),d.push(t.getLabelConfig())}),p={x:u[0].category,y:u[0].y},p.points=d,u=u[0]),this.len=d.length,p=r.call(p,this),h=u.series,this.distance=a(h.tooltipOptions.distance,16),!1===p?this.hide():(r=this.getLabel(),this.isHidden&&r.attr({opacity:1}).show(),this.split?this.renderSplit(p,l(i)):(c.style.width||r.css({width:this.chart.spacingBox.width}),r.attr({text:p&&p.join?p.join(""):p}),r.removeClass(/highcharts-color-[\d]+/g).addClass("highcharts-color-"+a(u.colorIndex,h.colorIndex)),r.attr({stroke:c.borderColor||u.color||h.color||"#666666"}),this.updatePosition({plotX:n,plotY:o,negative:u.negative,ttBelow:u.ttBelow,h:s[2]||0})),this.isHidden=!1))},renderSplit:function(i,n){var r=this,o=[],s=this.chart,l=s.renderer,c=!0,u=this.options,p=0,d=this.getLabel();t.isString(i)&&(i=[!1,i]),e(i.slice(0,n.length+1),function(t,e){if(!1!==t){e=n[e-1]||{isHeader:!0,plotX:n[0].plotX};var i=e.series||r,h=i.tt,f=e.series||{},m="highcharts-color-"+a(e.colorIndex,f.colorIndex,"none");h||(i.tt=h=l.label(null,null,null,"callout",null,null,u.useHTML).addClass("highcharts-tooltip-box "+m).attr({padding:u.padding,r:u.borderRadius,fill:u.backgroundColor,stroke:u.borderColor||e.color||f.color||"#333333","stroke-width":u.borderWidth}).add(d)),h.isActive=!0,h.attr({text:t}),h.css(u.style).shadow(u.shadow),t=h.getBBox(),f=t.width+h.strokeWidth(),e.isHeader?(p=t.height,f=Math.max(0,Math.min(e.plotX+s.plotLeft-f/2,s.chartWidth-f))):f=e.plotX+s.plotLeft-a(u.distance,16)-f,0>f&&(c=!1),t=(e.series&&e.series.yAxis&&e.series.yAxis.pos)+(e.plotY||0),t-=s.plotTop,o.push({target:e.isHeader?s.plotHeight+p:t,rank:e.isHeader?1:0,size:i.tt.getBBox().height+1,point:e,x:f,tt:h})}}),this.cleanSplit(),t.distribute(o,s.plotHeight+p),e(o,function(t){var e=t.point,i=e.series;t.tt.attr({visibility:void 0===t.pos?"hidden":"inherit",x:c||e.isHeader?t.x:e.plotX+s.plotLeft+a(u.distance,16),y:t.pos+s.plotTop,anchorX:e.isHeader?e.plotX+s.plotLeft:e.plotX+i.xAxis.pos,anchorY:e.isHeader?t.pos+s.plotTop-15:e.plotY+i.yAxis.pos})})},updatePosition:function(t){var e=this.chart,i=this.getLabel(),i=(this.options.positioner||this.getPosition).call(this,i.width,i.height,t);this.move(Math.round(i.x),Math.round(i.y||0),t.plotX+e.plotLeft,t.plotY+e.plotTop)},getDateFormat:function(t,e,i,n){var r,o,s=this.chart.time,a=s.dateFormat("%m-%d %H:%M:%S.%L",e),l={millisecond:15,second:12,minute:9,hour:6,day:3},c="millisecond";for(o in u){if(t===u.week&&+s.dateFormat("%w",e)===i&&"00:00:00.000"===a.substr(6)){o="week";break}if(u[o]>t){o=c;break}if(l[o]&&a.substr(l[o])!=="01-01 00:00:00.000".substr(l[o]))break;"week"!==o&&(c=o)}return o&&(r=n[o]),r},getXDateFormat:function(t,e,i){e=e.dateTimeLabelFormats;var n=i&&i.closestPointRange;return(n?this.getDateFormat(n,t.x,i.options.startOfWeek,e):e.day)||e.year},tooltipFooterHeaderFormatter:function(t,i){i=i?"footer":"header";var o=t.series,s=o.tooltipOptions,a=s.xDateFormat,l=o.xAxis,c=l&&"datetime"===l.options.type&&r(t.key),u=s[i+"Format"];return c&&!a&&(a=this.getXDateFormat(t,s,l)),c&&a&&e(t.point&&t.point.tooltipDateKeys||["key"],function(t){u=u.replace("{point."+t+"}","{point."+t+":"+a+"}")}),n(u,{point:t,series:o},this.chart.time)},bodyFormatter:function(t){return o(t,function(t){var e=t.series.tooltipOptions;return(e[(t.point.formatPrefix||"point")+"Formatter"]||t.point.tooltipFormatter).call(t.point,e[(t.point.formatPrefix||"point")+"Format"])})}}}(e),function(t){var e=t.addEvent,i=t.attr,n=t.charts,r=t.color,o=t.css,s=t.defined,a=t.each,l=t.extend,c=t.find,u=t.fireEvent,p=t.isNumber,d=t.isObject,h=t.offset,f=t.pick,m=t.splat,g=t.Tooltip;t.Pointer=function(t,e){this.init(t,e)},t.Pointer.prototype={init:function(t,e){this.options=e,this.chart=t,this.runChartClick=e.chart.events&&!!e.chart.events.click,this.pinchDown=[],this.lastValidTouch={},g&&(t.tooltip=new g(t,e.tooltip),this.followTouchMove=f(e.tooltip.followTouchMove,!0)),this.setDOMEvents()},zoomOption:function(t){var e=this.chart,i=e.options.chart,n=i.zoomType||"",e=e.inverted;/touch/.test(t.type)&&(n=f(i.pinchType,n)),this.zoomX=t=/x/.test(n),this.zoomY=n=/y/.test(n),this.zoomHor=t&&!e||n&&e,this.zoomVert=n&&!e||t&&e,this.hasZoom=t||n},normalize:function(t,e){var i;return i=t.touches?t.touches.length?t.touches.item(0):t.changedTouches[0]:t,e||(this.chartPosition=e=h(this.chart.container)),l(t,{chartX:Math.round(i.pageX-e.left),chartY:Math.round(i.pageY-e.top)})},getCoordinates:function(t){var e={xAxis:[],yAxis:[]};return a(this.chart.axes,function(i){e[i.isXAxis?"xAxis":"yAxis"].push({axis:i,value:i.toValue(t[i.horiz?"chartX":"chartY"])})}),e},findNearestKDPoint:function(t,e,i){var n;return a(t,function(t){var r=!(t.noSharedTooltip&&e)&&0>t.options.findNearestPointBy.indexOf("y");if(t=t.searchPoint(i,r),(r=d(t,!0))&&!(r=!d(n,!0)))var r=n.distX-t.distX,o=n.dist-t.dist,s=(t.series.group&&t.series.group.zIndex)-(n.series.group&&n.series.group.zIndex),r=0<(0!==r&&e?r:0!==o?o:0!==s?s:n.series.index>t.series.index?-1:1);r&&(n=t)}),n},getPointFromEvent:function(t){t=t.target;for(var e;t&&!e;)e=t.point,t=t.parentNode;return e},getChartCoordinatesFromPoint:function(t,e){var i=t.series,n=i.xAxis,i=i.yAxis,r=f(t.clientX,t.plotX),o=t.shapeArgs;return n&&i?e?{chartX:n.len+n.pos-r,chartY:i.len+i.pos-t.plotY}:{chartX:r+n.pos,chartY:t.plotY+i.pos}:o&&o.x&&o.y?{chartX:o.x,chartY:o.y}:void 0},getHoverData:function(e,i,n,r,o,s,l){var u,p=[],h=l&&l.isBoosting;return r=!(!r||!e),l=i&&!i.stickyTracking?[i]:t.grep(n,function(t){return t.visible&&!(!o&&t.directTouch)&&f(t.options.enableMouseTracking,!0)&&t.stickyTracking}),i=(u=r?e:this.findNearestKDPoint(l,o,s))&&u.series,u&&(o&&!i.noSharedTooltip?(l=t.grep(n,function(t){return t.visible&&!(!o&&t.directTouch)&&f(t.options.enableMouseTracking,!0)&&!t.noSharedTooltip}),a(l,function(t){var e=c(t.points,function(t){return t.x===u.x&&!t.isNull});d(e)&&(h&&(e=t.getPoint(e)),p.push(e))})):p.push(u)),{hoverPoint:u,hoverSeries:i,hoverPoints:p}},runPointActions:function(i,r){var o,s=this.chart,l=s.tooltip&&s.tooltip.options.enabled?s.tooltip:void 0,c=!!l&&l.shared,u=r||s.hoverPoint,p=u&&u.series||s.hoverSeries,p=this.getHoverData(u,p,s.series,!!r||p&&p.directTouch&&this.isDirectTouch,c,i,{isBoosting:s.isBoosting}),u=p.hoverPoint;if(o=p.hoverPoints,r=(p=p.hoverSeries)&&p.tooltipOptions.followPointer,c=c&&p&&!p.noSharedTooltip,u&&(u!==s.hoverPoint||l&&l.isHidden)){if(a(s.hoverPoints||[],function(e){-1===t.inArray(e,o)&&e.setState()}),a(o||[],function(t){t.setState("hover")}),s.hoverSeries!==p&&p.onMouseOver(),s.hoverPoint&&s.hoverPoint.firePointEvent("mouseOut"),!u.series)return;u.firePointEvent("mouseOver"),s.hoverPoints=o,s.hoverPoint=u,l&&l.refresh(c?o:u,i)}else r&&l&&!l.isHidden&&(u=l.getAnchor([{}],i),l.updatePosition({plotX:u[0],plotY:u[1]}));this.unDocMouseMove||(this.unDocMouseMove=e(s.container.ownerDocument,"mousemove",function(e){var i=n[t.hoverChartIndex];i&&i.pointer.onDocumentMouseMove(e)})),a(s.axes,function(e){var n=f(e.crosshair.snap,!0),r=n?t.find(o,function(t){return t.series[e.coll]===e}):void 0;r||!n?e.drawCrosshair(i,r):e.hideCrosshair()})},reset:function(t,e){var i=this.chart,n=i.hoverSeries,r=i.hoverPoint,o=i.hoverPoints,s=i.tooltip,l=s&&s.shared?o:r;t&&l&&a(m(l),function(e){e.series.isCartesian&&void 0===e.plotX&&(t=!1)}),t?s&&l&&(s.refresh(l),r&&(r.setState(r.state,!0),a(i.axes,function(t){t.crosshair&&t.drawCrosshair(null,r)}))):(r&&r.onMouseOut(),o&&a(o,function(t){t.setState()}),n&&n.onMouseOut(),s&&s.hide(e),this.unDocMouseMove&&(this.unDocMouseMove=this.unDocMouseMove()),a(i.axes,function(t){t.hideCrosshair()}),this.hoverX=i.hoverPoints=i.hoverPoint=null)},scaleGroups:function(t,e){var i,n=this.chart;a(n.series,function(r){i=t||r.getPlotBox(),r.xAxis&&r.xAxis.zoomEnabled&&r.group&&(r.group.attr(i),r.markerGroup&&(r.markerGroup.attr(i),r.markerGroup.clip(e?n.clipRect:null)),r.dataLabelsGroup&&r.dataLabelsGroup.attr(i))}),n.clipRect.attr(e||n.clipBox)},dragStart:function(t){var e=this.chart;e.mouseIsDown=t.type,e.cancelClick=!1,e.mouseDownX=this.mouseDownX=t.chartX,e.mouseDownY=this.mouseDownY=t.chartY},drag:function(t){var e,i=this.chart,n=i.options.chart,o=t.chartX,s=t.chartY,a=this.zoomHor,l=this.zoomVert,c=i.plotLeft,u=i.plotTop,p=i.plotWidth,d=i.plotHeight,h=this.selectionMarker,f=this.mouseDownX,m=this.mouseDownY,g=n.panKey&&t[n.panKey+"Key"];h&&h.touch||(o<c?o=c:o>c+p&&(o=c+p),s<u?s=u:s>u+d&&(s=u+d),this.hasDragged=Math.sqrt(Math.pow(f-o,2)+Math.pow(m-s,2)),10<this.hasDragged&&(e=i.isInsidePlot(f-c,m-u),i.hasCartesianSeries&&(this.zoomX||this.zoomY)&&e&&!g&&!h&&(this.selectionMarker=h=i.renderer.rect(c,u,a?1:p,l?1:d,0).attr({fill:n.selectionMarkerFill||r("#335cad").setOpacity(.25).get(),class:"highcharts-selection-marker",zIndex:7}).add()),h&&a&&(o-=f,h.attr({width:Math.abs(o),x:(0<o?0:o)+f})),h&&l&&(o=s-m,h.attr({height:Math.abs(o),y:(0<o?0:o)+m})),e&&!h&&n.panning&&i.pan(t,n.panning)))},drop:function(t){var e=this,i=this.chart,n=this.hasPinched;if(this.selectionMarker){var r,c={originalEvent:t,xAxis:[],yAxis:[]},d=this.selectionMarker,h=d.attr?d.attr("x"):d.x,f=d.attr?d.attr("y"):d.y,m=d.attr?d.attr("width"):d.width,g=d.attr?d.attr("height"):d.height;(this.hasDragged||n)&&(a(i.axes,function(i){if(i.zoomEnabled&&s(i.min)&&(n||e[{xAxis:"zoomX",yAxis:"zoomY"}[i.coll]])){var o=i.horiz,a="touchend"===t.type?i.minPixelPadding:0,l=i.toValue((o?h:f)+a),o=i.toValue((o?h+m:f+g)-a);c[i.coll].push({axis:i,min:Math.min(l,o),max:Math.max(l,o)}),r=!0}}),r&&u(i,"selection",c,function(t){i.zoom(l(t,n?{animation:!1}:null))})),p(i.index)&&(this.selectionMarker=this.selectionMarker.destroy()),n&&this.scaleGroups()}i&&p(i.index)&&(o(i.container,{cursor:i._cursor}),i.cancelClick=10<this.hasDragged,i.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(t){t=this.normalize(t),2!==t.button&&(this.zoomOption(t),t.preventDefault&&t.preventDefault(),this.dragStart(t))},onDocumentMouseUp:function(e){n[t.hoverChartIndex]&&n[t.hoverChartIndex].pointer.drop(e)},onDocumentMouseMove:function(t){var e=this.chart,i=this.chartPosition;t=this.normalize(t,i),!i||this.inClass(t.target,"highcharts-tracker")||e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)||this.reset()},onContainerMouseLeave:function(e){var i=n[t.hoverChartIndex];i&&(e.relatedTarget||e.toElement)&&(i.pointer.reset(),i.pointer.chartPosition=null)},onContainerMouseMove:function(e){var i=this.chart;s(t.hoverChartIndex)&&n[t.hoverChartIndex]&&n[t.hoverChartIndex].mouseIsDown||(t.hoverChartIndex=i.index),e=this.normalize(e),e.returnValue=!1,"mousedown"===i.mouseIsDown&&this.drag(e),!this.inClass(e.target,"highcharts-tracker")&&!i.isInsidePlot(e.chartX-i.plotLeft,e.chartY-i.plotTop)||i.openMenu||this.runPointActions(e)},inClass:function(t,e){for(var n;t;){if(n=i(t,"class")){if(-1!==n.indexOf(e))return!0;if(-1!==n.indexOf("highcharts-container"))return!1}t=t.parentNode}},onTrackerMouseOut:function(t){var e=this.chart.hoverSeries;t=t.relatedTarget||t.toElement,this.isDirectTouch=!1,!e||!t||e.stickyTracking||this.inClass(t,"highcharts-tooltip")||this.inClass(t,"highcharts-series-"+e.index)&&this.inClass(t,"highcharts-tracker")||e.onMouseOut()},onContainerClick:function(t){var e=this.chart,i=e.hoverPoint,n=e.plotLeft,r=e.plotTop;t=this.normalize(t),e.cancelClick||(i&&this.inClass(t.target,"highcharts-tracker")?(u(i.series,"click",l(t,{point:i})),e.hoverPoint&&i.firePointEvent("click",t)):(l(t,this.getCoordinates(t)),e.isInsidePlot(t.chartX-n,t.chartY-r)&&u(e,"click",t)))},setDOMEvents:function(){var i=this,n=i.chart.container,r=n.ownerDocument;n.onmousedown=function(t){i.onContainerMouseDown(t)},n.onmousemove=function(t){i.onContainerMouseMove(t)},n.onclick=function(t){i.onContainerClick(t)},this.unbindContainerMouseLeave=e(n,"mouseleave",i.onContainerMouseLeave),t.unbindDocumentMouseUp||(t.unbindDocumentMouseUp=e(r,"mouseup",i.onDocumentMouseUp)),t.hasTouch&&(n.ontouchstart=function(t){i.onContainerTouchStart(t)},n.ontouchmove=function(t){i.onContainerTouchMove(t)},t.unbindDocumentTouchEnd||(t.unbindDocumentTouchEnd=e(r,"touchend",i.onDocumentTouchEnd)))},destroy:function(){var e=this;e.unDocMouseMove&&e.unDocMouseMove(),this.unbindContainerMouseLeave(),t.chartCount||(t.unbindDocumentMouseUp&&(t.unbindDocumentMouseUp=t.unbindDocumentMouseUp()),t.unbindDocumentTouchEnd&&(t.unbindDocumentTouchEnd=t.unbindDocumentTouchEnd())),clearInterval(e.tooltipTimeout),t.objectEach(e,function(t,i){e[i]=null})}}}(e),function(t){var e=t.charts,i=t.each,n=t.extend,r=t.map,o=t.noop,s=t.pick;n(t.Pointer.prototype,{pinchTranslate:function(t,e,i,n,r,o){this.zoomHor&&this.pinchTranslateDirection(!0,t,e,i,n,r,o),this.zoomVert&&this.pinchTranslateDirection(!1,t,e,i,n,r,o)},pinchTranslateDirection:function(t,e,i,n,r,o,s,a){var l,c,u,p=this.chart,d=t?"x":"y",h=t?"X":"Y",f="chart"+h,m=t?"width":"height",g=p["plot"+(t?"Left":"Top")],y=a||1,v=p.inverted,b=p.bounds[t?"h":"v"],w=1===e.length,k=e[0][f],x=i[0][f],T=!w&&e[1][f],C=!w&&i[1][f];i=function(){!w&&20<Math.abs(k-T)&&(y=a||Math.abs(x-C)/Math.abs(k-T)),c=(g-x)/y+k,l=p["plot"+(t?"Width":"Height")]/y},i(),e=c,e<b.min?(e=b.min,u=!0):e+l>b.max&&(e=b.max-l,u=!0),u?(x-=.8*(x-s[d][0]),w||(C-=.8*(C-s[d][1])),i()):s[d]=[x,C],v||(o[d]=c-g,o[m]=l),o=v?1/y:y,r[m]=l,r[d]=e,n[v?t?"scaleY":"scaleX":"scale"+h]=y,n["translate"+h]=o*g+(x-o*k)},pinch:function(t){var e=this,a=e.chart,l=e.pinchDown,c=t.touches,u=c.length,p=e.lastValidTouch,d=e.hasZoom,h=e.selectionMarker,f={},m=1===u&&(e.inClass(t.target,"highcharts-tracker")&&a.runTrackerClick||e.runChartClick),g={};1<u&&(e.initiated=!0),d&&e.initiated&&!m&&t.preventDefault(),r(c,function(t){return e.normalize(t)}),"touchstart"===t.type?(i(c,function(t,e){l[e]={chartX:t.chartX,chartY:t.chartY}}),p.x=[l[0].chartX,l[1]&&l[1].chartX],p.y=[l[0].chartY,l[1]&&l[1].chartY],i(a.axes,function(t){if(t.zoomEnabled){var e=a.bounds[t.horiz?"h":"v"],i=t.minPixelPadding,n=t.toPixels(s(t.options.min,t.dataMin)),r=t.toPixels(s(t.options.max,t.dataMax)),o=Math.max(n,r);e.min=Math.min(t.pos,Math.min(n,r)-i),e.max=Math.max(t.pos+t.len,o+i)}}),e.res=!0):e.followTouchMove&&1===u?this.runPointActions(e.normalize(t)):l.length&&(h||(e.selectionMarker=h=n({destroy:o,touch:!0},a.plotBox)),e.pinchTranslate(l,c,f,h,g,p),e.hasPinched=d,e.scaleGroups(f,g),e.res&&(e.res=!1,this.reset(!1,0)))},touch:function(e,i){var n,r=this.chart;r.index!==t.hoverChartIndex&&this.onContainerMouseLeave({relatedTarget:!0}),t.hoverChartIndex=r.index,1===e.touches.length?(e=this.normalize(e),r.isInsidePlot(e.chartX-r.plotLeft,e.chartY-r.plotTop)&&!r.openMenu?(i&&this.runPointActions(e),"touchmove"===e.type&&(i=this.pinchDown,n=!!i[0]&&4<=Math.sqrt(Math.pow(i[0].chartX-e.chartX,2)+Math.pow(i[0].chartY-e.chartY,2))),s(n,!0)&&this.pinch(e)):i&&this.reset()):2===e.touches.length&&this.pinch(e)},onContainerTouchStart:function(t){this.zoomOption(t),this.touch(t,!0)},onContainerTouchMove:function(t){this.touch(t)},onDocumentTouchEnd:function(i){e[t.hoverChartIndex]&&e[t.hoverChartIndex].pointer.drop(i)}})}(e),function(t){var e=t.addEvent,i=t.charts,n=t.css,r=t.doc,o=t.extend,s=t.noop,a=t.Pointer,l=t.removeEvent,c=t.win,u=t.wrap;if(!t.hasTouch&&(c.PointerEvent||c.MSPointerEvent)){var p={},d=!!c.PointerEvent,h=function(){var e=[];return e.item=function(t){return this[t]},t.objectEach(p,function(t){e.push({pageX:t.pageX,pageY:t.pageY,target:t.target})}),e},f=function(e,n,r,o){"touch"!==e.pointerType&&e.pointerType!==e.MSPOINTER_TYPE_TOUCH||!i[t.hoverChartIndex]||(o(e),o=i[t.hoverChartIndex].pointer,o[n]({type:r,target:e.currentTarget,preventDefault:s,touches:h()}))};o(a.prototype,{onContainerPointerDown:function(t){f(t,"onContainerTouchStart","touchstart",function(t){p[t.pointerId]={pageX:t.pageX,pageY:t.pageY,target:t.currentTarget}})},onContainerPointerMove:function(t){f(t,"onContainerTouchMove","touchmove",function(t){p[t.pointerId]={pageX:t.pageX,pageY:t.pageY},p[t.pointerId].target||(p[t.pointerId].target=t.currentTarget)})},onDocumentPointerUp:function(t){f(t,"onDocumentTouchEnd","touchend",function(t){delete p[t.pointerId]})},batchMSEvents:function(t){t(this.chart.container,d?"pointerdown":"MSPointerDown",this.onContainerPointerDown),t(this.chart.container,d?"pointermove":"MSPointerMove",this.onContainerPointerMove),t(r,d?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}}),u(a.prototype,"init",function(t,e,i){t.call(this,e,i),this.hasZoom&&n(e.container,{"-ms-touch-action":"none","touch-action":"none"})}),u(a.prototype,"setDOMEvents",function(t){t.apply(this),(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(e)}),u(a.prototype,"destroy",function(t){this.batchMSEvents(l),t.call(this)})}}(e),function(t){var e=t.addEvent,i=t.css,n=t.discardElement,r=t.defined,o=t.each,s=t.fireEvent,a=t.isFirefox,l=t.marginNames,c=t.merge,u=t.pick,p=t.setAnimation,d=t.stableSort,h=t.win,f=t.wrap;t.Legend=function(t,e){this.init(t,e)},t.Legend.prototype={init:function(t,i){this.chart=t,this.setOptions(i),i.enabled&&(this.render(),e(this.chart,"endResize",function(){this.legend.positionCheckboxes()}))},setOptions:function(t){var e=u(t.padding,8);this.options=t,this.itemStyle=t.itemStyle,this.itemHiddenStyle=c(this.itemStyle,t.itemHiddenStyle),this.itemMarginTop=t.itemMarginTop||0,this.padding=e,this.initialItemY=e-5,this.symbolWidth=u(t.symbolWidth,16),this.pages=[]},update:function(t,e){var i=this.chart;this.setOptions(c(!0,this.options,t)),this.destroy(),i.isDirtyLegend=i.isDirtyBox=!0,u(e,!0)&&i.redraw(),s(this,"afterUpdate")},colorizeItem:function(t,e){t.legendGroup[e?"removeClass":"addClass"]("highcharts-legend-item-hidden");var i=this.options,n=t.legendItem,r=t.legendLine,o=t.legendSymbol,a=this.itemHiddenStyle.color,i=e?i.itemStyle.color:a,l=e?t.color||a:a,c=t.options&&t.options.marker,u={fill:l};n&&n.css({fill:i,color:i}),r&&r.attr({stroke:l}),o&&(c&&o.isMarker&&(u=t.pointAttribs(),e||(u.stroke=u.fill=a)),o.attr(u)),s(this,"afterColorizeItem",{item:t,visible:e})},positionItem:function(t){var e=this.options,i=e.symbolPadding,e=!e.rtl,n=t._legendItemPos,r=n[0],n=n[1],o=t.checkbox;(t=t.legendGroup)&&t.element&&t.translate(e?r:this.legendWidth-r-2*i-4,n),o&&(o.x=r,o.y=n)},destroyItem:function(t){var e=t.checkbox;o(["legendItem","legendLine","legendSymbol","legendGroup"],function(e){t[e]&&(t[e]=t[e].destroy())}),e&&n(t.checkbox)},destroy:function(){function t(t){this[t]&&(this[t]=this[t].destroy())}o(this.getAllItems(),function(e){o(["legendItem","legendGroup"],t,e)}),o("clipRect up down pager nav box title group".split(" "),t,this),this.display=null},positionCheckboxes:function(){var t,e=this.group&&this.group.alignAttr,n=this.clipHeight||this.legendHeight,r=this.titleHeight;e&&(t=e.translateY,o(this.allItems,function(o){var s,a=o.checkbox;a&&(s=t+r+a.y+(this.scrollOffset||0)+3,i(a,{left:e.translateX+o.checkboxOffset+a.x-20+"px",top:s+"px",display:s>t-6&&s<t+n-6?"":"none"}))},this))},renderTitle:function(){var t=this.options,e=this.padding,i=t.title,n=0;i.text&&(this.title||(this.title=this.chart.renderer.label(i.text,e-3,e-4,null,null,null,t.useHTML,null,"legend-title").attr({zIndex:1}).css(i.style).add(this.group)),t=this.title.getBBox(),n=t.height,this.offsetWidth=t.width,this.contentGroup.attr({translateY:n})),this.titleHeight=n},setText:function(e){var i=this.options;e.legendItem.attr({text:i.labelFormat?t.format(i.labelFormat,e,this.chart.time):i.labelFormatter.call(e)})},renderItem:function(t){var e=this.chart,i=e.renderer,n=this.options,r=this.symbolWidth,o=n.symbolPadding,s=this.itemStyle,a=this.itemHiddenStyle,l="horizontal"===n.layout?u(n.itemDistance,20):0,p=!n.rtl,d=t.legendItem,h=!t.series,f=!h&&t.series.drawLegendSymbol?t.series:t,m=f.options,m=this.createCheckboxForItem&&m&&m.showCheckbox,l=r+o+l+(m?20:0),g=n.useHTML,y=t.options.className;d||(t.legendGroup=i.g("legend-item").addClass("highcharts-"+f.type+"-series highcharts-color-"+t.colorIndex+(y?" "+y:"")+(h?" highcharts-series-"+t.index:"")).attr({zIndex:1}).add(this.scrollGroup),t.legendItem=d=i.text("",p?r+o:-o,this.baseline||0,g).css(c(t.visible?s:a)).attr({align:p?"left":"right",zIndex:2}).add(t.legendGroup),this.baseline||(r=s.fontSize,this.fontMetrics=i.fontMetrics(r,d),this.baseline=this.fontMetrics.f+3+this.itemMarginTop,d.attr("y",this.baseline)),this.symbolHeight=n.symbolHeight||this.fontMetrics.f,f.drawLegendSymbol(this,t),this.setItemEvents&&this.setItemEvents(t,d,g),m&&this.createCheckboxForItem(t)),this.colorizeItem(t,t.visible),s.width||d.css({width:(n.itemWidth||n.width||e.spacingBox.width)-l}),this.setText(t),e=d.getBBox(),t.itemWidth=t.checkboxOffset=n.itemWidth||t.legendItemWidth||e.width+l,this.maxItemWidth=Math.max(this.maxItemWidth,t.itemWidth),this.totalItemWidth+=t.itemWidth,this.itemHeight=t.itemHeight=Math.round(t.legendItemHeight||e.height||this.symbolHeight)},layoutItem:function(t){var e=this.options,i=this.padding,n="horizontal"===e.layout,r=t.itemHeight,o=e.itemMarginBottom||0,s=this.itemMarginTop,a=n?u(e.itemDistance,20):0,l=e.width,c=l||this.chart.spacingBox.width-2*i-e.x,e=e.alignColumns&&this.totalItemWidth>c?this.maxItemWidth:t.itemWidth;n&&this.itemX-i+e>c&&(this.itemX=i,this.itemY+=s+this.lastLineHeight+o,this.lastLineHeight=0),this.lastItemY=s+this.itemY+o,this.lastLineHeight=Math.max(r,this.lastLineHeight),t._legendItemPos=[this.itemX,this.itemY],n?this.itemX+=e:(this.itemY+=s+r+o,this.lastLineHeight=r),this.offsetWidth=l||Math.max((n?this.itemX-i-(t.checkbox?0:a):e)+i,this.offsetWidth)},getAllItems:function(){var t=[];return o(this.chart.series,function(e){var i=e&&e.options;e&&u(i.showInLegend,!r(i.linkedTo)&&void 0,!0)&&(t=t.concat(e.legendItems||("point"===i.legendType?e.data:e)))}),s(this,"afterGetAllItems",{allItems:t}),t},getAlignment:function(){var t=this.options;return t.floating?"":t.align.charAt(0)+t.verticalAlign.charAt(0)+t.layout.charAt(0)},adjustMargins:function(t,e){var i=this.chart,n=this.options,s=this.getAlignment();s&&o([/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/],function(o,a){o.test(s)&&!r(t[a])&&(i[l[a]]=Math.max(i[l[a]],i.legend[(a+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][a]*n[a%2?"x":"y"]+u(n.margin,12)+e[a]+(0===a&&void 0!==i.options.title.margin?i.titleOffset+i.options.title.margin:0)))})},render:function(){var t,e,i,n,r=this.chart,s=r.renderer,a=this.group,l=this.box,u=this.options,p=this.padding;this.itemX=p,this.itemY=this.initialItemY,this.lastItemY=this.offsetWidth=0,a||(this.group=a=s.g("legend").attr({zIndex:7}).add(),this.contentGroup=s.g().attr({zIndex:1}).add(a),this.scrollGroup=s.g().add(this.contentGroup)),this.renderTitle(),t=this.getAllItems(),d(t,function(t,e){return(t.options&&t.options.legendIndex||0)-(e.options&&e.options.legendIndex||0)}),u.reversed&&t.reverse(),this.allItems=t,this.display=e=!!t.length,this.itemHeight=this.totalItemWidth=this.maxItemWidth=this.lastLineHeight=0,o(t,this.renderItem,this),o(t,this.layoutItem,this),i=(u.width||this.offsetWidth)+p,n=this.lastItemY+this.lastLineHeight+this.titleHeight,n=this.handleOverflow(n),n+=p,l||(this.box=l=s.rect().addClass("highcharts-legend-box").attr({r:u.borderRadius}).add(a),l.isNew=!0),l.attr({stroke:u.borderColor,"stroke-width":u.borderWidth||0,fill:u.backgroundColor||"none"}).shadow(u.shadow),0<i&&0<n&&(l[l.isNew?"attr":"animate"](l.crisp.call({},{x:0,y:0,width:i,height:n},l.strokeWidth())),l.isNew=!1),l[e?"show":"hide"](),this.legendWidth=i,this.legendHeight=n,o(t,this.positionItem,this),e&&(s=r.spacingBox,/(lth|ct|rth)/.test(this.getAlignment())&&(s=c(s,{y:s.y+r.titleOffset+r.options.title.margin})),a.align(c(u,{width:i,height:n}),!0,s)),r.isResizing||this.positionCheckboxes()},handleOverflow:function(t){var e,i,n=this,r=this.chart,s=r.renderer,a=this.options,l=a.y,c=this.padding,r=r.spacingBox.height+("top"===a.verticalAlign?-l:l)-c,l=a.maxHeight,p=this.clipRect,d=a.navigation,h=u(d.animation,!0),f=d.arrowSize||12,m=this.nav,g=this.pages,y=this.allItems,v=function(t){"number"==typeof t?p.attr({height:t}):p&&(n.clipRect=p.destroy(),n.contentGroup.clip()),n.contentGroup.div&&(n.contentGroup.div.style.clip=t?"rect("+c+"px,9999px,"+(c+t)+"px,0)":"auto")};return"horizontal"!==a.layout||"middle"===a.verticalAlign||a.floating||(r/=2),l&&(r=Math.min(r,l)),g.length=0,t>r&&!1!==d.enabled?(this.clipHeight=e=Math.max(r-20-this.titleHeight-c,0),this.currentPage=u(this.currentPage,1),this.fullHeight=t,o(y,function(t,n){var r=t._legendItemPos[1],o=Math.round(t.legendItem.getBBox().height),s=g.length;(!s||r-g[s-1]>e&&(i||r)!==g[s-1])&&(g.push(i||r),s++),t.pageIx=s-1,i&&(y[n-1].pageIx=s-1),n===y.length-1&&r+o-g[s-1]>e&&(g.push(r),t.pageIx=s),r!==i&&(i=r)}),p||(p=n.clipRect=s.clipRect(0,c,9999,0),n.contentGroup.clip(p)),v(e),m||(this.nav=m=s.g().attr({zIndex:1}).add(this.group),this.up=s.symbol("triangle",0,0,f,f).on("click",function(){n.scroll(-1,h)}).add(m),this.pager=s.text("",15,10).addClass("highcharts-legend-navigation").css(d.style).add(m),this.down=s.symbol("triangle-down",0,0,f,f).on("click",function(){n.scroll(1,h)}).add(m)),n.scroll(0),t=r):m&&(v(),this.nav=m.destroy(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),t},scroll:function(t,e){var i=this.pages,n=i.length;t=this.currentPage+t;var r=this.clipHeight,o=this.options.navigation,s=this.pager,a=this.padding;t>n&&(t=n),0<t&&(void 0!==e&&p(e,this.chart),this.nav.attr({translateX:a,translateY:r+this.padding+7+this.titleHeight,visibility:"visible"}),this.up.attr({class:1===t?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"}),s.attr({text:t+"/"+n}),this.down.attr({x:18+this.pager.getBBox().width,class:t===n?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"}),this.up.attr({fill:1===t?o.inactiveColor:o.activeColor}).css({cursor:1===t?"default":"pointer"}),this.down.attr({fill:t===n?o.inactiveColor:o.activeColor}).css({cursor:t===n?"default":"pointer"}),this.scrollOffset=-i[t-1]+this.initialItemY,this.scrollGroup.animate({translateY:this.scrollOffset}),this.currentPage=t,this.positionCheckboxes())}},t.LegendSymbolMixin={drawRectangle:function(t,e){var i=t.symbolHeight,n=t.options.squareSymbol;e.legendSymbol=this.chart.renderer.rect(n?(t.symbolWidth-i)/2:0,t.baseline-i+1,n?i:t.symbolWidth,i,u(t.options.symbolRadius,i/2)).addClass("highcharts-point").attr({zIndex:3}).add(e.legendGroup)},drawLineMarker:function(t){var e=this.options,i=e.marker,n=t.symbolWidth,r=t.symbolHeight,o=r/2,s=this.chart.renderer,a=this.legendGroup;t=t.baseline-Math.round(.3*t.fontMetrics.b);var l;l={"stroke-width":e.lineWidth||0},e.dashStyle&&(l.dashstyle=e.dashStyle),this.legendLine=s.path(["M",0,t,"L",n,t]).addClass("highcharts-graph").attr(l).add(a),i&&!1!==i.enabled&&(e=Math.min(u(i.radius,o),o),0===this.symbol.indexOf("url")&&(i=c(i,{width:r,height:r}),e=0),this.legendSymbol=i=s.symbol(this.symbol,n/2-e,t-e,2*e,2*e,i).addClass("highcharts-point").add(a),i.isMarker=!0)}},(/Trident\/7\.0/.test(h.navigator.userAgent)||a)&&f(t.Legend.prototype,"positionItem",function(t,e){var i=this,n=function(){e._legendItemPos&&t.call(i,e)};n(),setTimeout(n)})}(e),function(t){var e=t.addEvent,i=t.animate,n=t.animObject,r=t.attr,o=t.doc,s=t.Axis,a=t.createElement,l=t.defaultOptions,c=t.discardElement,u=t.charts,p=t.css,d=t.defined,h=t.each,f=t.extend,m=t.find,g=t.fireEvent,y=t.grep,v=t.isNumber,b=t.isObject,w=t.isString,k=t.Legend,x=t.marginNames,T=t.merge,C=t.objectEach,I=t.Pointer,_=t.pick,S=t.pInt,A=t.removeEvent,O=t.seriesTypes,P=t.splat,E=t.syncTimeout,M=t.win,L=t.Chart=function(){this.getArgs.apply(this,arguments)};t.chart=function(t,e,i){return new L(t,e,i)},f(L.prototype,{callbacks:[],getArgs:function(){var t=[].slice.call(arguments);(w(t[0])||t[0].nodeName)&&(this.renderTo=t.shift()),this.init(t[0],t[1])},init:function(i,n){var r,o,s=i.series,a=i.plotOptions||{};g(this,"init",{args:arguments},function(){i.series=null,r=T(l,i);for(o in r.plotOptions)r.plotOptions[o].tooltip=a[o]&&T(a[o].tooltip)||void 0;r.tooltip.userOptions=i.chart&&i.chart.forExport&&i.tooltip.userOptions||i.tooltip,r.series=i.series=s,this.userOptions=i;var c=r.chart,p=c.events;this.margin=[],this.spacing=[],this.bounds={h:{},v:{}},this.labelCollectors=[],this.callback=n,this.isResizing=0,this.options=r,this.axes=[],this.series=[],this.time=i.time&&t.keys(i.time).length?new t.Time(i.time):t.time,this.hasCartesianSeries=c.showAxes;var d=this;d.index=u.length,u.push(d),t.chartCount++,p&&C(p,function(t,i){e(d,i,t)}),d.xAxis=[],d.yAxis=[],d.pointCount=d.colorCounter=d.symbolCounter=0,g(d,"afterInit"),d.firstRender()})},initSeries:function(e){var i=this.options.chart;return(i=O[e.type||i.type||i.defaultSeriesType])||t.error(17,!0),i=new i,i.init(this,e),i},orderSeries:function(t){var e=this.series;for(t=t||0;t<e.length;t++)e[t]&&(e[t].index=t,e[t].name=e[t].getName())},isInsidePlot:function(t,e,i){var n=i?e:t;return t=i?t:e,0<=n&&n<=this.plotWidth&&0<=t&&t<=this.plotHeight},redraw:function(e){g(this,"beforeRedraw");var i,n,r,o=this.axes,s=this.series,a=this.pointer,l=this.legend,c=this.isDirtyLegend,u=this.hasCartesianSeries,p=this.isDirtyBox,d=this.renderer,m=d.isHidden(),y=[];for(this.setResponsive&&this.setResponsive(!1),t.setAnimation(e,this),m&&this.temporaryDisplay(),this.layOutTitles(),e=s.length;e--;)if(r=s[e],r.options.stacking&&(i=!0,r.isDirty)){n=!0;break}if(n)for(e=s.length;e--;)r=s[e],r.options.stacking&&(r.isDirty=!0);h(s,function(t){t.isDirty&&"point"===t.options.legendType&&(t.updateTotals&&t.updateTotals(),c=!0),t.isDirtyData&&g(t,"updatedData")}),c&&l.options.enabled&&(l.render(),this.isDirtyLegend=!1),i&&this.getStacks(),u&&h(o,function(t){t.updateNames(),t.setScale()}),this.getMargins(),u&&(h(o,function(t){t.isDirty&&(p=!0)}),h(o,function(t){var e=t.min+","+t.max;t.extKey!==e&&(t.extKey=e,y.push(function(){g(t,"afterSetExtremes",f(t.eventArgs,t.getExtremes())),delete t.eventArgs})),(p||i)&&t.redraw()})),p&&this.drawChartBox(),g(this,"predraw"),h(s,function(t){(p||t.isDirty)&&t.visible&&t.redraw(),t.isDirtyData=!1}),a&&a.reset(!0),d.draw(),g(this,"redraw"),g(this,"render"),m&&this.temporaryDisplay(!0),h(y,function(t){t.call()})},get:function(t){function e(e){return e.id===t||e.options&&e.options.id===t}var i,n,r=this.series;for(i=m(this.axes,e)||m(this.series,e),n=0;!i&&n<r.length;n++)i=m(r[n].points||[],e);return i},getAxes:function(){var t=this,e=this.options,i=e.xAxis=P(e.xAxis||{}),e=e.yAxis=P(e.yAxis||{});g(this,"getAxes"),h(i,function(t,e){t.index=e,t.isX=!0}),h(e,function(t,e){t.index=e}),i=i.concat(e),h(i,function(e){new s(t,e)}),g(this,"afterGetAxes")},getSelectedPoints:function(){var t=[];return h(this.series,function(e){t=t.concat(y(e.data||[],function(t){return t.selected}))}),t},getSelectedSeries:function(){return y(this.series,function(t){return t.selected})},setTitle:function(t,e,i){var n,r=this,o=r.options;n=o.title=T({style:{color:"#333333",fontSize:o.isStock?"16px":"18px"}},o.title,t),o=o.subtitle=T({style:{color:"#666666"}},o.subtitle,e),h([["title",t,n],["subtitle",e,o]],function(t,e){var i=t[0],n=r[i],o=t[1];t=t[2],n&&o&&(r[i]=n=n.destroy()),t&&!n&&(r[i]=r.renderer.text(t.text,0,0,t.useHTML).attr({align:t.align,class:"highcharts-"+i,zIndex:t.zIndex||4}).add(),r[i].update=function(t){r.setTitle(!e&&t,e&&t)},r[i].css(t.style))}),r.layOutTitles(i)},layOutTitles:function(t){var e,i=0,n=this.renderer,r=this.spacingBox;h(["title","subtitle"],function(t){var e=this[t],o=this.options[t];t="title"===t?-3:o.verticalAlign?0:i+2;var s;e&&(s=o.style.fontSize,s=n.fontMetrics(s,e).b,e.css({width:(o.width||r.width+o.widthAdjust)+"px"}).align(f({y:t+s},o),!1,"spacingBox"),o.floating||o.verticalAlign||(i=Math.ceil(i+e.getBBox(o.useHTML).height)))},this),e=this.titleOffset!==i,this.titleOffset=i,!this.isDirtyBox&&e&&(this.isDirtyBox=this.isDirtyLegend=e,this.hasRendered&&_(t,!0)&&this.isDirtyBox&&this.redraw())},getChartSize:function(){var e=this.options.chart,i=e.width,e=e.height,n=this.renderTo;d(i)||(this.containerWidth=t.getStyle(n,"width")),d(e)||(this.containerHeight=t.getStyle(n,"height")),this.chartWidth=Math.max(0,i||this.containerWidth||600),this.chartHeight=Math.max(0,t.relativeLength(e,this.chartWidth)||(1<this.containerHeight?this.containerHeight:400))},temporaryDisplay:function(e){var i=this.renderTo;if(e)for(;i&&i.style;)i.hcOrigStyle&&(t.css(i,i.hcOrigStyle),delete i.hcOrigStyle),i.hcOrigDetached&&(o.body.removeChild(i),i.hcOrigDetached=!1),i=i.parentNode;else for(;i&&i.style&&(o.body.contains(i)||i.parentNode||(i.hcOrigDetached=!0,o.body.appendChild(i)),("none"===t.getStyle(i,"display",!1)||i.hcOricDetached)&&(i.hcOrigStyle={display:i.style.display,height:i.style.height,overflow:i.style.overflow},e={display:"block",overflow:"hidden"},i!==this.renderTo&&(e.height=0),t.css(i,e),i.offsetWidth||i.style.setProperty("display","block","important")),(i=i.parentNode)!==o.body););},setClassName:function(t){this.container.className="highcharts-container "+(t||"")},getContainer:function(){var e,i,n,s=this.options,l=s.chart;e=this.renderTo;var c,p=t.uniqueKey();e||(this.renderTo=e=l.renderTo),w(e)&&(this.renderTo=e=o.getElementById(e)),e||t.error(13,!0),i=S(r(e,"data-highcharts-chart")),v(i)&&u[i]&&u[i].hasRendered&&u[i].destroy(),r(e,"data-highcharts-chart",this.index),e.innerHTML="",l.skipClone||e.offsetWidth||this.temporaryDisplay(),this.getChartSize(),i=this.chartWidth,n=this.chartHeight,c=f({position:"relative",overflow:"hidden",width:i+"px",height:n+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},l.style),this.container=e=a("div",{id:p},c,e),this._cursor=e.style.cursor,this.renderer=new(t[l.renderer]||t.Renderer)(e,i,n,null,l.forExport,s.exporting&&s.exporting.allowHTML),this.setClassName(l.className),this.renderer.setStyle(l.style),this.renderer.chartIndex=this.index,g(this,"afterGetContainer")},getMargins:function(t){var e=this.spacing,i=this.margin,n=this.titleOffset;this.resetMargins(),n&&!d(i[0])&&(this.plotTop=Math.max(this.plotTop,n+this.options.title.margin+e[0])),this.legend&&this.legend.display&&this.legend.adjustMargins(i,e),this.extraMargin&&(this[this.extraMargin.type]=(this[this.extraMargin.type]||0)+this.extraMargin.value),this.adjustPlotArea&&this.adjustPlotArea(),t||this.getAxisMargins()},getAxisMargins:function(){var t=this,e=t.axisOffset=[0,0,0,0],i=t.margin;t.hasCartesianSeries&&h(t.axes,function(t){t.visible&&t.getOffset()}),h(x,function(n,r){d(i[r])||(t[n]+=e[r])}),t.setChartSize()},reflow:function(e){var i=this,n=i.options.chart,r=i.renderTo,s=d(n.width)&&d(n.height),a=n.width||t.getStyle(r,"width"),n=n.height||t.getStyle(r,"height"),r=e?e.target:M;s||i.isPrinting||!a||!n||r!==M&&r!==o||(a===i.containerWidth&&n===i.containerHeight||(t.clearTimeout(i.reflowTimeout),i.reflowTimeout=E(function(){i.container&&i.setSize(void 0,void 0,!1)},e?100:0)),i.containerWidth=a,i.containerHeight=n)},setReflow:function(t){var i=this;!1===t||this.unbindReflow?!1===t&&this.unbindReflow&&(this.unbindReflow=this.unbindReflow()):(this.unbindReflow=e(M,"resize",function(t){i.reflow(t)}),e(this,"destroy",this.unbindReflow))},setSize:function(e,r,o){var s=this,a=s.renderer;s.isResizing+=1,t.setAnimation(o,s),s.oldChartHeight=s.chartHeight,s.oldChartWidth=s.chartWidth,void 0!==e&&(s.options.chart.width=e),void 0!==r&&(s.options.chart.height=r),s.getChartSize(),e=a.globalAnimation,(e?i:p)(s.container,{width:s.chartWidth+"px",height:s.chartHeight+"px"},e),s.setChartSize(!0),a.setSize(s.chartWidth,s.chartHeight,o),h(s.axes,function(t){t.isDirty=!0,t.setScale()}),s.isDirtyLegend=!0,s.isDirtyBox=!0,s.layOutTitles(),s.getMargins(),s.redraw(o),s.oldChartHeight=null,g(s,"resize"),E(function(){s&&g(s,"endResize",null,function(){--s.isResizing})},n(e).duration)},setChartSize:function(t){var e,i,n,r,o=this.inverted,s=this.renderer,a=this.chartWidth,l=this.chartHeight,c=this.options.chart,u=this.spacing,p=this.clipOffset;this.plotLeft=e=Math.round(this.plotLeft),this.plotTop=i=Math.round(this.plotTop),this.plotWidth=n=Math.max(0,Math.round(a-e-this.marginRight)),this.plotHeight=r=Math.max(0,Math.round(l-i-this.marginBottom)),this.plotSizeX=o?r:n,this.plotSizeY=o?n:r,this.plotBorderWidth=c.plotBorderWidth||0,this.spacingBox=s.spacingBox={x:u[3],y:u[0],width:a-u[3]-u[1],height:l-u[0]-u[2]},this.plotBox=s.plotBox={x:e,y:i,width:n,height:r},a=2*Math.floor(this.plotBorderWidth/2),o=Math.ceil(Math.max(a,p[3])/2),s=Math.ceil(Math.max(a,p[0])/2),this.clipBox={x:o,y:s,width:Math.floor(this.plotSizeX-Math.max(a,p[1])/2-o),height:Math.max(0,Math.floor(this.plotSizeY-Math.max(a,p[2])/2-s))},t||h(this.axes,function(t){t.setAxisSize(),t.setAxisTranslation()}),g(this,"afterSetChartSize",{skipAxes:t})},resetMargins:function(){var t=this,e=t.options.chart;h(["margin","spacing"],function(i){var n=e[i],r=b(n)?n:[n,n,n,n];h(["Top","Right","Bottom","Left"],function(n,o){t[i][o]=_(e[i+n],r[o])})}),h(x,function(e,i){t[e]=_(t.margin[i],t.spacing[i])}),t.axisOffset=[0,0,0,0],t.clipOffset=[0,0,0,0]},drawChartBox:function(){var t,e,i=this.options.chart,n=this.renderer,r=this.chartWidth,o=this.chartHeight,s=this.chartBackground,a=this.plotBackground,l=this.plotBorder,c=this.plotBGImage,u=i.backgroundColor,p=i.plotBackgroundColor,d=i.plotBackgroundImage,h=this.plotLeft,f=this.plotTop,m=this.plotWidth,y=this.plotHeight,v=this.plotBox,b=this.clipRect,w=this.clipBox,k="animate";s||(this.chartBackground=s=n.rect().addClass("highcharts-background").add(),k="attr"),t=i.borderWidth||0,e=t+(i.shadow?8:0),u={fill:u||"none"},(t||s["stroke-width"])&&(u.stroke=i.borderColor,u["stroke-width"]=t),s.attr(u).shadow(i.shadow),s[k]({x:e/2,y:e/2,width:r-e-t%2,height:o-e-t%2,r:i.borderRadius}),k="animate",a||(k="attr",this.plotBackground=a=n.rect().addClass("highcharts-plot-background").add()),a[k](v),a.attr({fill:p||"none"}).shadow(i.plotShadow),d&&(c?c.animate(v):this.plotBGImage=n.image(d,h,f,m,y).add()),b?b.animate({width:w.width,height:w.height}):this.clipRect=n.clipRect(w),k="animate",l||(k="attr",this.plotBorder=l=n.rect().addClass("highcharts-plot-border").attr({zIndex:1}).add()),l.attr({stroke:i.plotBorderColor,"stroke-width":i.plotBorderWidth||0,fill:"none"}),l[k](l.crisp({x:h,y:f,width:m,height:y},-l.strokeWidth())),this.isDirtyBox=!1,g(this,"afterDrawChartBox")},propFromSeries:function(){var t,e,i,n=this,r=n.options.chart,o=n.options.series;h(["inverted","angular","polar"],function(s){for(t=O[r.type||r.defaultSeriesType],i=r[s]||t&&t.prototype[s],e=o&&o.length;!i&&e--;)(t=O[o[e].type])&&t.prototype[s]&&(i=!0);n[s]=i})},linkSeries:function(){var t=this,e=t.series;h(e,function(t){t.linkedSeries.length=0}),h(e,function(e){var i=e.options.linkedTo;w(i)&&(i=":previous"===i?t.series[e.index-1]:t.get(i))&&i.linkedParent!==e&&(i.linkedSeries.push(e),e.linkedParent=i,e.visible=_(e.options.visible,i.options.visible,e.visible))}),g(this,"afterLinkSeries")},renderSeries:function(){h(this.series,function(t){t.translate(),t.render()})},renderLabels:function(){var t=this,e=t.options.labels;e.items&&h(e.items,function(i){var n=f(e.style,i.style),r=S(n.left)+t.plotLeft,o=S(n.top)+t.plotTop+12;delete n.left,delete n.top,t.renderer.text(i.html,r,o).attr({zIndex:2}).css(n).add()})},render:function(){var t,e,i,n=this.axes,r=this.renderer,o=this.options;this.setTitle(),this.legend=new k(this,o.legend),this.getStacks&&this.getStacks(),this.getMargins(!0),this.setChartSize(),o=this.plotWidth,t=this.plotHeight=Math.max(this.plotHeight-21,0),h(n,function(t){t.setScale()}),this.getAxisMargins(),e=1.1<o/this.plotWidth,i=1.05<t/this.plotHeight,(e||i)&&(h(n,function(t){(t.horiz&&e||!t.horiz&&i)&&t.setTickInterval(!0)}),this.getMargins()),this.drawChartBox(),this.hasCartesianSeries&&h(n,function(t){t.visible&&t.render()}),this.seriesGroup||(this.seriesGroup=r.g("series-group").attr({zIndex:3}).add()),this.renderSeries(),this.renderLabels(),this.addCredits(),this.setResponsive&&this.setResponsive(),this.hasRendered=!0},addCredits:function(t){var e=this;t=T(!0,this.options.credits,t),t.enabled&&!this.credits&&(this.credits=this.renderer.text(t.text+(this.mapCredits||""),0,0).addClass("highcharts-credits").on("click",function(){t.href&&(M.location.href=t.href)}).attr({align:t.position.align,zIndex:8}).css(t.style).add().align(t.position),this.credits.update=function(t){e.credits=e.credits.destroy(),e.addCredits(t)})},destroy:function(){var e,i=this,n=i.axes,r=i.series,o=i.container,s=o&&o.parentNode;for(g(i,"destroy"),i.renderer.forExport?t.erase(u,i):u[i.index]=void 0,t.chartCount--,i.renderTo.removeAttribute("data-highcharts-chart"),A(i),e=n.length;e--;)n[e]=n[e].destroy();for(this.scroller&&this.scroller.destroy&&this.scroller.destroy(),e=r.length;e--;)r[e]=r[e].destroy();h("title subtitle chartBackground plotBackground plotBGImage plotBorder seriesGroup clipRect credits pointer rangeSelector legend resetZoomButton tooltip renderer".split(" "),function(t){var e=i[t];e&&e.destroy&&(i[t]=e.destroy())}),o&&(o.innerHTML="",A(o),s&&c(o)),C(i,function(t,e){delete i[e]})},firstRender:function(){var t=this,e=t.options;t.isReadyToRender&&!t.isReadyToRender()||(t.getContainer(),t.resetMargins(),t.setChartSize(),t.propFromSeries(),t.getAxes(),h(e.series||[],function(e){t.initSeries(e)}),t.linkSeries(),g(t,"beforeRender"),I&&(t.pointer=new I(t,e)),t.render(),!t.renderer.imgCount&&t.onload&&t.onload(),t.temporaryDisplay(!0))},onload:function(){h([this.callback].concat(this.callbacks),function(t){t&&void 0!==this.index&&t.apply(this,[this])},this),g(this,"load"),g(this,"render"),d(this.index)&&this.setReflow(this.options.chart.reflow),this.onload=null}})}(e),function(t){var e=t.addEvent,i=t.Chart,n=t.each;e(i,"afterSetChartSize",function(e){var i=this.options.chart.scrollablePlotArea;(i=i&&i.minWidth)&&(this.scrollablePixels=i=Math.max(0,i-this.chartWidth))&&(this.plotWidth+=i,this.clipBox.width+=i,e.skipAxes||n(this.axes,function(e){1===e.side?e.getPlotLinePath=function(){var i,n=this.right;return this.right=n-e.chart.scrollablePixels,i=t.Axis.prototype.getPlotLinePath.apply(this,arguments),this.right=n,i}:(e.setAxisSize(),e.setAxisTranslation())}))}),e(i,"render",function(){this.scrollablePixels?(this.setUpScrolling&&this.setUpScrolling(),this.applyFixed()):this.fixedDiv&&this.applyFixed()}),i.prototype.setUpScrolling=function(){this.scrollingContainer=t.createElement("div",{className:"highcharts-scrolling"},{overflowX:"auto",WebkitOverflowScrolling:"touch"},this.renderTo),this.innerContainer=t.createElement("div",{className:"highcharts-inner-container"},null,this.scrollingContainer),this.innerContainer.appendChild(this.container),this.setUpScrolling=null},i.prototype.applyFixed=function(){var e,i,n=this.container;this.fixedDiv||(this.fixedDiv=t.createElement("div",{className:"highcharts-fixed"},{position:"absolute",overflow:"hidden",pointerEvents:"none",zIndex:2},null,!0),this.renderTo.insertBefore(this.fixedDiv,this.renderTo.firstChild),this.fixedRenderer=e=new t.Renderer(this.fixedDiv,0,0),this.scrollableMask=e.path().attr({fill:t.color(this.options.chart.backgroundColor||"#fff").setOpacity(.85).get(),zIndex:-1}).addClass("highcharts-scrollable-mask").add(),t.each([this.inverted?".highcharts-xaxis":".highcharts-yaxis",this.inverted?".highcharts-xaxis-labels":".highcharts-yaxis-labels",".highcharts-contextbutton",".highcharts-credits",".highcharts-legend",".highcharts-subtitle",".highcharts-title"],function(i){t.each(n.querySelectorAll(i),function(t){e.box.appendChild(t),t.style.pointerEvents="auto"})})),this.fixedRenderer.setSize(this.chartWidth,this.chartHeight),i=this.chartWidth+this.scrollablePixels,this.container.style.width=i+"px",this.renderer.boxWrapper.attr({width:i,height:this.chartHeight,viewBox:[0,0,i,this.chartHeight].join(" ")}),i=this.options.chart.scrollablePlotArea,i.scrollPositionX&&(this.scrollingContainer.scrollLeft=this.scrollablePixels*i.scrollPositionX);var r=this.axisOffset;i=this.plotTop-r[0]-1;var r=this.plotTop+this.plotHeight+r[2],o=this.plotLeft+this.plotWidth-this.scrollablePixels;this.scrollableMask.attr({d:this.scrollablePixels?["M",0,i,"L",this.plotLeft-1,i,"L",this.plotLeft-1,r,"L",0,r,"Z","M",o,i,"L",this.chartWidth,i,"L",this.chartWidth,r,"L",o,r,"Z"]:["M",0,0]})}}(e),function(t){var e,i=t.each,n=t.extend,r=t.erase,o=t.fireEvent,s=t.format,a=t.isArray,l=t.isNumber,c=t.pick,u=t.removeEvent;t.Point=e=function(){},t.Point.prototype={init:function(t,e,i){return this.series=t,this.color=t.color,this.applyOptions(e,i),t.options.colorByPoint?(e=t.options.colors||t.chart.options.colors,this.color=this.color||e[t.colorCounter],e=e.length,i=t.colorCounter,++t.colorCounter===e&&(t.colorCounter=0)):i=t.colorIndex,this.colorIndex=c(this.colorIndex,i),t.chart.pointCount++,o(this,"afterInit"),this},applyOptions:function(t,i){var r=this.series,o=r.options.pointValKey||r.pointValKey;return t=e.prototype.optionsToObject.call(this,t),n(this,t),this.options=this.options?n(this.options,t):t,t.group&&delete this.group,o&&(this.y=this[o]),this.isNull=c(this.isValid&&!this.isValid(),null===this.x||!l(this.y,!0)),this.selected&&(this.state="select"),"name"in this&&void 0===i&&r.xAxis&&r.xAxis.hasNames&&(this.x=r.xAxis.nameToX(this)),void 0===this.x&&r&&(this.x=void 0===i?r.autoIncrement(this):i),this},setNestedProperty:function(e,i,n){return n=n.split("."),t.reduce(n,function(e,n,r,o){return e[n]=o.length-1===r?i:t.isObject(e[n],!0)?e[n]:{},e[n]},e),e},optionsToObject:function(e){var i={},n=this.series,r=n.options.keys,o=r||n.pointArrayMap||["y"],s=o.length,c=0,u=0;if(l(e)||null===e)i[o[0]]=e;else if(a(e))for(!r&&e.length>s&&(n=typeof e[0],"string"===n?i.name=e[0]:"number"===n&&(i.x=e[0]),c++);u<s;)r&&void 0===e[c]||(0<o[u].indexOf(".")?t.Point.prototype.setNestedProperty(i,e[c],o[u]):i[o[u]]=e[c]),c++,u++;else"object"==typeof e&&(i=e,e.dataLabels&&(n._hasPointLabels=!0),e.marker&&(n._hasPointMarkers=!0));return i},getClassName:function(){return"highcharts-point"+(this.selected?" highcharts-point-select":"")+(this.negative?" highcharts-negative":"")+(this.isNull?" highcharts-null-point":"")+(void 0!==this.colorIndex?" highcharts-color-"+this.colorIndex:"")+(this.options.className?" "+this.options.className:"")+(this.zone&&this.zone.className?" "+this.zone.className.replace("highcharts-negative",""):"")},getZone:function(){var t,e=this.series,i=e.zones,e=e.zoneAxis||"y",n=0;for(t=i[n];this[e]>=t.value;)t=i[++n];return this.nonZonedColor||(this.nonZonedColor=this.color),this.color=t&&t.color&&!this.options.color?t.color:this.nonZonedColor,t},destroy:function(){var t,e=this.series.chart,i=e.hoverPoints;e.pointCount--,i&&(this.setState(),r(i,this),i.length||(e.hoverPoints=null)),this===e.hoverPoint&&this.onMouseOut(),(this.graphic||this.dataLabel)&&(u(this),this.destroyElements()),this.legendItem&&e.legend.destroyItem(this);for(t in this)this[t]=null},destroyElements:function(){for(var t,e=["graphic","dataLabel","dataLabelUpper","connector","shadowGroup"],i=6;i--;)t=e[i],this[t]&&(this[t]=this[t].destroy())},getLabelConfig:function(){return{x:this.category,y:this.y,color:this.color,colorIndex:this.colorIndex,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},tooltipFormatter:function(t){var e=this.series,n=e.tooltipOptions,r=c(n.valueDecimals,""),o=n.valuePrefix||"",a=n.valueSuffix||"";return i(e.pointArrayMap||["y"],function(e){e="{point."+e,(o||a)&&(t=t.replace(RegExp(e+"}","g"),o+e+"}"+a)),t=t.replace(RegExp(e+"}","g"),e+":,."+r+"f}")}),s(t,{point:this,series:this.series},e.chart.time)},firePointEvent:function(t,e,i){var n=this,r=this.series.options;(r.point.events[t]||n.options&&n.options.events&&n.options.events[t])&&this.importEvents(),"click"===t&&r.allowPointSelect&&(i=function(t){n.select&&n.select(null,t.ctrlKey||t.metaKey||t.shiftKey)}),o(this,t,e,i)},visible:!0}}(e),function(t){var e=t.addEvent,i=t.animObject,n=t.arrayMax,r=t.arrayMin,o=t.correctFloat,s=t.defaultOptions,a=t.defaultPlotOptions,l=t.defined,c=t.each,u=t.erase,p=t.extend,d=t.fireEvent,h=t.grep,f=t.isArray,m=t.isNumber,g=t.isString,y=t.merge,v=t.objectEach,b=t.pick,w=t.removeEvent,k=t.splat,x=t.SVGElement,T=t.syncTimeout,C=t.win;t.Series=t.seriesType("line",null,{lineWidth:2,allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},marker:{lineWidth:0,lineColor:"#ffffff",enabledThreshold:2,radius:4,states:{normal:{animation:!0},hover:{animation:{duration:50},enabled:!0,radiusPlus:2,lineWidthPlus:1},select:{fillColor:"#cccccc",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{align:"center",formatter:function(){return null===this.y?"":t.numberFormat(this.y,-1)},style:{fontSize:"11px",fontWeight:"bold",color:"contrast",textOutline:"1px contrast"},verticalAlign:"bottom",x:0,y:0,padding:5},cropThreshold:300,pointRange:0,softThreshold:!0,states:{normal:{animation:!0},hover:{animation:{duration:50},lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1e3,findNearestPointBy:"x"},{isCartesian:!0,pointClass:t.Point,sorted:!0,requireSorting:!0,directTouch:!1,axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],coll:"series",init:function(t,i){var n,r,o=this,s=t.series;o.chart=t,o.options=i=o.setOptions(i),o.linkedSeries=[],o.bindAxes(),p(o,{name:i.name,state:"",visible:!1!==i.visible,selected:!0===i.selected}),n=i.events,v(n,function(t,i){e(o,i,t)}),(n&&n.click||i.point&&i.point.events&&i.point.events.click||i.allowPointSelect)&&(t.runTrackerClick=!0),o.getColor(),o.getSymbol(),c(o.parallelArrays,function(t){o[t+"Data"]=[]}),o.setData(i.data,!1),o.isCartesian&&(t.hasCartesianSeries=!0),s.length&&(r=s[s.length-1]),o._i=b(r&&r._i,-1)+1,t.orderSeries(this.insert(s)),d(this,"afterInit")},insert:function(t){var e,i=this.options.index;if(m(i)){for(e=t.length;e--;)if(i>=b(t[e].options.index,t[e]._i)){t.splice(e+1,0,this);break}-1===e&&t.unshift(this),e+=1}else t.push(this);return b(e,t.length-1)},bindAxes:function(){var e,i=this,n=i.options,r=i.chart;c(i.axisTypes||[],function(o){c(r[o],function(t){e=t.options,(n[o]===e.index||void 0!==n[o]&&n[o]===e.id||void 0===n[o]&&0===e.index)&&(i.insert(t.series),i[o]=t,t.isDirty=!0)}),i[o]||i.optionalAxis===o||t.error(18,!0)})},updateParallelArrays:function(t,e){var i=t.series,n=arguments,r=m(e)?function(n){var r="y"===n&&i.toYData?i.toYData(t):t[n];i[n+"Data"][e]=r}:function(t){Array.prototype[e].apply(i[t+"Data"],Array.prototype.slice.call(n,2))};c(i.parallelArrays,r)},autoIncrement:function(){var t,e=this.options,i=this.xIncrement,n=e.pointIntervalUnit,r=this.chart.time,i=b(i,e.pointStart,0);return this.pointInterval=t=b(this.pointInterval,e.pointInterval,1),n&&(e=new r.Date(i),"day"===n?r.set("Date",e,r.get("Date",e)+t):"month"===n?r.set("Month",e,r.get("Month",e)+t):"year"===n&&r.set("FullYear",e,r.get("FullYear",e)+t),t=e.getTime()-i),this.xIncrement=i+t,i},setOptions:function(t){var e=this.chart,i=e.options,n=i.plotOptions,r=(e.userOptions||{}).plotOptions||{},o=n[this.type];return this.userOptions=t,e=y(o,n.series,t),this.tooltipOptions=y(s.tooltip,s.plotOptions.series&&s.plotOptions.series.tooltip,s.plotOptions[this.type].tooltip,i.tooltip.userOptions,n.series&&n.series.tooltip,n[this.type].tooltip,t.tooltip),this.stickyTracking=b(t.stickyTracking,r[this.type]&&r[this.type].stickyTracking,r.series&&r.series.stickyTracking,!(!this.tooltipOptions.shared||this.noSharedTooltip)||e.stickyTracking),null===o.marker&&delete e.marker,this.zoneAxis=e.zoneAxis,t=this.zones=(e.zones||[]).slice(),!e.negativeColor&&!e.negativeFillColor||e.zones||t.push({value:e[this.zoneAxis+"Threshold"]||e.threshold||0,className:"highcharts-negative",color:e.negativeColor,fillColor:e.negativeFillColor}),t.length&&l(t[t.length-1].value)&&t.push({color:this.color,fillColor:this.fillColor}),d(this,"afterSetOptions",{options:e}),e},getName:function(){return this.name||"Series "+(this.index+1)},getCyclic:function(t,e,i){var n,r=this.chart,o=this.userOptions,s=t+"Index",a=t+"Counter",c=i?i.length:b(r.options.chart[t+"Count"],r[t+"Count"]);e||(n=b(o[s],o["_"+s]),l(n)||(r.series.length||(r[a]=0),o["_"+s]=n=r[a]%c,r[a]+=1),i&&(e=i[n])),void 0!==n&&(this[s]=n),this[t]=e},getColor:function(){this.options.colorByPoint?this.options.color=null:this.getCyclic("color",this.options.color||a[this.type].color,this.chart.options.colors)},getSymbol:function(){this.getCyclic("symbol",this.options.marker.symbol,this.chart.options.symbols)},drawLegendSymbol:t.LegendSymbolMixin.drawLineMarker,updateData:function(e){var i,n,r,o=this.options,s=this.points,a=[],l=this.requireSorting;if(c(e,function(e){var n;n=t.defined(e)&&this.pointClass.prototype.optionsToObject.call({series:this},e).x,m(n)&&(n=t.inArray(n,this.xData,r),-1===n?a.push(e):e!==o.data[n]?(s[n].update(e,!1,null,!1),s[n].touched=!0,l&&(r=n)):s[n]&&(s[n].touched=!0),i=!0)},this),i)for(e=s.length;e--;)n=s[e],n.touched||n.remove(!1),n.touched=!1;else{if(e.length!==s.length)return!1;c(e,function(t,e){s[e].update&&t!==o.data[e]&&s[e].update(t,!1,null,!1)})}return c(a,function(t){this.addPoint(t,!1)},this),!0},setData:function(e,i,n,r){var o,s,a=this,l=a.points,u=l&&l.length||0,p=a.options,d=a.chart,h=null,y=a.xAxis,v=p.turboThreshold,w=this.xData,k=this.yData,x=(o=a.pointArrayMap)&&o.length;if(e=e||[],o=e.length,i=b(i,!0),!1!==r&&o&&u&&!a.cropped&&!a.hasGroupedData&&a.visible&&(s=this.updateData(e)),!s){if(a.xIncrement=null,a.colorCounter=0,c(this.parallelArrays,function(t){a[t+"Data"].length=0}),v&&o>v){for(n=0;null===h&&n<o;)h=e[n],n++;if(m(h))for(n=0;n<o;n++)w[n]=this.autoIncrement(),k[n]=e[n];else if(f(h))if(x)for(n=0;n<o;n++)h=e[n],w[n]=h[0],k[n]=h.slice(1,x+1);else for(n=0;n<o;n++)h=e[n],w[n]=h[0],k[n]=h[1];else t.error(12)}else for(n=0;n<o;n++)void 0!==e[n]&&(h={series:a},a.pointClass.prototype.applyOptions.apply(h,[e[n]]),a.updateParallelArrays(h,n));for(k&&g(k[0])&&t.error(14,!0),a.data=[],a.options.data=a.userOptions.data=e,n=u;n--;)l[n]&&l[n].destroy&&l[n].destroy();y&&(y.minRange=y.userMinRange),a.isDirty=d.isDirtyBox=!0,a.isDirtyData=!!l,n=!1}"point"===p.legendType&&(this.processData(),this.generatePoints()),i&&d.redraw(n)},processData:function(e){var i,n=this.xData,r=this.yData,o=n.length;i=0;var s,a,l,c=this.xAxis,u=this.options;l=u.cropThreshold;var p,d,h=this.getExtremesFromAll||u.getExtremesFromAll,f=this.isCartesian,u=c&&c.val2lin,m=c&&c.isLog,g=this.requireSorting;if(f&&!this.isDirty&&!c.isDirty&&!this.yAxis.isDirty&&!e)return!1;for(c&&(e=c.getExtremes(),p=e.min,d=e.max),f&&this.sorted&&!h&&(!l||o>l||this.forceCrop)&&(n[o-1]<p||n[0]>d?(n=[],r=[]):(n[0]<p||n[o-1]>d)&&(i=this.cropData(this.xData,this.yData,p,d),n=i.xData,r=i.yData,i=i.start,s=!0)),l=n.length||1;--l;)o=m?u(n[l])-u(n[l-1]):n[l]-n[l-1],0<o&&(void 0===a||o<a)?a=o:0>o&&g&&(t.error(15),g=!1);this.cropped=s,this.cropStart=i,this.processedXData=n,this.processedYData=r,this.closestPointRange=a},cropData:function(t,e,i,n,r){var o,s=t.length,a=0,l=s;for(r=b(r,this.cropShoulder,1),o=0;o<s;o++)if(t[o]>=i){a=Math.max(0,o-r);break}for(i=o;i<s;i++)if(t[i]>n){l=i+r;break}return{xData:t.slice(a,l),yData:e.slice(a,l),start:a,end:l}},generatePoints:function(){var t,e,i,n,r=this.options,o=r.data,s=this.data,a=this.processedXData,l=this.processedYData,c=this.pointClass,u=a.length,p=this.cropStart||0,d=this.hasGroupedData,r=r.keys,h=[];for(s||d||(s=[],s.length=o.length,s=this.data=s),r&&d&&(this.options.keys=!1),n=0;n<u;n++)e=p+n,d?(i=(new c).init(this,[a[n]].concat(k(l[n]))),i.dataGroup=this.groupMap[n]):(i=s[e])||void 0===o[e]||(s[e]=i=(new c).init(this,o[e],a[n])),i&&(i.index=e,h[n]=i);if(this.options.keys=r,s&&(u!==(t=s.length)||d))for(n=0;n<t;n++)n!==p||d||(n+=u),s[n]&&(s[n].destroyElements(),s[n].plotX=void 0);this.data=s,this.points=h},getExtremes:function(t){var e,i=this.yAxis,o=this.processedXData,s=[],a=0;e=this.xAxis.getExtremes();var l,c,u,p,d=e.min,h=e.max,g=this.requireSorting?1:0;for(t=t||this.stackedYData||this.processedYData||[],e=t.length,p=0;p<e;p++)if(c=o[p],u=t[p],l=(m(u,!0)||f(u))&&(!i.positiveValuesOnly||u.length||0<u),c=this.getExtremesFromAll||this.options.getExtremesFromAll||this.cropped||(o[p+g]||c)>=d&&(o[p-g]||c)<=h,l&&c)if(l=u.length)for(;l--;)"number"==typeof u[l]&&(s[a++]=u[l]);else s[a++]=u;this.dataMin=r(s),this.dataMax=n(s)},translate:function(){this.processedXData||this.processData(),this.generatePoints();var t,e,i,n,r=this.options,s=r.stacking,a=this.xAxis,c=a.categories,u=this.yAxis,p=this.points,h=p.length,f=!!this.modifyValue,g=r.pointPlacement,y="between"===g||m(g),v=r.threshold,w=r.startFromThreshold?v:0,k=Number.MAX_VALUE;for("between"===g&&(g=.5),m(g)&&(g*=b(r.pointRange||a.pointRange)),r=0;r<h;r++){var x=p[r],T=x.x,C=x.y;e=x.low;var I,_=s&&u.stacks[(this.negStacks&&C<(w?0:v)?"-":"")+this.stackKey];u.positiveValuesOnly&&null!==C&&0>=C&&(x.isNull=!0),x.plotX=t=o(Math.min(Math.max(-1e5,a.translate(T,0,0,0,1,g,"flags"===this.type)),1e5)),s&&this.visible&&!x.isNull&&_&&_[T]&&(n=this.getStackIndicator(n,T,this.index),I=_[T],C=I.points[n.key],e=C[0],C=C[1],e===w&&n.key===_[T].base&&(e=b(m(v)&&v,u.min)),u.positiveValuesOnly&&0>=e&&(e=null),x.total=x.stackTotal=I.total,x.percentage=I.total&&x.y/I.total*100,x.stackY=C,I.setOffset(this.pointXOffset||0,this.barW||0)),x.yBottom=l(e)?Math.min(Math.max(-1e5,u.translate(e,0,1,0,1)),1e5):null,f&&(C=this.modifyValue(C,x)),x.plotY=e="number"==typeof C&&1/0!==C?Math.min(Math.max(-1e5,u.translate(C,0,1,0,1)),1e5):void 0,x.isInside=void 0!==e&&0<=e&&e<=u.len&&0<=t&&t<=a.len,x.clientX=y?o(a.translate(T,0,0,0,1,g)):t,x.negative=x.y<(v||0),x.category=c&&void 0!==c[x.x]?c[x.x]:x.x,x.isNull||(void 0!==i&&(k=Math.min(k,Math.abs(t-i))),i=t),x.zone=this.zones.length&&x.getZone()}this.closestPointRangePx=k,d(this,"afterTranslate")},getValidPoints:function(t,e){var i=this.chart;return h(t||this.points||[],function(t){return!(e&&!i.isInsidePlot(t.plotX,t.plotY,i.inverted))&&!t.isNull})},setClip:function(t){var e=this.chart,i=this.options,n=e.renderer,r=e.inverted,o=this.clipBox,s=o||e.clipBox,a=this.sharedClipKey||["_sharedClip",t&&t.duration,t&&t.easing,s.height,i.xAxis,i.yAxis].join(),l=e[a],c=e[a+"m"];l||(t&&(s.width=0,r&&(s.x=e.plotSizeX),e[a+"m"]=c=n.clipRect(r?e.plotSizeX+99:-99,r?-e.plotLeft:-e.plotTop,99,r?e.chartWidth:e.chartHeight)),e[a]=l=n.clipRect(s),l.count={length:0}),t&&!l.count[this.index]&&(l.count[this.index]=!0,l.count.length+=1),!1!==i.clip&&(this.group.clip(t||o?l:e.clipRect),this.markerGroup.clip(c),this.sharedClipKey=a),t||(l.count[this.index]&&(delete l.count[this.index],--l.count.length),0===l.count.length&&a&&e[a]&&(o||(e[a]=e[a].destroy()),e[a+"m"]&&(e[a+"m"]=e[a+"m"].destroy())))},animate:function(t){var e,n=this.chart,r=i(this.options.animation);t?this.setClip(r):(e=this.sharedClipKey,(t=n[e])&&t.animate({width:n.plotSizeX,x:0},r),n[e+"m"]&&n[e+"m"].animate({width:n.plotSizeX+99,x:0},r),this.animate=null)},afterAnimate:function(){this.setClip(),d(this,"afterAnimate"),this.finishedAnimating=!0},drawPoints:function(){var t,e,i,n,r,o,s,a,l=this.points,c=this.chart,u=this.options.marker,p=this[this.specialGroup]||this.markerGroup,d=b(u.enabled,!!this.xAxis.isRadial||null,this.closestPointRangePx>=u.enabledThreshold*u.radius);if(!1!==u.enabled||this._hasPointMarkers)for(t=0;t<l.length;t++)e=l[t],n=e.graphic,r=e.marker||{},o=!!e.marker,i=d&&void 0===r.enabled||r.enabled,s=e.isInside,i&&!e.isNull?(i=b(r.symbol,this.symbol),a=this.markerAttribs(e,e.selected&&"select"),n?n[s?"show":"hide"](!0).animate(a):s&&(0<a.width||e.hasImage)&&(e.graphic=n=c.renderer.symbol(i,a.x,a.y,a.width,a.height,o?r:u).add(p)),n&&n.attr(this.pointAttribs(e,e.selected&&"select")),n&&n.addClass(e.getClassName(),!0)):n&&(e.graphic=n.destroy())},markerAttribs:function(t,e){var i=this.options.marker,n=t.marker||{},r=n.symbol||i.symbol,o=b(n.radius,i.radius);return e&&(i=i.states[e],e=n.states&&n.states[e],o=b(e&&e.radius,i&&i.radius,o+(i&&i.radiusPlus||0))),t.hasImage=r&&0===r.indexOf("url"),t.hasImage&&(o=0),t={x:Math.floor(t.plotX)-o,y:t.plotY-o},o&&(t.width=t.height=2*o),t},pointAttribs:function(t,e){var i=this.options.marker,n=t&&t.options,r=n&&n.marker||{},o=this.color,s=n&&n.color,a=t&&t.color,n=b(r.lineWidth,i.lineWidth);return t=t&&t.zone&&t.zone.color,o=s||t||a||o,t=r.fillColor||i.fillColor||o,o=r.lineColor||i.lineColor||o,e&&(i=i.states[e],e=r.states&&r.states[e]||{},n=b(e.lineWidth,i.lineWidth,n+b(e.lineWidthPlus,i.lineWidthPlus,0)),t=e.fillColor||i.fillColor||t,o=e.lineColor||i.lineColor||o),{stroke:o,"stroke-width":n,fill:t}},destroy:function(){var e,i,n,r,o=this,s=o.chart,a=/AppleWebKit\/533/.test(C.navigator.userAgent),l=o.data||[];for(d(o,"destroy"),w(o),c(o.axisTypes||[],function(t){(r=o[t])&&r.series&&(u(r.series,o),r.isDirty=r.forceRedraw=!0)}),o.legendItem&&o.chart.legend.destroyItem(o),i=l.length;i--;)(n=l[i])&&n.destroy&&n.destroy();o.points=null,t.clearTimeout(o.animationTimeout),v(o,function(t,i){t instanceof x&&!t.survive&&(e=a&&"group"===i?"hide":"destroy",t[e]())}),s.hoverSeries===o&&(s.hoverSeries=null),u(s.series,o),s.orderSeries(),v(o,function(t,e){delete o[e]})},getGraphPath:function(t,e,i){var n,r,o=this,s=o.options,a=s.step,u=[],p=[];return t=t||o.points,(n=t.reversed)&&t.reverse(),(a={right:1,center:2}[a]||a&&3)&&n&&(a=4-a),!s.connectNulls||e||i||(t=this.getValidPoints(t)),c(t,function(n,c){var d=n.plotX,h=n.plotY,f=t[c-1];(n.leftCliff||f&&f.rightCliff)&&!i&&(r=!0),n.isNull&&!l(e)&&0<c?r=!s.connectNulls:n.isNull&&!e?r=!0:(0===c||r?c=["M",n.plotX,n.plotY]:o.getPointSpline?c=o.getPointSpline(t,n,c):a?(c=1===a?["L",f.plotX,h]:2===a?["L",(f.plotX+d)/2,f.plotY,"L",(f.plotX+d)/2,h]:["L",d,f.plotY],c.push("L",d,h)):c=["L",d,h],p.push(n.x),a&&(p.push(n.x),2===a&&p.push(n.x)),u.push.apply(u,c),r=!1)}),u.xMap=p,o.graphPath=u},drawGraph:function(){var t=this,e=this.options,i=(this.gappedPath||this.getGraphPath).call(this),n=[["graph","highcharts-graph",e.lineColor||this.color,e.dashStyle]],n=t.getZonesGraphs(n);c(n,function(n,r){var o=n[0],s=t[o];s?(s.endX=t.preventGraphAnimation?null:i.xMap,s.animate({d:i})):i.length&&(t[o]=t.chart.renderer.path(i).addClass(n[1]).attr({zIndex:1}).add(t.group),s={stroke:n[2],"stroke-width":e.lineWidth,fill:t.fillGraph&&t.color||"none"},n[3]?s.dashstyle=n[3]:"square"!==e.linecap&&(s["stroke-linecap"]=s["stroke-linejoin"]="round"),s=t[o].attr(s).shadow(2>r&&e.shadow)),s&&(s.startX=i.xMap,s.isArea=i.isArea)})},getZonesGraphs:function(t){return c(this.zones,function(e,i){t.push(["zone-graph-"+i,"highcharts-graph highcharts-zone-graph-"+i+" "+(e.className||""),e.color||this.color,e.dashStyle||this.options.dashStyle])},this),t},applyZones:function(){var t,e,i,n,r,o,s,a,l,u=this,p=this.chart,d=p.renderer,h=this.zones,f=this.clips||[],m=this.graph,g=this.area,y=Math.max(p.chartWidth,p.chartHeight),v=this[(this.zoneAxis||"y")+"Axis"],w=p.inverted,k=!1;h.length&&(m||g)&&v&&void 0!==v.min&&(r=v.reversed,o=v.horiz,m&&!this.showLine&&m.hide(),g&&g.hide(),n=v.getExtremes(),c(h,function(c,h){t=r?o?p.plotWidth:0:o?0:v.toPixels(n.min),t=Math.min(Math.max(b(e,t),0),y),e=Math.min(Math.max(Math.round(v.toPixels(b(c.value,n.max),!0)),0),y),k&&(t=e=v.toPixels(n.max)),s=Math.abs(t-e),a=Math.min(t,e),l=Math.max(t,e),v.isXAxis?(i={x:w?l:a,y:0,width:s,height:y},o||(i.x=p.plotHeight-i.x)):(i={x:0,y:w?l:a,width:y,height:s},o&&(i.y=p.plotWidth-i.y)),w&&d.isVML&&(i=v.isXAxis?{x:0,y:r?a:l,height:i.width,width:p.chartWidth}:{x:i.y-p.plotLeft-p.spacingBox.x,y:0,width:i.height,height:p.chartHeight}),f[h]?f[h].animate(i):(f[h]=d.clipRect(i),m&&u["zone-graph-"+h].clip(f[h]),g&&u["zone-area-"+h].clip(f[h])),k=c.value>n.max,u.resetZones&&0===e&&(e=void 0)}),this.clips=f)},invertGroups:function(t){function i(){c(["group","markerGroup"],function(e){r[e]&&(o.renderer.isVML&&r[e].attr({width:r.yAxis.len,height:r.xAxis.len}),r[e].width=r.yAxis.len,r[e].height=r.xAxis.len,r[e].invert(t))})}var n,r=this,o=r.chart;r.xAxis&&(n=e(o,"resize",i),e(r,"destroy",n),i(),r.invertGroups=i)},plotGroup:function(t,e,i,n,r){var o=this[t],s=!o;return s&&(this[t]=o=this.chart.renderer.g().attr({zIndex:n||.1}).add(r)),o.addClass("highcharts-"+e+" highcharts-series-"+this.index+" highcharts-"+this.type+"-series "+(l(this.colorIndex)?"highcharts-color-"+this.colorIndex+" ":"")+(this.options.className||"")+(o.hasClass("highcharts-tracker")?" highcharts-tracker":""),!0),o.attr({visibility:i})[s?"attr":"animate"](this.getPlotBox()),o},getPlotBox:function(){var t=this.chart,e=this.xAxis,i=this.yAxis;return t.inverted&&(e=i,i=this.xAxis),{translateX:e?e.left:t.plotLeft,translateY:i?i.top:t.plotTop,scaleX:1,scaleY:1}},render:function(){var t,e=this,n=e.chart,r=e.options,o=!!e.animate&&n.renderer.isSVG&&i(r.animation).duration,s=e.visible?"inherit":"hidden",a=r.zIndex,l=e.hasRendered,c=n.seriesGroup,u=n.inverted;t=e.plotGroup("group","series",s,a,c),e.markerGroup=e.plotGroup("markerGroup","markers",s,a,c),o&&e.animate(!0),t.inverted=!!e.isCartesian&&u,e.drawGraph&&(e.drawGraph(),e.applyZones()),e.drawDataLabels&&e.drawDataLabels(),e.visible&&e.drawPoints(),e.drawTracker&&!1!==e.options.enableMouseTracking&&e.drawTracker(),e.invertGroups(u),!1===r.clip||e.sharedClipKey||l||t.clip(n.clipRect),o&&e.animate(),l||(e.animationTimeout=T(function(){e.afterAnimate()},o)),e.isDirty=!1,e.hasRendered=!0,d(e,"afterRender")},redraw:function(){var t=this.chart,e=this.isDirty||this.isDirtyData,i=this.group,n=this.xAxis,r=this.yAxis;i&&(t.inverted&&i.attr({width:t.plotWidth,height:t.plotHeight}),i.animate({translateX:b(n&&n.left,t.plotLeft),translateY:b(r&&r.top,t.plotTop)})),this.translate(),this.render(),e&&delete this.kdTree},kdAxisArray:["clientX","plotY"],searchPoint:function(t,e){var i=this.xAxis,n=this.yAxis,r=this.chart.inverted;return this.searchKDTree({clientX:r?i.len-t.chartY+i.pos:t.chartX-i.pos,plotY:r?n.len-t.chartX+n.pos:t.chartY-n.pos},e)},buildKDTree:function(){function t(i,n,r){var o,s;if(s=i&&i.length)return o=e.kdAxisArray[n%r],i.sort(function(t,e){return t[o]-e[o]}),s=Math.floor(s/2),{point:i[s],left:t(i.slice(0,s),n+1,r),right:t(i.slice(s+1),n+1,r)}}this.buildingKdTree=!0;var e=this,i=-1<e.options.findNearestPointBy.indexOf("y")?2:1;delete e.kdTree,T(function(){e.kdTree=t(e.getValidPoints(null,!e.directTouch),i,i),e.buildingKdTree=!1},e.options.kdNow?0:1)},searchKDTree:function(t,e){function i(t,e,a,c){var u,p,d=e.point,h=n.kdAxisArray[a%c],f=d;return p=l(t[r])&&l(d[r])?Math.pow(t[r]-d[r],2):null,u=l(t[o])&&l(d[o])?Math.pow(t[o]-d[o],2):null,u=(p||0)+(u||0),d.dist=l(u)?Math.sqrt(u):Number.MAX_VALUE,d.distX=l(p)?Math.sqrt(p):Number.MAX_VALUE,h=t[h]-d[h],u=0>h?"left":"right",p=0>h?"right":"left",e[u]&&(u=i(t,e[u],a+1,c),f=u[s]<f[s]?u:d),e[p]&&Math.sqrt(h*h)<f[s]&&(t=i(t,e[p],a+1,c),f=t[s]<f[s]?t:f),f}var n=this,r=this.kdAxisArray[0],o=this.kdAxisArray[1],s=e?"distX":"dist";if(e=-1<n.options.findNearestPointBy.indexOf("y")?2:1,this.kdTree||this.buildingKdTree||this.buildKDTree(),this.kdTree)return i(t,this.kdTree,e,e)}})}(e),function(t){var e=t.Axis,i=t.Chart,n=t.correctFloat,r=t.defined,o=t.destroyObjectProperties,s=t.each,a=t.format,l=t.objectEach,c=t.pick,u=t.Series;t.StackItem=function(t,e,i,n,r){var o=t.chart.inverted;this.axis=t,this.isNegative=i,this.options=e,this.x=n,this.total=null,this.points={},this.stack=r,this.rightCliff=this.leftCliff=0,this.alignOptions={align:e.align||(o?i?"left":"right":"center"),verticalAlign:e.verticalAlign||(o?"middle":i?"bottom":"top"),y:c(e.y,o?4:i?14:-6),x:c(e.x,o?i?-6:6:0)},this.textAlign=e.textAlign||(o?i?"right":"left":"center")},t.StackItem.prototype={destroy:function(){o(this,this.axis)},render:function(t){var e=this.axis.chart,i=this.options,n=i.format,n=n?a(n,this,e.time):i.formatter.call(this);this.label?this.label.attr({text:n,visibility:"hidden"}):this.label=e.renderer.text(n,null,null,i.useHTML).css(i.style).attr({align:this.textAlign,rotation:i.rotation,visibility:"hidden"}).add(t)},setOffset:function(t,e){var i=this.axis,n=i.chart,r=i.translate(i.usePercentage?100:this.total,0,0,0,1),o=i.translate(0),o=Math.abs(r-o);t=n.xAxis[0].translate(this.x)+t,i=this.getStackBox(n,this,t,r,e,o,i),(e=this.label)&&(e.align(this.alignOptions,null,i),i=e.alignAttr,e[!1===this.options.crop||n.isInsidePlot(i.x,i.y)?"show":"hide"](!0))},getStackBox:function(t,e,i,n,r,o,s){var a=e.axis.reversed,l=t.inverted;return t=s.height+s.pos-t.plotTop,e=e.isNegative&&!a||!e.isNegative&&a,{x:l?e?n:n-o:i,y:l?t-i-r:e?t-n-o:t-n,width:l?o:r,height:l?r:o}}},i.prototype.getStacks=function(){var t=this;s(t.yAxis,function(t){t.stacks&&t.hasVisibleSeries&&(t.oldStacks=t.stacks)}),s(t.series,function(e){!e.options.stacking||!0!==e.visible&&!1!==t.options.chart.ignoreHiddenSeries||(e.stackKey=e.type+c(e.options.stack,""))})},e.prototype.buildStacks=function(){var t,e=this.series,i=c(this.options.reversedStacks,!0),n=e.length;if(!this.isXAxis){for(this.usePercentage=!1,t=n;t--;)e[i?t:n-t-1].setStackedPoints();for(t=0;t<n;t++)e[t].modifyStacks()}},e.prototype.renderStackTotals=function(){var t=this.chart,e=t.renderer,i=this.stacks,n=this.stackTotalGroup;n||(this.stackTotalGroup=n=e.g("stack-labels").attr({visibility:"visible",zIndex:6}).add()),n.translate(t.plotLeft,t.plotTop),l(i,function(t){l(t,function(t){t.render(n)})})},e.prototype.resetStacks=function(){var t=this,e=t.stacks;t.isXAxis||l(e,function(e){l(e,function(i,n){i.touched<t.stacksTouched?(i.destroy(),delete e[n]):(i.total=null,i.cumulative=null)})})},e.prototype.cleanStacks=function(){var t;this.isXAxis||(this.oldStacks&&(t=this.stacks=this.oldStacks),l(t,function(t){l(t,function(t){t.cumulative=t.total})}))},u.prototype.setStackedPoints=function(){if(this.options.stacking&&(!0===this.visible||!1===this.chart.options.chart.ignoreHiddenSeries)){var e,i,o,s,a,l,u,p=this.processedXData,d=this.processedYData,h=[],f=d.length,m=this.options,g=m.threshold,y=c(m.startFromThreshold&&g,0),v=m.stack,m=m.stacking,b=this.stackKey,w="-"+b,k=this.negStacks,x=this.yAxis,T=x.stacks,C=x.oldStacks;for(x.stacksTouched+=1,a=0;a<f;a++)l=p[a],u=d[a],e=this.getStackIndicator(e,l,this.index),s=e.key,o=(i=k&&u<(y?0:g))?w:b,T[o]||(T[o]={}),T[o][l]||(C[o]&&C[o][l]?(T[o][l]=C[o][l],T[o][l].total=null):T[o][l]=new t.StackItem(x,x.options.stackLabels,i,l,v)),o=T[o][l],null!==u?(o.points[s]=o.points[this.index]=[c(o.cumulative,y)],r(o.cumulative)||(o.base=s),o.touched=x.stacksTouched,0<e.index&&!1===this.singleStacks&&(o.points[s][0]=o.points[this.index+","+l+",0"][0])):o.points[s]=o.points[this.index]=null,"percent"===m?(i=i?b:w,k&&T[i]&&T[i][l]?(i=T[i][l],o.total=i.total=Math.max(i.total,o.total)+Math.abs(u)||0):o.total=n(o.total+(Math.abs(u)||0))):o.total=n(o.total+(u||0)),o.cumulative=c(o.cumulative,y)+(u||0),null!==u&&(o.points[s].push(o.cumulative),h[a]=o.cumulative);"percent"===m&&(x.usePercentage=!0),this.stackedYData=h,x.oldStacks={}}},u.prototype.modifyStacks=function(){var t,e=this,i=e.stackKey,n=e.yAxis.stacks,r=e.processedXData,o=e.options.stacking;e[o+"Stacker"]&&s([i,"-"+i],function(i){for(var s,a,l=r.length;l--;)s=r[l],t=e.getStackIndicator(t,s,e.index,i),(a=(s=n[i]&&n[i][s])&&s.points[t.key])&&e[o+"Stacker"](a,s,l)})},u.prototype.percentStacker=function(t,e,i){e=e.total?100/e.total:0,t[0]=n(t[0]*e),t[1]=n(t[1]*e),this.stackedYData[i]=t[1]},u.prototype.getStackIndicator=function(t,e,i,n){return!r(t)||t.x!==e||n&&t.key!==n?t={x:e,index:0,key:n}:t.index++,t.key=[i,e,t.index].join(),t}}(e),function(t){var e=t.addEvent,i=t.animate,n=t.Axis,r=t.createElement,o=t.css,s=t.defined,a=t.each,l=t.erase,c=t.extend,u=t.fireEvent,p=t.inArray,d=t.isNumber,h=t.isObject,f=t.isArray,m=t.merge,g=t.objectEach,y=t.pick,v=t.Point,b=t.Series,w=t.seriesTypes,k=t.setAnimation,x=t.splat;c(t.Chart.prototype,{addSeries:function(t,e,i){var n,r=this;return t&&(e=y(e,!0),u(r,"addSeries",{options:t},function(){n=r.initSeries(t),r.isDirtyLegend=!0,r.linkSeries(),u(r,"afterAddSeries"),e&&r.redraw(i)})),n},addAxis:function(t,e,i,r){var o=e?"xAxis":"yAxis",s=this.options;return t=m(t,{index:this[o].length,isX:e}),e=new n(this,t),s[o]=x(s[o]||{}),s[o].push(t),y(i,!0)&&this.redraw(r),e},showLoading:function(t){var n=this,s=n.options,a=n.loadingDiv,l=s.loading,u=function(){a&&o(a,{left:n.plotLeft+"px",top:n.plotTop+"px",width:n.plotWidth+"px",height:n.plotHeight+"px"})};a||(n.loadingDiv=a=r("div",{className:"highcharts-loading highcharts-loading-hidden"},null,n.container),n.loadingSpan=r("span",{className:"highcharts-loading-inner"},null,a),e(n,"redraw",u)),a.className="highcharts-loading",n.loadingSpan.innerHTML=t||s.lang.loading,o(a,c(l.style,{zIndex:10})),o(n.loadingSpan,l.labelStyle),n.loadingShown||(o(a,{opacity:0,display:""}),i(a,{opacity:l.style.opacity||.5},{duration:l.showDuration||0})),n.loadingShown=!0,u()},hideLoading:function(){var t=this.options,e=this.loadingDiv;e&&(e.className="highcharts-loading highcharts-loading-hidden",i(e,{opacity:0},{duration:t.loading.hideDuration||100,complete:function(){o(e,{display:"none"})}})),this.loadingShown=!1},propsRequireDirtyBox:"backgroundColor borderColor borderWidth margin marginTop marginRight marginBottom marginLeft spacing spacingTop spacingRight spacingBottom spacingLeft borderRadius plotBackgroundColor plotBackgroundImage plotBorderColor plotBorderWidth plotShadow shadow".split(" "),propsRequireUpdateSeries:"chart.inverted chart.polar chart.ignoreHiddenSeries chart.type colors plotOptions time tooltip".split(" "),update:function(t,e,i,n){var r,o,l=this,c={credits:"addCredits",title:"setTitle",subtitle:"setSubtitle"},h=t.chart,f=[];u(l,"update",{options:t}),h&&(m(!0,l.options.chart,h),"className"in h&&l.setClassName(h.className),"reflow"in h&&l.setReflow(h.reflow),("inverted"in h||"polar"in h)&&(l.propFromSeries(),r=!0),"alignTicks"in h&&(r=!0),g(h,function(t,e){-1!==p("chart."+e,l.propsRequireUpdateSeries)&&(o=!0),-1!==p(e,l.propsRequireDirtyBox)&&(l.isDirtyBox=!0)}),"style"in h&&l.renderer.setStyle(h.style)),t.colors&&(this.options.colors=t.colors),t.plotOptions&&m(!0,this.options.plotOptions,t.plotOptions),g(t,function(t,e){l[e]&&"function"==typeof l[e].update?l[e].update(t,!1):"function"==typeof l[c[e]]&&l[c[e]](t),"chart"!==e&&-1!==p(e,l.propsRequireUpdateSeries)&&(o=!0)}),a("xAxis yAxis zAxis series colorAxis pane".split(" "),function(e){t[e]&&(a(x(t[e]),function(t,n){(n=s(t.id)&&l.get(t.id)||l[e][n])&&n.coll===e&&(n.update(t,!1),i&&(n.touched=!0)),!n&&i&&("series"===e?l.addSeries(t,!1).touched=!0:"xAxis"!==e&&"yAxis"!==e||(l.addAxis(t,"xAxis"===e,!1).touched=!0))}),i&&a(l[e],function(t){t.touched?delete t.touched:f.push(t)}))}),a(f,function(t){t.remove(!1)}),r&&a(l.axes,function(t){t.update({},!1)}),o&&a(l.series,function(t){t.update({},!1)}),t.loading&&m(!0,l.options.loading,t.loading),r=h&&h.width,h=h&&h.height,d(r)&&r!==l.chartWidth||d(h)&&h!==l.chartHeight?l.setSize(r,h,n):y(e,!0)&&l.redraw(n)},setSubtitle:function(t){this.setTitle(void 0,t)}}),c(v.prototype,{update:function(t,e,i,n){function r(){s.applyOptions(t),null===s.y&&l&&(s.graphic=l.destroy()),h(t,!0)&&(l&&l.element&&t&&t.marker&&void 0!==t.marker.symbol&&(s.graphic=l.destroy()),t&&t.dataLabels&&s.dataLabel&&(s.dataLabel=s.dataLabel.destroy()),s.connector&&(s.connector=s.connector.destroy())),o=s.index,a.updateParallelArrays(s,o),u.data[o]=h(u.data[o],!0)||h(t,!0)?s.options:y(t,u.data[o]),a.isDirty=a.isDirtyData=!0,!a.fixedBox&&a.hasCartesianSeries&&(c.isDirtyBox=!0),"point"===u.legendType&&(c.isDirtyLegend=!0),e&&c.redraw(i)}var o,s=this,a=s.series,l=s.graphic,c=a.chart,u=a.options;e=y(e,!0),!1===n?r():s.firePointEvent("update",{options:t},r)},remove:function(t,e){this.series.removePoint(p(this,this.series.data),t,e)}}),c(b.prototype,{addPoint:function(t,e,i,n){var r,o,s,a,l=this.options,c=this.data,u=this.chart,p=this.xAxis,p=p&&p.hasNames&&p.names,d=l.data,h=this.xData;if(e=y(e,!0),r={series:this},this.pointClass.prototype.applyOptions.apply(r,[t]),a=r.x,s=h.length,this.requireSorting&&a<h[s-1])for(o=!0;s&&h[s-1]>a;)s--;this.updateParallelArrays(r,"splice",s,0,0),this.updateParallelArrays(r,s),p&&r.name&&(p[a]=r.name),d.splice(s,0,t),o&&(this.data.splice(s,0,null),this.processData()),"point"===l.legendType&&this.generatePoints(),i&&(c[0]&&c[0].remove?c[0].remove(!1):(c.shift(),this.updateParallelArrays(r,"shift"),d.shift())),this.isDirtyData=this.isDirty=!0,e&&u.redraw(n)},removePoint:function(t,e,i){var n=this,r=n.data,o=r[t],s=n.points,a=n.chart,l=function(){s&&s.length===r.length&&s.splice(t,1),r.splice(t,1),n.options.data.splice(t,1),n.updateParallelArrays(o||{series:n},"splice",t,1),o&&o.destroy(),n.isDirty=!0,n.isDirtyData=!0,e&&a.redraw()};k(i,a),e=y(e,!0),o?o.firePointEvent("remove",null,l):l()},remove:function(t,e,i){function n(){r.destroy(),o.isDirtyLegend=o.isDirtyBox=!0,o.linkSeries(),y(t,!0)&&o.redraw(e)}var r=this,o=r.chart;!1!==i?u(r,"remove",null,n):n()},update:function(e,i){var n,r=this,o=r.chart,s=r.userOptions,l=r.oldType||r.type,d=e.type||s.type||o.options.chart.type,h=w[l].prototype,f=["group","markerGroup","dataLabelsGroup"],g=["navigatorSeries","baseSeries"],v=r.finishedAnimating&&{animation:!1},b=["data","name","turboThreshold"],k=t.keys(e),x=0<k.length;if(a(k,function(t){-1===p(t,b)&&(x=!1)}),x)e.data&&this.setData(e.data,!1),e.name&&this.setName(e.name,!1);else{g=f.concat(g),a(g,function(t){g[t]=r[t],delete r[t]}),e=m(s,v,{index:r.index,pointStart:y(s.pointStart,r.xData[0])},{data:r.options.data},e),r.remove(!1,null,!1);for(n in h)r[n]=void 0;w[d||l]?c(r,w[d||l].prototype):t.error(17,!0),a(g,function(t){r[t]=g[t]}),r.init(o,e),e.zIndex!==s.zIndex&&a(f,function(t){r[t]&&r[t].attr({zIndex:e.zIndex})}),r.oldType=l,o.linkSeries()}u(this,"afterUpdate"),y(i,!0)&&o.redraw(!1)},setName:function(t){this.name=this.options.name=this.userOptions.name=t,this.chart.isDirtyLegend=!0}}),c(n.prototype,{update:function(t,e){var i=this.chart;t=m(this.userOptions,t),i.options[this.coll].indexOf&&(i.options[this.coll][i.options[this.coll].indexOf(this.userOptions)]=t),this.destroy(!0),this.init(i,c(t,{events:void 0})),i.isDirtyBox=!0,y(e,!0)&&i.redraw()},remove:function(t){for(var e=this.chart,i=this.coll,n=this.series,r=n.length;r--;)n[r]&&n[r].remove(!1);l(e.axes,this),l(e[i],this),f(e.options[i])?e.options[i].splice(this.options.index,1):delete e.options[i],a(e[i],function(t,e){t.options.index=t.userOptions.index=e}),this.destroy(),e.isDirtyBox=!0,y(t,!0)&&e.redraw()},setTitle:function(t,e){this.update({title:t},e)},setCategories:function(t,e){this.update({categories:t},e)}})}(e),function(t){var e=t.color,i=t.each,n=t.map,r=t.pick,o=t.Series;(0,t.seriesType)("area","line",{softThreshold:!1,threshold:0},{singleStacks:!1,getStackPoints:function(e){var o,s,a=[],l=[],c=this.xAxis,u=this.yAxis,p=u.stacks[this.stackKey],d={},h=this.index,f=u.series,m=f.length,g=r(u.options.reversedStacks,!0)?1:-1;if(e=e||this.points,this.options.stacking){for(s=0;s<e.length;s++)e[s].leftNull=e[s].rightNull=null,d[e[s].x]=e[s];t.objectEach(p,function(t,e){null!==t.total&&l.push(e)}),l.sort(function(t,e){return t-e}),o=n(f,function(){return this.visible}),i(l,function(t,e){var n,r,f=0;if(d[t]&&!d[t].isNull)a.push(d[t]),i([-1,1],function(i){var a=1===i?"rightNull":"leftNull",c=0,u=p[l[e+i]];if(u)for(s=h;0<=s&&s<m;)n=u.points[s],n||(s===h?d[t][a]=!0:o[s]&&(r=p[t].points[s])&&(c-=r[1]-r[0])),s+=g;d[t][1===i?"rightCliff":"leftCliff"]=c});else{for(s=h;0<=s&&s<m;){if(n=p[t].points[s]){f=n[1];break}s+=g}f=u.translate(f,0,1,0,1),a.push({isNull:!0,plotX:c.translate(t,0,0,0,1),x:t,plotY:f,yBottom:f})}})}return a},getGraphPath:function(t){var e,i,n,s,a=o.prototype.getGraphPath,l=this.options,c=l.stacking,u=this.yAxis,p=[],d=[],h=this.index,f=u.stacks[this.stackKey],m=l.threshold,g=u.getThreshold(l.threshold),l=l.connectNulls||"percent"===c,y=function(e,i,r){var o=t[e];e=c&&f[o.x].points[h];var s=o[r+"Null"]||0;r=o[r+"Cliff"]||0;var a,l,o=!0;r||s?(a=(s?e[0]:e[1])+r,l=e[0]+r,o=!!s):!c&&t[i]&&t[i].isNull&&(a=l=m),void 0!==a&&(d.push({plotX:n,plotY:null===a?g:u.getThreshold(a),isNull:o,isCliff:!0}),p.push({plotX:n,plotY:null===l?g:u.getThreshold(l),doCurve:!1}))};for(t=t||this.points,c&&(t=this.getStackPoints(t)),e=0;e<t.length;e++)i=t[e].isNull,n=r(t[e].rectPlotX,t[e].plotX),s=r(t[e].yBottom,g),(!i||l)&&(l||y(e,e-1,"left"),i&&!c&&l||(d.push(t[e]),p.push({x:e,plotX:n,plotY:s})),l||y(e,e+1,"right"));return e=a.call(this,d,!0,!0),p.reversed=!0,i=a.call(this,p,!0,!0),i.length&&(i[0]="L"),i=e.concat(i),a=a.call(this,d,!1,l),i.xMap=e.xMap,this.areaPath=i,a},drawGraph:function(){this.areaPath=[],o.prototype.drawGraph.apply(this);var t=this,n=this.areaPath,s=this.options,a=[["area","highcharts-area",this.color,s.fillColor]];i(this.zones,function(e,i){a.push(["zone-area-"+i,"highcharts-area highcharts-zone-area-"+i+" "+e.className,e.color||t.color,e.fillColor||s.fillColor])}),i(a,function(i){var o=i[0],a=t[o];a?(a.endX=t.preventGraphAnimation?null:n.xMap,a.animate({d:n})):(a=t[o]=t.chart.renderer.path(n).addClass(i[1]).attr({fill:r(i[3],e(i[2]).setOpacity(r(s.fillOpacity,.75)).get()),zIndex:0}).add(t.group),a.isArea=!0),a.startX=n.xMap,a.shiftUnit=s.step?2:1})},drawLegendSymbol:t.LegendSymbolMixin.drawRectangle})}(e),function(t){var e=t.pick;(t=t.seriesType)("spline","line",{},{getPointSpline:function(t,i,n){var r=i.plotX,o=i.plotY,s=t[n-1];n=t[n+1];var a,l,c,u;if(s&&!s.isNull&&!1!==s.doCurve&&!i.isCliff&&n&&!n.isNull&&!1!==n.doCurve&&!i.isCliff){t=s.plotY,c=n.plotX,n=n.plotY;var p=0;a=(1.5*r+s.plotX)/2.5,l=(1.5*o+t)/2.5,c=(1.5*r+c)/2.5,u=(1.5*o+n)/2.5,c!==a&&(p=(u-l)*(c-r)/(c-a)+o-u),l+=p,u+=p,l>t&&l>o?(l=Math.max(t,o),u=2*o-l):l<t&&l<o&&(l=Math.min(t,o),u=2*o-l),u>n&&u>o?(u=Math.max(n,o),l=2*o-u):u<n&&u<o&&(u=Math.min(n,o),l=2*o-u),i.rightContX=c,i.rightContY=u}return i=["C",e(s.rightContX,s.plotX),e(s.rightContY,s.plotY),e(a,r),e(l,o),r,o],s.rightContX=s.rightContY=null,i}})}(e),function(t){var e=t.seriesTypes.area.prototype;(0,t.seriesType)("areaspline","spline",t.defaultPlotOptions.area,{getStackPoints:e.getStackPoints,getGraphPath:e.getGraphPath,drawGraph:e.drawGraph,drawLegendSymbol:t.LegendSymbolMixin.drawRectangle})}(e),function(t){var e=t.animObject,i=t.color,n=t.each,r=t.extend,o=t.isNumber,s=t.merge,a=t.pick,l=t.Series,c=t.seriesType,u=t.svg;c("column","line",{borderRadius:0,crisp:!0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{halo:!1,brightness:.1},select:{color:"#cccccc",borderColor:"#000000"}},dataLabels:{align:null,verticalAlign:null,y:null},softThreshold:!1,startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0,borderColor:"#ffffff"},{cropShoulder:0,directTouch:!0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){l.prototype.init.apply(this,arguments);var t=this,e=t.chart;e.hasRendered&&n(e.series,function(e){e.type===t.type&&(e.isDirty=!0)})},getColumnMetrics:function(){var t,e=this,i=e.options,r=e.xAxis,o=e.yAxis,s=r.reversed,l={},c=0;!1===i.grouping?c=1:n(e.chart.series,function(i){var n,r=i.options,s=i.yAxis;i.type!==e.type||!i.visible&&e.chart.options.chart.ignoreHiddenSeries||o.len!==s.len||o.pos!==s.pos||(r.stacking?(t=i.stackKey,void 0===l[t]&&(l[t]=c++),n=l[t]):!1!==r.grouping&&(n=c++),i.columnIndex=n)});var u=Math.min(Math.abs(r.transA)*(r.ordinalSlope||i.pointRange||r.closestPointRange||r.tickInterval||1),r.len),p=u*i.groupPadding,d=(u-2*p)/(c||1),i=Math.min(i.maxPointWidth||r.len,a(i.pointWidth,d*(1-2*i.pointPadding)));return e.columnMetrics={width:i,offset:(d-i)/2+(p+((e.columnIndex||0)+(s?1:0))*d-u/2)*(s?-1:1)},e.columnMetrics},crispCol:function(t,e,i,n){var r=this.chart,o=this.borderWidth,s=-(o%2?.5:0),o=o%2?.5:1;return r.inverted&&r.renderer.isVML&&(o+=1),this.options.crisp&&(i=Math.round(t+i)+s,t=Math.round(t)+s,i-=t),n=Math.round(e+n)+o,s=.5>=Math.abs(e)&&.5<n,e=Math.round(e)+o,n-=e,s&&n&&(--e,n+=1),{x:t,y:e,width:i,height:n}},translate:function(){var t=this,e=t.chart,i=t.options,r=t.dense=2>t.closestPointRange*t.xAxis.transA,r=t.borderWidth=a(i.borderWidth,r?0:1),o=t.yAxis,s=i.threshold,c=t.translatedThreshold=o.getThreshold(s),u=a(i.minPointLength,5),p=t.getColumnMetrics(),d=p.width,h=t.barW=Math.max(d,1+2*r),f=t.pointXOffset=p.offset;e.inverted&&(c-=.5),i.pointPadding&&(h=Math.ceil(h)),l.prototype.translate.apply(t),n(t.points,function(i){var n,r=a(i.yBottom,c),l=999+Math.abs(r),l=Math.min(Math.max(-l,i.plotY),o.len+l),p=i.plotX+f,m=h,g=Math.min(l,r),y=Math.max(l,r)-g;u&&Math.abs(y)<u&&(y=u,n=!o.reversed&&!i.negative||o.reversed&&i.negative,i.y===s&&t.dataMax<=s&&o.min<s&&(n=!n),g=Math.abs(g-c)>u?r-u:c-(n?u:0)),i.barX=p,i.pointWidth=d,i.tooltipPos=e.inverted?[o.len+o.pos-e.plotLeft-l,t.xAxis.len-p-m/2,y]:[p+m/2,l+o.pos-e.plotTop,y],i.shapeType="rect",i.shapeArgs=t.crispCol.apply(t,i.isNull?[p,c,m,0]:[p,g,m,y])})},getSymbol:t.noop,drawLegendSymbol:t.LegendSymbolMixin.drawRectangle,drawGraph:function(){this.group[this.dense?"addClass":"removeClass"]("highcharts-dense-data")},pointAttribs:function(t,e){var n,r=this.options,o=this.pointAttrToOptions||{};n=o.stroke||"borderColor";var a=o["stroke-width"]||"borderWidth",l=t&&t.color||this.color,c=t&&t[n]||r[n]||this.color||l,u=t&&t[a]||r[a]||this[a]||0,o=r.dashStyle;return t&&this.zones.length&&(l=t.getZone(),l=t.options.color||l&&l.color||this.color),e&&(t=s(r.states[e],t.options.states&&t.options.states[e]||{}),e=t.brightness,l=t.color||void 0!==e&&i(l).brighten(t.brightness).get()||l,c=t[n]||c,u=t[a]||u,o=t.dashStyle||o),n={fill:l,stroke:c,"stroke-width":u},o&&(n.dashstyle=o),n},drawPoints:function(){var t,e=this,i=this.chart,r=e.options,a=i.renderer,l=r.animationLimit||250;n(e.points,function(n){var c=n.graphic,u=c&&i.pointCount<l?"animate":"attr";o(n.plotY)&&null!==n.y?(t=n.shapeArgs,c?c[u](s(t)):n.graphic=c=a[n.shapeType](t).add(n.group||e.group),r.borderRadius&&c.attr({r:r.borderRadius}),c[u](e.pointAttribs(n,n.selected&&"select")).shadow(r.shadow,null,r.stacking&&!r.borderRadius),c.addClass(n.getClassName(),!0)):c&&(n.graphic=c.destroy())})},animate:function(t){var i,n=this,o=this.yAxis,s=n.options,a=this.chart.inverted,l={},c=a?"translateX":"translateY";u&&(t?(l.scaleY=.001,t=Math.min(o.pos+o.len,Math.max(o.pos,o.toPixels(s.threshold))),a?l.translateX=t-o.len:l.translateY=t,n.group.attr(l)):(i=n.group.attr(c),n.group.animate({scaleY:1},r(e(n.options.animation),{step:function(t,e){l[c]=i+e.pos*(o.pos-i),n.group.attr(l)}})),n.animate=null))},remove:function(){var t=this,e=t.chart;e.hasRendered&&n(e.series,function(e){e.type===t.type&&(e.isDirty=!0)}),l.prototype.remove.apply(t,arguments)}})}(e),function(t){(t=t.seriesType)("bar","column",null,{inverted:!0})}(e),function(t){var e=t.Series;(t=t.seriesType)("scatter","line",{lineWidth:0,findNearestPointBy:"xy",marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}">\u25cf</span> <span style="font-size: 0.85em"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}},{sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1,drawGraph:function(){this.options.lineWidth&&e.prototype.drawGraph.call(this)}})}(e),function(t){var e=t.deg2rad,i=t.isNumber,n=t.pick,r=t.relativeLength;t.CenteredSeriesMixin={getCenter:function(){var t,e,i=this.options,o=this.chart,s=2*(i.slicedOffset||0),a=o.plotWidth-2*s,o=o.plotHeight-2*s,l=i.center,l=[n(l[0],"50%"),n(l[1],"50%"),i.size||"100%",i.innerSize||0],c=Math.min(a,o);for(t=0;4>t;++t)e=l[t],i=2>t||2===t&&/%$/.test(e),l[t]=r(e,[a,o,c,l[2]][t])+(i?s:0);return l[3]>l[2]&&(l[3]=l[2]),l},getStartAndEndRadians:function(t,n){return t=i(t)?t:0,n=i(n)&&n>t&&360>n-t?n:t+360,{start:e*(t+-90),end:e*(n+-90)}}}}(e),function(t){var e=t.addEvent,i=t.CenteredSeriesMixin,n=t.defined,r=t.each,o=t.extend,s=i.getStartAndEndRadians,a=t.inArray,l=t.noop,c=t.pick,u=t.Point,p=t.Series,d=t.seriesType,h=t.setAnimation;d("pie","line",{center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.isNull?void 0:this.point.name},x:0},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,stickyTracking:!1,tooltip:{followPointer:!0},borderColor:"#ffffff",borderWidth:1,states:{hover:{brightness:.1}}},{isCartesian:!1,requireSorting:!1,directTouch:!0,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttribs:t.seriesTypes.column.prototype.pointAttribs,animate:function(t){var e=this,i=e.points,n=e.startAngleRad;t||(r(i,function(t){var i=t.graphic,r=t.shapeArgs;i&&(i.attr({r:t.startR||e.center[3]/2,start:n,end:n}),i.animate({r:r.r,start:r.start,end:r.end},e.options.animation))}),e.animate=null)},updateTotals:function(){var t,e,i=0,n=this.points,r=n.length,o=this.options.ignoreHiddenPoint;for(t=0;t<r;t++)e=n[t],i+=o&&!e.visible?0:e.isNull?0:e.y;for(this.total=i,t=0;t<r;t++)e=n[t],e.percentage=0<i&&(e.visible||!o)?e.y/i*100:0,e.total=i},generatePoints:function(){p.prototype.generatePoints.call(this),this.updateTotals()},translate:function(t){this.generatePoints();var e,i,n,r,o,a,l=0,u=this.options,p=u.slicedOffset,d=p+(u.borderWidth||0),h=s(u.startAngle,u.endAngle),f=this.startAngleRad=h.start,h=(this.endAngleRad=h.end)-f,m=this.points,g=u.dataLabels.distance,u=u.ignoreHiddenPoint,y=m.length;for(t||(this.center=t=this.getCenter()),this.getX=function(e,i,r){return n=Math.asin(Math.min((e-t[1])/(t[2]/2+r.labelDistance),1)),t[0]+(i?-1:1)*Math.cos(n)*(t[2]/2+r.labelDistance)},o=0;o<y;o++)a=m[o],a.labelDistance=c(a.options.dataLabels&&a.options.dataLabels.distance,g),this.maxLabelDistance=Math.max(this.maxLabelDistance||0,a.labelDistance),e=f+l*h,u&&!a.visible||(l+=a.percentage/100),i=f+l*h,a.shapeType="arc",a.shapeArgs={x:t[0],y:t[1],r:t[2]/2,innerR:t[3]/2,start:Math.round(1e3*e)/1e3,end:Math.round(1e3*i)/1e3},n=(i+e)/2,n>1.5*Math.PI?n-=2*Math.PI:n<-Math.PI/2&&(n+=2*Math.PI),a.slicedTranslation={translateX:Math.round(Math.cos(n)*p),translateY:Math.round(Math.sin(n)*p)},i=Math.cos(n)*t[2]/2,r=Math.sin(n)*t[2]/2,a.tooltipPos=[t[0]+.7*i,t[1]+.7*r],a.half=n<-Math.PI/2||n>Math.PI/2?1:0,a.angle=n,e=Math.min(d,a.labelDistance/5),a.labelPos=[t[0]+i+Math.cos(n)*a.labelDistance,t[1]+r+Math.sin(n)*a.labelDistance,t[0]+i+Math.cos(n)*e,t[1]+r+Math.sin(n)*e,t[0]+i,t[1]+r,0>a.labelDistance?"center":a.half?"right":"left",n]},drawGraph:null,drawPoints:function(){var t,e,i,n,s=this,a=s.chart.renderer,l=s.options.shadow;l&&!s.shadowGroup&&(s.shadowGroup=a.g("shadow").add(s.group)),r(s.points,function(r){if(e=r.graphic,r.isNull)e&&(r.graphic=e.destroy());else{n=r.shapeArgs,t=r.getTranslate();var c=r.shadowGroup;l&&!c&&(c=r.shadowGroup=a.g("shadow").add(s.shadowGroup)),c&&c.attr(t),i=s.pointAttribs(r,r.selected&&"select"),e?e.setRadialReference(s.center).attr(i).animate(o(n,t)):(r.graphic=e=a[r.shapeType](n).setRadialReference(s.center).attr(t).add(s.group),r.visible||e.attr({visibility:"hidden"}),e.attr(i).attr({"stroke-linejoin":"round"}).shadow(l,c)),e.addClass(r.getClassName())}})},searchPoint:l,sortByAngle:function(t,e){t.sort(function(t,i){return void 0!==t.angle&&(i.angle-t.angle)*e})},drawLegendSymbol:t.LegendSymbolMixin.drawRectangle,getCenter:i.getCenter,getSymbol:l},{init:function(){u.prototype.init.apply(this,arguments);var t,i=this;return i.name=c(i.name,"Slice"),t=function(t){i.slice("select"===t.type)},e(i,"select",t),e(i,"unselect",t),i},isValid:function(){return t.isNumber(this.y,!0)&&0<=this.y},setVisible:function(t,e){var i=this,n=i.series,o=n.chart,s=n.options.ignoreHiddenPoint;e=c(e,s),t!==i.visible&&(i.visible=i.options.visible=t=void 0===t?!i.visible:t,n.options.data[a(i,n.data)]=i.options,r(["graphic","dataLabel","connector","shadowGroup"],function(e){i[e]&&i[e][t?"show":"hide"](!0)}),i.legendItem&&o.legend.colorizeItem(i,t),t||"hover"!==i.state||i.setState(""),s&&(n.isDirty=!0),e&&o.redraw())},slice:function(t,e,i){var r=this.series;h(i,r.chart),c(e,!0),this.sliced=this.options.sliced=n(t)?t:!this.sliced,r.options.data[a(this,r.data)]=this.options,this.graphic.animate(this.getTranslate()),this.shadowGroup&&this.shadowGroup.animate(this.getTranslate())},getTranslate:function(){return this.sliced?this.slicedTranslation:{translateX:0,translateY:0}},haloPath:function(t){var e=this.shapeArgs;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(e.x,e.y,e.r+t,e.r+t,{innerR:this.shapeArgs.r-1,start:e.start,end:e.end})}})}(e),function(t){var e=t.addEvent,i=t.arrayMax,n=t.defined,r=t.each,o=t.extend,s=t.format,a=t.map,l=t.merge,c=t.noop,u=t.pick,p=t.relativeLength,d=t.Series,h=t.seriesTypes,f=t.some,m=t.stableSort;t.distribute=function(e,i,n){function o(t,e){return t.target-e.target}var s,l,c=!0,p=e,d=[];l=0;var h=p.reducedLen||i;for(s=e.length;s--;)l+=e[s].size;if(l>h){for(m(e,function(t,e){return(e.rank||0)-(t.rank||0)}),l=s=0;l<=h;)l+=e[s].size,s++;d=e.splice(s-1,e.length)}for(m(e,o),e=a(e,function(t){return{size:t.size,targets:[t.target],align:u(t.align,.5)}});c;){for(s=e.length;s--;)c=e[s],l=(Math.min.apply(0,c.targets)+Math.max.apply(0,c.targets))/2,c.pos=Math.min(Math.max(0,l-c.size*c.align),i-c.size);for(s=e.length,c=!1;s--;)0<s&&e[s-1].pos+e[s-1].size>e[s].pos&&(e[s-1].size+=e[s].size,e[s-1].targets=e[s-1].targets.concat(e[s].targets),e[s-1].align=.5,e[s-1].pos+e[s-1].size>i&&(e[s-1].pos=i-e[s-1].size),e.splice(s,1),c=!0)}p.push.apply(p,d),s=0,f(e,function(e){var o=0;if(f(e.targets,function(){if(p[s].pos=e.pos+o,Math.abs(p[s].pos-p[s].target)>n)return r(p.slice(0,s+1),function(t){delete t.pos}),p.reducedLen=(p.reducedLen||i)-.1*i,p.reducedLen>.1*i&&t.distribute(p,i,n),!0;o+=p[s].size,s++}))return!0}),m(p,o)},d.prototype.drawDataLabels=function(){function i(t,e){var i=e.filter;return!i||(e=i.operator,t=t[i.property],i=i.value,">"===e&&t>i||"<"===e&&t<i||">="===e&&t>=i||"<="===e&&t<=i||"=="===e&&t==i||"==="===e&&t===i)}var o,a,c,p,d=this,h=d.chart,f=d.options,m=f.dataLabels,g=d.points,y=d.hasRendered||0,v=u(m.defer,!!f.animation),b=h.renderer;(m.enabled||d._hasPointLabels)&&(d.dlProcessOptions&&d.dlProcessOptions(m),p=d.plotGroup("dataLabelsGroup","data-labels",v&&!y?"hidden":"visible",m.zIndex||6),v&&(p.attr({opacity:+y}),y||e(d,"afterAnimate",function(){d.visible&&p.show(!0),p[f.animation?"animate":"attr"]({opacity:1},{duration:200})})),a=m,r(g,function(e){var r,g,y,v,w=e.dataLabel,k=e.connector,x=!w;o=e.dlOptions||e.options&&e.options.dataLabels,(r=u(o&&o.enabled,a.enabled)&&!e.isNull)&&(r=!0===i(e,o||m)),r&&(m=l(a,o),g=e.getLabelConfig(),v=m[e.formatPrefix+"Format"]||m.format,c=n(v)?s(v,g,h.time):(m[e.formatPrefix+"Formatter"]||m.formatter).call(g,m),v=m.style,g=m.rotation,v.color=u(m.color,v.color,d.color,"#000000"),"contrast"===v.color&&(e.contrastColor=b.getContrast(e.color||d.color),v.color=m.inside||0>u(e.labelDistance,m.distance)||f.stacking?e.contrastColor:"#000000"),f.cursor&&(v.cursor=f.cursor),y={fill:m.backgroundColor,stroke:m.borderColor,"stroke-width":m.borderWidth,r:m.borderRadius||0,rotation:g,padding:m.padding,zIndex:1},t.objectEach(y,function(t,e){void 0===t&&delete y[e]})),!w||r&&n(c)?r&&n(c)&&(w?y.text=c:(w=e.dataLabel=g?b.text(c,0,-9999).addClass("highcharts-data-label"):b.label(c,0,-9999,m.shape,null,null,m.useHTML,null,"data-label"),w.addClass(" highcharts-data-label-color-"+e.colorIndex+" "+(m.className||"")+(m.useHTML?"highcharts-tracker":""))),w.attr(y),w.css(v).shadow(m.shadow),w.added||w.add(p),d.alignDataLabel(e,w,m,null,x)):(e.dataLabel=w=w.destroy(),k&&(e.connector=k.destroy()))})),t.fireEvent(this,"afterDrawDataLabels")},d.prototype.alignDataLabel=function(t,e,i,n,r){var s,a=this.chart,l=a.inverted,c=u(t.dlBox&&t.dlBox.centerX,t.plotX,-9999),p=u(t.plotY,-9999),d=e.getBBox(),h=i.rotation,f=i.align,m=this.visible&&(t.series.forceDL||a.isInsidePlot(c,Math.round(p),l)||n&&a.isInsidePlot(c,l?n.x+1:n.y+n.height-1,l)),g="justify"===u(i.overflow,"justify");m&&(s=i.style.fontSize,s=a.renderer.fontMetrics(s,e).b,n=o({x:l?this.yAxis.len-p:c,y:Math.round(l?this.xAxis.len-c:p),width:0,height:0},n),o(i,{width:d.width,height:d.height}),h?(g=!1,c=a.renderer.rotCorr(s,h),c={x:n.x+i.x+n.width/2+c.x,y:n.y+i.y+{top:0,middle:.5,bottom:1}[i.verticalAlign]*n.height},e[r?"attr":"animate"](c).attr({align:f}),p=(h+720)%360,p=180<p&&360>p,"left"===f?c.y-=p?d.height:0:"center"===f?(c.x-=d.width/2,c.y-=d.height/2):"right"===f&&(c.x-=d.width,c.y-=p?0:d.height),e.placed=!0,e.alignAttr=c):(e.align(i,null,n),c=e.alignAttr),g?t.isLabelJustified=this.justifyDataLabel(e,i,c,d,n,r):u(i.crop,!0)&&(m=a.isInsidePlot(c.x,c.y)&&a.isInsidePlot(c.x+d.width,c.y+d.height)),i.shape&&!h)&&e[r?"attr":"animate"]({anchorX:l?a.plotWidth-t.plotY:t.plotX,anchorY:l?a.plotHeight-t.plotX:t.plotY}),m||(e.attr({y:-9999}),e.placed=!1)},d.prototype.justifyDataLabel=function(t,e,i,n,r,o){var s,a,l=this.chart,c=e.align,u=e.verticalAlign,p=t.box?0:t.padding||0;return s=i.x+p,0>s&&("right"===c?e.align="left":e.x=-s,a=!0),s=i.x+n.width-p,s>l.plotWidth&&("left"===c?e.align="right":e.x=l.plotWidth-s,a=!0),s=i.y+p,0>s&&("bottom"===u?e.verticalAlign="top":e.y=-s,a=!0),s=i.y+n.height-p,s>l.plotHeight&&("top"===u?e.verticalAlign="bottom":e.y=l.plotHeight-s,a=!0),a&&(t.placed=!o,t.align(e,null,r)),a},h.pie&&(h.pie.prototype.drawDataLabels=function(){var e,o,s,a,l,c,p,h,f,m,g=this,y=g.data,v=g.chart,b=g.options.dataLabels,w=u(b.connectorPadding,10),k=u(b.connectorWidth,1),x=v.plotWidth,T=v.plotHeight,C=Math.round(v.chartWidth/3),I=g.center,_=I[2]/2,S=I[1],A=[[],[]],O=[0,0,0,0];g.visible&&(b.enabled||g._hasPointLabels)&&(r(y,function(t){t.dataLabel&&t.visible&&t.dataLabel.shortened&&(t.dataLabel.attr({width:"auto"}).css({width:"auto",textOverflow:"clip"}),t.dataLabel.shortened=!1)}),d.prototype.drawDataLabels.apply(g),r(y,function(t){t.dataLabel&&t.visible&&(A[t.half].push(t),t.dataLabel._pos=null,!n(b.style.width)&&!n(t.options.dataLabels&&t.options.dataLabels.style&&t.options.dataLabels.style.width)&&t.dataLabel.getBBox().width>C&&(t.dataLabel.css({width:.7*C}),t.dataLabel.shortened=!0))}),r(A,function(i,o){var d,y,k,C=i.length,A=[];if(C)for(g.sortByAngle(i,o-.5),0<g.maxLabelDistance&&(d=Math.max(0,S-_-g.maxLabelDistance),y=Math.min(S+_+g.maxLabelDistance,v.plotHeight),r(i,function(t){0<t.labelDistance&&t.dataLabel&&(t.top=Math.max(0,S-_-t.labelDistance),t.bottom=Math.min(S+_+t.labelDistance,v.plotHeight),k=t.dataLabel.getBBox().height||21,t.positionsIndex=A.push({target:t.labelPos[1]-t.top+k/2,size:k,rank:t.y})-1)}),d=y+k-d,t.distribute(A,d,d/5)),m=0;m<C;m++)e=i[m],y=e.positionsIndex,l=e.labelPos,s=e.dataLabel,f=!1===e.visible?"hidden":"inherit",h=d=l[1],A&&n(A[y])&&(void 0===A[y].pos?f="hidden":(c=A[y].size,h=e.top+A[y].pos)),delete e.positionIndex,p=b.justify?I[0]+(o?-1:1)*(_+e.labelDistance):g.getX(h<e.top+2||h>e.bottom-2?d:h,o,e),s._attr={visibility:f,align:l[6]},s._pos={x:p+b.x+({left:w,right:-w}[l[6]]||0),y:h+b.y-10},l.x=p,l.y=h,u(b.crop,!0)&&(a=s.getBBox().width,d=null,p-a<w&&1===o?(d=Math.round(a-p+w),O[3]=Math.max(d,O[3])):p+a>x-w&&0===o&&(d=Math.round(p+a-x+w),O[1]=Math.max(d,O[1])),0>h-c/2?O[0]=Math.max(Math.round(c/2-h),O[0]):h+c/2>T&&(O[2]=Math.max(Math.round(h+c/2-T),O[2])),s.sideOverflow=d)}),0===i(O)||this.verifyDataLabelOverflow(O))&&(this.placeDataLabels(),k&&r(this.points,function(t){var e;o=t.connector,(s=t.dataLabel)&&s._pos&&t.visible&&0<t.labelDistance?(f=s._attr.visibility,(e=!o)&&(t.connector=o=v.renderer.path().addClass("highcharts-data-label-connector  highcharts-color-"+t.colorIndex+(t.className?" "+t.className:"")).add(g.dataLabelsGroup),o.attr({"stroke-width":k,stroke:b.connectorColor||t.color||"#666666"})),o[e?"attr":"animate"]({d:g.connectorPath(t.labelPos)}),o.attr("visibility",f)):o&&(t.connector=o.destroy())}))},h.pie.prototype.connectorPath=function(t){var e=t.x,i=t.y;return u(this.options.dataLabels.softConnector,!0)?["M",e+("left"===t[6]?5:-5),i,"C",e,i,2*t[2]-t[4],2*t[3]-t[5],t[2],t[3],"L",t[4],t[5]]:["M",e+("left"===t[6]?5:-5),i,"L",t[2],t[3],"L",t[4],t[5]]},h.pie.prototype.placeDataLabels=function(){r(this.points,function(t){var e=t.dataLabel;e&&t.visible&&((t=e._pos)?(e.sideOverflow&&(e._attr.width=e.getBBox().width-e.sideOverflow,e.css({width:e._attr.width+"px",textOverflow:this.options.dataLabels.style.textOverflow||"ellipsis"}),e.shortened=!0),e.attr(e._attr),e[e.moved?"animate":"attr"](t),e.moved=!0):e&&e.attr({y:-9999}))},this)},h.pie.prototype.alignDataLabel=c,h.pie.prototype.verifyDataLabelOverflow=function(t){var e,i=this.center,n=this.options,r=n.center,o=n.minSize||80,s=null!==n.size;return s||(null!==r[0]?e=Math.max(i[2]-Math.max(t[1],t[3]),o):(e=Math.max(i[2]-t[1]-t[3],o),i[0]+=(t[3]-t[1])/2),null!==r[1]?e=Math.max(Math.min(e,i[2]-Math.max(t[0],t[2])),o):(e=Math.max(Math.min(e,i[2]-t[0]-t[2]),o),i[1]+=(t[0]-t[2])/2),e<i[2]?(i[2]=e,i[3]=Math.min(p(n.innerSize||0,e),e),this.translate(i),this.drawDataLabels&&this.drawDataLabels()):s=!0),s}),h.column&&(h.column.prototype.alignDataLabel=function(t,e,i,n,r){var o=this.chart.inverted,s=t.series,a=t.dlBox||t.shapeArgs,c=u(t.below,t.plotY>u(this.translatedThreshold,s.yAxis.len)),p=u(i.inside,!!this.options.stacking);a&&(n=l(a),0>n.y&&(n.height+=n.y,n.y=0),a=n.y+n.height-s.yAxis.len,0<a&&(n.height-=a),o&&(n={x:s.yAxis.len-n.y-n.height,y:s.xAxis.len-n.x-n.width,width:n.height,height:n.width}),p||(o?(n.x+=c?0:n.width,n.width=0):(n.y+=c?n.height:0,n.height=0))),i.align=u(i.align,!o||p?"center":c?"right":"left"),i.verticalAlign=u(i.verticalAlign,o||p?"middle":c?"top":"bottom"),d.prototype.alignDataLabel.call(this,t,e,i,n,r),t.isLabelJustified&&t.contrastColor&&t.dataLabel.css({color:t.contrastColor})})}(e),function(t){var e=t.Chart,i=t.each,n=t.objectEach,r=t.pick;t=t.addEvent,t(e,"render",function(){var t=[];i(this.labelCollectors||[],function(e){t=t.concat(e())}),i(this.yAxis||[],function(e){e.options.stackLabels&&!e.options.stackLabels.allowOverlap&&n(e.stacks,function(e){n(e,function(e){t.push(e.label)})})}),i(this.series||[],function(e){var n=e.options.dataLabels,o=e.dataLabelCollections||["dataLabel"];(n.enabled||e._hasPointLabels)&&!n.allowOverlap&&e.visible&&i(o,function(n){i(e.points,function(e){e[n]&&(e[n].labelrank=r(e.labelrank,e.shapeArgs&&e.shapeArgs.height),t.push(e[n]))})})}),this.hideOverlappingLabels(t)}),e.prototype.hideOverlappingLabels=function(t){var e,n,r,o,s,a,l,c,u,p=t.length;for(n=0;n<p;n++)(e=t[n])&&(e.oldOpacity=e.opacity,e.newOpacity=1,e.width||(r=e.getBBox(),e.width=r.width,e.height=r.height));for(t.sort(function(t,e){return(e.labelrank||0)-(t.labelrank||0)}),n=0;n<p;n++)for(r=t[n],e=n+1;e<p;++e)o=t[e],r&&o&&r!==o&&r.placed&&o.placed&&0!==r.newOpacity&&0!==o.newOpacity&&(s=r.alignAttr,a=o.alignAttr,l=r.parentGroup,c=o.parentGroup,u=2*(r.box?0:r.padding||0),s=function(t,e,i,n,r,o,s,a){return!(r>t+i||r+s<t||o>e+n||o+a<e)}(s.x+l.translateX,s.y+l.translateY,r.width-u,r.height-u,a.x+c.translateX,a.y+c.translateY,o.width-u,o.height-u))&&((r.labelrank<o.labelrank?r:o).newOpacity=0);i(t,function(t){var e,i;t&&(i=t.newOpacity,t.oldOpacity!==i&&t.placed&&(i?t.show(!0):e=function(){t.hide()},t.alignAttr.opacity=i,t[t.isOld?"animate":"attr"](t.alignAttr,null,e)),t.isOld=!0)})}}(e),function(t){var e,i=t.addEvent,n=t.Chart,r=t.createElement,o=t.css,s=t.defaultOptions,a=t.defaultPlotOptions,l=t.each,c=t.extend,u=t.fireEvent,p=t.hasTouch,d=t.inArray,h=t.isObject,f=t.Legend,m=t.merge,g=t.pick,y=t.Point,v=t.Series,b=t.seriesTypes,w=t.svg;e=t.TrackerMixin={drawTrackerPoint:function(){var t=this,e=t.chart.pointer,i=function(t){var i=e.getPointFromEvent(t);void 0!==i&&(e.isDirectTouch=!0,i.onMouseOver(t))};l(t.points,function(t){t.graphic&&(t.graphic.element.point=t),t.dataLabel&&(t.dataLabel.div?t.dataLabel.div.point=t:t.dataLabel.element.point=t)}),t._hasTracking||(l(t.trackerGroups,function(n){t[n]&&(t[n].addClass("highcharts-tracker").on("mouseover",i).on("mouseout",function(t){e.onTrackerMouseOut(t)}),p&&t[n].on("touchstart",i),t.options.cursor&&t[n].css(o).css({cursor:t.options.cursor}))}),t._hasTracking=!0),u(this,"afterDrawTracker")},drawTrackerGraph:function(){var t,e=this,i=e.options,n=i.trackByArea,r=[].concat(n?e.areaPath:e.graphPath),o=r.length,s=e.chart,a=s.pointer,c=s.renderer,d=s.options.tooltip.snap,h=e.tracker,f=function(){s.hoverSeries!==e&&e.onMouseOver()},m="rgba(192,192,192,"+(w?1e-4:.002)+")";if(o&&!n)for(t=o+1;t--;)"M"===r[t]&&r.splice(t+1,0,r[t+1]-d,r[t+2],"L"),(t&&"M"===r[t]||t===o)&&r.splice(t,0,"L",r[t-2]+d,r[t-1]);h?h.attr({d:r}):e.graph&&(e.tracker=c.path(r).attr({"stroke-linejoin":"round",visibility:e.visible?"visible":"hidden",stroke:m,fill:n?m:"none","stroke-width":e.graph.strokeWidth()+(n?0:2*d),zIndex:2}).add(e.group),l([e.tracker,e.markerGroup],function(t){t.addClass("highcharts-tracker").on("mouseover",f).on("mouseout",function(t){a.onTrackerMouseOut(t)}),i.cursor&&t.css({cursor:i.cursor}),p&&t.on("touchstart",f)})),u(this,"afterDrawTracker")}},b.column&&(b.column.prototype.drawTracker=e.drawTrackerPoint),b.pie&&(b.pie.prototype.drawTracker=e.drawTrackerPoint),b.scatter&&(b.scatter.prototype.drawTracker=e.drawTrackerPoint),c(f.prototype,{setItemEvents:function(t,e,i){var n=this,r=n.chart.renderer.boxWrapper,o="highcharts-legend-"+(t instanceof y?"point":"series")+"-active";(i?e:t.legendGroup).on("mouseover",function(){t.setState("hover"),r.addClass(o),e.css(n.options.itemHoverStyle)}).on("mouseout",function(){e.css(m(t.visible?n.itemStyle:n.itemHiddenStyle)),r.removeClass(o),t.setState()}).on("click",function(e){var i=function(){t.setVisible&&t.setVisible()};r.removeClass(o),e={browserEvent:e},t.firePointEvent?t.firePointEvent("legendItemClick",e,i):u(t,"legendItemClick",e,i)})},createCheckboxForItem:function(t){t.checkbox=r("input",{type:"checkbox",checked:t.selected,defaultChecked:t.selected},this.options.itemCheckboxStyle,this.chart.container),i(t.checkbox,"click",function(e){u(t.series||t,"checkboxClick",{checked:e.target.checked,item:t},function(){t.select()})})}}),s.legend.itemStyle.cursor="pointer",c(n.prototype,{showResetZoom:function(){function t(){e.zoomOut()}var e=this,i=s.lang,n=e.options.chart.resetZoomButton,r=n.theme,o=r.states,a="chart"===n.relativeTo?null:"plotBox";u(this,"beforeShowResetZoom",null,function(){e.resetZoomButton=e.renderer.button(i.resetZoom,null,null,t,r,o&&o.hover).attr({align:n.position.align,title:i.resetZoomTitle}).addClass("highcharts-reset-zoom").add().align(n.position,!1,a)})},zoomOut:function(){u(this,"selection",{resetSelection:!0},this.zoom)},zoom:function(t){var e,i,n=this.pointer,r=!1;!t||t.resetSelection?(l(this.axes,function(t){e=t.zoom()}),n.initiated=!1):l(t.xAxis.concat(t.yAxis),function(t){var i=t.axis;n[i.isXAxis?"zoomX":"zoomY"]&&(e=i.zoom(t.min,t.max),i.displayBtn&&(r=!0))}),i=this.resetZoomButton,r&&!i?this.showResetZoom():!r&&h(i)&&(this.resetZoomButton=i.destroy()),e&&this.redraw(g(this.options.chart.animation,t&&t.animation,100>this.pointCount))},pan:function(t,e){var i,n=this,r=n.hoverPoints;r&&l(r,function(t){t.setState()}),l("xy"===e?[1,0]:[1],function(e){e=n[e?"xAxis":"yAxis"][0];var r=e.horiz,o=t[r?"chartX":"chartY"],r=r?"mouseDownX":"mouseDownY",s=n[r],a=(e.pointRange||0)/2,l=e.reversed&&!n.inverted||!e.reversed&&n.inverted?-1:1,c=e.getExtremes(),u=e.toValue(s-o,!0)+a*l,l=e.toValue(s+e.len-o,!0)-a*l,p=l<u,s=p?l:u,u=p?u:l,l=Math.min(c.dataMin,a?c.min:e.toValue(e.toPixels(c.min)-e.minPixelPadding)),a=Math.max(c.dataMax,a?c.max:e.toValue(e.toPixels(c.max)+e.minPixelPadding)),p=l-s;0<p&&(u+=p,s=l),p=u-a,0<p&&(u=a,s-=p),e.series.length&&s!==c.min&&u!==c.max&&(e.setExtremes(s,u,!1,!1,{trigger:"pan"}),i=!0),n[r]=o}),i&&n.redraw(!1),o(n.container,{cursor:"move"})}}),c(y.prototype,{select:function(t,e){var i=this,n=i.series,r=n.chart;t=g(t,!i.selected),i.firePointEvent(t?"select":"unselect",{accumulate:e},function(){i.selected=i.options.selected=t,n.options.data[d(i,n.data)]=i.options,i.setState(t&&"select"),e||l(r.getSelectedPoints(),function(t){t.selected&&t!==i&&(t.selected=t.options.selected=!1,n.options.data[d(t,n.data)]=t.options,t.setState(""),t.firePointEvent("unselect"))})})},onMouseOver:function(t){var e=this.series.chart,i=e.pointer;t=t?i.normalize(t):i.getChartCoordinatesFromPoint(this,e.inverted),i.runPointActions(t,this)},onMouseOut:function(){var t=this.series.chart;this.firePointEvent("mouseOut"),l(t.hoverPoints||[],function(t){t.setState()}),t.hoverPoints=t.hoverPoint=null},importEvents:function(){if(!this.hasImportedEvents){var e=this,n=m(e.series.options.point,e.options).events;e.events=n,t.objectEach(n,function(t,n){i(e,n,t)}),this.hasImportedEvents=!0}},setState:function(t,e){var i,n=Math.floor(this.plotX),r=this.plotY,o=this.series,s=o.options.states[t||"normal"]||{},l=a[o.type].marker&&o.options.marker,p=l&&!1===l.enabled,d=l&&l.states&&l.states[t||"normal"]||{},h=!1===d.enabled,f=o.stateMarkerGraphic,m=this.marker||{},y=o.chart,v=o.halo,b=l&&o.markerAttribs;(t=t||"")===this.state&&!e||this.selected&&"select"!==t||!1===s.enabled||t&&(h||p&&!1===d.enabled)||t&&m.states&&m.states[t]&&!1===m.states[t].enabled||(b&&(i=o.markerAttribs(this,t)),this.graphic?(this.state&&this.graphic.removeClass("highcharts-point-"+this.state),t&&this.graphic.addClass("highcharts-point-"+t),this.graphic.animate(o.pointAttribs(this,t),g(y.options.chart.animation,s.animation)),i&&this.graphic.animate(i,g(y.options.chart.animation,d.animation,l.animation)),f&&f.hide()):(t&&d&&(l=m.symbol||o.symbol,f&&f.currentSymbol!==l&&(f=f.destroy()),f?f[e?"animate":"attr"]({x:i.x,y:i.y}):l&&(o.stateMarkerGraphic=f=y.renderer.symbol(l,i.x,i.y,i.width,i.height).add(o.markerGroup),f.currentSymbol=l),f&&f.attr(o.pointAttribs(this,t))),f&&(f[t&&y.isInsidePlot(n,r,y.inverted)?"show":"hide"](),f.element.point=this)),(n=s.halo)&&n.size?(v||(o.halo=v=y.renderer.path().add((this.graphic||f).parentGroup)),v.show()[e?"animate":"attr"]({d:this.haloPath(n.size)}),v.attr({class:"highcharts-halo highcharts-color-"+g(this.colorIndex,o.colorIndex)+(this.className?" "+this.className:"")}),v.point=this,v.attr(c({fill:this.color||o.color,"fill-opacity":n.opacity,zIndex:-1},n.attributes))):v&&v.point&&v.point.haloPath&&v.animate({d:v.point.haloPath(0)},null,v.hide),this.state=t,u(this,"afterSetState"))},haloPath:function(t){return this.series.chart.renderer.symbols.circle(Math.floor(this.plotX)-t,this.plotY-t,2*t,2*t)}}),c(v.prototype,{onMouseOver:function(){var t=this.chart,e=t.hoverSeries;e&&e!==this&&e.onMouseOut(),this.options.events.mouseOver&&u(this,"mouseOver"),this.setState("hover"),t.hoverSeries=this},onMouseOut:function(){var t=this.options,e=this.chart,i=e.tooltip,n=e.hoverPoint;e.hoverSeries=null,n&&n.onMouseOut(),this&&t.events.mouseOut&&u(this,"mouseOut"),!i||this.stickyTracking||i.shared&&!this.noSharedTooltip||i.hide(),this.setState()},setState:function(t){var e=this,i=e.options,n=e.graph,r=i.states,o=i.lineWidth,i=0;if(t=t||"",e.state!==t&&(l([e.group,e.markerGroup,e.dataLabelsGroup],function(i){i&&(e.state&&i.removeClass("highcharts-series-"+e.state),t&&i.addClass("highcharts-series-"+t))}),e.state=t,!r[t]||!1!==r[t].enabled)&&(t&&(o=r[t].lineWidth||o+(r[t].lineWidthPlus||0)),n&&!n.dashstyle))for(o={"stroke-width":o},n.animate(o,g(r[t||"normal"]&&r[t||"normal"].animation,e.chart.options.chart.animation));e["zone-graph-"+i];)e["zone-graph-"+i].attr(o),i+=1},setVisible:function(t,e){var i,n=this,r=n.chart,o=n.legendItem,s=r.options.chart.ignoreHiddenSeries,a=n.visible;i=(n.visible=t=n.options.visible=n.userOptions.visible=void 0===t?!a:t)?"show":"hide",l(["group","dataLabelsGroup","markerGroup","tracker","tt"],function(t){n[t]&&n[t][i]()}),r.hoverSeries!==n&&(r.hoverPoint&&r.hoverPoint.series)!==n||n.onMouseOut(),o&&r.legend.colorizeItem(n,t),n.isDirty=!0,n.options.stacking&&l(r.series,function(t){t.options.stacking&&t.visible&&(t.isDirty=!0)}),l(n.linkedSeries,function(e){e.setVisible(t,!1)}),s&&(r.isDirtyBox=!0),!1!==e&&r.redraw(),u(n,i)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(t){this.selected=t=void 0===t?!this.selected:t,this.checkbox&&(this.checkbox.checked=t),u(this,t?"select":"unselect")},drawTracker:e.drawTrackerGraph})}(e),function(t){var e=t.Chart,i=t.each,n=t.inArray,r=t.isArray,o=t.isObject,s=t.pick,a=t.splat;e.prototype.setResponsive=function(e){var n=this.options.responsive,r=[],o=this.currentResponsive;n&&n.rules&&i(n.rules,function(i){void 0===i._id&&(i._id=t.uniqueKey()),this.matchResponsiveRule(i,r,e)},this);var s=t.merge.apply(0,t.map(r,function(e){return t.find(n.rules,function(t){return t._id===e}).chartOptions})),r=r.toString()||void 0;r!==(o&&o.ruleIds)&&(o&&this.update(o.undoOptions,e),r?(this.currentResponsive={ruleIds:r,mergedOptions:s,undoOptions:this.currentOptions(s)},this.update(s,e)):this.currentResponsive=void 0)},e.prototype.matchResponsiveRule=function(t,e){var i=t.condition;(i.callback||function(){return this.chartWidth<=s(i.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=s(i.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=s(i.minWidth,0)&&this.chartHeight>=s(i.minHeight,0)}).call(this)&&e.push(t._id)},e.prototype.currentOptions=function(e){function i(e,s,l,c){var u;t.objectEach(e,function(t,e){if(!c&&-1<n(e,["series","xAxis","yAxis"]))for(t=a(t),l[e]=[],u=0;u<t.length;u++)s[e][u]&&(l[e][u]={},i(t[u],s[e][u],l[e][u],c+1));else o(t)?(l[e]=r(t)?[]:{},i(t,s[e]||{},l[e],c+1)):l[e]=s[e]||null})}var s={};return i(e,this.options,s,0),s}}(e),e})},1157:function(t,e,i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function i(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=[i(164),i(1134)],void 0!==(r=function(t,e){return function(i){function n(e){var i,r,s,a,l;null==e&&(e={}),this.GetQueryTokens=o(this.GetQueryTokens,this),this.CreateItem=o(this.CreateItem,this),this.GetAllData=o(this.GetAllData,this),this.GetQueryAfterCaret=o(this.GetQueryAfterCaret,this),this.GetQueryBeforeCaret=o(this.GetQueryBeforeCaret,this),n.__super__.constructor.call(this,e),this.showStartDates=null==(i=e.showStartDates)||i,this.showDueDates=null==(r=e.showDueDates)||r,this.startDate=null!=(s=e.startDate)?s:t.observable(null),console.assert(t.isWritableObservable(this.startDate)),this.endDate=null!=(a=e.endDate)?a:t.observable(null),console.assert(t.isWritableObservable(this.endDate)),this.dateCode=null!=(l=e.dateCode)?l:t.observable("custom"),console.assert(t.isWritableObservable(this.dateCode)),this.dateOptions=e.dateOptions,console.assert(null==this.dateOptions||Array.isArray(this.dateOptions)),this.subscriptions.push(this.staticItems=t.pureComputed(function(t){return function(){return null!=t.dateOptions?t.dateOptions.map(function(e){return t.CreateItem(e.id,e.text)}).concat([t.CreateItem("start",app.loggedInUser.localization.dateFormat()),t.CreateItem("due",app.loggedInUser.localization.dateFormat())]):[t.CreateItem("start",app.tl("Today"),function(){return moment().startOf("day")}),t.CreateItem("start",app.tl("Tomorrow"),function(){return moment().add(1,"day").startOf("day")}),t.CreateItem("start",app.tl("Next Week"),function(){return moment().add(1,"week").startOf("day")}),t.CreateItem("start",app.loggedInUser.localization.dateFormat()),t.CreateItem("due",app.tl("Today"),function(){return moment().startOf("day")}),t.CreateItem("due",app.tl("Tomorrow"),function(){return moment().add(1,"day").startOf("day")}),t.CreateItem("due",app.tl("Next Week"),function(){return moment().add(1,"week").startOf("day")}),t.CreateItem("due",app.loggedInUser.localization.dateFormat())]}}(this)))}return s(n,i),n.prototype.defaultType="date",n.prototype.order=app.consts.AUTO_COMPLETE_ORDER.DATE,n.prototype.GetQueryBeforeCaret=function(){var t,e;return null!=(t=null!=(e=/(?:^|\s)(\[[\u00C0-\u1FFF\u2C00-\uD7FF\w :\/.-]{0,20}\]?)$/.exec(this.fullQueryBeforeCaret()))?e[1]:void 0)?t:null},n.prototype.GetQueryAfterCaret=function(){return""},n.prototype.GetAllData=function(){return this.staticItems().filter(function(t){return null!=t&&Object.keys(t).length})},n.prototype.OnAutoComplete=function(t){var e,i,n;switch(e=t.item,e.subtype){case"start":this.dateCode("custom"),this.startDate(e.date),(null!=(i=this.endDate())?i.isBefore(this.startDate()):void 0)&&this.endDate(this.startDate().clone());break;case"due":this.dateCode("custom"),this.endDate(e.date),(null!=(n=this.startDate())?n.isAfter(this.endDate()):void 0)&&this.startDate(this.endDate().clone());break;default:this.dateCode(e.subtype)}},n.prototype.CreateItem=function(t,i,n){var r,o,s,a,l;return("start"!==t||this.showStartDates)&&("due"!==t||this.showDueDates)?(a=function(){switch(t){case"start":return app.tl("Start: [_s]",i);case"due":return app.tl("Due: [_s]",i);default:return i}}(),s=("start"===t||"due"===t)&&null==n,o=s?e.SPECIAL_ITEMS.MESSAGE:0,l=function(){if(!s)return this.NormalizeQuery(a);switch(t){case"start":return this.NormalizeQuery(app.tl("Start: [_s]",""));case"due":return this.NormalizeQuery(app.tl("Due: [_s]",""))}}.call(this),r=s?function(){}:null!=n?function(t){return Object.create(t,{date:{enumerable:!0,value:"function"==typeof n?n():n}})}:null,this.NormalizeDataItem({id:o,subtype:t,label:a,value:l,suggestionTemplate:"<span class=\"w-auto-complete__item-icon w-auto-complete__item-icon--date-{{subtype}}\">\n    \x3c!-- ko component: {\n            name: 'ui-common-icon',\n            params: {\n                name: 'calendar-regular',\n                class: 'h-icon-color--inherit'\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n</span>\n<span class=\"w-auto-complete__item-title\">\n    {{label}}\n</span>",action:r})):{}},n.prototype.GetQueryTokens=function(){var t;return t=this.query(),null==t?null:this.NormalizeQuery(t).split(/[\s:]+/)},n.prototype.NormalizeQuery=function(t){return t.replace(/[^\u00C0-\u1FFF\u2C00-\uD7FF\w :\/.-]/g,"").trim().toLowerCase()},n.prototype.MatchesToken=function(t,i){return n.__super__.MatchesToken.call(this,t,i)||t.id===e.SPECIAL_ITEMS.MESSAGE&&/^[\d\/.-]+$/.test(i)},n.prototype.GetMatchingData=function(t){var i,r,o,s,a,l,c;if(c=n.__super__.GetMatchingData.call(this,t),null==(r=t.find(function(t){return/\d/.test(t)})))return c;if(i=moment(r,app.loggedInUser.localization.dateFormat()),!i.isValid())return c;for(o=a=0,l=c.length;a<l;o=++a)s=c[o],s.id===e.SPECIAL_ITEMS.MESSAGE&&c.splice(o,1,this.CreateItem(s.subtype,i.userFormat(),i));return c},n}(e)}.apply(e,n))&&(t.exports=r)},1158:function(t,e,i){(function(n,r){var o,s,a={}.hasOwnProperty,l=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};o=[i(14),i(164),i(1911),i(3539),i(1702),i(1119),i(1709),i(1286),i(1156)],void 0!==(s=function(t,e,i,o,s,c,u,p,d){var h,f,m,g;return h=p.default,s.setOptions({sanitize:!0,breaks:!0,renderer:function(){var t;return t=new s.Renderer,t.link=function(t,e,i){return null==e&&(e=""),/^\s*(data|javascript)\s*(:|&colon;)/.test(t.toLowerCase())&&(t="javascript:;"),'<a href="'+t+'" target="_blank" title="'+e+'" rel="noopener">'+i+"</a>"},t.heading=function(t,e){return"<h"+e+">"+t+"</h"+e+">"},t}()}),f=function(){},f.prototype.ensureMoment=function(e){return function(e){return t.isMoment(e)||(e=t(e)),e}}(),f.prototype.AddSparseFields=function(t,e){var i,n,r;n=[];for(i in e)r=e[i],n.push(t["fields["+i+"]"]=r);return n},f.prototype.IsJsonString=function(t){try{e.utils.parseJson(t)}catch(t){return t,!1}return!0},f.prototype.getOffsetDate=function(t){return function(t,e){return null==e&&(e=null),e=e?app.utility.ensureMoment(e):app.consts.DATES.teamworkEpoch(),null==t||["","-1",-1].indexOf(~~t)>-1?e:e.add(~~t,"days")}}(),f.prototype.getOffsetDays=function(t){return function(t){return app.utility.ensureMoment(t).diff(app.consts.DATES.teamworkEpoch(),"days")}}(),f.prototype.getDatesDuration=function(t){return function(t,e,i){var n;return null==i&&(i=!0),t=app.utility.ensureMoment(t),e=app.utility.ensureMoment(e),n=e.diff(t,"days")+1,i&&(t.isoWeekday()>5&&(n+=7-t.isoWeekday()),e.isoWeekday()>5&&(n+=7-e.isoWeekday())),n}}(),f.prototype.getNextMonday=function(t){return function(t){return app.utility.ensureMoment(t).isoWeekday(8)}}(),f.prototype.getThisFriday=function(t){return function(t){return app.utility.ensureMoment(t).isoWeekday(5)}}(),f.prototype.landOnWeekday=function(t){return function(t,e){return null==e&&(e="start"),t=app.utility.ensureMoment(t),t.isoWeekday()>5?"end"===e?app.utility.getThisFriday(t):app.utility.getNextMonday(t):t}}(),f.prototype.Truncate=function(t,i){var n,r;return null==i&&(i=20),n=e.unwrap(t),r=n.indexOf("\u2063"),-1!==r&&r<=i&&(i+=1),n.length<=i?n:n.substring(0,i)+app.localizationPreferences().ellipsis},f.prototype.IsEmail=function(t){var e;return e=/^.+@.+\..+$/,e.test(t)},f.prototype.IsValidDomain=function(t,e){var i;return null==e&&(e=!1),!!t&&(i=e?/^((ftp|https?):\/\/)?([a-zA-Z0-9-]+\.){0,5}[a-zA-Z0-9-][a-zA-Z0-9-]+\.[a-zA-Z]{2,64}?$/gi:/^(?!:\/\/)([a-zA-Z0-9-]+\.){0,5}[a-zA-Z0-9-][a-zA-Z0-9-]+\.[a-zA-Z]{2,64}?$/gi,i.test(t))},f.prototype.IsValidPhoneNumber=function(t){return/^[0-9\-\+\s\(\)]*$/.test(t)},f.prototype.IsMacPlatform=function(){return-1!==navigator.platform.toUpperCase().indexOf("MAC")},f.prototype.IsFirefox=function(){return-1!==navigator.userAgent.toLowerCase().indexOf("firefox")},f.prototype.IsLinuxPlatform=function(){return-1!==navigator.platform.toUpperCase().indexOf("LINUX")},f.prototype.IsChrome=function(){return!!window.chrome&&!window.isOpera},f.prototype.ReplaceNoCase=function(t,e,i,n){var r,o;return null==n&&(n="ONE"),r="i","all"===n.toLowerCase()&&(r="gi"),o=(e+"").replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1"),t.replace(new RegExp("("+o+")",r),i)},f.prototype.ReplaceAllUrlsWithAnchors=function(t){var e;return e=/(^|[\s.,:])((?:http|ftp|https):\/\/[\w\u00a1-\uffff]+(?:\.[\w\u00a1-\uffff]+)*(?:[^\u0000-\u0020\u007f-\u00a0]*[^\u0000-\u0020\u007f-\u00a0.,:])?)($|[\s.,:])/gi,f.prototype.SafeHTML(t).replace(e,'$1<a href="$2" target="_blank" rel="noopener">$2</a>$3')},f.prototype.FindNoCase=function(t,e){return t.toString().toLowerCase().indexOf(e.toString().toLowerCase())},f.prototype.CalculatePercentageChange=function(t,i){return t=e.unwrap(t),i=e.unwrap(i),Math.floor((t-i)/t*100)},f.prototype.CanUseAJAXUpload=function(){return void 0!==window.FormData},f.prototype.MinutesIntToString=function(t,i){var n,r,o,s,a,l,c,u;if(null==i&&(i={abbreviate:!1,zeroVal:"",showDays:!1,format:!1}),s=function(t,e,i,n,r){var o;if(null==i&&(i=!1),null==n&&(n=!1),null==r&&(r=""),null==t||0===t)return r;switch(o=n&&null!=t.toLocaleString?t.toLocaleString():t,e){case"days":return i?o+"d":1===t?app.tl("[_s] day",o):app.tl("[_s] days",o);case"hours":return i?o+"h":1===t?app.tl("[_s] hour",o):app.tl("[_s] hours",o);case"minutes":return i?o+"m":1===t?app.tl("[_s] minute",o):app.tl("[_s] minutes",o)}},t=e.unwrap(t),a=0,r=0,n=i.abbreviate,null!=t)return isNaN(t)?i.zeroVal:0===(t=parseInt(t,10))?i.zeroVal:t<60?(t=Math.ceil(t),s(t,"minutes",n,i.format,i.zeroVal)):(a=Math.floor(t/60),t=Math.round(t%60),l=s(a,"hours",n,i.format),c=s(t,"minutes",n,i.format),a>24&&i.showDays&&(r=Math.floor(a/24),o=s(r,"days",n,i.format),a%=24),u=[],o&&u.push(o),l&&u.push(l),c&&u.push(c),u.join(" "))},f.prototype.PrefixKeys=function(t,e){var i,n,r,o,s;for(r={},s=Object.keys(e),i=0,o=s.length;i<o;i++)n=s[i],r["filters."+n]=e[n];return r},f.prototype.SafeHTML=function(t){var i;return i=e.unwrap(t),String(i).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},f.prototype.HTMLToString=function(t){return String(t).replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">")},f.prototype.URLSafeString=function(t){return String(t).replace(/\s/g,"-").replace(/[^a-zA-Z0-9-_]/g,"").toLowerCase()},f.prototype.StripHTML=function(t,e){return null==e&&(e=""),t.replace(/(?:<!--(?:(?!-->)[^])*(?:-->|$)|<(?!\s+)[^>]*(?:>|$))/g,e).replace(/&nbsp;/g," ")},f.prototype.SetUrlTargetAttributes=function(t){var i;if(null!=(t=e.unwrap(t)))return i=n("<div />",{html:t}),i.find("a").each(function(){if("_blank"!==this.target&&(this.target="_blank",this.rel="noopener"),!/^http(s)?:\/\//.test(this.href))return this.target="_self"}),i.html()},f.prototype.Flatten=function(t){return[].concat.apply([],t)},f.prototype.GetLabelsAsList=function(t){if(!Array.isArray(t))return"";if(!t.length)return"";switch(t.length){case 1:return t[0];case 2:return app.tl("[_s] and [_s]",t[0],t[1]);case 3:return app.tl("[_s], [_s] and [_s]",t[0],t[1],t[2]);case 4:return app.tl("[_s], [_s], [_s] and [_s] other",t[0],t[1],t[2],1);default:return app.tl("[_s], [_s], [_s] and [_s] others",t[0],t[1],t[2],t.length-3)}},f.prototype.ListToTree=function(t,i,n,r){var o,s,a,l,c,u,p,d,h;for(null==t&&(t=[]),null==i&&(i="id"),null==n&&(n="parentId"),null==r&&(r="children"),u={},h=[],o=s=0,a=t.length;s<a;o=++s)c=t[o],u[e.unwrap(c[i])/1]=o,c[r]=[];for(o=p=0,l=t.length;p<l;o=++p)c=t[o],d=e.unwrap(c[n])/1,null!=u[d]&&0!==d?t[u[d]][r].push(c):h.push(c);return h},f.prototype.SetTeamIcon=function(t){return this.GetTeamIcon(t).then(function(e){return t.logoIconSVG(e)})},f.prototype.GetTeamIcon=function(t){return function(t){var i,n,r,o;return n=e.unwrap(null!=(r=t.logoIcon)?r:t.teamLogoIcon),i=e.unwrap(null!=(o=t.logoColor)?o:t.teamLogoColor),h(n+"-regular",{color:i.length?"#ffffff":"#999999"},{asNode:!1})}}(),f.prototype.GetTeamLogo=function(t,i){var n,r,o,s,a,l,c,u,p,d,h,f;return null==i&&(i=[]),l=e.unwrap(null!=(p=t.logoIcon)?p:t.teamLogoIcon),a=e.unwrap(null!=(d=t.logoColor)?d:t.teamLogoColor),c=e.unwrap(null!=(h=t.logoUrl)?h:t.teamLogo),i=this.ConvertToArray(i),s=!a.length,n=s?"inherit":a,r=s?"inherit":a,o=l.length?e.unwrap(t.logoIconSVG):e.unwrap(t.name).substr(0,2),s&&i.push("u-team-logo--white"),u=i.join(" "),null==t.logoType&&(t.logoType=c.length?"image":l.length?"icon":"text"),"image"===e.unwrap(t.logoType)?'<div class="u-team-logo '+u+'">\n    <img src="'+c+'"\n        class="u-team-logo__img"\n        onerror="this.src=\''+e.unwrap(t.defaultImageUrl)+"'\">\n</div>":"icon"===(f=e.unwrap(t.logoType))||"text"===f?'<div class="u-team-logo '+u+'">\n    <span class="u-team-logo__icon" style="background-color: '+n+"; border-color: "+r+'">\n        '+o+"\n    </span>\n</div>":void 0},f.prototype.Uniq=function(t){var e,i,n,r;for(r={},e=[],i=0,n=t.length;i<n;)r.hasOwnProperty(t[i])?++i:(e.push(t[i]),r[t[i]]=1,++i);return e},f.prototype.GetFriendlyBytes=function(t,e){return o(t,e)},f.prototype.NumberFormat=function(t){return i(t).format("0,0")},f.prototype.Scheme=function(){return window.devMode?"http://":document.URL.indexOf("teamwork.com")>-1||document.URL.indexOf("teamworkpm.net")>-1?"https://":"http://"},f.prototype.ExtendURL=function(t,e){var i;return t+=-1===t.indexOf("?")?"?":"&","string"==typeof e?t+=e:"object"==typeof e&&(i=r.param(e),t+=i),t},f.prototype.GetQueryStringParamByName=function(t,e){var i,n;return null==e&&(e="search"),t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),i=new RegExp("[\\?&]"+t+"=([^&#]*)"),"search"===e&&(n=i.exec(location.search)),"hash"===e&&(n=i.exec(location.hash)),null===n?null:decodeURIComponent(n[1].replace(/\+/g," "))},f.prototype.GetAttachmentIcon=function(t,e){var i,n,r,o;if(n=void 0,o={outlook:["msg"],doc:["odt","rtf","txt","wpd","wps","md"],docx:["doc","docx"],text:["txt","text","log","csv"],pdf:["pdf"],latex:["tex"],data:["dat","efx","epub","ged","ibooks","sdf","tax2010","xml","log"],presentation:["key"],ppt:["pps","ppt","pptx"],vcard:["vcf","vcard"],script:["json","js"],audio:["aif","aiff","iff","m3u","m4a","mid","mp3","mpa","ra","wav","wma","ogg"],video:["3g2","3gp","asf","asx","avi","mov","mp4","mpg","rm","srt","vob","wmv","mkv","webm"],flash:["fl","fla","swf","flv"],threed:["3dm","max","obj"],raster:["bmp","dds","gif","jpg","jpeg","png","pspimage","tga","thm","tif","tiff","yuv"],psd:["psd"],ai:["ai"],fw:["fw"],ae:["ae"],keynote:["keynote"],numbers:["numbers"],pages:["pages"],pr:["pr"],vector:["eps","svg","cgm"],xlsx:["xlr","xls","xlsx","xlsb","xlsm"],vsd:["vsd","vsdx","vsdp"],mpp:["mppx","mppt","mpp","mpph"],sql:["sql"],access:["accdb","mdb"],database:["db","dbf","pdb","sqlite"],macos:["app","dmg"],windows:["exe","com","gadget","bat","wsf"],linux:["sh","rpm"],scriptcode:["asp","aspx","cfm","js","jsp","cfc","pl","py"],documentcode:["css","c","class","cpp","cs","dtd","java","m"],feed:["rss"],php:["php"],webdoc:["html","htm","xhtml"],archive:["zip","7z","deb","gz","pkg","rar","sit","sitx","tar.gz","zipx","bz2","jar"],disc:["bin","cue","iso","toast","vcd"]},i=t.toLowerCase().trim(),n=i.split("."),1===n.length)return"default.png";n=n[n.length-1];for(r in o)if(-1!==o[r].indexOf(n))return r+".png";return"default.png"},f.prototype.StripExtension=function(t,e,i,n){return null==i&&(i=-1),null==n&&(n=!1),e="."+e,t===e?t:(t.substr(-1*e.length).toLowerCase()===e&&(t=t.substr(0,t.length-e.length)),i>-1&&(t=this.Truncate(t,i,n?"\u2026":"")),t)},f.prototype.Capitalize=function(t){return t=t.toLowerCase().replace(/^[\u00C0-\u1FFF\u2C00-\uD7FF\w]|\s[\u00C0-\u1FFF\u2C00-\uD7FF\w]/g,function(t){return function(t){return t.toUpperCase()}}())},f.prototype.ScrollIntoViewIfNeeded=function(t,e,i){var n,o,s,a,l,c;null==e&&(e=300),null==i&&(i=""),c=r(".app-header__base").outerHeight(),a=-1*c,n=r(document),i.length&&r(i).length&&(n=r(i)),"string"==typeof t&&(t=document.querySelector(t)),s=r(t),0!==s.length&&(l=t.getBoundingClientRect(),o=setInterval(function(){var i;return i=t.getBoundingClientRect(),JSON.stringify(i)!==JSON.stringify(l)?l=i:(clearInterval(o),l.top>=c&&l.left>=0&&l.bottom<=app.viewPortHeight()&&l.right<=app.viewPortWidth()?void 0:(window.scrollTo(),"function"==typeof n.scrollTo?n.scrollTo(s,e,{offset:a}):void 0))},300))},f.prototype.UrlEncode=function(t){var e;return e=escape(this.Utf8_encode(t)),e=e.replace(/\+/gi,"%2B")},f.prototype.UrlDecode=function(t){return this.Utf8_decode(unescape(t))},f.prototype.Utf8_encode=function(t){var e,i,n;for(t=t.replace(/\r\n/g,"\n"),n="",i=0;i<t.length;)e=t.charCodeAt(i),e<128?n+=String.fromCharCode(e):e>127&&e<2048?(n+=String.fromCharCode(e>>6|192),n+=String.fromCharCode(63&e|128)):(n+=String.fromCharCode(e>>12|224),n+=String.fromCharCode(e>>6&63|128),n+=String.fromCharCode(63&e|128)),i++;return n},f.prototype.Utf8_decode=function(t){var e,i,n,r,o;for(o="",r=0,e=i=0;r<t.length;)e=t.charCodeAt(r),e<128?(o+=String.fromCharCode(e),r++):e>191&&e<224?(i=t.charCodeAt(r+1),o+=String.fromCharCode((31&e)<<6|63&i),r+=2):(i=t.charCodeAt(r+1),n=t.charCodeAt(r+2),o+=String.fromCharCode((15&e)<<12|(63&i)<<6|63&n),r+=3);return o},f.prototype.FindIndexByKeyValue=function(t,e,i,n){var r,o,s;if(null==n&&(n=!1),o=0,s=!1,n&&(s=!isNaN(i)),s)for(;o<t.length;){if(parseInt(app.ko.unwrap(t[o][e]),10)===parseInt(i,10))return o;o++}else for(;o<t.length;){if(void 0!==(r=app.ko.unwrap(t[o][e]))&&void 0!==i&&r===i)return o;o++}return-1},f.prototype.shuffle=function(t){var e,i,n;for(e=t.length,n=void 0,i=void 0;0!==e;)i=Math.floor(Math.random()*e),e-=1,n=t[e],t[e]=t[i],t[i]=n;return t},f.prototype.Highlight=function(t,e,i){var r,o,s,a,l,c,u,p,d,h,f;null==e&&(e=20),null==i&&(i={}),f=null!=(d=i.startColor)?d:app.consts.UICOLORS.defaultbg,p=null!=(h=i.middleColor)?h:app.consts.UICOLORS.highlightbg,f=f.replace("#",""),p=p.replace("#",""),l=function(t){var e;return[(e=parseInt(t,16))>>16&255,e>>8&255,255&e].join()},c=function(t,e,i){var n,r;for(arguments.length<3&&(i=.5),r=t.slice(),n=0;n<3;)r[n]=Math.round(r[n]+i*(e[n]-t[n])),n++;return r},u=function(t,e,i){var n,r,o;for(o=1/(i-1),r=[],t=t.match(/\d+/g).map(Number),e=e.match(/\d+/g).map(Number),n=0;n<i;)r.push("rgb("+c(t,e,o*n).join()+")"),n++;return r},this.ValidateHex(f)&&(f="rgb("+l(f)+")"),this.ValidateHex(p)&&(p="rgb("+l(p)+")"),r=u(f,p,6),o=u(p,f,6),a=r.concat(o.slice(1)),s=n(t),n.each(a,function(t,i){setTimeout(function(){s.css("backgroundColor",i)},e*t)})},f.prototype.HighlighProfileEdit=function(){return document.querySelector(".s-header-user").click(),setTimeout(function(){return app.utility.Highlight(".edit-profile-item")},500)},f.prototype.FocusInput=function(t){n(t).focus()},f.prototype.IsColorLight=function(t){var e,i,n;if(null==t)throw new Error("First argument is required (colorHEX)");if(t=r.trim(t),"#"===t[0]&&(t=t.substr(1)),6!==t.length)throw new Error("First argument must be a HEX color");return n=parseInt(t.substr(0,2),16),i=parseInt(t.substr(2,2),16),e=parseInt(t.substr(4,2),16),255-(299*n+587*i+114*e)/1e3<20},f.prototype.ValidateHex=function(t){var e,i;return"string"==typeof t&&(e=(""+t).replace("#",""),i=/^[-+]?[0-9A-Fa-f]+\.?[0-9A-Fa-f]*?$/,i.test(e))},f.prototype.GetValidHex=function(t,i){return null==t&&(t=""),null==i&&(i=!1),"transparent"===(t=e.unwrap(t))?t:(t.includes("#")||(t="#"+t),t.substr(1).length>6&&(t=t.substr(0,7)),i&&!this.ValidateHex(t)&&(t=this.GetRandomNiceColor(!0)),t)},f.prototype.FocusAndHighlight=function(t){return this.FocusInput(t),this.Highlight(t)},f.prototype.GetReadWriteUserFormattedDateString=function(i,r,o){var s,a;return null==r&&(r={}),console.assert("function"==typeof i),a={observableValueType:"moment",allowBlank:!0},n.extend(a,r),console.assert(["moment","datestring","date"].indexOf(a.observableValueType)>-1),console.assert("boolean"==typeof a.allowBlank),s=e.observable(null),e.pureComputed({read:function(e){return function(){var e,n;if(null!==s())return s();switch(e=i(),a.observableValueType){case"moment":if(!t.isMoment(e))return"";n=e;break;case"datestring":if("string"!=typeof e)return"";n=t(e);break;case"date":if("object"!=typeof e||"function"!=typeof e.getMonth)return"";n=t(e)}return n.format(app.loggedInUser.localization.dateFormat().toUpperCase())}}(),write:function(e){return function(e){var n,r;if(e.length>0&&10!==e.length)return void s(e);if(10===e.length){if(n=t(e,app.loggedInUser.localization.dateFormat().toUpperCase()),n.isValid()){switch(a.observableValueType){case"moment":r=n;break;case"datestring":r=n.toDate().toString();break;case"date":r=n.toDate()}i(r)}}else 0===e.length&&a.allowBlank&&i(null);s(null)}}(),owner:o})},f.prototype.GetNumberAsCurrency=function(t,e){var i;if(null==e&&(e=!0),e){if("string"==typeof t&&(t="0"===t||""===t?0:parseFloat(t)),i=parseFloat(t.toFixed(2)).toLocaleString("en-US"),-1===i.indexOf("."))return i+".00";i.indexOf(".")===i.length-2&&(i+="0")}else i=parseInt(t,10).toString();return i},f.prototype.IgnoreFormChanges=function(t){null==t&&(t="body"),r(t).forgetChanges()},f.prototype.convertToBlob=function(t,e){var i,n,r,o,s;for(n=atob(t),i=[],r=o=0,s=n.length;0<=s?o<s:o>s;r=0<=s?++o:--o)i.push(n.charCodeAt(r));return new Blob([new Uint8Array(i)],{type:e},{size:Math.ceil(.75*t.length)})},f.prototype.RectsOverlap=function(t,e){return!(t.right<e.left||t.left>e.right||t.bottom<e.top||t.top>e.bottom)},f.prototype.ConvertToArray=function(t,i,n){return null==i&&(i=!1),null==n&&(n=!1),"string"==typeof t?t=t.split(","):"number"==typeof t&&(t=[t]),i&&(t=e.utils.arrayGetDistinctValues(t)),n&&(t=t.filter(function(t){return""!==t})),t},f.prototype.isObject=function(t){return function(t){return null!=(null!=t?t.constructor:void 0)&&"object"===t.constructor.name.toLowerCase()}}(),f.prototype.isEmptyObject=function(t){return function(t){var e;for(e in t)if(a.call(t,e))return t[e],!1;return!0}}(),f.prototype.compareObjects=function(t){return function(t,e){return Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every(function(i){return e.hasOwnProperty(i)&&app.utility.AreEqual(t[i],e[i])})}}(),f.prototype.GetBoolean=function(t){var e,i;if("string"==typeof t){if("0"===(e=t.toLowerCase())||"false"===e||"no"===e||"n"===e||""===e)return!1;if("1"===(i=t.toLowerCase())||"true"===i||"yes"===i||"y"===i)return!0}else if("number"==typeof t)return!0;return!1},f.prototype.GetSVGName=function(t){switch(null==t&&(t=""),t=e.unwrap(t)){case"activity":case"activities":return"activity";case"task":case"tasks":case"todo_items":return"alert-success";case"tasklist":case"tasklists":return"list";case"time":case"timelog":case"timelogs":return"clock";case"milestone":case"milestones":return"milestone-tw";case"file":case"fileversion":case"files":case"fileversions":case"attachment":case"attachments":return"paperclip";case"link":case"links":return"link";case"notebook":case"notebooks":return"book";case"risk":case"risks":return"exclamation-triangle";case"event":case"events":case"calendarevent":case"calendar":return"calendar";case"reply":return"reply";case"message":case"messages":return"messages";case"comment":case"comments":case"task_comment":case"file_comment":case"notebook_comment":case"milestone_comment":case"link_comment":return"comments";case"page":case"link":return"location-alt";case"project":case"budget":return"project";case"status":case"projectUpdate":return"status";case"person":case"team":return"user";case"board":return"board-tw";case"billingInvoice":case"billing":case"invoice":return"billing";case"report":return"graph";case"pinned":return"pin";default:return t}},f.prototype.GetHours=function(t){return Math.floor(t/60)},f.prototype.GetMinutes=function(t){return t%60},f.prototype.GetWeekText=function(){return app.loggedInUser.localization.startOnSunday()?"("+app.tl("Sun")+" - "+app.tl("Sat")+")":"("+app.tl("Mon")+" - "+app.tl("Sun")+")"},f.prototype.GetLastMonthsText=function(e,i){var n,r;return null==i&&(i="Last [_s] months"),r=t().startOf("month").subtract(e-1,"months").format("MMM"),n=t().format("MMM"),app.tl(i,e)+" ("+r+" - "+n+")"},f.prototype.GetDatesFromRange=function(e){return function(e,i,n){var r,o,s,a;if(null==n&&(n=0),a=app.loggedInUser.GetWeekString(),r=["","anytime","yesterday","today","tomorrow","thisweek","lastweek","nextweek","thismonth","lastmonth","nextmonth","last3months","last6months","within","withinprev"],-1===r.indexOf(e))return null;switch(e){case"yesterday":s=t().startOf("day").subtract(1,"day"),o=s.clone();break;case"today":s=t().startOf("day"),o=t().startOf("day");break;case"tomorrow":s=t().startOf("day").add(1,"day"),o=s.clone();break;case"thisweek":s=t().locale("en-us").startOf(a),o=t().locale("en-us").endOf(a);break;case"lastweek":s=t().locale("en-us").startOf(a).subtract(1,"week"),o=t().locale("en-us").endOf(a).subtract(1,"week");break;case"nextweek":s=t().startOf(a).add(1,"week"),o=t().endOf(a).add(1,"week");break;case"thismonth":s=t().startOf("month"),o=t().endOf("month");break;case"lastmonth":s=t().subtract(1,"month").startOf("month"),o=t().subtract(1,"month").endOf("month");break;case"nextmonth":s=t().add(1,"month").startOf("month"),o=t().add(1,"month").endOf("month");break;case"last3months":s=t().startOf("month").subtract(2,"months"),o=t().endOf("month");break;case"last6months":s=t().startOf("month").subtract(5,"months"),o=t().endOf("month");break;case"within":n>=0?(s=t().startOf("day"),o=t().startOf("day").add(n,"day")):(s=t().startOf("day").subtract(Math.abs(n),"day"),o=t().startOf("day"));break;case"withinprev":n>=0?(s=t().startOf("day").subtract(Math.abs(n),"day"),o=t().startOf("day")):(s=t().startOf("day"),o=t().startOf("day").add(n,"day"));break;case"anytime":s=t().startOf("month").subtract(6,"months"),o=t().startOf("month").add(6,"months")}return null!=i&&null!=s&&null!=o&&(s=s.format(i),o=o.format(i)),{startDate:s,endDate:o}}}(),f.prototype.DateWithinRange=function(i){return function(i,n,r,o,s){var a;return null==r&&(r=0),null==o&&(o=null),null==s&&(s=null),i=e.unwrap(i),n=e.unwrap(n),r=e.unwrap(r),o=e.unwrap(o),s=e.unwrap(s),""===n||"anytime"===n||("overdue"===n?(null==s&&(s=t(new Date)),t(i).isAfter(t(s),"day")):"custom"===n&&null!=o&&null!=s?t(i).isSameOrAfter(t(o),"day")&&t(i).isSameOrBefore(t(s),"day"):(a=app.utility.GetDatesFromRange(n,"YYYYMMDD",r),t(i).isSameOrAfter(t(a.startDate),"day")&&t(i).isSameOrBefore(t(a.endDate),"day")))}}(),f.prototype.ConvertRange=function(t){return function(t){return"y"===t?"yesterday":"t"===t?"today":"1w"===t?"thisweek":"-1w"===t?"lastweek":"1m"===t?"thismonth":"-1m"===t?"lastmonth":"-3m"===t?"last3months":"-6m"===t?"last6months":"today"}}(),f.prototype.ParseDateCode=function(t){return function(t,e,i,n){var r;switch(t){case"anytime":return"";case"custom":return null!=e?e.format("YYYYMMDD"):"";default:return r=app.utility.GetDatesFromRange(t,"YYYYMMDD",i),r[n]}}}(),f.prototype.GetFilterInfo=function(t){return function(t,i,n){var r,o,s,a,c,u;return null==n&&(n=[]),r=e.unwrap(t),null==(null!=(c=r.fulldata)?c[i]:void 0)?"":(o=r.fulldata[i],a=Object.keys(o).map(function(t){return t.toString()}),n.length&&(n=n.map(function(t){return t.toString()}),a=a.filter(function(t){return l.call(n,t)>=0})),s=a.indexOf(app.loggedInUser.id().toString())>-1,u="",a.length>0&&(u=s&&"-1"!==o[a[0]].id?"You":""+o[a[0]].fullName,a.length>1&&(u+=" + "+(a.length-1)+" "+(a.length>2?app.tl("others"):app.tl("other")))),u)}}(),f.prototype.GetDashboardFilters=function(t){return function(t,i){var n,r,o,s,a,l;return null==i&&(i=!1),n=[],s=function(e,i){var n,r,o,s,a,l,c;if(s=[],n=null!=(a=null!=(l=t.fulldata)?l[e]:void 0)?a:{},!i.length||!Object.keys(n).length)return[];for(r=0,o=i.length;r<o;r++)c=i[r],null!=n[c]&&s.push(n[c]);return s},a=function(t,e,i){var n,r;return null==i&&(i=!1),n=e.length,r=function(){switch(t){case"categories":case"companies":case"tags":return"name";case"owners":return"fullName";case"health":case"status":return"text"}}(),1===n?""+e[0][r]:2===n?app.tl("[_s] and [_s]",""+o(e[0][r],i),""+o(e[1][r],i)):3===n?app.tl("[_s], [_s] and [_s] other",""+o(e[0][r],i),""+o(e[1][r],i),1):app.tl("[_s], [_s] and [_s] others",""+o(e[0][r],i),""+o(e[1][r],i),n-2)},o=function(t,e){return null==e&&(e=!1),e?"<span class='font-weight--semibold'>"+app.utility.SafeHTML(t)+"</span>":t},null==(null!=t?t.settings:void 0)?n:(t.settings.onlyStarredProjects()&&n.push({label:app.tl("Only starred projects"),type:"starred",value:!0}),t.settings.categoryIds().length&&(r={label:app.tl("Categories"),type:"categories",items:s("categories",t.settings.categoryIds())},r.items.length&&(r.summary=a(r.type,r.items,i),n.push(r))),t.settings.companyIds().length&&(r={label:app.tl("Companies"),type:"companies",items:s("companies",t.settings.companyIds())},r.items.length&&(r.summary=a(r.type,r.items,i),n.push(r))),t.settings.projectOwnerIds().length&&(r={label:app.tl("Owners"),type:"owners",items:s("users",t.settings.projectOwnerIds())},r.items.length&&(r.summary=a(r.type,r.items,i),n.push(r))),t.settings.filterTagIds().length&&(r={label:app.tl("Tags"),type:"tags",items:s("tags",t.settings.filterTagIds())},r.items.length&&(r.summary=a(r.type,r.items,i),n.push(r))),t.settings.projectHealth().length&&(l={0:{text:app.tl("Not set"),color:app.consts.UICOLORS.healthnone},1:{text:app.account.preferences.projectHealthRedLabel(),color:app.consts.UICOLORS.healthred},2:{text:app.account.preferences.projectHealthAmberLabel(),color:app.consts.UICOLORS.healthamber},3:{text:app.account.preferences.projectHealthGreenLabel(),color:app.consts.UICOLORS.healthgreen}},r={label:app.tl("Health"),type:"health",items:e.utils.arrayMap(t.settings.projectHealth(),function(t){return l[t]})},r.summary=a(r.type,r.items,i),n.push(r)),["all","active"].includes(t.settings.projectStatus())||(r={label:app.tl("Status"),type:"status",items:app.projectStatusOptions.filter(function(e){return e.id===t.settings.projectStatus()})},r.summary=a(r.type,r.items,i),n.push(r)),n)}}(),f.prototype.EnsureObservable=function(t,i){return null==i&&(i=!1),e.isObservable(t)||(i?(t=this.ConvertToArray(t),t=e.observableArray(t)):t=e.observable(t)),t},f.prototype.debounce=function(t,e,i){var n;return n=null,function(){var r,o,s,a;if(s=this,r=arguments,a=function(){if(n=null,!i)return t.apply(s,r)},o=i&&!n,clearTimeout(n),n=setTimeout(a,e),o)return t.apply(s,r)}},f.prototype.stripBase64ImageDataPrefix=function(t){return t.replace(/^data:image\/\w+;base64,/,"")},f.prototype.parseUrl=function(t){var e;return e=document.createElement("a"),e.href=t,{protocol:e.protocol,hostname:e.hostname,port:e.port,hash:e.hash,pathname:e.pathname,search:e.search,host:e.host}},f.prototype.noProtocol=function(t){var e;return e=/http(s?):\/\//g,t.replace(e,"//")},f.prototype.canApparentlyDrawImageOnCanvas=function(t){var e,i;return null!=t&&(e=this.parseUrl(t.src),i=window.location,e.protocol===i.protocol&&e.port===i.port&&e.host===i.host)},f.prototype.extractBase64FromImg=function(t,e){var i,n,r;return null==e&&(e=!0),null==t?null:this.canApparentlyDrawImageOnCanvas(t)?(n=document.createElement("canvas"),n.width=t.width,n.height=t.height,r=n.getContext("2d"),r.drawImage(t,0,0),i=n.toDataURL(),e&&i||this.stripBase64ImageDataPrefix(i)):null},f.prototype.ComputeDisplayableShortenedList=function(t,e,i){var n,r;return null==e&&(e=3),e=Math.max(1,e),r="function"==typeof i?t.map(i):t,n=r.slice(0,e).join(" + "),t.length>e&&(n+=" + "+(t.length-e)+" "+app.tl("others")),n},f.prototype.ComputeDisplayablePeopleNames=function(t,e){var i;return null==e&&(e=3),t.length?(i=function(t){return t.firstName+" "+t.lastName},f.prototype.ComputeDisplayableShortenedList(t,e,i)):app.tl("Nobody")},f.prototype.JoinNumbersInArray=function(t){var e,i,n,r;for(e=[],n=0,r=t.length;n<r;n++)i=t[n],isNaN(parseInt(i,10))?e.push(i):-1===e.indexOf("0-9")&&e.unshift("0-9");return e},f.prototype.Url={encode:function(t){var e;return e=escape(this._utf8_encode(t)),e=e.replace(/\+/gi,"%2B")},decode:function(t){return this._utf8_decode(unescape(t))},_utf8_encode:function(t){var e,i,n;for(t=t.replace(/\r\n/g,"\n"),n="",i=0;i<t.length;)e=t.charCodeAt(i),e<128?n+=String.fromCharCode(e):e>127&&e<2048?(n+=String.fromCharCode(e>>6|192),n+=String.fromCharCode(63&e|128)):(n+=String.fromCharCode(e>>12|224),n+=String.fromCharCode(e>>6&63|128),n+=String.fromCharCode(63&e|128)),i++;return n},_utf8_decode:function(t){var e,i,n,r,o;for(o="",r=0,e=i=0;r<t.length;)e=t.charCodeAt(r),e<128?(o+=String.fromCharCode(e),r++):e>191&&e<224?(i=t.charCodeAt(r+1),o+=String.fromCharCode((31&e)<<6|63&i),r+=2):(i=t.charCodeAt(r+1),n=t.charCodeAt(r+2),o+=String.fromCharCode((15&e)<<12|(63&i)<<6|63&n),r+=3);return o}},f.prototype.GetCookie=function(t){var e,i;return""===t?"":(i=document.cookie.split(";"),e=i.filter(function(e){return function(e){return e=e.trim(),e.indexOf(t)>-1}}()),e.length>0?e[0].split("=")[1]:"")},f.prototype.IsFocusedOnEditable=function(){return!!n(".hasChanged").length||(!!n("input:focus,textarea:focus,select:focus").length||(!(null==document.activeElement||!document.activeElement.isContentEditable)||void 0!==n('[contenteditable="true"]').toArray().find(function(t){if(n(t).is(":focus"))return!0})))},f.prototype.GetHighlightedText=function(t,e){var i,n,r,o,s;return t=t.replace(/<span class="?highlight"?>(.*?)<\/span>/gim,"$1"),o=t.toLowerCase().trim(),r=e.toLowerCase().trim(),n='<span class="highlight">',i="</span>",o===r?""+n+app.utility.SafeHTML(t)+i:(s=new RegExp("("+app.utility.EscapeRegex(e)+")","igm"),t=t.replace(s,n+"$1"+i),t=this.SafeHTML(t),s=new RegExp("("+this.SafeHTML(n)+"(.*?)"+this.SafeHTML(i)+")","igm"),t=t.replace(s,n+"$2"+i))},f.prototype.GetRandomNiceColor=function(t){var e,i;return null==t&&(t=!0),e=app.consts.CATEGORYCOLORS.length,i=Math.floor(Math.random()*e),(t?"#":"")+app.consts.CATEGORYCOLORS[i]},f.prototype.LightenColor=function(t,e){var i,n,r,o,s;return s=!1,"#"===t[0]&&(t=t.slice(1),s=!0),r=parseInt(t,16),o=(r>>16)+e,o>255?o=255:o<0&&(o=0),i=(r>>8&255)+e,i>255?i=255:i<0&&(i=0),n=(255&r)+e,n>255?n=255:n<0&&(n=0),(s?"#":"")+(n|i<<8|o<<16).toString(16)},f.prototype.FindDateInString=function(e){var i,n,r,o,s,a,l,c,u,p;if(e=e.toLowerCase().replace(/\s/g," "),u=t(),null!=e.match(/\b(tomorrow)\b/))return t().add(1,"days");if(null!=e.match(/\b((next week)|(in a week))\b/))return t().add(7,"days");if(null!=e.match(/\b((next month)|(in a month))\b/))return t().add(30,"days");if(c=e.match(/\b(monday|tuesday|wednesday|thursday|friday|saturday|sunday)\b/))return r=c[0],i=t().day(r),window.d=i,window.today=u,i.isBefore(u)&&i.add(7,"days"),i;if(c=e.match(/((\b([0-9][0-9]?)(?:[a-z]+)?) )?\b(jan|january|feb|february|mar|march|apr|april|may|jun|june|jul|july|aug|august|sep|september|oct|october|nov|november|dec|december)\b( ([0-9][0-9]?))?/)){for(i=t(),p={dayNo:null,m:null},o=s=0,a=c.length;s<a;o=++s)l=c[o],0!==o&&void 0!==l&&(n=parseInt(l,10),n>0?p.dayNo=n:p.m=l);if(p.dayNo&&p.m)return i.month(p.m),i.date(Math.min(p.dayNo,i.daysInMonth())),i.isBefore(u)&&i.add(1,"years"),i}return null},f.prototype.FindTimeInString=function(t){var e,i,n,r,o;return t=t.toUpperCase().replace(/\s/g,""),null!=t.match(/[0-2]{0,1}[0-9]{1,2}:[0-9]{2}(?:AM|PM)/)?(n=t.match(/[0-2]{0,1}[0-9]{1,2}:[0-9]{2}(?:AM|PM)/),i=-1!==n[0].indexOf("PM"),o=n[0].replace(/(?:AM|PM)/,""),o=o.split(":"),e=parseInt(o[0],10),n=parseInt(o[1],10),e>12?null:(i&&e<12&&(e+=12),12!==e||i||(e-=12),e>24||n>59?null:{hour:e,minute:n})):null!=t.match(/[0-2]{0,1}[0-9]{1,2}(?:AM|PM)/)?(n=t.match(/[0-2]{0,1}[0-9]{1,2}(?:AM|PM)/),i=-1!==n[0].indexOf("PM"),o=n[0].replace(/(?:AM|PM)/,""),e=parseInt(o,10),i&&e<12&&(e+=12),12!==e||i||(e-=12),e>24?null:{hour:e,minute:0}):null!=t.match(/[0-2]{0,1}[0-9]{1,2}:[0-5][0-9]/)?(o=t.match(/[0-2]{0,1}[0-9]{1,2}:[0-5][0-9]/)[0],r=o.split(":"),e=parseInt(r[0],10),n=parseInt(r[1],10),e>23||n>59?null:{hour:e,minute:n}):null},f.prototype.GetProjectUpdateDisplayDate=function(i){var n,r,o;return o=t().startOf("day"),t().startOf("day").subtract("1","day"),n=t(e.unwrap(i)),n.format("YYYYMMDD")===o.format("YYYYMMDD")?app.tl("Today at [_s]",n.userFormat("time")):n.format("YYYYMMDD")===o.format("YYYYMMDD")?app.tl("Yesterday at [_s]",n.userFormat("time")):(r=n.format("YYYY")===o.format("YYYY")?"DD MMM [at] HH:mm":app.loggedInUser.localization.dateFormat(),n.format(r))},f.prototype.GetRelativeDate=function(i,n){var r;return null==n&&(n=""),i=e.unwrap(i),i=t(i),i=i.startOf("day"),r=t().startOf("day"),""===n&&(n=i.format("YYYY")===r.format("YYYY")?"dddd, MMMM Do":"dddd, MMMM Do YYYY"),i.isSame(r,"day")?app.tl("Today"):-1===i.diff(r,"days")?app.tl("Yesterday"):1===i.diff(r,"days")?app.tl("Tomorrow"):i.format(n)},f.prototype.GetPastRelativeTime=function(i){var n;return i=e.unwrap(i),t.isMoment(i)||(i=t(i)),n=t(),i>n?app.tl("a few seconds ago"):i.from(n)},f.prototype.EscapeRegex=function(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},f.prototype.Markdown=function(t){return t=t.replace(/<code>/g,"\n~~~\n").replace(/<\/code>/g,"\n~~~\n"),t=t.replace(/\[code\]/g,"\n~~~\n").replace(/\[\/code\]/g,"\n~~~\n"),t=t.replace(/<blockquote>/g,"[blockquote]").replace(/<\/blockquote>/g,"[/blockquote]"),t=t.replace(/<s>/g,"~~").replace(/<\/s>/g,"~~"),t=t.replace(/<del>/g,"~~").replace(/<\/del>/g,"~~"),t=t.replace(/<strike>/g,"~~").replace(/<\/strike>/g,"~~"),t=s(t),t=t.replace(/\[blockquote\]/g,"<blockquote>").replace(/\[\/blockquote\]/g,"</blockquote>")},f.prototype.CollapseTrailingBlockquote=function(t){var e,i;return i='<span class="fa fa-ellipsis-h blockquote-toggle" onclick="this.nextElementSibling.classList.toggle(\'hidden\')">',e=function(){var t;return t=r(this),t.is(":last-child")||t.next().is(":last-child")&&"<p></p>"===t.next()[0].outerHTML},r("<div>").html(t).children("blockquote").filter(e).addClass("hidden").before(i).find("blockquote").before("<br>",i).end().end().end().html()},f.prototype.CollapseNestedBlockquotes=function(t){var e;return e='<span class="fa fa-ellipsis-h blockquote-toggle" onclick="this.nextElementSibling.classList.toggle(\'hidden\')">',r("<div>").html(t).children("blockquote").find("blockquote").addClass("hidden").before(e).end().end().html()},f.prototype.OpenInNewTab=function(t){var e;if(null===(e=window.open(t,"_blank"))||void 0===e)return app.flash.Warn(app.tl("A popup blocker has prevented the page from opening in a new tab"))},f.prototype.FindDOMItemByDataAttribute=function(t,e){var i,n,r,o;if(null==t||null==e)return!1;if(null!=(null!=(n=e.dataset)?n[t]:void 0)&&!1!==(null!=(r=e.dataset)?r[t]:void 0))return e;if(o=e.parentNode,i=1,null!=o){for(;null!=o&&o!==document&&(null==o.dataset||null==o.dataset[t]);)o=o.parentNode,i++;return o!==document&&null!=o&&null!=o.dataset&&null!=o.dataset[t]&&o}},f.prototype.CleanupLightboxTimeout=function(){return r("body").removeClass("lightboxLoading"),r("div#modal-lightbox-slow").hide(),clearTimeout(app.modalLoadingTimeout),clearTimeout(app.modalLoadingFailSafeTimeout)},f.prototype.AreEqual=function(e,i){return e===i||t.isMoment(e)&&t.isMoment(i)&&e.startOf("day").isSame(i.startOf("day"))||this.isObject(e)&&this.isObject(i)&&this.compareObjects(e,i)||u.areEqual(e,i)},f.prototype.ArrayHasSameValues=function(t){return function(t,e){return u.hasSameValues(t,e)}}(),f.prototype.UniqueCollection=function(t){return function(t,e){return u.uniqueCollection(t,e)}}(),f.prototype.SetViewPortMinHeight=function(){return app.viewPortHeight()-app.consts.UIDIMENSIONS.HEADERHEIGHT+"px"},f.prototype.InjectKnockoutToHtml=function(t,i,n){var r,o;if(o=document.createElement("div"),o.innerHTML=i,null!=n)return r=e.contextFor(n).createChildContext(t),e.applyBindingsToDescendants(r,o),o.children[0]},f.prototype.MergeIntoArray=function(t,i,n){var r,o,s,a,l;if(r=e.unwrap(t),0===r.length)return i;if("id"===n){if(null==r[0].id)return!1;for(o=0,s=i.length;o<s;o++){if(l=i[o],null==l.id)return!1;a=app.utility.FindIndexByKeyValue(r,"id",e.unwrap(l.id)),a>-1?r.splice(a,1,l):-1===a&&r.push(l)}return r}return!1},f.prototype.getSafeFileName=function(t,i){var n,o,s,a,l,c;return a=r.extend({stripNonTextChars:!0,stripTabs:!0,stripNewLines:!0,stripZeroWidthSpaceChars:!0,stripWhiteSpace:0},i),c=[],o=e.unwrap(t).toString(),(a.stripNonTextChars&&o.match(/[<>:"\/|?*\\]/g)||a.stripZeroWidthSpaceChars&&o.match(/\u200B|\u200C|\u200D|\uFEFF/g)||a.stripTabs&&o.match("\t")||a.stripNewLines&&o.match("\n|\r"))&&(c.push(app.tl("The filename contained illegal characters")),a.stripNonTextChars&&(o=o.replace(/[<>:"\/|?*\\]/g,"_")),a.stripZeroWidthSpaceChars&&(o=o.replace(/\u200B|\u200C|\u200D|\uFEFF/g,"")),a.stripTabs&&(o=o.replace("\t","")),a.stripNewLines&&(o=o.replace("\n|\r",""))),n=o.substring(o.lastIndexOf(".")+1),o=o.substring(0,o.length-n.length-1),0===o.length?(o="file"+-1*(new Date).getTime(),c.push(app.tl("The filename was blank"))):(s=["CON","PRN","AUX","NUL","COM1","COM2","COM3","COM4","COM5","COM6","COM7","COM8","COM9","LPT1","LPT2","LPT3","LPT4","LPT5","LPT6","LPT7","LPT8","LPT9"],s.indexOf(o.toUpperCase())>-1&&(c.push(app.tl("The filename [_s] is reserved for system files",o)),o+="_")),2===a.stripWhiteSpace&&(o=o.replace(/\s/g,"")),{fileName:o+"."+n,warnings:c,status:null!=(l=c.length>0)?l:{1:0}}},f.prototype.markedInline=function(t){return this.flatrenderer=new s.Renderer,this.flatrenderer.paragraph=function(t){return t},s(e.unwrap(t),{sanitize:!0,renderer:this.flatrenderer})},f.prototype.RenderActivity=function(t){var e,i,n,r,o,s,a,l,c,u,p;switch(p=t.type()){case"project":p=("function"==typeof t.projectType?t.projectType():void 0)===app.consts.PROJECT_TEMPLATE?"project template":"project";break;case"billingInvoice":p="invoice";break;case"projectUpdate":p="project update";break;case"comment":p="reply";break;case"task_comment":case"file_comment":case"notebook_comment":case"milestone_comment":case"link_comment":p="comment"}switch(t.activityType()){case"new":switch(p){case"tasklist":return app.tl("added a [_s]",app.tl("task list"));case"reply":return app.tl("replied");default:return"sub-task"===t.publicInfo()?app.tl("added a subtask"):"a"===(e=p[0])||"e"===e||"i"===e||"o"===e||"u"===e?app.tl("added an "+p):app.tl("added a "+p)}break;case"reopened":switch(p){case"tasklist":return app.tl("reopened a [_s]",app.tl("task list"));default:return"sub-task"===t.publicInfo()?app.tl("reopened a subtask"):"a"===(i=p[0])||"e"===i||"i"===i||"o"===i||"u"===i?app.tl("reopened an "+p):app.tl("reopened a "+p)}break;case"edited":switch(p){case"tasklist":return app.tl("edited a [_s]",app.tl("task list"));default:return"sub-task"===t.publicInfo()?app.tl("edited a subtask"):"a"===(n=p[0])||"e"===n||"i"===n||"o"===n||"u"===n?app.tl("edited an "+p):app.tl("edited a "+p)}break;case"completed":switch(p){case"tasklist":return app.tl("completed a [_s]",app.tl("task list"));default:return"sub-task"===t.publicInfo()?app.tl("completed a subtask"):"a"===(r=p[0])||"e"===r||"i"===r||"o"===r||"u"===r?app.tl("completed an "+p):app.tl("completed a "+p)}break;case"newmessage":case"reply":case"added":return app.tl("posted ");case"newmessage":case"added":return app.tl("posted a reply");case"deleted":switch(p){case"tasklist":return app.tl("deleted a [_s]",app.tl("task list"));default:return"sub-task"===t.publicInfo()?app.tl("deleted a subtask"):"a"===(o=p[0])||"e"===o||"i"===o||"o"===o||"u"===o?app.tl("deleted an "+p):app.tl("deleted a "+p)}break;case"liked":return app.tl("liked a "+p);case"reacted":switch(null!=t.reactionType?t.reactionType():"like"){case"like":return"a"===(s=p[0])||"e"===s||"i"===s||"o"===s||"u"===s?app.tl("liked an "+p):app.tl("liked a "+p);case"dislike":return"a"===(a=p[0])||"e"===a||"i"===a||"o"===a||"u"===a?app.tl("disliked an "+p):app.tl("disliked a "+p);case"joy":return"a"===(l=p[0])||"e"===l||"i"===l||"o"===l||"u"===l?app.tl("laughed at an "+p):app.tl("laughed at a "+p);case"frown":return"a"===(c=p[0])||"e"===c||"i"===c||"o"===c||"u"===c?app.tl("frowned at an "+p):app.tl("frowned at a "+p);case"heart":return"a"===(u=p[0])||"e"===u||"i"===u||"o"===u||"u"===u?app.tl("loved an "+p):app.tl("loved a "+p)}break;default:return t.activityType()+" "+p}},f.prototype.GetProjectHealthLabel=function(t){switch(e.unwrap(t).toString()){case"3":return app.tl("Good");case"2":return app.tl("At risk");case"1":return app.tl("Needs attention");case"1":return app.tl("Good");default:return app.tl("Not set")}},f.prototype.GetQuickAddTaskHints=function(){var t;return t=["<li>"+app.tl("Create multiple tasks at once by putting each task on a separate line")+"</li>","<li>"+app.tl("Assign a date by putting it in square brackets e.g: [today] or [tomorrow] or [[_s]]","05/12/2011")+"</li>","<li>"+app.tl("Assign a person by mentioning them e.g: @dan or multiple people @dan @peter")+"</li>","<li>"+app.tl("Set the priority of the task by adding a number of exclamation marks e.g: !=Low, !!=Medium, !!!=High")+"</li>"],"<ul class='pl--large'>"+t.join(" ")+"</ul>"},f.prototype.checksum=function(t){var e,i,n;if(i=0,e="",0===t.length)return i;for(n=0;n<t.length;)e=t.charCodeAt(n),i=(i<<5)-i+e,i|=0,n++;return i},f.prototype.reflowHighCharts=function(){return setTimeout(function(){return d.charts.forEach(function(t){if(null!=t)return t.reflow()})},0)},f.prototype.refFromKey=function(t,i){if(null!=t)return null==i?t:i.split(".").reduce(function(t){return function(t,i){return e.unwrap(null!=t?t[i]:void 0)}}(),t)},f.prototype.dashCase=c.dashCase,f.prototype.nl2br=c.nl2br,g=function(t,e,i){return null==i&&(i=!1),i||(null!=e.id&&(t.id=t[e.id]),null!=e.text&&(t.text=t[e.text])),i&&(null!=e.id&&(t[e.id]=t.id),null!=e.text&&(t[e.text]=t.text)),t},f.prototype.translateSelect2Keys=function(t,e,i){return null==i&&(i=!1),null===t||void 0===t?t:Array.isArray(t)?t.map(function(t){return function(t){return g(t,e,i)}}()):g(t,e,i)},f.prototype.forEachRecursive=function(t,i,n,r){var o,s,a,l,c;if(null==r&&(r=null),null==i||""===i)return void console.warn("forEachRecursive: Second argument > Expected string, got:",i);for(c=null,l=e.unwrap(t),Array.isArray(l)||(l=[l]),s=0,a=l.length;s<a;s++)o=l[s],c=m(o,i,n,r,c);return c},m=function(t){return function(t,e,i,n,r){var o,s;return null==n&&(n=null),o=i(t),"first"===n&&o?o:(null===r&&(r=o),null!=t[e]&&(s=f.prototype.forEachRecursive(t[e],e,i,n),"first"===n&&s)?s:("all"===n&&(r=r&&o,null!=s&&(r=r&&s)),"any"===n&&(r=r||o,null!=s&&(r=r||s)),r))}}(),f.prototype.safeInteger=function(t){return~~t},f.prototype.PopulateDynamicFields=function(t){this.PopulateDynamicResponsibleFields(t),this.PopulateDynamicFollowerFields(t)},f.prototype.PopulateDynamicResponsibleFields=function(t,e){var i,n,r,o,s,a,l,c,u,p,d,h,f,m;if(null==e&&(e={}),null==e.onlyIfHasAssigned&&(e.onlyIfHasAssigned=!0),null==t.assignedTo&&(t.assignedTo=[]),null==t.assignedToCompanies&&(t.assignedToCompanies=[]),null==t.assignedToTeams&&(t.assignedToTeams=[]),null==t.responsiblePartyIds&&(t.responsiblePartyIds=[]),null==t.responsiblePartyNames&&(t.responsiblePartyNames=""),null==t.responsiblePartySummary&&(t.responsiblePartySummary=app.tl("Anyone")),t.assignedTo.length||t.assignedToCompanies.length||t.assignedToTeams.length||!e.onlyIfHasAssigned){if(h=[],f=[],t.assignedTo.length)for(u=t.assignedTo,n=0,r=u.length;n<r;n++)l=u[n],h.push(l.id.toString()),f.push(l.firstName+" "+l.lastName[0]+".");if(t.assignedToCompanies.length)for(p=t.assignedToCompanies,a=0,o=p.length;a<o;a++)i=p[a],h.push("c"+i.companyId),f.push(i.companyName);if(t.assignedToTeams.length)for(d=t.assignedToTeams,c=0,s=d.length;c<s;c++)m=d[c],h.push("t"+m.teamId),f.push(m.teamName);t.responsiblePartyIds=h,t.responsiblePartyNames=f.join("|"),t.responsiblePartySummary=this.GetResponsibleSummary(h,f)}},f.prototype.PopulateDynamicFollowerFields=function(t,e){var i,n,r,o,s,a,l,c,u,p,d,h,f,m,g,y,v,b,w;if(null==e)return this.PopulateDynamicFollowerFields(t,"change"),void this.PopulateDynamicFollowerFields(t,"comment");if(s=app.utility.Capitalize(e)+"s",o={users:"following"+s,companies:"companiesFollowing"+s,teams:"teamsFollowing"+s,ids:e+"FollowerIds",isFollowing:"userFollowing"+s},null==t[u=o.users]&&(t[u]=[]),null==t[p=o.companies]&&(t[p]=[]),null==t[d=o.teams]&&(t[d]=[]),null==t[h=o.ids]&&(t[h]=[]),t[o.users].length||t[o.companies].length||t[o.teams].length){if(n=[],t[o.users].length)for(y=t[o.users],r=0,a=y.length;r<a;r++)m=y[r],n.push(m.id.toString());if(t[o.companies].length)for(v=t[o.companies],f=0,l=v.length;f<l;f++)i=v[f],n.push("c"+i.companyId);if(t[o.teams].length)for(b=t[o.teams],g=0,c=b.length;g<c;g++)w=b[g],n.push("t"+w.teamId);t[o.ids]=n}t[o.isFollowing]=this.IsUserInSelection(t[o.ids])},f.prototype.GetResponsibleSummary=function(t,e){var i,n,r,o;return t.length&&e.length?(o=app.loggedInUser.id().toString(),r=l.call(t.map(String),o)>=0,i=e.length,n=i>1&&r?app.tl("You"):e[0],1===i?n:n+" + "+(i-1)+" "+(i>2?app.tl("others"):app.tl("other"))):app.tl("Anyone")},f.prototype.IsUserInSelection=function(t,i){var n,r;return null==i&&(i=app.loggedInUser),i=e.unwrap(i),t=e.unwrap(t),null!=i&&null!=t&&(t=this.ConvertToArray(t).map(String),n=""+e.unwrap(i.id),l.call(t,n)>=0||(r="c"+e.unwrap(i.companyId),l.call(t,r)>=0||!!e.unwrap(i.teamIds).some(function(e){return function(e){var i;return i="t"+e,l.call(t,i)>=0}}())))},f.prototype.createOffsetDayOptions=function(t){return function(t,e){var i,n,r;for(null==t&&(t=0),null==e&&(e=364),n=[],i=t;i<=e;)r={id:i,text:app.tl("Day [_s]",i+1)},n.push(r),i++;return n}}(),f.prototype.GetRepeatText=function(t){return function(t){var i,n,r,o,s;switch(null==t&&(t={}),i=e.unwrap(null==(n=t.isRepeating)||n),s=i?e.unwrap(t.repeatUnit):"never",o=e.unwrap(null!=(r=t.repeatPeriod)?r:1),s){case"day":return 1===o?app.tl("Daily"):app.tl("Every [_s] days",o);case"week":return 1===o?app.tl("Weekly"):app.tl("Every [_s] weeks",o);case"month":return 1===o?app.tl("Monthly"):app.tl("Every [_s] months",o);case"year":return 1===o?app.tl("Yearly"):app.tl("Every [_s] years",o);case"never":return app.tl("Never");case"custom":return app.tl("Custom")}}}(),f.prototype.GetNotificationMediumText=function(t){return function(t){switch(t=e.unwrap(t),t.toLowerCase()){case"email":return app.tl("Email");case"sms":return app.tl("SMS");case"push":return app.tl("Mobile Push")}}}(),f.prototype.generateRandomNumericID=function(){return parseInt(Math.random()*Math.pow(100,10),10)},f.prototype.normalizeWorkingHours=function(t){return function(t){var i,n,r,o,s,u,p,d,h,f,m;o=[],n={monday:0,tuesday:1,wednesday:2,thursday:3,friday:4,saturday:5,sunday:6};for(p in t)a.call(t,p)&&(m=t[p],l.call(Object.keys(n),p)>=0&&(r=app.tl(app.utility.Capitalize(p)),i={name:r,firstLetter:c.getFirstLetter(r),hours:e.observable(Number(null!=(h=null!=m?m.taskHours:void 0)?h:0)),reference:p},o[n[p]]=i));if(null!=(f=app.loggedInUser)?f.localization.startOnSunday():void 0)for(s=u=0,d=o.length;u<d;s=++u)i=o[s],"sunday"===i.reference.toLowerCase().trim()&&(o.splice(s,1),o.unshift(i));return o}}(),f.prototype.parseAccessList=function(t){return function(t){var e,i,n,r,o;for(o={companyIdList:[],teamIdList:[],userIdList:[]},t=Array.from(new Set(t)),i=0,n=t.length;i<n;i++)if(~~(e=t[i])>0)o.userIdList.push(~~e);else if("string"==typeof e)switch(r=e[0],e=~~e.substring(1),r){case"u":o.userIdList.push(e);break;case"c":o.companyIdList.push(e);break;case"t":o.teamIdList.push(e)}return o}}(),f}.apply(e,o))&&(t.exports=s)}).call(e,i(245),i(245))},1166:function(t,e,i){(function(e,i){var n,n;!function(e){t.exports=e()}(function(){return function t(e,i,r){function o(a,l){if(!i[a]){if(!e[a]){var c="function"==typeof n&&n;if(!l&&c)return n(a,!0);if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var p=i[a]={exports:{}};e[a][0].call(p.exports,function(t){var i=e[a][1][t];return o(i||t)},p,p.exports,t,e,i,r)}return i[a].exports}for(var s="function"==typeof n&&n,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,i){"use strict";function n(t){var e=s[t];return e?e.lastIndex=0:s[t]=e=new RegExp(a+t+l,"g"),e}function r(t,e){var i=t.className;i.length?n(e).test(i)||(t.className+=" "+e):t.className=e}function o(t,e){t.className=t.className.replace(n(e)," ").trim()}var s={},a="(?:^|\\s)",l="(?:\\s|$)";e.exports={add:r,rm:o}},{}],2:[function(t,i,n){(function(e){"use strict";function n(t,e){function i(t){return-1!==ct.containers.indexOf(t)||lt.isContainer(t)}function n(t){var e=t?"remove":"add";r(T,e,"mousedown",I),r(T,e,"mouseup",D)}function a(t){r(T,t?"remove":"add","mousemove",_)}function m(t){var e=t?"remove":"add";w[e](T,"selectstart",C),w[e](T,"click",C)}function y(){n(!0),D({})}function C(t){st&&t.preventDefault()}function I(t){if(tt=t.clientX,et=t.clientY,!(1!==o(t)||t.metaKey||t.ctrlKey)){var e=t.target,i=S(e);i&&(st=i,a(),"mousedown"===t.type&&(f(e)?e.focus():t.preventDefault()))}}function _(t){if(st){if(0===o(t))return void D({});if(void 0===t.clientX||t.clientX!==tt||void 0===t.clientY||t.clientY!==et){if(lt.ignoreInputTextSelection){var e=v("clientX",t),i=v("clientY",t);if(f(x.elementFromPoint(e,i)))return}var n=st;a(!0),m(),M(),P(n);var r=s(K);J=v("pageX",t)-r.left,Z=v("pageY",t)-r.top,k.add(rt||K,"gu-transit"),Y(),B(t)}}}function S(t){if(!(ct.dragging&&X||i(t))){for(var e=t;h(t)&&!1===i(h(t));){if(lt.invalid(t,e))return;if(!(t=h(t)))return}var n=h(t);if(n&&!lt.invalid(t,e)){if(lt.moves(t,n,e,g(t)))return{item:t,source:n}}}}function A(t){return!!S(t)}function O(t){var e=S(t);e&&P(e)}function P(t){q(t.item,t.source)&&(rt=t.item.cloneNode(!0),ct.emit("cloned",rt,t.item,"copy")),Q=t.source,K=t.item,it=nt=g(t.item),ct.dragging=!0,ct.emit("drag",K,Q)}function E(){return!1}function M(){if(ct.dragging){var t=rt||K;j(t,h(t))}}function L(){st=!1,a(!0),m(!0)}function D(t){if(L(),ct.dragging){var e=rt||K,i=v("clientX",t),n=v("clientY",t),r=l(X,i,n),o=z(r,i,n);o&&(rt&&lt.copySortSource||!rt||o!==Q)?j(e,o):lt.removeOnSpill?N():F()}}function j(t,e){var i=h(t);rt&&lt.copySortSource&&e===Q&&i.removeChild(K),U(e)?ct.emit("cancel",t,Q,Q):ct.emit("drop",t,e,Q,nt),R()}function N(){if(ct.dragging){var t=rt||K,e=h(t);e&&e.removeChild(t),ct.emit(rt?"cancel":"remove",t,e,Q),R()}}function F(t){if(ct.dragging){var e=arguments.length>0?t:lt.revertOnSpill,i=rt||K,n=h(i),r=U(n);!1===r&&e&&(rt?n&&n.removeChild(rt):Q.insertBefore(i,it)),r||e?ct.emit("cancel",i,Q,Q):ct.emit("drop",i,n,Q,nt),R()}}function R(){var t=rt||K;L(),V(),t&&k.rm(t,"gu-transit"),ot&&clearTimeout(ot),ct.dragging=!1,at&&ct.emit("out",t,at,Q),ct.emit("dragend",t),Q=K=rt=it=nt=ot=at=null}function U(t,e){var i;return i=void 0!==e?e:X?nt:g(rt||K),t===Q&&i===it}function z(t,e,n){for(var r=t;r&&!function(){if(!1===i(r))return!1;var o=G(r,t),s=W(r,o,e,n);return!!U(r,s)||lt.accepts(K,r,Q,s)}();)r=h(r);return r}function B(t){function e(t){ct.emit(t,s,at,Q)}if(X){t.preventDefault();var i=v("clientX",t),n=v("clientY",t),r=i-J,o=n-Z;X.style.left=r+"px",X.style.top=o+"px";var s=rt||K,a=l(X,i,n),c=z(a,i,n),u=null!==c&&c!==at;(u||null===c)&&(function(){at&&e("out")}(),at=c,function(){u&&e("over")}());var p=h(s);if(c===Q&&rt&&!lt.copySortSource)return void(p&&p.removeChild(s));var d,f=G(c,a);if(null!==f)d=W(c,f,i,n);else{if(!0!==lt.revertOnSpill||rt)return void(rt&&p&&p.removeChild(s));d=it,c=Q}(null===d&&u||d!==s&&d!==g(s))&&(nt=d,c.insertBefore(s,d),ct.emit("shadow",s,c,Q))}}function H(t){k.rm(t,"gu-hide")}function $(t){ct.dragging&&k.add(t,"gu-hide")}function Y(){if(!X){var t=K.getBoundingClientRect();X=K.cloneNode(!0),X.style.width=p(t)+"px",X.style.height=d(t)+"px",k.rm(X,"gu-transit"),k.add(X,"gu-mirror"),lt.mirrorContainer.appendChild(X),r(T,"add","mousemove",B),k.add(lt.mirrorContainer,"gu-unselectable"),ct.emit("cloned",X,K,"mirror")}}function V(){X&&(k.rm(lt.mirrorContainer,"gu-unselectable"),r(T,"remove","mousemove",B),h(X).removeChild(X),X=null)}function G(t,e){for(var i=e;i!==t&&h(i)!==t;)i=h(i);return i===T?null:i}function W(t,e,i,n){function r(t){return t?g(e):e}var o="horizontal"===lt.direction;return e!==t?function(){var t=e.getBoundingClientRect();return r(o?i>t.left+p(t)/2:n>t.top+d(t)/2)}():function(){var e,r,s,a=t.children.length;for(e=0;a>e;e++){if(r=t.children[e],s=r.getBoundingClientRect(),o&&s.left+s.width/2>i)return r;if(!o&&s.top+s.height/2>n)return r}return null}()}function q(t,e){return"boolean"==typeof lt.copy?lt.copy:lt.copy(t,e)}1===arguments.length&&!1===Array.isArray(t)&&(e=t,t=[]);var X,Q,K,J,Z,tt,et,it,nt,rt,ot,st,at=null,lt=e||{};void 0===lt.moves&&(lt.moves=u),void 0===lt.accepts&&(lt.accepts=u),void 0===lt.invalid&&(lt.invalid=E),void 0===lt.containers&&(lt.containers=t||[]),void 0===lt.isContainer&&(lt.isContainer=c),void 0===lt.copy&&(lt.copy=!1),void 0===lt.copySortSource&&(lt.copySortSource=!1),void 0===lt.revertOnSpill&&(lt.revertOnSpill=!1),void 0===lt.removeOnSpill&&(lt.removeOnSpill=!1),void 0===lt.direction&&(lt.direction="vertical"),void 0===lt.ignoreInputTextSelection&&(lt.ignoreInputTextSelection=!0),void 0===lt.mirrorContainer&&(lt.mirrorContainer=x.body);var ct=b({containers:lt.containers,start:O,end:M,cancel:F,remove:N,destroy:y,canMove:A,dragging:!1});return!0===lt.removeOnSpill&&ct.on("over",H).on("out",$),n(),ct}function r(t,i,n,r){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},s={mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"},a={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"};e.navigator.pointerEnabled?w[i](t,s[n],r):e.navigator.msPointerEnabled?w[i](t,a[n],r):(w[i](t,o[n],r),w[i](t,n,r))}function o(t){if(void 0!==t.touches)return t.touches.length;if(void 0!==t.which&&0!==t.which)return t.which;if(void 0!==t.buttons)return t.buttons;var e=t.button;return void 0!==e?1&e?1:2&e?3:4&e?2:0:void 0}function s(t){var e=t.getBoundingClientRect();return{left:e.left+a("scrollLeft","pageXOffset"),top:e.top+a("scrollTop","pageYOffset")}}function a(t,i){return void 0!==e[i]?e[i]:T.clientHeight?T[t]:x.body[t]}function l(t,e,i){var n,r=t||{},o=r.className;return r.className+=" gu-hide",n=x.elementFromPoint(e,i),r.className=o,n}function c(){return!1}function u(){return!0}function p(t){return t.width||t.right-t.left}function d(t){return t.height||t.bottom-t.top}function h(t){return t.parentNode===x?null:t.parentNode}function f(t){return"INPUT"===t.tagName||"TEXTAREA"===t.tagName||"SELECT"===t.tagName||m(t)}function m(t){return!!t&&("false"!==t.contentEditable&&("true"===t.contentEditable||m(h(t))))}function g(t){return t.nextElementSibling||function(){var e=t;do{e=e.nextSibling}while(e&&1!==e.nodeType);return e}()}function y(t){return t.targetTouches&&t.targetTouches.length?t.targetTouches[0]:t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t}function v(t,e){var i=y(e),n={pageX:"clientX",pageY:"clientY"};return t in n&&!(t in i)&&n[t]in i&&(t=n[t]),i[t]}var b=t("contra/emitter"),w=t("crossvent"),k=t("./classes"),x=document,T=x.documentElement;i.exports=n}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./classes":1,"contra/emitter":5,crossvent:6}],3:[function(t,e,i){e.exports=function(t,e){return Array.prototype.slice.call(t,e)}},{}],4:[function(t,e,i){"use strict";var n=t("ticky");e.exports=function(t,e,i){t&&n(function(){t.apply(i||null,e||[])})}},{ticky:9}],5:[function(t,e,i){"use strict";var n=t("atoa"),r=t("./debounce");e.exports=function(t,e){var i=e||{},o={};return void 0===t&&(t={}),t.on=function(e,i){return o[e]?o[e].push(i):o[e]=[i],t},t.once=function(e,i){return i._once=!0,t.on(e,i),t},t.off=function(e,i){var n=arguments.length;if(1===n)delete o[e];else if(0===n)o={};else{var r=o[e];if(!r)return t;r.splice(r.indexOf(i),1)}return t},t.emit=function(){var e=n(arguments);return t.emitterSnapshot(e.shift()).apply(this,e)},t.emitterSnapshot=function(e){var s=(o[e]||[]).slice(0);return function(){var o=n(arguments),a=this||t;if("error"===e&&!1!==i.throws&&!s.length)throw 1===o.length?o[0]:o;return s.forEach(function(n){i.async?r(n,o,a):n.apply(a,o),n._once&&t.off(e,n)}),t}},t}},{"./debounce":4,atoa:3}],6:[function(t,i,n){(function(e){"use strict";function n(t,e,i,n){return t.addEventListener(e,i,n)}function r(t,e,i){return t.attachEvent("on"+e,c(t,e,i))}function o(t,e,i,n){return t.removeEventListener(e,i,n)}function s(t,e,i){var n=u(t,e,i);return n?t.detachEvent("on"+e,n):void 0}function a(t,e,i){var n=-1===h.indexOf(e)?function(){return new d(e,{detail:i})}():function(){var t;return f.createEvent?(t=f.createEvent("Event"),t.initEvent(e,!0,!0)):f.createEventObject&&(t=f.createEventObject()),t}();t.dispatchEvent?t.dispatchEvent(n):t.fireEvent("on"+e,n)}function l(t,i,n){return function(i){var r=i||e.event;r.target=r.target||r.srcElement,r.preventDefault=r.preventDefault||function(){r.returnValue=!1},r.stopPropagation=r.stopPropagation||function(){r.cancelBubble=!0},r.which=r.which||r.keyCode,n.call(t,r)}}function c(t,e,i){var n=u(t,e,i)||l(t,e,i);return y.push({wrapper:n,element:t,type:e,fn:i}),n}function u(t,e,i){var n=p(t,e,i);if(n){var r=y[n].wrapper;return y.splice(n,1),r}}function p(t,e,i){var n,r;for(n=0;n<y.length;n++)if(r=y[n],r.element===t&&r.type===e&&r.fn===i)return n}var d=t("custom-event"),h=t("./eventmap"),f=e.document,m=n,g=o,y=[];e.addEventListener||(m=r,g=s),i.exports={add:m,remove:g,fabricate:a}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./eventmap":7,"custom-event":8}],7:[function(t,i,n){(function(t){"use strict";var e=[],n="",r=/^on/;for(n in t)r.test(n)&&e.push(n.slice(2));i.exports=e}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(t,i,n){(function(t){var e=t.CustomEvent;i.exports=function(){try{var t=new e("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?e:"function"==typeof document.createEvent?function(t,e){var i=document.createEvent("CustomEvent");return e?i.initCustomEvent(t,e.bubbles,e.cancelable,e.detail):i.initCustomEvent(t,!1,!1,void 0),i}:function(t,e){var i=document.createEventObject();return i.type=t,e?(i.bubbles=Boolean(e.bubbles),i.cancelable=Boolean(e.cancelable),i.detail=e.detail):(i.bubbles=!1,i.cancelable=!1,i.detail=void 0),i}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(t,e,n){var r;r="function"==typeof i?function(t){i(t)}:function(t){setTimeout(t,0)},e.exports=r},{}]},{},[2])(2)})}).call(e,i(28),i(403).setImmediate)},1167:function(t,e,i){var n,r,o=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};n=[i(164),i(245),i(1166),i(1709)],void 0!==(r=function(t,e,i,n){return t.bindingHandlers.twDragula={init:function(r,s,a,l,c){var u,p,d,h,f,m,g,y,v,b,w,k,x,T,C,I;if(d=[r],v=s(),null!=v.targetClass)for(I=n.from(document.getElementsByClassName(v.targetClass)),w=0,k=I.length;w<k;w++)y=I[w],d.push(y);x="",null!=v.itemType&&(x=function(){switch(v.itemType){case"project":return"projects";case"message":case"post":return"projectMessage";case"task":return"tasks";case"file":return"files";default:return v.itemType}}()),u=null!=(T=v.allowMultiple)&&T,b=null!=(C=v.itemIds)?C:[],p=null,f=function(t){return function(){var t,e,i;return i=".gu-mirror",null!=(t=document.querySelector(i))&&(e=t.getBoundingClientRect(),e.top<=0&&window.scrollY>0?window.scrollTo(0,window.scrollY-1):void 0)}}(),h=function(t){return function(){var t,e,i;return i=".gu-mirror",null!=(t=document.querySelector(i))&&(e=t.getBoundingClientRect(),e.bottom>=window.innerHeight&&window.scrollY+window.innerHeight<document.body.scrollHeight?window.scrollTo(0,window.scrollY+1):void 0)}}(),m=function(t){return function(t){var e,i;return e=document.querySelector(".gu-mirror"),i=e.getBoundingClientRect(),i.bottom>=window.innerHeight?(null!=p&&clearInterval(p),p=setInterval(h,0)):i.top<=0&&window.scrollY>0?(null!=p&&clearInterval(p),p=setInterval(f,0)):i.bottom<window.innerHeight&&i.top>0&&null!=p?clearInterval(p):void 0}}(),g=i(d,{isContainer:function(t){return t.classList.contains(v.targetClass)},invalid:function(t,e){return t.classList.contains("no-drag")||null!=v.canDrag&&!v.canDrag},moves:function(t,e,i){return null!=v.dragHandle&&i.classList.contains(v.dragHandle)||null==v.dragHandle&&null!=v.canDrag&&v.canDrag},copy:null==(null!=v?v.canMove:void 0)||!v.canMove}).on("drag",function(t){document.addEventListener("mousemove",m),null!=v.showAlert&&v.showAlert&&app.ko.postbox.publish(v.itemType+"s-update-drag-alert",!0)}).on("cloned",function(t,i,n){if(null!=v.clearDragulaStyling&&v.clearDragulaStyling&&e(t).removeAttr("style"),null!=v.dragClass&&v.dragClass&&e(t).addClass(v.dragClass),null!=v.onCloned)return v.onCloned(t)}).on("dragend",function(t){return null!=v.showAlert&&v.showAlert&&app.ko.postbox.publish(v.itemType+"s-update-drag-alert",!1),null!=p&&clearInterval(p),document.removeEventListener("mousemove",m)}).on("drop",function(i,n,r,s){var a,c,p,d,h,f,m;null!=v.debugDrop&&v.debugDrop&&(e(i).css("top",e(r).offset().top+"px").css("left",e(r).offset().left+300+"px").addClass("gu-mirror"),e("body").append(i)),null!==i&&null!==n&&null!=i.dataset&&null!=n.dataset&&(p=parseInt(i.dataset.id,10),c=i.dataset.category,m=isNaN(parseInt(n.dataset.id,10))?-1:parseInt(n.dataset.id,10),null!=v.itemType&&null!=m&&(l={},l[v.itemType]={},l[v.itemType]["category-id"]=m,"file"===v.itemType&&(l[v.itemType].pendingFileRef=""),"notebook"===v.itemType&&l.notebook&&(l.notebook["new-version"]=!1),c!==n.dataset.id?(f=t.unwrap(b),a=u&&f.length>1&&o.call(f,p)>=0,0===parseInt(m,10)&&(m=-1),a?(d=f.join(),h=app.api.put(v.itemType+"s/drop.json",{dragIdList:d,dropId:m,dropType:"category"})):h=app.api.put(v.itemType+"s/"+p+".json",l),h.then(function(t){return function(t){var e;return"OK"!==t.response.STATUS?app.flash.Error(app.tl("Oops! Something went wrong, please try again")):(app.flash.Success(app.tl("[_s] category updated",v.itemType.charAt(0).toUpperCase()+v.itemType.substr(1))),e={eventTime:new Date,itemType:x,actionType:app.consts.ACTIONTYPE.UPDATED,itemId:p,subType:"droppedCategory",projectId:app.currentRoute().projectId,extraInfo:{isMultiple:a,itemIds:f}},app.ko.postbox.publish("allTWEvents",e),null!=v.cancelOnDrop&&v.cancelOnDrop?g.cancel(!0):void 0)}}())):app.flash.Info(app.tl("The [_s] is already in this category",v.itemType))),e(i).remove(),n.classList.remove("catListDragHover"))}).on("over",function(t,e){null!=v.targetClass&&e.classList.contains(v.targetClass)&&e.classList.add("catListDragHover")}).on("out",function(t,e){e.classList.remove("catListDragHover")}),t.utils.domNodeDisposal.addDisposeCallback(r,function(t){return function(){g.destroy()}}())}}}.apply(e,n))&&(t.exports=r)},1168:function(t,e,i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}};n=[i(164)],void 0!==(r=function(t){return function(){function e(e){var i,n,r,s;s=e.type,r=e.timeRangeOptions,n=e.projectId,i=e.params,this.openQuickView=o(this.openQuickView,this),this.updateParams=o(this.updateParams,this),this.type=s,this.projectId=n||0,this.params=i||{},this.selectedUser={id:t.observable(app.loggedInUser.id().toString()),text:t.observable(app.tl("Mine"))},this.subscriptions=[],this.selectedTimeUser={id:t.observable(app.loggedInUser.id().toString()),text:t.observable(app.tl("Mine"))},this.useStartDatesForTodaysTasks=app.loggedInUser.preferences.useStartDatesForTodaysTasks,this.timeRangeOptions=null!=r?r:[{id:"anytime",text:app.tl("Anytime")},{id:"today",text:app.tl("Today")},{id:"yesterday",text:app.tl("Yesterday")},{id:"thisweek",text:app.tl("This week [_s]",app.utility.GetWeekText())},{id:"lastweek",text:app.tl("Last week [_s]",app.utility.GetWeekText())},{id:"thismonth",text:app.tl("This month")},{id:"lastmonth",text:app.tl("Last month")},{id:"last3months",text:app.utility.GetLastMonthsText(3)},{id:"last6months",text:app.utility.GetLastMonthsText(6)}]}return e.prototype.updateParams=function(t,e){var i;return null==t&&(t={}),null==e&&(e=!1),i={},e&&(i=this.params),this.params=Object.assign(i,t)},e.prototype.openQuickView=function(e,i){var n,r,o,s,a,l,c,u,p,d,h,f,m,g,y,v,b,w,k,x,T,C,I;if(null==e&&(e=""),null==i&&(i={}),C=Object.assign({who:null,isMe:!1,projectId:this.projectId,selectedTimeRange:"thisweek",type:this.type,filteredUserName:"",eventsDaysAhead:30},i),I=C.who,c=C.isMe,b=C.selectedTimeRange,h=C.projectId,o=C.filterType,T=C.type,a=C.filteredUserName,r=C.eventsDaysAhead,u=!!I&&"0,-1"!==I,d=Object.assign({projectId:h},this.params),p=null,w=null!=(g=this.timeRangeOptions.find(function(t){return function(t){return t.id===b}}()))?g.text:void 0,null==o&&(o=function(){switch(e.toLowerCase()){case"noninvoiced":return app.tl("Unbilled");case"invoiced":return app.tl("Billed");case"billable":return app.tl("Billable");case"nonbillable":return app.tl("Non-Billable");default:return app.tl(app.utility.Capitalize(e))}}()),null!=I&&(d.responsiblePartyIds=I),"tasks"===T)d.id=I,d.today=C.today||moment().startOf("day").format("YYYYMMDD"),d.filterType=e,d.showProjectHeaders=!0,"estimated"===e&&(d.title=u?""+(c?app.tl("My Estimated Tasks"):app.tl("Estimated Tasks for [_s]",a)):app.tl("All Estimated Tasks"),d.sortType=app.loggedInUser.preferences.projectSummaryTasksSort,d.onlyTasksWithEstimatedTime=!0,d.filterType="anytime",d.includeToday=1),"late"===e?(d.title=u?""+(c?app.tl("My Late Tasks"):app.tl("Late Tasks for [_s]",a)):app.tl("All Late Tasks"),d.sortType=app.loggedInUser.preferences.projectSummaryTasksSort,d.filterType="overdue",d.includeToday=1):"today"===e?(d.title=u?""+(c?app.tl("My Tasks for Today"):app.tl("Today's Tasks for [_s]",a)):app.tl("All Today's Tasks"),d.sortType=app.loggedInUser.preferences.projectSummaryTasksSort,d.includeToday=1,d.useStartDatesForTodaysTasks=this.useStartDatesForTodaysTasks):"active"===e?(d.title=u?""+(c?app.tl("My Active Tasks"):app.tl("Active Tasks for [_s]",a)):app.tl("All Active Tasks"),d.sortType=app.loggedInUser.preferences.projectSummaryTasksSort,d.includeToday=1,d.useStartDatesForTodaysTasks=this.useStartDatesForTodaysTasks):"upcoming"===e?(d.title=u?""+(c?app.tl("My Upcoming Tasks"):app.tl("Upcoming Tasks for [_s]",a)):app.tl("All Upcoming Tasks"),d.filterType="within14",d.sortType=app.loggedInUser.preferences.projectSummaryTasksSort,d.includeToday=0,d.useStartDatesForTodaysTasks=this.useStartDatesForTodaysTasks):"started"===e?(d.title=u?""+(c?app.tl("My Started Tasks"):app.tl("Started Tasks for [_s]",a)):app.tl("All Started Tasks"),d.sortType=app.loggedInUser.preferences.projectSummaryTasksSort,d.includeToday=1,d.useStartDatesForTodaysTasks=!1):"nodate"===e?(d.title=u?""+(c?app.tl("My Undated Tasks"):app.tl("Undated Tasks for [_s]",a)):app.tl("All Undated Tasks"),d.sortType=app.loggedInUser.preferences.projectSummaryTasksSort,d.includeToday=0,d.useStartDatesForTodaysTasks=!1):"createdSince"===e?(d.title=app.tl("Tasks Created [_s]",w),d.filterType="created",d.sortType=app.loggedInUser.preferences.projectSummaryTasksCreatedSort,d.includeToday=0,d.useStartDatesForTodaysTasks=!1,m=app.utility.GetDatesFromRange(b,"YYYY-MM-DDTHH:mm:ssZ"),l=m.startDate,x=m.endDate,d.date=l):"completedSince"===e?(d.title=app.tl("Tasks Completed [_s]",w),d.filterType="completed",d.sortType=app.loggedInUser.preferences.projectSummaryTasksCreatedSort,d.includeToday=0,d.useStartDatesForTodaysTasks=!1,m=app.utility.GetDatesFromRange(b,"YYYY-MM-DDTHH:mm:ssZ"),l=m.startDate,x=m.endDate,d.date=l):"completed"===e?(d.title=u?""+(c?app.tl("My Completed Tasks"):app.tl("Completed Tasks for [_s]",a)):app.tl("All Completed Tasks"),d.sortType=app.loggedInUser.preferences.projectSummaryTasksCompletedSort,d.includeToday=0,d.useStartDatesForTodaysTasks=!1,d.showBulkEdit=!1):"anytime"===e&&(0===parseInt(d.id,10)&&""===a.trim()?d.title=app.tl("All Unassigned Tasks"):d.title=u?""+(c?app.tl("My Active Tasks"):app.tl("All Tasks for [_s]",a)):app.tl("All Active Tasks"),d.sortType=app.loggedInUser.preferences.projectSummaryTasksSort,d.includeToday=0,d.useStartDatesForTodaysTasks=!1);else if("milestones"===T){if(f="",u)if(c)switch(e){case"today":f=app.tl("My Milestones Due Today");break;default:f=app.tl("My [_s] Milestones",o)}else f=app.tl("[_s] Milestones for [_s]",o,a);else f=app.tl("All [_s] Milestones",o);d.includeToday="upcoming"!==e,d=Object.assign(d,{id:null==I?"":this.selectedUser.id(),title:f,mode:"everything",tab:e,userId:null==I?"":I,userFullName:"",currentPage:"summary",isQuickView:!0,showProjectTitle:!0,sharedKey:null==I?"projectSummaryMilestones":"personMilestones",quickViewUseFilterId:null!=I})}else"time"===T?(k="",moment().startOf("day"),"noninvoiced"===o?o=app.tl("Unbilled"):"invoiced"===o&&(o=app.tl("Billed")),k=u?c?app.tl("My [_s] Time",o):app.tl("[_s] Time for [_s]",o,a):app.tl("All [_s] Time",o),k+=" &mdash; "+w,m=app.utility.GetDatesFromRange(b,"YYYYMMDD"),l=m.startDate,x=m.endDate,d=Object.assign(d,{id:I,title:k,isQuickView:!0,type:T,userId:""===I?0:I,fromDate:l,toDate:x,billableType:"billable"===e||"nonbillable"===e?e:"all",invoicedType:"invoiced"===e||"noninvoiced"===e?e:"all"}),"invoiced"!==e&&"noninvoiced"!==e||(d.billableType="billable")):"risks"===T?(f=u?c?app.tl("My [_s] Risks",o):app.tl("[_s] Risks for [_s]",o,a):app.tl("All [_s] Risks",o),d=Object.assign(d,{id:I,title:f,isQuickView:!0,type:T,modifierClass:"wide",showOpenRisks:"new"===e||"open"===e,showPendingRisks:"pending"===e,showClosedRisks:"closed"===e})):"projectHealth"===T?(f=app.tl("Projects [_s]","("+app.tl("Health: [_s]",o)+")"),d=Object.assign(d,{title:f,sortBy:"name",sortOrder:"asc",projectHealth:[e],isQuickView:!0})):"messages"===T?(null!=d.timeRange&&null!=d.applySinceOnUnread&&d.applySinceOnUnread&&(n=app.utility.GetDatesFromRange(d.timeRange,"YYYYMMDD"),d.publishedStartDate=n.startDate,d.publishedEndDate=moment().format("YYYYMMDD")),d=Object.assign(d,{title:app.tl("Unread Messages & Replies"),isQuickView:!0,blankSlateTitle:app.tl("No Unread Messages"),blankSlateMsg:app.tl("You have no matching unread messages."),useFilter:!1,showOnlyMyNotifications:null==(y=d.unreadMessagesMineOnly)||y,showFilter:t.unwrap(this.projectId)/1!=0,publishedStartDate:d.publishedStartDate,sortBy:"dateposted",sortOrder:"desc"})):"comments"===T?(null!=d.timeRange&&null!=d.applySinceOnUnread&&d.applySinceOnUnread&&(n=app.utility.GetDatesFromRange(d.timeRange,"YYYYMMDD"),d.publishedStartDate=n.startDate,d.publishedEndDate=moment().format("YYYYMMDD")),d=Object.assign(d,{title:app.tl("Unread Comments"),isQuickView:!0,type:"projects",sortMode:t.observable("desc"),showBlankState:!0,blankSlateTitle:app.tl("No Unread Comments"),blankSlateText:app.tl("You have no matching unread comments."),useFilter:!1,commentStatus:"unread",showOnlyMyNotifications:null==(v=d.unreadCommentsMineOnly)||v,showFilter:t.unwrap(this.projectId)/1!=0,publishedStartDate:d.publishedStartDate})):"events"===T&&(T="events-new",s="","upcoming"===o&&(s=app.tl("Upcoming")),f=u?c?"today"===e?app.tl("My Events For Today"):app.tl("My [_s] Events",s):"today"===e?app.tl("Today's Events for [_s]",a):app.tl("[_s] Events for [_s]",s,a):app.tl("All [_s] Events",s),null!=d.title&&(f=d.title),d.userId=u?I:null,d.startDate=moment().startOf("day"),d.endDate="today"===o?moment().endOf("day"):"upcoming"===o?moment().add(r,"days").endOf("day"):void 0,null!=d.eventsDaysAhead&&(d.endDate=moment().add(d.eventsDaysAhead,"days").endOf("day")),d.eventsAttendingOnly&&(d.attendingOnly=d.eventsAttendingOnly,d.userId=app.loggedInUser.id()),d=Object.assign(d,{title:f,isQuickView:!0,type:T}));app.quickView.show(T,d,p)},e.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},e}()}.apply(e,n))&&(t.exports=r)},1174:function(t,e,i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function i(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=[i(164),i(1134),i(4472),i(1933)],void 0!==(r=function(t,e,i,n){return function(e){function r(e){this.SyncIds=o(this.SyncIds,this),this.GetAllData=o(this.GetAllData,this),this.GetQueryTokens=o(this.GetQueryTokens,this),this.GetQueryBeforeCaret=o(this.GetQueryBeforeCaret,this);var n;r.__super__.constructor.call(this,e),this.empty=null!=(n=e.empty)&&n,console.assert("boolean"==typeof t.unwrap(this.empty)),this.mapViewIdItems={},this.pageSize=50,this.numCompanies=t.observable(0),this.doApiSearch=t.observable(!1),this.selectedCompanyIds=e.selectedCompanyIds,console.assert(null==this.selectedCompanyIds||t.isObservable(this.selectedCompanyIds)&&Array.isArray(this.selectedCompanyIds())),this.subscriptions.push(this.companies=i.getCompanies({empty:this.empty,searchTerm:this.fullQuery,doApiSearch:this.doApiSearch,pageSize:this.pageSize})),this.subscriptions.push(this.companies.subscribe(function(t){return function(e){return t.numCompanies()!==e.length&&""===t.fullQuery()&&0!==e.length&&t.doApiSearch(e.length>=t.pageSize),t.numCompanies(e.length),t.dataLoader(e.dataLoader)}}(this))),this.SyncIds(this.selectedCompanyIds,this.selectedItems)}return s(r,e),r.prototype.defaultType="company",r.prototype.order=app.consts.AUTO_COMPLETE_ORDER.COMPANY,r.prototype.excludeSelected=!0,r.prototype.GetQueryBeforeCaret=function(){var t,e;return null!=(t=null!=(e=/(?:^|\s)(\([^(\n\r]{0,15})$/.exec(this.fullQueryBeforeCaret()))?e[1]:void 0)?t:null},r.prototype.GetQueryAfterCaret=function(){return""},r.prototype.GetQueryTokens=function(){var t;return t=this.query(),null==t?null:t.slice(1).trim().toLowerCase().split(/\s+/)},r.prototype.GetAllData=function(){return this.NormalizeData(this.companies().map(this.CompanyToItem))},r.prototype.SyncIds=function(e,i){this.ManageView(e,i,{map:function(t){return t.id},mapViewItem:function(e){return function(i){var r,o,s;return i in e.mapViewIdItems&&!t.isObservable(e.mapViewIdItems[i])?e.mapViewIdItems[i]:(s=null!=(r=e.mapViewIdItems)[i]?r[i]:r[i]=n.getCompany(i),o=s(),o.ready?(s.dispose(),e.mapViewIdItems[i]=null!=o.error?null:e.NormalizeDataItem(e.CompanyToItem(o))):void 0)}}(this)})},r.prototype.CompanyToItem=function(t){return{id:parseInt(t.id,10),label:t.name,value:t.name.trim().toLowerCase(),suggestionTemplate:'<span class="mr">{{label}}</span>',_ref:t}},r}(e)}.apply(e,n))&&(t.exports=r)},1175:function(t,e,i){(function(n){var r,o,s=function(t,e){return function(){return t.apply(e,arguments)}},a={}.hasOwnProperty,l=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};r=[i(164),i(14),i(1117)],void 0!==(o=function(t,e,i){var r,o,c,u,p;return c={update:function(t){return function(t){return t.parent instanceof o?parseInt(t.data,10)||0:t.data}}()},u={update:function(e){return function(e){var i,n,r,o;n={},r=e.data;for(i in r)o=r[i],Array.isArray(o)?n[i]=t.observableArray(o):n[i]=t.observable(o);return n}}()},p={id:c,projectId:c,userId:c,displayOrder:c,parameters:u,ignore:["fulldata"]},r=["customFields"],o=function(){function o(e,i){var n;null==i&&(i={}),this.dispose=s(this.dispose,this),this._getClone=s(this._getClone,this),this._getSections=s(this._getSections,this),this._buildSubscriptions=s(this._buildSubscriptions,this),this._resetToOriginalUniqueValues=s(this._resetToOriginalUniqueValues,this),this._clearProjectSpecificValues=s(this._clearProjectSpecificValues,this),this.UpdateSelectedFilterList=s(this.UpdateSelectedFilterList,this),this.UpdatePrivateFilterProperties=s(this.UpdatePrivateFilterProperties,this),this.Delete=s(this.Delete,this),this.Share=s(this.Share,this),this.Save=s(this.Save,this),this.Copy=s(this.Copy,this),this.ClearDefault=s(this.ClearDefault,this),this.ResetTemporaryFilter=s(this.ResetTemporaryFilter,this),this.getSerializedParameters=s(this.getSerializedParameters,this),this.SaveDefault=s(this.SaveDefault,this),this.Edit=s(this.Edit,this),this.ClearSharedFilterURL=s(this.ClearSharedFilterURL,this),this.ResetValue=s(this.ResetValue,this),this.Clear=s(this.Clear,this),this.subscriptions=[],this.id=t.observable(0),this.title=t.observable(""),this.description=t.observable(""),this.color=t.observable(""),this.section=t.observable(""),this.projectId=t.observable(0),this.userId=t.observable(0),this.deleted=t.observable(!1),this.isTemporary=t.observable(!0),this.shared=t.observable(!1),this.isProjectSpecific=t.observable(!1),this.includesSort=t.observable(!1),this.displayOrder=t.observable(0),this.shareLink=t.observable(""),this.cloneId=t.observable(0),this.cloneShareLink=t.observable(""),this.selectedFilterList=t.observableArray([]),this.sections=t.observable([]).extend({rateLimit:0}),this.parameters={},this.privateParameters={},this.ignoredParameters={},this._previousProperties={},this.fulldata=null!=(n=e.fulldata)?n:{},""!==e.title||e.isTemporary||(e.title=app.tl("Saved filter")),t.mapping.fromJS(e,p,this),window.validFilters||app.flash.Info(app.tl("There was an issue loading your saved filters. If this persists, please contact [_s].","support@teamwork.com")),app.filterConfig.buildParameters(this.section(),{parameters:this.parameters,privateParameters:this.privateParameters,ignoredParameters:this.ignoredParameters}),this.uniqueId="savedFilter-"+Date.now(),this.collapsedCacheKey=this.section()+"CollapsedFilters",this.orderPreferenceName=this.section()+"FiltersOrder",this._shouldValidateValue=function(t){return function(e,i){var n,r,o,s,a,l;if(n=app.filterConfig.config[t.section()].parameters,r=null!=n.dateCode,s="dateCode"===e||"startDate"===e||"endDate"===e||"createdAfterDate"===e||"createdBeforeDate"===e||"dateCustomInterval"===e||"createdDateCustomInterval"===e||"publishedStartDate"===e||"publishedEndDate"===e||"uploadedStartDate"===e||"uploadedEndDate"===e||"activityStartDate"===e||"activityEndDate"===e||"workedOnAfterDateTime"===e||"workedOnBeforeDateTime"===e,"sortBy"===e||"sortOrder"===e)return t.includesSort();if(!(a=n[e])||a.ignoreChanges)return!1;if(r&&s){if("anytime"===t.parameters.dateCode()&&"dateCode"!==e)return!1;if("custom"===t.parameters.dateCode()&&!e.toLowerCase().includes("startdate")&&!e.toLowerCase().includes("enddate"))return!1}if("moment"===a.type){if(o=null!=(l=a.ignoreNull)&&l,(null==i()||"null"===i()._i)&&o)return!1;if(null==i()||!i().isValid())return!1}return!0}}(this),this._isFilterSectionActive=function(t){return function(e,i){return t._shouldValidateValue(e,i)&&!app.utility.AreEqual(i(),i.defaultValue)}}(this)}return o.prototype.Update=function(e){console.assert(!(e instanceof o)),t.mapping.fromJS(e,p,this),app.filterConfig.buildParameters(this.section(),{parameters:this.parameters,privateParameters:this.privateParameters,ignoredParameters:this.ignoredParameters})},o.prototype.SetFilter=function(t,e){var i,n,r,s,l;null==e&&(e=!0),console.assert(t instanceof o),this.shared()&&this.ClearSharedFilterURL(),this.id(t.id()),this.title(t.title()),this.description(t.description()),this.color(t.color()),this.projectId(t.projectId()),this.fulldata=null!=(n=t.fulldata)?n:{},this.shareLink(t.shareLink()),this.isProjectSpecific(t.isProjectSpecific()),this.includesSort(t.includesSort()),this.displayOrder(t.displayOrder()),this.isTemporary(!1),this.shared(!1),r=this.parameters;for(i in r)a.call(r,i)&&(l=r[i],s=t.parameters[i](),l(s),l.originalValue(s),l.notifySubscribers(s,"reset"));this.UpdatePrivateFilterProperties(),e&&this.SaveDefault()},o.prototype.Clear=function(t){var e,i,n;null==t&&(t=!0),this.shared()&&this.ClearSharedFilterURL(),e=this.isTemporary()&&!this.shared(),this.title(""),this.description(""),this.color(""),this.shared(!1),this.selectedFilterList([]),n=this.parameters;for(i in n)a.call(n,i)&&(n[i],this.ResetValue(i));e?this.ResetTemporaryFilter():(t&&!this.shared()&&this.ClearDefault(),this.id(0),this.isTemporary(!0)),this.UpdateSelectedFilterList(),app.ko.postbox.publish("savedFilter-cleared",{uniqueId:this.uniqueId,section:this.section()})},o.prototype.ResetValue=function(t,e){var i;if(this.parameters[t])return i=this.parameters[t],i.defaultValue,e=i.defaultValue,i(e),app.account.isFreeAccount()||i.originalValue(e),i.notifySubscribers(e,"reset")},o.prototype.ClearSharedFilterURL=function(){var t,e,i,n,r;if(null!=(null!=(n=app.currentRoute().queryParams)?n.sf:void 0))return t=app.hasher.getHash(),i=null!=(r=app.currentRoute()["?queryString_"])?r:"",e=t.replace(i,""),"?"===e[e.length-1]&&(e=e.substr(0,e.length-1)),app.hasher.replaceHash(e)},o.prototype.Edit=function(){app.modal.Show("addOrEditSavedFilter",{filter:this})},o.prototype.SaveDefault=function(){var t,e;if(parseInt(this.id(),10)>0)return t=0===this.projectId()?app.projectId():this.projectId(),e={isDefault:!0,section:this.section(),projectId:t,isProjectSpecific:this.isProjectSpecific(),displayOrder:this.displayOrder(),includesSort:this.includesSort(),parameters:{}},app.api.put("me/savedFilters/"+this.id()+".json",{savedFilter:e,updateDefault:!0})},o.prototype.getSerializedParameters=function(i){var n,o,s,c;o=t.toJS(this.parameters),s={};for(n in o)a.call(o,n)&&(c=o[n],(i||"sortBy"!==n&&"sortOrder"!==n)&&(s[n]=Array.isArray(c)?l.call(r,n)>=0?JSON.stringify(c):c.join(","):e.isMoment(c)?c.format("YYYYMMDD"):c));return s},o.prototype.ResetTemporaryFilter=function(){var t,e;if(parseInt(this.id(),10)>0)return t=0===this.projectId()?app.projectId():this.projectId(),e={isDefault:!0,isTemporary:!0,isProjectSpecific:this.isProjectSpecific(),displayOrder:this.displayOrder(),includesSort:!1,section:this.section(),projectId:t,parameters:this.getSerializedParameters(!1)},app.api.put("me/savedFilters/"+this.id()+".json",{savedFilter:e,updateDefault:!0})},o.prototype.ClearDefault=function(){var t,e;if(parseInt(this.id(),10)>0)return t=0===this.projectId()?app.projectId():this.projectId(),e={isDefault:!1,isTemporary:this.isTemporary(),isProjectSpecific:this.isProjectSpecific(),displayOrder:this.displayOrder(),includesSort:this.includesSort(),section:this.section(),projectId:t,parameters:{}},app.api.put("me/savedFilters/"+this.id()+".json",{savedFilter:e,updateDefault:!0})},o.prototype.Copy=function(){var t,e;return e=this.getSerializedParameters(this.includesSort()),t={savedFilterId:this.id(),section:this.section(),projectId:app.projectId(),parameters:e},app.api.post("me/savedFilters/"+this.id()+"/copy.json",t).then(function(t){return function(e){return t.cloneId(parseInt(e.response.id,10)),t.cloneShareLink(e.response.shareLink)}}(this))},o.prototype.Save=function(e){var r,o,s,l,c,u,p,d,h,f,m,g,y,v,b,w,k;return null==e&&(e={}),r=e.saveAsNew?0:this.id(),s=r>0,l=null!=(p=e.isTemporary)&&p,k=!1,this.isTemporary()&&!l&&(k=!0),o=null!=(d=e.includesSort)?d:this.includesSort(),l&&(o=!1),u=t.toJS(this.parameters),b=this.getSerializedParameters(o),v={isDefault:!0,title:app.utility.StripHTML(null!=(h=e.title)?h:this.title()),description:app.utility.StripHTML(null!=(f=e.description)?f:this.description()),color:(null!=(m=e.color)?m:this.color()).replace("#",""),isTemporary:l,isProjectSpecific:null!=(g=e.isProjectSpecific)?g:this.isProjectSpecific(),includesSort:o,displayOrder:null!=(y=e.displayOrder)?y:this.displayOrder(),section:this.section(),projectId:app.projectId(),parameters:b},t.toJSON(v)===t.toJSON(this._previousProperties)?i.resolve():(this._previousProperties=n.extend({},v),s?(w="me/savedFilters/"+r+".json",c="put"):(w="me/savedFilters.json",c="post",app.projectId()>0&&(v.projectId=app.projectId())),app.api[c](w,{savedFilter:v,useRandomColorIfEmpty:"homeDashboard"===this.section()}).then(function(t){return function(e){var i,n,r,o;t.shared()&&t.ClearSharedFilterURL(),s||t.id(parseInt(e.response.id,10)),s||t.shareLink(e.response.shareLink),t.title(v.title),t.color(v.color),t.description(v.description),t.projectId(v.projectId),t.isTemporary(v.isTemporary),t.includesSort(v.includesSort),t.isProjectSpecific(v.isProjectSpecific),null!=(null!=(n=e.response.savedFilter)?n.fulldata:void 0)&&(t.fulldata=e.response.savedFilter.fulldata,t.UpdateSelectedFilterList()),t.displayOrder(v.displayOrder||parseInt(e.response.displayOrder,10)),t.shared(!1),r=t.parameters;for(i in r)a.call(r,i)&&(o=r[i],o.originalValue(u[i]));return app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"savedFilter",extraInfo:{data:{isTemporary:t.isTemporary()}},actionType:k?app.consts.ACTIONTYPE.ADDED:app.consts.ACTIONTYPE.UPDATED,itemId:t.id(),title:t.title(),projectId:t.projectId()})}}(this)))},o.prototype.Share=function(){var t,e;e=!1,t=function(t){return function(){return app.modal.Show("shareFilterAsLink",{filter:t,filterType:"homeDashboard"===t.section()?"dashboard":"filter",sharedFilterId:e?t.cloneId():t.id(),sharedFilterLink:e?t.cloneShareLink():t.shareLink(),onCloseCallBack:function(i){if(e&&!i.filterShared)return app.api.delete("me/savedFilters/"+t.cloneId()+".json",{hardDelete:!0}).then(function(e){return t.cloneId(0),t.cloneShareLink("")})}})}}(this),this.isTemporary()?(e=!0,this.id()>0&&this.Copy().finally(t)):null!=this.edited&&this.edited()>0?app.modal.Show("confirm",{title:app.tl("You Have Unsaved Changes"),text:app.tl("Do you want to share ([_s]) with changes you've made?",this.isTemporary()?app.tl("Untitled"):this.title()),additionalLines:[app.tl("Note - You can share the original saved filter without the changes.")],otherMessage:app.tl("Share Original"),confirmMessage:app.tl("Share Unsaved Filter"),multiChoice:!0,dims:{width:600},callback:function(i){return function(n){if(!n.wasCancelled)return null!=n.Other&&n.Other&&(e=!1,t()),null!=n.OK&&n.OK&&(e=!0,i.id()>0)?i.Copy().finally(t):void 0}}(this)}):this.projectId()!==app.projectId()?(e=!0,this.id()>0&&this.Copy().finally(t)):t()},o.prototype.Delete=function(e){var i,n;return null==e&&(e=!1),n=app.tl("Are you sure?"),i="homeDashboard"===this.section()?app.tl("Are you sure you want to delete this dashboard?"):app.tl("Are you sure you want to delete this saved filter?"),app.modal.Show("confirm",{title:n,text:i,callback:function(i){return function(n){var r;if(!n.wasCancelled)return r={},!0===e&&(r={setNextFilterAsDefault:!0}),app.api.delete("me/savedFilters/"+i.id()+".json",r).then(function(n){var r,o;return r={eventTime:new Date,itemType:"savedFilter",actionType:app.consts.ACTIONTYPE.DELETED,itemId:i.id(),projectId:i.projectId()},i.id(0),i.deleted(!0),i.isTemporary(!0),!0===e&&(null!=(null!=(o=n.response)?o.defaultFilter:void 0)?(i.Update(n.response.defaultFilter),r.extraInfo={data:{newFilter:i}}):i.Clear(!1)),t.postbox.publish("allTWEvents",r)})}}(this)})},o.prototype.Reposition=function(e){return app.api.put("me/savedFilters/"+this.id()+"/reposition.json",{positionAfter:e}).then(function(e){return function(i){var n;return i.response.RESET||e.displayOrder(i.response.displayOrder),n={eventTime:new Date,itemType:i.response.RESET?"savedFilters":"savedFilter",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:e.id(),projectId:e.projectId()},t.postbox.publish("allTWEvents",n)}}(this))},o.prototype.SortCompare=function(t){return this.isProjectSpecific()-t.isProjectSpecific()||-1===this.displayOrder()||this.displayOrder()-t.displayOrder()||this.id()-t.id()},o.prototype.UpdatePrivateFilterProperties=function(){if(this.projectId()!==app.projectId())return this._clearProjectSpecificValues()},o.prototype.UpdateSelectedFilterList=function(e){var n;return null==e&&(e=!1),n=function(t){return function(e){var i,n,r,o,s,a,l,c,u,p,d,h,f,m,g;i=[],null!=(null!=(c=t.parameters)?c.filterText:void 0)&&t.parameters.filterText().length&&i.push({type:"filterText",value:t.parameters.filterText(),label:app.tl("Search Term")}),null!=(null!=(u=t.parameters)?u.priority:void 0)&&"any"!==t.parameters.priority()&&i.push({type:"priority",value:app.serverTranslate(app.utility.Capitalize(t.parameters.priority())),label:app.tl("Priority")});for(l in e){if(e[l],"users"===l&&(f=e.users,a=Object.keys(f),o=a.indexOf(app.loggedInUser.id().toString())>-1,g="",a.length>0&&(g=o&&"-1"!==f[a[0]].id?"You":""+f[a[0]].fullName,a.length>1&&(g+=" + "+(a.length-1)+" "+(a.length>2?app.tl("others"):app.tl("other")))),i.push({type:"assignees",value:g,label:app.tl("Assignees")})),"tasklists"===l&&(h=e.tasklists,a=Object.keys(h),g="",a.length>0&&(g=""+h[a[0]].name,a.length>1&&(g+=" + "+(a.length-1)+" "+(a.length>2?app.tl("others"):app.tl("other")))),i.push({type:"tasklists",value:g,label:app.tl("Task Lists")})),"tags"===l){d=e.tags,m=[];for(s in d)p=d[s],m.push(p.name);i.push({type:"tags",value:m.join(", "),label:app.tl("Tags")})}if("categories"===l){n=e.categories,m=[];for(s in n)r=n[s],m.push(r.name);i.push({type:"categories",value:m.join(", "),label:app.tl("Categories")})}}return t.selectedFilterList(i)}}(this),e?app.api.get("me/savedFilters.json?section="+this.section()+"&includeTemporary=true&fulldata=true").then(function(t){return function(t){var e;if(null!=t.response.savedFilters[0])return e=t.response.savedFilters[0],n(e.fulldata)}}()):(n(t.mapping.toJS(this.fulldata)),i.resolve())},o.prototype._clearProjectSpecificValues=function(){var t,e,i;e=this.privateParameters,i=[];for(t in e)a.call(e,t)&&(e[t],i.push(this.ResetValue(t)));return i},o.prototype._resetToOriginalUniqueValues=function(){var t,e,i,n;e=this.privateParameters,i=[];for(t in e)a.call(e,t)&&(n=e[t],i.push(this.parameters[t](n)));return i},o.prototype._buildSubscriptions=function(){return this.subscriptions.push(this.currentChanges=t.pureComputed(function(t){return function(){var e,i,n,r;e=[],n=t.parameters;for(i in n)a.call(n,i)&&(r=n[i],t._shouldValidateValue(i,r)&&!app.utility.AreEqual(r(),r.originalValue())&&e.push(i));return e}}(this))),this.subscriptions.push(this.edited=t.pureComputed(function(t){return function(){return t.currentChanges().length}}(this))),this.subscriptions.push(this.activeParameters=t.pureComputed(function(t){return function(){var e,i,n,r;e=[],n=t.parameters;for(i in n)a.call(n,i)&&(r=n[i],t._isFilterSectionActive(i,r)&&e.push({name:i,value:r}));return e}}(this))),this.subscriptions.push(this.active=t.pureComputed(function(t){return function(){return t.activeParameters().length>0}}(this)))},o.prototype._getSections=function(){var e,i,n,r,o,s,a,l;if(!this.sections().length){for(s=function(t){return function(e){var i,n,r,o,s;for(o=e.parameters,s=[],i=0,n=o.length;i<n;i++)r=o[i],s.push(t.ResetValue(r));return s}}(this),l=function(t){return function(e){var i;e.collapsed(!e.collapsed()),app.cache.set(t.collapsedCacheKey,function(){var t,e,n,r;for(n=this.sections(),r=[],t=0,e=n.length;t<e;t++)i=n[t],i.collapsed()&&r.push(i.type);return r}.call(t))}}(this),n=function(t){var e,i,n,r;for(e=0,i=t.length;e<i;e++)if(n=t[e],r=this.parameters[n],this._isFilterSectionActive(n,r))return!0;return!1},e=null!=(o=app.filterConfig.createSections(this.section()))?o:[],i=0,r=e.length;i<r;i++)a=e[i],a.toggleCollapsed=l,a.active=t.pureComputed(n.bind(this,a.parameters)),a.reset=s;return this.sections(e)}},o.prototype._getClone=function(){var e,i,n;return n=t.toJS(this),e=this.fulldata,i=t.mapping.fromJS(n,p,{}),i.fulldata=e,i},o.prototype.dispose=function(){var t,e,i,n;for(i=this.subscriptions,t=0,e=i.length;t<e;t++)n=i[t],null!=n.dispose&&n.dispose();return this.subscriptions=[]},o}()}.apply(e,r))&&(t.exports=o)}).call(e,i(245))},1176:function(t,e,i){"use strict";function n(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object.create(t.prototype);for(var r in i)n[r]=i[r];return n.constructor=e,e.prototype=n,e}e.__esModule=!0,e.inherits=n},1185:function(t,e,i){(function(n){var r,o;!function(n,s){r=s,void 0!==(o="function"==typeof r?r.call(e,i,e,t):r)&&(t.exports=o)}(0,function(){function t(t,e){var i=Object.prototype.toString.call(t),r="[object Array]"===i||"[object NodeList]"===i||"[object HTMLCollection]"===i||"[object Object]"===i||void 0!==n&&t instanceof n||"undefined"!=typeof Elements&&t instanceof Elements,o=0,s=t.length;if(r)for(;o<s;o++)e(t[o]);else e(t)}if("undefined"==typeof window)return null;var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return window.setTimeout(t,20)},i=function(n,r){function o(){var t=[];this.add=function(e){t.push(e)};var e,i;this.call=function(){for(e=0,i=t.length;e<i;e++)t[e].call()},this.remove=function(n){var r=[];for(e=0,i=t.length;e<i;e++)t[e]!==n&&r.push(t[e]);t=r},this.length=function(){return t.length}}function s(t,e){return t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue(e):t.style[e]}function a(t,i){if(t.resizedAttached){if(t.resizedAttached)return void t.resizedAttached.add(i)}else t.resizedAttached=new o,t.resizedAttached.add(i);t.resizeSensor=document.createElement("div"),t.resizeSensor.className="resize-sensor";var n="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",r="position: absolute; left: 0; top: 0; transition: 0s;";t.resizeSensor.style.cssText=n,t.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+n+'"><div style="'+r+'"></div></div><div class="resize-sensor-shrink" style="'+n+'"><div style="'+r+' width: 200%; height: 200%"></div></div>',t.appendChild(t.resizeSensor),"static"==s(t,"position")&&(t.style.position="relative");var a,l,c,u,p=t.resizeSensor.childNodes[0],d=p.childNodes[0],h=t.resizeSensor.childNodes[1],f=t.offsetWidth,m=t.offsetHeight,g=function(){d.style.width="100000px",d.style.height="100000px",p.scrollLeft=1e5,p.scrollTop=1e5,h.scrollLeft=1e5,h.scrollTop=1e5};g();var y=function(){l=0,a&&(f=c,m=u,t.resizedAttached&&t.resizedAttached.call())},v=function(){c=t.offsetWidth,u=t.offsetHeight,a=c!=f||u!=m,a&&!l&&(l=e(y)),g()},b=function(t,e,i){t.attachEvent?t.attachEvent("on"+e,i):t.addEventListener(e,i)};b(p,"scroll",v),b(h,"scroll",v)}t(n,function(t){a(t,r)}),this.detach=function(t){i.detach(n,t)}};return i.detach=function(e,i){t(e,function(t){t.resizedAttached&&"function"==typeof i&&(t.resizedAttached.remove(i),t.resizedAttached.length())||t.resizeSensor&&(t.contains(t.resizeSensor)&&t.removeChild(t.resizeSensor),delete t.resizeSensor,delete t.resizedAttached)})},i})}).call(e,i(245))},1186:function(module,exports,__webpack_require__){(function(jQuery){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(t,e){__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(245)],__WEBPACK_AMD_DEFINE_FACTORY__=e,void 0!==(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}(0,function($){function degrees(t){return 180*t/Math.PI}function radian(t){return t*Math.PI/180}function sec(t){return 1/Math.cos(t)}function sfcc(t){return String.fromCharCode.apply(String,t.replace(" ","").split(","))}function deepExtend(t,e){for(var i in e)e[i]&&e[i].constructor&&e[i].constructor===Object?(t[i]=$.extend({},t[i])||{},deepExtend(t[i],e[i])):t[i]=e[i];return t}function Spin(){return this.initialize.apply(this,_slice.call(arguments))}function Visible(){return this.initialize.apply(this,_slice.call(arguments))}function Skin(){this.initialize.apply(this,_slice.call(arguments))}function Stem(){this.initialize.apply(this,_slice.call(arguments))}function Tooltip(){this.initialize.apply(this,_slice.call(arguments))}function Collection(){this.initialize.apply(this,_slice.call(arguments))}var Tipped={};$.extend(Tipped,{version:"4.5.7"}),Tipped.Skins={base:{afterUpdate:!1,ajax:{},cache:!0,container:!1,containment:{selector:"viewport",padding:5},close:!1,detach:!0,fadeIn:200,fadeOut:200,showDelay:75,hideDelay:25,hideAfter:!1,hideOn:{element:"mouseleave"},hideOthers:!1,position:"top",inline:!1,offset:{x:0,y:0},onHide:!1,onShow:!1,padding:!0,radius:!0,shadow:!0,showOn:{element:"mousemove"},size:"medium",spinner:!0,stem:!0,target:"element",voila:!0},reset:{ajax:!1,hideOn:{element:"mouseleave",tooltip:"mouseleave"},showOn:{element:"mouseenter",tooltip:"mouseenter"}}},$.each("dark light gray red green blue lightyellow lightblue lightpink".split(" "),function(t,e){Tipped.Skins[e]={}});var Browser=function(t){function e(e){var i=new RegExp(e+"([\\d.]+)").exec(t);return!i||parseFloat(i[1])}return{IE:!(!window.attachEvent||-1!==t.indexOf("Opera"))&&e("MSIE "),Opera:t.indexOf("Opera")>-1&&(!!window.opera&&opera.version&&parseFloat(opera.version())||7.55),WebKit:t.indexOf("AppleWebKit/")>-1&&e("AppleWebKit/"),Gecko:t.indexOf("Gecko")>-1&&-1===t.indexOf("KHTML")&&e("rv:"),MobileSafari:!!t.match(/Apple.*Mobile.*Safari/),Chrome:t.indexOf("Chrome")>-1&&e("Chrome/"),ChromeMobile:t.indexOf("CrMo")>-1&&e("CrMo/"),Android:t.indexOf("Android")>-1&&e("Android "),IEMobile:t.indexOf("IEMobile")>-1&&e("IEMobile/")}}(navigator.userAgent),Support=function(){function t(t){return i(t,"prefix")}function e(t,e){for(var i in t)if(void 0!==n.style[t[i]])return"prefix"!=e||t[i];return!1}function i(t,i){var n=t.charAt(0).toUpperCase()+t.substr(1);return e((t+" "+r.join(n+" ")+n).split(" "),i)}var n=document.createElement("div"),r="Webkit Moz O ms Khtml".split(" ");return{css:{animation:i("animation"),transform:i("transform"),prefixed:t},shadow:i("boxShadow")&&i("pointerEvents"),touch:function(){try{return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}catch(t){return!1}}()}}(),_slice=Array.prototype.slice,_={wrap:function(t,e){var i=t;return function(){var t=[$.proxy(i,this)].concat(_slice.call(arguments));return e.apply(this,t)}},isElement:function(t){return t&&1==t.nodeType},isText:function(t){return t&&3==t.nodeType},isDocumentFragment:function(t){return t&&11==t.nodeType},delay:function(t,e){var i=_slice.call(arguments,2);return setTimeout(function(){return t.apply(t,i)},e)},defer:function(t){return _.delay.apply(this,[t,1].concat(_slice.call(arguments,1)))},pointer:function(t){return{x:t.pageX,y:t.pageY}},element:{isAttached:function(){function t(t){for(var e=t;e&&e.parentNode;)e=e.parentNode;return e}return function(e){var i=t(e);return!(!i||!i.body)}}()}},getUID=function(){var t=0;return function(e){for(e=e||"_tipped-uid-",t++;document.getElementById(e+t);)t++;return e+t}}(),Position={positions:["topleft","topmiddle","topright","righttop","rightmiddle","rightbottom","bottomright","bottommiddle","bottomleft","leftbottom","leftmiddle","lefttop"],regex:{toOrientation:/^(top|left|bottom|right)(top|left|bottom|right|middle|center)$/,horizontal:/^(top|bottom)/,isCenter:/(middle|center)/,side:/^(top|bottom|left|right)/},toDimension:function(){var t={top:"height",left:"width",bottom:"height",right:"width"};return function(e){return t[e]}}(),isCenter:function(t){return!!t.toLowerCase().match(this.regex.isCenter)},isCorner:function(t){return!this.isCenter(t)},getOrientation:function(t){return t.toLowerCase().match(this.regex.horizontal)?"horizontal":"vertical"},getSide:function(t){var e=null,i=t.toLowerCase().match(this.regex.side);return i&&i[1]&&(e=i[1]),e},split:function(t){return t.toLowerCase().match(this.regex.toOrientation)},_flip:{top:"bottom",bottom:"top",left:"right",right:"left"},flip:function(t,e){var i=this.split(t);return e?this.inverseCornerPlane(this.flip(this.inverseCornerPlane(t))):this._flip[i[1]]+i[2]},inverseCornerPlane:function(t){if(Position.isCorner(t)){var e=this.split(t);return e[2]+e[1]}return t},adjustOffsetBasedOnPosition:function(t,e,i){var n=$.extend({},t),r={horizontal:"x",vertical:"y"},o={x:"y",y:"x"},s={top:{right:"x"},bottom:{left:"x"},left:{bottom:"y"},right:{top:"y"}},a=Position.getOrientation(e);if(a==Position.getOrientation(i)){if(Position.getSide(e)!=Position.getSide(i)){var l=o[r[a]];n[l]*=-1}}else{var c=n.x;n.x=n.y,n.y=c;var u=s[Position.getSide(e)][Position.getSide(i)];u&&(n[u]*=-1),n[r[Position.getOrientation(i)]]=0}return n},getBoxFromPoints:function(t,e,i,n){var r=Math.min(t,i),o=Math.max(t,i),s=Math.min(e,n),a=Math.max(e,n);return{left:r,top:s,width:Math.max(o-r,0),height:Math.max(a-s,0)}},isPointWithinBox:function(t,e,i,n,r,o){var s=this.getBoxFromPoints(i,n,r,o);return t>=s.left&&t<=s.left+s.width&&e>=s.top&&e<=s.top+s.height},isPointWithinBoxLayout:function(t,e,i){return this.isPointWithinBox(t,e,i.position.left,i.position.top,i.position.left+i.dimensions.width,i.position.top+i.dimensions.height)},getDistance:function(t,e,i,n){return Math.sqrt(Math.pow(Math.abs(i-t),2)+Math.pow(Math.abs(n-e),2))},intersectsLine:function(){var t=function(t,e,i,n,r,o){var s=(o-e)*(i-t)-(n-e)*(r-t);return s>0||!(0>s)};return function(e,i,n,r,o,s,a,l,c){if(!c)return t(e,i,o,s,a,l)!=t(n,r,o,s,a,l)&&t(e,i,n,r,o,s)!=t(e,i,n,r,a,l);var u,p,d,h;u=n-e,p=r-i,d=a-o,h=l-s;var f,m;if(f=(-p*(e-o)+u*(i-s))/(-d*p+u*h),m=(d*(i-s)-h*(e-o))/(-d*p+u*h),f>=0&&1>=f&&m>=0&&1>=m){return{x:e+m*u,y:i+m*p}}return!1}}()},Bounds={viewport:function(){return Browser.MobileSafari||Browser.Android&&Browser.Gecko?{width:window.innerWidth,height:window.innerHeight}:{height:$(window).height(),width:$(window).width()}}},Mouse={_buffer:{pageX:0,pageY:0},_dimensions:{width:30,height:30},_shift:{x:2,y:10},getPosition:function(t){var e=this.getActualPosition(t);return{left:e.left-Math.round(.5*this._dimensions.width)+this._shift.x,top:e.top-Math.round(.5*this._dimensions.height)+this._shift.y}},getActualPosition:function(t){var e=t&&"number"==$.type(t.pageX)?t:this._buffer;return{left:e.pageX,top:e.pageY}},getDimensions:function(){return this._dimensions}},Color=function(){function t(t){return("0"+parseInt(t).toString(16)).slice(-2)}function e(e){return e=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+))?\)$/),"#"+t(e[1])+t(e[2])+t(e[3])}var i={_default:"#000000",aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"};return{toRGB:function(t){if(/^rgba?\(/.test(t))return e(t);i[t]&&(t=i[t]);var n=t.replace("#","");return/^(?:[0-9a-fA-F]{3}){1,2}$/.test(n),3==n.length&&(n=n.charAt(0)+n.charAt(0)+n.charAt(1)+n.charAt(1)+n.charAt(2)+n.charAt(2)),"#"+n}}}();Spin.supported=Support.css.transform&&Support.css.animation,$.extend(Spin.prototype,{initialize:function(){this.options=$.extend({},arguments[0]||{}),this.build(),this.start()},build:function(){var t=2*(this.options.length+this.options.radius),e={height:t,width:t};this.element=$("<div>").addClass("tpd-spin").css(e),this.element.append(this._rotate=$("<div>").addClass("tpd-spin-rotate")),this.element.css({"margin-left":-.5*e.width,"margin-top":-.5*e.height});for(var i=this.options.lines,n=0;i>n;n++){var r,o;this._rotate.append(r=$("<div>").addClass("tpd-spin-frame").append(o=$("<div>").addClass("tpd-spin-line"))),o.css({"background-color":this.options.color,width:this.options.width,height:this.options.length,"margin-left":-.5*this.options.width,"border-radius":Math.round(.5*this.options.width)}),r.css({opacity:(1/i*(n+1)).toFixed(2)});var s={};s[Support.css.prefixed("transform")]="rotate("+360/i*(n+1)+"deg)",r.css(s)}},start:function(){var t={};t[Support.css.prefixed("animation")]="tpd-spin 1s infinite steps("+this.options.lines+")",this._rotate.css(t)},stop:function(){var t={};t[Support.css.prefixed("animation")]="none",this._rotate.css(t),this.element.detach()}}),$.extend(Visible.prototype,{initialize:function(t){return t="array"==$.type(t)?t:[t],this.elements=t,this._restore=[],$.each(t,$.proxy(function(t,e){var i=$(e).is(":visible");i||$(e).show(),this._restore.push({element:e,visible:i})},this)),this},restore:function(){$.each(this._restore,function(t,e){e.visible||$(e.element).show()}),this._restore=null}});var AjaxCache=function(){var t=[];return{get:function(e){for(var i=null,n=0;n<t.length;n++)t[n]&&t[n].url==e.url&&(t[n].type||"GET").toUpperCase()==(e.type||"GET").toUpperCase()&&$.param(t[n].data||{})==$.param(e.data||{})&&(i=t[n]);return i},set:function(e,i,n){var r=this.get(e);r||(r=$.extend({callbacks:{}},e),t.push(r)),r.callbacks[i]=n},remove:function(e){for(var i=0;i<t.length;i++)t[i]&&t[i].url==e&&delete t[i]},clear:function(){t=[]}}}(),Voila=function(t){function e(i,n,r){if(!(this instanceof e))return new e(i,n,r);var o=t.type(arguments[1]),s="object"===o?arguments[1]:{},a="function"===o?arguments[1]:"function"===t.type(arguments[2])&&arguments[2];return this.options=t.extend({method:"onload"},s),this.deferred=new jQuery.Deferred,a&&this.always(a),this._processed=0,this.images=[],this._add(i),this}t.extend(e.prototype,{_add:function(e){var n="string"==t.type(e)?t(e):e instanceof jQuery||e.length>0?e:[e];t.each(n,t.proxy(function(e,n){var r=t(),o=t(n);r=o.is("img")?r.add(o):r.add(o.find("img:not([data-ignore-tipped-sanitize])")),r.each(t.proxy(function(e,n){this.images.push(new i(n,t.proxy(function(t){this._progress(t)},this),t.proxy(function(t){this._progress(t)},this),this.options))},this))},this)),this.images.length<1&&setTimeout(t.proxy(function(){this._resolve()},this))},abort:function(){this._progress=this._notify=this._reject=this._resolve=function(){},t.each(this.images,function(t,e){e.abort()}),this.images=[]},_progress:function(t){this._processed++,t.isLoaded||(this._broken=!0),this._notify(t),this._processed==this.images.length&&this[this._broken?"_reject":"_resolve"]()},_notify:function(t){this.deferred.notify(this,t)},_reject:function(){this.deferred.reject(this)},_resolve:function(){this.deferred.resolve(this)},always:function(t){return this.deferred.always(t),this},done:function(t){return this.deferred.done(t),this},fail:function(t){return this.deferred.fail(t),this},progress:function(t){return this.deferred.progress(t),this}});var i=function(t){var e=function(){return this.initialize.apply(this,Array.prototype.slice.call(arguments))};t.extend(e.prototype,{initialize:function(){this.options=t.extend({test:function(){},success:function(){},timeout:function(){},callAt:!1,intervals:[[0,0],[1e3,10],[2e3,50],[4e3,100],[2e4,500]]},arguments[0]||{}),this._test=this.options.test,this._success=this.options.success,this._timeout=this.options.timeout,this._ipos=0,this._time=0,this._delay=this.options.intervals[this._ipos][1],this._callTimeouts=[],this.poll(),this._createCallsAt()},poll:function(){this._polling=setTimeout(t.proxy(function(){if(this._test())return void this.success();if(this._time+=this._delay,this._time>=this.options.intervals[this._ipos][0]){if(!this.options.intervals[this._ipos+1])return void("function"==t.type(this._timeout)&&this._timeout());this._ipos++,this._delay=this.options.intervals[this._ipos][1]}this.poll()},this),this._delay)},success:function(){this.abort(),this._success()},_createCallsAt:function(){this.options.callAt&&t.each(this.options.callAt,t.proxy(function(e,i){var n=i[0],r=i[1],o=setTimeout(t.proxy(function(){r()},this),n);this._callTimeouts.push(o)},this))},_stopCallTimeouts:function(){t.each(this._callTimeouts,function(t,e){clearTimeout(e)}),this._callTimeouts=[]},abort:function(){this._stopCallTimeouts(),this._polling&&(clearTimeout(this._polling),this._polling=null)}});var i=function(){return this.initialize.apply(this,Array.prototype.slice.call(arguments))};return t.extend(i.prototype,{supports:{naturalWidth:function(){return"naturalWidth"in new Image}()},initialize:function(e,i,n){return this.img=t(e)[0],this.successCallback=i,this.errorCallback=n,this.isLoaded=!1,this.options=t.extend({method:"onload",pollFallbackAfter:1e3},arguments[3]||{}),"onload"!=this.options.method&&this.supports.naturalWidth?void this.poll():void this.load()},poll:function(){this._poll=new e({test:t.proxy(function(){return this.img.naturalWidth>0},this),success:t.proxy(function(){this.success()},this),timeout:t.proxy(function(){this.error()},this),callAt:[[this.options.pollFallbackAfter,t.proxy(function(){this.load()},this)]]})},load:function(){this._loading=setTimeout(t.proxy(function(){var e=new Image;this._onloadImage=e,e.onload=t.proxy(function(){e.onload=function(){},this.supports.naturalWidth||(this.img.naturalWidth=e.width,this.img.naturalHeight=e.height,e.naturalWidth=e.width,e.naturalHeight=e.height),this.success()},this),e.onerror=t.proxy(this.error,this),e.src=this.img.src},this))},success:function(){this._calledSuccess||(this._calledSuccess=!0,this.abort(),this.waitForRender(t.proxy(function(){this.isLoaded=!0,this.successCallback(this)},this)))},error:function(){this._calledError||(this._calledError=!0,this.abort(),this._errorRenderTimeout=setTimeout(t.proxy(function(){this.errorCallback&&this.errorCallback(this)},this)))},abort:function(){this.stopLoading(),this.stopPolling(),this.stopWaitingForRender()},stopPolling:function(){this._poll&&(this._poll.abort(),this._poll=null)},stopLoading:function(){this._loading&&(clearTimeout(this._loading),this._loading=null),this._onloadImage&&(this._onloadImage.onload=function(){},this._onloadImage.onerror=function(){})},waitForRender:function(t){this._renderTimeout=setTimeout(t)},stopWaitingForRender:function(){this._renderTimeout&&(clearTimeout(this._renderTimeout),this._renderTimeout=null),this._errorRenderTimeout&&(clearTimeout(this._errorRenderTimeout),this._errorRenderTimeout=null)}}),i}(jQuery);return e}(jQuery);Tipped.Behaviors={hide:{showOn:{element:"mouseenter",tooltip:!1},hideOn:{element:"mouseleave",tooltip:"mouseenter"}},mouse:{showOn:{element:"mouseenter",tooltip:!1},hideOn:{element:"mouseleave",tooltip:"mouseenter"},target:"mouse",showDelay:100,fadeIn:0,hideDelay:0,fadeOut:0},sticky:{showOn:{element:"mouseenter",tooltip:"mouseenter"},hideOn:{element:"mouseleave",tooltip:"mouseleave"},showDelay:150,target:"mouse",fixed:!0}};var Options={create:function(){function t(e){return r=Tipped.Skins.base,o=deepExtend($.extend({},r),Tipped.Skins.reset),t=n,n(e)}function e(t){return t.match(/^(top|left|bottom|right)$/)&&(t+="middle"),t.replace("center","middle").replace(" ",""),t}function i(t){var e;return t.behavior&&(e=Tipped.Behaviors[t.behavior])?deepExtend($.extend({},e),t):t}function n(t){var n=t.skin?t.skin:Tooltips.options.defaultSkin,s=$.extend({},Tipped.Skins[n]||{});s.skin||(s.skin=Tooltips.options.defaultSkin||"dark");var a=deepExtend($.extend({},o),i(s)),l=deepExtend($.extend({},a),i(t));if(l.ajax){var c=(o.ajax,r.ajax);"boolean"==$.type(l.ajax)&&(l.ajax={}),l.ajax=deepExtend($.extend({},c),l.ajax)}var u,p=p=l.position&&l.position.target||"string"==$.type(l.position)&&l.position||o.position&&o.position.target||"string"==$.type(o.position)&&o.position||r.position&&r.position.target||r.position;p=e(p);var d=l.position&&l.position.tooltip||o.position&&o.position.tooltip||r.position&&r.position.tooltip||Tooltips.Position.getInversedPosition(p);if(d=e(d),l.position?"string"==$.type(l.position)?(l.position=e(l.position),u={target:l.position,tooltip:Tooltips.Position.getTooltipPositionFromTarget(l.position)}):(u={tooltip:d,target:p},l.position.tooltip&&(u.tooltip=e(l.position.tooltip)),l.position.target&&(u.target=e(l.position.target))):u={tooltip:d,target:p},Position.isCorner(u.target)&&Position.getOrientation(u.target)!=Position.getOrientation(u.tooltip)&&(u.target=Position.inverseCornerPlane(u.target)),"mouse"==l.target){var h=Position.getOrientation(u.target);u.target="horizontal"==h?u.target.replace(/(left|right)/,"middle"):u.target.replace(/(top|bottom)/,"middle")}l.position=u;var f;if("mouse"==l.target?(f=$.extend({},r.offset),$.extend(f,Tipped.Skins.reset.offset||{}),t.skin&&$.extend(f,(Tipped.Skins[t.skin]||Tipped.Skins[Tooltips.options.defaultSkin]||{}).offset||{}),f=Position.adjustOffsetBasedOnPosition(r.offset,r.position,u.target,!0),t.offset&&(f=$.extend(f,t.offset||{}))):f={x:l.offset.x,y:l.offset.y},l.offset=f,l.hideOn&&"click-outside"==l.hideOn&&(l.hideOnClickOutside=!0,l.hideOn=!1,l.fadeOut=0),l.showOn){var m=l.showOn;"string"==$.type(m)&&(m={element:m}),l.showOn=m}if(l.hideOn){var g=l.hideOn;"string"==$.type(g)&&(g={element:g}),l.hideOn=g}return l.inline&&"string"!=$.type(l.inline)&&(l.inline=!1),Browser.IE&&Browser.IE<9&&$.extend(l,{fadeIn:0,fadeOut:0,hideDelay:0}),l.spinner&&(Spin.supported?"boolean"==$.type(l.spinner)&&(l.spinner=o.spinner||r.spinner||{}):l.spinner=!1),l.container||(l.container=document.body),l.containment&&"string"==$.type(l.containment)&&(l.containment={selector:l.containment,padding:o.containment&&o.containment.padding||r.padding&&r.containment.padding}),l.shadow&&(l.shadow=Support.shadow),l}var r,o;return t}()};$.extend(Skin.prototype,{initialize:function(t){this.tooltip=t,this.element=t._skin;var e=this.tooltip.options;this.tooltip._tooltip[(e.shadow?"remove":"add")+"Class"]("tpd-no-shadow")[(e.radius?"remove":"add")+"Class"]("tpd-no-radius")[(e.stem?"remove":"add")+"Class"]("tpd-no-stem");var i,n,r,o,s=Support.css.prefixed("borderTopLeftRadius");this.element.append(i=$("<div>").addClass("tpd-frames").append($("<div>").addClass("tpd-frame").append($("<div>").addClass("tpd-backgrounds").append(n=$("<div>").addClass("tpd-background").append(r=$("<div>").addClass("tpd-background-content")))))).append(o=$("<div>").addClass("tpd-spinner")),n.css({width:999,height:999,zoom:1}),this._css={border:parseFloat(n.css("border-top-width")),radius:parseFloat(s?n.css(s):0),padding:parseFloat(t._content.css("padding-top")),borderColor:n.css("border-top-color"),backgroundColor:r.css("background-color"),backgroundOpacity:r.css("opacity"),spinner:{dimensions:{width:o.innerWidth(),height:o.innerHeight()}}},o.remove(),i.remove(),this._side=Position.getSide(t.options.position.tooltip)||"top",this._vars={}},destroy:function(){this.frames&&($.each("top right bottom left".split(" "),$.proxy(function(t,e){this["stem_"+e]&&this["stem_"+e].destroy()},this)),this.frames.remove(),this.frames=null)},build:function(){this.frames||(this.element.append(this.frames=$("<div>").addClass("tpd-frames")),$.each("top right bottom left".split(" "),$.proxy(function(t,e){this.insertFrame(e)},this)),this._spinner||this.tooltip._tooltip.append(this._spinner=$("<div>").addClass("tpd-spinner").hide().append($("<div>").addClass("tpd-spinner-spin"))))},_frame:function(){var t,e=$("<div>").addClass("tpd-frame").append(t=$("<div>").addClass("tpd-backgrounds").append($("<div>").addClass("tpd-background-shadow"))).append($("<div>").addClass("tpd-shift-stem").append($("<div>").addClass("tpd-shift-stem-side tpd-shift-stem-side-before")).append($("<div>").addClass("tpd-stem")).append($("<div>").addClass("tpd-shift-stem-side tpd-shift-stem-side-after")));return $.each("top right bottom left".split(" "),$.proxy(function(e,i){t.append($("<div>").addClass("tpd-background-box tpd-background-box-"+i).append($("<div>").addClass("tpd-background-box-shift").append($("<div>").addClass("tpd-background-box-shift-further").append($("<div>").addClass("tpd-background").append($("<div>").addClass("tpd-background-title")).append($("<div>").addClass("tpd-background-content"))).append($("<div>").addClass("tpd-background tpd-background-loading")).append($("<div>").addClass("tpd-background-border-hack").hide()))))},this)),e}(),_getFrame:function(t){var e=this._frame.clone();e.addClass("tpd-frame-"+t),e.find(".tpd-background-shadow").css({"border-radius":this._css.radius}),this.tooltip.options.stem&&e.find(".tpd-stem").attr("data-stem-position",t);var i=Math.max(this._css.radius-this._css.border,0);e.find(".tpd-background-title").css({"border-top-left-radius":i,"border-top-right-radius":i}),e.find(".tpd-background-content").css({"border-bottom-left-radius":i,"border-bottom-right-radius":i}),e.find(".tpd-background-loading").css({"border-radius":i});var n={backgroundColor:this._css.borderColor};return n["horizontal"==Position.getOrientation(t)?"height":"width"]=this._css.border+"px",n[{top:"bottom",bottom:"top",left:"right",right:"left"}[t]]=0,e.find(".tpd-shift-stem-side").css(n),e},insertFrame:function(t){var e=this["frame_"+t]=this._getFrame(t);if(this.frames.append(e),this.tooltip.options.stem){var i=e.find(".tpd-stem");this["stem_"+t]=new Stem(i,this,{})}},startLoading:function(){this.tooltip.supportsLoading&&(this.build(),this._spinner||this.tooltip.is("resize-to-content")||this.setDimensions(this._css.spinner.dimensions),this._spinner&&this._spinner.show())},stopLoading:function(){this.tooltip.supportsLoading&&this._spinner&&(this.build(),this._spinner.hide())},updateBackground:function(){var t=this._vars.frames[this._side],e=$.extend({},t.background.dimensions);if(this.tooltip.title&&!this.tooltip.is("loading")){this.element.find(".tpd-background-title, .tpd-background-content").show(),this.element.find(".tpd-background").css({"background-color":"transparent"});var i=$.extend({},e),n=Math.max(this._css.radius-this._css.border,0),r={"border-top-left-radius":n,"border-top-right-radius":n,"border-bottom-left-radius":n,"border-bottom-right-radius":n},o=new Visible(this.tooltip._tooltip),s=this.tooltip._titleWrapper.innerHeight();i.height-=s,this.element.find(".tpd-background-title").css({height:s,width:e.width}),r["border-top-left-radius"]=0,r["border-top-right-radius"]=0,o.restore(),this.element.find(".tpd-background-content").css(i).css(r),this.element.find(".tpd-background-loading").css({"background-color":this._css.backgroundColor})}else this.element.find(".tpd-background-title, .tpd-background-content").hide(),this.element.find(".tpd-background").css({"background-color":this._css.backgroundColor});this._css.border&&(this.element.find(".tpd-background").css({"border-color":"transparent"}),this.element.find(".tpd-background-border-hack").css({width:e.width,height:e.height,"border-radius":this._css.radius,"border-width":this._css.border,"border-color":this._css.borderColor}).show())},paint:function(){if(!this._paintedDimensions||this._paintedDimensions.width!=this._dimensions.width||this._paintedDimensions.height!=this._dimensions.height||this._paintedStemPosition!=this._stemPosition){this._paintedDimensions=this._dimensions,this._paintedStemPosition=this._stemPosition,this.element.removeClass("tpd-visible-frame-top tpd-visible-frame-bottom tpd-visible-frame-left tpd-visible-frame-right").addClass("tpd-visible-frame-"+this._side);var t=this._vars.frames[this._side],e=$.extend({},t.background.dimensions);this.element.find(".tpd-background").css(e),this.element.find(".tpd-background-shadow").css({width:e.width+2*this._css.border,height:e.height+2*this._css.border}),this.updateBackground(),this.element.find(".tpd-background-box-shift, .tpd-background-box-shift-further").removeAttr("style"),this.element.add(this.frames).add(this.tooltip._tooltip).css(t.dimensions);var i=this._side,n=this._vars.frames[i],r=this.element.find(".tpd-frame-"+this._side),o=this._vars.frames[i].dimensions;r.css(o),r.find(".tpd-backgrounds").css($.extend({},n.background.position,{width:o.width-n.background.position.left,height:o.height-n.background.position.top}));var s=Position.getOrientation(i);if(this.tooltip.options.stem)if(r.find(".tpd-shift-stem").css($.extend({},n.shift.dimensions,n.shift.position)),"vertical"==s){var a=r.find(".tpd-background-box-top, .tpd-background-box-bottom");a.css({height:this._vars.cut,width:this._css.border}),r.find(".tpd-background-box-bottom").css({top:n.dimensions.height-this._vars.cut}).find(".tpd-background-box-shift").css({"margin-top":-1*n.dimensions.height+this._vars.cut});var l="right"==i?n.dimensions.width-n.stemPx-this._css.border:0;a.css({left:l}).find(".tpd-background-box-shift").css({"margin-left":-1*l}),r.find(".tpd-background-box-"+("left"==i?"left":"right")).hide(),"right"==i?r.find(".tpd-background-box-left").css({width:n.dimensions.width-n.stemPx-this._css.border}):r.find(".tpd-background-box-right").css({"margin-left":this._css.border}).find(".tpd-background-box-shift").css({"margin-left":-1*this._css.border});var c=r.find(".tpd-background-box-"+this._side);c.css({height:n.dimensions.height-2*this._vars.cut,"margin-top":this._vars.cut}),c.find(".tpd-background-box-shift").css({"margin-top":-1*this._vars.cut})}else{var a=r.find(".tpd-background-box-left, .tpd-background-box-right");a.css({width:this._vars.cut,height:this._css.border}),r.find(".tpd-background-box-right").css({left:n.dimensions.width-this._vars.cut}).find(".tpd-background-box-shift").css({"margin-left":-1*n.dimensions.width+this._vars.cut});var l="bottom"==i?n.dimensions.height-n.stemPx-this._css.border:0;a.css({top:l}).find(".tpd-background-box-shift").css({"margin-top":-1*l}),r.find(".tpd-background-box-"+("top"==i?"top":"bottom")).hide(),"bottom"==i?r.find(".tpd-background-box-top").css({height:n.dimensions.height-n.stemPx-this._css.border}):r.find(".tpd-background-box-bottom").css({"margin-top":this._css.border}).find(".tpd-background-box-shift").css({"margin-top":-1*this._css.border});var c=r.find(".tpd-background-box-"+this._side);c.css({width:n.dimensions.width-2*this._vars.cut,"margin-left":this._vars.cut}),c.find(".tpd-background-box-shift").css({"margin-left":-1*this._vars.cut})}var u=t.background,p=u.position,d=u.dimensions;this._spinner.css({top:p.top+this._css.border+(.5*d.height-.5*this._css.spinner.dimensions.height),left:p.left+this._css.border+(.5*d.width-.5*this._css.spinner.dimensions.width)})}},getVars:function(){var t=(this._css.padding,this._css.radius,this._css.border),e=this._vars.maxStemHeight||0,i=$.extend({},this._dimensions||{}),n={frames:{},dimensions:i,maxStemHeight:e};n.cut=Math.max(this._css.border,this._css.radius)||0;var r={width:0,height:0},o=0,s=0;return this.tooltip.options.stem&&(r=this.stem_top.getMath().dimensions.outside,o=this.stem_top._css.offset,s=Math.max(r.height-this._css.border,0)),n.stemDimensions=r,n.stemOffset=o,Position.getOrientation(this._side),$.each("top right bottom left".split(" "),$.proxy(function(e,o){var a=Position.getOrientation(o),l="vertical"==a,c={width:i.width+2*t,height:i.height+2*t},u=c[l?"height":"width"]-2*n.cut,p={dimensions:c,stemPx:s,position:{top:0,left:0},background:{dimensions:$.extend({},i),position:{top:0,left:0}}};if(n.frames[o]=p,p.dimensions[l?"width":"height"]+=s,("top"==o||"left"==o)&&(p.background.position[o]+=s),$.extend(p,{shift:{position:{top:0,left:0},dimensions:{width:l?r.height:u,height:l?u:r.height}}}),Browser.IE&&Browser.IE<9){var d=p.shift.dimensions;d.width=Math.round(d.width),d.height=Math.round(d.height)}switch(o){case"top":case"bottom":p.shift.position.left+=n.cut,"bottom"==o&&(p.shift.position.top+=c.height-t-s);break;case"left":case"right":p.shift.position.top+=n.cut,"right"==o&&(p.shift.position.left+=c.width-t-s)}},this)),n.connections={},$.each(Position.positions,$.proxy(function(t,e){n.connections[e]=this.getConnectionLayout(e,n)},this)),n},setDimensions:function(t){this.build();var e=this._dimensions;e&&e.width==t.width&&e.height==t.height||(this._dimensions=t,this._vars=this.getVars())},setSide:function(t){this._side=t,this._vars=this.getVars()},getConnectionLayout:function(t,e){var i=Position.getSide(t),n=Position.getOrientation(t),r=(e.dimensions,e.cut),o=this["stem_"+i],s=e.stemOffset,a=this.tooltip.options.stem?o.getMath().dimensions.outside.width:0,l=r+s+.5*a,c={stem:{}},u={left:0,right:0,up:0,down:0},p={top:0,left:0},d={top:0,left:0},h=e.frames[i],l=0;if("horizontal"==n){var f=h.dimensions.width;this.tooltip.options.stem&&(f=h.shift.dimensions.width,2*s>f-a&&(s=Math.floor(.5*(f-a))||0),l=r+s+.5*a);var m=f-2*s,g=Position.split(t),y=s;switch(g[2]){case"left":u.right=m-a,p.left=l;break;case"middle":y+=Math.round(.5*m-.5*a),u.left=y-s,u.right=y-s,p.left=d.left=Math.round(.5*h.dimensions.width);break;case"right":y+=m-a,u.left=m-a,p.left=h.dimensions.width-l,d.left=h.dimensions.width}"bottom"==g[1]&&(p.top+=h.dimensions.height,d.top+=h.dimensions.height),$.extend(c.stem,{position:{left:y},before:{width:y},after:{left:y+a,width:f-y-a+1}})}else{var v=h.dimensions.height;this.tooltip.options.stem&&(v=h.shift.dimensions.height,2*s>v-a&&(s=Math.floor(.5*(v-a))||0),l=r+s+.5*a);var b=v-2*s,g=Position.split(t),w=s;switch(g[2]){case"top":u.down=b-a,p.top=l;break;case"middle":w+=Math.round(.5*b-.5*a),u.up=w-s,u.down=w-s,p.top=d.top=Math.round(.5*h.dimensions.height);break;case"bottom":w+=b-a,u.up=b-a,p.top=h.dimensions.height-l,d.top=h.dimensions.height}"right"==g[1]&&(p.left+=h.dimensions.width,d.left+=h.dimensions.width),$.extend(c.stem,{position:{top:w},before:{height:w},after:{top:w+a,height:v-w-a+1}})}return c.move=u,c.stem.connection=p,c.connection=d,c},setStemPosition:function(t,e){if(this._stemPosition!=t){this._stemPosition=t;var i=Position.getSide(t);this.setSide(i)}this.tooltip.options.stem&&this.setStemShift(t,e)},setStemShift:function(t,e){var i=this._shift,n=this._dimensions;if(!i||i.stemPosition!=t||i.shift.x!=e.x||i.shift.y!=e.y||!n||i.dimensions.width!=n.width||i.dimensions.height!=n.height){this._shift={stemPosition:t,shift:e,dimensions:n};var r=Position.getSide(t),o={horizontal:"x",vertical:"y"}[Position.getOrientation(t)],s={x:{left:"left",width:"width"},y:{left:"top",width:"height"}}[o],a=this["stem_"+r],l=deepExtend({},this._vars.connections[t].stem);e&&0!==e[o]&&(l.before[s.width]+=e[o],l.position[s.left]+=e[o],l.after[s.left]+=e[o],l.after[s.width]-=e[o]),a.element.css(l.position),a.element.siblings(".tpd-shift-stem-side-before").css(l.before),a.element.siblings(".tpd-shift-stem-side-after").css(l.after)}}}),$.extend(Stem.prototype,{initialize:function(t,e){this.element=$(t),this.element[0]&&(this.skin=e,this.element.removeClass("tpd-stem-reset"),this._css=$.extend({},e._css,{width:this.element.innerWidth(),height:this.element.innerHeight(),offset:parseFloat(this.element.css("margin-left")),spacing:parseFloat(this.element.css("margin-top"))}),this.element.addClass("tpd-stem-reset"),this.options=$.extend({},arguments[2]||{}),this._position=this.element.attr("data-stem-position")||"top",this._m=100,this.build())},destroy:function(){this.element.html("")},build:function(){this.destroy();var t=this._css.backgroundColor,e=t.indexOf("rgba")>-1&&parseFloat(t.replace(/^.*,(.+)\)/,"$1")),i=e&&1>e;this._useTransform=i&&Support.css.transform,this._css.border||(this._useTransform=!1),this[(this._useTransform?"build":"buildNo")+"Transform"]()},buildTransform:function(){this.element.append(this.spacer=$("<div>").addClass("tpd-stem-spacer").append(this.downscale=$("<div>").addClass("tpd-stem-downscale").append(this.transform=$("<div>").addClass("tpd-stem-transform").append(this.first=$("<div>").addClass("tpd-stem-side").append(this.border=$("<div>").addClass("tpd-stem-border")).append($("<div>").addClass("tpd-stem-border-corner")).append($("<div>").addClass("tpd-stem-triangle")))))),this.transform.append(this.last=this.first.clone().addClass("tpd-stem-side-inversed")),this.sides=this.first.add(this.last);var t=this.getMath(),e=t.dimensions,i=this._m,n=Position.getSide(this._position);if(this.element.find(".tpd-stem-spacer").css({width:p?e.inside.height:e.inside.width,height:p?e.inside.width:e.inside.height}),"top"==n||"left"==n){var r={};"top"==n?(r.bottom=0,r.top="auto"):"left"==n&&(r.right=0,r.left="auto"),this.element.find(".tpd-stem-spacer").css(r)}this.transform.css({width:e.inside.width*i,height:e.inside.height*i});var o=Support.css.prefixed("transform"),s={"background-color":"transparent","border-bottom-color":this._css.backgroundColor,"border-left-width":.5*e.inside.width*i,"border-bottom-width":e.inside.height*i};s[o]="translate("+t.border*i+"px, 0)",this.element.find(".tpd-stem-triangle").css(s);var a=this._css.borderColor;alpha=a.indexOf("rgba")>-1&&parseFloat(a.replace(/^.*,(.+)\)/,"$1")),alpha&&1>alpha?a=(a.substring(0,a.lastIndexOf(","))+")").replace("rgba","rgb"):alpha=1;var l={"background-color":"transparent","border-right-width":t.border*i,width:t.border*i,"margin-left":-2*t.border*i,"border-color":a,opacity:alpha};l[o]="skew("+t.skew+"deg) translate("+t.border*i+"px, "+-1*this._css.border*i+"px)",this.element.find(".tpd-stem-border").css(l);var a=this._css.borderColor;alpha=a.indexOf("rgba")>-1&&parseFloat(a.replace(/^.*,(.+)\)/,"$1")),alpha&&1>alpha?a=(a.substring(0,a.lastIndexOf(","))+")").replace("rgba","rgb"):alpha=1;var c={width:t.border*i,"border-right-width":t.border*i,"border-right-color":a,background:a,opacity:alpha,"margin-left":-2*t.border*i};if(c[o]="skew("+t.skew+"deg) translate("+t.border*i+"px, "+(e.inside.height-this._css.border)*i+"px)",this.element.find(".tpd-stem-border-corner").css(c),this.setPosition(this._position),i>1){var u={};u[o]="scale("+1/i+","+1/i+")",this.downscale.css(u)}var p=/^(left|right)$/.test(this._position);this._css.border||this.element.find(".tpd-stem-border, .tpd-stem-border-corner").hide(),this.element.css({width:p?e.outside.height:e.outside.width,height:p?e.outside.width:e.outside.height})},buildNoTransform:function(){this.element.append(this.spacer=$("<div>").addClass("tpd-stem-spacer").append($("<div>").addClass("tpd-stem-notransform").append($("<div>").addClass("tpd-stem-border").append($("<div>").addClass("tpd-stem-border-corner")).append($("<div>").addClass("tpd-stem-border-center-offset").append($("<div>").addClass("tpd-stem-border-center-offset-inverse").append($("<div>").addClass("tpd-stem-border-center"))))).append($("<div>").addClass("tpd-stem-triangle"))));var t=this.getMath(),e=t.dimensions,i=/^(left|right)$/.test(this._position),n=/^(bottom)$/.test(this._position),r=/^(right)$/.test(this._position),o=Position.getSide(this._position);if(this.element.css({width:i?e.outside.height:e.outside.width,height:i?e.outside.width:e.outside.height}),this.element.find(".tpd-stem-notransform").add(this.element.find(".tpd-stem-spacer")).css({width:i?e.inside.height:e.inside.width,height:i?e.inside.width:e.inside.height}),"top"==o||"left"==o){var s={};"top"==o?(s.bottom=0,s.top="auto"):"left"==o&&(s.right=0,s.left="auto"),this.element.find(".tpd-stem-spacer").css(s)}this.element.find(".tpd-stem-border").css({width:"100%",background:"transparent"});var a={opacity:Browser.IE&&Browser.IE<9?this._css.borderOpacity:1};a[i?"height":"width"]="100%",a[i?"width":"height"]=this._css.border,a[n?"top":"bottom"]=0,$.extend(a,r?{left:0}:{right:0}),this.element.find(".tpd-stem-border-corner").css(a);var l={width:0,"background-color":"transparent",opacity:Browser.IE&&Browser.IE<9?this._css.borderOpacity:1},c=.5*e.inside.width+"px solid transparent",u={"background-color":"transparent"};if(e.inside.width,t.border,i){var p={left:"auto",top:"50%","margin-top":-.5*e.inside.width,"border-top":c,"border-bottom":c};if($.extend(l,p),l[r?"right":"left"]=0,l[r?"border-left":"border-right"]=e.inside.height+"px solid "+this._css.borderColor,$.extend(u,p),u[r?"border-left":"border-right"]=e.inside.height+"px solid "+this._css.backgroundColor,u[r?"right":"left"]=t.top,u[r?"left":"right"]="auto",Browser.IE&&Browser.IE<8){var d=.5*this._css.width+"px solid transparent";$.extend(u,{"margin-top":-.5*this._css.width,"border-top":d,"border-bottom":d}),u[r?"border-left":"border-right"]=this._css.height+"px solid "+this._css.backgroundColor}this.element.find(".tpd-stem-border-center-offset").css({"margin-left":-1*this._css.border*(r?-1:1)}).find(".tpd-stem-border-center-offset-inverse").css({"margin-left":this._css.border*(r?-1:1)})}else{var p={"margin-left":-.5*e.inside.width,"border-left":c,"border-right":c};if($.extend(l,p),l[n?"border-top":"border-bottom"]=e.inside.height+"px solid "+this._css.borderColor,$.extend(u,p),u[n?"border-top":"border-bottom"]=e.inside.height+"px solid "+this._css.backgroundColor,u[n?"bottom":"top"]=t.top,u[n?"top":"bottom"]="auto",Browser.IE&&Browser.IE<8){var d=.5*this._css.width+"px solid transparent";$.extend(u,{"margin-left":-.5*this._css.width,"border-left":d,"border-right":d}),u[n?"border-top":"border-bottom"]=this._css.height+"px solid "+this._css.backgroundColor}this.element.find(".tpd-stem-border-center-offset").css({"margin-top":-1*this._css.border*(n?-1:1)}).find(".tpd-stem-border-center-offset-inverse").css({"margin-top":this._css.border*(n?-1:1)})}this.element.find(".tpd-stem-border-center").css(l),this.element.find(".tpd-stem-border-corner").css({"background-color":this._css.borderColor}),this.element.find(".tpd-stem-triangle").css(u),this._css.border||this.element.find(".tpd-stem-border").hide()},setPosition:function(t){this._position=t,this.transform.attr("class","tpd-stem-transform tpd-stem-transform-"+t)},getMath:function(){var t=this._css.height,e=this._css.width,i=this._css.border;this._useTransform&&Math.floor(e)%2&&(e=Math.max(Math.floor(e)-1,0));var n=degrees(Math.atan(.5*e/t)),r=90-n,o=i/Math.cos((90-r)*Math.PI/180),s=i/Math.cos((90-n)*Math.PI/180),a={width:e+2*o,height:t+s};Math.max(i,this._css.radius),t=a.height,e=.5*a.width;var l=degrees(Math.atan(t/e)),c=90-l,u=i/Math.cos(c*Math.PI/180),p=180*Math.atan(t/e)/Math.PI,d=-1*(90-p),h=90-p,f=i*Math.tan(h*Math.PI/180),s=i/Math.cos((90-h)*Math.PI/180),m=$.extend({},a),g=$.extend({},a);g.height+=this._css.spacing,g.height=Math.ceil(g.height);var y=!0;return 2*i>=a.width&&(y=!1),{enabled:y,outside:g,dimensions:{inside:m,outside:g},top:s,border:u,skew:d,corner:f}}});var Tooltips={tooltips:{},options:{defaultSkin:"dark",startingZIndex:999999},_emptyClickHandler:function(){},init:function(){this.reset(),this._resizeHandler=$.proxy(this.onWindowResize,this),$(window).bind("resize orientationchange",this._resizeHandler),Browser.MobileSafari&&$("body").bind("click",this._emptyClickHandler)},reset:function(){Tooltips.removeAll(),Delegations.removeAll(),this._resizeHandler&&$(window).unbind("resize orientationchange",this._resizeHandler),Browser.MobileSafari&&$("body").unbind("click",this._emptyClickHandler)},onWindowResize:function(){this._resizeTimer&&(window.clearTimeout(this._resizeTimer),this._resizeTimer=null),this._resizeTimer=_.delay($.proxy(function(){var t=this.getVisible();$.each(t,function(t,e){e.clearUpdatedTo(),e.position()})},this),15)},_getTooltips:function(t,e){var i,n=[],r=[];if(_.isElement(t)?(i=$(t).data("tipped-uids"))&&(n=n.concat(i)):$(t).each(function(t,e){(i=$(e).data("tipped-uids"))&&(n=n.concat(i))}),!n[0]&&!e){var o=this.getTooltipByTooltipElement($(t).closest(".tpd-tooltip")[0]);o&&o.element&&(i=$(o.element).data("tipped-uids")||[])&&(n=n.concat(i))}return n.length>0&&$.each(n,$.proxy(function(t,e){var i;(i=this.tooltips[e])&&r.push(i)},this)),r},findElement:function(t){var e=[];return _.isElement(t)&&(e=this._getTooltips(t)),e[0]&&e[0].element},get:function(t){var e=$.extend({api:!1},arguments[1]||{}),i=[];return _.isElement(t)?i=this._getTooltips(t):t instanceof $?t.each($.proxy(function(t,e){var n=this._getTooltips(e,!0);n.length>0&&(i=i.concat(n))},this)):"string"==$.type(t)&&$.each(this.tooltips,function(e,n){n.element&&$(n.element).is(t)&&i.push(n)}),e.api&&$.each(i,function(t,e){e.is("api",!0)}),i},getTooltipByTooltipElement:function(t){if(!t)return null;var e=null;return $.each(this.tooltips,function(i,n){n.is("build")&&n._tooltip[0]===t&&(e=n)}),e},getBySelector:function(t){var e=[];return $.each(this.tooltips,function(i,n){n.element&&$(n.element).is(t)&&e.push(n)}),e},getNests:function(){var t=[];return $.each(this.tooltips,function(e,i){i.is("nest")&&t.push(i)}),t},show:function(t){$(this.get(t)).each(function(t,e){e.show(!1,!0)})},hide:function(t){$(this.get(t)).each(function(t,e){e.hide()})},toggle:function(t){$(this.get(t)).each(function(t,e){e.toggle()})},hideAll:function(t){$.each(this.getVisible(),function(e,i){return!(!t||t!=i)||(!!(i.element&&i.element.dataset&&i.element.dataset.ignoreHideAll)||void i.hide())})},refresh:function(t){var e;e=t?$.grep(this.get(t),function(t){return t.is("visible")}):this.getVisible(),$.each(e,function(t,e){e.refresh()})},getVisible:function(){var t=[];return $.each(this.tooltips,function(e,i){i.visible()&&t.push(i)}),t},isVisibleByElement:function(t){var e=!1;return _.isElement(t)&&$.each(this.getVisible()||[],function(i,n){return n.element==t?(e=!0,!1):void 0}),e},getHighestTooltip:function(){var t,e=0;return $.each(this.tooltips,function(i,n){n.zIndex>e&&(e=n.zIndex,t=n)}),t},resetZ:function(){this.getVisible().length<=1&&$.each(this.tooltips,function(t,e){e.is("build")&&!e.options.zIndex&&e._tooltip.css({zIndex:e.zIndex=+Tooltips.options.startingZIndex})})},clearAjaxCache:function(){$.each(this.tooltips,$.proxy(function(t,e){e.options.ajax&&(e._cache&&e._cache.xhr&&(e._cache.xhr.abort(),e._cache.xhr=null),e.is("updated",!1),e.is("updating",!1),e.is("sanitized",!1))},this)),AjaxCache.clear()},add:function(t){this.tooltips[t.uid]=t},remove:function(t){var e=this._getTooltips(t);this.removeTooltips(e)},removeTooltips:function(t){t&&$.each(t,$.proxy(function(t,e){var i=e.uid;delete this.tooltips[i],Browser.IE&&Browser.IE<9?_.defer(function(){e.remove()}):e.remove()},this))},removeDetached:function(){var t=this.getNests(),e=[];t.length>0&&$.each(t,function(t,i){i.is("detached")&&(e.push(i),i.attach())}),$.each(this.tooltips,$.proxy(function(t,e){e.element&&!_.element.isAttached(e.element)&&this.remove(e.element)},this)),$.each(e,function(t,e){e.detach()})},removeAll:function(){$.each(this.tooltips,$.proxy(function(t,e){e.element&&this.remove(e.element)},this)),this.tooltips={}},setDefaultSkin:function(t){this.options.defaultSkin=t||"dark"},setStartingZIndex:function(t){this.options.startingZIndex=t||0}};Tooltips.Position={inversedPosition:{left:"right",right:"left",top:"bottom",bottom:"top",middle:"middle",center:"center"},getInversedPosition:function(t){var e=Position.split(t),i=e[1],n=e[2],r=Position.getOrientation(t),o=$.extend({horizontal:!0,vertical:!0},arguments[1]||{});return"horizontal"==r?(o.vertical&&(i=this.inversedPosition[i]),o.horizontal&&(n=this.inversedPosition[n])):(o.vertical&&(n=this.inversedPosition[n]),o.horizontal&&(i=this.inversedPosition[i])),i+n},getTooltipPositionFromTarget:function(t){var e=Position.split(t);return this.getInversedPosition(e[1]+this.inversedPosition[e[2]])}},$.extend(Tooltip.prototype,{supportsLoading:Support.css.transform&&Support.css.animation,initialize:function(element,content){if(this.element=element,this.element){var options;"object"!=$.type(content)||_.isElement(content)||_.isText(content)||_.isDocumentFragment(content)||content instanceof $?options=arguments[2]||{}:(options=content,content=null);var dataOptions=$(element).data("tipped-options");dataOptions&&(options=deepExtend($.extend({},options),eval("({"+dataOptions+"})"))),this.options=Options.create(options),this._cache={dimensions:{width:0,height:0},events:[],timers:{},layouts:{},is:{},fnCallFn:"",updatedTo:{}},this.queues={showhide:$({})};var title=$(element).attr("title")||$(element).data("tipped-restore-title");if(!content){var dt=$(element).attr("data-tipped");if(dt?content=dt:title&&(content=title),content){var SCRIPT_REGEX=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi;content=content.replace(SCRIPT_REGEX,"")}}if((!content||content instanceof $&&!content[0])&&!(this.options.ajax&&this.options.ajax.url||this.options.inline))return void(this._aborted=!0);title&&($(element).data("tipped-restore-title",title),$(element)[0].setAttribute("title","")),this.content=content,this.title=$(this.element).data("tipped-title"),"undefined"!=$.type(this.options.title)&&(this.title=this.options.title),this.zIndex=this.options.zIndex||+Tooltips.options.startingZIndex;var uids=$(element).data("tipped-uids");uids||(uids=[]);var uid=getUID();this.uid=uid,uids.push(uid),$(element).data("tipped-uids",uids);var parentTooltipElement=$(this.element).closest(".tpd-tooltip")[0],parentTooltip;parentTooltipElement&&(parentTooltip=Tooltips.getTooltipByTooltipElement(parentTooltipElement))&&parentTooltip.is("nest",!0);var target=this.options.target;this.target="mouse"==target?this.element:"element"!=target&&target?_.isElement(target)?target:target instanceof $&&target[0]?target[0]:this.element:this.element,this.options.inline&&(this.content=$("#"+this.options.inline)[0]),this.options.ajax&&(this.__content=this.content),"function"==$.type(this.content)&&(this._fn=this.content),this.preBuild(),Tooltips.add(this)}},remove:function(){this.unbind(),this.clearTimers(),this.restoreElementToMarker(),this.stopLoading(),this.abort(),this.is("build")&&this._tooltip&&(this._tooltip.remove(),this._tooltip=null);var t=$(this.element).data("tipped-uids")||[],e=$.inArray(this.uid,t);if(e>-1&&(t.splice(e,1),$(this.element).data("tipped-uids",t)),t.length<1){var i,n="tipped-restore-title";(i=$(this.element).data(n))&&(""!=!$(this.element)[0].getAttribute("title")&&$(this.element).attr("title",i),$(this.element).removeData(n)),$(this.element).removeData("tipped-uids")}var r=$(this.element).attr("class")||"",o=r.replace(/(tpd-delegation-uid-)\d+/g,"").replace(/^\s\s*/,"").replace(/\s\s*$/,"");$(this.element).attr("class",o)},detach:function(){this.options.detach&&!this.is("detached")&&(this._tooltip&&this._tooltip.detach(),this.is("detached",!0))},attach:function(){if(this.is("detached")){var t;if("string"==$.type(this.options.container)){var e=this.target;"mouse"==e&&(e=this.element),t=$($(e).closest(this.options.container).first())}else t=$(this.options.container);t[0]||(t=$(document.body)),t.append(this._tooltip),this.is("detached",!1)}},preBuild:function(){this.is("detached",!0);var t={left:"-10000px",top:"-10000px",opacity:0,zIndex:this.zIndex};this._tooltip=$("<div>").addClass("tpd-tooltip").addClass("tpd-skin-"+this.options.skin).addClass("tpd-size-"+this.options.size).css(t).hide(),this.createPreBuildObservers()},build:function(){this.is("build")||(this.attach(),Browser.IE&&Browser.IE<7&&this._tooltip.append(this.iframeShim=$("<iframe>").addClass("tpd-iframeshim").attr({frameBorder:0,src:"javascript:'';"})),this._tooltip.append(this._skin=$("<div>").addClass("tpd-skin")).append(this._contentWrapper=$("<div>").addClass("tpd-content-wrapper").append(this._contentSpacer=$("<div>").addClass("tpd-content-spacer").append(this._titleWrapper=$("<div>").addClass("tpd-title-wrapper").append(this._titleSpacer=$("<div>").addClass("tpd-title-spacer").append(this._titleRelative=$("<div>").addClass("tpd-title-relative").append(this._titleRelativePadder=$("<div>").addClass("tpd-title-relative-padder").append(this._title=$("<div>").addClass("tpd-title"))))).append(this._close=$("<div>").addClass("tpd-close").append($("<div>").addClass("tpd-close-icon").html("&times;")))).append(this._contentRelative=$("<div>").addClass("tpd-content-relative").append(this._contentRelativePadder=$("<div>").addClass("tpd-content-relative-padder").append(this._content=$("<div>").addClass("tpd-content"))).append(this._inner_close=$("<div>").addClass("tpd-close").append($("<div>").addClass("tpd-close-icon").html("&times;")))))),this.skin=new Skin(this),this._contentSpacer.css({"border-radius":Math.max(this.skin._css.radius-this.skin._css.border,0)}),this.createPostBuildObservers(),this.is("build",!0))},createPostBuildObservers:function(){this._tooltip.delegate(".tpd-close, .close-tooltip","click",$.proxy(function(t){t.stopPropagation(),t.preventDefault(),this.is("api",!1),this.hide(!0)},this))},createPreBuildObservers:function(){this.bind(this.element,"mouseenter",this.setActive),this.bind(this._tooltip,Support.touch&&Browser.MobileSafari?"touchstart":"mouseenter",this.setActive),this.bind(this.element,"mouseleave",function(t){this.setIdle(t)}),this.bind(this._tooltip,"mouseleave",function(t){shouldSetIdle=!0,relatedEl=Tooltips.findElement(t.relatedTarget),this.options.isTippedParent&&relatedEl&&relatedEl.dataset.tippedParent&&relatedEl.dataset.tippedParent==this.element.id&&(shouldSetIdle=!1),this.options.tippedParent&&(parentTippedElement=document.querySelector("[id='"+this.options.tippedParent+"']"),parentTipped=Tooltips.get(parentTippedElement)[0],!relatedEl&&parentTipped&&parentTipped.options.hideAfter&&setTimeout(function(){Tooltips.hideAll(parentTippedElement)},this.options.hideAfter)),shouldSetIdle&&this.setIdle(t)}),this.options.showOn&&($.each(this.options.showOn,$.proxy(function(t,e){var i,n=!1;switch(t){case"element":i=this.element,this.options.hideOn&&this.options.showOn&&"click"==this.options.hideOn.element&&"click"==this.options.showOn.element&&(n=!0,this.is("toggleable",n));break;case"tooltip":i=this._tooltip;break;case"target":i=this.target}if(i&&e){var r=e;this.bind(i,r,"click"==e&&n?function(){this.is("api",!1),this.toggle()}:function(){this.is("api",!1),this.showDelayed()})}},this)),Support.touch&&Browser.MobileSafari&&this.bind(this._tooltip,"touchend",function(){this._tooltipTouchEndTime=(new Date).getTime()})),this.options.hideOn&&$.each(this.options.hideOn,$.proxy(function(t,e){var i;switch(t){case"element":if(this.is("toggleable")&&"click"==e)return;i=this.element;break;case"tooltip":i=this._tooltip;break;case"target":i=this.target}if(i&&e){var n=e;Support.touch&&Browser.MobileSafari&&/^(target|element)/.test(t)&&/mouse(leave|out)/.test(n)?this.bind(i,n,function(t){if(this._tooltipTouchEndTime&&/^mouse(leave|out)$/.test(t.type)){if((new Date).getTime()-this._tooltipTouchEndTime<450)return}this.is("api",!1),this.hideDelayed()}):this.bind(i,n,function(){this.is("api",!1),this.hideDelayed()})}},this)),this.options.hideOnClickOutside&&($(this.element).addClass("tpd-hideOnClickOutside"),this.bind(document.documentElement,"click touchend",$.proxy(function(t){if(this.visible()){var e=$(t.target).closest(".tpd-tooltip, .tpd-hideOnClickOutside")[0];(!e||e&&e!=this._tooltip[0]&&e!=this.element)&&this.hide()}},this))),"mouse"==this.options.target&&this.bind(this.element,"mouseenter mousemove",$.proxy(function(t){this._cache.event=t},this));var t=!1;this.options.showOn&&"mouse"==this.options.target&&!this.options.fixed&&(t=!0),t&&this.bind(this.element,"mousemove",function(){this.is("build")&&(this.is("api",!1),this.position())})}}),$.extend(Tooltip.prototype,{stop:function(){if(this._tooltip){this.queues.showhide.queue([]),this._tooltip.stop(1,0)}},showDelayed:function(){this.is("disabled")||(this.clearTimer("hide"),this.is("visible")||this.getTimer("show")||this.setTimer("show",$.proxy(function(){this.clearTimer("show"),this.show()},this),this.options.showDelay||1))},show:function(){if(this.clearTimer("hide"),!this.visible()&&!this.is("disabled")&&$(this.target).is(":visible")){this.is("visible",!0),this.attach(),this.stop();var t=this.queues.showhide;this.is("updated")||this.is("updating")||t.queue($.proxy(function(t){this._onResizeDimensions={width:0,height:0},this.update($.proxy(function(e){return e?(this.is("visible",!1),void this.detach()):void t()},this))},this)),t.queue($.proxy(function(t){this.is("sanitized")?(this.stopLoading(),this._contentWrapper.css({visibility:"visible"}),this.is("resize-to-content",!0),t()):(this._contentWrapper.css({visibility:"hidden"}),this.startLoading(),this.sanitize($.proxy(function(){this.stopLoading(),this._contentWrapper.css({visibility:"visible"}),this.is("resize-to-content",!0),t()},this)))},this)),t.queue($.proxy(function(t){this.position(),this.raise(),t()},this)),t.queue($.proxy(function(t){if(this.is("updated")&&"function"==$.type(this.options.onShow)){var e=new Visible(this._tooltip);this.options.onShow(this._content[0],this.element),e.restore(),t()}else t()},this)),t.queue($.proxy(function(t){this._show(this.options.fadeIn,function(){t()})},this))}},_show:function(t,e){t=("number"==$.type(t)?t:this.options.fadeIn)||0,e=e||"function"==$.type(arguments[0])&&arguments[0],this.options.hideOthers&&Tooltips.hideAll(this),this._tooltip.fadeTo(t,1,$.proxy(function(){e&&e()},this))},hideDelayed:function(){this.clearTimer("show"),this.getTimer("hide")||!this.visible()||this.is("disabled")||this.setTimer("hide",$.proxy(function(){this.clearTimer("hide"),this.hide()},this),this.options.hideDelay||1)},hide:function(t,e){if(this.clearTimer("show"),this.visible()&&!this.is("disabled")){this.is("visible",!1),this.stop();var i=this.queues.showhide;i.queue($.proxy(function(t){this.abort(),t()},this)),i.queue($.proxy(function(e){this._hide(t,e)},this)),i.queue(function(t){Tooltips.resetZ(),t()}),i.queue($.proxy(function(t){this.clearUpdatedTo(),t()},this)),"function"==$.type(this.options.afterHide)&&this.is("updated")&&i.queue($.proxy(function(t){this.options.afterHide(this._content[0],this.element),t()},this)),this.options.cache||!this.options.ajax&&!this._fn||i.queue($.proxy(function(t){this.is("updated",!1),this.is("updating",!1),this.is("sanitized",!1),t()},this)),"function"==$.type(e)&&i.queue(function(t){e(),t()}),i.queue($.proxy(function(t){this.detach(),t()},this))}},_hide:function(t,e){e=e||"function"==$.type(arguments[0])&&arguments[0],this.attach(),this._tooltip.fadeTo(t?0:this.options.fadeOut,0,$.proxy(function(){this.stopLoading(),this.is("resize-to-content",!1),this._tooltip&&this._tooltip.hide(),e&&e()},this))},toggle:function(){this.is("disabled")||this[this.visible()?"hide":"show"]()},raise:function(){if(this.is("build")&&!this.options.zIndex){var t=Tooltips.getHighestTooltip();t&&t!=this&&this.zIndex<=t.zIndex&&(this.zIndex=t.zIndex+1,this._tooltip.css({"z-index":this.zIndex}),this._tooltipShadow&&(this._tooltipShadow.css({"z-index":this.zIndex}),this.zIndex=t.zIndex+2,this._tooltip.css({"z-index":this.zIndex})))}}}),$.extend(Tooltip.prototype,{createElementMarker:function(){!this.elementMarker&&this.content&&_.element.isAttached(this.content)&&($(this.content).data("tpd-restore-inline-display",$(this.content).css("display")),this.elementMarker=$("<div>").hide(),$(this.content).before($(this.elementMarker).hide()))},restoreElementToMarker:function(){var t;this.content,this.elementMarker&&this.content&&((t=$(this.content).data("tpd-restore-inline-display"))&&$(this.content).css({display:t}),$(this.elementMarker).before(this.content).remove())},startLoading:function(){this.is("loading")||(this.build(),this.is("loading",!0),this.options.spinner&&(this._tooltip.addClass("tpd-is-loading"),this.skin.startLoading(),this.is("resize-to-content")||(this.position(),this.raise(),this._show())))},stopLoading:function(){this.build(),this.is("loading",!1),this.options.spinner&&(this._tooltip&&this._tooltip.removeClass("tpd-is-loading"),this.skin.stopLoading())},abort:function(){this.abortAjax(),this.abortSanitize(),this.is("refreshed-before-sanitized",!1)},abortSanitize:function(){this._cache.voila&&(this._cache.voila.abort(),this._cache.voila=null)},abortAjax:function(){this._cache.xhr&&(this._cache.xhr.abort(),this._cache.xhr=null,this.is("updated",!1),this.is("updating",!1))},update:function(t){if(!this.is("updating")){this.is("updating",!0),this.build();var e=this.options.inline?"inline":this.options.ajax?"ajax":_.isElement(this.content)||_.isText(this.content)||_.isDocumentFragment(this.content)?"element":this._fn?"function":"html";switch(this._contentWrapper.css({visibility:"hidden"}),e){case"html":case"element":case"inline":if(this.is("updated"))return void(t&&t());this._update(this.content,t);break;case"function":if(this.is("updated"))return void(t&&t());var i=this._fn(this.element);if(!i)return this.is("updating",!1),void(t&&t(!0));this._update(i,t);break;case"ajax":var n=this.options.ajax||{},r=n.url||this.__content,o=n.data||{},e=n.type||"GET",s=n.dataType,a={url:r,data:o};e&&$.extend(a,{type:e}),s&&$.extend(a,{dataType:s});var l=$.extend({},a,n);l.method&&(l=$.extend({},l),delete l.method),$.each("complete error success".split(" "),$.proxy(function(e,i){l[i]||(l[i]="success"==i?function(t,e,i){return i.responseText}:function(){}),l[i]=_.wrap(l[i],$.proxy(function(e){var n=_slice.call(arguments,1),r=$.type("object"==n[0])?n[0]:n[2];if(!r.statusText||"abort"!=r.statusText){this.options.cache&&AjaxCache.set({url:l.url,type:l.type,data:l.data},i,n),this._cache.xhr=null;var o=e.apply(this,n);o&&this._update(o,t)}},this))},this));var c;if(this.options.cache&&(c=AjaxCache.get(l))&&c.callbacks.success)return void $.each(c.callbacks,$.proxy(function(t,e){"function"==$.type(l[t])&&l[t].apply(this,e)},this));this.startLoading(),this._cache.xhr=$.ajax(l)}}},_update:function(t,e){var i={title:this.options.title,close:this.options.close};"string"==$.type(t)||_.isElement(t)||_.isText(t)||_.isDocumentFragment(t)||t instanceof $?i.content=t:$.extend(i,t);var t=i.content,n=i.title,r=i.close;this.content=t,this.title=n,this.close=r,this.createElementMarker(),(_.isElement(t)||t instanceof $)&&$(t).show(),this._content.html(this.content),this._title.html(n&&"string"==$.type(n)?n:""),this._titleWrapper[n?"show":"hide"](),this._close[(this.title||this.options.title)&&r?"show":"hide"]();var o=r&&!(this.options.title||this.title),s=r&&!(this.options.title||this.title)&&"overlap"!=r,a=r&&(this.options.title||this.title)&&"overlap"!=r;this._inner_close[o?"show":"hide"](),this._tooltip[(s?"add":"remove")+"Class"]("tpd-has-inner-close"),this._tooltip[(a?"add":"remove")+"Class"]("tpd-has-title-close"),this._content[(this.options.padding?"remove":"add")+"Class"]("tpd-content-no-padding"),this.finishUpdate(e)},sanitize:function(t){return!this.options.voila||this._content.find("img:not([data-ignore-tipped-sanitize])").length<1?(this.is("sanitized",!0),void(t&&t())):void(this._cache.voila=Voila(this._content,{method:"onload"},$.proxy(function(e){this._markImagesAsSanitized(e.images),this.is("refreshed-before-sanitized")?(this.is("refreshed-before-sanitized",!1),this.sanitize(t)):(this.is("sanitized",!0),t&&t())},this)))},_markImagesAsSanitized:function(t){$.each(t,function(t,e){var i=e.img;$(i).data("completed-src",e.img.src)})},_hasAllImagesSanitized:function(){var t=!0;return this._content.find("img:not([data-ignore-tipped-sanitize])").each(function(e,i){var n=$(i).data("completed-src");return n&&i.src==n?void 0:(t=!1,!1)}),t},refresh:function(){if(this.visible()){if(!this.is("sanitized"))return void this.is("refreshed-before-sanitized",!0);this.is("refreshing",!0),this.clearTimer("refresh-spinner"),!this.options.voila||this._content.find("img:not([data-ignore-tipped-sanitize])").length<1||this._hasAllImagesSanitized()?(this.is("should-update-dimensions",!0),this.position(),this.is("refreshing",!1)):(this.is("sanitized",!1),this._contentWrapper.css({visibility:"hidden"}),this.startLoading(),this.sanitize($.proxy(function(){this._contentWrapper.css({visibility:"visible"}),this.stopLoading(),this.is("should-update-dimensions",!0),this.position(),this.is("refreshing",!1)},this)))}},finishUpdate:function(t){if(this.is("updated",!0),this.is("updating",!1),"function"==$.type(this.options.afterUpdate)){var e=this._contentWrapper.css("visibility");e&&this._contentWrapper.css({visibility:"visible"}),this.options.afterUpdate(this._content[0],this.element),e&&this._contentWrapper.css({visibility:"hidden"})}t&&t()}}),$.extend(Tooltip.prototype,{clearUpdatedTo:function(){this._cache.updatedTo={}},updateDimensionsToContent:function(t,e){this.skin.build();var i=this.is("loading"),n=this._cache.updatedTo;if((this._maxWidthPass||this.is("api")||this.is("should-update-dimensions")||n.stemPosition!=e||n.loading!=i)&&(!i||!this.is("resize-to-content"))){this._cache.updatedTo={type:this.is("resize-to-content")?"content":"spinner",loading:this.is("loading"),stemPosition:e},this.is("should-update-dimensions")&&this.is("should-update-dimensions",!1);var t=t||this.options.position.target,e=e||this.options.position.tooltip,r=Position.getSide(e),o=Position.getOrientation(e),s=this.skin._css.border;this._tooltip.addClass("tpd-tooltip-measuring");var a=this._tooltip.attr("style");this._tooltip.removeAttr("style");var l={top:s,right:s,bottom:s,left:s},c=0;if("vertical"==Position.getOrientation(e)){this.options.stem&&(l[r]=this.skin["stem_"+r].getMath().dimensions.outside.height);var u=this.getMouseRoom();u[Position._flip[r]]&&(l[r]+=u[Position._flip[r]]);var p=this.getContainmentLayout(e),d=this.getPaddingLine(t),h=!1;Position.isPointWithinBoxLayout(d.x1,d.y1,p)||Position.isPointWithinBoxLayout(d.x2,d.y2,p)?h=!0:$.each("top right bottom left".split(" "),$.proxy(function(t,e){var i=this.getSideLine(p,e);return Position.intersectsLine(d.x1,d.y1,d.x2,d.y2,i.x1,i.y1,i.x2,i.y2)?(h=!0,!1):void 0},this)),h&&(c="left"==r?d.x1-p.position.left:p.position.left+p.dimensions.width-d.x1,l[r]+=c)}if(this.options.offset&&"vertical"==o){var f=Position.adjustOffsetBasedOnPosition(this.options.offset,this.options.position.target,t);0!==f.x&&(l.right+=Math.abs(f.x))}var c;this.options.containment&&(c=this.options.containment.padding)&&($.each(l,function(t){l[t]+=c}),"vertical"==o?l["left"==r?"left":"right"]-=c:l["top"==r?"top":"bottom"]-=c);var m=Bounds.viewport(),g=this.close&&"overlap"!=this.close&&!this.title,y={width:0,height:0};g&&(y=this._innerCloseDimensions||{width:this._inner_close.outerWidth(!0),height:this._inner_close.outerHeight(!0)},this._innerCloseDimensions=y),this._contentRelativePadder.css({"padding-right":y.width}),this._contentSpacer.css({width:m.width-l.left-l.right});var v={width:this._content.innerWidth()+y.width,height:Math.max(this._content.innerHeight(),y.height||0)},b={width:0,height:0};if(this.title){var w={width:0,height:0};this._titleWrapper.add(this._titleSpacer).css({width:"auto",height:"auto"}),this.close&&"overlap"!=this.close&&(w={width:this._close.outerWidth(!0),height:this._close.outerHeight(!0)},this._close.hide()),this._maxWidthPass&&v.width>this.options.maxWidth&&this._titleRelative.css({width:v.width}),this._titleRelativePadder.css({"padding-right":w.width});var k=parseFloat(this._titleWrapper.css("border-bottom-width"));b={width:this.title?this._titleWrapper.innerWidth():0,height:Math.max(this.title?this._titleWrapper.innerHeight()+k:0,w.height+k)},b.width>m.width-l.left-l.right&&(b.width=m.width-l.left-l.right,this._titleSpacer.css({width:b.width}),b.height=Math.max(this.title?this._titleWrapper.innerHeight()+k:0,w.height+k)),v.width=Math.max(b.width,v.width),v.height+=b.height,this._titleWrapper.css({height:Math.max(this.title?this._titleWrapper.innerHeight():0,w.height)}),this.close&&this._close.show()}if(this.options.stem){var x="vertical"==o?"height":"width",T=this.skin["stem_"+r].getMath(),C=T.outside.width+2*this.skin._css.radius;v[x]<C&&(v[x]=C)}if(this._contentSpacer.css({width:v.width}),v.height!=Math.max(this._content.innerHeight(),y.height)+(this.title?this._titleRelative.outerHeight():0)&&v.width++,this.is("resize-to-content")||(v=this.skin._css.spinner.dimensions),this.setDimensions(v),l={top:s,right:s,bottom:s,left:s},this.options.stem){var I=Position.getSide(e);l[I]=this.skin.stem_top.getMath().dimensions.outside.height}this._contentSpacer.css({"margin-top":l.top,"margin-left":+l.left,width:v.width}),(this.title||this.close)&&this._titleWrapper.css({height:this._titleWrapper.innerHeight(),width:v.width}),this._tooltip.removeClass("tpd-tooltip-measuring"),this._tooltip.attr("style",a);var _=this._contentRelative.add(this._titleRelative);this.options.maxWidth&&v.width>this.options.maxWidth&&!this._maxWidthPass&&this.is("resize-to-content")&&(_.css({width:this.options.maxWidth}),this._maxWidthPass=!0,this.updateDimensionsToContent(t,e),this._maxWidthPass=!1,_.css({width:"auto"}))}},setDimensions:function(t){this.skin.setDimensions(t)},getContainmentSpace:function(t,e){var i=this.getContainmentLayout(t,e),n=this.getTargetLayout(),r=n.position,o=n.dimensions,s=i.position,a=i.dimensions,l={top:Math.max(r.top-s.top,0),bottom:Math.max(s.top+a.height-(r.top+o.height),0),left:Math.max(r.left-s.left,0),right:Math.max(s.left+a.width-(r.left+o.width),0)};return r.top>s.top+a.height&&(l.top-=r.top-(s.top+a.height)),r.top+o.height<s.top&&(l.bottom-=s.top-(r.top+o.height)),r.left>s.left+a.width&&s.left+a.width>=r.left&&(l.left-=r.left-(s.left+a.width)),r.left+o.width<s.left&&(l.right-=s.left-(r.left+o.width)),this._cache.layouts.containmentSpace=l,l},position:function(){if(this.visible()){this.is("positioning",!0),this._cache.layouts={},this._cache.dimensions;var t=this.options.position.target,e=this.options.position.tooltip,i=e,n=t;this.updateDimensionsToContent(n,i);var r=this.getPositionBasedOnTarget(n,i),o=deepExtend(r),s=[];if(this.options.containment){var a=!1,l={};if($.each("top right bottom left".split(" "),$.proxy(function(t,e){(l[e]=this.isSideWithinContainment(e,i,!0))&&(a=!0)},this)),a||(o.contained=!0),o.contained)this.setPosition(o);else{s.unshift({position:o,targetPosition:n,stemPosition:i});if(n=Position.flip(t),i=Position.flip(e),l[Position.getSide(n)]?(this.updateDimensionsToContent(n,i),o=this.getPositionBasedOnTarget(n,i)):o.contained=!1,o.contained)this.setPosition(o,i);else{s.unshift({position:o,targetPosition:n,stemPosition:i});var c,u=t,p=this.getContainmentSpace(i,!0),d="horizontal"==Position.getOrientation(u)?["left","right"]:["top","bottom"];c=p[d[0]]===p[d[1]]?"horizontal"==Position.getOrientation(u)?"left":"top":d[p[d[0]]>p[d[1]]?0:1];var h=Position.split(u)[1],f=c+h,m=Position.flip(f);if(n=f,i=m,l[Position.getSide(n)]?(this.updateDimensionsToContent(n,i),o=this.getPositionBasedOnTarget(n,i)):o.contained=!1,o.contained)this.setPosition(o,i);else{s.unshift({position:o,targetPosition:n,stemPosition:i});var g,y=[];if($.each(s,function(t,e){if(e.position.top>=0&&e.position.left>=0)g=e;else{var i=e.position.top>=0?1:Math.abs(e.position.top),n=e.position.left>=0?1:Math.abs(e.position.left);y.push({result:e,negativity:i*n})}}),!g){var v=y[y.length-1];$.each(y,function(t,e){e.negativity<v.negativity&&(v=e)}),g=v.result}this.updateDimensionsToContent(g.targetPosition,g.stemPosition,!0),this.setPosition(g.position,g.stemPosition)}}}}else this.setPosition(o);this._cache.dimensions=this.skin._vars.dimensions,this.skin.paint(),this.is("positioning",!1)}},getPositionBasedOnTarget:function(t,e){var e=e||this.options.position.tooltip,i=this.getTargetDimensions(),n={left:0,top:0},r={left:0,top:0};Position.getSide(t);var o=this.skin._vars,s=o.frames[Position.getSide(e)],a=Position.getOrientation(t),l=Position.split(t);if("horizontal"==a){var c=Math.floor(.5*i.width);switch(l[2]){case"left":r.left=c;break;case"middle":n.left=i.width-c,r.left=n.left;break;case"right":n.left=i.width,r.left=i.width-c}"bottom"==l[1]&&(n.top=i.height,r.top=i.height)}else{var c=Math.floor(.5*i.height);switch(l[2]){case"top":r.top=c;break;case"middle":n.top=i.height-c,r.top=n.top;break;case"bottom":r.top=i.height-c,n.top=i.height}"right"==l[1]&&(n.left=i.width,r.left=i.width)}var u=this.getTargetPosition(),p=$.extend({},i,{top:u.top,left:u.left,connection:n,max:r}),d={width:s.dimensions.width,height:s.dimensions.height,top:0,left:0,connection:o.connections[e].connection,stem:o.connections[e].stem};if(d.top=p.top+p.connection.top,d.left=p.left+p.connection.left,d.top-=d.connection.top,d.left-=d.connection.left,this.options.stem){var h=o.stemDimensions.width,f={stem:{top:d.top+d.stem.connection.top,left:d.left+d.stem.connection.left},connection:{top:p.top+p.connection.top,left:p.left+p.connection.left},max:{top:p.top+p.max.top,left:p.left+p.max.left}};if(!Position.isPointWithinBox(f.stem.left,f.stem.top,f.connection.left,f.connection.top,f.max.left,f.max.top)){var f={stem:{top:d.top+d.stem.connection.top,left:d.left+d.stem.connection.left},connection:{top:p.top+p.connection.top,left:p.left+p.connection.left},max:{top:p.top+p.max.top,left:p.left+p.max.left}},m={connection:Position.getDistance(f.stem.left,f.stem.top,f.connection.left,f.connection.top),max:Position.getDistance(f.stem.left,f.stem.top,f.max.left,f.max.top)},g=Math.min(m.connection,m.max),y=f[m.connection<=m.max?"connection":"max"],v="horizontal"==Position.getOrientation(e)?"left":"top";if(Position.getDistance(f.connection.left,f.connection.top,f.max.left,f.max.top)>=h){var b={top:0,left:0},w=y[v]<f.stem[v]?-1:1;b[v]=g*w,b[v]+=Math.floor(.5*h)*w,d.left+=b.left,d.top+=b.top}else{$.extend(f,{center:{top:Math.round(p.top+.5*i.height),left:Math.round(p.left+.5*i.left)}});var k={connection:Position.getDistance(f.center.left,f.center.top,f.connection.left,f.connection.top),max:Position.getDistance(f.center.left,f.center.top,f.max.left,f.max.top)},g=m[k.connection<=k.max?"connection":"max"],x={top:0,left:0},w=y[v]<f.stem[v]?-1:1;x[v]=g*w,d.left+=x.left,d.top+=x.top}}}if(this.options.offset){var T=$.extend({},this.options.offset);T=Position.adjustOffsetBasedOnPosition(T,this.options.position.target,t),d.top+=T.y,d.left+=T.x}var C=this.getContainment({top:d.top,left:d.left},e),I=C.horizontal&&C.vertical,_={x:0,y:0},S=Position.getOrientation(e);if(!C[S]){var A="horizontal"==S,O=A?["left","right"]:["up","down"],P=A?"x":"y",E=A?"left":"top",M=C.correction[P],L=this.getContainmentLayout(e),D=L.position[A?"left":"top"];if(0!==M){var j=o.connections[e].move,N=j[O[0>-1*M?0:1]],F=0>M?-1:1;if(N>=M*F&&d[E]+M>=D)d[E]+=M,_[P]=-1*M,I=!0;else if(Position.getOrientation(t)==Position.getOrientation(e)){if(d[E]+=N*F,_[P]=-1*N*F,d[E]<D){var R=D-d[E],U=j[O[0]]+j[O[1]],R=Math.min(R,U);d[E]+=R;var z=_[P]-R;z>=o.connections[e].move[O[0]]&&z<=o.connections[e].move[O[1]]&&(_[P]-=R)}C=this.getContainment({top:d.top,left:d.left},e);var B=C.correction[P],H=deepExtend({},d);this.options.offset&&(H.left-=this.options.offset.x,H.top-=this.options.offset.y);var f={stem:{top:H.top+d.stem.connection.top,left:H.left+d.stem.connection.left}};f.stem[E]+=_[P];var Y=this.getTargetLayout(),h=o.stemDimensions.width,V=Math.floor(.5*h),G=D+L.dimensions[A?"width":"height"];if("x"==P){var W=Y.position.left+V;B>0&&(W+=Y.dimensions.width-2*V),(0>B&&f.stem.left+B>=W&&H.left+B>=D||B>0&&f.stem.left+B<=W&&H.left+B<=G)&&(H.left+=B)}else{var q=Y.position.top+V;B>0&&(q+=Y.dimensions.height-2*V),(0>B&&f.stem.top+B>=q&&H.top+B>=D||B>0&&f.stem.top+B<=q&&H.top+B<=G)&&(H.top+=B)}d=H,this.options.offset&&(d.left+=this.options.offset.x,d.top+=this.options.offset.y)}}C=this.getContainment({top:d.top,left:d.left},e),I=C.horizontal&&C.vertical}return{top:d.top,left:d.left,contained:I,shift:_}},setPosition:function(t,e){var i=this._position;if(!i||i.top!=t.top||i.left!=t.left){var n;if(this.options.container!=document.body){if("string"==$.type(this.options.container)){var r=this.target;"mouse"==r&&(r=this.element),n=$($(r).closest(this.options.container).first())}else n=$(n);if(n[0]){var o=$(n).offset(),s={top:Math.round(o.top),left:Math.round(o.left)},a={top:Math.round($(n).scrollTop()),left:Math.round($(n).scrollLeft())};t.top-=s.top,t.top+=a.top,t.left-=s.left,t.left+=a.left}}this._position=t,this._tooltip.css({top:t.top,left:t.left})}this.skin.setStemPosition(e||this.options.position.tooltip,t.shift||{x:0,y:0})},getSideLine:function(t,e){var i=t.position.left,n=t.position.top,r=t.position.left,o=t.position.top;switch(e){case"top":r+=t.dimensions.width;break;case"bottom":n+=t.dimensions.height,r+=t.dimensions.width,o+=t.dimensions.height;break;case"left":o+=t.dimensions.height;break;case"right":i+=t.dimensions.width,r+=t.dimensions.width,o+=t.dimensions.height}return{x1:i,y1:n,x2:r,y2:o}},isSideWithinContainment:function(t,e,i){var n=this.getContainmentLayout(e,i),r=this.getTargetLayout(),o=this.getSideLine(r,t);if(Position.isPointWithinBoxLayout(o.x1,o.y1,n)||Position.isPointWithinBoxLayout(o.x2,o.y2,n))return!0;var s=!1;return $.each("top right bottom left".split(" "),$.proxy(function(t,e){var i=this.getSideLine(n,e);return Position.intersectsLine(o.x1,o.y1,o.x2,o.y2,i.x1,i.y1,i.x2,i.y2)?(s=!0,!1):void 0},this)),s},getContainment:function(t,e){var i={horizontal:!0,vertical:!0,correction:{y:0,x:0}};if(this.options.containment){var n=this.getContainmentLayout(e),r=this.skin._vars.frames[Position.getSide(e)].dimensions;this.options.containment&&((t.left<n.position.left||t.left+r.width>n.position.left+n.dimensions.width)&&(i.horizontal=!1,i.correction.x=t.left<n.position.left?n.position.left-t.left:n.position.left+n.dimensions.width-(t.left+r.width)),(t.top<n.position.top||t.top+r.height>n.position.top+n.dimensions.height)&&(i.vertical=!1,i.correction.y=t.top<n.position.top?n.position.top-t.top:n.position.top+n.dimensions.height-(t.top+r.height)))}return i},getContainmentLayout:function(t,e){var i={top:$(window).scrollTop(),left:$(window).scrollLeft()},n=this.target;"mouse"==n&&(n=this.element);var r,o=$(n).closest(this.options.containment.selector).first()[0];r=o&&"viewport"!=this.options.containment.selector?{dimensions:{width:$(o).innerWidth(),height:$(o).innerHeight()},position:$(o).offset()}:{dimensions:Bounds.viewport(),position:i};var s=this.options.containment.padding;if(s&&!e){var a=Math.max(r.dimensions.height,r.dimensions.width);if(2*s>a&&(s=Math.max(Math.floor(.5*a),0)),s){r.dimensions.width-=2*s,r.dimensions.height-=2*s,r.position.top+=s,r.position.left+=s;"vertical"==Position.getOrientation(t)?(r.dimensions.width+=s,"left"==Position.getSide(t)&&(r.position.left-=s)):(r.dimensions.height+=s,"top"==Position.getSide(t)&&(r.position.top-=s))}}return this._cache.layouts.containmentLayout=r,r},getMouseRoom:function(){var t={top:0,left:0,right:0,bottom:0};if("mouse"==this.options.target&&!this.is("api")){var e=Mouse.getActualPosition(this._cache.event),i=$(this.element).offset(),n={width:$(this.element).innerWidth(),height:$(this.element).innerHeight()};t={top:Math.max(0,e.top-i.top),bottom:Math.max(0,i.top+n.height-e.top),left:Math.max(0,e.left-i.left),right:Math.max(0,i.left+n.width-e.left)}}return t},getTargetPosition:function(){var t;if("mouse"==this.options.target)if(this.is("api")){var e=$(this.element).offset();t={top:Math.round(e.top),left:Math.round(e.left)}}else t=Mouse.getPosition(this._cache.event);else{var e=$(this.target).offset();t={top:Math.round(e.top),left:Math.round(e.left)}}return this._cache.layouts.targetPosition=t,t},getTargetDimensions:function(){if(this._cache.layouts.targetDimensions)return this._cache.layouts.targetDimensions;var t;return t="mouse"==this.options.target?Mouse.getDimensions():{width:$(this.target).innerWidth(),height:$(this.target).innerHeight()},this._cache.layouts.targetDimensions=t,t},getTargetLayout:function(){if(this._cache.layouts.targetLayout)return this._cache.layouts.targetLayout;var t={position:this.getTargetPosition(),dimensions:this.getTargetDimensions()};return this._cache.layouts.targetLayout=t,t},getPaddingLine:function(t){var e=this.getTargetLayout(),i="left";if("vertical"==Position.getOrientation(t))return this.getSideLine(e,Position.getSide(t));if(Position.isCorner(t)){var n=Position.inverseCornerPlane(t);return i=Position.getSide(n),this.getSideLine(e,i)}var r=this.getSideLine(e,i),o=Math.round(.5*e.dimensions.width);return r.x1+=o,r.x2+=o,r}}),$.extend(Tooltip.prototype,{setActive:function(){this.is("active",!0),this.visible()&&this.raise(),this.options.hideAfter&&this.clearTimer("idle")},setIdle:function(){this.is("active",!1),this.options.hideAfter&&this.setTimer("idle",$.proxy(function(){this.clearTimer("idle"),this.is("active")||this.hide()},this),this.options.hideAfter)}}),$.extend(Tooltip.prototype,{bind:function(t,e,i,n){e=e;var r=$.proxy(i,n||this);this._cache.events.push({element:t,eventName:e,handler:r}),$(t).bind(e,r)},unbind:function(){$.each(this._cache.events,function(t,e){$(e.element).unbind(e.eventName,e.handler)}),this._cache.events=[]}}),$.extend(Tooltip.prototype,{disable:function(){this.is("disabled")||this.is("disabled",!0)},enable:function(){this.is("disabled")&&this.is("disabled",!1)}}),$.extend(Tooltip.prototype,{is:function(t,e){return"boolean"==$.type(e)&&(this._cache.is[t]=e),this._cache.is[t]},visible:function(){return this.is("visible")}}),$.extend(Tooltip.prototype,{setTimer:function(t,e,i){this._cache.timers[t]=_.delay(e,i)},getTimer:function(t){return this._cache.timers[t]},clearTimer:function(t){this._cache.timers[t]&&(clearTimeout(this._cache.timers[t]),delete this._cache.timers[t])},clearTimers:function(){$.each(this._cache.timers,function(t,e){clearTimeout(e)}),this._cache.timers={}}}),$.extend(Tipped,{init:function(){Tooltips.init()},create:function(t,e){var i=$.extend({},arguments[2]||{}),n=[];return _.isElement(t)?n.push(new Tooltip(t,e,i)):$(t).each(function(t,r){n.push(new Tooltip(r,e,i))}),new Collection(n)},get:function(t){return new Collection(Tooltips.get(t))},findElement:function(t){return Tooltips.findElement(t)},hideAll:function(){return Tooltips.hideAll(),this},setDefaultSkin:function(t){return Tooltips.setDefaultSkin(t),this},visible:function(t){if(_.isElement(t))return Tooltips.isVisibleByElement(t);if("undefined"!=$.type(t)){var e=$(t),i=0;return $.each(e,function(t,e){Tooltips.isVisibleByElement(e)&&i++}),i}return Tooltips.getVisible().length},clearAjaxCache:function(){return Tooltips.clearAjaxCache(),this},refresh:function(t,e,i){return Tooltips.refresh(t,e,i),this},setStartingZIndex:function(t){return Tooltips.setStartingZIndex(t),this},remove:function(t){return Tooltips.remove(t),this}}),$.each("show hide toggle disable enable".split(" "),function(t,e){Tipped[e]=function(t){return this.get(t)[e](),this}}),$.extend(Tipped,{delegate:function(){Delegations.add.apply(Delegations,_slice.call(arguments))},undelegate:function(){Delegations.remove.apply(Delegations,_slice.call(arguments))}});var Delegations={_uid:0,_delegations:{},add:function(t,e,i){var i;"object"!=$.type(e)||_.isElement(e)?i=arguments[2]||{}:(i=e,e=null);var n=++this._uid,r=Options.create($.extend({},i));this._delegations[n]={uid:n,selector:t,content:e,options:r};var o=function(t){$(this).addClass("tpd-delegation-uid-"+n);var r=new Tooltip(this,e,i);r._cache.event=t,r.setActive(),r.showDelayed()};this._delegations[n].removeTitleHandler=$.proxy(this.removeTitle,this),$(document).delegate(t+":not(.tpd-delegation-uid-"+n+")","mouseenter",this._delegations[n].removeTitleHandler),this._delegations[n].handler=o,$(document).delegate(t+":not(.tpd-delegation-uid-"+n+")",r.showOn.element,o)},removeTitle:function(t){var e=t.currentTarget,i=$(e).attr("title");i&&($(e).data("tipped-restore-title",i),$(e)[0].setAttribute("title",""))},remove:function(t){$.each(this._delegations,$.proxy(function(e,i){i.selector==t&&($(document).undelegate(t+":not(.tpd-delegation-uid-"+e+")","mouseenter",i.removeTitleHandler).undelegate(t+":not(.tpd-delegation-uid-"+e+")",i.options.showOn.element,i.handler),delete this._delegations[e])},this))},removeAll:function(){$.each(this._delegations,$.proxy(function(t,e){$(document).undelegate(selector+":not(.tpd-delegation-uid-"+t+")","mouseenter",e.removeTitleHandler).undelegate(e.selector+":not(.tpd-delegation-uid-"+t+")",e.options.showOn.element,e.handler),delete this._delegations[t]},this))}};return $.extend(Collection.prototype,{initialize:function(t){return this.tooltips=t,this},items:function(){return $.each(this.tooltips,function(t,e){e.is("api",!0)}),this.tooltips},refresh:function(){return void 0==this._tooltips&&void 0!=this.tooltips&&(this._tooltips=this.tooltips),$.each(this._tooltips,function(t,e){e.is("visible")&&e.refresh()}),this},remove:function(){return Tooltips.removeTooltips(this.tooltips),this.tooltips=[],this}}),$.each("show hide toggle disable enable".split(" "),function(t,e){Collection.prototype[e]=function(){return $.each(this.tooltips,function(t,i){i.is("api",!0),i[e]()}),this}}),Tipped.init(),Tipped})}).call(exports,__webpack_require__(245))},1187:function(t,e,i){(function(n){var r,o,s=[].slice;r=[i(164),i(245),i(1166)],void 0!==(o=function(t,e,i){var r,o,a,l,c,u,p,d,h,f,m,g,y,v,b,w,k,x,T;return r="dragulaExtra_list",l=2,a=1,o=20,T=function(){var t,e,i,n;return e=arguments[0],i=2<=arguments.length?s.call(arguments,1):[],t=e(),n=t.splice.apply(t,i),e.notifySubscribers(t),n},h={},u=function(t,e){var n,r,o,s,a;if(null==e&&(e={}),null==(null!=(s=h[t])?s.drake:void 0)){if("string"!=typeof t)throw new Error("dragulaExtra: Invalid name");if(null!=(null!=(a=h[t])?a.drake:void 0))throw new Error("dragulaExtra: Drake already exists in group '"+t+"'");null==h[t]&&(h[t]={}),r=null!=(n=h[t]).containers?n.containers:n.containers=[],o=h[t].drake=i(r,e),p(o,e),console.assert(r===o.containers,"Expecting `drake.containers` to be a reference to the `containers` array passed into `dragula`")}},x=function(t){var e,i,n;if("string"!=typeof t)throw new Error("dragulaExtra: Invalid name");if(null==(null!=(e=h[t])?e.drake:void 0))throw new Error("dragulaExtra: No drake in group '"+t+"'");null!=(i=h[t])&&i.drake.destroy(),null!=(n=h[t])&&(n.drake=null),h[t].containers.length>0||delete h[t]},d=function(t){var e,i;if("string"!=typeof t)throw new Error("dragulaExtra: Invalid name");if(null==(null!=(e=h[t])?e.drake:void 0))throw new Error("dragulaExtra: No drake in group '"+t+"'");return null!=(i=h[t])?i.drake:void 0},c=function(t,e){var i,n,r,o;if("string"!=typeof t)throw new Error("dragulaExtra: Invalid name");if((null!=(r=h[t])&&null!=(o=r.containers)?o.indexOf(e):void 0)>=0)throw new Error("dragulaExtra: Container already exists in group '"+t+"'");n=null!=h[t]?h[t]:h[t]={},i=null!=n.containers?n.containers:n.containers=[],i.push(e)},function(t,e){var i,n,r;if("string"!=typeof t)throw new Error("dragulaExtra: Invalid name");if(n=null!=(r=h[t])?r.containers:void 0,!((i=null!=n?n.indexOf(e):void 0)>=0))throw new Error("dragulaExtra: Container does not exist in group '"+t+"'");n.splice(i,1),n.length>0||null!=h[t].drake||delete h[t]},y=function(i,n,o,s,a){var l,c,u,p,d,h;l=t.dataFor(n),null!=o&&null!=n&&o.removeChild(n),null!=l&&(t.cleanNode(n),p=e(s).data(r),u=p().indexOf(l),u>=0?(T(p,u,1),t.tasks.runEarly()):u=0,c=a&&t.dataFor(a),h=e(o).data(r),("function"==typeof h?h():void 0)?(d=h().indexOf(c),d<0&&(d=h().length),T(h,d,0,l)):d=-1,"function"==typeof i&&i({item:l,sourceIndex:u,sourceItems:p,sourceContext:t.contextFor(s),targetIndex:d,targetItems:h,targetContext:t.contextFor(o),element:n,target:o,source:s,sibling:a}))},w=function(i,n,o,s){var a,l,c;null!=(a=t.dataFor(n))&&(t.cleanNode(n),c=e(s).data(r),(l=c().indexOf(a))<0||(T(c,l,1),"function"==typeof i&&i({item:a,sourceIndex:l,sourceItems:c,sourceContext:t.contextFor(s),element:n,container:o,source:s})))},b=function(t,e,i,n){"function"==typeof t&&t({element:e,container:i,source:n})},v=function(t,e,i,n){"function"==typeof t&&t({element:e,container:i,source:n})},m=function(t,e,i,n){"function"==typeof t&&t({clone:e,original:i,type:n})},f=function(i,n,o){var s,a,l;s=t.dataFor(i),o.removeChild(i),null!=s&&(t.cleanNode(i),l=e(o).data(r),(a=l().indexOf(s))<0||(T(l,a,1),t.tasks.runEarly(),T(l,a,0,s)))},g=function(t,i,r){var s,c;c=null,document.body.classList.add("dragulaExtra-dragging"),t.once("cloned",function(t){c=t}),t.once("dragend",function(){document.body.classList.remove("dragulaExtra-dragging")}),(s=function(){var u,p,d,h,f,m,g,y,v,b,w,k,x,T,C,I,_,S,A,O;p=!0,u=!0,i.classList.contains("prevent-scroll-y")&&(p=!1),i.classList.contains("prevent-scroll-x")&&(u=!1),t.dragging&&(requestAnimationFrame(s),null!=c&&(x=c.getBoundingClientRect(),_=window.innerHeight,S=window.innerWidth,g=e(r),h=g[0].scrollWidth,k=!1,w=!1,y=null,null,null!=(null!=(T=i.dataset)?T.autoScrollsList:void 0)&&e(".gu-transit").closest(i.dataset.autoScrollsList).length&&(y=e(".gu-transit").closest(i.dataset.autoScrollsList)),null!=(null!=(C=i.dataset)?C.dragulaContainer:void 0)&&(g=e(i.dataset.dragulaContainer),h=g[0].scrollWidth),null!=y&&(v=y[0].getBoundingClientRect(),I=n.extend({},v),d=n.extend({},v),I.bottom=I.top+40,d.top=d.bottom-40,k=app.utility.RectsOverlap(x,I),w=app.utility.RectsOverlap(x,d),k&&!w&&(m=y.scrollTop(),y.scrollTop(m-5)),w&&!k&&(m=y.scrollTop(),y.scrollTop(m+5))),A=g.scrollLeft(),O=window.scrollY,p&&(x.bottom>=_&&O+_<document.body.scrollHeight?(b=x.bottom-_,b=Math.floor(b/l),b=Math.max(a,b),b=Math.min(o,b),window.scrollTo(0,window.scrollY+b)):x.top<=0&&O>0&&(b=-x.top,b=Math.floor(b/l),b=Math.max(a,b),b=Math.min(o,b),window.scrollTo(0,window.scrollY-b))),u&&(f=g.scrollLeft(),x.right>=S&&A+S<h?(b=x.right-S,b=Math.floor(b/l),b=Math.max(a,b),b=Math.min(o,b),g.scrollLeft(f+b)):x.left<=0&&A>0&&(b=-x.left,b=Math.floor(b/l),b=Math.max(a,b),b=Math.min(o,b),g.scrollLeft(f-b)))))})()},p=function(t,e){var i,n,r;if(t.on("drop",y.bind(null,e.afterDrop)),t.on("remove",w.bind(null,e.afterDelete)),t.on("over",b.bind(null,e.afterOver)),t.on("out",v.bind(null,e.afterOut)),t.on("cloned",m.bind(null,e.afterCloned)),t.on("cancel",f),t.on("drag",g.bind(null,t)),null!=e.dragulaEvents){r=e.dragulaEvents;for(n in r)i=r[n],t.on(n,i)}},k=function(i){var n,r;return{},n=i(),(r=t.utils.peekObservable(n))&&"number"!=typeof r.length?(t.utils.unwrapObservable(n),r=e.extend({},r),t.isObservable(r.data)||(r.data=t.observable(r.data)),r.useSyncClone&&(r.data=r.data.extend({syncClone:"shallowClone"})),r):{data:t.isObservable(n)?n:t.observable(n)}},t.bindingHandlers.dragulaExtra={init:function(n,o,s,a,l){var u,d;return n.classList.add("dragulaExtra"),d=k(o),e(n).data(r,d.data),t.utils.domNodeDisposal.addDisposeCallback(n,function(){e(n).removeData(r)}),"string"==typeof d.group?c(d.group,n):(u=i([n],d),p(u,d),t.utils.domNodeDisposal.addDisposeCallback(n,function(){u.destroy()})),t.bindingHandlers.foreach.init(n,function(){return d},s,a,l)},update:function(i,n,o,s,a){var l;return l=k(n),e(i).data(r,l.data),t.bindingHandlers.foreach.update(i,function(){return l},o,s,a)}},{addDrake:u,removeDrake:x,getDrake:d}}.apply(e,r))&&(t.exports=o)}).call(e,i(245))},1188:function(t,e,i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}},s=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};n=[i(1117),i(1924)],void 0!==(r=function(t,e){return function(){function i(t){this.OnClickDelete=o(this.OnClickDelete,this),this.OnClickEdit=o(this.OnClickEdit,this),this.OnClickAddNew=o(this.OnClickAddNew,this),this.toJSON=o(this.toJSON,this),this.SetupComputedsAndSubscribers=o(this.SetupComputedsAndSubscribers,this),this.UpdateData=o(this.UpdateData,this),this.componentName="Budget",null==t&&(t=this.GetNewJSON()),this.UpdateData(t),this.peopleMapping=ko.observable({}),this.companiesMapping=ko.observable({}),this.teamsMapping=ko.observable({})}return i.prototype.UpdateProperties=function(t){var e,i,n,r,o;null!=t.type&&(t.type=null!=(e=t.type)?e.toLowerCase():void 0),null!=t.status&&(t.status=null!=(i=t.status)?i.toLowerCase():void 0),null!=t.timelogType&&(t.timelogType=null!=(n=t.timelogType)?n.toLowerCase():void 0),null!=t.expenseType&&(t.expenseType=null!=(r=t.expenseType)?r.toLowerCase():void 0),null!=t.repeatUnit&&(t.repeatUnit=null!=(o=t.repeatUnit)?o.toLowerCase():void 0),null!=t.capacity&&(t.capacity=~~t.capacity),null!=t.capacityUsed&&(t.capacityUsed=~~t.capacityUsed),null!=t.completedByUserId&&(t.completedByUserId=~~t.completedByUserId),null!=t.createdByUserId&&(t.createdByUserId=~~t.createdByUserId),null!=t.deletedByUserId&&(t.deletedByUserId=~~t.deletedByUserId),null!=t.id&&(t.id=~~t.id),null!=t.projectId&&(t.projectId=~~t.projectId),!1===t.isRepeating&&(t.repeatUnit="never")},i.prototype.UpdateData=function(t){this.UpdateProperties(t),ko.mapping.fromJS(t,i.mapping,this),this.SetupComputedsAndSubscribers()},i.prototype.SetupComputedsAndSubscribers=function(){this.hours||(this.hours=ko.pureComputed({read:function(t){return function(){return Math.floor(t.capacity()/60)}}(this),write:function(t){return function(e){return t.capacity(Math.min(60*e+t.minutes(),i.maxCapacity))}}(this)})),this.minutes||(this.minutes=ko.pureComputed({read:function(t){return function(){return t.capacity()%60}}(this),write:function(t){return function(e){return t.capacity(Math.min(60*t.hours()+e,i.maxCapacity))}}(this)})),this.capacityRemaining||(this.capacityRemaining=ko.pureComputed({read:function(t){return function(){return Math.max(0,t.capacity()-t.capacityUsed())}}(this),write:function(t){return function(e){return t.capacityUsed(Math.max(0,t.capacity()-e))}}(this)})),this.capacityOverflow||(this.capacityOverflow=ko.pureComputed(function(t){return function(){return t.capacity()-t.capacityUsed()}}(this))),this.capacityUsedPercent||(this.capacityUsedPercent=ko.pureComputed({read:function(t){return function(){return 0===t.capacity()?0:Math.floor(t.capacityUsed()/t.capacity()*100)}}(this),write:function(t){return function(e){return t.capacityUsed(t.capacity()*(e/100))}}(this)})),this.startDateTimeOffset||(this.startDateTimeOffset=ko.pureComputed({read:function(t){return function(){return app.utility.getOffsetDays(t.startDateTime())}}(this),write:function(t){return function(e){return t.startDateTime(app.utility.getOffsetDate(e))}}(this)})),this.endDateTimeOffset||(this.endDateTimeOffset=ko.pureComputed({read:function(t){return function(){return app.utility.getOffsetDays(t.endDateTime())}}(this),write:function(t){return function(e){return t.endDateTime(app.utility.getOffsetDate(e))}}(this)})),this.displayEndDateTime||(this.displayEndDateTime=ko.pureComputed({read:function(t){return function(){return t.endDateTime().clone().subtract(1,"day")}}(this),write:function(t){return function(e){return t.endDateTime(e.clone().add(1,"day"))}}(this)})),this.exceeded||(this.exceeded=ko.pureComputed(function(t){return function(){return t.capacityUsedPercent()>100}}(this))),this.usageAsText||(this.usageAsText=ko.pureComputed(function(t){return function(){var e,i;return i=app.utility.MinutesIntToString(t.capacityUsed(),{zeroVal:app.tl("[_s] minutes",0),abbreviate:!1}),e=app.utility.MinutesIntToString(t.capacity(),{zeroVal:app.tl("[_s] minutes",0),abbreviate:!1}),app.tl("[_s] of [_s]",i,e)}}(this)))},i.prototype.GetAvailableTimelogTypes=function(t){var e,n,r,o,a,l,c;return null==(e=null!=(r=ko.unwrap(t))?r.activePages:void 0)||ko.unwrap(e.billing)>0&&ko.unwrap(e.time)>0?i.timelogTypes:(l=["billable","non-billable"],n=["billed","unbilled"],c=[],(ko.unwrap(e.billing)>0||(o=this.timelogType(),s.call(n,o)>=0))&&Array.prototype.push.apply(c,n),(ko.unwrap(e.time)>0||(a=this.timelogType(),s.call(l,a)>=0))&&Array.prototype.push.apply(c,l),i.timelogTypes.filter(function(t){return function(t){var e;return e=t.id,s.call(c,e)>=0}}()))},i.prototype.GetUsageBasedOnText=function(){var t,e;return e=i.timelogTypes.find(function(t){return function(e){return e.id===t.timelogType()}}(this)).text,"time"===this.type()?e:(t=this.timelogType()===this.expenseType()?app.tl("Expenses"):i.expenseTypes.find(function(t){return function(e){return e.id===t.expenseType()}}(this)).text,e+" & "+t)},i.prototype.GetDateRange=function(t){var e,i;return null==t&&(t="DD MMM YY"),i=this.startDateTime().format(t),e=this.displayEndDateTime().format(t),i===e?i:i+" - "+e},i.prototype.toJSON=function(){var t,e,n,r,o,s,a;return t=ko.mapping.toJS(this),t.dateCompleted=null!=(e=t.dateCompleted)?e.format(i.dateTimeFormat):void 0,t.dateCreated=null!=(n=t.dateCreated)?n.format(i.dateTimeFormat):void 0,t.dateDeleted=null!=(r=t.dateDeleted)?r.format(i.dateTimeFormat):void 0,t.dateUpdated=null!=(o=t.dateUpdated)?o.format(i.dateTimeFormat):void 0,t.startDateTime=null!=(s=t.startDateTime)?s.format(i.dateTimeFormat):void 0,t.endDateTime=null!=(a=t.endDateTime)?a.format(i.dateTimeFormat):void 0,t},i.prototype.Clone=function(){return new i(this.toJSON())},i.prototype.Save=function(){var e,n,r,o,s;return app.featureFlip.check("projecttimebudgets")()?(s=this.id()>0?"budgets/"+this.id()+".json":"budgets.json",s=app.prefixApi(s,"API_PREFIX_V3","API_PREFIX_V3"),e=this.id()>0?"patch":"post",n=this.notifications().map(function(t){return function(t){return t=t.toJSON(),t.notificationMedium=t.notificationMedium.toUpperCase(),t.id>0||delete t.id,t}}()),app.api[e](s,{budget:{capacity:this.capacity(),currencyCode:"financial"===this.type()?this.currencyCode():void 0,defaultRate:"financial"===this.type()?this.defaultRate():void 0,endDateTime:this.isRepeating()?void 0:null!=(r=this.endDateTime())?r.clone().startOf("day").format(i.dateTimeFormat):void 0,expenseType:"financial"===this.type()?this.expenseType().toUpperCase():void 0,notifications:n,originatorBudgetId:this.originatorBudgetId()>0?this.originatorBudgetId():void 0,projectId:this.projectId(),repeatPeriod:this.isRepeating()?this.repeatPeriod():void 0,repeatUnit:this.isRepeating()&&null!=(o=this.repeatUnit())?o.toUpperCase():void 0,repeatsRemaining:this.isRepeating()?this.repeatsRemaining():void 0,isRepeating:this.isRepeating(),startDateTime:this.startDateTime().clone().startOf("day").format(i.dateTimeFormat),status:this.status().toUpperCase(),timelogType:this.timelogType().toUpperCase(),type:this.type().toUpperCase()}}).then(function(t){return function(t){return t.response}}()).then(function(t){return function(i){var n,r,o,s,a,l,c,u;for(r=i.budget,t.UpdateData(r),c=r.notificationIds,o=a=0,l=c.length;a<l;o=++a)s=c[o],null!=(u=t.notifications()[o])&&(u.id=s);return n="post"===e?app.consts.ACTIONTYPE.ADDED:app.consts.ACTIONTYPE.UPDATED,app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"budget",actionType:n,itemId:t.id(),projectId:t.projectId(),extraInfo:{fromPostbox:!0}}),i.action=n,i}}(this))):(console.warn("Price plan does not support time budgets"),t.resolve({}))},i.prototype.Delete=function(){var e;return app.featureFlip.check("projecttimebudgets")()?(e=app.prefixApi("budgets/"+this.id()+".json","API_PREFIX_V3","API_PREFIX_V3"),app.api.delete(e).then(function(t){return function(t){return t.response}}()).then(function(t){return function(e){return app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"budget",actionType:app.consts.ACTIONTYPE.DELETED,itemId:t.id(),projectId:t.projectId(),extraInfo:{fromPostbox:!0}}),e}}(this))):(console.warn("Price plan does not support time budgets"),t.resolve({}))},i.FetchData=function(e){var i,n,r,o,s;return null==e&&(e={}),app.featureFlip.check("projecttimebudgets")()?(i=ko.unwrap(e.id),r=ko.unwrap(e.projectId),n=null!=(o=e.include)?o:["notifications"],i>0||r>0?(s=app.prefixApi("budgets.json","API_PREFIX_V3","API_PREFIX_V3"),app.api.get(s,{include:n.join(),projectIds:r>0?r:void 0,ids:i>0?i:void 0}).then(function(t){var e,n,r,o,s,a,l,c,u,p;if(p=t.response,!(o=p.budgets[0]))return p;for(null!=p.included&&(o.peopleMapping=null!=(e=p.included).users?e.users:e.users={},o.companiesMapping=null!=(n=p.included).companies?n.companies:n.companies={},o.teamsMapping=null!=(r=p.included).teams?r.teams:r.teams={}),null==o.notifications&&(o.notifications=[]),l=null!=(c=p.included.notifications)?c:{},u=o.notificationIds,s=0,a=u.length;s<a;s++)i=u[s],null!=l[i]&&o.notifications.push(l[i]);return p})):t.resolve({})):(console.warn("Price plan does not support time budgets"),t.resolve({}))},i.prototype.GetNewJSON=function(){return{capacity:0,capacityUsed:0,completedByUserId:0,createdByUserId:0,currencyCode:"EUR",dateCompleted:"",dateCreated:"",dateDeleted:"",dateUpdated:"",defaultRate:0,deletedByUserId:0,endDateTime:"",expenseType:"billed",id:0,notifications:[],originatorBudgetId:0,projectId:0,repeatPeriod:1,repeatUnit:"day",repeatsRemaining:0,isRepeating:!1,startDateTime:moment().startOf("day").format(i.dateTimeFormat),status:"active",timelogType:"billable",type:"time",updatedByUserId:0,usageTimeline:[]}},i.prototype.OnClickAddNew=function(t,e){return~~t?(this.UpdateData({projectId:t}),this.OnClickEdit("details",{isNew:!0},e)):console.error("ProjectId cannot be must be provided for budgetModel.OnClickAddNew and cannot be 0: "+t)},i.prototype.OnClickEdit=function(t,e,i){var n;null==e&&(e={}),n=function(t){return function(e){e.wasCancelled||(t!==e.budget&&t.UpdateData(e.budget.toJSON()),"function"==typeof i&&i())}}(this),app.modal.Show("addOrEditProjectBudget",{budgetToArchive:this.id()>0&&e.isNew?this:void 0,budget:e.isNew?void 0:this,peopleMapping:this.peopleMapping,companiesMapping:this.companiesMapping,teamsMapping:this.teamsMapping,projectId:this.projectId(),tab:t,onCloseCallBack:n})},i.prototype.OnClickDelete=function(){app.modal.Show("confirm",{title:app.tl("Are you sure?"),text:app.tl("Are you sure you want to delete this budget?"),callback:function(t){return function(e){e.wasCancelled||t.Delete().then(function(){return t.UpdateData(t.GetNewJSON())})}}(this)})},i.types=[{id:"time",text:app.tl("Time Budget")},{id:"financial",text:app.tl("Financial Budget")}],i.timelogTypes=[{id:"billable",text:app.tl("Billable Time")},{id:"non-billable",text:app.tl("Non-billable Time")},{id:"billed",text:app.tl("Billed Time")},{id:"unbilled",text:app.tl("Unbilled Time")}],i.expenseTypes=[{id:"billed",text:app.tl("Billed Expenses")},{id:"billable",text:app.tl("Billable Expenses")}],i.dateTimeFormat="YYYY-MM-DDTHH:mm:ssZ",i.maxCapacity=36e5,i.dateTimeMapping={create:function(t){return ko.observable(i.dateTimeMapping.update(t))},update:function(t){var e;return e=ko.unwrap(t.data),null==e?null:moment.isMoment(e)?e.clone():moment(e,i.dateTimeFormat)}},i.mapping={dateCompleted:i.dateTimeMapping,dateCreated:i.dateTimeMapping,dateDeleted:i.dateTimeMapping,dateUpdated:i.dateTimeMapping,startDateTime:i.dateTimeMapping,endDateTime:i.dateTimeMapping,notifications:{create:function(t){var i,n,r;return i=t.parent,n=null!=(r=t.data)?r:null,null==n||n instanceof e||(null==n.projectId&&(n.projectId=i.projectId()),n=new e(n)),n}}},i}()}.apply(e,n))&&(t.exports=r)},1189:function(t,e,i){(function(n){var r,o,s=function(t,e){return function(){return t.apply(e,arguments)}},a={}.hasOwnProperty,l=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};r=[i(14),i(1117),i(1119)],void 0!==(o=function(t,e,i){return function(){function r(t,e){var i,n,r,o,c,u,p,d,h,f,m;if(null==e&&(e={}),this.EditProperties=s(this.EditProperties,this),this.GetNewJSON=s(this.GetNewJSON,this),this.GetItemDetails=s(this.GetItemDetails,this),this.QuickViewItem=s(this.QuickViewItem,this),this.Delete=s(this.Delete,this),this.MarkAsRead=s(this.MarkAsRead,this),this.React=s(this.React,this),this.Reply=s(this.Reply,this),this.GetCommentItem=s(this.GetCommentItem,this),this.Edit=s(this.Edit,this),this.getEditExpired=s(this.getEditExpired,this),this.dateToLong=s(this.dateToLong,this),this.componentName="Comment",null==t&&(t=this.GetNewJSON(e)),null!=t.body&&(t.body=t.body.replace(/https:\/\/s3.amazonaws.com\/tw-desk\/i\//gi,"https://tw-desk-files.teamwork.com/i/")),null==t.isEditing&&(t.isEditing=!1),null==t.isLoadingItem&&(t.isLoadingItem=!1),null==t.commentableItem&&(t.commentableItem=null),null==t.currentReaction&&(t.currentReaction=""),null==t.projectId&&null!=t.project&&(t.projectId=t.project.id),t.projectId=parseInt(t.projectId,10),t.id=parseInt(t.id,10),t.commentableId=parseInt(t.commentableId,10),t.companyId=parseInt(t.companyId,10),t.attachmentsCount=parseInt(t.attachmentsCount,10),t.nrNotifiedPeople=parseInt(t.nrNotifiedPeople,10),t.author.id=parseInt(t.author.id,10),t.isRead=parseInt(t.isRead,10),t.private=parseInt(t.private,10),t.numLikes=parseInt(t.numLikes,10),"files"===t.commentableType&&-1!==t.commentLink.indexOf("?action")?null!=t.fileVersionNumber?t.commentLink="#"+t.commentableType+"/"+t.fileId+"?v="+t.fileVersionNumber+"&c="+t.id:t.commentLink="#"+t.commentableType+"/"+t.commentableId+"?c="+t.id:t.commentLink="#"+t.commentLink,t.pickerCompanies=[],""!==t.lockdownId?t.lockdownId=parseInt(t.lockdownId,10):t.lockdownId=0,t.shortProjectName=t.project.name.length>50?t.project.name.substring(0,50)+app.localizationPreferences().ellipsis:t.shortProjectName=t.project.name,t.shortItemName=t.itemName.length>50?t.itemName.substring(0,50)+app.localizationPreferences().ellipsis:t.itemName,t.shortBody=t.body.length>200?t.body.substring(0,200)+app.localizationPreferences().ellipsis:t.body,t.showShortBody=!0,t.likedByMe=!1,void 0===t.likedByUsers&&(t.likedByUsers=[]),t.numLikes>0){t.likedByUsers=[],f=app.ko.utils.parseJson(t.likedByUsersJSON);for(n in f)void 0!==f[n]&&null!==f[n]&&(t.likedByUsers.push({id:n,name:f[n]}),n===app.loggedInUser.id().toString()&&(t.likedByMe=!0))}t.likedByMe&&(t.currentReaction="like"),null==t.reactions&&(t.reactions={}),null==t.reactions.counts&&(t.reactions.counts={joy:0,dislike:0,heart:0,like:0,frown:0}),null==t.reactions.mine&&(t.reactions.mine=[]),u=t.reactions.counts;for(o in u)a.call(u,o)&&(m=u[o],t.reactions.counts[o]=m/1);if(this.hasReactions=ko.pureComputed(function(t){return function(){var e,i;return null!=(null!=(i=t.reactions)?i.counts:void 0)&&(e=t.reactions.counts,e.heart()+e.joy()+e.frown()+e.like()+e.dislike()>0)}}(this)),null==this.fullCommentDate&&(this.fullCommentDate=ko.pureComputed(function(t){return function(){return t.dateToLong(t.datetime())}}(this))),t.attachmentsCount>0&&null!=t.attachments)for(p=t.attachments,r=0,c=p.length;r<c;r++)i=p[r],"?action="===i.thumbnail.substr(0,8)&&(i.thumbnail="./"+i.thumbnail),i.checked=!0,null==i.extension?(i.isDisplayableImage=!1,i.isPlayableVideo=!1,i.isExternalVideo=!1,i.isBlockedVideo=!1):(i.isDisplayableImage=["png","jpg","jpeg","gif","webp","svg"].indexOf(i.extension.toLowerCase())>-1,i.isPlayableVideo=(d=i.extension,l.call(app.consts.FILES.PLAYABLEVIDEO,d)>=0),i.isExternalVideo=i.isPlayableVideo&&"teamworkpm"!==i.fileSource,i.isBlockedVideo=(h=i.extension,l.call(app.consts.FILES.BLOCKEDVIDEOS,h)>=0));app.ko.mapping.fromJS(t,this.mapping,this),this.editExpired=ko.pureComputed(this.getEditExpired)}return r.prototype.mapping={datetime:{create:function(e){return app.ko.observable(t(e.data,"YYYY-MM-DDTHH:mm:ssZ"))}},lastChangedOn:{create:function(e){return app.ko.observable(t(e.data,"YYYY-MM-DDTHH:mm:ssZ"))}}},r.prototype.dateToLong=function(e){var i,n;return null==app.loggedInUser?t().format("DD MMM YY"):(n="ddd, MMM Do YYYY "+app.loggedInUser.localization.timeFormat().replace("MM","mm"),i=t(e),i.format(n))},r.prototype.getEditExpired=function(){return t().diff(this.datetime(),"minutes")>15},r.prototype.Edit=function(){if(this.canEdit())return this.isEditing(!this.isEditing()),null==("function"==typeof this.commentableItem?this.commentableItem():void 0)?this.GetCommentItem():void 0},r.prototype.GetCommentItem=function(){var i,n;return this.isLoadingItem()?e.resolve():(this.isLoadingItem(!0),i=this.GetItemDetails(),n="task"===i.type?app.prefixApi("tasks/"+i.id+".json","API_PREFIX_V2","API_PREFIX_V2"):i.type+"s/"+i.id+".json",app.api.get(n).then(function(e){return function(n){var r;return r=n.response[i.type],null!=r.deadline&&null==r.deadlineInWords&&(r.deadlineInWords=t(r.deadline,"YYYYMMDD").format("DD MMMM YYYY")),null!=e.commentableItem&&ko.isObservable(e.commentableItem)?e.commentableItem(ko.mapping.fromJS(r)):e.commentableItem=ko.observable(ko.mapping.fromJS(r))}}(this)).finally(function(t){return function(){return t.isLoadingItem(!1)}}(this)))},r.prototype.Reply=function(){var t;return 1!==this.isRead()&&this.MarkAsRead(!1),t=function(t){return function(){return app.modal.Show("addOrEditComment",{item:t.commentableItem(),projectId:t.projectId(),type:"todo_items"===t.commentableType()?"task":t.commentableType()})}}(this),null!=("function"==typeof this.commentableItem?this.commentableItem():void 0)?t():this.GetCommentItem().then(t)},r.prototype.React=function(t){return null==t&&(t="like"),Tipped.hideAll(),this.currentReaction()===t?(app.reactions.Unlike("comment",this.id(),this),this.currentReaction("")):(this.MarkAsRead(!1),app.reactions.Like("comment",this.id(),this),this.currentReaction(t))},r.prototype.MarkAsRead=function(t){if(null==t&&(t=!0),Tipped.hideAll(),0!==this.id()&&!this.isRead())return this.isRead(1),app.api.put("./comments/"+this.id()+"/markread.json").then(function(e){return function(i){var n,r,o,s;if("OK"===i.response.STATUS)return t&&app.flash.Success(app.tl("Comment marked as read")),s={eventTime:new Date,actionType:app.consts.ACTIONTYPE.UPDATED,itemType:"comments",itemId:e.id(),subType:"marked-read",commentableType:e.commentableType,commentableId:e.commentableId,extraInfo:{data:{}}},null!=(null!=i&&null!=(n=i.response)?n.linkedCardId:void 0)&&(s.extraInfo.data.cardId=i.response.linkedCardId),null!=(null!=i&&null!=(r=i.response)?r.linkedColumnId:void 0)&&(s.extraInfo.data.columnId=i.response.linkedColumnId),null!=(null!=i&&null!=(o=i.response)?o.linkedColumnName:void 0)&&(s.extraInfo.data.columnName=i.response.linkedColumnName),app.ko.postbox.publish("allTWEvents",s)}}(this)).catch(function(t){return function(){return t.isRead(0)}}(this))},r.prototype.Delete=function(){var t,e;return e=app.tl("Confirm Delete"),t=app.tl("Are you sure you want to delete this comment?"),app.modal.Show("confirm",{title:e,text:t,callback:function(t){return function(e){if(!e.wasCancelled)return app.api.delete("comments/"+t.id()+".json").then(function(){var e;return e=function(){return app.flash.Success(app.tl("Undeleting")+app.localizationPreferences().ellipsis),app.api.put("trashcan/comments/"+t.id()+"/restore.json",{}).then(function(e){return app.flash.Success(app.tl("Comment has been restored"),{timer:2e3}),app.ko.postbox.publish("allTWEvents",{eventTime:new Date,actionType:app.consts.ACTIONTYPE.UPDATED,itemType:"comments",itemId:t.id(),commentableType:t.commentableType,commentableId:t.commentableId})})},app.flash.Success(app.tl("Comment has been deleted"),{timer:5e3,undo:e}),ko.postbox.publish("allTWEvents",{eventTime:new Date,actionType:app.consts.ACTIONTYPE.DELETED,itemType:"comments",itemId:t.id(),commentableType:t.commentableType,commentableId:t.commentableId})})}}(this)})},r.prototype.QuickViewItem=function(t,e){var i,n,r,o;return!!(null!=(null!=e?e.metaKey:void 0)&&e.metaKey||null!=(null!=e?e.ctrlKey:void 0)&&e.ctrlKey)||(i=this.GetItemDetails(),r=this.projectId,"task"===(o=i.type)||"milestone"===o||"link"===o||"notebook"===o||"message"===o||"file"===o?(n={},n.projectId=r,n[i.type+"Id"]=i.id,n.id=i.id,n.type=i.type,null!=this.fileId&&null!=this.fileVersionNumber&&(n.fileId=ko.unwrap(this.fileId),n.fileVersion=ko.unwrap(this.fileVersionNumber)),app.quickView.show(i.type,n)):(console.log("not handled:",i.type),!0))},r.prototype.GetItemDetails=function(){var t,e;return e=this.commentableType().substr(0,this.commentableType().length-1),t="file"===e&&null!=this.fileId?ko.unwrap(this.fileId):this.commentableId(),"todo_item"===e&&(e="task"),{id:t,type:e}},r.prototype.GetNewJSON=function(t){var e;return null==t&&(t={}),e={company:{id:app.account.companyid(),name:app.account.companyname()},project:{id:0,name:""},author:{id:app.loggedInUser.id(),firstName:app.loggedInUser.firstName(),lastName:app.loggedInUser.lastName(),fullName:app.loggedInUser.fullName(),avatarUrl:app.loggedInUser.avatarUrl(),company:app.account.companyname()},commentableItem:{},"commentable-id":"",commentable_type:"","emailed-from":"",isRead:0,private:0,"lockdown-id":"",datetime:new Date,canEdit:!0,id:0,"last-changed-on":new Date,"content-type":app.loggedInUser.useMarkdown()?"TEXT":"HTML","nr-notified-people":1,canDelete:!0,type:"","item-name":"","attachments-count":0,canLike:!0,body:"",commentNo:0,attachments:[],"comment-link":""},n.extend(i.camelize(e),t)},r.prototype.EditProperties=function(){if(this.canEdit())return app.modal.Show("commentProperties",{comment:this})},r}()}.apply(e,r))&&(t.exports=o)}).call(e,i(245))},1190:function(t,e,i){var n,r;n=[i(164),i(1133)],void 0!==(r=function(t,e){return function(){function t(t,i){t.id=parseInt(t.id,10),e.fromJS(t,{},this)}return t.prototype.Delete=function(){return app.api.delete("roles/"+this.id()+".json")},t}()}.apply(e,n))&&(t.exports=r)},1191:function(t,e,i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}};n=[i(14),i(1286)],void 0!==(r=function(t,e){return e.default,function(){function e(e){null==e&&(e={}),this.isUserMember=o(this.isUserMember,this),this.QuickViewMembers=o(this.QuickViewMembers,this),this.GetLogo=o(this.GetLogo,this),this.Delete=o(this.Delete,this),this.AddDefaultProjects=o(this.AddDefaultProjects,this),this.AddMembers=o(this.AddMembers,this),this.AddSubteam=o(this.AddSubteam,this),this.Edit=o(this.Edit,this),this.SetupComputedsAndSubscribers=o(this.SetupComputedsAndSubscribers,this),this.componentName="Team",this.UpdateProperties(e),this.mapping={dateCreated:{create:function(e){return ko.observable(t(e.data))}}},app.ko.mapping.fromJS(e,this.mapping,this),this.SetupComputedsAndSubscribers()}return e.prototype.UpdateProperties=function(t){var e,i,n,r,o,s;return null==t.id&&(t.id=0),null==t.numMembers&&(t.numMembers=0),t.id=t.id/1,t.projectId=t.projectId/1,t.numSubteams=t.numSubteams/1,t.numMembers=t.numMembers/1,null!=t.company&&null==t.company.id&&(t.company.id=void 0,t.company.name=void 0),null==t.companyId&&(t.companyId=0),null!=(null!=(e=t.company)?e.id:void 0)&&(t.companyId=t.company.id/1),null==t.companyName&&(t.companyName=""),null!=(null!=(i=t.company)?i.name:void 0)&&(t.companyName=t.company.name),null==t.parentTeamId&&(t.parentTeamId=0),null!=(null!=(n=t.parentTeam)?n.id:void 0)&&(t.parentTeamId=t.parentTeam.id/1),null==t.parentTeamName&&(t.parentTeamName=""),null!=(null!=(r=t.parentTeam)?r.name:void 0)&&(t.parentTeamName=t.parentTeam.name),null==t.isSelected&&(t.isSelected=!1),null==t.isExpanded&&(t.isExpanded=!1),null==t.isUpdating&&(t.isUpdating=!1),null==t.canEdit&&(t.canEdit=app.loggedInUser.administrator()||app.loggedInUser.permissions.canManagePeople()),null==t.logoUrl&&(t.logoUrl=""),null==t.logoIcon&&(t.logoIcon=""),null==t.logoColor&&(t.logoColor=""),null==t.members&&(t.members=[]),t.members.length&&(t.members=t.members.map(function(t){return t.id=t.id/1,t})),null!=(null!=(o=t.company)?o.name:void 0)?(t.formattedHandle=t.company.name+" / @"+t.handle,t.linkedHandle="<a href='#/companies/"+t.company.id+"/teams'>"+t.company.name+"</a> / @"+t.handle):null!=(null!=(s=t.rootTeam)?s.handle:void 0)?(t.formattedHandle=t.rootTeam.name+" / @"+t.handle,t.linkedHandle="<a href='#/teams/"+t.rootTeam.id+"'>"+t.rootTeam.name+"</a> / @"+t.handle):(t.formattedHandle="@"+t.handle,t.linkedHandle="@"+t.handle),null==t.defaultImageUrl&&(t.defaultImageUrl="./tko/public/assets/svg/team-regular.svg"),null==t.visibleSubTeams&&(t.visibleSubTeams=[]),null==t.logoType&&(t.logoType=t.logoUrl.length?"image":t.logoIcon.length?"icon":"text"),t.logoColor.length&&(t.logoColor=app.utility.GetValidHex(t.logoColor,!1)),null==t.logoIconSVG&&(t.logoIconSVG=""),t},e.prototype.UpdateData=function(t){if(null!=t)return this.isUpdating(!0),null!=this.isSelected&&(t.isSelected=this.isSelected()),null!=this.isExpanded&&(t.isExpanded=this.isExpanded()),this.UpdateProperties(t),app.ko.mapping.fromJS(t,this.mapping,this),this.SetupComputedsAndSubscribers(),this.isUpdating(!1)},e.prototype.SetupComputedsAndSubscribers=function(){if(this.logoIcon().length)return app.utility.GetTeamIcon(this).then(function(t){return function(e){return t.logoIconSVG(e)}}(this))},e.prototype.Edit=function(){this.canEdit()&&app.modal.Show("addOrEditTeam",{team:this,teamId:this.id})},e.prototype.AddSubteam=function(){app.modal.Show("addOrEditTeam",{parentTeamId:this.id(),parentTeamName:this.name(),companyId:this.companyId(),companyName:this.companyName()})},e.prototype.AddMembers=function(){return app.modal.Show("choosePeople",{teamId:this.id(),companyId:this.companyId(),projectId:this.projectId(),destinationType:"team",showTeams:!1})},e.prototype.AddDefaultProjects=function(){app.modal.Show("chooseDefaultProjects",{teamId:this.id(),onCloseCallBack:function(t){return function(e){if(!e.wasCancelled)return app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"team",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:ko.unwrap(t.id),extraInfo:{data:{parentTeamId:t.parentTeamId()}}})}}(this)})},e.prototype.Delete=function(){var t,e;e=app.tl("Confirm Delete"),t=app.tl("Delete this team and any subteams?"),app.modal.Show("confirm",{title:e,text:t,callback:function(t){return function(e){if(!e.wasCancelled)return app.api.delete("teams/"+t.id()+".json").then(function(e){var i,n;return Tipped.hideAll(),null!=(i=e.response.linkedCardId)?i:0,null!=(n=e.response.linkedColumnId)?n:0,app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"team",actionType:app.consts.ACTIONTYPE.DELETED,itemId:ko.unwrap(t.id),extraInfo:{data:{parentTeamId:t.parentTeamId()}}}),app.flash.Success(app.tl("Team deleted successfully."),{undo:t.UndoDelete}),Lightbox.closeAll()})}}(this)})},e.prototype.GetLogo=function(t){return null==t&&(t=[]),app.utility.GetTeamLogo(this,t)},e.prototype.ToggleSelected=function(t,e){var i;return!(null==(null!=e&&null!=(i=e.target)?i.classList:void 0)||!e.target.classList.contains("tipped-delegate"))||(this.isSelected(!this.isSelected()),!0)},e.prototype.QuickViewMembers=function(){return app.quickView.show("people",{title:app.tl("Members of [_s]",this.name()),teamId:this.id(),onClickAddPeople:this.AddMembers})},e.prototype.isUserMember=function(t){var e,i;return(i=ko.unwrap(null!=(e=t.id)?e:t))>0&&this.members().some(function(t){return function(t){return ko.unwrap(t.id)===i}}())},e}()}.apply(e,n))&&(t.exports=r)},1203:function(t,e,i){(function(n){var r,o,s=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};r=[i(1697)],void 0!==(o=function(){return function(t,e,i,r){var o,a,l,c,u,p,d,h,f,m,g,y,v;return null==r&&(r={}),l=app.utility.EnsureObservable(null!=(d=r.itemId)?d:0),c=app.utility.EnsureObservable(null!=(h=r.itemType)?h:""),p=app.utility.EnsureObservable(null!=(f=r.projectId)?f:0),y=app.utility.EnsureObservable(null!=(m=r.sharedKey)?m:"picker__project"+p()+"-item"+c()+l()),g=app.shared.get(y()),v=[],o=n(i),a=function(t,e){var i,n;if(null==e&&(e="person"),!app.featureFlip.check("teams")())return!0;if(i=function(){switch(g().pickerType){case"privacy":return"value";default:return"privacyIds"}}(),n=g()[i](),!n.length||"0"===n[0])return!0;switch(e){case"person":return t.isInPrivacy()||t.isInCompanyPrivacy()||t.isInTeamPrivacy();case"company":case"team":return t.isInPrivacy()}},u=ko.computed(function(e){return function(){var e,i,n,r,o,l,c,u,p,d,h,f,m,y,v,b,w,k,x,T,C,I,_,S,A,O,P,E,M,L,D,j,N,F,R,U,z,B,H,$,Y,V,G,W,q,X;if(C=[],I=[],_=[],app.featureFlip.check("teams")()){if(g(),null==(null!=(P=g())?P.companyStore:void 0)||!Object.values(g().companyStore()).length)return[];C=Object.values(g().companyStore()),I=null!=(null!=(E=g())?E.pickerRoles:void 0)?g().pickerRoles():[],_=Object.values(g().teamStore())}else{if(!(("function"==typeof t.pickerCompanies?t.pickerCompanies():void 0)&&t.pickerCompanies().length))return[];C=t.pickerCompanies(),I=null!=t.pickerRoles?t.pickerRoles():[],_=[]}if(r=[],e=[],N=[],b=[],app.featureFlip.check("teams")())for(D=null!=(L=g())?L.people():void 0,l=0,d=D.length;l<d;l++)T=D[l],a(T,"person")&&!T.isUnsubscribed&&(b[T.mentionName]?T.mentionName=T.fullName.toLowerCase().replace(/\s/gi,""):b[T.mentionName]=!0,e.push(T),T.isInPrivacy()&&r.push(T));else for(n=0,u=C.length;n<u;n++)for(i=C[n],M=i.people(),o=0,p=M.length;o<p;o++)T=M[o],a(T,"person")&&!T.isUnsubscribed()&&(b[T.mentionName()]?T.mentionName(T.getFullName().toLowerCase().replace(/\s/gi,"")):b[T.mentionName()]=!0,e.push(T),T.isInPrivacy()&&r.push(T));if(N=0===r.length?ko.mapping.toJS(e):ko.mapping.toJS(r),X=N.map(function(t){return t.id/1}),q=N.map(function(t){return t.companyId/1}),q=ko.utils.arrayGetDistinctValues(q),!app.featureFlip.check("teams")())for(c=0,h=I.length;c<h;c++){for(F=I[c],F.roleId=F.id,F.id="r"+F.userIdList,F.mentionImg="",F.mentionName=F.name,F.mentionType="role",F.searchName=F.name,V=F.userIdList.split(","),z=!1,w=0,f=V.length;w<f;w++)x=V[w],null!=ko.utils.arrayFirst(N,function(t){return"person"===t.mentionType&&t.id===parseInt(x,10)})&&(z=!0);z&&N.push(F)}if(app.featureFlip.check("teams")()){for(k=0,m=_.length;k<m;k++){for(H=_[k],G={id:"t"+H.id,teamId:H.id,name:H.name,mentionName:H.handle,mentionImg:H.mentionImg(),searchName:""+H.name+H.handle,mentionType:"team",avatarUrl:H.logoUrl,defaultImageUrl:H.defaultImageUrl},null!=(null!=(j=H.parentTeam)?j.name:void 0)?(G.name=H.parentTeam.name+"/"+H.name,null!=(null!=(A=H.rootTeam)?A.name:void 0)&&ko.unwrap(H.parentTeam.id)/1!=ko.unwrap(H.rootTeam.id)/1&&(G.name=H.rootTeam.name+"/\u2026/"+H.name)):G.name=H.name,B=!1,$=H.members().map(function(t){return t.id/1}),S=0,y=X.length;S<y;S++)W=X[S],s.call($,W)>=0&&(B=!0);B&&N.push(G)}for(R=0,v=C.length;R<v;R++)i=C[R],Y={id:"c"+i.id,companyId:i.id,name:i.name,mentionName:i.name,mentionImg:i.mentionImg,searchName:i.name,mentionType:"company",avatarUrl:i.logoUrl,defaultImageUrl:i.defaultImageUrl},O=i.id,U=s.call(q,O)>=0,U&&N.push(Y)}return N}}()),v.items=u,v.load=function(t){var e;t&&null!=(e=g())&&"function"==typeof e.findMatchingData&&e.findMatchingData(t)},v.notify=function(t){var i,n,r;if(i=t[0],app.featureFlip.check("teams")()){switch(i){case"r":r="role",n=t.substr(1).split(",");break;case"t":r="team",n=t.substr(1)/1;break;case"c":r="company",n=t.substr(1)/1;break;default:r="user",n=t/1}ko.postbox.publish(y()+"-mention",{type:r,id:n})}else t.indexOf("r")>-1?app.ko.postbox.publish(e+"-mentioned-role",{users:t.substr(1).split(",")}):app.ko.postbox.publish(e+"-mentioned",{id:parseInt(t,10)})},v.push(u),v.push(u.subscribe(function(){return o.atwho("load","@",u()).atwho("run"),setTimeout(function(){return o.atwho("run")},100)})),o.atwho({at:"@",data:u(),searchKey:"searchName",displayTpl:'<li class="h-mention h-mention--${mentionType}"\n        data-mention-type="${mentionType}"\n        data-id="${id}">\n    ${mentionImg}\n    <span class="h-mention__title">\n        ${name}\n    </span>\n    <span class="h-mention__handle">\n        @${mentionName}\n    </span>\n</li>',insertTpl:"@${mentionName}",callbacks:{filter:function(t){return function(t,e,i){return t.length&&v.load(t),e}}(),remoteFilter:function(t){return function(t,e){return v.load(t)}}(),beforeReposition:function(t){var e,i,n,r;return window.frameElement&&(i=null!=(n=window.frameElement)?n.offsetTop:void 0,e=null!=(r=window.frameElement)?r.offsetLeft:void 0,t.left-=e,t.top-=i),t},beforeInsert:function(t){return function(t,e){var i;return i=e[0].dataset.id,v.notify(i),t}}()}}),v}}.apply(e,r))&&(t.exports=o)}).call(e,i(245))},1204:function(t,e,i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}},s={}.hasOwnProperty,a=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};n=[i(164),i(1116)],void 0!==(r=function(t,e){return function(){function i(e,i){var n,r;null==i&&(i={}),this.buildChartData=o(this.buildChartData,this),this.buildMetricData=o(this.buildMetricData,this),this.createDataLoader=o(this.createDataLoader,this),this.updateConfig=o(this.updateConfig,this),this.hasPresetData=o(this.hasPresetData,this),console.assert("object"==typeof e),console.assert("object"==typeof i);for(n in e)s.call(e,n)&&(r=e[n],console.assert(null!=r.label),console.assert(null!=r.color),console.assert(null!=r.key));this.chartConfiguration=e,this.presetData=i,this.isDataSetUp=t.observable(!1)}return i.prototype.hasPresetData=function(){return Object.keys(this.presetData).length>0},i.prototype.updateConfig=function(t){var e,i;console.assert("object"==typeof t);for(e in t)s.call(t,e)&&(i=t[e],console.assert(null!=i.label),console.assert(null!=i.color),console.assert(null!=i.key));return this.chartConfiguration=t},i.prototype.createDataLoader=function(i,n,r,o,s,a){var l;return l={},l[r]=Object.keys(this.chartConfiguration).toString(),this.isDataSetUp(!0),new e(i,{listField:n,params:{get:t.utils.stringifyJson(l)},filter:{generateFilterParams:function(e){return function(){var e;return e={},null!=o&&t.isObservable(o)&&(e={timeRange:o()},"function"==typeof s?e=Object.assign(e,s()):null!=s&&(e=Object.assign(e,t.unwrap(s)))),e}}()},onLoad:function(t){return function(t){var e;return e=0===t.dataloader.list().length?0:t.dataloader.list().length-1,a(t.dataloader.list()[e])}}()})},i.prototype.buildMetricData=function(){var t,e,i,n,r;t=[],i=this.presetData;for(e in i)s.call(i,e)&&(r=i[e],t.push({name:e,number:r/1}));n=this.chartConfiguration;for(e in n)s.call(n,e)&&(r=n[e],a.call(Object.keys(this.presetData),e)<0&&t.push({name:e,number:0,key:r.key}));return t},i.prototype.updateMetricData=function(e,i){var n,r,o,s,l,c,u,p,d,h,f;for(console.assert(t.isObservable(e)),console.assert(Array.isArray(e())),console.assert("object"==typeof i),n=[],d=e(),r=0,c=d.length;r<c;r++)o=d[r],n.push(o.name);for(l in i)if(f=i[l],a.call(n,l)>=0)for(h=e(),s=0,u=h.length;s<u;s++)o=h[s],o.name===l&&(p={name:l,number:f/1},e.replace(o,p));for(l in i)f=i[l],a.call(n,l)<0&&e.push({name:l,number:f/1})},i.prototype.getDataAsObject=function(t){var e,i,n,r;for(console.assert(Array.isArray(t)),r={},i=0,n=t.length;i<n;i++)e=t[i],r[e.name]=e.number;return r},i.prototype.buildChartData=function(t){var e,i,n,r;e=[],n=this.chartConfiguration;for(i in n)s.call(n,i)&&(r=n[i],null!=t[i]&&e.push({label:r.label,color:r.color,number:t[i],key:r.key}));return e},i.prototype.hasData=function(t){var e,i,n;for(console.assert(Array.isArray(t)),e=0,n=t.length;e<n;e++)if(i=t[e],i.number>0)return!0;return!1},i}()}.apply(e,n))&&(t.exports=r)},1205:function(t,e,i){(function(n){var r,o,s=function(t,e){return function(){return t.apply(e,arguments)}},a={}.hasOwnProperty,l=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};r=[i(14),i(1119)],void 0!==(o=function(t,e){var i;return i=function(){function i(t,e){return this.SplitMessage=s(this.SplitMessage,this),this.GetNewJSON=s(this.GetNewJSON,this),this.EditProperties=s(this.EditProperties,this),this.OnQuickView=s(this.OnQuickView,this),this.OnUnarchive=s(this.OnUnarchive,this),this.OnArchive=s(this.OnArchive,this),this.OnUpdateFollowing=s(this.OnUpdateFollowing,this),this.Delete=s(this.Delete,this),this.Edit=s(this.Edit,this),this.markAsUnread=s(this.markAsUnread,this),this.MarkAsRead=s(this.MarkAsRead,this),this.Reply=s(this.Reply,this),this.markLatestPostAsRead=s(this.markLatestPostAsRead,this),this.getRelativePostedDate=s(this.getRelativePostedDate,this),this.getFullDate=s(this.getFullDate,this),this.getShortDate=s(this.getShortDate,this),this.dateToShort=s(this.dateToShort,this),this.dateToLong=s(this.dateToLong,this),this.getNumRepliesLinkText=s(this.getNumRepliesLinkText,this),this.getAuthorShortName=s(this.getAuthorShortName,this),this.getLatestAuthorShortName=s(this.getLatestAuthorShortName,this),this.getLatestAuthorFullName=s(this.getLatestAuthorFullName,this),this.getDisplayTitle=s(this.getDisplayTitle,this),this.getDetailsLong=s(this.getDetailsLong,this),null==t&&(t=this.GetNewJSON()),null!=t.body&&(t.body=t.body.replace(/https:\/\/s3.amazonaws.com\/tw-desk\/i\//gi,"https://tw-desk-files.teamwork.com/i/")),this.UpdateData(t,e),this}return i.prototype.UpdateData=function(t,e){var n,r,o,s,c,u,p,d,h,f,m,g,y,v,b,w,k,x;if(this.componentName="Message",null==t.isReply&&(t.isReply=!1),null==t.hasEditExpired&&(t.hasEditExpired=!0),t.pickerCompanies=[],t.isEditing=!1,null==t.canEditContents&&(t.canEditContents=!1),null==t.lockdownId&&(t.lockdownId=0),null==t.commentsCount&&(t.commentsCount=0),null==t.lastCommentDate&&null!=t.postedOn&&(t.lastCommentDate=t.postedOn),null==t.numNotified&&(t.numNotified=0),null==t.latestReply&&(t.latestReply={}),null==(r=t.latestReply).numNotified&&(r.numNotified=0),null==(o=t.latestReply).attachments&&(o.attachments=[]),null==(s=t.latestReply).attachmentsCount&&(s.attachmentsCount=0),null==t.latestReply.isRead&&(t.latestReply.isRead=!0),null==t.latestReply.body&&(t.latestReply.body=""),null==t.latestReply.contentType&&(t.latestReply.contentType=""),null==t.latestReply.author&&(t.latestReply.author={firstName:"",lastName:"",fullName:"",avatarUrl:""}),null==t.latestReply.reactions&&(t.latestReply.reactions={}),null==t.latestReply.reactions.counts&&(t.latestReply.reactions.counts={heart:0,joy:0,frown:0,like:0,dislike:0}),null==t.latestReply.reactions.mine&&(t.latestReply.reactions.mine=[]),null==t.projectId&&(t.projectId=0),null!=(null!=(m=t.project)?m.id:void 0)&&(t.projectId=t.project.id),null==t.tags&&(t.tags=[]),t.hasOwnProperty("replyNo")&&(t.postId=t.id,t.isReply=!0),null==t.postStatus&&(t.postStatus="active"),null==t.messageId&&(t.messageId=null!=(g=t.isReply?void 0:t.id)?g:0),t.likedByMe=!1,t.hasOwnProperty("likedByUsersJSON")?t.numLikes=parseInt(t.numLikes,10):(t.likedByUsers=[],t.numLikes=0),t.numLikes>0){t.likedByUsers=[],w=app.ko.utils.parseJson(t.likedByUsersJSON);for(c in w)void 0!==w[c]&&null!==w[c]&&(t.likedByUsers.push({id:c,name:w[c]}),c===app.loggedInUser.id().toString()&&(t.likedByMe=!0))}null==t.reactions&&(t.reactions={}),null==t.reactions.counts&&(t.reactions.counts={heart:0,joy:0,frown:0,like:0,dislike:0}),null==t.reactions.mine&&(t.reactions.mine=[]),y=t.reactions.counts;for(p in y)a.call(y,p)&&(x=y[p],t.reactions.counts[p]=x/1);if(null==t.attachments&&(t.attachments=[]),k=function(t){var e,i,n;if(t.checked=!0,null==t.extension?(t.isDisplayableImage=!1,t.isPlayableVideo=!1,t.isExternalVideo=!1,t.isBlockedVideo=!1):(t.isDisplayableImage="png"===(e=t.extension.toLowerCase())||"jpg"===e||"jpeg"===e||"gif"===e||"webp"===e||"svg"===e,t.isPlayableVideo=(i=t.extension.toLowerCase(),l.call(app.consts.FILES.PLAYABLEVIDEO,i)>=0),t.isExternalVideo=t.isPlayableVideo&&"teamworkpm"!==t.fileSource,t.isBlockedVideo=(n=t.extension.toLowerCase(),l.call(app.consts.FILES.BLOCKEDVIDEOS,n)>=0)),"?action="===t.thumbnail.substr(0,8))return t.thumbnail="./"+t.thumbnail},t.attachmentsCount>0)for(v=t.attachments,u=0,h=v.length;u<h;u++)n=v[u],k(n);if(t.latestReply.attachmentsCount>0)for(b=t.latestReply.attachments,d=0,f=b.length;d<f;d++)n=b[d],k(n);if(null==t.messageLink&&(t.messageLink=t.isReply?"messages/"+t.messageId+"?pmp="+t.postId:"messages/"+t.messageId),app.ko.mapping.fromJS(t,i.mapping,this),this.tags(app.tags.getAll(t.tags)),null==this.followerIds||null!=this.commentFollowerIds&&null!=this.changeFollowerIds||(this.commentFollowerIds=this.followerIds,this.changeFollowerIds=this.followerIds),null==this.userFollowing||null!=this.userFollowingComments&&null!=this.userFollowingChanges||(this.userFollowingComments=this.userFollowing,this.userFollowingChanges=this.userFollowing),null==this.latestAuthorShortName&&(this.latestAuthorShortName=ko.pureComputed(this.getLatestAuthorShortName)),null==this.latestAuthorFullName&&(this.latestAuthorFullName=ko.pureComputed(this.getLatestAuthorFullName)),null==this.authorShortName&&(this.authorShortName=ko.pureComputed(this.getAuthorShortName)),null==this.displayTitle&&(this.displayTitle=ko.pureComputed(this.getDisplayTitle)),null==this.detailsLong&&(this.detailsLong=ko.pureComputed(this.getDetailsLong)),null==this.numRepliesLinkText&&(this.numRepliesLinkText=ko.pureComputed(this.getNumRepliesLinkText)),null==this.modeIsLarge&&(this.modeIsLarge=ko.pureComputed(function(t){return function(){return null!=e&&"large"===e.mode()}}())),null==this.hasLatestReply&&(this.hasLatestReply=ko.pureComputed(function(t){return function(){return null!=t.latestReply.body&&""!==t.latestReply.body()}}(this))),null==this.hasReactions&&(this.hasReactions=ko.computed(function(t){return function(){var e,i;return null!=(null!=(i=t.reactions)?i.counts:void 0)&&(e=t.reactions.counts,e.heart()+e.joy()+e.frown()+e.like()+e.dislike()>0)}}(this))),null==this.latestReply.hasReactions&&(this.latestReply.hasReactions=ko.computed(function(t){return function(){var e,i;return null!=(null!=(i=t.latestReply.reactions)?i.counts:void 0)&&(e=t.latestReply.reactions.counts,e.heart()+e.joy()+e.frown()+e.like()+e.dislike()>0)}}(this))),null==this.showLatestReplyAsMainMessage&&(this.showLatestReplyAsMainMessage=ko.pureComputed(function(t){return function(){return!t.modeIsLarge()&&t.hasLatestReply()}}(this))),null==this.shortDate&&(this.shortDate=ko.pureComputed(this.getShortDate)),null==this.fullDate&&(this.fullDate=ko.pureComputed(this.getFullDate)),null==this.shortUpdatedDate&&(this.shortUpdatedDate=ko.pureComputed(function(t){return function(){return t.dateToShort(t.lastCommentDate())}}(this))),null==this.fullUpdatedDate&&(this.fullUpdatedDate=ko.pureComputed(function(t){return function(){return t.dateToLong(t.lastCommentDate())}}(this))),null==this.shortPostedDate&&(this.shortPostedDate=ko.pureComputed(function(t){return function(){return t.dateToShort(t.postedOn())}}(this))),null==this.fullPostedDate&&(this.fullPostedDate=ko.pureComputed(function(t){return function(){return t.dateToLong(t.postedOn())}}(this))),null==this.shortendReplyBody&&(this.shortendReplyBody=ko.pureComputed(function(t){return function(){return t.shortenHTMLText(t.latestReply.body())}}(this))),null==this.shortendMessageText&&(this.shortendMessageText=ko.pureComputed(function(t){return function(){return t.shortenHTMLText(t.body())}}(this))),null==this.mainMessageBody&&(this.mainMessageBody=ko.pureComputed(function(t){return function(){return t.showLatestReplyAsMainMessage()?t.shortendReplyBody():t.shortendMessageText()}}(this))),null==this.mainMessageAuthorShortName&&(this.mainMessageAuthorShortName=ko.pureComputed(function(t){return function(){return t.showLatestReplyAsMainMessage()?t.latestAuthorShortName():t.authorShortName()}}(this))),null==this.mainMessageAuthorAvatar&&(this.mainMessageAuthorAvatar=ko.pureComputed(function(t){return function(){return t.showLatestReplyAsMainMessage()?t.latestReply.author.avatarUrl():t.author.avatarUrl()}}(this))),null==this.hasCategory&&(this.hasCategory=ko.pureComputed(function(t){return function(){return""!==t.category.id()}}(this))),null==this.categoryUrl&&(this.categoryUrl=ko.pureComputed(function(t){return function(){return"projects/"+t.project.id()+"/messages?catId="+t.category.id()}}(this))),null==this.latestMessageShortenedBody&&(this.latestMessageShortenedBody=ko.pureComputed(function(t){return function(){return t.shortenHTMLText(t.latestReply.body())}}(this))),null==this.url&&(this.url=ko.pureComputed(function(t){return function(){var e,i;return i="#messages/"+t.id(),e=app.currentRoute().categoryId(),e>0&&(i+="?catid="+e),i}}(this))),null==this.latestReplyRelativeDate&&(this.latestReplyRelativeDate=ko.pureComputed(function(t){return function(){return app.utility.GetPastRelativeTime(t.lastCommentDate())}}(this))),null==this.relativePostedDate)return this.relativePostedDate=ko.pureComputed(this.getRelativePostedDate)},i.prototype.getDetailsLong=function(){return"by "+this.author.fullName()+" on "+this.userDisplayPostedDate()+", "+this.userDisplayPostedTime()},i.prototype.getDisplayTitle=function(){return this.commentsCount()>0?"RE: "+this.title():this.title()},i.prototype.getLatestAuthorFullName=function(){return this.latestReply.author.fullName()},i.prototype.getLatestAuthorShortName=function(){return this.latestReply.author.firstName()+" "+this.latestReply.author.lastName()[0]+"."},i.prototype.getAuthorShortName=function(){return this.isReply(),this.author.firstName()+" "+this.author.lastName()[0]+"."},i.prototype.getNumRepliesLinkText=function(){return 1===this.commentsCount()?app.tl("One Reply",this.commentsCount()):app.tl("[_s] Replies",this.commentsCount())},i.prototype.dateToLong=function(e){var i,n;return null==app.loggedInUser?t().format("DD MMM YY"):(n="ddd, MMM Do YYYY "+app.loggedInUser.localization.timeFormat().replace("MM","mm"),i=t(e),i.format(n))},i.prototype.dateToShort=function(e){var i,n;return null==app.loggedInUser?t().format("DD MMM YY"):(n=app.loggedInUser.localization.timeFormat().replace("MM","mm"),i=t(e),i.isSame(t(),"day")?i.format(n):i.isSame(t(),"year")?i.format("DD MMM"):i.format("DD MMM YY"))},i.prototype.getShortDate=function(){var e,i;return null==app.loggedInUser?t().format("DD MMM YY"):(i=app.loggedInUser.localization.timeFormat().replace("MM","mm"),e=this.showLatestReplyAsMainMessage?this.lastCommentDate():this.postedOn(),e.isSame(t(),"day")?e.format(i):e.isSame(t(),"year")?e.format("DD MMM"):e.format("DD MMM YY"))},i.prototype.getFullDate=function(){var t,e;return t="ddd, MMM Do YYYY "+app.loggedInUser.localization.timeFormat().replace("MM","mm"),e=this.postedOn(),e.format(t)},i.prototype.getRelativePostedDate=function(){return t().isSame(this.postedOn(),"day")?app.utility.GetPastRelativeTime(this.postedOn()):this.userDisplayPostedDate()+" "+this.userDisplayPostedTime()},i.prototype.markLatestPostAsRead=function(t){return null==t&&(t=!0),this.latestReply.isRead(!0),app.api.put("messageReplies/"+this.latestReply.postId()+"/mark_as_read.json").then(function(e){return function(){if(t)return app.flash.Success(app.tl("Reply marked as read successfully."))}}()).catch(function(t){return function(){return t.latestReply.isRead(!1)}}(this))},i.prototype.Reply=function(){return this.isRead()||this.MarkAsRead(!1),app.modal.Show("addMessage",{projectId:this.projectId(),messageId:this.messageId()>0?this.messageId():this.id(),lockdownId:this.lockdownId()})},i.prototype.MarkAsRead=function(t){var e;return null==t&&(t=!0),this.isRead(!0),this.hasLatestReply()&&this.latestReply.isRead(!0),Tipped.hideAll(),e=this.isReply()?"messageReplies/"+this.id()+"/mark_as_read.json":this.messageId()>0?"posts/"+this.messageId()+"/mark_as_read.json":"posts/"+this.id()+"/mark_as_read.json",app.api.put(e).then(function(e){return function(){return t&&app.flash.Success(app.tl("Message marked as read successfully.")),app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"message",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:e.id(),projectId:e.project.id(),subType:"marked-read"})}}(this)).catch(function(t){return function(){return t.isRead(!1),t.latestReply.isRead(!1)}}(this))},i.prototype.markAsUnread=function(){return this.isRead(!1),app.api.put("posts/"+this.postId()+"/markunread.json").then(function(t){return function(){return app.flash.Success(app.tl("Message marked as unread."))}}()).catch(function(t){return function(){return t.isRead(!0)}}(this))},i.prototype.shortenHTMLText=function(t){var e,i;return i=n("<div>"+t+"</div>").text(),e=i.slice(0,500),i.length!==e.length&&(e=""+e+app.localizationPreferences().ellipsis),e},i.prototype.Clone=function(){var t;return t=ko.mapping.toJS(this),new i(t)},i.prototype.Edit=function(){return Tipped.hideAll(),this.isEditing(!0)},i.prototype.Delete=function(){var t,e,i,n;Tipped.hideAll(),e=app.tl("Confirm Delete"),n=this.isReply()?"messageReplies/"+this.id()+".json":"messages/"+this.id()+".json",t=this.isReply()?app.tl("Are you certain you want to delete this reply?"):this.commentsCount()>0?app.tl("Are you certain you want to delete this message and all replies?"):app.tl("Are you certain you want to delete this message?"),i=function(t){return function(){return app.flash.Success(app.tl("Undeleting")+app.localizationPreferences().ellipsis),app.api.put("trashcan/"+(t.isReply()?"messagereplies":"messages")+"/"+t.id()+"/restore.json").then(function(e){if(app.flash.Success(app.tl("Message has been restored"),{timer:2e3}),app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:t.isReply()?"messageReply":"message",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:t.id(),projectId:t.project.id()}),t.postStatus("active"),!t.isReply())return"dashboard"===app.currentRoute().page?app.GoTo("dashboard/messages"):app.GoTo("messages/"+t.id())})}}(this),app.modal.Show("confirm",{title:e,text:t,callback:function(t){return function(e){if(!e.wasCancelled)return app.api.delete(n).then(function(e){return app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:t.isReply()?"messageReply":"message",actionType:app.consts.ACTIONTYPE.DELETED,itemId:t.id(),projectId:t.project.id()}),t.postStatus("deleted"),app.flash.Success(app.tl("Message has been deleted"),{timer:5e3,undo:i}),"dashboard"===app.currentRoute().page?app.GoTo("dashboard/messages"):t.isReply()?void 0:app.GoTo("projects/"+t.project.id()+"/messages")})}}(this)})},i.prototype.OnUpdateFollowing=function(t){Tipped.hideAll(),"string"==typeof t&&(t="none"!==t),app.api.put("messages/"+this.id()+"/"+(t?"follow":"unfollow")+".json").then(function(e){return function(i){return e.userFollowing(t)}}(this))},i.prototype.OnArchive=function(){return Tipped.hideAll(),app.api.put("messages/"+this.id()+"/archive.json").then(function(t){return function(e){return app.flash.Success(app.tl("Message has been archived")),t.messageStatus("archived"),app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"message",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:t.id(),projectId:t.project.id()})}}(this))},i.prototype.OnUnarchive=function(){return app.api.put("messages/"+this.id()+"/unarchive.json").then(function(t){return function(e){return app.flash.Success(app.tl("Message has been un-archived")),t.messageStatus("active"),app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"message",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:t.id(),projectId:t.project.id()})}}(this))},i.prototype.OnQuickView=function(t){var e,i;return null==t&&(t=null),e=null==t||"numeric"!=(i=typeof ko.unwrap(t))&&"string"!==i?this.messageId():t,this.isRead(!0),app.quickView.show("message",{id:e,messageId:e,projectId:this.project.id()})},i.prototype.EditProperties=function(){return app.modal.Show("editMessagePostDetails",{message:this,projectId:this.projectId()})},i.prototype.GetNewJSON=function(){var t;return t={project:{id:0,name:""},author:{id:app.loggedInUser.id(),firstName:app.loggedInUser.firstName(),lastName:app.loggedInUser.lastName(),fullName:app.loggedInUser.fullName(),avatarUrl:app.loggedInUser.avatarUrl()},contributingUsers:[{id:app.loggedInUser.id(),firstName:app.loggedInUser.firstName(),lastName:app.loggedInUser.lastName(),fullName:app.loggedInUser.fullName(),avatarURL:app.loggedInUser.avatarUrl()}],isRead:1,private:0,commentsCount:0,tags:[],company:{id:app.account.companyid(),name:app.account.companyname()},id:0,lastChangedOn:new Date,contentType:app.loggedInUser.useMarkdown()?"TEXT":"HTML",isOriginal:1,userDisplayPostedDate:"",userDisplayPostedTime:"",attachments:[],attachmentsCount:0,canEdit:!0,postId:0,userFollowing:!0,category:{id:"0",name:app.tl("No Category"),color:""},followerIds:"1",postedOn:new Date,body:"",lastCommentDate:new Date,title:""},e.camelize(t)},i.prototype.SplitMessage=function(){return app.modal.Show("splitMessageThread",{post:this,projectId:this.projectId()})},i}(),i.mapping={message:{create:function(t){return new i(t.data)}},messages:{key:function(t){return app.ko.unwrap(t.id)},create:function(t){return new i(t.data)}},lockdownId:{create:function(t){return ko.observable(""===t.data?0:parseInt(t.data,10))}},commentsCount:{create:function(t){return ko.observable(parseInt(t.data,10))}},attachmentsCount:{create:function(t){return ko.observable(parseInt(t.data,10))}},isRead:{create:function(t){return ko.observable(1===parseInt(t.data,10))},update:function(t){return 1===parseInt(t.data,10)}},isOriginal:{create:function(t){return ko.observable(1===parseInt(t.data,10))}},lastCommentDate:{create:function(e){return ko.observable(t(e.data))},update:function(e){return t(e.data)}},postedOn:{create:function(e){return ko.observable(t(e.data))},update:function(e){return t(e.data)}}},i}.apply(e,r))&&(t.exports=o)}).call(e,i(245))},1206:function(t,e,i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}};n=[i(14)],void 0!==(r=function(t){return function(){function e(t){this.UpdateData=o(this.UpdateData,this),this.setupComputedsAndObservables=o(this.setupComputedsAndObservables,this),this.updateProperties=o(this.updateProperties,this),ko.mapping.fromJS(t,this.mapping,this),this.componentName="TimeEntry",this.updateProperties(t),this.setupComputedsAndObservables(),null!=t.tags&&t.tags.length?this.tags(app.tags.getAll(t.tags)):this.tags=ko.observableArray([])}return e.prototype.mapping={key:function(t){return ko.unwrap(parseInt(t.id,10))},id:{update:function(t){return parseInt(t.data,10)}},projectId:{update:function(t){return parseInt(t.data,10)}},hours:{update:function(t){return parseInt(t.data,10)}},minutes:{update:function(t){return parseInt(t.data,10)}},userId:{update:function(t){return parseInt(t.data,10)}},personId:{update:function(t){return parseInt(t.data,10)}},taskEstimatedTime:{update:function(t){return parseInt(t.data,10)}},hasStartTime:{update:function(t){return"1"===t.data||!0===t.data}},taskIsSubTask:{update:function(t){return"1"===t.data||!0===t.data}},taskIsPrivate:{update:function(t){return"1"===t.data||!0===t.data}},taskId:{update:function(t){return""===t.data?0:parseInt(t.data,10)}},todoItemId:{update:function(t){return""===t.data?0:parseInt(t.data,10)}}},e.prototype.updateProperties=function(e){return this.date=ko.observable(t(e.date)),this.createdAt=t(e.createdAt),null==this.taskId&&(this.taskId=this.todoItemId),null==this.taskName&&(this.taskName=this.todoItemName),null==this.tasklistName&&(this.tasklistName=this.todoListName),null==this.userId&&(this.userId=this.personId),null==this.userFirstName&&(this.userFirstName=this.personFirstName),null==this.userLastName&&(this.userLastName=this.personLastName),this.project=app.projectInfo.get(this.projectId()),null!=e.tags?e.tags:e.tags=[]},e.prototype.setupComputedsAndObservables=function(){if(null==this.taskListId&&(ko.isComputed(this.taskListId)||(this.taskListId=ko.pureComputed(function(t){return function(){return null==t.todoListId?0:""===t.todoListId()?0:parseInt(t.todoListId(),10)}}(this)))),ko.isComputed(this.userName)||(this.userName=ko.pureComputed(function(t){return function(){return t.userFirstName()+" "+t.userLastName()}}(this))),ko.isComputed(this.totalMinutes)||(this.totalMinutes=ko.pureComputed(function(t){return function(){return 60*t.hours()+t.minutes()}}(this))),ko.isComputed(this.decimalHours)||(this.decimalHours=ko.pureComputed(function(t){return function(){var e;return e=(t.totalMinutes()/60).toFixed(3),"0"===e.slice(-1)?e.slice(0,-1):e}}(this))),null==this.isBillable&&(ko.isComputed(this.isBillable)||(this.isBillable=ko.pureComputed(function(t){return function(){return null!=t.isbillable&&"1"===t.isbillable()}}(this)))),null==this.isBilled&&(ko.isComputed(this.isBilled)||(this.isBilled=ko.pureComputed(function(t){return function(){return null!=t.isbilled&&"1"===t.isbilled()}}(this)))),!ko.isComputed(this.canLogTime))return this.canLogTime=ko.pureComputed(function(t){return function(){var e;return null!=(e=t.project())?e.permissions.canLogTime():void 0}}(this))},e.prototype.UpdateData=function(t){if(null!=t)return ko.mapping.fromJS(t,this.mapping,this),this.updateProperties(t),this.setupComputedsAndObservables()},e}()}.apply(e,n))&&(t.exports=r)},1210:function(t,e,i){"use strict";function n(t){var e=t?{v:t}:{};return(0,o.inherits)(s,(0,r.createTokenClass)(),e)}e.__esModule=!0,e.AMPERSAND=e.CLOSEPAREN=e.CLOSEANGLEBRACKET=e.CLOSEBRACKET=e.CLOSEBRACE=e.OPENPAREN=e.OPENANGLEBRACKET=e.OPENBRACKET=e.OPENBRACE=e.WS=e.TLD=e.SYM=e.UNDERSCORE=e.SLASH=e.MAILTO=e.PROTOCOL=e.QUERY=e.POUND=e.PLUS=e.NUM=e.NL=e.LOCALHOST=e.PUNCTUATION=e.DOT=e.COLON=e.AT=e.DOMAIN=e.Base=void 0;var r=i(1259),o=i(1176),s=(0,r.createTokenClass)();s.prototype={toString:function(){return this.v+""}};var a=n(),l=n("@"),c=n(":"),u=n("."),p=n(),d=n(),h=n("\n"),f=n(),m=n("+"),g=n("#"),y=n(),v=n("mailto:"),b=n("?"),w=n("/"),k=n("_"),x=n(),T=n(),C=n(),I=n("{"),_=n("["),S=n("<"),A=n("("),O=n("}"),P=n("]"),E=n(">"),M=n(")"),L=n("&");e.Base=s,e.DOMAIN=a,e.AT=l,e.COLON=c,e.DOT=u,e.PUNCTUATION=p,e.LOCALHOST=d,e.NL=h,e.NUM=f,e.PLUS=m,e.POUND=g,e.QUERY=b,e.PROTOCOL=y,e.MAILTO=v,e.SLASH=w,e.UNDERSCORE=k,e.SYM=x,e.TLD=T,e.WS=C,e.OPENBRACE=I,e.OPENBRACKET=_,e.OPENANGLEBRACKET=S,e.OPENPAREN=A,e.CLOSEBRACE=O,e.CLOSEBRACKET=P,e.CLOSEANGLEBRACKET=E,e.CLOSEPAREN=M,e.AMPERSAND=L},1211:function(t,e,i){t.exports=i(1389).default},1223:function(t,e,i){var n,r;n=[i(164),i(3556)],void 0!==(r=function(t,e){return t.bindingHandlers.slider={init:function(i,n,r,o,s){var a,l,c;c=[],a=n(),l=e.create(i,a),null!=a.callbacks&&(null!=a.callbacks.slide&&l.on("slide",a.callbacks.slide),null!=a.callbacks.end&&l.on("end",a.callbacks.end),null!=a.callbacks.change&&l.on("change",a.callbacks.change)),null!=a.koObservable&&c.push(a.koObservable.subscribe(function(t){return function(t){var e;if(e=l.get(),Array.isArray(t)&&Array.isArray(e)){if(t.toString()!==e.toString())return l.set(t)}else if(parseInt(t,10)!==parseInt(e,10))return l.set(t)}}())),t.utils.domNodeDisposal.addDisposeCallback(i,function(t){return function(){l.destroy(),null!=c&&c.forEach(function(t){return t.dispose()})}}())}}}.apply(e,n))&&(t.exports=r)},1224:function(t,e,i){(function(n){var r,o,s=function(t,e){return function(){return t.apply(e,arguments)}};r=[i(2303)],void 0!==(o=function(t){var e;return ko.bindingHandlers.setRootElement={init:function(t,e,i,r,o){var s;return s=n(t),r.onRendered(s)}},e=function(){function t(t){var e,i,n,r,o;return r=t.requestOptions,i=t.isAuthed,this.projectId=t.projectId,e=t.buttonDisabled,n=t.replacingFile,o=t.showCancel,this.cancelUpload=s(this.cancelUpload,this),r=r||{},this.requestOptions={},this.requestOptions.type=r.type||"post",this.requestOptions.headers=r.headers||{},this.requestOptions.url=r.url,this.requestOptions.multipart=r.multipart,this.requestOptions.formData=r.formData,this.isAuthed=i||ko.observable(!1),this.replacingFile=n||!1,this.buttonDisabled=e||ko.observable(!0),this.showCancel=ko.observable(null!=o&&o),this.uploading=ko.observable(!1),this.isSubmitting=ko.observable(!1),this.progress=ko.observable(0),this.buttonText=ko.observable(app.tl("Upload")),null}return t.prototype.$root=null,t.prototype.$button=null,t.prototype.requestOptions=null,t.prototype.buttonText=null,t.prototype.isAuthed=null,t.prototype.projectId=null,t.prototype.buttonDisabled=ko.observable(!0),t.prototype.onFileAdded=function(){},t.prototype.getToken=function(t,e){var i,r,o;return null==e&&(e=[]),o=n.param(e),i="",ko.unwrap(this.projectId)>0&&(i="projectId="+ko.unwrap(this.projectId)+"&"),r="integrations/"+t+".json?"+i+"getToken=true&"+o,n.getJSON(r)},t.prototype.onRendered=function(t){return this.$root=t,this.$button=this.$root.find("input"),this.setupJQFileUpload()},t.prototype.setupJQFileUpload=function(){return this.$button.fileupload({type:this.requestOptions.type,url:this.requestOptions.url,multipart:this.requestOptions.multipart,dataType:"JSON",always:function(t){return function(e,i){return t.buttonText(app.tl("Upload")),t.isSubmitting(!1),t.onUploaded(e,i)}}(this),add:function(t){return function(){return t.isSubmitting(!0),t.buttonText(app.tl("Uploading")),t.onFileAdded.apply(t,arguments)}}(this),progress:function(t){return function(e){var i,n;return i=e.loaded,n=e.total,t.progress(i/n)}}(this),beforeSend:function(t){return function(e,i){var n,r,o;r=t.requestOptions.headers;for(n in r)o=r[n],e.setRequestHeader(n,o);return t.fileXHR=e}}(this),send:function(t){return function(e,i){if(t.uploading(!0),null!=t.onFileUploadSend)return t.onFileUploadSend(e,i)}}(this),done:function(t){return function(e,i){return t.uploading(!1),t.progress(0),t.fileXHR=null}}(this),fail:function(t){return function(e,i){var n,r;return t.uploading(!1),t.progress(0),t.fileXHR=null,"ABORTED"===i.jqXHR.statusText?app.flash.Info(app.tl("File upload cancelled.")):500!==i.jqXHR.status||"OneDrive"!==(n=t.serviceName)&&"Google Drive"!==n||!t.replacingFile?"Box.com"===t.serviceName&&""===i.errorThrown&&"error"===i.textStatus?console.log("Box CORS"):"Dropbox"===t.serviceName&&"401"===("function"==typeof i.response&&null!=(r=i.response().jqXHR)?r.status.toString():void 0)?app.flash.Error(app.tl("Error uploading the file. You may need to re-authorise your [_s] integration","Dropbox")):app.flash.Error(app.tl("Error uploading the file. The file may already exist, its size is too big or you don't have access.")):app.flash.Error(app.tl("Error uploading the file"),app.tl("This may be an invalid replacement operation. Recheck your source file."))}}(this)})},t.prototype.cancelUpload=function(){var t;if(null!=(null!=(t=this.fileXHR)?t.abort:void 0))return app.modal.Show("confirm",{title:app.tl("Are you sure?"),text:app.tl("Are you sure you want to cancel your file upload?"),callback:function(t){return function(e){var i;if(!e.wasCancelled)return null!=(null!=(i=t.fileXHR)?i.abort:void 0)?t.fileXHR.abort("ABORTED"):void 0}}(this)})},t}(),e.template=t,e}.apply(e,r))&&(t.exports=o)}).call(e,i(245))},1225:function(t,e,i){var n;void 0!==(n=function(){return function(t,e){var i;return null!=(i=window.dataLayer)?i.push({event:t,label:e}):void 0}}.call(e,i,e,t))&&(t.exports=n)},1226:function(t,e,i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}},s=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};n=[i(14),i(1118)],void 0!==(r=function(t,e){return function(){function i(i,n){var r,a,l,c,u,p,d,h,f,m;switch(null==n&&(n=null),this.OnQuickView=o(this.OnQuickView,this),this.OnClickUploadNewVersion=o(this.OnClickUploadNewVersion,this),this.UndoDeleteVersion=o(this.UndoDeleteVersion,this),this.UndoDeleteFile=o(this.UndoDeleteFile,this),this.DeleteFileVersion=o(this.DeleteFileVersion,this),this.OnClickDeleteFileVersion=o(this.OnClickDeleteFileVersion,this),this.DeleteFile=o(this.DeleteFile,this),this.OnDeleteFile=o(this.OnDeleteFile,this),this.OnClickDeleteFile=o(this.OnClickDeleteFile,this),this.Unlock=o(this.Unlock,this),this.Lock=o(this.Lock,this),this.IsActive=o(this.IsActive,this),this.OnUpdateFollowing=o(this.OnUpdateFollowing,this),this.checkHighlight=o(this.checkHighlight,this),this.componentName="File",this.parentVM=n,i.projectId=parseInt(i.projectId,10),i.id=parseInt(i.id,10),i.categoryId=+parseInt(i.categoryId,10)||0,i.size=parseInt(i.size,10),i.version=parseInt(i.version,10),i.versionId=parseInt(i.versionId,10),i.private=parseInt(i.private,10),i.commentEndpoint="files",i.fileRootVersionId=i.id,null!=i.lockdownId&&""!==i.lockdownId||(i.lockdownId=0),null==i.hasUnreadComments&&(i.hasUnreadComments=!1),null!=i.numberOfUnreadComments&&(i.hasUnreadComments=parseInt(i.numberOfUnreadComments,10)>0),null==i.isSelected&&(i.isSelected=!1),null==i.fileLockedByUserId?i.fileLockedByUserId=-1:i.fileLockedByUserId=parseInt(i.fileLockedByUserId,10),null==i.fileLocked?i.fileLocked=0:i.fileLocked=parseInt(i.fileLocked,10),null==i.fileLockedBySelf&&(i.fileLockedBySelf=!1),null==i.displayName&&(i.displayName=null),null!=i.extension?i.extension=i.extension.toLowerCase():i.extension="",null==i.thumbURL&&(i.thumbURL=""),null==i.versions&&(i.versions=[]),null==i.relatedItems&&(i.relatedItems=[]),null==i.shareable&&(i.shareable=!1),null==this.descriptionAsHTML?this.descriptionAsHTML=ko.observable(ko.unwrap(i.description)).extend({linkify:!0}):this.descriptionAsHTML(ko.unwrap(i.description)),null==i.commentCount&&(i.commentCount=0),i.commentCount=parseInt(i.commentCount,10),null!=i.canAddFiles&&("0"===i.canAddFiles&&(i.canAddFiles=!1),"1"===i.canAddFiles&&(i.canAddFiles=!0)),null==i.doHighlight&&(i.doHighlight=!1),i.keepIconsActive=!1,this.isIntegrationEnabled=ko.observable,i.fileSourceDisplay={},i.fileSource){case"onedrive":i.fileSourceDisplay.name="OneDrive",i.fileSourceDisplay.css="onedrive",i.fileSourceDisplay.icon="//cdn.teamwork.com/images/newui/file-icons/large/"+app.utility.GetAttachmentIcon(i.originalName),this.isIntegrationEnabled=ko.pureComputed(function(t){return function(){var t;return null!=(t=app.account.integrations.onedrive)&&"function"==typeof t.enabled?t.enabled():void 0}}());break;case"onedrivebusiness":i.fileSourceDisplay.name="OneDrive Business",i.fileSourceDisplay.css="onedrive",i.fileSourceDisplay.icon="//cdn.teamwork.com/images/newui/file-icons/large/"+app.utility.GetAttachmentIcon(i.originalName),this.isIntegrationEnabled=ko.pureComputed(function(t){return function(){var t;return null!=(t=app.account.integrations.onedrivebusiness)&&"function"==typeof t.enabled?t.enabled():void 0}}());break;case"sharepoint":i.fileSourceDisplay.name="SharePoint",i.fileSourceDisplay.css="sharepoint",i.fileSourceDisplay.icon="//cdn.teamwork.com/images/newui/file-icons/large/"+app.utility.GetAttachmentIcon(i.originalName),this.isIntegrationEnabled=ko.pureComputed(function(t){return function(){var t;return null!=(t=app.account.integrations.sharepoint)&&"function"==typeof t.enabled?t.enabled():void 0}}());break;case"googledrive":i.fileSourceDisplay.name="Google Drive",i.fileSourceDisplay.css="googledocs",i.fileSourceDisplay.icon="//cdn.teamwork.com/images/newui/drive-icons/large/"+i.extraData+".png",this.isIntegrationEnabled=ko.pureComputed(function(t){return function(){var t;return null!=(t=app.account.integrations.googledrive)&&"function"==typeof t.enabled?t.enabled():void 0}}());break;case"dropbox":i.fileSourceDisplay.name="Dropbox",i.fileSourceDisplay.css="dropbox",i.fileSourceDisplay.icon="//cdn.teamwork.com/images/newui/file-icons/large/"+app.utility.GetAttachmentIcon(i.originalName),this.isIntegrationEnabled=ko.pureComputed(function(t){return function(){var t;return null!=(t=app.account.integrations.dropbox)&&"function"==typeof t.enabled?t.enabled():void 0}}());break;case"box.com":i.fileSourceDisplay.name="Box.com",i.fileSourceDisplay.css="box",i.fileSourceDisplay.icon="//cdn.teamwork.com/images/newui/file-icons/large/"+app.utility.GetAttachmentIcon(i.originalName),this.isIntegrationEnabled=ko.pureComputed(function(t){return function(){var t;return null!=(t=app.account.integrations.box)&&"function"==typeof t.enabled?t.enabled():void 0}}());break;default:i.fileSourceDisplay.name=i.fileSourceDisplay.css=i.fileSource,i.fileSourceDisplay.icon="//cdn.teamwork.com/images/newui/file-icons/large/"+app.utility.GetAttachmentIcon(i.originalName)}if(null!=i.relatedItems&&i.relatedItems.length>0){for(i.relatedItems.map(function(t){return function(t){return"comment"===t.type&&null!=t.commentId&&(t.cId="comment"+t.commentId),t}}()),p=[],u={},c={},a=0;a<i.relatedItems.length;)l=i.relatedItems[a].cId,u[l]===c&&null!=l||(p.push(i.relatedItems[a]),u[l]=c),++a;i.relatedItems=p}if(i.numLikes=parseInt(i.numLikes,10),i.likedByMe=!1,void 0===i.likedByUsers&&(i.likedByUsers=[]),i.numLikes>0){i.likedByUsers=[],h=app.ko.utils.parseJson(i.likedByUsersJSON);for(a in h)void 0!==h[a]&&null!==h[a]&&(i.likedByUsers.push({id:a,name:h[a]}),a===app.loggedInUser.id().toString()&&(i.likedByMe=!0))}null==i.reactions&&(i.reactions={}),null==i.reactions.counts&&(i.reactions.counts={joy:0,dislike:0,heart:0,like:0,frown:0}),null==i.reactions.mine&&(i.reactions.mine=[]),null==i.dropboxShareableLinks&&(i.dropboxShareableLinks=!1),app.ko.mapping.fromJS(i,this.mapping,this),this.extension=ko.pureComputed(function(t){return function(){return-1!==i.originalName.indexOf(".")?i.originalName.split(".").pop().toLowerCase():""}}()),this.isDisplayableImage=ko.pureComputed(function(t){return function(){return["png","jpg","jpeg","gif","webp","svg"].indexOf(t.extension().toLowerCase())>-1}}(this)),this.isPlayableVideo=ko.pureComputed(function(t){return function(){var e;return e=t.extension().toLowerCase(),s.call(app.consts.FILES.PLAYABLEVIDEO,e)>=0}}(this)),this.isBlockedVideo=ko.pureComputed(function(t){return function(){var e;return e=t.extension().toLowerCase(),s.call(app.consts.FILES.BLOCKEDVIDEOS,e)>=0}}(this)),this.isExternalVideo=ko.pureComputed(function(t){return function(){var e;return t.isPlayableVideo()&&!t.isBlockedVideo()&&"teamworkpm"!==(e=t.fileSource())&&"sharepoint"!==e&&"onedrivebusiness"!==e}}(this)),this.canOpenInOfficeOnline=ko.pureComputed(function(t){return function(){return["xlsx","docx","pptx","mdbx","doc","xls"].indexOf(t.extension().toLowerCase())>-1}}(this)),this.canEditFileInDocEditor=ko.pureComputed(function(t){return function(){return 0===["pdf","mp3","avi","mpg","flv","zip"].indexOf(t.extension().toLowerCase())}}(this)),this.getProject=ko.pureComputed(function(t){return function(){var e;return null!=app.currentRoute().project?app.currentRoute().project:(e=ko.unwrap(t.projectId),e>0?app.projectInfo.get(e):null)}}(this)),this.canUploadFilesDirectly=ko.pureComputed(function(t){return function(){var e;return!app.featureFlip.check("disablingdirectfileuploads",{unwrap:!0})||!(null!=(e=ko.unwrap(t.getProject()))&&!e.directFileUploadsEnabled())&&app.account.canUploadFilesDirectly()}}(this)),this.uploadedByName=ko.pureComputed(function(t){return function(){return t.uploadedByUserFirstName()+" "+t.uploadedByUserLastName()}}(this)),this.finalThumbURL=ko.pureComputed(function(t){return function(){var e;return e=t.thumbURL(),"?"===e.charAt(0)?"./"+e:e}}(this)),this.fileDateString=ko.pureComputed(function(e){return function(){var i;return i=e.uploadedDate(),(new t).format("YY")===i.format("YY")?app.utility.GetPastRelativeTime(i):i.format("DD MMM YY")}}(this)),this.dateDay=ko.pureComputed(function(e){return function(){var i,n,r;return n=t().startOf("day"),0===(i=Math.floor(e.uploadedDate().diff(n,"days",!0)))?app.tl("Today"):-1===i?app.tl("Yesterday"):(t().startOf("day").format("YYYY")!==e.uploadedDate().format("YYYY")&&(r=", "+ko.unwrap(e.uploadedDate().format("YYYY"))),e.uploadedDate().format("MMMM DD")+(null!=r?r:r=""))}}(this)),this.canOpenInImageViewer=ko.pureComputed(function(t){return function(){var e;return"teamworkpm"===(e=t.fileSource())||"dropbox"===e||"onedrive"===e||"onedrivebusiness"===e||"box.com"===e||"googledrive"===e||"sharepoint"===e}}(this)),this.fileDateDisplay=ko.pureComputed(function(t){return function(){var e;return e=app.loggedInUser.localization.timeFormat(),t.uploadedDate().format("dddd, DD MMMM YYYY "+e)}}(this)),this.sizeText=ko.pureComputed(function(t){return function(){return app.utility.GetFriendlyBytes(t.size())}}(this)),this.fileSourceIsTeamworkPM=ko.pureComputed(function(t){return function(){return"teamworkpm"===t.fileSource()}}(this)),this.showVersions=ko.observable(!1),this.showInfoToggle=ko.observable(!1),this.fileChosen=ko.observable(!1),this.hasActiveVersions=ko.pureComputed(function(t){return function(){return t.versions().filter(function(t){return"active"===t.status()}).length>1}}(this)),this.listThumb=ko.observable("//cdn.teamwork.com/images/filetypes/"+app.GetIcon(this.originalName())),this.isDisplayableImage()&&this.listThumb(this.thumbURL()),"teamworkpm"===this.fileSource()&&this.listThumb("/"+this.listThumb()),void 0===this.canAddFiles?(this.permissionsLoaded=ko.observable(!1),this.projectPermissions={},this.canAddFiles=ko.pureComputed(function(t){return function(){return t.permissionsLoaded()&&t.projectPermissions.canAddFiles()}}(this)),null!=app.currentRoute().projectId?(this.projectPermissions=app.currentRoute().project.permissions,this.permissionsLoaded(!0)):(d=ko.unwrap(this.projectId),d>0?app.GetProjectAndPermissions(d).then(function(t){return function(i){var n;if(n=null!=i.componentName&&"Project"===i.componentName?i:new e(i.response.project),t.projectPermissions=n.permissions,t.permissionsLoaded(!0),null==app.cachedProjects[d])return app.cachedProjects[d]=n}}(this)):this.permissionsLoaded(!0))):this.permissionsLoaded=ko.observable(!0),null!=(null!=n?n.versionsSort:void 0)&&this.versions().sort(function(t,e){var i;return i="asc"===ko.unwrap(n.versionsSort)?1:-1,parseInt(ko.unwrap(t.version),10)>parseInt(ko.unwrap(e.version),10)?i:parseInt(ko.unwrap(t.version),10)<parseInt(ko.unwrap(e.version),10)?-i:0});for(a in this.versions())m=ko.unwrap(this.versions()[a].uploadedDate),f=r="",null!=m&&(f=(new t).format("YY")===m.format("YY")?app.utility.GetPastRelativeTime(m):m.format("DD MMM YY"),r=m.format("dddd, DD MMMM YYYY HH:mm")),this.versions()[a].fileDateString=ko.observable(f),this.versions()[a].fileDateDisplay=ko.observable(r),this.versions()[a].projectId=ko.observable(i.projectId),this.versions()[a].commentEndpoint=ko.observable("fileversions"),this.versions()[a].fileRootVersionId=ko.observable(i.id),this.versions()[a].fileSource=ko.observable(i.fileSource),this.versions()[a].private=ko.observable(i.private),null!=this.versions()[a].thumbURL&&"?action=getThumb"===ko.unwrap(this.versions()[a].thumbURL).toString().substr(0,16)&&this.versions()[a].thumbURL("./"+this.versions()[a].thumbURL())}return i.prototype.mapping={uploadedDate:{create:function(e){return app.ko.observable(t(e.data,"YYYY-MM-DDTHH:mm:ssZ"))}}},i.prototype.checkHighlight=function(t,e,i){if(null==t&&(t=null),this.doHighlight())return null!=t&&(app.utility.ScrollIntoViewIfNeeded(t),app.utility.Highlight(t,50)),this.doHighlight(!1)},i.prototype.OnUpdateFollowing=function(t){var e;Tipped.hideAll(),e={"follow-changes":"changes"===t||"all"===t,"follow-comments":"comments"===t||"all"===t},"none"===t?app.api.put("files/"+this.id()+"/unfollow.json").then(function(t){return function(e){return t.userFollowingChanges(!1),t.userFollowingComments(!1)}}(this)):app.api.put("files/"+this.id()+"/follow.json",e).then(function(e){return function(i){return e.userFollowingChanges("changes"===t||"all"===t),e.userFollowingComments("comments"===t||"all"===t)}}(this))},i.prototype.IsActive=function(){return"active"===this.status()},i.prototype.Lock=function(){return Tipped.hideAll(),app.api.put("files/"+this.id()+"/lock.json").then(function(t){return function(e){return t.fileLocked(1),t.fileLockedByUserId(app.loggedInUser.id()),t.fileLockedBySelf(!0),ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"file",actionType:"edited",itemId:t.id(),subType:"file-locked",projectId:t.projectId()})}}(this))},i.prototype.Unlock=function(){return Tipped.hideAll(),app.api.put("files/"+this.id()+"/unlock.json").then(function(t){return function(e){return t.fileLocked(0),t.fileLockedByUserId(0),t.fileLockedBySelf(!1),ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"file",actionType:"edited",itemId:t.id(),subType:"file-unlocked",projectId:t.projectId()})}}(this))},i.prototype.OnClickDeleteFile=function(t,e){var i;return"teamworkpm"!==this.fileSource()||this.versions().length<=1?this.OnDeleteFile(t,e):(i={id:ko.unwrap(this.versionId),version:ko.unwrap(this.version),fileRootVersionId:ko.unwrap(this.id),projectId:ko.unwrap(this.projectId)},this.OnClickDeleteFileVersion(i,e))},i.prototype.OnDeleteFile=function(){var t,e,i,n;return Tipped.hideAll(),"teamworkpm"!==this.fileSource()?(n=app.tl("Remove File Reference?"),i=app.tl("Are you sure you want to delete this file?"),t=[app.tl("It will be removed from [_s] but will remain on [_s]","Teamwork Projects",this.fileSourceDisplay.name())],e=app.tl("Yes, Delete this File")):(n=app.tl("Delete File?"),i=app.tl("Are you sure you want to delete this file?"),e=app.tl("Yes, Delete this File"),t=[]),app.modal.Show("confirm",{title:n,text:i,dims:{width:500,height:300},confirmMessage:e,additionalLines:t,callback:function(t){return function(e){if(!e.wasCancelled)return t.DeleteFile()}}(this)})},i.prototype.DeleteFile=function(){return app.api.delete("/files/"+this.id()+".json").then(function(t){return function(e){var i,n;return app.flash.Success(app.tl("File has been deleted"),{undo:t.UndoDeleteFile}),i=null!=(null!=(n=t.parentVM)?n.componentName:void 0)&&"Task"===t.parentVM.componentName?{eventTime:new Date,itemType:"task",actionType:app.consts.ACTIONTYPE.DELETED,subType:"removed-files",itemId:t.parentVM.id(),taskListId:t.parentVM.taskListId(),projectId:ko.unwrap(t.projectId),numAdded:-1}:{eventTime:new Date,actionType:app.consts.ACTIONTYPE.DELETED,itemType:"file",subType:"project-file-deleted",itemId:ko.unwrap(t.id),projectId:ko.unwrap(t.projectId),numAdded:-1},ko.postbox.publish("allTWEvents",i)}}(this)).catch(function(t){return function(){return app.flash.Error(app.tl("Sorry. This file wasn't deleted. Please try again."))}}())},i.prototype.OnClickDeleteFileVersion=function(t,e){var i,n;return Tipped.hideAll(),n=app.tl("Delete File?"),i=app.tl("Would you like to delete only this version or all versions?"),app.modal.Show("confirmDeleteFileRevision",{title:n,text:i,dims:{width:500,height:300},callback:function(e){return function(i){return i.removeAll?e.DeleteFile():e.DeleteFileVersion(t,i)}}(this)})},i.prototype.DeleteFileVersion=function(t,e){var i,n;return n=ko.unwrap(t.id),i=ko.unwrap(t.fileRootVersionId),app.api.delete("fileversions/"+n+".json").then(function(e){return function(r){var o,s;return app.flash.Success(app.tl("File version has been deleted"),{undo:function(){return e.UndoDeleteVersion(n)}}),o=null!=(null!=(s=e.parentVM)?s.componentName:void 0)&&"Task"===e.parentVM.componentName?{eventTime:new Date,itemType:"task",actionType:app.consts.ACTIONTYPE.DELETED,subType:"removed-files",itemId:e.parentVM.id(),taskListId:e.parentVM.taskListId(),projectId:ko.unwrap(t.projectId)}:{eventTime:new Date,actionType:app.consts.ACTIONTYPE.DELETED,itemType:"file",subType:"project-file-deleted",itemId:i,projectId:ko.unwrap(t.projectId),extraInfo:{fileType:"version"}},ko.postbox.publish("allTWEvents",o)}}(this))},i.prototype.UndoDeleteFile=function(){var t;return t=ko.unwrap(this.id),app.flash.Success(app.tl("Restoring")+app.localizationPreferences().ellipsis),app.api.put("trashcan/files/"+t+"/restore.json").then(function(e){return function(i){return app.flash.Success(app.tl("File has been restored")),ko.postbox.publish("allTWEvents",{eventTime:new Date,actionType:app.consts.ACTIONTYPE.UPDATED,itemType:"file",itemId:t,subType:"project-file-edited",projectId:ko.unwrap(e.projectId),numAdded:1})}}(this))},i.prototype.UndoDeleteVersion=function(t){var e;return e=ko.unwrap(this.id),app.flash.Success(app.tl("Restoring")+app.localizationPreferences().ellipsis),app.api.put("trashcan/fileversions/"+t+"/restore.json").then(function(t){return function(i){return app.flash.Success(app.tl("File version has been restored")),ko.postbox.publish("allTWEvents",{eventTime:new Date,actionType:app.consts.ACTIONTYPE.UPDATED,itemType:"file",itemId:e,subType:"project-file-edited",projectId:ko.unwrap(t.projectId)})}}(this))},i.prototype.OnClickUploadNewVersion=function(t){return null==t&&(t=null),Tipped.hideAll(),app.modal.Show("projectsEditFileDetails",{listContainer:this.listContainer,title:"Upload New Version",item:ko.unwrap(this),projectId:ko.unwrap(this.projectId),type:"file",showUploadNew:!0})},i.prototype.PreviewContents=function(t,e,i){var n,r,o;return this.isDisplayableImage()?app.modal.Show("previewImages",{item:this,filteredItems:null!=e?null!=e.filteredItems?e.filteredItems:e.filteredItems=[]:void 0,startingIndex:ko.unwrap(t),attachedTo:{type:null!=(n=e.listContainer)?null!=n.componentName?n.componentName:n.componentName="":void 0,id:null!=(r=e.listContainer)?null!=r.id?r.id:r.id=0:void 0,projectId:null!=(o=e.listContainer)?null!=o.projectId?o.projectId:o.projectId=0:void 0,attachedVM:null!=e.listContainer?e.listContainer:e.listContainer={}}}):window.open("./?action=viewFile&fileId="+this.id()+"&v="+this.version()+"&display=true")},i.prototype.OnQuickView=function(t,e,i){return null==t&&(t=null),null==e&&(e=null),null==i&&(i=null),i=null!=i?i:this,app.quickView.show("file",{id:i.fileRootVersionId(),fileId:i.fileRootVersionId(),fileVersion:i.version(),projectId:i.projectId(),parentFile:t,listContainer:e})},i}()}.apply(e,n))&&(t.exports=r)},1244:function(t,e,i){var n;!function(r,o,s){function a(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent("on"+e,i)}function l(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return m[t.which]?m[t.which]:g[t.which]?g[t.which]:String.fromCharCode(t.which).toLowerCase()}function c(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}function u(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function p(t,e){var i,n,r,o=[];for(i=t,"+"===i?i=["+"]:(i=i.replace(/\+{2}/g,"+plus"),i=i.split("+")),r=0;r<i.length;++r)n=i[r],v[n]&&(n=v[n]),e&&"keypress"!=e&&y[n]&&(n=y[n],o.push("shift")),u(n)&&o.push(n);if(i=n,!(r=e)){if(!f){f={};for(var s in m)95<s&&112>s||m.hasOwnProperty(s)&&(f[m[s]]=s)}r=f[i]?"keydown":"keypress"}return"keypress"==r&&o.length&&(r="keydown"),{key:n,modifiers:o,action:r}}function d(t,e){return null!==t&&t!==o&&(t===e||d(t.parentNode,e))}function h(t){function e(t){t=t||{};var e,i=!1;for(e in g)t[e]?i=!0:g[e]=0;i||(b=!1)}function i(t,e,i,n,r,o){var s,a,l=[],c=i.type;if(!f._callbacks[t])return[];for("keyup"==c&&u(t)&&(e=[t]),s=0;s<f._callbacks[t].length;++s)if(a=f._callbacks[t][s],(n||!a.seq||g[a.seq]==a.level)&&c==a.action){var p;(p="keypress"==c&&!i.metaKey&&!i.ctrlKey)||(p=a.modifiers,p=e.sort().join(",")===p.sort().join(",")),p&&(p=n&&a.seq==n&&a.level==o,(!n&&a.combo==r||p)&&f._callbacks[t].splice(s,1),l.push(a))}return l}function n(t,e,i,n){f.stopCallback(e,e.target||e.srcElement,i,n)||!1!==t(e,i)||(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)}function r(t){"number"!=typeof t.which&&(t.which=t.keyCode);var e=l(t);e&&("keyup"==t.type&&y===e?y=!1:f.handleKey(e,c(t),t))}function s(t,i,r,o){function s(i){n(r,i,t),"keyup"!==o&&(y=l(i)),setTimeout(e,10)}for(var a=g[t]=0;a<i.length;++a){var c=a+1===i.length?s:function(i){return function(){b=i,++g[t],clearTimeout(m),m=setTimeout(e,1e3)}}(o||p(i[a+1]).action);d(i[a],c,o,t,a)}}function d(t,e,n,r,o){f._directMap[t+":"+n]=e,t=t.replace(/\s+/g," ");var a=t.split(" ");1<a.length?s(t,a,e,n):(n=p(t,n),f._callbacks[n.key]=f._callbacks[n.key]||[],i(n.key,n.modifiers,{type:n.action},r,t,o),f._callbacks[n.key][r?"unshift":"push"]({callback:e,modifiers:n.modifiers,action:n.action,seq:r,level:o,combo:t}))}var f=this;if(t=t||o,!(f instanceof h))return new h(t);f.target=t,f._callbacks={},f._directMap={};var m,g={},y=!1,v=!1,b=!1;f._handleKey=function(t,r,o){var s,a=i(t,r,o);r={};var l=0,c=!1;for(s=0;s<a.length;++s)a[s].seq&&(l=Math.max(l,a[s].level));for(s=0;s<a.length;++s)a[s].seq?a[s].level==l&&(c=!0,r[a[s].seq]=1,n(a[s].callback,o,a[s].combo,a[s].seq)):c||n(a[s].callback,o,a[s].combo);a="keypress"==o.type&&v,o.type!=b||u(t)||a||e(r),v=c&&"keydown"==o.type},f._bindMultiple=function(t,e,i){for(var n=0;n<t.length;++n)d(t[n],e,i)},a(t,"keypress",r),a(t,"keydown",r),a(t,"keyup",r)}var f,m={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},g={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},y={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},v={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"};for(s=1;20>s;++s)m[111+s]="f"+s;for(s=0;9>=s;++s)m[s+96]=s;h.prototype.bind=function(t,e,i){return t=t instanceof Array?t:[t],this._bindMultiple.call(this,t,e,i),this},h.prototype.unbind=function(t,e){return this.bind.call(this,t,function(){},e)},h.prototype.trigger=function(t,e){return this._directMap[t+":"+e]&&this._directMap[t+":"+e]({},t),this},h.prototype.reset=function(){return this._callbacks={},this._directMap={},this},h.prototype.stopCallback=function(t,e){return!(-1<(" "+e.className+" ").indexOf(" mousetrap ")||d(e,this.target))&&("INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable)},h.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},h.init=function(){var t,e=h(o);for(t in e)"_"!==t.charAt(0)&&(h[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},h.init(),r.Mousetrap=h,void 0!==t&&t.exports&&(t.exports=h),i(1905)&&void 0!==(n=function(){return h}.call(e,i,e,t))&&(t.exports=n)}(window,document)},1246:function(t,e,i){var n,r,o=function(t,e){function i(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=[i(14)],void 0!==(r=function(t){var e;return e=function(){function e(e){var i,n,r,o,s,a,l,c,u,p;if(e.attendeesArray=[],null!=e.attendingUserIds&&null!=e.attendingUserNames&&null!=e.attendingUserAvatarURLs&&null!=e.attendingUserCompanyNames&&(s="",null!=e.attendingUserIds&&(s=e.attendingUserIds.toString().split(",")),l=e.attendingUserNames.split(","),o=e.attendingUserFirstNames.split(","),a=e.attendingUserLastNames.split(","),i=e.attendingUserAvatarURLs.split(","),r=e.attendingUserCompanyNames.split(","),n=e.attendingUserCompanyIds.split(","),c=0,s.length&&""!==s[0]))for(;c<s.length;)e.attendeesArray.push({id:s[c],fullName:l[c],firstName:o[c],lastName:a[c],avatarURL:i[c],companyName:r[c],companyId:n[c]}),c++;ko.mapping.fromJS(e,this.mapping,this),null==("function"==typeof this.componentName?this.componentName():void 0)&&(this.componentName=ko.observable("CalendarEvent")),this.id=parseInt(e.id,10),this.realAllDay=this.allDay(),this.colorDefault="668CD9",this.color="#"+((null!=(u=this.type)&&"function"==typeof u.color?u.color():void 0)||this.colorDefault),this.textColorDefault="000",this.textColor="#"+((null!=(p=this.type)&&"function"==typeof p.color?p.color():void 0)||this.textColorDefault),this.className=this.privacy.type()+"-event",null!=this.repeat.ends&&(this.className+=" recurring-event"),this.end().isBefore(t())&&(this.className+=" old-event"),this.isRecurring=null!=this.repeat.ends,this.realEnd=ko.observable(this.end().clone()),this.allDay()&&this.realEnd(this.realEnd().endOf("day")),this.allDay()&&this.end(this.end().add(1,"day").startOf("day")),this.calType="event",this.showStartTime=ko.observable(!0),this.showEndTime=ko.observable(!0),this.editable=e.canEdit,app.loggedInUser.isAccount()||(this.canEdit(!1),this.editable=!1),this.isMultiday=ko.pureComputed(function(t){return function(){return t.end().diff(t.start(),"days")>0}}(this)),this.attending=ko.pureComputed(function(t){return function(){var e,i,n,r,o,s;if((n=app.loggedInUser.id())===parseInt(t.owner.id(),10))return!0;for(i=[],null!=ko.unwrap(t.attendingUserIds)&&(i=ko.unwrap(t.attendingUserIds).split(",")),r=o=0,s=i.length;o<s;r=++o)if(e=i[r],n===parseInt(e,10))return!0;return!1}}(this)),this.attending()&&(this.className+=" attending"),this.isMultiday()&&!this.allDay()&&"TimelineEvent"===this.componentName()&&(this.allDay(!0),this.end(this.end().add(1,"day").startOf("day")),this.realEnd(this.realEnd().endOf("day"))),("function"==typeof this.isUnavailable?this.isUnavailable():void 0)&&(this.className+=" is-unavailable",this.title(app.tl("[_s] is unavailable",this.owner.firstName()+" "+this.owner.lastName())))}return e.prototype.mapping={key:function(t){return ko.unwrap(t.id)},start:{create:function(e){return ko.observable(t(e.data,"YYYY-MM-DDTHH:mm"))}},end:{create:function(e){return ko.observable(t(e.data,"YYYY-MM-DDTHH:mm"))}},createdAt:{create:function(e){return ko.observable(t(e.data,"YYYY-MM-DDTHH:mm:ssZ"))}}},e}(),function(t){function e(t){console.assert(void 0!==t),t.componentName="TimelineEvent",this.subscriptions=[],e.__super__.constructor.call(this,t)}return o(e,t),e}(e)}.apply(e,n))&&(t.exports=r)},1247:function(t,e,i){(function(n){var r,o,s=function(t,e){return function(){return t.apply(e,arguments)}};r=[i(14),i(1119)],void 0!==(o=function(t,e){return function(){function t(t){this.NewData=s(this.NewData,this),this.ShowDelete=s(this.ShowDelete,this),this.ExportPeopleToExcel=s(this.ExportPeopleToExcel,this),this.ShowAddContact=s(this.ShowAddContact,this),this.ShowAddUser=s(this.ShowAddUser,this),this.ShowMovePeople=s(this.ShowMovePeople,this),this.ShowSendInvites=s(this.ShowSendInvites,this),this.ShowEditLogo=s(this.ShowEditLogo,this),this.ShowAddTeam=s(this.ShowAddTeam,this),this.ToggleSelected=s(this.ToggleSelected,this),this.ShowEdit=s(this.ShowEdit,this),this.componentName="Company",null==t&&(t=this.NewData()),t.id=parseInt(t.id,10),t.accounts=parseInt(t.accounts,10),t.contacts=parseInt(t.contacts,10),t.collaborators=parseInt(t.collaborators,10),t.isowner=parseInt(t.isowner,10),null==t.isSelected&&(t.isSelected=!1),app.ko.mapping.fromJS(t,{},this),this.phoneNumberWithoutSpaces=ko.pureComputed(function(t){return function(){return t.phone().trim().length?t.phone().replace(/\s/g,""):""}}(this)),this.contactDetailsParts=ko.pureComputed(function(t){return function(){var e;return e=[],t.phone().trim().length&&e.push(t.phone()),t.fax().trim().length&&e.push(t.fax()),t.emailOne().trim().length&&e.push(t.emailOne()),t.emailTwo().trim().length&&e.push(t.emailTwo()),t.emailThree().trim().length&&e.push(t.emailThree()),t.website().trim().length&&e.push(t.website()),e}}(this)),this.fullAddressParts=ko.pureComputed(function(t){return function(){var e;return e=[],t.addressOne().trim().length&&e.push(t.addressOne()),t.addressTwo().trim().length&&e.push(t.addressTwo()),t.city().trim().length&&e.push(t.city()),t.state().trim().length&&e.push(t.state()),t.zip().trim().length&&e.push(t.zip()),t.country().trim().length&&e.push(t.country()),e}}(this)),this.addressAsFullString=ko.pureComputed(function(t){return function(){return t.fullAddressParts().join(", ")}}(this)),this.addressAsShortString=ko.pureComputed(function(t){return function(){var e;return e=[],t.city().trim().length&&e.push(t.city()),t.state().trim().length&&e.push(t.state()),t.country().trim().length&&e.push(t.country()),e.join(", ")}}(this)),this.cleanWebsiteUrl=ko.pureComputed(function(t){return function(){var e;return e=t.website(),e.includes("http://")||e.includes("https://")?e:"http://"+e}}(this))}return t.prototype.ShowEdit=function(t){var e;e={tab:"essentials"},null!=t&&n.extend(e,t),e.companyId=this.id(),e.company=this,app.modal.Show("addOrEditCompany",e)},t.prototype.ToggleSelected=function(t,e){var i;return!(null==(null!=e&&null!=(i=e.target)?i.classList:void 0)||!e.target.classList.contains("tipped-delegate"))||(this.isSelected(!this.isSelected()),!0)},t.prototype.ShowAddTeam=function(t){var e;e={},null!=t&&n.extend(e,t),e.companyId=this.id(),e.companyName=this.name(),app.modal.Show("addOrEditTeam",e)},t.prototype.ShowEditLogo=function(t){var e;(app.loggedInUser.administrator()||app.loggedInUser.permissions.canManagePeople())&&(e={tab:"essentials"},null!=t&&n.extend(e,t),e.companyId=this.id(),e.company=this,e.onShowEditLogo=!0,app.modal.Show("addOrEditCompany",e))},t.prototype.ShowSendInvites=function(t){var e;e={},null!=t&&n.extend(e,t),e.companyId=this.id(),app.modal.Show("sendInvites",e)},t.prototype.ShowMovePeople=function(t){var e;e={},null!=t&&n.extend(e,t),e.companyId=this.id(),e.companyName=this.name(),app.modal.Show("movePeopleFromCompany",e)},t.prototype.ShowAddUser=function(t){var e;e={},null!=t&&n.extend(e,t),e.companyId=this.id(),e.companyName=this.name(),app.modal.Show("addOrEditPerson",e)},t.prototype.ShowAddContact=function(t){var e;e={},null!=t&&n.extend(e,t),e.companyId=this.id(),e.companyName=this.name(),e.type="contact",app.modal.Show("addOrEditPerson",e)},t.prototype.ExportPeopleToExcel=function(){window.open("./?action=People_Export_To_Excel&companyId="+this.id())},t.prototype.ShowDelete=function(t){var e,i;i=app.tl("Please Confirm"),e=app.tl("Are you sure you want to delete this company?")+" "+app.tl("This action can not be undone and all people in this company will also be deleted."),app.modal.Show("confirm",{title:i,text:e,callback:function(t){return function(e){if(!e.wasCancelled)return app.api.delete("./companies/"+t.id()+".json").then(function(e){return app.flash.Success(app.tl("Company Deleted")),app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"company",itemId:t.id(),actionType:app.consts.ACTIONTYPE.DELETED})})}}(this)})},t.prototype.NewData=function(){return e.camelize({id:0,accounts:0,address_one:"",address_two:"",can_see_private:!0,cid:"",city:"",collaborators:0,company_name_url:"",contacts:"0",country:"",countrycode:"",email_one:"",email_three:"",email_two:"",fax:"",industry:"",industryId:"0",isowner:"0","logo-URL":"",name:"",phone:"",state:"",tags:[],website:"",zip:""})},t}()}.apply(e,r))&&(t.exports=o)}).call(e,i(245))},1249:function(t,e,i){var n,r=function(t,e){return function(){return t.apply(e,arguments)}};void 0!==(n=function(){return function(){function t(t){this.toJSON=r(this.toJSON,this),this.id=ko.observable(),this.color=ko.observable(),this.name=ko.observable(),this.projectId=ko.observable(),this.projectName=ko.observable(),this.count=ko.observable(),this.dateCreated=ko.observable(null),this.dateUpdated=ko.observable(null),this.update(t)}return t.prototype.update=function(t){if(null!=t.id&&this.id(parseInt(t.id,10)),null!=t.color&&this.color(t.color),null!=t.name&&this.name(t.name),null!=t.projectId&&this.projectId(parseInt(t.projectId,10)),null!=t.projectName&&this.projectName(t.projectName),null!=t.count&&this.count(parseInt(t.count,10)),null!=t.dateCreated&&this.dateCreated(t.dateCreated),null!=t.dateUpdated)return this.dateUpdated(t.dateUpdated)},t.prototype.save=function(){var t,e,i;return e="post",i="tags.json",parseInt(this.id(),10)>0&&(e="put",i="tags/"+this.id()+".json"),t={tag:{id:this.id(),name:this.name(),projectId:this.projectId(),color:this.color()}},app.api[e](i,t).then(function(t){return function(i){return"post"===e&&t.id(i.response.id),ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"tag",itemId:t.id(),actionType:"post"===e?app.consts.ACTIONTYPE.CREATED:app.consts.ACTIONTYPE.UPDATED}),t}}(this))},t.prototype.toJSON=function(){return{id:this.id(),color:this.color(),name:this.name(),projectId:this.projectId(),projectName:this.projectName(),count:this.count(),dateCreated:this.dateCreated(),dateUpdated:this.dateUpdated()}},t}()}.call(e,i,e,t))&&(t.exports=n)},1258:function(t,e,i){"use strict";function n(){return function(t){this.j=[],this.T=t||null}}function r(t,e,i,n){for(var r=0,o=t.length,s=e,l=[],c=void 0;r<o&&(c=s.next(t[r]));)s=c,r++;if(r>=o)return[];for(;r<o-1;)c=new a(n),l.push(c),s.on(t[r],c),s=c,r++;return c=new a(i),l.push(c),s.on(t[o-1],c),l}e.__esModule=!0,e.stateify=e.TokenState=e.CharacterState=void 0;var o=i(1176),s=n();s.prototype={defaultTransition:!1,on:function(t,e){if(t instanceof Array){for(var i=0;i<t.length;i++)this.j.push([t[i],e]);return this}return this.j.push([t,e]),this},next:function(t){for(var e=0;e<this.j.length;e++){var i=this.j[e],n=i[0],r=i[1];if(this.test(t,n))return r}return this.defaultTransition},accepts:function(){return!!this.T},test:function(t,e){return t===e},emit:function(){return this.T}};var a=(0,o.inherits)(s,n(),{test:function(t,e){return t===e||e instanceof RegExp&&e.test(t)}}),l=(0,o.inherits)(s,n(),{jump:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.next(new t(""));return i===this.defaultTransition?(i=new this.constructor(e),this.on(t,i)):e&&(i.T=e),i},test:function(t,e){return t instanceof e}});e.CharacterState=a,e.TokenState=l,e.stateify=r},1259:function(t,e,i){"use strict";function n(){return function(t){t&&(this.v=t)}}e.__esModule=!0,e.createTokenClass=n},1280:function(t,e,i){(function(n){var r,o,s=function(t,e){return function(){return t.apply(e,arguments)}};r=[i(164),i(1133),i(1119),i(1117)],void 0!==(o=function(t,e,i,r){return function(){function o(e,i){var r,o,a,l,c,u,p,d,h;null==i&&(i="task"),this.Sort=s(this.Sort,this),this.Blur=s(this.Blur,this),this.ToggleCollapse=s(this.ToggleCollapse,this),this.componentName="BoardColumn",e=null!=e?n.extend({},e):this.GetNewJSON(),"project"===i&&(null==(r=e.settings).starred&&(r.starred=!0),null==(o=e.settings).category&&(o.category=!0),null==(a=e.settings).dates&&(a.dates=!0),null==(l=e.settings).company&&(l.company=!0),null==(c=e.settings).description&&(c.description=!0),null==(u=e.settings).tags&&(u.tags=!0),null==(p=e.settings).owner&&(p.owner=!0),null==(d=e.settings).update&&(d.update=!0),null==(h=e.settings).progress&&(h.progress=!0),e.boardType="project"),null==e.pendingCards&&(e.pendingCards=[]),this.UpdateData(e),this.isSaving=t.observable(!1)}return o.prototype.UpdateData=function(i){var r,o,s;if(i=n.extend({},i),i.id=parseInt(i.id,10),null==i.projectId&&(i.projectId=0),null==i.settings&&(i.settings={}),null==i.visible&&(i.visible=!0),""===i.color&&(i.color="transparent"),null==i.isEditing&&(i.isEditing=!1),null!=i.stats){o=i.stats;for(r in o)s=o[r],""===s&&(s=0),i.stats[r]=parseInt(s,10)}return null==i.boardType&&(i.boardType="task"),null==i.boardId&&(i.boardId=0),i.boardId=parseInt(i.boardId,10),null==i.collapsed&&(i.collapsed=app.cache.get(i.boardType+"-board-column-collapsed-b"+i.boardId+"-c"+i.id,!1)),null==i.hasTriggers&&(i.hasTriggers=!1),null==i.canEdit&&(i.canEdit=!0),null==i.isAddingCard&&(i.isAddingCard=!1),null==i.color&&(i.color=app.utility.GetRandomNiceColor()),null!=i.displayOrder&&(i.displayOrder=parseInt(i.displayOrder,10)),null==i.hasActiveFilter&&(i.hasActiveFilter=!1),null==i.numberOfCards&&(i.numberOfCards=0),null==i.defaultTasklist&&(i.defaultTasklist={id:"0",name:"Cards"}),null==i.defaultProject&&(i.defaultProject={id:"0",name:""}),e.fromJS(i,{},this),this.previousName=this.name(),this.previousColor=this.color(),null==this.shouldShowStats&&(this.shouldShowStats=t.pureComputed(function(t){return function(){var e;return t.id()>0&&null!=(null!=(e=t.stats)?e.active:void 0)}}(this))),null==this.filterText&&(this.filterText=t.observable("").extend({rateLimit:{timeout:400,method:"notifyWhenChangesStop"}})),this},o.prototype.Edit=function(){if(!("task"===this.boardType()&&this.boardId()>0)&&this.canEdit())return Tipped.hideAll(),this.previousName=this.name(),this.previousColor=this.color(),this.isEditing(!0),app.ko.postbox.publish("board-column-edited",{id:this.id()}),app.ko.postbox.publish("task-card-state-change",{state:"cancelled"})},o.prototype.Filter=function(){return this.hasActiveFilter()?this.ClearFilter():(Tipped.hideAll(),this.hasActiveFilter(!0),this.filterText(""))},o.prototype.ClearFilter=function(){return Tipped.hideAll(),this.hasActiveFilter(!1),this.filterText("")},o.prototype.ToggleCollapse=function(){return this.collapsed(!this.collapsed()),app.cache.set(this.boardType()+"-board-column-collapsed-b"+this.boardId()+"-c"+this.id(),this.collapsed())},o.prototype.Blur=function(t,e){var i,n;if(!isNaN(parseInt(this.id(),10)&&null!=e)&&(0!==this.id()||null==e))return this.id()>0&&(null!=e&&null!=(i=e.relatedTarget)&&null!=(n=i.classList)?n.contains("w-board-column-edit__color-pick"):void 0)?this.Save().then(function(t){return function(){return t.isEditing(!0)}}(this)):this.Save().then(function(t){return function(){return t.isEditing(0===t.id())}}(this))},o.prototype.AddCard=function(){return this.isEditing()&&this.Cancel(),this.isAddingCard(!0),app.ko.postbox.publish("task-card-state-change",{state:"creating",columnId:this.id(),column:this})},o.prototype.Cancel=function(){return this.name(this.previousName),this.color(this.previousColor),this.isEditing(!1)},o.prototype.UpdateColor=function(t){return Tipped.hideAll(),this.color(t)},o.prototype.Save=function(){var t,e,i,n;return this.isSaving()?r.resolve():this.name().trim().length?this.previousName===this.name()&&this.previousColor===this.color()?(this.isEditing(!1),r.resolve()):this.name().trim().length>=255?(app.flash.Error(app.tl("This column name is too long")),r.resolve()):(n="project"===this.boardType()?"portfolio/boards/"+this.boardId()+"/columns.json":"projects/"+this.projectId()+"/boards/columns.json",i="post",0!==this.id()&&(n="project"===this.boardType()?"portfolio/columns/"+this.id()+".json":"boards/columns/"+this.id()+".json",i="put"),t="transparent"===this.color()?"":this.color(),e={column:{name:this.name(),color:t}},this.isSaving(!0),app.api[i](n,e).then(function(t){return function(e){var i;return i={eventTime:new Date,itemType:"column",projectId:"project"===t.boardType()?0:t.projectId(),itemId:t.id(),extraInfo:{data:{boardType:t.boardType()}}},0===t.id()?(i.actionType=app.consts.ACTIONTYPE.ADDED,app.ko.postbox.publish("allTWEvents",i),t.Reset()):(i.actionType=app.consts.ACTIONTYPE.UPDATED,app.ko.postbox.publish("allTWEvents",i),t.previousName=t.name(),t.previousColor=t.color())}}(this)).catch(function(t){return function(){return t.name(t.previousName),t.color(t.previousColor)}}(this)).finally(function(t){return function(){return t.isEditing(!1),t.isSaving(!1)}}(this))):(app.flash.Error(app.tl("Column name can not be blank")),r.resolve())},o.prototype.Sort=function(t,e){var i,n;return null==t&&(t="name"),null==e&&(e="ASC"),Tipped.hideAll(),"priority"===t&&(e="DESC"),i={sortBy:t,sortOrder:e},n="project"===this.boardType()?"portfolio/columns/"+this.id()+"/cards/sort.json":"boards/columns/"+this.id()+"/cards/sort.json",app.api.put(n,i).then(function(t){return function(){return app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"column",subType:"sort",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:t.id(),extraInfo:{data:{boardType:t.boardType()}}})}}(this)).catch(function(t){return console.error(t)})},o.prototype.EditSettings=function(){this.canEdit()&&app.quickView.show("columnSettings",{boardColumn:this,boardType:this.boardType(),boardId:this.boardId()})},o.prototype.Delete=function(){var e;return Tipped.hideAll(),e="project"===this.boardType()?"portfolio/columns/"+this.id()+".json":this.boardId()>0?"boards/"+this.boardId()+"/columns/"+this.id()+".json":"boards/columns/"+this.id()+".json",app.api.delete(e).then(function(e){return function(i){var n;return n=e.boardId()>0?null:function(){var i;return app.flash.Success(app.tl("Undeleting")+app.localizationPreferences().ellipsis),i="project"===e.boardType()?"portfolio/columns/"+e.id()+"/undelete.json":"boards/columns/"+e.id()+"/undelete.json",app.api.put(i).then(function(i){return app.flash.Success(app.tl("Column [_s] has been restored",'"'+t.unwrap(e.name())+'"'),{timer:2e3}),app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"column",boardType:e.boardType(),actionType:app.consts.ACTIONTYPE.UPDATED,itemId:e.id(),extraInfo:{data:{boardType:e.boardType(),boardId:e.boardId()}}})})},app.flash.Success(app.tl("Column [_s] has been deleted",'"'+t.unwrap(e.name())+'"'),{timer:5e3,undo:n}),app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"column",actionType:app.consts.ACTIONTYPE.DELETED,itemId:e.id(),projectId:"project"===e.boardType()?0:e.projectId(),extraInfo:{data:{boardType:e.boardType(),boardId:e.boardId()}},boardColumnId:e.id()})}}(this))},o.prototype.AddMultipleCards=function(e){var i,n,r,o;return null==e&&(e=[]),Tipped.hideAll(),console.assert(Array.isArray(e)),r=function(e){return function(i){var n,r,o,s,a,l,c,u,p,d,h;if(!i.wasCancelled){if(u=null!=(c=i.tasks)?c:[],p=u.map(function(t){return t.id}).toString(),r={get:"triggers,card"},e.boardId()>0){if(n=[],d=t.utils.arrayGetDistinctValues(u.map(function(t){return t.projectId})),r.boardId=e.boardId(),r._column={id:e.id(),name:e.name(),color:e.color()},d.length)for(o=0,s=d.length;o<s;o++)l=d[o],a=u.filter(function(t){return t.projectId===l}).map(function(t){return t.id}),n.push({projectId:l,taskId:a.join(",")});r.cards=n}else r.card={taskId:p};return h=e.boardId()>0?"boards/"+e.boardId()+"/columns/"+e.id()+"/cards.json":"boards/columns/"+e.id()+"/cards.json",app.api.post(h,r).then(function(t){var i,n,r;return n=0,null!=t.response.triggers&&(i=t.response.triggers.filter(function(t){return"CARD.ARCHIVE"===t.type}),i.length>0&&(n=p.length)),r=!1,1===p.length&&(r=null!=t.response.card&&t.response.card.isRecurring),app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"column",subType:"bulkAddCards",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:e.id(),projectId:"project"===e.boardType()||e.boardId()>0?0:e.projectId(),extraInfo:{data:{boardType:e.boardType(),cardsAutoArchived:n,isRecurring:r}}})})}}}(this),i=e.length&&e.length>1?"tasks.json?includeTasksWithCards=false&projectId="+e.toString():e.length&&1===e.length?"projects/"+e[0]+"/tasks.json?includeTasksWithCards=false":e.length?"projects/"+this.projectId()+"/tasks.json?includeTasksWithCards=false":"tasks.json?includeTasksWithCards=false",n=app.prefixApi(i+"&include=taskListNames,projectNames&nestSubTasks=1","API_PREFIX_V2","API_PREFIX_V2"),o=function(t){return function(){return app.modal.Show("selectMultipleTasks",{dataURL:n,dataParams:{},onCloseCallBack:r})}}(),this.boardId()>0?app.api.get("boards/"+this.boardId()+".json",{getProjectIds:!0}).then(function(t){return function(t){var e;return(null!=(e=t.response.board)?e.projectIds.length:void 0)&&(n=app.prefixApi("tasks.json?projectId="+t.response.board.projectIds.toString()+"&include=taskListNames,projectNames&nestSubTasks=1&includeTasksWithCards=false","API_PREFIX_V2","API_PREFIX_V2")),o()}}()):o()},o.prototype.ArchiveCompletedCards=function(){var t;return Tipped.hideAll(),t={type:"completed"},app.api.put("boards/columns/"+this.id()+"/cards/archive.json",t).then(function(t){return function(e){return app.flash.Success(app.tl("You have archived the completed cards in this list")),app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"column",subType:"archiveCompletedCards",itemId:t.id(),actionType:app.consts.ACTIONTYPE.UPDATED,extraInfo:{data:{boardType:t.boardType()}}})}}(this))},o.prototype.SaveDisplaySettings=function(i){var n,r,o,s,a,l,c,u,p,d,h;p=i.sort,d=i.sortOrder,u=i.settings,a=i.defaultTasklistId,l=i.defaultTasklistName,o=i.defaultProjectId,s=i.defaultProjectName,n={column:{sort:p,sortOrder:d},get:"column",settings:{}},"task"===this.boardType()&&(0===this.boardId()?n.column.defaultTasklistId=a:n.column.defaultProjectId=o);for(c in u)h=u[c],"boolean"==typeof t.unwrap(h)&&(n.settings[c]=t.unwrap(h));return r="project"===this.boardType()?"portfolio/columns/"+this.id()+".json":this.boardId()>0?"boards/"+this.boardId()+"/columns/"+this.id()+".json":"boards/columns/"+this.id()+".json",app.api.put(r,n).then(function(i){return function(r){var u,f,m;i.sort(p),i.sortOrder(d),null!=(null!=(u=r.response.column)?u.defaultTasklist:void 0)&&e.fromJS(r.response.column.defaultTasklist,{},i.defaultTasklist),i.defaultTasklist.id(a),i.defaultTasklist.name(l),i.defaultProject.id(o),i.defaultProject.name(s),f=n.settings,m=[];for(c in f)h=f[c],"boolean"==typeof t.unwrap(h)?m.push(i.settings[c](t.unwrap(h))):m.push(void 0);return m}}(this))},o.prototype.Clone=function(){var e;return e=t.mapping.toJS(this),new o(e)},o.prototype.Reset=function(){return this.color("transparent"),this.name(""),this.isEditing(!0)},o.prototype.GetNewJSON=function(){return i.camelize({id:0,name:"",color:"transparent",canEdit:!0,projectId:0,deleted:!1,dateCreated:moment(),dateUpdated:"",deletedDate:"",displayOrder:1e3,numberOfCards:0,sort:"manual",sortOrder:"ASC",hasTriggers:!1,visible:!0,stats:{total:0,completed:0,active:0,estimatedTime:0},defaultTasklist:{id:"0",name:"Cards"},defaultProject:{id:"0",name:""},settings:{project:!0,name:!0,subtasklabel:!0,assignee:!0,avatar:!0,tasklist:!0,comments:!0,dependencies:!0,startdate:!0,enddate:!0,files:!0,followers:!0,priority:!0,private:!0,progress:!0,recurring:!0,reminders:!0,tags:!0,tickets:!0,time:!0,estimatedtime:!0,owner:!0,update:!0}})},o}()}.apply(e,r))&&(t.exports=o)}).call(e,i(245))},1281:function(t,e,i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}};n=[i(14)],void 0!==(r=function(t){return function(){function t(t,e){var i;null==e&&(e="project"),this.GoToBoard=o(this.GoToBoard,this),t.id=parseInt(t.id,10),t.displayOrder=parseInt(t.displayOrder,10),null==t.color&&(t.color=""),t.userIds=(null!=(i=t.userIds)?i:[]).map(Number),null==t.private&&(t.private=0),null==t.lockdownId&&(t.lockdownId=0),t.private=t.private/1,t.lockdownId=t.lockdownId/1,t.isPrivate=t.lockdownId>0,null==t.boardType&&(t.boardType=e),app.ko.mapping.fromJS(t,{},this)}return t.prototype.GoToBoard=function(){var t;return"project"===this.boardType()?app.GoTo("projects/portfolio/boards/"+this.id()):"task"===this.boardType()?(t=null!=app.currentRoute().personId?"people/"+app.currentRoute().personId+"/boards/"+this.id():"people/"+this.userId()+"/boards/"+this.id(),app.GoTo(t)):void 0},t.prototype.Edit=function(){return app.modal.Show("addOrEditBoard",{board:this,boardType:this.boardType()})},t.prototype.Delete=function(){var t,e;return e=app.tl("Confirm Delete"),t=app.tl("Are you sure you want to delete this board?"),app.modal.Show("confirm",{title:e,text:t,callback:function(t){return function(e){var i;if(!e.wasCancelled)return i="project"===t.boardType()?"portfolio/boards/"+t.id()+".json":"task"===t.boardType()?"boards/"+t.id()+".json":void 0,app.api.delete(i).then(function(){return app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"board",actionType:app.consts.ACTIONTYPE.DELETED,itemId:t.id(),extraInfo:{data:{boardType:t.boardType()}}})})}}(this)})},t.prototype.Hide=function(){var t,e;return e=app.tl("Are you sure?"),t=app.tl("Are you sure you want to hide this board? Don't worry, the board's creator or an administrator can add you again."),app.modal.Show("confirm",{title:e,text:t,callback:function(t){return function(e){if(!e.wasCancelled)return app.api.put("boards/"+t.id()+"/hide.json").then(function(){return app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"board",actionType:app.consts.ACTIONTYPE.DELETED,itemId:t.id(),extraInfo:{data:{boardType:t.boardType()}}})})}}(this)})},t}()}.apply(e,n))&&(t.exports=r)},1282:function(t,e,i){var n;void 0!==(n=function(){return function(){function t(t,e){this.self=this,this.form=t.form,this.filesList=t.filesList,this.maxFiles=null!=t.maxFiles?t.maxFiles:t.maxFiles=0,this.projectId=t.projectId,this.dropZone=t.dropZone||this.form,this.inTKOWidget=t.inTKOWidget||!1,this.uniqueKey=t.uniqueKey||null,this.showOverlay=null!=t.showOverlay?t.showOverlay:t.showOverlay=null,this.tkoTaskNotify=null!=t.tkoTaskNotify?t.tkoTaskNotify:t.tkoTaskNotify=null,this.s3=new app.s3Upload({uniqueKey:this.uniqueKey,fileUploadModel:this.self,buttonClass:"btn btn-default btn-sm btn-mr",pasteZone:null,isTemp:!0,projectId:this.projectId,dropZone:this.dropZone,saveFileOnUploadComplete:!1,showOverlay:t.showOverlay,buttonParent:this.form.find(".upload-btn-holder"),tkoTaskNotify:this.tkoTaskNotify,add:function(t){app.ko.postbox.publish("widget-file-dropzone-"+this.fileUploadModel.uniqueKey,{action:"attachedFilesReady",ready:!1,fileInfo:t}),""!==this.tkoTaskNotify&&app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"switchTab",actionType:app.consts.ACTIONTYPE.UPDATED,notifyKey:this.tkoTaskNotify,tabCode:"files"})},queueComplete:function(){app.ko.postbox.publish("widget-file-dropzone-"+this.fileUploadModel.uniqueKey,{action:"attachedFilesReady",ready:!0})},disabled:this.fileDropDisabled,inTKOWidget:this.inTKOWidget})}return t}()}.call(e,i,e,t))&&(t.exports=n)},1286:function(t,e,i){!function(e,i){t.exports=i()}(window,function(){return function(t){function e(e){for(var i,n,o=e[0],s=e[1],a=0,c=[];a<o.length;a++)n=o[a],r[n]&&c.push(r[n][0]),r[n]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i]);for(l&&l(e);c.length;)c.shift()()}function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}var n={},r={12:0};i.e=function(t){function e(e){l.onerror=l.onload=null,clearTimeout(c);var i=r[t];if(0!==i){if(i){var n=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src,s=new Error("Loading chunk "+t+" failed.\n("+n+": "+o+")");s.type=n,s.request=o,i[1](s)}r[t]=void 0}}var n=[],o=r[t];if(0!==o)if(o)n.push(o[2]);else{var s=new Promise(function(e,i){o=r[t]=[e,i]});n.push(o[2]=s);var a=document.getElementsByTagName("head")[0],l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=i.p+""+({0:"teamwork-icons-json",1:"projects-icons-json",2:"projects-dashboard-icons-json",3:"gantt-icons-json",4:"common-icons-json"}[t]||t)+".js";var c=setTimeout(function(){e({type:"timeout",target:l})},12e4);l.onerror=l.onload=e,a.appendChild(l)}return Promise.all(n)},i.m=t,i.c=n,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="https://common-assets.teamwork.com/common-icons/1.2.30/",i.oe=function(t){throw console.error(t),t};var o=window.commonIconsJsonP=window.commonIconsJsonP||[],s=o.push.bind(o);o.push=e,o=o.slice();for(var a=0;a<o.length;a++)e(o[a]);var l=s;return i(i.s=34)}([,,,,,,,function(t,e,i){"use strict";function n(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).asNewDefault,i=void 0!==e&&e,n=Object.keys(st),r=i?function(t){return~n.indexOf(t)&&!~rt.indexOf(t)}:function(t){return~n.indexOf(t)};Object.keys(t).forEach(function(e){r(e)&&(st[e]=t[e])})}function r(t){if(t&&H){var e=R.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;for(var i=R.head.childNodes,n=null,r=i.length-1;r>-1;r--){var o=i[r];["STYLE","LINK"].indexOf((o.tagName||"").toUpperCase())>-1&&(n=o)}return R.head.insertBefore(e,n),t}}function o(){return++ht}function s(t){for(var e=[],i=(t||[]).length>>>0;i--;)e[i]=t[i];return e}function a(t){return t.classList?s(t.classList):(t.getAttribute("class")||"").split(" ").filter(function(t){return t})}function l(t){return(""+t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function c(t){return Object.keys(t||{}).reduce(function(e,i){return e+(i+": ")+t[i]+";"},"")}function u(t){return t.size!==dt.size||t.x!==dt.x||t.y!==dt.y||t.rotate!==dt.rotate||t.flipX||t.flipY}function p(t){var e=t.transform,i=t.containerWidth,n=t.iconWidth;return{outer:{transform:"translate("+i/2+" 256)"},inner:{transform:"translate("+32*e.x+", "+32*e.y+")  scale("+e.size/16*(e.flipX?-1:1)+", "+e.size/16*(e.flipY?-1:1)+")  rotate("+e.rotate+" 0 0)"},path:{transform:"translate("+n/2*-1+" -256)"}}}function d(t){var e=t.icons,i=e.main,n=e.mask,r=t.prefix,s=t.iconName,a=t.transform,l=t.symbol,c=t.title,u=t.extra,p=t.watchable,d=void 0!==p&&p,h=n.found?n:i,f=h.width,m=h.height,g="fa-w-"+Math.ceil(f/m*16),y=[st.replacementClass,s?st.familyPrefix+"-"+s:"",g].concat(u.classes).join(" "),v={children:[],attributes:et({},u.attributes,{"data-prefix":r,"data-icon":s,class:y,role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 "+f+" "+m})};d&&(v.attributes[V]=""),c&&v.children.push({tag:"title",attributes:{id:v.attributes["aria-labelledby"]||"title-"+o()},children:[c]});var b=et({},v,{prefix:r,iconName:s,main:i,mask:n,transform:a,symbol:l,styles:u.styles}),w=n.found&&i.found?mt(b):gt(b),k=w.children,x=w.attributes;return b.children=k,b.attributes=x,l?vt(b):yt(b)}function h(t){var e=t.content,i=t.width,n=t.height,r=t.transform,o=t.title,s=t.extra,a=t.watchable,l=void 0!==a&&a,p=et({},s.attributes,o?{title:o}:{},{class:s.classes.join(" ")});l&&(p[V]="");var d=et({},s.styles);u(r)&&(d.transform=function(t){var e=t.transform,i=t.width,n=void 0===i?Y:i,r=t.height,o=void 0===r?Y:r,s=t.startCentered,a=void 0!==s&&s,l="";return l+=a&&$?"translate("+(e.x/pt-n/2)+"em, "+(e.y/pt-o/2)+"em) ":a?"translate(calc(-50% + "+e.x/pt+"em), calc(-50% + "+e.y/pt+"em)) ":"translate("+e.x/pt+"em, "+e.y/pt+"em) ",(l+="scale("+e.size/pt*(e.flipX?-1:1)+", "+e.size/pt*(e.flipY?-1:1)+") ")+"rotate("+e.rotate+"deg) "}({transform:r,startCentered:!0,width:i,height:n}),d["-webkit-transform"]=d.transform);var h=c(d);h.length>0&&(p.style=h);var f=[];return f.push({tag:"span",attributes:p,children:[e]}),o&&f.push({tag:"span",attributes:{class:"sr-only"},children:[o]}),f}function f(t){return t.reduce(function(t,e){var i=function(t,e){var i,n=e.split("-"),r=n[0],o=n.slice(1).join("-");return r!==t||""===o||(i=o,~J.indexOf(i))?null:o}(st.familyPrefix,e);if(Et[e])t.prefix=e;else if(i){var n="fa"===t.prefix?Ot[i]||{prefix:null,iconName:null}:{};t.iconName=n.iconName||i,t.prefix=n.prefix||t.prefix}else e!==st.replacementClass&&0!==e.indexOf("fa-w-")&&t.rest.push(e);return t},Mt())}function m(t,e,i){if(t&&t[e]&&t[e][i])return{prefix:e,iconName:i,icon:t[e][i]}}function g(t){var e=t.tag,i=t.attributes,n=void 0===i?{}:i,r=t.children,o=void 0===r?[]:r;return"string"==typeof t?l(t):"<"+e+" "+function(t){return Object.keys(t||{}).reduce(function(e,i){return e+(i+'="')+l(t[i])+'" '},"").trim()}(n)+">"+o.map(g).join("")+"</"+e+">"}function y(t){return"string"==typeof(t.getAttribute?t.getAttribute(V):null)}function v(t,e){var i="function"==typeof e?e:Lt;0===t.length?i():(F.requestAnimationFrame||function(t){return t()})(function(){var e=!0===st.autoReplaceSvg?Dt.replace:Dt[st.autoReplaceSvg]||Dt.replace,n=Tt.begin("mutate");t.map(e),n(),i()})}function b(t){this.name="MissingIcon",this.message=t||"Icon unavailable",this.stack=(new Error).stack}function w(t,e){var i={found:!1,width:512,height:512,icon:Xt};if(t&&e&&Qt[e]&&Qt[e][t]){var n=Qt[e][t];i={found:!0,width:n[0],height:n[1],icon:{tag:"path",attributes:{fill:"currentColor",d:n.slice(4)[0]}}}}else if(t&&e&&!st.showMissingIcons)throw new b("Icon is missing for prefix "+e+" with icon name "+t);return i}function k(t){var e=function(t){var e=Rt(t),i=e.iconName,n=e.prefix,r=e.rest,o=Ft(t),s=zt(t),a=Bt(t),l=Ht(t),c=$t(t);return{iconName:i,title:t.getAttribute("title"),prefix:n,transform:s,symbol:a,mask:c,extra:{classes:r,styles:o,attributes:l}}}(t);return~e.extra.classes.indexOf(Kt)?function(t,e){var i=e.title,n=e.transform,r=e.extra,o=null,s=null;if($){var a=parseInt(getComputedStyle(t).fontSize,10),l=t.getBoundingClientRect();o=l.width/a,s=l.height/a}return st.autoA11y&&!i&&(r.attributes["aria-hidden"]="true"),[t,h({content:t.innerHTML,width:o,height:s,transform:n,title:i,extra:r,watchable:!0})]}(t,e):function(t,e){var i=e.iconName,n=e.title,r=e.prefix,o=e.transform,s=e.symbol,a=e.mask,l=e.extra;return[t,d({icons:{main:w(i,r),mask:w(a.iconName,a.prefix)},prefix:r,iconName:i,transform:o,symbol:s,mask:a,title:n,extra:l,watchable:!0})]}(t,e)}function x(t){"function"==typeof t.remove?t.remove():t&&t.parentNode&&t.parentNode.removeChild(t)}function T(t){if(H){var e=Tt.begin("searchPseudoElements");jt=!0,s(t.querySelectorAll("*")).forEach(function(t){[":before",":after"].forEach(function(e){var i=F.getComputedStyle(t,e),n=i.getPropertyValue("font-family").match(Jt),r=s(t.children).filter(function(t){return t.getAttribute(G)===e})[0];if(r&&(r.nextSibling&&r.nextSibling.textContent.indexOf(G)>-1&&x(r.nextSibling),x(r),r=null),n&&!r){var o=i.getPropertyValue("content"),a=R.createElement("i");a.setAttribute("class",""+Zt[n[1]]),a.setAttribute(G,e),a.innerText=3===o.length?o.substr(1,1):o,":before"===e?t.insertBefore(a,t.firstChild):t.appendChild(a)}})}),jt=!1,e()}}function C(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(H){var i=R.documentElement.classList,n=function(t){return i.add(W+"-"+t)},r=function(t){return i.remove(W+"-"+t)},o=Object.keys(Qt),a=["."+Kt+":not(["+V+"])"].concat(o.map(function(t){return"."+t+":not(["+V+"])"})).join(", ");if(0!==a.length){var l=s(t.querySelectorAll(a));if(l.length>0){n("pending"),r("complete");var c=Tt.begin("onTree"),u=l.reduce(function(t,e){try{var i=k(e);i&&t.push(i)}catch(t){q||t instanceof b&&console.error(t)}return t},[]);c(),v(u,function(){n("active"),n("complete"),r("pending"),"function"==typeof e&&e()})}}}}function I(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=k(t);i&&v([i],e)}function _(t){return{found:!0,width:t[0],height:t[1],icon:{tag:"path",attributes:{fill:"currentColor",d:t.slice(4)[0]}}}}function S(){st.autoAddCss&&(ee||r(te()),ee=!0)}function A(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(function(t){return g(t)})}}),Object.defineProperty(t,"node",{get:function(){if(H){var e=R.createElement("div");return e.innerHTML=t.html,e.children}}}),t}function O(t){var e=t.prefix,i=void 0===e?"fa":e,n=t.iconName;if(n)return m(ie.definitions,i,n)||m(lt.styles,i,n)}Object.defineProperty(e,"__esModule",{value:!0});/*!
 * Font Awesome Free 5.0.13 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */
var P=function(){},E={},M={},L=null,D={mark:P,measure:P};try{"undefined"!=typeof window&&(E=window),"undefined"!=typeof document&&(M=document),"undefined"!=typeof MutationObserver&&(L=MutationObserver),"undefined"!=typeof performance&&(D=performance)}catch(t){}var j=(E.navigator||{}).userAgent,N=void 0===j?"":j,F=E,R=M,U=L,z=D,B=!!F.document,H=!!R.documentElement&&!!R.head&&"function"==typeof R.addEventListener&&"function"==typeof R.createElement,$=~N.indexOf("MSIE")||~N.indexOf("Trident/"),Y=16,V="data-fa-i2svg",G="data-fa-pseudo-element",W="fontawesome-i2svg",q=function(){try{return!0}catch(t){return!1}}(),X=[1,2,3,4,5,6,7,8,9,10],Q=X.concat([11,12,13,14,15,16,17,18,19,20]),K=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],J=["xs","sm","lg","fw","ul","li","border","pull-left","pull-right","spin","pulse","rotate-90","rotate-180","rotate-270","flip-horizontal","flip-vertical","stack","stack-1x","stack-2x","inverse","layers","layers-text","layers-counter"].concat(X.map(function(t){return t+"x"})).concat(Q.map(function(t){return"w-"+t})),Z=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},tt=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),et=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},it=function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)},nt=F.FontAwesomeConfig||{},rt=Object.keys(nt),ot=et({familyPrefix:"fa",replacementClass:"svg-inline--fa",autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},nt);ot.autoReplaceSvg||(ot.observeMutations=!1);var st=et({},ot);F.FontAwesomeConfig=st;var at=F||{};at.___FONT_AWESOME___||(at.___FONT_AWESOME___={}),at.___FONT_AWESOME___.styles||(at.___FONT_AWESOME___.styles={}),at.___FONT_AWESOME___.hooks||(at.___FONT_AWESOME___.hooks={}),at.___FONT_AWESOME___.shims||(at.___FONT_AWESOME___.shims=[]);var lt=at.___FONT_AWESOME___,ct=[],ut=!1;H&&((ut=(R.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(R.readyState))||R.addEventListener("DOMContentLoaded",function t(){R.removeEventListener("DOMContentLoaded",t),ut=1,ct.map(function(t){return t()})}));var pt=Y,dt={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1},ht=0,ft={x:0,y:0,width:"100%",height:"100%"},mt=function(t){var e=t.children,i=t.attributes,n=t.main,r=t.mask,s=t.transform,a=n.width,l=n.icon,c=r.width,u=r.icon,d=p({transform:s,containerWidth:c,iconWidth:a}),h={tag:"rect",attributes:et({},ft,{fill:"white"})},f={tag:"g",attributes:et({},d.inner),children:[{tag:"path",attributes:et({},l.attributes,d.path,{fill:"black"})}]},m={tag:"g",attributes:et({},d.outer),children:[f]},g="mask-"+o(),y="clip-"+o(),v={tag:"defs",children:[{tag:"clipPath",attributes:{id:y},children:[u]},{tag:"mask",attributes:et({},ft,{id:g,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[h,m]}]};return e.push(v,{tag:"rect",attributes:et({fill:"currentColor","clip-path":"url(#"+y+")",mask:"url(#"+g+")"},ft)}),{children:e,attributes:i}},gt=function(t){var e=t.children,i=t.attributes,n=t.main,r=t.transform,o=c(t.styles);if(o.length>0&&(i.style=o),u(r)){var s=p({transform:r,containerWidth:n.width,iconWidth:n.width});e.push({tag:"g",attributes:et({},s.outer),children:[{tag:"g",attributes:et({},s.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:et({},n.icon.attributes,s.path)}]}]})}else e.push(n.icon);return{children:e,attributes:i}},yt=function(t){var e=t.children,i=t.main,n=t.mask,r=t.attributes,o=t.styles,s=t.transform;if(u(s)&&i.found&&!n.found){var a={x:i.width/i.height/2,y:.5};r.style=c(et({},o,{"transform-origin":a.x+s.x/16+"em "+(a.y+s.y/16)+"em"}))}return[{tag:"svg",attributes:r,children:e}]},vt=function(t){var e=t.prefix,i=t.iconName,n=t.children,r=t.attributes,o=t.symbol,s=!0===o?e+"-"+st.familyPrefix+"-"+i:o;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:et({},r,{id:s}),children:n}]}]},bt=function(){},wt=st.measurePerformance&&z&&z.mark&&z.measure?z:{mark:bt,measure:bt},kt='FA "5.0.13"',xt=function(t){wt.mark(kt+" "+t+" ends"),wt.measure(kt+" "+t,kt+" "+t+" begins",kt+" "+t+" ends")},Tt={begin:function(t){return wt.mark(kt+" "+t+" begins"),function(){return xt(t)}},end:xt},Ct=function(t,e,i,n){var r,o,s,a=Object.keys(t),l=a.length,c=void 0!==n?function(t,e){return function(i,n,r,o){return t.call(e,i,n,r,o)}}(e,n):e;for(void 0===i?(r=1,s=t[a[0]]):(r=0,s=i);r<l;r++)s=c(s,t[o=a[r]],o,t);return s},It=lt.styles,_t=lt.shims,St={},At={},Ot={},Pt=function(){var t=function(t){return Ct(It,function(e,i,n){return e[n]=Ct(i,t,{}),e},{})};St=t(function(t,e,i){return t[e[3]]=i,t}),At=t(function(t,e,i){var n=e[2];return t[i]=i,n.forEach(function(e){t[e]=i}),t});var e="far"in It;Ot=Ct(_t,function(t,i){var n=i[0],r=i[1],o=i[2];return"far"!==r||e||(r="fas"),t[n]={prefix:r,iconName:o},t},{})};Pt();var Et=lt.styles,Mt=function(){return{prefix:null,iconName:null,rest:[]}},Lt=function(){},Dt={replace:function(t){var e=t[0],i=t[1].map(function(t){return g(t)}).join("\n");if(e.parentNode&&e.outerHTML)e.outerHTML=i+(st.keepOriginalSource&&"svg"!==e.tagName.toLowerCase()?"\x3c!-- "+e.outerHTML+" --\x3e":"");else if(e.parentNode){var n=document.createElement("span");e.parentNode.replaceChild(n,e),n.outerHTML=i}},nest:function(t){var e=t[0],i=t[1];if(~a(e).indexOf(st.replacementClass))return Dt.replace(t);var n=new RegExp(st.familyPrefix+"-.*");delete i[0].attributes.style;var r=i[0].attributes.class.split(" ").reduce(function(t,e){return e===st.replacementClass||e.match(n)?t.toSvg.push(e):t.toNode.push(e),t},{toNode:[],toSvg:[]});i[0].attributes.class=r.toSvg.join(" ");var o=i.map(function(t){return g(t)}).join("\n");e.setAttribute("class",r.toNode.join(" ")),e.setAttribute(V,""),e.innerHTML=o}},jt=!1,Nt=null,Ft=function(t){var e=t.getAttribute("style"),i=[];return e&&(i=e.split(";").reduce(function(t,e){var i=e.split(":"),n=i[0],r=i.slice(1);return n&&r.length>0&&(t[n]=r.join(":").trim()),t},{})),i},Rt=function(t){var e,i,n=t.getAttribute("data-prefix"),r=t.getAttribute("data-icon"),o=void 0!==t.innerText?t.innerText.trim():"",s=f(a(t));return n&&r&&(s.prefix=n,s.iconName=r),s.prefix&&o.length>1?s.iconName=(e=s.prefix,i=t.innerText,At[e][i]):s.prefix&&1===o.length&&(s.iconName=function(t,e){return St[t][e]}(s.prefix,function(t){for(var e="",i=0;i<t.length;i++)e+=("000"+t.charCodeAt(i).toString(16)).slice(-4);return e}(t.innerText))),s},Ut=function(t){var e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t?t.toLowerCase().split(" ").reduce(function(t,e){var i=e.toLowerCase().split("-"),n=i[0],r=i.slice(1).join("-");if(n&&"h"===r)return t.flipX=!0,t;if(n&&"v"===r)return t.flipY=!0,t;if(r=parseFloat(r),isNaN(r))return t;switch(n){case"grow":t.size=t.size+r;break;case"shrink":t.size=t.size-r;break;case"left":t.x=t.x-r;break;case"right":t.x=t.x+r;break;case"up":t.y=t.y-r;break;case"down":t.y=t.y+r;break;case"rotate":t.rotate=t.rotate+r}return t},e):e},zt=function(t){return Ut(t.getAttribute("data-fa-transform"))},Bt=function(t){var e=t.getAttribute("data-fa-symbol");return null!==e&&(""===e||e)},Ht=function(t){var e=s(t.attributes).reduce(function(t,e){return"class"!==t.name&&"style"!==t.name&&(t[e.name]=e.value),t},{}),i=t.getAttribute("title");return st.autoA11y&&(i?e["aria-labelledby"]=st.replacementClass+"-title-"+o():e["aria-hidden"]="true"),e},$t=function(t){var e=t.getAttribute("data-fa-mask");return e?f(e.split(" ").map(function(t){return t.trim()})):Mt()};b.prototype=Object.create(Error.prototype),b.prototype.constructor=b;var Yt,Vt={fill:"currentColor"},Gt={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},Wt={tag:"path",attributes:et({},Vt,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})},qt=et({},Gt,{attributeName:"opacity"}),Xt={tag:"g",children:[Wt,{tag:"circle",attributes:et({},Vt,{cx:"256",cy:"364",r:"28"}),children:[{tag:"animate",attributes:et({},Gt,{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:et({},qt,{values:"1;0;1;1;0;1;"})}]},{tag:"path",attributes:et({},Vt,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:[{tag:"animate",attributes:et({},qt,{values:"1;0;0;0;0;1;"})}]},{tag:"path",attributes:et({},Vt,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:et({},qt,{values:"0;0;1;1;0;0;"})}]}]},Qt=lt.styles,Kt="fa-layers-text",Jt=/Font Awesome 5 (Solid|Regular|Light|Brands)/,Zt={Solid:"fas",Regular:"far",Light:"fal",Brands:"fab"},te=function(){var t="svg-inline--fa",e=st.familyPrefix,i=st.replacementClass,n='svg:not(:root).svg-inline--fa {\n  overflow: visible; }\n\n.svg-inline--fa {\n  display: inline-block;\n  font-size: inherit;\n  height: 1em;\n  overflow: visible;\n  vertical-align: -.125em; }\n  .svg-inline--fa.fa-lg {\n    vertical-align: -.225em; }\n  .svg-inline--fa.fa-w-1 {\n    width: 0.0625em; }\n  .svg-inline--fa.fa-w-2 {\n    width: 0.125em; }\n  .svg-inline--fa.fa-w-3 {\n    width: 0.1875em; }\n  .svg-inline--fa.fa-w-4 {\n    width: 0.25em; }\n  .svg-inline--fa.fa-w-5 {\n    width: 0.3125em; }\n  .svg-inline--fa.fa-w-6 {\n    width: 0.375em; }\n  .svg-inline--fa.fa-w-7 {\n    width: 0.4375em; }\n  .svg-inline--fa.fa-w-8 {\n    width: 0.5em; }\n  .svg-inline--fa.fa-w-9 {\n    width: 0.5625em; }\n  .svg-inline--fa.fa-w-10 {\n    width: 0.625em; }\n  .svg-inline--fa.fa-w-11 {\n    width: 0.6875em; }\n  .svg-inline--fa.fa-w-12 {\n    width: 0.75em; }\n  .svg-inline--fa.fa-w-13 {\n    width: 0.8125em; }\n  .svg-inline--fa.fa-w-14 {\n    width: 0.875em; }\n  .svg-inline--fa.fa-w-15 {\n    width: 0.9375em; }\n  .svg-inline--fa.fa-w-16 {\n    width: 1em; }\n  .svg-inline--fa.fa-w-17 {\n    width: 1.0625em; }\n  .svg-inline--fa.fa-w-18 {\n    width: 1.125em; }\n  .svg-inline--fa.fa-w-19 {\n    width: 1.1875em; }\n  .svg-inline--fa.fa-w-20 {\n    width: 1.25em; }\n  .svg-inline--fa.fa-pull-left {\n    margin-right: .3em;\n    width: auto; }\n  .svg-inline--fa.fa-pull-right {\n    margin-left: .3em;\n    width: auto; }\n  .svg-inline--fa.fa-border {\n    height: 1.5em; }\n  .svg-inline--fa.fa-li {\n    width: 2em; }\n  .svg-inline--fa.fa-fw {\n    width: 1.25em; }\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0; }\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -.125em;\n  width: 1em; }\n  .fa-layers svg.svg-inline--fa {\n    -webkit-transform-origin: center center;\n            transform-origin: center center; }\n\n.fa-layers-text, .fa-layers-counter {\n  display: inline-block;\n  position: absolute;\n  text-align: center; }\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center; }\n\n.fa-layers-counter {\n  background-color: #ff253a;\n  border-radius: 1em;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #fff;\n  height: 1.5em;\n  line-height: 1;\n  max-width: 5em;\n  min-width: 1.5em;\n  overflow: hidden;\n  padding: .25em;\n  right: 0;\n  text-overflow: ellipsis;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right; }\n\n.fa-layers-bottom-right {\n  bottom: 0;\n  right: 0;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right; }\n\n.fa-layers-bottom-left {\n  bottom: 0;\n  left: 0;\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left; }\n\n.fa-layers-top-right {\n  right: 0;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right; }\n\n.fa-layers-top-left {\n  left: 0;\n  right: auto;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top left;\n          transform-origin: top left; }\n\n.fa-lg {\n  font-size: 1.33333em;\n  line-height: 0.75em;\n  vertical-align: -.0667em; }\n\n.fa-xs {\n  font-size: .75em; }\n\n.fa-sm {\n  font-size: .875em; }\n\n.fa-1x {\n  font-size: 1em; }\n\n.fa-2x {\n  font-size: 2em; }\n\n.fa-3x {\n  font-size: 3em; }\n\n.fa-4x {\n  font-size: 4em; }\n\n.fa-5x {\n  font-size: 5em; }\n\n.fa-6x {\n  font-size: 6em; }\n\n.fa-7x {\n  font-size: 7em; }\n\n.fa-8x {\n  font-size: 8em; }\n\n.fa-9x {\n  font-size: 9em; }\n\n.fa-10x {\n  font-size: 10em; }\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em; }\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: 2.5em;\n  padding-left: 0; }\n  .fa-ul > li {\n    position: relative; }\n\n.fa-li {\n  left: -2em;\n  position: absolute;\n  text-align: center;\n  width: 2em;\n  line-height: inherit; }\n\n.fa-border {\n  border: solid 0.08em #eee;\n  border-radius: .1em;\n  padding: .2em .25em .15em; }\n\n.fa-pull-left {\n  float: left; }\n\n.fa-pull-right {\n  float: right; }\n\n.fa.fa-pull-left,\n.fas.fa-pull-left,\n.far.fa-pull-left,\n.fal.fa-pull-left,\n.fab.fa-pull-left {\n  margin-right: .3em; }\n\n.fa.fa-pull-right,\n.fas.fa-pull-right,\n.far.fa-pull-right,\n.fal.fa-pull-right,\n.fab.fa-pull-right {\n  margin-left: .3em; }\n\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n          animation: fa-spin 2s infinite linear; }\n\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n          animation: fa-spin 1s infinite steps(8); }\n\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg); }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg); } }\n\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg); }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg); } }\n\n.fa-rotate-90 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg); }\n\n.fa-rotate-180 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg); }\n\n.fa-rotate-270 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg); }\n\n.fa-flip-horizontal {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1); }\n\n.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1); }\n\n.fa-flip-horizontal.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1); }\n\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical {\n  -webkit-filter: none;\n          filter: none; }\n\n.fa-stack {\n  display: inline-block;\n  height: 2em;\n  position: relative;\n  width: 2em; }\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0; }\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1em; }\n\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2em; }\n\n.fa-inverse {\n  color: #fff; }\n\n.sr-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px; }\n\n.sr-only-focusable:active, .sr-only-focusable:focus {\n  clip: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  position: static;\n  width: auto; }\n';if("fa"!==e||i!==t){var r=new RegExp("\\.fa\\-","g"),o=new RegExp("\\."+t,"g");n=n.replace(r,"."+e+"-").replace(o,"."+i)}return n},ee=!1,ie=new(function(){function t(){Z(this,t),this.definitions={}}return tt(t,[{key:"add",value:function(){for(var t=this,e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];var r=i.reduce(this._pullDefinitions,{});Object.keys(r).forEach(function(e){t.definitions[e]=et({},t.definitions[e]||{},r[e]),function t(e,i){var n=Object.keys(i).reduce(function(t,e){var n=i[e];return n.icon?t[n.iconName]=n.icon:t[e]=n,t},{});"function"==typeof lt.hooks.addPack?lt.hooks.addPack(e,n):lt.styles[e]=et({},lt.styles[e]||{},n),"fas"===e&&t("fa",i)}(e,r[e])})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,e){var i=e.prefix&&e.iconName&&e.icon?{0:e}:e;return Object.keys(i).map(function(e){var n=i[e],r=n.prefix,o=n.iconName,s=n.icon;t[r]||(t[r]={}),t[r][o]=s}),t}}]),t}()),ne=function(){n({autoReplaceSvg:!1,observeMutations:!1}),Nt&&Nt.disconnect()},re={i2svg:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(H){S();var e=t.node,i=void 0===e?R:e,n=t.callback,r=void 0===n?function(){}:n;st.searchPseudoElements&&T(i),C(i,r)}},css:te,insertCss:function(){r(te())}},oe={transform:function(t){return Ut(t)}},se=(Yt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.transform,n=void 0===i?dt:i,r=e.symbol,s=void 0!==r&&r,a=e.mask,l=void 0===a?null:a,c=e.title,u=void 0===c?null:c,p=e.classes,h=void 0===p?[]:p,f=e.attributes,m=void 0===f?{}:f,g=e.styles,y=void 0===g?{}:g;if(t){var v=t.prefix,b=t.iconName,w=t.icon;return A(et({type:"icon"},t),function(){return S(),st.autoA11y&&(u?m["aria-labelledby"]=st.replacementClass+"-title-"+o():m["aria-hidden"]="true"),d({icons:{main:_(w),mask:l?_(l.icon):{found:!1,width:null,height:null,icon:{}}},prefix:v,iconName:b,transform:et({},dt,n),symbol:s,title:u,extra:{attributes:m,styles:y,classes:h}})})}},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(t||{}).icon?t:O(t||{}),n=e.mask;return n&&(n=(n||{}).icon?n:O(n||{})),Yt(i,et({},e,{mask:n}))}),ae=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.transform,n=void 0===i?dt:i,r=e.title,o=void 0===r?null:r,s=e.classes,a=void 0===s?[]:s,l=e.attributes,c=void 0===l?{}:l,u=e.styles,p=void 0===u?{}:u;return A({type:"text",content:t},function(){return S(),h({content:t,transform:et({},dt,n),title:o,extra:{attributes:c,styles:p,classes:[st.familyPrefix+"-layers-text"].concat(it(a))}})})},le=function(t){return A({type:"layer"},function(){S();var e=[];return t(function(t){Array.isArray(t)?t.map(function(t){e=e.concat(t.abstract)}):e=e.concat(t.abstract)}),[{tag:"span",attributes:{class:st.familyPrefix+"-layers"},children:e}]})},ce={noAuto:ne,dom:re,library:ie,parse:oe,findIconDefinition:O,icon:se,text:ae,layer:le},ue=function(){H&&st.autoReplaceSvg&&ce.dom.i2svg({node:R})};Object.defineProperty(ce,"config",{get:function(){return st},set:function(t){n(t)}}),H&&function(t){try{!function(){B&&(F.FontAwesome||(F.FontAwesome=ce),t=function(){Object.keys(lt.styles).length>0&&ue(),st.observeMutations&&"function"==typeof MutationObserver&&function(t){if(U){var e=t.treeCallback,i=t.nodeCallback,n=t.pseudoElementsCallback;Nt=new U(function(t){jt||s(t).forEach(function(t){if("childList"===t.type&&t.addedNodes.length>0&&!y(t.addedNodes[0])&&(st.searchPseudoElements&&n(t.target),e(t.target)),"attributes"===t.type&&t.target.parentNode&&st.searchPseudoElements&&n(t.target.parentNode),"attributes"===t.type&&y(t.target)&&~K.indexOf(t.attributeName))if("class"===t.attributeName){var r=f(a(t.target)),o=r.prefix,s=r.iconName;o&&t.target.setAttribute("data-prefix",o),s&&t.target.setAttribute("data-icon",s)}else i(t.target)})}),H&&Nt.observe(R.getElementsByTagName("body")[0],{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}({treeCallback:C,nodeCallback:I,pseudoElementsCallback:T})},H&&(ut?setTimeout(t,0):ct.push(t))),lt.hooks=et({},lt.hooks,{addPack:function(t,e){lt.styles[t]=et({},lt.styles[t]||{},e),Pt(),ue()},addShims:function(t){var e;(e=lt.shims).push.apply(e,it(t)),Pt(),ue()}});var t}()}catch(t){if(!q)throw t}}();var pe=ce.config;e.config=pe,e.icon=se,e.noAuto=ne,e.layer=le,e.text=ae,e.library=ie,e.dom=re,e.parse=oe,e.findIconDefinition=O,e.default=ce},function(t,e,i){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function r(t){var e=t.querySelectorAll("path");return[].map.call(e,function(t){return t.getAttribute("d")}).join(" ")}function o(t){var e=t.querySelector("svg").getAttribute("viewBox").split(" "),i=l(e,4);return{width:i[2],height:i[3]}}function s(t,e){var i=o(e);return{prefix:"tw",iconName:t,icon:[i.width,i.height,[],"",r(e)]}}function a(t,e,i,r){var o=i?{color:i}:{};return{title:"",classes:["fa-"+(t||"1x")].concat(n(e)),styles:Object.assign(o,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.applyCustom=e.isIE=e.isEdge=e.isFirefox=void 0;var l=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};e.combinePaths=r,e.getViewBox=o,e.getCustomDefinition=s,e.getExtras=a,e.createStyles=function(t){if(!t)return{};var e=t.replace(/\s/g,"").split(";").map(function(t){return t.split(":")});return Object.assign.apply(Object,n(e.map(function(t){return t[0]?function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({},t[0],t[1]):{}})))};var c,u=(c=i(7))&&c.__esModule?c:{default:c},p=navigator.userAgent;e.isFirefox=p.includes("Firefox"),e.isEdge=p.includes("Edge"),e.isIE=["MSIE ","Trident/"].some(function(t){return p.includes(t)});var d=e.applyCustom=function(t,e,i,n,r,o){var l=s(e,document.createRange().createContextualFragment(t)),c=a(i,r,n,o);return u.default.icon(l,c)};e.default={applyCustom:d}},,,,,,,,,,,,,function(t){t.exports={bundles:["projects-dashboard","projects","teamwork","common","gantt"],map:{activity:1,"comments-tw":1,dashboard:1,events:1,"messages-tw":1,projects:1,task:1,welcome:1,archive:2,"archive-solid":2,at:2,"at-solid":2,billing:2,"billing-solid":2,bolt:2,"bolt-solid":2,bug:2,"bug-solid":2,bullhorn:2,"bullhorn-solid":2,"bullhorn-light":2,bullseye:2,"bullseye-solid":2,checklist:2,"checklist-solid":2,"check-circle":2,"check-circle-solid":2,"circle-notch":2,"circle-notch-solid":2,clone:2,"clone-solid":2,compress:2,"compress-solid":2,copy:2,"copy-solid":2,"custom-field":2,sort:2,"sort-solid":2,"sort-amount-up":2,"sort-amount-up-solid":2,"sort-amount-down":2,"sort-amount-down-solid":2,delete:2,"delete-solid":2,dependencies:2,"dependencies-solid":2,edit:2,"edit-solid":2,event:2,"event-solid":2,expand:2,"expand-solid":2,"external-link":2,"external-link-solid":2,fax:2,"fax-solid":2,file:2,"file-solid":2,"file-light":2,"file-download":2,"file-download-solid":2,"file-upload":2,"file-upload-solid":2,filter:2,flask:2,"flask-solid":2,followers:2,"followers-solid":2,globe:2,"globe-solid":2,grid:2,"grid-solid":2,"landline-phone":2,"landline-phone-solid":2,lightbulb:2,"lightbulb-solid":2,list:2,"list-solid":2,merge:2,"merge-solid":2,"mobile-phone":2,"mobile-phone-solid":2,"no-email":2,observer:2,"observer-solid":2,owner:2,"owner-solid":2,pause:2,"pause-solid":2,people:2,"people-solid":2,pin:2,"pin-solid":2,play:2,"play-solid":2,plus:4,"plus-solid":4,project:2,"project-solid":2,"puzzle-piece":2,"puzzle-piece-solid":2,quickview:2,"quickview-solid":2,reassign:2,"reassign-solid":2,repeat:2,"repeat-solid":2,save:2,"save-solid":2,search:2,"search-solid":2,shield:2,"shield-solid":2,sliders:2,status:2,"status-solid":2,stop:2,"stop-solid":2,subtask:2,"subtask-solid":2,tasks:2,"tasks-solid":2,template:2,"template-solid":2,"template-light":2,timer:2,"timer-solid":2,users:2,"users-solid":2,wrench:2,"wrench-solid":2,"board-tw":3,"card-tw":3,"caution-tw":3,"chat-logo-tw":3,"spaces-logo-tw":3,"collapsed-tw":3,"crm-logo-mono-tw":3,"description-tw":3,"desk-logo-mono-tw":3,"desk-logo-tw":3,"draghandle-tw":3,"error-tw":3,"everything-tw":3,"expanded-tw":3,"gantt-tw":3,"grid-tw":3,"list-tw":3,"milestone-tw":3,"projects-logo-tw":3,"simple-tw":3,"table-tw":3,add:4,"add-solid":4,"alert-success":4,"alert-success-solid":4,"angle-down":4,"angle-down-solid":4,"angle-up":4,"angle-up-solid":4,"arrow-from-left":4,"arrow-from-left-solid":4,"arrow-to-right":4,"arrow-to-right-solid":4,book:4,"book-solid":4,"book-light":4,bookmark:4,"bookmark-solid":4,briefcase:4,"briefcase-solid":4,"briefcase-light":4,sync:4,"sync-solid":4,calendar:4,"calendar-solid":4,"calendar-check":4,"calendar-check-solid":4,"calendar-check-light":4,"clipboard-list-check":4,"clipboard-list-check-solid":4,"clipboard-list-check-light":4,"chart-line":4,"chart-line-solid":4,check:4,"check-solid":4,"chevron-down":4,"chevron-down-solid":4,"chevron-left":4,"chevron-left-solid":4,"chevron-right":4,"chevron-right-solid":4,"chevron-up":4,"chevron-up-solid":4,clock:4,"clock-solid":4,"clock-light":4,company:4,"company-solid":4,close:4,"close-solid":4,columns:4,"columns-solid":4,comment:4,"comment-solid":4,comments:4,"comments-solid":4,"ellipsis-h":4,"ellipsis-h-solid":4,"ellipsis-v":4,"ellipsis-v-solid":4,envelope:4,"envelope-solid":4,"exclamation-triangle":4,"exclamation-triangle-solid":4,excel:4,"excel-solid":4,favorite:4,"favorite-solid":4,folder:4,"folder-solid":4,gift:4,"gift-solid":4,"glass-cheers":4,"glass-cheers-solid":4,"glass-cheers-light":4,graph:4,"graph-solid":4,"hands-helping":4,"hands-helping-solid":4,"hands-helping-light":4,info:4,"info-solid":4,"info-circle":4,"info-circle-solid":4,key:4,"key-solid":4,link:4,"link-solid":4,"link-light":4,location:4,"location-solid":4,"location-alt":4,"location-alt-solid":4,lock:4,"lock-solid":4,"users-class":4,"users-class-solid":4,"users-class-light":4,messages:4,"messages-solid":4,minus:4,"minus-solid":4,note:4,"note-solid":4,notifications:4,"notifications-solid":4,"notifications-disabled":4,"notifications-disabled-solid":4,paperclip:4,"paperclip-solid":4,"paint-brush":4,"paint-brush-solid":4,"paint-brush-light":4,pane:4,"project-diagram":4,"project-diagram-solid":4,power:4,"power-solid":4,priority:4,"priority-solid":4,reminders:4,"reminders-solid":4,reply:4,"reply-solid":4,rss:4,"rss-solid":4,settings:4,"settings-solid":4,shortcut:4,"shortcut-solid":4,"smile-plus":4,"smile-plus-solid":4,star:4,"star-solid":4,success:4,"success-solid":4,tag:4,"tag-solid":4,"thumbs-up":4,"thumbs-up-solid":4,undo:4,"undo-solid":4,unlink:4,"unlink-solid":4,user:4,"user-solid":4,"question-circle":4,"question-circle-solid":4,code:4,"code-solid":4,times:4,"times-solid":4,building:4,"building-solid":4,"comment-alt-dots":4,"comment-alt-dots-solid":4,"lock-alt":4,"lock-alt-solid":4,"code-branch":4,"code-branch-solid":4,"file-check":4,"file-check-solid":4,desktop:4,"desktop-solid":4,calculator:4,"calculator-solid":4,smile:4,"smile-solid":4,"alarm-clock":4,"alarm-clock-solid":4,"envelope-open":4,"envelope-open-solid":4,"code-commit":4,"code-commit-solid":4,"info-square":4,"info-square-solid":4,images:4,"images-solid":4,handshake:4,"handshake-solid":4,cog:4,"cog-solid":4,"address-book":4,"address-book-solid":4,"address-card":4,"address-card-solid":4,bell:4,"bell-solid":4,"box-full":4,"box-full-solid":4,browser:4,"browser-solid":4,"calendar-alt":4,"calendar-alt-solid":4,"camera-retro":4,"camera-retro-solid":4,"chart-bar":4,"chart-bar-solid":4,"chart-bar-light":4,"chart-pie":4,"chart-pie-solid":4,"chart-pie-light":4,"clipboard-check":4,"clipboard-check-solid":4,"clipboard-list":4,"clipboard-list-solid":4,cloud:4,"cloud-solid":4,"cloud-download":4,"cloud-download-solid":4,"cloud-upload":4,"cloud-upload-solid":4,coffee:4,"coffee-solid":4,"credit-card":4,"credit-card-solid":4,cut:4,"cut-solid":4,"file-alt":4,"file-alt-solid":4,"file-edit":4,"file-edit-solid":4,"file-exclamation":4,"file-exclamation-solid":4,"file-plus":4,"file-plus-solid":4,"folder-open":4,"folder-open-solid":4,frown:4,"frown-solid":4,home:4,"home-solid":4,"list-alt":4,"list-alt-solid":4,"map-marker-alt":4,"map-marker-alt-solid":4,meh:4,"meh-solid":4,paste:4,"paste-solid":4,"pencil-alt":4,"pencil-alt-solid":4,phone:4,"phone-solid":4,print:5,"print-solid":5,fullscreen:5,"fullscreen-solid":5,redo:5,"redo-solid":5,"show-all":5,"show-all-solid":5,"zoom-in":5,"zoom-in-solid":5,"zoom-out":5,"zoom-out-solid":5}}},,function(t,e,i){"use strict";t.exports=i(33)},,,,,,function(t,e,i){function n(t){var e=r[t];return e?i.e(e[1]).then(function(){var t=i(e[0]);return Object.assign({},"object"==typeof t&&t,{default:t})}):Promise.resolve().then(function(){var e=new Error('Cannot find module "'+t+'".');throw e.code="MODULE_NOT_FOUND",e})}var r={"./common-icons.json":[39,4],"./gantt-icons.json":[38,3],"./projects-dashboard-icons.json":[37,2],"./projects-icons.json":[36,1],"./teamwork-icons.json":[35,0]};n.keys=function(){return Object.keys(r)},n.id=29,t.exports=n},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.icons=e.dynamic=e.resolve=void 0;var r,o,s=n(i(23)),a=n(i(21)),l=e.resolve=function(t,e){return t[e]||["-regular","-solid"].reduce(function(i,n){return i||e.endsWith(n)&&t[e.slice(0,-n.length)]},!1)};e.dynamic=(r=s.default.mark(function t(e){var n,r;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=l(a.default.map,e)){t.next=3;break}return t.abrupt("return",null);case 3:return t.next=5,i(29)("./"+a.default.bundles[n-1]+"-icons.json");case 5:return r=t.sent,t.abrupt("return",l(r,e));case 7:case"end":return t.stop()}},t,void 0)}),o=function(){var t=r.apply(this,arguments);return new Promise(function(e,i){return function n(r,o){try{var s=t[r](o),a=s.value}catch(t){return void i(t)}if(!s.done)return Promise.resolve(a).then(function(t){n("next",t)},function(t){n("throw",t)});e(a)}("next")})},function(t){return o.apply(this,arguments)}),e.icons=Object.keys(a.default.map)},function(t,e,i){"use strict";t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){"use strict";(function(t){var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(i){function n(t,e,i,n){var s=e&&e.prototype instanceof o?e:o,a=Object.create(s.prototype),l=new h(n||[]);return a._invoke=function(t,e,i){var n=I;return function(o,s){if(n===S)throw new Error("Generator is already running");if(n===A){if("throw"===o)throw s;return m()}for(i.method=o,i.arg=s;;){var a=i.delegate;if(a){var l=u(a,i);if(l){if(l===O)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===I)throw n=A,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=S;var c=r(t,e,i);if("normal"===c.type){if(n=i.done?A:_,c.arg===O)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(n=A,i.method="throw",i.arg=c.arg)}}}(t,i,l),a}function r(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}function o(){}function s(){}function a(){}function l(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function c(t){var i;this._invoke=function(n,o){function s(){return new Promise(function(i,s){!function i(n,o,s,a){var l=r(t[n],t,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"===(void 0===u?"undefined":e(u))&&v.call(u,"__await")?Promise.resolve(u.__await).then(function(t){i("next",t,s,a)},function(t){i("throw",t,s,a)}):Promise.resolve(u).then(function(t){c.value=t,s(c)},a)}a(l.arg)}(n,o,i,s)})}return i=i?i.then(s,s):s()}}function u(t,e){var i=t.iterator[e.method];if(i===g){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=g,u(t,e),"throw"===e.method))return O;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return O}var n=r(i,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,O;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=g),e.delegate=null,O):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,O)}function p(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function d(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function h(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(p,this),this.reset(!0)}function f(t){if(t){var e=t[w];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,n=function e(){for(;++i<t.length;)if(v.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=g,e.done=!0,e};return n.next=n}}return{next:m}}function m(){return{value:g,done:!0}}var g,y=Object.prototype,v=y.hasOwnProperty,b="function"==typeof Symbol?Symbol:{},w=b.iterator||"@@iterator",k=b.asyncIterator||"@@asyncIterator",x=b.toStringTag||"@@toStringTag",T="object"===e(t),C=i.regeneratorRuntime;if(C)T&&(t.exports=C);else{(C=i.regeneratorRuntime=T?t.exports:{}).wrap=n;var I="suspendedStart",_="suspendedYield",S="executing",A="completed",O={},P={};P[w]=function(){return this};var E=Object.getPrototypeOf,M=E&&E(E(f([])));M&&M!==y&&v.call(M,w)&&(P=M);var L=a.prototype=o.prototype=Object.create(P);s.prototype=L.constructor=a,a.constructor=s,a[x]=s.displayName="GeneratorFunction",C.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===s||"GeneratorFunction"===(e.displayName||e.name))},C.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,x in t||(t[x]="GeneratorFunction")),t.prototype=Object.create(L),t},C.awrap=function(t){return{__await:t}},l(c.prototype),c.prototype[k]=function(){return this},C.AsyncIterator=c,C.async=function(t,e,i,r){var o=new c(n(t,e,i,r));return C.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},l(L),L[x]="Generator",L[w]=function(){return this},L.toString=function(){return"[object Generator]"},C.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var n=e.pop();if(n in t)return i.value=n,i.done=!1,i}return i.done=!0,i}},C.values=f,h.prototype={constructor:h,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(d),!t)for(var e in this)"t"===e.charAt(0)&&v.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=g)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){function e(e,n){return o.type="throw",o.arg=t,i.next=e,n&&(i.method="next",i.arg=g),!!n}if(this.done)throw t;for(var i=this,n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n],o=r.completion;if("root"===r.tryLoc)return e("end");if(r.tryLoc<=this.prev){var s=v.call(r,"catchLoc"),a=v.call(r,"finallyLoc");if(s&&a){if(this.prev<r.catchLoc)return e(r.catchLoc,!0);if(this.prev<r.finallyLoc)return e(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return e(r.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return e(r.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var r=n;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=t,o.arg=e,r?(this.method="next",this.next=r.finallyLoc,O):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),O},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),d(i),O}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var r=n.arg;d(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:f(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=g),O}}}}(function(){return this}()||Function("return this")())}).call(this,i(31)(t))},function(t,e,i){"use strict";var n=function(){return this}()||Function("return this")(),r=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,o=r&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,t.exports=i(32),r)n.regeneratorRuntime=o;else try{delete n.regeneratorRuntime}catch(t){n.regeneratorRuntime=void 0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.icons=void 0;var n,r,o,s=(n=i(23))&&n.__esModule?n:{default:n},a=i(30),l=i(8);e.icons=a.icons,e.default=(r=s.default.mark(function t(e){var i,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.size,c=r.color,u=r.classes,p=void 0===u?[]:u,d=r.styles,h=void 0===d?{}:d,f=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).asNode,m=void 0===f||f;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,a.dynamic)(e);case 2:if(i=t.sent){t.next=6;break}return console.error("Unknown Icon: "+e),t.abrupt("return",null);case 6:return n=(0,l.applyCustom)(i,e,o,c,p,h),t.abrupt("return",m?n.node[0]:n.html[0]);case 8:case"end":return t.stop()}},t,void 0)}),o=function(){var t=r.apply(this,arguments);return new Promise(function(e,i){return function n(r,o){try{var s=t[r](o),a=s.value}catch(t){return void i(t)}if(!s.done)return Promise.resolve(a).then(function(t){n("next",t)},function(t){n("throw",t)});e(a)}("next")})},function(t){return o.apply(this,arguments)})}])})},1360:function(t,e,i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function i(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=[i(164),i(1134),i(4469),i(4470)],void 0!==(r=function(t,e,i,n){return function(e){function r(e){this.BoardColumnToItem=o(this.BoardColumnToItem,this),this.SyncIds=o(this.SyncIds,this),this.GetAllData=o(this.GetAllData,this),this.GetQueryTokens=o(this.GetQueryTokens,this),this.GetQueryBeforeCaret=o(this.GetQueryBeforeCaret,this);var i,s,a,l,c,u;r.__super__.constructor.call(this,e),this.empty=null!=(i=e.empty)&&i,console.assert("boolean"==typeof t.unwrap(this.empty)),this.projectId=null!=(s=e.projectId)?s:0,console.assert("number"==typeof t.unwrap(this.projectId)||Array.isArray(t.unwrap(this.projectId))),this.boardId=null!=(a=e.boardId)?a:0,console.assert("number"==typeof t.unwrap(this.boardId)),this.boardType=null!=(l=e.boardType)?l:"task",console.assert("string"==typeof t.unwrap(this.boardType)),this.showNoColumnOption=null!=(c=e.showNoColumnOption)&&c,console.assert("boolean"==typeof t.unwrap(this.showNoColumnOption)),this.noColumnItem=this.NormalizeDataItem({id:0,label:app.tl("No column")+app.localizationPreferences().ellipsis,order:0}),this.mapViewIdItems={},this.selectedBoardColumnIds=e.selectedBoardColumnIds,this.idKey=null!=(u=e.idKey)?u:"id",console.assert(null==this.selectedBoardColumnIds||t.isObservable(this.selectedBoardColumnIds)&&Array.isArray(this.selectedBoardColumnIds())),this.subscriptions.push(this.formattedProjectIdValue=t.pureComputed(function(e){return function(){return t.unwrap(e.projectId).toString()}}(this))),this.subscriptions.push(this.boardColumns=n.getBoardColumns({empty:this.empty,projectId:this.formattedProjectIdValue,boardId:this.boardId,boardType:this.boardType})),this.subscriptions.push(this.boardColumns.subscribe(function(t){return function(e){return t.dataLoader(e.dataLoader)}}(this))),this.SyncIds(this.selectedBoardColumnIds,this.selectedItems)}return s(r,e),r.prototype.defaultType="column",r.prototype.order=app.consts.AUTO_COMPLETE_ORDER.BOARD_COLUMN,r.prototype.excludeSelected=!0,r.prototype.GetQueryBeforeCaret=function(){var t,e;return null!=(t=null!=(e=/(?:^|\s)(\([^(\n\r]{0,15})$/.exec(this.fullQueryBeforeCaret()))?e[1]:void 0)?t:null},r.prototype.GetQueryAfterCaret=function(){return""},r.prototype.GetQueryTokens=function(){var t;return t=this.query(),null==t?null:t.slice(1).trim().toLowerCase().split(/\s+/)},r.prototype.GetAllData=function(){var e;return e=this.boardColumns().map(this.BoardColumnToItem),t.unwrap(this.showNoColumnOption)&&e.unshift(this.noColumnItem),this.NormalizeData(e)},r.prototype.SyncIds=function(e,n){this.ManageView(e,n,{map:function(t){return t.id},mapViewItem:function(e){return function(n){var r,o,s;return n in e.mapViewIdItems&&!t.isObservable(e.mapViewIdItems[n])?e.mapViewIdItems[n]:0===n&&e.showNoColumnOption?(e.mapViewIdItems[n]=e.noColumnItem,e.mapViewIdItems[n]):(s=null!=(r=e.mapViewIdItems)[n]?r[n]:r[n]=i.getBoardColumn(n,e.idKey),o=s(),o.ready?(s.dispose(),e.mapViewIdItems[n]=null!=o.error?null:e.NormalizeDataItem(e.BoardColumnToItem(o))):void 0)}}(this)})},r.prototype.BoardColumnToItem=function(t){var e;return{id:t[this.idKey],displayOrder:t.displayOrder,order:t.displayOrder/1+app.consts.AUTO_COMPLETE_ORDER.BOARD_COLUMN,label:t.name,color:t.color,columnCount:null!=(e=t.columnCount)?e:0,columnCountLabel:null!=t.columnCount?"<small>("+(1===parseInt(t.columnCount,10)?app.tl("[_s] project",1):app.tl("[_s] projects",t.columnCount))+")</small>":"",value:t.name.trim().toLowerCase(),suggestionTemplate:"<span class=\"w-auto-complete__item-icon\">\n    \x3c!-- ko component: {\n            name: 'ui-common-icon',\n            params: {\n                name: 'columns-regular',\n                color: color\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n</span>\n<span class=\"w-auto-complete__item-title\">\n    {{label}} {{{columnCountLabel}}}\n</span>",name:t.name,description:t.description,projectId:parseInt(t.projectId,10),deleted:t.deleted}},r}(e)}.apply(e,n))&&(t.exports=r)},1361:function(t,e,i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function i(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},a={}.hasOwnProperty,l=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};n=[i(164),i(1134),i(1153),i(4471)],void 0!==(r=function(t,e,i,n){return function(e){function r(e){this.SyncIds=o(this.SyncIds,this),this.GetAllData=o(this.GetAllData,this),this.GetQueryTokens=o(this.GetQueryTokens,this),this.GetQueryBeforeCaret=o(this.GetQueryBeforeCaret,this),this.buildNestedCategories=o(this.buildNestedCategories,this),this.generateAllCategories=o(this.generateAllCategories,this),this.unwrapCategories=o(this.unwrapCategories,this);var n,s;r.__super__.constructor.call(this,e),this.mapViewIdItems={},this.categoryType=null!=(n=e.categoryType)?n:"",console.assert("string"==typeof t.unwrap(this.categoryType)),this.includeAllCategory=null!=(s=e.includeAllCategory)&&s,console.assert("boolean"==typeof t.unwrap(this.includeAllCategory)),this.selectedCategoryIds=e.selectedCategoryIds,console.assert(null==this.selectedCategoryIds||t.isObservable(this.selectedCategoryIds)&&Array.isArray(this.selectedCategoryIds())),this.subscriptions.push(this.categories=i.getCategories(this.categoryType,0)),this.subscriptions.push(this.categories.subscribe(this.generateAllCategories)),this.allCategories=t.observable([]),this.generateAllCategories(this.categories),this.SyncIds(this.selectedCategoryIds,this.selectedItems)}return s(r,e),r.prototype.defaultType="category",r.prototype.order=app.consts.AUTO_COMPLETE_ORDER.CATEGORY,r.prototype.excludeSelected=!0,r.prototype.GetMatchingData=function(t){return this.allData().filter(function(e){return function(i){var n,r,o,s,a,l,c,u;if(e.ShouldExcludeItem(i))return!1;if(e.MatchesTokens(i,t))return!0;for(c=i.children,o=0,a=c.length;o<a;o++){if(n=c[o],e.MatchesTokens(n,t))return!0;for(u=n.children,s=0,l=u.length;s<l;s++)if(r=u[s],e.MatchesTokens(r,t))return!0}}}(this))},r.prototype.unwrapCategories=function(t,e){var i,n,r,o,s;for(null==e&&(e=0),i=[],r=0,o=t.length;r<o;r++)n=t[r],n.depth=e,(null!=(s=n.children)?s.length:void 0)&&(i=i.concat(this.unwrapCategories(n.children,e+1))),i.push(n);return i},r.prototype.generateAllCategories=function(t){var e;return e=this.unwrapCategories(t),this.allCategories(e)},r.prototype.buildNestedCategories=function(t){var e,i,n,r,o,s,a,l,c,u,p,d;for(c=[],d=t.filter(function(t){return 0===t.depth}),u=t.filter(function(t){return 1===t.depth}),p=t.filter(function(t){return 2===t.depth}),n=0,o=d.length;n<o;n++){for(e=d[n],a=u.filter(function(t){return t.parentId===e.id}),r=0,s=a.length;r<s;r++)i=a[r],l=p.filter(function(t){return t.parentId===i.id}),i.children=l;e.children=a,(-1!==e.id||this.includeAllCategory)&&c.push(e)}return c},r.prototype.GetQueryBeforeCaret=function(){var t,e;return null!=(t=null!=(e=/(?:^|\s)(\([^(\n\r]{0,15})$/.exec(this.fullQueryBeforeCaret()))?e[1]:void 0)?t:null},r.prototype.GetQueryAfterCaret=function(){return""},r.prototype.GetQueryTokens=function(){var t;return t=this.query(),null==t?null:t.slice(1).trim().toLowerCase().split(/\s+/)},r.prototype.NormalizeCategoryData=function(t){var e,i,n;if(!Array.isArray(t))throw new Error("data must be an Array");for(i=0,n=t.length;i<n;i++)e=t[i],this.NormalizeDataItem(e);return t.sort(function(t,e){var i;return 0===t.id?1:0===e.id?-1:(i=t.order-e.order,0===i&&(i=t.label.localeCompare(e.label)),i)})},r.prototype.GetAllData=function(){var t,e;return t=this.NormalizeCategoryData(this.allCategories().map(this.CategoryToItem)),e=this.selectedItems().map(function(t){return t.id}),t=t.filter(function(t){var i;return i=t.id,!(l.call(e,i)>=0)}),this.buildNestedCategories(t)},r.prototype.SyncIds=function(e,i){this.ManageView(e,i,{map:function(t){return t.id},mapViewItem:function(e){return function(i){var r,o,s;return i in e.mapViewIdItems&&!t.isObservable(e.mapViewIdItems[i])?e.mapViewIdItems[i]:(s=null!=(r=e.mapViewIdItems)[i]?r[i]:r[i]=n.getCategory(e.categoryType,i),o=s(),o.ready?(s.dispose(),e.mapViewIdItems[i]=null==o.error?e.NormalizeDataItem(e.CategoryToItem(o)):null):void 0)}}(this)})},r.prototype.CategoryToItem=function(e){var i;return{id:e.id,type:e.type,name:t.unwrap(e.name),parentId:parseInt(e.parentId,10),value:t.unwrap(e.name).toLowerCase(),children:null!=(i=e.children)?i:[],color:null==e.color?"transparent":"transparent"!==e.color&&-1===e.color.indexOf("#")?"#"+e.color:e.color,label:t.unwrap(e.name),depth:e.depth,elementsCount:e.elementsCount,suggestionTemplate:"<span class=\"w-auto-complete__item-icon w-auto-complete__item-icon--level-{{depth}}\">\n    \x3c!-- ko component: {\n            name: 'ui-common-icon',\n            params: {\n                name: 'folder-regular',\n                color: color\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n</span>\n<span class=\"w-auto-complete__item-title\">\n    {{name}} "+(parseInt(t.unwrap(e.elementsCount),10)>0?"({{elementsCount}})":"")+"\n</span>"}},r}(e)}.apply(e,n))&&(t.exports=r)},1362:function(t,e,i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function i(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=[i(164),i(1134),i(4478),i(4477)],void 0!==(r=function(t,e,i,n){return function(e){function r(e){this.SyncIds=o(this.SyncIds,this),this.GetAllData=o(this.GetAllData,this),this.GetQueryTokens=o(this.GetQueryTokens,this),this.GetQueryBeforeCaret=o(this.GetQueryBeforeCaret,this);var n,s;r.__super__.constructor.call(this,e),this.empty=null!=(n=e.empty)&&n,console.assert("boolean"==typeof t.unwrap(this.empty)),this.projectId=null!=(s=e.projectId)?s:0,console.assert("number"==typeof t.unwrap(this.projectId)||Array.isArray(t.unwrap(this.projectId))),this.mapViewIdItems={},this.selectedTaskListIds=e.selectedTaskListIds,console.assert(null==this.selectedTaskListIds||t.isObservable(this.selectedTaskListIds)&&Array.isArray(this.selectedTaskListIds())),this.subscriptions.push(this.formattedProjectIdValue=t.pureComputed(function(e){return function(){return t.unwrap(e.projectId).toString()}}(this))),this.subscriptions.push(this.taskLists=i.getTaskLists({empty:this.empty,projectId:this.formattedProjectIdValue})),this.subscriptions.push(this.taskLists.subscribe(function(t){return function(e){return t.dataLoader(e.dataLoader)}}(this))),this.SyncIds(this.selectedTaskListIds,this.selectedItems)}return s(r,e),r.prototype.defaultType="taskList",r.prototype.order=app.consts.AUTO_COMPLETE_ORDER.TASK_LIST,r.prototype.excludeSelected=!0,r.prototype.GetQueryBeforeCaret=function(){var t,e;return null!=(t=null!=(e=/(?:^|\s)(\([^(\n\r]{0,15})$/.exec(this.fullQueryBeforeCaret()))?e[1]:void 0)?t:null},r.prototype.GetQueryAfterCaret=function(){return""},r.prototype.GetQueryTokens=function(){var t;return t=this.query(),null==t?null:t.slice(1).trim().toLowerCase().split(/\s+/)},r.prototype.GetAllData=function(){return this.NormalizeData(this.taskLists().map(this.TaskListToItem))},r.prototype.SyncIds=function(e,i){this.ManageView(e,i,{map:function(t){return t.id},mapViewItem:function(e){return function(i){var r,o,s;return i in e.mapViewIdItems&&!t.isObservable(e.mapViewIdItems[i])?e.mapViewIdItems[i]:(s=null!=(r=e.mapViewIdItems)[i]?r[i]:r[i]=n.getTaskList(i),o=s(),o.ready?(s.dispose(),e.mapViewIdItems[i]=null!=o.error?null:e.NormalizeDataItem(e.TaskListToItem(o))):void 0)}}(this)})},r.prototype.TaskListToItem=function(t){return{id:parseInt(t.id,10),label:t.name,value:t.name.trim().toLowerCase(),suggestionTemplate:"<span class=\"w-auto-complete__item-icon\">\n    \x3c!-- ko component: {\n            name: 'ui-common-icon',\n            params: {\n                name: 'list-regular',\n                class: 'h-icon-color--inherit'\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n</span>\n<span class=\"w-auto-complete__item-title\">\n    {{label}}\n</span>",name:t.name,description:t.description,complete:t.complete,milestoneId:t["milestone-id"],projectId:parseInt(t.projectId,10),status:t.status}},r}(e)}.apply(e,n))&&(t.exports=r)},1363:function(t,e,i){var n,r;n=[i(14)],void 0!==(r=function(t){return function(){function e(e){var i,n;this.componentName="ActivityItem",null!=e.isPrivate&&(e.isPrivate=parseInt(e.isPrivate,10)),null!=e.userFullName&&(""===e.userFullName?e.userFirstName="":e.userFirstName=e.userFullName.split(" ")[0]),e.isComment="file_comment"===(n=e.type)||"notebook_comment"===n||"task_comment"===n||"milestone_comment"===n||"link_comment"===n,"project"===e.type&&parseInt(e.itemId,10)>0&&(e.link="projects/"+e.itemId),null==e.extraDescription&&(e.extraDescription=""),null==e.publicInfo&&(e.publicInfo=""),null==e.reactionType&&(e.reactionType=""),"reacted"===e.activityType&&(e.reactionType=e.extraDescription,e.extraDescription=""),app.ko.mapping.fromJS(e,this.mapping,this),-1===["task_comment","file_comment","milestone_comment","link_comment","notebook_comment","milestone_comment"].indexOf(this.type())?this.linkTipped=null:this.linkTipped="./?action=invoke.allcomments.getTip_ShowCommentObjectDetails()&commentId="+this.itemId(),"0"===this.isPrivate()||""===this.lockdownId()?this.privacyTipped=null:(this.privacyTipped="?action=invoke.privacy.getTip_privacyInfo()&lockdownId="+this.lockdownId(),"2"===this.isPrivate()&&(this.privacyTipped+="&ih=1")),this.isToday=ko.pureComputed(function(e){return function(){return 0===(new t).startOf("day").diff(e.dateTime().clone().startOf("day"),"days")}}(this)),this.isYesterday=ko.pureComputed(function(e){return function(){return 1===(new t).startOf("day").diff(e.dateTime().clone().startOf("day"),"days")}}(this)),this.shortDateTime=ko.pureComputed(function(t){return function(){return t.dateTime().format("MMM DD")}}(this)),this.showYear=ko.pureComputed(function(e){return function(){return e.dateTime().format("YYYY")!==(new t).format("YYYY")}}(this)),this.year=ko.pureComputed(function(t){return function(){return t.dateTime().format("YYYY")}}(this)),i=/\[\[-(.+)-\]\]/,this.assignedToMultiplePeople=ko.observable(!1),-1!==this.publicInfo().indexOf("[multiple]")?(this.assignedToMultiplePeople(!0),this.publicInfo(this.publicInfo().replace("[multiple]",""))):this.assignedToMultiplePeople(!1),this.formattedExtraDescription=ko.pureComputed(function(t){return function(){var e,n;return null==(n=ko.unwrap(t.extraDescription))?"":(e=n.match(i),e?app.serverTranslate(n.replace(i,"[_s]"),e[1]):n)}}(this))}return e.prototype.mapping={key:function(t){return ko.unwrap(t.id)},dateTime:{create:function(e){return ko.observable(t(e.data,"YYYY-MM-DDTHH:mm:ssZ"))}}},e.prototype.GetCSS=function(){var t;switch(t="",this.latestActivityType()){case"new":t+=" added";break;default:t+=" "+this.latestActivityType()}switch("0"!==this.isPrivate()&&(t+=" private"),"2"===this.isPrivate()&&(t+=" privateInherited"),this.type()){case"comment":case"task_comment":case"file_comment":case"notebook_comment":case"milestone_comment":t+=" commented";break;case"newmessage":t+=" message";break;case"file":t+=" addedFile";break;case"billingInvoice":t+=" invoice";break;case"tasklist":t+=" taskList";break;default:t+=" "+this.type()}return t},e.prototype.GetTimeFormat=function(){return this.dateTime().format(app.loggedInUser.localization.timeFormat())},e}()}.apply(e,n))&&(t.exports=r)},1364:function(t,e,i){var n,r;n=[i(164),i(1133),i(1119),i(1117)],void 0!==(r=function(t,e,i,n){var r,o;return o=function(){function e(e){return null==e&&(e={}),null==e.color&&(e.color=""),null==e.value&&(e.value=""),e.uid=app.utility.generateRandomNumericID(),t.mapping.fromJS(e)}return e}(),r=function(){function e(t){return null==t&&(t={}),this.UpdateData(t),this}return e.prototype.UpdateData=function(i){null==i.createdAt&&(i.createdAt=null),null==i.createdByUserId&&(i.createdByUserId=null),null==i.deleted&&(i.deleted=!1),null==i.deletedAt&&(i.deletedAt=null),null==i.deletedByUserId&&(i.deletedByUserId=null),null==i.description&&(i.description=""),null==i.entity&&(i.entity="project"),null==i.id&&(i.id=0),null==i.isPrivate&&(i.isPrivate=!1),null==i.name&&(i.name=""),null==i.options&&(i.options={choices:[]}),null==i.projectId&&(i.projectId=null),null==i.required&&(i.required=!1),null==i.type&&(i.type=null),null==i.updatedAt&&(i.updatedAt=null),null==i.updatedByUserId&&(i.updatedByUserId=null),null==i.visibilities&&(i.visibilities=[]),null==i.isUpdating&&(i.isUpdating=!1),null==i.isExpanded&&(i.isExpanded=!1),("function"==typeof this.isExpanded?this.isExpanded():void 0)&&(i.isExpanded=!0),t.mapping.fromJS(i,e.mapping,this),this.chevronIcon=t.pureComputed(function(t){return function(){return t.isExpanded()?"chevron-up-regular":"chevron-down-regular"}}(this))},e.prototype.Save=function(t){var e,i,r,o,s;return null==t&&(t={}),null==t.silent&&(t.silent=!1),this.isUpdating()?n.resolve():(s=this.validateField(),s.length?n.reject({errorType:"validation",message:s}):(this.isUpdating(!0),this.mode=0===this.id()?"add":"edit","add"===this.mode?(o=app.prefixApi("customfields.json","API_PREFIX_V3","API_PREFIX_V3"),e="post",r=app.tl("Custom Field created")):(o=app.prefixApi("customfields/"+this.id()+".json","API_PREFIX_V3","API_PREFIX_V3"),e="put",r=app.tl("Custom Field updated")),i=this.formatSaveData(),app.api[e](o,i).then(function(e){return function(i){if(!t.silent)return app.flash.Success(r),i.response.customfield,e.publishEvent(e.mode)}}(this)).finally(function(t){return function(e){return t.isUpdating(!1)}}(this))))},e.prototype.Delete=function(){var t,e;return this.isUpdating(!0),e=app.prefixApi("customfields/"+this.id()+".json","API_PREFIX_V3","API_PREFIX_V3"),t=function(t){return function(){return app.api.delete(e).then(function(){return app.flash.Success(app.tl("Custom Field deleted successfully.")),t.publishEvent("delete"),Lightbox.closeAll(),t.isUpdating(!1)})}}(this),this.GetInstanceCount().then(function(e){return function(i){var n;return n=e.getDeleteConfirmationText(i),app.modal.Show("confirm",{title:app.tl("Confirm Delete"),text:n,callback:function(i){return i.wasCancelled?void e.isUpdating(!1):t()}})}}(this))},e.prototype.Clone=function(){var i;return i=t.mapping.toJS(this),new e(i)},e.prototype.AddDropdownOption=function(t){return null==t&&(t={}),this.options.choices.push(new o(t))},e.prototype.GetInstanceCount=function(){var t;return t=app.prefixApi("customfields/"+this.id()+".json","API_PREFIX_V3","API_PREFIX_V3"),app.api.get(t,{getCount:!0}).then(function(t){return function(t){return t.response.count}}())},e.prototype.validateField=function(){var t,e,i,n,r;if(e=[],0===this.name().trim().length&&e.push(app.tl("You must give the field a name")),this.description().trim().length>255&&e.push(app.tl("The description can't be longer than [_s] characters long",255)),null==this.type()&&e.push(app.tl("You must choose a type")),app.customFieldsHelper.doesFieldTypeHaveOptions(this.type())&&this.options.choices().length<2&&e.push(app.tl("You must add at least two choices for this type")),app.customFieldsHelper.doesFieldTypeHaveOptions(this.type()))for(r=this.options.choices(),i=0,n=r.length;i<n;i++)if(t=r[i],0===t.value().trim().length){e.push(app.tl("You must give each option a name"));break}return e},e.prototype.formatSaveData=function(){var e,i,n,r,o;if(i={customField:{entity:this.entity(),name:this.name().trim(),description:this.description().trim(),type:this.type(),isPrivate:this.isPrivate(),required:this.required()}},app.customFieldsHelper.doesFieldTypeHaveOptions(this.type())){for(o=this.options.choices(),n=0,r=o.length;n<r;n++)e=o[n],e.value(e.value().trim());i.customField.options={choices:t.mapping.toJS(this.options.choices,{ignore:"uid"})}}return i},e.prototype.publishEvent=function(e){var i,n;return i=function(){switch(this.mode){case"add":return app.consts.ACTIONTYPE.ADDED;case"edit":return app.consts.ACTIONTYPE.UPDATED;case"delete":return app.consts.ACTIONTYPE.DELETED}}.call(this),n={itemId:this.id(),itemType:"customField",actionType:i,eventTime:new Date},t.postbox.publish("allTWEvents",n)},e.prototype.getDeleteConfirmationText=function(t){return 0===t?app.tl("Are you sure you want to delete this Custom Field?"):"project"===this.entity()?1===t?app.tl("Are you sure you want to delete this Custom Field? It's being used on [_s] project.",t):app.tl("Are you sure you want to delete this Custom Field? It's being used on [_s] projects.",t):1===t?app.tl("Are you sure you want to delete this Custom Field? It's currently attached to [_s] item.",t):app.tl("Are you sure you want to delete this Custom Field? It's currently attached to [_s] items.",t)},e}(),r.mapping={dateCreated:{create:function(e){return t.observable(moment(e.data))}},options:{create:function(e){var i,n,r,s,a;for(s=[],a=e.data.choices,n=0,r=a.length;n<r;n++)i=a[n],s.push(new o(i));return e.data.choices=t.observableArray(s),e.data}}},r}.apply(e,n))&&(t.exports=r)},1367:function(t,e,i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}};n=[i(14)],void 0!==(r=function(t){return function(){function t(t){this._getUserBadges=o(this._getUserBadges,this);var e,i,n,r,s;this.UpdateProperties(t),r={isResponsible:!1,isInCompanyAssignees:!1,isInTeamAssignees:!1,isFollowingChanges:!1,isInCompanyChangeFollowers:!1,isInTeamChangeFollowers:!1,isFollowingComments:!1,isInCompanyCommentFollowers:!1,isInTeamCommentFollowers:!1,isInNotifyDefaults:!1,isInPrivacy:!1,isInTeamPrivacy:!1,isInCompanyPrivacy:!1,isVisible:!0,isVisibleInAssignees:!0,isVisibleInPrivacy:!0,isVisibleInFollowers:!0,hasAccess:!1,isInCompanyAccess:!1,isInTeamAccess:!1,isReminded:!1,isInCompanyReminder:!1,isInTeamReminder:!1,shouldShowFollowerOptions:!1};for(e in r)s=r[e],null==t[e]&&(t[e]=s);t.isInNotifyDefaults&&(t.isFollowingComments=!0),t.shouldShowFollowerOptions=t.isFollowingChanges||t.isFollowingComments,t.isCurrentUser=t.id/1===app.loggedInUser.id(),n=Object.keys(r),i={observe:n},app.ko.mapping.fromJS(t,i,this),this.userBadges=this._getUserBadges(),this.isFollowingDynamically=ko.pureComputed(function(t){return function(){return!!(t.isInTeamChangeFollowers()||t.isInTeamCommentFollowers()||t.isInTeamAccess())||!!(t.isInCompanyChangeFollowers()||t.isInCompanyCommentFollowers()||t.isInCompanyAccess())}}(this)),this.followerStatus=ko.computed({read:function(t){return function(){return(t.isFollowingChanges()||t.isInCompanyChangeFollowers()||t.isInTeamChangeFollowers())&&(t.isFollowingComments()||t.isInCompanyCommentFollowers()||t.isInTeamCommentFollowers())?"all":t.isFollowingChanges()||t.isInCompanyChangeFollowers()||t.isInTeamChangeFollowers()?"changes":t.isFollowingComments()||t.isInCompanyCommentFollowers()||t.isInTeamCommentFollowers()?"comments":"none"}}(this),write:function(t){return function(e){switch(e){case"changes":t.isFollowingChanges(!0),t.isFollowingComments(!1);break;case"comments":t.isFollowingChanges(!1),t.isFollowingComments(!0);break;case"all":t.isFollowingChanges(!0),t.isFollowingComments(!0);break;default:t.isFollowingChanges(!1),t.isFollowingComments(!1)}}}(this),owner:this}),this.canFollowChanges=ko.pureComputed(function(t){return function(){return!(t.isInTeamChangeFollowers()||t.isInCompanyChangeFollowers())}}(this)),this.canFollowComments=ko.pureComputed(function(t){return function(){return!(t.isInTeamCommentFollowers()||t.isInCompanyCommentFollowers())}}(this))}return t.prototype.UpdateProperties=function(t){return t.id=parseInt(t.id,10),null==t.roleIds&&(t.roleIds=[]),null==t.companyId&&(t.companyId=0),null==t.firstName&&(t.firstName=""),null==t.lastName&&(t.lastName=""),null==t.title&&(t.title=""),t.firstName=t.firstName.toString(),t.lastName=t.lastName.toString(),t.name=t.firstName+" "+t.lastName,t.fullName=t.firstName+" "+t.lastName,t.shortName=t.firstName+" "+t.lastName.charAt(0).toUpperCase()+".",t.mentionName=""+t.firstName.toLowerCase().replace(/\s/g,"")+t.lastName.charAt(0).toLowerCase(),t.searchName=""+t.firstName+t.lastName,null==t.pickerItemType&&(t.pickerItemType="user"),null==t.defaultImageUrl&&(t.defaultImageUrl="./images/noPhoto2.png"),t.mentionType="person",t.mentionImg='<img class="h-mention__img" src="'+t.avatarUrl+'" onerror="this.src=\''+t.defaultImageUrl+"'\">",null==t.doesReceiveProjectEmails&&(t.doesReceiveProjectEmails=!1),null==t.isObserving&&(t.isObserving=!1),null==t.isAdministrator&&(t.isAdministrator=!1),null==t.isUnsubscribed&&(t.isUnsubscribed=!1),t},t.prototype._getUserBadges=function(){var t;return t=[],this.isAdministrator&&t.push({key:"administrator",label:app.tl("Administrator"),icon:"key-solid"}),this.isObserving&&t.push({key:"observer",label:app.tl("Observer"),icon:"shield-solid"}),"account"!==this.type&&("collaborator"===this.type?t.push({key:"collaborator",label:app.tl("Collaborator"),icon:"user-solid"}):"contact"===this.type&&t.push({key:"contact",label:app.tl("Contact"),icon:"user-solid"})),t},t}()}.apply(e,n))&&(t.exports=r)},1389:function(t,e,i){"use strict";function n(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function r(t){return t.replace(/"/g,"&quot;")}function o(t){if(!t)return"";var e=[];for(var i in t){var n=t[i]+"";e.push(i+'="'+r(n)+'"')}return e.join(" ")}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=new p(e);for(var i=c(t),s=[],a=0;a<i.length;a++){var l=i[a];if("nl"===l.type&&e.nl2br)s.push("<br>\n");else if(l.isLink&&e.check(l)){var u=e.resolve(l),d=u.formatted,h=u.formattedHref,f=u.tagName,m=u.className,g=u.target,y=u.attributes,v="<"+f+' href="'+r(h)+'"';m&&(v+=' class="'+r(m)+'"'),g&&(v+=' target="'+r(g)+'"'),y&&(v+=" "+o(y)),v+=">"+n(d)+"</"+f+">",s.push(v)}else s.push(n(l.toString()))}return s.join("")}e.__esModule=!0;var a=i(1390),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(a),c=l.tokenize,u=l.options,p=u.Options;if(!String.prototype.linkify)try{Object.defineProperty(String.prototype,"linkify",{set:function(){},get:function(){return function(t){return s(this,t)}}})}catch(t){String.prototype.linkify||(String.prototype.linkify=function(t){return s(this,t)})}e.default=s},1390:function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}e.__esModule=!0,e.tokenize=e.test=e.scanner=e.parser=e.options=e.inherits=e.find=void 0;var r=i(1176),o=i(1394),s=n(o),a=i(1392),l=n(a),c=i(1391),u=n(c);Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)});var p=function(t){return u.run(l.run(t))},d=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=p(t),n=[],r=0;r<i.length;r++){var o=i[r];!o.isLink||e&&o.type!==e||n.push(o.toObject())}return n},h=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=p(t);return 1===i.length&&i[0].isLink&&(!e||i[0].type===e)};e.find=d,e.inherits=r.inherits,e.options=s,e.parser=u,e.scanner=l,e.test=h,e.tokenize=p},1391:function(t,e,i){"use strict";e.__esModule=!0,e.start=e.run=e.TOKENS=e.State=void 0;var n=i(1258),r=i(1393),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(r),s=i(1210),a=function(t){return new n.TokenState(t)},l=a(),c=a(),u=a(),p=a(),d=a(),h=a(),f=a(),m=a(r.URL),g=a(),y=a(r.URL),v=a(r.URL),b=a(),w=a(),k=a(),x=a(),T=a(),C=a(r.URL),I=a(r.URL),_=a(r.URL),S=a(r.URL),A=a(),O=a(),P=a(),E=a(),M=a(),L=a(),D=a(r.EMAIL),j=a(),N=a(r.EMAIL),F=a(r.MAILTOEMAIL),R=a(),U=a(),z=a(),B=a(),H=a(r.NL);l.on(s.NL,H).on(s.PROTOCOL,c).on(s.MAILTO,u).on(s.SLASH,p),c.on(s.SLASH,p),p.on(s.SLASH,d),l.on(s.TLD,h).on(s.DOMAIN,h).on(s.LOCALHOST,m).on(s.NUM,h),d.on(s.TLD,v).on(s.DOMAIN,v).on(s.NUM,v).on(s.LOCALHOST,v),h.on(s.DOT,f),M.on(s.DOT,L),f.on(s.TLD,m).on(s.DOMAIN,h).on(s.NUM,h).on(s.LOCALHOST,h),L.on(s.TLD,D).on(s.DOMAIN,M).on(s.NUM,M).on(s.LOCALHOST,M),m.on(s.DOT,f),D.on(s.DOT,L),m.on(s.COLON,g).on(s.SLASH,v),g.on(s.NUM,y),y.on(s.SLASH,v),D.on(s.COLON,j),j.on(s.NUM,N);var $=[s.DOMAIN,s.AT,s.LOCALHOST,s.NUM,s.PLUS,s.POUND,s.PROTOCOL,s.SLASH,s.TLD,s.UNDERSCORE,s.SYM,s.AMPERSAND],Y=[s.COLON,s.DOT,s.QUERY,s.PUNCTUATION,s.CLOSEBRACE,s.CLOSEBRACKET,s.CLOSEANGLEBRACKET,s.CLOSEPAREN,s.OPENBRACE,s.OPENBRACKET,s.OPENANGLEBRACKET,s.OPENPAREN];v.on(s.OPENBRACE,w).on(s.OPENBRACKET,k).on(s.OPENANGLEBRACKET,x).on(s.OPENPAREN,T),b.on(s.OPENBRACE,w).on(s.OPENBRACKET,k).on(s.OPENANGLEBRACKET,x).on(s.OPENPAREN,T),w.on(s.CLOSEBRACE,v),k.on(s.CLOSEBRACKET,v),x.on(s.CLOSEANGLEBRACKET,v),T.on(s.CLOSEPAREN,v),C.on(s.CLOSEBRACE,v),I.on(s.CLOSEBRACKET,v),_.on(s.CLOSEANGLEBRACKET,v),S.on(s.CLOSEPAREN,v),A.on(s.CLOSEBRACE,v),O.on(s.CLOSEBRACKET,v),P.on(s.CLOSEANGLEBRACKET,v),E.on(s.CLOSEPAREN,v),w.on($,C),k.on($,I),x.on($,_),T.on($,S),w.on(Y,A),k.on(Y,O),x.on(Y,P),T.on(Y,E),C.on($,C),I.on($,I),_.on($,_),S.on($,S),C.on(Y,C),I.on(Y,I),_.on(Y,_),S.on(Y,S),A.on($,C),O.on($,I),P.on($,_),E.on($,S),A.on(Y,A),O.on(Y,O),P.on(Y,P),E.on(Y,E),v.on($,v),b.on($,v),v.on(Y,b),b.on(Y,b),u.on(s.TLD,F).on(s.DOMAIN,F).on(s.NUM,F).on(s.LOCALHOST,F),F.on($,F).on(Y,R),R.on($,F).on(Y,R);var V=[s.DOMAIN,s.NUM,s.PLUS,s.POUND,s.QUERY,s.UNDERSCORE,s.SYM,s.AMPERSAND,s.TLD];h.on(V,U).on(s.AT,z),m.on(V,U).on(s.AT,z),f.on(V,U),U.on(V,U).on(s.AT,z).on(s.DOT,B),B.on(V,U),z.on(s.TLD,M).on(s.DOMAIN,M).on(s.LOCALHOST,D);var G=function(t){for(var e=t.length,i=0,n=[],o=[];i<e;){for(var s=l,a=null,c=null,u=0,p=null,d=-1;i<e&&!(a=s.next(t[i]));)o.push(t[i++]);for(;i<e&&(c=a||s.next(t[i]));)a=null,s=c,s.accepts()?(d=0,p=s):d>=0&&d++,i++,u++;if(d<0)for(var h=i-u;h<i;h++)o.push(t[h]);else{o.length>0&&(n.push(new r.TEXT(o)),o=[]),i-=d,u-=d;var f=p.emit();n.push(new f(t.slice(i-u,i)))}}return o.length>0&&n.push(new r.TEXT(o)),n};e.State=n.TokenState,e.TOKENS=o,e.run=G,e.start=l},1392:function(t,e,i){"use strict";e.__esModule=!0,e.start=e.run=e.TOKENS=e.State=void 0;var n=i(1258),r=i(1210),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(r),s="aaa|aarp|abarth|abb|abbott|abbvie|abc|able|abogado|abudhabi|ac|academy|accenture|accountant|accountants|aco|active|actor|ad|adac|ads|adult|ae|aeg|aero|aetna|af|afamilycompany|afl|africa|ag|agakhan|agency|ai|aig|aigo|airbus|airforce|airtel|akdn|al|alfaromeo|alibaba|alipay|allfinanz|allstate|ally|alsace|alstom|am|americanexpress|americanfamily|amex|amfam|amica|amsterdam|analytics|android|anquan|anz|ao|aol|apartments|app|apple|aq|aquarelle|ar|arab|aramco|archi|army|arpa|art|arte|as|asda|asia|associates|at|athleta|attorney|au|auction|audi|audible|audio|auspost|author|auto|autos|avianca|aw|aws|ax|axa|az|azure|ba|baby|baidu|banamex|bananarepublic|band|bank|bar|barcelona|barclaycard|barclays|barefoot|bargains|baseball|basketball|bauhaus|bayern|bb|bbc|bbt|bbva|bcg|bcn|bd|be|beats|beauty|beer|bentley|berlin|best|bestbuy|bet|bf|bg|bh|bharti|bi|bible|bid|bike|bing|bingo|bio|biz|bj|black|blackfriday|blanco|blockbuster|blog|bloomberg|blue|bm|bms|bmw|bn|bnl|bnpparibas|bo|boats|boehringer|bofa|bom|bond|boo|book|booking|boots|bosch|bostik|boston|bot|boutique|box|br|bradesco|bridgestone|broadway|broker|brother|brussels|bs|bt|budapest|bugatti|build|builders|business|buy|buzz|bv|bw|by|bz|bzh|ca|cab|cafe|cal|call|calvinklein|cam|camera|camp|cancerresearch|canon|capetown|capital|capitalone|car|caravan|cards|care|career|careers|cars|cartier|casa|case|caseih|cash|casino|cat|catering|catholic|cba|cbn|cbre|cbs|cc|cd|ceb|center|ceo|cern|cf|cfa|cfd|cg|ch|chanel|channel|chase|chat|cheap|chintai|chloe|christmas|chrome|chrysler|church|ci|cipriani|circle|cisco|citadel|citi|citic|city|cityeats|ck|cl|claims|cleaning|click|clinic|clinique|clothing|cloud|club|clubmed|cm|cn|co|coach|codes|coffee|college|cologne|com|comcast|commbank|community|company|compare|computer|comsec|condos|construction|consulting|contact|contractors|cooking|cookingchannel|cool|coop|corsica|country|coupon|coupons|courses|cr|credit|creditcard|creditunion|cricket|crown|crs|cruise|cruises|csc|cu|cuisinella|cv|cw|cx|cy|cymru|cyou|cz|dabur|dad|dance|data|date|dating|datsun|day|dclk|dds|de|deal|dealer|deals|degree|delivery|dell|deloitte|delta|democrat|dental|dentist|desi|design|dev|dhl|diamonds|diet|digital|direct|directory|discount|discover|dish|diy|dj|dk|dm|dnp|do|docs|doctor|dodge|dog|doha|domains|dot|download|drive|dtv|dubai|duck|dunlop|duns|dupont|durban|dvag|dvr|dz|earth|eat|ec|eco|edeka|edu|education|ee|eg|email|emerck|energy|engineer|engineering|enterprises|epost|epson|equipment|er|ericsson|erni|es|esq|estate|esurance|et|etisalat|eu|eurovision|eus|events|everbank|exchange|expert|exposed|express|extraspace|fage|fail|fairwinds|faith|family|fan|fans|farm|farmers|fashion|fast|fedex|feedback|ferrari|ferrero|fi|fiat|fidelity|fido|film|final|finance|financial|fire|firestone|firmdale|fish|fishing|fit|fitness|fj|fk|flickr|flights|flir|florist|flowers|fly|fm|fo|foo|food|foodnetwork|football|ford|forex|forsale|forum|foundation|fox|fr|free|fresenius|frl|frogans|frontdoor|frontier|ftr|fujitsu|fujixerox|fun|fund|furniture|futbol|fyi|ga|gal|gallery|gallo|gallup|game|games|gap|garden|gb|gbiz|gd|gdn|ge|gea|gent|genting|george|gf|gg|ggee|gh|gi|gift|gifts|gives|giving|gl|glade|glass|gle|global|globo|gm|gmail|gmbh|gmo|gmx|gn|godaddy|gold|goldpoint|golf|goo|goodhands|goodyear|goog|google|gop|got|gov|gp|gq|gr|grainger|graphics|gratis|green|gripe|grocery|group|gs|gt|gu|guardian|gucci|guge|guide|guitars|guru|gw|gy|hair|hamburg|hangout|haus|hbo|hdfc|hdfcbank|health|healthcare|help|helsinki|here|hermes|hgtv|hiphop|hisamitsu|hitachi|hiv|hk|hkt|hm|hn|hockey|holdings|holiday|homedepot|homegoods|homes|homesense|honda|honeywell|horse|hospital|host|hosting|hot|hoteles|hotels|hotmail|house|how|hr|hsbc|ht|htc|hu|hughes|hyatt|hyundai|ibm|icbc|ice|icu|id|ie|ieee|ifm|ikano|il|im|imamat|imdb|immo|immobilien|in|industries|infiniti|info|ing|ink|institute|insurance|insure|int|intel|international|intuit|investments|io|ipiranga|iq|ir|irish|is|iselect|ismaili|ist|istanbul|it|itau|itv|iveco|iwc|jaguar|java|jcb|jcp|je|jeep|jetzt|jewelry|jio|jlc|jll|jm|jmp|jnj|jo|jobs|joburg|jot|joy|jp|jpmorgan|jprs|juegos|juniper|kaufen|kddi|ke|kerryhotels|kerrylogistics|kerryproperties|kfh|kg|kh|ki|kia|kim|kinder|kindle|kitchen|kiwi|km|kn|koeln|komatsu|kosher|kp|kpmg|kpn|kr|krd|kred|kuokgroup|kw|ky|kyoto|kz|la|lacaixa|ladbrokes|lamborghini|lamer|lancaster|lancia|lancome|land|landrover|lanxess|lasalle|lat|latino|latrobe|law|lawyer|lb|lc|lds|lease|leclerc|lefrak|legal|lego|lexus|lgbt|li|liaison|lidl|life|lifeinsurance|lifestyle|lighting|like|lilly|limited|limo|lincoln|linde|link|lipsy|live|living|lixil|lk|loan|loans|locker|locus|loft|lol|london|lotte|lotto|love|lpl|lplfinancial|lr|ls|lt|ltd|ltda|lu|lundbeck|lupin|luxe|luxury|lv|ly|ma|macys|madrid|maif|maison|makeup|man|management|mango|map|market|marketing|markets|marriott|marshalls|maserati|mattel|mba|mc|mckinsey|md|me|med|media|meet|melbourne|meme|memorial|men|menu|meo|merckmsd|metlife|mg|mh|miami|microsoft|mil|mini|mint|mit|mitsubishi|mk|ml|mlb|mls|mm|mma|mn|mo|mobi|mobile|mobily|moda|moe|moi|mom|monash|money|monster|mopar|mormon|mortgage|moscow|moto|motorcycles|mov|movie|movistar|mp|mq|mr|ms|msd|mt|mtn|mtr|mu|museum|mutual|mv|mw|mx|my|mz|na|nab|nadex|nagoya|name|nationwide|natura|navy|nba|nc|ne|nec|net|netbank|netflix|network|neustar|new|newholland|news|next|nextdirect|nexus|nf|nfl|ng|ngo|nhk|ni|nico|nike|nikon|ninja|nissan|nissay|nl|no|nokia|northwesternmutual|norton|now|nowruz|nowtv|np|nr|nra|nrw|ntt|nu|nyc|nz|obi|observer|off|office|okinawa|olayan|olayangroup|oldnavy|ollo|om|omega|one|ong|onl|online|onyourside|ooo|open|oracle|orange|org|organic|origins|osaka|otsuka|ott|ovh|pa|page|panasonic|panerai|paris|pars|partners|parts|party|passagens|pay|pccw|pe|pet|pf|pfizer|pg|ph|pharmacy|phd|philips|phone|photo|photography|photos|physio|piaget|pics|pictet|pictures|pid|pin|ping|pink|pioneer|pizza|pk|pl|place|play|playstation|plumbing|plus|pm|pn|pnc|pohl|poker|politie|porn|post|pr|pramerica|praxi|press|prime|pro|prod|productions|prof|progressive|promo|properties|property|protection|pru|prudential|ps|pt|pub|pw|pwc|py|qa|qpon|quebec|quest|qvc|racing|radio|raid|re|read|realestate|realtor|realty|recipes|red|redstone|redumbrella|rehab|reise|reisen|reit|reliance|ren|rent|rentals|repair|report|republican|rest|restaurant|review|reviews|rexroth|rich|richardli|ricoh|rightathome|ril|rio|rip|rmit|ro|rocher|rocks|rodeo|rogers|room|rs|rsvp|ru|rugby|ruhr|run|rw|rwe|ryukyu|sa|saarland|safe|safety|sakura|sale|salon|samsclub|samsung|sandvik|sandvikcoromant|sanofi|sap|sapo|sarl|sas|save|saxo|sb|sbi|sbs|sc|sca|scb|schaeffler|schmidt|scholarships|school|schule|schwarz|science|scjohnson|scor|scot|sd|se|search|seat|secure|security|seek|select|sener|services|ses|seven|sew|sex|sexy|sfr|sg|sh|shangrila|sharp|shaw|shell|shia|shiksha|shoes|shop|shopping|shouji|show|showtime|shriram|si|silk|sina|singles|site|sj|sk|ski|skin|sky|skype|sl|sling|sm|smart|smile|sn|sncf|so|soccer|social|softbank|software|sohu|solar|solutions|song|sony|soy|space|spiegel|spot|spreadbetting|sr|srl|srt|st|stada|staples|star|starhub|statebank|statefarm|statoil|stc|stcgroup|stockholm|storage|store|stream|studio|study|style|su|sucks|supplies|supply|support|surf|surgery|suzuki|sv|swatch|swiftcover|swiss|sx|sy|sydney|symantec|systems|sz|tab|taipei|talk|taobao|target|tatamotors|tatar|tattoo|tax|taxi|tc|tci|td|tdk|team|tech|technology|tel|telecity|telefonica|temasek|tennis|teva|tf|tg|th|thd|theater|theatre|tiaa|tickets|tienda|tiffany|tips|tires|tirol|tj|tjmaxx|tjx|tk|tkmaxx|tl|tm|tmall|tn|to|today|tokyo|tools|top|toray|toshiba|total|tours|town|toyota|toys|tr|trade|trading|training|travel|travelchannel|travelers|travelersinsurance|trust|trv|tt|tube|tui|tunes|tushu|tv|tvs|tw|tz|ua|ubank|ubs|uconnect|ug|uk|unicom|university|uno|uol|ups|us|uy|uz|va|vacations|vana|vanguard|vc|ve|vegas|ventures|verisign|versicherung|vet|vg|vi|viajes|video|vig|viking|villas|vin|vip|virgin|visa|vision|vista|vistaprint|viva|vivo|vlaanderen|vn|vodka|volkswagen|volvo|vote|voting|voto|voyage|vu|vuelos|wales|walmart|walter|wang|wanggou|warman|watch|watches|weather|weatherchannel|webcam|weber|website|wed|wedding|weibo|weir|wf|whoswho|wien|wiki|williamhill|win|windows|wine|winners|wme|wolterskluwer|woodside|work|works|world|wow|ws|wtc|wtf|xbox|xerox|xfinity|xihuan|xin|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--2scrj9c|xn--30rr7y|xn--3bst00m|xn--3ds443g|xn--3e0b707e|xn--3hcrj9c|xn--3oq18vl8pn36a|xn--3pxu8k|xn--42c2d9a|xn--45br5cyl|xn--45brj9c|xn--45q11c|xn--4gbrim|xn--54b7fta0cc|xn--55qw42g|xn--55qx5d|xn--5su34j936bgsg|xn--5tzm5g|xn--6frz82g|xn--6qq986b3xl|xn--80adxhks|xn--80ao21a|xn--80aqecdr1a|xn--80asehdb|xn--80aswg|xn--8y0a063a|xn--90a3ac|xn--90ae|xn--90ais|xn--9dbq2a|xn--9et52u|xn--9krt00a|xn--b4w605ferd|xn--bck1b9a5dre4c|xn--c1avg|xn--c2br7g|xn--cck2b3b|xn--cg4bki|xn--clchc0ea0b2g2a9gcd|xn--czr694b|xn--czrs0t|xn--czru2d|xn--d1acj3b|xn--d1alf|xn--e1a4c|xn--eckvdtc9d|xn--efvy88h|xn--estv75g|xn--fct429k|xn--fhbei|xn--fiq228c5hs|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--fjq720a|xn--flw351e|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--fzys8d69uvgm|xn--g2xx48c|xn--gckr3f0f|xn--gecrj9c|xn--gk3at1e|xn--h2breg3eve|xn--h2brj9c|xn--h2brj9c8c|xn--hxt814e|xn--i1b6b1a6a2e|xn--imr513n|xn--io0a7i|xn--j1aef|xn--j1amh|xn--j6w193g|xn--jlq61u9w7b|xn--jvr189m|xn--kcrx77d1x4a|xn--kprw13d|xn--kpry57d|xn--kpu716f|xn--kput3i|xn--l1acc|xn--lgbbat1ad8j|xn--mgb9awbf|xn--mgba3a3ejt|xn--mgba3a4f16a|xn--mgba7c0bbn0a|xn--mgbaakc7dvf|xn--mgbaam7a8h|xn--mgbab2bd|xn--mgbai9azgqp6j|xn--mgbayh7gpa|xn--mgbb9fbpob|xn--mgbbh1a|xn--mgbbh1a71e|xn--mgbc0a9azcg|xn--mgbca7dzdo|xn--mgberp4a5d4ar|xn--mgbgu82a|xn--mgbi4ecexp|xn--mgbpl2fh|xn--mgbt3dhd|xn--mgbtx2b|xn--mgbx4cd0ab|xn--mix891f|xn--mk1bu44c|xn--mxtq1m|xn--ngbc5azd|xn--ngbe9e0a|xn--ngbrx|xn--node|xn--nqv7f|xn--nqv7fs00ema|xn--nyqy26a|xn--o3cw4h|xn--ogbpf8fl|xn--p1acf|xn--p1ai|xn--pbt977c|xn--pgbs0dh|xn--pssy2u|xn--q9jyb4c|xn--qcka1pmc|xn--qxam|xn--rhqv96g|xn--rovu88b|xn--rvc1e0am3e|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--tckwe|xn--tiq49xqyj|xn--unup4y|xn--vermgensberater-ctb|xn--vermgensberatung-pwb|xn--vhquv|xn--vuq861b|xn--w4r85el8fhu5dnra|xn--w4rs40l|xn--wgbh1c|xn--wgbl6a|xn--xhq521b|xn--xkc2al3hye2a|xn--xkc2dl3a5ee0h|xn--y9a3aq|xn--yfro4i67o|xn--ygbi2ammx|xn--zfr164b|xperia|xxx|xyz|yachts|yahoo|yamaxun|yandex|ye|yodobashi|yoga|yokohama|you|youtube|yt|yun|za|zappos|zara|zero|zip|zippo|zm|zone|zuerich|zw".split("|"),a="0123456789".split(""),l="0123456789abcdefghijklmnopqrstuvwxyz".split(""),c=[" ","\f","\r","\t","\v","\xa0","\u1680","\u180e"],u=[],p=function(t){return new n.CharacterState(t)},d=p(),h=p(r.NUM),f=p(r.DOMAIN),m=p(),g=p(r.WS);d.on("@",p(r.AT)).on(".",p(r.DOT)).on("+",p(r.PLUS)).on("#",p(r.POUND)).on("?",p(r.QUERY)).on("/",p(r.SLASH)).on("_",p(r.UNDERSCORE)).on(":",p(r.COLON)).on("{",p(r.OPENBRACE)).on("[",p(r.OPENBRACKET)).on("<",p(r.OPENANGLEBRACKET)).on("(",p(r.OPENPAREN)).on("}",p(r.CLOSEBRACE)).on("]",p(r.CLOSEBRACKET)).on(">",p(r.CLOSEANGLEBRACKET)).on(")",p(r.CLOSEPAREN)).on("&",p(r.AMPERSAND)).on([",",";","!",'"',"'"],p(r.PUNCTUATION)),d.on("\n",p(r.NL)).on(c,g),g.on(c,g);for(var y=0;y<s.length;y++){var v=(0,n.stateify)(s[y],d,r.TLD,r.DOMAIN);u.push.apply(u,v)}var b=(0,n.stateify)("file",d,r.DOMAIN,r.DOMAIN),w=(0,n.stateify)("ftp",d,r.DOMAIN,r.DOMAIN),k=(0,n.stateify)("http",d,r.DOMAIN,r.DOMAIN),x=(0,n.stateify)("mailto",d,r.DOMAIN,r.DOMAIN);u.push.apply(u,b),u.push.apply(u,w),u.push.apply(u,k),u.push.apply(u,x);var T=b.pop(),C=w.pop(),I=k.pop(),_=x.pop(),S=p(r.DOMAIN),A=p(r.PROTOCOL),O=p(r.MAILTO);C.on("s",S).on(":",A),I.on("s",S).on(":",A),u.push(S),T.on(":",A),S.on(":",A),_.on(":",O);var P=(0,n.stateify)("localhost",d,r.LOCALHOST,r.DOMAIN);u.push.apply(u,P),d.on(a,h),h.on("-",m).on(a,h).on(l,f),f.on("-",m).on(l,f);for(var E=0;E<u.length;E++)u[E].on("-",m).on(l,f);m.on("-",m).on(a,f).on(l,f),d.defaultTransition=p(r.SYM);var M=function(t){for(var e=t.replace(/[A-Z]/g,function(t){return t.toLowerCase()}),i=t.length,n=[],r=0;r<i;){for(var o=d,s=null,a=0,l=null,c=-1;r<i&&(s=o.next(e[r]));)o=s,o.accepts()?(c=0,l=o):c>=0&&c++,a++,r++;if(!(c<0)){r-=c,a-=c;var u=l.emit();n.push(new u(t.substr(r-a,a)))}}return n},L=d;e.State=n.CharacterState,e.TOKENS=o,e.run=M,e.start=L},1393:function(t,e,i){"use strict";function n(t){return t instanceof s.DOMAIN||t instanceof s.TLD}e.__esModule=!0,e.URL=e.TEXT=e.NL=e.EMAIL=e.MAILTOEMAIL=e.Base=void 0;var r=i(1259),o=i(1176),s=i(1210),a=(0,r.createTokenClass)();a.prototype={type:"token",isLink:!1,toString:function(){for(var t=[],e=0;e<this.v.length;e++)t.push(this.v[e].toString());return t.join("")},toHref:function(){return this.toString()},toObject:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http";return{type:this.type,value:this.toString(),href:this.toHref(t)}}};var l=(0,o.inherits)(a,(0,r.createTokenClass)(),{type:"email",isLink:!0}),c=(0,o.inherits)(a,(0,r.createTokenClass)(),{type:"email",isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),u=(0,o.inherits)(a,(0,r.createTokenClass)(),{type:"text"}),p=(0,o.inherits)(a,(0,r.createTokenClass)(),{type:"nl"}),d=(0,o.inherits)(a,(0,r.createTokenClass)(),{type:"url",isLink:!0,toHref:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http",e=!1,i=!1,r=this.v,o=[],a=0;r[a]instanceof s.PROTOCOL;)e=!0,o.push(r[a].toString().toLowerCase()),a++;for(;r[a]instanceof s.SLASH;)i=!0,o.push(r[a].toString()),a++;for(;n(r[a]);)o.push(r[a].toString().toLowerCase()),a++;for(;a<r.length;a++)o.push(r[a].toString());return o=o.join(""),e||i||(o=t+"://"+o),o},hasProtocol:function(){return this.v[0]instanceof s.PROTOCOL}});e.Base=a,e.MAILTOEMAIL=l,e.EMAIL=c,e.NL=p,e.TEXT=u,e.URL=d},1394:function(t,e,i){"use strict";function n(t){t=t||{},this.defaultProtocol=t.hasOwnProperty("defaultProtocol")?t.defaultProtocol:l.defaultProtocol,this.events=t.hasOwnProperty("events")?t.events:l.events,this.format=t.hasOwnProperty("format")?t.format:l.format,this.formatHref=t.hasOwnProperty("formatHref")?t.formatHref:l.formatHref,this.nl2br=t.hasOwnProperty("nl2br")?t.nl2br:l.nl2br,this.tagName=t.hasOwnProperty("tagName")?t.tagName:l.tagName,this.target=t.hasOwnProperty("target")?t.target:l.target,this.validate=t.hasOwnProperty("validate")?t.validate:l.validate,this.ignoreTags=[],this.attributes=t.attributes||t.linkAttributes||l.attributes,this.className=t.hasOwnProperty("className")?t.className:t.linkClass||l.className;for(var e=t.hasOwnProperty("ignoreTags")?t.ignoreTags:l.ignoreTags,i=0;i<e.length;i++)this.ignoreTags.push(e[i].toUpperCase())}function r(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return!0;return!1}function o(t){return t}function s(t,e){return"url"===e?"_blank":null}e.__esModule=!0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l={defaultProtocol:"http",events:null,format:o,formatHref:o,nl2br:!1,tagName:"a",target:s,validate:!0,ignoreTags:[],attributes:null,className:"linkified"};e.defaults=l,e.Options=n,e.contains=r,n.prototype={resolve:function(t){var e=t.toHref(this.defaultProtocol);return{formatted:this.get("format",t.toString(),t),formattedHref:this.get("formatHref",e,t),tagName:this.get("tagName",e,t),className:this.get("className",e,t),target:this.get("target",e,t),events:this.getObject("events",e,t),attributes:this.getObject("attributes",e,t)}},check:function(t){return this.get("validate",t.toString(),t)},get:function(t,e,i){var n=void 0,r=this[t];if(!r)return r;switch(void 0===r?"undefined":a(r)){case"function":return r(e,i.type);case"object":return n=r.hasOwnProperty(i.type)?r[i.type]:l[t],"function"==typeof n?n(e,i.type):n}return r},getObject:function(t,e,i){var n=this[t];return"function"==typeof n?n(e,i.type):n}}},1697:function(t,e,i){var n,r;!function(o,s){n=[i(245)],void 0!==(r=function(t){return s(t)}.apply(e,n))&&(t.exports=r)}(0,function(t){var e,i;i={ESC:27,TAB:9,ENTER:13,CTRL:17,A:65,P:80,N:78,LEFT:37,UP:38,RIGHT:39,DOWN:40,BACKSPACE:8,SPACE:32},e={beforeSave:function(t){return r.arrayToDefaultHash(t)},matcher:function(t,e,i,n){var r,o,s,a,l;return e=e.replace(/\u00a0/g," "),t=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),i&&(t="(?:^|\\s)"+t),r=decodeURI("%C3%80"),o=decodeURI("%C3%BF"),l=n?" ":"",a=new RegExp(t+"([A-Za-z"+r+"-"+o+"0-9_"+l+"'.+-]*)$|"+t+"([^\\x00-\\xff]*)$","gi"),s=a.exec(e),s?s[2]||s[1]:null},filter:function(t,e,i){var n,r,o,s;for(n=[],r=0,s=e.length;r<s;r++)o=e[r],~new String(o[i]).toLowerCase().indexOf(t.toLowerCase())&&n.push(o);return n},remoteFilter:null,sorter:function(t,e,i){var n,r,o,s;if(!t)return e;for(n=[],r=0,s=e.length;r<s;r++)o=e[r],o.atwho_order=new String(o[i]).toLowerCase().indexOf(t.toLowerCase()),o.atwho_order>-1&&n.push(o);return n.sort(function(t,e){return t.atwho_order-e.atwho_order})},tplEval:function(t,e){var i;i=t;try{return"string"!=typeof t&&(i=t(e)),i.replace(/\$\{([^\}]*)\}/g,function(t,i,n){return e[i]})}catch(t){return t,""}},highlighter:function(t,e){var i;return e?(i=new RegExp(">\\s*([^<]*?)("+e.replace("+","\\+")+")([^<]*)\\s*<","ig"),t.replace(i,function(t,e,i,n){return"> "+e+"<strong>"+i+"</strong>"+n+" <"})):t},beforeInsert:function(t,e,i){return t},beforeReposition:function(t){return t},afterMatchFailed:function(t,e){}};var n;n=function(){function e(e){this.currentFlag=null,this.controllers={},this.aliasMaps={},this.$inputor=t(e),this.setupRootElement(),this.listen()}return e.prototype.createContainer=function(e){var i;return null!=(i=this.$el)&&i.remove(),t(e.body).append(this.$el=t("<div class='atwho-container'></div>"))},e.prototype.setupRootElement=function(e,i){var n;if(null==i&&(i=!1),e)this.window=e.contentWindow,this.document=e.contentDocument||this.window.document,this.iframe=e;else{this.document=this.$inputor[0].ownerDocument,this.window=this.document.defaultView||this.document.parentWindow;try{this.iframe=this.window.frameElement}catch(e){if(n=e,this.iframe=null,t.fn.atwho.debug)throw new Error("iframe auto-discovery is failed.\nPlease use `setIframe` to set the target iframe manually.\n"+n)}}return this.createContainer((this.iframeAsRoot=i)?this.document:document)},e.prototype.controller=function(t){var e,i,n,r;if(this.aliasMaps[t])i=this.controllers[this.aliasMaps[t]];else{r=this.controllers;for(n in r)if(e=r[n],n===t){i=e;break}}return i||this.controllers[this.currentFlag]},e.prototype.setContextFor=function(t){return this.currentFlag=t,this},e.prototype.reg=function(t,e){var i,n;return n=(i=this.controllers)[t]||(i[t]=this.$inputor.is("[contentEditable]")?new c(this,t):new s(this,t)),e.alias&&(this.aliasMaps[e.alias]=t),n.init(e),this},e.prototype.listen=function(){return this.$inputor.on("compositionstart",function(t){return function(e){var i;return null!=(i=t.controller())&&i.view.hide(),t.isComposing=!0,null}}(this)).on("compositionend",function(t){return function(e){return t.isComposing=!1,setTimeout(function(){return t.dispatch(e)}),null}}(this)).on("keyup.atwhoInner",function(t){return function(e){return t.onKeyup(e)}}(this)).on("keydown.atwhoInner",function(t){return function(e){return t.onKeydown(e)}}(this)).on("blur.atwhoInner",function(t){return function(e){var i;if(i=t.controller())return i.expectedQueryCBId=null,i.view.hide(e,i.getOpt("displayTimeout"))}}(this)).on("click.atwhoInner",function(t){return function(e){return t.dispatch(e)}}(this)).on("scroll.atwhoInner",function(t){return function(){var e;return e=t.$inputor.scrollTop(),function(i){var n,r;return n=i.target.scrollTop,e!==n&&null!=(r=t.controller())&&r.view.hide(i),e=n,!0}}}(this)())},e.prototype.shutdown=function(){var t,e,i;i=this.controllers;for(t in i)e=i[t],e.destroy(),delete this.controllers[t];return this.$inputor.off(".atwhoInner"),this.$el.remove()},e.prototype.dispatch=function(t){var e,i,n,r;n=this.controllers,r=[];for(e in n)i=n[e],r.push(i.lookUp(t));return r},e.prototype.onKeyup=function(e){var n;switch(e.keyCode){case i.ESC:e.preventDefault(),null!=(n=this.controller())&&n.view.hide();break;case i.DOWN:case i.UP:case i.CTRL:case i.ENTER:t.noop();break;case i.P:case i.N:e.ctrlKey||this.dispatch(e);break;default:this.dispatch(e)}},e.prototype.onKeydown=function(e){var n,r;if((r=null!=(n=this.controller())?n.view:void 0)&&r.visible())switch(e.keyCode){case i.ESC:e.preventDefault(),r.hide(e);break;case i.UP:e.preventDefault(),r.prev();break;case i.DOWN:e.preventDefault(),r.next();break;case i.P:if(!e.ctrlKey)return;e.preventDefault(),r.prev();break;case i.N:if(!e.ctrlKey)return;e.preventDefault(),r.next();break;case i.TAB:case i.ENTER:case i.SPACE:if(!r.visible())return;if(!this.controller().getOpt("spaceSelectsMatch")&&e.keyCode===i.SPACE)return;if(!this.controller().getOpt("tabSelectsMatch")&&e.keyCode===i.TAB)return;r.highlighted()?(e.preventDefault(),r.choose(e)):r.hide(e);break;default:t.noop()}},e}();var r,o=[].slice;r=function(){function i(e,i){this.app=e,this.at=i,this.$inputor=this.app.$inputor,this.id=this.$inputor[0].id||this.uid(),this.expectedQueryCBId=null,this.setting=null,this.query=null,this.pos=0,this.range=null,0===(this.$el=t("#atwho-ground-"+this.id,this.app.$el)).length&&this.app.$el.append(this.$el=t("<div id='atwho-ground-"+this.id+"'></div>")),this.model=new u(this),this.view=new p(this)}return i.prototype.uid=function(){return(Math.random().toString(16)+"000000000").substr(2,8)+(new Date).getTime()},i.prototype.init=function(e){return this.setting=t.extend({},this.setting||t.fn.atwho.default,e),this.view.init(),this.model.reload(this.setting.data)},i.prototype.destroy=function(){return this.trigger("beforeDestroy"),this.model.destroy(),this.view.destroy(),this.$el.remove()},i.prototype.callDefault=function(){var i,n,r;r=arguments[0],i=2<=arguments.length?o.call(arguments,1):[];try{return e[r].apply(this,i)}catch(e){return n=e,t.error(n+" Or maybe At.js doesn't have function "+r)}},i.prototype.trigger=function(t,e){var i,n;return null==e&&(e=[]),e.push(this),i=this.getOpt("alias"),n=i?t+"-"+i+".atwho":t+".atwho",this.$inputor.trigger(n,e)},i.prototype.callbacks=function(t){return this.getOpt("callbacks")[t]||e[t]},i.prototype.getOpt=function(t,e){try{return this.setting[t]}catch(t){return t,null}},i.prototype.insertContentFor=function(e){var i,n;return n=this.getOpt("insertTpl"),i=t.extend({},e.data("item-data"),{"atwho-at":this.at}),this.callbacks("tplEval").call(this,n,i,"onInsert")},i.prototype.renderView=function(t){var e;return e=this.getOpt("searchKey"),t=this.callbacks("sorter").call(this,this.query.text,t.slice(0,1001),e),this.view.render(t.slice(0,this.getOpt("limit")))},i.arrayToDefaultHash=function(e){var i,n,r,o;if(!t.isArray(e))return e;for(o=[],i=0,r=e.length;i<r;i++)n=e[i],t.isPlainObject(n)?o.push(n):o.push({name:n});return o},i.prototype.lookUp=function(t){var e,i;if((!t||"click"!==t.type||this.getOpt("lookUpOnClick"))&&(!this.getOpt("suspendOnComposing")||!this.app.isComposing))return(e=this.catchQuery(t))?(this.app.setContextFor(this.at),(i=this.getOpt("delay"))?this._delayLookUp(e,i):this._lookUp(e),e):(this.expectedQueryCBId=null,e)},i.prototype._delayLookUp=function(t,e){var i,n;return i=Date.now?Date.now():(new Date).getTime(),this.previousCallTime||(this.previousCallTime=i),n=e-(i-this.previousCallTime),0<n&&n<e?(this.previousCallTime=i,this._stopDelayedCall(),this.delayedCallTimeout=setTimeout(function(e){return function(){return e.previousCallTime=0,e.delayedCallTimeout=null,e._lookUp(t)}}(this),e)):(this._stopDelayedCall(),this.previousCallTime!==i&&(this.previousCallTime=0),this._lookUp(t))},i.prototype._stopDelayedCall=function(){if(this.delayedCallTimeout)return clearTimeout(this.delayedCallTimeout),this.delayedCallTimeout=null},i.prototype._generateQueryCBId=function(){return{}},i.prototype._lookUp=function(e){var i;return i=function(t,e){if(t===this.expectedQueryCBId)return e&&e.length>0?this.renderView(this.constructor.arrayToDefaultHash(e)):this.view.hide()},this.expectedQueryCBId=this._generateQueryCBId(),this.model.query(e.text,t.proxy(i,this,this.expectedQueryCBId))},i}();var s,a=function(t,e){function i(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},l={}.hasOwnProperty;s=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return a(i,e),i.prototype.catchQuery=function(){var t,e,i,n,r,o,s;if(e=this.$inputor.val(),t=this.$inputor.caret("pos",{iframe:this.app.iframe}),s=e.slice(0,t),r=this.callbacks("matcher").call(this,this.at,s,this.getOpt("startWithSpace"),this.getOpt("acceptSpaceBar")),!((n="string"==typeof r)&&r.length<this.getOpt("minLen",0)))return n&&r.length<=this.getOpt("maxLen",20)?(o=t-r.length,i=o+r.length,this.pos=o,r={text:r,headPos:o,endPos:i},this.trigger("matched",[this.at,r.text])):(r=null,this.view.hide()),this.query=r},i.prototype.rect=function(){var e,i,n;if(e=this.$inputor.caret("offset",this.pos-1,{iframe:this.app.iframe}))return this.app.iframe&&!this.app.iframeAsRoot&&(i=t(this.app.iframe).offset(),e.left+=i.left,e.top+=i.top),n=this.app.document.selection?0:2,{left:e.left,top:e.top,bottom:e.top+e.height+n}},i.prototype.insert=function(t,e){var i,n,r,o,s;return i=this.$inputor,n=i.val(),r=n.slice(0,Math.max(this.query.headPos-this.at.length,0)),o=""===(o=this.getOpt("suffix"))?o:o||" ",t+=o,s=""+r+t+n.slice(this.query.endPos||0),i.val(s),i.caret("pos",r.length+t.length,{iframe:this.app.iframe}),i.is(":focus")||i.focus(),i.change()},i}(r);var c,a=function(t,e){function i(){this.constructor=t}for(var n in e)l.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},l={}.hasOwnProperty;c=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,e),n.prototype._getRange=function(){var t;if(null!==(t=this.app.window.getSelection())&&t.rangeCount>0)return t.getRangeAt(0)},n.prototype._setRange=function(e,i,n){if(null==n&&(n=this._getRange()),n&&i)return i=t(i)[0],"after"===e?(n.setEndAfter(i),n.setStartAfter(i)):(n.setEndBefore(i),n.setStartBefore(i)),n.collapse(!1),this._clearRange(n)},n.prototype._clearRange=function(t){var e;if(null==t&&(t=this._getRange()),e=this.app.window.getSelection(),null==this.ctrl_a_pressed)return e.removeAllRanges(),e.addRange(t)},n.prototype._movingEvent=function(t){var e;return"click"===t.type||(e=t.which)===i.RIGHT||e===i.LEFT||e===i.UP||e===i.DOWN},n.prototype._unwrap=function(e){var i;return e=t(e).unwrap().get(0),(i=e.nextSibling)&&i.nodeValue&&(e.nodeValue+=i.nodeValue,t(i).remove()),e},n.prototype._removeZeroNodes=function(t){return[].forEach.call(t,function(t){return function(t){if(1!==t.nodeType&&!t.length)return t.remove()}}())},n.prototype.catchQuery=function(e){var n,r,o,s,a,l,c,u,p,d,h,f,m;if(c=this.$inputor.hasClass("mce-content-body"),c&&this.$inputor.children().length&&this._removeZeroNodes(this.$inputor.children().first()[0].childNodes),(m=this._getRange())&&m.collapsed){if(void 0==e&&(e=new KeyboardEvent("keydown",{bubbles:!1,cancelable:!0,shiftKey:!1,keyCode:i.RIGHT})),e.which===i.ENTER)return(r=t(m.startContainer).closest(".atwho-query")).contents().unwrap(),r.is(":empty")&&r.remove(),(r=t(".atwho-query",this.app.document)).text(r.text()).contents().last().unwrap(),void this._clearRange();if(/firefox/i.test(navigator.userAgent)||c){if(t(m.startContainer).is(this.$inputor))return void this._clearRange();e.which===i.BACKSPACE&&m.startContainer.nodeType===document.ELEMENT_NODE&&(d=m.startOffset-1)>=0?(o=m.cloneRange(),o.setStart(m.startContainer,d),t(o.cloneContents()).contents().last().is(".atwho-inserted")&&(a=t(m.startContainer).contents().get(d),this._setRange("after",t(a).contents().last()))):e.which===i.LEFT&&m.startContainer.nodeType===document.TEXT_NODE&&(n=t(m.startContainer.previousSibling),n.is(".atwho-inserted")&&0===m.startOffset&&this._setRange("after",n.contents().last()))}if(t(m.startContainer).closest(".atwho-inserted").addClass("atwho-query").siblings().removeClass("atwho-query"),(r=t(".atwho-query",this.app.document)).length>0&&r.is(":empty")&&0===r.text().length&&r.remove(),this._movingEvent(e)||r.removeClass("atwho-inserted"),r.length>0)switch(e.which){case i.LEFT:return this._setRange("before",r.get(0),m),void r.removeClass("atwho-query");case i.RIGHT:return this._setRange("after",r.get(0).nextSibling,m),void r.removeClass("atwho-query")}if(r.length>0&&(f=r.attr("data-atwho-at-query"))&&(r.empty().html(f).attr("data-atwho-at-query",null),this._setRange("after",r.get(0),m)),o=m.cloneRange(),o.setStart(m.startContainer,0),p=this.callbacks("matcher").call(this,this.at,o.toString(),this.getOpt("startWithSpace"),this.getOpt("acceptSpaceBar")),l="string"==typeof p,0===r.length&&l&&(s=m.startOffset-this.at.length-p.length)>=0&&(m.setStart(m.startContainer,s),r=t("<span/>",this.app.document).attr(this.getOpt("editableAtwhoQueryAttrs")).addClass("atwho-query"),m.surroundContents(r.get(0)),(u=r.contents().last().get(0))&&(/firefox/i.test(navigator.userAgent)?(m.setStart(u,u.length),m.setEnd(u,u.length),this._clearRange(m)):this._setRange("after",u,m))),!(l&&p.length<this.getOpt("minLen",0)))return l&&p.length<=this.getOpt("maxLen",20)?(h={text:p,el:r},this.trigger("matched",[this.at,h.text]),this.query=h):(this.view.hide(),this.query={el:r},r.text().indexOf(this.at)>=0&&(this._movingEvent(e)&&r.hasClass("atwho-inserted")?r.removeClass("atwho-query"):!1!==this.callbacks("afterMatchFailed").call(this,this.at,r)&&this._setRange("after",this._unwrap(r.text(r.text()).contents().first()))),null)}},n.prototype.rect=function(){var e,i;if(i=this.query.el.offset())return this.app.iframe&&!this.app.iframeAsRoot&&(e=t(this.app.iframe).offset(),i.left+=e.left-this.$inputor.scrollLeft(),i.top+=e.top-this.$inputor.scrollTop()),i.bottom=i.top+this.query.el.height(),i},n.prototype.insert=function(t,e){var i,n,r,o;return this.$inputor.is(":focus")||this.$inputor.focus(),r=""===(r=this.getOpt("suffix"))?r:r||"\xa0",i=e.data("item-data"),this.query.el.removeClass("atwho-query").addClass("atwho-inserted").html(t).attr("data-atwho-at-query",""+i["atwho-at"]+this.query.text).attr("contenteditable","false"),(n=this._getRange())&&(this.query.el.length&&n.setEndAfter(this.query.el[0]),n.collapse(!1),n.insertNode(o=this.app.document.createTextNode(""+r)),this._setRange("after",o,n)),this.$inputor.is(":focus")||this.$inputor.focus(),this.$inputor.change()},n}(r);var u;u=function(){function e(t){this.context=t,this.at=this.context.at,this.storage=this.context.$inputor}return e.prototype.destroy=function(){return this.storage.data(this.at,null)},e.prototype.saved=function(){return this.fetch()>0},e.prototype.query=function(t,e){var i,n,r;return n=this.fetch(),r=this.context.getOpt("searchKey"),n=this.context.callbacks("filter").call(this.context,t,n,r)||[],i=this.context.callbacks("remoteFilter"),n.length>0||!i&&0===n.length?e(n):i.call(this.context,t,e)},e.prototype.fetch=function(){return this.storage.data(this.at)||[]},e.prototype.save=function(t){return this.storage.data(this.at,this.context.callbacks("beforeSave").call(this.context,t||[]))},e.prototype.load=function(t){if(!this.saved()&&t)return this._load(t)},e.prototype.reload=function(t){return this._load(t)},e.prototype._load=function(e){return"string"==typeof e?t.ajax(e,{dataType:"json"}).done(function(t){return function(e){return t.save(e)}}(this)):this.save(e)},e}();var p;p=function(){function e(e){this.context=e,this.$el=t("<div class='atwho-view'><ul class='atwho-view-ul'></ul></div>"),this.$elUl=this.$el.children(),this.timeoutID=null,this.context.$el.append(this.$el),this.bindEvent()}return e.prototype.init=function(){var t,e;return e=this.context.getOpt("alias")||this.context.at.charCodeAt(0),t=this.context.getOpt("headerTpl"),t&&1===this.$el.children().length&&this.$el.prepend(t),this.$el.attr({id:"at-view-"+e})},e.prototype.destroy=function(){return this.$el.remove()},e.prototype.bindEvent=function(){var e,i,n;return e=this.$el.find("ul"),i=0,n=0,e.on("mousemove.atwho-view","li",function(r){return function(r){var o;if((i!==r.clientX||n!==r.clientY)&&(i=r.clientX,n=r.clientY,o=t(r.currentTarget),!o.hasClass("cur")))return e.find(".cur").removeClass("cur"),o.addClass("cur")}}()).on("click.atwho-view","li",function(i){return function(n){return e.find(".cur").removeClass("cur"),t(n.currentTarget).addClass("cur"),i.choose(n),n.preventDefault()}}(this))},e.prototype.visible=function(){return t.expr.filters.visible(this.$el[0])},e.prototype.highlighted=function(){return this.$el.find(".cur").length>0},e.prototype.choose=function(t){var e,i;if((e=this.$el.find(".cur")).length&&(i=this.context.insertContentFor(e),this.context._stopDelayedCall(),this.context.insert(this.context.callbacks("beforeInsert").call(this.context,i,e,t),e),this.context.trigger("inserted",[e,t]),this.hide(t)),this.context.getOpt("hideWithoutSuffix"))return this.stopShowing=!0},e.prototype.reposition=function(e){var i,n,r,o;return i=this.context.app.iframeAsRoot?this.context.app.window:window,e.bottom+this.$el.height()-t(i).scrollTop()>t(i).height()&&(e.bottom=e.top-this.$el.height()),e.left>(r=t(i).width()-this.$el.width()-5)&&(e.left=r),n={left:e.left,top:e.bottom},null!=(o=this.context.callbacks("beforeReposition"))&&o.call(this.context,n),this.$el.offset(n),this.context.trigger("reposition",[n])},e.prototype.next=function(){var t,e,i,n;return t=this.$el.find(".cur").removeClass("cur"),e=t.next(),e.length||(e=this.$el.find("li:first")),e.addClass("cur"),i=e[0],n=i.offsetTop+i.offsetHeight+(i.nextSibling?i.nextSibling.offsetHeight:0),this.scrollTop(Math.max(0,n-this.$el.height()))},e.prototype.prev=function(){var t,e,i,n;return t=this.$el.find(".cur").removeClass("cur"),i=t.prev(),i.length||(i=this.$el.find("li:last")),i.addClass("cur"),n=i[0],e=n.offsetTop+n.offsetHeight+(n.nextSibling?n.nextSibling.offsetHeight:0),this.scrollTop(Math.max(0,e-this.$el.height()))},e.prototype.scrollTop=function(t){var e;return e=this.context.getOpt("scrollDuration"),e?this.$elUl.animate({scrollTop:t},e):this.$elUl.scrollTop(t)},e.prototype.show=function(){var t;return this.stopShowing?void(this.stopShowing=!1):(this.visible()||(this.$el.show(),this.$el.scrollTop(0),this.context.trigger("shown")),(t=this.context.rect())?this.reposition(t):void 0)},e.prototype.hide=function(t,e){var i;if(this.visible())return isNaN(e)?(this.$el.hide(),this.context.trigger("hidden",[t])):(i=function(t){return function(){return t.hide()}}(this),clearTimeout(this.timeoutID),this.timeoutID=setTimeout(i,e))},e.prototype.render=function(e){var i,n,r,o,s,a,l;if(!(t.isArray(e)&&e.length>0))return void this.hide();for(this.$el.find("ul").empty(),n=this.$el.find("ul"),l=this.context.getOpt("displayTpl"),r=0,s=e.length;r<s;r++)o=e[r],o=t.extend({},o,{"atwho-at":this.context.at}),a=this.context.callbacks("tplEval").call(this.context,l,o,"onDisplay"),i=t(this.context.callbacks("highlighter").call(this.context,a,this.context.query.text)),i.data("item-data",o),n.append(i);return this.show(),this.context.getOpt("highlightFirst")?n.find("li:first").addClass("cur"):void 0},e}();var d;d={load:function(t,e){var i;if(i=this.controller(t))return i.model.load(e)},isSelecting:function(){var t;return!!(null!=(t=this.controller())?t.view.visible():void 0)},hide:function(){var t;return null!=(t=this.controller())?t.view.hide():void 0},reposition:function(){var t;if(t=this.controller())return t.view.reposition(t.rect())},setIframe:function(t,e){return this.setupRootElement(t,e),null},run:function(){return this.dispatch()},destroy:function(){return this.shutdown(),this.$inputor.data("atwho",null)}},t.fn.atwho=function(e){var i,r;return i=arguments,r=null,this.filter('textarea, input, [contenteditable=""], [contenteditable=true]').each(function(){var o,s;return(s=(o=t(this)).data("atwho"))||o.data("atwho",s=new n(this)),"object"!=typeof e&&e?d[e]&&s?r=d[e].apply(s,Array.prototype.slice.call(i,1)):t.error("Method "+e+" does not exist on jQuery.atwho"):s.reg(e.at,e)}),null!=r?r:this},t.fn.atwho.default={at:void 0,alias:void 0,data:null,displayTpl:"<li>${name}</li>",insertTpl:"${atwho-at}${name}",headerTpl:null,callbacks:e,searchKey:"name",suffix:void 0,hideWithoutSuffix:!1,startWithSpace:!0,acceptSpaceBar:!1,highlightFirst:!0,limit:5,maxLen:20,minLen:0,displayTimeout:300,delay:null,spaceSelectsMatch:!1,tabSelectsMatch:!0,editableAtwhoQueryAttrs:{},scrollDuration:150,suspendOnComposing:!0,lookUpOnClick:!0},t.fn.atwho.debug=!1})},1698:function(t,e,i){var n;!function(r){function o(){this._events={},this._conf&&s.call(this,this._conf)}function s(t){t&&(this._conf=t,t.delimiter&&(this.delimiter=t.delimiter),t.maxListeners&&(this._events.maxListeners=t.maxListeners),t.wildcard&&(this.wildcard=t.wildcard),t.newListener&&(this.newListener=t.newListener),this.wildcard&&(this.listenerTree={}))}function a(t){this._events={},this.newListener=!1,s.call(this,t)}function l(t,e,i,n){if(!i)return[];var r,o,s,a,c,u,p,d=[],h=e.length,f=e[n],m=e[n+1];if(n===h&&i._listeners){if("function"==typeof i._listeners)return t&&t.push(i._listeners),[i];for(r=0,o=i._listeners.length;r<o;r++)t&&t.push(i._listeners[r]);return[i]}if("*"===f||"**"===f||i[f]){if("*"===f){for(s in i)"_listeners"!==s&&i.hasOwnProperty(s)&&(d=d.concat(l(t,e,i[s],n+1)));return d}if("**"===f){p=n+1===h||n+2===h&&"*"===m,p&&i._listeners&&(d=d.concat(l(t,e,i,h)));for(s in i)"_listeners"!==s&&i.hasOwnProperty(s)&&("*"===s||"**"===s?(i[s]._listeners&&!p&&(d=d.concat(l(t,e,i[s],h))),d=d.concat(l(t,e,i[s],n))):d=s===m?d.concat(l(t,e,i[s],n+2)):d.concat(l(t,e,i[s],n)));return d}d=d.concat(l(t,e,i[f],n+1))}if(a=i["*"],a&&l(t,e,a,n+1),c=i["**"])if(n<h){c._listeners&&l(t,e,c,h);for(s in c)"_listeners"!==s&&c.hasOwnProperty(s)&&(s===m?l(t,e,c[s],n+2):s===f?l(t,e,c[s],n+1):(u={},u[s]=c[s],l(t,e,{"**":u},n+1)))}else c._listeners?l(t,e,c,h):c["*"]&&c["*"]._listeners&&l(t,e,c["*"],h);return d}function c(t,e){t="string"==typeof t?t.split(this.delimiter):t.slice();for(var i=0,n=t.length;i+1<n;i++)if("**"===t[i]&&"**"===t[i+1])return;for(var r=this.listenerTree,o=t.shift();o;){if(r[o]||(r[o]={}),r=r[o],0===t.length){if(r._listeners){if("function"==typeof r._listeners)r._listeners=[r._listeners,e];else if(u(r._listeners)&&(r._listeners.push(e),!r._listeners.warned)){var s=p;void 0!==this._events.maxListeners&&(s=this._events.maxListeners),s>0&&r._listeners.length>s&&(r._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",r._listeners.length),console.trace&&console.trace())}}else r._listeners=e;return!0}o=t.shift()}return!0}var u=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},p=10;a.EventEmitter2=a,a.prototype.delimiter=".",a.prototype.setMaxListeners=function(t){this._events||o.call(this),this._events.maxListeners=t,this._conf||(this._conf={}),this._conf.maxListeners=t},a.prototype.event="",a.prototype.once=function(t,e){return this.many(t,1,e),this},a.prototype.many=function(t,e,i){function n(){0==--e&&r.off(t,n),i.apply(this,arguments)}var r=this;if("function"!=typeof i)throw new Error("many only accepts instances of Function");return n._origin=i,this.on(t,n),r},a.prototype.emit=function(){this._events||o.call(this);var t=arguments[0];if("newListener"===t&&!this.newListener&&!this._events.newListener)return!1;if(this._all){for(var e=arguments.length,i=new Array(e-1),n=1;n<e;n++)i[n-1]=arguments[n];for(n=0,e=this._all.length;n<e;n++)this.event=t,this._all[n].apply(this,[t].concat(i))}if("error"===t&&!(this._all||this._events.error||this.wildcard&&this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");var r;if(this.wildcard){r=[];var s="string"==typeof t?t.split(this.delimiter):t.slice();l.call(this,r,s,this.listenerTree,0)}else r=this._events[t];if("function"==typeof r){if(this.event=t,1===arguments.length)r.call(this);else if(arguments.length>1)switch(arguments.length){case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(var e=arguments.length,i=new Array(e-1),n=1;n<e;n++)i[n-1]=arguments[n];r.apply(this,i)}return!0}if(r){for(var e=arguments.length,i=new Array(e-1),n=1;n<e;n++)i[n-1]=arguments[n];for(var a=r.slice(),n=0,e=a.length;n<e;n++)this.event=t,a[n].apply(this,i);return a.length>0||!!this._all}return!!this._all},a.prototype.emitAsync=function(){this._events||o.call(this);var t=arguments[0];if("newListener"===t&&!this.newListener&&!this._events.newListener)return Promise.resolve([!1]);var e=[];if(this._all){for(var i=arguments.length,n=new Array(i-1),r=1;r<i;r++)n[r-1]=arguments[r];for(r=0,i=this._all.length;r<i;r++)this.event=t,e.push(this._all[r].apply(this,n))}if("error"===t&&!(this._all||this._events.error||this.wildcard&&this.listenerTree.error))return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");var s;if(this.wildcard){s=[];var a="string"==typeof t?t.split(this.delimiter):t.slice();l.call(this,s,a,this.listenerTree,0)}else s=this._events[t];if("function"==typeof s){if(this.event=t,1===arguments.length)e.push(s.call(this));else if(arguments.length>1)switch(arguments.length){case 2:e.push(s.call(this,arguments[1]));break;case 3:e.push(s.call(this,arguments[1],arguments[2]));break;default:for(var i=arguments.length,n=new Array(i-1),r=1;r<i;r++)n[r-1]=arguments[r];e.push(s.apply(this,n))}}else if(s){for(var i=arguments.length,n=new Array(i-1),r=1;r<i;r++)n[r-1]=arguments[r];for(var c=s.slice(),r=0,i=c.length;r<i;r++)this.event=t,e.push(c[r].apply(this,n))}return Promise.all(e)},a.prototype.on=function(t,e){if("function"==typeof t)return this.onAny(t),this;if("function"!=typeof e)throw new Error("on only accepts instances of Function");if(this._events||o.call(this),this.emit("newListener",t,e),this.wildcard)return c.call(this,t,e),this;if(this._events[t]){if("function"==typeof this._events[t])this._events[t]=[this._events[t],e];else if(u(this._events[t])&&(this._events[t].push(e),!this._events[t].warned)){var i=p;void 0!==this._events.maxListeners&&(i=this._events.maxListeners),i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace&&console.trace())}}else this._events[t]=e;return this},a.prototype.onAny=function(t){if("function"!=typeof t)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(t),this},a.prototype.addListener=a.prototype.on,a.prototype.off=function(t,e){function i(t){if(t!==r){var e=Object.keys(t);for(var n in e){var o=e[n],s=t[o];s instanceof Function||"object"!=typeof s||(Object.keys(s).length>0&&i(t[o]),0===Object.keys(s).length&&delete t[o])}}}if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");var n,o=[];if(this.wildcard){var s="string"==typeof t?t.split(this.delimiter):t.slice();o=l.call(this,null,s,this.listenerTree,0)}else{if(!this._events[t])return this;n=this._events[t],o.push({_listeners:n})}for(var a=0;a<o.length;a++){var c=o[a];if(n=c._listeners,u(n)){for(var p=-1,d=0,h=n.length;d<h;d++)if(n[d]===e||n[d].listener&&n[d].listener===e||n[d]._origin&&n[d]._origin===e){p=d;break}if(p<0)continue;return this.wildcard?c._listeners.splice(p,1):this._events[t].splice(p,1),0===n.length&&(this.wildcard?delete c._listeners:delete this._events[t]),this.emit("removeListener",t,e),this}(n===e||n.listener&&n.listener===e||n._origin&&n._origin===e)&&(this.wildcard?delete c._listeners:delete this._events[t],this.emit("removeListener",t,e))}return i(this.listenerTree),this},a.prototype.offAny=function(t){var e,i=0,n=0;if(t&&this._all&&this._all.length>0){for(e=this._all,i=0,n=e.length;i<n;i++)if(t===e[i])return e.splice(i,1),this.emit("removeListenerAny",t),this}else{for(e=this._all,i=0,n=e.length;i<n;i++)this.emit("removeListenerAny",e[i]);this._all=[]}return this},a.prototype.removeListener=a.prototype.off,a.prototype.removeAllListeners=function(t){if(0===arguments.length)return!this._events||o.call(this),this;if(this.wildcard)for(var e="string"==typeof t?t.split(this.delimiter):t.slice(),i=l.call(this,null,e,this.listenerTree,0),n=0;n<i.length;n++){var r=i[n];r._listeners=null}else{if(!this._events||!this._events[t])return this;this._events[t]=null}return this},a.prototype.listeners=function(t){if(this.wildcard){var e=[],i="string"==typeof t?t.split(this.delimiter):t.slice();return l.call(this,e,i,this.listenerTree,0),e}return this._events||o.call(this),this._events[t]||(this._events[t]=[]),u(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},a.prototype.listenersAny=function(){return this._all?this._all:[]},(n=function(){return a}.call(e,i,e,t))!==r&&(t.exports=n)}()},1702:function(t,e,i){(function(e){!function(e){"use strict";function i(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||b.defaults,this.rules=w.normal,this.options.pedantic?this.rules=w.pedantic:this.options.gfm&&(this.rules=w.gfm)}function n(t,e){if(this.options=e||b.defaults,this.links=t,this.rules=k.normal,this.renderer=this.options.renderer||new r,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=k.pedantic:this.options.gfm&&(this.options.breaks?this.rules=k.breaks:this.rules=k.gfm)}function r(t){this.options=t||b.defaults}function o(){}function s(t){this.tokens=[],this.token=null,this.options=t||b.defaults,this.options.renderer=this.options.renderer||new r,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new a}function a(){this.seen={}}function l(t,e){if(e){if(l.escapeTest.test(t))return t.replace(l.escapeReplace,function(t){return l.replacements[t]})}else if(l.escapeTestNoEncode.test(t))return t.replace(l.escapeReplaceNoEncode,function(t){return l.replacements[t]});return t}function c(t){return t.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(t,e){return e=e.toLowerCase(),"colon"===e?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""})}function u(t,e){return t=t.source||t,e=e||"",{replace:function(e,i){return i=i.source||i,i=i.replace(/(^|[^\[])\^/g,"$1"),t=t.replace(e,i),this},getRegex:function(){return new RegExp(t,e)}}}function p(t,e,i){if(t){try{var n=decodeURIComponent(c(i)).replace(/[^\w:]/g,"").toLowerCase()}catch(t){return null}if(0===n.indexOf("javascript:")||0===n.indexOf("vbscript:")||0===n.indexOf("data:"))return null}e&&!T.test(i)&&(i=d(e,i));try{i=encodeURI(i).replace(/%25/g,"%")}catch(t){return null}return i}function d(t,e){return x[" "+t]||(/^[^:]+:\/*[^/]*$/.test(t)?x[" "+t]=t+"/":x[" "+t]=g(t,"/",!0)),t=x[" "+t],"//"===e.slice(0,2)?t.replace(/:[\s\S]*/,":")+e:"/"===e.charAt(0)?t.replace(/(:\/*[^/]*)[\s\S]*/,"$1")+e:t+e}function h(){}function f(t){for(var e,i,n=1;n<arguments.length;n++){e=arguments[n];for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t}function m(t,e){var i=t.replace(/\|/g,function(t,e,i){for(var n=!1,r=e;--r>=0&&"\\"===i[r];)n=!n;return n?"|":" |"}),n=i.split(/ \|/),r=0;if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function g(t,e,i){if(0===t.length)return"";for(var n=0;n<t.length;){var r=t.charAt(t.length-n-1);if(r!==e||i){if(r===e||!i)break;n++}else n++}return t.substr(0,t.length-n)}function y(t,e){if(-1===t.indexOf(e[1]))return-1;for(var i=0,n=0;n<t.length;n++)if("\\"===t[n])n++;else if(t[n]===e[0])i++;else if(t[n]===e[1]&&--i<0)return n;return-1}function v(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function b(t,e,n){if(void 0===t||null===t)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if(n||"function"==typeof e){n||(n=e,e=null),e=f({},b.defaults,e||{}),v(e);var r,o,a=e.highlight,c=0;try{r=i.lex(t,e)}catch(t){return n(t)}o=r.length;var u=function(t){if(t)return e.highlight=a,n(t);var i;try{i=s.parse(r,e)}catch(e){t=e}return e.highlight=a,t?n(t):n(null,i)};if(!a||a.length<3)return u();if(delete e.highlight,!o)return u();for(;c<r.length;c++)!function(t){"code"!==t.type?--o||u():a(t.text,t.lang,function(e,i){return e?u(e):null==i||i===t.text?--o||u():(t.text=i,t.escaped=!0,void(--o||u()))})}(r[c])}else try{return e&&(e=f({},b.defaults,e)),v(e),s.parse(i.lex(t,e),e)}catch(t){if(t.message+="\nPlease report this to https://github.com/markedjs/marked.",(e||b.defaults).silent)return"<p>An error occurred:</p><pre>"+l(t.message+"",!0)+"</pre>";throw t}}var w={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}|~{3,})([^`~\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:h,table:h,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/};w._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,w._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,w.def=u(w.def).replace("label",w._label).replace("title",w._title).getRegex(),w.bullet=/(?:[*+-]|\d{1,9}\.)/,w.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,w.item=u(w.item,"gm").replace(/bull/g,w.bullet).getRegex(),w.list=u(w.list).replace(/bull/g,w.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+w.def.source+")").getRegex(),w._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",w._comment=/<!--(?!-?>)[\s\S]*?-->/,w.html=u(w.html,"i").replace("comment",w._comment).replace("tag",w._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),w.paragraph=u(w._paragraph).replace("hr",w.hr).replace("heading"," {0,3}#{1,6} +").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}|~{3,})[^`\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",w._tag).getRegex(),w.blockquote=u(w.blockquote).replace("paragraph",w.paragraph).getRegex(),w.normal=f({},w),w.gfm=f({},w.normal,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/}),w.pedantic=f({},w.normal,{html:u("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",w._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:h,paragraph:u(w.normal._paragraph).replace("hr",w.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",w.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()}),i.rules=w,i.lex=function(t,e){return new i(e).lex(t)},i.prototype.lex=function(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(t,!0)},i.prototype.token=function(t,e){t=t.replace(/^ +$/gm,"");for(var i,n,r,o,s,a,c,u,p,d,h,f,y,v,b,k;t;)if((r=this.rules.newline.exec(t))&&(t=t.substring(r[0].length),r[0].length>1&&this.tokens.push({type:"space"})),r=this.rules.code.exec(t)){var x=this.tokens[this.tokens.length-1];t=t.substring(r[0].length),x&&"paragraph"===x.type?x.text+="\n"+r[0].trimRight():(r=r[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?r:g(r,"\n")}))}else if(r=this.rules.fences.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"code",lang:r[2]?r[2].trim():r[2],text:r[3]||""});else if(r=this.rules.heading.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"heading",depth:r[1].length,text:r[2]});else if((r=this.rules.nptable.exec(t))&&(a={type:"table",header:m(r[1].replace(/^ *| *\| *$/g,"")),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3]?r[3].replace(/\n$/,"").split("\n"):[]},a.header.length===a.align.length)){for(t=t.substring(r[0].length),h=0;h<a.align.length;h++)/^ *-+: *$/.test(a.align[h])?a.align[h]="right":/^ *:-+: *$/.test(a.align[h])?a.align[h]="center":/^ *:-+ *$/.test(a.align[h])?a.align[h]="left":a.align[h]=null;for(h=0;h<a.cells.length;h++)a.cells[h]=m(a.cells[h],a.header.length);this.tokens.push(a)}else if(r=this.rules.hr.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"hr"});else if(r=this.rules.blockquote.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"blockquote_start"}),r=r[0].replace(/^ *> ?/gm,""),this.token(r,e),this.tokens.push({type:"blockquote_end"});else if(r=this.rules.list.exec(t)){for(t=t.substring(r[0].length),o=r[2],v=o.length>1,c={type:"list_start",ordered:v,start:v?+o:"",loose:!1},this.tokens.push(c),r=r[0].match(this.rules.item),u=[],i=!1,y=r.length,h=0;h<y;h++)a=r[h],d=a.length,a=a.replace(/^ *([*+-]|\d+\.) */,""),~a.indexOf("\n ")&&(d-=a.length,a=this.options.pedantic?a.replace(/^ {1,4}/gm,""):a.replace(new RegExp("^ {1,"+d+"}","gm"),"")),h!==y-1&&(s=w.bullet.exec(r[h+1])[0],(o.length>1?1===s.length:s.length>1||this.options.smartLists&&s!==o)&&(t=r.slice(h+1).join("\n")+t,h=y-1)),n=i||/\n\n(?!\s*$)/.test(a),h!==y-1&&(i="\n"===a.charAt(a.length-1),n||(n=i)),n&&(c.loose=!0),b=/^\[[ xX]\] /.test(a),k=void 0,b&&(k=" "!==a[1],a=a.replace(/^\[[ xX]\] +/,"")),p={type:"list_item_start",task:b,checked:k,loose:n},u.push(p),this.tokens.push(p),this.token(a,!1),this.tokens.push({type:"list_item_end"});if(c.loose)for(y=u.length,h=0;h<y;h++)u[h].loose=!0;this.tokens.push({type:"list_end"})}else if(r=this.rules.html.exec(t))t=t.substring(r[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===r[1]||"script"===r[1]||"style"===r[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):l(r[0]):r[0]});else if(e&&(r=this.rules.def.exec(t)))t=t.substring(r[0].length),r[3]&&(r[3]=r[3].substring(1,r[3].length-1)),f=r[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[f]||(this.tokens.links[f]={href:r[2],title:r[3]});else if((r=this.rules.table.exec(t))&&(a={type:"table",header:m(r[1].replace(/^ *| *\| *$/g,"")),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3]?r[3].replace(/\n$/,"").split("\n"):[]},a.header.length===a.align.length)){for(t=t.substring(r[0].length),h=0;h<a.align.length;h++)/^ *-+: *$/.test(a.align[h])?a.align[h]="right":/^ *:-+: *$/.test(a.align[h])?a.align[h]="center":/^ *:-+ *$/.test(a.align[h])?a.align[h]="left":a.align[h]=null;for(h=0;h<a.cells.length;h++)a.cells[h]=m(a.cells[h].replace(/^ *\| *| *\| *$/g,""),a.header.length);this.tokens.push(a)}else if(r=this.rules.lheading.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"heading",depth:"="===r[2].charAt(0)?1:2,text:r[1]});else if(e&&(r=this.rules.paragraph.exec(t)))t=t.substring(r[0].length),this.tokens.push({type:"paragraph",text:"\n"===r[1].charAt(r[1].length-1)?r[1].slice(0,-1):r[1]});else if(r=this.rules.text.exec(t))t=t.substring(r[0].length),this.tokens.push({type:"text",text:r[0]});else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return this.tokens};var k={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:h,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:h,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/};k._punctuation="!\"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~",k.em=u(k.em).replace(/punctuation/g,k._punctuation).getRegex(),k._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,k._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,k._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,k.autolink=u(k.autolink).replace("scheme",k._scheme).replace("email",k._email).getRegex(),k._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,k.tag=u(k.tag).replace("comment",w._comment).replace("attribute",k._attribute).getRegex(),k._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,k._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,k._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,k.link=u(k.link).replace("label",k._label).replace("href",k._href).replace("title",k._title).getRegex(),k.reflink=u(k.reflink).replace("label",k._label).getRegex(),k.normal=f({},k),k.pedantic=f({},k.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:u(/^!?\[(label)\]\((.*?)\)/).replace("label",k._label).getRegex(),reflink:u(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",k._label).getRegex()}),k.gfm=f({},k.normal,{escape:u(k.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),k.gfm.url=u(k.gfm.url,"i").replace("email",k.gfm._extended_email).getRegex(),k.breaks=f({},k.gfm,{br:u(k.br).replace("{2,}","*").getRegex(),text:u(k.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),n.rules=k,n.output=function(t,e,i){return new n(e,i).output(t)},n.prototype.output=function(t){for(var e,i,r,o,s,a,c="";t;)if(s=this.rules.escape.exec(t))t=t.substring(s[0].length),c+=l(s[1]);else if(s=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(s[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(s[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(s[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(s[0])&&(this.inRawBlock=!1),t=t.substring(s[0].length),c+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):l(s[0]):s[0];else if(s=this.rules.link.exec(t)){var u=y(s[2],"()");if(u>-1){var p=4+s[1].length+u;s[2]=s[2].substring(0,u),s[0]=s[0].substring(0,p).trim(),s[3]=""}t=t.substring(s[0].length),this.inLink=!0,r=s[2],this.options.pedantic?(e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r),e?(r=e[1],o=e[3]):o=""):o=s[3]?s[3].slice(1,-1):"",r=r.trim().replace(/^<([\s\S]*)>$/,"$1"),c+=this.outputLink(s,{href:n.escapes(r),title:n.escapes(o)}),this.inLink=!1}else if((s=this.rules.reflink.exec(t))||(s=this.rules.nolink.exec(t))){if(t=t.substring(s[0].length),e=(s[2]||s[1]).replace(/\s+/g," "),!(e=this.links[e.toLowerCase()])||!e.href){c+=s[0].charAt(0),t=s[0].substring(1)+t;continue}this.inLink=!0,c+=this.outputLink(s,e),this.inLink=!1}else if(s=this.rules.strong.exec(t))t=t.substring(s[0].length),c+=this.renderer.strong(this.output(s[4]||s[3]||s[2]||s[1]));else if(s=this.rules.em.exec(t))t=t.substring(s[0].length),c+=this.renderer.em(this.output(s[6]||s[5]||s[4]||s[3]||s[2]||s[1]));else if(s=this.rules.code.exec(t))t=t.substring(s[0].length),c+=this.renderer.codespan(l(s[2].trim(),!0));else if(s=this.rules.br.exec(t))t=t.substring(s[0].length),c+=this.renderer.br();else if(s=this.rules.del.exec(t))t=t.substring(s[0].length),c+=this.renderer.del(this.output(s[1]));else if(s=this.rules.autolink.exec(t))t=t.substring(s[0].length),"@"===s[2]?(i=l(this.mangle(s[1])),r="mailto:"+i):(i=l(s[1]),r=i),c+=this.renderer.link(r,null,i);else if(this.inLink||!(s=this.rules.url.exec(t))){if(s=this.rules.text.exec(t))t=t.substring(s[0].length),this.inRawBlock?c+=this.renderer.text(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):l(s[0]):s[0]):c+=this.renderer.text(l(this.smartypants(s[0])));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}else{if("@"===s[2])i=l(s[0]),r="mailto:"+i;else{do{a=s[0],s[0]=this.rules._backpedal.exec(s[0])[0]}while(a!==s[0]);i=l(s[0]),r="www."===s[1]?"http://"+i:i}t=t.substring(s[0].length),c+=this.renderer.link(r,null,i)}return c},n.escapes=function(t){return t?t.replace(n.rules._escapes,"$1"):t},n.prototype.outputLink=function(t,e){var i=e.href,n=e.title?l(e.title):null;return"!"!==t[0].charAt(0)?this.renderer.link(i,n,this.output(t[1])):this.renderer.image(i,n,l(t[1]))},n.prototype.smartypants=function(t){return this.options.smartypants?t.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026"):t},n.prototype.mangle=function(t){if(!this.options.mangle)return t;for(var e,i="",n=t.length,r=0;r<n;r++)e=t.charCodeAt(r),Math.random()>.5&&(e="x"+e.toString(16)),i+="&#"+e+";";return i},r.prototype.code=function(t,e,i){var n=(e||"").match(/\S*/)[0];if(this.options.highlight){var r=this.options.highlight(t,n);null!=r&&r!==t&&(i=!0,t=r)}return n?'<pre><code class="'+this.options.langPrefix+l(n,!0)+'">'+(i?t:l(t,!0))+"</code></pre>\n":"<pre><code>"+(i?t:l(t,!0))+"</code></pre>"},r.prototype.blockquote=function(t){return"<blockquote>\n"+t+"</blockquote>\n"},r.prototype.html=function(t){return t},r.prototype.heading=function(t,e,i,n){return this.options.headerIds?"<h"+e+' id="'+this.options.headerPrefix+n.slug(i)+'">'+t+"</h"+e+">\n":"<h"+e+">"+t+"</h"+e+">\n"},r.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},r.prototype.list=function(t,e,i){var n=e?"ol":"ul";return"<"+n+(e&&1!==i?' start="'+i+'"':"")+">\n"+t+"</"+n+">\n"},r.prototype.listitem=function(t){return"<li>"+t+"</li>\n"},r.prototype.checkbox=function(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},r.prototype.paragraph=function(t){return"<p>"+t+"</p>\n"},r.prototype.table=function(t,e){return e&&(e="<tbody>"+e+"</tbody>"),"<table>\n<thead>\n"+t+"</thead>\n"+e+"</table>\n"},r.prototype.tablerow=function(t){return"<tr>\n"+t+"</tr>\n"},r.prototype.tablecell=function(t,e){var i=e.header?"th":"td";return(e.align?"<"+i+' align="'+e.align+'">':"<"+i+">")+t+"</"+i+">\n"},r.prototype.strong=function(t){return"<strong>"+t+"</strong>"},r.prototype.em=function(t){return"<em>"+t+"</em>"},r.prototype.codespan=function(t){return"<code>"+t+"</code>"},r.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},r.prototype.del=function(t){return"<del>"+t+"</del>"},r.prototype.link=function(t,e,i){if(null===(t=p(this.options.sanitize,this.options.baseUrl,t)))return i;var n='<a href="'+l(t)+'"';return e&&(n+=' title="'+e+'"'),n+=">"+i+"</a>"},r.prototype.image=function(t,e,i){if(null===(t=p(this.options.sanitize,this.options.baseUrl,t)))return i;var n='<img src="'+t+'" alt="'+i+'"';return e&&(n+=' title="'+e+'"'),n+=this.options.xhtml?"/>":">"},r.prototype.text=function(t){return t},o.prototype.strong=o.prototype.em=o.prototype.codespan=o.prototype.del=o.prototype.text=function(t){return t},o.prototype.link=o.prototype.image=function(t,e,i){return""+i},o.prototype.br=function(){return""},s.parse=function(t,e){return new s(e).parse(t)},s.prototype.parse=function(t){this.inline=new n(t.links,this.options),this.inlineText=new n(t.links,f({},this.options,{renderer:new o})),this.tokens=t.reverse();for(var e="";this.next();)e+=this.tok();return e},s.prototype.next=function(){return this.token=this.tokens.pop(),this.token},s.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},s.prototype.parseText=function(){for(var t=this.token.text;"text"===this.peek().type;)t+="\n"+this.next().text;return this.inline.output(t)},s.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,c(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var t,e,i,n,r="",o="";for(i="",t=0;t<this.token.header.length;t++)i+=this.renderer.tablecell(this.inline.output(this.token.header[t]),{header:!0,align:this.token.align[t]});for(r+=this.renderer.tablerow(i),t=0;t<this.token.cells.length;t++){for(e=this.token.cells[t],i="",n=0;n<e.length;n++)i+=this.renderer.tablecell(this.inline.output(e[n]),{header:!1,align:this.token.align[n]});o+=this.renderer.tablerow(i)}return this.renderer.table(r,o);case"blockquote_start":for(o="";"blockquote_end"!==this.next().type;)o+=this.tok();return this.renderer.blockquote(o);case"list_start":o="";for(var s=this.token.ordered,a=this.token.start;"list_end"!==this.next().type;)o+=this.tok();return this.renderer.list(o,s,a);case"list_item_start":o="";var l=this.token.loose,u=this.token.checked,p=this.token.task;for(this.token.task&&(o+=this.renderer.checkbox(u));"list_item_end"!==this.next().type;)o+=l||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(o,p,u);case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:var d='Token with "'+this.token.type+'" type was not found.';if(!this.options.silent)throw new Error(d);console.log(d)}},a.prototype.slug=function(t){var e=t.toLowerCase().trim().replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(e)){var i=e;do{this.seen[i]++,e=i+"-"+this.seen[i]}while(this.seen.hasOwnProperty(e))}return this.seen[e]=0,e},l.escapeTest=/[&<>"']/,l.escapeReplace=/[&<>"']/g,l.replacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},l.escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/,l.escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g;var x={},T=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;h.exec=h,b.options=b.setOptions=function(t){return f(b.defaults,t),b},b.getDefaults=function(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:new r,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}},b.defaults=b.getDefaults(),b.Parser=s,b.parser=s.parse,b.Renderer=r,b.TextRenderer=o,b.Lexer=i,b.lexer=i.lex,b.InlineLexer=n,b.inlineLexer=n.output,b.Slugger=a,b.parse=b,t.exports=b}(this||"undefined"!=typeof window&&window)}).call(e,i(28))},1708:function(t,e,i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function i(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=[i(164),i(1134)],void 0!==(r=function(t,e){return function(t){function e(){return this.GetAllData=o(this.GetAllData,this),this.GetQueryAfterCaret=o(this.GetQueryAfterCaret,this),this.GetQueryBeforeCaret=o(this.GetQueryBeforeCaret,this),e.__super__.constructor.apply(this,arguments)}return s(e,t),e.PRIORITY={LOW:1,MEDIUM:2,HIGH:3},e.prototype.defaultType="priority",e.prototype.order=app.consts.AUTO_COMPLETE_ORDER.PRIORITY,e.prototype.excludeSelected=!0,e.prototype.GetQueryBeforeCaret=function(){var t,e;return null!=(t=null!=(e=/(?:^|\s)(!{0,3})$/.exec(this.fullQueryBeforeCaret()))?e[1]:void 0)?t:null},e.prototype.GetQueryAfterCaret=function(){var t,e,i,n,r;return null==(e=this.queryBeforeCaret())?null:null==(t=null!=(n=null!=(r=/^(!{0,3})(?:$|\s)/.exec(this.fullQueryAfterCaret()))?r[1]:void 0)?n:null)?null:(i=e.length+t.length,i<1||3<i?null:t)},e.prototype.GetAllData=function(){return[this.NormalizeDataItem({id:e.PRIORITY.LOW,label:app.tl("Low Priority"),value:"!",suggestionTemplate:"<span class=\"w-auto-complete__item-icon\">\n    \x3c!-- ko component: {\n            name: 'ui-common-icon',\n            params: {\n                name: 'priority-solid',\n                class: 'h-icon-color--lowpriority'\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n</span>\n<span class=\"w-auto-complete__item-title\">\n    {{label}}\n</span>",code:"low",color:app.consts.UICOLORS.lowpriority}),this.NormalizeDataItem({id:e.PRIORITY.MEDIUM,label:app.tl("Medium Priority"),value:"!!",suggestionTemplate:"<span class=\"w-auto-complete__item-icon\">\n    \x3c!-- ko component: {\n            name: 'ui-common-icon',\n            params: {\n                name: 'priority-solid',\n                class: 'h-icon-color--mediumpriority'\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n</span>\n<span class=\"w-auto-complete__item-title\">\n    {{label}}\n</span>",code:"medium",color:app.consts.UICOLORS.mediumpriority}),this.NormalizeDataItem({id:e.PRIORITY.HIGH,label:app.tl("High Priority"),value:"!!!",suggestionTemplate:"<span class=\"w-auto-complete__item-icon\">\n    \x3c!-- ko component: {\n            name: 'ui-common-icon',\n            params: {\n                name: 'priority-solid',\n                class: 'h-icon-color--highpriority'\n            }\n        } --\x3e\n    \x3c!-- /ko --\x3e\n</span>\n<span class=\"w-auto-complete__item-title\">\n    {{label}}\n</span>",code:"high",color:app.consts.UICOLORS.highpriority})]},e}(e)}.apply(e,n))&&(t.exports=r)},1709:function(t,e,i){var n,r=function(t,e){return function(){return t.apply(e,arguments)}};void 0!==(n=function(){return new(function(){function t(){this.uniqueCollection=r(this.uniqueCollection,this),this.hasSameValues=r(this.hasSameValues,this)}return t.prototype.areEqual=function(t,e){var i,n;if(!Array.isArray(t))return!1;if(!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(i=0,n=t.length;i<n;){if(app.utility.isObject(t[i])&&app.utility.isObject(e[i])){if(!app.utility.compareObjects(t[i],e[i]))return!1}else if(t[i]!==e[i])return!1;i++}return!0},t.prototype.hasSameValues=function(t,e){var i,n;return null==t&&(t=[]),null==e&&(e=[]),t.length===e.length&&(i=t.concat(e),n=i.filter(function(t){return function(t,e){return i.indexOf(t)===e}}()),n.length===t.length)},t.prototype.from=function(t){return Array.from?Array.from(t):t},t.prototype.uniqueCollection=function(t,e){var i,n,r,o;for(o={},n=0,r=t.length;n<r;n++)i=t[n],o[ko.unwrap(i[e])]=i;return Object.values(o)},t}())}.call(e,i,e,t))&&(t.exports=n)},1710:function(t,e,i){var n,r,o=function(t,e){return(+t%(e=+e)+e)%e};n=[i(14)],void 0!==(r=function(t){var e,i,n,r,s,a,l,c,u,p;return i=function(t){return t.replace(/\D/g,"")},n=function(t){return t.replace(/[^\u00C0-\u1FFF\u2C00-\uD7FF\w]/g,"").toLowerCase()},u=function(t){return!isNaN(t)&&isFinite(t)&&t>=0?Math.floor(t):0},a=function(t){return u(parseInt(i(t),10))},e=function(t,e){var i,n;return i=null!=t.toLocaleString?t.toLocaleString():t.toString(),n=1===t?e:e+"s",app.tl("[_s] "+n,i)},p=null,c=function(t){var e,i,r,o,s,a,l,c,u,d;if("string"!=typeof t)return null;if(null==p)for(p=Object.create(null),l=["week","day","hour","minute"],r=0,o=l.length;r<o;r++)c=l[r],d=c+"s",p[c]=n(app.tl("[_s] "+c,"")),p[d]=n(app.tl("[_s] "+d,""));a=n(t),e=null,i=Infinity;for(u in p)c=p[u],0<=(s=u.indexOf(a))&&s<i&&(e=c,i=s);return e},{parseNumbersAndUnits:l=function(e){var i,n,r,o,s;if("string"!=typeof e)return null;for(i=null,s=/(\d+)(\D+)?/g;null!=(o=s.exec(e));)r=a(o[1]),n=c(o[2])||(r<10?"hour":"minute"),null==i&&(i={}),i[n]=r;return null==i?null:t.duration(i)},formatNumbersAndUnits:function(t){var i,n,r,s,a;return a=Math.floor(t.asWeeks()),i=Math.floor(o(t.asDays(),7)),n=t.hours(),r=t.minutes(),s=[],a>0&&s.push(e(a,"week")),i>0&&s.push(e(i,"day")),n>0&&s.push(e(n,"hour")),(r>0||0===s.length)&&s.push(e(r,"minute")),s.join(" ")},parseHoursAndMinutes:s=function(e){var i;return"string"!=typeof e?null:(i=/^([^:]*):(.*)$/.exec(e),null==i?null:t.duration({hours:a(i[1]),minutes:a(i[2])}))},formatHoursAndMinutes:function(t){var e,i;return e=Math.floor(t.asHours()),i=t.minutes(),e+":"+(i<10?"0"+i:i)},parseDecimalHours:r=function(e){var n,r,o,s;return"string"!=typeof e?null:null==(o=/^([^.,]*)[.,](.*)$/.exec(e))?null:(r=a(o[1]),n=parseFloat("0."+i(o[2])),s=u(60*n),t.duration(60*r+s,"minutes"))},formatDecimalHours:function(t){return""+t.asHours()},parse:function(e){return s(e)||r(e)||l(e)||t.duration(0)}}}.apply(e,n))&&(t.exports=r)},1718:function(t,e,i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}};n=[i(1367)],void 0!==(r=function(t){return function(){function e(e){this.setupComputedsAndSubscribers=o(this.setupComputedsAndSubscribers,this);var i,n,r,s,a;this.UpdateProperties(e),s={people:[],isResponsible:!1,isInPrivacy:!1,isFollowingChanges:!1,isFollowingComments:!1,isInNotifyDefaults:!1,hasAccess:!1,isReminded:!1,canFollowChanges:!0,canFollowComments:!0,shouldShowFollowerOptions:!1,privacyCollapsed:!1,assigneesCollapsed:!1,followersCollapsed:!1,changeFollowersCollapsed:!1,commentFollowersCollapsed:!1,membersCollapsed:!1,isLoadingMembers:!1};for(i in s)a=s[i],null==e[i]&&(e[i]=a);e.isInNotifyDefaults&&(e.isFollowingComments=!0),e.shouldShowFollowerOptions=e.isFollowingChanges||e.isFollowingComments,e.privacyCollapsed=e.isInPrivacy,e.assigneesCollapsed=e.isResponsible,e.followersCollapsed=e.isFollowingChanges||e.isFollowingComments,e.changeFollowersCollapsed=e.isFollowingChanges,e.commentFollowersCollapsed=e.isFollowingComments,r=Object.keys(s),n={observe:r,people:{key:function(t){return app.ko.unwrap(t.id)},create:function(e){return new t(e.data)}},id:{create:function(t){return parseInt(t.data,10)}}},app.ko.mapping.fromJS(e,n,this),this.setupComputedsAndSubscribers()}return e.prototype.UpdateProperties=function(t){return null==t.logoUrl&&(t.logoUrl=""),null==t.pickerItemType&&(t.pickerItemType="company"),null==t.defaultImageUrl&&(t.defaultImageUrl="./tko/public/assets/svg/company-regular.svg"),null==t.shouldPreselectMembers&&(t.shouldPreselectMembers=!1),t.mentionImg='<img class="h-mention__img" src="'+t.logoUrl+'" onerror="this.src=\''+t.defaultImageUrl+"'\">",null!=t.membersLoaded?t.membersLoaded:t.membersLoaded=!1},e.prototype.setupComputedsAndSubscribers=function(){return this.followerStatus=ko.computed({read:function(t){return function(){return t.isFollowingChanges()&&t.isFollowingComments()?"all":t.isFollowingChanges()?"changes":t.isFollowingComments()?"comments":"none"}}(this),write:function(t){return function(e){switch(e){case"changes":t.isFollowingChanges(!0),t.isFollowingComments(!1);break;case"comments":t.isFollowingChanges(!1),t.isFollowingComments(!0);break;case"all":t.isFollowingChanges(!0),t.isFollowingComments(!0);break;default:t.isFollowingChanges(!1),t.isFollowingComments(!1)}}}(this),owner:this}),this.isInPrivacy.subscribe(function(t){return function(e){var i,n,r,o;for(o=t.people(),i=0,n=o.length;i<n;i++)r=o[i],r.isInCompanyPrivacy(e);return e&&!t.privacyCollapsed()?t.privacyCollapsed(!0):t.privacyCollapsed()&&!e?t.privacyCollapsed(!1):void 0}}(this)),this.isResponsible.subscribe(function(t){return function(e){var i,n,r,o;for(o=t.people(),i=0,n=o.length;i<n;i++)r=o[i],r.isInCompanyAssignees(e);return e&&!t.assigneesCollapsed()?t.assigneesCollapsed(!0):t.assigneesCollapsed()&&!e?t.assigneesCollapsed(!1):void 0}}(this)),this.isFollowingChanges.subscribe(function(t){return function(e){var i,n,r,o;for(o=t.people(),i=0,n=o.length;i<n;i++)r=o[i],r.isInCompanyChangeFollowers(e),e&&r.shouldShowFollowerOptions(!0);return e&&!t.changeFollowersCollapsed()?t.changeFollowersCollapsed(!0):t.changeFollowersCollapsed()&&!e&&t.changeFollowersCollapsed(!1),t.followersCollapsed(t.isFollowingChanges()||t.isFollowingComments())}}(this)),this.isFollowingComments.subscribe(function(t){return function(e){var i,n,r,o;for(o=t.people(),i=0,n=o.length;i<n;i++)r=o[i],r.isInCompanyCommentFollowers(e),e&&r.shouldShowFollowerOptions(!0);return e&&!t.commentFollowersCollapsed()?t.commentFollowersCollapsed(!0):t.commentFollowersCollapsed()&&!e&&t.commentFollowersCollapsed(!1),t.followersCollapsed(t.isFollowingChanges()||t.isFollowingComments())}}(this))},e}()}.apply(e,n))&&(t.exports=r)},1720:function(t,e,i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function i(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=[i(1367),i(1191),i(1286)],void 0!==(r=function(t,e,i){var n;return n=i.default,function(e){function i(e){this.GetLogo=o(this.GetLogo,this),this.UpdateMentionImg=o(this.UpdateMentionImg,this),this.setupComputedsAndSubscribers=o(this.setupComputedsAndSubscribers,this);var i,r,s,a,l,c;this.UpdateProperties(e),a={people:null,members:null,isResponsible:!1,isInPrivacy:!1,isReminded:!1,isInNotifyDefaults:!1,isFollowingChanges:!1,isFollowingComments:!1,canFollowChanges:!0,canFollowComments:!0,shouldShowFollowerOptions:!1,isLoadingMembers:!1,followersCollapsed:!0,changeFollowersCollapsed:!0,commentFollowersCollapsed:!0,privacyCollapsed:!0,assigneesCollapsed:!0,membersCollapsed:!0,hasAccess:!1,logoIconSVG:"",mentionImg:""};for(i in a)c=a[i],null==e[i]&&(e[i]=c);e.isInNotifyDefaults&&(e.isFollowingComments=!0),null==e.people&&(e.people=e.members),e.shouldShowFollowerOptions=e.isFollowingChanges||e.isFollowingComments,s=Object.keys(a),l={key:function(t){return app.ko.unwrap(t.id)},create:function(e){return new t(e.data)}},r={observe:s,members:l,people:l,id:{create:function(t){return parseInt(t.data,10)}}},app.ko.mapping.fromJS(e,r,this),this.logoIcon.length&&n(this.logoIcon+"-regular",{color:this.logoColor.length?"#ffffff":"#999999"},{asNode:!1}).then(function(t){return function(e){return t.logoIconSVG(e),t.UpdateMentionImg()}}(this)),this.UpdateMentionImg(),this.setupComputedsAndSubscribers()}return s(i,e),i.prototype.UpdateProperties=function(t){var e,i,n,r,o,s,a,l;return null==t.membersLoaded&&(t.membersLoaded=!1),null==t.shouldPreselectMembers&&(t.shouldPreselectMembers=!1),t.pickerItemType="team",null==t.defaultImageUrl&&(t.defaultImageUrl="./tko/public/assets/svg/team-regular.svg"),null==t.logoUrl&&(t.logoUrl=""),null==t.formattedHandle&&(t.formattedHandle=""),null==t.companyId&&(t.companyId=0),null!=(null!=(e=t.company)?e.id:void 0)&&(t.companyId=t.company.id),null==t.companyName&&(t.companyName=""),null!=(null!=(i=t.company)?i.name:void 0)&&(t.companyName=t.company.name),null==t.parentTeamId&&(t.parentTeamId=0),null!=(null!=(n=t.parentTeam)?n.id:void 0)&&(t.parentTeamId=t.parentTeam.id/1),null==t.parentTeamName&&(t.parentTeamName=""),null!=(null!=(r=t.parentTeam)?r.name:void 0)&&(t.parentTeamName=t.parentTeam.name),null==t.rootTeamId&&(t.rootTeamId=0),null!=(null!=(o=t.rootTeam)?o.id:void 0)&&(t.rootTeamId=t.rootTeam.id/1),null==t.rootTeamName&&(t.rootTeamName=""),null!=(null!=(s=t.rootTeam)?s.name:void 0)&&(t.rootTeamName=t.rootTeam.name),null!=(null!=(a=t.company)?a.name:void 0)?(t.formattedHandle=t.company.name+" / @"+t.handle,t.linkedHandle="<a href='#/companies/"+t.company.id+"/teams'>"+t.company.name+"</a> / @"+t.handle):null!=(null!=(l=t.rootTeam)?l.handle:void 0)?(t.formattedHandle=t.rootTeam.name+" / @"+t.handle,t.linkedHandle="<a href='#/teams/"+t.rootTeam.id+"'>"+t.rootTeam.name+"</a> / @"+t.handle):(t.formattedHandle="@"+t.handle,t.linkedHandle="@"+t.handle),t.logoType=t.logoUrl.length?"image":t.logoIcon.length?"icon":"text",t.logoColor.length&&(t.logoColor=app.utility.GetValidHex(t.logoColor,!1)),null==t.logoIconSVG&&(t.logoIconSVG=""),null!=t.mentionImg?t.mentionImg:t.mentionImg=""},i.prototype.setupComputedsAndSubscribers=function(){return this.followerStatus=ko.computed({read:function(t){return function(){return t.isFollowingChanges()&&t.isFollowingComments()?"all":t.isFollowingChanges()?"changes":t.isFollowingComments()?"comments":"none"}}(this),write:function(t){return function(e){switch(e){case"changes":t.isFollowingChanges(!0),t.isFollowingComments(!1);break;case"comments":t.isFollowingChanges(!1),t.isFollowingComments(!0);break;case"all":t.isFollowingChanges(!0),t.isFollowingComments(!0);break;default:t.isFollowingChanges(!1),t.isFollowingComments(!1)}}}(this),owner:this})},i.prototype.UpdateMentionImg=function(){return this.mentionImg('<span class="h-mention__img">\n    '+this.GetLogo("u-team-logo--small")+"\n</span>")},i.prototype.GetLogo=function(t){return null==t&&(t=[]),app.utility.GetTeamLogo(this,t)},i}(e)}.apply(e,n))&&(t.exports=r)},1905:function(t,e){(function(e){t.exports=e}).call(e,{})},1911:function(t,e,i){var n,r;/*!
 * numeral.js
 * version : 1.5.3
 * author : Adam Draper
 * license : MIT
 * http://adamwdraper.github.com/Numeral-js/
 */
(function(){function o(t){this._value=t}function s(t,e,i,n){var r,o,s=Math.pow(10,e);return o=(i(t*s)/s).toFixed(e),n&&(r=new RegExp("0{1,"+n+"}$"),o=o.replace(r,"")),o}function a(t,e,i){return e.indexOf("$")>-1?c(t,e,i):e.indexOf("%")>-1?u(t,e,i):e.indexOf(":")>-1?p(t):h(t._value,e,i)}function l(t,e){var i,n,r,o,s,a=e,l=["KB","MB","GB","TB","PB","EB","ZB","YB"],c=!1;if(e.indexOf(":")>-1)t._value=d(e);else if(e===w)t._value=0;else{for("."!==v[b].delimiters.decimal&&(e=e.replace(/\./g,"").replace(v[b].delimiters.decimal,".")),i=new RegExp("[^a-zA-Z]"+v[b].abbreviations.thousand+"(?:\\)|(\\"+v[b].currency.symbol+")?(?:\\))?)?$"),n=new RegExp("[^a-zA-Z]"+v[b].abbreviations.million+"(?:\\)|(\\"+v[b].currency.symbol+")?(?:\\))?)?$"),r=new RegExp("[^a-zA-Z]"+v[b].abbreviations.billion+"(?:\\)|(\\"+v[b].currency.symbol+")?(?:\\))?)?$"),o=new RegExp("[^a-zA-Z]"+v[b].abbreviations.trillion+"(?:\\)|(\\"+v[b].currency.symbol+")?(?:\\))?)?$"),s=0;s<=l.length&&!(c=e.indexOf(l[s])>-1&&Math.pow(1024,s+1));s++);t._value=(c||1)*(a.match(i)?Math.pow(10,3):1)*(a.match(n)?Math.pow(10,6):1)*(a.match(r)?Math.pow(10,9):1)*(a.match(o)?Math.pow(10,12):1)*(e.indexOf("%")>-1?.01:1)*((e.split("-").length+Math.min(e.split("(").length-1,e.split(")").length-1))%2?1:-1)*Number(e.replace(/[^0-9\.]+/g,"")),t._value=c?Math.ceil(t._value):t._value}return t._value}function c(t,e,i){var n,r,o=e.indexOf("$"),s=e.indexOf("("),a=e.indexOf("-"),l="";return e.indexOf(" $")>-1?(l=" ",e=e.replace(" $","")):e.indexOf("$ ")>-1?(l=" ",e=e.replace("$ ","")):e=e.replace("$",""),r=h(t._value,e,i),1>=o?r.indexOf("(")>-1||r.indexOf("-")>-1?(r=r.split(""),n=1,(s>o||a>o)&&(n=0),r.splice(n,0,v[b].currency.symbol+l),r=r.join("")):r=v[b].currency.symbol+l+r:r.indexOf(")")>-1?(r=r.split(""),r.splice(-1,0,l+v[b].currency.symbol),r=r.join("")):r=r+l+v[b].currency.symbol,r}function u(t,e,i){var n,r="",o=100*t._value;return e.indexOf(" %")>-1?(r=" ",e=e.replace(" %","")):e=e.replace("%",""),n=h(o,e,i),n.indexOf(")")>-1?(n=n.split(""),n.splice(-1,0,r+"%"),n=n.join("")):n=n+r+"%",n}function p(t){var e=Math.floor(t._value/60/60),i=Math.floor((t._value-60*e*60)/60),n=Math.round(t._value-60*e*60-60*i);return e+":"+(10>i?"0"+i:i)+":"+(10>n?"0"+n:n)}function d(t){var e=t.split(":"),i=0;return 3===e.length?(i+=60*Number(e[0])*60,i+=60*Number(e[1]),i+=Number(e[2])):2===e.length&&(i+=60*Number(e[0]),i+=Number(e[1])),Number(i)}function h(t,e,i){var n,r,o,a,l,c,u=!1,p=!1,d=!1,h="",f=!1,m=!1,g=!1,y=!1,k=!1,x="",T="",C=Math.abs(t),I=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],_="",S=!1;if(0===t&&null!==w)return w;if(e.indexOf("(")>-1?(u=!0,e=e.slice(1,-1)):e.indexOf("+")>-1&&(p=!0,e=e.replace(/\+/g,"")),e.indexOf("a")>-1&&(f=e.indexOf("aK")>=0,m=e.indexOf("aM")>=0,g=e.indexOf("aB")>=0,y=e.indexOf("aT")>=0,k=f||m||g||y,e.indexOf(" a")>-1?(h=" ",e=e.replace(" a","")):e=e.replace("a",""),C>=Math.pow(10,12)&&!k||y?(h+=v[b].abbreviations.trillion,t/=Math.pow(10,12)):C<Math.pow(10,12)&&C>=Math.pow(10,9)&&!k||g?(h+=v[b].abbreviations.billion,t/=Math.pow(10,9)):C<Math.pow(10,9)&&C>=Math.pow(10,6)&&!k||m?(h+=v[b].abbreviations.million,t/=Math.pow(10,6)):(C<Math.pow(10,6)&&C>=Math.pow(10,3)&&!k||f)&&(h+=v[b].abbreviations.thousand,t/=Math.pow(10,3))),e.indexOf("b")>-1)for(e.indexOf(" b")>-1?(x=" ",e=e.replace(" b","")):e=e.replace("b",""),o=0;o<=I.length;o++)if(n=Math.pow(1024,o),r=Math.pow(1024,o+1),t>=n&&r>t){x+=I[o],n>0&&(t/=n);break}return e.indexOf("o")>-1&&(e.indexOf(" o")>-1?(T=" ",e=e.replace(" o","")):e=e.replace("o",""),T+=v[b].ordinal(t)),e.indexOf("[.]")>-1&&(d=!0,e=e.replace("[.]",".")),a=t.toString().split(".")[0],l=e.split(".")[1],c=e.indexOf(","),l?(l.indexOf("[")>-1?(l=l.replace("]",""),l=l.split("["),_=s(t,l[0].length+l[1].length,i,l[1].length)):_=s(t,l.length,i),a=_.split(".")[0],_=_.split(".")[1].length?v[b].delimiters.decimal+_.split(".")[1]:"",d&&0===Number(_.slice(1))&&(_="")):a=s(t,null,i),a.indexOf("-")>-1&&(a=a.slice(1),S=!0),c>-1&&(a=a.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+v[b].delimiters.thousands)),0===e.indexOf(".")&&(a=""),(u&&S?"(":"")+(!u&&S?"-":"")+(!S&&p?"+":"")+a+_+(T||"")+(h||"")+(x||"")+(u&&S?")":"")}function f(t,e){v[t]=e}function m(t){var e=t.toString().split(".");return e.length<2?1:Math.pow(10,e[1].length)}function g(){return Array.prototype.slice.call(arguments).reduce(function(t,e){var i=m(t),n=m(e);return i>n?i:n},-1/0)}var y,v={},b="en",w=null,k="0,0",x=void 0!==t&&t.exports;y=function(t){return y.isNumeral(t)?t=t.value():0===t||void 0===t?t=0:Number(t)||(t=y.fn.unformat(t)),new o(Number(t))},y.version="1.5.3",y.isNumeral=function(t){return t instanceof o},y.language=function(t,e){if(!t)return b;if(t&&!e){if(!v[t])throw new Error("Unknown language : "+t);b=t}return(e||!v[t])&&f(t,e),y},y.languageData=function(t){if(!t)return v[b];if(!v[t])throw new Error("Unknown language : "+t);return v[t]},y.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(t){var e=t%10;return 1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th"},currency:{symbol:"$"}}),y.zeroFormat=function(t){w="string"==typeof t?t:null},y.defaultFormat=function(t){k="string"==typeof t?t:"0.0"},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(t,e){"use strict";if(null===this||void 0===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var i,n,r=this.length>>>0,o=!1;for(1<arguments.length&&(n=e,o=!0),i=0;r>i;++i)this.hasOwnProperty(i)&&(o?n=t(n,this[i],i,this):(n=this[i],o=!0));if(!o)throw new TypeError("Reduce of empty array with no initial value");return n}),y.fn=o.prototype={clone:function(){return y(this)},format:function(t,e){return a(this,t||k,void 0!==e?e:Math.round)},unformat:function(t){return"[object Number]"===Object.prototype.toString.call(t)?t:l(this,t||k)},value:function(){return this._value},valueOf:function(){return this._value},set:function(t){return this._value=Number(t),this},add:function(t){function e(t,e){return t+i*e}var i=g.call(null,this._value,t);return this._value=[this._value,t].reduce(e,0)/i,this},subtract:function(t){function e(t,e){return t-i*e}var i=g.call(null,this._value,t);return this._value=[t].reduce(e,this._value*i)/i,this},multiply:function(t){function e(t,e){var i=g(t,e);return t*i*e*i/(i*i)}return this._value=[this._value,t].reduce(e,1),this},divide:function(t){function e(t,e){var i=g(t,e);return t*i/(e*i)}return this._value=[this._value,t].reduce(e),this},difference:function(t){return Math.abs(y(this._value).subtract(t).value())}},x&&(t.exports=y),"undefined"==typeof ender&&(this.numeral=y),i(1905)&&(n=[],void 0!==(r=function(){return y}.apply(e,n))&&(t.exports=r))}).call(this)},1923:function(t,e,i){var n,r;n=[i(1119),i(164)],void 0!==(r=function(t,e){var i,n;return n=function(t,e){var i;return i=t.indexOf(e),i>-1?[t.slice(0,i),t.slice(i+1)]:[t]},i=function(t,e){var r;return r=n(e,"."),null==r[1]?t[r[0]]:null!=t[r[0]]?i(t[r[0]],r[1]):null},{apiDispatcher:function(e){return function(i,n,r){return null==r&&(r={}),e.dispatch(i,n).then(function(e){var i;if(e)return i=(e[0]||e).data,{response:r.noCamelize?i:t.camelize(i)}}).catch(function(t){var e;return t.status=null!=(e=t.response)?e.status:void 0,Promise.reject(t)})}},stateAsObservable:function(t,i,n){var r,o;return o=e.observable(n),r=t.watch(i,o),function(t){return t?r():o()}},singleSync:function(t,e,i,n,r){var o,s;return o=r.subscribe(function(i){if(e(t))return t.commit("storeSync",n(i))}),s=t.watch(i,function(t){if(null!=r)return r(t)}),function(){return o(),s()}},storeSync:function(t,e,r,o){var s;return s=o.map(function(o){var s;return s=i(r,o),s&&s.subscribe?s.subscribe(function(r){if(null!=e(t.state))return t.commit("storeSync",function(t){var s;return-1===o.indexOf(".")?e(t)[o]=r:(s=n(o,"."),i(e(t),s[0])[s[1]]=r)})}):function(){}}),s.push.apply(s,o.map(function(n){return t.watch(function(t){return e(t)&&i(e(t),n)},function(t){var e;if(null!=(e=i(r,n)))return e(t)})})),r._disposeStoreSync=function(){return s.forEach(function(t){return t()})}},disposeStoreSync:function(t){return null!=t&&"function"==typeof t._disposeStoreSync?t._disposeStoreSync():void 0}}}.apply(e,n))&&(t.exports=r)},1924:function(t,e,i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}};n=[i(1117)],void 0!==(r=function(t){return function(){function e(t){this.toJSON=o(this.toJSON,this),this.isSameThresholdAndMedium=o(this.isSameThresholdAndMedium,this),this.SetupComputedsAndSubscribers=o(this.SetupComputedsAndSubscribers,this),this.UpdateData=o(this.UpdateData,this),this.componentName="BudgetNotification",null==t&&(t=this.GetNewJSON()),this.UpdateProperties(t),ko.mapping.fromJS(t,e.mapping,this),this.SetupComputedsAndSubscribers()}return e.prototype.UpdateProperties=function(t){var e;null!=t.capacityThreshold&&(t.capacityThreshold=~~t.capacityThreshold),null!=t.id&&(t.id=~~t.id),null!=t.notificationMedium&&(t.notificationMedium=null!=(e=t.notificationMedium)?e.toLowerCase():void 0),null!=t.projectId&&(t.projectId=~~t.projectId)},e.prototype.UpdateData=function(t){this.UpdateProperties(t),ko.mapping.fromJS(t,e.mapping,this),this.SetupComputedsAndSubscribers()},e.prototype.SetupComputedsAndSubscribers=function(){if(!this.notifyIds)return this.notifyIds=ko.pureComputed({read:function(t){return function(){return[].concat(t.companyIds().map(function(t){return"c"+t}),t.teamIds().map(function(t){return"t"+t}),t.userIds())}}(this),write:function(t){return function(e){var i;i=app.utility.parseAccessList(e),t.companyIds(i.companyIdList),t.teamIds(i.teamIdList),t.userIds(i.userIdList)}}(this)})},e.prototype.isSameThresholdAndMedium=function(t){return["capacityThreshold","notificationMedium"].every(function(e){return function(i){return e[i]()===t[i]()}}(this))},e.prototype.toJSON=function(){return ko.mapping.toJS(this)},e.prototype.Clone=function(){return new e(this.toJSON())},e.prototype.Save=function(){var e;return this.id()>0?(e=app.prefixApi("budget/notifications/"+this.id()+".json","API_PREFIX_V3","API_PREFIX_V3"),app.api.patch(e,{notification:{capacityThreshold:this.capacityThreshold(),companyIds:this.companyIds(),id:this.id(),notificationMedium:this.notificationMedium().toUpperCase(),projectId:this.projectId(),teamIds:this.teamIds(),userIds:this.userIds()}}).then(function(t){return function(t){return t.response}}()).then(function(t){return function(e){var i,n;return n=e.notification,t.UpdateData(n),i=t.id()>0?app.consts.ACTIONTYPE.UPDATED:app.consts.ACTIONTYPE.ADDED,app.ko.postbox.publish("allTWEvents",{eventTime:new Date,itemType:"budgetNotification",actionType:i,itemId:t.id(),extraInfo:{fromPostbox:!0}}),e}}(this))):t.resolve()},e.prototype.Delete=function(){var t;return t=app.prefixApi("budget/notifications/"+this.id()+".json","API_PREFIX_V3","API_PREFIX_V3"),app.api.delete(t)},e.FetchData=function(e){var i,n,r;return null==e&&(e={}),app.featureFlip.check("projecttimebudgets")()?(i=ko.unwrap(e.id),n=ko.unwrap(e.projectId),i>0?r="budgets/"+i+".json":n>0&&(r="budgets.json?projectIds="+n+"&status=active&pageSize=1"),null==r?t.resolve():(r=app.prefixApi(r,"API_PREFIX_V3","API_PREFIX_V3"),app.api.get(r).then(function(t){return t.response.budgets[0]}))):(console.warn("Price plan does not support time budgets"),t.resolve())},e.prototype.GetNewJSON=function(){return{capacityThreshold:80,companyIds:[],id:0,notificationMedium:"email",projectId:0,teamIds:[],userIds:[]}},e.types=[{id:"email",text:app.tl("Email Reminder")},{id:"sms",text:app.tl("SMS Reminder")},{id:"push",text:app.tl("Mobile Push Reminder")}],e.mapping={},e}()}.apply(e,n))&&(t.exports=r)},1933:function(t,e,i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}};n=[i(164)],void 0!==(r=function(t){var e;return e=function(){function e(t,e){this.loadCompany=o(this.loadCompany,this),this.company=t,console.assert("number"==typeof e),this.id=e,this.id>0?(this.init(),this.loadCompany()):this.error(new Error("Invalid ID: "+e))}return e.normalizeParams=function(e){return[parseInt(t.unwrap(e,10))||0]},e.prototype.loadCompany=function(){var t,e,i,n;if(t=null!=(e=null!=(i=app.currentFilter())&&null!=(n=i.fulldata)?n.companies:void 0)?e:{},null!=t[this.id])return this.ready(t[this.id]);app.api.get("companies/"+this.id+".json",{},{emitError:!1}).then(function(t){return function(e){t.ready(e.response.company)}}(this)).catch(function(t){return function(e){t.error(new Error("Failed to load a company"),e)}}(this))},e.prototype.init=function(){this.company({ready:!1,error:null})},e.prototype.error=function(t,e){e&&(t.cause=e),this.company({ready:!0,error:t})},e.prototype.ready=function(t){t.ready=!0,t.error=null,this.company(t)},e.getCompany=app.shared.getResource.bind(app.shared,"company"),e}(),app.shared.registerResourceProvider("company",e),e}.apply(e,n))&&(t.exports=r)},2303:function(t,e){t.exports='<span class="upload-external-button btn btn-success w-loader__label" data-color="green" data-size="s" data-bind="loader: isSubmitting, loaderOptions: {progress: progress}, setRootElement: {}, visible: isAuthed, disable: buttonDisabled()">\n\t<i class="fa fa-cloud-upload" aria-hidden="true"></i>\n\t<span>{{buttonText}}</span>\n\t<input class="upload-external-input" type="file" name="file">\n</span>\n<span class="upload-external-button cancel btn btn-danger" data-bind="visible: showCancel() && uploading(), click: cancelUpload">\n\t<i class="fa fa-times-circle" aria-hidden="true"></i>\n\t<span>{{app.tl(\'Cancel\')}}</span>\n</span>'},3539:function(t,e,i){"use strict";(function(e){/**
 * filesize
 *
 * @copyright 2016 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 3.3.0
 */
!function(e){function i(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=[],o=0,s=void 0,a=void 0,l=void 0,c=void 0,u=void 0,p=void 0,d=void 0,h=void 0,f=void 0,m=void 0,g=void 0,y=void 0;if(isNaN(t))throw new Error("Invalid arguments");return l=!0===e.bits,f=!0===e.unix,a=e.base||2,h=void 0!==e.round?e.round:f?1:2,m=void 0!==e.spacer?e.spacer:f?"":" ",y=e.symbols||e.suffixes||{},g=2===a?e.standard||"jedec":"jedec",d=e.output||"string",s=void 0!==e.exponent?e.exponent:-1,p=Number(t),u=p<0,c=a>2?1e3:1024,u&&(p=-p),0===p?(i[0]=0,i[1]=f?"":l?"b":"B"):((-1===s||isNaN(s))&&(s=Math.floor(Math.log(p)/Math.log(c)))<0&&(s=0),s>8&&(s=8),o=2===a?p/Math.pow(2,10*s):p/Math.pow(1e3,s),l&&(o*=8)>c&&s<8&&(o/=c,s++),i[0]=Number(o.toFixed(s>0?h:0)),i[1]=10===a&&1===s?l?"kb":"kB":r[g][l?"bits":"bytes"][s],f&&(i[1]="jedec"===g?i[1].charAt(0):s>0?i[1].replace(/B$/,""):i[1],n.test(i[1])&&(i[0]=Math.floor(i[0]),i[1]=""))),u&&(i[0]=-i[0]),i[1]=y[i[1]]||i[1],"array"===d?i:"exponent"===d?s:"object"===d?{value:i[0],suffix:i[1],symbol:i[1]}:i.join(m)}var n=/^(b|B)$/,r={iec:{bits:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}};t.exports=i}("undefined"!=typeof window&&window)}).call(e,i(28))},3556:function(t,e,i){var n,r,o;/*! nouislider - 8.5.1 - 2016-04-24 16:00:29 */
!function(i){r=[],n=i,void 0!==(o="function"==typeof n?n.apply(e,r):n)&&(t.exports=o)}(function(){"use strict";function t(t){return t.filter(function(t){return!this[t]&&(this[t]=!0)},{})}function e(t,e){return Math.round(t/e)*e}function i(t){var e=t.getBoundingClientRect(),i=t.ownerDocument,n=i.documentElement,r=p();return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(r.x=0),{top:e.top+r.y-n.clientTop,left:e.left+r.x-n.clientLeft}}function n(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function r(t,e,i){l(t,e),setTimeout(function(){c(t,e)},i)}function o(t){return Math.max(Math.min(t,100),0)}function s(t){return Array.isArray(t)?t:[t]}function a(t){var e=t.split(".");return e.length>1?e[1].length:0}function l(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function c(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function u(t,e){return t.classList?t.classList.contains(e):new RegExp("\\b"+e+"\\b").test(t.className)}function p(){var t=void 0!==window.pageXOffset,e="CSS1Compat"===(document.compatMode||"");return{x:t?window.pageXOffset:e?document.documentElement.scrollLeft:document.body.scrollLeft,y:t?window.pageYOffset:e?document.documentElement.scrollTop:document.body.scrollTop}}function d(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function h(t,e){return 100/(e-t)}function f(t,e){return 100*e/(t[1]-t[0])}function m(t,e){return f(t,t[0]<0?e+Math.abs(t[0]):e-t[0])}function g(t,e){return e*(t[1]-t[0])/100+t[0]}function y(t,e){for(var i=1;t>=e[i];)i+=1;return i}function v(t,e,i){if(i>=t.slice(-1)[0])return 100;var n,r,o,s,a=y(i,t);return n=t[a-1],r=t[a],o=e[a-1],s=e[a],o+m([n,r],i)/h(o,s)}function b(t,e,i){if(i>=100)return t.slice(-1)[0];var n,r,o,s,a=y(i,e);return n=t[a-1],r=t[a],o=e[a-1],s=e[a],g([n,r],(i-o)*h(o,s))}function w(t,i,n,r){if(100===r)return r;var o,s,a=y(r,t);return n?(o=t[a-1],s=t[a],r-o>(s-o)/2?s:o):i[a-1]?t[a-1]+e(r-t[a-1],i[a-1]):r}function k(t,e,i){var r;if("number"==typeof e&&(e=[e]),"[object Array]"!==Object.prototype.toString.call(e))throw new Error("noUiSlider: 'range' contains invalid value.");if(r="min"===t?0:"max"===t?100:parseFloat(t),!n(r)||!n(e[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");i.xPct.push(r),i.xVal.push(e[0]),r?i.xSteps.push(!isNaN(e[1])&&e[1]):isNaN(e[1])||(i.xSteps[0]=e[1])}function x(t,e,i){return!e||void(i.xSteps[t]=f([i.xVal[t],i.xVal[t+1]],e)/h(i.xPct[t],i.xPct[t+1]))}function T(t,e,i,n){this.xPct=[],this.xVal=[],this.xSteps=[n||!1],this.xNumSteps=[!1],this.snap=e,this.direction=i;var r,o=[];for(r in t)t.hasOwnProperty(r)&&o.push([t[r],r]);for(o.length&&"object"==typeof o[0][0]?o.sort(function(t,e){return t[0][0]-e[0][0]}):o.sort(function(t,e){return t[0]-e[0]}),r=0;r<o.length;r++)k(o[r][1],o[r][0],this);for(this.xNumSteps=this.xSteps.slice(0),r=0;r<this.xNumSteps.length;r++)x(r,this.xNumSteps[r],this)}function C(t,e){if(!n(e))throw new Error("noUiSlider: 'step' is not numeric.");t.singleStep=e}function I(t,e){if("object"!=typeof e||Array.isArray(e))throw new Error("noUiSlider: 'range' is not an object.");if(void 0===e.min||void 0===e.max)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");if(e.min===e.max)throw new Error("noUiSlider: 'range' 'min' and 'max' cannot be equal.");t.spectrum=new T(e,t.snap,t.dir,t.singleStep)}function _(t,e){if(e=s(e),!Array.isArray(e)||!e.length||e.length>2)throw new Error("noUiSlider: 'start' option is incorrect.");t.handles=e.length,t.start=e}function S(t,e){if(t.snap=e,"boolean"!=typeof e)throw new Error("noUiSlider: 'snap' option must be a boolean.")}function A(t,e){if(t.animate=e,"boolean"!=typeof e)throw new Error("noUiSlider: 'animate' option must be a boolean.")}function O(t,e){if(t.animationDuration=e,"number"!=typeof e)throw new Error("noUiSlider: 'animationDuration' option must be a number.")}function P(t,e){if("lower"===e&&1===t.handles)t.connect=1;else if("upper"===e&&1===t.handles)t.connect=2;else if(!0===e&&2===t.handles)t.connect=3;else{if(!1!==e)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");t.connect=0}}function E(t,e){switch(e){case"horizontal":t.ort=0;break;case"vertical":t.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function M(t,e){if(!n(e))throw new Error("noUiSlider: 'margin' option must be numeric.");if(0!==e&&(t.margin=t.spectrum.getMargin(e),!t.margin))throw new Error("noUiSlider: 'margin' option is only supported on linear sliders.")}function L(t,e){if(!n(e))throw new Error("noUiSlider: 'limit' option must be numeric.");if(t.limit=t.spectrum.getMargin(e),!t.limit)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders.")}function D(t,e){switch(e){case"ltr":t.dir=0;break;case"rtl":t.dir=1,t.connect=[0,2,1,3][t.connect];break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function j(t,e){if("string"!=typeof e)throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var i=e.indexOf("tap")>=0,n=e.indexOf("drag")>=0,r=e.indexOf("fixed")>=0,o=e.indexOf("snap")>=0,s=e.indexOf("hover")>=0;if(n&&!t.connect)throw new Error("noUiSlider: 'drag' behaviour must be used with 'connect': true.");t.events={tap:i||o,drag:n,fixed:r,snap:o,hover:s}}function N(t,e){var i;if(!1!==e)if(!0===e)for(t.tooltips=[],i=0;i<t.handles;i++)t.tooltips.push(!0);else{if(t.tooltips=s(e),t.tooltips.length!==t.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");t.tooltips.forEach(function(t){if("boolean"!=typeof t&&("object"!=typeof t||"function"!=typeof t.to))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")})}}function F(t,e){if(t.format=e,"function"==typeof e.to&&"function"==typeof e.from)return!0;throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.")}function R(t,e){if(void 0!==e&&"string"!=typeof e&&!1!==e)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");t.cssPrefix=e}function U(t,e){if(void 0!==e&&"object"!=typeof e)throw new Error("noUiSlider: 'cssClasses' must be an object.");if("string"==typeof t.cssPrefix){t.cssClasses={};for(var i in e)e.hasOwnProperty(i)&&(t.cssClasses[i]=t.cssPrefix+e[i])}else t.cssClasses=e}function z(t){var e,i={margin:0,limit:0,animate:!0,animationDuration:300,format:$};e={step:{r:!1,t:C},start:{r:!0,t:_},connect:{r:!0,t:P},direction:{r:!0,t:D},snap:{r:!1,t:S},animate:{r:!1,t:A},animationDuration:{r:!1,t:O},range:{r:!0,t:I},orientation:{r:!1,t:E},margin:{r:!1,t:M},limit:{r:!1,t:L},behaviour:{r:!0,t:j},format:{r:!1,t:F},tooltips:{r:!1,t:N},cssPrefix:{r:!1,t:R},cssClasses:{r:!1,t:U}};var n={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",cssPrefix:"noUi-",cssClasses:{target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",ltr:"ltr",rtl:"rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",stacking:"stacking",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"}};return Object.keys(e).forEach(function(r){if(void 0===t[r]&&void 0===n[r]){if(e[r].r)throw new Error("noUiSlider: '"+r+"' is required.");return!0}e[r].t(i,void 0===t[r]?n[r]:t[r])}),i.pips=t.pips,i.style=i.ort?"top":"left",i}function B(e,n,h){function f(t,e,i){var n=t+e[0],r=t+e[1];return i?(0>n&&(r+=Math.abs(n)),r>100&&(n-=r-100),[o(n),o(r)]):[n,r]}function m(t,e){t.preventDefault();var i,n,r=0===t.type.indexOf("touch"),o=0===t.type.indexOf("mouse"),s=0===t.type.indexOf("pointer"),a=t;return 0===t.type.indexOf("MSPointer")&&(s=!0),r&&(i=t.changedTouches[0].pageX,n=t.changedTouches[0].pageY),e=e||p(),(o||s)&&(i=t.clientX+e.x,n=t.clientY+e.y),a.pageOffset=e,a.points=[i,n],a.cursor=o||s,a}function g(t,e){var i=document.createElement("div"),r=document.createElement("div"),o=[n.cssClasses.handleLower,n.cssClasses.handleUpper];return t&&o.reverse(),l(r,n.cssClasses.handle),l(r,o[e]),l(i,n.cssClasses.origin),i.appendChild(r),i}function y(t,e){if(!n.tooltips[e])return!1;var i=document.createElement("div");return i.className=n.cssClasses.tooltip,t.firstChild.appendChild(i)}function v(t,e,i){if("range"===t||"steps"===t)return q.xVal;if("count"===t){var n,r=100/(e-1),o=0;for(e=[];(n=o++*r)<=100;)e.push(n);t="positions"}return"positions"===t?e.map(function(t){return q.fromStepping(i?q.getStep(t):t)}):"values"===t?i?e.map(function(t){return q.fromStepping(q.getStep(q.toStepping(t)))}):e:void 0}function b(e,i,n){function r(t,e){return(t+e).toFixed(7)/1}var o=q.direction,s={},a=q.xVal[0],l=q.xVal[q.xVal.length-1],c=!1,u=!1,p=0;return q.direction=0,n=t(n.slice().sort(function(t,e){return t-e})),n[0]!==a&&(n.unshift(a),c=!0),n[n.length-1]!==l&&(n.push(l),u=!0),n.forEach(function(t,o){var a,l,d,h,f,m,g,y,v,b,w=t,k=n[o+1];if("steps"===i&&(a=q.xNumSteps[o]),a||(a=k-w),!1!==w&&void 0!==k)for(l=w;k>=l;l=r(l,a)){for(h=q.toStepping(l),f=h-p,y=f/e,v=Math.round(y),b=f/v,d=1;v>=d;d+=1)m=p+d*b,s[m.toFixed(5)]=["x",0];g=n.indexOf(l)>-1?1:"steps"===i?2:0,!o&&c&&(g=0),l===k&&u||(s[h.toFixed(5)]=[l,g]),p=h}}),q.direction=o,s}function w(t,e,i){function r(t,e){var i=e===n.cssClasses.value,r=i?d:h,o=i?u:p;return e+" "+r[n.ort]+" "+o[t]}function o(t,e,i){return'class="'+r(i[1],e)+'" style="'+n.style+": "+t+'%"'}function s(t,r){q.direction&&(t=100-t),r[1]=r[1]&&e?e(r[0],r[1]):r[1],c+="<div "+o(t,n.cssClasses.marker,r)+"></div>",r[1]&&(c+="<div "+o(t,n.cssClasses.value,r)+">"+i.to(r[0])+"</div>")}var a=document.createElement("div"),c="",u=[n.cssClasses.valueNormal,n.cssClasses.valueLarge,n.cssClasses.valueSub],p=[n.cssClasses.markerNormal,n.cssClasses.markerLarge,n.cssClasses.markerSub],d=[n.cssClasses.valueHorizontal,n.cssClasses.valueVertical],h=[n.cssClasses.markerHorizontal,n.cssClasses.markerVertical];return l(a,n.cssClasses.pips),l(a,0===n.ort?n.cssClasses.pipsHorizontal:n.cssClasses.pipsVertical),Object.keys(t).forEach(function(e){s(e,t[e])}),a.innerHTML=c,a}function k(t){var e=t.mode,i=t.density||1,n=t.filter||!1,r=t.values||!1,o=t.stepped||!1,s=v(e,r,o),a=b(i,e,s),l=t.format||{to:Math.round};return G.appendChild(w(a,n,l))}function x(){var t=H.getBoundingClientRect(),e="offset"+["Width","Height"][n.ort];return 0===n.ort?t.width||H[e]:t.height||H[e]}function T(t,e,i){var r;for(r=0;r<n.handles;r++)if(-1===W[r])return;void 0!==e&&1!==n.handles&&(e=Math.abs(e-n.dir)),Object.keys(Q).forEach(function(n){var r=n.split(".")[0];t===r&&Q[n].forEach(function(t){t.call(Y,s(j()),e,s(C(Array.prototype.slice.call(X))),i||!1,W)})})}function C(t){return 1===t.length?t[0]:n.dir?t.reverse():t}function I(t,e,i,r){var o=function(e){return!G.hasAttribute("disabled")&&(!u(G,n.cssClasses.tap)&&(e=m(e,r.pageOffset),!(t===V.start&&void 0!==e.buttons&&e.buttons>1)&&((!r.hover||!e.buttons)&&(e.calcPoint=e.points[n.ort],void i(e,r)))))},s=[];return t.split(" ").forEach(function(t){e.addEventListener(t,o,!1),s.push([t,o])}),s}function _(t,e){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===t.buttons&&0!==e.buttonsProperty)return S(t,e);var i,n,r=e.handles||$,o=!1,s=100*(t.calcPoint-e.start)/e.baseSize,a=r[0]===$[0]?0:1;if(i=f(s,e.positions,r.length>1),o=M(r[0],i[a],1===r.length),r.length>1){if(o=M(r[1],i[a?0:1],!1)||o)for(n=0;n<e.handles.length;n++)T("slide",n)}else o&&T("slide",a)}function S(t,e){var i=H.querySelector("."+n.cssClasses.active),r=e.handles[0]===$[0]?0:1;null!==i&&c(i,n.cssClasses.active),t.cursor&&(document.body.style.cursor="",document.body.removeEventListener("selectstart",document.body.noUiListener));var o=document.documentElement;o.noUiListeners.forEach(function(t){o.removeEventListener(t[0],t[1])}),c(G,n.cssClasses.drag),T("set",r),T("change",r),void 0!==e.handleNumber&&T("end",e.handleNumber)}function A(t,e){"mouseout"===t.type&&"HTML"===t.target.nodeName&&null===t.relatedTarget&&S(t,e)}function O(t,e){var i=document.documentElement;if(1===e.handles.length){if(e.handles[0].hasAttribute("disabled"))return!1;l(e.handles[0].children[0],n.cssClasses.active)}t.preventDefault(),t.stopPropagation();var r=I(V.move,i,_,{start:t.calcPoint,baseSize:x(),pageOffset:t.pageOffset,handles:e.handles,handleNumber:e.handleNumber,buttonsProperty:t.buttons,positions:[W[0],W[$.length-1]]}),o=I(V.end,i,S,{handles:e.handles,handleNumber:e.handleNumber}),s=I("mouseout",i,A,{handles:e.handles,handleNumber:e.handleNumber});if(i.noUiListeners=r.concat(o,s),t.cursor){document.body.style.cursor=getComputedStyle(t.target).cursor,$.length>1&&l(G,n.cssClasses.drag);var a=function(){return!1};document.body.noUiListener=a,document.body.addEventListener("selectstart",a,!1)}void 0!==e.handleNumber&&T("start",e.handleNumber)}function P(t){var e,o,s=t.calcPoint,a=0;return t.stopPropagation(),$.forEach(function(t){a+=i(t)[n.style]}),e=a/2>s||1===$.length?0:1,$[e].hasAttribute("disabled")&&(e=e?0:1),s-=i(H)[n.style],o=100*s/x(),n.events.snap||r(G,n.cssClasses.tap,n.animationDuration),!$[e].hasAttribute("disabled")&&(M($[e],o),T("slide",e,!0),T("set",e,!0),T("change",e,!0),void(n.events.snap&&O(t,{handles:[$[e]]})))}function E(t){var e=t.calcPoint-i(H)[n.style],r=q.getStep(100*e/x()),o=q.fromStepping(r);Object.keys(Q).forEach(function(t){"hover"===t.split(".")[0]&&Q[t].forEach(function(t){t.call(Y,o)})})}function M(t,e,i){var r=t!==$[0]?1:0,s=W[0]+n.margin,a=W[1]-n.margin,u=W[0]+n.limit,p=W[1]-n.limit;return $.length>1&&(e=r?Math.max(e,s):Math.min(e,a)),!1!==i&&n.limit&&$.length>1&&(e=r?Math.min(e,u):Math.max(e,p)),e=q.getStep(e),(e=o(e))!==W[r]&&(window.requestAnimationFrame?window.requestAnimationFrame(function(){t.style[n.style]=e+"%"}):t.style[n.style]=e+"%",t.previousSibling||(c(t,n.cssClasses.stacking),e>50&&l(t,n.cssClasses.stacking)),W[r]=e,X[r]=q.fromStepping(e),T("update",r),!0)}function L(t,e){var i,r,o;for(n.limit&&(t+=1),i=0;t>i;i+=1)r=i%2,null!==(o=e[r])&&!1!==o&&("number"==typeof o&&(o=String(o)),(!1===(o=n.format.from(o))||isNaN(o)||!1===M($[r],q.toStepping(o),i===3-n.dir))&&T("update",r))}function D(t,e){var i,o,a=s(t);for(e=void 0===e||!!e,n.dir&&n.handles>1&&a.reverse(),n.animate&&-1!==W[0]&&r(G,n.cssClasses.tap,n.animationDuration),i=$.length>1?3:1,1===a.length&&(i=1),L(i,a),o=0;o<$.length;o++)null!==a[o]&&e&&T("set",o)}function j(){var t,e=[];for(t=0;t<n.handles;t+=1)e[t]=n.format.to(X[t]);return C(e)}function N(){for(var t in n.cssClasses)n.cssClasses.hasOwnProperty(t)&&c(G,n.cssClasses[t]);for(;G.firstChild;)G.removeChild(G.firstChild);delete G.noUiSlider}function F(){return C(W.map(function(t,e){var i=q.getApplicableStep(t),n=a(String(i[2])),r=X[e],o=100===t?null:i[2],s=Number((r-i[2]).toFixed(n));return[0===t?null:s>=i[1]?i[2]:i[0]||!1,o]}))}function R(t,e){Q[t]=Q[t]||[],Q[t].push(e),"update"===t.split(".")[0]&&$.forEach(function(t,e){T("update",e)})}function U(t){var e=t&&t.split(".")[0],i=e&&t.substring(e.length);Object.keys(Q).forEach(function(t){var n=t.split(".")[0],r=t.substring(n.length);e&&e!==n||i&&i!==r||delete Q[t]})}function B(t,e){var i=j(),r=z({start:[0,0],margin:t.margin,limit:t.limit,step:void 0===t.step?n.singleStep:t.step,range:t.range,animate:t.animate,snap:void 0===t.snap?n.snap:t.snap});["margin","limit","range","animate"].forEach(function(e){void 0!==t[e]&&(n[e]=t[e])}),r.spectrum.direction=q.direction,q=r.spectrum,W=[-1,-1],D(t.start||i,e)}var H,$,Y,V=d(),G=e,W=[-1,-1],q=n.spectrum,X=[],Q={};if(G.noUiSlider)throw new Error("Slider was already initialized.");return H=function(t,e,i){l(i,n.cssClasses.target),0===t?l(i,n.cssClasses.ltr):l(i,n.cssClasses.rtl),0===e?l(i,n.cssClasses.horizontal):l(i,n.cssClasses.vertical);var r=document.createElement("div");return l(r,n.cssClasses.base),i.appendChild(r),r}(n.dir,n.ort,G),$=function(t,e,i){var n,r=[];for(n=0;t>n;n+=1)r.push(i.appendChild(g(e,n)));return r}(n.handles,n.dir,H),function(t,e,i){switch(t){case 1:l(e,n.cssClasses.connect),l(i[0],n.cssClasses.background);break;case 3:l(i[1],n.cssClasses.background);case 2:l(i[0],n.cssClasses.connect);case 0:l(e,n.cssClasses.background)}}(n.connect,G,$),n.pips&&k(n.pips),n.tooltips&&function(){n.dir&&n.tooltips.reverse();var t=$.map(y);n.dir&&(t.reverse(),n.tooltips.reverse()),R("update",function(e,i,r){t[i]&&(t[i].innerHTML=!0===n.tooltips[i]?e[i]:n.tooltips[i].to(r[i]))})}(),Y={destroy:N,steps:F,on:R,off:U,get:j,set:D,updateOptions:B,options:h,target:G,pips:k},function(t){if(t.fixed||$.forEach(function(t,e){I(V.start,t.children[0],O,{handles:[t],handleNumber:e})}),t.tap&&I(V.start,H,P,{handles:$}),t.hover&&I(V.move,H,E,{hover:!0}),t.drag){var e=[H.querySelector("."+n.cssClasses.connect)];l(e[0],n.cssClasses.draggable),t.fixed&&e.push($[e[0]===$[0]?1:0].children[0]),e.forEach(function(t){I(V.start,t,O,{handles:$})})}}(n.events),Y}function H(t,e){if(!t.nodeName)throw new Error("noUiSlider.create requires a single element.");var i=z(e,t),n=B(t,i,e);return n.set(i.start),t.noUiSlider=n,n}T.prototype.getMargin=function(t){return 2===this.xPct.length&&f(this.xVal,t)},T.prototype.toStepping=function(t){return t=v(this.xVal,this.xPct,t),this.direction&&(t=100-t),t},T.prototype.fromStepping=function(t){return this.direction&&(t=100-t),b(this.xVal,this.xPct,t)},T.prototype.getStep=function(t){return this.direction&&(t=100-t),t=w(this.xPct,this.xSteps,this.snap,t),this.direction&&(t=100-t),t},T.prototype.getApplicableStep=function(t){var e=y(t,this.xPct),i=100===t?2:1;return[this.xNumSteps[e-2],this.xVal[e-i],this.xNumSteps[e-i]]},T.prototype.convert=function(t){return this.getStep(this.toStepping(t))};var $={to:function(t){return void 0!==t&&t.toFixed(2)},from:Number};return{create:H}})},4468:function(t,e,i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}};n=[i(164),i(1116)],void 0!==(r=function(t,e){var i;return i=function(){function i(i,n,r,s,a,l,c,u,p,d,h,f,m,g,y){this.loadAvailablePeople=o(this.loadAvailablePeople,this),this.GetUrl=o(this.GetUrl,this),this.OnNotifyTWEvent=o(this.OnNotifyTWEvent,this),this.updateAvailablePeople=o(this.updateAvailablePeople,this);var v;if(this.subscriptions=[],this.availablePeople=i,console.assert("boolean"==(v=typeof n)||"undefined"===v),n)return this.updateAvailablePeople([],!0);console.assert("string"==typeof r),this.itemType=r,console.assert("number"==typeof s),this.itemId=s,console.assert("number"==typeof a),this.projectId=a,console.assert("string"==typeof l),this.projectStatus=l,console.assert("string"==typeof c),this.privacyIds=c,console.assert("boolean"==typeof u),this.getRoles=u,console.assert("string"==typeof p),this.userType=p,console.assert("string"==typeof d),this.type=d,console.assert("string"==typeof h),this.searchTerm=h,console.assert("string"==typeof f),this.include=f,this.includeDeletedUsers=m,this.includeUsersWithoutProjects=g,this.includeObservers=y,this.url=this.GetUrl(),this.updateAvailablePeople([],!1),this.subscriptions.push(this.dataLoader=new e(this.url,{listField:"people",pageSize:200,loadNow:!1,onLoad:function(t){return function(e){return t.updateAvailablePeople(t.dataLoader.list(),!0)}}(this)})),this.loadAvailablePeople(),this.subscriptions.push(t.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent))}return i.normalizeParams=function(e){var i,n,r,o,s,a,l,c,u,p,d,h,f,m,g,y,v,b,w,k,x,T,C,I,_,S;return null==(e=t.unwrap(e))?[]:t.unwrap(null!=e?e.empty:void 0)?[i=!0]:(i=!1,c=null!=(h=t.unwrap(e.itemType))?h:"",l=null!=(f=t.unwrap(e.itemId))?f:0,p=null!=(y=t.unwrap(e.projectId))?y:0,d=null!=(v=t.unwrap(e.projectStatus))?v:"",u=null!=(b=t.unwrap(e.privacyIds))?b:"",Array.isArray(u)&&(u=u.join(",")),n=null!=(w=t.unwrap(e.getRoles))&&w,S=null!=(k=t.unwrap(e.userType))?k:"all",_=null!=(x=t.unwrap(e.type))?x:"",I=null!=(T=t.unwrap(e.searchTerm))?T:"",r=null!=(C=t.unwrap(e.include))?C:"",o=t.unwrap(e.includeDeletedUsers),a=null!=(m=t.unwrap(e.includeUsersWithoutProjects))&&m,s=null!=(g=t.unwrap(e.includeObservers))?g:app.loggedInUser.inOwnerCompany(),[i,c,l,p,d,u,n,S,_,I,r,o,a,s])},i.prototype.updateAvailablePeople=function(t,e){var i;i=t.slice(),i.dataLoader=this.dataLoader,i.ready=e,this.availablePeople(i)},i.prototype.OnNotifyTWEvent=function(t){var e;"person"!==t.itemType||(e=t.actionType)!==app.consts.ACTIONTYPE.ADDED&&e!==app.consts.ACTIONTYPE.DELETED||this.loadAvailablePeople()},i.prototype.GetUrl=function(){var t,e,i,n;return t=!0,""===this.itemType?(n=this.projectId>0?app.prefixApi("projects/"+this.projectId+"/people.json","API_PREFIX_V2","API_PREFIX_V2"):app.prefixApi("people.json","API_PREFIX_V2","API_PREFIX_V2"),n+="?type="+this.userType,t=!1,this.searchTerm.length&&(n+="&searchTerm="+this.searchTerm)):"comments"===(e=this.itemType)||"time"===e?(n=this.projectId>0?"projects/"+this.projectId+"/"+this.itemType+"/people.json":this.itemType+"/people.json",this.projectStatus.length&&(n+=t?"?":"&",t=!1,n+="projectStatus="+this.projectStatus),this.searchTerm.length&&(n+=t?"?":"&",t=!1,n+="searchTerm="+this.searchTerm),this.type.length&&(n+=t?"?":"&",t=!1,n+="type="+this.type)):"task"!==(i=this.itemType)&&"milestone"!==i||0!==this.projectId?"calendar"===this.itemType?(n="calendar/people.json",this.searchTerm.length&&(n+="?searchTerm="+this.searchTerm,t=!1)):(n="availablePeople.json?",this.privacyIds.length>0?(n+="for=grantAccessTo&grantAccessTo="+this.privacyIds,this.itemType&&(n+="&itemType="+this.itemType),this.projectId>0&&(n+="&projectId="+this.projectId)):this.itemType&&this.itemId>0?n+="for="+this.itemType+"&id="+this.itemId:this.itemType&&this.projectId>0?n+="for="+this.itemType+"&projectId="+this.projectId:n+="for=everything",t=!1,this.getRoles&&(n+="&getRoles=true"),this.searchTerm.length&&(n+="&searchTerm="+this.searchTerm)):(n=this.itemType+"s/people.json",this.searchTerm.length&&this.type.length?(n+="?searchTerm="+this.searchTerm+"&type="+this.type,t=!1):this.searchTerm.length?(n+="?searchTerm="+this.searchTerm,t=!1):this.type.length&&(n+="?type="+this.type,t=!1)),this.include.length&&(n+=t?"?":"&",n+="include="+this.include,t=!1),null!=this.includeDeletedUsers&&(n+=t?"?":"&",n+="includeDeletedUsers="+this.includeDeletedUsers,t=!1),null!=this.includeUsersWithoutProjects&&(n+=t?"?":"&",n+="includeUsersWithoutProjects="+this.includeUsersWithoutProjects,t=!1),null!=this.includeObservers&&(n+=t?"?":"&",n+="includeObservers="+this.includeObservers,t=!1),n},i.prototype.loadAvailablePeople=function(){this.dataLoader.Load()},i.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},i.getAvailablePeople=app.shared.getResource.bind(app.shared,"availablePeople"),i}(),app.shared.registerResourceProvider("availablePeople",i),i}.apply(e,n))&&(t.exports=r)},4469:function(t,e,i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}};n=[i(164)],void 0!==(r=function(t){var e;return e=function(){function e(t,e,i){this.ready=o(this.ready,this),this.loadBoardColumnByName=o(this.loadBoardColumnByName,this),this.loadBoardColumnByID=o(this.loadBoardColumnByID,this),this.boardColumn=t,this.id=e,this.key=i,console.assert("string"==typeof this.key),"id"===this.key&&(this.id=parseInt(this.id,10),console.assert("number"==typeof e)),"id"===this.key&&this.id>0?(this.init(),this.loadBoardColumnByID()):"name"===this.key&&""!==this.id?(this.init(),this.loadBoardColumnByName()):(console.log("throw an error instead"),this.error(new Error("Invalid ID: "+e),null))}return e.normalizeParams=function(e,i){return null==i&&(i="id"),[t.unwrap(e)||0,t.unwrap(i)||""]},e.prototype.loadBoardColumnByID=function(){var t,e,i,n;if(t=null!=(e=null!=(i=app.currentFilter())&&null!=(n=i.fulldata)?n.columns:void 0)?e:{},null!=t[this.id])return this.ready(t[this.id]);app.api.get("boards/columns/"+this.id+".json",{},{emitError:!1}).then(function(t){return function(e){t.ready(e.response.column)}}(this)).catch(function(t){return function(e){t.error(new Error("Failed to load a column"),e)}}(this))},e.prototype.loadBoardColumnByName=function(){app.api.get("projects/boards/columns/find.json",{name:this.id},{emitError:!1}).then(function(t){return function(e){null!=e.response.columns&&e.response.columns.length?t.ready(e.response.columns[0]):t.error(new Error("Failed to load a column"))}}(this)).catch(function(t){return function(e){t.error(new Error("Failed to load a column"),e)}}(this))},e.prototype.init=function(){this.boardColumn({ready:!1,error:null})},e.prototype.ready=function(t){return t.ready=!0,t.error=null,this.boardColumn(t)},e.prototype.error=function(t,e){e&&(t.cause=e),this.boardColumn({ready:!0,error:t})},e.getBoardColumn=app.shared.getResource.bind(app.shared,"boardColumn"),e}(),app.shared.registerResourceProvider("boardColumn",e),e}.apply(e,n))&&(t.exports=r)},4470:function(t,e,i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}};n=[i(164),i(1116)],void 0!==(r=function(t,e){var i;return i=function(){function i(i,n,r,s,a){this.OnNotifyTWEvent=o(this.OnNotifyTWEvent,this);var l,c,u;return this.subscriptions=[],this.boardColumns=i,console.assert("boolean"==(c=typeof n)||"undefined"===c),console.assert("number"==(u=typeof r)||"string"===u),console.assert("number"==typeof s),console.assert("string"==typeof a),"number"==typeof r&&(r=r.toString()),l=r.split(",").filter(function(t){return!isNaN(parseInt(t,10))}),this.projectId=r,this.boardId=s,this.boardType=a,this.url=this.boardId>0?"task"===this.boardType?"boards/"+this.boardId+"/columns.json":"project"===this.boardType?"portfolio/boards/"+this.boardId+"/columns.json":"":l.length?1===l.length?"projects/"+this.projectId+"/boards/columns.json":l.length>1?"projects/boards/columns.json?projectId="+this.projectId:"":"projects/boards/columns.json",this.url.length?(this.subscriptions.push(this.dataLoader=new e(this.url,{loadNow:!0,pageSize:50,onLoad:function(t){return function(e){t.ready(t.dataLoader.list().slice())}}(this)})),n?this.empty():(this.init(),void this.subscriptions.push(t.postbox.subscribe("allTWEvents",this.OnNotifyTWEvent)))):this.empty()}return i.normalizeParams=function(e){var i,n,r,o,s,a,l;return null==(e=t.unwrap(e))?[]:t.unwrap(null!=e?e.empty:void 0)?[r=!0]:(r=!1,o=null!=(s=t.unwrap(e.projectId))?s:0,i=null!=(a=t.unwrap(e.boardId))?a:0,n=null!=(l=t.unwrap(e.boardType))?l:"task",[r,o,i,n])},i.prototype.OnNotifyTWEvent=function(t){"board"===t.itemType&&t.itemId===this.boardId?this.dataLoader.Load():"column"===t.itemType&&this.dataLoader.LoadUpdates()},i.prototype.empty=function(){var t;t=[],t.dataLoader=this.dataLoader,t.ready=!0,this.boardColumns(t)},i.prototype.init=function(){var t;t=[],t.dataLoader=this.dataLoader,t.ready=!1,this.boardColumns(t)},i.prototype.ready=function(t){t.dataLoader=this.dataLoader,t.ready=!0,this.boardColumns(t)},i.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},i.getBoardColumns=app.shared.getResource.bind(app.shared,"boardColumns"),i}(),app.shared.registerResourceProvider("boardColumns",i),i}.apply(e,n))&&(t.exports=r)},4471:function(t,e,i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}};n=[i(164)],void 0!==(r=function(t){var e;return e=function(){function e(t,e,i){this.ready=o(this.ready,this),this.loadCategory=o(this.loadCategory,this),this.category=t,console.assert("string"==typeof e),this.categoryType=e,console.assert("number"==typeof i),this.id=i,this.id>=0?(this.init(),this.loadCategory()):this.error(new Error("Invalid ID: "+i))}return e.normalizeParams=function(e,i){return[e,parseInt(t.unwrap(i,10))||0]},e.prototype.getCategoryType=function(t){switch(t){case"messages":case"files":case"notebooks":case"links":case"projects":return t.substr(0,t.length-1)+"categories"}},e.prototype.loadCategory=function(){var t,e,i,n;return t=null!=(e=null!=(i=app.currentFilter())&&null!=(n=i.fulldata)?n.categories:void 0)?e:{},null!=t[this.id]?this.ready(t[this.id]):0===this.id?this.error(new Error("Category 0 unavailable")):void app.api.get(this.getCategoryType(this.categoryType)+"/"+this.id+".json",{},{emitError:!1}).then(function(t){return function(e){t.ready(e.response.category)}}(this)).catch(function(t){return function(e){t.error(new Error("Failed to load a category"),e)}}(this))},e.prototype.init=function(){this.category({ready:!1,error:null})},e.prototype.ready=function(t){return t.ready=!0,t.error=null,this.category(t)},e.prototype.error=function(t,e){e&&(t.cause=e),this.category({ready:!0,error:t})},e.getCategory=app.shared.getResource.bind(app.shared,"category"),e}(),app.shared.registerResourceProvider("category",e),e}.apply(e,n))&&(t.exports=r)},4472:function(t,e,i){var n,r;n=[i(164),i(1116)],void 0!==(r=function(t,e){var i;return i=function(){function i(t,i,n,r){var o,s;if(null==r&&(r=""),this.subscriptions=[],this.companies=t,this.pageSize=i,console.assert("boolean"==(o=typeof n)||"undefined"===o),console.assert("string"==(s=typeof r)||"undefined"===s),this.subscriptions.push(this.dataLoader=new e("companies.json",{loadNow:!r,pageSize:this.pageSize,filter:{generateFilterParams:function(t){return function(){var t;return t={},r&&(t.searchTerm=r),t}}()},onLoad:function(t){return function(){t.ready(t.dataLoader.list().slice())}}(this)})),n)return this.empty();this.init()}return i.normalizeParams=function(e){var i,n,r,o,s;return o=t.unwrap(e),s=o.searchTerm,n=o.empty,i=o.doApiSearch,r=o.pageSize,null==e?[r]:(i()||(s=""),[r,n,s])},i.prototype.empty=function(){var t;t=[],t.dataLoader=this.dataLoader,t.ready=!0,this.companies(t)},i.prototype.init=function(){var t;t=[],t.dataLoader=this.dataLoader,t.ready=!1,this.companies(t)},i.prototype.ready=function(t){t.dataLoader=this.dataLoader,t.ready=!0,this.companies(t)},i.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},i.getCompanies=app.shared.getResource.bind(app.shared,"companies"),i}(),app.shared.registerResourceProvider("companies",i),i}.apply(e,n))&&(t.exports=r)},4473:function(t,e,i){var n,r;n=[i(164)],void 0!==(r=function(t){var e;return e=function(){function e(t,e){this.project=t,console.assert("number"==typeof e),this.id=e,this.id>0?(this.init(),this.loadProject()):this.error(new Error("Invalid ID: "+e))}return e.normalizeParams=function(e){return[parseInt(t.unwrap(e,10))||0]},e.prototype.loadProject=function(){var t,e,i,n,r;if(e=null!=(i=null!=(n=app.currentFilter())&&null!=(r=n.fulldata)?r.projects:void 0)?i:{},null!=e[this.id])return this.ready(e[this.id]);t=app.prefixApi("projects/"+this.id+".json?showDeleted=false","API_PREFIX_V2","API_PREFIX_V2"),app.api.get(t,{},{emitError:!1}).then(function(t){return function(e){"deleted"===e.response.project.status?t.error(new Error("Project is deleted"),null):t.ready(e.response.project)}}(this)).catch(function(t){return function(e){t.error(new Error("Failed to load a project"),e)}}(this))},e.prototype.init=function(){this.project({ready:!1,error:null})},e.prototype.error=function(t,e){e&&(t.cause=e),this.project({ready:!0,error:t})},e.prototype.ready=function(t){t.ready=!0,t.error=null,this.project(t)},e.getProject=app.shared.getResource.bind(app.shared,"project"),e}(),app.shared.registerResourceProvider("project",e),e}.apply(e,n))&&(t.exports=r)},4474:function(t,e,i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}};n=[i(164),i(1116)],void 0!==(r=function(t,e){var i;return i=function(){function i(t,i,n,r,s,a,l,c,u){this.updateProjects=o(this.updateProjects,this);var p,d,h,f,m,g,y,v;if(this.subscriptions=[],this.projects=t,console.assert("boolean"==(p=typeof i)||"undefined"===p),console.assert("string"==(d=typeof n)||"undefined"===d),console.assert("number"==(h=typeof r)||"undefined"===h),console.assert("string"==(f=typeof s)||"undefined"===f),console.assert("string"==(m=typeof a)||"undefined"===m),console.assert("number"==(g=typeof l)||"undefined"===g),console.assert("string"==(y=typeof c)||"undefined"===y),console.assert("string"==(v=typeof u)||"undefined"===v),this.url=null!=n?null!=r&&r>0?n+"/"+r+"/projects.json":n+"/projects.json":app.prefixApi("projects.json","API_PREFIX_V2","API_PREFIX_V2"),this.subscriptions.push(this.dataLoader=new e(this.url,{loadNow:!i,params:{type:"withitems",hideDesc:!0,searchTerm:s,skipIds:a,status:c,featuresEnabledOnProject:u},pageSize:100,onLoad:function(t){return function(){t.updateProjects(t.dataLoader.list().slice(),!0)}}(this)})),i)return this.updateProjects([],!0);this.updateProjects([],!1),l>0?this.timeoutHandle=setTimeout(function(t){return function(){return t.dataLoader.Load()}}(this),l):this.dataLoader.Load()}return i.normalizeParams=function(e){var i,n,r,o,s,a,l,c,u,p,d,h,f,m,g;return null==(e=t.unwrap(e))?[]:t.unwrap(null!=e?e.empty:void 0)?[n=!0]:(n=!1,s=null!=(a=t.unwrap(e.itemType))?a:void 0,o=null!=(l=t.unwrap(e.itemId))?l:void 0,f=null!=(c=t.unwrap(e.searchTerm))?c:void 0,m=null!=(u=t.unwrap(e.skipIds))?u:void 0,Array.isArray(m)&&(m=m.join(",")),i=null!=(p=t.unwrap(e.delay))?p:void 0,i<0&&(i=0),g=null!=(d=t.unwrap(e.status))?d:void 0,r=null!=(h=t.unwrap(e.featuresEnabledOnProject))?h:void 0,[n,s,o,f,m,i,g,r])},i.prototype.updateProjects=function(t,e){t.dataLoader=this.dataLoader,t.ready=e,t.delayUntilReady=!0,this.projects(t)},i.prototype.dispose=function(){var t,e,i,n;for(i=this.subscriptions,t=0,e=i.length;t<e;t++)n=i[t],n.dispose();clearTimeout(this.timeoutHandle)},i.getProjects=app.shared.getResource.bind(app.shared,"projects"),i}(),app.shared.registerResourceProvider("projects",i),i}.apply(e,n))&&(t.exports=r)},4475:function(t,e,i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}};n=[i(164)],void 0!==(r=function(t){var e;return e=function(){function e(t,e){this.loadTag=o(this.loadTag,this),this.tag=t,console.assert("number"==typeof e),this.id=e,this.id>0?(this.init(),this.loadTag()):this.error(new Error("Invalid ID: "+e))}return e.normalizeParams=function(e){return[parseInt(t.unwrap(e,10))||0]},e.prototype.loadTag=function(){var t,e,i,n;if(t=null!=(e=null!=(i=app.currentFilter())&&null!=(n=i.fulldata)?n.tags:void 0)?e:{},null!=t[this.id])return this.ready(t[this.id]);app.api.get("tags/"+this.id+".json?getProjectData=1",{},{emitError:!1}).then(function(t){return function(e){t.ready(e.response.tag)}}(this)).catch(function(t){return function(e){t.error(new Error("Failed to load a tag"),e)}}(this))},e.prototype.init=function(){this.tag({ready:!1,error:null})},e.prototype.error=function(t,e){e&&(t.cause=e),this.tag({ready:!0,error:t})},e.prototype.ready=function(t){t.ready=!0,t.error=null,this.tag(t)},e.getTag=app.shared.getResource.bind(app.shared,"tag"),e}(),app.shared.registerResourceProvider("tag",e),e}.apply(e,n))&&(t.exports=r)},4476:function(t,e,i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}};n=[i(164),i(1116)],void 0!==(r=function(t,e){var i;return i=function(){function i(i,n,r,s,a,l,c,u,p,d){this.onAllLoaded=o(this.onAllLoaded,this),this.onLoad=o(this.onLoad,this);var h,f,m,g,y,v,b,w;if(this.subscriptions=[],this.tags=i,console.assert("boolean"==(h=typeof n)||"undefined"===h),console.assert("boolean"==(f=typeof r)||"undefined"===f),console.assert("string"==(m=typeof s)||"undefined"===m),console.assert("boolean"==(g=typeof a)||"undefined"===g),console.assert("string"==(y=typeof l)||"undefined"===y),console.assert("all"===c||"recent"===c||void 0===c),console.assert("string"==(v=typeof u)||"undefined"===v),console.assert("number"==(b=typeof p)||"undefined"===b),console.assert("boolean"==(w=typeof d)||"undefined"===w),this.subscriptions.push(this.isTemplate=t.pureComputed(function(t){return function(){return null!=app.currentRoute().project&&app.currentRoute().project.isTemplate()}}())),this.subscriptions.push(this.dataLoader=new e("tags.json",{loadNow:!n,params:{q:l,filter:c,skipIds:u,searchRightOnly:d,projectIds:s,getProjectData:!0,showAll:a,showProjectLevelTagsFirst:!0,sort:"project",includeTemplates:this.isTemplate(),searchTerm:l},pageSize:r?500:10,loadAll:r,onLoad:r?null:this.onLoad,onAllLoaded:r?this.onAllLoaded:null})),n)return this.updateTags([],!0,!1);this.updateTags([],!1,!0),n&&(p>0?this.timeoutHandle=setTimeout(function(t){return function(){return t.dataLoader.Load()}}(this),p):this.dataLoader.Load())}return i.normalizeParams=function(e){var i,n,r,o,s,a,l,c,u,p,d,h,f,m,g;return null==(e=t.unwrap(e))?[]:t.unwrap(null!=e?e.empty:void 0)?[n=!0]:(n=!1,o=!!t.unwrap(e.loadAll),s=null!=(l=t.unwrap(e.projectIds))?l:void 0,Array.isArray(s)&&(s=s.join(",")),m=!!t.unwrap(e.showAll),o?[n,o,s,m]:(a=null!=(c=t.unwrap(e.query))?c:void 0,r=null!=(u=t.unwrap(e.filter))?u:void 0,g=null!=(p=t.unwrap(e.skipIds))?p:void 0,f=null!=(d=t.unwrap(e.searchRightOnly))?d:void 0,Array.isArray(g)&&(g=g.join(",")),i=null!=(h=t.unwrap(e.delay))?h:void 0,i<0&&(i=0),[n,o,s,m,a,r,g,i,f]))},i.prototype.updateTags=function(t,e,i){t.dataLoader=this.dataLoader,t.ready=e,t.hasMore=i,t.delayUntilReady=!0,this.tags(t)},i.prototype.onLoad=function(t){var e,i;e=t.dataloader.list().length>=10,i=t.dataloader.list().slice(0,9).sort(this.sortTags),this.updateTags(i,!0,e)},i.prototype.onAllLoaded=function(t){var e;e=t.dataloader.list().slice().sort(this.sortTags),this.updateTags(e,!0,!1)},i.prototype.sortTags=function(t,e){return t.projectName.localeCompare(e.projectName)},i.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()}),clearTimeout(this.timeoutHandle)},i.getTags=app.shared.getResource.bind(app.shared,"tags"),i}(),app.shared.registerResourceProvider("tags",i),i}.apply(e,n))&&(t.exports=r)},4477:function(t,e,i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}};n=[i(164)],void 0!==(r=function(t){var e;return e=function(){function e(t,e){this.loadTaskList=o(this.loadTaskList,this),this.taskList=t,console.assert("number"==typeof e),this.id=e,this.id>0?(this.init(),this.loadTaskList()):this.error(new Error("Invalid ID: "+e))}return e.normalizeParams=function(e){return[parseInt(t.unwrap(e,10))||0]},e.prototype.loadTaskList=function(){var t,e,i,n;if(t=null!=(e=null!=(i=app.currentFilter())&&null!=(n=i.fulldata)?n.tasklists:void 0)?e:{},null!=t[this.id])return this.ready(t[this.id]);app.api.get(app.prefixApi("tasklists/"+this.id+".json","API_PREFIX_V1","API_PREFIX_V1"),{},{emitError:!1}).then(function(t){return function(e){t.ready(e.response.todoList)}}(this)).catch(function(t){return function(e){t.error(new Error("Failed to load a task list"),e)}}(this))},e.prototype.init=function(){this.taskList({ready:!1,error:null})},e.prototype.error=function(t,e){e&&(t.cause=e),this.taskList({ready:!0,error:t})},e.prototype.ready=function(t){t.ready=!0,t.error=null,this.taskList(t)},e.getTaskList=app.shared.getResource.bind(app.shared,"taskList"),e}(),app.shared.registerResourceProvider("taskList",e),e}.apply(e,n))&&(t.exports=r)},4478:function(t,e,i){var n,r;n=[i(164),i(1116)],void 0!==(r=function(t,e){var i;return i=function(){function i(t,i,n){var r,o,s;return this.subscriptions=[],this.taskLists=t,console.assert("boolean"==(o=typeof i)||"undefined"===o),console.assert("number"==(s=typeof n)||"string"===s),"number"==typeof n&&(n=n.toString()),r=n.split(","),this.projectId=n,this.url=r.length?1===r.length&&0!==parseInt(this.projectId,10)&&""!==this.projectId?app.prefixApi("projects/"+this.projectId+"/tasklists.json","API_PREFIX_V1","API_PREFIX_V1"):r.length>1?app.prefixApi("tasklists.json?projectId="+this.projectId,"API_PREFIX_V1","API_PREFIX_V1"):"":app.prefixApi("tasklists.json","API_PREFIX_V1","API_PREFIX_V1"),this.url.length?(this.subscriptions.push(this.dataLoader=new e(this.url,{pageSize:100,loadNow:!i,onLoad:function(t){return function(e){t.ready(t.dataLoader.list().slice())}}(this)})),i?this.empty():void this.init()):this.empty()}return i.normalizeParams=function(e){var i,n,r,o;return null==(e=t.unwrap(e))?[]:(i=null!=(r=t.unwrap(null!=e?e.empty:void 0))&&r,n=null!=(o=t.unwrap(e.projectId))?o:0,[i,n])},i.prototype.empty=function(){var t;t=[],t.dataLoader=this.dataLoader,t.ready=!0,this.taskLists(t)},i.prototype.init=function(){var t;t=[],t.dataLoader=this.dataLoader,t.ready=!1,this.taskLists(t)},i.prototype.ready=function(t){t.dataLoader=this.dataLoader,t.ready=!0,this.taskLists(t)},i.prototype.dispose=function(){this.subscriptions.forEach(function(t){return t.dispose()})},i.getTaskLists=app.shared.getResource.bind(app.shared,"taskLists"),i}(),app.shared.registerResourceProvider("taskLists",i),i}.apply(e,n))&&(t.exports=r)},4479:function(t,e,i){var n,r,o=function(t,e){return function(){return t.apply(e,arguments)}};n=[i(164)],void 0!==(r=function(t){var e;return e=function(){function e(t,e){this.ready=o(this.ready,this),this.loadUser=o(this.loadUser,this),this.user=t,console.assert("number"==typeof e),this.id=e,this.id>0?(this.init(),this.loadUser()):this.error(new Error("Invalid ID: "+e))}return e.normalizeParams=function(e){return[parseInt(t.unwrap(e,10))||0]},e.prototype.loadUser=function(){var t,e,i,n;if(t=null!=(e=null!=(i=app.currentFilter())&&null!=(n=i.fulldata)?n.users:void 0)?e:{},null!=t[this.id])return this.ready(t[this.id]);app.api.get(app.prefixApi("people/"+this.id+".json","API_PREFIX_V2","API_PREFIX_V2"),{},{emitError:!1}).then(function(t){return function(e){t.ready(e.response.person)}}(this)).catch(function(t){return function(e){t.error(new Error("Failed to load user"),e)}}(this))},e.prototype.init=function(){this.user({ready:!1,error:null})},e.prototype.ready=function(t){return t.ready=!0,t.error=null,this.user(t)},e.prototype.error=function(t,e){e&&(t.cause=e),this.user({ready:!0,error:t})},e.getUser=app.shared.getResource.bind(app.shared,"user"),e}(),app.shared.registerResourceProvider("user",e),e}.apply(e,n))&&(t.exports=r)}});
//# sourceMappingURL=common-chunks.c328355945829ad9e560.js.map