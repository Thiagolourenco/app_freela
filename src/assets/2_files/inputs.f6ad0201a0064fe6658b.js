webpackJsonp([26],{1060:function(e,t,n){e.exports={"widget-mentions":Promise.all([n.e(0),n.e(26)]).then(n.bind(null,4254)),"widget-dateInput":Promise.all([n.e(0),n.e(26)]).then(n.bind(null,4212)),"widget-durationInput":Promise.all([n.e(0),n.e(26)]).then(n.bind(null,4214)),"widget-timeInput":Promise.all([n.e(0),n.e(26)]).then(n.bind(null,4360)),"widget-timeRangeInput":Promise.all([n.e(0),n.e(26)]).then(n.bind(null,4363)),"widget-timeMomentPicker":Promise.all([n.e(0),n.e(26)]).then(n.bind(null,4361)),"widget-timePicker":Promise.all([n.e(0),n.e(26)]).then(n.bind(null,4362)),"widget-tw-autocomplete":Promise.all([n.e(0),n.e(26)]).then(n.bind(null,4400)),"widget-wysiwyg-editor":Promise.all([n.e(0),n.e(26)]).then(n.bind(null,4414)),"widget-easy-markdown-editor":Promise.all([n.e(0),n.e(26)]).then(n.bind(null,4215))}},1147:function(e,t,n){!function(t,n){e.exports=n()}(0,function(){"use strict";function e(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}function t(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function n(e,n){return t(e).appendChild(n)}function r(e,t,n,r){var o=document.createElement(e);if(n&&(o.className=n),r&&(o.style.cssText=r),"string"==typeof t)o.appendChild(document.createTextNode(t));else if(t)for(var i=0;i<t.length;++i)o.appendChild(t[i]);return o}function o(e,t,n,o){var i=r(e,t,n,o);return i.setAttribute("role","presentation"),i}function i(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function a(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function s(t,n){var r=t.className;e(n).test(r)||(t.className+=(r?" ":"")+n)}function l(t,n){for(var r=t.split(" "),o=0;o<r.length;o++)r[o]&&!e(r[o]).test(n)&&(n+=" "+r[o]);return n}function u(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function c(e,t,n){t||(t={});for(var r in e)!e.hasOwnProperty(r)||!1===n&&t.hasOwnProperty(r)||(t[r]=e[r]);return t}function d(e,t,n,r,o){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var i=r||0,a=o||0;;){var s=e.indexOf("\t",i);if(s<0||s>=t)return a+(t-i);a+=s-i,a+=n-a%n,i=s+1}}function f(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}function h(e,t,n){for(var r=0,o=0;;){var i=e.indexOf("\t",r);-1==i&&(i=e.length);var a=i-r;if(i==e.length||o+a>=t)return r+Math.min(a,t-o);if(o+=i-r,o+=n-o%n,r=i+1,o>=t)return r}}function p(e){for(;Ga.length<=e;)Ga.push(m(Ga)+" ");return Ga[e]}function m(e){return e[e.length-1]}function g(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function v(e,t,n){for(var r=0,o=n(t);r<e.length&&n(e[r])<=o;)r++;e.splice(r,0,t)}function b(){}function y(e,t){var n;return Object.create?n=Object.create(e):(b.prototype=e,n=new b),t&&c(t,n),n}function w(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||Xa.test(e))}function x(e,t){return t?!!(t.source.indexOf("\\w")>-1&&w(e))||t.test(e):w(e)}function C(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function k(e){return e.charCodeAt(0)>=768&&Ya.test(e)}function N(e,t,n){for(;(n<0?t>0:t<e.length)&&k(e.charAt(t));)t+=n;return t}function _(e,t,n){for(var r=t>n?-1:1;;){if(t==n)return t;var o=(t+n)/2,i=r<0?Math.ceil(o):Math.floor(o);if(i==t)return e(i)?t:n;e(i)?n=i:t=i+r}}function S(e,t,n,r){if(!e)return r(t,n,"ltr",0);for(var o=!1,i=0;i<e.length;++i){var a=e[i];(a.from<n&&a.to>t||t==n&&a.to==t)&&(r(Math.max(a.from,t),Math.min(a.to,n),1==a.level?"rtl":"ltr",i),o=!0)}o||r(t,n,"ltr")}function T(e,t,n){var r;Ja=null;for(var o=0;o<e.length;++o){var i=e[o];if(i.from<t&&i.to>t)return o;i.to==t&&(i.from!=i.to&&"before"==n?r=o:Ja=o),i.from==t&&(i.from!=i.to&&"before"!=n?r=o:Ja=o)}return null!=r?r:Ja}function E(e,t){var n=e.order;return null==n&&(n=e.order=Qa(e.text,t)),n}function O(e,t){return e._handlers&&e._handlers[t]||Za}function A(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers,o=r&&r[t];if(o){var i=f(o,n);i>-1&&(r[t]=o.slice(0,i).concat(o.slice(i+1)))}}}function D(e,t){var n=O(e,t);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),o=0;o<n.length;++o)n[o].apply(null,r)}function R(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),D(e,n||t.type,e,t),B(t)||t.codemirrorIgnore}function M(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)-1==f(n,t[r])&&n.push(t[r])}function P(e,t){return O(e,t).length>0}function L(e){e.prototype.on=function(e,t){es(this,e,t)},e.prototype.off=function(e,t){A(this,e,t)}}function I(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function j(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function B(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function F(e){I(e),j(e)}function H(e){return e.target||e.srcElement}function U(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),Da&&e.ctrlKey&&1==t&&(t=3),t}function z(e){if(null==Ua){var t=r("span","\u200b");n(e,r("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Ua=t.offsetWidth<=1&&t.offsetHeight>2&&!(ya&&wa<8))}var o=Ua?r("span","\u200b"):r("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return o.setAttribute("cm-text",""),o}function W(e){if(null!=za)return za;var r=n(e,document.createTextNode("A\u062eA")),o=La(r,0,1).getBoundingClientRect(),i=La(r,1,2).getBoundingClientRect();return t(e),!(!o||o.left==o.right)&&(za=i.right-o.right<3)}function V(e){if(null!=is)return is;var t=n(e,r("span","x")),o=t.getBoundingClientRect(),i=La(t,0,1).getBoundingClientRect();return is=Math.abs(o.left-i.left)>1}function q(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),as[e]=t}function $(e,t){ss[e]=t}function K(e){if("string"==typeof e&&ss.hasOwnProperty(e))e=ss[e];else if(e&&"string"==typeof e.name&&ss.hasOwnProperty(e.name)){var t=ss[e.name];"string"==typeof t&&(t={name:t}),e=y(t,e),e.name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return K("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return K("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function G(e,t){t=K(t);var n=as[t.name];if(!n)return G(e,"text/plain");var r=n(e,t);if(ls.hasOwnProperty(t.name)){var o=ls[t.name];for(var i in o)o.hasOwnProperty(i)&&(r.hasOwnProperty(i)&&(r["_"+i]=r[i]),r[i]=o[i])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var a in t.modeProps)r[a]=t.modeProps[a];return r}function X(e,t){c(t,ls.hasOwnProperty(e)?ls[e]:ls[e]={})}function Y(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var o=t[r];o instanceof Array&&(o=o.concat([])),n[r]=o}return n}function J(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function Q(e,t,n){return!e.startState||e.startState(t,n)}function Z(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var o=n.children[r],i=o.chunkSize();if(t<i){n=o;break}t-=i}return n.lines[t]}function ee(e,t,n){var r=[],o=t.line;return e.iter(t.line,n.line+1,function(e){var i=e.text;o==n.line&&(i=i.slice(0,n.ch)),o==t.line&&(i=i.slice(t.ch)),r.push(i),++o}),r}function te(e,t,n){var r=[];return e.iter(t,n,function(e){r.push(e.text)}),r}function ne(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function re(e){if(null==e.parent)return null;for(var t=e.parent,n=f(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var o=0;r.children[o]!=t;++o)n+=r.children[o].chunkSize();return n+t.first}function oe(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var o=e.children[r],i=o.height;if(t<i){e=o;continue e}t-=i,n+=o.chunkSize()}return n}while(!e.lines);for(var a=0;a<e.lines.length;++a){var s=e.lines[a],l=s.height;if(t<l)break;t-=l}return n+a}function ie(e,t){return t>=e.first&&t<e.first+e.size}function ae(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function se(e,t,n){if(void 0===n&&(n=null),!(this instanceof se))return new se(e,t,n);this.line=e,this.ch=t,this.sticky=n}function le(e,t){return e.line-t.line||e.ch-t.ch}function ue(e,t){return e.sticky==t.sticky&&0==le(e,t)}function ce(e){return se(e.line,e.ch)}function de(e,t){return le(e,t)<0?t:e}function fe(e,t){return le(e,t)<0?e:t}function he(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function pe(e,t){if(t.line<e.first)return se(e.first,0);var n=e.first+e.size-1;return t.line>n?se(n,Z(e,n).text.length):me(t,Z(e,t.line).text.length)}function me(e,t){var n=e.ch;return null==n||n>t?se(e.line,t):n<0?se(e.line,0):e}function ge(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=pe(e,t[r]);return n}function ve(e,t,n,r){var o=[e.state.modeGen],i={};_e(e,t.text,e.doc.mode,n,function(e,t){return o.push(e,t)},i,r);for(var a=n.state,s=0;s<e.state.overlays.length;++s)!function(r){n.baseTokens=o;var s=e.state.overlays[r],l=1,u=0;n.state=!0,_e(e,t.text,s.mode,n,function(e,t){for(var n=l;u<e;){var r=o[l];r>e&&o.splice(l,1,e,o[l+1],r),l+=2,u=Math.min(e,r)}if(t)if(s.opaque)o.splice(n,l-n,e,"overlay "+t),l=n+2;else for(;n<l;n+=2){var i=o[n+1];o[n+1]=(i?i+" ":"")+"overlay "+t}},i),n.state=a,n.baseTokens=null,n.baseTokenPos=1}(s);return{styles:o,classes:i.bgClass||i.textClass?i:null}}function be(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=ye(e,re(t)),o=t.text.length>e.options.maxHighlightLength&&Y(e.doc.mode,r.state),i=ve(e,t,r);o&&(r.state=o),t.stateAfter=r.save(!o),t.styles=i.styles,i.classes?t.styleClasses=i.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function ye(e,t,n){var r=e.doc,o=e.display;if(!r.mode.startState)return new ds(r,!0,t);var i=Se(e,t,n),a=i>r.first&&Z(r,i-1).stateAfter,s=a?ds.fromSaved(r,a,i):new ds(r,Q(r.mode),i);return r.iter(i,t,function(n){we(e,n.text,s);var r=s.line;n.stateAfter=r==t-1||r%5==0||r>=o.viewFrom&&r<o.viewTo?s.save():null,s.nextLine()}),n&&(r.modeFrontier=s.line),s}function we(e,t,n,r){var o=e.doc.mode,i=new us(t,e.options.tabSize,n);for(i.start=i.pos=r||0,""==t&&xe(o,n.state);!i.eol();)Ce(o,i,n.state),i.start=i.pos}function xe(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=J(e,t);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function Ce(e,t,n,r){for(var o=0;o<10;o++){r&&(r[0]=J(e,n).mode);var i=e.token(t,n);if(t.pos>t.start)return i}throw new Error("Mode "+e.name+" failed to advance stream.")}function ke(e,t,n,r){var o,i=e.doc,a=i.mode;t=pe(i,t);var s,l=Z(i,t.line),u=ye(e,t.line,n),c=new us(l.text,e.options.tabSize,u);for(r&&(s=[]);(r||c.pos<t.ch)&&!c.eol();)c.start=c.pos,o=Ce(a,c,u.state),r&&s.push(new fs(c,o,Y(i.mode,u.state)));return r?s:new fs(c,o,u.state)}function Ne(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(t[r])||(t[r]+=" "+n[2])}return e}function _e(e,t,n,r,o,i,a){var s=n.flattenSpans;null==s&&(s=e.options.flattenSpans);var l,u=0,c=null,d=new us(t,e.options.tabSize,r),f=e.options.addModeClass&&[null];for(""==t&&Ne(xe(n,r.state),i);!d.eol();){if(d.pos>e.options.maxHighlightLength?(s=!1,a&&we(e,t,r,d.pos),d.pos=t.length,l=null):l=Ne(Ce(n,d,r.state,f),i),f){var h=f[0].name;h&&(l="m-"+(l?h+" "+l:h))}if(!s||c!=l){for(;u<d.start;)u=Math.min(d.start,u+5e3),o(u,c);c=l}d.start=d.pos}for(;u<d.pos;){var p=Math.min(d.pos,u+5e3);o(p,c),u=p}}function Se(e,t,n){for(var r,o,i=e.doc,a=n?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;s>a;--s){if(s<=i.first)return i.first;var l=Z(i,s-1),u=l.stateAfter;if(u&&(!n||s+(u instanceof cs?u.lookAhead:0)<=i.modeFrontier))return s;var c=d(l.text,null,e.options.tabSize);(null==o||r>c)&&(o=s-1,r=c)}return o}function Te(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,r=t-1;r>n;r--){var o=Z(e,r).stateAfter;if(o&&(!(o instanceof cs)||r+o.lookAhead<t)){n=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}function Ee(){hs=!0}function Oe(){ps=!0}function Ae(e,t,n){this.marker=e,this.from=t,this.to=n}function De(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function Re(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function Me(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function Pe(e,t,n){var r;if(e)for(var o=0;o<e.length;++o){var i=e[o],a=i.marker,s=null==i.from||(a.inclusiveLeft?i.from<=t:i.from<t);if(s||i.from==t&&"bookmark"==a.type&&(!n||!i.marker.insertLeft)){var l=null==i.to||(a.inclusiveRight?i.to>=t:i.to>t);(r||(r=[])).push(new Ae(a,i.from,l?null:i.to))}}return r}function Le(e,t,n){var r;if(e)for(var o=0;o<e.length;++o){var i=e[o],a=i.marker,s=null==i.to||(a.inclusiveRight?i.to>=t:i.to>t);if(s||i.from==t&&"bookmark"==a.type&&(!n||i.marker.insertLeft)){var l=null==i.from||(a.inclusiveLeft?i.from<=t:i.from<t);(r||(r=[])).push(new Ae(a,l?null:i.from-t,null==i.to?null:i.to-t))}}return r}function Ie(e,t){if(t.full)return null;var n=ie(e,t.from.line)&&Z(e,t.from.line).markedSpans,r=ie(e,t.to.line)&&Z(e,t.to.line).markedSpans;if(!n&&!r)return null;var o=t.from.ch,i=t.to.ch,a=0==le(t.from,t.to),s=Pe(n,o,a),l=Le(r,i,a),u=1==t.text.length,c=m(t.text).length+(u?o:0);if(s)for(var d=0;d<s.length;++d){var f=s[d];if(null==f.to){var h=De(l,f.marker);h?u&&(f.to=null==h.to?null:h.to+c):f.to=o}}if(l)for(var p=0;p<l.length;++p){var g=l[p];if(null!=g.to&&(g.to+=c),null==g.from){var v=De(s,g.marker);v||(g.from=c,u&&(s||(s=[])).push(g))}else g.from+=c,u&&(s||(s=[])).push(g)}s&&(s=je(s)),l&&l!=s&&(l=je(l));var b=[s];if(!u){var y,w=t.text.length-2;if(w>0&&s)for(var x=0;x<s.length;++x)null==s[x].to&&(y||(y=[])).push(new Ae(s[x].marker,null,null));for(var C=0;C<w;++C)b.push(y);b.push(l)}return b}function je(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Be(e,t,n){var r=null;if(e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||r&&-1!=f(r,n)||(r||(r=[])).push(n)}}),!r)return null;for(var o=[{from:t,to:n}],i=0;i<r.length;++i)for(var a=r[i],s=a.find(0),l=0;l<o.length;++l){var u=o[l];if(!(le(u.to,s.from)<0||le(u.from,s.to)>0)){var c=[l,1],d=le(u.from,s.from),h=le(u.to,s.to);(d<0||!a.inclusiveLeft&&!d)&&c.push({from:u.from,to:s.from}),(h>0||!a.inclusiveRight&&!h)&&c.push({from:s.to,to:u.to}),o.splice.apply(o,c),l+=c.length-3}}return o}function Fe(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function He(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function Ue(e){return e.inclusiveLeft?-1:0}function ze(e){return e.inclusiveRight?1:0}function We(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var r=e.find(),o=t.find(),i=le(r.from,o.from)||Ue(e)-Ue(t);if(i)return-i;var a=le(r.to,o.to)||ze(e)-ze(t);return a||t.id-e.id}function Ve(e,t){var n,r=ps&&e.markedSpans;if(r)for(var o=void 0,i=0;i<r.length;++i)o=r[i],o.marker.collapsed&&null==(t?o.from:o.to)&&(!n||We(n,o.marker)<0)&&(n=o.marker);return n}function qe(e){return Ve(e,!0)}function $e(e){return Ve(e,!1)}function Ke(e,t){var n,r=ps&&e.markedSpans;if(r)for(var o=0;o<r.length;++o){var i=r[o];i.marker.collapsed&&(null==i.from||i.from<t)&&(null==i.to||i.to>t)&&(!n||We(n,i.marker)<0)&&(n=i.marker)}return n}function Ge(e,t,n,r,o){var i=Z(e,t),a=ps&&i.markedSpans;if(a)for(var s=0;s<a.length;++s){var l=a[s];if(l.marker.collapsed){var u=l.marker.find(0),c=le(u.from,n)||Ue(l.marker)-Ue(o),d=le(u.to,r)||ze(l.marker)-ze(o);if(!(c>=0&&d<=0||c<=0&&d>=0)&&(c<=0&&(l.marker.inclusiveRight&&o.inclusiveLeft?le(u.to,n)>=0:le(u.to,n)>0)||c>=0&&(l.marker.inclusiveRight&&o.inclusiveLeft?le(u.from,r)<=0:le(u.from,r)<0)))return!0}}}function Xe(e){for(var t;t=qe(e);)e=t.find(-1,!0).line;return e}function Ye(e){for(var t;t=$e(e);)e=t.find(1,!0).line;return e}function Je(e){for(var t,n;t=$e(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}function Qe(e,t){var n=Z(e,t),r=Xe(n);return n==r?t:re(r)}function Ze(e,t){if(t>e.lastLine())return t;var n,r=Z(e,t);if(!et(e,r))return t;for(;n=$e(r);)r=n.find(1,!0).line;return re(r)+1}function et(e,t){var n=ps&&t.markedSpans;if(n)for(var r=void 0,o=0;o<n.length;++o)if(r=n[o],r.marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&tt(e,t,r))return!0}}function tt(e,t,n){if(null==n.to){var r=n.marker.find(1,!0);return tt(e,r.line,De(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var o=void 0,i=0;i<t.markedSpans.length;++i)if(o=t.markedSpans[i],o.marker.collapsed&&!o.marker.widgetNode&&o.from==n.to&&(null==o.to||o.to!=n.from)&&(o.marker.inclusiveLeft||n.marker.inclusiveRight)&&tt(e,t,o))return!0}function nt(e){e=Xe(e);for(var t=0,n=e.parent,r=0;r<n.lines.length;++r){var o=n.lines[r];if(o==e)break;t+=o.height}for(var i=n.parent;i;n=i,i=n.parent)for(var a=0;a<i.children.length;++a){var s=i.children[a];if(s==n)break;t+=s.height}return t}function rt(e){if(0==e.height)return 0;for(var t,n=e.text.length,r=e;t=qe(r);){var o=t.find(0,!0);r=o.from.line,n+=o.from.ch-o.to.ch}for(r=e;t=$e(r);){var i=t.find(0,!0);n-=r.text.length-i.from.ch,r=i.to.line,n+=r.text.length-i.to.ch}return n}function ot(e){var t=e.display,n=e.doc;t.maxLine=Z(n,n.first),t.maxLineLength=rt(t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var n=rt(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)})}function it(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Fe(e),He(e,n);var o=r?r(e):1;o!=e.height&&ne(e,o)}function at(e){e.parent=null,Fe(e)}function st(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?bs:vs;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function lt(e,t){var n=o("span",null,null,xa?"padding-right: .1px":null),r={pre:o("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var a=i?t.rest[i-1]:t.line,s=void 0;r.pos=0,r.addToken=ct,W(e.display.measure)&&(s=E(a,e.doc.direction))&&(r.addToken=ft(r.addToken,s)),r.map=[];pt(a,r,be(e,a,t!=e.display.externalMeasured&&re(a))),a.styleClasses&&(a.styleClasses.bgClass&&(r.bgClass=l(a.styleClasses.bgClass,r.bgClass||"")),a.styleClasses.textClass&&(r.textClass=l(a.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(z(e.display.measure))),0==i?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(xa){var u=r.content.lastChild;(/\bcm-tab\b/.test(u.className)||u.querySelector&&u.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return D(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=l(r.pre.className,r.textClass||"")),r}function ut(e){var t=r("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function ct(e,t,n,o,i,a,s){if(t){var l,u=e.splitSpaces?dt(t,e.trailingSpace):t,c=e.cm.state.specialChars,d=!1;if(c.test(t)){l=document.createDocumentFragment();for(var f=0;;){c.lastIndex=f;var h=c.exec(t),m=h?h.index-f:t.length-f;if(m){var g=document.createTextNode(u.slice(f,f+m));ya&&wa<9?l.appendChild(r("span",[g])):l.appendChild(g),e.map.push(e.pos,e.pos+m,g),e.col+=m,e.pos+=m}if(!h)break;f+=m+1;var v=void 0;if("\t"==h[0]){var b=e.cm.options.tabSize,y=b-e.col%b;v=l.appendChild(r("span",p(y),"cm-tab")),v.setAttribute("role","presentation"),v.setAttribute("cm-text","\t"),e.col+=y}else"\r"==h[0]||"\n"==h[0]?(v=l.appendChild(r("span","\r"==h[0]?"\u240d":"\u2424","cm-invalidchar")),v.setAttribute("cm-text",h[0]),e.col+=1):(v=e.cm.options.specialCharPlaceholder(h[0]),v.setAttribute("cm-text",h[0]),ya&&wa<9?l.appendChild(r("span",[v])):l.appendChild(v),e.col+=1);e.map.push(e.pos,e.pos+1,v),e.pos++}}else e.col+=t.length,l=document.createTextNode(u),e.map.push(e.pos,e.pos+t.length,l),ya&&wa<9&&(d=!0),e.pos+=t.length;if(e.trailingSpace=32==u.charCodeAt(t.length-1),n||o||i||d||a){var w=n||"";o&&(w+=o),i&&(w+=i);var x=r("span",[l],w,a);if(s)for(var C in s)s.hasOwnProperty(C)&&"style"!=C&&"class"!=C&&x.setAttribute(C,s[C]);return e.content.appendChild(x)}e.content.appendChild(l)}}function dt(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,r="",o=0;o<e.length;o++){var i=e.charAt(o);" "!=i||!n||o!=e.length-1&&32!=e.charCodeAt(o+1)||(i="\xa0"),r+=i,n=" "==i}return r}function ft(e,t){return function(n,r,o,i,a,s,l){o=o?o+" cm-force-border":"cm-force-border";for(var u=n.pos,c=u+r.length;;){for(var d=void 0,f=0;f<t.length&&(d=t[f],!(d.to>u&&d.from<=u));f++);if(d.to>=c)return e(n,r,o,i,a,s,l);e(n,r.slice(0,d.to-u),o,i,null,s,l),i=null,r=r.slice(d.to-u),u=d.to}}}function ht(e,t,n,r){var o=!r&&n.widgetNode;o&&e.map.push(e.pos,e.pos+t,o),!r&&e.cm.display.input.needsContentAttribute&&(o||(o=e.content.appendChild(document.createElement("span"))),o.setAttribute("cm-marker",n.id)),o&&(e.cm.display.input.setUneditable(o),e.content.appendChild(o)),e.pos+=t,e.trailingSpace=!1}function pt(e,t,n){var r=e.markedSpans,o=e.text,i=0;if(r)for(var a,s,l,u,c,d,f,h=o.length,p=0,m=1,g="",v=0;;){if(v==p){l=u=c=s="",f=null,d=null,v=1/0;for(var b=[],y=void 0,w=0;w<r.length;++w){var x=r[w],C=x.marker;if("bookmark"==C.type&&x.from==p&&C.widgetNode)b.push(C);else if(x.from<=p&&(null==x.to||x.to>p||C.collapsed&&x.to==p&&x.from==p)){if(null!=x.to&&x.to!=p&&v>x.to&&(v=x.to,u=""),C.className&&(l+=" "+C.className),C.css&&(s=(s?s+";":"")+C.css),C.startStyle&&x.from==p&&(c+=" "+C.startStyle),C.endStyle&&x.to==v&&(y||(y=[])).push(C.endStyle,x.to),C.title&&((f||(f={})).title=C.title),C.attributes)for(var k in C.attributes)(f||(f={}))[k]=C.attributes[k];C.collapsed&&(!d||We(d.marker,C)<0)&&(d=x)}else x.from>p&&v>x.from&&(v=x.from)}if(y)for(var N=0;N<y.length;N+=2)y[N+1]==v&&(u+=" "+y[N]);if(!d||d.from==p)for(var _=0;_<b.length;++_)ht(t,0,b[_]);if(d&&(d.from||0)==p){if(ht(t,(null==d.to?h+1:d.to)-p,d.marker,null==d.from),null==d.to)return;d.to==p&&(d=!1)}}if(p>=h)break;for(var S=Math.min(h,v);;){if(g){var T=p+g.length;if(!d){var E=T>S?g.slice(0,S-p):g;t.addToken(t,E,a?a+l:l,c,p+E.length==v?u:"",s,f)}if(T>=S){g=g.slice(S-p),p=S;break}p=T,c=""}g=o.slice(i,i=n[m++]),a=st(n[m++],t.cm.options)}}else for(var O=1;O<n.length;O+=2)t.addToken(t,o.slice(i,i=n[O]),st(n[O+1],t.cm.options))}function mt(e,t,n){this.line=t,this.rest=Je(t),this.size=this.rest?re(m(this.rest))-n+1:1,this.node=this.text=null,this.hidden=et(e,t)}function gt(e,t,n){for(var r,o=[],i=t;i<n;i=r){var a=new mt(e.doc,Z(e.doc,i),i);r=i+a.size,o.push(a)}return o}function vt(e){ys?ys.ops.push(e):e.ownsGroup=ys={ops:[e],delayedCallbacks:[]}}function bt(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var r=0;r<e.ops.length;r++){var o=e.ops[r];if(o.cursorActivityHandlers)for(;o.cursorActivityCalled<o.cursorActivityHandlers.length;)o.cursorActivityHandlers[o.cursorActivityCalled++].call(null,o.cm)}}while(n<t.length)}function yt(e,t){var n=e.ownsGroup;if(n)try{bt(n)}finally{ys=null,t(n)}}function wt(e,t){var n=O(e,t);if(n.length){var r,o=Array.prototype.slice.call(arguments,2);ys?r=ys.delayedCallbacks:ws?r=ws:(r=ws=[],setTimeout(xt,0));for(var i=0;i<n.length;++i)!function(e){r.push(function(){return n[e].apply(null,o)})}(i)}}function xt(){var e=ws;ws=null;for(var t=0;t<e.length;++t)e[t]()}function Ct(e,t,n,r){for(var o=0;o<t.changes.length;o++){var i=t.changes[o];"text"==i?St(e,t):"gutter"==i?Et(e,t,n,r):"class"==i?Tt(e,t):"widget"==i&&Ot(e,t,r)}t.changes=null}function kt(e){return e.node==e.text&&(e.node=r("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),ya&&wa<8&&(e.node.style.zIndex=2)),e.node}function Nt(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var o=kt(t);t.background=o.insertBefore(r("div",null,n),o.firstChild),e.display.input.setUneditable(t.background)}}function _t(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):lt(e,t)}function St(e,t){var n=t.text.className,r=_t(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,Tt(e,t)):n&&(t.text.className=n)}function Tt(e,t){Nt(e,t),t.line.wrapClass?kt(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var n=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=n||""}function Et(e,t,n,o){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var i=kt(t);t.gutterBackground=r("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?o.fixedPos:-o.gutterTotalWidth)+"px; width: "+o.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),i.insertBefore(t.gutterBackground,t.text)}var a=t.line.gutterMarkers;if(e.options.lineNumbers||a){var s=kt(t),l=t.gutter=r("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?o.fixedPos:-o.gutterTotalWidth)+"px");if(e.display.input.setUneditable(l),s.insertBefore(l,t.text),t.line.gutterClass&&(l.className+=" "+t.line.gutterClass),!e.options.lineNumbers||a&&a["CodeMirror-linenumbers"]||(t.lineNumber=l.appendChild(r("div",ae(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+o.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),a)for(var u=0;u<e.display.gutterSpecs.length;++u){var c=e.display.gutterSpecs[u].className,d=a.hasOwnProperty(c)&&a[c];d&&l.appendChild(r("div",[d],"CodeMirror-gutter-elt","left: "+o.gutterLeft[c]+"px; width: "+o.gutterWidth[c]+"px"))}}}function Ot(e,t,n){t.alignable&&(t.alignable=null);for(var r=t.node.firstChild,o=void 0;r;r=o)o=r.nextSibling,"CodeMirror-linewidget"==r.className&&t.node.removeChild(r);Dt(e,t,n)}function At(e,t,n,r){var o=_t(e,t);return t.text=t.node=o.pre,o.bgClass&&(t.bgClass=o.bgClass),o.textClass&&(t.textClass=o.textClass),Tt(e,t),Et(e,t,n,r),Dt(e,t,r),t.node}function Dt(e,t,n){if(Rt(e,t.line,t,n,!0),t.rest)for(var r=0;r<t.rest.length;r++)Rt(e,t.rest[r],t,n,!1)}function Rt(e,t,n,o,i){if(t.widgets)for(var a=kt(n),s=0,l=t.widgets;s<l.length;++s){var u=l[s],c=r("div",[u.node],"CodeMirror-linewidget");u.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),Mt(u,c,n,o),e.display.input.setUneditable(c),i&&u.above?a.insertBefore(c,n.gutter||n.text):a.appendChild(c),wt(u,"redraw")}}function Mt(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var o=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(o-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=o+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function Pt(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!i(document.body,e.node)){var o="position: relative;";e.coverGutter&&(o+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(o+="width: "+t.display.wrapper.clientWidth+"px;"),n(t.display.measure,r("div",[e.node],null,o))}return e.height=e.node.parentNode.offsetHeight}function Lt(e,t){for(var n=H(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function It(e){return e.lineSpace.offsetTop}function jt(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Bt(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=n(e.measure,r("pre","x","CodeMirror-line-like")),o=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,i={left:parseInt(o.paddingLeft),right:parseInt(o.paddingRight)};return isNaN(i.left)||isNaN(i.right)||(e.cachedPaddingH=i),i}function Ft(e){return Wa-e.display.nativeBarWidth}function Ht(e){return e.display.scroller.clientWidth-Ft(e)-e.display.barWidth}function Ut(e){return e.display.scroller.clientHeight-Ft(e)-e.display.barHeight}function zt(e,t,n){var r=e.options.lineWrapping,o=r&&Ht(e);if(!t.measure.heights||r&&t.measure.width!=o){var i=t.measure.heights=[];if(r){t.measure.width=o;for(var a=t.text.firstChild.getClientRects(),s=0;s<a.length-1;s++){var l=a[s],u=a[s+1];Math.abs(l.bottom-u.bottom)>2&&i.push((l.bottom+u.top)/2-n.top)}}i.push(n.bottom-n.top)}}function Wt(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var o=0;o<e.rest.length;o++)if(re(e.rest[o])>n)return{map:e.measure.maps[o],cache:e.measure.caches[o],before:!0}}function Vt(e,t){t=Xe(t);var r=re(t),o=e.display.externalMeasured=new mt(e.doc,t,r);o.lineN=r;var i=o.built=lt(e,o);return o.text=i.pre,n(e.display.lineMeasure,i.pre),o}function qt(e,t,n,r){return Gt(e,Kt(e,t),n,r)}function $t(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Sn(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function Kt(e,t){var n=re(t),r=$t(e,n);r&&!r.text?r=null:r&&r.changes&&(Ct(e,r,n,xn(e)),e.curOp.forceUpdate=!0),r||(r=Vt(e,t));var o=Wt(r,t,n);return{line:t,view:r,rect:null,map:o.map,cache:o.cache,before:o.before,hasHeights:!1}}function Gt(e,t,n,r,o){t.before&&(n=-1);var i,a=n+(r||"");return t.cache.hasOwnProperty(a)?i=t.cache[a]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(zt(e,t.view,t.rect),t.hasHeights=!0),i=Jt(e,t,n,r),i.bogus||(t.cache[a]=i)),{left:i.left,right:i.right,top:o?i.rtop:i.top,bottom:o?i.rbottom:i.bottom}}function Xt(e,t,n){for(var r,o,i,a,s,l,u=0;u<e.length;u+=3)if(s=e[u],l=e[u+1],t<s?(o=0,i=1,a="left"):t<l?(o=t-s,i=o+1):(u==e.length-3||t==l&&e[u+3]>t)&&(i=l-s,o=i-1,t>=l&&(a="right")),null!=o){if(r=e[u+2],s==l&&n==(r.insertLeft?"left":"right")&&(a=n),"left"==n&&0==o)for(;u&&e[u-2]==e[u-3]&&e[u-1].insertLeft;)r=e[2+(u-=3)],a="left";if("right"==n&&o==l-s)for(;u<e.length-3&&e[u+3]==e[u+4]&&!e[u+5].insertLeft;)r=e[(u+=3)+2],a="right";break}return{node:r,start:o,end:i,collapse:a,coverStart:s,coverEnd:l}}function Yt(e,t){var n=xs;if("left"==t)for(var r=0;r<e.length&&(n=e[r]).left==n.right;r++);else for(var o=e.length-1;o>=0&&(n=e[o]).left==n.right;o--);return n}function Jt(e,t,n,r){var o,i=Xt(t.map,n,r),a=i.node,s=i.start,l=i.end,u=i.collapse;if(3==a.nodeType){for(var c=0;c<4;c++){for(;s&&k(t.line.text.charAt(i.coverStart+s));)--s;for(;i.coverStart+l<i.coverEnd&&k(t.line.text.charAt(i.coverStart+l));)++l;if(o=ya&&wa<9&&0==s&&l==i.coverEnd-i.coverStart?a.parentNode.getBoundingClientRect():Yt(La(a,s,l).getClientRects(),r),o.left||o.right||0==s)break;l=s,s-=1,u="right"}ya&&wa<11&&(o=Qt(e.display.measure,o))}else{s>0&&(u=r="right");var d;o=e.options.lineWrapping&&(d=a.getClientRects()).length>1?d["right"==r?d.length-1:0]:a.getBoundingClientRect()}if(ya&&wa<9&&!s&&(!o||!o.left&&!o.right)){var f=a.parentNode.getClientRects()[0];o=f?{left:f.left,right:f.left+wn(e.display),top:f.top,bottom:f.bottom}:xs}for(var h=o.top-t.rect.top,p=o.bottom-t.rect.top,m=(h+p)/2,g=t.view.measure.heights,v=0;v<g.length-1&&!(m<g[v]);v++);var b=v?g[v-1]:0,y=g[v],w={left:("right"==u?o.right:o.left)-t.rect.left,right:("left"==u?o.left:o.right)-t.rect.left,top:b,bottom:y};return o.left||o.right||(w.bogus=!0),e.options.singleCursorHeightPerLine||(w.rtop=h,w.rbottom=p),w}function Qt(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!V(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*r,bottom:t.bottom*r}}function Zt(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function en(e){e.display.externalMeasure=null,t(e.display.lineMeasure);for(var n=0;n<e.display.view.length;n++)Zt(e.display.view[n])}function tn(e){en(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function nn(){return ka&&Oa?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function rn(){return ka&&Oa?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function on(e){var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;++n)e.widgets[n].above&&(t+=Pt(e.widgets[n]));return t}function an(e,t,n,r,o){if(!o){var i=on(t);n.top+=i,n.bottom+=i}if("line"==r)return n;r||(r="local");var a=nt(t);if("local"==r?a+=It(e.display):a-=e.display.viewOffset,"page"==r||"window"==r){var s=e.display.lineSpace.getBoundingClientRect();a+=s.top+("window"==r?0:rn());var l=s.left+("window"==r?0:nn());n.left+=l,n.right+=l}return n.top+=a,n.bottom+=a,n}function sn(e,t,n){if("div"==n)return t;var r=t.left,o=t.top;if("page"==n)r-=nn(),o-=rn();else if("local"==n||!n){var i=e.display.sizer.getBoundingClientRect();r+=i.left,o+=i.top}var a=e.display.lineSpace.getBoundingClientRect();return{left:r-a.left,top:o-a.top}}function ln(e,t,n,r,o){return r||(r=Z(e.doc,t.line)),an(e,r,qt(e,r,t.ch,o),n)}function un(e,t,n,r,o,i){function a(t,a){var s=Gt(e,o,t,a?"right":"left",i);return a?s.left=s.right:s.right=s.left,an(e,r,s,n)}function s(e,t,n){var r=l[t],o=1==r.level;return a(n?e-1:e,o!=n)}r=r||Z(e.doc,t.line),o||(o=Kt(e,r));var l=E(r,e.doc.direction),u=t.ch,c=t.sticky;if(u>=r.text.length?(u=r.text.length,c="before"):u<=0&&(u=0,c="after"),!l)return a("before"==c?u-1:u,"before"==c);var d=T(l,u,c),f=Ja,h=s(u,d,"before"==c);return null!=f&&(h.other=s(u,f,"before"!=c)),h}function cn(e,t){var n=0;t=pe(e.doc,t),e.options.lineWrapping||(n=wn(e.display)*t.ch);var r=Z(e.doc,t.line),o=nt(r)+It(e.display);return{left:n,right:n,top:o,bottom:o+r.height}}function dn(e,t,n,r,o){var i=se(e,t,n);return i.xRel=o,r&&(i.outside=r),i}function fn(e,t,n){var r=e.doc;if((n+=e.display.viewOffset)<0)return dn(r.first,0,null,-1,-1);var o=oe(r,n),i=r.first+r.size-1;if(o>i)return dn(r.first+r.size-1,Z(r,i).text.length,null,1,1);t<0&&(t=0);for(var a=Z(r,o);;){var s=gn(e,a,o,t,n),l=Ke(a,s.ch+(s.xRel>0||s.outside>0?1:0));if(!l)return s;var u=l.find(1);if(u.line==o)return u;a=Z(r,o=u.line)}}function hn(e,t,n,r){r-=on(t);var o=t.text.length,i=_(function(t){return Gt(e,n,t-1).bottom<=r},o,0);return o=_(function(t){return Gt(e,n,t).top>r},i,o),{begin:i,end:o}}function pn(e,t,n,r){return n||(n=Kt(e,t)),hn(e,t,n,an(e,t,Gt(e,n,r),"line").top)}function mn(e,t,n,r){return!(e.bottom<=n)&&(e.top>n||(r?e.left:e.right)>t)}function gn(e,t,n,r,o){o-=nt(t);var i=Kt(e,t),a=on(t),s=0,l=t.text.length,u=!0,c=E(t,e.doc.direction);if(c){var d=(e.options.lineWrapping?bn:vn)(e,t,n,i,c,r,o);u=1!=d.level,s=u?d.from:d.to-1,l=u?d.to:d.from-1}var f,h,p=null,m=null,g=_(function(t){var n=Gt(e,i,t);return n.top+=a,n.bottom+=a,!!mn(n,r,o,!1)&&(n.top<=o&&n.left<=r&&(p=t,m=n),!0)},s,l),v=!1;if(m){var b=r-m.left<m.right-r,y=b==u;g=p+(y?0:1),h=y?"after":"before",f=b?m.left:m.right}else{u||g!=l&&g!=s||g++,h=0==g?"after":g==t.text.length?"before":Gt(e,i,g-(u?1:0)).bottom+a<=o==u?"after":"before";var w=un(e,se(n,g,h),"line",t,i);f=w.left,v=o<w.top?-1:o>=w.bottom?1:0}return g=N(t.text,g,1),dn(n,g,h,v,r-f)}function vn(e,t,n,r,o,i,a){var s=_(function(s){var l=o[s],u=1!=l.level;return mn(un(e,se(n,u?l.to:l.from,u?"before":"after"),"line",t,r),i,a,!0)},0,o.length-1),l=o[s];if(s>0){var u=1!=l.level,c=un(e,se(n,u?l.from:l.to,u?"after":"before"),"line",t,r);mn(c,i,a,!0)&&c.top>a&&(l=o[s-1])}return l}function bn(e,t,n,r,o,i,a){var s=hn(e,t,r,a),l=s.begin,u=s.end;/\s/.test(t.text.charAt(u-1))&&u--;for(var c=null,d=null,f=0;f<o.length;f++){var h=o[f];if(!(h.from>=u||h.to<=l)){var p=1!=h.level,m=Gt(e,r,p?Math.min(u,h.to)-1:Math.max(l,h.from)).right,g=m<i?i-m+1e9:m-i;(!c||d>g)&&(c=h,d=g)}}return c||(c=o[o.length-1]),c.from<l&&(c={from:l,to:c.to,level:c.level}),c.to>u&&(c={from:c.from,to:u,level:c.level}),c}function yn(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==gs){gs=r("pre",null,"CodeMirror-line-like");for(var o=0;o<49;++o)gs.appendChild(document.createTextNode("x")),gs.appendChild(r("br"));gs.appendChild(document.createTextNode("x"))}n(e.measure,gs);var i=gs.offsetHeight/50;return i>3&&(e.cachedTextHeight=i),t(e.measure),i||1}function wn(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=r("span","xxxxxxxxxx"),o=r("pre",[t],"CodeMirror-line-like");n(e.measure,o);var i=t.getBoundingClientRect(),a=(i.right-i.left)/10;return a>2&&(e.cachedCharWidth=a),a||10}function xn(e){for(var t=e.display,n={},r={},o=t.gutters.clientLeft,i=t.gutters.firstChild,a=0;i;i=i.nextSibling,++a){var s=e.display.gutterSpecs[a].className;n[s]=i.offsetLeft+i.clientLeft+o,r[s]=i.clientWidth}return{fixedPos:Cn(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function Cn(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function kn(e){var t=yn(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/wn(e.display)-3);return function(o){if(et(e.doc,o))return 0;var i=0;if(o.widgets)for(var a=0;a<o.widgets.length;a++)o.widgets[a].height&&(i+=o.widgets[a].height);return n?i+(Math.ceil(o.text.length/r)||1)*t:i+t}}function Nn(e){var t=e.doc,n=kn(e);t.iter(function(e){var t=n(e);t!=e.height&&ne(e,t)})}function _n(e,t,n,r){var o=e.display;if(!n&&"true"==H(t).getAttribute("cm-not-content"))return null;var i,a,s=o.lineSpace.getBoundingClientRect();try{i=t.clientX-s.left,a=t.clientY-s.top}catch(t){return null}var l,u=fn(e,i,a);if(r&&1==u.xRel&&(l=Z(e.doc,u.line).text).length==u.ch){var c=d(l,l.length,e.options.tabSize)-l.length;u=se(u.line,Math.max(0,Math.round((i-Bt(e.display).left)/wn(e.display))-c))}return u}function Sn(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,r=0;r<n.length;r++)if((t-=n[r].size)<0)return r}function Tn(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),r||(r=0);var o=e.display;if(r&&n<o.viewTo&&(null==o.updateLineNumbers||o.updateLineNumbers>t)&&(o.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=o.viewTo)ps&&Qe(e.doc,t)<o.viewTo&&On(e);else if(n<=o.viewFrom)ps&&Ze(e.doc,n+r)>o.viewFrom?On(e):(o.viewFrom+=r,o.viewTo+=r);else if(t<=o.viewFrom&&n>=o.viewTo)On(e);else if(t<=o.viewFrom){var i=An(e,n,n+r,1);i?(o.view=o.view.slice(i.index),o.viewFrom=i.lineN,o.viewTo+=r):On(e)}else if(n>=o.viewTo){var a=An(e,t,t,-1);a?(o.view=o.view.slice(0,a.index),o.viewTo=a.lineN):On(e)}else{var s=An(e,t,t,-1),l=An(e,n,n+r,1);s&&l?(o.view=o.view.slice(0,s.index).concat(gt(e,s.lineN,l.lineN)).concat(o.view.slice(l.index)),o.viewTo+=r):On(e)}var u=o.externalMeasured;u&&(n<u.lineN?u.lineN+=r:t<u.lineN+u.size&&(o.externalMeasured=null))}function En(e,t,n){e.curOp.viewChanged=!0;var r=e.display,o=e.display.externalMeasured;if(o&&t>=o.lineN&&t<o.lineN+o.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var i=r.view[Sn(e,t)];if(null!=i.node){var a=i.changes||(i.changes=[]);-1==f(a,n)&&a.push(n)}}}function On(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function An(e,t,n,r){var o,i=Sn(e,t),a=e.display.view;if(!ps||n==e.doc.first+e.doc.size)return{index:i,lineN:n};for(var s=e.display.viewFrom,l=0;l<i;l++)s+=a[l].size;if(s!=t){if(r>0){if(i==a.length-1)return null;o=s+a[i].size-t,i++}else o=s-t;t+=o,n+=o}for(;Qe(e.doc,n)!=n;){if(i==(r<0?0:a.length-1))return null;n+=r*a[i-(r<0?1:0)].size,i+=r}return{index:i,lineN:n}}function Dn(e,t,n){var r=e.display;0==r.view.length||t>=r.viewTo||n<=r.viewFrom?(r.view=gt(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=gt(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(Sn(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(gt(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,Sn(e,n)))),r.viewTo=n}function Rn(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var o=t[r];o.hidden||o.node&&!o.changes||++n}return n}function Mn(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Pn(e,t){void 0===t&&(t=!0);for(var n=e.doc,r={},o=r.cursors=document.createDocumentFragment(),i=r.selection=document.createDocumentFragment(),a=0;a<n.sel.ranges.length;a++)if(t||a!=n.sel.primIndex){var s=n.sel.ranges[a];if(!(s.from().line>=e.display.viewTo||s.to().line<e.display.viewFrom)){var l=s.empty();(l||e.options.showCursorWhenSelecting)&&Ln(e,s.head,o),l||jn(e,s,i)}}return r}function Ln(e,t,n){var o=un(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),i=n.appendChild(r("div","\xa0","CodeMirror-cursor"));if(i.style.left=o.left+"px",i.style.top=o.top+"px",i.style.height=Math.max(0,o.bottom-o.top)*e.options.cursorHeight+"px",o.other){var a=n.appendChild(r("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));a.style.display="",a.style.left=o.other.left+"px",a.style.top=o.other.top+"px",a.style.height=.85*(o.other.bottom-o.other.top)+"px"}}function In(e,t){return e.top-t.top||e.left-t.left}function jn(e,t,n){function o(e,t,n,o){t<0&&(t=0),t=Math.round(t),o=Math.round(o),l.appendChild(r("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==n?d-e:n)+"px;\n                             height: "+(o-t)+"px"))}function i(t,n,r){function i(n,r){return ln(e,se(t,n),"div",h,r)}function a(t,n,r){var o=pn(e,h,null,t),a="ltr"==n==("after"==r)?"left":"right";return i("after"==r?o.begin:o.end-(/\s/.test(h.text.charAt(o.end-1))?2:1),a)[a]}var l,u,h=Z(s,t),p=h.text.length,m=E(h,s.direction);return S(m,n||0,null==r?p:r,function(e,t,s,h){var g="ltr"==s,v=i(e,g?"left":"right"),b=i(t-1,g?"right":"left"),y=null==n&&0==e,w=null==r&&t==p,x=0==h,C=!m||h==m.length-1;if(b.top-v.top<=3){var k=(f?y:w)&&x,N=(f?w:y)&&C,_=k?c:(g?v:b).left,S=N?d:(g?b:v).right;o(_,v.top,S-_,v.bottom)}else{var T,E,O,A;g?(T=f&&y&&x?c:v.left,E=f?d:a(e,s,"before"),O=f?c:a(t,s,"after"),A=f&&w&&C?d:b.right):(T=f?a(e,s,"before"):c,E=!f&&y&&x?d:v.right,O=!f&&w&&C?c:b.left,A=f?a(t,s,"after"):d),o(T,v.top,E-T,v.bottom),v.bottom<b.top&&o(c,v.bottom,null,b.top),o(O,b.top,A-O,b.bottom)}(!l||In(v,l)<0)&&(l=v),In(b,l)<0&&(l=b),(!u||In(v,u)<0)&&(u=v),In(b,u)<0&&(u=b)}),{start:l,end:u}}var a=e.display,s=e.doc,l=document.createDocumentFragment(),u=Bt(e.display),c=u.left,d=Math.max(a.sizerWidth,Ht(e)-a.sizer.offsetLeft)-u.right,f="ltr"==s.direction,h=t.from(),p=t.to();if(h.line==p.line)i(h.line,h.ch,p.ch);else{var m=Z(s,h.line),g=Z(s,p.line),v=Xe(m)==Xe(g),b=i(h.line,h.ch,v?m.text.length+1:null).end,y=i(p.line,v?0:null,p.ch).start;v&&(b.top<y.top-2?(o(b.right,b.top,null,b.bottom),o(c,y.top,y.left,y.bottom)):o(b.right,b.top,y.left-b.right,b.bottom)),b.bottom<y.top&&o(c,b.bottom,null,y.top)}n.appendChild(l)}function Bn(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){return t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Fn(e){e.state.focused||(e.display.input.focus(),Un(e))}function Hn(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,zn(e))},100)}function Un(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(D(e,"focus",e,t),e.state.focused=!0,s(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),xa&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),Bn(e))}function zn(e,t){e.state.delayingBlurEvent||(e.state.focused&&(D(e,"blur",e,t),e.state.focused=!1,Ba(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function Wn(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=0;r<t.view.length;r++){var o=t.view[r],i=e.options.lineWrapping,a=void 0,s=0;if(!o.hidden){if(ya&&wa<8){var l=o.node.offsetTop+o.node.offsetHeight;a=l-n,n=l}else{var u=o.node.getBoundingClientRect();a=u.bottom-u.top,!i&&o.text.firstChild&&(s=o.text.firstChild.getBoundingClientRect().right-u.left-1)}var c=o.line.height-a;if((c>.005||c<-.005)&&(ne(o.line,a),Vn(o.line),o.rest))for(var d=0;d<o.rest.length;d++)Vn(o.rest[d]);if(s>e.display.sizerWidth){var f=Math.ceil(s/wn(e.display));f>e.display.maxLineLength&&(e.display.maxLineLength=f,e.display.maxLine=o.line,e.display.maxLineChanged=!0)}}}}function Vn(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],r=n.node.parentNode;r&&(n.height=r.offsetHeight)}}function qn(e,t,n){var r=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-It(e));var o=n&&null!=n.bottom?n.bottom:r+e.wrapper.clientHeight,i=oe(t,r),a=oe(t,o);if(n&&n.ensure){var s=n.ensure.from.line,l=n.ensure.to.line;s<i?(i=s,a=oe(t,nt(Z(t,s))+e.wrapper.clientHeight)):Math.min(l,t.lastLine())>=a&&(i=oe(t,nt(Z(t,l))-e.wrapper.clientHeight),a=l)}return{from:i,to:Math.max(a,i+1)}}function $n(e,t){if(!R(e,"scrollCursorIntoView")){var n=e.display,o=n.sizer.getBoundingClientRect(),i=null;if(t.top+o.top<0?i=!0:t.bottom+o.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!Ta){var a=r("div","\u200b",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-It(e.display))+"px;\n                         height: "+(t.bottom-t.top+Ft(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(a),a.scrollIntoView(i),e.display.lineSpace.removeChild(a)}}}function Kn(e,t,n,r){null==r&&(r=0);var o;e.options.lineWrapping||t!=n||(t=t.ch?se(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t,n="before"==t.sticky?se(t.line,t.ch+1,"before"):t);for(var i=0;i<5;i++){var a=!1,s=un(e,t),l=n&&n!=t?un(e,n):s;o={left:Math.min(s.left,l.left),top:Math.min(s.top,l.top)-r,right:Math.max(s.left,l.left),bottom:Math.max(s.bottom,l.bottom)+r};var u=Xn(e,o),c=e.doc.scrollTop,d=e.doc.scrollLeft;if(null!=u.scrollTop&&(nr(e,u.scrollTop),Math.abs(e.doc.scrollTop-c)>1&&(a=!0)),null!=u.scrollLeft&&(or(e,u.scrollLeft),Math.abs(e.doc.scrollLeft-d)>1&&(a=!0)),!a)break}return o}function Gn(e,t){var n=Xn(e,t);null!=n.scrollTop&&nr(e,n.scrollTop),null!=n.scrollLeft&&or(e,n.scrollLeft)}function Xn(e,t){var n=e.display,r=yn(e.display);t.top<0&&(t.top=0);var o=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,i=Ut(e),a={};t.bottom-t.top>i&&(t.bottom=t.top+i);var s=e.doc.height+jt(n),l=t.top<r,u=t.bottom>s-r;if(t.top<o)a.scrollTop=l?0:t.top;else if(t.bottom>o+i){var c=Math.min(t.top,(u?s:t.bottom)-i);c!=o&&(a.scrollTop=c)}var d=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft,f=Ht(e)-(e.options.fixedGutter?n.gutters.offsetWidth:0),h=t.right-t.left>f;return h&&(t.right=t.left+f),t.left<10?a.scrollLeft=0:t.left<d?a.scrollLeft=Math.max(0,t.left-(h?0:10)):t.right>f+d-3&&(a.scrollLeft=t.right+(h?0:10)-f),a}function Yn(e,t){null!=t&&(er(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Jn(e){er(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function Qn(e,t,n){null==t&&null==n||er(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function Zn(e,t){er(e),e.curOp.scrollToPos=t}function er(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;tr(e,cn(e,t.from),cn(e,t.to),t.margin)}}function tr(e,t,n,r){var o=Xn(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-r,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+r});Qn(e,o.scrollLeft,o.scrollTop)}function nr(e,t){Math.abs(e.doc.scrollTop-t)<2||(ma||Er(e,{top:t}),rr(e,t,!0),ma&&Er(e),xr(e,100))}function rr(e,t,n){t=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function or(e,t,n,r){t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!r||(e.doc.scrollLeft=t,Rr(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function ir(e){var t=e.display,n=t.gutters.offsetWidth,r=Math.round(e.doc.height+jt(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+Ft(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}function ar(e,t){t||(t=ir(e));var n=e.display.barWidth,r=e.display.barHeight;sr(e,t);for(var o=0;o<4&&n!=e.display.barWidth||r!=e.display.barHeight;o++)n!=e.display.barWidth&&e.options.lineWrapping&&Wn(e),sr(e,ir(e)),n=e.display.barWidth,r=e.display.barHeight}function sr(e,t){var n=e.display,r=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}function lr(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&Ba(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Ns[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),es(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,n){"horizontal"==n?or(e,t):nr(e,t)},e),e.display.scrollbars.addClass&&s(e.display.wrapper,e.display.scrollbars.addClass)}function ur(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++_s},vt(e.curOp)}function cr(e){var t=e.curOp;t&&yt(t,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;dr(e)})}function dr(e){for(var t=e.ops,n=0;n<t.length;n++)fr(t[n]);for(var r=0;r<t.length;r++)hr(t[r]);for(var o=0;o<t.length;o++)pr(t[o]);for(var i=0;i<t.length;i++)mr(t[i]);for(var a=0;a<t.length;a++)gr(t[a])}function fr(e){var t=e.cm,n=t.display;kr(t),e.updateMaxLine&&ot(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new Ss(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function hr(e){e.updatedDisplay=e.mustUpdate&&Sr(e.cm,e.update)}function pr(e){var t=e.cm,n=t.display;e.updatedDisplay&&Wn(t),e.barMeasure=ir(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=qt(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Ft(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-Ht(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function mr(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&or(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==a();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&ar(t,e.barMeasure),e.updatedDisplay&&Dr(t,e.barMeasure),e.selectionChanged&&Bn(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&Fn(e.cm)}function gr(e){var t=e.cm,n=t.display,r=t.doc;if(e.updatedDisplay&&Tr(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&rr(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&or(t,e.scrollLeft,!0,!0),e.scrollToPos){$n(t,Kn(t,pe(r,e.scrollToPos.from),pe(r,e.scrollToPos.to),e.scrollToPos.margin))}var o=e.maybeHiddenMarkers,i=e.maybeUnhiddenMarkers;if(o)for(var a=0;a<o.length;++a)o[a].lines.length||D(o[a],"hide");if(i)for(var s=0;s<i.length;++s)i[s].lines.length&&D(i[s],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&D(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function vr(e,t){if(e.curOp)return t();ur(e);try{return t()}finally{cr(e)}}function br(e,t){return function(){if(e.curOp)return t.apply(e,arguments);ur(e);try{return t.apply(e,arguments)}finally{cr(e)}}}function yr(e){return function(){if(this.curOp)return e.apply(this,arguments);ur(this);try{return e.apply(this,arguments)}finally{cr(this)}}}function wr(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);ur(t);try{return e.apply(this,arguments)}finally{cr(t)}}}function xr(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,u(Cr,e))}function Cr(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,r=ye(e,t.highlightFrontier),o=[];t.iter(r.line,Math.min(t.first+t.size,e.display.viewTo+500),function(i){if(r.line>=e.display.viewFrom){var a=i.styles,s=i.text.length>e.options.maxHighlightLength?Y(t.mode,r.state):null,l=ve(e,i,r,!0);s&&(r.state=s),i.styles=l.styles;var u=i.styleClasses,c=l.classes;c?i.styleClasses=c:u&&(i.styleClasses=null);for(var d=!a||a.length!=i.styles.length||u!=c&&(!u||!c||u.bgClass!=c.bgClass||u.textClass!=c.textClass),f=0;!d&&f<a.length;++f)d=a[f]!=i.styles[f];d&&o.push(r.line),i.stateAfter=r.save(),r.nextLine()}else i.text.length<=e.options.maxHighlightLength&&we(e,i.text,r),i.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>n)return xr(e,e.options.workDelay),!0}),t.highlightFrontier=r.line,t.modeFrontier=Math.max(t.modeFrontier,r.line),o.length&&vr(e,function(){for(var t=0;t<o.length;t++)En(e,o[t],"text")})}}function kr(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Ft(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Ft(e)+"px",t.scrollbarsClipped=!0)}function Nr(e){if(e.hasFocus())return null;var t=a();if(!t||!i(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var r=window.getSelection();r.anchorNode&&r.extend&&i(e.display.lineDiv,r.anchorNode)&&(n.anchorNode=r.anchorNode,n.anchorOffset=r.anchorOffset,n.focusNode=r.focusNode,n.focusOffset=r.focusOffset)}return n}function _r(e){if(e&&e.activeElt&&e.activeElt!=a()&&(e.activeElt.focus(),e.anchorNode&&i(document.body,e.anchorNode)&&i(document.body,e.focusNode))){var t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),t.removeAllRanges(),t.addRange(n),t.extend(e.focusNode,e.focusOffset)}}function Sr(e,n){var r=e.display,o=e.doc;if(n.editorIsHidden)return On(e),!1;if(!n.force&&n.visible.from>=r.viewFrom&&n.visible.to<=r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo)&&r.renderedView==r.view&&0==Rn(e))return!1;Mr(e)&&(On(e),n.dims=xn(e));var i=o.first+o.size,a=Math.max(n.visible.from-e.options.viewportMargin,o.first),s=Math.min(i,n.visible.to+e.options.viewportMargin);r.viewFrom<a&&a-r.viewFrom<20&&(a=Math.max(o.first,r.viewFrom)),r.viewTo>s&&r.viewTo-s<20&&(s=Math.min(i,r.viewTo)),ps&&(a=Qe(e.doc,a),s=Ze(e.doc,s));var l=a!=r.viewFrom||s!=r.viewTo||r.lastWrapHeight!=n.wrapperHeight||r.lastWrapWidth!=n.wrapperWidth;Dn(e,a,s),r.viewOffset=nt(Z(e.doc,r.viewFrom)),e.display.mover.style.top=r.viewOffset+"px";var u=Rn(e);if(!l&&0==u&&!n.force&&r.renderedView==r.view&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo))return!1;var c=Nr(e);return u>4&&(r.lineDiv.style.display="none"),Or(e,r.updateLineNumbers,n.dims),u>4&&(r.lineDiv.style.display=""),r.renderedView=r.view,_r(c),t(r.cursorDiv),t(r.selectionDiv),r.gutters.style.height=r.sizer.style.minHeight=0,l&&(r.lastWrapHeight=n.wrapperHeight,r.lastWrapWidth=n.wrapperWidth,xr(e,400)),r.updateLineNumbers=null,!0}function Tr(e,t){for(var n=t.viewport,r=!0;(r&&e.options.lineWrapping&&t.oldDisplayWidth!=Ht(e)||(n&&null!=n.top&&(n={top:Math.min(e.doc.height+jt(e.display)-Ut(e),n.top)}),t.visible=qn(e.display,e.doc,n),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&Sr(e,t);r=!1){Wn(e);var o=ir(e);Mn(e),ar(e,o),Dr(e,o),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function Er(e,t){var n=new Ss(e,t);if(Sr(e,n)){Wn(e),Tr(e,n);var r=ir(e);Mn(e),ar(e,r),Dr(e,r),n.finish()}}function Or(e,n,r){function o(t){var n=t.nextSibling;return xa&&Da&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var i=e.display,a=e.options.lineNumbers,s=i.lineDiv,l=s.firstChild,u=i.view,c=i.viewFrom,d=0;d<u.length;d++){var h=u[d];if(h.hidden);else if(h.node&&h.node.parentNode==s){for(;l!=h.node;)l=o(l);var p=a&&null!=n&&n<=c&&h.lineNumber;h.changes&&(f(h.changes,"gutter")>-1&&(p=!1),Ct(e,h,c,r)),p&&(t(h.lineNumber),h.lineNumber.appendChild(document.createTextNode(ae(e.options,c)))),l=h.node.nextSibling}else{var m=At(e,h,c,r);s.insertBefore(m,l)}c+=h.size}for(;l;)l=o(l)}function Ar(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px"}function Dr(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Ft(e)+"px"}function Rr(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=Cn(t)-t.scroller.scrollLeft+e.doc.scrollLeft,o=t.gutters.offsetWidth,i=r+"px",a=0;a<n.length;a++)if(!n[a].hidden){e.options.fixedGutter&&(n[a].gutter&&(n[a].gutter.style.left=i),n[a].gutterBackground&&(n[a].gutterBackground.style.left=i));var s=n[a].alignable;if(s)for(var l=0;l<s.length;l++)s[l].style.left=i}e.options.fixedGutter&&(t.gutters.style.left=r+o+"px")}}function Mr(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=ae(e.options,t.first+t.size-1),o=e.display;if(n.length!=o.lineNumChars){var i=o.measure.appendChild(r("div",[r("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),a=i.firstChild.offsetWidth,s=i.offsetWidth-a;return o.lineGutter.style.width="",o.lineNumInnerWidth=Math.max(a,o.lineGutter.offsetWidth-s)+1,o.lineNumWidth=o.lineNumInnerWidth+s,o.lineNumChars=o.lineNumInnerWidth?n.length:-1,o.lineGutter.style.width=o.lineNumWidth+"px",Ar(e.display),!0}return!1}function Pr(e,t){for(var n=[],r=!1,o=0;o<e.length;o++){var i=e[o],a=null;if("string"!=typeof i&&(a=i.style,i=i.className),"CodeMirror-linenumbers"==i){if(!t)continue;r=!0}n.push({className:i,style:a})}return t&&!r&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function Lr(e){var n=e.gutters,o=e.gutterSpecs;t(n),e.lineGutter=null;for(var i=0;i<o.length;++i){var a=o[i],s=a.className,l=a.style,u=n.appendChild(r("div",null,"CodeMirror-gutter "+s));l&&(u.style.cssText=l),"CodeMirror-linenumbers"==s&&(e.lineGutter=u,u.style.width=(e.lineNumWidth||1)+"px")}n.style.display=o.length?"":"none",Ar(e)}function Ir(e){Lr(e.display),Tn(e),Rr(e)}function jr(e,t,n,i){var a=this;this.input=n,a.scrollbarFiller=r("div",null,"CodeMirror-scrollbar-filler"),a.scrollbarFiller.setAttribute("cm-not-content","true"),a.gutterFiller=r("div",null,"CodeMirror-gutter-filler"),a.gutterFiller.setAttribute("cm-not-content","true"),a.lineDiv=o("div",null,"CodeMirror-code"),a.selectionDiv=r("div",null,null,"position: relative; z-index: 1"),a.cursorDiv=r("div",null,"CodeMirror-cursors"),a.measure=r("div",null,"CodeMirror-measure"),a.lineMeasure=r("div",null,"CodeMirror-measure"),a.lineSpace=o("div",[a.measure,a.lineMeasure,a.selectionDiv,a.cursorDiv,a.lineDiv],null,"position: relative; outline: none");var s=o("div",[a.lineSpace],"CodeMirror-lines");a.mover=r("div",[s],null,"position: relative"),a.sizer=r("div",[a.mover],"CodeMirror-sizer"),a.sizerWidth=null,a.heightForcer=r("div",null,null,"position: absolute; height: "+Wa+"px; width: 1px;"),a.gutters=r("div",null,"CodeMirror-gutters"),a.lineGutter=null,a.scroller=r("div",[a.sizer,a.heightForcer,a.gutters],"CodeMirror-scroll"),a.scroller.setAttribute("tabIndex","-1"),a.wrapper=r("div",[a.scrollbarFiller,a.gutterFiller,a.scroller],"CodeMirror"),ya&&wa<8&&(a.gutters.style.zIndex=-1,a.scroller.style.paddingRight=0),xa||ma&&Aa||(a.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(a.wrapper):e(a.wrapper)),a.viewFrom=a.viewTo=t.first,a.reportedViewFrom=a.reportedViewTo=t.first,a.view=[],a.renderedView=null,a.externalMeasured=null,a.viewOffset=0,a.lastWrapHeight=a.lastWrapWidth=0,a.updateLineNumbers=null,a.nativeBarWidth=a.barHeight=a.barWidth=0,a.scrollbarsClipped=!1,a.lineNumWidth=a.lineNumInnerWidth=a.lineNumChars=null,a.alignWidgets=!1,a.cachedCharWidth=a.cachedTextHeight=a.cachedPaddingH=null,a.maxLine=null,a.maxLineLength=0,a.maxLineChanged=!1,a.wheelDX=a.wheelDY=a.wheelStartX=a.wheelStartY=null,a.shift=!1,a.selForContextMenu=null,a.activeTouch=null,a.gutterSpecs=Pr(i.gutters,i.lineNumbers),Lr(a),n.init(a)}function Br(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function Fr(e){var t=Br(e);return t.x*=Es,t.y*=Es,t}function Hr(e,t){var n=Br(t),r=n.x,o=n.y,i=e.display,a=i.scroller,s=a.scrollWidth>a.clientWidth,l=a.scrollHeight>a.clientHeight;if(r&&s||o&&l){if(o&&Da&&xa)e:for(var u=t.target,c=i.view;u!=a;u=u.parentNode)for(var d=0;d<c.length;d++)if(c[d].node==u){e.display.currentWheelTarget=u;break e}if(r&&!ma&&!Na&&null!=Es)return o&&l&&nr(e,Math.max(0,a.scrollTop+o*Es)),or(e,Math.max(0,a.scrollLeft+r*Es)),(!o||o&&l)&&I(t),void(i.wheelStartX=null);if(o&&null!=Es){var f=o*Es,h=e.doc.scrollTop,p=h+i.wrapper.clientHeight;f<0?h=Math.max(0,h+f-50):p=Math.min(e.doc.height,p+f+50),Er(e,{top:h,bottom:p})}Ts<20&&(null==i.wheelStartX?(i.wheelStartX=a.scrollLeft,i.wheelStartY=a.scrollTop,i.wheelDX=r,i.wheelDY=o,setTimeout(function(){if(null!=i.wheelStartX){var e=a.scrollLeft-i.wheelStartX,t=a.scrollTop-i.wheelStartY,n=t&&i.wheelDY&&t/i.wheelDY||e&&i.wheelDX&&e/i.wheelDX;i.wheelStartX=i.wheelStartY=null,n&&(Es=(Es*Ts+n)/(Ts+1),++Ts)}},200)):(i.wheelDX+=r,i.wheelDY+=o))}}function Ur(e,t,n){var r=e&&e.options.selectionsMayTouch,o=t[n];t.sort(function(e,t){return le(e.from(),t.from())}),n=f(t,o);for(var i=1;i<t.length;i++){var a=t[i],s=t[i-1],l=le(s.to(),a.from());if(r&&!a.empty()?l>0:l>=0){var u=fe(s.from(),a.from()),c=de(s.to(),a.to()),d=s.empty()?a.from()==a.head:s.from()==s.head;i<=n&&--n,t.splice(--i,2,new As(d?c:u,d?u:c))}}return new Os(t,n)}function zr(e,t){return new Os([new As(e,t||e)],0)}function Wr(e){return e.text?se(e.from.line+e.text.length-1,m(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function Vr(e,t){if(le(e,t.from)<0)return e;if(le(e,t.to)<=0)return Wr(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=Wr(t).ch-t.to.ch),se(n,r)}function qr(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var o=e.sel.ranges[r];n.push(new As(Vr(o.anchor,t),Vr(o.head,t)))}return Ur(e.cm,n,e.sel.primIndex)}function $r(e,t,n){return e.line==t.line?se(n.line,e.ch-t.ch+n.ch):se(n.line+(e.line-t.line),e.ch)}function Kr(e,t,n){for(var r=[],o=se(e.first,0),i=o,a=0;a<t.length;a++){var s=t[a],l=$r(s.from,o,i),u=$r(Wr(s),o,i);if(o=s.to,i=u,"around"==n){var c=e.sel.ranges[a],d=le(c.head,c.anchor)<0;r[a]=new As(d?u:l,d?l:u)}else r[a]=new As(l,l)}return new Os(r,e.sel.primIndex)}function Gr(e){e.doc.mode=G(e.options,e.doc.modeOption),Xr(e)}function Xr(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,xr(e,100),e.state.modeGen++,e.curOp&&Tn(e)}function Yr(e,t){return 0==t.from.ch&&0==t.to.ch&&""==m(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Jr(e,t,n,r){function o(e){return n?n[e]:null}function i(e,n,o){it(e,n,o,r),wt(e,"change",e,t)}function a(e,t){for(var n=[],i=e;i<t;++i)n.push(new ms(u[i],o(i),r));return n}var s=t.from,l=t.to,u=t.text,c=Z(e,s.line),d=Z(e,l.line),f=m(u),h=o(u.length-1),p=l.line-s.line;if(t.full)e.insert(0,a(0,u.length)),e.remove(u.length,e.size-u.length);else if(Yr(e,t)){var g=a(0,u.length-1);i(d,d.text,h),p&&e.remove(s.line,p),g.length&&e.insert(s.line,g)}else if(c==d)if(1==u.length)i(c,c.text.slice(0,s.ch)+f+c.text.slice(l.ch),h);else{var v=a(1,u.length-1);v.push(new ms(f+c.text.slice(l.ch),h,r)),i(c,c.text.slice(0,s.ch)+u[0],o(0)),e.insert(s.line+1,v)}else if(1==u.length)i(c,c.text.slice(0,s.ch)+u[0]+d.text.slice(l.ch),o(0)),e.remove(s.line+1,p);else{i(c,c.text.slice(0,s.ch)+u[0],o(0)),i(d,f+d.text.slice(l.ch),h);var b=a(1,u.length-1);p>1&&e.remove(s.line+1,p-1),e.insert(s.line+1,b)}wt(e,"change",e,t)}function Qr(e,t,n){function r(e,o,i){if(e.linked)for(var a=0;a<e.linked.length;++a){var s=e.linked[a];if(s.doc!=o){var l=i&&s.sharedHist;n&&!l||(t(s.doc,l),r(s.doc,e,l))}}}r(e,null,!0)}function Zr(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,Nn(e),Gr(e),eo(e),e.options.lineWrapping||ot(e),e.options.mode=t.modeOption,Tn(e)}function eo(e){("rtl"==e.doc.direction?s:Ba)(e.display.lineDiv,"CodeMirror-rtl")}function to(e){vr(e,function(){eo(e),Tn(e)})}function no(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function ro(e,t){var n={from:ce(t.from),to:Wr(t),text:ee(e,t.from,t.to)};return co(e,n,t.from.line,t.to.line+1),Qr(e,function(e){return co(e,n,t.from.line,t.to.line+1)},!0),n}function oo(e){for(;e.length;){if(!m(e).ranges)break;e.pop()}}function io(e,t){return t?(oo(e.done),m(e.done)):e.done.length&&!m(e.done).ranges?m(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),m(e.done)):void 0}function ao(e,t,n,r){var o=e.history;o.undone.length=0;var i,a,s=+new Date;if((o.lastOp==r||o.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&o.lastModTime>s-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(i=io(o,o.lastOp==r)))a=m(i.changes),0==le(t.from,t.to)&&0==le(t.from,a.to)?a.to=Wr(t):i.changes.push(ro(e,t));else{var l=m(o.done);for(l&&l.ranges||uo(e.sel,o.done),i={changes:[ro(e,t)],generation:o.generation},o.done.push(i);o.done.length>o.undoDepth;)o.done.shift(),o.done[0].ranges||o.done.shift()}o.done.push(n),o.generation=++o.maxGeneration,o.lastModTime=o.lastSelTime=s,o.lastOp=o.lastSelOp=r,o.lastOrigin=o.lastSelOrigin=t.origin,a||D(e,"historyAdded")}function so(e,t,n,r){var o=t.charAt(0);return"*"==o||"+"==o&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function lo(e,t,n,r){var o=e.history,i=r&&r.origin;n==o.lastSelOp||i&&o.lastSelOrigin==i&&(o.lastModTime==o.lastSelTime&&o.lastOrigin==i||so(e,i,m(o.done),t))?o.done[o.done.length-1]=t:uo(t,o.done),o.lastSelTime=+new Date,o.lastSelOrigin=i,o.lastSelOp=n,r&&!1!==r.clearRedo&&oo(o.undone)}function uo(e,t){var n=m(t);n&&n.ranges&&n.equals(e)||t.push(e)}function co(e,t,n,r){var o=t["spans_"+e.id],i=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),function(n){n.markedSpans&&((o||(o=t["spans_"+e.id]={}))[i]=n.markedSpans),++i})}function fo(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function ho(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=[],o=0;o<t.text.length;++o)r.push(fo(n[o]));return r}function po(e,t){var n=ho(e,t),r=Ie(e,t);if(!n)return r;if(!r)return n;for(var o=0;o<n.length;++o){var i=n[o],a=r[o];if(i&&a)e:for(var s=0;s<a.length;++s){for(var l=a[s],u=0;u<i.length;++u)if(i[u].marker==l.marker)continue e;i.push(l)}else a&&(n[o]=a)}return n}function mo(e,t,n){for(var r=[],o=0;o<e.length;++o){var i=e[o];if(i.ranges)r.push(n?Os.prototype.deepCopy.call(i):i);else{var a=i.changes,s=[];r.push({changes:s});for(var l=0;l<a.length;++l){var u=a[l],c=void 0;if(s.push({from:u.from,to:u.to,text:u.text}),t)for(var d in u)(c=d.match(/^spans_(\d+)$/))&&f(t,Number(c[1]))>-1&&(m(s)[d]=u[d],delete u[d])}}}return r}function go(e,t,n,r){if(r){var o=e.anchor;if(n){var i=le(t,o)<0;i!=le(n,o)<0?(o=t,t=n):i!=le(t,n)<0&&(t=n)}return new As(o,t)}return new As(n||t,t)}function vo(e,t,n,r,o){null==o&&(o=e.cm&&(e.cm.display.shift||e.extend)),ko(e,new Os([go(e.sel.primary(),t,n,o)],0),r)}function bo(e,t,n){for(var r=[],o=e.cm&&(e.cm.display.shift||e.extend),i=0;i<e.sel.ranges.length;i++)r[i]=go(e.sel.ranges[i],t[i],null,o);ko(e,Ur(e.cm,r,e.sel.primIndex),n)}function yo(e,t,n,r){var o=e.sel.ranges.slice(0);o[t]=n,ko(e,Ur(e.cm,o,e.sel.primIndex),r)}function wo(e,t,n,r){ko(e,zr(t,n),r)}function xo(e,t,n){var r={ranges:t.ranges,update:function(t){var n=this;this.ranges=[];for(var r=0;r<t.length;r++)n.ranges[r]=new As(pe(e,t[r].anchor),pe(e,t[r].head))},origin:n&&n.origin};return D(e,"beforeSelectionChange",e,r),e.cm&&D(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?Ur(e.cm,r.ranges,r.ranges.length-1):t}function Co(e,t,n){var r=e.history.done,o=m(r);o&&o.ranges?(r[r.length-1]=t,No(e,t,n)):ko(e,t,n)}function ko(e,t,n){No(e,t,n),lo(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function No(e,t,n){(P(e,"beforeSelectionChange")||e.cm&&P(e.cm,"beforeSelectionChange"))&&(t=xo(e,t,n)),_o(e,To(e,t,n&&n.bias||(le(t.primary().head,e.sel.primary().head)<0?-1:1),!0)),n&&!1===n.scroll||!e.cm||Jn(e.cm)}function _o(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,M(e.cm)),wt(e,"cursorActivity",e))}function So(e){_o(e,To(e,e.sel,null,!1))}function To(e,t,n,r){for(var o,i=0;i<t.ranges.length;i++){var a=t.ranges[i],s=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[i],l=Oo(e,a.anchor,s&&s.anchor,n,r),u=Oo(e,a.head,s&&s.head,n,r);(o||l!=a.anchor||u!=a.head)&&(o||(o=t.ranges.slice(0,i)),o[i]=new As(l,u))}return o?Ur(e.cm,o,t.primIndex):t}function Eo(e,t,n,r,o){var i=Z(e,t.line);if(i.markedSpans)for(var a=0;a<i.markedSpans.length;++a){var s=i.markedSpans[a],l=s.marker,u="selectLeft"in l?!l.selectLeft:l.inclusiveLeft,c="selectRight"in l?!l.selectRight:l.inclusiveRight;if((null==s.from||(u?s.from<=t.ch:s.from<t.ch))&&(null==s.to||(c?s.to>=t.ch:s.to>t.ch))){if(o&&(D(l,"beforeCursorEnter"),l.explicitlyCleared)){if(i.markedSpans){--a;continue}break}if(!l.atomic)continue;if(n){var d=l.find(r<0?1:-1),f=void 0;if((r<0?c:u)&&(d=Ao(e,d,-r,d&&d.line==t.line?i:null)),d&&d.line==t.line&&(f=le(d,n))&&(r<0?f<0:f>0))return Eo(e,d,t,r,o)}var h=l.find(r<0?-1:1);return(r<0?u:c)&&(h=Ao(e,h,r,h.line==t.line?i:null)),h?Eo(e,h,t,r,o):null}}return t}function Oo(e,t,n,r,o){var i=r||1,a=Eo(e,t,n,i,o)||!o&&Eo(e,t,n,i,!0)||Eo(e,t,n,-i,o)||!o&&Eo(e,t,n,-i,!0);return a||(e.cantEdit=!0,se(e.first,0))}function Ao(e,t,n,r){return n<0&&0==t.ch?t.line>e.first?pe(e,se(t.line-1)):null:n>0&&t.ch==(r||Z(e,t.line)).text.length?t.line<e.first+e.size-1?se(t.line+1,0):null:new se(t.line,t.ch+n)}function Do(e){e.setSelection(se(e.firstLine(),0),se(e.lastLine()),qa)}function Ro(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return n&&(r.update=function(t,n,o,i){t&&(r.from=pe(e,t)),n&&(r.to=pe(e,n)),o&&(r.text=o),void 0!==i&&(r.origin=i)}),D(e,"beforeChange",e,r),e.cm&&D(e.cm,"beforeChange",e.cm,r),r.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:r.from,to:r.to,text:r.text,origin:r.origin}}function Mo(e,t,n){if(e.cm){if(!e.cm.curOp)return br(e.cm,Mo)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(P(e,"beforeChange")||e.cm&&P(e.cm,"beforeChange"))||(t=Ro(e,t,!0))){var r=hs&&!n&&Be(e,t.from,t.to);if(r)for(var o=r.length-1;o>=0;--o)Po(e,{from:r[o].from,to:r[o].to,text:o?[""]:t.text,origin:t.origin});else Po(e,t)}}function Po(e,t){if(1!=t.text.length||""!=t.text[0]||0!=le(t.from,t.to)){var n=qr(e,t);ao(e,t,n,e.cm?e.cm.curOp.id:NaN),jo(e,t,n,Ie(e,t));var r=[];Qr(e,function(e,n){n||-1!=f(r,e.history)||(zo(e.history,t),r.push(e.history)),jo(e,t,null,Ie(e,t))})}}function Lo(e,t,n){var r=e.cm&&e.cm.state.suppressEdits;if(!r||n){for(var o,i=e.history,a=e.sel,s="undo"==t?i.done:i.undone,l="undo"==t?i.undone:i.done,u=0;u<s.length&&(o=s[u],n?!o.ranges||o.equals(e.sel):o.ranges);u++);if(u!=s.length){for(i.lastOrigin=i.lastSelOrigin=null;;){if(o=s.pop(),!o.ranges){if(r)return void s.push(o);break}if(uo(o,l),n&&!o.equals(e.sel))return void ko(e,o,{clearRedo:!1});a=o}var c=[];uo(a,l),l.push({changes:c,generation:i.generation}),i.generation=o.generation||++i.maxGeneration;for(var d=P(e,"beforeChange")||e.cm&&P(e.cm,"beforeChange"),h=o.changes.length-1;h>=0;--h){var p=function(n){var r=o.changes[n];if(r.origin=t,d&&!Ro(e,r,!1))return s.length=0,{};c.push(ro(e,r));var i=n?qr(e,r):m(s);jo(e,r,i,po(e,r)),!n&&e.cm&&e.cm.scrollIntoView({from:r.from,to:Wr(r)});var a=[];Qr(e,function(e,t){t||-1!=f(a,e.history)||(zo(e.history,r),a.push(e.history)),jo(e,r,null,po(e,r))})}(h);if(p)return p.v}}}}function Io(e,t){if(0!=t&&(e.first+=t,e.sel=new Os(g(e.sel.ranges,function(e){return new As(se(e.anchor.line+t,e.anchor.ch),se(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){Tn(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)En(e.cm,r,"gutter")}}function jo(e,t,n,r){if(e.cm&&!e.cm.curOp)return br(e.cm,jo)(e,t,n,r);if(t.to.line<e.first)return void Io(e,t.text.length-1-(t.to.line-t.from.line));if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var o=t.text.length-1-(e.first-t.from.line);Io(e,o),t={from:se(e.first,0),to:se(t.to.line+o,t.to.ch),text:[m(t.text)],origin:t.origin}}var i=e.lastLine();t.to.line>i&&(t={from:t.from,to:se(i,Z(e,i).text.length),text:[t.text[0]],origin:t.origin}),t.removed=ee(e,t.from,t.to),n||(n=qr(e,t)),e.cm?Bo(e.cm,t,r):Jr(e,t,r),No(e,n,qa),e.cantEdit&&Oo(e,se(e.firstLine(),0))&&(e.cantEdit=!1)}}function Bo(e,t,n){var r=e.doc,o=e.display,i=t.from,a=t.to,s=!1,l=i.line;e.options.lineWrapping||(l=re(Xe(Z(r,i.line))),r.iter(l,a.line+1,function(e){if(e==o.maxLine)return s=!0,!0})),r.sel.contains(t.from,t.to)>-1&&M(e),Jr(r,t,n,kn(e)),e.options.lineWrapping||(r.iter(l,i.line+t.text.length,function(e){var t=rt(e);t>o.maxLineLength&&(o.maxLine=e,o.maxLineLength=t,o.maxLineChanged=!0,s=!1)}),s&&(e.curOp.updateMaxLine=!0)),Te(r,i.line),xr(e,400);var u=t.text.length-(a.line-i.line)-1;t.full?Tn(e):i.line!=a.line||1!=t.text.length||Yr(e.doc,t)?Tn(e,i.line,a.line+1,u):En(e,i.line,"text");var c=P(e,"changes"),d=P(e,"change");if(d||c){var f={from:i,to:a,text:t.text,removed:t.removed,origin:t.origin};d&&wt(e,"change",e,f),c&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(f)}e.display.selForContextMenu=null}function Fo(e,t,n,r,o){var i;r||(r=n),le(r,n)<0&&(i=[r,n],n=i[0],r=i[1]),"string"==typeof t&&(t=e.splitLines(t)),Mo(e,{from:n,to:r,text:t,origin:o})}function Ho(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function Uo(e,t,n,r){for(var o=0;o<e.length;++o){var i=e[o],a=!0;if(i.ranges){i.copied||(i=e[o]=i.deepCopy(),i.copied=!0);for(var s=0;s<i.ranges.length;s++)Ho(i.ranges[s].anchor,t,n,r),Ho(i.ranges[s].head,t,n,r)}else{for(var l=0;l<i.changes.length;++l){var u=i.changes[l];if(n<u.from.line)u.from=se(u.from.line+r,u.from.ch),u.to=se(u.to.line+r,u.to.ch);else if(t<=u.to.line){a=!1;break}}a||(e.splice(0,o+1),o=0)}}}function zo(e,t){var n=t.from.line,r=t.to.line,o=t.text.length-(r-n)-1;Uo(e.done,n,r,o),Uo(e.undone,n,r,o)}function Wo(e,t,n,r){var o=t,i=t;return"number"==typeof t?i=Z(e,he(e,t)):o=re(t),null==o?null:(r(i,o)&&e.cm&&En(e.cm,o,n),i)}function Vo(e){var t=this;this.lines=e,this.parent=null;for(var n=0,r=0;r<e.length;++r)e[r].parent=t,n+=e[r].height;this.height=n}function qo(e){var t=this;this.children=e;for(var n=0,r=0,o=0;o<e.length;++o){var i=e[o];n+=i.chunkSize(),r+=i.height,i.parent=t}this.size=n,this.height=r,this.parent=null}function $o(e,t,n){nt(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Yn(e,n)}function Ko(e,t,n,r){var o=new Ds(e,n,r),i=e.cm;return i&&o.noHScroll&&(i.display.alignWidgets=!0),Wo(e,t,"widget",function(t){var n=t.widgets||(t.widgets=[]);if(null==o.insertAt?n.push(o):n.splice(Math.min(n.length-1,Math.max(0,o.insertAt)),0,o),o.line=t,i&&!et(e,t)){var r=nt(t)<e.scrollTop;ne(t,t.height+Pt(o)),r&&Yn(i,o.height),i.curOp.forceUpdate=!0}return!0}),i&&wt(i,"lineWidgetAdded",i,o,"number"==typeof t?t:re(t)),o}function Go(e,t,n,r,i){if(r&&r.shared)return Xo(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return br(e.cm,Go)(e,t,n,r,i);var a=new Ms(e,i),s=le(t,n);if(r&&c(r,a,!1),s>0||0==s&&!1!==a.clearWhenEmpty)return a;if(a.replacedWith&&(a.collapsed=!0,a.widgetNode=o("span",[a.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||a.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(a.widgetNode.insertLeft=!0)),a.collapsed){if(Ge(e,t.line,t,n,a)||t.line!=n.line&&Ge(e,n.line,t,n,a))throw new Error("Inserting collapsed marker partially overlapping an existing one");Oe()}a.addToHistory&&ao(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var l,u=t.line,d=e.cm;if(e.iter(u,n.line+1,function(e){d&&a.collapsed&&!d.options.lineWrapping&&Xe(e)==d.display.maxLine&&(l=!0),a.collapsed&&u!=t.line&&ne(e,0),Me(e,new Ae(a,u==t.line?t.ch:null,u==n.line?n.ch:null)),++u}),a.collapsed&&e.iter(t.line,n.line+1,function(t){et(e,t)&&ne(t,0)}),a.clearOnEnter&&es(a,"beforeCursorEnter",function(){return a.clear()}),a.readOnly&&(Ee(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),a.collapsed&&(a.id=++Rs,a.atomic=!0),d){if(l&&(d.curOp.updateMaxLine=!0),a.collapsed)Tn(d,t.line,n.line+1);else if(a.className||a.startStyle||a.endStyle||a.css||a.attributes||a.title)for(var f=t.line;f<=n.line;f++)En(d,f,"text");a.atomic&&So(d.doc),wt(d,"markerAdded",d,a)}return a}function Xo(e,t,n,r,o){r=c(r),r.shared=!1;var i=[Go(e,t,n,r,o)],a=i[0],s=r.widgetNode;return Qr(e,function(e){s&&(r.widgetNode=s.cloneNode(!0)),i.push(Go(e,pe(e,t),pe(e,n),r,o));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;a=m(i)}),new Ps(i,a)}function Yo(e){return e.findMarks(se(e.first,0),e.clipPos(se(e.lastLine())),function(e){return e.parent})}function Jo(e,t){for(var n=0;n<t.length;n++){var r=t[n],o=r.find(),i=e.clipPos(o.from),a=e.clipPos(o.to);if(le(i,a)){var s=Go(e,i,a,r.primary,r.primary.type);r.markers.push(s),s.parent=r}}}function Qo(e){for(var t=0;t<e.length;t++)!function(t){var n=e[t],r=[n.primary.doc];Qr(n.primary.doc,function(e){return r.push(e)});for(var o=0;o<n.markers.length;o++){var i=n.markers[o];-1==f(r,i.doc)&&(i.parent=null,n.markers.splice(o--,1))}}(t)}function Zo(e){var t=this;if(ni(t),!R(t,e)&&!Lt(t.display,e)){I(e),ya&&(js=+new Date);var n=_n(t,e,!0),r=e.dataTransfer.files;if(n&&!t.isReadOnly())if(r&&r.length&&window.FileReader&&window.File)for(var o=r.length,i=Array(o),a=0,s=0;s<o;++s)!function(e,r){if(!t.options.allowDropFileTypes||-1!=f(t.options.allowDropFileTypes,e.type)){var s=new FileReader;s.onload=br(t,function(){var e=s.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),i[r]=e,++a==o){n=pe(t.doc,n);var l={from:n,to:n,text:t.doc.splitLines(i.join(t.doc.lineSeparator())),origin:"paste"};Mo(t.doc,l),Co(t.doc,zr(n,Wr(l)))}}),s.readAsText(e)}}(r[s],s);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout(function(){return t.display.input.focus()},20);try{var l=e.dataTransfer.getData("Text");if(l){var u;if(t.state.draggingText&&!t.state.draggingText.copy&&(u=t.listSelections()),No(t.doc,zr(n,n)),u)for(var c=0;c<u.length;++c)Fo(t.doc,"",u[c].anchor,u[c].head,"drag");t.replaceSelection(l,"around","paste"),t.display.input.focus()}}catch(e){}}}}function ei(e,t){if(ya&&(!e.state.draggingText||+new Date-js<100))return void F(t);if(!R(e,t)&&!Lt(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!_a)){var n=r("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",Na&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),Na&&n.parentNode.removeChild(n)}}function ti(e,t){var o=_n(e,t);if(o){var i=document.createDocumentFragment();Ln(e,o,i),e.display.dragCursor||(e.display.dragCursor=r("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),n(e.display.dragCursor,i)}}function ni(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function ri(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),n=[],r=0;r<t.length;r++){var o=t[r].CodeMirror;o&&n.push(o)}n.length&&n[0].operation(function(){for(var t=0;t<n.length;t++)e(n[t])})}}function oi(){Bs||(ii(),Bs=!0)}function ii(){var e;es(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,ri(ai)},100))}),es(window,"blur",function(){return ri(zn)})}function ai(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}function si(e){var t=e.split(/-(?!$)/);e=t[t.length-1];for(var n,r,o,i,a=0;a<t.length-1;a++){var s=t[a];if(/^(cmd|meta|m)$/i.test(s))i=!0;else if(/^a(lt)?$/i.test(s))n=!0;else if(/^(c|ctrl|control)$/i.test(s))r=!0;else{if(!/^s(hift)?$/i.test(s))throw new Error("Unrecognized modifier name: "+s);o=!0}}return n&&(e="Alt-"+e),r&&(e="Ctrl-"+e),i&&(e="Cmd-"+e),o&&(e="Shift-"+e),e}function li(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==r){delete e[n];continue}for(var o=g(n.split(" "),si),i=0;i<o.length;i++){var a=void 0,s=void 0;i==o.length-1?(s=o.join(" "),a=r):(s=o.slice(0,i+1).join(" "),a="...");var l=t[s];if(l){if(l!=a)throw new Error("Inconsistent bindings for "+s)}else t[s]=a}delete e[n]}for(var u in t)e[u]=t[u];return e}function ui(e,t,n,r){t=hi(t);var o=t.call?t.call(e,r):t[e];if(!1===o)return"nothing";if("..."===o)return"multi";if(null!=o&&n(o))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return ui(e,t.fallthrough,n,r);for(var i=0;i<t.fallthrough.length;i++){var a=ui(e,t.fallthrough[i],n,r);if(a)return a}}}function ci(e){var t="string"==typeof e?e:Fs[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function di(e,t,n){var r=e;return t.altKey&&"Alt"!=r&&(e="Alt-"+e),(Ia?t.metaKey:t.ctrlKey)&&"Ctrl"!=r&&(e="Ctrl-"+e),(Ia?t.ctrlKey:t.metaKey)&&"Cmd"!=r&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=r&&(e="Shift-"+e),e}function fi(e,t){if(Na&&34==e.keyCode&&e.char)return!1;var n=Fs[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),di(n,e,t))}function hi(e){return"string"==typeof e?Ws[e]:e}function pi(e,t){for(var n=e.doc.sel.ranges,r=[],o=0;o<n.length;o++){for(var i=t(n[o]);r.length&&le(i.from,m(r).to)<=0;){var a=r.pop();if(le(a.from,i.from)<0){i.from=a.from;break}}r.push(i)}vr(e,function(){for(var t=r.length-1;t>=0;t--)Fo(e.doc,"",r[t].from,r[t].to,"+delete");Jn(e)})}function mi(e,t,n){var r=N(e.text,t+n,n);return r<0||r>e.text.length?null:r}function gi(e,t,n){var r=mi(e,t.ch,n);return null==r?null:new se(t.line,r,n<0?"after":"before")}function vi(e,t,n,r,o){if(e){var i=E(n,t.doc.direction);if(i){var a,s=o<0?m(i):i[0],l=o<0==(1==s.level),u=l?"after":"before";if(s.level>0||"rtl"==t.doc.direction){var c=Kt(t,n);a=o<0?n.text.length-1:0;var d=Gt(t,c,a).top;a=_(function(e){return Gt(t,c,e).top==d},o<0==(1==s.level)?s.from:s.to-1,a),"before"==u&&(a=mi(n,a,1))}else a=o<0?s.to:s.from;return new se(r,a,u)}}return new se(r,o<0?n.text.length:0,o<0?"before":"after")}function bi(e,t,n,r){var o=E(t,e.doc.direction);if(!o)return gi(t,n,r);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var i=T(o,n.ch,n.sticky),a=o[i];if("ltr"==e.doc.direction&&a.level%2==0&&(r>0?a.to>n.ch:a.from<n.ch))return gi(t,n,r);var s,l=function(e,n){return mi(t,e instanceof se?e.ch:e,n)},u=function(n){return e.options.lineWrapping?(s=s||Kt(e,t),pn(e,t,s,n)):{begin:0,end:t.text.length}},c=u("before"==n.sticky?l(n,-1):n.ch);if("rtl"==e.doc.direction||1==a.level){var d=1==a.level==r<0,f=l(n,d?1:-1);if(null!=f&&(d?f<=a.to&&f<=c.end:f>=a.from&&f>=c.begin)){var h=d?"before":"after";return new se(n.line,f,h)}}var p=function(e,t,r){for(var i=function(e,t){return t?new se(n.line,l(e,1),"before"):new se(n.line,e,"after")};e>=0&&e<o.length;e+=t){var a=o[e],s=t>0==(1!=a.level),u=s?r.begin:l(r.end,-1);if(a.from<=u&&u<a.to)return i(u,s);if(u=s?a.from:l(a.to,-1),r.begin<=u&&u<r.end)return i(u,s)}},m=p(i+r,r,c);if(m)return m;var g=r>0?c.end:l(c.begin,-1);return null==g||r>0&&g==t.text.length||!(m=p(r>0?0:o.length-1,r,u(g)))?null:m}function yi(e,t){var n=Z(e.doc,t),r=Xe(n);return r!=n&&(t=re(r)),vi(!0,e,r,t,1)}function wi(e,t){var n=Z(e.doc,t),r=Ye(n);return r!=n&&(t=re(r)),vi(!0,e,n,t,-1)}function xi(e,t){var n=yi(e,t.line),r=Z(e.doc,n.line),o=E(r,e.doc.direction);if(!o||0==o[0].level){var i=Math.max(0,r.text.search(/\S/)),a=t.line==n.line&&t.ch<=i&&t.ch;return se(n.line,a?0:i,n.sticky)}return n}function Ci(e,t,n){if("string"==typeof t&&!(t=Vs[t]))return!1;e.display.input.ensurePolled();var r=e.display.shift,o=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),o=t(e)!=Va}finally{e.display.shift=r,e.state.suppressEdits=!1}return o}function ki(e,t,n){for(var r=0;r<e.state.keyMaps.length;r++){var o=ui(t,e.state.keyMaps[r],n,e);if(o)return o}return e.options.extraKeys&&ui(t,e.options.extraKeys,n,e)||ui(t,e.options.keyMap,n,e)}function Ni(e,t,n,r){var o=e.state.keySeq;if(o){if(ci(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:qs.set(50,function(){e.state.keySeq==o&&(e.state.keySeq=null,e.display.input.reset())}),_i(e,o+" "+t,n,r))return!0}return _i(e,t,n,r)}function _i(e,t,n,r){var o=ki(e,t,r);return"multi"==o&&(e.state.keySeq=t),"handled"==o&&wt(e,"keyHandled",e,t,n),"handled"!=o&&"multi"!=o||(I(n),Bn(e)),!!o}function Si(e,t){var n=fi(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?Ni(e,"Shift-"+n,t,function(t){return Ci(e,t,!0)})||Ni(e,n,t,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return Ci(e,t)}):Ni(e,n,t,function(t){return Ci(e,t)}))}function Ti(e,t,n){return Ni(e,"'"+n+"'",t,function(t){return Ci(e,t,!0)})}function Ei(e){var t=this;if(t.curOp.focus=a(),!R(t,e)){ya&&wa<11&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var r=Si(t,e);Na&&($s=r?n:null,!r&&88==n&&!os&&(Da?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=n||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||Oi(t)}}function Oi(e){function t(e){18!=e.keyCode&&e.altKey||(Ba(n,"CodeMirror-crosshair"),A(document,"keyup",t),A(document,"mouseover",t))}var n=e.display.lineDiv;s(n,"CodeMirror-crosshair"),es(document,"keyup",t),es(document,"mouseover",t)}function Ai(e){16==e.keyCode&&(this.doc.sel.shift=!1),R(this,e)}function Di(e){var t=this;if(!(Lt(t.display,e)||R(t,e)||e.ctrlKey&&!e.altKey||Da&&e.metaKey)){var n=e.keyCode,r=e.charCode;if(Na&&n==$s)return $s=null,void I(e);if(!Na||e.which&&!(e.which<10)||!Si(t,e)){var o=String.fromCharCode(null==r?n:r);"\b"!=o&&(Ti(t,e,o)||t.display.input.onKeyPress(e))}}}function Ri(e,t){var n=+new Date;return Xs&&Xs.compare(n,e,t)?(Gs=Xs=null,"triple"):Gs&&Gs.compare(n,e,t)?(Xs=new Ks(n,e,t),Gs=null,"double"):(Gs=new Ks(n,e,t),Xs=null,"single")}function Mi(e){var t=this,n=t.display;if(!(R(t,e)||n.activeTouch&&n.input.supportsTouch())){if(n.input.ensurePolled(),n.shift=e.shiftKey,Lt(n,e))return void(xa||(n.scroller.draggable=!1,setTimeout(function(){return n.scroller.draggable=!0},100)));if(!zi(t,e)){var r=_n(t,e),o=U(e),i=r?Ri(r,o):"single";window.focus(),1==o&&t.state.selectingText&&t.state.selectingText(e),r&&Pi(t,o,r,i,e)||(1==o?r?Ii(t,r,i,e):H(e)==n.scroller&&I(e):2==o?(r&&vo(t.doc,r),setTimeout(function(){return n.input.focus()},20)):3==o&&(ja?t.display.input.onContextMenu(e):Hn(t)))}}}function Pi(e,t,n,r,o){var i="Click";return"double"==r?i="Double"+i:"triple"==r&&(i="Triple"+i),i=(1==t?"Left":2==t?"Middle":"Right")+i,Ni(e,di(i,o),o,function(t){if("string"==typeof t&&(t=Vs[t]),!t)return!1;var r=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),r=t(e,n)!=Va}finally{e.state.suppressEdits=!1}return r})}function Li(e,t,n){var r=e.getOption("configureMouse"),o=r?r(e,t,n):{};if(null==o.unit){var i=Ra?n.shiftKey&&n.metaKey:n.altKey;o.unit=i?"rectangle":"single"==t?"char":"double"==t?"word":"line"}return(null==o.extend||e.doc.extend)&&(o.extend=e.doc.extend||n.shiftKey),null==o.addNew&&(o.addNew=Da?n.metaKey:n.ctrlKey),null==o.moveOnDrag&&(o.moveOnDrag=!(Da?n.altKey:n.ctrlKey)),o}function Ii(e,t,n,r){ya?setTimeout(u(Fn,e),0):e.curOp.focus=a();var o,i=Li(e,n,r),s=e.doc.sel;e.options.dragDrop&&ts&&!e.isReadOnly()&&"single"==n&&(o=s.contains(t))>-1&&(le((o=s.ranges[o]).from(),t)<0||t.xRel>0)&&(le(o.to(),t)>0||t.xRel<0)?ji(e,r,t,i):Fi(e,r,t,i)}function ji(e,t,n,r){var o=e.display,i=!1,a=br(e,function(t){xa&&(o.scroller.draggable=!1),e.state.draggingText=!1,A(o.wrapper.ownerDocument,"mouseup",a),A(o.wrapper.ownerDocument,"mousemove",s),A(o.scroller,"dragstart",l),A(o.scroller,"drop",a),i||(I(t),r.addNew||vo(e.doc,n,null,null,r.extend),xa||ya&&9==wa?setTimeout(function(){o.wrapper.ownerDocument.body.focus(),o.input.focus()},20):o.input.focus())}),s=function(e){i=i||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},l=function(){return i=!0};xa&&(o.scroller.draggable=!0),e.state.draggingText=a,a.copy=!r.moveOnDrag,o.scroller.dragDrop&&o.scroller.dragDrop(),es(o.wrapper.ownerDocument,"mouseup",a),es(o.wrapper.ownerDocument,"mousemove",s),es(o.scroller,"dragstart",l),es(o.scroller,"drop",a),Hn(e),setTimeout(function(){return o.input.focus()},20)}function Bi(e,t,n){if("char"==n)return new As(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new As(se(t.line,0),pe(e.doc,se(t.line+1,0)));var r=n(e,t);return new As(r.from,r.to)}function Fi(e,t,n,r){function o(t){if(0!=le(v,t))if(v=t,"rectangle"==r.unit){for(var o=[],i=e.options.tabSize,a=d(Z(u,n.line).text,n.ch,i),s=d(Z(u,t.line).text,t.ch,i),l=Math.min(a,s),m=Math.max(a,s),g=Math.min(n.line,t.line),b=Math.min(e.lastLine(),Math.max(n.line,t.line));g<=b;g++){var y=Z(u,g).text,w=h(y,l,i);l==m?o.push(new As(se(g,w),se(g,w))):y.length>w&&o.push(new As(se(g,w),se(g,h(y,m,i))))}o.length||o.push(new As(n,n)),ko(u,Ur(e,p.ranges.slice(0,f).concat(o),f),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var x,C=c,k=Bi(e,t,r.unit),N=C.anchor;le(k.anchor,N)>0?(x=k.head,N=fe(C.from(),k.anchor)):(x=k.anchor,N=de(C.to(),k.head));var _=p.ranges.slice(0);_[f]=Hi(e,new As(pe(u,N),x)),ko(u,Ur(e,_,f),$a)}}function i(t){var n=++y,s=_n(e,t,!0,"rectangle"==r.unit);if(s)if(0!=le(s,v)){e.curOp.focus=a(),o(s);var c=qn(l,u);(s.line>=c.to||s.line<c.from)&&setTimeout(br(e,function(){y==n&&i(t)}),150)}else{var d=t.clientY<b.top?-20:t.clientY>b.bottom?20:0;d&&setTimeout(br(e,function(){y==n&&(l.scroller.scrollTop+=d,i(t))}),50)}}function s(t){e.state.selectingText=!1,y=1/0,t&&(I(t),l.input.focus()),A(l.wrapper.ownerDocument,"mousemove",w),A(l.wrapper.ownerDocument,"mouseup",x),u.history.lastSelOrigin=null}var l=e.display,u=e.doc;I(t);var c,f,p=u.sel,m=p.ranges;if(r.addNew&&!r.extend?(f=u.sel.contains(n),c=f>-1?m[f]:new As(n,n)):(c=u.sel.primary(),f=u.sel.primIndex),"rectangle"==r.unit)r.addNew||(c=new As(n,n)),n=_n(e,t,!0,!0),f=-1;else{var g=Bi(e,n,r.unit);c=r.extend?go(c,g.anchor,g.head,r.extend):g}r.addNew?-1==f?(f=m.length,ko(u,Ur(e,m.concat([c]),f),{scroll:!1,origin:"*mouse"})):m.length>1&&m[f].empty()&&"char"==r.unit&&!r.extend?(ko(u,Ur(e,m.slice(0,f).concat(m.slice(f+1)),0),{scroll:!1,origin:"*mouse"}),p=u.sel):yo(u,f,c,$a):(f=0,ko(u,new Os([c],0),$a),p=u.sel);var v=n,b=l.wrapper.getBoundingClientRect(),y=0,w=br(e,function(e){0!==e.buttons&&U(e)?i(e):s(e)}),x=br(e,s);e.state.selectingText=x,es(l.wrapper.ownerDocument,"mousemove",w),es(l.wrapper.ownerDocument,"mouseup",x)}function Hi(e,t){var n=t.anchor,r=t.head,o=Z(e.doc,n.line);if(0==le(n,r)&&n.sticky==r.sticky)return t;var i=E(o);if(!i)return t;var a=T(i,n.ch,n.sticky),s=i[a];if(s.from!=n.ch&&s.to!=n.ch)return t;var l=a+(s.from==n.ch==(1!=s.level)?0:1);if(0==l||l==i.length)return t;var u;if(r.line!=n.line)u=(r.line-n.line)*("ltr"==e.doc.direction?1:-1)>0;else{var c=T(i,r.ch,r.sticky),d=c-a||(r.ch-n.ch)*(1==s.level?-1:1);u=c==l-1||c==l?d<0:d>0}var f=i[l+(u?-1:0)],h=u==(1==f.level),p=h?f.from:f.to,m=h?"after":"before";return n.ch==p&&n.sticky==m?t:new As(new se(n.line,p,m),r)}function Ui(e,t,n,r){var o,i;if(t.touches)o=t.touches[0].clientX,i=t.touches[0].clientY;else try{o=t.clientX,i=t.clientY}catch(t){return!1}if(o>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&I(t);var a=e.display,s=a.lineDiv.getBoundingClientRect();if(i>s.bottom||!P(e,n))return B(t);i-=s.top-a.viewOffset;for(var l=0;l<e.display.gutterSpecs.length;++l){var u=a.gutters.childNodes[l];if(u&&u.getBoundingClientRect().right>=o){return D(e,n,e,oe(e.doc,i),e.display.gutterSpecs[l].className,t),B(t)}}}function zi(e,t){return Ui(e,t,"gutterClick",!0)}function Wi(e,t){Lt(e.display,t)||Vi(e,t)||R(e,t,"contextmenu")||ja||e.display.input.onContextMenu(t)}function Vi(e,t){return!!P(e,"gutterContextMenu")&&Ui(e,t,"gutterContextMenu",!1)}function qi(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),tn(e)}function $i(e,t,n){if(!t!=!(n&&n!=Ys)){var r=e.display.dragFunctions,o=t?es:A;o(e.display.scroller,"dragstart",r.start),o(e.display.scroller,"dragenter",r.enter),o(e.display.scroller,"dragover",r.over),o(e.display.scroller,"dragleave",r.leave),o(e.display.scroller,"drop",r.drop)}}function Ki(e){e.options.lineWrapping?(s(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(Ba(e.display.wrapper,"CodeMirror-wrap"),ot(e)),Nn(e),Tn(e),tn(e),setTimeout(function(){return ar(e)},100)}function Gi(e,t){var n=this;if(!(this instanceof Gi))return new Gi(e,t);this.options=t=t?c(t):{},c(Js,t,!1);var r=t.value;"string"==typeof r?r=new Is(r,t.mode,null,t.lineSeparator,t.direction):t.mode&&(r.modeOption=t.mode),this.doc=r;var o=new Gi.inputStyles[t.inputStyle](this),i=this.display=new jr(e,r,o,t);i.wrapper.CodeMirror=this,qi(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),lr(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Ha,keySeq:null,specialChars:null},t.autofocus&&!Aa&&i.input.focus(),ya&&wa<11&&setTimeout(function(){return n.display.input.reset(!0)},20),Xi(this),oi(),ur(this),this.curOp.forceUpdate=!0,Zr(this,r),t.autofocus&&!Aa||this.hasFocus()?setTimeout(u(Un,this),20):zn(this);for(var a in Qs)Qs.hasOwnProperty(a)&&Qs[a](n,t[a],Ys);Mr(this),t.finishInit&&t.finishInit(this);for(var s=0;s<Zs.length;++s)Zs[s](n);cr(this),xa&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(i.lineDiv).textRendering&&(i.lineDiv.style.textRendering="auto")}function Xi(e){function t(){o.activeTouch&&(i=setTimeout(function(){return o.activeTouch=null},1e3),a=o.activeTouch,a.end=+new Date)}function n(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}function r(e,t){if(null==t.left)return!0;var n=t.left-e.left,r=t.top-e.top;return n*n+r*r>400}var o=e.display;es(o.scroller,"mousedown",br(e,Mi)),ya&&wa<11?es(o.scroller,"dblclick",br(e,function(t){if(!R(e,t)){var n=_n(e,t);if(n&&!zi(e,t)&&!Lt(e.display,t)){I(t);var r=e.findWordAt(n);vo(e.doc,r.anchor,r.head)}}})):es(o.scroller,"dblclick",function(t){return R(e,t)||I(t)}),es(o.scroller,"contextmenu",function(t){return Wi(e,t)});var i,a={end:0};es(o.scroller,"touchstart",function(t){if(!R(e,t)&&!n(t)&&!zi(e,t)){o.input.ensurePolled(),clearTimeout(i);var r=+new Date;o.activeTouch={start:r,moved:!1,prev:r-a.end<=300?a:null},1==t.touches.length&&(o.activeTouch.left=t.touches[0].pageX,o.activeTouch.top=t.touches[0].pageY)}}),es(o.scroller,"touchmove",function(){o.activeTouch&&(o.activeTouch.moved=!0)}),es(o.scroller,"touchend",function(n){var i=o.activeTouch;if(i&&!Lt(o,n)&&null!=i.left&&!i.moved&&new Date-i.start<300){var a,s=e.coordsChar(o.activeTouch,"page");a=!i.prev||r(i,i.prev)?new As(s,s):!i.prev.prev||r(i,i.prev.prev)?e.findWordAt(s):new As(se(s.line,0),pe(e.doc,se(s.line+1,0))),e.setSelection(a.anchor,a.head),e.focus(),I(n)}t()}),es(o.scroller,"touchcancel",t),es(o.scroller,"scroll",function(){o.scroller.clientHeight&&(nr(e,o.scroller.scrollTop),or(e,o.scroller.scrollLeft,!0),D(e,"scroll",e))}),es(o.scroller,"mousewheel",function(t){return Hr(e,t)}),es(o.scroller,"DOMMouseScroll",function(t){return Hr(e,t)}),es(o.wrapper,"scroll",function(){return o.wrapper.scrollTop=o.wrapper.scrollLeft=0}),o.dragFunctions={enter:function(t){R(e,t)||F(t)},over:function(t){R(e,t)||(ti(e,t),F(t))},start:function(t){return ei(e,t)},drop:br(e,Zo),leave:function(t){R(e,t)||ni(e)}};var s=o.input.getField();es(s,"keyup",function(t){return Ai.call(e,t)}),es(s,"keydown",br(e,Ei)),es(s,"keypress",br(e,Di)),es(s,"focus",function(t){return Un(e,t)}),es(s,"blur",function(t){return zn(e,t)})}function Yi(e,t,n,r){var o,i=e.doc;null==n&&(n="add"),"smart"==n&&(i.mode.indent?o=ye(e,t).state:n="prev");var a=e.options.tabSize,s=Z(i,t),l=d(s.text,null,a);s.stateAfter&&(s.stateAfter=null);var u,c=s.text.match(/^\s*/)[0];if(r||/\S/.test(s.text)){if("smart"==n&&((u=i.mode.indent(o,s.text.slice(c.length),s.text))==Va||u>150)){if(!r)return;n="prev"}}else u=0,n="not";"prev"==n?u=t>i.first?d(Z(i,t-1).text,null,a):0:"add"==n?u=l+e.options.indentUnit:"subtract"==n?u=l-e.options.indentUnit:"number"==typeof n&&(u=l+n),u=Math.max(0,u);var f="",h=0;if(e.options.indentWithTabs)for(var m=Math.floor(u/a);m;--m)h+=a,f+="\t";if(h<u&&(f+=p(u-h)),f!=c)return Fo(i,f,se(t,0),se(t,c.length),"+input"),s.stateAfter=null,!0;for(var g=0;g<i.sel.ranges.length;g++){var v=i.sel.ranges[g];if(v.head.line==t&&v.head.ch<c.length){var b=se(t,c.length);yo(i,g,new As(b,b));break}}}function Ji(e){el=e}function Qi(e,t,n,r,o){var i=e.doc;e.display.shift=!1,r||(r=i.sel);var a=+new Date-200,s="paste"==o||e.state.pasteIncoming>a,l=ns(t),u=null;if(s&&r.ranges.length>1)if(el&&el.text.join("\n")==t){if(r.ranges.length%el.text.length==0){u=[];for(var c=0;c<el.text.length;c++)u.push(i.splitLines(el.text[c]))}}else l.length==r.ranges.length&&e.options.pasteLinesPerSelection&&(u=g(l,function(e){return[e]}));for(var d=e.curOp.updateInput,f=r.ranges.length-1;f>=0;f--){var h=r.ranges[f],p=h.from(),v=h.to();h.empty()&&(n&&n>0?p=se(p.line,p.ch-n):e.state.overwrite&&!s?v=se(v.line,Math.min(Z(i,v.line).text.length,v.ch+m(l).length)):s&&el&&el.lineWise&&el.text.join("\n")==t&&(p=v=se(p.line,0)));var b={from:p,to:v,text:u?u[f%u.length]:l,origin:o||(s?"paste":e.state.cutIncoming>a?"cut":"+input")};Mo(e.doc,b),wt(e,"inputRead",e,b)}t&&!s&&ea(e,t),Jn(e),e.curOp.updateInput<2&&(e.curOp.updateInput=d),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function Zi(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||vr(t,function(){return Qi(t,n,0,null,"paste")}),!0}function ea(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,r=n.ranges.length-1;r>=0;r--){var o=n.ranges[r];if(!(o.head.ch>100||r&&n.ranges[r-1].head.line==o.head.line)){var i=e.getModeAt(o.head),a=!1;if(i.electricChars){for(var s=0;s<i.electricChars.length;s++)if(t.indexOf(i.electricChars.charAt(s))>-1){a=Yi(e,o.head.line,"smart");break}}else i.electricInput&&i.electricInput.test(Z(e.doc,o.head.line).text.slice(0,o.head.ch))&&(a=Yi(e,o.head.line,"smart"));a&&wt(e,"electricInput",e,o.head.line)}}}function ta(e){for(var t=[],n=[],r=0;r<e.doc.sel.ranges.length;r++){var o=e.doc.sel.ranges[r].head.line,i={anchor:se(o,0),head:se(o+1,0)};n.push(i),t.push(e.getRange(i.anchor,i.head))}return{text:t,ranges:n}}function na(e,t,n,r){e.setAttribute("autocorrect",n?"":"off"),e.setAttribute("autocapitalize",r?"":"off"),e.setAttribute("spellcheck",!!t)}function ra(){var e=r("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=r("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return xa?e.style.width="1000px":e.setAttribute("wrap","off"),Ea&&(e.style.border="1px solid black"),na(e),t}function oa(e,t,n,r,o){function i(){var r=t.line+n;return!(r<e.first||r>=e.first+e.size)&&(t=new se(r,t.ch,t.sticky),u=Z(e,r))}function a(r){var a;if(null==(a=o?bi(e.cm,u,t,n):gi(u,t,n))){if(r||!i())return!1;t=vi(o,e.cm,u,t.line,n)}else t=a;return!0}var s=t,l=n,u=Z(e,t.line);if("char"==r)a();else if("column"==r)a(!0);else if("word"==r||"group"==r)for(var c=null,d="group"==r,f=e.cm&&e.cm.getHelper(t,"wordChars"),h=!0;!(n<0)||a(!h);h=!1){var p=u.text.charAt(t.ch)||"\n",m=x(p,f)?"w":d&&"\n"==p?"n":!d||/\s/.test(p)?null:"p";if(!d||h||m||(m="s"),c&&c!=m){n<0&&(n=1,a(),t.sticky="after");break}if(m&&(c=m),n>0&&!a(!h))break}var g=Oo(e,t,s,l,!0);return ue(s,g)&&(g.hitSide=!0),g}function ia(e,t,n,r){var o,i=e.doc,a=t.left;if("page"==r){var s=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),l=Math.max(s-.5*yn(e.display),3);o=(n>0?t.bottom:t.top)+n*l}else"line"==r&&(o=n>0?t.bottom+3:t.top-3);for(var u;u=fn(e,a,o),u.outside;){if(n<0?o<=0:o>=i.height){u.hitSide=!0;break}o+=5*n}return u}function aa(e,t){var n=$t(e,t.line);if(!n||n.hidden)return null;var r=Z(e.doc,t.line),o=Wt(n,r,t.line),i=E(r,e.doc.direction),a="left";if(i){a=T(i,t.ch)%2?"right":"left"}var s=Xt(o.map,t.ch,a);return s.offset="right"==s.collapse?s.end:s.start,s}function sa(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}function la(e,t){return t&&(e.bad=!0),e}function ua(e,t,n,r,o){function i(e){return function(t){return t.id==e}}function a(){c&&(u+=d,f&&(u+=d),c=f=!1)}function s(e){e&&(a(),u+=e)}function l(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(n)return void s(n);var u,h=t.getAttribute("cm-marker");if(h){var p=e.findMarks(se(r,0),se(o+1,0),i(+h));return void(p.length&&(u=p[0].find(0))&&s(ee(e.doc,u.from,u.to).join(d)))}if("false"==t.getAttribute("contenteditable"))return;var m=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;m&&a();for(var g=0;g<t.childNodes.length;g++)l(t.childNodes[g]);/^(pre|p)$/i.test(t.nodeName)&&(f=!0),m&&(c=!0)}else 3==t.nodeType&&s(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(var u="",c=!1,d=e.doc.lineSeparator(),f=!1;l(t),t!=n;)t=t.nextSibling,f=!1;return u}function ca(e,t,n){var r;if(t==e.display.lineDiv){if(!(r=e.display.lineDiv.childNodes[n]))return la(e.clipPos(se(e.display.viewTo-1)),!0);t=null,n=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var o=0;o<e.display.view.length;o++){var i=e.display.view[o];if(i.node==r)return da(i,t,n)}}function da(e,t,n){function r(t,n,r){for(var o=-1;o<(d?d.length:0);o++)for(var i=o<0?c.map:d[o],a=0;a<i.length;a+=3){var s=i[a+2];if(s==t||s==n){var l=re(o<0?e.line:e.rest[o]),u=i[a]+r;return(r<0||s!=t)&&(u=i[a+(r?1:0)]),se(l,u)}}}var o=e.text.firstChild,a=!1;if(!t||!i(o,t))return la(se(re(e.line),0),!0);if(t==o&&(a=!0,t=o.childNodes[n],n=0,!t)){var s=e.rest?m(e.rest):e.line;return la(se(re(s),s.text.length),a)}var l=3==t.nodeType?t:null,u=t;for(l||1!=t.childNodes.length||3!=t.firstChild.nodeType||(l=t.firstChild,n&&(n=l.nodeValue.length));u.parentNode!=o;)u=u.parentNode;var c=e.measure,d=c.maps,f=r(l,u,n);if(f)return la(f,a);for(var h=u.nextSibling,p=l?l.nodeValue.length-n:0;h;h=h.nextSibling){if(f=r(h,h.firstChild,0))return la(se(f.line,f.ch-p),a);p+=h.textContent.length}for(var g=u.previousSibling,v=n;g;g=g.previousSibling){if(f=r(g,g.firstChild,-1))return la(se(f.line,f.ch+v),a);v+=g.textContent.length}}function fa(e,t){function n(){e.value=l.getValue()}if(t=t?c(t):{},t.value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var r=a();t.autofocus=r==e||null!=e.getAttribute("autofocus")&&r==document.body}var o;if(e.form&&(es(e.form,"submit",n),!t.leaveSubmitMethodAlone)){var i=e.form;o=i.submit;try{var s=i.submit=function(){n(),i.submit=o,i.submit(),i.submit=s}}catch(e){}}t.finishInit=function(r){r.save=n,r.getTextArea=function(){return e},r.toTextArea=function(){r.toTextArea=isNaN,n(),e.parentNode.removeChild(r.getWrapperElement()),e.style.display="",e.form&&(A(e.form,"submit",n),t.leaveSubmitMethodAlone||"function"!=typeof e.form.submit||(e.form.submit=o))}},e.style.display="none";var l=Gi(function(t){return e.parentNode.insertBefore(t,e.nextSibling)},t);return l}var ha=navigator.userAgent,pa=navigator.platform,ma=/gecko\/\d/i.test(ha),ga=/MSIE \d/.test(ha),va=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ha),ba=/Edge\/(\d+)/.exec(ha),ya=ga||va||ba,wa=ya&&(ga?document.documentMode||6:+(ba||va)[1]),xa=!ba&&/WebKit\//.test(ha),Ca=xa&&/Qt\/\d+\.\d+/.test(ha),ka=!ba&&/Chrome\//.test(ha),Na=/Opera\//.test(ha),_a=/Apple Computer/.test(navigator.vendor),Sa=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(ha),Ta=/PhantomJS/.test(ha),Ea=!ba&&/AppleWebKit/.test(ha)&&/Mobile\/\w+/.test(ha),Oa=/Android/.test(ha),Aa=Ea||Oa||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(ha),Da=Ea||/Mac/.test(pa),Ra=/\bCrOS\b/.test(ha),Ma=/win/i.test(pa),Pa=Na&&ha.match(/Version\/(\d*\.\d*)/);Pa&&(Pa=Number(Pa[1])),Pa&&Pa>=15&&(Na=!1,xa=!0);var La,Ia=Da&&(Ca||Na&&(null==Pa||Pa<12.11)),ja=ma||ya&&wa>=9,Ba=function(t,n){var r=t.className,o=e(n).exec(r);if(o){var i=r.slice(o.index+o[0].length);t.className=r.slice(0,o.index)+(i?o[1]+i:"")}};La=document.createRange?function(e,t,n,r){var o=document.createRange();return o.setEnd(r||e,n),o.setStart(e,t),o}:function(e,t,n){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch(e){return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r};var Fa=function(e){e.select()};Ea?Fa=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:ya&&(Fa=function(e){try{e.select()}catch(e){}});var Ha=function(){this.id=null,this.f=null,this.time=0,this.handler=u(this.onTimeout,this)};Ha.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},Ha.prototype.set=function(e,t){this.f=t;var n=+new Date+e;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=n)};var Ua,za,Wa=30,Va={toString:function(){return"CodeMirror.Pass"}},qa={scroll:!1},$a={origin:"*mouse"},Ka={origin:"+move"},Ga=[""],Xa=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Ya=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,Ja=null,Qa=function(){function e(e){return e<=247?n.charAt(e):1424<=e&&e<=1524?"R":1536<=e&&e<=1785?r.charAt(e-1536):1774<=e&&e<=2220?"r":8192<=e&&e<=8203?"w":8204==e?"b":"L"}function t(e,t,n){this.level=e,this.from=t,this.to=n}var n="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",r="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111",o=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,i=/[stwN]/,a=/[LRr]/,s=/[Lb1n]/,l=/[1n]/;return function(n,r){var u="ltr"==r?"L":"R";if(0==n.length||"ltr"==r&&!o.test(n))return!1;for(var c=n.length,d=[],f=0;f<c;++f)d.push(e(n.charCodeAt(f)));for(var h=0,p=u;h<c;++h){var g=d[h];"m"==g?d[h]=p:p=g}for(var v=0,b=u;v<c;++v){var y=d[v];"1"==y&&"r"==b?d[v]="n":a.test(y)&&(b=y,"r"==y&&(d[v]="R"))}for(var w=1,x=d[0];w<c-1;++w){var C=d[w];"+"==C&&"1"==x&&"1"==d[w+1]?d[w]="1":","!=C||x!=d[w+1]||"1"!=x&&"n"!=x||(d[w]=x),x=C}for(var k=0;k<c;++k){var N=d[k];if(","==N)d[k]="N";else if("%"==N){var _=void 0;for(_=k+1;_<c&&"%"==d[_];++_);for(var S=k&&"!"==d[k-1]||_<c&&"1"==d[_]?"1":"N",T=k;T<_;++T)d[T]=S;k=_-1}}for(var E=0,O=u;E<c;++E){var A=d[E];"L"==O&&"1"==A?d[E]="L":a.test(A)&&(O=A)}for(var D=0;D<c;++D)if(i.test(d[D])){var R=void 0;for(R=D+1;R<c&&i.test(d[R]);++R);for(var M="L"==(D?d[D-1]:u),P="L"==(R<c?d[R]:u),L=M==P?M?"L":"R":u,I=D;I<R;++I)d[I]=L;D=R-1}for(var j,B=[],F=0;F<c;)if(s.test(d[F])){var H=F;for(++F;F<c&&s.test(d[F]);++F);B.push(new t(0,H,F))}else{var U=F,z=B.length;for(++F;F<c&&"L"!=d[F];++F);for(var W=U;W<F;)if(l.test(d[W])){U<W&&B.splice(z,0,new t(1,U,W));var V=W;for(++W;W<F&&l.test(d[W]);++W);B.splice(z,0,new t(2,V,W)),U=W}else++W;U<F&&B.splice(z,0,new t(1,U,F))}return"ltr"==r&&(1==B[0].level&&(j=n.match(/^\s+/))&&(B[0].from=j[0].length,B.unshift(new t(0,0,j[0].length))),1==m(B).level&&(j=n.match(/\s+$/))&&(m(B).to-=j[0].length,B.push(new t(0,c-j[0].length,c)))),"rtl"==r?B.reverse():B}}(),Za=[],es=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||Za).concat(n)}},ts=function(){if(ya&&wa<9)return!1;var e=r("div");return"draggable"in e||"dragDrop"in e}(),ns=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;t<=r;){var o=e.indexOf("\n",t);-1==o&&(o=e.length);var i=e.slice(t,"\r"==e.charAt(o-1)?o-1:o),a=i.indexOf("\r");-1!=a?(n.push(i.slice(0,a)),t+=a+1):(n.push(i),t=o+1)}return n}:function(e){return e.split(/\r\n?|\n/)},rs=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},os=function(){var e=r("div");return"oncopy"in e||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),is=null,as={},ss={},ls={},us=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};us.prototype.eol=function(){return this.pos>=this.string.length},us.prototype.sol=function(){return this.pos==this.lineStart},us.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},us.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},us.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},us.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},us.prototype.eatSpace=function(){for(var e=this,t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++e.pos;return this.pos>t},us.prototype.skipToEnd=function(){this.pos=this.string.length},us.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},us.prototype.backUp=function(e){this.pos-=e},us.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=d(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?d(this.string,this.lineStart,this.tabSize):0)},us.prototype.indentation=function(){return d(this.string,null,this.tabSize)-(this.lineStart?d(this.string,this.lineStart,this.tabSize):0)},us.prototype.match=function(e,t,n){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&!1!==t&&(this.pos+=r[0].length),r)}var o=function(e){return n?e.toLowerCase():e};if(o(this.string.substr(this.pos,e.length))==o(e))return!1!==t&&(this.pos+=e.length),!0},us.prototype.current=function(){return this.string.slice(this.start,this.pos)},us.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},us.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},us.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var cs=function(e,t){this.state=e,this.lookAhead=t},ds=function(e,t,n,r){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};ds.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},ds.prototype.baseToken=function(e){var t=this;if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)t.baseTokenPos+=2;var n=this.baseTokens[this.baseTokenPos+1];return{type:n&&n.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},ds.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},ds.fromSaved=function(e,t,n){return t instanceof cs?new ds(e,Y(e.mode,t.state),n,t.lookAhead):new ds(e,Y(e.mode,t),n)},ds.prototype.save=function(e){var t=!1!==e?Y(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new cs(t,this.maxLookAhead):t};var fs=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n},hs=!1,ps=!1,ms=function(e,t,n){this.text=e,He(this,t),this.height=n?n(this):1};ms.prototype.lineNo=function(){return re(this)},L(ms);var gs,vs={},bs={},ys=null,ws=null,xs={left:0,right:0,top:0,bottom:0},Cs=function(e,t,n){this.cm=n;var o=this.vert=r("div",[r("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=r("div",[r("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");o.tabIndex=i.tabIndex=-1,e(o),e(i),es(o,"scroll",function(){o.clientHeight&&t(o.scrollTop,"vertical")}),es(i,"scroll",function(){i.clientWidth&&t(i.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,ya&&wa<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Cs.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0";var o=e.viewHeight-(t?r:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+o)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=e.barLeft+"px";var i=e.viewWidth-e.barLeft-(n?r:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+i)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:t?r:0}},Cs.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Cs.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Cs.prototype.zeroWidthHack=function(){var e=Da&&!Sa?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Ha,this.disableVert=new Ha},Cs.prototype.enableZeroWidthBar=function(e,t,n){function r(){var o=e.getBoundingClientRect();("vert"==n?document.elementFromPoint(o.right-1,(o.top+o.bottom)/2):document.elementFromPoint((o.right+o.left)/2,o.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,r)}e.style.pointerEvents="auto",t.set(1e3,r)},Cs.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var ks=function(){};ks.prototype.update=function(){return{bottom:0,right:0}},ks.prototype.setScrollLeft=function(){},ks.prototype.setScrollTop=function(){},ks.prototype.clear=function(){};var Ns={native:Cs,null:ks},_s=0,Ss=function(e,t,n){var r=e.display;this.viewport=t,this.visible=qn(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=Ht(e),this.force=n,this.dims=xn(e),this.events=[]};Ss.prototype.signal=function(e,t){P(e,t)&&this.events.push(arguments)},Ss.prototype.finish=function(){for(var e=this,t=0;t<this.events.length;t++)D.apply(null,e.events[t])};var Ts=0,Es=null;ya?Es=-.53:ma?Es=15:ka?Es=-.7:_a&&(Es=-1/3);var Os=function(e,t){this.ranges=e,this.primIndex=t};Os.prototype.primary=function(){return this.ranges[this.primIndex]},Os.prototype.equals=function(e){var t=this;if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var n=0;n<this.ranges.length;n++){var r=t.ranges[n],o=e.ranges[n];if(!ue(r.anchor,o.anchor)||!ue(r.head,o.head))return!1}return!0},Os.prototype.deepCopy=function(){for(var e=this,t=[],n=0;n<this.ranges.length;n++)t[n]=new As(ce(e.ranges[n].anchor),ce(e.ranges[n].head));return new Os(t,this.primIndex)},Os.prototype.somethingSelected=function(){for(var e=this,t=0;t<this.ranges.length;t++)if(!e.ranges[t].empty())return!0;return!1},Os.prototype.contains=function(e,t){var n=this;t||(t=e);for(var r=0;r<this.ranges.length;r++){var o=n.ranges[r];if(le(t,o.from())>=0&&le(e,o.to())<=0)return r}return-1};var As=function(e,t){this.anchor=e,this.head=t};As.prototype.from=function(){return fe(this.anchor,this.head)},As.prototype.to=function(){return de(this.anchor,this.head)},As.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Vo.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=this,r=e,o=e+t;r<o;++r){var i=n.lines[r];n.height-=i.height,at(i),wt(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){var r=this;this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var o=0;o<t.length;++o)t[o].parent=r},iterN:function(e,t,n){for(var r=this,o=e+t;e<o;++e)if(n(r.lines[e]))return!0}},qo.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){var n=this;this.size-=t;for(var r=0;r<this.children.length;++r){var o=n.children[r],i=o.chunkSize();if(e<i){var a=Math.min(t,i-e),s=o.height;if(o.removeInner(e,a),n.height-=s-o.height,i==a&&(n.children.splice(r--,1),o.parent=null),0==(t-=a))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof Vo))){var l=[];this.collapse(l),this.children=[new Vo(l)],this.children[0].parent=this}},collapse:function(e){for(var t=this,n=0;n<this.children.length;++n)t.children[n].collapse(e)},insertInner:function(e,t,n){var r=this;this.size+=t.length,this.height+=n;for(var o=0;o<this.children.length;++o){var i=r.children[o],a=i.chunkSize();if(e<=a){if(i.insertInner(e,t,n),i.lines&&i.lines.length>50){for(var s=i.lines.length%25+25,l=s;l<i.lines.length;){var u=new Vo(i.lines.slice(l,l+=25));i.height-=u.height,r.children.splice(++o,0,u),u.parent=r}i.lines=i.lines.slice(0,s),r.maybeSpill()}break}e-=a}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new qo(t);if(e.parent){e.size-=n.size,e.height-=n.height;var r=f(e.parent.children,e);e.parent.children.splice(r+1,0,n)}else{var o=new qo(e.children);o.parent=e,e.children=[o,n],e=o}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=this,o=0;o<this.children.length;++o){var i=r.children[o],a=i.chunkSize();if(e<a){var s=Math.min(t,a-e);if(i.iterN(e,s,n))return!0;if(0==(t-=s))break;e=0}else e-=a}}};var Ds=function(e,t,n){var r=this;if(n)for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o]);this.doc=e,this.node=t};Ds.prototype.clear=function(){var e=this,t=this.doc.cm,n=this.line.widgets,r=this.line,o=re(r);if(null!=o&&n){for(var i=0;i<n.length;++i)n[i]==e&&n.splice(i--,1);n.length||(r.widgets=null);var a=Pt(this);ne(r,Math.max(0,r.height-a)),t&&(vr(t,function(){$o(t,r,-a),En(t,o,"widget")}),wt(t,"lineWidgetCleared",t,this,o))}},Ds.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,r=this.line;this.height=null;var o=Pt(this)-t;o&&(et(this.doc,r)||ne(r,r.height+o),n&&vr(n,function(){n.curOp.forceUpdate=!0,$o(n,r,o),wt(n,"lineWidgetChanged",n,e,re(r))}))},L(Ds);var Rs=0,Ms=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++Rs};Ms.prototype.clear=function(){var e=this;if(!this.explicitlyCleared){var t=this.doc.cm,n=t&&!t.curOp;if(n&&ur(t),P(this,"clear")){var r=this.find();r&&wt(this,"clear",r.from,r.to)}for(var o=null,i=null,a=0;a<this.lines.length;++a){var s=e.lines[a],l=De(s.markedSpans,e);t&&!e.collapsed?En(t,re(s),"text"):t&&(null!=l.to&&(i=re(s)),null!=l.from&&(o=re(s))),s.markedSpans=Re(s.markedSpans,l),null==l.from&&e.collapsed&&!et(e.doc,s)&&t&&ne(s,yn(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var u=0;u<this.lines.length;++u){var c=Xe(e.lines[u]),d=rt(c);d>t.display.maxLineLength&&(t.display.maxLine=c,t.display.maxLineLength=d,t.display.maxLineChanged=!0)}null!=o&&t&&this.collapsed&&Tn(t,o,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&So(t.doc)),t&&wt(t,"markerCleared",t,this,o,i),n&&cr(t),this.parent&&this.parent.clear()}},Ms.prototype.find=function(e,t){var n=this;null==e&&"bookmark"==this.type&&(e=1);for(var r,o,i=0;i<this.lines.length;++i){var a=n.lines[i],s=De(a.markedSpans,n);if(null!=s.from&&(r=se(t?a:re(a),s.from),-1==e))return r;if(null!=s.to&&(o=se(t?a:re(a),s.to),1==e))return o}return r&&{from:r,to:o}},Ms.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,r=this.doc.cm;t&&r&&vr(r,function(){var o=t.line,i=re(t.line),a=$t(r,i);if(a&&(Zt(a),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!et(n.doc,o)&&null!=n.height){var s=n.height;n.height=null;var l=Pt(n)-s;l&&ne(o,o.height+l)}wt(r,"markerChanged",r,e)})},Ms.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=f(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},Ms.prototype.detachLine=function(e){if(this.lines.splice(f(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},L(Ms);var Ps=function(e,t){var n=this;this.markers=e,this.primary=t;for(var r=0;r<e.length;++r)e[r].parent=n};Ps.prototype.clear=function(){var e=this;if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)e.markers[t].clear();wt(this,"clear")}},Ps.prototype.find=function(e,t){return this.primary.find(e,t)},L(Ps);var Ls=0,Is=function(e,t,n,r,o){if(!(this instanceof Is))return new Is(e,t,n,r,o);null==n&&(n=0),qo.call(this,[new Vo([new ms("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var i=se(n,0);this.sel=zr(i),this.history=new no(null),this.id=++Ls,this.modeOption=t,this.lineSep=r,this.direction="rtl"==o?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Jr(this,{from:i,to:i,text:e}),ko(this,zr(i),qa)};Is.prototype=y(qo.prototype,{constructor:Is,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=te(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:wr(function(e){var t=se(this.first,0),n=this.first+this.size-1;Mo(this,{from:t,to:se(n,Z(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&Qn(this.cm,0,0),ko(this,zr(t),qa)}),replaceRange:function(e,t,n,r){t=pe(this,t),n=n?pe(this,n):t,Fo(this,e,t,n,r)},getRange:function(e,t,n){var r=ee(this,pe(this,e),pe(this,t));return!1===n?r:r.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(ie(this,e))return Z(this,e)},getLineNumber:function(e){return re(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Z(this,e)),Xe(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return pe(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:wr(function(e,t,n){wo(this,pe(this,"number"==typeof e?se(e,t||0):e),null,n)}),setSelection:wr(function(e,t,n){wo(this,pe(this,e),pe(this,t||e),n)}),extendSelection:wr(function(e,t,n){vo(this,pe(this,e),t&&pe(this,t),n)}),extendSelections:wr(function(e,t){bo(this,ge(this,e),t)}),extendSelectionsBy:wr(function(e,t){bo(this,ge(this,g(this.sel.ranges,e)),t)}),setSelections:wr(function(e,t,n){var r=this;if(e.length){for(var o=[],i=0;i<e.length;i++)o[i]=new As(pe(r,e[i].anchor),pe(r,e[i].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),ko(this,Ur(this.cm,o,t),n)}}),addSelection:wr(function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new As(pe(this,e),pe(this,t||e))),ko(this,Ur(this.cm,r,r.length-1),n)}),getSelection:function(e){for(var t,n=this,r=this.sel.ranges,o=0;o<r.length;o++){var i=ee(n,r[o].from(),r[o].to());t=t?t.concat(i):i}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=this,n=[],r=this.sel.ranges,o=0;o<r.length;o++){var i=ee(t,r[o].from(),r[o].to());!1!==e&&(i=i.join(e||t.lineSeparator())),n[o]=i}return n},replaceSelection:function(e,t,n){for(var r=[],o=0;o<this.sel.ranges.length;o++)r[o]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:wr(function(e,t,n){for(var r=this,o=[],i=this.sel,a=0;a<i.ranges.length;a++){var s=i.ranges[a];o[a]={from:s.from(),to:s.to(),text:r.splitLines(e[a]),origin:n}}for(var l=t&&"end"!=t&&Kr(this,o,t),u=o.length-1;u>=0;u--)Mo(r,o[u]);l?Co(this,l):this.cm&&Jn(this.cm)}),undo:wr(function(){Lo(this,"undo")}),redo:wr(function(){Lo(this,"redo")}),undoSelection:wr(function(){Lo(this,"undo",!0)}),redoSelection:wr(function(){Lo(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var o=0;o<e.undone.length;o++)e.undone[o].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){this.history=new no(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:mo(this.history.done),undone:mo(this.history.undone)}},setHistory:function(e){var t=this.history=new no(this.history.maxGeneration);t.done=mo(e.done.slice(0),null,!0),t.undone=mo(e.undone.slice(0),null,!0)},setGutterMarker:wr(function(e,t,n){return Wo(this,e,"gutter",function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&C(r)&&(e.gutterMarkers=null),!0})}),clearGutter:wr(function(e){var t=this;this.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&Wo(t,n,"gutter",function(){return n.gutterMarkers[e]=null,C(n.gutterMarkers)&&(n.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if("number"==typeof e){if(!ie(this,e))return null;if(t=e,!(e=Z(this,e)))return null}else if(null==(t=re(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:wr(function(t,n,r){return Wo(this,t,"gutter"==n?"gutter":"class",function(t){var o="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass";if(t[o]){if(e(r).test(t[o]))return!1;t[o]+=" "+r}else t[o]=r;return!0})}),removeLineClass:wr(function(t,n,r){return Wo(this,t,"gutter"==n?"gutter":"class",function(t){var o="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass",i=t[o];if(!i)return!1;if(null==r)t[o]=null;else{var a=i.match(e(r));if(!a)return!1;var s=a.index+a[0].length;t[o]=i.slice(0,a.index)+(a.index&&s!=i.length?" ":"")+i.slice(s)||null}return!0})}),addLineWidget:wr(function(e,t,n){return Ko(this,e,t,n)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return Go(this,pe(this,e),pe(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return e=pe(this,e),Go(this,e,e,n,"bookmark")},findMarksAt:function(e){e=pe(this,e);var t=[],n=Z(this,e.line).markedSpans;if(n)for(var r=0;r<n.length;++r){var o=n[r];(null==o.from||o.from<=e.ch)&&(null==o.to||o.to>=e.ch)&&t.push(o.marker.parent||o.marker)}return t},findMarks:function(e,t,n){e=pe(this,e),t=pe(this,t);var r=[],o=e.line;return this.iter(e.line,t.line+1,function(i){var a=i.markedSpans;if(a)for(var s=0;s<a.length;s++){var l=a[s];null!=l.to&&o==e.line&&e.ch>=l.to||null==l.from&&o!=e.line||null!=l.from&&o==t.line&&l.from>=t.ch||n&&!n(l.marker)||r.push(l.marker.parent||l.marker)}++o}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&e.push(n[r].marker)}),e},posFromIndex:function(e){var t,n=this.first,r=this.lineSeparator().length;return this.iter(function(o){var i=o.text.length+r;if(i>e)return t=e,!0;e-=i,++n}),pe(this,se(n,t))},indexFromPos:function(e){e=pe(this,e);var t=e.ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,function(e){t+=e.text.length+n}),t},copy:function(e){var t=new Is(te(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var r=new Is(te(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],Jo(r,Yo(this)),r},unlinkDoc:function(e){var t=this;if(e instanceof Gi&&(e=e.doc),this.linked)for(var n=0;n<this.linked.length;++n){var r=t.linked[n];if(r.doc==e){t.linked.splice(n,1),e.unlinkDoc(t),Qo(Yo(t));break}}if(e.history==this.history){var o=[e.id];Qr(e,function(e){return o.push(e.id)},!0),e.history=new no(null),e.history.done=mo(this.history.done,o),e.history.undone=mo(this.history.undone,o)}},iterLinkedDocs:function(e){Qr(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):ns(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:wr(function(e){"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(e){return e.order=null}),this.cm&&to(this.cm))})}),Is.prototype.eachLine=Is.prototype.iter;for(var js=0,Bs=!1,Fs={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Hs=0;Hs<10;Hs++)Fs[Hs+48]=Fs[Hs+96]=String(Hs);for(var Us=65;Us<=90;Us++)Fs[Us]=String.fromCharCode(Us);for(var zs=1;zs<=12;zs++)Fs[zs+111]=Fs[zs+63235]="F"+zs;var Ws={};Ws.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Ws.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Ws.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Ws.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Ws.default=Da?Ws.macDefault:Ws.pcDefault;var Vs={selectAll:Do,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),qa)},killLine:function(e){return pi(e,function(t){if(t.empty()){var n=Z(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:se(t.head.line+1,0)}:{from:t.head,to:se(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){return pi(e,function(t){return{from:se(t.from().line,0),to:pe(e.doc,se(t.to().line+1,0))}})},delLineLeft:function(e){return pi(e,function(e){return{from:se(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){return pi(e,function(t){var n=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:n},"div"),to:t.from()}})},delWrappedLineRight:function(e){return pi(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:r}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(se(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(se(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return yi(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return xi(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return wi(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},Ka)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},Ka)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return r.ch<e.getLine(r.line).search(/\S/)?xi(e,t.head):r},Ka)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,o=0;o<n.length;o++){var i=n[o].from(),a=d(e.getLine(i.line),i.ch,r);t.push(p(r-a%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return vr(e,function(){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++)if(t[r].empty()){var o=t[r].head,i=Z(e.doc,o.line).text;if(i)if(o.ch==i.length&&(o=new se(o.line,o.ch-1)),o.ch>0)o=new se(o.line,o.ch+1),e.replaceRange(i.charAt(o.ch-1)+i.charAt(o.ch-2),se(o.line,o.ch-2),o,"+transpose");else if(o.line>e.doc.first){var a=Z(e.doc,o.line-1).text;a&&(o=new se(o.line,1),e.replaceRange(i.charAt(0)+e.doc.lineSeparator()+a.charAt(a.length-1),se(o.line-1,a.length-1),o,"+transpose"))}n.push(new As(o,o))}e.setSelections(n)})},newlineAndIndent:function(e){return vr(e,function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var r=0;r<t.length;r++)e.indentLine(t[r].from().line,null,!0);Jn(e)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}},qs=new Ha,$s=null,Ks=function(e,t,n){this.time=e,this.pos=t,this.button=n};Ks.prototype.compare=function(e,t,n){return this.time+400>e&&0==le(t,this.pos)&&n==this.button};var Gs,Xs,Ys={toString:function(){return"CodeMirror.Init"}},Js={},Qs={};Gi.defaults=Js,Gi.optionHandlers=Qs;var Zs=[];Gi.defineInitHook=function(e){return Zs.push(e)};var el=null,tl=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Ha,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};tl.prototype.init=function(e){function t(e){if(!R(o,e)){if(o.somethingSelected())Ji({lineWise:!1,text:o.getSelections()}),"cut"==e.type&&o.replaceSelection("",null,"cut");else{if(!o.options.lineWiseCopyCut)return;var t=ta(o);Ji({lineWise:!0,text:t.text}),"cut"==e.type&&o.operation(function(){o.setSelections(t.ranges,0,qa),o.replaceSelection("",null,"cut")})}if(e.clipboardData){e.clipboardData.clearData();var n=el.text.join("\n");if(e.clipboardData.setData("Text",n),e.clipboardData.getData("Text")==n)return void e.preventDefault()}var a=ra(),s=a.firstChild;o.display.lineSpace.insertBefore(a,o.display.lineSpace.firstChild),s.value=el.text.join("\n");var l=document.activeElement;Fa(s),setTimeout(function(){o.display.lineSpace.removeChild(a),l.focus(),l==i&&r.showPrimarySelection()},50)}}var n=this,r=this,o=r.cm,i=r.div=e.lineDiv;na(i,o.options.spellcheck,o.options.autocorrect,o.options.autocapitalize),es(i,"paste",function(e){R(o,e)||Zi(e,o)||wa<=11&&setTimeout(br(o,function(){return n.updateFromDOM()}),20)}),es(i,"compositionstart",function(e){n.composing={data:e.data,done:!1}}),es(i,"compositionupdate",function(e){n.composing||(n.composing={data:e.data,done:!1})}),es(i,"compositionend",function(e){n.composing&&(e.data!=n.composing.data&&n.readFromDOMSoon(),n.composing.done=!0)}),es(i,"touchstart",function(){return r.forceCompositionEnd()}),es(i,"input",function(){n.composing||n.readFromDOMSoon()}),es(i,"copy",t),es(i,"cut",t)},tl.prototype.prepareSelection=function(){var e=Pn(this.cm,!1);return e.focus=this.cm.state.focused,e},tl.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},tl.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},tl.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,n=t.doc.sel.primary(),r=n.from(),o=n.to();if(t.display.viewTo==t.display.viewFrom||r.line>=t.display.viewTo||o.line<t.display.viewFrom)return void e.removeAllRanges();var i=ca(t,e.anchorNode,e.anchorOffset),a=ca(t,e.focusNode,e.focusOffset);if(!i||i.bad||!a||a.bad||0!=le(fe(i,a),r)||0!=le(de(i,a),o)){var s=t.display.view,l=r.line>=t.display.viewFrom&&aa(t,r)||{node:s[0].measure.map[2],offset:0},u=o.line<t.display.viewTo&&aa(t,o);if(!u){var c=s[s.length-1].measure,d=c.maps?c.maps[c.maps.length-1]:c.map;u={node:d[d.length-1],offset:d[d.length-2]-d[d.length-3]}}if(!l||!u)return void e.removeAllRanges();var f,h=e.rangeCount&&e.getRangeAt(0);try{f=La(l.node,l.offset,u.offset,u.node)}catch(e){}f&&(!ma&&t.state.focused?(e.collapse(l.node,l.offset),f.collapsed||(e.removeAllRanges(),e.addRange(f))):(e.removeAllRanges(),e.addRange(f)),h&&null==e.anchorNode?e.addRange(h):ma&&this.startGracePeriod()),this.rememberSelection()}},tl.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},tl.prototype.showMultipleSelections=function(e){n(this.cm.display.cursorDiv,e.cursors),n(this.cm.display.selectionDiv,e.selection)},tl.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},tl.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return i(this.div,t)},tl.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},tl.prototype.blur=function(){this.div.blur()},tl.prototype.getField=function(){return this.div},tl.prototype.supportsTouch=function(){return!0},tl.prototype.receivedFocus=function(){function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))}var t=this;this.selectionInEditor()?this.pollSelection():vr(this.cm,function(){return t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,e)},tl.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},tl.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(Oa&&ka&&this.cm.display.gutterSpecs.length&&sa(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=ca(t,e.anchorNode,e.anchorOffset),r=ca(t,e.focusNode,e.focusOffset);n&&r&&vr(t,function(){ko(t.doc,zr(n,r),qa),(n.bad||r.bad)&&(t.curOp.selectionChanged=!0)})}}},tl.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e=this.cm,t=e.display,n=e.doc.sel.primary(),r=n.from(),o=n.to();if(0==r.ch&&r.line>e.firstLine()&&(r=se(r.line-1,Z(e.doc,r.line-1).length)),o.ch==Z(e.doc,o.line).text.length&&o.line<e.lastLine()&&(o=se(o.line+1,0)),r.line<t.viewFrom||o.line>t.viewTo-1)return!1;var i,a,s;r.line==t.viewFrom||0==(i=Sn(e,r.line))?(a=re(t.view[0].line),s=t.view[0].node):(a=re(t.view[i].line),s=t.view[i-1].node.nextSibling);var l,u,c=Sn(e,o.line);if(c==t.view.length-1?(l=t.viewTo-1,u=t.lineDiv.lastChild):(l=re(t.view[c+1].line)-1,u=t.view[c+1].node.previousSibling),!s)return!1;for(var d=e.doc.splitLines(ua(e,s,u,a,l)),f=ee(e.doc,se(a,0),se(l,Z(e.doc,l).text.length));d.length>1&&f.length>1;)if(m(d)==m(f))d.pop(),f.pop(),l--;else{if(d[0]!=f[0])break;d.shift(),f.shift(),a++}for(var h=0,p=0,g=d[0],v=f[0],b=Math.min(g.length,v.length);h<b&&g.charCodeAt(h)==v.charCodeAt(h);)++h;for(var y=m(d),w=m(f),x=Math.min(y.length-(1==d.length?h:0),w.length-(1==f.length?h:0));p<x&&y.charCodeAt(y.length-p-1)==w.charCodeAt(w.length-p-1);)++p;if(1==d.length&&1==f.length&&a==r.line)for(;h&&h>r.ch&&y.charCodeAt(y.length-p-1)==w.charCodeAt(w.length-p-1);)h--,p++;d[d.length-1]=y.slice(0,y.length-p).replace(/^\u200b+/,""),d[0]=d[0].slice(h).replace(/\u200b+$/,"");var C=se(a,h),k=se(l,f.length?m(f).length-p:0);return d.length>1||d[0]||le(C,k)?(Fo(e.doc,d,C,k,"+input"),!0):void 0},tl.prototype.ensurePolled=function(){this.forceCompositionEnd()},tl.prototype.reset=function(){this.forceCompositionEnd()},tl.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},tl.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80))},tl.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||vr(this.cm,function(){return Tn(e.cm)})},tl.prototype.setUneditable=function(e){e.contentEditable="false"},tl.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||br(this.cm,Qi)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},tl.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},tl.prototype.onContextMenu=function(){},tl.prototype.resetPosition=function(){},tl.prototype.needsContentAttribute=!0;var nl=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new Ha,this.hasSelection=!1,this.composing=null};nl.prototype.init=function(e){function t(e){if(!R(o,e)){if(o.somethingSelected())Ji({lineWise:!1,text:o.getSelections()});else{if(!o.options.lineWiseCopyCut)return;var t=ta(o);Ji({lineWise:!0,text:t.text}),"cut"==e.type?o.setSelections(t.ranges,null,qa):(r.prevInput="",i.value=t.text.join("\n"),Fa(i))}"cut"==e.type&&(o.state.cutIncoming=+new Date)}}var n=this,r=this,o=this.cm;this.createField(e);var i=this.textarea;e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),Ea&&(i.style.width="0px"),es(i,"input",function(){ya&&wa>=9&&n.hasSelection&&(n.hasSelection=null),r.poll()}),es(i,"paste",function(e){R(o,e)||Zi(e,o)||(o.state.pasteIncoming=+new Date,r.fastPoll())}),es(i,"cut",t),es(i,"copy",t),es(e.scroller,"paste",function(t){if(!Lt(e,t)&&!R(o,t)){if(!i.dispatchEvent)return o.state.pasteIncoming=+new Date,void r.focus();var n=new Event("paste");n.clipboardData=t.clipboardData,i.dispatchEvent(n)}}),es(e.lineSpace,"selectstart",function(t){Lt(e,t)||I(t)}),es(i,"compositionstart",function(){var e=o.getCursor("from");r.composing&&r.composing.range.clear(),r.composing={start:e,range:o.markText(e,o.getCursor("to"),{className:"CodeMirror-composing"})}}),es(i,"compositionend",function(){r.composing&&(r.poll(),r.composing.range.clear(),r.composing=null)})},nl.prototype.createField=function(e){this.wrapper=ra(),this.textarea=this.wrapper.firstChild},nl.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,r=Pn(e);if(e.options.moveInputWithCursor){var o=un(e,n.sel.primary().head,"div"),i=t.wrapper.getBoundingClientRect(),a=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,o.top+a.top-i.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,o.left+a.left-i.left))}return r},nl.prototype.showSelection=function(e){var t=this.cm,r=t.display;n(r.cursorDiv,e.cursors),n(r.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},nl.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&Fa(this.textarea),ya&&wa>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",ya&&wa>=9&&(this.hasSelection=null))}},nl.prototype.getField=function(){return this.textarea},nl.prototype.supportsTouch=function(){return!1},nl.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!Aa||a()!=this.textarea))try{this.textarea.focus()}catch(e){}},nl.prototype.blur=function(){this.textarea.blur()},nl.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},nl.prototype.receivedFocus=function(){this.slowPoll()},nl.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},nl.prototype.fastPoll=function(){function e(){n.poll()||t?(n.pollingFast=!1,n.slowPoll()):(t=!0,n.polling.set(60,e))}var t=!1,n=this;n.pollingFast=!0,n.polling.set(20,e)},nl.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,r=this.prevInput;if(this.contextMenuPending||!t.state.focused||rs(n)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var o=n.value;if(o==r&&!t.somethingSelected())return!1;if(ya&&wa>=9&&this.hasSelection===o||Da&&/[\uf700-\uf7ff]/.test(o))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var i=o.charCodeAt(0);if(8203!=i||r||(r="\u200b"),8666==i)return this.reset(),this.cm.execCommand("undo")}for(var a=0,s=Math.min(r.length,o.length);a<s&&r.charCodeAt(a)==o.charCodeAt(a);)++a;return vr(t,function(){Qi(t,o.slice(a),r.length-a,null,e.composing?"*compose":null),o.length>1e3||o.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=o,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},nl.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},nl.prototype.onKeyPress=function(){ya&&wa>=9&&(this.hasSelection=null),this.fastPoll()},nl.prototype.onContextMenu=function(e){function t(){if(null!=a.selectionStart){var e=o.somethingSelected(),t="\u200b"+(e?a.value:"");a.value="\u21da",a.value=t,r.prevInput=e?"":"\u200b",a.selectionStart=1,a.selectionEnd=t.length,i.selForContextMenu=o.doc.sel}}function n(){if(r.contextMenuPending==n&&(r.contextMenuPending=!1,r.wrapper.style.cssText=c,a.style.cssText=u,ya&&wa<9&&i.scrollbars.setScrollTop(i.scroller.scrollTop=l),null!=a.selectionStart)){(!ya||ya&&wa<9)&&t();var e=0,s=function(){i.selForContextMenu==o.doc.sel&&0==a.selectionStart&&a.selectionEnd>0&&"\u200b"==r.prevInput?br(o,Do)(o):e++<10?i.detectingSelectAll=setTimeout(s,500):(i.selForContextMenu=null,i.input.reset())};i.detectingSelectAll=setTimeout(s,200)}}var r=this,o=r.cm,i=o.display,a=r.textarea;r.contextMenuPending&&r.contextMenuPending();var s=_n(o,e),l=i.scroller.scrollTop;if(s&&!Na){o.options.resetSelectionOnContextMenu&&-1==o.doc.sel.contains(s)&&br(o,ko)(o.doc,zr(s),qa);var u=a.style.cssText,c=r.wrapper.style.cssText,d=r.wrapper.offsetParent.getBoundingClientRect();r.wrapper.style.cssText="position: static",a.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-d.top-5)+"px; left: "+(e.clientX-d.left-5)+"px;\n      z-index: 1000; background: "+(ya?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var f;if(xa&&(f=window.scrollY),i.input.focus(),xa&&window.scrollTo(null,f),i.input.reset(),o.somethingSelected()||(a.value=r.prevInput=" "),r.contextMenuPending=n,i.selForContextMenu=o.doc.sel,clearTimeout(i.detectingSelectAll),ya&&wa>=9&&t(),ja){F(e);var h=function(){A(window,"mouseup",h),setTimeout(n,20)};es(window,"mouseup",h)}else setTimeout(n,50)}},nl.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e},nl.prototype.setUneditable=function(){},nl.prototype.needsContentAttribute=!1,function(e){function t(t,r,o,i){e.defaults[t]=r,o&&(n[t]=i?function(e,t,n){n!=Ys&&o(e,t,n)}:o)}var n=e.optionHandlers;e.defineOption=t,e.Init=Ys,t("value","",function(e,t){return e.setValue(t)},!0),t("mode",null,function(e,t){e.doc.modeOption=t,Gr(e)},!0),t("indentUnit",2,Gr,!0),t("indentWithTabs",!1),t("smartIndent",!0),t("tabSize",4,function(e){Xr(e),tn(e),Tn(e)},!0),t("lineSeparator",null,function(e,t){if(e.doc.lineSep=t,t){var n=[],r=e.doc.first;e.doc.iter(function(e){for(var o=0;;){var i=e.text.indexOf(t,o);if(-1==i)break;o=i+t.length,n.push(se(r,i))}r++});for(var o=n.length-1;o>=0;o--)Fo(e.doc,t,n[o],se(n[o].line,n[o].ch+t.length))}}),t("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(e,t,n){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),n!=Ys&&e.refresh()}),t("specialCharPlaceholder",ut,function(e){return e.refresh()},!0),t("electricChars",!0),t("inputStyle",Aa?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),t("spellcheck",!1,function(e,t){return e.getInputField().spellcheck=t},!0),t("autocorrect",!1,function(e,t){return e.getInputField().autocorrect=t},!0),t("autocapitalize",!1,function(e,t){return e.getInputField().autocapitalize=t},!0),t("rtlMoveVisually",!Ma),t("wholeLineUpdateBefore",!0),t("theme","default",function(e){qi(e),Ir(e)},!0),t("keyMap","default",function(e,t,n){var r=hi(t),o=n!=Ys&&hi(n);o&&o.detach&&o.detach(e,r),r.attach&&r.attach(e,o||null)}),t("extraKeys",null),t("configureMouse",null),t("lineWrapping",!1,Ki,!0),t("gutters",[],function(e,t){e.display.gutterSpecs=Pr(t,e.options.lineNumbers),Ir(e)},!0),t("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?Cn(e.display)+"px":"0",e.refresh()},!0),t("coverGutterNextToScrollbar",!1,function(e){return ar(e)},!0),t("scrollbarStyle","native",function(e){lr(e),ar(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),t("lineNumbers",!1,function(e,t){e.display.gutterSpecs=Pr(e.options.gutters,t),Ir(e)},!0),t("firstLineNumber",1,Ir,!0),t("lineNumberFormatter",function(e){return e},Ir,!0),t("showCursorWhenSelecting",!1,Mn,!0),t("resetSelectionOnContextMenu",!0),t("lineWiseCopyCut",!0),t("pasteLinesPerSelection",!0),t("selectionsMayTouch",!1),t("readOnly",!1,function(e,t){"nocursor"==t&&(zn(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)}),t("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),t("dragDrop",!0,$i),t("allowDropFileTypes",null),t("cursorBlinkRate",530),t("cursorScrollMargin",0),t("cursorHeight",1,Mn,!0),t("singleCursorHeightPerLine",!0,Mn,!0),t("workTime",100),t("workDelay",100),t("flattenSpans",!0,Xr,!0),t("addModeClass",!1,Xr,!0),t("pollInterval",100),t("undoDepth",200,function(e,t){return e.doc.history.undoDepth=t}),t("historyEventDelay",1250),t("viewportMargin",10,function(e){return e.refresh()},!0),t("maxHighlightLength",1e4,Xr,!0),t("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),t("tabindex",null,function(e,t){return e.display.input.getField().tabIndex=t||""}),t("autofocus",null),t("direction","ltr",function(e,t){return e.doc.setDirection(t)},!0),t("phrases",null)}(Gi),function(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,n){var r=this.options,o=r[e];r[e]==n&&"mode"!=e||(r[e]=n,t.hasOwnProperty(e)&&br(this,t[e])(this,n,o),D(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](hi(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:yr(function(t,n){var r=t.token?t:e.getMode(this.options,t);if(r.startState)throw new Error("Overlays may not be stateful.");v(this.state.overlays,{mode:r,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},function(e){return e.priority}),this.state.modeGen++,Tn(this)}),removeOverlay:yr(function(e){for(var t=this,n=this.state.overlays,r=0;r<n.length;++r){var o=n[r].modeSpec;if(o==e||"string"==typeof e&&o.name==e)return n.splice(r,1),t.state.modeGen++,void Tn(t)}}),indentLine:yr(function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),ie(this.doc,e)&&Yi(this,e,t,n)}),indentSelection:yr(function(e){for(var t=this,n=this.doc.sel.ranges,r=-1,o=0;o<n.length;o++){var i=n[o];if(i.empty())i.head.line>r&&(Yi(t,i.head.line,e,!0),r=i.head.line,o==t.doc.sel.primIndex&&Jn(t));else{var a=i.from(),s=i.to(),l=Math.max(r,a.line);r=Math.min(t.lastLine(),s.line-(s.ch?0:1))+1;for(var u=l;u<r;++u)Yi(t,u,e);var c=t.doc.sel.ranges;0==a.ch&&n.length==c.length&&c[o].from().ch>0&&yo(t.doc,o,new As(a,c[o].to()),qa)}}}),getTokenAt:function(e,t){return ke(this,e,t)},getLineTokens:function(e,t){return ke(this,se(e),t,!0)},getTokenTypeAt:function(e){e=pe(this.doc,e);var t,n=be(this,Z(this.doc,e.line)),r=0,o=(n.length-1)/2,i=e.ch;if(0==i)t=n[2];else for(;;){var a=r+o>>1;if((a?n[2*a-1]:0)>=i)o=a;else{if(!(n[2*a+1]<i)){t=n[2*a+2];break}r=a+1}}var s=t?t.indexOf("overlay "):-1;return s<0?t:0==s?null:t.slice(0,s-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var r=this,o=[];if(!n.hasOwnProperty(t))return o;var i=n[t],a=this.getModeAt(e);if("string"==typeof a[t])i[a[t]]&&o.push(i[a[t]]);else if(a[t])for(var s=0;s<a[t].length;s++){var l=i[a[t][s]];l&&o.push(l)}else a.helperType&&i[a.helperType]?o.push(i[a.helperType]):i[a.name]&&o.push(i[a.name]);for(var u=0;u<i._global.length;u++){var c=i._global[u];c.pred(a,r)&&-1==f(o,c.val)&&o.push(c.val)}return o},getStateAfter:function(e,t){var n=this.doc;return e=he(n,null==e?n.first+n.size-1:e),ye(this,e+1,t).state},cursorCoords:function(e,t){var n,r=this.doc.sel.primary();return n=null==e?r.head:"object"==typeof e?pe(this.doc,e):e?r.from():r.to(),un(this,n,t||"page")},charCoords:function(e,t){return ln(this,pe(this.doc,e),t||"page")},coordsChar:function(e,t){return e=sn(this,e,t||"page"),fn(this,e.left,e.top)},lineAtHeight:function(e,t){return e=sn(this,{top:e,left:0},t||"page").top,oe(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var r,o=!1;if("number"==typeof e){var i=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>i&&(e=i,o=!0),r=Z(this.doc,e)}else r=e;return an(this,r,{top:0,left:0},t||"page",n||o).top+(o?this.doc.height-nt(r):0)},defaultTextHeight:function(){return yn(this.display)},defaultCharWidth:function(){return wn(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,r,o){var i=this.display;e=un(this,pe(this.doc,e));var a=e.bottom,s=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),i.sizer.appendChild(t),"over"==r)a=e.top;else if("above"==r||"near"==r){var l=Math.max(i.wrapper.clientHeight,this.doc.height),u=Math.max(i.sizer.clientWidth,i.lineSpace.clientWidth);("above"==r||e.bottom+t.offsetHeight>l)&&e.top>t.offsetHeight?a=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=l&&(a=e.bottom),s+t.offsetWidth>u&&(s=u-t.offsetWidth)}t.style.top=a+"px",t.style.left=t.style.right="","right"==o?(s=i.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==o?s=0:"middle"==o&&(s=(i.sizer.clientWidth-t.offsetWidth)/2),t.style.left=s+"px"),n&&Gn(this,{left:s,top:a,right:s+t.offsetWidth,bottom:a+t.offsetHeight})},triggerOnKeyDown:yr(Ei),triggerOnKeyPress:yr(Di),triggerOnKeyUp:Ai,triggerOnMouseDown:yr(Mi),execCommand:function(e){if(Vs.hasOwnProperty(e))return Vs[e].call(null,this)},triggerElectric:yr(function(e){ea(this,e)}),findPosH:function(e,t,n,r){var o=this,i=1;t<0&&(i=-1,t=-t);for(var a=pe(this.doc,e),s=0;s<t&&(a=oa(o.doc,a,i,n,r),!a.hitSide);++s);return a},moveH:yr(function(e,t){var n=this;this.extendSelectionsBy(function(r){return n.display.shift||n.doc.extend||r.empty()?oa(n.doc,r.head,e,t,n.options.rtlMoveVisually):e<0?r.from():r.to()},Ka)}),deleteH:yr(function(e,t){var n=this.doc.sel,r=this.doc;n.somethingSelected()?r.replaceSelection("",null,"+delete"):pi(this,function(n){var o=oa(r,n.head,e,t,!1);return e<0?{from:o,to:n.head}:{from:n.head,to:o}})}),findPosV:function(e,t,n,r){var o=this,i=1,a=r;t<0&&(i=-1,t=-t);for(var s=pe(this.doc,e),l=0;l<t;++l){var u=un(o,s,"div");if(null==a?a=u.left:u.left=a,s=ia(o,u,i,n),s.hitSide)break}return s},moveV:yr(function(e,t){var n=this,r=this.doc,o=[],i=!this.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy(function(a){if(i)return e<0?a.from():a.to();var s=un(n,a.head,"div");null!=a.goalColumn&&(s.left=a.goalColumn),o.push(s.left);var l=ia(n,s,e,t);return"page"==t&&a==r.sel.primary()&&Yn(n,ln(n,l,"div").top-s.top),l},Ka),o.length)for(var a=0;a<r.sel.ranges.length;a++)r.sel.ranges[a].goalColumn=o[a]}),findWordAt:function(e){var t=this.doc,n=Z(t,e.line).text,r=e.ch,o=e.ch;if(n){var i=this.getHelper(e,"wordChars");"before"!=e.sticky&&o!=n.length||!r?++o:--r;for(var a=n.charAt(r),s=x(a,i)?function(e){return x(e,i)}:/\s/.test(a)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!x(e)};r>0&&s(n.charAt(r-1));)--r;for(;o<n.length&&s(n.charAt(o));)++o}return new As(se(e.line,r),se(e.line,o))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?s(this.display.cursorDiv,"CodeMirror-overwrite"):Ba(this.display.cursorDiv,"CodeMirror-overwrite"),D(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==a()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:yr(function(e,t){Qn(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Ft(this)-this.display.barHeight,width:e.scrollWidth-Ft(this)-this.display.barWidth,clientHeight:Ut(this),clientWidth:Ht(this)}},scrollIntoView:yr(function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:se(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?Zn(this,e):tr(this,e.from,e.to,e.margin)}),setSize:yr(function(e,t){var n=this,r=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=r(e)),null!=t&&(this.display.wrapper.style.height=r(t)),this.options.lineWrapping&&en(this);var o=this.display.viewFrom;this.doc.iter(o,this.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){En(n,o,"widget");break}++o}),this.curOp.forceUpdate=!0,D(this,"refresh",this)}),operation:function(e){return vr(this,e)},startOperation:function(){return ur(this)},endOperation:function(){return cr(this)},refresh:yr(function(){var e=this.display.cachedTextHeight;Tn(this),this.curOp.forceUpdate=!0,tn(this),Qn(this,this.doc.scrollLeft,this.doc.scrollTop),Ar(this.display),(null==e||Math.abs(e-yn(this.display))>.5)&&Nn(this),D(this,"refresh",this)}),swapDoc:yr(function(e){var t=this.doc;return t.cm=null,this.state.selectingText&&this.state.selectingText(),Zr(this,e),tn(this),this.display.input.reset(),Qn(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,wt(this,"swapDoc",this,t),t}),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},L(e),e.registerHelper=function(t,r,o){n.hasOwnProperty(t)||(n[t]=e[t]={_global:[]}),n[t][r]=o},e.registerGlobalHelper=function(t,r,o,i){e.registerHelper(t,r,i),n[t]._global.push({pred:o,val:i})}}(Gi);var rl="iter insert remove copy getEditor constructor".split(" ");for(var ol in Is.prototype)Is.prototype.hasOwnProperty(ol)&&f(rl,ol)<0&&(Gi.prototype[ol]=function(e){return function(){return e.apply(this.doc,arguments)}}(Is.prototype[ol]));return L(Is),Gi.inputStyles={textarea:nl,contenteditable:tl},Gi.defineMode=function(e){Gi.defaults.mode||"null"==e||(Gi.defaults.mode=e),q.apply(this,arguments)},Gi.defineMIME=$,Gi.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),Gi.defineMIME("text/plain","null"),Gi.defineExtension=function(e,t){Gi.prototype[e]=t},Gi.defineDocExtension=function(e,t){Is.prototype[e]=t},Gi.fromTextArea=fa,function(e){e.off=A,e.on=es,e.wheelEventPixels=Fr,e.Doc=Is,e.splitLines=ns,e.countColumn=d,e.findColumn=h,e.isWordChar=w,e.Pass=Va,e.signal=D,e.Line=ms,e.changeEnd=Wr,e.scrollbarModel=Ns,e.Pos=se,e.cmpPos=le,e.modes=as,e.mimeModes=ss,e.resolveMode=K,e.getMode=G,e.modeExtensions=ls,e.extendMode=X,e.copyState=Y,e.startState=Q,e.innerMode=J,e.commands=Vs,e.keyMap=Ws,e.keyName=fi,e.isModifierKey=ci,e.lookupKey=ui,e.normalizeKeyMap=li,e.StringStream=us,e.SharedTextMarker=Ps,e.TextMarker=Ms,e.LineWidget=Ds,e.e_preventDefault=I,e.e_stopPropagation=j,e.e_stop=F,e.addClass=s,e.contains=i,e.rmClass=Ba,e.keyNames=Fs}(Gi),Gi.version="5.49.2",Gi})},1208:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},1209:function(e,t,n){"use strict";t.__esModule=!0;var r=n(249),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},1245:function(e,t,n){var r,o,i=[].slice;r=[n(164)],void 0!==(o=function(e){return{defineBinding:function(t,n){e.bindingHandlers[t]={init:function(t){var r,o,a,s;return r=new n,null!=r.dispose&&e.utils.domNodeDisposal.addDisposeCallback(t,(o=r.dispose).bind.apply(o,[r].concat(i.call(arguments)))),s=r.init.apply(r,arguments),r.update&&e.computed({read:(a=r.update).bind.apply(a,[r].concat(i.call(arguments))),disposeWhenNodeIsRemoved:t}),s}}}}}.apply(t,r))&&(e.exports=o)},1291:function(e,t,n){e.exports={default:n(1991),__esModule:!0}},1377:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(408),i=r(o),a=n(1975),s=r(a),l=n(125),u=r(l);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,u.default)(t)));e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i.default?(0,i.default)(e,t):e.__proto__=t)}},1378:function(e,t,n){"use strict";t.__esModule=!0;var r=n(125),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,o.default)(t))&&"function"!=typeof t?e:t}},1713:function(e,t,n){(function(r,o){var i,a,s=function(e,t){return function(){return e.apply(t,arguments)}},l=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};i=[n(1118),n(1225)],void 0!==(a=function(e,t){return function(){function n(e){null==e&&(e={}),this.getGlobal=s(this.getGlobal,this),this.get=s(this.get,this),this.copyElements=s(this.copyElements,this),this.updateTaskUser=s(this.updateTaskUser,this),this.clickHiddenSpanIfAvailable=s(this.clickHiddenSpanIfAvailable,this),this.getKoObjectTasksAsPlainText=s(this.getKoObjectTasksAsPlainText,this),this.getKoTasklistAsPlainText=s(this.getKoTasklistAsPlainText,this),this.getKoObjectUnderCursor=s(this.getKoObjectUnderCursor,this),this.goToProjectTab=s(this.goToProjectTab,this)}return n.prototype.goToProjectTab=function(e){var t,n,o;if(!app.modals().length&&null!=app.currentRoute().projectId&&(o=e-1,n=null!=(t=r(".w-page-tabs__list li").eq(o).find("a").attr("href"))?t.replace("/#/",""):void 0))return app.GoTo(n)},n.prototype.getKoObjectUnderCursor=function(e){var t,n,o,i,a,s,l,u,c,d,f,h,p,m,g,v,b,y,w,x;if(o=app.elemUnderMouse,u=null,null==o)return null;switch(e){case"task":t=r(o).closest(".task-row"),t.length&&(w=ko.contextFor(t[0]),"Task"===(null!=w&&null!=(d=w.$data)?d.componentName:void 0)?u=w.$data:"Task"===(null!=w&&null!=(f=w.$parent)?f.componentName:void 0)?u=w.$parent:"SectionProjectTask"===(null!=w&&null!=(h=w.$parent)?h.componentName:void 0)&&(u=null!=w?w.$parent.task:void 0));break;case"taskCard":t=r(o).closest(".task-card"),t.length&&(w=ko.contextFor(t[0]),"TaskCard"!==(null!=w&&null!=(p=w.$data)?p.componentName:void 0)||null==w.$data.taskId||isNaN(parseInt(w.$data.taskId,10))?"WidgetTaskCard"!==(null!=w&&null!=(m=w.$data)?m.componentName:void 0)||null==(null!=(g=w.$data.task)?g.taskId:void 0)||isNaN(parseInt(w.$data.task.taskId(),10))||(u=w.$data.task):u=w.$data);break;case"tasklist":t=r(o).closest(".tasklist-item"),t.length&&(n=t.find(".task-groupHold"),null!=n[0]?c=ko.contextFor(n[0]).$parents[1]:t.find(".taskListDrag").length?c=ko.contextFor(t[0]).$data:(n=t.find(".tlBlankSlate"),null!=n[0]&&(c=ko.contextFor(n[0]).$component)),null!=c&&null!=c.componentName&&"SectionTasksList"===c.componentName&&(u=c),null!=c&&null!=c.componentName&&"SectionTaskList"===c.componentName&&(u=c));break;case"tasklistHeader":if(t=r(o).closest(".tasklistHeader"),t.length)return x=ko.contextFor(t[0]).$data,c={taskListId:x.taskListId(),projectId:x.projectId()};break;case"milestone":if(t=r(o).closest(".milestone"),t.length){if(null==ko.contextFor(t[0]))return!1;c=ko.contextFor(t[0]).$parent,null!=c.componentName&&"Milestone"===c.componentName?u=c:null!=c.componentName&&"SectionMilestoneDetails"===c.componentName&&(u=c.milestone())}break;case"file":t=r(o).closest(".w-file-row"),t.length?(i=ko.contextFor(t[0]).$data,null!=i.componentName&&"File"===i.componentName&&(u=i)):(t=r(o).closest(".w-file-card"),t.length&&(i=ko.contextFor(t[0]).$data,null!=i.componentName&&"File"===i.componentName&&(u=i)));break;case"link":t=r(o).closest(".w-link-body__link-item"),t.length&&(a=ko.dataFor(t[0]),null!=a.componentName&&"Link"===a.componentName&&(u=a));break;case"notebook":t=r(o).closest(".w-notebook-item"),t.length&&(l=ko.dataFor(t[0]),null!=l.componentName&&"Notebook"===l.componentName&&(u=l));break;case"message":t=r(o).closest(".w-message-row"),t.length?(s=ko.dataFor(t[0]),null!=s.componentName&&"Message"===s.componentName&&(u=s)):(t=r(o).closest(".w-message"),t.length&&(s=ko.dataFor(t[0]),null!=s.componentName&&"Message"===s.componentName&&(u=s)));break;case"tag":t=r(o).closest(".w-tags__tag"),t.length&&(y=ko.dataFor(t[0]),b=ko.contextFor(t[0]),"WidgetTagsList"===(null!=(v=b.$parent)?v.componentName:void 0)&&null!=y&&(u=y))}return ko.unwrap(u)},n.prototype.getKoTasklistAsPlainText=function(e,t){return this.getKoObjectTasksAsPlainText(t,e,0)},n.prototype.getKoObjectTasksAsPlainText=function(e,t,n){var r,o,i,a,s,l;for(i="",r=++n;r-=1;)i+="\t";for(o=a=0,s=t.length;a<s;o=++a)l=t[o],l.name().length&&(e+=i+"- "+("completed"===l.status()?"[Completed] ":"")+l.name()+"\n",("function"==typeof l.subTasks?l.subTasks():void 0)&&l.subTasks().length&&(e=this.getKoObjectTasksAsPlainText(e,l.subTasks(),r)));return e},n.prototype.clickHiddenSpanIfAvailable=function(){var e,t;e=r(app.elemUnderMouse).closest(".hiddenProjectDropdownSelectorHolder"),e.length&&(t="hiddenSpanProjectMenu"+ko.contextFor(e[0]).$data.id(),r("#"+t).click())},n.prototype.updateTaskUser=function(e,t,n,r){var o,i,a,s,l,u;if(null==r&&(r=!1),n=n.toString(),i=function(e){return Array.isArray(e)?e:"string"==typeof e?e.split(","):e},s=e.responsiblePartyIds(),a=ko.observableArray(i(s).map(String)),"add"===t){if(app.utility.IsUserInSelection(a))return;a.push(n),"0"===a()[0]&&a.shift()}else if("set"===t)a.removeAll(),a.push(n);else{if(-1===a.indexOf(n))return;a.remove(n),0===a().length&&a([0])}return l=r?e.taskId():e.id(),u="tasks/"+l+".json",o={"todo-item":{"responsible-party-id":a().toString()}},app.api.put(u,o).then(function(t){return function(t){var n,o,i,s,l,u,c,d,f;if(n=null!=(u=t.response.affectedTaskIds)?u:"",i=null!=(c=t.response.linkedCardId)?c:0,s=null!=(d=t.response.linkedColumnId)?d:0,l=null!=(f=t.response.linkedColumnName)?f:"",r&&e.responsiblePartyIds(a().toString()),"OK"===t.response.STATUS)return a().length&&"0"!==a()[0].toString()||e.assignedTo([]),o={eventTime:new Date,itemType:"task",actionType:app.consts.ACTIONTYPE.UPDATED,itemId:e.id(),taskListId:e.taskListId(),subType:"responsible",extraInfo:{data:{affectedTaskIds:n,cardId:i,columnId:s,columnName:l}}},e.parentTaskId()>0&&(o.parentTaskId=e.parentTaskId()),app.ko.postbox.publish("allTWEvents",o)}}())},n.prototype.copyElements=function(){var e,t,n,o,i,a,s,l,u,c;if((-1===navigator.userAgent.toLowerCase().indexOf("safari/")||-1!==navigator.userAgent.indexOf("Chrome"))&&!window.getSelection().toString())if(Tipped.hideAll(),0===r("#copyClipboard").length?(c=document.createElement("textarea"),c.id="copyClipboard",r(c).attr("noChangeTracking",""),c.style.height="1px",c.style.width="1px",c.style.position="fixed",c.style.bottom="0px",c.style.left="0px",c.style.zIndex="-1",document.body.appendChild(c)):c=r("#copyClipboard"),i=this.getKoObjectUnderCursor("task"),s=this.getKoObjectUnderCursor("tasklist"),null!=i){for(u=i.name()+"\n",e=0,n=i.name().length-1;0<=n?e<=n:e>=n;0<=n?++e:--e)u+="-";("function"==typeof i.description?i.description().length:void 0)&&(u+="\n"+i.description()+"\n\n"),u+="\n"+app.account.URL()+"tasks/"+i.id()+"\n\n",u=u.trim(),r(c).val(u).select(),app.flash.Success(app.tl("Task details copied to clipboard."))}else if(null!=s){for(a=s.taskData.list(),l=s.taskList,u=l.name()+"\n",t=0,o=l.name().length-1;0<=o?t<=o:t>=o;0<=o?++t:--t)u+="-";l.description().length&&(u+="\n"+l.description()+"\n\n"),u+="\n"+app.account.URL()+"tasklists/"+l.id()+"\n\n",u=this.getKoTasklistAsPlainText(a,u),u=u.trim(),r(c).val(u).select(),app.flash.Success(app.tl("Task list copied as plain text to clipboard."))}},n.prototype.get=function(){return{"?":function(e){return function(){app.quickView.isOpen()||1===Lightbox.isOpen()||(Tipped.hideAll(),app.quickView.show("keyboard-shortcuts"))}}(),"-":function(e){return function(){var t,n;if(Tipped.hideAll(),!app.modals().length&&(null==app.loggedInUser||"account"===app.loggedInUser.userType()))return t=e.getKoObjectUnderCursor("task"),null!=t&&t.canEdit()&&e.updateTaskUser(t,"remove",app.loggedInUser.id()),n=e.getKoObjectUnderCursor("taskCard"),null!=n&&n.canEdit()?e.updateTaskUser(n,"remove",app.loggedInUser.id(),!0):void 0}}(this),"+":function(e){return function(){var t,n;if(Tipped.hideAll(),!app.modals().length){if(t=e.getKoObjectUnderCursor("task"),n=e.getKoObjectUnderCursor("taskCard"),null!=t&&t.canEdit()){if(null!=app.loggedInUser&&"account"!==app.loggedInUser.userType())return;return e.updateTaskUser(t,"add",app.loggedInUser.id())}if(null!=n&&n.canEdit()){if(null!=app.loggedInUser&&"account"!==app.loggedInUser.userType())return;return e.updateTaskUser(n,"add",app.loggedInUser.id(),!0)}return app.account.shortcutsAvailable()?(app.isQuickAddOpen(!1),app.modal.Show("addOrEditShortcut",{})):void 0}}}(this),"=":function(e){return function(){var t,n;if(Tipped.hideAll(),!app.modals().length){if(t=e.getKoObjectUnderCursor("task"),n=e.getKoObjectUnderCursor("taskCard"),null!=t&&t.canEdit()){if(null!=app.loggedInUser&&"account"!==app.loggedInUser.userType())return;return e.updateTaskUser(t,"add",app.loggedInUser.id())}if(null!=n&&n.canEdit()){if(null!=app.loggedInUser&&"account"!==app.loggedInUser.userType())return;return e.updateTaskUser(n,"add",app.loggedInUser.id(),!0)}return app.account.shortcutsAvailable()?(app.isQuickAddOpen(!1),app.modal.Show("addOrEditShortcut",{})):void 0}}}(this),1:function(e){return function(t,n){return e.goToProjectTab(n)}}(this),2:function(e){return function(t,n){return e.goToProjectTab(n)}}(this),3:function(e){return function(t,n){return e.goToProjectTab(n)}}(this),4:function(e){return function(t,n){return e.goToProjectTab(n)}}(this),5:function(e){return function(t,n){return e.goToProjectTab(n)}}(this),6:function(e){return function(t,n){return e.goToProjectTab(n)}}(this),7:function(e){return function(t,n){return e.goToProjectTab(n)}}(this),8:function(e){return function(t,n){return e.goToProjectTab(n)}}(this),9:function(e){return function(t,n){return e.goToProjectTab(n)}}(this),a:function(e){return function(){var t,n;if(Tipped.hideAll(),!app.modals().length&&(null==app.loggedInUser||"account"===app.loggedInUser.userType()))return t=e.getKoObjectUnderCursor("task"),null!=t&&e.updateTaskUser(t,"set",0),n=e.getKoObjectUnderCursor("taskCard"),null!=n?e.updateTaskUser(n,"set",0,!0):void 0}}(this),b:function(e){return function(){var e;if(null!=app.currentRoute().projectTab&&!app.modals().length)return"tasks"!==(e=app.currentRoute().projectTab)&&"tasklists"!==e||app.isBoardsView()?void 0:app.GoTo("projects/"+app.currentRoute().projectId+"/tasks/board")}}(),c:function(e){return function(){var t,n,r;if((null==app.loggedInUser||"account"===app.loggedInUser.userType())&&!app.modals().length)return n=e.getKoObjectUnderCursor("task"),r=e.getKoObjectUnderCursor("taskCard"),t=e.getKoObjectUnderCursor("milestone"),null!=n&&0!==n.id()?n.OnClickComplete():null!=r?r.OnClickComplete():t&&t.canComplete()?t.completed()?t.markAsIncomplete():t.markAsComplete():void 0}}(this),d:{func:function(e){return function(){var t,n,r;if(!app.modals().length&&(null==app.loggedInUser||"account"===app.loggedInUser.userType()))return n=e.getKoObjectUnderCursor("task"),r=e.getKoObjectUnderCursor("taskCard"),t=e.getKoObjectUnderCursor("milestone"),null!=n&&n.canEdit()&&!n.isEditMode()?n.Duplicate():null!=r&&r.canEdit()&&!r.isEditMode()?r.Duplicate():null!=t&&t.canEdit()?app.modal.Show("duplicateMilestone",{milestone:t}):void 0}}(this),event:"keyup"},e:function(e){return function(){var n,r;if(!app.modals().length&&(null==app.loggedInUser||"account"===app.loggedInUser.userType()))return app.isQuickAddOpen()?(app.isQuickAddOpen(!1),app.modal.Show("addOrEditEvent"),app.trackerHelper.trackQuickAdd("Event",!0)):(n=e.getKoObjectUnderCursor("task"),r=e.getKoObjectUnderCursor("taskCard"),null!=n&&n.canEdit()?(t("Task action","Open form keyboard"),n.OnClickEdit(),!1):null!=r&&r.canEdit()?(r.OnClickEdit(),!1):void 0)}}(this),f:function(t){return function(){var n,r,i;if(!app.modals().length)return null!=(n=t.getKoObjectUnderCursor("tag"))?(ko.postbox.publish("filter-addTag",n),!1):(r=t.getKoObjectUnderCursor("task"),null==r?(o(".app-header").hasClass("app-header--search-opened")||app.hybrid.store.commit("quickSearch/toggleSearchOpen"),app.utility.FocusInput("#searchForm input[type='text']"),!1):(Tipped.hideAll(),null==app.currentRoute().projectId?(i=ko.unwrap(r.projectId),app.GetProjectAndPermissions(i).then(function(n){var o;if(o=null!=n.componentName&&"Project"===n.componentName?n:new e(n.response.project),t.projectPermissions=o.permissions,t.projectPermissions.canAddFiles()&&r.canEdit()&&app.modal.Show("attachFilesToTask",{task:r}),null==app.cachedProjects[i])return app.cachedProjects[i]=o})):(t.projectPermissions=app.currentRoute().project.permissions,t.projectPermissions.canAddFiles()&&r.canEdit()?app.modal.Show("attachFilesToTask",{task:r}):void 0)))}}(this),g:function(e){return function(){app.currentRoute().project.isTemplate()||app.modals().length||null!=app.currentRoute().project&&app.GoTo("#projects/"+app.currentRoute().projectId+"/gantt")}}(),h:function(e){return function(){if(!app.loggedInUser.siteOwner()&&app.account.strictBranding())return!1;if(!app.modals().length)return app.modal.Show("supportCenter",{stack:!0})}}(),j:function(e){return function(){var t,n;if(Tipped.hideAll(),!app.modals().length&&(null==app.loggedInUser||"account"===app.loggedInUser.userType()))return t=e.getKoObjectUnderCursor("task"),null!=t&&e.updateTaskUser(t,"set",app.loggedInUser.id()),n=e.getKoObjectUnderCursor("taskCard"),null!=n?e.updateTaskUser(n,"set",app.loggedInUser.id(),!0):void 0}}(this),l:function(e){return function(){var e,t,n,r;if(app.isQuickAddOpen()){if(app.modals().length||(null!=(n=app.currentRoute().project)?n.isTemplate():void 0))return;if(null==app.loggedInUser||null==app.loggedInUser.stats)return!1;if(null!=app.quickAddProject()&&(t=app.quickAddProject().permissions,e=app.quickAddProject().activePages,!t.canLogTime()||"0"===e.time()))return;if(!app.loggedInUser.administrator()&&!app.loggedInUser.stats.permissions.canLogTime())return;return app.isQuickAddOpen(!1),app.modal.Show("quick-add-time",{}),app.trackerHelper.trackQuickAdd("Log Time",!0)}if(("tasks"===(r=app.currentRoute().projectTab)||"tasklists"===r||"templates"===r)&&app.isBoardsView())return app.GoTo("projects/"+app.currentRoute().projectId+"/tasks")}}(),m:function(e){return function(){var t,n,r;if(!app.modals().length&&(null==app.loggedInUser||"account"===app.loggedInUser.userType())){if(r=e.getKoObjectUnderCursor("task"),app.isQuickAddOpen()){if(null==app.loggedInUser||null==app.loggedInUser.stats)return!1;if(null!=app.quickAddProject()&&(n=app.quickAddProject().permissions,t=app.quickAddProject().activePages,!n.canAddMilestones()||"0"===t.milestones()))return;if(!app.loggedInUser.administrator()&&!app.loggedInUser.stats.permissions.canAddMilestones())return;return app.isQuickAddOpen(!1),app.modal.Show("addOrEditMilestone",{}),app.trackerHelper.trackQuickAdd("Milestone",!0)}return null!=r&&r.canEdit()?(Tipped.hideAll(),app.modal.Show("moveOrCopyItem",{type:"task",item:r,itemId:ko.unwrap(r.id),projectId:ko.unwrap(r.projectId)})):"project"===app.currentRoute().page&&null!=app.currentRoute().projectTab&&"files"===app.currentRoute().projectTab?app.ko.postbox.publish("project-files-selecting-multiple",{location:"keyboard"}):void 0}}}(this),n:function(e){return function(){var t,n,r,o,i,a,s,l,u,c;if((null==(l=app.currentRoute().project)||!l.isTemplate()||app.loggedInUser.permissions.canManageProjectTemplates())&&!app.modals().length){if(app.isQuickAddOpen()){if(null==app.loggedInUser||null==app.loggedInUser.stats)return!1;if(null!=app.quickAddProject()&&(s=app.quickAddProject().permissions,t=app.quickAddProject().activePages,!s.canAddMessages()||"0"===t.messages()))return;if(!app.loggedInUser.administrator()&&!app.loggedInUser.stats.permissions.canAddMessages())return;return app.isQuickAddOpen(!1),app.modal.Show("addMessage",{}),app.trackerHelper.trackQuickAdd("Message",!0)}return u=e.getKoObjectUnderCursor("task"),c=e.getKoObjectUnderCursor("taskCard"),r=e.getKoObjectUnderCursor("file"),a=e.getKoObjectUnderCursor("notebook"),o=e.getKoObjectUnderCursor("link"),i=e.getKoObjectUnderCursor("milestone"),null!=u&&u.id()>0?app.modal.Show("addOrEditComment",{item:u,projectId:ko.unwrap(u.projectId),type:"task"}):null!=c&&c.taskId()>0?(n=c.GetTask(),app.modal.Show("addOrEditComment",{item:n,projectId:ko.unwrap(n.projectId),type:"task"})):null!=r&&r.id()>0?app.modal.Show("addOrEditComment",{item:r,projectId:ko.unwrap(r.projectId),type:"file"}):null!=a&&a.id()>0?app.modal.Show("addOrEditComment",{item:a,projectId:ko.unwrap(a.projectId),type:"notebook"}):null!=o&&o.id()>0?app.modal.Show("addOrEditComment",{item:o,projectId:ko.unwrap(o.projectId),type:"link"}):null!=i&&i.id()>0?app.modal.Show("addOrEditComment",{item:i,projectId:ko.unwrap(i.projectId),type:"milestone"}):void 0}}}(this),o:function(e){return function(){if(!app.quickView.isOpen()&&1!==Lightbox.isOpen())return Tipped.hideAll(),e.clickHiddenSpanIfAvailable()}}(this),p:function(e){return function(){if(app.isQuickAddOpen()){if(!app.loggedInUser.administrator()&&!app.loggedInUser.permissions.canAddProjects())return;return app.isQuickAddOpen(!1),app.modal.Show("addOrEditProject"),app.trackerHelper.trackQuickAdd("Project",!0)}}}(),q:function(e){return function(){app.quickView.isOpen()||Lightbox.isOpen()}}(),r:function(e){return function(){var t,n;if(null==(t=app.currentRoute().project)||!t.isTemplate())return n=e.getKoObjectUnderCursor("task"),null!=n?app.modal.Show("currentTaskReminders",{item:n,projectId:ko.unwrap(n.projectId),addNew:!0}):void 0}}(this),"shift+s":function(e){return function(){if(!app.modals().length&&app.account.shortcutsAvailable())return app.quickView.show("myShortcuts")}}(),s:function(e){return function(){var t,n,r,o,i;if(!(app.quickView.isOpen()||1===Lightbox.isOpen()||(null!=(r=app.currentRoute().project)?r.isTemplate():void 0))){if(app.isQuickAddOpen()){if("account"!==app.loggedInUser.userType())return!1;if(null==app.loggedInUser||null==app.loggedInUser.stats)return!1;if(null!=app.quickAddProject()&&(n=app.quickAddProject().permissions,t=app.quickAddProject().activePages,!n.canLogTime()||"0"===t.time()))return;if(!(app.loggedInUser.administrator()||app.loggedInUser.stats.permissions.canLogTime()||null!=app.currentRoute().project&&app.currentRoute().project.permissions.canLogTime()))return;return app.isQuickAddOpen(!1),app.modal.Show("addOrEditTimer",{}),app.trackerHelper.trackQuickAdd("Start Timer",!0)}return o=e.getKoObjectUnderCursor("task"),i=e.getKoObjectUnderCursor("taskCard"),null!=o&&o.canLogTime()?"account"===app.loggedInUser.userType()&&o.ToggleTimer():null!=i&&i.canLogTime()?"account"===app.loggedInUser.userType()&&i.ToggleTimer():void 0}}}(this),plus:function(e){return function(){if(!app.modals().length)return app.isQuickAddOpen()?(app.isQuickAddOpen(!1),app.modal.Show("addOrEditShortcut",{}),app.trackerHelper.trackQuickAdd("Shortcut",!0)):void 0}}(),t:function(e){return function(){var t,n,r,o,i;if("account"!==app.loggedInUser.userType())return!1;if(!app.modals().length){if(app.isQuickAddOpen()){if(null==app.loggedInUser||null==app.loggedInUser.stats)return!1;if(null!=app.quickAddProject()&&(r=app.quickAddProject().permissions,t=app.quickAddProject().activePages,!r.canAddTasks()||"0"===t.tasks()))return;if(!app.loggedInUser.administrator()&&!app.loggedInUser.stats.permissions.canAddTasks())return;return app.isQuickAddOpen(!1),app.modal.Show("quicklyAddTasksToTaskList",{}),app.trackerHelper.trackQuickAdd("Task",!0)}if(app.currentRoute().project&&app.currentRoute().project.isTemplate())return!1;if(o=e.getKoObjectUnderCursor("task"),i=e.getKoObjectUnderCursor("taskCard"),null!=o){if(!o.canLogTime())return;n=function(e){if(!e.wasCancelled)return o.hasLoggedTime(!0)},app.modal.Show("addOrEditTimeEntry",{task:o,projectId:o.projectId(),onCloseCallBack:n})}else if(null!=i){if(!i.canLogTime())return;o=i.GetTask(),n=function(e){if(!e.wasCancelled)return i.hasLoggedTime(!0)},app.modal.Show("addOrEditTimeEntry",{task:o,projectId:o.projectId(),onCloseCallBack:n})}}}}(this),u:function(e){return function(){var e,t;if(!app.modals().length&&(null==(t=app.account.SSO)||"function"!=typeof t.enabled||!t.enabled()||"SSO automatic-start"!==("function"==typeof(e=app.account.SSO).loginStyle?e.loginStyle():void 0))&&app.isQuickAddOpen()){if(!(app.loggedInUser.administrator()||app.loggedInUser.permissions.canManagePeople()||null!=app.currentRoute().project&&app.currentRoute().project.permissions.projectAdministrator()))return;return app.isQuickAddOpen(!1),app.modal.Show("inviteNewUsers",{}),app.trackerHelper.trackQuickAdd("Invite User",!0)}}}(),v:function(e){return function(){var t,n,i,a,s,u,c,d,f,h,p,m,g,v,b,y,w,x,C,k,N,_,S,T,E,O;if(!app.modals().length){if(a=ko.dataFor(app.elemUnderMouse),null!=("function"==typeof a.onPressV?a.onPressV():void 0))return void a.onPressV();if(null!=a)if("WidgetTabsListTab"===a.componentName){if("projects"===a.id)return app.isShowingQuickJump(!app.isShowingQuickJump())}else{if(null!=a.componentName&&"Project"===a.componentName)return app.quickView.show("project",{id:a.id(),project:a,title:ko.observable("<a href='#projects/"+a.id()+"'>"+app.utility.SafeHTML(a.name())+"</a>"),projectId:a.id(),isQuickView:!0});if(null!=a.componentName&&"WidgetProject"===a.componentName)return app.quickView.show("project",{id:a.item.id(),project:a.item,title:ko.observable("<a href='#projects/"+a.item.id()+"'>"+app.utility.SafeHTML(a.item.name())+"</a>"),projectId:a.item.id(),isQuickView:!0});if(null!=a.componentName&&"UIProjectHeader"===a.componentName)return app.quickView.show("project",{id:a.id(),project:null,title:ko.observable("<a href='#projects/"+a.id()+"'>"+app.utility.SafeHTML(a.name())+"</a>"),projectId:a.id(),isQuickView:!0});if(null!=a.componentName&&"WidgetComment"===a.componentName){if(null!=app.currentRoute().itemId)return;if(n=a.item,u=n.commentableId(),d=n.type(),w=n.projectId(),S=["task","milestone","link","file","notebook"],x=d.toLowerCase(),l.call(S,x)>=0)return b={projectId:w},b[d+"Id"]=u,b.id=u,app.quickView.show(d,b)}else if("search"===app.currentRoute().page){if(t=o(app.elemUnderMouse).closest("[data-search-results-container]"),!t.length)return;y=ko.dataFor(t[0]),a.itemType=y.itemType,u=a.id,d=a.itemType,w=a.projectId,i=d.indexOf("Comment"),-1!==i&&(v=d.indexOf("Comment"),d=""+d.substr(0,v),u=a[d+"Id"]),S=["task","tasklist","message","comment","milestone","link","file","notebook"],C=d.toLowerCase(),l.call(S,C)>=0?(b={projectId:w},b[d+"Id"]=u,b.id=u,app.quickView.show(d,b)):console.warn("need to handle this type:",a)}else if(null!=a.type&&"project"===ko.unwrap(a.type))app.GoTo("projects/"+a.itemid()+"/overview/activity");else if("ActivityItem"===(k=a.componentName)||"Comment"===k||"WidgetActivity"===k||"new"===a.actionType&&"eventNotice"===a.cmd){if("WidgetActivity"===a.componentName&&(a=a.item),!(c=ko.unwrap(a.link)||ko.unwrap(a.commentLink)||ko.unwrap(a.itemLink)))return;if(0===(w=null!=a.projectId?ko.unwrap(a.projectId):null!=app.currentRoute().projectId?app.currentRoute().projectId:0))return;p=/^#?(\w+)s\/(\d+).*$/.exec(c),p&&(d=p[1],u=p[2]),"tasklist"===d&&(d="taskList"),null!=a.itemId&&null!=a.type&&"projectUpdate"===ko.unwrap(a.type)?(d="projectUpdate",u=ko.unwrap(a.itemId),app.quickView.show("projectUpdates",{projectId:w,updateId:u})):"task"===d||"milestone"===d||"link"===d||"notebook"===d||"message"===d||"file"===d||"taskList"===d?(b={projectId:w},b[d+"Id"]=u,b.id=u,b.type=d,app.quickView.show(d,b),_="#notif"+a._timestamp,"deleted"!==a.actionType&&(s={currentTarget:document.querySelector(_)},app.notifications.MarkAsRead(a,s))):console.warn("need to handle this type:",a)}else if("TimeEntry"===a.componentName){if(app.elemUnderMouse.classList.contains("task")||r(app.elemUnderMouse).parents(".task").length)a.taskId()>0&&app.quickView.show("task",{id:a.taskId(),isSubtask:parseInt(a.parentTaskId(),10)>0,taskId:a.taskId(),projectId:a.projectId()});else if((app.elemUnderMouse.classList.contains("tasklist")||r(app.elemUnderMouse).parents(".tasklist").length)&&a.tasklistId()>0){if(a.projectId()/1==app.account.tasklistTemplateProjectId()/1)return;app.quickView.show("taskList",{id:a.tasklistId(),taskListId:a.tasklistId(),projectId:a.projectId()})}}else{if("User"===a.componentName&&null!=app.currentRoute().project)return a.QuickView();if("MilestoneCalendar"===a.componentName)null!=(m=o(app.elemUnderMouse).closest(".calendar-milestone").attr("data-event-id"))&&app.quickView.show("milestone",{id:ko.unwrap(m),milestoneId:m});else{if("TaskCard"===a.componentName)return a.OnQuickView();if("WidgetTaskRow"!==a.componentName&&null!=(T=e.getKoObjectUnderCursor("tasklist"))&&null!=T.taskList){if(app.elemUnderMouse.className.indexOf("tasklistMilestone")>-1)return T.taskList.milestone.OnQuickView();if(T.taskList.projectId()/1==app.account.tasklistTemplateProjectId()/1)return;return T.taskList.OnQuickView()}if(null!=(E=e.getKoObjectUnderCursor("tasklistHeader"))){if(ko.unwrap(E.projectId)/1==app.account.tasklistTemplateProjectId()/1)return;return app.quickView.show("taskList",{id:E.taskListId,taskListId:E.taskListId,projectId:E.projectId})}if("SectionReportRow"===a.componentName)return a.OnClickViewReport();for(N=["task","taskCard","milestone","link","notebook","message","file"],f=0,h=N.length;f<h;f++){if("task"===(O=N[f])){if("project"===app.currentRoute().page&&"tasks"===app.currentRoute().projectTab&&app.currentRoute().itemId===a.task.id())return;if(null!=a.task&&a.task.projectId()/1==app.account.tasklistTemplateProjectId()/1)return}if(null!=(g=e.getKoObjectUnderCursor(O)))return void g.OnQuickView()}}}}}}}(this),del:function(e){return function(){var t;app.modals().length||null!=(t=e.getKoObjectUnderCursor("task"))&&t.canEdit()&&app.modal.Show("confirm",{title:app.tl("Confirm Delete"),text:app.tl("Are you sure you want to delete this task?"),callback:function(e){if(!e.wasCancelled)return t.Delete()}})}}(this),backspace:function(e){return function(){if(app.modals().length)return!1}}(),"command+c":function(e){return function(){return e.copyElements()}}(this),"ctrl+c":function(e){return function(){return e.copyElements()}}(this),up:function(e){return function(){var e,t;if(t=r("#imagePreviewContainer"),t.length&&t.is(":visible")&&null!=(e=ko.contextFor(t[0]).$data)&&null!=e.onPreviousVersion)return e.onPreviousVersion(),!1}}(),down:function(e){return function(){var e,t;if(t=r("#imagePreviewContainer"),t.length&&t.is(":visible")&&null!=(e=ko.contextFor(t[0]).$data)&&null!=e.onNextVersion)return e.onNextVersion(),!1}}(),left:function(e){return function(){var e,t;if(t=r("#imagePreviewContainer"),t.length&&t.is(":visible")&&null!=(e=ko.contextFor(t[0]).$data)&&null!=e.onPreviousImage)return e.onPreviousImage()}}(),right:function(e){return function(){var e,t;if(t=r("#imagePreviewContainer"),t.length&&t.is(":visible")&&null!=(e=ko.contextFor(t[0]).$data)&&null!=e.onNextImage)return e.onNextImage()}}(),tab:function(e){return function(t){var n;if(null!=(n=e.getKoObjectUnderCursor("task"))&&n.canEdit()){if(app.elemUnderMouse.focus(),"tasks"===app.currentRoute().projectTab&&app.currentRoute().itemId===n.id())return;return t.preventDefault(),0===n.parentTaskId()?ko.postbox.publish("indent-task-on-tasklist-"+n.taskListId(),{taskId:n.id(),parentTaskId:n.parentTaskId()}):ko.postbox.publish("indent-subtask-on-task-"+n.parentTaskId(),{taskId:n.id(),parentTaskId:n.parentTaskId()})}}}(this),"shift+tab":function(e){return function(t){var n;if(null!=(n=e.getKoObjectUnderCursor("task"))&&n.canEdit()&&n.parentTaskId()>0){if(app.elemUnderMouse.focus(),"tasks"===app.currentRoute().projectTab&&app.currentRoute().itemId===n.id())return;return t.preventDefault(),ko.postbox.publish("outdent-subtask-on-tasklist-"+n.taskListId(),{taskId:n.id(),parentTaskId:n.parentTaskId()})}}}(this)}},n.prototype.getGlobal=function(){return{esc:function(e){return function(e){if(Tipped.hideAll(),app.isShowingFullScreenMode(!1),!o(e.target).hasClass("mce-textbox")&&"froalaEditor"!==e.type)return app.hybrid.store.getters["modals/active"]||app.hybrid.store.getters["quickViews/active"]?void ko.postbox.publish("esc-btn-press"):app.modals().length&&0===r("#large-video-bg:visible").length?Lightbox.cancel():app.quickView.isOpen()?null!=app.currentRoute().projectId&&"gantt"===app.currentRoute().page?(app.GoTo("#projects/"+app.currentRoute().projectId+"/gantt"),e.stopImmediatePropagation(),e.preventDefault(),!1):r("#quickViewHolder .editTaskForm").length?ko.postbox.publish("esc-btn-press"):app.quickView.empty():void ko.postbox.publish("esc-btn-press")}}(),"command+enter":function(e){return function(e,t){var n,o,i,a;if(void 0!==r(":focus")[0]){if(i=r(":focus")[0],o=null!=(null!=(a=ko.contextFor(i).$component)?a.componentName:void 0)&&"WidgetMentions"===ko.contextFor(i).$component.componentName?ko.contextFor(i).$parent:ko.contextFor(i).$component,null!=(null!=o?o.OnSubmit:void 0))return void o.OnSubmit();document.activeElement&&(n=r(document.activeElement).find("FORM"),1===n.length&&n.submit())}}}(),"ctrl+enter":function(e){return function(e,t){return Mousetrap.trigger("command+enter")}}()}},n}()}.apply(t,i))&&(e.exports=a)}).call(t,n(245),n(245))},1728:function(e,t,n){!function(t,n){e.exports=n()}(window,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(t){return e[t]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s="./src/index.js")}({"./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js":/*!******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js ***!
  \******************************************************************/
/*! no static exports found */
function(e,t){function n(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}e.exports=n},"./node_modules/@babel/runtime/helpers/assertThisInitialized.js":/*!**********************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/assertThisInitialized.js ***!
  \**********************************************************************/
/*! no static exports found */
function(e,t){function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}e.exports=n},"./node_modules/@babel/runtime/helpers/classCallCheck.js":/*!***************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/classCallCheck.js ***!
  \***************************************************************/
/*! no static exports found */
function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.exports=n},"./node_modules/@babel/runtime/helpers/construct.js":/*!**********************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/construct.js ***!
  \**********************************************************/
/*! no static exports found */
function(e,t,n){function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function o(t,n,a){return r()?e.exports=o=Reflect.construct:e.exports=o=function(e,t,n){var r=[null];r.push.apply(r,t);var o=Function.bind.apply(e,r),a=new o;return n&&i(a,n.prototype),a},o.apply(null,arguments)}var i=n(/*! ./setPrototypeOf */"./node_modules/@babel/runtime/helpers/setPrototypeOf.js");e.exports=o},"./node_modules/@babel/runtime/helpers/createClass.js":/*!************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/createClass.js ***!
  \************************************************************/
/*! no static exports found */
function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}e.exports=r},"./node_modules/@babel/runtime/helpers/get.js":/*!****************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/get.js ***!
  \****************************************************/
/*! no static exports found */
function(e,t,n){function r(t,n,i){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=r=Reflect.get:e.exports=r=function(e,t,n){var r=o(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}},r(t,n,i||t)}var o=n(/*! ./superPropBase */"./node_modules/@babel/runtime/helpers/superPropBase.js");e.exports=r},"./node_modules/@babel/runtime/helpers/getPrototypeOf.js":/*!***************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/getPrototypeOf.js ***!
  \***************************************************************/
/*! no static exports found */
function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},"./node_modules/@babel/runtime/helpers/inherits.js":/*!*********************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/inherits.js ***!
  \*********************************************************/
/*! no static exports found */
function(e,t,n){function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}var o=n(/*! ./setPrototypeOf */"./node_modules/@babel/runtime/helpers/setPrototypeOf.js");e.exports=r},"./node_modules/@babel/runtime/helpers/isNativeFunction.js":/*!*****************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/isNativeFunction.js ***!
  \*****************************************************************/
/*! no static exports found */
function(e,t){function n(e){return-1!==Function.toString.call(e).indexOf("[native code]")}e.exports=n},"./node_modules/@babel/runtime/helpers/iterableToArray.js":/*!****************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/iterableToArray.js ***!
  \****************************************************************/
/*! no static exports found */
function(e,t){function n(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}e.exports=n},"./node_modules/@babel/runtime/helpers/nonIterableSpread.js":/*!******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/nonIterableSpread.js ***!
  \******************************************************************/
/*! no static exports found */
function(e,t){function n(){throw new TypeError("Invalid attempt to spread non-iterable instance")}e.exports=n},"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js":/*!**************************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js ***!
  \**************************************************************************/
/*! no static exports found */
function(e,t,n){function r(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?i(e):t}var o=n(/*! ../helpers/typeof */"./node_modules/@babel/runtime/helpers/typeof.js"),i=n(/*! ./assertThisInitialized */"./node_modules/@babel/runtime/helpers/assertThisInitialized.js");e.exports=r},"./node_modules/@babel/runtime/helpers/setPrototypeOf.js":/*!***************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/setPrototypeOf.js ***!
  \***************************************************************/
/*! no static exports found */
function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},"./node_modules/@babel/runtime/helpers/superPropBase.js":/*!**************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/superPropBase.js ***!
  \**************************************************************/
/*! no static exports found */
function(e,t,n){function r(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}var o=n(/*! ./getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js");e.exports=r},"./node_modules/@babel/runtime/helpers/toConsumableArray.js":/*!******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/toConsumableArray.js ***!
  \******************************************************************/
/*! no static exports found */
function(e,t,n){function r(e){return o(e)||i(e)||a()}var o=n(/*! ./arrayWithoutHoles */"./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js"),i=n(/*! ./iterableToArray */"./node_modules/@babel/runtime/helpers/iterableToArray.js"),a=n(/*! ./nonIterableSpread */"./node_modules/@babel/runtime/helpers/nonIterableSpread.js");e.exports=r},"./node_modules/@babel/runtime/helpers/typeof.js":/*!*******************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/typeof.js ***!
  \*******************************************************/
/*! no static exports found */
function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=r=function(e){return n(e)}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(t)}e.exports=r},"./node_modules/@babel/runtime/helpers/wrapNativeSuper.js":/*!****************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/wrapNativeSuper.js ***!
  \****************************************************************/
/*! no static exports found */
function(e,t,n){function r(t){var n="function"==typeof Map?new Map:void 0;return e.exports=r=function(e){function t(){return s(e,arguments,o(this).constructor)}if(null===e||!a(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},r(t)}var o=n(/*! ./getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),i=n(/*! ./setPrototypeOf */"./node_modules/@babel/runtime/helpers/setPrototypeOf.js"),a=n(/*! ./isNativeFunction */"./node_modules/@babel/runtime/helpers/isNativeFunction.js"),s=n(/*! ./construct */"./node_modules/@babel/runtime/helpers/construct.js");e.exports=r},"./node_modules/@teamwork/ot-rich-text/lib/Action.js":/*!***********************************************************!*\
  !*** ./node_modules/@teamwork/ot-rich-text/lib/Action.js ***!
  \***********************************************************/
/*! no static exports found */
function(e,t,n){"use strict";var r=function(e,t){for(var n=e.length,r=t&&n>2?2:n,o=new Array(r),i=0;i<r;++i)o[i]=e[i];return o},o=function(e){return function(t,n){var r=2,o=0,i=n?n.length:0,a=new Array(r+i);for(a[0]=e,a[1]=t;o<i;)a[r++]=n[o++];return a}},i=o(1),a=o(2),s=o(3),l=o(4),u=function(e,t){var n=t?t.length:0,r=new Array(2+n);r[0]=0,r[1]=e;for(var o=2,i=0;i<n;)r[o++]=t[i++];return r},c=function(e){return[-1,e]},d=function(e,t,n){for(var r=2,o=e.length;r<o&&e[r]<t;)r+=2;if(r===o)return e[r]=t,e[r+1]=n,e;if(e[r]===t)return e[r+1]=n,e;for(;r<o;){var i=e[r],a=e[r+1];e[r++]=t,e[r++]=n,t=i,n=a}return e[r++]=t,e[r++]=n,e},f=function(e){return 2!==e.length?new Error("action.length must be ".concat(2)):null},h=function(e){return e.length<2?new Error("action.length must be at least ".concat(2)):null},p=function(e){var t=e[1];return"number"!=typeof t||t<=0||!isFinite(t)||Math.floor(t)!==t?new Error("content must be a positive integer"):null},m=function(e){var t=e[1];return"string"!=typeof t||""===t?new Error("content must be a non-empty string"):null},g=function(e){var t=e[1];return"string"!=typeof t?new Error("content must be a string"):t.length<2?new Error("content must contain a node ID and node name"):t[0]<"\ue000"||t[0]>"\uf8ff"?new Error("node ID must be a character in the Private Use Area of the Unicode Basic Multilingual Plane"):null},v=function(e,t){var n=e.length;if(n-2&1)return new Error("missing value for the last attribute");for(var r=2;r<n;r+=2){var o=e[r],i=e[r+1];if("string"!=typeof o)return new Error("attribute name must be a string");if(!("string"==typeof i||t&&null===i))return new Error("attribute value must be a string".concat(t?" or null":""));if(r>2&&e[r-2]>=o)return new Error("duplicate or not sorted attribute")}return null},b=function(e){if(!Array.isArray(e))return new Error("action must be an array");switch(e[0]){case-1:return f(e)||p(e);case 0:return h(e)||p(e)||v(e,!0);case 1:return h(e)||m(e)||v(e,!1);case 2:case 3:case 4:return h(e)||g(e)||v(e,!1);default:return new Error("unknown action type")}},y=function(e){return e[1]},w=function(e){return e[1]},x=function(e){return e[1]},C=function(e){return e[1][0]},k=function(e){return e[1].substring(1)},N=function(e,t){return e[1]=t,e},_=function(e,t){if(t){for(var n=2,r=0,o=0,i=e.length,a=t.length,s=[];n<i&&r<a;){var l=e[n],u=t[r],c=u.length,d=c>=0&&"="===u[c-1];l<u?n+=2:d&&l.substring(0,c)===u?(s[o++]=e[n++],s[o++]=e[n++]):l===u?(s[o++]=e[n++],s[o++]=e[n++],++r):++r}return s}for(var f=e.length,h=2,p=new Array(f-h),m=0;h<f;)p[m++]=e[h++],p[m++]=e[h++];return p},S=function(e,t){for(var n=2,r=e.length;n<r;n+=2)if(!(e[n]<t)){if(e[n]===t)return e[n+1];break}},T=function(e){return-1===e[0]},E=function(e){return 0===e[0]},O=function(e){return 1<=e[0]&&e[0]<=4},A=function(e){return 1===e[0]},D=function(e){return 2===e[0]},R=function(e){return 3===e[0]},M=function(e){return 4===e[0]},P=function(e){return 2},L=function(e){return e.length>2},I=function(e){switch(e[0]){case 1:return e[1].length;case 2:case 3:case 4:return 1;default:return e[1]}},j=function(e,t,n,o){return 0===t&&n===o?e:A(e)?N(r(e,!1),e[1].substr(t,n)):N(r(e,!1),n)},B=function(e,t){var n=e.length;if(n!==t.length)return null;var o=e[0];if(o!==t[0])return null;switch(o){case 1:case-1:case 0:for(var i=2;i<n;++i)if(e[i]!==t[i])return null;return N(r(e,!1),e[1]+t[1]);default:return null}},F=function(e,t){var n=e.length;if(t.length!==n)return!1;for(var r=0;r<n;++r)if(e[r]!==t[r])return!1;return!0},H=function(e,t){return e[0]===t[0]},U=function(e,t){var n=2,r=2,o=e.length;if(o-n!=t.length-r)return!1;for(;n<o;)if(e[n++]!==t[r++])return!1;return!0},z=function(e,t){for(;;){var n=e.action,o=t.action;if(null===n){if(null===o)return null;var i=I(o),a=t.offset,s=i-a;return t.next(s),j(o,a,s,i)}if(null===o){var l=I(n),u=e.offset,c=l-u;return e.next(c),j(n,u,c,l)}if(O(o)){var d=I(o),f=t.offset,h=d-f;return t.next(h),j(o,f,h,d)}if(T(n)){var p=I(n),m=e.offset,g=p-m;return e.next(g),j(n,m,g,p)}var v=I(n),b=I(o),y=e.offset,w=t.offset,x=v-y,C=b-w,k=x<C?x:C;if(e.next(k),t.next(k),E(o)){if(o.length<=2||U(n,o))return j(n,y,k,v);var N=r(n,!0);E(N)?N[1]=k:A(N)&&(N[1]=N[1].substr(y,k));for(var _=E(n),S=N.length,D=2,R=N.length,M=n.length,P=o.length;S<M&&D<P;)n[S]===o[D]?(S+=2,null!==o[D+1]||_?(N[R++]=o[D++],N[R++]=o[D++]):D+=2):n[S]<o[D]?null!==n[S+1]||_?(N[R++]=n[S++],N[R++]=n[S++]):S+=2:null!==o[D+1]||_?(N[R++]=o[D++],N[R++]=o[D++]):D+=2;for(;D<P;)null!==o[D+1]||_?(N[R++]=o[D++],N[R++]=o[D++]):D+=2;for(;S<M;)null!==n[S+1]||_?(N[R++]=n[S++],N[R++]=n[S++]):S+=2;return N}if(T(o)&&E(n))return j(o,w,k,b)}},W=function(e,t,n){for(;;){var r=e.action,o=t.action;if(null===r)return null;if(null===o){var i=I(r),a=e.offset,s=i-a;return e.next(s),j(r,a,s,i)}if(n&&O(r)){var l=I(r),c=e.offset,d=l-c;return e.next(d),j(r,c,d,l)}if(O(o)){var f=I(o)-t.offset;return t.next(f),u(f)}if(O(r)){var h=I(r),p=e.offset,m=h-p;return e.next(m),j(r,p,m,h)}var g=I(r),v=I(o),b=e.offset,y=t.offset,w=g-b,x=v-y,C=w<x?w:x;if(e.next(C),t.next(C),!T(o)){if(T(r))return j(r,b,C,g);if(n)return j(r,b,C,g);for(var k=u(C),N=2,_=2,S=2,E=r.length,A=o.length;N<E;)_>=A?(k[S++]=r[N++],k[S++]=r[N++]):r[N]===o[_]?(N+=2,_+=2):r[N]<o[_]?(k[S++]=r[N++],k[S++]=r[N++]):_+=2;return k}}},V=function(e,t,n,r,o,i){var a=r.length;switch(n){case 0:for(var s=0;a>0;){var l=e.operation[e.index],d=I(l),f=e.offset,h=d-f,p=t.operation[t.index],m=I(p),g=t.offset,v=m-g,b=a<=h&&a<=v?a:h<=a&&h<=v?h:v;if(a-=b,e.next(b),t.next(b),l[0]===p[0]&&(A(l)?l[1].substr(f,b)===p[1].substr(g,b):l[1]===p[1]))if(U(l,p))s+=b;else{if(s>0){var y=u(s);o(y),i(y),s=0}for(var w=u(b),x=u(b),C=2,k=2,N=2,_=2,S=l.length,T=p.length;C<S&&k<T;)if(l[C]===p[k])l[C+1]===p[k+1]?(C+=2,k+=2):(w[N++]=l[C++],w[N++]=l[C++],x[_++]=p[k++],x[_++]=p[k++]);else if(l[C]<p[k]){var E=l[C++],O=l[C++];w[N++]=E,w[N++]=O,x[_++]=E,x[_++]=null}else{var D=p[k++],R=p[k++];w[N++]=D,w[N++]=null,x[_++]=D,x[_++]=R}for(;k<T;){var M=p[k++],P=p[k++];w[N++]=M,w[N++]=null,x[_++]=M,x[_++]=P}for(;C<S;){var L=l[C++],B=l[C++];w[N++]=L,w[N++]=B,x[_++]=L,x[_++]=null}o(w),i(x)}else{if(s>0){var F=u(s);o(F),i(F),s=0}var H=c(b);o(j(l,f,b,d)),o(H),i(j(p,g,b,m)),i(H)}}if(s>0){var z=u(s);o(z),i(z),s=0}break;case 1:for(o(c(a));a>0;){var W=t.operation[t.index],V=I(W),q=t.offset,$=V-q,K=a<=$?a:$;a-=K,t.next(K),i(j(W,q,K,V))}break;case-1:for(i(c(a));a>0;){var G=e.operation[e.index],X=I(G),Y=e.offset,J=X-Y,Q=a<=J?a:J;a-=Q,e.next(Q),o(j(G,Y,Q,X))}}};e.exports={createInsertText:i,createInsertOpen:a,createInsertClose:s,createInsertEmbed:l,createRetain:u,createDelete:c,clone:r,setAttribute:d,validate:b,getCount:y,getText:w,getNodeId:C,getNodeName:k,getNodeIdAndName:x,getAttributes:_,getAttribute:S,isDelete:T,isRetain:E,isInsert:O,isInsertText:A,isInsertOpen:D,isInsertClose:R,isInsertEmbed:M,areEqual:F,areTypesEqual:H,areAttributesEqual:U,getAttributesIndex:P,hasAttributes:L,getLength:I,slice:j,merge:B,composeIterators:z,transformIterators:W,diffIterators:V}},"./node_modules/@teamwork/ot-rich-text/lib/Iterator.js":/*!*************************************************************!*\
  !*** ./node_modules/@teamwork/ot-rich-text/lib/Iterator.js ***!
  \*************************************************************/
/*! no static exports found */
function(e,t,n){"use strict";function r(e){this.operation=e,this.index=0,this.offset=0,this.next(0)}var o=n(/*! ./Action */"./node_modules/@teamwork/ot-rich-text/lib/Action.js"),i=o.getLength;Object.defineProperties(r.prototype,{action:{get:function(){return this.index<this.operation.length?this.operation[this.index]:null}},next:{value:function(e){for(var t=this.operation.length;this.index<t;){var n=i(this.operation[this.index]);if(this.offset+e<n){this.offset+=e;break}e-=n-this.offset,this.offset=0,this.index++}return this}}}),e.exports=r},"./node_modules/@teamwork/ot-rich-text/lib/Operation.js":/*!**************************************************************!*\
  !*** ./node_modules/@teamwork/ot-rich-text/lib/Operation.js ***!
  \**************************************************************/
/*! no static exports found */
function(e,t,n){"use strict";function r(e){return Array.isArray(e)?e:[]}function o(e){return 0===e.length}function i(e,t){for(var n=new x(e),r=new x(t),o=[],i=L(n,r);null!==i;)d(o,i),i=L(n,r);return f(o)}function a(e,t){for(var n=i(e,t),r=0,o=e.length,a=0,s=n.length;r<o&&S(e[r]);)++r;for(;a<s&&S(n[a]);)++a;if(o-r!=s-a)return null;for(;r<o;)if(!M(e[r++],n[a++]))return null;return n}function s(e,t){for(var n=new x(e),r=new x(t),o=[],i=L(n,r);null!==i&&N(i);)d(o,i),i=L(n,r);return o}function l(e,t){var n=!o(t)&&S(t[0])?E(t[0]):0,r=s(e,t);return[r,m(e,r,{oldRange:{index:n,length:0},newRange:{index:n,length:0}})[0]]}function u(e,t,n){for(var r="left"===n,o=new x(e),i=new x(t),a=[],s=I(o,i,r);null!==s;)d(a,s),s=I(o,i,r);return f(a)}function c(e,t,n){e|=0,n=!!n;for(var r=new x(t),o=0,i=r.action;null!==i&&o<=e;){var a=E(i);T(i)?a<e-o?e-=a:e=o:N(i)&&(o<e||n)?(e+=a,o+=a):o+=a,r.next(a),i=r.action}return e}function d(e,t){if(0===E(t))return e;var n=e.length;if(0===n)e[n]=t;else{var r=n-1,o=e[r];if(T(o)&&N(t))if(1===n)e[0]=t,e[n]=o;else{var i=r-1,a=e[i],s=P(a,t);null!==s?e[i]=s:(e[r]=t,e[n]=o)}else{var l=P(o,t);null!==l?e[r]=l:e[n]=t}}return e}function f(e){var t=e.length;if(t>0){var n=t-1,r=e[n];S(r)&&!O(r)&&(e.length=n)}return e}function h(e){if(!Array.isArray(e))return new Error("operation must be an array");for(var t=0,n=e.length;t<n;++t){var r=B(e[t]);if(null!==r)return new Error("Invalid action at index ".concat(t,": ").concat(r.message))}return null}function p(e){var t=h(e);if(null!==t)throw t;return e}function m(e,t,n){var r=null,o=null;"number"==typeof n?(r={index:0|n,length:0},n={oldRange:r,newRange:o}):n&&(r=n.oldRange||null)?(r={index:0|r.index,length:0|r.length},(o=n.newRange||null)&&(o={index:0|o.index,length:0|o.length}),n={oldRange:r,newRange:o}):n=null;var i=[],a=[];if(e===t)return[i,a];for(var s=0,l=0,u=e.length-1,c=t.length-1,h=0,p="",m="";s<=u&&l<=c;){var g=e[s];if(!N(g))throw new Error('not an "insert" operation');if(!R(g,t[l]))break;h+=E(g),++s,++l}for(;s<=u&&l<=c;){var v=e[u];if(!N(v))throw new Error('not an "insert" operation');if(!R(v,t[c]))break;--u,--c}var b=new x(e);b.offset=0,b.index=s,b.next(0);var y=new x(t);for(y.offset=0,y.index=l,y.next(0);s<=u;){var C=e[s++];if(!N(C))throw new Error('not an "insert" action');p+=_(C)?A(C):D(C)}for(;l<=c;){var S=t[l++];if(!N(S))throw new Error('not an "insert" action');m+=_(S)?A(S):D(S)}r&&(h>0&&(r.index-=h),r.index<0&&(r.length+=r.index,r.index=0),r.length<0&&(r.length=0),r.index>p.length&&(r.index=p.length),r.index+r.length>p.length&&(r.length=p.length-r.index)),o&&(h>0&&(o.index-=h),o.index<0&&(o.length+=o.index,o.index=0),o.length<0&&(o.length=0),o.index>m.length&&(o.index=m.length),o.index+o.length>m.length&&(o.length=m.length-o.index));var T=w(p,m,n),O=function(e){return d(i,e)},M=function(e){return d(a,e)};if(h>0){var P=k(h);O(P),M(P)}for(var L=0,I=T.length;L<I;++L){var B=T[L];j(b,y,B[0],B[1],O,M)}return[f(i),f(a)]}function g(e){return y(e)?e:{u:"",c:0,s:[]}}function v(e,t,n){for(var r=e.u,o=e.c,i=e.s,a=new Array(i.length),s=0,l=i.length;s<l;++s){var u=i[s],d=c(u[0],t,n),f=u[0]===u[1]?d:c(u[1],t,n);a[s]=[d,f]}return{u:r,c:o,s:a}}function b(e,t){if(e===t)return!0;if(null==e||null==t||e.u!==t.u||e.c!==t.c||e.s.length!==t.s.length)return!1;for(var n=0,r=e.s.length;n<r;++n)if(e.s[n][0]!==t.s[n][0]||e.s[n][1]!==t.s[n][1])return!1;return!0}function y(e){if(null==e||"string"!=typeof e.u||"number"!=typeof e.c||!isFinite(e.c)||Math.floor(e.c)!==e.c||!Array.isArray(e.s))return!1;for(var t=e.s,n=0,r=t.length;n<r;++n){var o=t[n];if(!Array.isArray(o)||2!==o.length||o[0]!==(0|o[0])||o[1]!==(0|o[1]))return!1}return!0}var w=n(/*! fast-diff */"./node_modules/fast-diff/diff.js"),x=n(/*! ./Iterator */"./node_modules/@teamwork/ot-rich-text/lib/Iterator.js"),C=n(/*! ./Action */"./node_modules/@teamwork/ot-rich-text/lib/Action.js"),k=C.createRetain,N=C.isInsert,_=C.isInsertText,S=C.isRetain,T=C.isDelete,E=C.getLength,O=C.hasAttributes,A=C.getText,D=C.getNodeId,R=C.areEqual,M=C.areTypesEqual,P=C.merge,L=C.composeIterators,I=C.transformIterators,j=C.diffIterators,B=C.validate;e.exports={create:r,isNoop:o,compose:i,composeSimilar:a,apply:s,applyAndInvert:l,transform:u,transformCursor:c,append:d,chop:f,validate:h,normalize:p,diffX:m,createPresence:g,transformPresence:v,comparePresence:b,isValidPresence:y}},"./node_modules/@teamwork/ot-rich-text/lib/index.js":/*!**********************************************************!*\
  !*** ./node_modules/@teamwork/ot-rich-text/lib/index.js ***!
  \**********************************************************/
/*! no static exports found */
function(e,t,n){"use strict";e.exports={type:n(/*! ./type */"./node_modules/@teamwork/ot-rich-text/lib/type.js"),Iterator:n(/*! ./Iterator */"./node_modules/@teamwork/ot-rich-text/lib/Iterator.js"),Action:n(/*! ./Action */"./node_modules/@teamwork/ot-rich-text/lib/Action.js"),Operation:n(/*! ./Operation */"./node_modules/@teamwork/ot-rich-text/lib/Operation.js")}},"./node_modules/@teamwork/ot-rich-text/lib/type.js":/*!*********************************************************!*\
  !*** ./node_modules/@teamwork/ot-rich-text/lib/type.js ***!
  \*********************************************************/
/*! no static exports found */
function(e,t,n){"use strict";var r=n(/*! ./Operation */"./node_modules/@teamwork/ot-rich-text/lib/Operation.js"),o=r.create,i=r.isNoop,a=r.compose,s=r.composeSimilar,l=r.apply,u=r.applyAndInvert,c=r.transform,d=r.transformCursor,f=r.normalize,h=r.diffX,p=r.createPresence,m=r.transformPresence,g=r.comparePresence;e.exports={name:"ot-rich-text",uri:"https://github.com/Teamwork/ot-rich-text",create:o,isNoop:i,compose:a,composeSimilar:s,apply:l,applyAndInvert:u,transform:c,transformCursor:d,normalize:f,diffX:h,createPresence:p,transformPresence:m,comparePresence:g}},"./node_modules/@teamwork/sharedb/lib/client/connection.js":/*!*****************************************************************!*\
  !*** ./node_modules/@teamwork/sharedb/lib/client/connection.js ***!
  \*****************************************************************/
/*! no static exports found */
function(e,t,n){(function(t){function r(e){return 0===e.readyState||1===e.readyState?"connecting":"disconnected"}function o(e){f.EventEmitter.call(this),this.collections={},this.undoManagers=[],this.nextQueryId=1,this.nextSnapshotRequestId=1,this.queries={},this._snapshotRequests={},this.seq=1,this.id=null,this.agent=null,this.debug=!1,this.state=r(e),this.bindToSocket(e)}function i(e){return e.hasPending()}function a(e){return e.hasWritePending()}var s=n(/*! ./doc */"./node_modules/@teamwork/sharedb/lib/client/doc.js"),l=n(/*! ./query */"./node_modules/@teamwork/sharedb/lib/client/query.js"),u=n(/*! ./undoManager */"./node_modules/@teamwork/sharedb/lib/client/undoManager.js"),c=n(/*! ./snapshot-request/snapshot-version-request */"./node_modules/@teamwork/sharedb/lib/client/snapshot-request/snapshot-version-request.js"),d=n(/*! ./snapshot-request/snapshot-timestamp-request */"./node_modules/@teamwork/sharedb/lib/client/snapshot-request/snapshot-timestamp-request.js"),f=n(/*! ../emitter */"./node_modules/@teamwork/sharedb/lib/emitter.js"),h=n(/*! ../error */"./node_modules/@teamwork/sharedb/lib/error.js"),p=n(/*! ../types */"./node_modules/@teamwork/sharedb/lib/types.js"),m=n(/*! ../util */"./node_modules/@teamwork/sharedb/lib/util.js"),g=n(/*! ../logger */"./node_modules/@teamwork/sharedb/lib/logger/index.js");e.exports=o,f.mixin(o),o.prototype.bindToSocket=function(e){this.socket&&(this.socket.close(),this.socket.onmessage=null,this.socket.onopen=null,this.socket.onerror=null,this.socket.onclose=null),this.socket=e;var n=r(e);this._setState(n),this.canSend=!1;var o=this;e.onmessage=function(e){try{var n="string"==typeof e.data?JSON.parse(e.data):e.data}catch(t){return void g.warn("Failed to parse message",e)}o.debug&&g.info("RECV",JSON.stringify(n));var r={data:n};if(o.emit("receive",r),r.data)try{o.handleMessage(r.data)}catch(e){t.nextTick(function(){o.emit("error",e)})}},e.onopen=function(){o._setState("connecting")},e.onerror=function(e){o.emit("connection error",e)},e.onclose=function(e){"closed"===e||"Closed"===e?o._setState("closed",e):"stopped"===e||"Stopped by server"===e?o._setState("stopped",e):o._setState("disconnected",e)}},o.prototype.handleMessage=function(e){var t=null;switch(e.error&&(t=new Error(e.error.message),t.code=e.error.code,t.data=e,delete e.error),e.a){case"init":return 1!==e.protocol?(t=new h(4019,"Invalid protocol version"),this.emit("error",t)):p.map[e.type]!==p.defaultType?(t=new h(4020,"Invalid default type"),this.emit("error",t)):"string"!=typeof e.id?(t=new h(4021,"Invalid client id"),this.emit("error",t)):(this.id=e.id,void this._setState("connected"));case"qf":var n=this.queries[e.id];return void(n&&n._handleFetch(t,e.data,e.extra));case"qs":var n=this.queries[e.id];return void(n&&n._handleSubscribe(t,e.data,e.extra));case"qu":return;case"q":var n=this.queries[e.id];if(!n)return;return t?n._handleError(t):(e.diff&&n._handleDiff(e.diff),void(e.hasOwnProperty("extra")&&n._handleExtra(e.extra)));case"bf":return this._handleBulkMessage(e,"_handleFetch");case"bs":return this._handleBulkMessage(e,"_handleSubscribe");case"bu":return this._handleBulkMessage(e,"_handleUnsubscribe");case"nf":case"nt":return this._handleSnapshotFetch(t,e);case"f":var r=this.getExisting(e.c,e.d);return void(r&&r._handleFetch(t,e.data));case"s":var r=this.getExisting(e.c,e.d);return void(r&&r._handleSubscribe(t,e.data));case"u":var r=this.getExisting(e.c,e.d);return void(r&&r._handleUnsubscribe(t));case"op":var r=this.getExisting(e.c,e.d);return void(r&&r._handleOp(t,e));case"p":var r=this.getExisting(e.c,e.d);return void(r&&r._handlePresence(t,e));default:g.warn("Ignoring unrecognized message",e)}},o.prototype._handleBulkMessage=function(e,t){if(e.data)for(var n in e.data){var r=this.getExisting(e.c,n);r&&r[t](e.error,e.data[n])}else if(Array.isArray(e.b))for(var o=0;o<e.b.length;o++){var n=e.b[o],r=this.getExisting(e.c,n);r&&r[t](e.error)}else if(e.b)for(var n in e.b){var r=this.getExisting(e.c,n);r&&r[t](e.error)}else g.error("Invalid bulk message",e)},o.prototype._reset=function(){this.seq=1,this.id=null,this.agent=null},o.prototype._setState=function(e,t){if(this.state!==e){if("connecting"===e&&"disconnected"!==this.state&&"stopped"!==this.state&&"closed"!==this.state||"connected"===e&&"connecting"!==this.state){var n=new h(5007,"Cannot transition directly from "+this.state+" to "+e);return this.emit("error",n)}this.state=e,this.canSend="connected"===e,"disconnected"!==e&&"stopped"!==e&&"closed"!==e||this._reset(),this.startBulk();for(var r in this.queries){this.queries[r]._onConnectionStateChanged()}for(var o in this.collections){var i=this.collections[o];for(var r in i)i[r]._onConnectionStateChanged()}for(var r in this._snapshotRequests){this._snapshotRequests[r]._onConnectionStateChanged()}this.endBulk(),this.emit(e,t),this.emit("state",e,t)}},o.prototype.startBulk=function(){this.bulk||(this.bulk={})},o.prototype.endBulk=function(){if(this.bulk)for(var e in this.bulk){var t=this.bulk[e];this._sendBulk("f",e,t.f),this._sendBulk("s",e,t.s),this._sendBulk("u",e,t.u)}this.bulk=null},o.prototype._sendBulk=function(e,t,n){if(n){var r,o=[],i={},a=0;for(var s in n){var l=n[s];null==l?o.push(s):(i[s]=l,r=s,a++)}if(1===o.length){var s=o[0];this.send({a:e,c:t,d:s})}else o.length&&this.send({a:"b"+e,c:t,b:o});if(1===a){var u=i[r];this.send({a:e,c:t,d:r,v:u})}else a&&this.send({a:"b"+e,c:t,b:i})}},o.prototype._sendAction=function(e,t,n){if(this._addDoc(t),this.bulk){var r=this.bulk[t.collection]||(this.bulk[t.collection]={}),o=r[e]||(r[e]={}),i=o.hasOwnProperty(t.id);return o[t.id]=n,i}var a={a:e,c:t.collection,d:t.id,v:n};this.send(a)},o.prototype.sendFetch=function(e){return this._sendAction("f",e,e.version)},o.prototype.sendSubscribe=function(e){return this._sendAction("s",e,e.version)},o.prototype.sendUnsubscribe=function(e){return this._sendAction("u",e)},o.prototype.sendOp=function(e,t){this._addDoc(e);var n={a:"op",c:e.collection,d:e.id,v:e.version,src:t.src,seq:t.seq};t.op&&(n.op=t.op),t.create&&(n.create=t.create),t.del&&(n.del=t.del),this.send(n)},o.prototype.sendPresence=function(e,t,n){this._addDoc(e);var r={a:"p",c:e.collection,d:e.id,p:t,v:e.version||0,seq:this.seq++};n&&(r.r=!0),this.send(r)},o.prototype.send=function(e){this.debug&&g.info("SEND",JSON.stringify(e)),this.emit("send",e),this.socket.send(JSON.stringify(e))},o.prototype.close=function(){this.socket.close()},o.prototype.getExisting=function(e,t){if(this.collections[e])return this.collections[e][t]},o.prototype.get=function(e,t){var n=this.collections[e]||(this.collections[e]={}),r=n[t];return r||(r=n[t]=new s(this,e,t),this.emit("doc",r)),r},o.prototype._destroyDoc=function(e){var t=this.collections[e.collection];t&&(delete t[e.id],m.hasKeys(t)||delete this.collections[e.collection])},o.prototype._addDoc=function(e){var t=this.collections[e.collection];t||(t=this.collections[e.collection]={}),t[e.id]!==e&&(t[e.id]=e)},o.prototype._createQuery=function(e,t,n,r,o){var i=this.nextQueryId++,a=new l(e,this,i,t,n,r,o);return this.queries[i]=a,a.send(),a},o.prototype._destroyQuery=function(e){delete this.queries[e.id]},o.prototype.createFetchQuery=function(e,t,n,r){return this._createQuery("qf",e,t,n,r)},o.prototype.createSubscribeQuery=function(e,t,n,r){return this._createQuery("qs",e,t,n,r)},o.prototype.hasPending=function(){return!!(this._firstDoc(i)||this._firstQuery(i)||this._firstSnapshotRequest())},o.prototype.hasWritePending=function(){return!!this._firstDoc(a)},o.prototype.whenNothingPending=function(e){var n=this._firstDoc(i);if(n)return void n.once("nothing pending",this._nothingPendingRetry(e));var r=this._firstQuery(i);if(r)return void r.once("ready",this._nothingPendingRetry(e));var o=this._firstSnapshotRequest();if(o)return void o.once("ready",this._nothingPendingRetry(e));t.nextTick(e)},o.prototype._nothingPendingRetry=function(e){var n=this;return function(){t.nextTick(function(){n.whenNothingPending(e)})}},o.prototype._firstDoc=function(e){for(var t in this.collections){var n=this.collections[t];for(var r in n){var o=n[r];if(e(o))return o}}},o.prototype._firstQuery=function(e){for(var t in this.queries){var n=this.queries[t];if(e(n))return n}},o.prototype.createUndoManager=function(e){var t=new u(this,e);return this.undoManagers.push(t),t},o.prototype.removeUndoManager=function(e){var t=this.undoManagers.indexOf(e);t>=0&&this.undoManagers.splice(t,1)},o.prototype.onDocLoad=function(e){for(var t=0;t<this.undoManagers.length;t++)this.undoManagers[t].onDocLoad(e)},o.prototype.onDocDestroy=function(e){for(var t=0;t<this.undoManagers.length;t++)this.undoManagers[t].onDocDestroy(e)},o.prototype.onDocCreate=function(e){for(var t=0;t<this.undoManagers.length;t++)this.undoManagers[t].onDocCreate(e)},o.prototype.onDocDelete=function(e){for(var t=0;t<this.undoManagers.length;t++)this.undoManagers[t].onDocDelete(e)},o.prototype.onDocOp=function(e,t,n,r,o,i){for(var a=0;a<this.undoManagers.length;a++)this.undoManagers[a].onDocOp(e,t,n,r,o,i)},o.prototype._firstSnapshotRequest=function(){for(var e in this._snapshotRequests)return this._snapshotRequests[e]},o.prototype.fetchSnapshot=function(e,t,n,r){"function"==typeof n&&(r=n,n=null);var o=this.nextSnapshotRequestId++,i=new c(this,o,e,t,n,r);this._snapshotRequests[i.requestId]=i,i.send()},o.prototype.fetchSnapshotByTimestamp=function(e,t,n,r){"function"==typeof n&&(r=n,n=null);var o=this.nextSnapshotRequestId++,i=new d(this,o,e,t,n,r);this._snapshotRequests[i.requestId]=i,i.send()},o.prototype._handleSnapshotFetch=function(e,t){var n=this._snapshotRequests[t.id];n&&(delete this._snapshotRequests[t.id],n._handleResponse(e,t))}}).call(this,n(/*! ./../../../../process/browser.js */"./node_modules/process/browser.js"))},"./node_modules/@teamwork/sharedb/lib/client/doc.js":/*!**********************************************************!*\
  !*** ./node_modules/@teamwork/sharedb/lib/client/doc.js ***!
  \**********************************************************/
/*! no static exports found */
function(e,t,n){(function(t){function r(e,t,n){l.EventEmitter.call(this),this.connection=e,this.collection=t,this.id=n,this.version=null,this.type=null,this.data=void 0,this.presence=Object.create(null),this.receivedPresence=Object.create(null),this.receivedPresenceTimeout=6e4,this.requestReplyPresence=!0,this.cachedOps=[],this.cachedOpsTimeout=6e4,this.inflightPresenceSeq=0,this.inflightFetch=[],this.inflightSubscribe=[],this.inflightUnsubscribe=[],this.inflightPresence=null,this.pendingFetch=[],this.pendingPresence=null,this.subscribed=!1,this.wantSubscribe=!1,this.inflightOp=null,this.pendingOps=[],this.type=null,this.applyStack=null,this.preventCompose=!1}function o(e,t,n){if(t){var r=e.pop();e.push(function(e){r&&r(e),n&&n(e)})}else e.push(n)}function i(e){delete e.op,delete e.create,delete e.del}function a(e,t){if(e.del)return i(t);if(t.del)return new c(4017,"Document was deleted");if(t.create)return new c(4018,"Document alredy created");if(t.op){if(e.create)return new c(4018,"Document already created");if(e.type.transformX){var n=e.type.transformX(e.op,t.op);e.op=n[0],t.op=n[1]}else{var r=e.type.transform(e.op,t.op,"left"),o=e.type.transform(t.op,e.op,"right");e.op=r,t.op=o}}}function s(e,t){for(var n=!1,r=0;r<e.length;r++){var o=e[r];o&&(o(t),n=!0)}return n}var l=n(/*! ../emitter */"./node_modules/@teamwork/sharedb/lib/emitter.js"),u=n(/*! ../logger */"./node_modules/@teamwork/sharedb/lib/logger/index.js"),c=n(/*! ../error */"./node_modules/@teamwork/sharedb/lib/error.js"),d=n(/*! ../types */"./node_modules/@teamwork/sharedb/lib/types.js");e.exports=r,l.mixin(r),r.prototype.destroy=function(e){var t=this;t.whenNothingPending(function(){t.wantSubscribe?t.unsubscribe(function(n){if(n)return e?e(n):t.emit("error",n);t.receivedPresence=Object.create(null),t.cachedOps.length=0,t.connection._destroyDoc(t),t.connection.onDocDestroy(t),e&&e()}):(t.receivedPresence=Object.create(null),t.cachedOps.length=0,t.connection._destroyDoc(t),t.connection.onDocDestroy(t),e&&e())})},r.prototype._setType=function(e){if("string"==typeof e&&(e=d.map[e]),e)this.type=e;else{if(null!==e){var t=new c(4008,"Missing type "+e);return this.emit("error",t)}this.type=e,this.data=void 0}},r.prototype.ingestSnapshot=function(e,t){if(!e)return t&&t();if("number"!=typeof e.v){var n=new c(5008,"Missing version in ingested snapshot. "+this.collection+"."+this.id);return t?t(n):this.emit("error",n)}if(this.type||this.hasWritePending()){if(null==this.version){if(this.hasWritePending())return t&&this.once("no write pending",t);var n=new c(5009,"Cannot ingest snapshot in doc with null version. "+this.collection+"."+this.id);return t?t(n):this.emit("error",n)}return e.v>this.version?this.fetch(t):t&&t()}if(this.version>e.v)return t&&t();this.version=e.v,this.cachedOps.length=0;var r=void 0===e.type?d.defaultType:e.type;this._setType(r),this.data=this.type&&this.type.deserialize?this.type.deserialize(e.data):e.data,this.connection.onDocLoad(this),this.emit("load"),this._processAllReceivedPresence(),t&&t()},r.prototype.whenNothingPending=function(e){var n=this;t.nextTick(function(){if(n.hasPending())return void n.once("nothing pending",e);e()})},r.prototype.hasPending=function(){return!!(this.inflightOp||this.pendingOps.length||this.inflightFetch.length||this.inflightSubscribe.length||this.inflightUnsubscribe.length||this.pendingFetch.length||this.inflightPresence||this.pendingPresence)},r.prototype.hasWritePending=function(){return!(!this.inflightOp&&!this.pendingOps.length)},r.prototype._emitNothingPending=function(){this.hasWritePending()||(this.emit("no write pending"),this.hasPending()||this.emit("nothing pending"))},r.prototype._emitResponseError=function(e,t){if(t)return t(e),void this._emitNothingPending();this._emitNothingPending(),this.emit("error",e)},r.prototype._handleFetch=function(e,t){var n=this.inflightFetch.shift();if(e)return this._emitResponseError(e,n);this.ingestSnapshot(t,n),this._emitNothingPending()},r.prototype._handleSubscribe=function(e,t){var n=this.inflightSubscribe.shift();if(e)return this._emitResponseError(e,n);this.wantSubscribe&&(this.subscribed=!0),this.ingestSnapshot(t,n),this._emitNothingPending(),this.flush()},r.prototype._handleUnsubscribe=function(e){var t=this.inflightUnsubscribe.shift();if(e)return this._emitResponseError(e,t);t&&t(),this._emitNothingPending()},r.prototype._handleOp=function(e,t){if(e)return this.inflightOp?(4002===e.code&&(e=null),this._rollback(e)):this.emit("error",e);if(this.inflightOp&&t.src===this.inflightOp.src&&t.seq===this.inflightOp.seq)return void this._opAcknowledged(t);if(null==this.version||t.v>this.version)return void this.fetch();if(!(t.v<this.version)){var n={src:t.src,time:Date.now(),create:!!t.create,op:t.op,del:!!t.del};if(this.inflightOp){var r=a(this.inflightOp,t);if(r)return this._hardRollback(r)}for(var o=0;o<this.pendingOps.length;o++){var r=a(this.pendingOps[o],t);if(r)return this._hardRollback(r)}this.version++;try{this._cacheOp(n),this._otApply(t),this._processAllReceivedPresence()}catch(e){return this._hardRollback(e)}}},r.prototype._onConnectionStateChanged=function(){if(this.connection.canSend)this.flush(),this._resubscribe();else if(this.inflightOp&&(this.pendingOps.unshift(this.inflightOp),this.inflightOp=null),this.subscribed=!1,(this.inflightFetch.length||this.inflightSubscribe.length)&&(this.pendingFetch=this.pendingFetch.concat(this.inflightFetch,this.inflightSubscribe),this.inflightFetch.length=0,this.inflightSubscribe.length=0),this.inflightUnsubscribe.length){var e=this.inflightUnsubscribe;this.inflightUnsubscribe=[],this._pausePresence(),s(e)}else this._pausePresence()},r.prototype._resubscribe=function(){var e=this,t=this.pendingFetch;if(this.pendingFetch=[],this.wantSubscribe)return t.length?void this.subscribe(function(n){var r=s(t,n);n&&!r&&e.emit("error",n)}):void this.subscribe();t.length&&this.fetch(function(n){var r=s(t,n);n&&!r&&e.emit("error",n)})},r.prototype.fetch=function(e){if(this.connection.canSend){var t=this.connection.sendFetch(this);return void o(this.inflightFetch,t,e)}this.pendingFetch.push(e)},r.prototype.subscribe=function(e){if(this.wantSubscribe=!0,this.connection.canSend){var t=this.connection.sendSubscribe(this);return void o(this.inflightSubscribe,t,e)}this.pendingFetch.push(e)},r.prototype.unsubscribe=function(e){if(this.wantSubscribe=!1,this.subscribed=!1,this.connection.canSend){var n=this.connection.sendUnsubscribe(this);return o(this.inflightUnsubscribe,n,e),void this._pausePresence()}this._pausePresence(),e&&t.nextTick(e)},r.prototype.flush=function(){this.paused||(this.connection.canSend&&!this.inflightOp&&this.pendingOps.length&&this._sendOp(),this.subscribed&&!this.inflightPresence&&this.pendingPresence&&!this.hasWritePending()&&(this.inflightPresence=this.pendingPresence,this.inflightPresenceSeq=this.connection.seq,this.pendingPresence=null,this.connection.sendPresence(this,this.presence[""],this.requestReplyPresence),this.requestReplyPresence=!1))},r.prototype._otApply=function(e,t){var n=t&&t.source||!1;if(e.op){if(!this.type)throw new c(4015,"Cannot apply op to uncreated document. "+this.collection+"."+this.id);var r=t&&t.undoOp||null,o=t&&t.undoable||!1,i=t&&t.fixUp||!1;if(!n&&this.type===d.defaultType&&e.op.length>1){this.applyStack||(this.applyStack=[]);for(var s=this.applyStack.length,l=0;l<e.op.length;l++){for(var u=e.op[l],f={op:[u]},h=s;h<this.applyStack.length;h++){var p=a(this.applyStack[h],f);if(p)return this._hardRollback(p)}this.emit("before op",f.op,n),this._applyOp(f,r,n,o,i),this._transformAllPresence(f),this.emit("op",f.op,n)}return void this._popApplyStack(s)}return this.emit("before op",e.op,n),this._applyOp(e,r,n,o,i),this._transformAllPresence(e),void this.emit("op",e.op,n)}if(e.create)return this._setType(e.create.type),this.data=this.type.deserialize?this.type.createDeserialized?this.type.createDeserialized(e.create.data):this.type.deserialize(this.type.create(e.create.data)):this.type.create(e.create.data),this._transformAllPresence(e),this.connection.onDocCreate(this),void this.emit("create",n);if(e.del){var m=this.data;return this._setType(null),this._transformAllPresence(e),this.connection.onDocDelete(this),void this.emit("del",m,n)}},r.prototype._applyOp=function(e,t,n,r,o){if(null==t&&(r||o||e.needsUndoOp))if(this.type.applyAndInvert){var i=this.type.applyAndInvert(this.data,e.op);this.data=i[0],t={op:i[1]}}else this.data=this.type.apply(this.data,e.op),t={op:this.type.invert(e.op)};else this.data=this.type.apply(this.data,e.op);this.connection.onDocOp(this,e,t,n,r,o)},r.prototype._sendOp=function(){var e=this.connection.id;if(e){this.inflightOp||(this.inflightOp=this.pendingOps.shift());var t=this.inflightOp;if(!t){var n=new c(5010,"No op to send on call to _sendOp");return this.emit("error",n)}t.sentAt=Date.now(),t.retries=null==t.retries?0:t.retries+1,null==t.seq&&(t.seq=this.connection.seq++),this.connection.sendOp(this,t),null==t.src&&(t.src=e)}},r.prototype._submit=function(e,n,r){if(n||(n={}),n.source||(n.source=!0),e.op){if(!this.type){var o=new c(4015,"Cannot submit op. Document has not been created. "+this.collection+"."+this.id);return r?r(o):this.emit("error",o)}if((n.undoable||n.fixUp||e.needsUndoOp)&&!this.type.invert&&!this.type.applyAndInvert){var o=new c(4028,"Cannot submit op. OT type does not support invert not applyAndInvert. "+this.collection+"."+this.id);return r?r(o):this.emit("error",o)}if(this.type.normalize&&(e.op=this.type.normalize(e.op)),n.skipNoop&&this.type.isNoop&&this.type.isNoop(e.op))return void(r&&t.nextTick(r))}try{this._pushOp(e,r),this._otApply(e,n)}catch(e){return this._hardRollback(e)}var i=this;t.nextTick(function(){i.flush()})},r.prototype._pushOp=function(e,t){if(this.applyStack)this.applyStack.push(e);else{var n=this._tryCompose(e);if(n)return void n.callbacks.push(t)}e.type=this.type,e.callbacks=[t],this.pendingOps.push(e)},r.prototype._popApplyStack=function(e){if(e>0)return void(this.applyStack.length=e);var t=this.applyStack[0];if(this.applyStack=null,t){var n=this.pendingOps.indexOf(t);if(-1!==n)for(var r=this.pendingOps.splice(n),n=0;n<r.length;n++){var t=r[n],o=this._tryCompose(t);o?o.callbacks=o.callbacks.concat(t.callbacks):this.pendingOps.push(t)}}},r.prototype._tryCompose=function(e){if(!this.preventCompose){var t=this.pendingOps[this.pendingOps.length-1];if(t&&!t.sentAt)return t.op&&e.op&&this.type.compose?(t.op=this.type.compose(t.op,e.op),t):void 0}},r.prototype.submitOp=function(e,t,n){"function"==typeof t&&(n=t,t=null);var r={op:e},o={source:t&&t.source,skipNoop:t&&t.skipNoop,undoable:t&&t.undoable,fixUp:t&&t.fixUp};this._submit(r,o,n)},r.prototype.submitSnapshot=function(e,t,n){if("function"==typeof t&&(n=t,t=null),!this.type){var r=new c(4015,"Cannot submit snapshot. Document has not been created. "+this.collection+"."+this.id);return n?n(r):this.emit("error",r)}if(!this.type.diff&&!this.type.diffX){var r=new c(4027,"Cannot submit snapshot. Document type does not support diff nor diffX. "+this.collection+"."+this.id);return n?n(r):this.emit("error",r)}var o,i,a=!(!t||!t.undoable),s=t&&t.fixUp,l=t&&t.diffHint,u=a||s;if(u&&this.type.diffX||!this.type.diff){var d=this.type.diffX(this.data,e,l);i={op:d[0]},o={op:d[1]}}else i=null,o={op:this.type.diff(this.data,e,l)};var f={source:t&&t.source,skipNoop:t&&t.skipNoop,undoable:a,undoOp:i,fixUp:s};this._submit(o,f,n)},r.prototype.create=function(e,t,n,r){if("function"==typeof t?(r=t,n=null,t=null):"function"==typeof n&&(r=n,n=null),t||(t=d.defaultType.uri),this.type){var o=new c(4016,"Document already exists");return r?r(o):this.emit("error",o)}var i={create:{type:t,data:e}},a=n&&n.source;this._submit(i,{source:a},r)},r.prototype.del=function(e,t){if("function"==typeof e&&(t=e,e=null),!this.type){var n=new c(4015,"Document does not exist");return t?t(n):this.emit("error",n)}var r={del:!0},o=e&&e.source;this._submit(r,{source:o},t)},r.prototype.pause=function(){this.paused=!0},r.prototype.resume=function(){this.paused=!1,this.flush()},r.prototype._opAcknowledged=function(e){if(this.inflightOp.create)this.version=e.v,this.cachedOps.length=0;else if(e.v!==this.version)return u.warn("Invalid version from server. Expected: "+this.version+" Received: "+e.v,e),this.fetch();this.version++,this._cacheOp({src:this.inflightOp.src,time:Date.now(),create:!!this.inflightOp.create,op:this.inflightOp.op,del:!!this.inflightOp.del}),this._clearInflightOp(),this._processAllReceivedPresence()},r.prototype._rollback=function(e){var t=this.inflightOp;if(t.op&&t.type.invert){t.op=t.type.invert(t.op);for(var n=0;n<this.pendingOps.length;n++){var r=a(this.pendingOps[n],t);if(r)return this._hardRollback(r)}try{this._otApply(t)}catch(e){return this._hardRollback(e)}return void this._clearInflightOp(e)}this._hardRollback(e)},r.prototype._hardRollback=function(e){var t=[];this.inflightPresence&&(t.push.apply(t,this.inflightPresence),this.inflightPresence=null,this.inflightPresenceSeq=0),this.pendingPresence&&(t.push.apply(t,this.pendingPresence),this.pendingPresence=null),this.inflightOp&&t.push.apply(t,this.inflightOp.callbacks);for(var n=0;n<this.pendingOps.length;n++)t.push.apply(t,this.pendingOps[n].callbacks);this._setType(null),this.version=null,this.inflightOp=null,this.pendingOps=[],this.cachedOps.length=0,this.receivedPresence=Object.create(null),this.requestReplyPresence=!0;for(var r=Object.keys(this.presence),o=[],n=0;n<r.length;n++){var i=r[n];this._setPresence(i,null)&&o.push(i)}this._emitPresence(o,!1);var a=this;this.fetch(function(){var n=s(t,e);if(e&&!n)return a.emit("error",e)})},r.prototype._clearInflightOp=function(e){var t=this.inflightOp&&this.inflightOp.callbacks;this.inflightOp=null;var n=t&&s(t,e);if(this.flush(),this._emitNothingPending(),e&&!n)return this.emit("error",e)},r.prototype.submitPresence=function(e,n){if(null!=e){if(!this.type){var r=this;return t.nextTick(function(){var e=new c(4015,"Cannot submit presence. Document has not been created. "+r.collection+"."+r.id);if(n)return n(e);r.emit("error",e)})}if(!this.type.createPresence||!this.type.transformPresence){var r=this;return t.nextTick(function(){var e=new c(4029,"Cannot submit presence. Document's type does not support presence. "+r.collection+"."+r.id);if(n)return n(e);r.emit("error",e)})}e=this.type.createPresence(e)}this._setPresence("",e,!0)||this.pendingPresence||this.inflightPresence?(this.pendingPresence||(this.pendingPresence=[]),n&&this.pendingPresence.push(n)):n&&t.nextTick(n);var r=this;t.nextTick(function(){r.flush()})},r.prototype._handlePresence=function(e,t){if(this.subscribed){var n=t.src;if(n){if(e)return this.emit("error",e);if(t.r&&!this.pendingPresence&&(this.pendingPresence=[],this.flush()),!this.receivedPresence[n]||!(this.receivedPresence[n].seq>t.seq||this.receivedPresence[n].seq===t.seq&&null!=t.v))return this.receivedPresence[n]=t,null==t.v?(t.processedAt=Date.now(),this._setPresence(n,null,!0)):null==this.version||this.version<t.v?this.fetch():void this._processReceivedPresence(n,!0)}else if(this.inflightPresenceSeq===t.seq){var r=this.inflightPresence;this.inflightPresence=null,this.inflightPresenceSeq=0;var o=r&&s(r,e);e&&!o&&this.emit("error",e),this.flush(),this._emitNothingPending()}}},r.prototype._processReceivedPresence=function(e,t){if(!e)return!1;var n=this.receivedPresence[e];if(!n)return!1;if(null!=n.processedAt)return Date.now()>=n.processedAt+this.receivedPresenceTimeout&&delete this.receivedPresence[e],!1;if(null==this.version||this.version<n.v)return!1;if(null==n.p)return n.processedAt=Date.now(),this._setPresence(e,null,t);if(!this.type||!this.type.createPresence||!this.type.transformPresence)return n.processedAt=Date.now(),this._setPresence(e,null,t);if(this.inflightOp&&null==this.inflightOp.op)return n.processedAt=Date.now(),this._setPresence(e,null,t);for(var r=0;r<this.pendingOps.length;r++)if(null==this.pendingOps[r].op)return n.processedAt=Date.now(),this._setPresence(e,null,t);var o=this.cachedOps.length-(this.version-n.v);if(o<0)return n.processedAt=Date.now(),this._setPresence(e,null,t);for(var r=o;r<this.cachedOps.length;r++)if(null==this.cachedOps[r].op)return n.processedAt=Date.now(),this._setPresence(e,null,t);for(var i=this.type.createPresence(n.p),r=o;r<this.cachedOps.length;r++){var a=this.cachedOps[r];i=this.type.transformPresence(i,a.op,n.src===a.src)}this.inflightOp&&(i=this.type.transformPresence(i,this.inflightOp.op,!1));for(var r=0;r<this.pendingOps.length;r++)i=this.type.transformPresence(i,this.pendingOps[r].op,!1);return n.processedAt=Date.now(),this._setPresence(e,i,t)},r.prototype._processAllReceivedPresence=function(){for(var e=Object.keys(this.receivedPresence),t=[],n=0;n<e.length;n++){var r=e[n];this._processReceivedPresence(r)&&t.push(r)}this._emitPresence(t,!0)},r.prototype._transformPresence=function(e,t){var n=this.presence[e];if(null!=t.op){var r=e===(t.src||"");n=this.type.transformPresence(n,t.op,r)}else n=null;return this._setPresence(e,n)},r.prototype._transformAllPresence=function(e){for(var t=Object.keys(this.presence),n=[],r=0;r<t.length;r++){var o=t[r];this._transformPresence(o,e)&&n.push(o)}this._emitPresence(n,!1)},r.prototype._pausePresence=function(){this.inflightPresence?(this.pendingPresence=this.pendingPresence?this.inflightPresence.concat(this.pendingPresence):this.inflightPresence,this.inflightPresence=null,this.inflightPresenceSeq=0):this.pendingPresence||null==this.presence[""]||(this.pendingPresence=[]),this.receivedPresence=Object.create(null),this.requestReplyPresence=!0;for(var e=Object.keys(this.presence),t=[],n=0;n<e.length;n++){var r=e[n];r&&this._setPresence(r,null)&&t.push(r)}this._emitPresence(t,!1)},r.prototype._setPresence=function(e,t,n){if(null==t){if(null==this.presence[e])return!1;delete this.presence[e]}else{if(this.presence[e]===t||this.type.comparePresence&&this.type.comparePresence(this.presence[e],t))return!1;this.presence[e]=t}return n&&this._emitPresence([e],!0),!0},r.prototype._emitPresence=function(e,n){if(e&&e.length>0){var r=this;t.nextTick(function(){r.emit("presence",e,n)})}},r.prototype._cacheOp=function(e){var t,n=Date.now()-this.cachedOpsTimeout;for(t=0;t<this.cachedOps.length&&!(this.cachedOps[t].time>=n);t++);t>0&&this.cachedOps.splice(0,t),this.cachedOps.push(e)}}).call(this,n(/*! ./../../../../process/browser.js */"./node_modules/process/browser.js"))},"./node_modules/@teamwork/sharedb/lib/client/index.js":/*!************************************************************!*\
  !*** ./node_modules/@teamwork/sharedb/lib/client/index.js ***!
  \************************************************************/
/*! no static exports found */
function(e,t,n){t.Connection=n(/*! ./connection */"./node_modules/@teamwork/sharedb/lib/client/connection.js"),t.Doc=n(/*! ./doc */"./node_modules/@teamwork/sharedb/lib/client/doc.js"),t.Error=n(/*! ../error */"./node_modules/@teamwork/sharedb/lib/error.js"),t.Query=n(/*! ./query */"./node_modules/@teamwork/sharedb/lib/client/query.js"),t.types=n(/*! ../types */"./node_modules/@teamwork/sharedb/lib/types.js"),t.logger=n(/*! ../logger */"./node_modules/@teamwork/sharedb/lib/logger/index.js")},"./node_modules/@teamwork/sharedb/lib/client/query.js":/*!************************************************************!*\
  !*** ./node_modules/@teamwork/sharedb/lib/client/query.js ***!
  \************************************************************/
/*! no static exports found */
function(e,t,n){(function(t){function r(e,t,n,r,i,a,s){o.EventEmitter.call(this),this.action=e,this.connection=t,this.id=n,this.collection=r,this.query=i,this.results=null,a&&a.results&&(this.results=a.results,delete a.results),this.extra=void 0,this.options=a,this.callback=s,this.ready=!1,this.sent=!1}var o=n(/*! ../emitter */"./node_modules/@teamwork/sharedb/lib/emitter.js");e.exports=r,o.mixin(r),r.prototype.hasPending=function(){return!this.ready},r.prototype.send=function(){if(this.connection.canSend){var e={a:this.action,id:this.id,c:this.collection,q:this.query};if(this.options&&(e.o=this.options),this.results){for(var t=[],n=0;n<this.results.length;n++){var r=this.results[n];t.push([r.id,r.version])}e.r=t}this.connection.send(e),this.sent=!0}},r.prototype.destroy=function(e){this.connection.canSend&&"qs"===this.action&&this.connection.send({a:"qu",id:this.id}),this.connection._destroyQuery(this),e&&t.nextTick(e)},r.prototype._onConnectionStateChanged=function(){this.connection.canSend&&!this.sent?this.send():this.sent=!1},r.prototype._handleFetch=function(e,t,n){this.connection._destroyQuery(this),this._handleResponse(e,t,n)},r.prototype._handleSubscribe=function(e,t,n){this._handleResponse(e,t,n)},r.prototype._handleResponse=function(e,t,n){var r=this.callback;if(this.callback=null,e)return this._finishResponse(e,r);if(!t)return this._finishResponse(null,r);var o=this,i=1,a=function(e){if(e)return o._finishResponse(e,r);--i||o._finishResponse(null,r)};if(Array.isArray(t))i+=t.length,this.results=this._ingestSnapshots(t,a),this.extra=n;else for(var s in t){i++;var l=t[s],u=this.connection.get(l.c||this.collection,s);u.ingestSnapshot(l,a)}a()},r.prototype._ingestSnapshots=function(e,t){for(var n=[],r=0;r<e.length;r++){var o=e[r],i=this.connection.get(o.c||this.collection,o.d);i.ingestSnapshot(o,t),n.push(i)}return n},r.prototype._finishResponse=function(e,t){if(this.emit("ready"),this.ready=!0,e)return this.connection._destroyQuery(this),t?t(e):this.emit("error",e);t&&t(null,this.results,this.extra)},r.prototype._handleError=function(e){this.emit("error",e)},r.prototype._handleDiff=function(e){for(var t=0;t<e.length;t++){var n=e[t];"insert"===n.type&&(n.values=this._ingestSnapshots(n.values))}for(var t=0;t<e.length;t++){var n=e[t];switch(n.type){case"insert":var r=n.values;Array.prototype.splice.apply(this.results,[n.index,0].concat(r)),this.emit("insert",r,n.index);break;case"remove":var o=n.howMany||1,i=this.results.splice(n.index,o);this.emit("remove",i,n.index);break;case"move":var o=n.howMany||1,a=this.results.splice(n.from,o);Array.prototype.splice.apply(this.results,[n.to,0].concat(a)),this.emit("move",a,n.from,n.to)}}this.emit("changed",this.results)},r.prototype._handleExtra=function(e){this.extra=e,this.emit("extra",e)}}).call(this,n(/*! ./../../../../process/browser.js */"./node_modules/process/browser.js"))},"./node_modules/@teamwork/sharedb/lib/client/snapshot-request/snapshot-request.js":/*!****************************************************************************************!*\
  !*** ./node_modules/@teamwork/sharedb/lib/client/snapshot-request/snapshot-request.js ***!
  \****************************************************************************************/
/*! no static exports found */
function(e,t,n){function r(e,t,n,r,o){if(i.EventEmitter.call(this),"function"!=typeof o)throw new Error("Callback is required for SnapshotRequest");this.requestId=t,this.connection=e,this.id=r,this.collection=n,this.callback=o,this.sent=!1}var o=n(/*! ../../snapshot */"./node_modules/@teamwork/sharedb/lib/snapshot.js"),i=n(/*! ../../emitter */"./node_modules/@teamwork/sharedb/lib/emitter.js");e.exports=r,i.mixin(r),r.prototype.send=function(){this.connection.canSend&&(this.connection.send(this._message()),this.sent=!0)},r.prototype._onConnectionStateChanged=function(){this.connection.canSend?this.sent||this.send():this.sent=!1},r.prototype._handleResponse=function(e,t){if(this.emit("ready"),e)return this.callback(e);var n=t.meta?t.meta:null,r=new o(this.id,t.v,t.type,t.data,n);this.callback(null,r)}},"./node_modules/@teamwork/sharedb/lib/client/snapshot-request/snapshot-timestamp-request.js":/*!**************************************************************************************************!*\
  !*** ./node_modules/@teamwork/sharedb/lib/client/snapshot-request/snapshot-timestamp-request.js ***!
  \**************************************************************************************************/
/*! no static exports found */
function(e,t,n){function r(e,t,n,r,a,s){if(o.call(this,e,t,n,r,s),!i.isValidTimestamp(a))throw new Error("Snapshot timestamp must be a positive integer or null");this.timestamp=a}var o=n(/*! ./snapshot-request */"./node_modules/@teamwork/sharedb/lib/client/snapshot-request/snapshot-request.js"),i=n(/*! ../../util */"./node_modules/@teamwork/sharedb/lib/util.js");e.exports=r,r.prototype=Object.create(o.prototype),r.prototype._message=function(){return{a:"nt",id:this.requestId,c:this.collection,d:this.id,ts:this.timestamp}}},"./node_modules/@teamwork/sharedb/lib/client/snapshot-request/snapshot-version-request.js":/*!************************************************************************************************!*\
  !*** ./node_modules/@teamwork/sharedb/lib/client/snapshot-request/snapshot-version-request.js ***!
  \************************************************************************************************/
/*! no static exports found */
function(e,t,n){function r(e,t,n,r,a,s){if(o.call(this,e,t,n,r,s),!i.isValidVersion(a))throw new Error("Snapshot version must be a positive integer or null");this.version=a}var o=n(/*! ./snapshot-request */"./node_modules/@teamwork/sharedb/lib/client/snapshot-request/snapshot-request.js"),i=n(/*! ../../util */"./node_modules/@teamwork/sharedb/lib/util.js");e.exports=r,r.prototype=Object.create(o.prototype),r.prototype._message=function(){return{a:"nf",id:this.requestId,c:this.collection,d:this.id,v:this.version}}},"./node_modules/@teamwork/sharedb/lib/client/undoManager.js":/*!******************************************************************!*\
  !*** ./node_modules/@teamwork/sharedb/lib/client/undoManager.js ***!
  \******************************************************************/
/*! no static exports found */
function(e,t,n){(function(t){function n(e,t){for(var n=e.length-1;n>=0&&e[n].doc!==t;)n--;return n}function r(e){var t=e.length-1;if(t<0)throw new Error("List empty");return e[t]}function o(e,t){var n=e.length-1;if(n<0)throw new Error("List empty");e[n]=t}function i(e,t){this.op=e,this.doc=t,this.needsUndoOp=!0}function a(e,t){this._connection=e,this._source=t&&t.source,this._limit=t&&"number"==typeof t.limit?t.limit:100,this._composeInterval=t&&"number"==typeof t.composeInterval?t.composeInterval:1e3,this._undoStack=[],this._redoStack=[],this._previousUndoableOperationTime=-1/0}e.exports=a,a.prototype.destroy=function(){this._connection.removeUndoManager(this),this.clear()},a.prototype.clear=function(e){if(e){var t=function(t){return t.doc!==e};this._undoStack=this._undoStack.filter(t),this._redoStack=this._redoStack.filter(t)}else this._undoStack.length=0,this._redoStack.length=0},a.prototype.canUndo=function(){return this._undoStack.length>0},a.prototype.undo=function(e,n){if("function"==typeof e&&(n=e,e=null),!this.canUndo())return void(n&&t.nextTick(n));var o=r(this._undoStack),i={source:e&&e.source};o.doc._submit(o,i,n)},a.prototype.canRedo=function(){return this._redoStack.length>0},a.prototype.redo=function(e,n){if("function"==typeof e&&(n=e,e=null),!this.canRedo())return void(n&&t.nextTick(n));var o=r(this._redoStack),i={source:e&&e.source};o.doc._submit(o,i,n)},a.prototype.onDocLoad=function(e){this.clear(e)},a.prototype.onDocDestroy=function(e){this.clear(e)},a.prototype.onDocCreate=function(e){},a.prototype.onDocDelete=function(e){this.clear(e)},a.prototype.onDocOp=function(e,t,n,o,i,a){this.canUndo()&&r(this._undoStack)===t?(this._undoStack.pop(),this._updateStacksUndo(e,t.op,n.op)):this.canRedo()&&r(this._redoStack)===t?(this._redoStack.pop(),this._updateStacksRedo(e,t.op,n.op)):a||!i||null!=this._source&&this._source!==o?this._updateStacksFixed(e,t.op,n&&n.op,a):this._updateStacksUndoable(e,t.op,n.op)},a.prototype._updateStacksUndoable=function(e,t,n){var a=e.type.isNoop;if(!a||!a(n)){var s=Date.now();if(0===this._undoStack.length||r(this._undoStack).doc!==e||s-this._previousUndoableOperationTime>this._composeInterval)this._undoStack.push(new i(n,e));else if(e.type.composeSimilar){var l=r(this._undoStack),u=e.type.composeSimilar(n,l.op);null!=u?o(this._undoStack,new i(u,e)):this._undoStack.push(new i(n,e))}else if(e.type.compose){var l=r(this._undoStack),u=e.type.compose(n,l.op);o(this._undoStack,new i(u,e))}else this._undoStack.push(new i(n,e));this._redoStack.length=0,this._previousUndoableOperationTime=s,a&&a(r(this._undoStack).op)&&this._undoStack.pop();var c=this._undoStack.length-this._limit;c>0&&this._undoStack.splice(0,c)}},a.prototype._updateStacksUndo=function(e,t,n){e.type.isNoop&&e.type.isNoop(n)||this._redoStack.push(new i(n,e)),this._previousUndoableOperationTime=-1/0},a.prototype._updateStacksRedo=function(e,t,n){e.type.isNoop&&e.type.isNoop(n)||this._undoStack.push(new i(n,e)),this._previousUndoableOperationTime=-1/0},a.prototype._updateStacksFixed=function(e,t,r,o){if(o&&null!=r&&e.type.compose){var a=n(this._undoStack,e);if(a>=0){var s=this._undoStack[a],l=e.type.compose(r,s.op);e.type.isNoop&&e.type.isNoop(l)?this._undoStack.splice(a,1):this._undoStack[a]=new i(l,e)}var u=n(this._redoStack,e);if(u>=0){var s=this._redoStack[u],l=e.type.compose(r,s.op);e.type.isNoop&&e.type.isNoop(l)?this._redoStack.splice(u,1):this._redoStack[u]=new i(l,e)}}else this._undoStack=this._transformStack(this._undoStack,e,t),this._redoStack=this._transformStack(this._redoStack,e,t)},a.prototype._transformStack=function(e,t,n){for(var r=t.type.transform,o=t.type.transformX,a=t.type.isNoop,s=[],l=0,u=e.length-1;u>=0;--u){var c=e[u];if(c.doc===t){var d,f,h=c.op;if(o){var p=o(n,h);f=p[0],d=p[1]}else f=r(n,h,"left"),d=r(h,n,"right");a&&a(d)||(s[l++]=new i(d,t)),n=f}else s[l++]=c}return s.reverse()}}).call(this,n(/*! ./../../../../process/browser.js */"./node_modules/process/browser.js"))},"./node_modules/@teamwork/sharedb/lib/emitter.js":/*!*******************************************************!*\
  !*** ./node_modules/@teamwork/sharedb/lib/emitter.js ***!
  \*******************************************************/
/*! no static exports found */
function(e,t,n){function r(e){for(var t in o.prototype)e.prototype[t]=o.prototype[t]}var o=n(/*! events */"./node_modules/events/events.js").EventEmitter;t.EventEmitter=o,t.mixin=r},"./node_modules/@teamwork/sharedb/lib/error.js":/*!*****************************************************!*\
  !*** ./node_modules/@teamwork/sharedb/lib/error.js ***!
  \*****************************************************/
/*! no static exports found */
function(e,t,n){function r(e,t){r.super.call(this,t),this.code=e}n(/*! make-error */"./node_modules/make-error/index.js")(r),e.exports=r},"./node_modules/@teamwork/sharedb/lib/logger/index.js":/*!************************************************************!*\
  !*** ./node_modules/@teamwork/sharedb/lib/logger/index.js ***!
  \************************************************************/
/*! no static exports found */
function(e,t,n){var r=n(/*! ./logger */"./node_modules/@teamwork/sharedb/lib/logger/logger.js"),o=new r;e.exports=o},"./node_modules/@teamwork/sharedb/lib/logger/logger.js":/*!*************************************************************!*\
  !*** ./node_modules/@teamwork/sharedb/lib/logger/logger.js ***!
  \*************************************************************/
/*! no static exports found */
function(e,t){function n(){this.setMethods(console)}var r=["info","warn","error"];e.exports=n,n.prototype.setMethods=function(e){e=e||{};var t=this;r.forEach(function(n){"function"==typeof e[n]&&(t[n]=e[n])})}},"./node_modules/@teamwork/sharedb/lib/snapshot.js":/*!********************************************************!*\
  !*** ./node_modules/@teamwork/sharedb/lib/snapshot.js ***!
  \********************************************************/
/*! no static exports found */
function(e,t){function n(e,t,n,r,o){this.id=e,this.v=t,this.type=n,this.data=r,this.m=o}e.exports=n},"./node_modules/@teamwork/sharedb/lib/types.js":/*!*****************************************************!*\
  !*** ./node_modules/@teamwork/sharedb/lib/types.js ***!
  \*****************************************************/
/*! no static exports found */
function(e,t,n){t.defaultType=n(/*! ot-json0 */"./node_modules/ot-json0/lib/index.js").type,t.map={},t.register=function(e){e.name&&(t.map[e.name]=e),e.uri&&(t.map[e.uri]=e)},t.register(t.defaultType)},"./node_modules/@teamwork/sharedb/lib/util.js":/*!****************************************************!*\
  !*** ./node_modules/@teamwork/sharedb/lib/util.js ***!
  \****************************************************/
/*! no static exports found */
function(e,t){function n(){}t.doNothing=n,t.hasKeys=function(e){for(var t in e)return!0;return!1},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.isValidVersion=function(e){return null===e||t.isInteger(e)&&e>=0},t.isValidTimestamp=function(e){return t.isValidVersion(e)}},"./node_modules/compute-scroll-into-view/es/index.js":/*!***********************************************************!*\
  !*** ./node_modules/compute-scroll-into-view/es/index.js ***!
  \***********************************************************/
/*! exports provided: default */
function(e,t,n){"use strict";function r(e){return null!=e&&"object"==typeof e&&1===e.nodeType}function o(e,t){return(!t||"hidden"!==e)&&("visible"!==e&&"clip"!==e)}function i(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n=getComputedStyle(e,null);return o(n.overflowY,t)||o(n.overflowX,t)}return!1}function a(e,t,n,r,o,i,a,s){return i<e&&a>t||i>e&&a<t?0:i<=e&&s<=n||a>=t&&s>=n?i-e-r:a>t&&s<n||i<e&&s>n?a-t+o:0}n.r(t),t.default=function(e,t){var n=t.scrollMode,o=t.block,s=t.inline,l=t.boundary,u=t.skipOverflowHiddenElements,c="function"==typeof l?l:function(e){return e!==l};if(!r(e))throw new TypeError("Invalid target");for(var d=document.scrollingElement||document.documentElement,f=[],h=e;r(h)&&c(h);){if((h=h.parentNode)===d){f.push(h);break}h===document.body&&i(h)&&!i(document.documentElement)||i(h,u)&&f.push(h)}for(var p=window.visualViewport?visualViewport.width:innerWidth,m=window.visualViewport?visualViewport.height:innerHeight,g=window.scrollX||pageXOffset,v=window.scrollY||pageYOffset,b=e.getBoundingClientRect(),y=b.height,w=b.width,x=b.top,C=b.right,k=b.bottom,N=b.left,_="start"===o||"nearest"===o?x:"end"===o?k:x+y/2,S="center"===s?N+w/2:"end"===s?C:N,T=[],E=0;E<f.length;E++){var O=f[E],A=O.getBoundingClientRect(),D=A.height,R=A.width,M=A.top,P=A.right,L=A.bottom,I=A.left;if("if-needed"===n&&x>=0&&N>=0&&k<=m&&C<=p&&x>=M&&k<=L&&N>=I&&C<=P)return T;var j=getComputedStyle(O),B=parseInt(j.borderLeftWidth,10),F=parseInt(j.borderTopWidth,10),H=parseInt(j.borderRightWidth,10),U=parseInt(j.borderBottomWidth,10),z=0,W=0,V="offsetWidth"in O?O.offsetWidth-O.clientWidth-B-H:0,q="offsetHeight"in O?O.offsetHeight-O.clientHeight-F-U:0;if(d===O)z="start"===o?_:"end"===o?_-m:"nearest"===o?a(v,v+m,m,F,U,v+_,v+_+y,y):_-m/2,W="start"===s?S:"center"===s?S-p/2:"end"===s?S-p:a(g,g+p,p,B,H,g+S,g+S+w,w),z=Math.max(0,z+v),W=Math.max(0,W+g);else{z="start"===o?_-M-F:"end"===o?_-L+U+q:"nearest"===o?a(M,L,D,F,U+q,_,_+y,y):_-(M+D/2)+q/2,W="start"===s?S-I-B:"center"===s?S-(I+R/2)+V/2:"end"===s?S-P+H+V:a(I,P,R,B,H+V,S,S+w,w);var $=O.scrollLeft,K=O.scrollTop;z=Math.max(0,Math.min(K+z,O.scrollHeight-D+q)),W=Math.max(0,Math.min($+W,O.scrollWidth-R+V)),_+=K-z,S+=$-W}T.push({el:O,top:z,left:W})}return T}},"./node_modules/debug/src/browser.js":/*!*******************************************!*\
  !*** ./node_modules/debug/src/browser.js ***!
  \*******************************************/
/*! no static exports found */
function(e,t,n){"use strict";(function(r){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function a(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(o=r))}),t.splice(o,0,n)}}function s(){var e;return"object"===("undefined"==typeof console?"undefined":o(console))&&console.log&&(e=console).log.apply(e,arguments)}function l(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}}function u(){var e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}t.log=s,t.formatArgs=a,t.save=l,t.load=u,t.useColors=i,t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=n(/*! ./common */"./node_modules/debug/src/common.js")(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,n(/*! ./../../process/browser.js */"./node_modules/process/browser.js"))},"./node_modules/debug/src/common.js":/*!******************************************!*\
  !*** ./node_modules/debug/src/common.js ***!
  \******************************************/
/*! no static exports found */
function(e,t,n){"use strict";function r(e){function t(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){function n(){if(n.enabled){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var i=n,s=Number(new Date),l=s-(a||s);i.diff=l,i.prev=a,i.curr=s,a=s,t[0]=r.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var u=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(e,n){if("%%"===e)return e;u++;var o=r.formatters[n];if("function"==typeof o){var a=t[u];e=o.call(i,a),t.splice(u,1),u--}return e}),r.formatArgs.call(i,t);(i.log||r.log).apply(i,t)}}var a;return n.namespace=e,n.enabled=r.enabled(e),n.useColors=r.useColors(),n.color=t(e),n.destroy=o,n.extend=i,"function"==typeof r.init&&r.init(n),r.instances.push(n),n}function o(){var e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function i(e,t){return r(this.namespace+(void 0===t?":":t)+e)}function a(e){r.save(e),r.names=[],r.skips=[];var t,n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(t=0;t<o;t++)n[t]&&(e=n[t].replace(/\*/g,".*?"),"-"===e[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){var i=r.instances[t];i.enabled=r.enabled(i.namespace)}}function s(){r.enable("")}function l(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1}function u(e){return e instanceof Error?e.stack||e.message:e}/*! ms */
return r.debug=r,r.default=r,r.coerce=u,r.disable=s,r.enable=a,r.enabled=l,r.humanize=n("./node_modules/ms/index.js"),Object.keys(e).forEach(function(t){r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}e.exports=r},"./node_modules/events/events.js":/*!***************************************!*\
  !*** ./node_modules/events/events.js ***!
  \***************************************/
/*! no static exports found */
function(e,t,n){"use strict";function r(e){console&&console.warn&&console.warn(e)}function o(){o.init.call(this)}function i(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function a(e,t,n,o){var a,s,l;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(s=e._events,void 0===s?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),l=s[t]),void 0===l)l=s[t]=n,++e._eventsCount;else if("function"==typeof l?l=s[t]=o?[n,l]:[l,n]:o?l.unshift(n):l.push(n),(a=i(e))>0&&l.length>a&&!l.warned){l.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=l.length,r(u)}return e}function s(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,g(this.listener,this.target,e))}function l(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=s.bind(r);return o.listener=n,r.wrapFn=o,o}function u(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?h(o):d(o,o.length)}function c(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function d(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function f(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function h(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}var p,m="object"==typeof Reflect?Reflect:null,g=m&&"function"==typeof m.apply?m.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};p=m&&"function"==typeof m.ownKeys?m.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var v=Number.isNaN||function(e){return e!==e};e.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var b=10;Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return b},set:function(e){if("number"!=typeof e||e<0||v(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");b=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||v(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return i(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var a=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw a.context=i,a}var s=o[e];if(void 0===s)return!1;if("function"==typeof s)g(s,this,t);else for(var l=s.length,u=d(s,l),n=0;n<l;++n)g(u[n],this,t);return!0},o.prototype.addListener=function(e,t){return a(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return a(this,e,t,!0)},o.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,l(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,l(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,o,i,a;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){a=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():f(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return u(this,e,!0)},o.prototype.rawListeners=function(e){return u(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):c.call(e,t)},o.prototype.listenerCount=c,o.prototype.eventNames=function(){return this._eventsCount>0?p(this._events):[]}},"./node_modules/fast-diff/diff.js":/*!****************************************!*\
  !*** ./node_modules/fast-diff/diff.js ***!
  \****************************************/
/*! no static exports found */
function(e,t){function n(e,t,n,o){if(e===t)return e?[[w,e]]:[];if(null!=n){var i=g(e,t,n);if(i)return i}var l=a(e,t),c=e.substring(0,l);e=e.substring(l),t=t.substring(l),l=s(e,t);var d=e.substring(e.length-l);e=e.substring(0,e.length-l),t=t.substring(0,t.length-l);var f=r(e,t);return c&&f.unshift([w,c]),d&&f.push([w,d]),u(f,o),f}function r(e,t){var r;if(!e)return[[y,t]];if(!t)return[[b,e]];var i=e.length>t.length?e:t,a=e.length>t.length?t:e,s=i.indexOf(a);if(-1!==s)return r=[[y,i.substring(0,s)],[w,a],[y,i.substring(s+a.length)]],e.length>t.length&&(r[0][0]=r[2][0]=b),r;if(1===a.length)return[[b,e],[y,t]];var u=l(e,t);if(u){var c=u[0],d=u[1],f=u[2],h=u[3],p=u[4],m=n(c,f),g=n(d,h);return m.concat([[w,p]],g)}return o(e,t)}function o(e,t){for(var n=e.length,r=t.length,o=Math.ceil((n+r)/2),a=o,s=2*o,l=new Array(s),u=new Array(s),c=0;c<s;c++)l[c]=-1,u[c]=-1;l[a+1]=0,u[a+1]=0;for(var d=n-r,f=d%2!=0,h=0,p=0,m=0,g=0,v=0;v<o;v++){for(var w=-v+h;w<=v-p;w+=2){var x,C=a+w;x=w===-v||w!==v&&l[C-1]<l[C+1]?l[C+1]:l[C-1]+1;for(var k=x-w;x<n&&k<r&&e.charAt(x)===t.charAt(k);)x++,k++;if(l[C]=x,x>n)p+=2;else if(k>r)h+=2;else if(f){var N=a+d-w;if(N>=0&&N<s&&-1!==u[N]){var _=n-u[N];if(x>=_)return i(e,t,x,k)}}}for(var S=-v+m;S<=v-g;S+=2){var _,N=a+S;_=S===-v||S!==v&&u[N-1]<u[N+1]?u[N+1]:u[N-1]+1;for(var T=_-S;_<n&&T<r&&e.charAt(n-_-1)===t.charAt(r-T-1);)_++,T++;if(u[N]=_,_>n)g+=2;else if(T>r)m+=2;else if(!f){var C=a+d-S;if(C>=0&&C<s&&-1!==l[C]){var x=l[C],k=a+x-C;if(_=n-_,x>=_)return i(e,t,x,k)}}}}return[[b,e],[y,t]]}function i(e,t,r,o){var i=e.substring(0,r),a=t.substring(0,o),s=e.substring(r),l=t.substring(o),u=n(i,a),c=n(s,l);return u.concat(c)}function a(e,t){if(!e||!t||e.charAt(0)!==t.charAt(0))return 0;for(var n=0,r=Math.min(e.length,t.length),o=r,i=0;n<o;)e.substring(i,o)==t.substring(i,o)?(n=o,i=n):r=o,o=Math.floor((r-n)/2+n);return c(e.charCodeAt(o-1))&&o--,o}function s(e,t){if(!e||!t||e.slice(-1)!==t.slice(-1))return 0;for(var n=0,r=Math.min(e.length,t.length),o=r,i=0;n<o;)e.substring(e.length-o,e.length-i)==t.substring(t.length-o,t.length-i)?(n=o,i=n):r=o,o=Math.floor((r-n)/2+n);return d(e.charCodeAt(e.length-o))&&o--,o}function l(e,t){function n(e,t,n){for(var r,o,i,l,u=e.substring(n,n+Math.floor(e.length/4)),c=-1,d="";-1!==(c=t.indexOf(u,c+1));){var f=a(e.substring(n),t.substring(c)),h=s(e.substring(0,n),t.substring(0,c));d.length<h+f&&(d=t.substring(c-h,c)+t.substring(c,c+f),r=e.substring(0,n-h),o=e.substring(n+f),i=t.substring(0,c-h),l=t.substring(c+f))}return 2*d.length>=e.length?[r,o,i,l,d]:null}var r=e.length>t.length?e:t,o=e.length>t.length?t:e;if(r.length<4||2*o.length<r.length)return null;var i,l=n(r,o,Math.ceil(r.length/4)),u=n(r,o,Math.ceil(r.length/2));if(!l&&!u)return null;i=u?l&&l[4].length>u[4].length?l:u:l;var c,d,f,h;return e.length>t.length?(c=i[0],d=i[1],f=i[2],h=i[3]):(f=i[0],h=i[1],c=i[2],d=i[3]),[c,d,f,h,i[4]]}function u(e,t){e.push([w,""]);for(var n,r=0,o=0,i=0,l="",c="";r<e.length;)if(r<e.length-1&&!e[r][1])e.splice(r,1);else switch(e[r][0]){case y:i++,c+=e[r][1],r++;break;case b:o++,l+=e[r][1],r++;break;case w:var d=r-i-o-1;if(t){if(d>=0&&h(e[d][1])){var p=e[d][1].slice(-1);if(e[d][1]=e[d][1].slice(0,-1),l=p+l,c=p+c,!e[d][1]){e.splice(d,1),r--;var m=d-1;e[m]&&e[m][0]===y&&(i++,c=e[m][1]+c,m--),e[m]&&e[m][0]===b&&(o++,l=e[m][1]+l,m--),d=m}}if(f(e[r][1])){var p=e[r][1].charAt(0);e[r][1]=e[r][1].slice(1),l+=p,c+=p}}if(r<e.length-1&&!e[r][1]){e.splice(r,1);break}if(l.length>0||c.length>0){l.length>0&&c.length>0&&(n=a(c,l),0!==n&&(d>=0?e[d][1]+=c.substring(0,n):(e.splice(0,0,[w,c.substring(0,n)]),r++),c=c.substring(n),l=l.substring(n)),0!==(n=s(c,l))&&(e[r][1]=c.substring(c.length-n)+e[r][1],c=c.substring(0,c.length-n),l=l.substring(0,l.length-n)));var g=i+o;0===l.length&&0===c.length?(e.splice(r-g,g),r-=g):0===l.length?(e.splice(r-g,g,[y,c]),r=r-g+1):0===c.length?(e.splice(r-g,g,[b,l]),r=r-g+1):(e.splice(r-g,g,[b,l],[y,c]),r=r-g+2)}0!==r&&e[r-1][0]===w?(e[r-1][1]+=e[r][1],e.splice(r,1)):r++,i=0,o=0,l="",c=""}""===e[e.length-1][1]&&e.pop();var v=!1;for(r=1;r<e.length-1;)e[r-1][0]===w&&e[r+1][0]===w&&(e[r][1].substring(e[r][1].length-e[r-1][1].length)===e[r-1][1]?(e[r][1]=e[r-1][1]+e[r][1].substring(0,e[r][1].length-e[r-1][1].length),e[r+1][1]=e[r-1][1]+e[r+1][1],e.splice(r-1,1),v=!0):e[r][1].substring(0,e[r+1][1].length)==e[r+1][1]&&(e[r-1][1]+=e[r+1][1],e[r][1]=e[r][1].substring(e[r+1][1].length)+e[r+1][1],e.splice(r+1,1),v=!0)),r++;v&&u(e,t)}function c(e){return e>=55296&&e<=56319}function d(e){return e>=56320&&e<=57343}function f(e){return d(e.charCodeAt(0))}function h(e){return c(e.charCodeAt(e.length-1))}function p(e){for(var t=[],n=0;n<e.length;n++)e[n][1].length>0&&t.push(e[n]);return t}function m(e,t,n,r){return h(e)||f(r)?null:p([[w,e],[b,t],[y,n],[w,r]])}function g(e,t,n){var r="number"==typeof n?{index:n,length:0}:n.oldRange,o="number"==typeof n?null:n.newRange,i=e.length,a=t.length;if(0===r.length&&(null===o||0===o.length)){var s=r.index,l=e.slice(0,s),u=e.slice(s),c=o?o.index:null,d=s+a-i;if((null===c||c===d)&&!(d<0||d>a)){var f=t.slice(0,d),h=t.slice(d);if(h===u){var p=Math.min(s,d),g=l.slice(0,p),v=f.slice(0,p);if(g===v){var b=l.slice(p),y=f.slice(p);return m(g,b,y,u)}}}if(null===c||c===s){var w=s,f=t.slice(0,w),h=t.slice(w);if(f===l){var x=Math.min(i-w,a-w),C=u.slice(u.length-x),k=h.slice(h.length-x);if(C===k){var b=u.slice(0,u.length-x),y=h.slice(0,h.length-x);return m(l,b,y,C)}}}}if(r.length>0&&o&&0===o.length){var g=e.slice(0,r.index),C=e.slice(r.index+r.length),p=g.length,x=C.length;if(!(a<p+x)){var v=t.slice(0,p),k=t.slice(a-x);if(g===v&&C===k){var b=e.slice(p,i-x),y=t.slice(p,a-x);return m(g,b,y,C)}}}return null}function v(e,t,r){return n(e,t,r,!0)}var b=-1,y=1,w=0;v.INSERT=y,v.DELETE=b,v.EQUAL=w,e.exports=v},"./node_modules/inherits/inherits_browser.js":/*!***************************************************!*\
  !*** ./node_modules/inherits/inherits_browser.js ***!
  \***************************************************/
/*! no static exports found */
function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},"./node_modules/json3/lib/json3.js":/*!*****************************************!*\
  !*** ./node_modules/json3/lib/json3.js ***!
  \*****************************************/
/*! no static exports found */
function(e,t,n){(function(e,r){var o;(function(){function i(e,t){function n(e,t){try{e()}catch(e){t&&t()}}function r(e){if(null!=r[e])return r[e];var o;if("bug-string-char-index"==e)o="a"!="a"[0];else if("json"==e)o=r("json-stringify")&&r("date-serialization")&&r("json-parse");else if("date-serialization"==e){if(o=r("json-stringify")&&w){var i=t.stringify;n(function(){o='"-271821-04-20T00:00:00.000Z"'==i(new d(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==i(new d(864e13))&&'"-000001-01-01T00:00:00.000Z"'==i(new d(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==i(new d(-1))})}}else{var s,u='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var i=t.stringify,c="function"==typeof i;c&&((s=function(){return 1}).toJSON=s,n(function(){c="0"===i(0)&&"0"===i(new a)&&'""'==i(new l)&&i(b)===g&&i(g)===g&&i()===g&&"1"===i(s)&&"[1]"==i([s])&&"[null]"==i([g])&&"null"==i(null)&&"[null,null,null]"==i([g,b,null])&&i({a:[s,!0,!1,null,"\0\b\n\f\r\t"]})==u&&"1"===i(null,s)&&"[\n 1,\n 2\n]"==i([1,2],null,1)},function(){c=!1})),o=c}if("json-parse"==e){var f,h=t.parse;"function"==typeof h&&n(function(){0!==h("0")||h(!1)||(s=h(u),(f=5==s.a.length&&1===s.a[0])&&(n(function(){f=!h('"\t"')}),f&&n(function(){f=1!==h("01")}),f&&n(function(){f=1!==h("1.")})))},function(){f=!1}),o=f}}return r[e]=!!o}function o(e){return _(this)}e||(e=u.Object()),t||(t=u.Object());var a=e.Number||u.Number,l=e.String||u.String,c=e.Object||u.Object,d=e.Date||u.Date,f=e.SyntaxError||u.SyntaxError,h=e.TypeError||u.TypeError,p=e.Math||u.Math,m=e.JSON||u.JSON;"object"==typeof m&&m&&(t.stringify=m.stringify,t.parse=m.parse);var g,v=c.prototype,b=v.toString,y=v.hasOwnProperty,w=new d(-0xc782b5b800cec);if(n(function(){w=-109252==w.getUTCFullYear()&&0===w.getUTCMonth()&&1===w.getUTCDate()&&10==w.getUTCHours()&&37==w.getUTCMinutes()&&6==w.getUTCSeconds()&&708==w.getUTCMilliseconds()}),r["bug-string-char-index"]=r["date-serialization"]=r.json=r["json-stringify"]=r["json-parse"]=null,!r("json")){var x=r("bug-string-char-index"),C=function(e,t){var n,r,o,i=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,r=new n;for(o in r)y.call(r,o)&&i++;return n=r=null,i?C=function(e,t){var n,r,o="[object Function]"==b.call(e);for(n in e)o&&"prototype"==n||!y.call(e,n)||(r="constructor"===n)||t(n);(r||y.call(e,n="constructor"))&&t(n)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],C=function(e,t){var n,o,i="[object Function]"==b.call(e),a=!i&&"function"!=typeof e.constructor&&s[typeof e.hasOwnProperty]&&e.hasOwnProperty||y;for(n in e)i&&"prototype"==n||!a.call(e,n)||t(n);for(o=r.length;n=r[--o];)a.call(e,n)&&t(n)}),C(e,t)};if(!r("json-stringify")&&!r("date-serialization")){var k={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},N=function(e,t){return("000000"+(t||0)).slice(-e)},_=function(e){var t,n,r,o,i,a,s,l,u;if(w)t=function(e){n=e.getUTCFullYear(),r=e.getUTCMonth(),o=e.getUTCDate(),a=e.getUTCHours(),s=e.getUTCMinutes(),l=e.getUTCSeconds(),u=e.getUTCMilliseconds()};else{var c=p.floor,d=[0,31,59,90,120,151,181,212,243,273,304,334],f=function(e,t){return d[t]+365*(e-1970)+c((e-1969+(t=+(t>1)))/4)-c((e-1901+t)/100)+c((e-1601+t)/400)};t=function(e){for(o=c(e/864e5),n=c(o/365.2425)+1970-1;f(n+1,0)<=o;n++);for(r=c((o-f(n,0))/30.42);f(n,r+1)<=o;r++);o=1+o-f(n,r),i=(e%864e5+864e5)%864e5,a=c(i/36e5)%24,s=c(i/6e4)%60,l=c(i/1e3)%60,u=i%1e3}}return(_=function(e){return e>-1/0&&e<1/0?(t(e),e=(n<=0||n>=1e4?(n<0?"-":"+")+N(6,n<0?-n:n):N(4,n))+"-"+N(2,r+1)+"-"+N(2,o)+"T"+N(2,a)+":"+N(2,s)+":"+N(2,l)+"."+N(3,u)+"Z",n=r=o=a=s=l=u=null):e=null,e})(e)};if(r("json-stringify")&&!r("date-serialization")){var S=t.stringify;t.stringify=function(e,t,n){var r=d.prototype.toJSON;d.prototype.toJSON=o;var i=S(e,t,n);return d.prototype.toJSON=r,i}}else{var T=function(e){var t=e.charCodeAt(0),n=k[t];return n||"\\u00"+N(2,t.toString(16))},E=/[\x00-\x1f\x22\x5c]/g,O=function(e){return E.lastIndex=0,'"'+(E.test(e)?e.replace(E,T):e)+'"'},A=function(e,t,r,o,i,a,s){var l,u,c,f,p,m,v,y,w;if(n(function(){l=t[e]}),"object"==typeof l&&l&&(l.getUTCFullYear&&"[object Date]"==b.call(l)&&l.toJSON===d.prototype.toJSON?l=_(l):"function"==typeof l.toJSON&&(l=l.toJSON(e))),r&&(l=r.call(t,e,l)),l==g)return l===g?l:"null";switch(u=typeof l,"object"==u&&(c=b.call(l)),c||u){case"boolean":case"[object Boolean]":return""+l;case"number":case"[object Number]":return l>-1/0&&l<1/0?""+l:"null";case"string":case"[object String]":return O(""+l)}if("object"==typeof l){for(v=s.length;v--;)if(s[v]===l)throw h();if(s.push(l),f=[],y=a,a+=i,"[object Array]"==c){for(m=0,v=l.length;m<v;m++)p=A(m,l,r,o,i,a,s),f.push(p===g?"null":p);w=f.length?i?"[\n"+a+f.join(",\n"+a)+"\n"+y+"]":"["+f.join(",")+"]":"[]"}else C(o||l,function(e){var t=A(e,l,r,o,i,a,s);t!==g&&f.push(O(e)+":"+(i?" ":"")+t)}),w=f.length?i?"{\n"+a+f.join(",\n"+a)+"\n"+y+"}":"{"+f.join(",")+"}":"{}";return s.pop(),w}};t.stringify=function(e,t,n){var r,o,i,a;if(s[typeof t]&&t)if("[object Function]"==(a=b.call(t)))o=t;else if("[object Array]"==a){i={};for(var l,u=0,c=t.length;u<c;)l=t[u++],"[object String]"!=(a=b.call(l))&&"[object Number]"!=a||(i[l]=1)}if(n)if("[object Number]"==(a=b.call(n))){if((n-=n%1)>0)for(n>10&&(n=10),r="";r.length<n;)r+=" "}else"[object String]"==a&&(r=n.length<=10?n:n.slice(0,10));return A("",(l={},l[""]=e,l),o,i,r,"",[])}}}if(!r("json-parse")){var D,R,M=l.fromCharCode,P={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},L=function(){throw D=R=null,f()},I=function(){for(var e,t,n,r,o,i=R,a=i.length;D<a;)switch(o=i.charCodeAt(D)){case 9:case 10:case 13:case 32:D++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=x?i.charAt(D):i[D],D++,e;case 34:for(e="@",D++;D<a;)if((o=i.charCodeAt(D))<32)L();else if(92==o)switch(o=i.charCodeAt(++D)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=P[o],D++;break;case 117:for(t=++D,n=D+4;D<n;D++)(o=i.charCodeAt(D))>=48&&o<=57||o>=97&&o<=102||o>=65&&o<=70||L();e+=M("0x"+i.slice(t,D));break;default:L()}else{if(34==o)break;for(o=i.charCodeAt(D),t=D;o>=32&&92!=o&&34!=o;)o=i.charCodeAt(++D);e+=i.slice(t,D)}if(34==i.charCodeAt(D))return D++,e;L();default:if(t=D,45==o&&(r=!0,o=i.charCodeAt(++D)),o>=48&&o<=57){for(48==o&&(o=i.charCodeAt(D+1))>=48&&o<=57&&L(),r=!1;D<a&&(o=i.charCodeAt(D))>=48&&o<=57;D++);if(46==i.charCodeAt(D)){for(n=++D;n<a&&!((o=i.charCodeAt(n))<48||o>57);n++);n==D&&L(),D=n}if(101==(o=i.charCodeAt(D))||69==o){for(o=i.charCodeAt(++D),43!=o&&45!=o||D++,n=D;n<a&&!((o=i.charCodeAt(n))<48||o>57);n++);n==D&&L(),D=n}return+i.slice(t,D)}r&&L();var s=i.slice(D,D+4);if("true"==s)return D+=4,!0;if("fals"==s&&101==i.charCodeAt(D+4))return D+=5,!1;if("null"==s)return D+=4,null;L()}return"$"},j=function(e){var t,n;if("$"==e&&L(),"string"==typeof e){if("@"==(x?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];"]"!=(e=I());)n?","==e?"]"==(e=I())&&L():L():n=!0,","==e&&L(),t.push(j(e));return t}if("{"==e){for(t={};"}"!=(e=I());)n?","==e?"}"==(e=I())&&L():L():n=!0,","!=e&&"string"==typeof e&&"@"==(x?e.charAt(0):e[0])&&":"==I()||L(),t[e.slice(1)]=j(I());return t}L()}return e},B=function(e,t,n){var r=F(e,t,n);r===g?delete e[t]:e[t]=r},F=function(e,t,n){var r,o=e[t];if("object"==typeof o&&o)if("[object Array]"==b.call(o))for(r=o.length;r--;)B(b,C,o);else C(o,function(e){B(o,e,n)});return n.call(e,t,o)};t.parse=function(e,t){var n,r;return D=0,R=""+e,n=j(I()),"$"!=I()&&L(),D=R=null,t&&"[object Function]"==b.call(t)?F((r={},r[""]=n,r),"",t):n}}}return t.runInContext=i,t}var a=n(/*! !webpack amd options */"./node_modules/webpack/buildin/amd-options.js"),s={function:!0,object:!0},l=s[typeof t]&&t&&!t.nodeType&&t,u=s[typeof window]&&window||this,c=l&&s[typeof e]&&e&&!e.nodeType&&"object"==typeof r&&r;if(!c||c.global!==c&&c.window!==c&&c.self!==c||(u=c),l&&!a)i(u,l);else{var d=u.JSON,f=u.JSON3,h=!1,p=i(u,u.JSON3={noConflict:function(){return h||(h=!0,u.JSON=d,u.JSON3=f,d=f=null),p}});u.JSON={parse:p.parse,stringify:p.stringify}}a&&void 0!==(o=function(){return p}.call(t,n,t,e))&&(e.exports=o)}).call(this)}).call(this,n(/*! ./../../webpack/buildin/module.js */"./node_modules/webpack/buildin/module.js")(e),n(/*! ./../../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/lodash.throttle/index.js":/*!***********************************************!*\
  !*** ./node_modules/lodash.throttle/index.js ***!
  \***********************************************/
/*! no static exports found */
function(e,t,n){(function(t){function n(e,t,n){function r(t){var n=m,r=g;return m=g=void 0,N=t,b=e.apply(r,n)}function i(e){return N=e,y=setTimeout(c,t),_?r(e):b}function a(e){var n=e-w,r=e-N,o=t-n;return S?C(o,v-r):o}function u(e){var n=e-w,r=e-N;return void 0===w||n>=t||n<0||S&&r>=v}function c(){var e=k();if(u(e))return d(e);y=setTimeout(c,a(e))}function d(e){return y=void 0,T&&m?r(e):(m=g=void 0,b)}function f(){void 0!==y&&clearTimeout(y),N=0,m=w=g=y=void 0}function h(){return void 0===y?b:d(k())}function p(){var e=k(),n=u(e);if(m=arguments,g=this,w=e,n){if(void 0===y)return i(w);if(S)return y=setTimeout(c,t),r(w)}return void 0===y&&(y=setTimeout(c,t)),b}var m,g,v,b,y,w,N=0,_=!1,S=!1,T=!0;if("function"!=typeof e)throw new TypeError(l);return t=s(t)||0,o(n)&&(_=!!n.leading,S="maxWait"in n,v=S?x(s(n.maxWait)||0,t):v,T="trailing"in n?!!n.trailing:T),p.cancel=f,p.flush=h,p}function r(e,t,r){var i=!0,a=!0;if("function"!=typeof e)throw new TypeError(l);return o(r)&&(i="leading"in r?!!r.leading:i,a="trailing"in r?!!r.trailing:a),n(e,t,{leading:i,maxWait:t,trailing:a})}function o(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function i(e){return!!e&&"object"==typeof e}function a(e){return"symbol"==typeof e||i(e)&&w.call(e)==c}function s(e){if("number"==typeof e)return e;if(a(e))return u;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(d,"");var n=h.test(e);return n||p.test(e)?m(e.slice(2),n?2:8):f.test(e)?u:+e}var l="Expected a function",u=NaN,c="[object Symbol]",d=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,p=/^0o[0-7]+$/i,m=parseInt,g="object"==typeof t&&t&&t.Object===Object&&t,v="object"==typeof self&&self&&self.Object===Object&&self,b=g||v||Function("return this")(),y=Object.prototype,w=y.toString,x=Math.max,C=Math.min,k=function(){return b.Date.now()};e.exports=r}).call(this,n(/*! ./../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/make-error/index.js":/*!******************************************!*\
  !*** ./node_modules/make-error/index.js ***!
  \******************************************/
/*! no static exports found */
function(e,t,n){"use strict";function r(e){void 0!==e&&a(this,"message",{configurable:!0,value:e,writable:!0});var t=this.constructor.name;void 0!==t&&t!==this.name&&a(this,"name",{configurable:!0,value:t,writable:!0}),s(this,this.constructor)}function o(e,t){if(null==t||t===Error)t=r;else if("function"!=typeof t)throw new TypeError("super_ should be a function");var n;if("string"==typeof e)n=e,e=void 0!==i?function(){return i(t,arguments,this.constructor)}:function(){t.apply(this,arguments)},void 0!==l&&(l(e,n),n=void 0);else if("function"!=typeof e)throw new TypeError("constructor should be either a string or a function");e.super_=e.super=t;var o={constructor:{configurable:!0,value:e,writable:!0}};return void 0!==n&&(o.name={configurable:!0,value:n,writable:!0}),e.prototype=Object.create(t.prototype,o),e}var i="undefined"!=typeof Reflect?Reflect.construct:void 0,a=Object.defineProperty,s=Error.captureStackTrace;void 0===s&&(s=function(e){var t=new Error;a(e,"stack",{configurable:!0,get:function(){var e=t.stack;return a(this,"stack",{configurable:!0,value:e,writable:!0}),e},set:function(t){a(e,"stack",{configurable:!0,value:t,writable:!0})}})}),r.prototype=Object.create(Error.prototype,{constructor:{configurable:!0,value:r,writable:!0}});var l=function(){function e(e,t){return a(e,"name",{configurable:!0,value:t})}try{var t=function(){};if(e(t,"foo"),"foo"===t.name)return e}catch(e){}}();t=e.exports=o,t.BaseError=r},"./node_modules/ms/index.js":/*!**********************************!*\
  !*** ./node_modules/ms/index.js ***!
  \**********************************/
/*! no static exports found */
function(e,t){function n(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*d;case"weeks":case"week":case"w":return n*c;case"days":case"day":case"d":return n*u;case"hours":case"hour":case"hrs":case"hr":case"h":return n*l;case"minutes":case"minute":case"mins":case"min":case"m":return n*s;case"seconds":case"second":case"secs":case"sec":case"s":return n*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function r(e){var t=Math.abs(e);return t>=u?Math.round(e/u)+"d":t>=l?Math.round(e/l)+"h":t>=s?Math.round(e/s)+"m":t>=a?Math.round(e/a)+"s":e+"ms"}function o(e){var t=Math.abs(e);return t>=u?i(e,t,u,"day"):t>=l?i(e,t,l,"hour"):t>=s?i(e,t,s,"minute"):t>=a?i(e,t,a,"second"):e+" ms"}function i(e,t,n,r){var o=t>=1.5*n;return Math.round(e/n)+" "+r+(o?"s":"")}var a=1e3,s=60*a,l=60*s,u=24*l,c=7*u,d=365.25*u;e.exports=function(e,t){t=t||{};var i=typeof e;if("string"===i&&e.length>0)return n(e);if("number"===i&&isFinite(e))return t.long?o(e):r(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},"./node_modules/ot-json0/lib/bootstrapTransform.js":/*!*********************************************************!*\
  !*** ./node_modules/ot-json0/lib/bootstrapTransform.js ***!
  \*********************************************************/
/*! no static exports found */
function(e,t){function n(e,t,n,r){var o=function(e,n,r,o){t(r,e,n,"left"),t(o,n,e,"right")},i=e.transformX=function(e,t){n(e),n(t);for(var a=[],s=0;s<t.length;s++){for(var l=t[s],u=[],c=0;c<e.length;){var d=[];if(o(e[c],l,u,d),c++,1!==d.length){if(0===d.length){for(var f=c;f<e.length;f++)r(u,e[f]);l=null;break}for(var h=i(e.slice(c),d),p=0;p<h[0].length;p++)r(u,h[0][p]);for(var m=0;m<h[1].length;m++)r(a,h[1][m]);l=null;break}l=d[0]}null!=l&&r(a,l),e=u}return[e,a]};e.transform=function(e,n,r){if("left"!==r&&"right"!==r)throw new Error("type must be 'left' or 'right'");return 0===n.length?e:1===e.length&&1===n.length?t([],e[0],n[0],r):"left"===r?i(e,n)[0]:i(n,e)[1]}}e.exports=n},"./node_modules/ot-json0/lib/index.js":/*!********************************************!*\
  !*** ./node_modules/ot-json0/lib/index.js ***!
  \********************************************/
/*! no static exports found */
function(e,t,n){e.exports={type:n(/*! ./json0 */"./node_modules/ot-json0/lib/json0.js")}},"./node_modules/ot-json0/lib/json0.js":/*!********************************************!*\
  !*** ./node_modules/ot-json0/lib/json0.js ***!
  \********************************************/
/*! no static exports found */
function(e,t,n){function r(e){e.t="text0";var t={p:e.p.pop()};null!=e.si&&(t.i=e.si),null!=e.sd&&(t.d=e.sd),e.o=[t]}function o(e){e.p.push(e.o[0].p),null!=e.o[0].i&&(e.si=e.o[0].i),null!=e.o[0].d&&(e.sd=e.o[0].d),delete e.t,delete e.o}var i=function(e){return"[object Array]"==Object.prototype.toString.call(e)},a=function(e){return!!e&&e.constructor===Object},s=function(e){return JSON.parse(JSON.stringify(e))},l={name:"json0",uri:"http://sharejs.org/types/JSONv0"},u={};l.registerSubtype=function(e){u[e.name]=e},l.create=function(e){return void 0===e?null:s(e)},l.invertComponent=function(e){var t={p:e.p};return e.t&&u[e.t]&&(t.t=e.t,t.o=u[e.t].invert(e.o)),void 0!==e.si&&(t.sd=e.si),void 0!==e.sd&&(t.si=e.sd),void 0!==e.oi&&(t.od=e.oi),void 0!==e.od&&(t.oi=e.od),void 0!==e.li&&(t.ld=e.li),void 0!==e.ld&&(t.li=e.ld),void 0!==e.na&&(t.na=-e.na),void 0!==e.lm&&(t.lm=e.p[e.p.length-1],t.p=e.p.slice(0,e.p.length-1).concat([e.lm])),t},l.invert=function(e){for(var t=e.slice().reverse(),n=[],r=0;r<t.length;r++)n.push(l.invertComponent(t[r]));return n},l.checkValidOp=function(e){for(var t=0;t<e.length;t++)if(!i(e[t].p))throw new Error("Missing path")},l.checkList=function(e){if(!i(e))throw new Error("Referenced element not a list")},l.checkObj=function(e){if(!a(e))throw new Error("Referenced element not an object (it was "+JSON.stringify(e)+")")},l.apply=function(e,t){l.checkValidOp(t),t=s(t);for(var n={data:e},o=0;o<t.length;o++){var i=t[o];null==i.si&&null==i.sd||r(i);for(var a=null,c=n,d="data",f=0;f<i.p.length;f++){var h=i.p[f];if(a=c,d,c=c[d],d=h,null==a)throw new Error("Path invalid")}if(i.t&&void 0!==i.o&&u[i.t])c[d]=u[i.t].apply(c[d],i.o);else if(void 0!==i.na){if("number"!=typeof c[d])throw new Error("Referenced element not a number");c[d]+=i.na}else if(void 0!==i.li&&void 0!==i.ld)l.checkList(c),c[d]=i.li;else if(void 0!==i.li)l.checkList(c),c.splice(d,0,i.li);else if(void 0!==i.ld)l.checkList(c),c.splice(d,1);else if(void 0!==i.lm){if(l.checkList(c),i.lm!=d){var p=c[d];c.splice(d,1),c.splice(i.lm,0,p)}}else if(void 0!==i.oi)l.checkObj(c),c[d]=i.oi;else{if(void 0===i.od)throw new Error("invalid / missing instruction in op");l.checkObj(c),delete c[d]}}return n.data},l.shatter=function(e){for(var t=[],n=0;n<e.length;n++)t.push([e[n]]);return t},l.incrementalApply=function(e,t,n){for(var r=0;r<t.length;r++){var o=[t[r]];e=l.apply(e,o),n(o,e)}return e};var c=l.pathMatches=function(e,t,n){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r]&&(!n||r!==e.length-1))return!1;return!0};l.append=function(e,t){if(t=s(t),0===e.length)return void e.push(t);var n=e[e.length-1];if(null==t.si&&null==t.sd||null==n.si&&null==n.sd||(r(t),r(n)),c(t.p,n.p))if(t.t&&n.t&&t.t===n.t&&u[t.t]){if(n.o=u[t.t].compose(n.o,t.o),null!=t.si||null!=t.sd){for(var i=t.p,a=0;a<n.o.length-1;a++)t.o=[n.o.pop()],t.p=i.slice(),o(t),e.push(t);o(n)}}else null!=n.na&&null!=t.na?e[e.length-1]={p:n.p,na:n.na+t.na}:void 0!==n.li&&void 0===t.li&&t.ld===n.li?void 0!==n.ld?delete n.li:e.pop():void 0!==n.od&&void 0===n.oi&&void 0!==t.oi&&void 0===t.od?n.oi=t.oi:void 0!==n.oi&&void 0!==t.od?void 0!==t.oi?n.oi=t.oi:void 0!==n.od?delete n.oi:e.pop():void 0!==t.lm&&t.p[t.p.length-1]===t.lm||e.push(t);else null==t.si&&null==t.sd||null==n.si&&null==n.sd||(o(t),o(n)),e.push(t)},l.compose=function(e,t){l.checkValidOp(e),l.checkValidOp(t);for(var n=s(e),r=0;r<t.length;r++)l.append(n,t[r]);return n},l.normalize=function(e){var t=[];e=i(e)?e:[e];for(var n=0;n<e.length;n++){var r=e[n];null==r.p&&(r.p=[]),l.append(t,r)}return t},l.commonLengthForOps=function(e,t){var n=e.p.length,r=t.p.length;if((null!=e.na||e.t)&&n++,(null!=t.na||t.t)&&r++,0===n)return-1;if(0===r)return null;n--,r--;for(var o=0;o<n;o++){var i=e.p[o];if(o>=r||i!==t.p[o])return null}return n},l.canOpAffectPath=function(e,t){return null!=l.commonLengthForOps({p:t},e)},l.transformComponent=function(e,t,n,a){t=s(t);var c=l.commonLengthForOps(n,t),d=l.commonLengthForOps(t,n),f=t.p.length,h=n.p.length;if((null!=t.na||t.t)&&f++,(null!=n.na||n.t)&&h++,null!=d&&h>f&&t.p[d]==n.p[d])if(void 0!==t.ld){var p=s(n);p.p=p.p.slice(f),t.ld=l.apply(s(t.ld),[p])}else if(void 0!==t.od){var p=s(n);p.p=p.p.slice(f),t.od=l.apply(s(t.od),[p])}if(null!=c){var m=f==h,p=n;if(null==t.si&&null==t.sd||null==n.si&&null==n.sd||(r(t),p=s(n),r(p)),p.t&&u[p.t]){if(t.t&&t.t===p.t){var g=u[t.t].transform(t.o,p.o,a);if(null!=t.si||null!=t.sd)for(var v=t.p,b=0;b<g.length;b++)t.o=[g[b]],t.p=v.slice(),o(t),l.append(e,t);else(!i(g)||g.length>0)&&(t.o=g,l.append(e,t));return e}}else if(void 0!==n.na);else if(void 0!==n.li&&void 0!==n.ld){if(n.p[c]===t.p[c]){if(!m)return e;if(void 0!==t.ld){if(void 0===t.li||"left"!==a)return e;t.ld=s(n.li)}}}else if(void 0!==n.li)void 0!==t.li&&void 0===t.ld&&m&&t.p[c]===n.p[c]?"right"===a&&t.p[c]++:n.p[c]<=t.p[c]&&t.p[c]++,void 0!==t.lm&&m&&n.p[c]<=t.lm&&t.lm++;else if(void 0!==n.ld){if(void 0!==t.lm&&m){if(n.p[c]===t.p[c])return e;var v=n.p[c],y=t.p[c],w=t.lm;(v<w||v===w&&y<w)&&t.lm--}if(n.p[c]<t.p[c])t.p[c]--;else if(n.p[c]===t.p[c]){if(h<f)return e;if(void 0!==t.ld){if(void 0===t.li)return e;delete t.ld}}}else if(void 0!==n.lm)if(void 0!==t.lm&&f===h){var y=t.p[c],w=t.lm,x=n.p[c],C=n.lm;if(x!==C)if(y===x){if("left"!==a)return e;t.p[c]=C,y===w&&(t.lm=C)}else y>x&&t.p[c]--,y>C?t.p[c]++:y===C&&x>C&&(t.p[c]++,y===w&&t.lm++),w>x?t.lm--:w===x&&w>y&&t.lm--,w>C?t.lm++:w===C&&(C>x&&w>y||C<x&&w<y?"right"===a&&t.lm++:w>y?t.lm++:w===x&&t.lm--)}else if(void 0!==t.li&&void 0===t.ld&&m){var y=n.p[c],w=n.lm;v=t.p[c],v>y&&t.p[c]--,v>w&&t.p[c]++}else{var y=n.p[c],w=n.lm;v=t.p[c],v===y?t.p[c]=w:(v>y&&t.p[c]--,v>w?t.p[c]++:v===w&&y>w&&t.p[c]++)}else if(void 0!==n.oi&&void 0!==n.od){if(t.p[c]===n.p[c]){if(void 0===t.oi||!m)return e;if("right"===a)return e;t.od=n.oi}}else if(void 0!==n.oi){if(void 0!==t.oi&&t.p[c]===n.p[c]){if("left"!==a)return e;l.append(e,{p:t.p,od:n.oi})}}else if(void 0!==n.od&&t.p[c]==n.p[c]){if(!m)return e;if(void 0===t.oi)return e;delete t.od}}return l.append(e,t),e},n(/*! ./bootstrapTransform */"./node_modules/ot-json0/lib/bootstrapTransform.js")(l,l.transformComponent,l.checkValidOp,l.append);var d=n(/*! ./text0 */"./node_modules/ot-json0/lib/text0.js");l.registerSubtype(d),e.exports=l},"./node_modules/ot-json0/lib/text0.js":/*!********************************************!*\
  !*** ./node_modules/ot-json0/lib/text0.js ***!
  \********************************************/
/*! no static exports found */
function(e,t,n){var r=e.exports={name:"text0",uri:"http://sharejs.org/types/textv0",create:function(e){if(null!=e&&"string"!=typeof e)throw new Error("Initial data must be a string");return e||""}},o=function(e,t,n){return e.slice(0,t)+n+e.slice(t)},i=function(e){if("number"!=typeof e.p)throw new Error("component missing position field");if("string"==typeof e.i==("string"==typeof e.d))throw new Error("component needs an i or d field");if(e.p<0)throw new Error("position cannot be negative")},a=function(e){for(var t=0;t<e.length;t++)i(e[t])};r.apply=function(e,t){var n;a(t);for(var r=0;r<t.length;r++){var i=t[r];if(null!=i.i)e=o(e,i.p,i.i);else{if(n=e.slice(i.p,i.p+i.d.length),i.d!==n)throw new Error("Delete component '"+i.d+"' does not match deleted text '"+n+"'");e=e.slice(0,i.p)+e.slice(i.p+i.d.length)}}return e};var s=r._append=function(e,t){if(""!==t.i&&""!==t.d)if(0===e.length)e.push(t);else{var n=e[e.length-1];null!=n.i&&null!=t.i&&n.p<=t.p&&t.p<=n.p+n.i.length?e[e.length-1]={i:o(n.i,t.p-n.p,t.i),p:n.p}:null!=n.d&&null!=t.d&&t.p<=n.p&&n.p<=t.p+t.d.length?e[e.length-1]={d:o(t.d,n.p-t.p,n.d),p:t.p}:e.push(t)}};r.compose=function(e,t){a(e),a(t);for(var n=e.slice(),r=0;r<t.length;r++)s(n,t[r]);return n},r.normalize=function(e){var t=[];null==e.i&&null==e.p||(e=[e]);for(var n=0;n<e.length;n++){var r=e[n];null==r.p&&(r.p=0),s(t,r)}return t};var l=function(e,t,n){return null!=t.i?t.p<e||t.p===e&&n?e+t.i.length:e:e<=t.p?e:e<=t.p+t.d.length?t.p:e-t.d.length};r.transformCursor=function(e,t,n){for(var r="right"===n,o=0;o<t.length;o++)e=l(e,t[o],r);return e};var u=r._tc=function(e,t,n,r){if(i(t),i(n),null!=t.i)s(e,{i:t.i,p:l(t.p,n,"right"===r)});else if(null!=n.i){var o=t.d;t.p<n.p&&(s(e,{d:o.slice(0,n.p-t.p),p:t.p}),o=o.slice(n.p-t.p)),""!==o&&s(e,{d:o,p:t.p+n.i.length})}else if(t.p>=n.p+n.d.length)s(e,{d:t.d,p:t.p-n.d.length});else if(t.p+t.d.length<=n.p)s(e,t);else{var a={d:"",p:t.p};t.p<n.p&&(a.d=t.d.slice(0,n.p-t.p)),t.p+t.d.length>n.p+n.d.length&&(a.d+=t.d.slice(n.p+n.d.length-t.p));var u=Math.max(t.p,n.p),c=Math.min(t.p+t.d.length,n.p+n.d.length),d=t.d.slice(u-t.p,c-t.p),f=n.d.slice(u-n.p,c-n.p);if(d!==f)throw new Error("Delete ops delete different text in the same region of the document");""!==a.d&&(a.p=l(a.p,n),s(e,a))}return e},c=function(e){return null!=e.i?{d:e.i,p:e.p}:{i:e.d,p:e.p}};r.invert=function(e){e=e.slice().reverse();for(var t=0;t<e.length;t++)e[t]=c(e[t]);return e},n(/*! ./bootstrapTransform */"./node_modules/ot-json0/lib/bootstrapTransform.js")(r,u,a,s)},"./node_modules/process/browser.js":/*!*****************************************!*\
  !*** ./node_modules/process/browser.js ***!
  \*****************************************/
/*! no static exports found */
function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function i(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function a(){m&&h&&(m=!1,h.length?p=h.concat(p):g=-1,p.length&&s())}function s(){if(!m){var e=o(a);m=!0;for(var t=p.length;t;){for(h=p,p=[];++g<t;)h&&h[g].run();g=-1,t=p.length}h=null,m=!1,i(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var c,d,f=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var h,p=[],m=!1,g=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new l(e,t)),1!==p.length||m||o(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.prependListener=u,f.prependOnceListener=u,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},"./node_modules/querystringify/index.js":/*!**********************************************!*\
  !*** ./node_modules/querystringify/index.js ***!
  \**********************************************/
/*! no static exports found */
function(e,t,n){"use strict";function r(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function o(e){for(var t,n=/([^=?&]+)=?([^&]*)/g,o={};t=n.exec(e);){var i=r(t[1]),a=r(t[2]);null===i||null===a||i in o||(o[i]=a)}return o}function i(e,t){t=t||"";var n,r,o=[];"string"!=typeof t&&(t="?");for(r in e)if(s.call(e,r)){if(n=e[r],n||null!==n&&n!==a&&!isNaN(n)||(n=""),r=encodeURIComponent(r),n=encodeURIComponent(n),null===r||null===n)continue;o.push(r+"="+n)}return o.length?t+o.join("&"):""}var a,s=Object.prototype.hasOwnProperty;t.stringify=i,t.parse=o},"./node_modules/requires-port/index.js":/*!*********************************************!*\
  !*** ./node_modules/requires-port/index.js ***!
  \*********************************************/
/*! no static exports found */
function(e,t,n){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},"./node_modules/scroll-into-view-if-needed/es/index.js":/*!*************************************************************!*\
  !*** ./node_modules/scroll-into-view-if-needed/es/index.js ***!
  \*************************************************************/
/*! exports provided: default */
function(e,t,n){"use strict";function r(e){return e===Object(e)&&0!==Object.keys(e).length}function o(e,t){void 0===t&&(t="auto");var n="scrollBehavior"in document.body.style;e.forEach(function(e){var r=e.el,o=e.top,i=e.left;r.scroll&&n?r.scroll({top:o,left:i,behavior:t}):(r.scrollTop=o,r.scrollLeft=i)})}function i(e){return!1===e?{block:"end",inline:"nearest"}:r(e)?e:{block:"start",inline:"nearest"}}function a(e,t){var n=!e.ownerDocument.documentElement.contains(e);if(r(t)&&"function"==typeof t.behavior)return t.behavior(n?[]:Object(s.default)(e,t));if(!n){var a=i(t);return o(Object(s.default)(e,a),a.behavior)}}n.r(t);var s=n(/*! compute-scroll-into-view */"./node_modules/compute-scroll-into-view/es/index.js");t.default=a},"./node_modules/sockjs-client/lib/entry.js":/*!*************************************************!*\
  !*** ./node_modules/sockjs-client/lib/entry.js ***!
  \*************************************************/
/*! no static exports found */
function(e,t,n){"use strict";(function(t){var r=n(/*! ./transport-list */"./node_modules/sockjs-client/lib/transport-list.js");e.exports=n(/*! ./main */"./node_modules/sockjs-client/lib/main.js")(r),"_sockjs_onload"in t&&setTimeout(t._sockjs_onload,1)}).call(this,n(/*! ./../../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/sockjs-client/lib/event/close.js":/*!*******************************************************!*\
  !*** ./node_modules/sockjs-client/lib/event/close.js ***!
  \*******************************************************/
/*! no static exports found */
function(e,t,n){"use strict";function r(){i.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}var o=n(/*! inherits */"./node_modules/inherits/inherits_browser.js"),i=n(/*! ./event */"./node_modules/sockjs-client/lib/event/event.js");o(r,i),e.exports=r},"./node_modules/sockjs-client/lib/event/emitter.js":/*!*********************************************************!*\
  !*** ./node_modules/sockjs-client/lib/event/emitter.js ***!
  \*********************************************************/
/*! no static exports found */
function(e,t,n){"use strict";function r(){i.call(this)}var o=n(/*! inherits */"./node_modules/inherits/inherits_browser.js"),i=n(/*! ./eventtarget */"./node_modules/sockjs-client/lib/event/eventtarget.js");o(r,i),r.prototype.removeAllListeners=function(e){e?delete this._listeners[e]:this._listeners={}},r.prototype.once=function(e,t){function n(){r.removeListener(e,n),o||(o=!0,t.apply(this,arguments))}var r=this,o=!1;this.on(e,n)},r.prototype.emit=function(){var e=arguments[0],t=this._listeners[e];if(t){for(var n=arguments.length,r=new Array(n-1),o=1;o<n;o++)r[o-1]=arguments[o];for(var i=0;i<t.length;i++)t[i].apply(this,r)}},r.prototype.on=r.prototype.addListener=i.prototype.addEventListener,r.prototype.removeListener=i.prototype.removeEventListener,e.exports.EventEmitter=r},"./node_modules/sockjs-client/lib/event/event.js":/*!*******************************************************!*\
  !*** ./node_modules/sockjs-client/lib/event/event.js ***!
  \*******************************************************/
/*! no static exports found */
function(e,t,n){"use strict";function r(e){this.type=e}r.prototype.initEvent=function(e,t,n){return this.type=e,this.bubbles=t,this.cancelable=n,this.timeStamp=+new Date,this},r.prototype.stopPropagation=function(){},r.prototype.preventDefault=function(){},r.CAPTURING_PHASE=1,r.AT_TARGET=2,r.BUBBLING_PHASE=3,e.exports=r},"./node_modules/sockjs-client/lib/event/eventtarget.js":/*!*************************************************************!*\
  !*** ./node_modules/sockjs-client/lib/event/eventtarget.js ***!
  \*************************************************************/
/*! no static exports found */
function(e,t,n){"use strict";function r(){this._listeners={}}r.prototype.addEventListener=function(e,t){e in this._listeners||(this._listeners[e]=[]);var n=this._listeners[e];-1===n.indexOf(t)&&(n=n.concat([t])),this._listeners[e]=n},r.prototype.removeEventListener=function(e,t){var n=this._listeners[e];if(n){var r=n.indexOf(t);return-1!==r?void(n.length>1?this._listeners[e]=n.slice(0,r).concat(n.slice(r+1)):delete this._listeners[e]):void 0}},r.prototype.dispatchEvent=function(){var e=arguments[0],t=e.type,n=1===arguments.length?[e]:Array.apply(null,arguments);if(this["on"+t]&&this["on"+t].apply(this,n),t in this._listeners)for(var r=this._listeners[t],o=0;o<r.length;o++)r[o].apply(this,n)},e.exports=r},"./node_modules/sockjs-client/lib/event/trans-message.js":/*!***************************************************************!*\
  !*** ./node_modules/sockjs-client/lib/event/trans-message.js ***!
  \***************************************************************/
/*! no static exports found */
function(e,t,n){"use strict";function r(e){i.call(this),this.initEvent("message",!1,!1),this.data=e}var o=n(/*! inherits */"./node_modules/inherits/inherits_browser.js"),i=n(/*! ./event */"./node_modules/sockjs-client/lib/event/event.js");o(r,i),e.exports=r},"./node_modules/sockjs-client/lib/facade.js":/*!**************************************************!*\
  !*** ./node_modules/sockjs-client/lib/facade.js ***!
  \**************************************************/
/*! no static exports found */
function(e,t,n){"use strict";function r(e){this._transport=e,e.on("message",this._transportMessage.bind(this)),e.on("close",this._transportClose.bind(this))}var o=n(/*! json3 */"./node_modules/json3/lib/json3.js"),i=n(/*! ./utils/iframe */"./node_modules/sockjs-client/lib/utils/iframe.js");r.prototype._transportClose=function(e,t){i.postMessage("c",o.stringify([e,t]))},r.prototype._transportMessage=function(e){i.postMessage("t",e)},r.prototype._send=function(e){this._transport.send(e)},r.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},e.exports=r},"./node_modules/sockjs-client/lib/iframe-bootstrap.js":/*!************************************************************!*\
  !*** ./node_modules/sockjs-client/lib/iframe-bootstrap.js ***!
  \************************************************************/
/*! no static exports found */
function(e,t,n){"use strict";var r=n(/*! ./utils/url */"./node_modules/sockjs-client/lib/utils/url.js"),o=n(/*! ./utils/event */"./node_modules/sockjs-client/lib/utils/event.js"),i=n(/*! json3 */"./node_modules/json3/lib/json3.js"),a=n(/*! ./facade */"./node_modules/sockjs-client/lib/facade.js"),s=n(/*! ./info-iframe-receiver */"./node_modules/sockjs-client/lib/info-iframe-receiver.js"),l=n(/*! ./utils/iframe */"./node_modules/sockjs-client/lib/utils/iframe.js"),u=n(/*! ./location */"./node_modules/sockjs-client/lib/location.js"),c=function(){};c=n(/*! debug */"./node_modules/debug/src/browser.js")("sockjs-client:iframe-bootstrap"),e.exports=function(e,t){var n={};t.forEach(function(e){e.facadeTransport&&(n[e.facadeTransport.transportName]=e.facadeTransport)}),n[s.transportName]=s;var d;e.bootstrap_iframe=function(){var t;l.currentWindowId=u.hash.slice(1);var s=function(o){if(o.source===parent&&(void 0===d&&(d=o.origin),o.origin===d)){var s;try{s=i.parse(o.data)}catch(e){return void c("bad json",o.data)}if(s.windowId===l.currentWindowId)switch(s.type){case"s":var f;try{f=i.parse(s.data)}catch(e){c("bad json",s.data);break}var h=f[0],p=f[1],m=f[2],g=f[3];if(c(h,p,m,g),h!==e.version)throw new Error('Incompatible SockJS! Main site uses: "'+h+'", the iframe: "'+e.version+'".');if(!r.isOriginEqual(m,u.href)||!r.isOriginEqual(g,u.href))throw new Error("Can't connect to different domain from within an iframe. ("+u.href+", "+m+", "+g+")");t=new a(new n[p](m,g));break;case"m":t._send(s.data);break;case"c":t&&t._close(),t=null}}};o.attachEvent("message",s),l.postMessage("s")}}},"./node_modules/sockjs-client/lib/info-ajax.js":/*!*****************************************************!*\
  !*** ./node_modules/sockjs-client/lib/info-ajax.js ***!
  \*****************************************************/
/*! no static exports found */
function(e,t,n){"use strict";function r(e,t){o.call(this);var n=this,r=+new Date;this.xo=new t("GET",e),this.xo.once("finish",function(e,t){var o,i;if(200===e){if(i=+new Date-r,t)try{o=a.parse(t)}catch(e){l("bad json",t)}s.isObject(o)||(o={})}n.emit("finish",o,i),n.removeAllListeners()})}var o=n(/*! events */"./node_modules/sockjs-client/lib/event/emitter.js").EventEmitter,i=n(/*! inherits */"./node_modules/inherits/inherits_browser.js"),a=n(/*! json3 */"./node_modules/json3/lib/json3.js"),s=n(/*! ./utils/object */"./node_modules/sockjs-client/lib/utils/object.js"),l=function(){};l=n(/*! debug */"./node_modules/debug/src/browser.js")("sockjs-client:info-ajax"),i(r,o),r.prototype.close=function(){this.removeAllListeners(),this.xo.close()},e.exports=r},"./node_modules/sockjs-client/lib/info-iframe-receiver.js":/*!****************************************************************!*\
  !*** ./node_modules/sockjs-client/lib/info-iframe-receiver.js ***!
  \****************************************************************/
/*! no static exports found */
function(e,t,n){"use strict";function r(e){var t=this;i.call(this),this.ir=new l(e,s),this.ir.once("finish",function(e,n){t.ir=null,t.emit("message",a.stringify([e,n]))})}var o=n(/*! inherits */"./node_modules/inherits/inherits_browser.js"),i=n(/*! events */"./node_modules/sockjs-client/lib/event/emitter.js").EventEmitter,a=n(/*! json3 */"./node_modules/json3/lib/json3.js"),s=n(/*! ./transport/sender/xhr-local */"./node_modules/sockjs-client/lib/transport/sender/xhr-local.js"),l=n(/*! ./info-ajax */"./node_modules/sockjs-client/lib/info-ajax.js");o(r,i),r.transportName="iframe-info-receiver",r.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},e.exports=r},"./node_modules/sockjs-client/lib/info-iframe.js":/*!*******************************************************!*\
  !*** ./node_modules/sockjs-client/lib/info-iframe.js ***!
  \*******************************************************/
/*! no static exports found */
function(e,t,n){"use strict";(function(t){function r(e,n){var r=this;o.call(this);var i=function(){var t=r.ifr=new l(u.transportName,n,e);t.once("message",function(e){if(e){var t;try{t=a.parse(e)}catch(t){return c("bad json",e),r.emit("finish"),void r.close()}var n=t[0],o=t[1];r.emit("finish",n,o)}r.close()}),t.once("close",function(){r.emit("finish"),r.close()})};t.document.body?i():s.attachEvent("load",i)}var o=n(/*! events */"./node_modules/sockjs-client/lib/event/emitter.js").EventEmitter,i=n(/*! inherits */"./node_modules/inherits/inherits_browser.js"),a=n(/*! json3 */"./node_modules/json3/lib/json3.js"),s=n(/*! ./utils/event */"./node_modules/sockjs-client/lib/utils/event.js"),l=n(/*! ./transport/iframe */"./node_modules/sockjs-client/lib/transport/iframe.js"),u=n(/*! ./info-iframe-receiver */"./node_modules/sockjs-client/lib/info-iframe-receiver.js"),c=function(){};c=n(/*! debug */"./node_modules/debug/src/browser.js")("sockjs-client:info-iframe"),i(r,o),r.enabled=function(){return l.enabled()},r.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},e.exports=r}).call(this,n(/*! ./../../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/sockjs-client/lib/info-receiver.js":/*!*********************************************************!*\
  !*** ./node_modules/sockjs-client/lib/info-receiver.js ***!
  \*********************************************************/
/*! no static exports found */
function(e,t,n){"use strict";function r(e,t){h(e);var n=this;o.call(this),setTimeout(function(){n.doXhr(e,t)},0)}var o=n(/*! events */"./node_modules/sockjs-client/lib/event/emitter.js").EventEmitter,i=n(/*! inherits */"./node_modules/inherits/inherits_browser.js"),a=n(/*! ./utils/url */"./node_modules/sockjs-client/lib/utils/url.js"),s=n(/*! ./transport/sender/xdr */"./node_modules/sockjs-client/lib/transport/sender/xdr.js"),l=n(/*! ./transport/sender/xhr-cors */"./node_modules/sockjs-client/lib/transport/sender/xhr-cors.js"),u=n(/*! ./transport/sender/xhr-local */"./node_modules/sockjs-client/lib/transport/sender/xhr-local.js"),c=n(/*! ./transport/sender/xhr-fake */"./node_modules/sockjs-client/lib/transport/sender/xhr-fake.js"),d=n(/*! ./info-iframe */"./node_modules/sockjs-client/lib/info-iframe.js"),f=n(/*! ./info-ajax */"./node_modules/sockjs-client/lib/info-ajax.js"),h=function(){};h=n(/*! debug */"./node_modules/debug/src/browser.js")("sockjs-client:info-receiver"),i(r,o),r._getReceiver=function(e,t,n){return n.sameOrigin?new f(t,u):l.enabled?new f(t,l):s.enabled&&n.sameScheme?new f(t,s):d.enabled()?new d(e,t):new f(t,c)},r.prototype.doXhr=function(e,t){var n=this,o=a.addPath(e,"/info");h("doXhr",o),this.xo=r._getReceiver(e,o,t),this.timeoutRef=setTimeout(function(){h("timeout"),n._cleanup(!1),n.emit("finish")},r.timeout),this.xo.once("finish",function(e,t){h("finish",e,t),n._cleanup(!0),n.emit("finish",e,t)})},r.prototype._cleanup=function(e){h("_cleanup"),clearTimeout(this.timeoutRef),this.timeoutRef=null,!e&&this.xo&&this.xo.close(),this.xo=null},r.prototype.close=function(){h("close"),this.removeAllListeners(),this._cleanup(!1)},r.timeout=8e3,e.exports=r},"./node_modules/sockjs-client/lib/location.js":/*!****************************************************!*\
  !*** ./node_modules/sockjs-client/lib/location.js ***!
  \****************************************************/
/*! no static exports found */
function(e,t,n){"use strict";(function(t){e.exports=t.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}}).call(this,n(/*! ./../../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/sockjs-client/lib/main.js":/*!************************************************!*\
  !*** ./node_modules/sockjs-client/lib/main.js ***!
  \************************************************/
/*! no static exports found */
function(e,t,n){"use strict";(function(t){function r(e,t,n){if(!(this instanceof r))return new r(e,t,n);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");v.call(this),this.readyState=r.CONNECTING,this.extensions="",this.protocol="",n=n||{},n.protocols_whitelist&&m.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=n.transports,this._transportOptions=n.transportOptions||{},this._timeout=n.timeout||0;var o=n.sessionId||8;if("function"==typeof o)this._generateSessionId=o;else{if("number"!=typeof o)throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return l.string(o)}}this._server=n.server||l.numberString(1e3);var a=new i(e);if(!a.host||!a.protocol)throw new SyntaxError("The URL '"+e+"' is invalid");if(a.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==a.protocol&&"https:"!==a.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+a.protocol+"' is not allowed.");var s="https:"===a.protocol;if("https:"===b.protocol&&!s)throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");t?Array.isArray(t)||(t=[t]):t=[];var u=t.sort();u.forEach(function(e,t){if(!e)throw new SyntaxError("The protocols entry '"+e+"' is invalid.");if(t<u.length-1&&e===u[t+1])throw new SyntaxError("The protocols entry '"+e+"' is duplicated.")});var d=c.getOrigin(b.href);this._origin=d?d.toLowerCase():null,a.set("pathname",a.pathname.replace(/\/+$/,"")),this.url=a.href,C("using url",this.url),this._urlInfo={nullOrigin:!p.hasDomain(),sameOrigin:c.isOriginEqual(this.url,b.href),sameScheme:c.isSchemeEqual(this.url,b.href)},this._ir=new x(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function o(e){return 1e3===e||e>=3e3&&e<=4999}n(/*! ./shims */"./node_modules/sockjs-client/lib/shims.js");var i=n(/*! url-parse */"./node_modules/url-parse/index.js"),a=n(/*! inherits */"./node_modules/inherits/inherits_browser.js"),s=n(/*! json3 */"./node_modules/json3/lib/json3.js"),l=n(/*! ./utils/random */"./node_modules/sockjs-client/lib/utils/random.js"),u=n(/*! ./utils/escape */"./node_modules/sockjs-client/lib/utils/escape.js"),c=n(/*! ./utils/url */"./node_modules/sockjs-client/lib/utils/url.js"),d=n(/*! ./utils/event */"./node_modules/sockjs-client/lib/utils/event.js"),f=n(/*! ./utils/transport */"./node_modules/sockjs-client/lib/utils/transport.js"),h=n(/*! ./utils/object */"./node_modules/sockjs-client/lib/utils/object.js"),p=n(/*! ./utils/browser */"./node_modules/sockjs-client/lib/utils/browser.js"),m=n(/*! ./utils/log */"./node_modules/sockjs-client/lib/utils/log.js"),g=n(/*! ./event/event */"./node_modules/sockjs-client/lib/event/event.js"),v=n(/*! ./event/eventtarget */"./node_modules/sockjs-client/lib/event/eventtarget.js"),b=n(/*! ./location */"./node_modules/sockjs-client/lib/location.js"),y=n(/*! ./event/close */"./node_modules/sockjs-client/lib/event/close.js"),w=n(/*! ./event/trans-message */"./node_modules/sockjs-client/lib/event/trans-message.js"),x=n(/*! ./info-receiver */"./node_modules/sockjs-client/lib/info-receiver.js"),C=function(){};C=n(/*! debug */"./node_modules/debug/src/browser.js")("sockjs-client:main");var k;a(r,v),r.prototype.close=function(e,t){if(e&&!o(e))throw new Error("InvalidAccessError: Invalid code");if(t&&t.length>123)throw new SyntaxError("reason argument has an invalid length");if(this.readyState!==r.CLOSING&&this.readyState!==r.CLOSED){this._close(e||1e3,t||"Normal closure",!0)}},r.prototype.send=function(e){if("string"!=typeof e&&(e=""+e),this.readyState===r.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===r.OPEN&&this._transport.send(u.quote(e))},r.version=n(/*! ./version */"./node_modules/sockjs-client/lib/version.js"),r.CONNECTING=0,r.OPEN=1,r.CLOSING=2,r.CLOSED=3,r.prototype._receiveInfo=function(e,t){if(C("_receiveInfo",t),this._ir=null,!e)return void this._close(1002,"Cannot connect to server");this._rto=this.countRTO(t),this._transUrl=e.base_url?e.base_url:this.url,e=h.extend(e,this._urlInfo),C("info",e);var n=k.filterToEnabled(this._transportsWhitelist,e);this._transports=n.main,C(this._transports.length+" enabled transports"),this._connect()},r.prototype._connect=function(){for(var e=this._transports.shift();e;e=this._transports.shift()){if(C("attempt",e.transportName),e.needBody&&(!t.document.body||void 0!==t.document.readyState&&"complete"!==t.document.readyState&&"interactive"!==t.document.readyState))return C("waiting for body"),this._transports.unshift(e),void d.attachEvent("load",this._connect.bind(this));var n=Math.max(this._timeout,this._rto*e.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),n),C("using timeout",n);var r=c.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),o=this._transportOptions[e.transportName];C("transport url",r);var i=new e(r,this._transUrl,o);return i.on("message",this._transportMessage.bind(this)),i.once("close",this._transportClose.bind(this)),i.transportName=e.transportName,void(this._transport=i)}this._close(2e3,"All transports failed",!1)},r.prototype._transportTimeout=function(){C("_transportTimeout"),this.readyState===r.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},r.prototype._transportMessage=function(e){C("_transportMessage",e);var t,n=this,r=e.slice(0,1),o=e.slice(1);switch(r){case"o":return void this._open();case"h":return this.dispatchEvent(new g("heartbeat")),void C("heartbeat",this.transport)}if(o)try{t=s.parse(o)}catch(e){C("bad json",o)}if(void 0===t)return void C("empty payload",o);switch(r){case"a":Array.isArray(t)&&t.forEach(function(e){C("message",n.transport,e),n.dispatchEvent(new w(e))});break;case"m":C("message",this.transport,t),this.dispatchEvent(new w(t));break;case"c":Array.isArray(t)&&2===t.length&&this._close(t[0],t[1],!0)}},r.prototype._transportClose=function(e,t){if(C("_transportClose",this.transport,e,t),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),!o(e)&&2e3!==e&&this.readyState===r.CONNECTING)return void this._connect();this._close(e,t)},r.prototype._open=function(){C("_open",this._transport&&this._transport.transportName,this.readyState),this.readyState===r.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=r.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new g("open")),C("connected",this.transport)):this._close(1006,"Server lost session")},r.prototype._close=function(e,t,n){C("_close",this.transport,e,t,n,this.readyState);var o=!1;if(this._ir&&(o=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===r.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=r.CLOSING,setTimeout(function(){this.readyState=r.CLOSED,o&&this.dispatchEvent(new g("error"));var i=new y("close");i.wasClean=n||!1,i.code=e||1e3,i.reason=t,this.dispatchEvent(i),this.onmessage=this.onclose=this.onerror=null,C("disconnected")}.bind(this),0)},r.prototype.countRTO=function(e){return e>100?4*e:300+e},e.exports=function(e){/*! ./iframe-bootstrap */
return k=f(e),n("./node_modules/sockjs-client/lib/iframe-bootstrap.js")(r,e),r}}).call(this,n(/*! ./../../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/sockjs-client/lib/shims.js":/*!*************************************************!*\
  !*** ./node_modules/sockjs-client/lib/shims.js ***!
  \*************************************************/
/*! no static exports found */
function(e,t,n){"use strict";function r(e){var t=+e;return t!==t?t=0:0!==t&&t!==1/0&&t!==-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}function o(e){return e>>>0}function i(){}var a,s=Array.prototype,l=Object.prototype,u=Function.prototype,c=String.prototype,d=s.slice,f=l.toString,h=function(e){return"[object Function]"===l.toString.call(e)},p=function(e){return"[object Array]"===f.call(e)},m=function(e){return"[object String]"===f.call(e)},g=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}();a=g?function(e,t,n,r){!r&&t in e||Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(e,t,n,r){!r&&t in e||(e[t]=n)};var v=function(e,t,n){for(var r in t)l.hasOwnProperty.call(t,r)&&a(e,r,t[r],n)},b=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)};v(u,{bind:function(e){var t=this;if(!h(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var n=d.call(arguments,1),r=function(){if(this instanceof l){var r=t.apply(this,n.concat(d.call(arguments)));return Object(r)===r?r:this}return t.apply(e,n.concat(d.call(arguments)))},o=Math.max(0,t.length-n.length),a=[],s=0;s<o;s++)a.push("$"+s);var l=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this, arguments); }")(r);return t.prototype&&(i.prototype=t.prototype,l.prototype=new i,i.prototype=null),l}}),v(Array,{isArray:p});var y=Object("a"),w="a"!==y[0]||!(0 in y);v(s,{forEach:function(e){var t=b(this),n=w&&m(this)?this.split(""):t,r=arguments[1],o=-1,i=n.length>>>0;if(!h(e))throw new TypeError;for(;++o<i;)o in n&&e.call(r,n[o],o,t)}},!function(e){var t=!0,n=!0;return e&&(e.call("foo",function(e,n,r){"object"!=typeof r&&(t=!1)}),e.call([1],function(){n="string"==typeof this},"x")),!!e&&t&&n}(s.forEach));var x=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);v(s,{indexOf:function(e){var t=w&&m(this)?this.split(""):b(this),n=t.length>>>0;if(!n)return-1;var o=0;for(arguments.length>1&&(o=r(arguments[1])),o=o>=0?o:Math.max(0,n+o);o<n;o++)if(o in t&&t[o]===e)return o;return-1}},x);var C=c.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?function(){var e=void 0===/()??/.exec("")[1];c.split=function(t,n){var r=this;if(void 0===t&&0===n)return[];if("[object RegExp]"!==f.call(t))return C.call(this,t,n);var i,a,l,u,c=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":""),h=0;for(t=new RegExp(t.source,d+"g"),r+="",e||(i=new RegExp("^"+t.source+"$(?!\\s)",d)),n=void 0===n?-1>>>0:o(n);(a=t.exec(r))&&!((l=a.index+a[0].length)>h&&(c.push(r.slice(h,a.index)),!e&&a.length>1&&a[0].replace(i,function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(a[e]=void 0)}),a.length>1&&a.index<r.length&&s.push.apply(c,a.slice(1)),u=a[0].length,h=l,c.length>=n));)t.lastIndex===a.index&&t.lastIndex++;return h===r.length?!u&&t.test("")||c.push(""):c.push(r.slice(h)),c.length>n?c.slice(0,n):c}}():"0".split(void 0,0).length&&(c.split=function(e,t){return void 0===e&&0===t?[]:C.call(this,e,t)});var k=c.substr,N="".substr&&"b"!=="0b".substr(-1);v(c,{substr:function(e,t){return k.call(this,e<0&&(e=this.length+e)<0?0:e,t)}},N)},"./node_modules/sockjs-client/lib/transport-list.js":/*!**********************************************************!*\
  !*** ./node_modules/sockjs-client/lib/transport-list.js ***!
  \**********************************************************/
/*! no static exports found */
function(e,t,n){"use strict";e.exports=[n(/*! ./transport/websocket */"./node_modules/sockjs-client/lib/transport/websocket.js"),n(/*! ./transport/xhr-streaming */"./node_modules/sockjs-client/lib/transport/xhr-streaming.js"),n(/*! ./transport/xdr-streaming */"./node_modules/sockjs-client/lib/transport/xdr-streaming.js"),n(/*! ./transport/eventsource */"./node_modules/sockjs-client/lib/transport/eventsource.js"),n(/*! ./transport/lib/iframe-wrap */"./node_modules/sockjs-client/lib/transport/lib/iframe-wrap.js")(n(/*! ./transport/eventsource */"./node_modules/sockjs-client/lib/transport/eventsource.js")),n(/*! ./transport/htmlfile */"./node_modules/sockjs-client/lib/transport/htmlfile.js"),n(/*! ./transport/lib/iframe-wrap */"./node_modules/sockjs-client/lib/transport/lib/iframe-wrap.js")(n(/*! ./transport/htmlfile */"./node_modules/sockjs-client/lib/transport/htmlfile.js")),n(/*! ./transport/xhr-polling */"./node_modules/sockjs-client/lib/transport/xhr-polling.js"),n(/*! ./transport/xdr-polling */"./node_modules/sockjs-client/lib/transport/xdr-polling.js"),n(/*! ./transport/lib/iframe-wrap */"./node_modules/sockjs-client/lib/transport/lib/iframe-wrap.js")(n(/*! ./transport/xhr-polling */"./node_modules/sockjs-client/lib/transport/xhr-polling.js")),n(/*! ./transport/jsonp-polling */"./node_modules/sockjs-client/lib/transport/jsonp-polling.js")]},"./node_modules/sockjs-client/lib/transport/browser/abstract-xhr.js":/*!**************************************************************************!*\
  !*** ./node_modules/sockjs-client/lib/transport/browser/abstract-xhr.js ***!
  \**************************************************************************/
/*! no static exports found */
function(e,t,n){"use strict";(function(t){function r(e,t,n,r){u(e,t);var i=this;o.call(this),setTimeout(function(){i._start(e,t,n,r)},0)}var o=n(/*! events */"./node_modules/sockjs-client/lib/event/emitter.js").EventEmitter,i=n(/*! inherits */"./node_modules/inherits/inherits_browser.js"),a=n(/*! ../../utils/event */"./node_modules/sockjs-client/lib/utils/event.js"),s=n(/*! ../../utils/url */"./node_modules/sockjs-client/lib/utils/url.js"),l=t.XMLHttpRequest,u=function(){};u=n(/*! debug */"./node_modules/debug/src/browser.js")("sockjs-client:browser:xhr"),i(r,o),r.prototype._start=function(e,t,n,o){var i=this;try{this.xhr=new l}catch(e){}if(!this.xhr)return u("no xhr"),this.emit("finish",0,"no xhr support"),void this._cleanup();t=s.addQuery(t,"t="+ +new Date),this.unloadRef=a.unloadAdd(function(){u("unload cleanup"),i._cleanup(!0)});try{this.xhr.open(e,t,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){u("xhr timeout"),i.emit("finish",0,""),i._cleanup(!1)})}catch(e){return u("exception",e),this.emit("finish",0,""),void this._cleanup(!1)}if(o&&o.noCredentials||!r.supportsCORS||(u("withCredentials"),this.xhr.withCredentials=!0),o&&o.headers)for(var c in o.headers)this.xhr.setRequestHeader(c,o.headers[c]);this.xhr.onreadystatechange=function(){if(i.xhr){var e,t,n=i.xhr;switch(u("readyState",n.readyState),n.readyState){case 3:try{t=n.status,e=n.responseText}catch(e){}u("status",t),1223===t&&(t=204),200===t&&e&&e.length>0&&(u("chunk"),i.emit("chunk",t,e));break;case 4:t=n.status,u("status",t),1223===t&&(t=204),12005!==t&&12029!==t||(t=0),u("finish",t,n.responseText),i.emit("finish",t,n.responseText),i._cleanup(!1)}}};try{i.xhr.send(n)}catch(e){i.emit("finish",0,""),i._cleanup(!1)}},r.prototype._cleanup=function(e){if(u("cleanup"),this.xhr){if(this.removeAllListeners(),a.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),e)try{this.xhr.abort()}catch(e){}this.unloadRef=this.xhr=null}},r.prototype.close=function(){u("close"),this._cleanup(!0)},r.enabled=!!l;var c=["Active"].concat("Object").join("X");!r.enabled&&c in t&&(u("overriding xmlhttprequest"),l=function(){try{return new t[c]("Microsoft.XMLHTTP")}catch(e){return null}},r.enabled=!!new l);var d=!1;try{d="withCredentials"in new l}catch(e){}r.supportsCORS=d,e.exports=r}).call(this,n(/*! ./../../../../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/sockjs-client/lib/transport/browser/eventsource.js":/*!*************************************************************************!*\
  !*** ./node_modules/sockjs-client/lib/transport/browser/eventsource.js ***!
  \*************************************************************************/
/*! no static exports found */
function(e,t,n){(function(t){e.exports=t.EventSource}).call(this,n(/*! ./../../../../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/sockjs-client/lib/transport/browser/websocket.js":/*!***********************************************************************!*\
  !*** ./node_modules/sockjs-client/lib/transport/browser/websocket.js ***!
  \***********************************************************************/
/*! no static exports found */
function(e,t,n){"use strict";(function(t){var n=t.WebSocket||t.MozWebSocket;e.exports=n?function(e){return new n(e)}:void 0}).call(this,n(/*! ./../../../../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/sockjs-client/lib/transport/eventsource.js":/*!*****************************************************************!*\
  !*** ./node_modules/sockjs-client/lib/transport/eventsource.js ***!
  \*****************************************************************/
/*! no static exports found */
function(e,t,n){"use strict";function r(e){if(!r.enabled())throw new Error("Transport created when disabled");i.call(this,e,"/eventsource",a,s)}var o=n(/*! inherits */"./node_modules/inherits/inherits_browser.js"),i=n(/*! ./lib/ajax-based */"./node_modules/sockjs-client/lib/transport/lib/ajax-based.js"),a=n(/*! ./receiver/eventsource */"./node_modules/sockjs-client/lib/transport/receiver/eventsource.js"),s=n(/*! ./sender/xhr-cors */"./node_modules/sockjs-client/lib/transport/sender/xhr-cors.js"),l=n(/*! eventsource */"./node_modules/sockjs-client/lib/transport/browser/eventsource.js");o(r,i),r.enabled=function(){return!!l},r.transportName="eventsource",r.roundTrips=2,e.exports=r},"./node_modules/sockjs-client/lib/transport/htmlfile.js":/*!**************************************************************!*\
  !*** ./node_modules/sockjs-client/lib/transport/htmlfile.js ***!
  \**************************************************************/
/*! no static exports found */
function(e,t,n){"use strict";function r(e){if(!i.enabled)throw new Error("Transport created when disabled");s.call(this,e,"/htmlfile",i,a)}var o=n(/*! inherits */"./node_modules/inherits/inherits_browser.js"),i=n(/*! ./receiver/htmlfile */"./node_modules/sockjs-client/lib/transport/receiver/htmlfile.js"),a=n(/*! ./sender/xhr-local */"./node_modules/sockjs-client/lib/transport/sender/xhr-local.js"),s=n(/*! ./lib/ajax-based */"./node_modules/sockjs-client/lib/transport/lib/ajax-based.js");o(r,s),r.enabled=function(e){return i.enabled&&e.sameOrigin},r.transportName="htmlfile",r.roundTrips=2,e.exports=r},"./node_modules/sockjs-client/lib/transport/iframe.js":/*!************************************************************!*\
  !*** ./node_modules/sockjs-client/lib/transport/iframe.js ***!
  \************************************************************/
/*! no static exports found */
function(e,t,n){"use strict";function r(e,t,n){if(!r.enabled())throw new Error("Transport created when disabled");a.call(this);var o=this;this.origin=l.getOrigin(n),this.baseUrl=n,this.transUrl=t,this.transport=e,this.windowId=d.string(8);var i=l.addPath(n,"/iframe.html")+"#"+this.windowId;f(e,t,i),this.iframeObj=u.createIframe(i,function(e){f("err callback"),o.emit("close",1006,"Unable to load an iframe ("+e+")"),o.close()}),this.onmessageCallback=this._message.bind(this),c.attachEvent("message",this.onmessageCallback)}var o=n(/*! inherits */"./node_modules/inherits/inherits_browser.js"),i=n(/*! json3 */"./node_modules/json3/lib/json3.js"),a=n(/*! events */"./node_modules/sockjs-client/lib/event/emitter.js").EventEmitter,s=n(/*! ../version */"./node_modules/sockjs-client/lib/version.js"),l=n(/*! ../utils/url */"./node_modules/sockjs-client/lib/utils/url.js"),u=n(/*! ../utils/iframe */"./node_modules/sockjs-client/lib/utils/iframe.js"),c=n(/*! ../utils/event */"./node_modules/sockjs-client/lib/utils/event.js"),d=n(/*! ../utils/random */"./node_modules/sockjs-client/lib/utils/random.js"),f=function(){};f=n(/*! debug */"./node_modules/debug/src/browser.js")("sockjs-client:transport:iframe"),o(r,a),r.prototype.close=function(){if(f("close"),this.removeAllListeners(),this.iframeObj){c.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(e){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},r.prototype._message=function(e){if(f("message",e.data),!l.isOriginEqual(e.origin,this.origin))return void f("not same origin",e.origin,this.origin);var t;try{t=i.parse(e.data)}catch(t){return void f("bad json",e.data)}if(t.windowId!==this.windowId)return void f("mismatched window id",t.windowId,this.windowId);switch(t.type){case"s":this.iframeObj.loaded(),this.postMessage("s",i.stringify([s,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var n;try{n=i.parse(t.data)}catch(e){return void f("bad json",t.data)}this.emit("close",n[0],n[1]),this.close()}},r.prototype.postMessage=function(e,t){f("postMessage",e,t),this.iframeObj.post(i.stringify({windowId:this.windowId,type:e,data:t||""}),this.origin)},r.prototype.send=function(e){f("send",e),this.postMessage("m",e)},r.enabled=function(){return u.iframeEnabled},r.transportName="iframe",r.roundTrips=2,e.exports=r},"./node_modules/sockjs-client/lib/transport/jsonp-polling.js":/*!*******************************************************************!*\
  !*** ./node_modules/sockjs-client/lib/transport/jsonp-polling.js ***!
  \*******************************************************************/
/*! no static exports found */
function(e,t,n){"use strict";(function(t){function r(e){if(!r.enabled())throw new Error("Transport created when disabled");i.call(this,e,"/jsonp",s,a)}var o=n(/*! inherits */"./node_modules/inherits/inherits_browser.js"),i=n(/*! ./lib/sender-receiver */"./node_modules/sockjs-client/lib/transport/lib/sender-receiver.js"),a=n(/*! ./receiver/jsonp */"./node_modules/sockjs-client/lib/transport/receiver/jsonp.js"),s=n(/*! ./sender/jsonp */"./node_modules/sockjs-client/lib/transport/sender/jsonp.js");o(r,i),r.enabled=function(){return!!t.document},r.transportName="jsonp-polling",r.roundTrips=1,r.needBody=!0,e.exports=r}).call(this,n(/*! ./../../../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/sockjs-client/lib/transport/lib/ajax-based.js":/*!********************************************************************!*\
  !*** ./node_modules/sockjs-client/lib/transport/lib/ajax-based.js ***!
  \********************************************************************/
/*! no static exports found */
function(e,t,n){"use strict";function r(e){return function(t,n,r){l("create ajax sender",t,n);var o={};"string"==typeof n&&(o.headers={"Content-type":"text/plain"});var i=a.addPath(t,"/xhr_send"),s=new e("POST",i,n,o);return s.once("finish",function(e){if(l("finish",e),s=null,200!==e&&204!==e)return r(new Error("http status "+e));r()}),function(){l("abort"),s.close(),s=null;var e=new Error("Aborted");e.code=1e3,r(e)}}}function o(e,t,n,o){s.call(this,e,t,r(o),n,o)}var i=n(/*! inherits */"./node_modules/inherits/inherits_browser.js"),a=n(/*! ../../utils/url */"./node_modules/sockjs-client/lib/utils/url.js"),s=n(/*! ./sender-receiver */"./node_modules/sockjs-client/lib/transport/lib/sender-receiver.js"),l=function(){};l=n(/*! debug */"./node_modules/debug/src/browser.js")("sockjs-client:ajax-based"),i(o,s),e.exports=o},"./node_modules/sockjs-client/lib/transport/lib/buffered-sender.js":/*!*************************************************************************!*\
  !*** ./node_modules/sockjs-client/lib/transport/lib/buffered-sender.js ***!
  \*************************************************************************/
/*! no static exports found */
function(e,t,n){"use strict";function r(e,t){a(e),i.call(this),this.sendBuffer=[],this.sender=t,this.url=e}var o=n(/*! inherits */"./node_modules/inherits/inherits_browser.js"),i=n(/*! events */"./node_modules/sockjs-client/lib/event/emitter.js").EventEmitter,a=function(){};a=n(/*! debug */"./node_modules/debug/src/browser.js")("sockjs-client:buffered-sender"),o(r,i),r.prototype.send=function(e){a("send",e),this.sendBuffer.push(e),this.sendStop||this.sendSchedule()},r.prototype.sendScheduleWait=function(){a("sendScheduleWait");var e,t=this;this.sendStop=function(){a("sendStop"),t.sendStop=null,clearTimeout(e)},e=setTimeout(function(){a("timeout"),t.sendStop=null,t.sendSchedule()},25)},r.prototype.sendSchedule=function(){a("sendSchedule",this.sendBuffer.length);var e=this;if(this.sendBuffer.length>0){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,function(t){e.sendStop=null,t?(a("error",t),e.emit("close",t.code||1006,"Sending error: "+t),e.close()):e.sendScheduleWait()}),this.sendBuffer=[]}},r.prototype._cleanup=function(){a("_cleanup"),this.removeAllListeners()},r.prototype.close=function(){a("close"),this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},e.exports=r},"./node_modules/sockjs-client/lib/transport/lib/iframe-wrap.js":/*!*********************************************************************!*\
  !*** ./node_modules/sockjs-client/lib/transport/lib/iframe-wrap.js ***!
  \*********************************************************************/
/*! no static exports found */
function(e,t,n){"use strict";(function(t){var r=n(/*! inherits */"./node_modules/inherits/inherits_browser.js"),o=n(/*! ../iframe */"./node_modules/sockjs-client/lib/transport/iframe.js"),i=n(/*! ../../utils/object */"./node_modules/sockjs-client/lib/utils/object.js");e.exports=function(e){function n(t,n){o.call(this,e.transportName,t,n)}return r(n,o),n.enabled=function(n,r){if(!t.document)return!1;var a=i.extend({},r);return a.sameOrigin=!0,e.enabled(a)&&o.enabled()},n.transportName="iframe-"+e.transportName,n.needBody=!0,n.roundTrips=o.roundTrips+e.roundTrips-1,n.facadeTransport=e,n}}).call(this,n(/*! ./../../../../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/sockjs-client/lib/transport/lib/polling.js":/*!*****************************************************************!*\
  !*** ./node_modules/sockjs-client/lib/transport/lib/polling.js ***!
  \*****************************************************************/
/*! no static exports found */
function(e,t,n){"use strict";function r(e,t,n){a(t),i.call(this),this.Receiver=e,this.receiveUrl=t,this.AjaxObject=n,this._scheduleReceiver()}var o=n(/*! inherits */"./node_modules/inherits/inherits_browser.js"),i=n(/*! events */"./node_modules/sockjs-client/lib/event/emitter.js").EventEmitter,a=function(){};a=n(/*! debug */"./node_modules/debug/src/browser.js")("sockjs-client:polling"),o(r,i),r.prototype._scheduleReceiver=function(){a("_scheduleReceiver");var e=this,t=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);t.on("message",function(t){a("message",t),e.emit("message",t)}),t.once("close",function(n,r){a("close",n,r,e.pollIsClosing),e.poll=t=null,e.pollIsClosing||("network"===r?e._scheduleReceiver():(e.emit("close",n||1006,r),e.removeAllListeners()))})},r.prototype.abort=function(){a("abort"),this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},e.exports=r},"./node_modules/sockjs-client/lib/transport/lib/sender-receiver.js":/*!*************************************************************************!*\
  !*** ./node_modules/sockjs-client/lib/transport/lib/sender-receiver.js ***!
  \*************************************************************************/
/*! no static exports found */
function(e,t,n){"use strict";function r(e,t,n,r,o){var u=i.addPath(e,t);l(u);var c=this;a.call(this,e,n),this.poll=new s(r,u,o),this.poll.on("message",function(e){l("poll message",e),c.emit("message",e)}),this.poll.once("close",function(e,t){l("poll close",e,t),c.poll=null,c.emit("close",e,t),c.close()})}var o=n(/*! inherits */"./node_modules/inherits/inherits_browser.js"),i=n(/*! ../../utils/url */"./node_modules/sockjs-client/lib/utils/url.js"),a=n(/*! ./buffered-sender */"./node_modules/sockjs-client/lib/transport/lib/buffered-sender.js"),s=n(/*! ./polling */"./node_modules/sockjs-client/lib/transport/lib/polling.js"),l=function(){};l=n(/*! debug */"./node_modules/debug/src/browser.js")("sockjs-client:sender-receiver"),o(r,a),r.prototype.close=function(){a.prototype.close.call(this),l("close"),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},e.exports=r},"./node_modules/sockjs-client/lib/transport/receiver/eventsource.js":/*!**************************************************************************!*\
  !*** ./node_modules/sockjs-client/lib/transport/receiver/eventsource.js ***!
  \**************************************************************************/
/*! no static exports found */
function(e,t,n){"use strict";function r(e){s(e),i.call(this);var t=this,n=this.es=new a(e);n.onmessage=function(e){s("message",e.data),t.emit("message",decodeURI(e.data))},n.onerror=function(e){s("error",n.readyState,e);var r=2!==n.readyState?"network":"permanent";t._cleanup(),t._close(r)}}var o=n(/*! inherits */"./node_modules/inherits/inherits_browser.js"),i=n(/*! events */"./node_modules/sockjs-client/lib/event/emitter.js").EventEmitter,a=n(/*! eventsource */"./node_modules/sockjs-client/lib/transport/browser/eventsource.js"),s=function(){};s=n(/*! debug */"./node_modules/debug/src/browser.js")("sockjs-client:receiver:eventsource"),o(r,i),r.prototype.abort=function(){s("abort"),this._cleanup(),this._close("user")},r.prototype._cleanup=function(){s("cleanup");var e=this.es;e&&(e.onmessage=e.onerror=null,e.close(),this.es=null)},r.prototype._close=function(e){s("close",e);var t=this;setTimeout(function(){t.emit("close",null,e),t.removeAllListeners()},200)},e.exports=r},"./node_modules/sockjs-client/lib/transport/receiver/htmlfile.js":/*!***********************************************************************!*\
  !*** ./node_modules/sockjs-client/lib/transport/receiver/htmlfile.js ***!
  \***********************************************************************/
/*! no static exports found */
function(e,t,n){"use strict";(function(t){function r(e){u(e),s.call(this);var n=this;i.polluteGlobalNamespace(),this.id="a"+l.string(6),e=a.addQuery(e,"c="+decodeURIComponent(i.WPrefix+"."+this.id)),u("using htmlfile",r.htmlfileEnabled);var o=r.htmlfileEnabled?i.createHtmlfile:i.createIframe;t[i.WPrefix][this.id]={start:function(){u("start"),n.iframeObj.loaded()},message:function(e){u("message",e),n.emit("message",e)},stop:function(){u("stop"),n._cleanup(),n._close("network")}},this.iframeObj=o(e,function(){u("callback"),n._cleanup(),n._close("permanent")})}var o=n(/*! inherits */"./node_modules/inherits/inherits_browser.js"),i=n(/*! ../../utils/iframe */"./node_modules/sockjs-client/lib/utils/iframe.js"),a=n(/*! ../../utils/url */"./node_modules/sockjs-client/lib/utils/url.js"),s=n(/*! events */"./node_modules/sockjs-client/lib/event/emitter.js").EventEmitter,l=n(/*! ../../utils/random */"./node_modules/sockjs-client/lib/utils/random.js"),u=function(){};u=n(/*! debug */"./node_modules/debug/src/browser.js")("sockjs-client:receiver:htmlfile"),o(r,s),r.prototype.abort=function(){u("abort"),this._cleanup(),this._close("user")},r.prototype._cleanup=function(){u("_cleanup"),this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete t[i.WPrefix][this.id]},r.prototype._close=function(e){u("_close",e),this.emit("close",null,e),this.removeAllListeners()},r.htmlfileEnabled=!1;var c=["Active"].concat("Object").join("X");if(c in t)try{r.htmlfileEnabled=!!new t[c]("htmlfile")}catch(e){}r.enabled=r.htmlfileEnabled||i.iframeEnabled,e.exports=r}).call(this,n(/*! ./../../../../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/sockjs-client/lib/transport/receiver/jsonp.js":/*!********************************************************************!*\
  !*** ./node_modules/sockjs-client/lib/transport/receiver/jsonp.js ***!
  \********************************************************************/
/*! no static exports found */
function(e,t,n){"use strict";(function(t){function r(e){c(e);var n=this;u.call(this),o.polluteGlobalNamespace(),this.id="a"+i.string(6);var a=s.addQuery(e,"c="+encodeURIComponent(o.WPrefix+"."+this.id));t[o.WPrefix][this.id]=this._callback.bind(this),this._createScript(a),this.timeoutId=setTimeout(function(){c("timeout"),n._abort(new Error("JSONP script loaded abnormally (timeout)"))},r.timeout)}var o=n(/*! ../../utils/iframe */"./node_modules/sockjs-client/lib/utils/iframe.js"),i=n(/*! ../../utils/random */"./node_modules/sockjs-client/lib/utils/random.js"),a=n(/*! ../../utils/browser */"./node_modules/sockjs-client/lib/utils/browser.js"),s=n(/*! ../../utils/url */"./node_modules/sockjs-client/lib/utils/url.js"),l=n(/*! inherits */"./node_modules/inherits/inherits_browser.js"),u=n(/*! events */"./node_modules/sockjs-client/lib/event/emitter.js").EventEmitter,c=function(){};c=n(/*! debug */"./node_modules/debug/src/browser.js")("sockjs-client:receiver:jsonp"),l(r,u),r.prototype.abort=function(){if(c("abort"),t[o.WPrefix][this.id]){var e=new Error("JSONP user aborted read");e.code=1e3,this._abort(e)}},r.timeout=35e3,r.scriptErrorTimeout=1e3,r.prototype._callback=function(e){c("_callback",e),this._cleanup(),this.aborting||(e&&(c("message",e),this.emit("message",e)),this.emit("close",null,"network"),this.removeAllListeners())},r.prototype._abort=function(e){c("_abort",e),this._cleanup(),this.aborting=!0,this.emit("close",e.code,e.message),this.removeAllListeners()},r.prototype._cleanup=function(){if(c("_cleanup"),clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var e=this.script;e.parentNode.removeChild(e),e.onreadystatechange=e.onerror=e.onload=e.onclick=null,this.script=null}delete t[o.WPrefix][this.id]},r.prototype._scriptError=function(){c("_scriptError");var e=this;this.errorTimer||(this.errorTimer=setTimeout(function(){e.loadedOkay||e._abort(new Error("JSONP script loaded abnormally (onerror)"))},r.scriptErrorTimeout))},r.prototype._createScript=function(e){c("_createScript",e);var n,r=this,o=this.script=t.document.createElement("script");if(o.id="a"+i.string(8),o.src=e,o.type="text/javascript",o.charset="UTF-8",o.onerror=this._scriptError.bind(this),o.onload=function(){c("onload"),r._abort(new Error("JSONP script loaded abnormally (onload)"))},o.onreadystatechange=function(){if(c("onreadystatechange",o.readyState),/loaded|closed/.test(o.readyState)){if(o&&o.htmlFor&&o.onclick){r.loadedOkay=!0;try{o.onclick()}catch(e){}}o&&r._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},void 0===o.async&&t.document.attachEvent)if(a.isOpera())n=this.script2=t.document.createElement("script"),n.text="try{var a = document.getElementById('"+o.id+"'); if(a)a.onerror();}catch(x){};",o.async=n.async=!1;else{try{o.htmlFor=o.id,o.event="onclick"}catch(e){}o.async=!0}void 0!==o.async&&(o.async=!0);var s=t.document.getElementsByTagName("head")[0];s.insertBefore(o,s.firstChild),n&&s.insertBefore(n,s.firstChild)},e.exports=r}).call(this,n(/*! ./../../../../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/sockjs-client/lib/transport/receiver/xhr.js":/*!******************************************************************!*\
  !*** ./node_modules/sockjs-client/lib/transport/receiver/xhr.js ***!
  \******************************************************************/
/*! no static exports found */
function(e,t,n){"use strict";function r(e,t){a(e),i.call(this);var n=this;this.bufferPosition=0,this.xo=new t("POST",e,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(e,t){a("finish",e,t),n._chunkHandler(e,t),n.xo=null;var r=200===e?"network":"permanent";a("close",r),n.emit("close",null,r),n._cleanup()})}var o=n(/*! inherits */"./node_modules/inherits/inherits_browser.js"),i=n(/*! events */"./node_modules/sockjs-client/lib/event/emitter.js").EventEmitter,a=function(){};a=n(/*! debug */"./node_modules/debug/src/browser.js")("sockjs-client:receiver:xhr"),o(r,i),r.prototype._chunkHandler=function(e,t){if(a("_chunkHandler",e),200===e&&t)for(var n=-1;;this.bufferPosition+=n+1){var r=t.slice(this.bufferPosition);if(-1===(n=r.indexOf("\n")))break;var o=r.slice(0,n);o&&(a("message",o),this.emit("message",o))}},r.prototype._cleanup=function(){a("_cleanup"),this.removeAllListeners()},r.prototype.abort=function(){a("abort"),this.xo&&(this.xo.close(),a("close"),this.emit("close",null,"user"),this.xo=null),this._cleanup()},e.exports=r},"./node_modules/sockjs-client/lib/transport/sender/jsonp.js":/*!******************************************************************!*\
  !*** ./node_modules/sockjs-client/lib/transport/sender/jsonp.js ***!
  \******************************************************************/
/*! no static exports found */
function(e,t,n){"use strict";(function(t){function r(e){s("createIframe",e);try{return t.document.createElement('<iframe name="'+e+'">')}catch(r){var n=t.document.createElement("iframe");return n.name=e,n}}function o(){s("createForm"),l=t.document.createElement("form"),l.style.display="none",l.style.position="absolute",l.method="POST",l.enctype="application/x-www-form-urlencoded",l.acceptCharset="UTF-8",u=t.document.createElement("textarea"),u.name="d",l.appendChild(u),t.document.body.appendChild(l)}var i=n(/*! ../../utils/random */"./node_modules/sockjs-client/lib/utils/random.js"),a=n(/*! ../../utils/url */"./node_modules/sockjs-client/lib/utils/url.js"),s=function(){};s=n(/*! debug */"./node_modules/debug/src/browser.js")("sockjs-client:sender:jsonp");var l,u;e.exports=function(e,t,n){s(e,t),l||o();var c="a"+i.string(8);l.target=c,l.action=a.addQuery(a.addPath(e,"/jsonp_send"),"i="+c);var d=r(c);d.id=c,d.style.display="none",l.appendChild(d);try{u.value=t}catch(e){}l.submit();var f=function(e){s("completed",c,e),d.onerror&&(d.onreadystatechange=d.onerror=d.onload=null,setTimeout(function(){s("cleaning up",c),d.parentNode.removeChild(d),d=null},500),u.value="",n(e))};return d.onerror=function(){s("onerror",c),f()},d.onload=function(){s("onload",c),f()},d.onreadystatechange=function(e){s("onreadystatechange",c,d.readyState,e),"complete"===d.readyState&&f()},function(){s("aborted",c),f(new Error("Aborted"))}}}).call(this,n(/*! ./../../../../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/sockjs-client/lib/transport/sender/xdr.js":/*!****************************************************************!*\
  !*** ./node_modules/sockjs-client/lib/transport/sender/xdr.js ***!
  \****************************************************************/
/*! no static exports found */
function(e,t,n){"use strict";(function(t){function r(e,t,n){u(e,t);var r=this;o.call(this),setTimeout(function(){r._start(e,t,n)},0)}var o=n(/*! events */"./node_modules/sockjs-client/lib/event/emitter.js").EventEmitter,i=n(/*! inherits */"./node_modules/inherits/inherits_browser.js"),a=n(/*! ../../utils/event */"./node_modules/sockjs-client/lib/utils/event.js"),s=n(/*! ../../utils/browser */"./node_modules/sockjs-client/lib/utils/browser.js"),l=n(/*! ../../utils/url */"./node_modules/sockjs-client/lib/utils/url.js"),u=function(){};u=n(/*! debug */"./node_modules/debug/src/browser.js")("sockjs-client:sender:xdr"),i(r,o),r.prototype._start=function(e,n,r){u("_start");var o=this,i=new t.XDomainRequest;n=l.addQuery(n,"t="+ +new Date),i.onerror=function(){u("onerror"),o._error()},i.ontimeout=function(){u("ontimeout"),o._error()},i.onprogress=function(){u("progress",i.responseText),o.emit("chunk",200,i.responseText)},i.onload=function(){u("load"),o.emit("finish",200,i.responseText),o._cleanup(!1)},this.xdr=i,this.unloadRef=a.unloadAdd(function(){o._cleanup(!0)});try{this.xdr.open(e,n),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(r)}catch(e){this._error()}},r.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},r.prototype._cleanup=function(e){if(u("cleanup",e),this.xdr){if(this.removeAllListeners(),a.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,e)try{this.xdr.abort()}catch(e){}this.unloadRef=this.xdr=null}},r.prototype.close=function(){u("close"),this._cleanup(!0)},r.enabled=!(!t.XDomainRequest||!s.hasDomain()),e.exports=r}).call(this,n(/*! ./../../../../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/sockjs-client/lib/transport/sender/xhr-cors.js":/*!*********************************************************************!*\
  !*** ./node_modules/sockjs-client/lib/transport/sender/xhr-cors.js ***!
  \*********************************************************************/
/*! no static exports found */
function(e,t,n){"use strict";function r(e,t,n,r){i.call(this,e,t,n,r)}var o=n(/*! inherits */"./node_modules/inherits/inherits_browser.js"),i=n(/*! ../driver/xhr */"./node_modules/sockjs-client/lib/transport/browser/abstract-xhr.js");o(r,i),r.enabled=i.enabled&&i.supportsCORS,e.exports=r},"./node_modules/sockjs-client/lib/transport/sender/xhr-fake.js":/*!*********************************************************************!*\
  !*** ./node_modules/sockjs-client/lib/transport/sender/xhr-fake.js ***!
  \*********************************************************************/
/*! no static exports found */
function(e,t,n){"use strict";function r(){var e=this;o.call(this),this.to=setTimeout(function(){e.emit("finish",200,"{}")},r.timeout)}var o=n(/*! events */"./node_modules/sockjs-client/lib/event/emitter.js").EventEmitter;n(/*! inherits */"./node_modules/inherits/inherits_browser.js")(r,o),r.prototype.close=function(){clearTimeout(this.to)},r.timeout=2e3,e.exports=r},"./node_modules/sockjs-client/lib/transport/sender/xhr-local.js":/*!**********************************************************************!*\
  !*** ./node_modules/sockjs-client/lib/transport/sender/xhr-local.js ***!
  \**********************************************************************/
/*! no static exports found */
function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n,{noCredentials:!0})}var o=n(/*! inherits */"./node_modules/inherits/inherits_browser.js"),i=n(/*! ../driver/xhr */"./node_modules/sockjs-client/lib/transport/browser/abstract-xhr.js");o(r,i),r.enabled=i.enabled,e.exports=r},"./node_modules/sockjs-client/lib/transport/websocket.js":/*!***************************************************************!*\
  !*** ./node_modules/sockjs-client/lib/transport/websocket.js ***!
  \***************************************************************/
/*! no static exports found */
function(e,t,n){"use strict";function r(e,t,n){if(!r.enabled())throw new Error("Transport created when disabled");s.call(this),u("constructor",e);var a=this,c=i.addPath(e,"/websocket");c="https"===c.slice(0,5)?"wss"+c.slice(5):"ws"+c.slice(4),this.url=c,this.ws=new l(this.url,[],n),this.ws.onmessage=function(e){u("message event",e.data),a.emit("message",e.data)},this.unloadRef=o.unloadAdd(function(){u("unload"),a.ws.close()}),this.ws.onclose=function(e){u("close event",e.code,e.reason),a.emit("close",e.code,e.reason),a._cleanup()},this.ws.onerror=function(e){u("error event",e),a.emit("close",1006,"WebSocket connection broken"),a._cleanup()}}var o=n(/*! ../utils/event */"./node_modules/sockjs-client/lib/utils/event.js"),i=n(/*! ../utils/url */"./node_modules/sockjs-client/lib/utils/url.js"),a=n(/*! inherits */"./node_modules/inherits/inherits_browser.js"),s=n(/*! events */"./node_modules/sockjs-client/lib/event/emitter.js").EventEmitter,l=n(/*! ./driver/websocket */"./node_modules/sockjs-client/lib/transport/browser/websocket.js"),u=function(){};u=n(/*! debug */"./node_modules/debug/src/browser.js")("sockjs-client:websocket"),a(r,s),r.prototype.send=function(e){var t="["+e+"]";u("send",t),this.ws.send(t)},r.prototype.close=function(){u("close");var e=this.ws;this._cleanup(),e&&e.close()},r.prototype._cleanup=function(){u("_cleanup");var e=this.ws;e&&(e.onmessage=e.onclose=e.onerror=null),o.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},r.enabled=function(){return u("enabled"),!!l},r.transportName="websocket",r.roundTrips=2,e.exports=r},"./node_modules/sockjs-client/lib/transport/xdr-polling.js":/*!*****************************************************************!*\
  !*** ./node_modules/sockjs-client/lib/transport/xdr-polling.js ***!
  \*****************************************************************/
/*! no static exports found */
function(e,t,n){"use strict";function r(e){if(!l.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr",s,l)}var o=n(/*! inherits */"./node_modules/inherits/inherits_browser.js"),i=n(/*! ./lib/ajax-based */"./node_modules/sockjs-client/lib/transport/lib/ajax-based.js"),a=n(/*! ./xdr-streaming */"./node_modules/sockjs-client/lib/transport/xdr-streaming.js"),s=n(/*! ./receiver/xhr */"./node_modules/sockjs-client/lib/transport/receiver/xhr.js"),l=n(/*! ./sender/xdr */"./node_modules/sockjs-client/lib/transport/sender/xdr.js");o(r,i),r.enabled=a.enabled,r.transportName="xdr-polling",r.roundTrips=2,e.exports=r},"./node_modules/sockjs-client/lib/transport/xdr-streaming.js":/*!*******************************************************************!*\
  !*** ./node_modules/sockjs-client/lib/transport/xdr-streaming.js ***!
  \*******************************************************************/
/*! no static exports found */
function(e,t,n){"use strict";function r(e){if(!s.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr_streaming",a,s)}var o=n(/*! inherits */"./node_modules/inherits/inherits_browser.js"),i=n(/*! ./lib/ajax-based */"./node_modules/sockjs-client/lib/transport/lib/ajax-based.js"),a=n(/*! ./receiver/xhr */"./node_modules/sockjs-client/lib/transport/receiver/xhr.js"),s=n(/*! ./sender/xdr */"./node_modules/sockjs-client/lib/transport/sender/xdr.js");o(r,i),r.enabled=function(e){return!e.cookie_needed&&!e.nullOrigin&&(s.enabled&&e.sameScheme)},r.transportName="xdr-streaming",r.roundTrips=2,e.exports=r},"./node_modules/sockjs-client/lib/transport/xhr-polling.js":/*!*****************************************************************!*\
  !*** ./node_modules/sockjs-client/lib/transport/xhr-polling.js ***!
  \*****************************************************************/
/*! no static exports found */
function(e,t,n){"use strict";function r(e){if(!l.enabled&&!s.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr",a,s)}var o=n(/*! inherits */"./node_modules/inherits/inherits_browser.js"),i=n(/*! ./lib/ajax-based */"./node_modules/sockjs-client/lib/transport/lib/ajax-based.js"),a=n(/*! ./receiver/xhr */"./node_modules/sockjs-client/lib/transport/receiver/xhr.js"),s=n(/*! ./sender/xhr-cors */"./node_modules/sockjs-client/lib/transport/sender/xhr-cors.js"),l=n(/*! ./sender/xhr-local */"./node_modules/sockjs-client/lib/transport/sender/xhr-local.js");o(r,i),r.enabled=function(e){return!e.nullOrigin&&(!(!l.enabled||!e.sameOrigin)||s.enabled)},r.transportName="xhr-polling",r.roundTrips=2,e.exports=r},"./node_modules/sockjs-client/lib/transport/xhr-streaming.js":/*!*******************************************************************!*\
  !*** ./node_modules/sockjs-client/lib/transport/xhr-streaming.js ***!
  \*******************************************************************/
/*! no static exports found */
function(e,t,n){"use strict";(function(t){function r(e){if(!l.enabled&&!s.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr_streaming",a,s)}var o=n(/*! inherits */"./node_modules/inherits/inherits_browser.js"),i=n(/*! ./lib/ajax-based */"./node_modules/sockjs-client/lib/transport/lib/ajax-based.js"),a=n(/*! ./receiver/xhr */"./node_modules/sockjs-client/lib/transport/receiver/xhr.js"),s=n(/*! ./sender/xhr-cors */"./node_modules/sockjs-client/lib/transport/sender/xhr-cors.js"),l=n(/*! ./sender/xhr-local */"./node_modules/sockjs-client/lib/transport/sender/xhr-local.js"),u=n(/*! ../utils/browser */"./node_modules/sockjs-client/lib/utils/browser.js");o(r,i),r.enabled=function(e){return!e.nullOrigin&&(!u.isOpera()&&s.enabled)},r.transportName="xhr-streaming",r.roundTrips=2,r.needBody=!!t.document,e.exports=r}).call(this,n(/*! ./../../../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/sockjs-client/lib/utils/browser-crypto.js":/*!****************************************************************!*\
  !*** ./node_modules/sockjs-client/lib/utils/browser-crypto.js ***!
  \****************************************************************/
/*! no static exports found */
function(e,t,n){"use strict";(function(t){t.crypto&&t.crypto.getRandomValues?e.exports.randomBytes=function(e){var n=new Uint8Array(e);return t.crypto.getRandomValues(n),n}:e.exports.randomBytes=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=Math.floor(256*Math.random());return t}}).call(this,n(/*! ./../../../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/sockjs-client/lib/utils/browser.js":/*!*********************************************************!*\
  !*** ./node_modules/sockjs-client/lib/utils/browser.js ***!
  \*********************************************************/
/*! no static exports found */
function(e,t,n){"use strict";(function(t){e.exports={isOpera:function(){return t.navigator&&/opera/i.test(t.navigator.userAgent)},isKonqueror:function(){return t.navigator&&/konqueror/i.test(t.navigator.userAgent)},hasDomain:function(){if(!t.document)return!0;try{return!!t.document.domain}catch(e){return!1}}}}).call(this,n(/*! ./../../../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/sockjs-client/lib/utils/escape.js":/*!********************************************************!*\
  !*** ./node_modules/sockjs-client/lib/utils/escape.js ***!
  \********************************************************/
/*! no static exports found */
function(e,t,n){"use strict";var r,o=n(/*! json3 */"./node_modules/json3/lib/json3.js"),i=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,a=function(e){var t,n={},r=[];for(t=0;t<65536;t++)r.push(String.fromCharCode(t));return e.lastIndex=0,r.join("").replace(e,function(e){return n[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""}),e.lastIndex=0,n};e.exports={quote:function(e){var t=o.stringify(e);return i.lastIndex=0,i.test(t)?(r||(r=a(i)),t.replace(i,function(e){return r[e]})):t}}},"./node_modules/sockjs-client/lib/utils/event.js":/*!*******************************************************!*\
  !*** ./node_modules/sockjs-client/lib/utils/event.js ***!
  \*******************************************************/
/*! no static exports found */
function(e,t,n){"use strict";(function(t){var r=n(/*! ./random */"./node_modules/sockjs-client/lib/utils/random.js"),o={},i=!1,a=t.chrome&&t.chrome.app&&t.chrome.app.runtime;e.exports={attachEvent:function(e,n){void 0!==t.addEventListener?t.addEventListener(e,n,!1):t.document&&t.attachEvent&&(t.document.attachEvent("on"+e,n),t.attachEvent("on"+e,n))},detachEvent:function(e,n){void 0!==t.addEventListener?t.removeEventListener(e,n,!1):t.document&&t.detachEvent&&(t.document.detachEvent("on"+e,n),t.detachEvent("on"+e,n))},unloadAdd:function(e){if(a)return null;var t=r.string(8);return o[t]=e,i&&setTimeout(this.triggerUnloadCallbacks,0),t},unloadDel:function(e){e in o&&delete o[e]},triggerUnloadCallbacks:function(){for(var e in o)o[e](),delete o[e]}};var s=function(){i||(i=!0,e.exports.triggerUnloadCallbacks())};a||e.exports.attachEvent("unload",s)}).call(this,n(/*! ./../../../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/sockjs-client/lib/utils/iframe.js":/*!********************************************************!*\
  !*** ./node_modules/sockjs-client/lib/utils/iframe.js ***!
  \********************************************************/
/*! no static exports found */
function(e,t,n){"use strict";(function(t){var r=n(/*! ./event */"./node_modules/sockjs-client/lib/utils/event.js"),o=n(/*! json3 */"./node_modules/json3/lib/json3.js"),i=n(/*! ./browser */"./node_modules/sockjs-client/lib/utils/browser.js"),a=function(){};a=n(/*! debug */"./node_modules/debug/src/browser.js")("sockjs-client:utils:iframe"),e.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){e.exports.WPrefix in t||(t[e.exports.WPrefix]={})},postMessage:function(n,r){t.parent!==t?t.parent.postMessage(o.stringify({windowId:e.exports.currentWindowId,type:n,data:r||""}),"*"):a("Cannot postMessage, no parent window.",n,r)},createIframe:function(e,n){var o,i,s=t.document.createElement("iframe"),l=function(){a("unattach"),clearTimeout(o);try{s.onload=null}catch(e){}s.onerror=null},u=function(){a("cleanup"),s&&(l(),setTimeout(function(){s&&s.parentNode.removeChild(s),s=null},0),r.unloadDel(i))},c=function(e){a("onerror",e),s&&(u(),n(e))},d=function(e,t){a("post",e,t),setTimeout(function(){try{s&&s.contentWindow&&s.contentWindow.postMessage(e,t)}catch(e){}},0)};return s.src=e,s.style.display="none",s.style.position="absolute",s.onerror=function(){c("onerror")},s.onload=function(){a("onload"),clearTimeout(o),o=setTimeout(function(){c("onload timeout")},2e3)},t.document.body.appendChild(s),o=setTimeout(function(){c("timeout")},15e3),i=r.unloadAdd(u),{post:d,cleanup:u,loaded:l}},createHtmlfile:function(n,o){var i,s,l,u=["Active"].concat("Object").join("X"),c=new t[u]("htmlfile"),d=function(){clearTimeout(i),l.onerror=null},f=function(){c&&(d(),r.unloadDel(s),l.parentNode.removeChild(l),l=c=null,CollectGarbage())},h=function(e){a("onerror",e),c&&(f(),o(e))},p=function(e,t){try{setTimeout(function(){l&&l.contentWindow&&l.contentWindow.postMessage(e,t)},0)}catch(e){}};c.open(),c.write('<html><script>document.domain="'+t.document.domain+'";<\/script></html>'),c.close(),c.parentWindow[e.exports.WPrefix]=t[e.exports.WPrefix];var m=c.createElement("div");return c.body.appendChild(m),l=c.createElement("iframe"),m.appendChild(l),l.src=n,l.onerror=function(){h("onerror")},i=setTimeout(function(){h("timeout")},15e3),s=r.unloadAdd(f),{post:p,cleanup:f,loaded:d}}},e.exports.iframeEnabled=!1,t.document&&(e.exports.iframeEnabled=("function"==typeof t.postMessage||"object"==typeof t.postMessage)&&!i.isKonqueror())}).call(this,n(/*! ./../../../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/sockjs-client/lib/utils/log.js":/*!*****************************************************!*\
  !*** ./node_modules/sockjs-client/lib/utils/log.js ***!
  \*****************************************************/
/*! no static exports found */
function(e,t,n){"use strict";(function(t){var n={};["log","debug","warn"].forEach(function(e){var r;try{r=t.console&&t.console[e]&&t.console[e].apply}catch(e){}n[e]=r?function(){return t.console[e].apply(t.console,arguments)}:"log"===e?function(){}:n.log}),e.exports=n}).call(this,n(/*! ./../../../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/sockjs-client/lib/utils/object.js":/*!********************************************************!*\
  !*** ./node_modules/sockjs-client/lib/utils/object.js ***!
  \********************************************************/
/*! no static exports found */
function(e,t,n){"use strict";e.exports={isObject:function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,n,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}}},"./node_modules/sockjs-client/lib/utils/random.js":/*!********************************************************!*\
  !*** ./node_modules/sockjs-client/lib/utils/random.js ***!
  \********************************************************/
/*! no static exports found */
function(e,t,n){"use strict";var r=n(/*! crypto */"./node_modules/sockjs-client/lib/utils/browser-crypto.js"),o="abcdefghijklmnopqrstuvwxyz012345";e.exports={string:function(e){for(var t=o.length,n=r.randomBytes(e),i=[],a=0;a<e;a++)i.push(o.substr(n[a]%t,1));return i.join("")},number:function(e){return Math.floor(Math.random()*e)},numberString:function(e){var t=(""+(e-1)).length;return(new Array(t+1).join("0")+this.number(e)).slice(-t)}}},"./node_modules/sockjs-client/lib/utils/transport.js":/*!***********************************************************!*\
  !*** ./node_modules/sockjs-client/lib/utils/transport.js ***!
  \***********************************************************/
/*! no static exports found */
function(e,t,n){"use strict";var r=function(){};r=n(/*! debug */"./node_modules/debug/src/browser.js")("sockjs-client:utils:transport"),e.exports=function(e){return{filterToEnabled:function(t,n){var o={main:[],facade:[]};return t?"string"==typeof t&&(t=[t]):t=[],e.forEach(function(e){if(e)return"websocket"===e.transportName&&!1===n.websocket?void r("disabled from server","websocket"):t.length&&-1===t.indexOf(e.transportName)?void r("not in whitelist",e.transportName):void(e.enabled(n)?(r("enabled",e.transportName),o.main.push(e),e.facadeTransport&&o.facade.push(e.facadeTransport)):r("disabled",e.transportName))}),o}}}},"./node_modules/sockjs-client/lib/utils/url.js":/*!*****************************************************!*\
  !*** ./node_modules/sockjs-client/lib/utils/url.js ***!
  \*****************************************************/
/*! no static exports found */
function(e,t,n){"use strict";var r=n(/*! url-parse */"./node_modules/url-parse/index.js"),o=function(){};o=n(/*! debug */"./node_modules/debug/src/browser.js")("sockjs-client:utils:url"),e.exports={getOrigin:function(e){if(!e)return null;var t=new r(e);if("file:"===t.protocol)return null;var n=t.port;return n||(n="https:"===t.protocol?"443":"80"),t.protocol+"//"+t.hostname+":"+n},isOriginEqual:function(e,t){var n=this.getOrigin(e)===this.getOrigin(t);return o("same",e,t,n),n},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var n=e.split("?");return n[0]+t+(n[1]?"?"+n[1]:"")},addQuery:function(e,t){return e+(-1===e.indexOf("?")?"?"+t:"&"+t)}}},"./node_modules/sockjs-client/lib/version.js":/*!***************************************************!*\
  !*** ./node_modules/sockjs-client/lib/version.js ***!
  \***************************************************/
/*! no static exports found */
function(e,t){e.exports="1.4.0"},"./node_modules/url-parse/index.js":/*!*****************************************!*\
  !*** ./node_modules/url-parse/index.js ***!
  \*****************************************/
/*! no static exports found */
function(e,t,n){"use strict";(function(t){function r(e){return(e||"").toString().replace(p,"")}function o(e){var n;n="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};var r=n.location||{};e=e||r;var o,i={},a=typeof e;if("blob:"===e.protocol)i=new s(unescape(e.pathname),{});else if("string"===a){i=new s(e,{});for(o in g)delete i[o]}else if("object"===a){for(o in e)o in g||(i[o]=e[o]);void 0===i.slashes&&(i.slashes=f.test(e.href))}return i}function i(e){e=r(e);var t=h.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function a(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,o=n[r-1],i=!1,a=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),a++):a&&(0===r&&(i=!0),n.splice(r,1),a--);return i&&n.unshift(""),"."!==o&&".."!==o||n.push(""),n.join("/")}function s(e,t,n){if(e=r(e),!(this instanceof s))return new s(e,t,n);var l,u,f,h,p,g,v=m.slice(),b=typeof t,y=this,w=0;for("object"!==b&&"string"!==b&&(n=t,t=null),n&&"function"!=typeof n&&(n=d.parse),t=o(t),u=i(e||""),l=!u.protocol&&!u.slashes,y.slashes=u.slashes||l&&t.slashes,y.protocol=u.protocol||t.protocol||"",e=u.rest,u.slashes||(v[3]=[/(.*)/,"pathname"]);w<v.length;w++)h=v[w],"function"!=typeof h?(f=h[0],g=h[1],f!==f?y[g]=e:"string"==typeof f?~(p=e.indexOf(f))&&("number"==typeof h[2]?(y[g]=e.slice(0,p),e=e.slice(p+h[2])):(y[g]=e.slice(p),e=e.slice(0,p))):(p=f.exec(e))&&(y[g]=p[1],e=e.slice(0,p.index)),y[g]=y[g]||(l&&h[3]?t[g]||"":""),h[4]&&(y[g]=y[g].toLowerCase())):e=h(e);n&&(y.query=n(y.query)),l&&t.slashes&&"/"!==y.pathname.charAt(0)&&(""!==y.pathname||""!==t.pathname)&&(y.pathname=a(y.pathname,t.pathname)),c(y.port,y.protocol)||(y.host=y.hostname,y.port=""),y.username=y.password="",y.auth&&(h=y.auth.split(":"),y.username=h[0]||"",y.password=h[1]||""),y.origin=y.protocol&&y.host&&"file:"!==y.protocol?y.protocol+"//"+y.host:"null",y.href=y.toString()}function l(e,t,n){var r=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||d.parse)(t)),r[e]=t;break;case"port":r[e]=t,c(t,r.protocol)?t&&(r.host=r.hostname+":"+t):(r.host=r.hostname,r[e]="");break;case"hostname":r[e]=t,r.port&&(t+=":"+r.port),r.host=t;break;case"host":r[e]=t,/:\d+$/.test(t)?(t=t.split(":"),r.port=t.pop(),r.hostname=t.join(":")):(r.hostname=t,r.port="");break;case"protocol":r.protocol=t.toLowerCase(),r.slashes=!n;break;case"pathname":case"hash":if(t){var o="pathname"===e?"/":"#";r[e]=t.charAt(0)!==o?o+t:t}else r[e]=t;break;default:r[e]=t}for(var i=0;i<m.length;i++){var a=m[i];a[4]&&(r[a[1]]=r[a[1]].toLowerCase())}return r.origin=r.protocol&&r.host&&"file:"!==r.protocol?r.protocol+"//"+r.host:"null",r.href=r.toString(),r}function u(e){e&&"function"==typeof e||(e=d.stringify);var t,n=this,r=n.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var o=r+(n.slashes?"//":"");return n.username&&(o+=n.username,n.password&&(o+=":"+n.password),o+="@"),o+=n.host+n.pathname,t="object"==typeof n.query?e(n.query):n.query,t&&(o+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(o+=n.hash),o}var c=n(/*! requires-port */"./node_modules/requires-port/index.js"),d=n(/*! querystringify */"./node_modules/querystringify/index.js"),f=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,h=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,p=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+"),m=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],g={hash:1,query:1};s.prototype={set:l,toString:u},s.extractProtocol=i,s.location=o,s.trimLeft=r,s.qs=d,e.exports=s}).call(this,n(/*! ./../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/webpack/buildin/amd-options.js":/*!****************************************!*\
  !*** (webpack)/buildin/amd-options.js ***!
  \****************************************/
/*! no static exports found */
function(e,t){(function(t){e.exports=t}).call(this,{})},"./node_modules/webpack/buildin/global.js":/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},"./node_modules/webpack/buildin/module.js":/*!***********************************!*\
  !*** (webpack)/buildin/module.js ***!
  \***********************************/
/*! no static exports found */
function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},"./src/OtClient.js":/*!*************************!*\
  !*** ./src/OtClient.js ***!
  \*************************/
/*! exports provided: OtClient */
function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"OtClient",function(){return S});var r=n(/*! @babel/runtime/helpers/typeof */"./node_modules/@babel/runtime/helpers/typeof.js"),o=n.n(r),i=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(i),s=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),l=n.n(s),u=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),c=n.n(u),d=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),f=n.n(d),h=n(/*! @babel/runtime/helpers/assertThisInitialized */"./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),p=n.n(h),m=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),g=n.n(m),v=n(/*! @teamwork/ot-rich-text/lib/Operation */"./node_modules/@teamwork/ot-rich-text/lib/Operation.js"),b=n(/*! @teamwork/ot-rich-text/lib/Action */"./node_modules/@teamwork/ot-rich-text/lib/Action.js"),y=n(/*! events */"./node_modules/events/events.js"),w=n(/*! sockjs-client */"./node_modules/sockjs-client/lib/entry.js"),x=n.n(w),C=n(/*! ./util/ShareDB */"./src/util/ShareDB.js"),k=n(/*! ./tinymce/TinyMceSync */"./src/tinymce/TinyMceSync.js"),N=n(/*! ./codeMirror/CodeMirrorSync */"./src/codeMirror/CodeMirrorSync.js"),_=n(/*! ./util/misc */"./src/util/misc.js"),S=function(t){function n(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.collectionName,o=void 0===r?"test":r,i=t.documentId,s=void 0===i?"1":i,l=t.domNode,u=void 0===l?null:l,d=t.url,h=void 0===d?"":d,m=t.debug,g=void 0!==m&&m,v=t.getAccessToken,b=void 0===v?function(e){return setTimeout(e,0,null,"")}:v,y=t.reconnectMinDelay,w=void 0===y?1e3:y,x=t.reconnectMaxDelay,_=void 0===x?3e4:x,S=t.reconnectDelayFactor,T=void 0===S?1.5:S,E=t.config,O=t.presenceEnabled,A=t.presenceDelay,D=t.asyncScrollUpdate,R=t.shouldConnect,M=void 0===R||R,P=t.betaAuth,L=void 0!==P&&P,I=t.codeMirror,j=void 0===I?null:I;return a()(this,n),e=c()(this,f()(n).call(this)),e._collectionName=o,e._documentId=s,e._domNode=u,e._betaAuth=L,e._url=h,e._reconnectMinDelay=w,e._reconnectMaxDelay=_,e._reconnectDelayFactor=T,e._shouldConnect=!!M,e._connecting=!1,e._connected=!1,e._reconnectAttempt=-1,e._connectionTimeoutHandle=null,e._socket={readyState:3,close:function(){}},e._getAccessToken=b,e._connection=new C.default.Connection(e._socket),e._doc=e._connection.get(e._collectionName,e._documentId),e._sync=j?new N.CodeMirrorSync({doc:e._doc,codeMirror:j}):new k.TinyMceSync({doc:e._doc,domNode:u,debug:g,config:E,presenceEnabled:O,presenceDelay:A,asyncScrollUpdate:D}),e._patchRequests=new Map,e._originalHandleMessage=e._connection.handleMessage.bind(e._connection),e._connection.handleMessage=e._extendedHandleMessage.bind(p()(e)),e._sync.on("presence",e._onPresence=e._onEvent.bind(p()(e),"presence")),e._doc.on("load",e._onLoad=e._onEvent.bind(p()(e),"load")),e._doc.on("op",e._onOperation=e._onEvent.bind(p()(e),"operation")),e._doc.on("nothing pending",e._onNothingPending=e._onEvent.bind(p()(e),"nothingPending")),e._doc.on("error",e._onDocumentError=e._onEvent.bind(p()(e),"documentError")),e._connection.on("error",e._onError=e._onEvent.bind(p()(e),"error")),e._connection.on("connection error",e._onConnectionError=e._onEvent.bind(p()(e),"connectionError")),e._connection.on("connecting",e._onConnecting=e._onEvent.bind(p()(e),"connecting")),e._connection.on("connected",e._onConnected=e._onEvent.bind(p()(e),"connected")),e._connection.on("closed",e._onClosed=e._onEvent.bind(p()(e),"disconnected")),e._connection.on("stopped",e._onStopped=e._onEvent.bind(p()(e),"disconnected")),e._connection.on("disconnected",e._onDisconnected=e._onEvent.bind(p()(e),"disconnected")),e._connection.on("state",e._onState=e._onState.bind(p()(e))),e._doc.subscribe(),e._updateConnection(),e}return g()(n,t),l()(n,[{key:"dispose",value:function(){null!=this._getAccessToken&&(this._getAccessToken=null,clearTimeout(this._connectionTimeoutHandle),this.removeAllListeners(),this._sync.removeListener("presence",this._onPresence),this._doc.removeListener("load",this._onLoad),this._doc.removeListener("op",this._onOperation),this._doc.removeListener("nothing pending",this._onNothingPending),this._doc.removeListener("error",this._onDocumentError),this._connection.removeListener("error",this._onError),this._connection.removeListener("connection error",this._onConnectionError),this._connection.removeListener("connecting",this._onConnecting),this._connection.removeListener("connected",this._onConnected),this._connection.removeListener("closed",this._onClosed),this._connection.removeListener("stopped",this._onStopped),this._connection.removeListener("disconnected",this._onDisconnected),this._connection.removeListener("state",this._onState),this._sync.dispose(),this._connection.close())}},{key:"canUndo",value:function(){return this._sync.canUndo()}},{key:"canRedo",value:function(){return this._sync.canRedo()}},{key:"undo",value:function(){this._sync.undo()}},{key:"redo",value:function(){this._sync.redo()}},{key:"hasPending",value:function(){return this._doc.hasPending()}},{key:"whenNothingPending",value:function(e){this._doc.whenNothingPending(e)}},{key:"contentToOtModel",value:function(e){return this._sync.contentToOtModel(e)}},{key:"compareOtModels",value:function(e,t,n){return Object(_.compareOtModels)(e,t,n)}},{key:"getRootAttribute",value:function(e){return this._sync.getRootAttribute(e)}},{key:"setRootAttribute",value:function(e,t){this._sync.setRootAttribute(e,t)}},{key:"patch",value:function(t,n,r,i){var a=this;if((0|t)!==t||t<0){var s=new Error("patch: Version must be a non-negative integer.");return e.nextTick(function(){return i?i(s):a.emit("error",s)})}if("connected"!==this._connection.state){var l=new Error("patch: Failed because connection is not up.");return e.nextTick(function(){return i?i(l):a.emit("error",l)})}for(var u=this._sync.contentToOtModel(n),c=this._sync.contentToOtModel(r),d=Object(v.diffX)(u,c)[1],f=0,h=d.length;f<h;++f)if(!Object(b.isRetain)(d[f])){var p=function(){var t=new Error("patch: It may change attributes only.");return{v:e.nextTick(function(){return i?i(t):a.emit("error",t)})}}();if("object"===o()(p))return p.v}var m=this._connection.seq++;this._connection.send({a:"patch",c:this._collectionName,d:this._documentId,v:t,op:d,src:this._connection.id,seq:m}),this._patchRequests.set(m,i)}},{key:"_extendedHandleMessage",value:function(e){if("patch"===e.a){var t=null;if(e.error&&(t=new Error(e.error.message),t.code=e.error.code,t.data=e,delete e.error),!t){var n=this._connection.getExisting(e.c,e.d);n&&n.fetch()}var r=this._patchRequests.get(e.seq);return this._patchRequests.delete(e.seq),r?r(t):this.emit("error",t)}this._originalHandleMessage(e)}},{key:"_updateConnection",value:function(){this._shouldConnect===this._connected||this._connecting||(this._shouldConnect?this._connect():this._connection.close())}},{key:"_connect",value:function(){var e=this,t=this._reconnectAttempt<0?this._reconnectAttempt=0:Math.min(this._reconnectMaxDelay,Math.round(Math.pow(this._reconnectDelayFactor,this._reconnectAttempt++)*this._reconnectMinDelay));this._connecting=!0,this._connectionTimeoutHandle=setTimeout(function(){if(!e._shouldConnect)return void(e._connecting=!1);e._getAccessToken(function(t,n){if(e._getAccessToken)return e._shouldConnect?t?(e._connect(),void e.emit("connectionError",t)):void e._createSocket(n,function(t,n){return e._getAccessToken?e._shouldConnect?t?(e._connect(),void e.emit("connectionError",t)):(e._socket=n,void e._connection.bindToSocket(e._socket)):(e._connecting=!1,void(n&&n.close())):void(n&&n.close())}):void(e._connecting=!1)})},t)}},{key:"_onEvent",value:function(){this.emit.apply(this,arguments)}},{key:"_onState",value:function(t){var n=this;if("connected"!==t&&this._patchRequests.size>0){var r=this._patchRequests;this._patchRequests=new Map,e.nextTick(function(){var e=new Error("patch: Failed because connection was lost."),t=!1;r.forEach(function(n){n?n(e):t=!0}),t&&n.emit("error",e)})}"connected"===t?(this._reconnectAttempt=-1,this._connecting=!1,this._connected=!0,this._updateConnection()):"disconnected"!==t&&"stopped"!==t&&"closed"!==t||(this._connecting=!1,this._connected=!1,this._updateConnection())}},{key:"_createSocket",value:function(e,t){return this._auth(new x.a(this._url+"/ot/v2/ot",void 0,{transports:["websocket","xhr-streaming"],sessionId:32}),e,t)}},{key:"_auth",value:function(e,t,n){function r(){e.removeEventListener("open",i),e.removeEventListener("message",a),e.removeEventListener("error",s),e.removeEventListener("close",l)}var o=this,i=function(){var n={collectionName:o._collectionName,documentId:o._documentId,accessToken:t};o._betaAuth&&(n.beta=!0),e.send(JSON.stringify(n))},a=function(t){var o=t.data;r();var i=JSON.parse(o);if("OK"===i.status)n(null,e);else{e.close();var a=new Error("Auth failed");a.statusCode=i.statusCode,a.statusMessage=i.statusMessage,n(a)}},s=function(t){r(),e.close(),n(t)},l=function(){r(),n(new Error("Socket closed before auth completed"))};e.addEventListener("open",i),e.addEventListener("message",a),e.addEventListener("error",s),e.addEventListener("close",l)}},{key:"version",get:function(){return this._doc.version}},{key:"otModel",get:function(){return this._doc.data}},{key:"virtualDom",get:function(){return this._sync.virtualDom}},{key:"realDom",get:function(){return this._sync.realDom}},{key:"presenceEnabled",get:function(){return this._sync.presenceEnabled},set:function(e){this._sync.presenceEnabled=e}},{key:"presence",get:function(){return this._sync.presence}},{key:"connectionState",get:function(){var e=this._connection.state;return"connected"===e||"connecting"===e?e:"disconnected"}},{key:"debug",get:function(){return this._sync.debug},set:function(e){this._sync.debug=e}},{key:"shouldConnect",get:function(){return this._shouldConnect},set:function(e){this._reconnectAttempt=-1,this._shouldConnect=!!e,this._updateConnection()}}]),n}(y.EventEmitter)}.call(this,n(/*! ./../node_modules/process/browser.js */"./node_modules/process/browser.js"))},"./src/codeMirror/CodeMirrorPresence.js":/*!**********************************************!*\
  !*** ./src/codeMirror/CodeMirrorPresence.js ***!
  \**********************************************/
/*! exports provided: CodeMirrorPresence */
function(e,t,n){"use strict";n.r(t),n.d(t,"CodeMirrorPresence",function(){return v});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),o=n.n(r),i=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(i),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),l=n.n(s),u=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(u),d=n(/*! @babel/runtime/helpers/assertThisInitialized */"./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),f=n.n(d),h=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),p=n.n(h),m=n(/*! events */"./node_modules/events/events.js"),g=n(/*! ../util/colors */"./src/util/colors.js"),v=function(e){function t(e,n,r){var i;return o()(this,t),i=l()(this,c()(t).call(this)),i.codeMirror=e,i.src=n,i.userId=r,i.color="#fff",i.backgroundColor=Object(g.claimColor)(i.codeMirror,i.userId),i.custom=null,i.numberOfChanges=0,i.showingLabel=!1,i.hoveringLabel=!1,i.caret=null,i.barNode=document.createElement("DIV"),i.barNode.style.position="absolute",i.barNode.style.top="0",i.barNode.style.left="-1px",i.barNode.style.width="2px",i.barNode.style.height="100%",i.barNode.style.backgroundColor=i.backgroundColor,i.headNode=document.createElement("DIV"),i.headNode.style.position="absolute",i.headNode.style.bottom="100%",i.headNode.style.left="-4px",i.headNode.style.width="8px",i.headNode.style.height="8px",i.headNode.style.opacity="0.9",i.headNode.style.transition="opacity 0.15s ease",i.headNode.style.borderRadius="4px",i.headNode.style.backgroundColor=i.backgroundColor,i.onImageError=i.onImageError.bind(f()(i)),i.avatarNode=document.createElement("IMG"),i.avatarNode.classList.add("ot-caret__avatar"),i.avatarNode.style.width="16px",i.avatarNode.style.height="16px",i.avatarNode.style.maxWidth="none",i.avatarNode.style.margin="0 3px -4px 0",i.avatarNode.style.borderRadius="8px",i.avatarNode.style.border="1px solid",i.avatarNode.style.borderColor=i.color,i.avatarNode.addEventListener("error",i.onImageError),i.textNode=document.createTextNode(""),i.labelNode=document.createElement("DIV"),i.labelNode.classList.add("ot-caret__label"),i.labelNode.style.position="absolute",i.labelNode.style.left="-4px",i.labelNode.style.bottom="100%",i.labelNode.style.padding="4px",i.labelNode.style.whiteSpace="nowrap",i.labelNode.style.opacity="0",i.labelNode.style.transition="opacity 0.15s ease",i.labelNode.style.zIndex="1",i.labelNode.style.borderRadius="4px",i.labelNode.style.color=i.color,i.labelNode.style.backgroundColor=i.backgroundColor,i.labelNode.appendChild(i.avatarNode),i.labelNode.appendChild(i.textNode),i.onMouseEnter=i.onMouseEnter.bind(f()(i)),i.onMouseLeave=i.onMouseLeave.bind(f()(i)),i.node=document.createElement("DIV"),i.node.classList.add("ot-caret"),i.node.style.position="absolute",i.node.style.left="0",i.node.style.width="0",i.node.style.userSelect="none",i.node.addEventListener("mouseenter",i.onMouseEnter),i.node.addEventListener("mouseleave",i.onMouseLeave),i.node.appendChild(i.headNode),i.node.appendChild(i.barNode),i.node.appendChild(i.labelNode),i.containerNode=document.createElement("SPAN"),i.containerNode.style.position="relative",i.containerNode.appendChild(i.node),i.caretOptions={widget:i.containerNode,handleMouseEvents:!0},i.labelTimeoutHandle=null,i.onLabelTimeout=i.onLabelTimeout.bind(f()(i)),i.selection=null,i.selectionOptions={css:"background-color: ".concat(Object(g.colorWithOpacity)(i.backgroundColor,"0.2"),";"),handleMouseEvents:!0},i.selectionTimeoutHandle=null,i.onSelectionTimeout=i.onSelectionTimeout.bind(f()(i)),i.label="",i.avatar="",i}return p()(t,e),a()(t,[{key:"scrollIntoView",value:function(){if(this.caret){var e=this.caret.find();e&&(this.codeMirror.scrollIntoView(e,w),this.showLabel(),this.hoveringLabel||this.setLabelTimeout())}}},{key:"update",value:function(e,t){var n=e.s[0];if(this.setCaret(n),t&&this.setSelectionTimeout(),this.selectionExpired||this.setSelection(n),t){var r=e.c,o=this.numberOfChanges!==r;this.numberOfChanges=r,this.showLabel(),this.hoveringLabel||this.setLabelTimeout(),this.emit("activity",o)}}},{key:"destroy",value:function(){Object(g.releaseColor)(this.codeMirror,this.userId),this.clearCaret(),this.clearLabelTimeout(),this.clearSelection(),this.clearSelectionTimeout()}},{key:"setCaret",value:function(e){if(this.clearCaret(),e){var t=e[1]-1,n=this.codeMirror.posFromIndex(t);this.caret=this.codeMirror.setBookmark(n,this.caretOptions);var r=this.codeMirror.cursorCoords(n,"local"),o=r.bottom-r.top;this.node.style.height=o+"px",0===this.containerNode.parentNode.getBoundingClientRect().height?(this.node.style.top="0",this.node.style.marginTop="0"):(this.node.style.top="50%",this.node.style.marginTop=-Math.floor(o/2)+"px")}}},{key:"clearCaret",value:function(){this.caret&&(this.caret.clear(),this.caret=null)}},{key:"showLabel",value:function(){this.showingLabel||(this.showingLabel=!0,this.labelNode.style.opacity="0.9",this.headNode.style.opacity="0")}},{key:"hideLabel",value:function(){this.showingLabel&&(this.showingLabel=!1,this.labelNode.style.opacity="0",this.headNode.style.opacity="0.9")}},{key:"setLabelTimeout",value:function(){this.clearLabelTimeout(),this.labelTimeoutHandle=setTimeout(this.onLabelTimeout,b)}},{key:"clearLabelTimeout",value:function(){this.labelTimeoutHandle&&(clearTimeout(this.labelTimeoutHandle),this.labelTimeoutHandle=null)}},{key:"onLabelTimeout",value:function(){this.clearLabelTimeout(),this.hideLabel()}},{key:"onImageError",value:function(){this.avatarNode.style.display="none"}},{key:"onMouseEnter",value:function(){this.hoveringLabel=!0,this.showLabel(),this.clearLabelTimeout()}},{key:"onMouseLeave",value:function(){this.hoveringLabel=!1,this.setLabelTimeout()}},{key:"setSelection",value:function(e){if(this.clearSelection(),e){var t=e[0]-1,n=e[1]-1;if(t!==n){var r=Math.min(t,n),o=Math.max(t,n),i=this.codeMirror.posFromIndex(r),a=this.codeMirror.posFromIndex(o);this.selection=this.codeMirror.markText(i,a,this.selectionOptions)}}}},{key:"clearSelection",value:function(){this.selection&&(this.selection.clear(),this.selection=null)}},{key:"setSelectionTimeout",value:function(){this.clearSelectionTimeout(),this.selectionTimeoutHandle=setTimeout(this.onSelectionTimeout,y)}},{key:"clearSelectionTimeout",value:function(){this.selectionTimeoutHandle&&(clearTimeout(this.selectionTimeoutHandle),this.selectionTimeoutHandle=null)}},{key:"onSelectionTimeout",value:function(){this.clearSelectionTimeout(),this.clearSelection()}},{key:"label",get:function(){return this._label},set:function(e){this._label=""+e,this.textNode.data=this.label}},{key:"avatar",get:function(){return this._avatar},set:function(e){this._avatar=""+e,this.avatar?(this.avatarNode.style.display="",this.avatarNode.setAttribute("src",this.avatar)):(this.avatarNode.style.display="none",this.avatarNode.removeAttribute("src"))}},{key:"selectionExpired",get:function(){return null===this.selectionTimeoutHandle}}]),t}(m.EventEmitter),b=1e3,y=2e4,w=50},"./src/codeMirror/CodeMirrorSync.js":/*!******************************************!*\
  !*** ./src/codeMirror/CodeMirrorSync.js ***!
  \******************************************/
/*! exports provided: CodeMirrorSync */
function(e,t,n){"use strict";function r(e){return Object(w.isInsertText)(e)&&!/[\r\n]/.test(Object(w.getText)(e))}function o(e){return Object(w.isInsertEmbed)(e)&&"BR"===Object(w.getNodeName)(e)}function i(e,t){var n=e.anchor,r=e.focus,o=n<0?n:Object(x.transformCursor)(n,t,!1);return{anchor:o,focus:n===r?o:r<0?r:Object(x.transformCursor)(r,t,!1)}}function a(e){for(var t=0,n=0,r=e.length;n<r;++n){var o=e[n];if(!Object(w.isRetain)(o))break;t+=Object(w.getLength)(o)}return t}function s(e){for(var t=0,n=0,r=e.length;n<r;++n){var o=e[n];(Object(w.isInsert)(o)||Object(w.isRetain)(o))&&(t+=Object(w.getLength)(o))}return{anchor:t,focus:t}}n.r(t),n.d(t,"CodeMirrorSync",function(){return S});var l=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),u=n.n(l),c=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),d=n.n(c),f=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),h=n.n(f),p=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=n.n(p),g=n(/*! @babel/runtime/helpers/assertThisInitialized */"./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),v=n.n(g),b=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),y=n.n(b),w=n(/*! @teamwork/ot-rich-text/lib/Action */"./node_modules/@teamwork/ot-rich-text/lib/Action.js"),x=n(/*! @teamwork/ot-rich-text/lib/Operation */"./node_modules/@teamwork/ot-rich-text/lib/Operation.js"),C=n(/*! events */"./node_modules/events/events.js"),k=n(/*! lodash.throttle */"./node_modules/lodash.throttle/index.js"),N=n.n(k),_=n(/*! ./CodeMirrorPresence */"./src/codeMirror/CodeMirrorPresence.js"),S=function(e){function t(e){var n,r=e.codeMirror,o=e.doc,i=e.presenceDelay,a=void 0===i?500:i;return u()(this,t),n=h()(this,m()(t).call(this)),n.codeMirror=r,n.doc=o,n.undoManager=o.connection.createUndoManager(),n.settingEditorContent=!1,n.lastSelection=null,n.changeNumber=0,n.presence=Object.create(null),n.rootNodeOpen=null,n.rootNodeClose=null,n.scheduleSubmitPresence=N()(n.submitPresence.bind(v()(n)),a,{leading:!1}),n.onLoad=n.onLoad.bind(v()(n)),n.onOperation=n.onOperation.bind(v()(n)),n.onPresence=n.onPresence.bind(v()(n)),n.onBeforeChange=n.onBeforeChange.bind(v()(n)),n.onChange=n.onChange.bind(v()(n)),n.onCursorActivity=n.onCursorActivity.bind(v()(n)),n.doc.on("load",n.onLoad),n.doc.on("op",n.onOperation),n.doc.on("presence",n.onPresence),n.codeMirror.doc.on("beforeChange",n.onBeforeChange),n.codeMirror.doc.on("change",n.onChange),n.codeMirror.doc.on("cursorActivity",n.onCursorActivity),n}return y()(t,e),d()(t,[{key:"dispose",value:function(){this.doc.removeListener("load",this.onLoad),this.doc.removeListener("op",this.onOperation),this.doc.removeListener("presence",this.onPresence),this.codeMirror.doc.off("beforeChange",this.onBeforeChange),this.codeMirror.doc.off("change",this.onChange),this.codeMirror.doc.off("cursorActivity",this.onCursorActivity),this.scheduleSubmitPresence.cancel()}},{key:"canUndo",value:function(){return this.undoManager.canUndo()}},{key:"undo",value:function(){this.undoManager.undo({source:"undo"})}},{key:"canRedo",value:function(){return this.undoManager.canRedo()}},{key:"redo",value:function(){this.undoManager.redo({source:"redo"})}},{key:"onLoad",value:function(){null==this.doc.data&&this.doc.create(this.getContent(),"ot-rich-text"),this.setContent(this.doc.data),this.setSelection({anchor:0,focus:0}),this.doc.submitSnapshot(this.getContent(),{fixUp:!0,skipNoop:!0,source:"script"})}},{key:"onOperation",value:function(e,t){if("undo"===t||"redo"===t)this.updateContent(e)||this.setContent(this.doc.data),this.setSelection(s(e)),this.codeMirror.scrollIntoView();else if("user"!==t){var n=this.getSelection(),r=a(e),o=this.codeMirror.getScrollInfo(),l=o.top,u=o.height;if(this.updateContent(e)||this.setContent(this.doc.data),this.setSelection(i(n,e)),n.focus<r)this.codeMirror.scrollTo(null,l);else{var c=this.codeMirror.getScrollInfo(),d=c.height;this.codeMirror.scrollTo(null,l+d-u)}}"user"!==t&&"undo"!==t&&"redo"!==t||(this.changeNumber++,this.submitPresence()),this.doc.submitSnapshot(this.getContent(),{fixUp:!0,skipNoop:!0,source:"script"})}},{key:"onPresence",value:function(e,t){for(var n=0,r=e.length;n<r;++n){var o=e[n];if(o){var i=this.doc.presence[o],a=this.presence[o];i?(a||(a=new _.CodeMirrorPresence(this.codeMirror,o,i.u),this.presence[o]=a,this.emit("presence",o,a)),a.update(i,t)):a&&(a.destroy(),delete this.presence[o],this.emit("presence",o,null))}}}},{key:"onBeforeChange",value:function(e,t){this.settingEditorContent||(this.lastSelection=this.getSelection())}},{key:"onChange",value:function(e,t){if(!this.settingEditorContent){var n=this.lastSelection,r=this.getSelection(),o=n.anchor,i=n.focus,a=r.anchor,s=r.focus,l=Math.min(o,i),u=Math.max(o,i),c=Math.min(a,s),d=Math.max(a,s),f={oldRange:l<0?null:{index:l,length:u-l},newRange:c<0?null:{index:c,length:d-c}};this.doc.submitSnapshot(this.getContent(),{diffHint:f,skipNoop:!0,source:"user",undoable:!0})}}},{key:"onCursorActivity",value:function(){this.settingEditorContent||this.scheduleSubmitPresence()}},{key:"submitPresence",value:function(){if(null==this.doc.data)return void this.doc.submitPresence(null);var e=this.getSelection();this.doc.submitPresence({u:"",c:this.changeNumber,s:[[e.anchor,e.focus]]})}},{key:"getContent",value:function(){this.rootNodeOpen||(this.rootNodeOpen=T,this.rootNodeClose=E);var e=[];return e.push(this.rootNodeOpen),this.codeMirror.doc.eachLine(function(t){var n=t.text;n&&e.push(Object(w.createInsertText)(n)),e.push(O)}),e.pop(),e.push(this.rootNodeClose),e}},{key:"setContent",value:function(e){try{if(this.settingEditorContent=!0,e.length>0){var t=e[0],n=e[e.length-1];this.rootNodeOpen=Object(w.isInsertOpen)(t)&&"#root"===Object(w.getNodeName)(t)?t:T,this.rootNodeClose=Object(w.isInsertClose)(n)&&"#root"===Object(w.getNodeName)(n)?n:E}else this.rootNodeOpen=T,this.rootNodeClose=E;for(var r="",i=0,a=e.length;i<a;++i){var s=e[i];Object(w.isInsertText)(s)?r+=Object(w.getText)(s):o(s)&&(r+="\n")}this.codeMirror.doc.setValue(r)}finally{this.settingEditorContent=!1}}},{key:"updateContent",value:function(e){try{this.settingEditorContent=!0;var t,n;return 2===e.length&&(!!(Object(w.isRetain)(e[0])&&!Object(w.hasAttributes)(e[0])&&Object(w.getLength)(e[0])>0)&&(t=Object(w.getLength)(e[0])-1,n=e[1],r(n)?(this.codeMirror.replaceRange(Object(w.getText)(n),this.codeMirror.posFromIndex(t)),!0):o(n)?(this.codeMirror.replaceRange("\n",this.codeMirror.posFromIndex(t)),!0):!!Object(w.isDelete)(n)&&(this.codeMirror.replaceRange("",this.codeMirror.posFromIndex(t),this.codeMirror.posFromIndex(t+Object(w.getLength)(n))),!0)))}finally{this.settingEditorContent=!1}}},{key:"getSelection",value:function(){return{anchor:this.codeMirror.doc.indexFromPos(this.codeMirror.doc.getCursor("anchor"))+1,focus:this.codeMirror.doc.indexFromPos(this.codeMirror.doc.getCursor("head"))+1}}},{key:"setSelection",value:function(e){var t=e.anchor,n=e.focus;this.codeMirror.doc.setSelection(this.codeMirror.doc.posFromIndex(t-1),this.codeMirror.doc.posFromIndex(n-1),A)}},{key:"getRootAttribute",value:function(e){if("string"!=typeof e)throw new Error("attributeName must be a string");var t=this.doc.data&&this.doc.data.length>0&&Object(w.isInsertOpen)(this.doc.data[0])&&"#root"===Object(w.getNodeName)(this.doc.data[0])?Object(w.getAttribute)(this.doc.data[0],e):null;return"string"==typeof t?t:null}},{key:"setRootAttribute",value:function(e,t){if("string"!=typeof e)throw new Error("attributeName must be a string");if("string"!=typeof t&&null!==t)throw new Error("attributeValue must be a string or null");var n=[Object(w.createRetain)(1,[e,t])];this.doc.submitOp(n,{undoable:!1,source:"script"})}},{key:"contentToOtModel",value:function(e){for(var t=[T],n=e.split(/\r\n|\n|\r/),r=0,o=n.length;r<o;++r){var i=n[r];i&&t.push(Object(w.createInsertText)(i)),t.push(O)}return t.pop(),t.push(E),t}}]),t}(C.EventEmitter),T=Object(w.createInsertOpen)("\ue000#root"),E=Object(w.createInsertClose)("\ue000#root"),O=Object(w.createInsertEmbed)("\ue000BR"),A={scroll:!1}},"./src/codeMirror/plugin.js":/*!**********************************!*\
  !*** ./src/codeMirror/plugin.js ***!
  \**********************************/
/*! exports provided: register */
function(e,t,n){"use strict";function r(e){e.commands.undo=o,e.commands.redo=i,e.defineOption("ot",null,function(e,t){e.ot&&(e.setOption("undoDepth",200),e.ot.client.dispose(),e.ot=null),"object"===s()(t)&&null!==t&&(e.setOption("undoDepth",0),e.ot={client:new l.OtClient({codeMirror:e,collectionName:t.collectionName,documentId:t.documentId,url:t.url,getAccessToken:t.getAccessToken,shouldConnect:t.shouldConnect,betaAuth:t.betaAuth})})})}function o(e){e.ot?e.ot.client.undo():e.undo()}function i(e){e.ot?e.ot.client.redo():e.redo()}n.r(t),n.d(t,"register",function(){return r});var a=n(/*! @babel/runtime/helpers/typeof */"./node_modules/@babel/runtime/helpers/typeof.js"),s=n.n(a),l=n(/*! ../OtClient */"./src/OtClient.js")},"./src/components/AComponent.js":/*!**************************************!*\
  !*** ./src/components/AComponent.js ***!
  \**************************************/
/*! exports provided: default */
function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;if(!e.customElements.get("ot-built-in-a")){var t=window.HTMLAnchorElement;window.HTMLAnchorElement=e.HTMLAnchorElement;var n=function(e){function t(e){var n;return i()(this,t),e=n=s()(this,u()(t).call(this,e)),s()(n,e)}return h()(t,e),d()(t,null,[{key:"observedAttributes",get:function(){return["href"]}}]),d()(t,[{key:"init",value:function(){this.updating=!1}},{key:"connectedCallback",value:function(){this.fixHref()}},{key:"attributeChangedCallback",value:function(){this.updating||this.fixHref()}},{key:"fixHref",value:function(){g.test(this.getAttribute("href"))&&(this.updating=!0,this.setAttribute("href",""),this.updating=!1)}}]),t}(m()(HTMLAnchorElement));window.HTMLAnchorElement=t,e.customElements.define("ot-built-in-a",n,{extends:"a"})}}n.r(t);var o=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(o),a=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),s=n.n(a),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),u=n.n(l),c=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),d=n.n(c),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),h=n.n(f),p=n(/*! @babel/runtime/helpers/wrapNativeSuper */"./node_modules/@babel/runtime/helpers/wrapNativeSuper.js"),m=n.n(p),g=/^\s*(javascript:|data:)/i;t.default={define:r}},"./src/components/HeadingComponent.js":/*!********************************************!*\
  !*** ./src/components/HeadingComponent.js ***!
  \********************************************/
/*! exports provided: default */
function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;["h1","h2","h3","h4","h5","h6"].forEach(b(e))}n.r(t);var o=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(o),a=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),s=n.n(a),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),u=n.n(l),c=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),d=n.n(c),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),h=n.n(f),p=n(/*! @babel/runtime/helpers/wrapNativeSuper */"./node_modules/@babel/runtime/helpers/wrapNativeSuper.js"),m=n.n(p),g=n(/*! ../util/misc */"./src/util/misc.js"),v={childList:!0,characterData:!0,subtree:!0},b=function(e){return function(t){if(!e.customElements.get("ot-built-in-".concat(t))){var n=window.HTMLHeadingElement;window.HTMLHeadingElement=e.HTMLHeadingElement;var r=function(e){function t(e){var n;return i()(this,t),e=n=s()(this,u()(t).call(this,e)),s()(n,e)}return h()(t,e),d()(t,[{key:"rootNode",get:function(){for(var e=this;(!e[g.vNodeKey]||"#root"!==e[g.vNodeKey].nodeName)&&e.parentNode;)e=e.parentNode;return e}}],[{key:"observedAttributes",get:function(){return["id","data-ot-auto-id"]}}]),d()(t,[{key:"init",value:function(){var e=this;this.anchorNode=null,this._connected=!1,this._observer=new this.ownerDocument.defaultView.MutationObserver(function(){e._connected&&e.updateId()})}},{key:"connectedCallback",value:function(){var e=this;this._observer.observe(this,v),this._connected=!0,Object(g.nextTick)(function(){e._connected&&(e.updateId(),e.updateAnchorNode())})}},{key:"disconnectedCallback",value:function(){this._connected=!1,this._observer.disconnect(),this.removeAnchorNode()}},{key:"attributeChangedCallback",value:function(e){this._connected&&("data-ot-auto-id"===e?this.updateId():"id"===e&&(this.updateId(),this.updateAnchorNode()))}},{key:"updateId",value:function(){var e=this.getAttribute("data-ot-auto-id");if("false"!==e){var t=this.getAttribute("id");if("true"!==e){if(t)return void(null!==e&&this.removeAttribute("data-ot-auto-id"));this.setAttribute("data-ot-auto-id","true")}var n,r=this.rootNode,o=Object(g.getTextContent)(this);if(o=o.replace(/[~`!@#%^&*(){}[\];:"'<,.>?/\\|_+=-]/g,""),o=o.trim(),o=o.replace(/\s+/g,"-"),o=o||"content",o=o.toLowerCase(),(n=r.querySelector("[id='".concat(o,"']")))&&n!==this){var i,a=1;do{i=o+"-"+a++}while((n=r.querySelector("[id='".concat(i,"']")))&&n!==this);o=i}o!==t&&this.setAttribute("id",o)}}},{key:"updateAnchorNode",value:function(){this.anchorNode||(this.firstChild&&"A"===this.firstChild.nodeName&&"all"===this.firstChild.getAttribute("data-mce-bogus")&&this.firstChild.classList.contains("ot-anchor")?this.anchorNode=this.firstChild:(this.anchorNode=this.ownerDocument.createElement("A"),this.anchorNode.classList.add("ot-anchor"),this.anchorNode.setAttribute("data-mce-bogus","all")));var e=this.getAttribute("id");e?(this.anchorNode.setAttribute("href","#".concat(e)),this.firstChild!==this.anchorNode&&this.insertBefore(this.anchorNode,this.firstChild)):this.anchorNode.parentNode&&this.anchorNode.parentNode.removeChild(this.anchorNode)}},{key:"removeAnchorNode",value:function(){this.anchorNode&&(this.anchorNode.parentNode&&this.anchorNode.parentNode.removeChild(this.anchorNode),this.anchorNode=null)}}]),t}(m()(HTMLHeadingElement));window.HTMLHeadingElement=n,e.customElements.define("ot-built-in-".concat(t),r,{extends:t})}}};t.default={define:r}},"./src/components/IFrameComponent.js":/*!*******************************************!*\
  !*** ./src/components/IFrameComponent.js ***!
  \*******************************************/
/*! exports provided: default */
function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;if(!e.customElements.get("ot-built-in-iframe")){var t=window.HTMLIFrameElement;window.HTMLIFrameElement=e.HTMLIFrameElement;var n=function(e){function t(e){var n;return i()(this,t),e=n=s()(this,u()(t).call(this,e)),s()(n,e)}return h()(t,e),d()(t,null,[{key:"observedAttributes",get:function(){return["src"]}}]),d()(t,[{key:"init",value:function(){this.updating=!1}},{key:"connectedCallback",value:function(){this.setAttribute("contenteditable","false"),this.fixSrc()}},{key:"attributeChangedCallback",value:function(){this.updating||this.fixSrc()}},{key:"fixSrc",value:function(){g.test(this.getAttribute("src"))&&(this.updating=!0,this.setAttribute("src",""),this.updating=!1)}}]),t}(m()(HTMLIFrameElement));window.HTMLIFrameElement=t,e.customElements.define("ot-built-in-iframe",n,{extends:"iframe"})}}n.r(t);var o=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(o),a=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),s=n.n(a),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),u=n.n(l),c=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),d=n.n(c),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),h=n.n(f),p=n(/*! @babel/runtime/helpers/wrapNativeSuper */"./node_modules/@babel/runtime/helpers/wrapNativeSuper.js"),m=n.n(p),g=/^\s*(javascript:|data:)/i;t.default={define:r}},"./src/components/ImgComponent.js":/*!****************************************!*\
  !*** ./src/components/ImgComponent.js ***!
  \****************************************/
/*! exports provided: default */
function(e,t,n){"use strict";function r(e){for(var t=new Map,n=0,r=e.length;n<r;++n){var o=e[n],i=o.target,a=o.attributeName;"data-ot-src"===a||"data-ot-width"===a||"data-ot-height"===a?t.set(i,!0):t.has(i)||t.set(i,!1)}t.forEach(function(e,t){e?t.syncFromOt():t.syncToOt()})}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;if(!e.customElements.get("ot-built-in-img")){var t=window.HTMLImageElement;window.HTMLImageElement=e.HTMLImageElement;var n=function(e){function t(e){var n;return a()(this,t),e=n=c()(this,f()(t).call(this,e)),c()(n,e)}return p()(t,e),l()(t,[{key:"init",value:function(){var e=this.ownerDocument.defaultView,t=y.get(e);t||(t=new e.MutationObserver(r),y.set(e,t)),t.observe(this,w)}},{key:"connectedCallback",value:function(){this.hasAttribute("data-ot-src")||this.hasAttribute("data-ot-width")||this.hasAttribute("data-ot-height")?this.syncFromOt():this.syncToOt()}},{key:"syncFromOt",value:function(){var e=this.getAttribute("data-ot-src");v.test(e)&&this.setAttribute("data-ot-src",""),this.syncAttribute("data-ot-src","src"),this.syncAttribute("data-ot-width","width"),this.syncAttribute("data-ot-height","height")}},{key:"syncToOt",value:function(){var e=this.getAttribute("src");b.test(e)||(v.test(e)&&this.setAttribute("src",""),this.syncAttribute("src","data-ot-src"),this.syncAttribute("width","data-ot-width"),this.syncAttribute("height","data-ot-height"))}},{key:"syncAttribute",value:function(e,t){var n=this.getAttribute(e);n!==this.getAttribute(t)&&(null===n?this.removeAttribute(t):this.setAttribute(t,n))}}]),t}(g()(HTMLImageElement));window.HTMLImageElement=t,e.customElements.define("ot-built-in-img",n,{extends:"img"})}}n.r(t);var i=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(i),s=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),l=n.n(s),u=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),c=n.n(u),d=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),f=n.n(d),h=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),p=n.n(h),m=n(/*! @babel/runtime/helpers/wrapNativeSuper */"./node_modules/@babel/runtime/helpers/wrapNativeSuper.js"),g=n.n(m),v=/^\s*(blob:|javascript:|data:(?!image\/))/i,b=/^\s*blob:/i,y=new WeakMap,w={attributes:!0,attributeFilter:["src","width","height","data-ot-src","data-ot-width","data-ot-height"]};t.default={define:o}},"./src/components/PreComponent.js":/*!****************************************!*\
  !*** ./src/components/PreComponent.js ***!
  \****************************************/
/*! exports provided: default */
function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;if(!e.customElements.get("ot-built-in-pre")){var t=window.HTMLPreElement;window.HTMLPreElement=e.HTMLPreElement;var n=function(e){function t(e){var n;return i()(this,t),e=n=u()(this,d()(t).call(this,e)),u()(n,e)}return h()(t,e),s()(t,[{key:"init",value:function(){var e=this;this.observer=new this.ownerDocument.defaultView.MutationObserver(function(t){return e.mutationsCallback(t)})}},{key:"watch",value:function(){this.observer.observe(this,g)}},{key:"unwatch",value:function(){this.observer.disconnect()}},{key:"connectedCallback",value:function(){if(!this.parentNode.hasAttribute("data-mce-bogus")){var e=this.getAttribute("data-content"),t=this.getAttribute("data-language"),n=b(null!==e?e:this.textContent),r=null!==t?v(t):y(this.getAttribute("class"));this.setAttribute("contenteditable","false"),this.setAttribute("data-content",n),this.setAttribute("data-language",r),this.highlightCode(n,r),this.watch()}}},{key:"disconnectedCallback",value:function(){this.unwatch()}},{key:"mutationsCallback",value:function(e){this.unwatch();for(var t=!1,n=!1,r=!1,o=!1,i=0,a=e.length;i<a;++i){var s=e[i],l=s.type,u=s.target,c=s.attributeName;"characterData"===l||"childList"===l?t=!0:"attributes"===l&&u===this&&("data-content"===c?n=!0:"data-language"===c?o=!0:"class"===c&&(r=!0))}if(t||n||r||o){var d=b(n||!t?this.getAttribute("data-content"):this.textContent),f=o||!r?v(this.getAttribute("data-language")):y(this.getAttribute("class"));this.setAttribute("data-content",d),this.setAttribute("data-language",f),this.highlightCode(d,f)}this.watch()}},{key:"highlightCode",value:function(e,t){var n=window.Prism;this.setAttribute("class",w(t)),n&&t&&n.languages[t]?this.innerHTML=n.highlight(e,n.languages[t]):this.textContent=e}}]),t}(m()(HTMLPreElement));window.HTMLPreElement=t,e.customElements.define("ot-built-in-pre",n,{extends:"pre"})}}n.r(t);var o=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(o),a=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),s=n.n(a),l=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(l),c=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),d=n.n(c),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),h=n.n(f),p=n(/*! @babel/runtime/helpers/wrapNativeSuper */"./node_modules/@babel/runtime/helpers/wrapNativeSuper.js"),m=n.n(p),g={childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeFilter:["data-content","data-language","class"]},v=function(e){return"string"==typeof e&&/^\w+$/.test(e)?e:"undefined"},b=function(e){return"string"==typeof e?e.replace(/[\uFEFF\u200B]/g,""):""},y=function(e){if("string"==typeof e){var t=/(?:^|\s)language-(\w+)(?:$|\s)/.exec(e);if(t)return t[1]}return"undefined"},w=function(e){return"language-"+e};t.default={define:r}},"./src/components/VideoComponent.js":/*!******************************************!*\
  !*** ./src/components/VideoComponent.js ***!
  \******************************************/
/*! exports provided: default */
function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;if(!e.customElements.get("ot-built-in-video")){var t=window.HTMLVideoElement;window.HTMLVideoElement=e.HTMLVideoElement;var n=function(e){function t(e){var n;return i()(this,t),e=n=s()(this,u()(t).call(this,e)),s()(n,e)}return h()(t,e),d()(t,null,[{key:"observedAttributes",get:function(){return["src","poster"]}}]),d()(t,[{key:"init",value:function(){this.updating=!1}},{key:"connectedCallback",value:function(){this.setAttribute("contenteditable","false"),this.fixAttribute("src"),this.fixAttribute("poster")}},{key:"attributeChangedCallback",value:function(e){this.updating||this.fixAttribute(e)}},{key:"fixAttribute",value:function(e){var t=this.getAttribute(e);"string"==typeof t&&("src"===e?g.test(t):"poster"===e&&v.test(t))&&(this.updating=!0,this.setAttribute(e,""),this.updating=!1)}}]),t}(m()(HTMLVideoElement));window.HTMLVideoElement=t,e.customElements.define("ot-built-in-video",n,{extends:"video"})}}n.r(t);var o=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(o),a=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),s=n.n(a),l=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),u=n.n(l),c=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),d=n.n(c),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),h=n.n(f),p=n(/*! @babel/runtime/helpers/wrapNativeSuper */"./node_modules/@babel/runtime/helpers/wrapNativeSuper.js"),m=n.n(p),g=/^\s*(javascript:|data:(?!video\/))/i,v=/^\s*(javascript:|data:(?!image\/))/i;t.default={define:r}},"./src/components/index.js":/*!*********************************!*\
  !*** ./src/components/index.js ***!
  \*********************************/
/*! exports provided: registerComponents */
function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;o.default.define(e),i.default.define(e),a.default.define(e),s.default.define(e),l.default.define(e),u.default.define(e)}n.r(t),n.d(t,"registerComponents",function(){return r});var o=n(/*! ./AComponent */"./src/components/AComponent.js"),i=n(/*! ./HeadingComponent */"./src/components/HeadingComponent.js"),a=n(/*! ./IFrameComponent */"./src/components/IFrameComponent.js"),s=n(/*! ./ImgComponent */"./src/components/ImgComponent.js"),l=n(/*! ./PreComponent */"./src/components/PreComponent.js"),u=n(/*! ./VideoComponent */"./src/components/VideoComponent.js")},"./src/config/Config.js":/*!******************************!*\
  !*** ./src/config/Config.js ***!
  \******************************/
/*! exports provided: default */
function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return c});var r=n(/*! @babel/runtime/helpers/toConsumableArray */"./node_modules/@babel/runtime/helpers/toConsumableArray.js"),o=n.n(r),i=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(i),s=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),l=n.n(s),u=n(/*! ../util/misc */"./src/util/misc.js"),c=function(){function e(t){a()(this,e);var n=t.attributeAliasMap?t.attributeAliasMap.clone().freeze():null,r=t.childNodeAliasMap?t.childNodeAliasMap.clone().freeze():null;this.formats=Object.freeze(t.formats.map(function(e,t){return e.clone().withIndex(t).freeze()})),this.nodes=Object.freeze(t.nodes.map(function(e){return e=e.clone(),n&&e.attributeNames&&e.withAttributeNames(n.resolveAll(e.attributeNames).sort()),r&&(e.withValidChildNodes(r.resolveAll(o()(Object(u.toArray)(e.validChildNodes)))),e.invalidChildNodes&&e.withInvalidChildNodes(r.resolveAll(o()(Object(u.toArray)(e.invalidChildNodes))))),e.invalidChildNodes&&(e.withValidChildNodes(o()(Object(u.toArray)(e.validChildNodes)).filter(function(t){return!e.invalidChildNodes.has(t)})),e.withInvalidChildNodes(null)),e.freeze()})),this._createFormats(),this._createNodes(),this._validate(),Object.freeze(this)}return l()(e,null,[{key:"create",value:function(t){return new e(t)}}]),l()(e,[{key:"_createFormats",value:function(){var e=this;this.formatsByDom=Object.create(null),this.formatsByOt=Object.create(null),this.formats.forEach(function(t){if(e.formatsByDom[t.domKey])throw new Error("this.formatsByDom[".concat(t.domKey,"] already exists"));if(!t.deprecated){if(e.formatsByOt[t.otKey])throw new Error("this.formatsByOt[".concat(t.otKey,"] already exists"));e.formatsByOt[t.otKey]=t}e.formatsByDom[t.domKey]=t}),Object.freeze(this.formatsByDom),Object.freeze(this.formatsByOt)}},{key:"_createNodes",value:function(){var e=this,t=["structure","embed","format","text","root","unknown"];this.configByNodeName=Object.create(null),this.nodes.forEach(function(n){if(t.indexOf(n.nodeType)<0)throw new Error("Invalid nodeType ".concat(n.nodeType," for ").concat(n.nodeName));if(e.configByNodeName[n.nodeName]){if(e.configByNodeName[n.nodeName][n.nodeType])throw new Error("Config already exists for ".concat(n.nodeType," ").concat(n.nodeName))}else e.configByNodeName[n.nodeName]={structure:null,embed:null,format:null,text:null,root:null,unknown:null,$default:n};e.configByNodeName[n.nodeName][n.nodeType]=n}),Object.keys(this.configByNodeName).forEach(function(t){return Object.freeze(e.configByNodeName[t])}),Object.freeze(this.configByNodeName)}},{key:"_validate",value:function(){var e=this,t=Object.create(null);this.formats.forEach(function(e){var n=t[e.nodeName]=t[e.nodeName]||[];e.attributeName&&n.indexOf(e.attributeName)<0&&(n.push(e.attributeName),n.sort())});var n=t.SPAN=t.SPAN||[];["@data-mce-bogus","@data-mce-type","@id"].forEach(function(e){n.indexOf(e)&&n.push(e)}),n.sort(),this.nodes.forEach(function(e){var t=e.nodeType,n=e.nodeName,r=e.attributeNames;if("text"!==t&&"unknown"!==t){if(!Array.isArray(r))throw new Error("'attributeNames' must be an Array for ".concat(t," ").concat(n));for(var o="",i=0,a=r.length;i<a;++i){var s=r[i];if("string"!=typeof s)throw new Error('Attribute names must be of type "string" for '.concat(t," ").concat(n));if("@style"===s)throw new Error("'style' attribute must not be synchronized directly  for ".concat(t," ").concat(n));if(!/^(@[a-z][a-z0-9-]*=?|\$[a-z][a-z0-9-]*)$/.test(s))throw new Error("Invalid attribute name '".concat(s,"' for ").concat(t," ").concat(n));if(o&&s<=o)throw new Error("Attribute names must be sorted and cannot contain duplicates for ".concat(t," ").concat(n));o=s}}else if(null!==r)throw new Error("`attributeNames` must be null for a text node")});var r=Object.keys(this.configByNodeName),o=Object.keys(t);if(!this.configByNodeName["#root"]||!this.configByNodeName["#root"].root)throw new Error("#root must be defined");if(!this.configByNodeName["#unknown"]||!this.configByNodeName["#unknown"].unknown)throw new Error("#unknown must be defined");if(!this.configByNodeName["#text"]||!this.configByNodeName["#text"].text)throw new Error("#text must be defined");if(!this.configByNodeName.BR||!this.configByNodeName.BR.embed)throw new Error("Embed BR must be defined");if(!this.configByNodeName.SPAN||!this.configByNodeName.SPAN.format)throw new Error("Format SPAN must be defined");o.forEach(function(n){if(!e.configByNodeName[n]||!e.configByNodeName[n].format)throw new Error("Config missing in nodes for format ".concat(n));var r=t[n],o=e.configByNodeName[n].format.attributeNames;if(!o||!Object(u.areArraysEqual)(r,o))throw new Error("Expected attributes in nodes for format ".concat(n," are ")+"".concat(JSON.stringify(r)," but found ").concat(JSON.stringify(o)))}),r.forEach(function(t){if("#root"!==t&&"#unknown"!==t&&!r.some(function(n){return Object.keys(e.configByNodeName[n]).some(function(r){return e.configByNodeName[n][r]&&e.configByNodeName[n][r].validChildNodes.has(t)})}))throw new Error("".concat(t," doesn't have any valid parent node."))}),r.forEach(function(t){var n=e.configByNodeName[t].format;n&&r.forEach(function(r){var o=e.configByNodeName[r].format||e.configByNodeName[r].text;if(o&&!n.validChildNodes.has(o.nodeName))throw new Error("".concat(r," must be a valid child of ").concat(t))})}),r.forEach(function(t){Object.keys(e.configByNodeName[t]).forEach(function(n){var r=e.configByNodeName[t][n];if(r){if(r.validChildNodes.forEach(function(r){if(!e.configByNodeName[r])throw new Error("Invalid node ".concat(r," in validChildNodes of ").concat(n," ").concat(t))}),r.defaultChildNode&&"root"!==r.nodeType&&"structure"!==r.nodeType)throw new Error("".concat(n," ").concat(t," must not define defaultChildNode"));if(r.validChildNodes.has("#root"))throw new Error("#root must not be in validChildNodes of ".concat(n," ").concat(t));if(r.validChildNodes.has("#unknown"))throw new Error("#unknown must not be in validChildNodes of ".concat(n," ").concat(t));if(r.defaultChildNode&&!r.validChildNodes.has(r.defaultChildNode))throw new Error("defaultChildNode is not in validChildNodes for ".concat(n," ").concat(t));if(r.defaultChildNode&&!e.configByNodeName[r.defaultChildNode].structure)throw new Error("defaultChildNode ".concat(r.defaultChildNode," for ").concat(n," ").concat(t," must be a structure"));if(r.defaultChildNode&&r.needsBr)throw new Error("needsBr must be false, if defaultChildNode is set for ".concat(n," ").concat(t));if(r.needsBr&&!r.validChildNodes.has("BR"))throw new Error("BR must be in validChildNodes for ".concat(n," ").concat(t," because needsBr is true"));for(var o=r.defaultChildNode,i=5;o;){if(--i<0)throw new Error("defaultChildNode transitions form a loop for ".concat(n," ").concat(t));o=e.configByNodeName[o].structure&&e.configByNodeName[o].structure.defaultChildNode}}})}),this.formats.forEach(function(e){if(!/^[@$A-Za-z][A-Za-z0-9-]*=?$/.test(e.name))throw new Error("Invalid format name: '".concat(e.name,"'"))})}}]),e}()},"./src/config/Format.js":/*!******************************!*\
  !*** ./src/config/Format.js ***!
  \******************************/
/*! exports provided: default */
function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),o=n.n(r),i=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(i),s=function(){function e(t,n,r,i){o()(this,e),this.name=t,this.nodeName=n||t||null,this.attributeName=r||null,this.attributeValue=i||null,this.deprecated=!1,this.index=0}return a()(e,[{key:"withDeprecated",value:function(e){return this.deprecated=e,this}},{key:"withIndex",value:function(e){return this.index=e,this}},{key:"freeze",value:function(){return Object.freeze(this)}},{key:"clone",value:function(){return new e(this.name,this.nodeName,this.attributeName,this.attributeValue).withDeprecated(this.deprecated)}},{key:"otKey",get:function(){return this.name}},{key:"domKey",get:function(){return this.nodeName+(this.attributeName?this.attributeName+(this.attributeValue?"="+this.attributeValue:""):"")}}]),e}()},"./src/config/VNodeConfig.js":/*!***********************************!*\
  !*** ./src/config/VNodeConfig.js ***!
  \***********************************/
/*! exports provided: default */
function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return l});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),o=n.n(r),i=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(i),s=n(/*! ../util/misc */"./src/util/misc.js"),l=function(){function e(t,n,r){o()(this,e),this.VNodeConstructor=t,this.nodeName=n,this.nodeType=r,this.attributeNames="text"===r||"unknown"===r?null:[],this.needsBr=!1,this.validChildNodes=Object(s.createSet)(),this.invalidChildNodes=null,this.defaultChildNode="",this.empty=!1,this.customElementName="",this.hasChildNodes="root"===r||"structure"===r||"format"===r||"unknown"===r,this.hasNodeValue="root"===r||"structure"===r||"embed"===r||"text"===r}return a()(e,[{key:"withAttributeNames",value:function(e){return this.attributeNames=e,this}},{key:"withNeedsBr",value:function(e){return this.needsBr=e,this}},{key:"withValidChildNodes",value:function(e){return this.validChildNodes=null==e||e instanceof Set?e:Object(s.createSet)(e),this}},{key:"withInvalidChildNodes",value:function(e){return this.invalidChildNodes=null==e||e instanceof Set?e:Object(s.createSet)(e),this}},{key:"withDefaultChildNode",value:function(e){return this.defaultChildNode=e,this}},{key:"withEmpty",value:function(e){return this.empty=e,this}},{key:"withCustomElementName",value:function(e){return this.customElementName=e,this}},{key:"createVNode",value:function(e,t){return new this.VNodeConstructor(this,e,t)}},{key:"freeze",value:function(){return Object.freeze(this),Object.freeze(this.validChildNodes),this.invalidChildNodes&&Object.freeze(this.invalidChildNodes),this.attributeNames&&Object.freeze(this.attributeNames),this}},{key:"clone",value:function(){return new e(this.VNodeConstructor,this.nodeName,this.nodeType).withAttributeNames(this.attributeNames?this.attributeNames.slice(0):this.attributeNames).withNeedsBr(this.needsBr).withValidChildNodes(Object(s.createSet)(this.validChildNodes)).withInvalidChildNodes(this.invalidChildNodes?Object(s.createSet)(this.invalidChildNodes):null).withDefaultChildNode(this.defaultChildNode).withEmpty(this.empty).withCustomElementName(this.customElementName)}}]),e}()},"./src/config/default.js":/*!*******************************!*\
  !*** ./src/config/default.js ***!
  \*******************************/
/*! exports provided: formats, nodes, attributeAliasMap, childNodeAliasMap, default */
function(e,t,n){"use strict";n.r(t),n.d(t,"formats",function(){return T}),n.d(t,"nodes",function(){return E}),n.d(t,"attributeAliasMap",function(){return O}),n.d(t,"childNodeAliasMap",function(){return A});var r=n(/*! ./Format */"./src/config/Format.js"),o=n(/*! ../nodes/ElementVNode */"./src/nodes/ElementVNode.js"),i=n(/*! ../nodes/TextVNode */"./src/nodes/TextVNode.js"),a=n(/*! ../nodes/AVNode */"./src/nodes/AVNode.js"),s=n(/*! ../nodes/HeadingVNode */"./src/nodes/HeadingVNode.js"),l=n(/*! ../nodes/PreVNode */"./src/nodes/PreVNode.js"),u=n(/*! ../nodes/IFrameVNode */"./src/nodes/IFrameVNode.js"),c=n(/*! ../nodes/ImgVNode */"./src/nodes/ImgVNode.js"),d=n(/*! ../nodes/VideoVNode */"./src/nodes/VideoVNode.js"),f=n(/*! ../nodes/RootVNode */"./src/nodes/RootVNode.js"),h=n(/*! ../util/AliasMap */"./src/util/AliasMap.js"),p=o.default.structureConfig,m=o.default.embedConfig,g=o.default.formatConfig,v=a.default.config,b=s.default.config,y=f.default.config,w=l.default.structureConfig,x=l.default.embedConfig,C=u.default.config,k=c.default.config,N=d.default.config,_=i.default.config,S=o.default.unknownConfig,T=Object.freeze([new r.default("BDO","BDO","@dir"),new r.default("BDI","BDI","@dir"),new r.default("Q"),new r.default("CITE"),new r.default("CODE"),new r.default("DATA","DATA","@value"),new r.default("TIME","TIME","@datetime"),new r.default("VAR"),new r.default("DFN"),new r.default("ABBR","ABBR","@title"),new r.default("STRONG"),new r.default("EM"),new r.default("MARK"),new r.default("SUB"),new r.default("SUP"),new r.default("SAMP"),new r.default("KBD"),new r.default("B"),new r.default("I"),new r.default("S"),new r.default("U"),new r.default("font-size","SPAN","$font-size"),new r.default("color","SPAN","$color"),new r.default("background-color","SPAN","$background-color"),new r.default("underline","SPAN","$text-decoration","underline"),new r.default("line-through","SPAN","$text-decoration","line-through"),new r.default("overline","SPAN","$text-decoration","overline"),new r.default("BIG","SPAN","$font-size","larger"),new r.default("BIG").withDeprecated(!0),new r.default("SMALL","SPAN","$font-size","smaller"),new r.default("SMALL").withDeprecated(!0),new r.default("@data-tw-inline-comments=","TW-SPAN","@data-tw-inline-comments=")].map(function(e){return e.freeze()})),E=Object.freeze([p("ADDRESS",!0,["blockAttributes"],["flowContent"]).withInvalidChildNodes(["outlineContent","ADDRESS"]),p("ARTICLE",!0,["blockAttributes"],["flowContent"]),p("ASIDE",!0,["blockAttributes"],["flowContent"]),p("BLOCKQUOTE",!0,["blockAttributes"],["flowContent"]),p("CAPTION",!0,["blockAttributes"],["flowContent"]),p("COLGROUP",!1,["@span","@bgcolor","blockAttributes"],["COL"]),p("DD",!0,["blockAttributes"],["flowContent"]),p("DEL",!1,["@cite","@datetime"],["phrasingContent","flowContent"]),p("DIV",!0,["blockAttributes"],["flowContent"]),p("DL",!1,["blockAttributes"],["DT","DD"]).withDefaultChildNode("DD"),p("DT",!0,["blockAttributes"],["flowContent"]).withInvalidChildNodes(["outlineContent"]),p("FIGCAPTION",!0,["blockAttributes"],["flowContent"]),p("FIGURE",!0,["blockAttributes"],["flowContent","FIGCAPTION"]),p("FOOTER",!0,["blockAttributes"],["flowContent"]).withInvalidChildNodes(["headerAndFooter"]),p("HEADER",!0,["blockAttributes"],["flowContent"]).withInvalidChildNodes(["headerAndFooter"]),p("HGROUP",!1,["blockAttributes"],["headings"]).withDefaultChildNode("H1"),p("INS",!1,["@cite","@datetime"],["phrasingContent","flowContent"]),p("LI",!0,["blockAttributes"],["flowContent"]),p("MAIN",!0,["blockAttributes"],["flowContent"]),p("NAV",!0,["blockAttributes"],["flowContent"]),p("OL",!1,["@reversed","@start","@type","blockAttributes"],["LI"]).withDefaultChildNode("LI"),p("P",!0,["blockAttributes"],["phrasingContent"]),p("SECTION",!0,["blockAttributes"],["flowContent"]),p("TABLE",!1,["table"],["tableContent"]).withDefaultChildNode("TBODY"),p("TBODY",!1,["tableSection"],["TR"]).withDefaultChildNode("TR"),p("TFOOT",!1,["tableSection"],["TR"]).withDefaultChildNode("TR"),p("THEAD",!1,["tableSection"],["TR"]).withDefaultChildNode("TR"),p("UL",!1,["blockAttributes"],["LI"]).withDefaultChildNode("LI"),p("TH",!0,["tableCell"],["flowContent"]).withInvalidChildNodes(["outlineContent"]),p("TR",!1,["tableRow"],["TD","TH"]).withDefaultChildNode("TD"),p("TD",!0,["tableCell"],["flowContent"]),g("BDO",["@dir"],["phrasingContent"]),g("BDI",["@dir"],["phrasingContent"]),g("Q",[],["phrasingContent"]),g("CITE",[],["phrasingContent"]),g("CODE",[],["phrasingContent"]),g("DATA",["@value"],["phrasingContent"]),g("TIME",["@datetime"],["phrasingContent"]),g("VAR",[],["phrasingContent"]),g("DFN",[],["phrasingContent"]),g("ABBR",["@title"],["phrasingContent"]),g("STRONG",[],["phrasingContent"]),g("EM",[],["phrasingContent"]),g("BIG",[],["phrasingContent"]),g("SMALL",[],["phrasingContent"]),g("MARK",[],["phrasingContent"]),g("SUB",[],["phrasingContent"]),g("SUP",[],["phrasingContent"]),g("SAMP",[],["phrasingContent"]),g("KBD",[],["phrasingContent"]),g("B",[],["phrasingContent"]),g("I",[],["phrasingContent"]),g("S",[],["phrasingContent"]),g("U",[],["phrasingContent"]),g("SPAN",["span"],["phrasingContent"]),g("TW-SPAN",["@data-tw-inline-comments="],["phrasingContent"]),m("BR",["padding","margin"]).withEmpty(!0),m("COL",["@bgcolor","@width","@span","padding","margin"]).withEmpty(!0),m("HR",["padding","margin"]).withEmpty(!0),v(["@id","@href","@target","@title","@rel","padding","$text-align"],["phrasingContent","flowContent"]),b("H1",["@id","@data-ot-auto-id","blockAttributes"],["phrasingContent"]),b("H2",["@id","@data-ot-auto-id","blockAttributes"],["phrasingContent"]),b("H3",["@id","@data-ot-auto-id","blockAttributes"],["phrasingContent"]),b("H4",["@id","@data-ot-auto-id","blockAttributes"],["phrasingContent"]),b("H5",["@id","@data-ot-auto-id","blockAttributes"],["phrasingContent"]),b("H6",["@id","@data-ot-auto-id","blockAttributes"],["phrasingContent"]),w(["padding"],["phrasingContent"]),x(["@data-content","@data-language","padding","@data-tw-inline-comments="]),C(["iframe","@data-tw-inline-comments="]),k(["@src","@alt","size","@data-tw-inline-comments=","border","padding","margin"]),N(["@src","@poster","size","@data-tw-inline-comments=","padding","@controls"]),_(),y(["@data-tw-schema-hash","@data-tw-schema-time","@data-tw-version-number","@data-tw-version-time"],["rootContent"]).withDefaultChildNode("P"),S()].map(function(e){return e.freeze()})),O=(new h.default).set("size",["@width","@height"]).set("padding",["$padding-left","$padding-right","$padding-top","$padding-bottom"]).set("margin",["$margin-left","$margin-right","$margin-top","$margin-bottom"]).set("border",["$border-top-width","$border-right-width","$border-bottom-width","$border-left-width","$border-top-color","$border-right-color","$border-bottom-color","$border-left-color","$border-top-style","$border-right-style","$border-bottom-style","$border-left-style"]).set("blockAttributes",["$text-align","$line-height","padding","margin"]).set("table",["size","@border","@cellspacing","@cellpadding","@bgcolor","$width","$height","$float","$background-color","$table-layout","$border-collapse","$border-spacing","border","blockAttributes"]).set("tableCell",["@colspan","@rowspan","@scope","@align","@valign","@bgcolor","$width","$height","$vertical-align","$background-color","border","blockAttributes"]).set("tableRow",["$height","$background-color","@bgcolor","border","blockAttributes"]).set("tableSection",["@bgcolor","blockAttributes"]).set("span",["$color","$background-color","$text-decoration","$font-size","@data-mce-bogus","@data-mce-type","@id"]).set("iframe",["@width","@height","@src","@frameborder","@allow","@allowfullscreen","@csp"]).freeze(),A=(new h.default).set("headerAndFooter",["HEADER","FOOTER"]).set("headings",["H1","H2","H3","H4","H5","H6"]).set("headingContent",["headings","HGROUP"]).set("sectioningContent",["ARTICLE","ASIDE","SECTION","NAV"]).set("outlineContent",["headerAndFooter","headingContent","sectioningContent"]).set("phrasingContent",["ABBR","B","BIG","BDO","BDI","BR","CITE","CODE","DATA","DFN","EM","I","IFRAME","IMG","KBD","MARK","Q","S","SAMP","SMALL","SPAN","STRONG","SUB","SUP","TIME","TW-SPAN","VAR","VIDEO","#text","A","DEL","INS","U"]).set("flowContent",["outlineContent","A","ABBR","ADDRESS","B","BIG","BDO","BDI","BLOCKQUOTE","BR","CITE","CODE","DATA","DEL","DFN","DIV","DL","EM","FIGURE","HR","I","IFRAME","IMG","INS","KBD","MAIN","MARK","OL","P","PRE","Q","S","SAMP","SMALL","SPAN","STRONG","SUB","SUP","TABLE","TIME","TW-SPAN","UL","VAR","VIDEO","#text","U"]).set("tableContent",["CAPTION","COLGROUP","THEAD","TBODY","TFOOT","TR"]).set("rootContent",["outlineContent","ADDRESS","BLOCKQUOTE","DIV","FIGURE","OL","P","TABLE","UL","HR","PRE"]).freeze();t.default={nodes:E,formats:T,attributeAliasMap:O,childNodeAliasMap:A}},"./src/index.js":/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! exports provided: VNodeConfig, ElementVNode, registerTinyMcePlugin, registerCodeMirrorPlugin */
function(e,t,n){"use strict";n.r(t);var r=n(/*! ./config/VNodeConfig */"./src/config/VNodeConfig.js");n.d(t,"VNodeConfig",function(){return r.default});var o=n(/*! ./nodes/ElementVNode */"./src/nodes/ElementVNode.js");n.d(t,"ElementVNode",function(){return o.default});var i=n(/*! ./tinymce/plugins/ot/Plugin */"./src/tinymce/plugins/ot/Plugin.js");n.d(t,"registerTinyMcePlugin",function(){return i.register});var a=n(/*! ./codeMirror/plugin */"./src/codeMirror/plugin.js");n.d(t,"registerCodeMirrorPlugin",function(){return a.register})},"./src/nodes/AVNode.js":/*!*****************************!*\
  !*** ./src/nodes/AVNode.js ***!
  \*****************************/
/*! exports provided: default */
function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return m});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),o=n.n(r),i=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(i),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),l=n.n(s),u=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(u),d=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),f=n.n(d),h=n(/*! ./ElementVNode */"./src/nodes/ElementVNode.js"),p=n(/*! ../config/VNodeConfig */"./src/config/VNodeConfig.js"),m=function(e){function t(){return o()(this,t),l()(this,c()(t).apply(this,arguments))}return f()(t,e),a()(t,null,[{key:"config",value:function(e,n){return new p.default(t,"A","structure").withAttributeNames(e).withValidChildNodes(n).withCustomElementName("ot-built-in-a")}}]),t}(h.default)},"./src/nodes/ElementVNode.js":/*!***********************************!*\
  !*** ./src/nodes/ElementVNode.js ***!
  \***********************************/
/*! exports provided: default */
function(e,t,n){"use strict";function r(e){for(var t=0,n=e.length;t<n;++t){var r=e[t],o=r.target,i=r.attributeName,a=r.attributeNamespace,s=r.oldValue,l=o.getAttribute(i),u=o.attributeChangedCallback;"function"==typeof u&&u.call(o,i,s,l,a)}}n.r(t),n.d(t,"default",function(){return y});var o=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(o),a=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),s=n.n(a),l=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(l),c=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),d=n.n(c),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),h=n.n(f),p=n(/*! ./VNode */"./src/nodes/VNode.js"),m=n(/*! ../config/VNodeConfig */"./src/config/VNodeConfig.js"),g=n(/*! ../util/misc */"./src/util/misc.js"),v=Object.create(null);v["@contenteditable"]=!0,v["@data-mce-selected"]=!0,v["@data-mce-first-selected"]=!0,v["@data-mce-last-selected"]=!0,v["@style"]=!0,v["@is"]=!0;var b=new WeakMap,y=function(e){function t(){return i()(this,t),u()(this,d()(t).apply(this,arguments))}return h()(t,e),s()(t,[{key:"updateVAttributes",value:function(){this.attributes=this.attributeNames?this.getAttributesFromRealNode(!0):null}},{key:"createRealNode",value:function(e){return e.createElement(this.nodeName)}},{key:"upgradeRealNode",value:function(e){if("structure"===this.nodeType||"embed"===this.nodeType||"format"===this.nodeType){if(!(e.nodeName.indexOf("-")>=0)){var t=this.customElementName;if(!(t.indexOf("-")<0)){var n=e.ownerDocument,o=n.defaultView;if(o){var i=o.customElements,a=i.get(t);if(a&&!(Object.prototype.isPrototypeOf.call(a.prototype,e)||"connectedCallback"in e||"disconnectedCallback"in e||"adoptedCallback"in e||"attributeChangedCallback"in e||"function"!=typeof a.prototype.init)){Object.setPrototypeOf(e,a.prototype),a.prototype.init.call(e),e[g.fakeCustomElementKey]=!0;var s=b.get(o);s||(s=new o.MutationObserver(r),b.set(o,s));var l=a.observedAttributes;Array.isArray(l)&&s.observe(e,{attributes:!0,attributeOldValue:!0,attributeFilter:l})}}}}}}},{key:"realToVirtualAttributeName",value:function(e){return v[e]?null:e}},{key:"virtualToRealAttributeName",value:function(e){return v[e]?null:e}},{key:"supportsAttribute",value:function(e){for(var t=this.attributeNames,n=0,r=t.length;n<r;++n){var o=t[n],i=o.length-1,a="="===o[i],s=a?o.substring(0,i):o;if(e<s)return!1;if(e===s)return!0}return!1}},{key:"getAttributeNamesFromRealNode",value:function(){for(var e=[],t=Object(g.getAttributeNames)(this.realNode),n=this.realNode.style,r=0,o=n.length;r<o;++r){var i=this.realToVirtualAttributeName("$"+n[r]);null!==i&&e.push(i)}for(var a=0,s=t.length;a<s;++a){var l=this.realToVirtualAttributeName("@"+t[a]);null!==l&&e.push(l)}return e.sort()}},{key:"setRealAttribute",value:function(e,t){var n=this.virtualToRealAttributeName(e);null!==n&&("@"===n[0]?this.realNode.setAttribute(n.substr(1),t):this.realNode.style.setProperty(n.substr(1),t))}},{key:"removeRealAttribute",value:function(e){var t=this.virtualToRealAttributeName(e);null!==t&&("@"===t[0]?this.realNode.removeAttribute(t.substr(1)):this.realNode.style.removeProperty(t.substr(1)))}},{key:"getRealAttribute",value:function(e){var t=this.virtualToRealAttributeName(e);return null===t?null:"@"===t[0]?this.realNode.getAttribute(t.substr(1)):this.realNode.style.getPropertyValue(t.substr(1))||null}},{key:"includeRealAttribute",value:function(e,t){var n=this.virtualToRealAttributeName(e);if(null!==n){var r="@"===n[0],o=n.substring(1),i=r?this.realNode.getAttribute(o)||"":this.realNode.style.getPropertyValue(o)||"",a=(i+" "+t).split(/\s+/).sort().filter(function(e,t,n){return e.length>0&&(0===t||e!==n[t-1])}).join(" ");a?r?this.realNode.setAttribute(o,a):this.realNode.style.setProperty(o,a):r?this.realNode.removeAttribute(o):this.realNode.style.removeProperty(o)}}},{key:"excludeRealAttribute",value:function(e,t){var n=this.virtualToRealAttributeName(e);if(null!==n){var r="@"===n[0],o=n.substring(1),i=r?this.realNode.getAttribute(o)||"":this.realNode.style.getPropertyValue(o)||"",a=i.split(/\s+/).sort().filter(function(e,n,r){return e!==t&&e.length>0&&(0===n||e!==r[n-1])}).join(" ");a?r?this.realNode.setAttribute(o,a):this.realNode.style.setProperty(o,a):r?this.realNode.removeAttribute(o):this.realNode.style.removeProperty(o)}}},{key:"setOrIncludeRealAttribute",value:function(e,t){var n=e.indexOf("=");n>=0?this.includeRealAttribute(e.substring(0,n),e.substring(n+1)):this.setRealAttribute(e,t)}},{key:"removeOrExcludeRealAttribute",value:function(e){var t=e.indexOf("=");t>=0?this.excludeRealAttribute(e.substring(0,t),e.substring(t+1)):this.removeRealAttribute(e)}},{key:"updateRealAttributes",value:function(e){var t=this.attributes;if(!Object(g.areArraysEqual)(t,e)){for(var n=0,r=0,o=e.length,i=t.length;n<o&&r<i;){var a=e[n],s=t[r];if(a===s){var l=e[n+1],u=t[r+1];l!==u&&this.setOrIncludeRealAttribute(s,u),n+=2,r+=2}else a<s?(this.removeOrExcludeRealAttribute(a),n+=2):(this.setOrIncludeRealAttribute(s,t[r+1]),r+=2)}for(;n<o;)this.removeOrExcludeRealAttribute(e[n]),n+=2;for(;r<i;)this.setOrIncludeRealAttribute(t[r],t[r+1]),r+=2;this.updateVAttributes()}}},{key:"getAttributesFromRealNode",value:function(e){for(var t=this,n=this.attributeNames,r=this.getAttributeNamesFromRealNode(),o=[],i=0,a=0,s=0,l=n.length,u=r.length,c=function(r){if(e){if("@"!==r[0]&&i>0){var o=n[i-1];if(o===r.substr(0,o.length))return}t.removeRealAttribute(r)}};i<l&&a<u;)!function(){var e=r[a],l=n[i],u=l.length-1,d="="===l[u],f=d?l.substring(0,u):l;if(e<f)a++,c(e);else if(e===f){var h=t.getRealAttribute(f);if(i++,a++,null!==h)if(d){var p=h.split(/\s+/).sort().filter(function(e,t,n){return e.length>0&&(0===t||e!==n[t-1])&&(o[s++]=l+e,o[s++]="",!0)}).join(" ")||null;p!==h&&(p?t.setRealAttribute(f,p):t.removeRealAttribute(f))}else o[s++]=f,o[s++]=h}else if(i++,"@"!==f[0]){var m=t.getRealAttribute(f);null!==m&&(o[s++]=f,o[s++]=m)}}();for(;a<u;)c(r[a++]);return o}},{key:"toHtml",value:function(){if(this.isFormattingHelper())return"";switch(this.nodeType){case"format":case"structure":var e=Object(g.escapeHtml)(this.nodeName.toLowerCase());return"<".concat(e).concat(this.attributesToHtml(),">").concat(this.contentToHtml(),"</").concat(e,">");case"embed":var t=Object(g.escapeHtml)(this.nodeName.toLowerCase()),n=this.empty?"":' contenteditable="false"',r=this.empty?"":"</".concat(t,">");return"<".concat(t).concat(n).concat(this.attributesToHtml(),">").concat(r);case"unknown":case"root":return this.contentToHtml();default:return""}}},{key:"contentToHtml",value:function(){if(!this.childNodes)return"";for(var e="",t=0,n=this.childNodes.length;t<n;++t)e+=this.childNodes[t].toHtml();return e}},{key:"attributesToHtml",value:function(){for(var e="",t="",n=0,r=this.attributes.length;n<r;){var o=this.attributes[n++],i=this.attributes[n++],a=o.indexOf("=");if(a>0){var s=o.substring(0,a+1);for(i=o.substring(a+1),o=o.substring(0,a);n<r&&this.attributes[n].substring(0,a+1)===s;)i+=" "+this.attributes[n].substring(a+1),n+=2}"@"===o[0]?e+=" ".concat(Object(g.escapeHtml)(o.substr(1)),'="').concat(Object(g.escapeHtml)(i),'"'):"$"===o[0]&&(t+="".concat(Object(g.escapeHtml)(o.substr(1)),":").concat(Object(g.escapeHtml)(i),";"))}return""!==t&&(e+=' style="'.concat(t,'"')),e}},{key:"isFormattingHelper",value:function(){return"format"===this.nodeType&&1===this.childNodes.length&&this.childNodes[0].isFormattingHelper()}}],[{key:"embedConfig",value:function(e,n){return new m.default(t,e,"embed").withAttributeNames(n)}},{key:"formatConfig",value:function(e,n,r){return new m.default(t,e,"format").withAttributeNames(n).withValidChildNodes(r)}},{key:"structureConfig",value:function(e,n,r,o){return new m.default(t,e,"structure").withNeedsBr(n).withAttributeNames(r).withValidChildNodes(o)}},{key:"unknownConfig",value:function(){return new m.default(t,"#unknown","unknown")}}]),t}(p.default)},"./src/nodes/HeadingVNode.js":/*!***********************************!*\
  !*** ./src/nodes/HeadingVNode.js ***!
  \***********************************/
/*! exports provided: default */
function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return b});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),o=n.n(r),i=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(i),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),l=n.n(s),u=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(u),d=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),f=n.n(d),h=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),p=n.n(h),m=n(/*! ./ElementVNode */"./src/nodes/ElementVNode.js"),g=n(/*! ../config/VNodeConfig */"./src/config/VNodeConfig.js"),v=n(/*! ../util/misc */"./src/util/misc.js"),b=function(e){function t(){return o()(this,t),l()(this,c()(t).apply(this,arguments))}return p()(t,e),a()(t,[{key:"getRealAttribute",value:function(e){return"@id"===e&&"true"===this.realNode.getAttribute("data-ot-auto-id")?null:f()(c()(t.prototype),"getRealAttribute",this).call(this,e)}},{key:"toHtml",value:function(){var e=Object(v.escapeHtml)(this.nodeName.toLowerCase()),t=!!this.realNode&&"true"===this.realNode.getAttribute("data-ot-auto-id"),n=this.realNode?this.realNode.getAttribute("id"):null,r=t&&null!==n?' id="'.concat(Object(v.escapeHtml)(n),'"'):"",o=n?'<a class="ot-anchor" data-mce-bogus="all" href="#'.concat(Object(v.escapeHtml)(n),'"></a>'):"";return"<".concat(e).concat(r).concat(this.attributesToHtml(),">").concat(o).concat(this.contentToHtml(),"</").concat(e,">")}}],[{key:"config",value:function(e,n,r){return new g.default(t,e,"structure").withNeedsBr(!0).withAttributeNames(n).withValidChildNodes(r).withCustomElementName("ot-built-in-".concat(e.toLowerCase()))}}]),t}(m.default)},"./src/nodes/IFrameVNode.js":/*!**********************************!*\
  !*** ./src/nodes/IFrameVNode.js ***!
  \**********************************/
/*! exports provided: default */
function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return m});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),o=n.n(r),i=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(i),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),l=n.n(s),u=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(u),d=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),f=n.n(d),h=n(/*! ./ElementVNode */"./src/nodes/ElementVNode.js"),p=n(/*! ../config/VNodeConfig */"./src/config/VNodeConfig.js"),m=function(e){function t(){return o()(this,t),l()(this,c()(t).apply(this,arguments))}return f()(t,e),a()(t,null,[{key:"config",value:function(e){return new p.default(t,"IFRAME","embed").withAttributeNames(e).withCustomElementName("ot-built-in-iframe")}}]),t}(h.default)},"./src/nodes/ImgVNode.js":/*!*******************************!*\
  !*** ./src/nodes/ImgVNode.js ***!
  \*******************************/
/*! exports provided: default */
function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return v});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),o=n.n(r),i=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(i),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),l=n.n(s),u=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(u),d=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),f=n.n(d),h=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),p=n.n(h),m=n(/*! ./ElementVNode */"./src/nodes/ElementVNode.js"),g=n(/*! ../config/VNodeConfig */"./src/config/VNodeConfig.js"),v=function(e){function t(){return o()(this,t),l()(this,c()(t).apply(this,arguments))}return p()(t,e),a()(t,[{key:"realToVirtualAttributeName",value:function(e){switch(e){case"@data-ot-src":return"@src";case"@data-ot-width":return"@width";case"@data-ot-height":return"@height";case"@src":case"@width":case"@height":return null;default:return f()(c()(t.prototype),"realToVirtualAttributeName",this).call(this,e)}}},{key:"virtualToRealAttributeName",value:function(e){switch(e){case"@src":return"@data-ot-src";case"@width":return"@data-ot-width";case"@height":return"@data-ot-height";case"@data-ot-src":case"@data-ot-width":case"@data-ot-height":return null;default:return f()(c()(t.prototype),"virtualToRealAttributeName",this).call(this,e)}}}],[{key:"config",value:function(e){return new g.default(t,"IMG","embed").withAttributeNames(e).withEmpty(!0).withCustomElementName("ot-built-in-img")}}]),t}(m.default)},"./src/nodes/PreVNode.js":/*!*******************************!*\
  !*** ./src/nodes/PreVNode.js ***!
  \*******************************/
/*! exports provided: default */
function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return v});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),o=n.n(r),i=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(i),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),l=n.n(s),u=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(u),d=n(/*! @babel/runtime/helpers/get */"./node_modules/@babel/runtime/helpers/get.js"),f=n.n(d),h=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),p=n.n(h),m=n(/*! ./ElementVNode */"./src/nodes/ElementVNode.js"),g=n(/*! ../config/VNodeConfig */"./src/config/VNodeConfig.js"),v=function(e){function t(){return o()(this,t),l()(this,c()(t).apply(this,arguments))}return p()(t,e),a()(t,[{key:"realToVirtualAttributeName",value:function(e){return"@class"===e&&"embed"===this.nodeType?null:f()(c()(t.prototype),"realToVirtualAttributeName",this).call(this,e)}},{key:"virtualToRealAttributeName",value:function(e){return"@class"===e&&"embed"===this.nodeType?null:f()(c()(t.prototype),"virtualToRealAttributeName",this).call(this,e)}},{key:"toHtml",value:function(){if("embed"===this.nodeType){var e=this.realNode?this.realNode.innerHTML:"";return'<pre contenteditable="false"'.concat(this.realNode?' class="'.concat(this.realNode.getAttribute("class"),'"'):"").concat(this.attributesToHtml(),">").concat(e,"</pre>")}return f()(c()(t.prototype),"toHtml",this).call(this)}}],[{key:"structureConfig",value:function(e,n){return new g.default(t,"PRE","structure").withNeedsBr(!0).withAttributeNames(e).withValidChildNodes(n)}},{key:"embedConfig",value:function(e){return new g.default(t,"PRE","embed").withAttributeNames(e).withCustomElementName("ot-built-in-pre")}}]),t}(m.default)},"./src/nodes/RootVNode.js":/*!********************************!*\
  !*** ./src/nodes/RootVNode.js ***!
  \********************************/
/*! exports provided: default */
function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return m});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),o=n.n(r),i=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(i),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),l=n.n(s),u=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(u),d=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),f=n.n(d),h=n(/*! ./ElementVNode */"./src/nodes/ElementVNode.js"),p=n(/*! ../config/VNodeConfig */"./src/config/VNodeConfig.js"),m=function(e){function t(){return o()(this,t),l()(this,c()(t).apply(this,arguments))}return f()(t,e),a()(t,[{key:"realToVirtualAttributeName",value:function(e){return this.attributeNames.indexOf(e)<0?null:e}},{key:"virtualToRealAttributeName",value:function(e){return this.attributeNames.indexOf(e)<0?null:e}}],[{key:"config",value:function(e,n){return new p.default(t,"#root","root").withAttributeNames(e).withValidChildNodes(n)}}]),t}(h.default)},"./src/nodes/TextVNode.js":/*!********************************!*\
  !*** ./src/nodes/TextVNode.js ***!
  \********************************/
/*! exports provided: default */
function(e,t,n){"use strict";function r(e){return Object(g.repeatString)("\xa0",e.length-1)+" "}n.r(t),n.d(t,"default",function(){return b});var o=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(o),a=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),s=n.n(a),l=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(l),c=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),d=n.n(c),f=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),h=n.n(f),p=n(/*! ./VNode */"./src/nodes/VNode.js"),m=n(/*! ../config/VNodeConfig */"./src/config/VNodeConfig.js"),g=n(/*! ../util/misc */"./src/util/misc.js"),v=11===document.documentMode,b=function(e){function t(){return i()(this,t),u()(this,d()(t).apply(this,arguments))}return h()(t,e),s()(t,[{key:"normalizeNodeValue",value:function(e){return"\ufeff"===e?e:e.replace(/\uFEFF/g,"").replace(/\u00A0/g," ")}},{key:"denormalizeNodeValue",value:function(e){return v?e.replace(/  +/g,r):e.replace(/ {2}/g,"\xa0 ").replace(/ {2}/g," \xa0").replace(/^ /,"\xa0").replace(/ $/,"\xa0")}},{key:"createRealNode",value:function(e){return e.createTextNode("")}},{key:"updateRealNodeValue",value:function(e){if(this.nodeValue!==e){var t=this.normalizeNodeValue(this.nodeValue),n=this.denormalizeNodeValue(t);this.nodeValue=t,this.realNode.nodeValue=n}}},{key:"updateVNodeValue",value:function(){var e=this.realNode,t=e.nodeValue,n=this.normalizeNodeValue(t),r=this.denormalizeNodeValue(n);if(this.nodeValue=n,t!==r){var o=e.ownerDocument,i=o.defaultView;if(!i)return void(e.nodeValue=r);var a=i.getSelection();if(0===a.rangeCount)return void(e.nodeValue=r);var s=a.anchorNode,l=a.anchorOffset,u=a.focusNode,c=a.focusOffset;if(s!==e&&u!==e)return void(e.nodeValue=r);if(v)return;e.nodeValue=r;var d=r.length,f=s!==e?l:Math.min(d,l),h=u!==e?c:Math.min(d,c);Object(g.setSelection)(a,s,f,u,h)}}},{key:"toHtml",value:function(){return this.isFormattingHelper()?"":Object(g.escapeHtml)(this.denormalizeNodeValue(this.normalizeNodeValue(this.nodeValue)))}},{key:"validateNodeValue",value:function(){return v?this.normalizeNodeValue(this.realNode.nodeValue)===this.normalizeNodeValue(this.nodeValue):this.realNode.nodeValue===this.denormalizeNodeValue(this.normalizeNodeValue(this.nodeValue))}},{key:"isFormattingHelper",value:function(){return"\ufeff"===this.nodeValue}}],[{key:"config",value:function(){return new m.default(t,"#text","text")}}]),t}(p.default)},"./src/nodes/VNode.js":/*!****************************!*\
  !*** ./src/nodes/VNode.js ***!
  \****************************/
/*! exports provided: default */
function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return v});var r=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),o=n.n(r),i=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(i),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),l=n.n(s),u=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(u),d=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),f=n.n(d),h=n(/*! @babel/runtime/helpers/wrapNativeSuper */"./node_modules/@babel/runtime/helpers/wrapNativeSuper.js"),p=n.n(h),m=n(/*! ../util/misc */"./src/util/misc.js"),g=function(e){function t(e,n,r){var o;return a()(this,t),o=l()(this,c()(t).call(this,e)),o.vNode=n,o.realNode=r||n.realNode,o}return f()(t,e),t}(p()(Error)),v=function(){function e(t,n,r){a()(this,e),this.config=t,this.childNodes=t.hasChildNodes?[]:null,this.attributes=null,this.nodeValue=t.hasNodeValue?null!=n?n:"text"===t.nodeType?"":r&&r[m.vNodeKey]&&r[m.vNodeKey].nodeValue||String.fromCharCode(57344+6400*Math.random()):"",this.realNode=null,this.modelStartOffset=0,this.modelEndOffset=0}return o()(e,[{key:"createRealNode",value:function(e){return null}},{key:"upgradeRealNode",value:function(e){}},{key:"updateRealNodeValue",value:function(e){}},{key:"updateRealAttributes",value:function(e){}},{key:"updateVNodeValue",value:function(){}},{key:"updateVAttributes",value:function(){}},{key:"toHtml",value:function(){return""}},{key:"appendTo",value:function(e){return e.childNodes.push(this),this}},{key:"isSimilarTo",value:function(e){return this.nodeName===e.nodeName&&this.nodeType===e.nodeType&&("text"===this.nodeType||this.nodeValue===e.nodeValue)}},{key:"linkRealNode",value:function(e){if(this.realNode)throw new Error("This vNode is already linked to a realNode");var t=!e[m.vNodeKey];if(this.realNode=e,e[m.vNodeKey]=this,t&&e[m.fakeCustomElementKey]){var n=e.connectedCallback;"function"==typeof n&&n.call(e)}return e}},{key:"unlinkRealNode",value:function(){var e=this.realNode,t=this.childNodes;if(this.realNode[m.vNodeKey]=null,this.realNode=null,t)for(var n=0,r=t.length;n<r;++n)t[n].unlinkRealNode();if(e[m.fakeCustomElementKey]){var o=e.disconnectedCallback;"function"==typeof o&&o.call(e)}}},{key:"resetNodeId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\ue000";this.hasNodeValue&&"text"!==this.nodeType&&(this.nodeValue=e);var t=this.childNodes;if(t)for(var n=0,r=t.length;n<r;++n)t[n].resetNodeId(e)}},{key:"restoreNodeId",value:function(e){if("structure"!==this.nodeType&&"embed"!==this.nodeType&&"root"!==this.nodeType)return!0;if(this.config===e.config&&Object(m.areArraysEqual)(this.attributes,e.attributes)){if(this.nodeValue=e.nodeValue,null!==this.childNodes){for(var t=0,n=this.childNodes.length-1,r=0,o=e.childNodes.length-1;t<=n&&r<=o&&this.childNodes[t].restoreNodeId(e.childNodes[r]);)t++,r++;for(;t<=n&&r<=o&&this.childNodes[n].restoreNodeId(e.childNodes[o]);)n--,o--}return!0}return!1}},{key:"validate",value:function(){try{return this.validateVirtualNode(),this.validateRealNode(this.realNode),this.validateNodesEqual(),null}catch(e){return console.error(e,e.vNode,e.realNode),e}}},{key:"validateRealNode",value:function(e){if(!Object(m.isIgnoredNode)(e)){var t=e[m.vNodeKey];if(!t)throw new g("vNode missing",t,e);if(t.realNode!==e)throw new g("Invalid realNode",t,e);if(null!==t.childNodes)for(var n=e.childNodes,r=0,o=n.length;r<o;++r)this.validateRealNode(n[r])}}},{key:"validateVirtualNode",value:function(){if(!this.realNode)throw new g("realNode missing",this);if(this.realNode[m.vNodeKey]!==this)throw new g("Invalid vNode",this);if(this.childNodes)for(var e=0,t=this.childNodes.length;e<t;++e)this.childNodes[e].validateVirtualNode()}},{key:"validateNodesEqual",value:function(){var e=this.realNode;if("#root"!==this.nodeName&&"#unknown"!==this.nodeName&&this.nodeName!==e.nodeName)throw new g("nodeName mismatch",this);if("text"===this.nodeType&&!this.validateNodeValue())throw new g("nodeValue mismatch",this);if(this.attributeNames){if(!this.attributes)throw new g("attributes missing",this);if(!Object(m.areArraysEqual)(this.attributes,this.getAttributesFromRealNode(!1)))throw new g("attributes mismatch",this)}else if(this.attributes)throw new g("attributes unexpected",this);if(this.childNodes){for(var t=e.childNodes,n=0,r=0,o=this.childNodes.length,i=t.length;n<o&&r<i;){var a=t[r++];Object(m.isIgnoredNode)(a)||this.childNodes[n++].validateNodesEqual()}for(;n<o;)throw new g("An extraneous virtual node found at index "+n,this);for(;r<i;){if(!Object(m.isIgnoredNode)(t[r]))throw new g("An extraneous real node found at index "+r,this);r++}}}},{key:"validateNodeValue",value:function(){return!0}},{key:"toJSON",value:function(){return{nodeName:this.nodeName,nodeType:this.nodeType,nodeValue:this.nodeValue,modelStartOffset:this.modelStartOffset,modelEndOffset:this.modelEndOffset,attributes:this.attributes,childNodes:this.childNodes}}},{key:"isFormattingHelper",value:function(){return!1}},{key:"nodeName",get:function(){return this.config.nodeName}},{key:"nodeType",get:function(){return this.config.nodeType}},{key:"needsBr",get:function(){return this.config.needsBr}},{key:"attributeNames",get:function(){return this.config.attributeNames}},{key:"hasChildNodes",get:function(){return this.config.hasChildNodes}},{key:"hasNodeValue",get:function(){return this.config.hasNodeValue}},{key:"defaultChildNode",get:function(){return this.config.defaultChildNode}},{key:"validChildNodes",get:function(){return this.config.validChildNodes}},{key:"empty",get:function(){return this.config.empty}},{key:"customElementName",get:function(){return this.config.customElementName}}]),e}()},"./src/nodes/VideoVNode.js":/*!*********************************!*\
  !*** ./src/nodes/VideoVNode.js ***!
  \*********************************/
/*! exports provided: default */
function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return m});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),o=n.n(r),i=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(i),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),l=n.n(s),u=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(u),d=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),f=n.n(d),h=n(/*! ./ElementVNode */"./src/nodes/ElementVNode.js"),p=n(/*! ../config/VNodeConfig */"./src/config/VNodeConfig.js"),m=function(e){function t(){return o()(this,t),l()(this,c()(t).apply(this,arguments))}return f()(t,e),a()(t,[{key:"toHtml",value:function(){return"<video".concat(this.attributesToHtml(),"></video>")}}],[{key:"config",value:function(e){return new p.default(t,"VIDEO","embed").withAttributeNames(e).withCustomElementName("ot-built-in-video")}}]),t}(h.default)},"./src/tinymce/TinyMcePresence.js":/*!****************************************!*\
  !*** ./src/tinymce/TinyMcePresence.js ***!
  \****************************************/
/*! exports provided: TinyMcePresence */
function(e,t,n){"use strict";n.r(t),n.d(t,"TinyMcePresence",function(){return y});var r=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),o=n.n(r),i=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),a=n.n(i),s=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),l=n.n(s),u=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),c=n.n(u),d=n(/*! @babel/runtime/helpers/assertThisInitialized */"./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),f=n.n(d),h=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),p=n.n(h),m=n(/*! events */"./node_modules/events/events.js"),g=n(/*! scroll-into-view-if-needed */"./node_modules/scroll-into-view-if-needed/es/index.js"),v=n(/*! ../util/misc */"./src/util/misc.js"),b=n(/*! ../util/colors */"./src/util/colors.js"),y=function(e){function t(e,n,r){var i;o()(this,t),i=l()(this,c()(t).call(this));var a=r.ownerDocument;return i.onDeactivationTimeout=i.onDeactivationTimeout.bind(f()(i)),i.deactivationTimeoutHandle=null,i.src=e,i.userId=n,i.containerNode=r,i.color="#fff",i.backgroundColor=Object(b.claimColor)(i.containerNode,i.userId),i.deactivationDelay=1e3,i.numberOfChanges=0,i.selectionFadedOut=!1,i.viewport=null,i.containerRect=null,i.caretRect=null,i.selectionRects=null,i.caretNode=a.createElement("DIV"),i.caretNode.classList.add("ot-caret"),i.containerNode.appendChild(i.caretNode),i.barNode=a.createElement("DIV"),i.barNode.style.color=i.color,i.barNode.style.backgroundColor=i.backgroundColor,i.barNode.classList.add("ot-caret__bar"),i.caretNode.appendChild(i.barNode),i.labelNode=a.createElement("DIV"),i.labelNode.style.color=i.color,i.labelNode.style.backgroundColor=i.backgroundColor,i.labelNode.classList.add("ot-caret__label"),i.caretNode.appendChild(i.labelNode),i.avatarNode=a.createElement("IMG"),i.avatarNode.style.borderColor=i.color,i.avatarNode.classList.add("ot-caret__avatar"),i.avatarNode.addEventListener("error",function(){i.avatarNode.classList.add("ot-caret__avatar--error")}),i.labelNode.appendChild(i.avatarNode),i.labelTextNode=a.createTextNode(""),i.labelNode.appendChild(i.labelTextNode),i.selectionNode=a.createElement("DIV"),i.selectionNode.style.color=i.color,i.selectionNode.style.backgroundColor=i.backgroundColor,i.selectionNode.classList.add("ot-selection"),i.selectionNode.addEventListener("transitionend",i.onSelectionTransitionEnd.bind(f()(i))),i.containerNode.appendChild(i.selectionNode),i.label="",i.avatar="",i.active=!1,i.hovered=!1,i.custom=null,i.ensureStyles(),i}return p()(t,e),a()(t,[{key:"dispose",value:function(){Object(b.releaseColor)(this.containerNode,this.userId),this.removeCaretNode(),this.removeSelectionNode()}},{key:"reportActivity",value:function(e){var t=this.numberOfChanges!==e;this.numberOfChanges=e,this.active=!0,this.emit("activity",t)}},{key:"scrollIntoView",value:function(){Object(g.default)(this.caretNode,{scrollMode:"if-needed"}),this.active=!0}},{key:"containsPoint",value:function(e,t){return e>=0&&t>=0&&(Object(v.nodeContainsPoint)(this.caretNode,e,t)||this.active&&Object(v.nodeContainsPoint)(this.labelNode,e,t))}},{key:"beforeUpdate",value:function(e){e&&this.selectionNode.classList.remove("ot-selection--fade-out")}},{key:"update",value:function(e){e&&this.selectionFadedOut&&(this.selectionFadedOut=!1),this.updateCaret(),this.updateSelection()}},{key:"afterUpdate",value:function(e){e&&this.selectionNode.classList.add("ot-selection--fade-out")}},{key:"ensureStyles",value:function(){for(var e=this.containerNode.children,t=0,n=e.length;t<n;++t){var r=e[t];if("STYLE"===r.nodeName&&"ot-client"===r.getAttribute("data-source"))return}var o=this.containerNode.ownerDocument,i=o.createElement("STYLE");i.setAttribute("type","text/css"),i.setAttribute("data-source","ot-client"),i.textContent="\n.ot-caret {\n    position: absolute;\n    padding: 8px 6px 0 6px;\n    margin: -8px 0 0 -6px;\n    width: 0;\n    box-sizing: content-box;\n}\n\n.ot-caret__bar {\n    height: 100%;\n    width: 2px;\n    margin-left: -1px;\n}\n\n.ot-caret__bar::before {\n    content: '';\n    position: absolute;\n    background: inherit;\n    display: block;\n    width: 8px;\n    height: 8px;\n    margin: -8px 0 0 -3px;\n    opacity: 0.9;\n    transition: opacity 0.15s ease;\n    border-radius: 4px;\n}\n\n.ot-caret--hasLabel.ot-caret--active > .ot-caret__bar::before {\n    opacity: 0;\n}\n\n.ot-caret__label {\n    position: absolute;\n    bottom: 100%;\n    padding: 2px 4px;\n    margin: 0 0 -8px -4px;\n    white-space: nowrap;\n    opacity: 0;\n    transition: opacity 0.15s ease;\n    z-index: 1;\n    border-radius: 4px;\n}\n\n.ot-caret__avatar {\n    width: 16px;\n    height: 16px;\n    max-width: none;\n    margin: 0 3px -4px 0;\n    border-radius: 8px;\n    border: 1px solid;\n}\n\n.ot-caret__avatar--error,\n.ot-caret__avatar:not([src]) {\n    display: none;\n}\n\n.ot-caret--hasLabel.ot-caret--active > .ot-caret__label {\n    opacity: 0.9;\n}\n\n.ot-selection {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 0;\n    height: 0;\n    opacity: 0.2;\n}\n\n.ot-selection--fade-out {\n    opacity: 0;\n    transition: opacity 15s ease-in 5s;\n}\n\n.ot-selection__item {\n    position: absolute;\n    background: inherit;\n    color: inherit;\n}\n",this.containerNode.insertBefore(i,this.containerNode.childNodes[0])}},{key:"addCaretNode",value:function(){this.caretNode.parentNode!==this.containerNode&&this.containerNode.appendChild(this.caretNode)}},{key:"removeCaretNode",value:function(){this.caretNode.parentNode===this.containerNode&&this.containerNode.removeChild(this.caretNode)}},{key:"addSelectionNode",value:function(){this.selectionNode.parentNode!==this.containerNode&&this.containerNode.appendChild(this.selectionNode)}},{key:"removeSelectionNode",value:function(){this.selectionNode.parentNode===this.containerNode&&this.containerNode.removeChild(this.selectionNode)}},{key:"setUpDeactivationTimeout",value:function(e){var t=this.active&&!this.hovered,n=null!=this.deactivationTimeoutHandle;!n||t&&!e||(clearTimeout(this.deactivationTimeoutHandle),this.deactivationTimeoutHandle=null,n=!1),t&&!n&&(this.deactivationTimeoutHandle=setTimeout(this.onDeactivationTimeout,this.deactivationDelay))}},{key:"onDeactivationTimeout",value:function(){this.deactivationTimeoutHandle=null,this.active=!1}},{key:"onSelectionTransitionEnd",value:function(e){e.target!==this.selectionNode||e.pseudoElement||"opacity"!==e.propertyName||(this.selectionFadedOut=!0,this.removeSelectionNode())}},{key:"updateCaret",value:function(){var e=this.caretRect;if(!e)return void this.removeCaretNode();this.addCaretNode(),this.caretNode.style.left=e.left-this.containerRect.left+"px",this.caretNode.style.top=e.top-this.containerRect.top+"px",this.caretNode.style.height=e.height+"px"}},{key:"updateSelection",value:function(){if(!this.selectionFadedOut){var e=this.selectionRects;if(!e)return void this.removeSelectionNode();this.addSelectionNode();for(var t=this.containerRect,n=this.selectionNode.ownerDocument,r=this.viewport.top,o=this.viewport.bottom,i=this.selectionNode.firstChild,a=0,s=e.length;a<s;++a){var l=e[a],u=l.top-t.top,c=l.height,d=u+c;u>o||d<r||(i||(i=n.createElement("DIV"),i.classList.add("ot-selection__item"),this.selectionNode.appendChild(i)),i.style.left=l.left-t.left+"px",i.style.top=u+"px",i.style.width=l.width+"px",i.style.height=c+"px",i=i.nextSibling)}for(;i;){var f=i.nextSibling;this.selectionNode.removeChild(i),i=f}}}},{key:"label",get:function(){return this._label},set:function(e){this._label=""+e;var t=this._label.length>0;this.labelTextNode.data=this._label,Object(v.toggleClass)(this.caretNode,"ot-caret--hasLabel",t),Object(v.toggleClass)(this.caretNode,"ot-caret--noLabel",!t)}},{key:"avatar",get:function(){return this._avatar},set:function(e){this._avatar=""+e,this.avatarNode.classList.remove("ot-caret__avatar--error"),!this._avatar?this.avatarNode.removeAttribute("src"):this.avatarNode.setAttribute("src",this._avatar)}},{key:"hovered",get:function(){return this._hovered},set:function(e){this._hovered=e=!!e,e&&!this.active&&(this.active=!0),this.setUpDeactivationTimeout(!1)}},{key:"active",get:function(){return this._active},set:function(e){e=!!e,this._active!==e&&(this._active=e,Object(v.toggleClass)(this.caretNode,"ot-caret--active",e),Object(v.toggleClass)(this.caretNode,"ot-caret--inactive",!e)),this.setUpDeactivationTimeout(!0)}}]),t}(m.EventEmitter)},"./src/tinymce/TinyMceSync.js":/*!************************************!*\
  !*** ./src/tinymce/TinyMceSync.js ***!
  \************************************/
/*! exports provided: TinyMceSync */
function(e,t,n){"use strict";n.r(t),n.d(t,"TinyMceSync",function(){return R});var r=n(/*! @babel/runtime/helpers/toConsumableArray */"./node_modules/@babel/runtime/helpers/toConsumableArray.js"),o=n.n(r),i=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(i),s=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),l=n.n(s),u=n(/*! @babel/runtime/helpers/possibleConstructorReturn */"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),c=n.n(u),d=n(/*! @babel/runtime/helpers/getPrototypeOf */"./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),f=n.n(d),h=n(/*! @babel/runtime/helpers/assertThisInitialized */"./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),p=n.n(h),m=n(/*! @babel/runtime/helpers/inherits */"./node_modules/@babel/runtime/helpers/inherits.js"),g=n.n(m),v=n(/*! events */"./node_modules/events/events.js"),b=n(/*! lodash.throttle */"./node_modules/lodash.throttle/index.js"),y=n.n(b),w=n(/*! scroll-into-view-if-needed */"./node_modules/scroll-into-view-if-needed/es/index.js"),x=n(/*! @teamwork/ot-rich-text/lib/Operation */"./node_modules/@teamwork/ot-rich-text/lib/Operation.js"),C=n(/*! @teamwork/ot-rich-text/lib/Action */"./node_modules/@teamwork/ot-rich-text/lib/Action.js"),k=n(/*! ../util/misc */"./src/util/misc.js"),N=n(/*! ./TinyMcePresence */"./src/tinymce/TinyMcePresence.js"),_=n(/*! ../util/ReadOnlyRect */"./src/util/ReadOnlyRect.js"),S=[],T=[],E=Object.freeze({node:null,offset:0}),O=function(e,t){return t?function(t){return t.modelStartOffset>=e?-1:t.modelEndOffset<e?1:0}:function(t){return t.modelStartOffset>e?-1:t.modelEndOffset<=e?1:0}},A=new WeakMap,D=new WeakMap,R=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.config,o=n.doc,i=n.domNode,s=n.presenceEnabled,l=void 0===s||s,u=n.debug,d=void 0!==u&&u,h=n.presenceDelay,m=void 0===h?500:h,g=n.asyncScrollUpdate,v=void 0!==g&&g;a()(this,t),e=c()(this,f()(t).call(this)),e._document=i.ownerDocument;var b=e._document.defaultView,w=Object(k.getIframeElement)(b)?b.parent:null;return e._parentWindow=w,e._formats=r.formats,e._formatsByDom=r.formatsByDom,e._formatsByOt=r.formatsByOt,e._configByNodeName=r.configByNodeName,e._formats.forEach(function(e,t){S[t]=null,T[t]=0}),e._doc=o,e._undoManager=o.connection.createUndoManager(),e._realDom=i,e._addRealDomStyles(),e._presenceEnabled=!1,e._virtualDom=e.createVNodeFromRealNode(e._realDom,!0),e.debug=d,e._asyncScrollUpdate=v,e.debug&&e._virtualDom.validate(),e._presenceInnerNode=e._document.createElement("DIV"),e._presenceInnerNode.style.display="block",e._presenceInnerNode.style.position="absolute",e._presenceInnerNode.style.top="0",e._presenceInnerNode.style.left="0",e._presenceInnerNode.style.width="100%",e._presenceInnerNode.style.height="100%",e._presenceNode=e._document.createElement("DIV"),e._presenceNode.classList.add("ot-presence"),e._presenceNode.setAttribute("data-mce-bogus","all"),e._presenceNode.setAttribute("contenteditable","false"),e._presenceNode.style.userSelect="none",e._presenceNode.style.pointerEvents="none",e._presenceNode.style.display="block",e._presenceNode.style.position="static",e._presenceNode.style.width="100%",e._presenceNode.style.height="0",e._presenceNode.appendChild(e._presenceInnerNode),e._presence=Object.create(null),e._updatedPresence=Object.create(null),e._changeNumber=0,e._lastSelection={anchor:-1,focus:-1},e._mouseX=-1,e._mouseY=-1,e._selectingWithMouse=!1,e._handleMouse=y()(e._handleMouse.bind(p()(e)),null,{leading:!1}),e._updatePresence=y()(e._updatePresence.bind(p()(e)),null,{leading:!1}),e._updatePresenceViewport=y()(e._updatePresenceViewport.bind(p()(e)),null,{leading:!1}),e._triggerSelectionChange=y()(e._handleSelectionChange.bind(p()(e)),null,{leading:!1}),e._scheduleSubmitPresence=y()(e._submitPresence.bind(p()(e)),m,{leading:!1}),e._doc.on("load",e._onLoad=e._onLoad.bind(p()(e))),e._doc.on("op",e._onOperation=e._onOperation.bind(p()(e))),e._doc.on("presence",e._onPresenceChange=e._onPresenceChange.bind(p()(e))),e._document.addEventListener("selectionchange",e._onSelectionChange=e._onSelectionChange.bind(p()(e))),b.addEventListener("resize",e._onResize=e._onResize.bind(p()(e))),b.addEventListener("scroll",e._onScroll=e._onScroll.bind(p()(e))),w&&w.addEventListener("scroll",e._onScroll),e._realDom.addEventListener("mousemove",e._onMouseMove=e._onMouseMove.bind(p()(e))),e._realDom.addEventListener("mouseleave",e._onMouseLeave=e._onMouseLeave.bind(p()(e))),e._document.addEventListener("mousedown",e._onMouseDown=e._onMouseDown.bind(p()(e)),!0),e._document.addEventListener("mouseup",e._onMouseUp=e._onMouseUp.bind(p()(e)),!0),e._aboutToProcessMutations=!1,e._pendingMutationsToPrepend=[],e._pendingMutationsToAppend=[],e._mutationObserverConfig={childList:!0,attributes:!0,characterData:!0,subtree:!0},e._mutationObserver=new MutationObserver(e._onRealDomChange.bind(p()(e))),e._watchRealDom(),e._updateRealDom(),e.presenceEnabled=l,e}return g()(t,e),l()(t,[{key:"dispose",value:function(){var e=this._document.defaultView,t=this._parentWindow;this._unwatchRealDom(),this._removeRealDomStyles(),this._doc.removeListener("load",this._onLoad),this._doc.removeListener("op",this._onOperation),this._doc.removeListener("presence",this._onPresenceChange),this._document.removeEventListener("selectionchange",this._onSelectionChange),e&&e.removeEventListener("resize",this._onResize),e&&e.removeEventListener("scroll",this._onScroll),t&&t.removeEventListener("scroll",this._onScroll),this._realDom.removeEventListener("mousemove",this._onMouseMove),this._realDom.removeEventListener("mouseleave",this._onMouseLeave),this._document.removeEventListener("mousedown",this._onMouseDown,!0),this._document.removeEventListener("mouseup",this._onMouseUp,!0),this._virtualDom.unlinkRealNode(),this._handleMouse.cancel(),this._updatePresence.cancel(),this._updatePresenceViewport.cancel(),this._triggerSelectionChange.cancel(),this._scheduleSubmitPresence.cancel(),this._presenceNode.parentNode&&this._presenceNode.parentNode.removeChild(this._presenceNode)}},{key:"canUndo",value:function(){return this._undoManager.canUndo()}},{key:"undo",value:function(){this._undoManager.undo({source:"undo"})}},{key:"canRedo",value:function(){return this._undoManager.canRedo()}},{key:"redo",value:function(){this._undoManager.redo({source:"redo"})}},{key:"_watchRealDom",value:function(){this._mutationObserver.observe(this._realDom,this._mutationObserverConfig),this._pendingMutationsToPrepend.length>0&&(this._realDom.setAttribute("data-trigger-mutation-observer",""),this._realDom.removeAttribute("data-trigger-mutation-observer"))}},{key:"_unwatchRealDom",value:function(){var e=this._mutationObserver.takeRecords();if(this._aboutToProcessMutations){var t;(t=this._pendingMutationsToAppend).push.apply(t,o()(e))}else{var n;(n=this._pendingMutationsToPrepend).push.apply(n,o()(e))}this._mutationObserver.disconnect()}},{key:"_addRealDomStyles",value:function(){var e=this._document.defaultView;if(e){var t=e.getComputedStyle(this._realDom).getPropertyValue("position");this._realDom.setAttribute("data-initial-style-position",this._realDom.style.position),this._realDom.style.position=t&&"static"!==t?t:"relative"}}},{key:"_removeRealDomStyles",value:function(){this._realDom.style.position=this._realDom.getAttribute("data-initial-style-position")||"",this._realDom.removeAttribute("data-initial-style-position")}},{key:"_getScrollParent",value:function(){var e,t=Object(k.getIframeElement)(this._document.defaultView)||this._realDom,n=t.ownerDocument.defaultView,r=t.ownerDocument.documentElement;if(!n)return null;do{t=t.parentNode}while(t&&t!==r&&"scroll"!==(e=n.getComputedStyle(t).overflowY)&&"auto"!==e);return t}},{key:"_ensurePresenceNodeIsFirst",value:function(){var e=this._presenceNode.previousSibling;if(e&&e.nodeType===Node.ELEMENT_NODE&&"before"===e.getAttribute("data-mce-caret")){this._unwatchRealDom(),e.parentNode.removeChild(e);var t=this._realDom.querySelector(".mce-visual-caret");t&&t.parentNode.removeChild(t),this._watchRealDom()}var n=this._presenceNode.nextSibling;if(n&&n.nodeType===Node.ELEMENT_NODE&&"after"===n.getAttribute("data-mce-caret")){this._unwatchRealDom(),n.parentNode.removeChild(n);var r=this._realDom.querySelector(".mce-visual-caret");r&&r.parentNode.removeChild(r),this._watchRealDom()}this._presenceNode!==this._realDom.firstChild&&(this._unwatchRealDom(),this._realDom.insertBefore(this._presenceNode,this._realDom.firstChild),this._watchRealDom()),this._fixSelection()}},{key:"_onRealDomChange",value:function(e){this._aboutToProcessMutations=!0,this.presenceEnabled&&this._ensurePresenceNodeIsFirst(),this._updateOtModel(e),console.assert(!this._aboutToProcessMutations,"Sync._aboutToProcessMutations was not reset")}},{key:"_updateOtModel",value:function(e){var t=this._updateVirtualDomWithMutations(e);if(this.debug&&this._virtualDom.validate(),t&&null!==this.otModel){var n=this.createOtModelFromVirtualDom(),r=this._lastSelection,o=this.getSelection(),i=r.anchor,a=r.focus,s=o.anchor,l=o.focus,u=Math.min(i,a),c=Math.max(i,a),d=Math.min(s,l),f=Math.max(s,l),h={oldRange:u<0?null:{index:u,length:c-u},newRange:d<0?null:{index:d,length:f-d}};this._lastSelection=o,this._doc.submitSnapshot(n,{undoable:!0,source:"user",diffHint:h})}}},{key:"createVNodeFromRealNode",value:function(e,t){if(!t&&Object(k.isIgnoredNode)(e))return null;var n=t?"#root":e.nodeName,r=this._configByNodeName[n],o=r?e.getAttribute?"1"===e.getAttribute("data-mce-bogus")?this._configByNodeName["#unknown"].$default:"false"===e.getAttribute("contenteditable")&&r.embed||r.$default:r.$default:this._configByNodeName["#unknown"].$default,i=o.createVNode(null,e),a=i.childNodes;if(i.upgradeRealNode(e),i.linkRealNode(e),i.updateVNodeValue(),i.updateVAttributes(),a)for(var s=i.realNode.childNodes,l=0,u=s.length;l<u;++l){var c=this.createVNodeFromRealNode(s[l],!1);c&&a.push(c)}return i}},{key:"_updateVirtualDomWithMutations",value:function(e){var t=[],n=!1,r=new Map;this._unwrapImageFromFormats(),this._unwatchRealDom(),this._aboutToProcessMutations=!1,(this._pendingMutationsToPrepend.length>0||this._pendingMutationsToAppend.length>0)&&(e=this._pendingMutationsToPrepend.concat(e,this._pendingMutationsToAppend),this._pendingMutationsToPrepend.length=0,this._pendingMutationsToAppend.length=0),11===this._document.documentMode&&(e=[],this._virtualDom=this.createVNodeFromRealNode(this._realDom,!0),n=!0);for(var o=0,i=e.length;o<i;++o){var a=e[o],s=a.type,l=a.attributeName,u=a.addedNodes,c=a.removedNodes,d=a.target;if("attributes"===s&&d!==this._realDom)if("data-mce-bogus"===l){var f=d,h=f.parentNode;if(!h)continue;var p="all"!==f.getAttribute("data-mce-bogus");if(p&&f[k.vNodeKey]&&h[k.vNodeKey]&&h[k.vNodeKey].childNodes&&h[k.vNodeKey].childNodes.indexOf(f[k.vNodeKey])>=0)continue;s="childList",l=null,p?(u=[f],c=[]):(u=[],c=[f]),d=h}else if("contenteditable"===l){var m=d,g=m.parentNode;if(!g)continue;if(m[k.vNodeKey]&&"embed"===m[k.vNodeKey].nodeType&&"false"===m.getAttribute("contenteditable"))continue;s="childList",l=null,u=[m],c=[m],d=g}else"data-mce-selected"===l&&this._triggerSelectionChange();var v=d[k.vNodeKey];if(v&&!Object(k.isIgnoredNode)(d)){if("characterData"===s)v.updateVNodeValue();else if("attributes"===s){if("style"!==l){var b=v.realToVirtualAttributeName("@"+l);if(null===b)continue;if(!v.supportsAttribute(b)){d.removeAttribute(l);continue}}else if(d===this._realDom)continue;v.updateVAttributes()}else{if("childList"!==s)continue;if(!v.childNodes)continue;if(Array.prototype.every.call(u,k.isIgnoredNode)&&Array.prototype.every.call(c,k.isIgnoredNode))continue;if(c.length>0&&u.length>0){for(var y=0,w=c.length-1,x=0,C=u.length-1;x<=C&&y<=w;){var N=u[x],_=c[y],S=_[k.vNodeKey];if(Object(k.isIgnoredNode)(N))x++;else if(Object(k.isIgnoredNode)(_))y++;else{if(!S||_.nodeName!==N.nodeName)break;r.set(N,S),x++,y++}}for(;x<=C&&y<=w;){var T=u[C],E=c[w],O=E[k.vNodeKey];if(Object(k.isIgnoredNode)(T))C--;else if(Object(k.isIgnoredNode)(E))w--;else{if(!O||E.nodeName!==T.nodeName)break;r.set(T,O),C--,w--}}}for(var A=0,D=c.length;A<D;++A){var R=c[A],M=R[k.vNodeKey],P=t.indexOf(R);if(P>=0&&t.splice(P,1),M){var L=v.childNodes.indexOf(M);L>=0&&v.childNodes.splice(L,1),M.unlinkRealNode()}}for(var I=0,j=u.length;I<j;++I){var B=u[I];B.nodeType===Node.TEXT_NODE&&""===B.nodeValue?B.parentNode&&B.parentNode.removeChild(B):t.indexOf(B)<0&&t.push(B)}}n=!0}}for(var F=0,H=t.length;F<H;++F){var U=t[F];if(!U[k.vNodeKey]){for(var z=U.parentNode;z&&!z[k.vNodeKey];)U=z,z=U.parentNode;if(Object(k.containsNode)(this._realDom,z)){var W=this.createVNodeFromRealNode(U,!1);if(W){r.has(U)&&W.restoreNodeId(r.get(U));for(var V=z[k.vNodeKey].childNodes,q=U.nextSibling;q&&!q[k.vNodeKey];)q=q.nextSibling;if(q){var $=V.indexOf(q[k.vNodeKey]);V.splice($,0,W)}else V.push(W)}}}}return this._insertFormattingHelper(),this._watchRealDom(),n}},{key:"createOtModelFromVirtualDom",value:function(e){return this._populateOtModelFromVirtualNode(e||this._virtualDom,[],{formattingStack:[],modelOffset:0})}},{key:"_populateOtModelFromVirtualNode",value:function(e,t,n){var r=n.formattingStack,o=e.nodeName,i=e.childNodes;switch(e.modelStartOffset=n.modelOffset,e.nodeType){case"root":case"structure":++n.modelOffset,Object(x.append)(t,Object(C.createInsertOpen)(e.nodeValue+o,e.attributes));for(var a=0,s=i.length;a<s;++a)this._populateOtModelFromVirtualNode(i[a],t,n);if(e.needsBr&&"BR"===Object(C.getNodeName)(t[t.length-1])){for(var l=e;l.childNodes&&l.childNodes.length>0;)l=l.childNodes[l.childNodes.length-1];if("BR"===l.nodeName){--t.length,--n.modelOffset,l=i[i.length-1];do{--l.modelEndOffset,l=l.childNodes&&l.childNodes.length>0?l.childNodes[l.childNodes.length-1]:null}while(l)}}++n.modelOffset,Object(x.append)(t,Object(C.createInsertClose)(e.nodeValue+o));break;case"text":var u=e.nodeValue;if(""!==u){for(var c=Object(C.createInsertText)(u),d=0,f=r.length;d<f;++d){var h=r[d],p=h.attributes,m=h.nodeName,g=this._formatsByDom[m];if(g)Object(C.setAttribute)(c,g.name,"");else for(var v=0,b=p.length;v<b;){var y=p[v++],w=p[v++],k=this._formatsByDom[m+y];if(k)Object(C.setAttribute)(c,k.name,w);else{var N=this._formatsByDom[m+y+"="+w];if(N)Object(C.setAttribute)(c,N.name,"");else if(""===w){var _=y.indexOf("=");if(_>0){var S=this._formatsByDom[m+y.substring(0,_+1)];S&&Object(C.setAttribute)(c,S.name+y.substring(_+1),"")}}}}}"\ufeff"===u?(Object(C.setAttribute)(c,"@data-mce-bogus","1"),Object(C.setAttribute)(c,"@data-mce-type","format-caret"),Object(C.setAttribute)(c,"@id","_mce_caret"),A.set(e,{position:e.modelStartOffset,action:c})):(n.modelOffset+=u.length,Object(x.append)(t,c))}break;case"format":r.push(e);for(var T=0,E=i.length;T<E;++T)this._populateOtModelFromVirtualNode(i[T],t,n);r.pop();break;case"embed":++n.modelOffset,Object(x.append)(t,Object(C.createInsertEmbed)(e.nodeValue+o,e.attributes));break;case"unknown":for(var O=0,D=i.length;O<D;++O)this._populateOtModelFromVirtualNode(i[O],t,n)}return e.modelEndOffset=n.modelOffset,t}},{key:"_insertFormattingHelper",value:function(){var e=this._document.defaultView;if(e){var t=e.getSelection(),n=t.anchorNode,r=t.anchorOffset,o=t.isCollapsed;if(n&&o){var i=n[k.vNodeKey];if(i&&"format"===i.nodeType&&!(r>=n.childNodes.length)&&Object(k.containsNode)(this._realDom,n)){var a=n.childNodes[r];if("BR"===a.nodeName){var s=a[k.vNodeKey];if(s){var l=i.childNodes.indexOf(s);if(!(l<0)){var u=this._document.createElement("SPAN");u.setAttribute("id","_mce_caret"),u.setAttribute("data-mce-type","format-caret"),u.setAttribute("data-mce-bogus","1"),u.textContent="\ufeff",n.insertBefore(u,a),t.collapse(u.firstChild,1),i.childNodes.splice(l,0,this.createVNodeFromRealNode(u,!1))}}}}}}}},{key:"_unwrapImageFromFormats",value:function(){var e=this._document,t=e.defaultView;if(t){var n=t.getSelection(),r=n.anchorNode,o=n.focusNode,i=n.focusOffset;if(0!==n.rangeCount&&r===o&&0!==i&&r.nodeType===Node.ELEMENT_NODE){var a=r.childNodes[i-1];if(!a[k.vNodeKey]&&"IMG"===a.nodeName&&Object(k.containsNode)(this._realDom,a)){var s=a.parentNode[k.vNodeKey];if(s&&"format"===s.nodeType){for(var l=a,u=l.parentNode;"format"===u[k.vNodeKey].nodeType;){for(var c=u.parentNode,d=u.cloneNode(!1),f=void 0;f=l.nextSibling;)d.appendChild(f);c.insertBefore(d,u.nextSibling),l=u,u=c}u.insertBefore(a,l.nextSibling)}}}}}},{key:"_onLoad",value:function(){this._doc.type||this._doc.create(this.createOtModelFromVirtualDom(),"ot-rich-text"),this._updateRealDom(),this._fixSelection(),this._scheduleSubmitPresence()}},{key:"_onOperation",value:function(e,t){this._updateRealDom(t,e),this._fixSelection(),this._scheduleUpdatePresence(),this._updatePresence.flush()}},{key:"_updateRealDom",value:function(e,t){var n=this.otModel;if(null!==n){var r=null==t||"user"===e?this.getSelection():"undo"===e||"redo"===e?this._getSelectionFromOperation(t):this.transformSelection(this.getSelection(),t),o=null!=t&&"undo"!==e&&"redo"!==e&&this._getFormattingHelper();o&&("user"!==e&&(o.position=this.transformSelection({anchor:o.position,focus:o.position},t).anchor),n=Object(x.apply)(n,[Object(C.createRetain)(o.position),o.action]),n.length>this.otModel.length?D.set(o.action,!0):n=this.otModel);var i=t&&t.length>0&&Object(C.isRetain)(t[0])?Object(C.getLength)(t[0]):0,a=r.focus,s=i<a?this._getScrollParent():null,l=s?s.scrollTop:0,u=s?s.scrollHeight:0,c=this._virtualDom,d=this._virtualDom=this.createVirtualDomFromOtModel(n);this._unwatchRealDom(),this._updateRealNode(d,c),this._watchRealDom(),null!=t&&"user"!==e&&"undo"!==e&&"redo"!==e&&s&&(this._asyncScrollUpdate?Object(k.nextTick)(function(){s.scrollTop=l+s.scrollHeight-u}):s.scrollTop=l+s.scrollHeight-u),this.debug&&this._virtualDom.validate();var f=this.createOtModelFromVirtualDom();this.setSelection(r),"undo"!==e&&"redo"!==e||this.scrollCaretIntoView(),"user"!==e&&"undo"!==e&&"redo"!==e||(this._changeNumber++,this._submitPresence()),this._doc.submitSnapshot(f,{source:"script",skipNoop:!0,fixUp:!0})}}},{key:"_createVNodeFromParams",value:function(e,t,n,r){var o=this._configByNodeName[e];if(!o)return null;var i=o[t]||"embed"===t&&o.structure;if(!i)return null;var a=i.createVNode(n,null);return r&&(a.attributes=r),a}},{key:"_createVNodeFromAction",value:function(e,t){var n=this._createVNodeFromParams(Object(C.getNodeName)(e),t,Object(C.getNodeId)(e));return n&&(n.attributes=Object(C.getAttributes)(e,n.attributeNames)),n}},{key:"_createDefaultChild",value:function(e){return this._createVNodeFromParams(e.defaultChildNode,"structure",null,[]).appendTo(e)}},{key:"_createFormattingHelperVNode",value:function(){return this._createVNodeFromParams("SPAN","format",null,["@data-mce-bogus","1","@data-mce-type","format-caret","@id","_mce_caret"])}},{key:"createVirtualDomFromOtModel",value:function(e){if(e.length>0&&Object(C.isInsertOpen)(e[0])&&"#root"===Object(C.getNodeName)(e[0])){var t=this._createVNodeFromAction(e[0],"root");return this._populateVNodeFromOtModel(t,e,1,[],0),t}var n=this._createVNodeFromParams("#root","root","\ue000",[]);return this._populateVNodeFromOtModel(n,e,0,[],0),n}},{key:"_populateVNodeFromOtModel",value:function(e,t,n,r,o){var i=t.length;r.push(e);e:for(;n<i;){var a=t[n++];if(Object(C.isInsertText)(a)){for(var s=e,l=0,u=Object(C.getAttributesIndex)(a),c=a.length;u<c;){var d=a[u++],f=a[u++],h=this._formatsByOt[d];if(h){var p=h.index,m=h.attributeName,g=h.attributeValue;S[p]=null===m?[]:[m,null!==g?g:f],T[l++]=p}else if(""===f){var v=d.indexOf("=");if(v>0){var b=this._formatsByOt[d.substring(0,v+1)];if(b){var y=b.attributeName,w=b.index,x=l>0?T[l-1]:-1,N=y+d.substring(v+1);w===x?S[w].push(N,""):(S[w]=[N,""],T[l++]=w)}}}}if(l>0){if(1===l);else if(2===l){if(T[0]>T[1]){var _=T[0];T[0]=T[1],T[1]=_}}else T.length=l,T.sort();for(var E=0;E<l;++E){var O=T[E],A=S[O],R=this._formats[O].nodeName,M=s.childNodes[s.childNodes.length-1];if(M&&M.nodeName===R&&Object(k.areArraysEqual)(M.attributes,A))s=M;else{var P=this._createVNodeFromParams(R,"format",null,A);if(s!==e)s=P.appendTo(s);else{if(this._shouldParentAppendChildNode(P.nodeName,r,o)){--n;break e}if(e.validChildNodes.has(P.nodeName))s=P.appendTo(e);else if(e.defaultChildNode){n=this._populateVNodeFromOtModel(this._createDefaultChild(e),t,n-1,r,o+1);continue e}}}}}var L=Object(C.getText)(a),I=this._createVNodeFromParams("#text","text",L);if(s!==e)"\ufeff"===L&&D.has(a)&&(s=this._createFormattingHelperVNode().appendTo(s)),I.appendTo(s);else{if(this._shouldParentAppendChildNode(I.nodeName,r,o)){--n;break}e.validChildNodes.has(I.nodeName)?("\ufeff"===L&&D.has(a)&&(s=this._createFormattingHelperVNode().appendTo(s)),I.appendTo(s)):e.defaultChildNode&&(n=this._populateVNodeFromOtModel(this._createDefaultChild(e),t,n-1,r,o+1))}}else if(Object(C.isInsertOpen)(a)){var j=this._createVNodeFromAction(a,"structure");if(!j)continue;if(this._shouldParentAppendChildNode(j.nodeName,r,o)){--n;break}e.validChildNodes.has(j.nodeName)?n=this._populateVNodeFromOtModel(j.appendTo(e),t,n,r,0):e.defaultChildNode&&(n=this._populateVNodeFromOtModel(this._createDefaultChild(e),t,n-1,r,o+1))}else if(Object(C.isInsertClose)(a)){for(var B=Object(C.getNodeId)(a),F=Object(C.getNodeName)(a),H=r.length-1,U=H;U>=0;--U)if(r[U].nodeValue===B&&r[U].nodeName===F){U!==H&&--n;break e}}else if(Object(C.isInsertEmbed)(a)){var z=this._createVNodeFromAction(a,"embed");if(!z)continue;if(this._shouldParentAppendChildNode(z.nodeName,r,o)){--n;break}e.validChildNodes.has(z.nodeName)?z.appendTo(e):e.defaultChildNode&&(n=this._populateVNodeFromOtModel(this._createDefaultChild(e),t,n-1,r,o+1))}}for(var W=e;W.defaultChildNode&&0===W.childNodes.length;)W=this._createDefaultChild(W);return!W.needsBr||0!==W.childNodes.length&&"BR"!==W.childNodes[W.childNodes.length-1].nodeName||this._createVNodeFromParams("BR","embed","\ue000",[]).appendTo(W),r.pop(),n}},{key:"_shouldParentAppendChildNode",value:function(e,t,n){for(var r=t.length-1;--n>=0&&--r>=0;)if(t[r].validChildNodes.has(e))return!0;return!1}},{key:"_updateRealNode",value:function(e,t){e.linkRealNode(t.realNode),e.updateRealNodeValue(t.nodeValue),e.updateRealAttributes(t.attributes);var n=e.childNodes;if(n){for(var r=t.childNodes,o=e.realNode,i=0,a=n.length-1,s=0,l=r.length-1;i<=a&&s<=l&&n[i].isSimilarTo(r[s]);)this._updateRealNode(n[i++],r[s++]);for(;i<=a&&s<=l&&n[a].isSimilarTo(r[l]);)this._updateRealNode(n[a--],r[l--]);for(;s<=l;)o.removeChild(r[s].realNode),r[s++].unlinkRealNode();if(i<=a){var u=a+1<n.length?n[a+1].realNode:null;do{this._createAndInsertRealNodeBefore(n[i++],o,u)}while(i<=a)}}}},{key:"_createAndInsertRealNodeBefore",value:function(e,t,n){var r=e.createRealNode(this._document);if(t.insertBefore(r,n),e.upgradeRealNode(r),e.linkRealNode(r),e.updateRealNodeValue(""),e.updateRealAttributes([]),e.childNodes)for(var o=0,i=e.childNodes.length;o<i;++o)this._createAndInsertRealNodeBefore(e.childNodes[o],r,null)}},{key:"_onSelectionChange",value:function(){var e=this;if(11===this._document.documentMode)return this._fixIE11MutationReporting(),void setTimeout(function(){return e._handleSelectionChange()});this._handleSelectionChange()}},{key:"_handleSelectionChange",value:function(){this._removeUnselectedFormattingHelper(),this._fixSelection(),this._scheduleSubmitPresence(),this._lastSelection=this.getSelection()}},{key:"_onPresenceChange",value:function(e,t){this._scheduleUpdatePresence(e,t)}},{key:"_onMouseMove",value:function(e){this._mouseX=e.clientX,this._mouseY=e.clientY,this._handleMouse()}},{key:"_onMouseLeave",value:function(){this._mouseX=-1,this._mouseY=-1,this._handleMouse()}},{key:"_onMouseDown",value:function(e){0===e.button&&(this._selectingWithMouse=!0)}},{key:"_onMouseUp",value:function(e){0===e.button&&(this._selectingWithMouse=!1,this._fixSelection())}},{key:"_onResize",value:function(){this._scheduleUpdatePresence()}},{key:"_onScroll",value:function(){this._updatePresenceViewport(),this._handleMouse()}},{key:"_handleMouse",value:function(){if(this.presenceEnabled){var e=!1;for(var t in this._presence){var n=this._presence[t];n.hovered=!e&&(e=n.containsPoint(this._mouseX,this._mouseY))}}}},{key:"_submitPresence",value:function(){if(!this.presenceEnabled||null===this.otModel)return void this._doc.submitPresence(null);var e=[],t={u:"",c:this._changeNumber,s:e},n=this.getSelection();if(n.anchor>=0&&n.focus>=0){e.push([n.anchor,n.focus]);for(var r=this._document.defaultView,o=r?r.getSelection().anchorNode:null,i=null;o&&(i=o[k.vNodeKey])&&("TD"!==i.nodeName&&"TH"!==i.nodeName||"1"!==o.getAttribute("data-mce-selected"));)o=o.parentNode;if(i)for(var a=this._realDom.querySelectorAll('[data-mce-selected="1"]'),s=0,l=a.length;s<l;++s){var u=a[s],c=u[k.vNodeKey];!c||"TD"!==c.nodeName&&"TH"!==c.nodeName||e.push([c.modelStartOffset,c.modelEndOffset])}}this._doc.submitPresence(t)}},{key:"_scheduleUpdatePresence",value:function(e,t){if(e)for(var n=0,r=e.length;n<r;++n){var o=e[n];!o||!t&&o in this._updatedPresence||(this._updatedPresence[o]=t)}else if(this.presenceEnabled)for(var i in this._doc.presence)!i||i in this._updatedPresence||(this._updatedPresence[i]=!1);else for(var a in this._presence)!a||a in this._updatedPresence||(this._updatedPresence[a]=!1);Object(k.hasKeys)(this._updatedPresence)&&this._updatePresence()}},{key:"_updatePresenceViewport",value:function(){var e=this._getViewport();this._unwatchRealDom();for(var t in this._presence){var n=this._presence[t];n.viewport=e,n.update()}this._watchRealDom()}},{key:"_getViewport",value:function(){var e=this._document.defaultView,t=Object(k.getIframeElement)(e);if(!t&&!e)return new _.default(0,0,0,0);var n=t||this._presenceInnerNode,r=t?e.parent:e,o=n.getBoundingClientRect(),i=Math.max(0,-o.left),a=Math.max(0,-o.top),s=o.width-i-Math.max(0,o.right-r.innerWidth),l=o.height-a-Math.max(0,o.bottom-r.innerHeight);return new _.default(i,a,s,l)}},{key:"_updatePresence",value:function(){for(var e=Object.keys(this._updatedPresence),t=this._getViewport(),n=this._presenceInnerNode.getBoundingClientRect(),r=new Array(e.length),o=new Array(e.length),i=[],a=0,s=e.length;a<s;++a){var l=e[a],u=this._doc.presence[l];r[a]=u?this._getCaretRect(u):null,o[a]=u?this._getSelectionRects(u):null}this._unwatchRealDom();for(var c=0,d=e.length;c<d;++c){var f=e[c],h=this._doc.presence[f],p=this._updatedPresence[f],m={src:f,presenceData:h,presence:null,emitPresence:!1,reportActivity:p};if(delete this._updatedPresence[f],i.push(m),h){var g=this._presence[f];g||(g=this._presence[f]=new N.TinyMcePresence(f,h.u,this._presenceInnerNode),m.emitPresence=!0),m.presence=g,g.beforeUpdate(p),g.viewport=t,g.containerRect=n,g.caretRect=r[c],g.selectionRects=o[c],g.update(p)}else this._presence[f]&&(this._presence[f].dispose(),delete this._presence[f],m.emitPresence=!0)}this._watchRealDom(),null!=this._presenceInnerNode.offsetHeight&&this._handleMouse();for(var v=0,b=i.length;v<b;++v){var y=i[v],w=y.src,x=y.presence,C=y.presenceData,k=y.emitPresence,_=y.reportActivity;k&&this.emit("presence",w,x),x&&_&&x.reportActivity(C.c)}this._unwatchRealDom();for(var S=0,T=i.length;S<T;++S){var E=i[S],O=E.presence,A=E.reportActivity;O&&O.afterUpdate(A)}this._watchRealDom()}},{key:"_getCaretRect",value:function(e){var t=this.getCaretNodeAndOffset(e),n=t.node,r=t.offset;if(null==n)return null;if(n.nodeType===Node.TEXT_NODE){var o=this._realDom.ownerDocument.createRange();o.setStart(n,r),o.setEnd(n,r);var i=o.getClientRects();return 1===i.length?i[0]:null}var a=n.getClientRects();if(1!==a.length)return null;var s=a[0],l=n[k.vNodeKey],u={width:0,left:s.left,right:s.left,height:s.height,top:s.top,bottom:s.bottom,x:s.x,y:s.y};if(null!=l.childNodes){var c=this._document.defaultView,d=c?c.getComputedStyle(n):{};u.x=u.left=u.right=u.left+(parseFloat(d.borderLeftWidth)||0)+(parseFloat(d.paddingLeft)||0),u.y=u.top=u.top+(parseFloat(d.borderTopWidth)||0)+(parseFloat(d.paddingTop)||0),u.height=parseFloat(d.lineHeight)||0,u.bottom=u.top+u.height}return u}},{key:"getCaretNodeAndOffset",value:function(e){var t=e.s[0];if(!t)return{node:null,offset:0};var n,r,o,i,a=this._getRealNodeAndOffsetFromPosition(t[1],!0),s=a.node,l=a.offset;if(!s||(n=s[k.vNodeKey])&&(!n.childNodes||0===n.childNodes.length))return a;for(;;)if(s[k.vNodeKey]&&(r=s.childNodes)&&l<r.length){if(s=r[l],l=0,(n=s[k.vNodeKey])&&(!n.childNodes||0===n.childNodes.length))return{node:s,offset:l}}else if(o=s.nextSibling){if(s=o,l=0,(n=s[k.vNodeKey])&&(!n.childNodes||0===n.childNodes.length))return{node:s,offset:l}}else{if(s===this._realDom||!(i=s.parentNode)||i===this._realDom)break;l=Array.prototype.indexOf.call(i.childNodes,s)+1,s=i}for(s=a.node,l=a.offset;;)if(s[k.vNodeKey]&&(r=s.childNodes)&&l>0){if(s=r[l-1],n=s[k.vNodeKey]){if("embed"===n.nodeType)return l=0,{node:s,offset:l};if("text"===n.nodeType)return l=n.nodeValue.length,{node:s,offset:l};if(0===n.childNodes.length)return l=0,{node:s,offset:l}}r=s.childNodes,l=r?r.length:0}else if(o=s.previousSibling){if(s=o,n=s[k.vNodeKey]){if("embed"===n.nodeType)return l=0,{node:s,offset:l};if("text"===n.nodeType)return l=n.nodeValue.length,{node:s,offset:l};if(0===n.childNodes.length)return l=0,{node:s,offset:l}}r=s.childNodes,l=r?r.length:0}else{if(s===this._realDom||!(i=s.parentNode)||i===this._realDom)break;l=Array.prototype.indexOf.call(i.childNodes,s),s=i}return{node:this._realDom,offset:0}}},{key:"_getSelectionRects",value:function(e){var t=e.s;if(0===t.length)return null;for(var n=[],r=0,o=1,i=t.length;o<i;++o){var a=t[o],s=a[0],l=this._getRealNodeAndOffsetFromPosition(s,!1),u=l.node,c=l.offset;if(u){var d=u.childNodes;if(d){var f=d[c];if(f){var h=f.nodeName;"TD"!==h&&"TH"!==h||(n[r++]=f.getBoundingClientRect())}}}}var p=t[0],m=p[0],g=p[1];if(m===g)return n;var v=m<g?m:g,b=m>g?m:g,y=this._getRealNodeAndOffsetFromPosition(v,!1),w=y.node,x=y.offset,C=this._getRealNodeAndOffsetFromPosition(b,!0),N=C.node,_=C.offset;if(null==w||null==N||w===N&&x===_)return n;for(var S=w,T=x,E=null,O=null,A=[],D=0,R=this._document.createRange();null!=S&&(S!==N||T!==_);){var M=S[k.vNodeKey];if(null!=M)if("text"===M.nodeType){R.setStart(S,S===w?x:0),R.setEnd(S,S===N?_:M.nodeValue.length);for(var P=R.getClientRects(),L=0,I=P.length;L<I;++L){var j=P[L];j.width>0&&j.height>0&&(n[r++]=j)}}else if("embed"===M.nodeType){var B=S.getBoundingClientRect();B.width>0&&B.height>0&&(n[r++]=B)}M&&M.childNodes&&T<(O=S.childNodes).length?(A[D++]=T,S=O[T],T=0):S===N?T=_:S!==this._realDom&&(E=S.parentNode)?(T=(D>0?A[--D]:Array.prototype.indexOf.call(E.childNodes,S))+1,S=E):S=null}return n}},{key:"getSelection",value:function(){var e=this._document.defaultView;if(!e)return{anchor:-1,focus:-1};var t=e.getSelection(),n=this._getPositionFromRealNodeAndOffset(t.anchorNode,t.anchorOffset);return{anchor:n,focus:t.isCollapsed?n:this._getPositionFromRealNodeAndOffset(t.focusNode,t.focusOffset)}}},{key:"transformSelection",value:function(e,t){var n=e.anchor,r=e.focus,o=n<0?n:Object(x.transformCursor)(n,t,!1);return{anchor:o,focus:n===r?o:r<0?r:Object(x.transformCursor)(r,t,!1)}}},{key:"setSelection",value:function(e){var t=e.anchor,n=e.focus,r=this._document.defaultView;if(r){if(t===n){var o=this._realDom.querySelector("#_mce_caret");if(o){var i=o.lastChild;if(i&&i.nodeType===Node.TEXT_NODE&&"\ufeff"===i.nodeValue){var a=i[k.vNodeKey];if(a&&a.modelEndOffset===n)return void r.getSelection().collapse(i,1)}}}var s=this.getSelection(),l=s.anchor,u=s.focus;if(t!==l||n!==u){var c=k.isSelectionExtendSupported?this._getRealDomSelectionFromPositions(t,n):this._getRealDomSelectionFromPositions(Math.min(t,n),Math.max(t,n));c.anchorNode&&c.focusNode&&Object(k.setSelection)(r.getSelection(),c.anchorNode,c.anchorOffset,c.focusNode,c.focusOffset)}}}},{key:"scrollCaretIntoView",value:function(){var e=this._document,t=e.defaultView;if(t){var n=t.getSelection(),r=n.focusNode,o=n.focusOffset;if(Object(k.containsNode)(this._realDom,r)){for(;r&&r!==this._realDom&&r.nodeType!==Node.ELEMENT_NODE;){var i=r.parentNode;o=Array.prototype.indexOf.call(i.childNodes,r),r=i}if(r&&r.nodeType===Node.ELEMENT_NODE){var a=e.createElement("SPAN");this._unwatchRealDom(),a.setAttribute("data-mce-bogus","all"),r.insertBefore(a,r.childNodes[o]),Object(w.default)(a,{scrollMode:"if-needed"}),r.removeChild(a),this._watchRealDom()}}}}},{key:"_getVirtualNodeAndOffsetFromRealNodeAndOffset",value:function(e,t){for(var n=null;e&&!(n=e[k.vNodeKey]||null)&&(!e.classList||!e.classList.contains("mce-offscreen-selection"));){var r=e,o=r.parentNode;e=o,t=o?Array.prototype.indexOf.call(o.childNodes,r):0}if(null==e)return{node:n,offset:0};if(null==n){if(null==(e=this._realDom.querySelector('[data-mce-selected="1"]')))return{node:n,offset:0};var i=e.parentNode;if(null==i)return{node:n,offset:0};if(t=Array.prototype.indexOf.call(i.childNodes,e)+ +!!t,e=i,null==(n=e[k.vNodeKey]||null))return{node:n,offset:0}}if(e.hasChildNodes())if(n.childNodes){var a=e.childNodes;if(t>=a.length)t=n.childNodes.length;else for(var s=0,l=t;s<l;++s)a[s][k.vNodeKey]||--t}else t=0;return{node:n,offset:t}}},{key:"_getRealNodeAndOffsetFromVirtualNodeAndOffset",value:function(e,t){var n=e.realNode;if("text"===e.nodeType)return{node:n,offset:Math.max(0,Math.min(n.length,t))};if("embed"===e.nodeType)return{node:n,offset:0};for(var r=n.childNodes,o=0,i=0,a=r.length;i<a&&t>0;++i,++o)r[i][k.vNodeKey]&&--t;return{node:n,offset:o}}},{key:"_getPositionFromRealNodeAndOffset",value:function(e,t){if(!e)return-1;var n=this._getVirtualNodeAndOffsetFromRealNodeAndOffset(e,t),r=n.node,o=n.offset;return this._getPositionFromVirtualNodeAndOffset(r,o)}},{key:"_getPositionFromVirtualNodeAndOffset",value:function(e,t){return e?"text"===e.nodeType?e.modelStartOffset+Math.max(0,Math.min(e.nodeValue.length,"\ufeff"===e.nodeValue?0:t)):e.childNodes?t<=0?e.modelStartOffset+e.nodeValue.length:t<e.childNodes.length?e.childNodes[t].modelStartOffset:e.modelEndOffset-e.nodeValue.length:e.modelStartOffset:-1}},{key:"_getRealNodeAndOffsetFromPosition",value:function(e,t){var n=this._getVirtualNodeAndOffsetFromPosition(e,t);return n.node?this._getRealNodeAndOffsetFromVirtualNodeAndOffset(n.node,n.offset):n}},{key:"_getVirtualNodeAndOffsetFromPosition",value:function(e,t){return this._getVirtualNodeAndOffsetFromPositionImpl(this._virtualDom,e,t)}},{key:"_getVirtualNodeAndOffsetFromPositionImpl",value:function(e,t,n){if("text"===e.nodeType)return{node:e,offset:Math.max(0,Math.min(e.nodeValue.length,t-e.modelStartOffset))};if("embed"===e.nodeType)return E;if(t<e.modelStartOffset+e.nodeValue.length||e.modelEndOffset-e.nodeValue.length<t)return E;if(n&&t===e.modelStartOffset+e.nodeValue.length)return{node:e,offset:0};if(!n&&t===e.modelEndOffset-e.nodeValue.length)return{node:e,offset:e.childNodes.length};var r=Object(k.binaryFindIndex)(e.childNodes,O(t,n)),o=e.childNodes[r],i=this._getVirtualNodeAndOffsetFromPositionImpl(o,t,n);return i.node?i:n?{node:e,offset:r+1}:{node:e,offset:r}}},{key:"_getRealDomSelectionFromPositions",value:function(e,t){var n=this._getRealNodeAndOffsetFromPosition(t,e<=t),r=e===t?n:this._getRealNodeAndOffsetFromPosition(e,e>t);return!r.node&&n.node?r=n:!n.node&&r.node&&(n=r),{anchorNode:r.node,anchorOffset:r.offset,focusNode:n.node,focusOffset:n.offset}}},{key:"_getSelectionFromOperation",value:function(e){for(var t=0,n=0,r=e.length;n<r;++n){var o=e[n];(Object(C.isInsert)(o)||Object(C.isRetain)(o))&&(t+=Object(C.getLength)(o))}return{anchor:t,focus:t}}},{key:"_getFormattingHelper",value:function(){var e=this._document.defaultView;if(!e)return null;var t=e.getSelection(),n=t.anchorNode,r=t.anchorOffset,o=t.isCollapsed;if(1!==r||!n||!o)return null;var i=n[k.vNodeKey];return i&&"\ufeff"===i.nodeValue&&A.has(i)?A.get(i):null}},{key:"_fixIE11MutationReporting",value:function(){if(this._document.defaultView){var e=this._document.defaultView.getSelection(),t=e.isCollapsed,n=e.anchorNode;t&&n&&n.nodeType===Node.TEXT_NODE&&""===n.nodeValue&&Object(k.containsNode)(this._realDom,n)&&(this._realDom.setAttribute("data-trigger-mutation-observer",""),this._realDom.removeAttribute("data-trigger-mutation-observer"))}}},{key:"_removeUnselectedFormattingHelper",value:function(){var e=this._document.defaultView;if(e){var t=this._realDom.querySelector("#_mce_caret");if(t){var n=e.getSelection(),r=n.anchorNode,o=n.anchorOffset;n.isCollapsed&&r===t.firstChild&&1===o||Object(k.containsNode)(this._realDom,r)&&t.parentNode.removeChild(t)}}}},{key:"_fixSelection",value:function(){if(!this._selectingWithMouse){var e=this._document.defaultView;if(e){var t=e.getSelection();0!==t.rangeCount&&Object(k.containsNode)(this._realDom,t.anchorNode)&&(this._fixSelectionInsideHeadingAnchor(t),this._fixSelectionNearPresenceNode(t),this._fixSelectionNearInlineComponent(t),this._fixSelectionAfterBogusBr(t),this._fixSelectionNearTextNode(t))}}}},{key:"_fixSelectionInsideHeadingAnchor",value:function(e){var t=e.anchorNode;if(e.isCollapsed&&"A"===t.nodeName&&"all"===t.getAttribute("data-mce-bogus")&&t===t.parentNode.firstChild){var n=t.parentNode.nodeName;"H1"!==n&&"H2"!==n&&"H3"!==n&&"H4"!==n&&"H5"!==n&&"H6"!==n||e.collapse(t.parentNode,1)}}},{key:"_fixSelectionNearPresenceNode",value:function(e){if(this.presenceEnabled){var t=e.anchorNode,n=e.anchorOffset,r=e.focusNode,o=e.focusOffset,i=this._isValidSelectionNodeAndOffset(t,n),a=this._isValidSelectionNodeAndOffset(r,o);if(!i||!a){var s=this._getValidSelectionNode(),l=i?t:s,u=i?n:s===this._realDom?1:0,c=a?r:s,d=a?o:s===this._realDom?1:0;Object(k.setSelection)(e,l,u,c,d)}}}},{key:"_fixSelectionNearInlineComponent",value:function(e){if(e.isCollapsed){var t=e.anchorNode,n=e.anchorOffset;if(this._hasInlineComponentAt(t,n-1)){var r=this._document.createElement("SPAN");r.setAttribute("id","_mce_caret"),r.setAttribute("data-mce-type","format-caret"),r.setAttribute("data-mce-bogus","1"),r.textContent="\ufeff",t.insertBefore(r,t.childNodes[n]),e.collapse(r.firstChild,1)}}}},{key:"_fixSelectionAfterBogusBr",value:function(e){if(e.isCollapsed){var t=e.anchorNode,n=e.anchorOffset;t.nodeType===Node.ELEMENT_NODE&&t.childNodes.length===n&&t.lastChild&&"BR"===t.lastChild.nodeName&&t[k.vNodeKey]&&t[k.vNodeKey].needsBr&&e.collapse(t,n-1)}}},{key:"_fixSelectionNearTextNode",value:function(e){if(e.isCollapsed){var t=e.anchorNode,n=e.anchorOffset,r=t[k.vNodeKey];if(r&&("structure"===r.nodeType||"format"===r.nodeType||"root"===r.nodeType)){for(var o=t.childNodes[n-1];o&&(r=o[k.vNodeKey]);){if("text"===r.nodeType)return void e.collapse(o,o.nodeValue.length);if("format"!==r.nodeType)break;o=o.lastChild}for(o=t.childNodes[n];o&&(r=o[k.vNodeKey]);){if("text"===r.nodeType)return void e.collapse(o,0);if("format"!==r.nodeType)break;o=o.firstChild}}}}},{key:"_isValidSelectionNodeAndOffset",value:function(e,t){if(e===this._realDom&&this._realDom.firstChild===this._presenceNode)return t>0;for(;e&&e!==this._realDom;){if(e===this._presenceNode)return!1;e=e.parentNode}return!0}},{key:"_getValidSelectionNode",value:function(){for(var e=this._virtualDom;e.childNodes&&e.childNodes.length>0&&"embed"!==e.childNodes[0].nodeType;)e=e.childNodes[0];return e.realNode}},{key:"_hasInlineComponentAt",value:function(e,t){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;var n,r=e.childNodes[t];return r&&r.nodeType===Node.ELEMENT_NODE&&"false"===r.getAttribute("contenteditable")&&("inline"===(n=r.ownerDocument.defaultView.getComputedStyle(r).display)||"inline-block"===n)}},{key:"contentToOtModel",value:function(e){var t=this._realDom.ownerDocument.createElement("DIV");t.innerHTML=e;var n=this.createVNodeFromRealNode(t,!0);n.unlinkRealNode();var r=this.createOtModelFromVirtualDom(n),o=this.createVirtualDomFromOtModel(r);return o.resetNodeId(),this.createOtModelFromVirtualDom(o)}},{key:"getRootAttribute",value:function(e){if("string"!=typeof e)throw new Error("attributeName must be a string");var t=this.otModel&&this.otModel.length>0&&Object(C.isInsertOpen)(this.otModel[0])&&"#root"===Object(C.getNodeName)(this.otModel[0])?Object(C.getAttribute)(this.otModel[0],e):null;return"string"==typeof t?t:null}},{key:"setRootAttribute",value:function(e,t){if("string"!=typeof e)throw new Error("attributeName must be a string");if("string"!=typeof t&&null!==t)throw new Error("attributeValue must be a string or null");var n=[Object(C.createRetain)(1,[e,t])];this._doc.submitOp(n,{undoable:!1,source:"script"})}},{key:"otModel",get:function(){return this._doc.data||null}},{key:"virtualDom",get:function(){return this._virtualDom}},{key:"realDom",get:function(){return this._realDom}},{key:"presenceEnabled",get:function(){return this._presenceEnabled},set:function(e){e=!!e,this._presenceEnabled!==e&&(this._presenceEnabled=e,this._presenceEnabled?this._ensurePresenceNodeIsFirst():this._presenceNode.parentNode&&(this._unwatchRealDom(),this._presenceNode.parentNode.removeChild(this._presenceNode),this._watchRealDom()),this._fixSelection(),this._submitPresence(),this._scheduleUpdatePresence())}},{key:"presence",get:function(){return this._presence}}]),t}(v.EventEmitter)},"./src/tinymce/plugins/ot/Plugin.js":/*!******************************************!*\
  !*** ./src/tinymce/plugins/ot/Plugin.js ***!
  \******************************************/
/*! exports provided: register */
function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.Prism,r=t.customElementsPolyfill;e.PluginManager.add("ot",function(e){var t={client:null,comments:null};return e.once("init",function(){n=n||window.Prism,n&&(e.getWin().Prism=n),r&&r(e.getWin()),Object(l.registerComponents)(e.getWin())}),i.register(e,t),o.register(e,t),a.register(e,t),s.register(e,t),t})}n.r(t),n.d(t,"register",function(){return r});var o=n(/*! ./core/ContentEditing */"./src/tinymce/plugins/ot/core/ContentEditing.js"),i=n(/*! ./core/OtClient */"./src/tinymce/plugins/ot/core/OtClient.js"),a=n(/*! ./api/Commands */"./src/tinymce/plugins/ot/api/Commands.js"),s=n(/*! ./ui/Buttons */"./src/tinymce/plugins/ot/ui/Buttons.js"),l=n(/*! ../../../components */"./src/components/index.js")},"./src/tinymce/plugins/ot/api/Commands.js":/*!************************************************!*\
  !*** ./src/tinymce/plugins/ot/api/Commands.js ***!
  \************************************************/
/*! exports provided: register */
function(e,t,n){"use strict";function r(e,t){e.addCommand("undo",function(){return t.client&&t.client.undo()}),e.addCommand("redo",function(){return t.client&&t.client.redo()})}n.r(t),n.d(t,"register",function(){return r})},"./src/tinymce/plugins/ot/api/Settings.js":/*!************************************************!*\
  !*** ./src/tinymce/plugins/ot/api/Settings.js ***!
  \************************************************/
/*! exports provided: getCollectionName, getDocumentId, getPresenceEnabled, getDebug, getShouldConnect, getAccessTokenGetter, getUrl, getOtCustomElements, getInline, getForcedRootBlock, getCustomElements, getInlineCustomElements, getBlockCustomElements, getBetaAuth */
function(e,t,n){"use strict";function r(e){return e.getParam("ot_collection_name","test")}function o(e){return e.getParam("ot_document_id","1")}function i(e){return e.getParam("ot_presence",!0)}function a(e){return e.getParam("ot_debug",!1)}function s(e){return e.getParam("ot_should_connect",!0)}function l(e){return e.getParam("ot_get_access_token",void 0)}function u(e){return e.getParam("ot_url",void 0)}function c(e){return e.getParam("ot_custom_elements",[])}function d(e){return e.getParam("inline",!1)}function f(e){return(e.getParam("forced_root_block","P")||"P").toUpperCase()}function h(e){return e.getParam("custom_elements","").toUpperCase().split(",").map(function(e){return e.trim()}).filter(function(e){return!!e})}function p(e){return h(e).filter(function(e){return"~"===e[0]}).map(function(e){return e.substr(1)})}function m(e){return h(e).filter(function(e){return"~"!==e[0]})}function g(e){return e.getParam("ot_beta_auth",!1)}n.r(t),n.d(t,"getCollectionName",function(){return r}),n.d(t,"getDocumentId",function(){return o}),n.d(t,"getPresenceEnabled",function(){return i}),n.d(t,"getDebug",function(){return a}),n.d(t,"getShouldConnect",function(){return s}),n.d(t,"getAccessTokenGetter",function(){return l}),n.d(t,"getUrl",function(){return u}),n.d(t,"getOtCustomElements",function(){return c}),n.d(t,"getInline",function(){return d}),n.d(t,"getForcedRootBlock",function(){return f}),n.d(t,"getCustomElements",function(){return h}),n.d(t,"getInlineCustomElements",function(){return p}),n.d(t,"getBlockCustomElements",function(){return m}),n.d(t,"getBetaAuth",function(){return g})},"./src/tinymce/plugins/ot/core/ContentEditing.js":/*!*******************************************************!*\
  !*** ./src/tinymce/plugins/ot/core/ContentEditing.js ***!
  \*******************************************************/
/*! exports provided: register */
function(e,t,n){"use strict";function r(e){var t;return e&&e.nodeType===Node.ELEMENT_NODE&&"false"===e.getAttribute("contenteditable")&&("inline"===(t=e.ownerDocument.defaultView.getComputedStyle(e).display)||"inline-block"===t)}function o(e){return e&&"BR"===e.nodeName}function i(e,t){var n=e.ownerDocument,r=n.defaultView,o=n.createTextNode("\ufeff");e.insertBefore(o,e.childNodes[t]),r.getSelection().collapse(o,1)}function a(e){if(!e.defaultPrevented&&!(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)){var t=e.target.ownerDocument.defaultView.getSelection(),n=t.isCollapsed,r=t.anchorNode,o=t.anchorOffset;n&&r&&1===o&&"#text"===r.nodeName&&"\ufeff"===r.nodeValue&&r.parentNode.removeChild(r)}}function s(e,t){if(!e.defaultPrevented&&!(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)){var n=t.getBody(),o=e.target.ownerDocument,a=o.defaultView.getSelection(),s=a.isCollapsed,l=a.anchorNode,u=a.anchorOffset;if(s&&l&&!(l.nodeType===Node.TEXT_NODE&&u<l.nodeValue.length)){if(l.nodeType===Node.ELEMENT_NODE&&u<l.childNodes.length)return void(r(l.childNodes[u])&&i(l,u));for(var c=l;c&&c!==n&&c[h.vNodeKey]&&"structure"!==c[h.vNodeKey].nodeType;){var d=c.nextSibling;if(d)return void(r(d)&&i(d.parentNode,Array.prototype.indexOf.call(d.parentNode.childNodes,d)));c=c.parentNode}}}}function l(e,t){if(!e.defaultPrevented&&!e.ctrlKey&&!e.altKey&&e.shiftKey&&!e.metaKey){var n=e.target.ownerDocument,r=n.defaultView.getSelection();if(0!==r.rangeCount&&r.isCollapsed){var o=r.anchorNode,i=r.anchorOffset;o.nodeType===Node.ELEMENT_NODE&&0!==i&&i===o.childNodes.length&&"IMG"===o.childNodes[i-1].nodeName&&(o.appendChild(n.createElement("BR")),o.appendChild(n.createElement("BR")),r.collapse(o,o.childNodes.length-1),e.preventDefault())}}}function u(e,t){if(!e.defaultPrevented){var n=e.target.ownerDocument.defaultView.getSelection();if(0!==n.rangeCount&&n.isCollapsed){var r=t.getBody(),o=r.firstChild;if(o&&o.classList&&o.classList.contains("ot-presence")){var i=n.focusNode,a=n.focusOffset;if(i===r&&a<=1)return void e.preventDefault();if(!(a>0))for(;i&&i!==r;){var s=i.previousSibling;if(s){s===o&&e.preventDefault();break}i=i.parentNode}}}}}function c(e,t){if(!e.defaultPrevented){var n=e.target.ownerDocument.defaultView.getSelection();if(0!==n.rangeCount&&n.isCollapsed){var r=n.anchorNode,i=n.anchorOffset;if(!(r.nodeType===Node.TEXT_NODE&&i>0&&"\ufeff"!==r.nodeValue)){if(r.nodeType===Node.ELEMENT_NODE&&i>0){var a=r.childNodes[i-1];return void(o(a)&&(r.removeChild(a),e.preventDefault()))}for(var s=t.getBody(),l=r;l&&l!==s&&l[h.vNodeKey]&&"structure"!==l[h.vNodeKey].nodeType;){var u=l.previousSibling;if(u){o(u)&&(n.collapse(u,0),u.parentNode.removeChild(u),e.preventDefault());break}l=l.parentNode}}}}}function d(e,t){if(!e.defaultPrevented){var n=e.target.ownerDocument.defaultView.getSelection();if(0!==n.rangeCount&&n.isCollapsed){var r=n.anchorNode,i=n.anchorOffset;if(!(r.nodeType===Node.TEXT_NODE&&i<r.nodeValue.length)){if(r.nodeType===Node.ELEMENT_NODE&&i<r.childNodes.length){var a=r.childNodes[i];return void(o(a)&&a.nextSibling&&(r.removeChild(a),e.preventDefault()))}for(var s=t.getBody(),l=r;l&&l!==s&&l[h.vNodeKey]&&"structure"!==l[h.vNodeKey].nodeType;){var u=l.nextSibling;if(u){o(u)&&u.nextSibling&&(n.collapse(u,0),u.parentNode.removeChild(u),e.preventDefault());break}l=l.parentNode}}}}}function f(e,t){e.on("KeyDown",function(t){switch(t.keyCode){case 13:a(t,e),s(t,e),l(t,e);break;case 8:u(t,e),c(t,e);break;case 46:d(t,e)}})}n.r(t),n.d(t,"register",function(){return f});var h=n(/*! ../../../../util/misc */"./src/util/misc.js")},"./src/tinymce/plugins/ot/core/OtClient.js":/*!*************************************************!*\
  !*** ./src/tinymce/plugins/ot/core/OtClient.js ***!
  \*************************************************/
/*! exports provided: register */
function(e,t,n){"use strict";function r(e){var t=a.getForcedRootBlock(e),n=a.getOtCustomElements(e),r=a.getInlineCustomElements(e),o=a.getBlockCustomElements(e),i=l.default.childNodeAliasMap.get("phrasingContent").concat(r),u=l.default.childNodeAliasMap.get("flowContent").concat(o,r),c=l.default.childNodeAliasMap.get("rootContent").concat(o);return s.default.create({attributeAliasMap:l.default.attributeAliasMap,childNodeAliasMap:l.default.childNodeAliasMap.clone().set("phrasingContent",i).set("flowContent",u).set("rootContent",c),formats:l.default.formats,nodes:l.default.nodes.concat(n).map(function(e){return"#root"===e.nodeName?e.clone().withDefaultChildNode(t):e})})}function o(e,t){e.on("BeforeAddUndo",function(){return!1}),e.once("init",function(){e.schema.addCustomElements("~tw-span"),e.schema.addValidElements("tw-span[data-tw-inline-comments]"),t.client=new i.OtClient({domNode:e.getBody(),collectionName:a.getCollectionName(e),documentId:a.getDocumentId(e),presenceEnabled:a.getPresenceEnabled(e),debug:a.getDebug(e),shouldConnect:a.getShouldConnect(e),getAccessToken:a.getAccessTokenGetter(e),config:r(e),url:a.getUrl(e),asyncScrollUpdate:!a.getInline(e)&&"autoresize"in e.plugins,betaAuth:a.getBetaAuth(e)}),t.comments=new u.InlineComments(e.getBody()),t.client.on("operation",function(){return e.nodeChanged({selectionChange:!0})}),e.once("remove",function(){t.client.dispose()})})}n.r(t),n.d(t,"register",function(){return o});var i=n(/*! ../../../../OtClient */"./src/OtClient.js"),a=n(/*! ../api/Settings */"./src/tinymce/plugins/ot/api/Settings.js"),s=n(/*! ../../../../config/Config */"./src/config/Config.js"),l=n(/*! ../../../../config/default */"./src/config/default.js"),u=n(/*! ../../../../util/inlineComments */"./src/util/inlineComments.js")},"./src/tinymce/plugins/ot/ui/Buttons.js":/*!**********************************************!*\
  !*** ./src/tinymce/plugins/ot/ui/Buttons.js ***!
  \**********************************************/
/*! exports provided: register */
function(e,t,n){"use strict";function r(e,t){function n(){r&&r.disabled(e.readonly||!t.client||!t.client.canUndo()),o&&o.disabled(e.readonly||!t.client||!t.client.canRedo())}var r=null,o=null;e.once("init",function(){t.client.on("load",n),t.client.on("operation",n),e.on("SwitchMode",n)}),e.addButton("ot-undo",{icon:"undo",tooltip:"Undo",cmd:"undo",methodName:"canUndo",disabled:!0,onPostRender:function(){r=this,n()}}),e.addButton("ot-redo",{icon:"redo",tooltip:"Redo",cmd:"redo",methodName:"canRedo",disabled:!0,onPostRender:function(){o=this,n()}})}n.r(t),n.d(t,"register",function(){return r})},"./src/util/AliasMap.js":/*!******************************!*\
  !*** ./src/util/AliasMap.js ***!
  \******************************/
/*! exports provided: default */
function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return u});var r=n(/*! @babel/runtime/helpers/toConsumableArray */"./node_modules/@babel/runtime/helpers/toConsumableArray.js"),o=n.n(r),i=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),a=n.n(i),s=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),l=n.n(s),u=function(){function e(){a()(this,e),this._aliases=Object.create(null)}return l()(e,[{key:"set",value:function(e,t){return this._validateAliasName(e),this._validateAliasValue(t),this._aliases[e]=Object.freeze(t.slice(0)),this}},{key:"get",value:function(e){return this._validateAliasName(e),this._aliases[e]||null}},{key:"has",value:function(e){return this._validateAliasName(e),e in this._aliases}},{key:"remove",value:function(e){return this._validateAliasName(e),delete this._aliases[e],this}},{key:"resolve",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if(this._validateAliasName(e),t<-1)throw new Error("AliasMap.resolve reached recursion limit");var n=this._aliases[e];return n?this.resolveAll(n,t-1):[e]}},{key:"resolveAll",value:function(e){var t,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return this._validateAliasValue(e),(t=[]).concat.apply(t,o()(e.map(function(e){return n.resolve(e,r)})))}},{key:"clone",value:function(){var t=new e;for(var n in this._aliases)t._aliases[n]=this._aliases[n];return t}},{key:"freeze",value:function(){return Object.freeze(this._aliases),Object.freeze(this)}},{key:"_validateAliasName",value:function(e){if("string"!=typeof e)throw new Error("Alias name must be a string")}},{key:"_validateAliasValue",value:function(e){if(!Array.isArray(e)||e.some(function(e){return"string"!=typeof e}))throw new Error("Alias value must be an Array of string")}}]),e}()},"./src/util/ReadOnlyRect.js":/*!**********************************!*\
  !*** ./src/util/ReadOnlyRect.js ***!
  \**********************************/
/*! exports provided: default */
function(e,t,n){"use strict";function r(e,t){if("number"==typeof e&&isFinite(e))return e;if(null==e)return 0;throw new TypeError(t)}n.r(t),n.d(t,"default",function(){return l});var o=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(o),a=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),s=n.n(a),l=function(){function e(t,n,o,a){i()(this,e),t=r(t,"x must be a finite number or undefined"),n=r(n,"y must be a finite number or undefined"),o=r(o,"width must be a finite number or undefined"),a=r(a,"height must be a finite number or undefined"),this._x=t,this._y=n,this._width=o,this._height=a,this._top=a<0?n+a:n,this._bottom=a<0?n:n+a,this._left=o<0?t+o:t,this._right=o<0?t:t+o}return s()(e,[{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"top",get:function(){return this._top}},{key:"bottom",get:function(){return this._bottom}},{key:"left",get:function(){return this._left}},{key:"right",get:function(){return this._right}}]),e}()},"./src/util/ShareDB.js":/*!*****************************!*\
  !*** ./src/util/ShareDB.js ***!
  \*****************************/
/*! exports provided: default */
function(e,t,n){"use strict";n.r(t);var r=n(/*! @teamwork/sharedb/lib/client/index */"./node_modules/@teamwork/sharedb/lib/client/index.js"),o=n.n(r),i=n(/*! @teamwork/ot-rich-text */"./node_modules/@teamwork/ot-rich-text/lib/index.js"),a=n.n(i);o.a.types.register(a.a.type),t.default=o.a},"./src/util/colors.js":/*!****************************!*\
  !*** ./src/util/colors.js ***!
  \****************************/
/*! exports provided: claimColor, releaseColor, colorWithOpacity */
function(e,t,n){"use strict";function r(e){e:for(var t=0,n=s.length;t<n;++t){var r=s[t];for(var o in e){var i=e[o];if(i.color===r)continue e}return r}return s[Math.floor(Math.random()*s.length)]}function o(e,t){var n=l.get(e);n||(n=Object.create(null),l.set(e,n));var o=n[t];return o?o.refCount++:(o={refCount:1,color:r(n)},n[t]=o),o.color}function i(e,t){var n=l.get(e);if(n){var r=n[t];r&&(--r.refCount>0||delete n[t])}}function a(e,t){var n=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(e);if(!n)return e;var r=parseInt(n[1],16),o=parseInt(n[2],16),i=parseInt(n[3],16);return"rgba(".concat(r,", ").concat(o,", ").concat(i,", ").concat(t,")")}n.r(t),n.d(t,"claimColor",function(){return o}),n.d(t,"releaseColor",function(){return i}),n.d(t,"colorWithOpacity",function(){return a});var s=["#FFB300","#803E75","#FF6800","#A6BDD7","#C10020","#CEA262","#817066","#007D34","#F6768E","#00538A","#FF7A5C","#53377A","#FF8E00","#B32851","#F4C800","#7F180D","#93AA00","#593315","#F13A13","#232C16"],l=new WeakMap},"./src/util/inlineComments.js":/*!************************************!*\
  !*** ./src/util/inlineComments.js ***!
  \************************************/
/*! exports provided: getInlineCommentsRange, InlineCommentsRangeIterator, canAddInlineComment, addInlineComment, getInlineCommentNodes, removeInlineComment, getInlineComments, getAllInlineComments, InlineComments */
function(e,t,n){"use strict";function r(e,t,n){var r=e.endContainer===t&&e.endOffset===n;return e.setStart(t,n),e.collapsed===r}function o(e,t,n){var r=e.startContainer===t&&e.startOffset===n;return e.setEnd(t,n),e.collapsed===r}function i(e){return e.nodeType===Node.ELEMENT_NODE&&"false"===e.getAttribute("contenteditable")||"IMG"===e.nodeName}function a(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return null;var t=e.ownerDocument,n=t.defaultView;if(!n)return null;var a=n.getSelection();if(0===a.rangeCount)return null;var s=a.getRangeAt(0).cloneRange(),l=Object(v.getAncestors)(s.startContainer,e),u=Object(v.getAncestors)(s.endContainer,e);if(l[l.length-1]!==e||u[u.length-1]!==e)return null;for(var c=l.length-2;c>=0;--c){var d=l[c];if(Object(v.isIgnoredNode)(d)){if(d.classList.contains("mce-offscreen-selection")){var f=e.querySelector('[data-mce-selected="1"]');if(!f)return null;r(s,f,0)}else if(!r(s,d.parentNode,Object(v.indexInParentNode)(d)+1))return null;break}if(i(d)){if(!r(s,d,0))return null;break}if(!Object(v.isElementNode)(d)){if(Object(v.isTextNode)(d)&&d===s.startContainer){if(s.startOffset===d.nodeValue.length&&!r(s,d.parentNode,Object(v.indexInParentNode)(d)+1))return null;break}return null}}for(var h=u.length-2;h>=0;--h){var p=u[h];if(Object(v.isIgnoredNode)(p)){if(p.classList.contains("mce-offscreen-selection")){var m=e.querySelector('[data-mce-selected="1"]');if(!m)return null;o(s,m,0)}else if(!o(s,p.parentNode,Object(v.indexInParentNode)(p)))return null;break}if(i(p)){if(!o(s,p,0))return null;break}if(!Object(v.isElementNode)(p)){if(Object(v.isTextNode)(p)&&p===s.endContainer){if(0===s.endOffset&&!o(s,p.parentNode,Object(v.indexInParentNode)(p)))return null;break}return null}}if(!Object(v.isTextNode)(s.startContainer)&&!i(s.startContainer))for(var g=s.startOffset<s.startContainer.childNodes.length,b=g?s.startContainer.childNodes[s.startOffset]:s.startContainer;;){if(!b||b===e)return null;if(Object(v.isIgnoredNode)(b))g=!!b.nextSibling,b=g?b.nextSibling:b.parentNode;else{if(i(b)){if(!r(s,b,0))return null;break}if(Object(v.isTextNode)(b)){if(!r(s,b,0))return null;break}g&&Object(v.isElementNode)(b)&&b.firstChild?b=b.firstChild:(g=!!b.nextSibling,b=g?b.nextSibling:b.parentNode)}}if(!Object(v.isTextNode)(s.endContainer)&&!i(s.endContainer))for(var y=s.endOffset>0,w=y?s.endContainer.childNodes[s.endOffset-1]:s.endContainer;;){if(!w||w===e)return null;if(Object(v.isIgnoredNode)(w))y=!!w.previousSibling,w=y?w.previousSibling:w.parentNode;else{if(i(w)){if(!o(s,w,0))return null;break}if(Object(v.isTextNode)(w)){if(!o(s,w,w.nodeValue.length))return null;break}y&&Object(v.isElementNode)(w)&&w.lastChild?w=w.lastChild:(y=!!w.previousSibling,w=y?w.previousSibling:w.parentNode)}}return s.collapsed&&!i(s.startContainer)?null:s}function s(e){return!!a(e)}function l(e,t){var n=new b(a(e)),r=n.next(),o=r.done,s=r.value;if(!o){for(var l=e.ownerDocument.defaultView.getSelection(),u=l.anchorNode,c=l.anchorOffset,d=l.focusNode,f=l.focusOffset,h=l.getRangeAt(0),p=h.startContainer===u&&h.startOffset===c&&h.endContainer===d&&h.endOffset===f;!o;){var m=s,g=m.node,y=m.startOffset,w=m.endOffset;if(i(g)){var x=g.getAttribute("data-tw-inline-comments");g.setAttribute("data-tw-inline-comments",x?x+" "+t:t)}else if(Object(v.isTextNode)(g)){var C=e.ownerDocument,k=g.nodeValue.substring(0,y),N=g.nodeValue.substring(y,w),_=g.nodeValue.substring(w),S=C.createElement("TW-SPAN");S.setAttribute("data-tw-inline-comments",t),g.nodeValue=N,g.parentNode.insertBefore(S,g),S.appendChild(g),k&&S.parentNode.insertBefore(C.createTextNode(k),S),p?g===u&&(c=0):g===d&&(f=0),_&&S.parentNode.insertBefore(C.createTextNode(_),S.nextSibling),p?g===d&&(f=g.nodeValue.length):g===u&&(c=g.nodeValue.length)}var T=n.next();o=T.done,s=T.value}Object(v.setSelection)(l,u,c,d,f)}}function u(e,t){return e&&e.nodeType===Node.ELEMENT_NODE&&"string"==typeof t&&""!==t?e.querySelectorAll('[data-tw-inline-comments~="'.concat(t.replace(/["\\]/g,"\\$&"),'"]')):[]}function c(e,t){for(var n=u(e,t),r=0,o=n.length;r<o;++r){var i=n[r];i.setAttribute("data-tw-inline-comments",i.getAttribute("data-tw-inline-comments").split(/\s+/).filter(function(e){return e.length>0&&e!==t}).join(" "))}}function d(e){var t=[];if(!e||e.nodeType!==Node.ELEMENT_NODE)return t;var n=e.ownerDocument,r=n.defaultView;if(!r)return t;var o=r.getSelection();if(0===o.rangeCount||!Object(v.containsNode)(e,o.anchorNode))return t;for(var a=!0,s=o.isCollapsed?o.anchorNode:Object(v.isTextNode)(o.anchorNode)&&Object(v.isTextNode)(o.focusNode)&&o.anchorNode.parentNode===o.focusNode.parentNode&&Object(v.isElementNode)(o.anchorNode.parentNode)&&o.anchorNode.parentNode.classList.contains("mce-offscreen-selection")?o.anchorNode.parentNode:o.anchorNode===o.focusNode&&1===Math.abs(o.anchorOffset-o.focusOffset)&&Object(v.isElementNode)(o.anchorNode)&&i(o.anchorNode.childNodes[Math.min(o.anchorOffset,o.focusOffset)])?o.anchorNode.childNodes[Math.min(o.anchorOffset,o.focusOffset)]:null;s&&s!==e;)if(Object(v.isIgnoredNode)(s))t.length=0,a&&s.classList.contains("mce-offscreen-selection")?(a=!1,s=e.querySelector('[data-mce-selected="1"]')):s=s.parentNode;else{if(i(s)&&(t.length=0),Object(v.isElementNode)(s)){var l=s.getAttribute("data-tw-inline-comments");l&&t.push.apply(t,l.split(/\s+/))}s=s.parentNode}return t.sort().filter(function(e,t,n){return e.length>0&&(0===t||e!==n[t-1])})}function f(e){var t=[];if(!e||e.nodeType!==Node.ELEMENT_NODE)return t;for(var n=e.querySelectorAll("[data-tw-inline-comments]"),r=0,o=n.length;r<o;++r)t.push.apply(t,n[r].getAttribute("data-tw-inline-comments").split(/\s+/));return t.sort().filter(function(e,t,n){return e.length>0&&(0===t||e!==n[t-1])})}n.r(t),n.d(t,"getInlineCommentsRange",function(){return a}),n.d(t,"InlineCommentsRangeIterator",function(){return b}),n.d(t,"canAddInlineComment",function(){return s}),n.d(t,"addInlineComment",function(){return l}),n.d(t,"getInlineCommentNodes",function(){return u}),n.d(t,"removeInlineComment",function(){return c}),n.d(t,"getInlineComments",function(){return d}),n.d(t,"getAllInlineComments",function(){return f}),n.d(t,"InlineComments",function(){return y});var h=n(/*! @babel/runtime/helpers/classCallCheck */"./node_modules/@babel/runtime/helpers/classCallCheck.js"),p=n.n(h),m=n(/*! @babel/runtime/helpers/createClass */"./node_modules/@babel/runtime/helpers/createClass.js"),g=n.n(m),v=n(/*! ./misc */"./src/util/misc.js"),b=function(){function e(t){p()(this,e),this._startContainer=t?t.startContainer:null,this._startOffset=t?t.startOffset:null,this._endContainer=t?t.endContainer:null,this._endOffset=t?t.endOffset:null}return g()(e,[{key:"next",value:function(){if(!this._startContainer)return{done:!0};var e={node:this._startContainer,startOffset:this._startOffset,endOffset:Object(v.isTextNode)(this._startContainer)?this._startContainer===this._endContainer?this._endOffset:this._startContainer.nodeValue.length:0};if(this._startContainer===this._endContainer)this._startContainer=null,this._startOffset=0,this._endContainer=null,this._endOffset=0;else{var t,n=this._startContainer.nextSibling,r=!!n;for(this._startContainer=r?n:this._startContainer.parentNode,this._startOffset=0;this._startContainer;)if(Object(v.isIgnoredNode)(this._startContainer))n=this._startContainer.nextSibling,r=!!n,this._startContainer=r?n:this._startContainer.parentNode;else{if(i(this._startContainer))break;if(Object(v.isTextNode)(this._startContainer))break;r&&Object(v.isElementNode)(this._startContainer)&&(t=this._startContainer.firstChild)?this._startContainer=t:(n=this._startContainer.nextSibling,r=!!n,this._startContainer=r?n:this._startContainer.parentNode)}}return{done:!1,value:e}}}]),e}(),y=function(){function e(t){p()(this,e),this.domNode=t}return g()(e,[{key:"canAdd",value:function(){return s(this.domNode)}},{key:"add",value:function(e){return l(this.domNode,e)}},{key:"remove",value:function(e){return c(this.domNode,e)}},{key:"get",value:function(){return d(this.domNode)}},{key:"getAll",value:function(){return f(this.domNode)}},{key:"getNodes",value:function(e){return u(this.domNode,e)}}]),e}()},"./src/util/misc.js":/*!**************************!*\
  !*** ./src/util/misc.js ***!
  \**************************/
/*! exports provided: vNodeKey, fakeCustomElementKey, isIgnoredNode, isTextNode, isElementNode, getAncestors, areArraysEqual, exclude, binaryFindIndex, isSelectionExtendSupported, nodeContainsPoint, toggleClass, hasKeys, nextTick, getIframeElement, escapeHtml, setSelection, createSet, toArray, getAttributeNames, indexInParentNode, containsNode, getTextContent, repeatString, compareOtModels */
function(e,t,n){"use strict";function r(e){return!e[_]&&e.nodeType===Node.ELEMENT_NODE&&"all"===e.getAttribute("data-mce-bogus")}function o(e){return e.nodeType===Node.TEXT_NODE}function i(e){return e.nodeType===Node.ELEMENT_NODE}function a(e,t){for(var n=[];e&&(n.push(e),e!==t);)e=e.parentNode;return n}function s(e,t){var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;++r)if(e[r]!==t[r])return!1;return!0}function l(e,t,n){var r=e.getBoundingClientRect();return r.left<=t&&t<=r.right&&r.top<=n&&n<=r.bottom}function u(e,t,n){null==n?e.classList.toggle(t):n?e.classList.add(t):e.classList.remove(t)}function c(e){for(var t in e)return!0;return!1}function d(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];D.push({callback:e,args:n}),R=R+1|0,A.setAttribute("trigger",R)}function f(e){return e&&e.frameElement||null}function h(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&#39;";default:return e}}function p(e){return e.replace(/[&<>"']/g,h)}function m(e,t,n,r,o){if(!t||!r)return void e.removeAllRanges();if(O)e.collapse(t,n),e.extend(r,o);else{var i=e.getRangeAt(0);e.removeAllRanges(),i.setStart(t,n),i.setEnd(r,o),!i.collapsed||t===r&&n===o||(i.setStart(r,o),i.setEnd(t,n)),e.addRange(i)}}function g(e){var t=new Set;return e&&"function"==typeof e.forEach&&e.forEach(function(e){return t.add(e)}),t}function v(e){if(Array.isArray(e))return e;var t=[];return e&&"function"==typeof e.forEach&&e.forEach(function(e){return t.push(e)}),t}function b(e){if(e.getAttributeNames)return e.getAttributeNames();for(var t=e.attributes,n=t.length,r=new Array(n),o=0;o<n;++o)r[o]=t[o].name;return r}function y(e){return Array.prototype.indexOf.call(e.parentNode.childNodes,e)}function w(e,t){if(!e)return!1;for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function x(e){return e.nodeType===Node.TEXT_NODE?e.nodeValue:e.nodeType!==Node.ELEMENT_NODE||"all"===e.getAttribute("data-mce-bogus")||"false"===e.getAttribute("contenteditable")?"":Array.prototype.reduce.call(e.childNodes,function(e,t){return e+x(t)},"")}function C(e,t){for(var n="";1&t&&(n+=e),t>>=1;)e+=e;return n}function k(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.ignoreRootNode,o=void 0!==r&&r,i=n.ignoreNodeIds,a=void 0!==i&&i;if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t===e)return!0;if(t.length!==e.length)return!1;var s=0,l=e.length;for(o&&(l>s&&Object(N.isInsertOpen)(t[s])&&Object(N.isInsertOpen)(e[s])&&"#root"===Object(N.getNodeName)(t[s])&&"#root"===Object(N.getNodeName)(e[s])&&++s,l>s&&Object(N.isInsertClose)(t[l-1])&&Object(N.isInsertClose)(e[l-1])&&"#root"===Object(N.getNodeName)(t[l-1])&&"#root"===Object(N.getNodeName)(e[l-1])&&--l);s<l;++s){var u=t[s],c=e[s];if(!Object(N.areTypesEqual)(u,c))return!1;if(Object(N.isInsertText)(u)){if(Object(N.getText)(u)!==Object(N.getText)(c))return!1}else if(a?Object(N.getNodeName)(u)!==Object(N.getNodeName)(c):Object(N.getNodeIdAndName)(u)!==Object(N.getNodeIdAndName)(c))return!1;if(!Object(N.areAttributesEqual)(u,c))return!1}return!0}n.r(t),n.d(t,"vNodeKey",function(){return _}),n.d(t,"fakeCustomElementKey",function(){return S}),n.d(t,"isIgnoredNode",function(){return r}),n.d(t,"isTextNode",function(){return o}),n.d(t,"isElementNode",function(){return i}),n.d(t,"getAncestors",function(){return a}),n.d(t,"areArraysEqual",function(){return s}),n.d(t,"exclude",function(){return T}),n.d(t,"binaryFindIndex",function(){return E}),n.d(t,"isSelectionExtendSupported",function(){return O}),n.d(t,"nodeContainsPoint",function(){return l}),n.d(t,"toggleClass",function(){return u}),n.d(t,"hasKeys",function(){return c}),n.d(t,"nextTick",function(){return d}),n.d(t,"getIframeElement",function(){return f}),n.d(t,"escapeHtml",function(){return p}),n.d(t,"setSelection",function(){return m}),n.d(t,"createSet",function(){return g}),n.d(t,"toArray",function(){return v}),n.d(t,"getAttributeNames",function(){return b}),n.d(t,"indexInParentNode",function(){return y}),n.d(t,"containsNode",function(){return w}),n.d(t,"getTextContent",function(){return x}),n.d(t,"repeatString",function(){return C}),n.d(t,"compareOtModels",function(){return k});var N=n(/*! @teamwork/ot-rich-text/lib/Action */"./node_modules/@teamwork/ot-rich-text/lib/Action.js"),_="__ot__vNode$"+Math.floor(1e4*Math.random()),S="__ot__fakeCustomElement$"+Math.floor(1e4*Math.random()),T=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.filter(function(e){return n.every(function(t){return t.every(function(t){return e!==t})})})},E=function(e,t){for(var n=0,r=e.length-1;n<=r;){var o=n+(r-n>>1),i=t(e[o]);if(i<0)r=o-1;else{if(!(i>0))return 0===i?o:-1;n=o+1}}return-1},O=!!window.getSelection().extend,A=document.createElement("DIV"),D=[],R=0;new MutationObserver(function(){var e=D;D=[],e.forEach(function(e){e.callback.apply(void 0,e.args)})}).observe(A,{attributes:!0})}})})},1729:function(e,t,n){"use strict";var r=n(1938);n.d(t,"a",function(){return r.a})},1730:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.blockName,n=void 0===t?"tw-autocomplete":t,r=e.header,o=void 0===r?"":r,i=e.footer,a=void 0===i?"":i,s=e.error,l=void 0===s?"Loading failed":s,u=e.beforeItem,c=void 0===u?"":u,d=e.item,f=void 0===d?"\x3c!-- ko text: $data.text --\x3e\x3c!-- /ko --\x3e":d,h=e.afterItem,p=void 0===h?"":h,m=e.blank,g=void 0===m?"No items":m,v=e.loading;return'\n\x3c!-- ko if: visible --\x3e\n    <div\n        class="'+n+"\"\n        data-bind=\"\n            style: {\n                left: caretPosition().left + 'px',\n                top: caretPosition().bottom + 'px'\n            },\n            css: {\n                '"+n+"--loading': loading(),\n                '"+n+"--blank': viewName() === 'blank',\n                '"+n+"--items': viewName() === 'items',\n                '"+n+"--error': viewName() === 'error'\n            },\n            if: ($component.node = $element, true)\n        \"\n    >\n        <div class=\""+n+'__header">\n            '+o+"\n        </div>\n        \x3c!-- ko if: viewName() === 'items' --\x3e\n            <div\n                class='"+n+'__list\'\n                data-bind="foreach: items"\n            >\n                '+c+'\n                <div\n                    class="'+n+'__list-item"\n                    data-bind="\n                        attr: {\n                            title: $data.title\n                        },\n                        css: {\n                            \''+n+"__list-item--selected': $component.selectedIndex() === $index()\n                        },\n                        event: {\n                            click: function () {\n                                $component.autocomplete.selectedIndex = $index()\n                                $component.autocomplete.accept()\n                            }\n                        },\n                        if: ($component.selectedIndex() === $index() && ($component.selectedNode = $element), true)\n                    \"\n                >\n                    "+f+"\n                </div>\n                "+p+"\n            </div>\n        \x3c!-- /ko --\x3e\n        \x3c!-- ko if: viewName() === 'error' --\x3e\n            <div class=\""+n+'__error">\n                '+l+"\n            </div>\n        \x3c!-- /ko --\x3e\n        \x3c!-- ko if: viewName() === 'loading' --\x3e\n            <div class=\""+n+'__loading">\n                '+(void 0===v?"Loading":v)+"\n            </div>\n        \x3c!-- /ko --\x3e\n        \x3c!-- ko if: viewName() === 'blank' --\x3e\n            <div class=\""+n+'__blank">\n                '+g+'\n            </div>\n        \x3c!-- /ko --\x3e\n        <div class="'+n+'__footer">\n            '+a+"\n        </div>\n    </div>\n\x3c!-- /ko --\x3e\n"}n.d(t,"c",function(){return o}),n.d(t,"a",function(){return d}),t.d=r,n.d(t,"b",function(){return f});var o,i=n(1208),a=n.n(i),s=n(1209),l=n.n(s),u=n(164),c=n.n(u);!function(e){e.error="error",e.items="items",e.loading="loading",e.blank="blank"}(o||(o={}));var d=function(){function e(t){var n=this;a()(this,e),this.node=void 0,this.selectedNode=void 0,this.scheduleScrollList=function(){requestAnimationFrame(n.scrollList)},this.scrollList=function(){if(n.selectedNode){var e=n.selectedNode.offsetParent;e&&(n.selectedNode.offsetTop<e.scrollTop?e.scrollTop=n.selectedNode.offsetTop:n.selectedNode.offsetTop+n.selectedNode.offsetHeight>e.scrollTop+e.clientHeight&&(e.scrollTop=n.selectedNode.offsetTop+n.selectedNode.offsetHeight-e.clientHeight))}},this.activeListener=function(){return n.active(n.autocomplete.active)},this.caretPositionListener=function(){return n.caretPosition(n.autocomplete.caretPosition)},this.editorPositionListener=function(){return n.editorPosition(n.autocomplete.editorPosition)},this.errorListener=function(){return n.error(n.autocomplete.error)},this.loadingListener=function(){return n.loading(n.autocomplete.loading)},this.itemsListener=function(){return n.items(n.autocomplete.items)},this.matchedTextListener=function(){return n.matchedText(n.autocomplete.matchedText)},this.selectedIndexListener=function(){return n.selectedIndex(n.autocomplete.selectedIndex)},this.onMouseButton=function(e){n.active()&&n.node&&!n.node.contains(e.target)&&n.autocomplete.clear()},this.autocomplete=t,this.active=c.a.observable(t.active),this.caretPosition=c.a.observable(t.caretPosition),this.editorPosition=c.a.observable(t.editorPosition),this.error=c.a.observable(t.error),this.loading=c.a.observable(t.loading),this.items=c.a.observable(t.items),this.matchedText=c.a.observable(t.matchedText),this.selectedIndex=c.a.observable(t.selectedIndex),this.autocomplete.on("active",this.activeListener),this.autocomplete.on("caretPosition",this.caretPositionListener),this.autocomplete.on("editorPosition",this.editorPositionListener),this.autocomplete.on("error",this.errorListener),this.autocomplete.on("loading",this.loadingListener),this.autocomplete.on("items",this.itemsListener),this.autocomplete.on("matchedText",this.matchedTextListener),this.autocomplete.on("selectedIndex",this.selectedIndexListener),document.addEventListener("mousedown",this.onMouseButton,!0),document.addEventListener("mouseup",this.onMouseButton,!0),this.caretVisible=c.a.pureComputed(function(){var e=n.caretPosition(),t=n.editorPosition();return e.top<=t.bottom&&e.bottom>=t.top&&e.left<=t.right&&e.right>=t.left}),this.visible=c.a.pureComputed(function(){return n.active()&&n.caretVisible()}),this.viewName=c.a.pureComputed(function(){return n.error()?"error":n.items().length>0?"items":n.loading()?"loading":"blank"}),this.selectedIndex.subscribe(this.scheduleScrollList)}return l()(e,[{key:"dispose",value:function(){this.autocomplete.off("active",this.activeListener),this.autocomplete.off("caretPosition",this.caretPositionListener),this.autocomplete.off("editorPosition",this.editorPositionListener),this.autocomplete.off("error",this.errorListener),this.autocomplete.off("loading",this.loadingListener),this.autocomplete.off("items",this.itemsListener),this.autocomplete.off("matchedText",this.matchedTextListener),this.autocomplete.off("selectedIndex",this.selectedIndexListener),document.removeEventListener("mousedown",this.onMouseButton,!0),document.removeEventListener("mouseup",this.onMouseButton,!0)}}]),e}(),f=r()},1822:function(e,t,n){!function(e){e(n(1147))}(function(e){"use strict";e.overlayMode=function(t,n,r){return{startState:function(){return{base:e.startState(t),overlay:e.startState(n),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(r){return{base:e.copyState(t,r.base),overlay:e.copyState(n,r.overlay),basePos:r.basePos,baseCur:null,overlayPos:r.overlayPos,overlayCur:null}},token:function(e,o){return(e!=o.streamSeen||Math.min(o.basePos,o.overlayPos)<e.start)&&(o.streamSeen=e,o.basePos=o.overlayPos=e.start),e.start==o.basePos&&(o.baseCur=t.token(e,o.base),o.basePos=e.pos),e.start==o.overlayPos&&(e.pos=e.start,o.overlayCur=n.token(e,o.overlay),o.overlayPos=e.pos),e.pos=Math.min(o.basePos,o.overlayPos),null==o.overlayCur?o.baseCur:null!=o.baseCur&&o.overlay.combineTokens||r&&null==o.overlay.combineTokens?o.baseCur+" "+o.overlayCur:o.overlayCur},indent:t.indent&&function(e,n,r){return t.indent(e.base,n,r)},electricChars:t.electricChars,innerMode:function(e){return{state:e.base,mode:t}},blankLine:function(e){var o,i;return t.blankLine&&(o=t.blankLine(e.base)),n.blankLine&&(i=n.blankLine(e.overlay)),null==i?o:r&&null!=o?o+" "+i:i}}}})},1823:function(e,t,n){!function(e){e(n(1147),n(1824),n(1986))}(function(e){"use strict";e.defineMode("markdown",function(t,n){function r(n){if(e.findModeByName){var r=e.findModeByName(n);r&&(n=r.mime||r.mimes[0])}var o=e.getMode(t,n);return"null"==o.name?null:o}function o(e,t,n){return t.f=t.inline=n,n(e,t)}function i(e,t,n){return t.f=t.block=n,n(e,t)}function a(e){return!e||!/\S/.test(e.string)}function s(t){if(t.linkTitle=!1,t.linkHref=!1,t.linkText=!1,t.em=!1,t.strong=!1,t.strikethrough=!1,t.quote=0,t.indentedCode=!1,t.f==u){var n=x;if(!n){var r=e.innerMode(w,t.htmlState);n="xml"==r.mode.name&&null===r.state.tagStart&&!r.state.context&&r.state.tokenize.isInText}n&&(t.f=h,t.block=l,t.htmlState=null)}return t.trailingSpace=0,t.trailingSpaceNewLine=!1,t.prevLine=t.thisLine,t.thisLine={stream:null},null}function l(t,i){var s=t.column()===i.indentation,l=a(i.prevLine.stream),u=i.indentedCode,f=i.prevLine.hr,h=!1!==i.list,p=(i.listStack[i.listStack.length-1]||0)+3;i.indentedCode=!1;var m=i.indentation;if(null===i.indentationDiff&&(i.indentationDiff=i.indentation,h)){for(i.list=null;m<i.listStack[i.listStack.length-1];)i.listStack.pop(),i.listStack.length?i.indentation=i.listStack[i.listStack.length-1]:i.list=!1;!1!==i.list&&(i.indentationDiff=m-i.listStack[i.listStack.length-1])}var g=!(l||f||i.prevLine.header||h&&u||i.prevLine.fencedCodeEnd),b=(!1===i.list||f||l)&&i.indentation<=p&&t.match(N),y=null;if(i.indentationDiff>=4&&(u||i.prevLine.fencedCodeEnd||i.prevLine.header||l))return t.skipToEnd(),i.indentedCode=!0,C.code;if(t.eatSpace())return null;if(s&&i.indentation<=p&&(y=t.match(T))&&y[1].length<=6)return i.quote=0,i.header=y[1].length,i.thisLine.header=!0,n.highlightFormatting&&(i.formatting="header"),i.f=i.inline,d(i);if(i.indentation<=p&&t.eat(">"))return i.quote=s?1:i.quote+1,n.highlightFormatting&&(i.formatting="quote"),t.eatSpace(),d(i);if(!b&&!i.setext&&s&&i.indentation<=p&&(y=t.match(_))){var w=y[1]?"ol":"ul";return i.indentation=m+t.current().length,i.list=!0,i.quote=0,i.listStack.push(i.indentation),i.em=!1,i.strong=!1,i.code=!1,i.strikethrough=!1,n.taskLists&&t.match(S,!1)&&(i.taskList=!0),i.f=i.inline,n.highlightFormatting&&(i.formatting=["list","list-"+w]),d(i)}return s&&i.indentation<=p&&(y=t.match(A,!0))?(i.quote=0,i.fencedEndRE=new RegExp(y[1]+"+ *$"),i.localMode=n.fencedCodeBlockHighlighting&&r(y[2]),i.localMode&&(i.localState=e.startState(i.localMode)),i.f=i.block=c,n.highlightFormatting&&(i.formatting="code-block"),i.code=-1,d(i)):i.setext||!(g&&h||i.quote||!1!==i.list||i.code||b||D.test(t.string))&&(y=t.lookAhead(1))&&(y=y.match(E))?(i.setext?(i.header=i.setext,i.setext=0,t.skipToEnd(),n.highlightFormatting&&(i.formatting="header")):(i.header="="==y[0].charAt(0)?1:2,i.setext=i.header),i.thisLine.header=!0,i.f=i.inline,d(i)):b?(t.skipToEnd(),i.hr=!0,i.thisLine.hr=!0,C.hr):"["===t.peek()?o(t,i,v):o(t,i,i.inline)}function u(t,n){var r=w.token(t,n.htmlState);if(!x){var o=e.innerMode(w,n.htmlState);("xml"==o.mode.name&&null===o.state.tagStart&&!o.state.context&&o.state.tokenize.isInText||n.md_inside&&t.current().indexOf(">")>-1)&&(n.f=h,n.block=l,n.htmlState=null)}return r}function c(e,t){var r=t.listStack[t.listStack.length-1]||0,o=t.indentation<r,a=r+3;if(t.fencedEndRE&&t.indentation<=a&&(o||e.match(t.fencedEndRE))){n.highlightFormatting&&(t.formatting="code-block");var s;return o||(s=d(t)),t.localMode=t.localState=null,t.block=l,t.f=h,t.fencedEndRE=null,t.code=0,t.thisLine.fencedCodeEnd=!0,o?i(e,t,t.block):s}return t.localMode?t.localMode.token(e,t.localState):(e.skipToEnd(),C.code)}function d(e){var t=[];if(e.formatting){t.push(C.formatting),"string"==typeof e.formatting&&(e.formatting=[e.formatting]);for(var r=0;r<e.formatting.length;r++)t.push(C.formatting+"-"+e.formatting[r]),"header"===e.formatting[r]&&t.push(C.formatting+"-"+e.formatting[r]+"-"+e.header),"quote"===e.formatting[r]&&(!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=e.quote?t.push(C.formatting+"-"+e.formatting[r]+"-"+e.quote):t.push("error"))}if(e.taskOpen)return t.push("meta"),t.length?t.join(" "):null;if(e.taskClosed)return t.push("property"),t.length?t.join(" "):null;if(e.linkHref?t.push(C.linkHref,"url"):(e.strong&&t.push(C.strong),e.em&&t.push(C.em),e.strikethrough&&t.push(C.strikethrough),e.emoji&&t.push(C.emoji),e.linkText&&t.push(C.linkText),e.code&&t.push(C.code),e.image&&t.push(C.image),e.imageAltText&&t.push(C.imageAltText,"link"),e.imageMarker&&t.push(C.imageMarker)),e.header&&t.push(C.header,C.header+"-"+e.header),e.quote&&(t.push(C.quote),!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=e.quote?t.push(C.quote+"-"+e.quote):t.push(C.quote+"-"+n.maxBlockquoteDepth)),!1!==e.list){var o=(e.listStack.length-1)%3;o?1===o?t.push(C.list2):t.push(C.list3):t.push(C.list1)}return e.trailingSpaceNewLine?t.push("trailing-space-new-line"):e.trailingSpace&&t.push("trailing-space-"+(e.trailingSpace%2?"a":"b")),t.length?t.join(" "):null}function f(e,t){if(e.match(O,!0))return d(t)}function h(t,r){var o=r.text(t,r);if(void 0!==o)return o;if(r.list)return r.list=null,d(r);if(r.taskList){return" "===t.match(S,!0)[1]?r.taskOpen=!0:r.taskClosed=!0,n.highlightFormatting&&(r.formatting="task"),r.taskList=!1,d(r)}if(r.taskOpen=!1,r.taskClosed=!1,r.header&&t.match(/^#+$/,!0))return n.highlightFormatting&&(r.formatting="header"),d(r);var a=t.next();if(r.linkTitle){r.linkTitle=!1;var s=a;"("===a&&(s=")"),s=(s+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1");var l="^\\s*(?:[^"+s+"\\\\]+|\\\\\\\\|\\\\.)"+s;if(t.match(new RegExp(l),!0))return C.linkHref}if("`"===a){var c=r.formatting;n.highlightFormatting&&(r.formatting="code"),t.eatWhile("`");var f=t.current().length;if(0!=r.code||r.quote&&1!=f){if(f==r.code){var g=d(r);return r.code=0,g}return r.formatting=c,d(r)}return r.code=f,d(r)}if(r.code)return d(r);if("\\"===a&&(t.next(),n.highlightFormatting)){var v=d(r),b=C.formatting+"-escape";return v?v+" "+b:b}if("!"===a&&t.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return r.imageMarker=!0,r.image=!0,n.highlightFormatting&&(r.formatting="image"),d(r);if("["===a&&r.imageMarker&&t.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return r.imageMarker=!1,r.imageAltText=!0,n.highlightFormatting&&(r.formatting="image"),d(r);if("]"===a&&r.imageAltText){n.highlightFormatting&&(r.formatting="image");var v=d(r);return r.imageAltText=!1,r.image=!1,r.inline=r.f=m,v}if("["===a&&!r.image)return r.linkText&&t.match(/^.*?\]/)?d(r):(r.linkText=!0,n.highlightFormatting&&(r.formatting="link"),d(r));if("]"===a&&r.linkText){n.highlightFormatting&&(r.formatting="link");var v=d(r);return r.linkText=!1,r.inline=r.f=t.match(/\(.*?\)| ?\[.*?\]/,!1)?m:h,v}if("<"===a&&t.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1)){r.f=r.inline=p,n.highlightFormatting&&(r.formatting="link");var v=d(r);return v?v+=" ":v="",v+C.linkInline}if("<"===a&&t.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1)){r.f=r.inline=p,n.highlightFormatting&&(r.formatting="link");var v=d(r);return v?v+=" ":v="",v+C.linkEmail}if(n.xml&&"<"===a&&t.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var y=t.string.indexOf(">",t.pos);if(-1!=y){/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(t.string.substring(t.start,y))&&(r.md_inside=!0)}return t.backUp(1),r.htmlState=e.startState(w),i(t,r,u)}if(n.xml&&"<"===a&&t.match(/^\/\w*?>/))return r.md_inside=!1,"tag";if("*"===a||"_"===a){for(var x=1,k=1==t.pos?" ":t.string.charAt(t.pos-2);x<3&&t.eat(a);)x++;var N=t.peek()||" ",_=!/\s/.test(N)&&(!R.test(N)||/\s/.test(k)||R.test(k)),T=!/\s/.test(k)&&(!R.test(k)||/\s/.test(N)||R.test(N)),E=null,O=null;if(x%2&&(r.em||!_||"*"!==a&&T&&!R.test(k)?r.em!=a||!T||"*"!==a&&_&&!R.test(N)||(E=!1):E=!0),x>1&&(r.strong||!_||"*"!==a&&T&&!R.test(k)?r.strong!=a||!T||"*"!==a&&_&&!R.test(N)||(O=!1):O=!0),null!=O||null!=E){n.highlightFormatting&&(r.formatting=null==E?"strong":null==O?"em":"strong em"),!0===E&&(r.em=a),!0===O&&(r.strong=a);var g=d(r);return!1===E&&(r.em=!1),!1===O&&(r.strong=!1),g}}else if(" "===a&&(t.eat("*")||t.eat("_"))){if(" "===t.peek())return d(r);t.backUp(1)}if(n.strikethrough)if("~"===a&&t.eatWhile(a)){if(r.strikethrough){n.highlightFormatting&&(r.formatting="strikethrough");var g=d(r);return r.strikethrough=!1,g}if(t.match(/^[^\s]/,!1))return r.strikethrough=!0,n.highlightFormatting&&(r.formatting="strikethrough"),d(r)}else if(" "===a&&t.match(/^~~/,!0)){if(" "===t.peek())return d(r);t.backUp(2)}if(n.emoji&&":"===a&&t.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){r.emoji=!0,n.highlightFormatting&&(r.formatting="emoji");var A=d(r);return r.emoji=!1,A}return" "===a&&(t.match(/^ +$/,!1)?r.trailingSpace++:r.trailingSpace&&(r.trailingSpaceNewLine=!0)),d(r)}function p(e,t){if(">"===e.next()){t.f=t.inline=h,n.highlightFormatting&&(t.formatting="link");var r=d(t);return r?r+=" ":r="",r+C.linkInline}return e.match(/^[^>]+/,!0),C.linkInline}function m(e,t){if(e.eatSpace())return null;var r=e.next();return"("===r||"["===r?(t.f=t.inline=g("("===r?")":"]"),n.highlightFormatting&&(t.formatting="link-string"),t.linkHref=!0,d(t)):"error"}function g(e){return function(t,r){if(t.next()===e){r.f=r.inline=h,n.highlightFormatting&&(r.formatting="link-string");var o=d(r);return r.linkHref=!1,o}return t.match(M[e]),r.linkHref=!0,d(r)}}function v(e,t){return e.match(/^([^\]\\]|\\.)*\]:/,!1)?(t.f=b,e.next(),n.highlightFormatting&&(t.formatting="link"),t.linkText=!0,d(t)):o(e,t,h)}function b(e,t){if(e.match(/^\]:/,!0)){t.f=t.inline=y,n.highlightFormatting&&(t.formatting="link");var r=d(t);return t.linkText=!1,r}return e.match(/^([^\]\\]|\\.)+/,!0),C.linkText}function y(e,t){return e.eatSpace()?null:(e.match(/^[^\s]+/,!0),void 0===e.peek()?t.linkTitle=!0:e.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),t.f=t.inline=h,C.linkHref+" url")}var w=e.getMode(t,"text/html"),x="null"==w.name;void 0===n.highlightFormatting&&(n.highlightFormatting=!1),void 0===n.maxBlockquoteDepth&&(n.maxBlockquoteDepth=0),void 0===n.taskLists&&(n.taskLists=!1),void 0===n.strikethrough&&(n.strikethrough=!1),void 0===n.emoji&&(n.emoji=!1),void 0===n.fencedCodeBlockHighlighting&&(n.fencedCodeBlockHighlighting=!0),void 0===n.xml&&(n.xml=!0),void 0===n.tokenTypeOverrides&&(n.tokenTypeOverrides={});var C={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var k in C)C.hasOwnProperty(k)&&n.tokenTypeOverrides[k]&&(C[k]=n.tokenTypeOverrides[k]);var N=/^([*\-_])(?:\s*\1){2,}\s*$/,_=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,S=/^\[(x| )\](?=\s)/i,T=n.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,E=/^ *(?:\={1,}|-{1,})\s*$/,O=/^[^#!\[\]*_\\<>` "'(~:]+/,A=/^(~~~+|```+)[ \t]*([\w+#-]*)[^\n`]*$/,D=/^\s*\[[^\]]+?\]:.*$/,R=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/,M={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/},P={startState:function(){return{f:l,prevLine:{stream:null},thisLine:{stream:null},block:l,htmlState:null,indentation:0,inline:h,text:f,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(t){return{f:t.f,prevLine:t.prevLine,thisLine:t.thisLine,block:t.block,htmlState:t.htmlState&&e.copyState(w,t.htmlState),indentation:t.indentation,localMode:t.localMode,localState:t.localMode?e.copyState(t.localMode,t.localState):null,inline:t.inline,text:t.text,formatting:!1,linkText:t.linkText,linkTitle:t.linkTitle,linkHref:t.linkHref,code:t.code,em:t.em,strong:t.strong,strikethrough:t.strikethrough,emoji:t.emoji,header:t.header,setext:t.setext,hr:t.hr,taskList:t.taskList,list:t.list,listStack:t.listStack.slice(0),quote:t.quote,indentedCode:t.indentedCode,trailingSpace:t.trailingSpace,trailingSpaceNewLine:t.trailingSpaceNewLine,md_inside:t.md_inside,fencedEndRE:t.fencedEndRE}},token:function(e,t){if(t.formatting=!1,e!=t.thisLine.stream){if(t.header=0,t.hr=!1,e.match(/^\s*$/,!0))return s(t),null;if(t.prevLine=t.thisLine,t.thisLine={stream:e},t.taskList=!1,t.trailingSpace=0,t.trailingSpaceNewLine=!1,!t.localState&&(t.f=t.block,t.f!=u)){var n=e.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(t.indentation=n,t.indentationDiff=null,n>0)return null}}return t.f(e,t)},innerMode:function(e){return e.block==u?{state:e.htmlState,mode:w}:e.localState?{state:e.localState,mode:e.localMode}:{state:e,mode:P}},indent:function(t,n,r){return t.block==u&&w.indent?w.indent(t.htmlState,n,r):t.localState&&t.localMode.indent?t.localMode.indent(t.localState,n,r):e.Pass},blankLine:s,getType:d,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return P},"xml"),e.defineMIME("text/markdown","markdown"),e.defineMIME("text/x-markdown","markdown")})},1824:function(e,t,n){!function(e){e(n(1147))}(function(e){"use strict";var t={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},n={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};e.defineMode("xml",function(r,o){function i(e,t){function n(n){return t.tokenize=n,n(e,t)}var r=e.next();if("<"==r)return e.eat("!")?e.eat("[")?e.match("CDATA[")?n(l("atom","]]>")):null:e.match("--")?n(l("comment","--\x3e")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),n(u(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=l("meta","?>"),"meta"):(S=e.eat("/")?"closeTag":"openTag",t.tokenize=a,"tag bracket");if("&"==r){var o;return o=e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"),o?"atom":"error"}return e.eatWhile(/[^&<]/),null}function a(e,t){var n=e.next();if(">"==n||"/"==n&&e.eat(">"))return t.tokenize=i,S=">"==n?"endTag":"selfcloseTag","tag bracket";if("="==n)return S="equals",null;if("<"==n){t.tokenize=i,t.state=h,t.tagName=t.tagStart=null;var r=t.tokenize(e,t);return r?r+" tag error":"tag error"}return/[\'\"]/.test(n)?(t.tokenize=s(n),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function s(e){var t=function(t,n){for(;!t.eol();)if(t.next()==e){n.tokenize=a;break}return"string"};return t.isInAttribute=!0,t}function l(e,t){return function(n,r){for(;!n.eol();){if(n.match(t)){r.tokenize=i;break}n.next()}return e}}function u(e){return function(t,n){for(var r;null!=(r=t.next());){if("<"==r)return n.tokenize=u(e+1),n.tokenize(t,n);if(">"==r){if(1==e){n.tokenize=i;break}return n.tokenize=u(e-1),n.tokenize(t,n)}}return"meta"}}function c(e,t,n){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=n,(k.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function d(e){e.context&&(e.context=e.context.prev)}function f(e,t){for(var n;;){if(!e.context)return;if(n=e.context.tagName,!k.contextGrabbers.hasOwnProperty(n)||!k.contextGrabbers[n].hasOwnProperty(t))return;d(e)}}function h(e,t,n){return"openTag"==e?(n.tagStart=t.column(),p):"closeTag"==e?m:h}function p(e,t,n){return"word"==e?(n.tagName=t.current(),T="tag",b):k.allowMissingTagName&&"endTag"==e?(T="tag bracket",b(e,t,n)):(T="error",p)}function m(e,t,n){if("word"==e){var r=t.current();return n.context&&n.context.tagName!=r&&k.implicitlyClosed.hasOwnProperty(n.context.tagName)&&d(n),n.context&&n.context.tagName==r||!1===k.matchClosing?(T="tag",g):(T="tag error",v)}return k.allowMissingTagName&&"endTag"==e?(T="tag bracket",g(e,t,n)):(T="error",v)}function g(e,t,n){return"endTag"!=e?(T="error",g):(d(n),h)}function v(e,t,n){return T="error",g(e,t,n)}function b(e,t,n){if("word"==e)return T="attribute",y;if("endTag"==e||"selfcloseTag"==e){var r=n.tagName,o=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==e||k.autoSelfClosers.hasOwnProperty(r)?f(n,r):(f(n,r),n.context=new c(n,r,o==n.indented)),h}return T="error",b}function y(e,t,n){return"equals"==e?w:(k.allowMissing||(T="error"),b(e,t,n))}function w(e,t,n){return"string"==e?x:"word"==e&&k.allowUnquoted?(T="string",b):(T="error",b(e,t,n))}function x(e,t,n){return"string"==e?x:b(e,t,n)}var C=r.indentUnit,k={},N=o.htmlMode?t:n;for(var _ in N)k[_]=N[_];for(var _ in o)k[_]=o[_];var S,T;return i.isInText=!0,{startState:function(e){var t={tokenize:i,state:h,indented:e||0,tagName:null,tagStart:null,context:null};return null!=e&&(t.baseIndent=e),t},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;S=null;var n=t.tokenize(e,t);return(n||S)&&"comment"!=n&&(T=null,t.state=t.state(S||n,e,t),T&&(n="error"==T?n+" error":T)),n},indent:function(t,n,r){var o=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+C;if(o&&o.noIndent)return e.Pass;if(t.tokenize!=a&&t.tokenize!=i)return r?r.match(/^(\s*)/)[0].length:0;if(t.tagName)return!1!==k.multilineTagIndentPastTag?t.tagStart+t.tagName.length+2:t.tagStart+C*(k.multilineTagIndentFactor||1);if(k.alignCDATA&&/<!\[CDATA\[/.test(n))return 0;var s=n&&/^<(\/)?([\w_:\.-]*)/.exec(n);if(s&&s[1])for(;o;){if(o.tagName==s[2]){o=o.prev;break}if(!k.implicitlyClosed.hasOwnProperty(o.tagName))break;o=o.prev}else if(s)for(;o;){var l=k.contextGrabbers[o.tagName];if(!l||!l.hasOwnProperty(s[2]))break;o=o.prev}for(;o&&o.prev&&!o.startOfLine;)o=o.prev;return o?o.indent+C:t.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:k.htmlMode?"html":"xml",helperType:k.htmlMode?"html":"xml",skipAttribute:function(e){e.state==w&&(e.state=b)},xmlCurrentTag:function(e){return e.tagName?{name:e.tagName,close:"closeTag"==e.type}:null},xmlCurrentContext:function(e){for(var t=[],n=e.context;n;n=n.prev)n.tagName&&t.push(n.tagName);return t.reverse()}}}),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})})},1919:function(e,t,n){var r,o,i=function(e,t){return function(){return e.apply(t,arguments)}};r=[n(401)],void 0!==(o=function(e){return function(){function t(e){this.UpdateIsDraftOutdated=i(this.UpdateIsDraftOutdated,this),this.UpdateHasUnpublishedDraftChanges=i(this.UpdateHasUnpublishedDraftChanges,this),this.OnError=i(this.OnError,this),this.OnPresence=i(this.OnPresence,this),this.OnNothingPending=i(this.OnNothingPending,this),this.OnOfflineEditing=i(this.OnOfflineEditing,this),this.OnOperation=i(this.OnOperation,this),this.OnLoad=i(this.OnLoad,this),this.OnLoadTimeout=i(this.OnLoadTimeout,this),this.OnDisconnected=i(this.OnDisconnected,this),this.OnConnected=i(this.OnConnected,this);var t,n,r;this.disposed=!1,this.subscriptions=[],this.loadTimeout=null,this.pendingSyncTimeout=null,this.loadFlash=null,this.pendingSyncFlash=null,this.disconnectedFlash=null,this.offlineEditing=!1,this.otClient=e.otClient,console.assert(!ko.isObservable(this.otClient)&&null!=this.otClient),this.presence=null!=(t=e.presence)?t:ko.observable([]),console.assert(ko.isObservable(this.presence)&&Array.isArray(this.presence())),this.versionNumber=null!=(n=e.versionNumber)?n:ko.observable(0),console.assert(ko.isObservable(this.versionNumber)&&"number"==typeof this.versionNumber()),this.versionTime=null!=(r=e.versionTime)?r:ko.observable(""),console.assert(ko.isObservable(this.versionTime)&&"string"==typeof this.versionTime()),this.isDraftOutdated=e.isDraftOutdated,console.assert(null==this.isDraftOutdated||ko.isObservable(this.isDraftOutdated)),this.hasUnpublishedDraftChanges=e.hasUnpublishedDraftChanges,console.assert(null==this.hasUnpublishedDraftChanges||ko.isObservable(this.hasUnpublishedDraftChanges)),this.connectionTimeoutCallback=e.connectionTimeoutCallback,console.assert("function"==typeof e.connectionTimeoutCallback),this.publishedContent=e.publishedContent,console.assert(null==this.publishedContent||ko.isObservable(this.publishedContent)),this.subscriptions.push(ko.computed(this.UpdateHasUnpublishedDraftChanges)),this.subscriptions.push(ko.computed(this.UpdateIsDraftOutdated)),this.loadTimeout=setTimeout(this.OnLoadTimeout,5e3),this.otClient.on("connected",this.OnConnected),this.otClient.on("disconnected",this.OnDisconnected),this.otClient.on("load",this.OnLoad),this.otClient.on("operation",this.OnOperation),this.otClient.on("nothingPending",this.OnNothingPending),this.otClient.on("presence",this.OnPresence),this.otClient.on("error",this.OnError),this.otClient.on("documentError",this.OnError)}return t.prototype.dispose=function(){var e,t,n,r,o,i,a;for(n=this.subscriptions,e=0,t=n.length;e<t;e++)a=n[e],a.dispose();this.otClient.removeListener("connected",this.OnConnected),this.otClient.removeListener("disconnected",this.OnDisconnected),this.otClient.removeListener("load",this.OnLoad),this.otClient.removeListener("operation",this.OnOperation),this.otClient.removeListener("nothingPending",this.OnNothingPending),this.otClient.removeListener("presence",this.OnPresence),this.otClient.removeListener("error",this.OnError),this.otClient.removeListener("documentError",this.OnError),clearTimeout(this.loadTimeout),clearTimeout(this.pendingSyncTimeout),null!=(r=this.loadFlash)&&r.Remove(),null!=(o=this.pendingSyncFlash)&&o.Remove(),null!=(i=this.disconnectedFlash)&&i.Remove(),this.presence().length=0,this.presence.valueHasMutated(),this.disposed=!0},t.prototype.OnConnected=function(){null!=this.disconnectedFlash&&(this.disconnectedFlash.Remove(),this.disconnectedFlash=null)},t.prototype.OnDisconnected=function(){this.offlineEditing||null!=this.disconnectedFlash||(this.disconnectedFlash=app.flash.Error(app.tl("Disconnected"),app.tl("There are problems with the connection, please wait while we try to restore it."),{timer:0,tapToDismiss:!1,allowMultiple:!0}))},t.prototype.OnLoadTimeout=function(){this.loadFlash=app.flash.Error(app.tl("Cannot Load Content"),app.tl("Still trying to load the latest draft."),{timer:0,tapToDismiss:!1,allowMultiple:!0}),this.connectionTimeoutCallback&&this.connectionTimeoutCallback()},t.prototype.OnLoad=function(){clearTimeout(this.loadTimeout),null!=this.loadFlash&&(this.loadFlash.Remove(),this.loadFlash=null,app.flash.Info(app.tl("Content Loaded"),app.tl("The latest draft has been loaded successfully."),{allowMultiple:!0})),this.UpdateHasUnpublishedDraftChanges(),this.UpdateIsDraftOutdated()},t.prototype.OnOperation=function(e,t){"remote"!==t&&(clearTimeout(this.pendingSyncTimeout),this.pendingSyncTimeout=setTimeout(function(e){return function(){!e.pendingSyncFlash&&e.otClient.hasPending()&&(e.pendingSyncFlash=app.flash.Warn(app.tl("Synchronization Issue"),app.tl("The recent changes have not been stored yet. Please wait for an update before editing further."),{timer:0,tapToDismiss:!1,allowMultiple:!0}))}}(this),"connected"===this.otClient.connectionState?3e3:0),this.UpdateHasUnpublishedDraftChanges(),this.UpdateIsDraftOutdated())},t.prototype.OnOfflineEditing=function(){return clearTimeout(this.loadTimeout),this.pendingSyncFlash&&(this.pendingSyncFlash.Remove(),this.pendingSyncFlash=null),this.disconnectedFlash&&(this.disconnectedFlash.Remove(),this.disconnectedFlash=null),this.loadFlash&&(this.loadFlash.Remove(),this.loadFlash=null),this.offlineEditing=!0},t.prototype.OnNothingPending=function(){this.pendingSyncFlash&&!this.disposed&&(this.pendingSyncFlash.Remove(),this.pendingSyncFlash=null,app.flash.Info(app.tl("Synchronization Complete"),app.tl("All your changes have now been updated centrally."),{allowMultiple:!0}))},t.prototype.OnPresence=function(e,t){var n,r,o,i,a;if(null!=t)this.presence().push(t),this.presence.valueHasMutated();else for(a=this.presence(),r=n=0,o=a.length;n<o;r=++n)if(i=a[r],i.src===e){this.presence().splice(r,1),this.presence.valueHasMutated();break}},t.prototype.OnError=function(t){app.flash.Error(app.tl("Synchronization Failed"),app.tl("There is a problem with updating changes centrally."),{allowMultiple:!0}),console.error("Collaborative Editing: Synchronization Failed",t),e.captureException(t,{extra:t})},t.prototype.GetVersionNumber=function(){return 0|this.otClient.getRootAttribute("@data-tw-version-number")},t.prototype.SetVersionNumber=function(e){e|=0,this.GetVersionNumber()!==e&&this.otClient.setRootAttribute("@data-tw-version-number",""+e)},t.prototype.GetVersionTime=function(){return this.otClient.getRootAttribute("@data-tw-version-time")||""},t.prototype.SetVersionTime=function(e){e=""+e,this.GetVersionTime()!==e&&this.otClient.setRootAttribute("@data-tw-version-time",e)},t.prototype.UpdateHasUnpublishedDraftChanges=function(){null!=this.hasUnpublishedDraftChanges&&this.hasUnpublishedDraftChanges(!this.ArePublishedAndDraftContentsEqual())},t.prototype.UpdateIsDraftOutdated=function(){var e;null!=this.isDraftOutdated&&(e=(this.versionNumber()!==this.GetVersionNumber()||this.versionTime()!==this.GetVersionTime())&&null!=this.otClient.otModel,this.isDraftOutdated(e),e&&this.ArePublishedAndDraftContentsEqual()&&(this.SetVersionNumber(this.versionNumber()),this.SetVersionTime(this.versionTime())))},t.prototype.ArePublishedAndDraftContentsEqual=function(){return null!=this.publishedContent&&(this.otClient.compareOtModels(this.otClient.otModel,this.publishedContent(),{ignoreRootNode:!0,ignoreNodeIds:!0})||this.otClient.version<=2)},t}()}.apply(t,r))&&(e.exports=o)},1936:function(e,t,n){"use strict";function r(e,t){if(!e)throw i(t)}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(null!=e&&"object"===(void 0===e?"undefined":s()(e)),'Argument "details" must be an object.'),r("string"==typeof e.name||void 0===e.name,'Argument "details.name" must be a string or undefined.'),r("string"==typeof e.message||void 0===e.message,'Argument "details.message" must be a string or undefined.'),r(e.cause instanceof Error||void 0===e.cause,'Argument "details.cause" must be an Error or undefined.'),r(!("stack"in e),'Argument "details.stack" must not be present.');var t=e.name,n=e.cause,o=e.message?n?e.message+" => "+n:e.message:n?"=> "+n:"",i=new Error(o);void 0!==t&&Object.defineProperty(i,"name",{configurable:!0,value:t,writable:!0});for(var a in e)e.hasOwnProperty(a)&&"name"!==a&&"message"!==a&&(i[a]=e[a]);return i}function i(e){return o({message:e,name:"SyncOtError Assert"})}t.a=i;var a=n(125),s=n.n(a)},1937:function(e,t,n){"use strict";var r=n(1936);n.d(t,"a",function(){return r.a})},1938:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return b});var r=n(1209),o=n.n(r),i=n(1978),a=n.n(i),s=n(1291),l=n.n(s),u=n(1208),c=n.n(u),d=n(1378),f=n.n(d),h=n(1377),p=n.n(h),m=n(1939),g=n(2069),v=(n.n(g),g.EventEmitter),b=function(e){function t(){return c()(this,t),f()(this,(t.__proto__||l()(t)).apply(this,arguments))}return p()(t,e),t}(v);!function(t){function r(){c()(this,r);var e=f()(this,(r.__proto__||l()(r)).call(this));return e._destroyed=!1,e}p()(r,t),o()(r,[{key:"emit",value:function(e){for(var t,n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return this._destroyed?this.listenerCount(e)>0:(t=a()(r.prototype.__proto__||l()(r.prototype),"emit",this)).call.apply(t,[this,e].concat(o))}},{key:"emitForce",value:function(e){for(var t,n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return(t=a()(r.prototype.__proto__||l()(r.prototype),"emit",this)).call.apply(t,[this,e].concat(o))}},{key:"emitAsync",value:function(t){for(var n=this,r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];e.nextTick(function(){return n.emit.apply(n,[t].concat(o))})}},{key:"emitAsyncForce",value:function(t){for(var n=this,r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];e.nextTick(function(){return n.emitForce.apply(n,[t].concat(o))})}},{key:"destroy",value:function(e){this._destroyed||(this._destroyed=!0,e&&this.emitAsyncForce("error",e),this.emitAsyncForce("destroy"))}},{key:"assertNotDestroyed",value:function(){n.i(m.a)(!this._destroyed,"Already destroyed.")}},{key:"destroyed",get:function(){return this._destroyed}}])}(b)}).call(t,n(166))},1939:function(e,t,n){"use strict";var r=n(1940);n.d(t,"a",function(){return r.a})},1940:function(e,t,n){"use strict";(function(e){function r(e,t){if(!e)throw n.i(s.a)(t)}t.a=r;var o=n(1974),i=(n.n(o),n(27)),a=n.n(i),s=n(1937),l=function(e){return function(t){return new a.a(function(n){return t.once(e,n)})}};l("data"),l("close"),l("error")}).call(t,n(166))},1941:function(e,t,n){"use strict";function r(e){var t=e.editorAdapter,n=e.match,r=void 0===n?E:n,o=e.load,i=void 0===o?O:o,a=e.accept;return new D(t,r,i,void 0===a?A:a)}t.a=r;var o=n(27),i=n.n(o),a=n(22),s=n.n(a),l=n(23),u=n.n(l),c=n(1291),d=n.n(c),f=n(1208),h=n.n(f),p=n(1209),m=n.n(p),g=n(1378),v=n.n(g),b=n(1377),y=n.n(b),w=n(1976),x=n.n(w),C=n(1729),k="",N=x()([]),_=-1,S=x()({bottom:0,left:0,right:0,top:0}),T=x()([-1,-1]),E=function(){return T},O=function(){return N},A=function(e){return e.text},D=function(e){function t(e,n,r,o){h()(this,t);var i=v()(this,(t.__proto__||d()(t)).call(this));return i.editorAdapter=e,i._match=n,i._load=r,i._accept=o,i._items=N,i._selectedIndex=_,i._matchedText=k,i._caretPosition=S,i._editorPosition=S,i._error=void 0,i._active=!1,i._promise=void 0,i.pending=void 0,i.onAnimationFrame=function(){var e=i.pending;i.pending=void 0,i[e]()},i.onScroll=function(){i.updatePosition()},i.onResize=function(){i.updatePosition()},i.onSelectionChange=function(){"matchNow"!==i.pending&&i.clear()},i.onInput=function(){i.match()},i.onKeyDown=function(e,t){switch(t.key){case"Enter":!(i.active&&i.items.length>0)||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey||(t.preventDefault(),i.accept());break;case"Up":case"ArrowUp":!(i.active&&i.items.length>0)||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey||(t.preventDefault(),i.selectedIndex--);break;case"Down":case"ArrowDown":!(i.active&&i.items.length>0)||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey||(t.preventDefault(),i.selectedIndex++);break;case"Esc":case"Escape":!i.active||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey||(t.preventDefault(),i.clear());break;case"Spacebar":case" ":!t.ctrlKey||t.shiftKey||t.altKey||t.metaKey||(t.preventDefault(),i.match())}},document.addEventListener("scroll",i.onScroll),window.addEventListener("resize",i.onResize),i.editorAdapter.on("input",i.onInput),i.editorAdapter.on("keyDown",i.onKeyDown),i.editorAdapter.on("scroll",i.onScroll),i.editorAdapter.on("resize",i.onResize),i.editorAdapter.on("selectionChange",i.onSelectionChange),i}return y()(t,e),m()(t,[{key:"destroy",value:function(){document.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResize),this.editorAdapter.off("input",this.onInput),this.editorAdapter.off("keyDown",this.onKeyDown),this.editorAdapter.off("scroll",this.onScroll),this.editorAdapter.off("resize",this.onResize),this.editorAdapter.off("selectionChange",this.onSelectionChange),this.clear()}},{key:"match",value:function(){this.pending||requestAnimationFrame(this.onAnimationFrame),this.pending="matchNow"}},{key:"updatePosition",value:function(){this.pending||(requestAnimationFrame(this.onAnimationFrame),this.pending="updatePositionNow")}},{key:"clear",value:function(){this.pending||requestAnimationFrame(this.onAnimationFrame),this.pending="clearNow"}},{key:"accept",value:function(){var e=this.items[this.selectedIndex];if(e){var t=this._accept(e);"string"==typeof t&&(this.editorAdapter.focus(),this.replace(t),this.clear())}}},{key:"replace",value:function(e){var t=this.editorAdapter.textBeforeCaret,n=this.editorAdapter.textAfterCaret,r=this._match(t,n),o=r[0],i=r[1];o<0||i<0||(this.editorAdapter.textBeforeCaret=t.substring(0,t.length-o)+e,this.editorAdapter.textAfterCaret=n.substring(i))}},{key:"matchNow",value:function(){function e(){return t.apply(this,arguments)}var t=u()(s.a.mark(function e(){var t,n,r,o,i,a,l,u;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.editorAdapter.textBeforeCaret,n=this.editorAdapter.textAfterCaret,r=this._match(t,n),o=r[0],i=r[1],!(o<0||i<0)){e.next=8;break}return this.clearNow(),e.abrupt("return");case 8:return a=t.substring(t.length-o)+n.substring(0,i),l=this.loadItems(a),this.active=!0,this.matchedText=a,this.caretPosition=this.editorAdapter.caretPosition,this.editorPosition=this.editorAdapter.editorPosition,this.promise=l,e.prev=15,e.next=18,l;case 18:u=e.sent,this.promise===l&&(this.promise=void 0,this.items=u,this.error=void 0),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(15),this.promise===l&&(this.promise=void 0,this.items=N,this.error=e.t0);case 25:case"end":return e.stop()}},e,this,[[15,22]])}));return e}()},{key:"clearNow",value:function(){this.active=!1,this.matchedText=k,this.caretPosition=S,this.editorPosition=S,this.promise=void 0,this.items=N,this.error=void 0}},{key:"updatePositionNow",value:function(){this.active&&(this.caretPosition=this.editorAdapter.caretPosition,this.editorPosition=this.editorAdapter.editorPosition)}},{key:"loadItems",value:function(){function e(e){return t.apply(this,arguments)}var t=u()(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._load(t);case 2:return n=e.sent,e.abrupt("return",Array.isArray(n)?n:N);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"emitLater",value:function(e){var t=this;i.a.resolve().then(function(){t.listenerCount(e)>0&&t.emit(e)})}},{key:"items",get:function(){return this._items},set:function(e){this._items!==e&&(this._items=e,this.selectedIndex=0,this.emitLater("items"))}},{key:"selectedIndex",get:function(){return this._selectedIndex},set:function(e){var t=0|e,n=this.items.length,r=n>0?(t%n+n)%n:_;this._selectedIndex!==r&&(this._selectedIndex=r,this.emitLater("selectedIndex"))}},{key:"matchedText",get:function(){return this._matchedText},set:function(e){this._matchedText!==e&&(this._matchedText=e,this.emitLater("matchedText"))}},{key:"caretPosition",get:function(){return this._caretPosition},set:function(e){this._caretPosition!==e&&(this._caretPosition=e,this.emitLater("caretPosition"))}},{key:"editorPosition",get:function(){return this._editorPosition},set:function(e){this._editorPosition!==e&&(this._editorPosition=e,this.emitLater("editorPosition"))}},{key:"error",get:function(){return this._error},set:function(e){this._error!==e&&(this._error=e,this.emitLater("error"))}},{key:"active",get:function(){return this._active},set:function(e){this._active!==e&&(this._active=e,this.emitLater("active"))}},{key:"loading",get:function(){return!!this.promise}},{key:"promise",get:function(){return this._promise},set:function(e){var t=this.loading;this._promise=e,t!==this.loading&&this.emitLater("loading")}}]),t}(C.a)},1942:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1941);n.d(t,"createAutocomplete",function(){return r.a})},1943:function(e,t,n){"use strict";function r(e){return new m(e)}t.a=r;var o=n(1291),i=n.n(o),a=n(1208),s=n.n(a),l=n(1209),u=n.n(l),c=n(1378),d=n.n(c),f=n(1377),h=n.n(f),p=n(1729),m=function(e){function t(e){s()(this,t);var n=d()(this,(t.__proto__||i()(t)).call(this));return n.editor=e,n.onKeyUp=function(e,t){n.emit("keyUp",n,t)},n.onKeyDown=function(e,t){n.emit("keyDown",n,t)},n.onInput=function(){n.emit("input",n)},n.onScroll=function(){n.emit("scroll",n)},n.onResize=function(){n.emit("resize",n)},n.onSelectionChange=function(){n.emit("selectionChange",n)},n.onKeyHandled=function(e,t){"Backspace"!==t&&"Delete"!==t||n.emit("input",n)},n.editor.on("keyup",n.onKeyUp),n.editor.on("keydown",n.onKeyDown),n.editor.on("inputRead",n.onInput),n.editor.on("scroll",n.onScroll),n.editor.on("refresh",n.onResize),n.editor.on("cursorActivity",n.onSelectionChange),n.editor.on("keyHandled",n.onKeyHandled),n}return h()(t,e),u()(t,[{key:"destroy",value:function(){this.editor.off("keyup",this.onKeyUp),this.editor.off("keydown",this.onKeyDown),this.editor.off("inputRead",this.onInput),this.editor.off("scroll",this.onScroll),this.editor.off("refresh",this.onResize),this.editor.off("cursorActivity",this.onSelectionChange),this.editor.off("keyHandled",this.onKeyHandled)}},{key:"focus",value:function(){this.editor.focus()}},{key:"textBeforeCaret",get:function(){var e=this.editor.getDoc(),t=e.getCursor("head"),n={line:t.line,ch:0};return e.getRange(n,t)},set:function(e){var t=this.editor.getDoc(),n=t.getCursor("head"),r={line:n.line,ch:0},o={line:n.line,ch:e.length};t.replaceRange(e,r,n),t.setCursor(o)}},{key:"textAfterCaret",get:function(){var e=this.editor.getDoc(),t=e.getCursor("head"),n={line:t.line,ch:1/0};return e.getRange(t,n)},set:function(e){var t=this.editor.getDoc(),n=t.getCursor("head"),r={line:n.line,ch:1/0},o=n;t.replaceRange(e,n,r),t.setCursor(o)}},{key:"caretPosition",get:function(){var e=this.editor.getDoc(),t=e.getCursor("head"),n=this.editor.cursorCoords(t,"window");return{bottom:Math.floor(n.bottom),left:Math.floor(n.left),right:Math.floor(n.left),top:Math.floor(n.top)}}},{key:"editorPosition",get:function(){var e=this.editor.getWrapperElement().getBoundingClientRect();return{bottom:Math.floor(e.bottom),left:Math.floor(e.left),right:Math.floor(e.right),top:Math.floor(e.top)}}}]),t}(p.a)},1944:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1943);n.d(t,"createEditorAdapter",function(){return r.a})},1945:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1730);n.d(t,"ViewName",function(){return r.c}),n.d(t,"TwAutocomplete",function(){return r.a}),n.d(t,"createTemplate",function(){return r.d}),n.d(t,"template",function(){return r.b}),t.default={viewModel:r.a,template:r.b}},1956:function(e,t,n){"use strict";function r(e,t){function r(){t.handle||(f.style.bottom="18px",h.style.right="18px")}t=t||{};var i=t.minWidth||200,a=t.minHeight||100,s=!1!==t.resizableWidth,l=!1!==t.resizableHeight,u=t.cssClass||"cm-resize-handle",c=e.display.wrapper,d=t.handle||function(){var e=c.appendChild(document.createElement("div"));return e.className=u,e}(),f=c.querySelector(".CodeMirror-vscrollbar"),h=c.querySelector(".CodeMirror-hscrollbar");e.on("update",r),r();var p=void 0,m=void 0;return n.i(o.a)({container:d.offsetParent,selector:d,callbackDragStart:function(e,t){p=t,m=[c.clientWidth,c.clientHeight]},callback:function(t,n){var r=n[0]-p[0],o=n[1]-p[1],u=s?Math.max(i,m[0]+r):null,c=l?Math.max(a,m[1]+o):null;e.setSize(u,c)}}),d}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1957);document.documentElement.firstElementChild.appendChild(document.createElement("style")).textContent="## PLACEHOLDER-CSS ##",t.default=r},1957:function(e,t,n){"use strict";function r(e){function t(e,t,n,r){function o(e,t,n){return Math.max(t,Math.min(e,n))}var i=e.clientX,a=e.clientY;if(t){var s=t.getBoundingClientRect();if(i-=s.left,a-=s.top,n&&(i-=n[0],a-=n[1]),r&&(i=o(i,0,s.width),a=o(a,0,s.height)),t!==d){(null!==x?x:"circle"===t.nodeName||"ellipse"===t.nodeName)&&(i-=s.width/2,a-=s.height/2)}}return b?[Math.round(i),Math.round(a)]:[i,a]}function n(e){e.preventDefault(),v||e.stopPropagation()}function r(e){(C=f?f instanceof Element?f.contains(e.target)?f:null:e.target.closest(f):{})&&(n(e),k=f&&w?t(e,C):[0,0],N=t(e,d,k),b&&(N=N.map(Math.round)),p&&p(C,N))}function o(e){if(C){n(e);var r=t(e,d,k,!y);h(C,r,N)}}function i(e){if(C){if(m||g){var n=t(e,d,k,!y);g&&N[0]===n[0]&&N[1]===n[1]&&g(C,N),m&&m(C,n,N)}C=null}}function a(e){i(u(e))}function s(e){return void 0!==e.buttons?1===e.buttons:1===e.which}function l(e,t){if(1!==e.touches.length)return void i(e);t(u(e))}function u(e){var t=e.targetTouches[0];return t||(t=e.changedTouches[0]),t.preventDefault=e.preventDefault.bind(e),t.stopPropagation=e.stopPropagation.bind(e),t}var c=Element.prototype;c.matches||(c.matches=c.msMatchesSelector||c.webkitMatchesSelector),c.closest||(c.closest=function(e){var t=this;do{if(t.matches(e))return t;t="svg"===t.tagName?t.parentNode:t.parentElement}while(t);return null}),e=e||{};var d=e.container||document.documentElement,f=e.selector,h=e.callback||console.log,p=e.callbackDragStart,m=e.callbackDragEnd,g=e.callbackClick,v=e.propagateEvents,b=!1!==e.roundCoords,y=!1!==e.dragOutside,w=e.handleOffset||!1!==e.handleOffset,x=null;switch(w){case"center":x=!0;break;case"topleft":case"top-left":x=!1}var C=void 0,k=void 0,N=void 0;d.addEventListener("mousedown",function(e){s(e)&&r(e)}),d.addEventListener("touchstart",function(e){l(e,r)}),window.addEventListener("mousemove",function(e){C&&(s(e)?o(e):i(e))}),window.addEventListener("touchmove",function(e){l(e,o)}),window.addEventListener("mouseup",function(e){C&&!s(e)&&i(e)}),d.addEventListener("touchend",a),d.addEventListener("touchcancel",a)}t.a=r},1974:function(e,t,n){e.exports={default:n(1987),__esModule:!0}},1975:function(e,t,n){e.exports={default:n(1988),__esModule:!0}},1976:function(e,t,n){e.exports={default:n(1989),__esModule:!0}},1977:function(e,t,n){e.exports={default:n(1990),__esModule:!0}},1978:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(1291),i=r(o),a=n(1977),s=r(a);t.default=function e(t,n,r){null===t&&(t=Function.prototype);var o=(0,s.default)(t,n);if(void 0===o){var a=(0,i.default)(t);return null===a?void 0:e(a,n,r)}if("value"in o)return o.value;var l=o.get;if(void 0!==l)return l.call(r)}},1979:function(e,t,n){"use strict";function r(e){if(e=e||{},"function"!=typeof e.codeMirrorInstance||"function"!=typeof e.codeMirrorInstance.defineMode)return void console.log("CodeMirror Spell Checker: You must provide an instance of CodeMirror via the option `codeMirrorInstance`");String.prototype.includes||(String.prototype.includes=function(){return-1!==String.prototype.indexOf.apply(this,arguments)}),e.codeMirrorInstance.defineMode("spell-checker",function(t){if(!r.aff_loading){r.aff_loading=!0;var n=new XMLHttpRequest;n.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.aff",!0),n.onload=function(){4===n.readyState&&200===n.status&&(r.aff_data=n.responseText,2==++r.num_loaded&&(r.typo=new o("en_US",r.aff_data,r.dic_data,{platform:"any"})))},n.send(null)}if(!r.dic_loading){r.dic_loading=!0;var i=new XMLHttpRequest;i.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.dic",!0),i.onload=function(){4===i.readyState&&200===i.status&&(r.dic_data=i.responseText,2==++r.num_loaded&&(r.typo=new o("en_US",r.aff_data,r.dic_data,{platform:"any"})))},i.send(null)}var a='!"#$%&()*+,-./:;<=>?@[\\]^_`{|}~ ',s={token:function(e){var t=e.peek(),n="";if(a.includes(t))return e.next(),null;for(;null!=(t=e.peek())&&!a.includes(t);)n+=t,e.next();return r.typo&&!r.typo.check(n)?"spell-error":null}},l=e.codeMirrorInstance.getMode(t,t.backdrop||"text/plain");return e.codeMirrorInstance.overlayMode(l,s,!0)})}var o=n(3344);r.num_loaded=0,r.aff_loading=!1,r.dic_loading=!1,r.aff_data="",r.dic_data="",r.typo,e.exports=r},1980:function(e,t,n){!function(e){e(n(1147))}(function(e){"use strict";function t(e){var t=e.getWrapperElement();e.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:t.style.width,height:t.style.height},t.style.width="",t.style.height="auto",t.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",e.refresh()}function n(e){var t=e.getWrapperElement();t.className=t.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var n=e.state.fullScreenRestore;t.style.width=n.width,t.style.height=n.height,window.scrollTo(n.scrollLeft,n.scrollTop),e.refresh()}e.defineOption("fullScreen",!1,function(r,o,i){i==e.Init&&(i=!1),!i!=!o&&(o?t(r):n(r))})})},1981:function(e,t,n){!function(e){e(n(1147))}(function(e){function t(e){e.state.placeholder&&(e.state.placeholder.parentNode.removeChild(e.state.placeholder),e.state.placeholder=null)}function n(e){t(e);var n=e.state.placeholder=document.createElement("pre");n.style.cssText="height: 0; overflow: visible",n.style.direction=e.getOption("direction"),n.className="CodeMirror-placeholder CodeMirror-line-like";var r=e.getOption("placeholder");"string"==typeof r&&(r=document.createTextNode(r)),n.appendChild(r),e.display.lineSpace.insertBefore(n,e.display.lineSpace.firstChild)}function r(e){i(e)&&n(e)}function o(e){var r=e.getWrapperElement(),o=i(e);r.className=r.className.replace(" CodeMirror-empty","")+(o?" CodeMirror-empty":""),o?n(e):t(e)}function i(e){return 1===e.lineCount()&&""===e.getLine(0)}e.defineOption("placeholder","",function(n,i,a){var s=a&&a!=e.Init;if(i&&!s)n.on("blur",r),n.on("change",o),n.on("swapDoc",o),o(n);else if(!i&&s){n.off("blur",r),n.off("change",o),n.off("swapDoc",o),t(n);var l=n.getWrapperElement();l.className=l.className.replace(" CodeMirror-empty","")}i&&!n.hasFocus()&&r(n)})})},1982:function(e,t,n){!function(e){e(n(1147))}(function(e){"use strict";function t(e,t){var r=t.line,o=0,i=0,a=n.exec(e.getLine(r)),s=a[1];do{o+=1;var l=r+o,u=e.getLine(l),c=n.exec(u);if(c){var d=c[1],f=parseInt(a[3],10)+o-i,h=parseInt(c[3],10),p=h;if(s!==d||isNaN(h)){if(s.length>d.length)return;if(s.length<d.length&&1===o)return;i+=1}else f===h&&(p=h+1),f>h&&(p=f+1),e.replaceRange(u.replace(n,d+p+c[4]+c[5]),{line:l,ch:0},{line:l,ch:u.length})}}while(c)}var n=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,r=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,o=/[*+-]\s/;e.commands.newlineAndIndentContinueMarkdownList=function(i){if(i.getOption("disableInput"))return e.Pass;for(var a=i.listSelections(),s=[],l=0;l<a.length;l++){var u=a[l].head,c=i.getStateAfter(u.line),d=e.innerMode(i.getMode(),c);if("markdown"!==d.mode.name)return void i.execCommand("newlineAndIndent");c=d.state;var f=!1!==c.list,h=0!==c.quote,p=i.getLine(u.line),m=n.exec(p),g=/^\s*$/.test(p.slice(0,u.ch));if(!a[l].empty()||!f&&!h||!m||g)return void i.execCommand("newlineAndIndent");if(r.test(p))/>\s*$/.test(p)||i.replaceRange("",{line:u.line,ch:0},{line:u.line,ch:u.ch+1}),s[l]="\n";else{var v=m[1],b=m[5],y=!(o.test(m[2])||m[2].indexOf(">")>=0),w=y?parseInt(m[3],10)+1+m[4]:m[2].replace("x"," ");s[l]="\n"+v+w+b,y&&t(i,u)}}i.replaceSelections(s)}})},1983:function(e,t,n){!function(e){e(n(1147))}(function(e){"use strict";function t(e){var t=e.flags;return null!=t?t:(e.ignoreCase?"i":"")+(e.global?"g":"")+(e.multiline?"m":"")}function n(e,n){for(var r=t(e),o=r,i=0;i<n.length;i++)-1==o.indexOf(n.charAt(i))&&(o+=n.charAt(i));return r==o?e:new RegExp(e.source,o)}function r(e){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(e.source)}function o(e,t,r){t=n(t,"g");for(var o=r.line,i=r.ch,a=e.lastLine();o<=a;o++,i=0){t.lastIndex=i;var s=e.getLine(o),l=t.exec(s);if(l)return{from:m(o,l.index),to:m(o,l.index+l[0].length),match:l}}}function i(e,t,i){if(!r(t))return o(e,t,i);t=n(t,"gm");for(var a,s=1,l=i.line,u=e.lastLine();l<=u;){for(var c=0;c<s&&!(l>u);c++){var d=e.getLine(l++);a=null==a?d:a+"\n"+d}s*=2,t.lastIndex=i.ch;var f=t.exec(a);if(f){var h=a.slice(0,f.index).split("\n"),p=f[0].split("\n"),g=i.line+h.length-1,v=h[h.length-1].length;return{from:m(g,v),to:m(g+p.length-1,1==p.length?v+p[0].length:p[p.length-1].length),match:f}}}}function a(e,t){for(var n,r=0;;){t.lastIndex=r;var o=t.exec(e);if(!o)return n;if(n=o,(r=n.index+(n[0].length||1))==e.length)return n}}function s(e,t,r){t=n(t,"g");for(var o=r.line,i=r.ch,s=e.firstLine();o>=s;o--,i=-1){var l=e.getLine(o);i>-1&&(l=l.slice(0,i));var u=a(l,t);if(u)return{from:m(o,u.index),to:m(o,u.index+u[0].length),match:u}}}function l(e,t,r){t=n(t,"gm");for(var o,i=1,s=r.line,l=e.firstLine();s>=l;){for(var u=0;u<i;u++){var c=e.getLine(s--);o=null==o?c.slice(0,r.ch):c+"\n"+o}i*=2;var d=a(o,t);if(d){var f=o.slice(0,d.index).split("\n"),h=d[0].split("\n"),p=s+f.length,g=f[f.length-1].length;return{from:m(p,g),to:m(p+h.length-1,1==h.length?g+h[0].length:h[h.length-1].length),match:d}}}}function u(e,t,n,r){if(e.length==t.length)return n;for(var o=0,i=n+Math.max(0,e.length-t.length);;){if(o==i)return o;var a=o+i>>1,s=r(e.slice(0,a)).length;if(s==n)return a;s>n?i=a:o=a+1}}function c(e,t,n,r){if(!t.length)return null;var o=r?h:p,i=o(t).split(/\r|\n\r?/);e:for(var a=n.line,s=n.ch,l=e.lastLine()+1-i.length;a<=l;a++,s=0){var c=e.getLine(a).slice(s),d=o(c);if(1==i.length){var f=d.indexOf(i[0]);if(-1==f)continue e;var n=u(c,d,f,o)+s;return{from:m(a,u(c,d,f,o)+s),to:m(a,u(c,d,f+i[0].length,o)+s)}}var g=d.length-i[0].length;if(d.slice(g)==i[0]){for(var v=1;v<i.length-1;v++)if(o(e.getLine(a+v))!=i[v])continue e;var b=e.getLine(a+i.length-1),y=o(b),w=i[i.length-1];if(y.slice(0,w.length)==w)return{from:m(a,u(c,d,g,o)+s),to:m(a+i.length-1,u(b,y,w.length,o))}}}}function d(e,t,n,r){if(!t.length)return null;var o=r?h:p,i=o(t).split(/\r|\n\r?/);e:for(var a=n.line,s=n.ch,l=e.firstLine()-1+i.length;a>=l;a--,s=-1){var c=e.getLine(a);s>-1&&(c=c.slice(0,s));var d=o(c);if(1==i.length){var f=d.lastIndexOf(i[0]);if(-1==f)continue e;return{from:m(a,u(c,d,f,o)),to:m(a,u(c,d,f+i[0].length,o))}}var g=i[i.length-1];if(d.slice(0,g.length)==g){for(var v=1,n=a-i.length+1;v<i.length-1;v++)if(o(e.getLine(n+v))!=i[v])continue e;var b=e.getLine(a+1-i.length),y=o(b);if(y.slice(y.length-i[0].length)==i[0])return{from:m(a+1-i.length,u(b,y,b.length-i[0].length,o)),to:m(a,u(c,d,g.length,o))}}}}function f(e,t,r,a){this.atOccurrence=!1,this.doc=e,r=r?e.clipPos(r):m(0,0),this.pos={from:r,to:r};var u;"object"==typeof a?u=a.caseFold:(u=a,a=null),"string"==typeof t?(null==u&&(u=!1),this.matches=function(n,r){return(n?d:c)(e,t,r,u)}):(t=n(t,"gm"),a&&!1===a.multiline?this.matches=function(n,r){return(n?s:o)(e,t,r)}:this.matches=function(n,r){return(n?l:i)(e,t,r)})}var h,p,m=e.Pos;String.prototype.normalize?(h=function(e){return e.normalize("NFD").toLowerCase()},p=function(e){return e.normalize("NFD")}):(h=function(e){return e.toLowerCase()},p=function(e){return e}),f.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(t){for(var n=this.matches(t,this.doc.clipPos(t?this.pos.from:this.pos.to));n&&0==e.cmpPos(n.from,n.to);)t?n.from.ch?n.from=m(n.from.line,n.from.ch-1):n=n.from.line==this.doc.firstLine()?null:this.matches(t,this.doc.clipPos(m(n.from.line-1))):n.to.ch<this.doc.getLine(n.to.line).length?n.to=m(n.to.line,n.to.ch+1):n=n.to.line==this.doc.lastLine()?null:this.matches(t,m(n.to.line+1,0));if(n)return this.pos=n,this.atOccurrence=!0,this.pos.match||!0;var r=m(t?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:r,to:r},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(t,n){if(this.atOccurrence){var r=e.splitLines(t);this.doc.replaceRange(r,this.pos.from,this.pos.to,n),this.pos.to=m(this.pos.from.line+r.length-1,r[r.length-1].length+(1==r.length?this.pos.from.ch:0))}}},e.defineExtension("getSearchCursor",function(e,t,n){return new f(this.doc,e,t,n)}),e.defineDocExtension("getSearchCursor",function(e,t,n){return new f(this,e,t,n)}),e.defineExtension("selectMatches",function(t,n){for(var r=[],o=this.getSearchCursor(t,this.getCursor("from"),n);o.findNext()&&!(e.cmpPos(o.to(),this.getCursor("to"))>0);)r.push({anchor:o.from(),head:o.to()});r.length&&this.setSelections(r,0)})})},1984:function(e,t,n){!function(e){e(n(1147))}(function(e){"use strict";function t(e){e.state.markedSelection&&e.operation(function(){a(e)})}function n(e){e.state.markedSelection&&e.state.markedSelection.length&&e.operation(function(){o(e)})}function r(e,t,n,r){if(0!=u(t,n))for(var o=e.state.markedSelection,i=e.state.markedSelectionStyle,a=t.line;;){var c=a==t.line?t:l(a,0),d=a+s,f=d>=n.line,h=f?n:l(d,0),p=e.markText(c,h,{className:i});if(null==r?o.push(p):o.splice(r++,0,p),f)break;a=d}}function o(e){for(var t=e.state.markedSelection,n=0;n<t.length;++n)t[n].clear();t.length=0}function i(e){o(e);for(var t=e.listSelections(),n=0;n<t.length;n++)r(e,t[n].from(),t[n].to())}function a(e){if(!e.somethingSelected())return o(e);if(e.listSelections().length>1)return i(e);var t=e.getCursor("start"),n=e.getCursor("end"),a=e.state.markedSelection;if(!a.length)return r(e,t,n);var l=a[0].find(),c=a[a.length-1].find();if(!l||!c||n.line-t.line<=s||u(t,c.to)>=0||u(n,l.from)<=0)return i(e);for(;u(t,l.from)>0;)a.shift().clear(),l=a[0].find();for(u(t,l.from)<0&&(l.to.line-t.line<s?(a.shift().clear(),r(e,t,l.to,0)):r(e,t,l.from,0));u(n,c.to)<0;)a.pop().clear(),c=a[a.length-1].find();u(n,c.to)>0&&(n.line-c.from.line<s?(a.pop().clear(),r(e,c.from,n)):r(e,c.to,n))}e.defineOption("styleSelectedText",!1,function(r,a,s){var l=s&&s!=e.Init;a&&!l?(r.state.markedSelection=[],r.state.markedSelectionStyle="string"==typeof a?a:"CodeMirror-selectedtext",i(r),r.on("cursorActivity",t),r.on("change",n)):!a&&l&&(r.off("cursorActivity",t),r.off("change",n),o(r),r.state.markedSelection=r.state.markedSelectionStyle=null)});var s=8,l=e.Pos,u=e.cmpPos})},1985:function(e,t,n){!function(e){e(n(1147),n(1823),n(1822))}(function(e){"use strict";var t=/^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\.beep|\.lwz|\.xpc|\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\.beeps?|xmpp|xri|ymsgr|z39\.50[rs]?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?\xab\xbb\u201c\u201d\u2018\u2019]))/i;e.defineMode("gfm",function(n,r){function o(e){return e.code=!1,null}var i=0,a={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(e){return{code:e.code,codeBlock:e.codeBlock,ateSpace:e.ateSpace}},token:function(e,n){if(n.combineTokens=null,n.codeBlock)return e.match(/^```+/)?(n.codeBlock=!1,null):(e.skipToEnd(),null);if(e.sol()&&(n.code=!1),e.sol()&&e.match(/^```+/))return e.skipToEnd(),n.codeBlock=!0,null;if("`"===e.peek()){e.next();var o=e.pos;e.eatWhile("`");var a=1+e.pos-o;return n.code?a===i&&(n.code=!1):(i=a,n.code=!0),null}if(n.code)return e.next(),null;if(e.eatSpace())return n.ateSpace=!0,null;if((e.sol()||n.ateSpace)&&(n.ateSpace=!1,!1!==r.gitHubSpice)){if(e.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?=.{0,6}\d)(?:[a-f0-9]{7,40}\b)/))return n.combineTokens=!0,"link";if(e.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/))return n.combineTokens=!0,"link"}return e.match(t)&&"]("!=e.string.slice(e.start-2,e.start)&&(0==e.start||/\W/.test(e.string.charAt(e.start-1)))?(n.combineTokens=!0,"link"):(e.next(),null)},blankLine:o},s={taskLists:!0,strikethrough:!0,emoji:!0};for(var l in r)s[l]=r[l];return s.name="markdown",e.overlayMode(e.getMode(n,s),a)},"markdown"),e.defineMIME("text/x-gfm","gfm")})},1986:function(e,t,n){!function(e){e(n(1147))}(function(e){"use strict";e.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp","cs"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded Javascript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90","f95"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history).md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"text/jinja2",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb","wl","wls"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m"],alias:["objective-c","objc"]},{name:"Objective-C++",mime:"text/x-objectivec++",mode:"clike",ext:["mm"],alias:["objective-c++","objc++"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PostgreSQL",mime:"text/x-pgsql",mode:"sql"},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki ",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]}];for(var t=0;t<e.modeInfo.length;t++){var n=e.modeInfo[t];n.mimes&&(n.mime=n.mimes[0])}e.findModeByMIME=function(t){t=t.toLowerCase();for(var n=0;n<e.modeInfo.length;n++){var r=e.modeInfo[n];if(r.mime==t)return r;if(r.mimes)for(var o=0;o<r.mimes.length;o++)if(r.mimes[o]==t)return r}return/\+xml$/.test(t)?e.findModeByMIME("application/xml"):/\+json$/.test(t)?e.findModeByMIME("application/json"):void 0},e.findModeByExtension=function(t){for(var n=0;n<e.modeInfo.length;n++){var r=e.modeInfo[n];if(r.ext)for(var o=0;o<r.ext.length;o++)if(r.ext[o]==t)return r}},e.findModeByFileName=function(t){for(var n=0;n<e.modeInfo.length;n++){var r=e.modeInfo[n];if(r.file&&r.file.test(t))return r}var o=t.lastIndexOf("."),i=o>-1&&t.substring(o+1,t.length);if(i)return e.findModeByExtension(i)},e.findModeByName=function(t){t=t.toLowerCase();for(var n=0;n<e.modeInfo.length;n++){var r=e.modeInfo[n];if(r.name.toLowerCase()==t)return r;if(r.alias)for(var o=0;o<r.alias.length;o++)if(r.alias[o].toLowerCase()==t)return r}}})},1987:function(e,t,n){n(1992),e.exports=n(10).Number.isSafeInteger},1988:function(e,t,n){n(1993);var r=n(10).Object;e.exports=function(e,t){return r.create(e,t)}},1989:function(e,t,n){n(1994),e.exports=n(10).Object.freeze},1990:function(e,t,n){n(1995);var r=n(10).Object;e.exports=function(e,t){return r.getOwnPropertyDescriptor(e,t)}},1991:function(e,t,n){n(1996),e.exports=n(10).Object.getPrototypeOf},1992:function(e,t,n){var r=n(21),o=n(409),i=Math.abs;r(r.S,"Number",{isSafeInteger:function(e){return o(e)&&i(e)<=9007199254740991}})},1993:function(e,t,n){var r=n(21);r(r.S,"Object",{create:n(170)})},1994:function(e,t,n){var r=n(32),o=n(103).onFreeze;n(406)("freeze",function(e){return function(t){return e&&r(t)?e(o(t)):t}})},1995:function(e,t,n){var r=n(70),o=n(252).f;n(406)("getOwnPropertyDescriptor",function(){return function(e,t){return o(r(e),t)}})},1996:function(e,t,n){var r=n(86),o=n(410);n(406)("getPrototypeOf",function(){return function(e){return o(r(e))}})},2067:function(e,t,n){var r=n(1147);r.commands.tabAndIndentMarkdownList=function(e){var t=e.listSelections(),n=t[0].head;if(!1!==e.getStateAfter(n.line).list)return void e.execCommand("indentMore");if(e.options.indentWithTabs)e.execCommand("insertTab");else{var r=Array(e.options.tabSize+1).join(" ");e.replaceSelection(r)}},r.commands.shiftTabAndUnindentMarkdownList=function(e){var t=e.listSelections(),n=t[0].head;if(!1!==e.getStateAfter(n.line).list)return void e.execCommand("indentLess");if(e.options.indentWithTabs)e.execCommand("insertTab");else{var r=Array(e.options.tabSize+1).join(" ");e.replaceSelection(r)}}},2068:function(e,t,n){"use strict";function r(e){for(var t;null!==(t=G.exec(e));){var n=t[0];if(-1===n.indexOf("target=")){var r=n.replace(/>$/,' target="_blank">');e=e.replace(n,r)}}return e}function o(e){return e=K?e.replace("Ctrl","Cmd"):e.replace("Cmd","Ctrl")}function i(e,t,n){e=e||{};var r=document.createElement("button");r.className=e.name,r.setAttribute("type","button"),t=void 0==t||t,e.name&&e.name in n&&(X[e.name]=e.action),e.title&&t&&(r.title=s(e.title,e.action,n),K&&(r.title=r.title.replace("Ctrl","\u2318"),r.title=r.title.replace("Alt","\u2325"))),e.noDisable&&r.classList.add("no-disable"),e.noMobile&&r.classList.add("no-mobile");for(var o=e.className.split(" "),i=[],a=0;a<o.length;a++){var l=o[a];l.match(/^fa([srlb]|(-[\w-]*)|$)/)?i.push(l):r.classList.add(l)}r.tabIndex=-1;for(var u=document.createElement("i"),c=0;c<i.length;c++){var d=i[c];u.classList.add(d)}return r.appendChild(u),r}function a(){var e=document.createElement("i");return e.className="separator",e.innerHTML="|",e}function s(e,t,n){var r,i=e;return t&&(r=J(t),n[r]&&(i+=" ("+o(n[r])+")")),i}function l(e,t){t=t||e.getCursor("start");var n=e.getTokenAt(t);if(!n.type)return{};for(var r,o,i=n.type.split(" "),a={},s=0;s<i.length;s++)r=i[s],"strong"===r?a.bold=!0:"variable-2"===r?(o=e.getLine(t.line),/^\s*\d+\.\s/.test(o)?a["ordered-list"]=!0:a["unordered-list"]=!0):"atom"===r?a.quote=!0:"em"===r?a.italic=!0:"quote"===r?a.quote=!0:"strikethrough"===r?a.strikethrough=!0:"comment"===r?a.code=!0:"link"===r?a.link=!0:"tag"===r?a.image=!0:r.match(/^header(-[1-6])?$/)&&(a[r.replace("header","heading")]=!0);return a}function u(e){var t=e.codemirror;t.setOption("fullScreen",!t.getOption("fullScreen")),t.getOption("fullScreen")?(Z=document.body.style.overflow,document.body.style.overflow="hidden"):document.body.style.overflow=Z;var n=t.getWrapperElement();if(/fullscreen/.test(n.previousSibling.className)?n.previousSibling.className=n.previousSibling.className.replace(/\s*fullscreen\b/,""):n.previousSibling.className+=" fullscreen",e.toolbarElements&&e.toolbarElements.fullscreen){var r=e.toolbarElements.fullscreen;/active/.test(r.className)?r.className=r.className.replace(/\s*active\s*/g,""):r.className+=" active"}/editor-preview-active-side/.test(t.getWrapperElement().nextSibling.className)&&D(e),e.options.onToggleFullScreen&&e.options.onToggleFullScreen(t.getOption("fullScreen")||!1)}function c(e){I(e,"bold",e.options.blockStyles.bold)}function d(e){I(e,"italic",e.options.blockStyles.italic)}function f(e){I(e,"strikethrough","~~")}function h(e){function t(e){if("object"!=typeof e)throw"fencing_line() takes a 'line' object (not a line number, or line text).  Got: "+typeof e+": "+e;return e.styles&&e.styles[2]&&-1!==e.styles[2].indexOf("formatting-code-block")}function n(e){return e.state.base.base||e.state.base}function r(e,r,o,i,a){o=o||e.getLineHandle(r),i=i||e.getTokenAt({line:r,ch:1}),a=a||!!o.text&&e.getTokenAt({line:r,ch:o.text.length-1});var s=i.type?i.type.split(" "):[];return a&&n(a).indentedCode?"indented":-1!==s.indexOf("comment")&&(n(i).fencedChars||n(a).fencedChars||t(o)?"fenced":"single")}var o,i,a,s=e.options.blockStyles.code,l=e.codemirror,u=l.getCursor("start"),c=l.getCursor("end"),d=l.getTokenAt({line:u.line,ch:u.ch||1}),f=l.getLineHandle(u.line),h=r(l,u.line,f,d);if("single"===h){var p=f.text.slice(0,u.ch).replace("`",""),m=f.text.slice(u.ch).replace("`","");l.replaceRange(p+m,{line:u.line,ch:0},{line:u.line,ch:99999999999999}),u.ch--,u!==c&&c.ch--,l.setSelection(u,c),l.focus()}else if("fenced"===h)if(u.line!==c.line||u.ch!==c.ch){for(o=u.line;o>=0&&(f=l.getLineHandle(o),!t(f));o--);var g,v,b,y,w=l.getTokenAt({line:o,ch:1}),x=n(w).fencedChars;t(l.getLineHandle(u.line))?(g="",v=u.line):t(l.getLineHandle(u.line-1))?(g="",v=u.line-1):(g=x+"\n",v=u.line),t(l.getLineHandle(c.line))?(b="",y=c.line,0===c.ch&&(y+=1)):0!==c.ch&&t(l.getLineHandle(c.line+1))?(b="",y=c.line+1):(b=x+"\n",y=c.line+1),0===c.ch&&(y-=1),l.operation(function(){l.replaceRange(b,{line:y,ch:0},{line:y+(b?0:1),ch:0}),l.replaceRange(g,{line:v,ch:0},{line:v+(g?0:1),ch:0})}),l.setSelection({line:v+(g?1:0),ch:0},{line:y+(g?1:-1),ch:0}),l.focus()}else{var C=u.line;if(t(l.getLineHandle(u.line))&&("fenced"===r(l,u.line+1)?(o=u.line,C=u.line+1):(i=u.line,C=u.line-1)),void 0===o)for(o=C;o>=0&&(f=l.getLineHandle(o),!t(f));o--);if(void 0===i)for(a=l.lineCount(),i=C;i<a&&(f=l.getLineHandle(i),!t(f));i++);l.operation(function(){l.replaceRange("",{line:o,ch:0},{line:o+1,ch:0}),l.replaceRange("",{line:i-1,ch:0},{line:i,ch:0})}),l.focus()}else if("indented"===h){if(u.line!==c.line||u.ch!==c.ch)o=u.line,i=c.line,0===c.ch&&i--;else{for(o=u.line;o>=0;o--)if(f=l.getLineHandle(o),!f.text.match(/^\s*$/)&&"indented"!==r(l,o,f)){o+=1;break}for(a=l.lineCount(),i=u.line;i<a;i++)if(f=l.getLineHandle(i),!f.text.match(/^\s*$/)&&"indented"!==r(l,i,f)){i-=1;break}}var k=l.getLineHandle(i+1),N=k&&l.getTokenAt({line:i+1,ch:k.text.length-1}),_=N&&n(N).indentedCode;_&&l.replaceRange("\n",{line:i+1,ch:0});for(var S=o;S<=i;S++)l.indentLine(S,"subtract");l.focus()}else{var T=u.line===c.line&&u.ch===c.ch&&0===u.ch,E=u.line!==c.line;T||E?function(e,t,n,r){var o=t.line+1,i=n.line+1,a=t.line!==n.line,s=r+"\n",l="\n"+r;a&&i++,a&&0===n.ch&&(l=r+"\n",i--),M(e,!1,[s,l]),e.setSelection({line:o,ch:0},{line:i,ch:0})}(l,u,c,s):M(l,!1,["`","`"])}}function p(e){L(e.codemirror,"quote")}function m(e){P(e.codemirror,"smaller")}function g(e){P(e.codemirror,"bigger")}function v(e){P(e.codemirror,void 0,1)}function b(e){P(e.codemirror,void 0,2)}function y(e){P(e.codemirror,void 0,3)}function w(e){L(e.codemirror,"unordered-list")}function x(e){L(e.codemirror,"ordered-list")}function C(e){j(e.codemirror)}function k(e){var t=e.codemirror,n=l(t),r=e.options,o="https://";if(r.promptURLs&&!(o=prompt(r.promptTexts.link,"https://")))return!1;M(t,n.link,r.insertTexts.link,o)}function N(e){var t=e.codemirror,n=l(t),r=e.options,o="https://";if(r.promptURLs&&!(o=prompt(r.promptTexts.image,"https://")))return!1;M(t,n.image,r.insertTexts.image,o)}function _(e){e.openBrowseFileWindow()}function S(e,t){var n=e.codemirror,r=l(n),o=e.options,i=t.substr(t.lastIndexOf("/")+1);M(n,r.image,o.insertTexts.uploadedImage,t),e.updateStatusBar("upload-image",e.options.imageTexts.sbOnUploaded.replace("#image_name#",i)),setTimeout(function(){e.updateStatusBar("upload-image",e.options.imageTexts.sbInit)},1e3)}function T(e){var t=e.codemirror,n=l(t),r=e.options;M(t,n.table,r.insertTexts.table)}function E(e){var t=e.codemirror,n=l(t),r=e.options;M(t,n.image,r.insertTexts.horizontalRule)}function O(e){var t=e.codemirror;t.undo(),t.focus()}function A(e){var t=e.codemirror;t.redo(),t.focus()}function D(e){var t=e.codemirror,n=t.getWrapperElement(),r=n.nextSibling,o=e.toolbarElements&&e.toolbarElements["side-by-side"],i=!1;/editor-preview-active-side/.test(r.className)?(r.className=r.className.replace(/\s*editor-preview-active-side\s*/g,""),o&&(o.className=o.className.replace(/\s*active\s*/g,"")),n.className=n.className.replace(/\s*CodeMirror-sided\s*/g," ")):(setTimeout(function(){t.getOption("fullScreen")||u(e),r.className+=" editor-preview-active-side"},1),o&&(o.className+=" active"),n.className+=" CodeMirror-sided",i=!0);var a=n.lastChild;if(/editor-preview-active/.test(a.className)){a.className=a.className.replace(/\s*editor-preview-active\s*/g,"");var s=e.toolbarElements.preview,l=n.previousSibling;s.className=s.className.replace(/\s*active\s*/g,""),l.className=l.className.replace(/\s*disabled-for-preview*/g,"")}var c=function(){var t=e.options.previewRender(e.value(),r);null!=t&&(r.innerHTML=t)};if(t.sideBySideRenderingFunction||(t.sideBySideRenderingFunction=c),i){var d=e.options.previewRender(e.value(),r);null!=d&&(r.innerHTML=d),t.on("update",t.sideBySideRenderingFunction)}else t.off("update",t.sideBySideRenderingFunction);t.refresh()}function R(e){var t=e.codemirror,n=t.getWrapperElement(),r=n.previousSibling,o=!!e.options.toolbar&&e.toolbarElements.preview,i=n.lastChild;if(!i||!/editor-preview-full/.test(i.className)){if(i=document.createElement("div"),i.className="editor-preview-full",e.options.previewClass)if(Array.isArray(e.options.previewClass))for(var a=0;a<e.options.previewClass.length;a++)i.className+=" "+e.options.previewClass[a];else"string"==typeof e.options.previewClass&&(i.className+=" "+e.options.previewClass);n.appendChild(i)}/editor-preview-active/.test(i.className)?(i.className=i.className.replace(/\s*editor-preview-active\s*/g,""),o&&(o.className=o.className.replace(/\s*active\s*/g,""),r.className=r.className.replace(/\s*disabled-for-preview*/g,""))):(setTimeout(function(){i.className+=" editor-preview-active"},1),o&&(o.className+=" active",r.className+=" disabled-for-preview")),i.innerHTML=e.options.previewRender(e.value(),i),/editor-preview-active-side/.test(t.getWrapperElement().nextSibling.className)&&D(e)}function M(e,t,n,r){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)){var o,i=n[0],a=n[1],s={},l={};Object.assign(s,e.getCursor("start")),Object.assign(l,e.getCursor("end")),r&&(i=i.replace("#url#",r),a=a.replace("#url#",r)),t?(o=e.getLine(s.line),i=o.slice(0,s.ch),a=o.slice(s.ch),e.replaceRange(i+a,{line:s.line,ch:0})):(o=e.getSelection(),e.replaceSelection(i+o+a),s.ch+=i.length,s!==l&&(l.ch+=i.length)),e.setSelection(s,l),e.focus()}}function P(e,t,n){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)){for(var r=e.getCursor("start"),o=e.getCursor("end"),i=r.line;i<=o.line;i++)!function(r){var o=e.getLine(r),i=o.search(/[^#]/);o=void 0!==t?i<=0?"bigger"==t?"###### "+o:"# "+o:6==i&&"smaller"==t?o.substr(7):1==i&&"bigger"==t?o.substr(2):"bigger"==t?o.substr(1):"#"+o:1==n?i<=0?"# "+o:i==n?o.substr(i+1):"# "+o.substr(i+1):2==n?i<=0?"## "+o:i==n?o.substr(i+1):"## "+o.substr(i+1):i<=0?"### "+o:i==n?o.substr(i+1):"### "+o.substr(i+1),e.replaceRange(o,{line:r,ch:0},{line:r,ch:99999999999999})}(i);e.focus()}}function L(e,t){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)){for(var n=/^(\s*)(\*|-|\+|\d*\.)(\s+)/,r=/^\s*/,o=l(e),i=e.getCursor("start"),a=e.getCursor("end"),s={quote:/^(\s*)>\s+/,"unordered-list":n,"ordered-list":n},u=function(e,t){return{quote:">","unordered-list":"*","ordered-list":"%%i."}[e].replace("%%i",t)},c=function(e,t){var n={quote:">","unordered-list":"*","ordered-list":"\\d+."},r=new RegExp(n[e]);return t&&r.test(t)},d=function(e,t,o){var i=n.exec(t),a=u(e,f);return null!==i?(c(e,i[2])&&(a=""),t=i[1]+a+i[3]+t.replace(r,"").replace(s[e],"$1")):0==o&&(t=a+" "+t),t},f=1,h=i.line;h<=a.line;h++)!function(n){var r=e.getLine(n);o[t]?r=r.replace(s[t],"$1"):("unordered-list"==t&&(r=d("ordered-list",r,!0)),r=d(t,r,!1),f+=1),e.replaceRange(r,{line:n,ch:0},{line:n,ch:99999999999999})}(h);e.focus()}}function I(e,t,n,r){if(!/editor-preview-active/.test(e.codemirror.getWrapperElement().lastChild.className)){r=void 0===r?n:r;var o,i=e.codemirror,a=l(i),s=n,u=r,c=i.getCursor("start"),d=i.getCursor("end");a[t]?(o=i.getLine(c.line),s=o.slice(0,c.ch),u=o.slice(c.ch),"bold"==t?(s=s.replace(/(\*\*|__)(?![\s\S]*(\*\*|__))/,""),u=u.replace(/(\*\*|__)/,"")):"italic"==t?(s=s.replace(/(\*|_)(?![\s\S]*(\*|_))/,""),u=u.replace(/(\*|_)/,"")):"strikethrough"==t&&(s=s.replace(/(\*\*|~~)(?![\s\S]*(\*\*|~~))/,""),u=u.replace(/(\*\*|~~)/,"")),i.replaceRange(s+u,{line:c.line,ch:0},{line:c.line,ch:99999999999999}),"bold"==t||"strikethrough"==t?(c.ch-=2,c!==d&&(d.ch-=2)):"italic"==t&&(c.ch-=1,c!==d&&(d.ch-=1))):(o=i.getSelection(),"bold"==t?(o=o.split("**").join(""),o=o.split("__").join("")):"italic"==t?(o=o.split("*").join(""),o=o.split("_").join("")):"strikethrough"==t&&(o=o.split("~~").join("")),i.replaceSelection(s+o+u),c.ch+=n.length,d.ch=c.ch+o.length),i.setSelection(c,d),i.focus()}}function j(e){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className))for(var t,n=e.getCursor("start"),r=e.getCursor("end"),o=n.line;o<=r.line;o++)t=e.getLine(o),t=t.replace(/^[ ]*([# ]+|\*|-|[> ]+|[0-9]+(.|\)))[ ]*/,""),e.replaceRange(t,{line:o,ch:0},{line:o,ch:99999999999999})}function B(e,t){if(Math.abs(e)<1024)return""+e+t[0];var n=0;do{e/=1024,++n}while(Math.abs(e)>=1024&&n<t.length);return""+e.toFixed(1)+t[n]}function F(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]instanceof Array?e[n]=t[n].concat(e[n]instanceof Array?e[n]:[]):null!==t[n]&&"object"==typeof t[n]&&t[n].constructor===Object?e[n]=F(e[n]||{},t[n]):e[n]=t[n]);return e}function H(e){for(var t=1;t<arguments.length;t++)e=F(e,arguments[t]);return e}function U(e){var t=/[a-zA-Z0-9_\u00A0-\u02AF\u0392-\u03c9\u0410-\u04F9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g,n=e.match(t),r=0;if(null===n)return r;for(var o=0;o<n.length;o++)n[o].charCodeAt(0)>=19968?r+=n[o].length:r+=1;return r}function z(e){e=e||{},e.parent=this;var t=!0;if(!1===e.autoDownloadFontAwesome&&(t=!1),!0!==e.autoDownloadFontAwesome)for(var n=document.styleSheets,r=0;r<n.length;r++)n[r].href&&n[r].href.indexOf("//maxcdn.bootstrapcdn.com/font-awesome/")>-1&&(t=!1);if(t){var o=document.createElement("link");o.rel="stylesheet",o.href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css",document.getElementsByTagName("head")[0].appendChild(o)}if(e.element)this.element=e.element;else if(null===e.element)return void console.log("EasyMDE: Error. No element was found.");if(void 0===e.toolbar){e.toolbar=[];for(var i in ee)Object.prototype.hasOwnProperty.call(ee,i)&&(-1!=i.indexOf("separator-")&&e.toolbar.push("|"),(!0===ee[i].default||e.showIcons&&e.showIcons.constructor===Array&&-1!=e.showIcons.indexOf(i))&&e.toolbar.push(i))}if(Object.prototype.hasOwnProperty.call(e,"previewClass")||(e.previewClass="editor-preview"),Object.prototype.hasOwnProperty.call(e,"status")||(e.status=["autosave","lines","words","cursor"],e.uploadImage&&e.status.unshift("upload-image")),e.previewRender||(e.previewRender=function(e){return this.parent.markdown(e)}),e.parsingConfig=H({highlightFormatting:!0},e.parsingConfig||{}),e.insertTexts=H({},te,e.insertTexts||{}),e.promptTexts=H({},ne,e.promptTexts||{}),e.blockStyles=H({},re,e.blockStyles||{}),e.shortcuts=H({},Y,e.shortcuts||{}),e.minHeight=e.minHeight||"300px",e.errorCallback=e.errorCallback||function(e){alert(e)},e.uploadImage=e.uploadImage||!1,e.imageMaxSize=e.imageMaxSize||2097152,e.imageAccept=e.imageAccept||"image/png, image/jpeg",e.imageTexts=H({},oe,e.imageTexts||{}),e.errorMessages=H({},ie,e.errorMessages||{}),void 0!=e.autosave&&void 0!=e.autosave.unique_id&&""!=e.autosave.unique_id&&(e.autosave.uniqueId=e.autosave.unique_id),this.options=e,this.render(),!e.initialValue||this.options.autosave&&!0===this.options.autosave.foundSavedValue||this.value(e.initialValue),e.uploadImage){var a=this;this.codemirror.on("dragenter",function(e,t){a.updateStatusBar("upload-image",a.options.imageTexts.sbOnDragEnter),t.stopPropagation(),t.preventDefault()}),this.codemirror.on("dragend",function(e,t){a.updateStatusBar("upload-image",a.options.imageTexts.sbInit),t.stopPropagation(),t.preventDefault()}),this.codemirror.on("dragleave",function(e,t){a.updateStatusBar("upload-image",a.options.imageTexts.sbInit),t.stopPropagation(),t.preventDefault()}),this.codemirror.on("dragover",function(e,t){a.updateStatusBar("upload-image",a.options.imageTexts.sbOnDragEnter),t.stopPropagation(),t.preventDefault()}),this.codemirror.on("drop",function(t,n){n.stopPropagation(),n.preventDefault(),e.imageUploadFunction?a.uploadImagesUsingCustomFunction(e.imageUploadFunction,n.dataTransfer.files):a.uploadImages(n.dataTransfer.files)}),this.codemirror.on("paste",function(t,n){e.imageUploadFunction?a.uploadImagesUsingCustomFunction(e.imageUploadFunction,n.clipboardData.files):a.uploadImages(n.clipboardData.files)})}}function W(){if("object"!=typeof localStorage)return!1;try{localStorage.setItem("smde_localStorage",1),localStorage.removeItem("smde_localStorage")}catch(e){return!1}return!0}var V=n(1147);n(1982),n(2067),n(1980),n(1823),n(1822),n(1981),n(1984),n(1983),n(1985),n(1824);var q=n(1979),$=n(1702),K=/Mac/.test(navigator.platform),G=new RegExp(/(<a.*?https?:\/\/.*?[^a]>)+?/g),X={toggleBold:c,toggleItalic:d,drawLink:k,toggleHeadingSmaller:m,toggleHeadingBigger:g,drawImage:N,toggleBlockquote:p,toggleOrderedList:x,toggleUnorderedList:w,toggleCodeBlock:h,togglePreview:R,toggleStrikethrough:f,toggleHeading1:v,toggleHeading2:b,toggleHeading3:y,cleanBlock:C,drawTable:T,drawHorizontalRule:E,undo:O,redo:A,toggleSideBySide:D,toggleFullScreen:u},Y={toggleBold:"Cmd-B",toggleItalic:"Cmd-I",drawLink:"Cmd-K",toggleHeadingSmaller:"Cmd-H",toggleHeadingBigger:"Shift-Cmd-H",cleanBlock:"Cmd-E",drawImage:"Cmd-Alt-I",toggleBlockquote:"Cmd-'",toggleOrderedList:"Cmd-Alt-L",toggleUnorderedList:"Cmd-L",toggleCodeBlock:"Cmd-Alt-C",togglePreview:"Cmd-P",toggleSideBySide:"F9",toggleFullScreen:"F11"},J=function(e){for(var t in X)if(X[t]===e)return t;return null},Q=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},Z="",ee={bold:{name:"bold",action:c,className:"fa fa-bold",title:"Bold",default:!0},italic:{name:"italic",action:d,className:"fa fa-italic",title:"Italic",default:!0},strikethrough:{name:"strikethrough",action:f,className:"fa fa-strikethrough",title:"Strikethrough"},heading:{name:"heading",action:m,className:"fa fa-header fa-heading",title:"Heading",default:!0},"heading-smaller":{name:"heading-smaller",action:m,className:"fa fa-header fa-heading header-smaller",title:"Smaller Heading"},"heading-bigger":{name:"heading-bigger",action:g,className:"fa fa-header fa-heading header-bigger",title:"Bigger Heading"},"heading-1":{name:"heading-1",action:v,className:"fa fa-header fa-heading header-1",title:"Big Heading"},"heading-2":{name:"heading-2",action:b,className:"fa fa-header fa-heading header-2",title:"Medium Heading"},"heading-3":{name:"heading-3",action:y,className:"fa fa-header fa-heading header-3",title:"Small Heading"},"separator-1":{name:"separator-1"},code:{name:"code",action:h,className:"fa fa-code",title:"Code"},quote:{name:"quote",action:p,className:"fa fa-quote-left",title:"Quote",default:!0},"unordered-list":{name:"unordered-list",action:w,className:"fa fa-list-ul",title:"Generic List",default:!0},"ordered-list":{name:"ordered-list",action:x,className:"fa fa-list-ol",title:"Numbered List",default:!0},"clean-block":{name:"clean-block",action:C,className:"fa fa-eraser",title:"Clean block"},"separator-2":{name:"separator-2"},link:{name:"link",action:k,className:"fa fa-link",title:"Create Link",default:!0},image:{name:"image",action:N,className:"fa fa-image",title:"Insert Image",default:!0},"upload-image":{name:"upload-image",action:_,className:"fa fa-image",title:"Import an image"},table:{name:"table",action:T,className:"fa fa-table",title:"Insert Table"},"horizontal-rule":{name:"horizontal-rule",action:E,className:"fa fa-minus",title:"Insert Horizontal Line"},"separator-3":{name:"separator-3"},preview:{name:"preview",action:R,className:"fa fa-eye",noDisable:!0,title:"Toggle Preview",default:!0},"side-by-side":{name:"side-by-side",action:D,className:"fa fa-columns",noDisable:!0,noMobile:!0,title:"Toggle Side by Side",default:!0},fullscreen:{name:"fullscreen",action:u,className:"fa fa-arrows-alt",noDisable:!0,noMobile:!0,title:"Toggle Fullscreen",default:!0},"separator-4":{name:"separator-4"},guide:{name:"guide",action:"https://www.markdownguide.org/basic-syntax/",className:"fa fa-question-circle",noDisable:!0,title:"Markdown Guide",default:!0},"separator-5":{name:"separator-5"},undo:{name:"undo",action:O,className:"fa fa-undo",noDisable:!0,title:"Undo"},redo:{name:"redo",action:A,className:"fa fa-repeat fa-redo",noDisable:!0,title:"Redo"}},te={link:["[","](#url#)"],image:["![](","#url#)"],uploadedImage:["![](#url#)",""],table:["","\n\n| Column 1 | Column 2 | Column 3 |\n| -------- | -------- | -------- |\n| Text     | Text     | Text     |\n\n"],horizontalRule:["","\n\n-----\n\n"]},ne={link:"URL for the link:",image:"URL of the image:"},re={bold:"**",code:"```",italic:"*"},oe={sbInit:"Attach files by drag and dropping or pasting from clipboard.",sbOnDragEnter:"Drop image to upload it.",sbOnDrop:"Uploading image #images_names#...",sbProgress:"Uploading #file_name#: #progress#%",sbOnUploaded:"Uploaded #image_name#",sizeUnits:"b,Kb,Mb"},ie={noFileGiven:"You must select a file.",typeNotAllowed:"This image type is not allowed.",fileTooLarge:"Image #image_name# is too big (#image_size#).\nMaximum file size is #image_max_size#.",importError:"Something went wrong when uploading the image #image_name#."};z.prototype.uploadImages=function(e,t,n){if(0!==e.length){for(var r=[],o=0;o<e.length;o++)r.push(e[o].name),this.uploadImage(e[o],t,n);this.updateStatusBar("upload-image",this.options.imageTexts.sbOnDrop.replace("#images_names#",r.join(", ")))}},z.prototype.uploadImagesUsingCustomFunction=function(e,t){if(0!==t.length){for(var n=[],r=0;r<t.length;r++)n.push(t[r].name),this.uploadImageUsingCustomFunction(e,t[r]);this.updateStatusBar("upload-image",this.options.imageTexts.sbOnDrop.replace("#images_names#",n.join(", ")))}},z.prototype.updateStatusBar=function(e,t){var n=this.gui.statusbar.getElementsByClassName(e);1===n.length?this.gui.statusbar.getElementsByClassName(e)[0].textContent=t:0===n.length?console.log("EasyMDE: status bar item "+e+" was not found."):console.log("EasyMDE: Several status bar items named "+e+" was found.")},z.prototype.markdown=function(e){if($){var t;if(t=this.options&&this.options.renderingConfig&&this.options.renderingConfig.markedOptions?this.options.renderingConfig.markedOptions:{},this.options&&this.options.renderingConfig&&!1===this.options.renderingConfig.singleLineBreaks?t.breaks=!1:t.breaks=!0,this.options&&this.options.renderingConfig&&!0===this.options.renderingConfig.codeSyntaxHighlighting){var n=this.options.renderingConfig.hljs||window.hljs;n&&(t.highlight=function(e){return n.highlightAuto(e).value})}$.setOptions(t);var o=$(e);return o=r(o)}},z.prototype.render=function(e){function t(e,t,n){return{addNew:!1}}if(e||(e=this.element||document.getElementsByTagName("textarea")[0]),!this._rendered||this._rendered!==e){this.element=e;var n=this.options,r=this,i={};for(var a in n.shortcuts)null!==n.shortcuts[a]&&null!==X[a]&&function(e){i[o(n.shortcuts[e])]=function(){var t=X[e];"function"==typeof t?t(r):"string"==typeof t&&window.open(t,"_blank")}}(a);i.Enter="newlineAndIndentContinueMarkdownList",i.Tab="tabAndIndentMarkdownList",i["Shift-Tab"]="shiftTabAndUnindentMarkdownList",i.Esc=function(e){e.getOption("fullScreen")&&u(r)},document.addEventListener("keydown",function(e){e=e||window.event,27==e.keyCode&&r.codemirror.getOption("fullScreen")&&u(r)},!1);var s,l;if(!1!==n.spellChecker?(s="spell-checker",l=n.parsingConfig,l.name="gfm",l.gitHubSpice=!1,q({codeMirrorInstance:V})):(s=n.parsingConfig,s.name="gfm",s.gitHubSpice=!1),this.codemirror=V.fromTextArea(e,{mode:s,backdrop:l,theme:void 0!=n.theme?n.theme:"easymde",tabSize:void 0!=n.tabSize?n.tabSize:2,indentUnit:void 0!=n.tabSize?n.tabSize:2,indentWithTabs:!1!==n.indentWithTabs,lineNumbers:!1,autofocus:!0===n.autofocus,extraKeys:i,lineWrapping:!1!==n.lineWrapping,allowDropFileTypes:["text/plain"],placeholder:n.placeholder||e.getAttribute("placeholder")||"",styleSelectedText:void 0!=n.styleSelectedText?n.styleSelectedText:!Q(),configureMouse:t}),this.codemirror.getScrollerElement().style.minHeight=n.minHeight,!0===n.forceSync){var c=this.codemirror;c.on("change",function(){c.save()})}this.gui={},!1!==n.toolbar&&(this.gui.toolbar=this.createToolbar()),!1!==n.status&&(this.gui.statusbar=this.createStatusbar()),void 0!=n.autosave&&!0===n.autosave.enabled&&this.autosave(),this.gui.sideBySide=this.createSideBySide(),this._rendered=this.element;var d=this.codemirror;setTimeout(function(){d.refresh()}.bind(d),0)}},z.prototype.autosave=function(){if(W()){var e=this;if(void 0==this.options.autosave.uniqueId||""==this.options.autosave.uniqueId)return void console.log("EasyMDE: You must set a uniqueId to use the autosave feature");!0!==this.options.autosave.binded&&(null!=e.element.form&&void 0!=e.element.form&&e.element.form.addEventListener("submit",function(){clearTimeout(e.autosaveTimeoutId),e.autosaveTimeoutId=void 0,localStorage.removeItem("smde_"+e.options.autosave.uniqueId),setTimeout(function(){e.autosave()},e.options.autosave.delay||1e4)}),this.options.autosave.binded=!0),!0!==this.options.autosave.loaded&&("string"==typeof localStorage.getItem("smde_"+this.options.autosave.uniqueId)&&""!=localStorage.getItem("smde_"+this.options.autosave.uniqueId)&&(this.codemirror.setValue(localStorage.getItem("smde_"+this.options.autosave.uniqueId)),this.options.autosave.foundSavedValue=!0),this.options.autosave.loaded=!0),localStorage.setItem("smde_"+this.options.autosave.uniqueId,e.value());var t=document.getElementById("autosaved");if(null!=t&&void 0!=t&&""!=t){var n=new Date,r=n.getHours(),o=n.getMinutes(),i="am",a=r;a>=12&&(a=r-12,i="pm"),0==a&&(a=12),o=o<10?"0"+o:o,t.innerHTML="Autosaved: "+a+":"+o+" "+i}this.autosaveTimeoutId=setTimeout(function(){e.autosave()},this.options.autosave.delay||1e4)}else console.log("EasyMDE: localStorage not available, cannot autosave")},z.prototype.clearAutosavedValue=function(){if(W()){if(void 0==this.options.autosave||void 0==this.options.autosave.uniqueId||""==this.options.autosave.uniqueId)return void console.log("EasyMDE: You must set a uniqueId to clear the autosave value");localStorage.removeItem("smde_"+this.options.autosave.uniqueId)}else console.log("EasyMDE: localStorage not available, cannot autosave")},z.prototype.openBrowseFileWindow=function(e,t){function n(i){r.options.imageUploadFunction?r.uploadImagesUsingCustomFunction(r.options.imageUploadFunction,i.target.files):r.uploadImages(i.target.files,e,t),o.removeEventListener("change",n)}var r=this,o=this.gui.toolbar.getElementsByClassName("imageInput")[0];o.click(),o.addEventListener("change",n)},z.prototype.uploadImage=function(e,t,n){function r(e){i.updateStatusBar("upload-image",e),setTimeout(function(){i.updateStatusBar("upload-image",i.options.imageTexts.sbInit)},1e4),n&&"function"==typeof n&&n(e),i.options.errorCallback(e)}function o(t){var n=i.options.imageTexts.sizeUnits.split(",");return t.replace("#image_name#",e.name).replace("#image_size#",B(e.size,n)).replace("#image_max_size#",B(i.options.imageMaxSize,n))}var i=this;if(t=t||function(e){S(i,e)},e.size>this.options.imageMaxSize)return void r(o(this.options.errorMessages.fileTooLarge));var a=new FormData;a.append("image",e),i.options.imageCSRFToken&&a.append("csrfmiddlewaretoken",i.options.imageCSRFToken);var s=new XMLHttpRequest;s.upload.onprogress=function(t){if(t.lengthComputable){var n=""+Math.round(100*t.loaded/t.total);i.updateStatusBar("upload-image",i.options.imageTexts.sbProgress.replace("#file_name#",e.name).replace("#progress#",n))}},s.open("POST",this.options.imageUploadEndpoint),s.onload=function(){try{var e=JSON.parse(this.responseText)}catch(e){return console.error("EasyMDE: The server did not return a valid json."),void r(o(i.options.errorMessages.importError))}200===this.status&&e&&!e.error&&e.data&&e.data.filePath?t(window.location.origin+"/"+e.data.filePath):e.error&&e.error in i.options.errorMessages?r(o(i.options.errorMessages[e.error])):e.error?r(o(e.error)):(console.error("EasyMDE: Received an unexpected response after uploading the image."+this.status+" ("+this.statusText+")"),r(o(i.options.errorMessages.importError)))},s.onerror=function(e){console.error("EasyMDE: An unexpected error occurred when trying to upload the image."+e.target.status+" ("+e.target.statusText+")"),r(i.options.errorMessages.importError)},s.send(a)},z.prototype.uploadImageUsingCustomFunction=function(e,t){function n(e){S(i,e)}function r(e){var t=o(e);i.updateStatusBar("upload-image",t),setTimeout(function(){i.updateStatusBar("upload-image",i.options.imageTexts.sbInit)},1e4),i.options.errorCallback(t)}function o(e){var n=i.options.imageTexts.sizeUnits.split(",");return e.replace("#image_name#",t.name).replace("#image_size#",B(t.size,n)).replace("#image_max_size#",B(i.options.imageMaxSize,n))}var i=this;e(t,n,r)},z.prototype.createSideBySide=function(){var e=this.codemirror,t=e.getWrapperElement(),n=t.nextSibling;if(!n||!/editor-preview-side/.test(n.className)){if(n=document.createElement("div"),n.className="editor-preview-side",this.options.previewClass)if(Array.isArray(this.options.previewClass))for(var r=0;r<this.options.previewClass.length;r++)n.className+=" "+this.options.previewClass[r];else"string"==typeof this.options.previewClass&&(n.className+=" "+this.options.previewClass);t.parentNode.insertBefore(n,t.nextSibling)}if(!1===this.options.syncSideBySidePreviewScroll)return n;var o=!1,i=!1;return e.on("scroll",function(e){if(o)return void(o=!1);i=!0;var t=e.getScrollInfo().height-e.getScrollInfo().clientHeight,r=parseFloat(e.getScrollInfo().top)/t,a=(n.scrollHeight-n.clientHeight)*r;n.scrollTop=a}),n.onscroll=function(){if(i)return void(i=!1);o=!0;var t=n.scrollHeight-n.clientHeight,r=parseFloat(n.scrollTop)/t,a=(e.getScrollInfo().height-e.getScrollInfo().clientHeight)*r;e.scrollTo(0,a)},n},z.prototype.createToolbar=function(e){if((e=e||this.options.toolbar)&&0!==e.length){var t;for(t=0;t<e.length;t++)void 0!=ee[e[t]]&&(e[t]=ee[e[t]]);var n=document.createElement("div");n.className="editor-toolbar";var r=this,o={};for(r.toolbar=e,t=0;t<e.length;t++)if(("guide"!=e[t].name||!1!==r.options.toolbarGuideIcon)&&!(r.options.hideIcons&&-1!=r.options.hideIcons.indexOf(e[t].name)||("fullscreen"==e[t].name||"side-by-side"==e[t].name)&&Q())){if("|"===e[t]){for(var s=!1,u=t+1;u<e.length;u++)"|"===e[u]||r.options.hideIcons&&-1!=r.options.hideIcons.indexOf(e[u].name)||(s=!0);if(!s)continue}!function(e){var t;if(t="|"===e?a():i(e,r.options.toolbarTips,r.options.shortcuts),e.action&&("function"==typeof e.action?t.onclick=function(t){t.preventDefault(),e.action(r)}:"string"==typeof e.action&&(t.onclick=function(t){t.preventDefault(),window.open(e.action,"_blank")})),o[e.name||e]=t,n.appendChild(t),"upload-image"===e.name){var s=document.createElement("input");s.className="imageInput",s.type="file",s.multiple=!0,s.name="image",s.accept=r.options.imageAccept,s.style.display="none",s.style.opacity=0,n.appendChild(s)}}(e[t])}r.toolbarElements=o;var c=this.codemirror;c.on("cursorActivity",function(){var e=l(c);for(var t in o)!function(t){var n=o[t];e[t]?n.className+=" active":"fullscreen"!=t&&"side-by-side"!=t&&(n.className=n.className.replace(/\s*active\s*/g,""))}(t)});var d=c.getWrapperElement();return d.parentNode.insertBefore(n,d),n}},z.prototype.createStatusbar=function(e){e=e||this.options.status;var t=this.options,n=this.codemirror;if(e&&0!==e.length){var r,o,i,a=[];for(r=0;r<e.length;r++)if(o=void 0,i=void 0,"object"==typeof e[r])a.push({className:e[r].className,defaultValue:e[r].defaultValue,onUpdate:e[r].onUpdate});else{var s=e[r];"words"===s?(i=function(e){e.innerHTML=U(n.getValue())},o=function(e){e.innerHTML=U(n.getValue())}):"lines"===s?(i=function(e){e.innerHTML=n.lineCount()},o=function(e){e.innerHTML=n.lineCount()}):"cursor"===s?(i=function(e){e.innerHTML="0:0"},o=function(e){var t=n.getCursor();e.innerHTML=t.line+":"+t.ch}):"autosave"===s?i=function(e){void 0!=t.autosave&&!0===t.autosave.enabled&&e.setAttribute("id","autosaved")}:"upload-image"===s&&(i=function(e){e.innerHTML=t.imageTexts.sbInit}),a.push({className:s,defaultValue:i,onUpdate:o})}var l=document.createElement("div");for(l.className="editor-statusbar",r=0;r<a.length;r++){var u=a[r],c=document.createElement("span");c.className=u.className,"function"==typeof u.defaultValue&&u.defaultValue(c),"function"==typeof u.onUpdate&&this.codemirror.on("update",function(e,t){return function(){t.onUpdate(e)}}(c,u)),l.appendChild(c)}var d=this.codemirror.getWrapperElement();return d.parentNode.insertBefore(l,d.nextSibling),l}},z.prototype.value=function(e){var t=this.codemirror;if(void 0===e)return t.getValue();if(t.getDoc().setValue(e),this.isPreviewActive()){var n=t.getWrapperElement(),r=n.lastChild;r.innerHTML=this.options.previewRender(e,r)}return this},z.toggleBold=c,z.toggleItalic=d,z.toggleStrikethrough=f,z.toggleBlockquote=p,z.toggleHeadingSmaller=m,z.toggleHeadingBigger=g,z.toggleHeading1=v,z.toggleHeading2=b,z.toggleHeading3=y,z.toggleCodeBlock=h,z.toggleUnorderedList=w,z.toggleOrderedList=x,z.cleanBlock=C,z.drawLink=k,z.drawImage=N,z.drawTable=T,z.drawHorizontalRule=E,z.undo=O,z.redo=A,z.togglePreview=R,z.toggleSideBySide=D,z.toggleFullScreen=u,z.prototype.toggleBold=function(){c(this)},z.prototype.toggleItalic=function(){d(this)},z.prototype.toggleStrikethrough=function(){f(this)},z.prototype.toggleBlockquote=function(){p(this)},z.prototype.toggleHeadingSmaller=function(){m(this)},z.prototype.toggleHeadingBigger=function(){g(this)},z.prototype.toggleHeading1=function(){v(this)},z.prototype.toggleHeading2=function(){b(this)},z.prototype.toggleHeading3=function(){y(this)},z.prototype.toggleCodeBlock=function(){h(this)},z.prototype.toggleUnorderedList=function(){w(this)},z.prototype.toggleOrderedList=function(){x(this)},z.prototype.cleanBlock=function(){C(this)},z.prototype.drawLink=function(){k(this)},z.prototype.drawImage=function(){N(this)},z.prototype.drawTable=function(){T(this)},z.prototype.drawHorizontalRule=function(){E(this)},z.prototype.undo=function(){O(this)},z.prototype.redo=function(){A(this)},z.prototype.togglePreview=function(){R(this)},z.prototype.toggleSideBySide=function(){D(this)},z.prototype.toggleFullScreen=function(){u(this)},z.prototype.isPreviewActive=function(){return/editor-preview-active/.test(this.codemirror.getWrapperElement().lastChild.className)},z.prototype.isSideBySideActive=function(){return/editor-preview-active-side/.test(this.codemirror.getWrapperElement().nextSibling.className)},z.prototype.isFullscreenActive=function(){return this.codemirror.getOption("fullScreen")},z.prototype.getState=function(){return l(this.codemirror)},z.prototype.toTextArea=function(){var e=this.codemirror,t=e.getWrapperElement();t.parentNode&&(this.gui.toolbar&&t.parentNode.removeChild(this.gui.toolbar),this.gui.statusbar&&t.parentNode.removeChild(this.gui.statusbar),this.gui.sideBySide&&t.parentNode.removeChild(this.gui.sideBySide)),e.toTextArea(),this.autosaveTimeoutId&&(clearTimeout(this.autosaveTimeoutId),this.autosaveTimeoutId=void 0,this.clearAutosavedValue())},e.exports=z},2069:function(e,t,n){"use strict";function r(e){console&&console.warn&&console.warn(e)}function o(){o.init.call(this)}function i(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function a(e,t,n,o){var a,s,l;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(s=e._events,void 0===s?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),l=s[t]),void 0===l)l=s[t]=n,++e._eventsCount;else if("function"==typeof l?l=s[t]=o?[n,l]:[l,n]:o?l.unshift(n):l.push(n),(a=i(e))>0&&l.length>a&&!l.warned){l.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=l.length,r(u)}return e}function s(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,g(this.listener,this.target,e))}function l(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=s.bind(r);return o.listener=n,r.wrapFn=o,o}function u(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?h(o):d(o,o.length)}function c(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function d(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function f(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function h(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}var p,m="object"==typeof Reflect?Reflect:null,g=m&&"function"==typeof m.apply?m.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};p=m&&"function"==typeof m.ownKeys?m.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var v=Number.isNaN||function(e){return e!==e};e.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var b=10;Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return b},set:function(e){if("number"!=typeof e||e<0||v(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");b=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||v(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return i(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var a=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw a.context=i,a}var s=o[e];if(void 0===s)return!1;if("function"==typeof s)g(s,this,t);else for(var l=s.length,u=d(s,l),n=0;n<l;++n)g(u[n],this,t);return!0},o.prototype.addListener=function(e,t){return a(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return a(this,e,t,!0)},o.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,l(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,l(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,o,i,a;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){a=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():f(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return u(this,e,!0)},o.prototype.rawListeners=function(e){return u(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):c.call(e,t)},o.prototype.listenerCount=c,o.prototype.eventNames=function(){return this._eventsCount>0?p(this._events):[]}},2140:function(e,t,n){e.exports=n.p+"plugins/codesample/css/prism.css"},2141:function(e,t,n){e.exports=n.p+"skins/lightgray/content.inline.min.css"},2142:function(e,t,n){e.exports=n.p+"skins/lightgray/content.min.css"},2143:function(e,t,n){e.exports=n.p+"skins/lightgray/content.mobile.min.css"},2144:function(e,t,n){e.exports=n.p+"skins/lightgray/fonts/tinymce-mobile.woff"},2145:function(e,t,n){e.exports=n.p+"skins/lightgray/fonts/tinymce-small.eot"},2146:function(e,t,n){e.exports=n.p+"skins/lightgray/fonts/tinymce-small.svg"},2147:function(e,t,n){e.exports=n.p+"skins/lightgray/fonts/tinymce-small.ttf"},2148:function(e,t,n){e.exports=n.p+"skins/lightgray/fonts/tinymce-small.woff"},2149:function(e,t,n){e.exports=n.p+"skins/lightgray/fonts/tinymce.eot"},2150:function(e,t,n){e.exports=n.p+"skins/lightgray/fonts/tinymce.svg"},2151:function(e,t,n){e.exports=n.p+"skins/lightgray/fonts/tinymce.ttf"},2152:function(e,t,n){e.exports=n.p+"skins/lightgray/fonts/tinymce.woff"},2153:function(e,t,n){e.exports=n.p+"skins/lightgray/img/anchor.gif"},2154:function(e,t,n){e.exports=n.p+"skins/lightgray/img/loader.gif"},2155:function(e,t,n){e.exports=n.p+"skins/lightgray/img/object.gif"},2156:function(e,t,n){e.exports=n.p+"skins/lightgray/img/trans.gif"},2157:function(e,t,n){e.exports=n.p+"skins/lightgray/skin.min.css"},2158:function(e,t,n){e.exports=n.p+"skins/lightgray/skin.mobile.min.css"},3052:function(e,t){e.exports='<div id="{{id}}" class="w-date-input">\n\t<div class="{{customWrapperClass}}">\n\t\t<div class="w-input-with-icons w-input-with-icons--left">\n\t\t\t<input type="text"\n\t\t\t\t   class="{{customInputClass}} form-control w-input-with-icons__input"\n\t\t\t\t   name="{{inputName}}"\n\t\t\t\t   data-bind="\n\t\t\t\t       dateInput: date,\n\t\t\t\t       dateInputOptions: dateInputOptions"\n\t\t\t\t   placeholder="{{ app.tl(\'No Date\') }}"\n\t\t\t\t   autocomplete="off">\n\t\t\t<div class="w-input-with-icons__icon w-input-with-icons__icon--left h-pointer-e--none" aria-hidden="true">\n\t\t\t\t<i class="fa fa-calendar"></i>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div data-bind="foreach: shortcuts, visible: displayShortcuts" class="w-date-input__shortcuts">\n\t\t\x3c!-- ko if: $data.condition == null || (typeof condition == \'function\' ? condition.call($component) : !!condition) --\x3e\n\t\t\t\x3c!-- ko if: $index() > 0 --\x3e|\x3c!-- /ko--\x3e\n\t\t\t\t<a\n\t\t\t\t\thref="javascript:void(0)"\n\t\t\t\t\tclass="w-date-input__shortcut w-date-input__shortcut-{{name}} inline-option-link"\n\t\t\t\t\tdata-bind="click: action.bind($component)"\n\t\t\t\t\ttitle="{{$data.title||null}}"\n\t\t\t\t>{{text}}</a>\n\t\t\x3c!-- /ko --\x3e\n\t</div>\n</div>\n'},3054:function(e,t){e.exports='<div class="w-duration-input" data-bind="{ css: { \'one-input\': useOneInput, \'hours-and-minutes\': !useOneInput }}">\n\t\x3c!-- ko if: useOneInput --\x3e\n\t\t<div class="w-duration-input__single">\n\t\t\t<input\n\t\t\t\tdata-bind="\n\t\t\t\t\tdurationInput: duration,\n\t\t\t\t\tevent: { keypress: OnKeyPress, keyup: OnKeyUp },\n\t\t\t\t\tattr: {\n\t\t\t\t\t\t\'data-tipped\': app.tl(\'You can enter time as [_s], [_s] or [_s]. We know they all mean [_s] hour and [_s] minutes.\', \'1.5\', \'1:30\', \'1h 30m\', \'1\', \'30\')\n\t\t\t\t\t}"\n\t\t\t\ttype="text"\n\t\t\t\tclass="tipped form-control"\n\t\t\t\tdata-tipped-options="skin: \'light\', maxWidth: 200, position: \'bottom\', showOn: \'click\'"\n\t\t\t\tautocomplete="off">\n\t\t</div>\n\t\x3c!-- /ko --\x3e\n\t\x3c!-- ko ifnot: useOneInput --\x3e\n\t\t<div class="form-content form-content--row w-duration-input__notsingle">\n\t\t\t<div class="form-group">\n\t\t\t\t<input class="form-control" data-bind="numberInput: hours, event: { focus: OnHoursFocus, blur: OnHoursBlur, keypress: OnKeyPress, keyup: OnKeyUp }" type="text">\n\t\t\t\t<small>{{app.tl(\'hours\')}}</small>\n\t\t\t</div>\n\t\t\t<div class="form-group">\n\t\t\t\t<input class="form-control" data-bind="numberInput: minutes, event: { focus: OnMinutesFocus, blur: OnMinutesBlur, keypress: OnKeyPress, keyup: OnKeyUp }" type="text">\n\t\t\t\t<small>{{app.tl(\'minutes\')}}</small>\n\t\t\t</div>\n\t\t</div>\n\t\x3c!-- /ko --\x3e\n</div>\n\n'},3055:function(e,t){e.exports="<div\n    class=\"w-easy-markdown-editor\"\n    data-bind=\"css: {\n\t\t'w-easy-markdown-editor--real-time-sync': realTimeSync,\n\t\t'w-easy-markdown-editor--draft-outdated': isDraftOutdated,\n\t\t'w-easy-markdown-editor--preview-active': $component.isPreviewActive\n    }\"\n>\n\t<div class=\"w-easy-markdown-editor__wrapper\"\n\t\tdata-bind=\"\n\t\t\teasymde: {\n\t\t\t\tapi: easyMDE,\n\t\t\t\tvalue: $component.content,\n\t\t\t\tplaceholder: $component.placeholder,\n\t\t\t\tautofocus: $component.autofocus,\n\t\t\t\ttoolbar: $component.toolbar,\n\t\t\t\tisPreviewActive: $component.isPreviewActive,\n\t\t\t\tdiscardDraftTooltip: $component.discardDraftTooltip,\n\t\t\t\tdiscardDraftOutdatedTooltip: $component.discardDraftOutdatedTooltip,\n\t\t\t\thasUnpublishedDraftChanges: $component.hasUnpublishedDraftChanges,\n\t\t\t\tisDraftOutdated: $component.isDraftOutdated,\n\t\t\t\tonDiscardDraft: $component.onDiscardDraft,\n\t\t\t\tonSave: $component.onSave\n\t\t\t}\"\n\t></div>\n\t\x3c!-- ko if: editorAdapter() && autocomplete --\x3e\n\t\t\x3c!-- ko component: {\n\t\t\tname: 'widget-tw-autocomplete',\n\t\t\tparams: {\n\t\t\t\teditorAdapter: editorAdapter(),\n\t\t\t\tmentions: autocomplete.mentions\n\t\t\t}\n\t\t} --\x3e\x3c!-- /ko --\x3e\n\t\x3c!-- /ko --\x3e\n</div>\n"},3108:function(e,t){e.exports="\x3c!-- ko component: {\n\tname: 'widget-easy-markdown-editor',\n\tparams: {\n\t\tcontent: koObservable,\n\t\tplaceholder: placeholder,\n\t\tautocomplete: autocomplete,\n\t\tautofocus: autofocus\n\t}\n} --\x3e\x3c!-- /ko --\x3e\n"},3248:function(e,t){e.exports='<div class="w-time-input w-input-with-icons w-input-with-icons--left h-pointer-e"\n\tdata-bind="tippedDelegate"\n\tdata-component="{ name: \'widget-timeMomentPicker\', params: { time: time } }"\n\tdata-tipped-options="skin: \'light\', showOn: \'click\', hideOn: false, hideOnClickOutside: true, hideOthers: true, position:\'bottom\'"\n\t>\n\t<input\n\t\ttype="text"\n\t\tclass="w-input-with-icons__input w-time-input__input form-control"\n\t\tdata-bind="timeInput: time, timeInputOptions:timeInputOptions" />\n\n\t<div class="h-pointer-e--none w-input-with-icons__icon w-input-with-icons__icon--left">\n\t\t\x3c!-- ko component: {\n\t\t\t\tname: \'ui-common-icon\',\n\t\t\t\tparams: {\n\t\t\t\t\tname: \'clock-regular\'\n\t\t\t\t}\n\t\t\t} --\x3e\n\t\t\x3c!-- /ko --\x3e\n\t</div>\n</div>'},3249:function(e,t){e.exports='<div class="timeMomentPicker">\n  <h4 data-bind="text: app.tl(\'Hour\')"></h4>\n  <section>\n    \x3c!-- ko foreach: hours --\x3e\n      \x3c!-- ko if: $data == 12 --\x3e<br>\x3c!-- /ko --\x3e\n      <a data-bind="text: $data === 0 &amp;&amp; $parent.showMeridian() ? 12 : $data, css: {selected: $data == $parent.hour()}, click: $parent.hour"></a>\n    \x3c!-- /ko --\x3e\n  </section>\n\n  <h4 data-bind="text: app.tl(\'Minute\')"></h4>\n  <section>\n    \x3c!-- ko foreach: minutes --\x3e\n      <a data-bind="text: $data, css: {selected: $data == $parent.minute()}, click: $parent.minute"></a>\n    \x3c!-- /ko --\x3e\n  </section>\n\n  \x3c!-- ko if: showMeridian() --\x3e\n    <section>\n      <a data-bind="click: isPM.bind($component, false), css: {selected: !isPM()}">AM</a>\n      <a data-bind="click: isPM.bind($component, true), css: {selected: isPM()}">PM</a>\n    </section>\n  \x3c!-- /ko --\x3e\n</div>\n\x3c!-- IMPORTANT - Mark this template loaded --\x3e\n\x3c!-- ko if: $data.readyToShow != null && readyToShow --\x3e\n    <div data-bind="template:{afterRender:function(){templateLoaded(true)}}" class="hidden"></div>\n\x3c!-- /ko --\x3e\n'},3250:function(e,t){e.exports='<div class="timeWidget">\n\t<h4 data-bind="text: app.tl(\'Hour\')"></h4>\n\t<div style="padding:3px 0 10px 0;border-bottom:1px dotted #D8D8D8;">\n\t\t\x3c!-- ko foreach: hours --\x3e\n\t\t\t<a data-bind="text: $data, css: {sel: $data == $parent.hour()}, click: $parent.SetHour" href="javascript:;"></a>\n\t\t\x3c!-- /ko --\x3e\n\t</div>\n\n\t<h4 data-bind="text: app.tl(\'Minute\')" style="margin-top:10px;"></h4>\n\t<div style="padding:3px 0 10px 0;border-bottom:1px dotted #D8D8D8;">\n\t\t\x3c!-- ko foreach: minutes --\x3e\n\t\t\t<a data-bind="text: $data, css: {sel: $data == $parent.minute()}, click: $parent.SetMinute" href="javascript:;"></a>\n\t\t\x3c!-- /ko --\x3e\n\t</div>\n\n\t<div style="margin-top:10px;padding:3px 0 10px 0;text-align:center;">\n\t\t<a data-bind="click: SetAM, css: {sel: !isPM()}" href="javascript:;">AM</a>\n\t\t<a data-bind="click: SetPM, css: {sel: isPM()}" href="javascript:;">PM</a>\n\t</div>\n</div>'},3251:function(e,t){e.exports='<div class="w-time-range">\n\t\x3c!-- ko if: allowEditStartDate --\x3e\n\t\t<div class="form-group">\n\t\t\t<label title="{{ startDateLabel }}">{{ startDateLabel }}</label>\n\t\t\t\x3c!-- ko component: {\n\t\t\t\tname: \'widget-dateInput\',\n\t\t\t\tparams:{\n\t\t\t\t\tdate: startDateUI,\n\t\t\t\t\tdateInputOptions: {\n\t\t\t\t\t\tmaxMoment:maxStartMoment,\n\t\t\t\t\t\tminMoment:minStartMoment\n\t\t\t\t\t},\n\t\t\t\t\tdisplayShortcuts: false\n\t\t\t\t}\n\t\t\t} --\x3e\x3c!-- /ko --\x3e\n\t\t</div>\n\t\t<div class="form-group">\n\t\t\t<label title="{{ startMomentLabel }}">{{ startMomentLabel }}</label>\n\t\t\t\x3c!-- ko component: { name: \'widget-timeInput\', params: { time: startMomentUI, timeInputOptions:{maxMoment:maxStartMoment, minMoment:minStartMoment} } } --\x3e\x3c!-- /ko --\x3e\n\t\t</div>\n\t\x3c!-- /ko --\x3e\n\t\x3c!-- ko if: allowEditEndDate --\x3e\n\t\t<div class="form-group mr--xlarge">\n\t\t\t<label title="{{ endMomentLabel }}">{{ endMomentLabel }}</label>\n\t\t\t<div class="form-group m--none">\n\t\t\t\t\x3c!-- ko component: { name: \'widget-timeInput\', params: { time: endMomentUI, timeInputOptions:{maxMoment:maxEndMoment, minMoment:minEndMoment} } } --\x3e\x3c!-- /ko --\x3e\n\t\t\t\t<div class="ml--medium" data-bind="visible: !startMoment().isSame(endMoment(), \'day\')">\n\t\t\t\t\t<span class="w-time-range__end-date">{{endMoment().format(dateFormat())}}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="form-group">\n\t\t\t<label title="{{ durationLabel }}">{{ durationLabel }}</label>\n\t\t\t\x3c!-- ko component: { name: \'widget-durationInput\', params: { duration: durationUI } } --\x3e\x3c!-- /ko --\x3e\n\t\t</div>\n\t\t<div class="form-group" data-bind="css: {\'is-locked\': durationLocked}">\n\t\t\t<button class="btn btn-clear form-btn" type="button" data-bind="click: OnClickToggleDurationLock">\n\t\t\t\t\x3c!-- ko if: durationLocked --\x3e\n\t\t\t\t\t<i class="fa fa-lock tipped" data-tipped="{{app.tl(\'Locked\')}}"></i>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t\t\x3c!-- ko ifnot: durationLocked --\x3e\n\t\t\t\t\t<i class="fa fa-unlock-alt tipped" data-tipped="{{app.tl(\'Unlocked\')}}"></i>\n\t\t\t\t\x3c!-- /ko --\x3e\n\t\t\t</button>\n\t\t</div>\n\t\x3c!-- /ko --\x3e\n</div>\n'},3293:function(e,t){e.exports='\x3c!-- ko if: avatarUrl || defaultImageUrl --\x3e\n\t<img\n\t\tclass="w-tw-autocomplete__list-item-image"\n\t\tdata-bind="\n\t\t\tattr: {\n\t\t\t\tsrc: avatarUrl,\n\t\t\t\tonerror: \'this.src = \\\'\' + defaultImageUrl + \'\\\'\'\n\t\t\t}\n\t\t"\n\t>\n\x3c!-- /ko --\x3e\n\n<span class="w-tw-autocomplete__list-item-title">\n\t{{nameParts.prefix}}<strong>{{nameParts.match}}</strong>{{nameParts.suffix}}\n</span>\n\n<span class="w-tw-autocomplete__list-item-handle">\n\t@{{mentionNameParts.prefix}}<strong>{{mentionNameParts.match}}</strong>{{mentionNameParts.suffix}}\n</span>\n'},3305:function(e,t){e.exports='<div class="widget-wysiwyg-editor" data-bind="attr:{id: uniqueId}, click: OnClickEditorContainer">\n\t<div class="wysiwyg-editor" data-bind="style:{visibility: !isReady() ? \'hidden\' : \'\'}, css: \'wysiwyg--\' + context">\n\t\t<textarea></textarea>\n\t</div>\n\t<div class="char-count" data-bind="visible: context===\'notebook\' && isReady()">\n\t\t{{charCount}}\n\t</div>\n</div>'},3308:function(e,t,n){function r(e){return n(o(e))}function o(e){var t=i[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var i={"./codesample/css/prism.css":2140};r.keys=function(){return Object.keys(i)},r.resolve=o,e.exports=r,r.id=3308},3309:function(e,t,n){n(3310)},3310:function(e,t){!function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.Env"),r=function(e){return e.getParam("autolink_pattern",/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i)},o=function(e){return e.getParam("default_link_target","")},i={getAutoLinkPattern:r,getDefaultLinkTarget:o},a=function(e,t){return e===t||" "===e||160===e.charCodeAt(0)},s=function(e){h(e,-1,"(")},l=function(e){h(e,0,"")},u=function(e){h(e,-1,"")},c=function(e,t){if(t<0&&(t=0),3===e.nodeType){var n=e.data.length;t>n&&(t=n)}return t},d=function(e,t,n){1!==t.nodeType||t.hasChildNodes()?e.setStart(t,c(t,n)):e.setStartBefore(t)},f=function(e,t,n){1!==t.nodeType||t.hasChildNodes()?e.setEnd(t,c(t,n)):e.setEndAfter(t)},h=function(e,t,n){var r,o,s,l,u,c,h,p,m,g,v=i.getAutoLinkPattern(e),b=i.getDefaultLinkTarget(e);if("A"!==e.selection.getNode().tagName){if(r=e.selection.getRng(!0).cloneRange(),r.startOffset<5){if(!(p=r.endContainer.previousSibling)){if(!r.endContainer.firstChild||!r.endContainer.firstChild.nextSibling)return;p=r.endContainer.firstChild.nextSibling}if(m=p.length,d(r,p,m),f(r,p,m),r.endOffset<5)return;o=r.endOffset,l=p}else{if(l=r.endContainer,3!==l.nodeType&&l.firstChild){for(;3!==l.nodeType&&l.firstChild;)l=l.firstChild;3===l.nodeType&&(d(r,l,0),f(r,l,l.nodeValue.length))}o=1===r.endOffset?2:r.endOffset-1-t}s=o;do{d(r,l,o>=2?o-2:0),f(r,l,o>=1?o-1:0),o-=1,g=r.toString()}while(" "!==g&&""!==g&&160!==g.charCodeAt(0)&&o-2>=0&&g!==n);a(r.toString(),n)?(d(r,l,o),f(r,l,s),o+=1):0===r.startOffset?(d(r,l,0),f(r,l,s)):(d(r,l,o),f(r,l,s)),c=r.toString(),"."===c.charAt(c.length-1)&&f(r,l,s-1),c=r.toString().trim(),h=c.match(v),h&&("www."===h[1]?h[1]="http://www.":/@$/.test(h[1])&&!/^mailto:/.test(h[1])&&(h[1]="mailto:"+h[1]),u=e.selection.getBookmark(),e.selection.setRng(r),e.execCommand("createlink",!1,h[1]+h[2]),b&&e.dom.setAttrib(e.selection.getNode(),"target",b),e.selection.moveToBookmark(u),e.nodeChanged())}},p=function(e){var t;if(e.on("keydown",function(t){if(13===t.keyCode)return u(e)}),n.ie)return void e.on("focus",function(){if(!t){t=!0;try{e.execCommand("AutoUrlDetect",!1,!0)}catch(e){}}});e.on("keypress",function(t){if(41===t.keyCode)return s(e)}),e.on("keyup",function(t){if(32===t.keyCode)return l(e)})},m={setup:p};t.add("autolink",function(e){m.setup(e)})}()}()},3311:function(e,t,n){n(3312)},3312:function(e,t){!function(){!function(){"use strict";function e(){}var t=function(e){var n=e,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return t(r())}}},n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=tinymce.util.Tools.resolve("tinymce.Env"),o=tinymce.util.Tools.resolve("tinymce.util.Delay"),i=function(e){return parseInt(e.getParam("autoresize_min_height",e.getElement().offsetHeight),10)},a=function(e){return parseInt(e.getParam("autoresize_max_height",0),10)},s=function(e){return e.getParam("autoresize_overflow_padding",1)},l=function(e){return e.getParam("autoresize_bottom_margin",50)},u=function(e){return e.getParam("autoresize_on_init",!0)},c={getAutoResizeMinHeight:i,getAutoResizeMaxHeight:a,getAutoResizeOverflowPadding:s,getAutoResizeBottomMargin:l,shouldAutoResizeOnInit:u},d=function(e){return e.plugins.fullscreen&&e.plugins.fullscreen.isFullscreen()},f=function(e,t,n,r,i){o.setEditorTimeout(e,function(){p(e,t),n--?f(e,t,n,r,i):i&&i()},r)},h=function(e,t){var n=e.getBody();n&&(n.style.overflowY=t?"":"hidden",t||(n.scrollTop=0))},p=function(e,t){var n,o,i,a,s,l,u,f,m,g,v,b=e.dom;if(o=e.getDoc()){if(d(e))return void h(e,!0);i=o.body,a=c.getAutoResizeMinHeight(e),l=b.getStyle(i,"margin-top",!0),u=b.getStyle(i,"margin-bottom",!0),f=b.getStyle(i,"padding-top",!0),m=b.getStyle(i,"padding-bottom",!0),g=b.getStyle(i,"border-top-width",!0),v=b.getStyle(i,"border-bottom-width",!0),s=i.offsetHeight+parseInt(l,10)+parseInt(u,10)+parseInt(f,10)+parseInt(m,10)+parseInt(g,10)+parseInt(v,10),(isNaN(s)||s<=0)&&(s=r.ie?i.scrollHeight:r.webkit&&0===i.clientHeight?0:i.offsetHeight),s>c.getAutoResizeMinHeight(e)&&(a=s);var y=c.getAutoResizeMaxHeight(e);y&&s>y?(a=y,h(e,!0)):h(e,!1),a!==t.get()&&(n=a-t.get(),b.setStyle(e.iframeElement,"height",a+"px"),t.set(a),r.webkit&&n<0&&p(e,t))}},m=function(e,t){e.on("init",function(){var t,n,r=e.dom;t=c.getAutoResizeOverflowPadding(e),n=c.getAutoResizeBottomMargin(e),!1!==t&&r.setStyles(e.getBody(),{paddingLeft:t,paddingRight:t}),!1!==n&&r.setStyles(e.getBody(),{paddingBottom:n})}),e.on("nodechange setcontent keyup FullscreenStateChanged",function(n){p(e,t)}),c.shouldAutoResizeOnInit(e)&&e.on("init",function(){f(e,t,20,100,function(){f(e,t,5,1e3)})})},g={setup:m,resize:p},v=function(e,t){e.addCommand("mceAutoResize",function(){g.resize(e,t)})},b={register:v};n.add("autoresize",function(e){if(!e.inline){var n=t(0);b.register(e,n),g.setup(e,n)}})}()}()},3313:function(e,t,n){n(3314)},3314:function(e,t){!function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),r=function(e){return e.getParam("code_dialog_width",600)},o=function(e){return e.getParam("code_dialog_height",Math.min(n.DOM.getViewPort().h-200,500))},i={getMinWidth:r,getMinHeight:o},a=function(e,t){e.focus(),e.undoManager.transact(function(){e.setContent(t)}),e.selection.setCursorLocation(),e.nodeChanged()},s=function(e){return e.getContent({source_view:!0})},l={setContent:a,getContent:s},u=function(e){var t=i.getMinWidth(e),n=i.getMinHeight(e);e.windowManager.open({title:"Source code",body:{type:"textbox",name:"code",multiline:!0,minWidth:t,minHeight:n,spellcheck:!1,style:"direction: ltr; text-align: left"},onSubmit:function(t){l.setContent(e,t.data.code)}}).find("#code").value(l.getContent(e))},c={open:u},d=function(e){e.addCommand("mceCodeEditor",function(){c.open(e)})},f={register:d},h=function(e){e.addButton("code",{icon:"code",tooltip:"Source code",onclick:function(){c.open(e)}}),e.addMenuItem("code",{icon:"code",text:"Source code",onclick:function(){c.open(e)}})},p={register:h};t.add("code",function(e){return f.register(e),p.register(e),{}})}()}()},3315:function(e,t,n){n(3316)},3316:function(e,t){!function(){!function(){"use strict";function e(e){return e&&"PRE"===e.nodeName&&-1!==e.className.indexOf("language-")}function t(e){return function(t,n){return e(n)}}function n(){}var r=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return r(n())}}},o=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),a=function(e){return e.settings.codesample_content_css},s=function(e){return e.settings.codesample_languages},l=function(e){return Math.min(i.DOM.getViewPort().w,e.getParam("codesample_dialog_width",800))},u=function(e){return Math.min(i.DOM.getViewPort().w,e.getParam("codesample_dialog_height",650))},c={getContentCss:a,getLanguages:s,getDialogMinWidth:l,getDialogMinHeight:u},d={},f=d,h=void 0!==d?d:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},p=function(){var e=/\blang(?:uage)?-(?!\*)(\w+)\b/i,t=h.Prism={util:{encode:function(e){return e instanceof n?new n(e.type,t.util.encode(e.content),e.alias):"Array"===t.util.type(e)?e.map(t.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},clone:function(e){switch(t.util.type(e)){case"Object":var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t.util.clone(e[r]));return n;case"Array":return e.map&&e.map(function(e){return t.util.clone(e)})}return e}},languages:{extend:function(e,n){var r=t.util.clone(t.languages[e]);for(var o in n)r[o]=n[o];return r},insertBefore:function(e,n,r,o){o=o||t.languages;var i=o[e];if(2===arguments.length){r=arguments[1];for(var a in r)r.hasOwnProperty(a)&&(i[a]=r[a]);return i}var s={};for(var l in i)if(i.hasOwnProperty(l)){if(l===n)for(var a in r)r.hasOwnProperty(a)&&(s[a]=r[a]);s[l]=i[l]}return t.languages.DFS(t.languages,function(t,n){n===o[e]&&t!==e&&(this[t]=s)}),o[e]=s},DFS:function(e,n,r){for(var o in e)e.hasOwnProperty(o)&&(n.call(e,o,e[o],r||o),"Object"===t.util.type(e[o])?t.languages.DFS(e[o],n):"Array"===t.util.type(e[o])&&t.languages.DFS(e[o],n,o))}},plugins:{},highlightAll:function(e,n){for(var r=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),o=0,i=void 0;i=r[o++];)t.highlightElement(i,!0===e,n)},highlightElement:function(n,r,o){for(var i,a,s=n;s&&!e.test(s.className);)s=s.parentNode;s&&(i=(s.className.match(e)||[,""])[1],a=t.languages[i]),n.className=n.className.replace(e,"").replace(/\s+/g," ")+" language-"+i,s=n.parentNode,/pre/i.test(s.nodeName)&&(s.className=s.className.replace(e,"").replace(/\s+/g," ")+" language-"+i);var l=n.textContent,u={element:n,language:i,grammar:a,code:l};if(!l||!a)return void t.hooks.run("complete",u);if(t.hooks.run("before-highlight",u),r&&h.Worker){var c=new Worker(t.filename);c.onmessage=function(e){u.highlightedCode=e.data,t.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,o&&o.call(u.element),t.hooks.run("after-highlight",u),t.hooks.run("complete",u)},c.postMessage(JSON.stringify({language:u.language,code:u.code,immediateClose:!0}))}else u.highlightedCode=t.highlight(u.code,u.grammar,u.language),t.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,o&&o.call(n),t.hooks.run("after-highlight",u),t.hooks.run("complete",u)},highlight:function(e,r,o){var i=t.tokenize(e,r);return n.stringify(t.util.encode(i),o)},tokenize:function(e,n,r){var o=t.Token,i=[e],a=n.rest;if(a){for(var s in a)n[s]=a[s];delete n.rest}e:for(var s in n)if(n.hasOwnProperty(s)&&n[s]){var l=n[s];l="Array"===t.util.type(l)?l:[l];for(var u=0;u<l.length;++u){var c=l[u],d=c.inside,f=!!c.lookbehind,h=0,p=c.alias;c=c.pattern||c;for(var m=0;m<i.length;m++){var g=i[m];if(i.length>e.length)break e;if(!(g instanceof o)){c.lastIndex=0;var v=c.exec(g);if(v){f&&(h=v[1].length);var b=v.index-1+h;v=v[0].slice(h);var y=v.length,w=b+y,x=g.slice(0,b+1),C=g.slice(w+1),k=[m,1];x&&k.push(x);var N=new o(s,d?t.tokenize(v,d):v,p);k.push(N),C&&k.push(C),Array.prototype.splice.apply(i,k)}}}}}return i},hooks:{all:{},add:function(e,n){var r=t.hooks.all;r[e]=r[e]||[],r[e].push(n)},run:function(e,n){var r=t.hooks.all[e];if(r&&r.length)for(var o=0,i=void 0;i=r[o++];)i(n)}}},n=t.Token=function(e,t,n){this.type=e,this.content=t,this.alias=n};if(n.stringify=function(e,r,o){if("string"==typeof e)return e;if("Array"===t.util.type(e))return e.map(function(t){return n.stringify(t,r,e)}).join("");var i={type:e.type,content:n.stringify(e.content,r,o),tag:"span",classes:["token",e.type],attributes:{},language:r,parent:o};if("comment"===i.type&&(i.attributes.spellcheck="true"),e.alias){var a="Array"===t.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(i.classes,a)}t.hooks.run("wrap",i);var s="";for(var l in i.attributes)s+=(s?" ":"")+l+'="'+(i.attributes[l]||"")+'"';return"<"+i.tag+' class="'+i.classes.join(" ")+'" '+s+">"+i.content+"</"+i.tag+">"},!h.document)return h.addEventListener?(h.addEventListener("message",function(e){var n=JSON.parse(e.data),r=n.language,o=n.code,i=n.immediateClose;h.postMessage(t.highlight(o,t.languages[r],r)),i&&h.close()},!1),h.Prism):h.Prism}();void 0!==f&&(f.Prism=p),p.languages.markup={comment:/<!--[\w\W]*?-->/,prolog:/<\?[\w\W]+?\?>/,doctype:/<!DOCTYPE[\w\W]+?>/,cdata:/<!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/<\/?[^\s>\/=.]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\\1|\\?(?!\1)[\w\W])*\1|[^\s'">=]+))?)*\s*\/?>/i,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/i,inside:{punctuation:/[=>"']/}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},p.hooks.add("wrap",function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))}),p.languages.xml=p.languages.markup,p.languages.html=p.languages.markup,p.languages.mathml=p.languages.markup,p.languages.svg=p.languages.markup,p.languages.css={comment:/\/\*[\w\W]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^\{\}\s][^\{\};]*?(?=\s*\{)/,string:/("|')(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1/,property:/(\b|\B)[\w-]+(?=\s*:)/i,important:/\B!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/},p.languages.css.atrule.inside.rest=p.util.clone(p.languages.css),p.languages.markup&&(p.languages.insertBefore("markup","tag",{style:{pattern:/<style[\w\W]*?>[\w\W]*?<\/style>/i,inside:{tag:{pattern:/<style[\w\W]*?>|<\/style>/i,inside:p.languages.markup.tag.inside},rest:p.languages.css},alias:"language-css"}}),p.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|').*?\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:p.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:p.languages.css}},alias:"language-css"}},p.languages.markup.tag)),p.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(true|false)\b/,function:/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},p.languages.javascript=p.languages.extend("clike",{keyword:/\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|false|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,function:/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i}),p.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0}}),p.languages.insertBefore("javascript","class-name",{"template-string":{pattern:/`(?:\\`|\\?[^`])*`/,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:p.languages.javascript}},string:/[\s\S]+/}}}),p.languages.markup&&p.languages.insertBefore("markup","tag",{script:{pattern:/<script[\w\W]*?>[\w\W]*?<\/script>/i,inside:{tag:{pattern:/<script[\w\W]*?>|<\/script>/i,inside:p.languages.markup.tag.inside},rest:p.languages.javascript},alias:"language-javascript"}}),p.languages.js=p.languages.javascript,p.languages.c=p.languages.extend("clike",{keyword:/\b(asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while)\b/,operator:/\-[>-]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|?\||[~^%?*\/]/,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)[ful]*\b/i}),p.languages.insertBefore("c","string",{macro:{pattern:/(^\s*)#\s*[a-z]+([^\r\n\\]|\\.|\\(?:\r\n?|\n))*/im,lookbehind:!0,alias:"property",inside:{string:{pattern:/(#\s*include\s*)(<.+?>|("|')(\\?.)+?\3)/,lookbehind:!0}}}}),delete p.languages.c["class-name"],delete p.languages.c.boolean,p.languages.csharp=p.languages.extend("clike",{keyword:/\b(abstract|as|async|await|base|bool|break|byte|case|catch|char|checked|class|const|continue|decimal|default|delegate|do|double|else|enum|event|explicit|extern|false|finally|fixed|float|for|foreach|goto|if|implicit|in|int|interface|internal|is|lock|long|namespace|new|null|object|operator|out|override|params|private|protected|public|readonly|ref|return|sbyte|sealed|short|sizeof|stackalloc|static|string|struct|switch|this|throw|true|try|typeof|uint|ulong|unchecked|unsafe|ushort|using|virtual|void|volatile|while|add|alias|ascending|async|await|descending|dynamic|from|get|global|group|into|join|let|orderby|partial|remove|select|set|value|var|where|yield)\b/,string:[/@("|')(\1\1|\\\1|\\?(?!\1)[\s\S])*\1/,/("|')(\\?.)*?\1/],number:/\b-?(0x[\da-f]+|\d*\.?\d+)\b/i}),p.languages.insertBefore("csharp","keyword",{preprocessor:{pattern:/(^\s*)#.*/m,lookbehind:!0}}),p.languages.cpp=p.languages.extend("c",{keyword:/\b(alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|class|compl|const|constexpr|const_cast|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|float|for|friend|goto|if|inline|int|long|mutable|namespace|new|noexcept|nullptr|operator|private|protected|public|register|reinterpret_cast|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,boolean:/\b(true|false)\b/,operator:/[-+]{1,2}|!=?|<{1,2}=?|>{1,2}=?|\->|:{1,2}|={1,2}|\^|~|%|&{1,2}|\|?\||\?|\*|\/|\b(and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/}),p.languages.insertBefore("cpp","keyword",{"class-name":{pattern:/(class\s+)[a-z0-9_]+/i,lookbehind:!0}}),p.languages.java=p.languages.extend("clike",{keyword:/\b(abstract|continue|for|new|switch|assert|default|goto|package|synchronized|boolean|do|if|private|this|break|double|implements|protected|throw|byte|else|import|public|throws|case|enum|instanceof|return|transient|catch|extends|int|short|try|char|final|interface|static|void|class|finally|long|strictfp|volatile|const|float|native|super|while)\b/,number:/\b0b[01]+\b|\b0x[\da-f]*\.?[\da-fp\-]+\b|\b\d*\.?\d+(?:e[+-]?\d+)?[df]?\b/i,operator:{pattern:/(^|[^.])(?:\+[+=]?|-[-=]?|!=?|<<?=?|>>?>?=?|==?|&[&=]?|\|[|=]?|\*=?|\/=?|%=?|\^=?|[?:~])/m,lookbehind:!0}}),p.languages.php=p.languages.extend("clike",{keyword:/\b(and|or|xor|array|as|break|case|cfunction|class|const|continue|declare|default|die|do|else|elseif|enddeclare|endfor|endforeach|endif|endswitch|endwhile|extends|for|foreach|function|include|include_once|global|if|new|return|static|switch|use|require|require_once|var|while|abstract|interface|public|implements|private|protected|parent|throw|null|echo|print|trait|namespace|final|yield|goto|instanceof|finally|try|catch)\b/i,constant:/\b[A-Z0-9_]{2,}\b/,comment:{pattern:/(^|[^\\])(?:\/\*[\w\W]*?\*\/|\/\/.*)/,lookbehind:!0}}),p.languages.insertBefore("php","class-name",{"shell-comment":{pattern:/(^|[^\\])#.*/,lookbehind:!0,alias:"comment"}}),p.languages.insertBefore("php","keyword",{delimiter:/\?>|<\?(?:php)?/i,variable:/\$\w+\b/i,package:{pattern:/(\\|namespace\s+|use\s+)[\w\\]+/,lookbehind:!0,inside:{punctuation:/\\/}}}),p.languages.insertBefore("php","operator",{property:{pattern:/(->)[\w]+/,lookbehind:!0}}),p.languages.markup&&(p.hooks.add("before-highlight",function(e){"php"===e.language&&(e.tokenStack=[],e.backupCode=e.code,e.code=e.code.replace(/(?:<\?php|<\?)[\w\W]*?(?:\?>)/gi,function(t){return e.tokenStack.push(t),"{{{PHP"+e.tokenStack.length+"}}}"}))}),p.hooks.add("before-insert",function(e){"php"===e.language&&(e.code=e.backupCode,delete e.backupCode)}),p.hooks.add("after-highlight",function(e){if("php"===e.language){for(var t=0,n=void 0;n=e.tokenStack[t];t++)e.highlightedCode=e.highlightedCode.replace("{{{PHP"+(t+1)+"}}}",p.highlight(n,e.grammar,"php").replace(/\$/g,"$$$$"));e.element.innerHTML=e.highlightedCode}}),p.hooks.add("wrap",function(e){"php"===e.language&&"markup"===e.type&&(e.content=e.content.replace(/(\{\{\{PHP[0-9]+\}\}\})/g,'<span class="token php">$1</span>'))}),p.languages.insertBefore("php","comment",{markup:{pattern:/<[^?]\/?(.*?)>/,inside:p.languages.markup},php:/\{\{\{PHP[0-9]+\}\}\}/})),p.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0},string:/"""[\s\S]+?"""|'''[\s\S]+?'''|("|')(?:\\?.)*?\1/,function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_][a-zA-Z0-9_]*(?=\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)[a-z0-9_]+/i,lookbehind:!0},keyword:/\b(?:as|assert|async|await|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|pass|print|raise|return|try|while|with|yield)\b/,boolean:/\b(?:True|False)\b/,number:/\b-?(?:0[bo])?(?:(?:\d|0x[\da-f])[\da-f]*\.?\d*|\.\d+)(?:e[+-]?\d+)?j?\b/i,operator:/[-+%=]=?|!=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]|\b(?:or|and|not)\b/,punctuation:/[{}[\];(),.:]/},function(e){e.languages.ruby=e.languages.extend("clike",{comment:/#(?!\{[^\r\n]*?\}).*/,keyword:/\b(alias|and|BEGIN|begin|break|case|class|def|define_method|defined|do|each|else|elsif|END|end|ensure|false|for|if|in|module|new|next|nil|not|or|raise|redo|require|rescue|retry|return|self|super|then|throw|true|undef|unless|until|when|while|yield)\b/});var t={pattern:/#\{[^}]+\}/,inside:{delimiter:{pattern:/^#\{|\}$/,alias:"tag"},rest:e.util.clone(e.languages.ruby)}};e.languages.insertBefore("ruby","keyword",{regex:[{pattern:/%r([^a-zA-Z0-9\s\{\(\[<])(?:[^\\]|\\[\s\S])*?\1[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\((?:[^()\\]|\\[\s\S])*\)[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\[(?:[^\[\]\\]|\\[\s\S])*\][gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r<(?:[^<>\\]|\\[\s\S])*>[gim]{0,3}/,inside:{interpolation:t}},{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0}],variable:/[@$]+[a-zA-Z_][a-zA-Z_0-9]*(?:[?!]|\b)/,symbol:/:[a-zA-Z_][a-zA-Z_0-9]*(?:[?!]|\b)/}),e.languages.insertBefore("ruby","number",{builtin:/\b(Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Stat|File|Fixnum|Fload|Hash|Integer|IO|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|String|Struct|TMS|Symbol|ThreadGroup|Thread|Time|TrueClass)\b/,constant:/\b[A-Z][a-zA-Z_0-9]*(?:[?!]|\b)/}),e.languages.ruby.string=[{pattern:/%[qQiIwWxs]?([^a-zA-Z0-9\s\{\(\[<])(?:[^\\]|\\[\s\S])*?\1/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\((?:[^()\\]|\\[\s\S])*\)/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\[(?:[^\[\]\\]|\\[\s\S])*\]/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?<(?:[^<>\\]|\\[\s\S])*>/,inside:{interpolation:t}},{pattern:/("|')(#\{[^}]+\}|\\(?:\r?\n|\r)|\\?.)*?\1/,inside:{interpolation:t}}]}(p);var m={isCodeSample:e,trimArg:t},g=function(e){var t=e.selection.getNode();return m.isCodeSample(t)?t:null},v=function(e,t,n){e.undoManager.transact(function(){var r=g(e);n=i.DOM.encode(n),r?(e.dom.setAttrib(r,"class","language-"+t),r.innerHTML=n,p.highlightElement(r),e.selection.select(r)):(e.insertContent('<pre id="__new" class="language-'+t+'">'+n+"</pre>"),e.selection.select(e.$("#__new").removeAttr("id")[0]))})},b=function(e){var t=g(e);return t?t.textContent:""},y={getSelectedCodeSample:g,insertCodeSample:v,getCurrentCode:b},w=function(e){var t=[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}],n=c.getLanguages(e);return n||t},x=function(e){var t,n=y.getSelectedCodeSample(e);return n?(t=n.className.match(/language-(\w+)/),t?t[1]:""):""},C={getLanguages:w,getCurrentLanguage:x},k={open:function(e){var t=c.getDialogMinWidth(e),n=c.getDialogMinHeight(e),r=C.getCurrentLanguage(e),o=C.getLanguages(e),i=y.getCurrentCode(e);e.windowManager.open({title:"Insert/Edit code sample",minWidth:t,minHeight:n,layout:"flex",direction:"column",align:"stretch",body:[{type:"listbox",name:"language",label:"Language",maxWidth:200,value:r,values:o},{type:"textbox",name:"code",multiline:!0,spellcheck:!1,ariaLabel:"Code view",flex:1,style:"direction: ltr; text-align: left",classes:"monospace",value:i,autofocus:!0}],onSubmit:function(t){y.insertCodeSample(e,t.data.language,t.data.code)}})}},N=function(e){e.addCommand("codesample",function(){var t=e.selection.getNode();e.selection.isCollapsed()||m.isCodeSample(t)?k.open(e):e.formatter.toggle("code")})},_={register:N},S=function(e){var t=e.$;e.on("PreProcess",function(e){t("pre[contenteditable=false]",e.node).filter(m.trimArg(m.isCodeSample)).each(function(e,n){var r=t(n),o=n.textContent;r.attr("class",t.trim(r.attr("class"))),r.removeAttr("contentEditable"),r.empty().append(t("<code></code>").each(function(){this.textContent=o}))})}),e.on("SetContent",function(){var n=t("pre").filter(m.trimArg(m.isCodeSample)).filter(function(e,t){return"false"!==t.contentEditable});n.length&&e.undoManager.transact(function(){n.each(function(n,r){t(r).find("br").each(function(t,n){n.parentNode.replaceChild(e.getDoc().createTextNode("\n"),n)}),r.contentEditable=!1,r.innerHTML=e.dom.encode(r.textContent),p.highlightElement(r),r.className=t.trim(r.className)})})})},T={setup:S},E=function(e,t,n,r){var o,i=c.getContentCss(e);e.inline&&n.get()||!e.inline&&r.get()||(e.inline?n.set(!0):r.set(!0),!1!==i&&(o=e.dom.create("link",{rel:"stylesheet",href:i||t+"/css/prism.css"}),e.getDoc().getElementsByTagName("head")[0].appendChild(o)))},O={loadCss:E},A=function(e){e.addButton("codesample",{cmd:"codesample",title:"Insert/Edit code sample"}),e.addMenuItem("codesample",{cmd:"codesample",text:"Code sample",icon:"codesample"})},D={register:A},R=r(!1);o.add("codesample",function(e,t){var n=r(!1);T.setup(e),D.register(e),_.register(e),e.on("init",function(){O.loadCss(e,t,R,n)}),e.on("dblclick",function(t){m.isCodeSample(t.target)&&k.open(e)})})}()}()},3317:function(e,t,n){n(3318)},3318:function(e,t){!function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.Color"),r=function(e,t){e.find("#preview")[0].getEl().style.background=t},o=function(e,t){var o=n(t),i=o.toRgb();e.fromJSON({r:i.r,g:i.g,b:i.b,hex:o.toHex().substr(1)}),r(e,o.toHex())},i=function(e,t,n){var i=e.windowManager.open({title:"Color",items:{type:"container",layout:"flex",direction:"row",align:"stretch",padding:5,spacing:10,items:[{type:"colorpicker",value:n,onchange:function(){var e=this.rgb();i&&(i.find("#r").value(e.r),i.find("#g").value(e.g),i.find("#b").value(e.b),i.find("#hex").value(this.value().substr(1)),r(i,this.value()))}},{type:"form",padding:0,labelGap:5,defaults:{type:"textbox",size:7,value:"0",flex:1,spellcheck:!1,onchange:function(){var e,t,n=i.find("colorpicker")[0];if(e=this.name(),t=this.value(),"hex"===e)return t="#"+t,o(i,t),void n.value(t);t={r:i.find("#r").value(),g:i.find("#g").value(),b:i.find("#b").value()},n.value(t),o(i,t)}},items:[{name:"r",label:"R",autofocus:1},{name:"g",label:"G"},{name:"b",label:"B"},{name:"hex",label:"#",value:"000000"},{name:"preview",type:"container",border:1}]}]},onSubmit:function(){t("#"+i.toJSON().hex)}});o(i,n)},a={open:i};t.add("colorpicker",function(e){e.settings.color_picker_callback||(e.settings.color_picker_callback=function(t,n){a.open(e,t,n)})})}()}()},3319:function(e,t,n){n(3320)},3320:function(e,t){!function(){!function(){"use strict";function e(){}var t=function(e){var n=e,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return t(r())}}},n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=function(e){return{isFullscreen:function(){return null!==e.get()}}},o={get:r},i=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),a=function(e,t){e.fire("FullscreenStateChanged",{state:t})},s={fireFullscreenStateChanged:a},l=i.DOM,u=function(){var e,t,n=window,r=document,o=r.body;return o.offsetWidth&&(e=o.offsetWidth,t=o.offsetHeight),n.innerWidth&&n.innerHeight&&(e=n.innerWidth,t=n.innerHeight),{w:e,h:t}},c=function(){var e=l.getViewPort();return{x:e.x,y:e.y}},d=function(e){window.scrollTo(e.x,e.y)},f=function(e,t){var n,r,o,i,a=document.body,f=document.documentElement,h=t.get(),p=function(){l.setStyle(o,"height",u().h-(r.clientHeight-o.clientHeight))},m=function(){l.unbind(window,"resize",p)};if(r=e.getContainer(),n=r.style,o=e.getContentAreaContainer().firstChild,i=o.style,h)i.width=h.iframeWidth,i.height=h.iframeHeight,h.containerWidth&&(n.width=h.containerWidth),h.containerHeight&&(n.height=h.containerHeight),l.removeClass(a,"mce-fullscreen"),l.removeClass(f,"mce-fullscreen"),l.removeClass(r,"mce-fullscreen"),d(h.scrollPos),l.unbind(window,"resize",h.resizeHandler),e.off("remove",h.removeHandler),t.set(null),s.fireFullscreenStateChanged(e,!1);else{var g={scrollPos:c(),containerWidth:n.width,containerHeight:n.height,iframeWidth:i.width,iframeHeight:i.height,resizeHandler:p,removeHandler:m};i.width=i.height="100%",n.width=n.height="",l.addClass(a,"mce-fullscreen"),l.addClass(f,"mce-fullscreen"),l.addClass(r,"mce-fullscreen"),l.bind(window,"resize",p),e.on("remove",m),p(),t.set(g),s.fireFullscreenStateChanged(e,!0)}},h={toggleFullscreen:f},p=function(e,t){e.addCommand("mceFullScreen",function(){h.toggleFullscreen(e,t)})},m={register:p},g=function(e){return function(t){var n=t.control;e.on("FullscreenStateChanged",function(e){n.active(e.state)})}},v=function(e){e.addMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Ctrl+Shift+F",selectable:!0,cmd:"mceFullScreen",onPostRender:g(e),context:"view"}),e.addButton("fullscreen",{active:!1,tooltip:"Fullscreen",cmd:"mceFullScreen",onPostRender:g(e)})},b={register:v};n.add("fullscreen",function(e){var n=t(null);return e.settings.inline?o.get(n):(m.register(e,n),b.register(e),e.addShortcut("Ctrl+Shift+F","","mceFullScreen"),o.get(n))})}()}()},3321:function(e,t,n){n(3322)},3322:function(e,t){!function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(e){e.addCommand("InsertHorizontalRule",function(){e.execCommand("mceInsertContent",!1,"<hr />")})},r={register:n},o=function(e){e.addButton("hr",{icon:"hr",tooltip:"Horizontal line",cmd:"InsertHorizontalRule"}),e.addMenuItem("hr",{icon:"hr",text:"Horizontal line",cmd:"InsertHorizontalRule",context:"insert"})},i={register:o};t.add("hr",function(e){r.register(e),i.register(e)})}()}()},3323:function(e,t,n){n(3324)},3324:function(e,t){!function(){!function(){"use strict";function e(){return new(S.getOrDie("FileReader"))}function t(){return new(S.getOrDie("XMLHttpRequest"))}function n(e){var n=function(n,r,o,i){var a,s;a=new t,a.open("POST",e.url),a.withCredentials=e.credentials,a.upload.onprogress=function(e){i(e.loaded/e.total*100)},a.onerror=function(){o("Image upload failed due to a XHR Transport error. Code: "+a.status)},a.onload=function(){var t;return a.status<200||a.status>=300?void o("HTTP Error: "+a.status):(t=JSON.parse(a.responseText))&&"string"==typeof t.location?void r(Ge(e.basePath,t.location)):void o("Invalid JSON: "+a.responseText)},s=new FormData,s.append("file",n.blob(),n.filename()),a.send(s)},r=function(e,t){return new T(function(n,r){try{t(e,n,r,Ke)}catch(e){r(e.message)}})},o=function(e){return e===n},i=function(t){return!e.url&&o(e.handler)?T.reject("Upload url missing from the settings."):r(t,e.handler)};return e=E.extend({credentials:!1,handler:n},e),{upload:i}}function r(e){function t(t){var n,r,o=we(e);if(t&&(r={type:"listbox",label:"Image list",name:"image-list",values:F.buildListItems(t,function(t){t.value=e.convertURL(t.value||t.url,"src")},[{text:"None",value:""}]),value:o.src&&e.convertURL(o.src,"src"),onselect:function(e){var t=n.find("#alt");(!t.value()||e.lastControl&&t.value()===e.lastControl.text())&&t.value(e.control.text()),n.find("#src").value(e.control.value()).fire("change")},onPostRender:function(){r=this}}),w.hasAdvTab(e)||w.hasUploadUrl(e)||w.hasUploadHandler(e)){var i=[Ue.makeTab(e,r)];w.hasAdvTab(e)&&i.push(Oe.makeTab(e)),(w.hasUploadUrl(e)||w.hasUploadHandler(e))&&i.push(Je.makeTab(e)),n=e.windowManager.open({title:"Insert/edit image",data:o,bodyType:"tabpanel",body:i,onSubmit:Qe(Ze,e)})}else n=e.windowManager.open({title:"Insert/edit image",data:o,body:Ue.getGeneralItems(e,r),onSubmit:Qe(Ze,e)});Ie.syncSize(n)}function n(){F.createImageList(e,t)}return{open:n}}function o(){}var i=tinymce.util.Tools.resolve("tinymce.PluginManager"),a=function(e){return!1!==e.settings.image_dimensions},s=function(e){return!0===e.settings.image_advtab},l=function(e){return e.getParam("image_prepend_url","")},u=function(e){return e.getParam("image_class_list")},c=function(e){return!1!==e.settings.image_description},d=function(e){return!0===e.settings.image_title},f=function(e){return!0===e.settings.image_caption},h=function(e){return e.getParam("image_list",!1)},p=function(e){return e.getParam("images_upload_url",!1)},m=function(e){return e.getParam("images_upload_handler",!1)},g=function(e){return e.getParam("images_upload_url")},v=function(e){return e.getParam("images_upload_handler")},b=function(e){return e.getParam("images_upload_base_path")},y=function(e){return e.getParam("images_upload_credentials")},w={hasDimensions:a,hasAdvTab:s,getPrependUrl:l,getClassList:u,hasDescription:c,hasImageTitle:d,hasImageCaption:f,getImageList:h,hasUploadUrl:p,hasUploadHandler:m,getUploadUrl:g,getUploadHandler:v,getUploadBasePath:b,getUploadCredentials:y},x="undefined"!=typeof window?window:Function("return this;")(),C=function(e,t){for(var n=void 0!==t&&null!==t?t:x,r=0;r<e.length&&void 0!==n&&null!==n;++r)n=n[e[r]];return n},k=function(e,t){var n=e.split(".");return C(n,t)},N=function(e,t){return k(e,t)},_=function(e,t){var n=N(e,t);if(void 0===n||null===n)throw e+" not available on this browser";return n},S={getOrDie:_},T=tinymce.util.Tools.resolve("tinymce.util.Promise"),E=tinymce.util.Tools.resolve("tinymce.util.Tools"),O=tinymce.util.Tools.resolve("tinymce.util.XHR"),A=function(e,t){return Math.max(parseInt(e,10),parseInt(t,10))},D=function(e,t){function n(e,n){r.parentNode&&r.parentNode.removeChild(r),t({width:e,height:n})}var r=document.createElement("img");r.onload=function(){n(A(r.width,r.clientWidth),A(r.height,r.clientHeight))},r.onerror=function(){n(0,0)};var o=r.style;o.visibility="hidden",o.position="fixed",o.bottom=o.left="0px",o.width=o.height="auto",document.body.appendChild(r),r.src=e},R=function(e,t,n){function r(e,n){return n=n||[],E.each(e,function(e){var o={text:e.text||e.title};e.menu?o.menu=r(e.menu):(o.value=e.value,t(o)),n.push(o)}),n}return r(e,n||[])},M=function(e){return e&&(e=e.replace(/px$/,"")),e},P=function(e){return e.length>0&&/^[0-9]+$/.test(e)&&(e+="px"),e},L=function(e){if(e.margin){var t=e.margin.split(" ");switch(t.length){case 1:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[0],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[0];break;case 2:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[1];break;case 3:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[1];break;case 4:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[3]}delete e.margin}return e},I=function(e,t){var n=w.getImageList(e);"string"==typeof n?O.send({url:n,success:function(e){t(JSON.parse(e))}}):"function"==typeof n?n(t):t(n)},j=function(e,t,n){function r(){n.onload=n.onerror=null,e.selection&&(e.selection.select(n),e.nodeChanged())}n.onload=function(){t.width||t.height||!w.hasDimensions(e)||e.dom.setAttribs(n,{width:n.clientWidth,height:n.clientHeight}),r()},n.onerror=r},B=function(t){return new T(function(n,r){var o=new e;o.onload=function(){n(o.result)},o.onerror=function(){r(e.error.message)},o.readAsDataURL(t)})},F={getImageSize:D,buildListItems:R,removePixelSuffix:M,addPixelSuffix:P,mergeMargins:L,createImageList:I,waitLoadImage:j,blobToDataUri:B},H=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),U=Object.prototype.hasOwnProperty,z=function(e,t){return t},W=function(e){return function(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];if(0===t.length)throw new Error("Can't merge zero objects");for(var r={},o=0;o<t.length;o++){var i=t[o];for(var a in i)U.call(i,a)&&(r[a]=e(r[a],i[a]))}return r}}(z),V=H.DOM,q=function(e){return e.style.marginLeft&&e.style.marginRight&&e.style.marginLeft===e.style.marginRight?F.removePixelSuffix(e.style.marginLeft):""},$=function(e){return e.style.marginTop&&e.style.marginBottom&&e.style.marginTop===e.style.marginBottom?F.removePixelSuffix(e.style.marginTop):""},K=function(e){return e.style.borderWidth?F.removePixelSuffix(e.style.borderWidth):""},G=function(e,t){return e.hasAttribute(t)?e.getAttribute(t):""},X=function(e,t){return e.style[t]?e.style[t]:""},Y=function(e){return null!==e.parentNode&&"FIGURE"===e.parentNode.nodeName},J=function(e,t,n){e.setAttribute(t,n)},Q=function(e){var t=V.create("figure",{class:"image"});V.insertAfter(t,e),t.appendChild(e),t.appendChild(V.create("figcaption",{contentEditable:!0},"Caption")),t.contentEditable="false"},Z=function(e){var t=e.parentNode;V.insertAfter(e,t),V.remove(t)},ee=function(e){Y(e)?Z(e):Q(e)},te=function(e,t){var n=e.getAttribute("style"),r=t(null!==n?n:"");r.length>0?(e.setAttribute("style",r),e.setAttribute("data-mce-style",r)):e.removeAttribute("style")},ne=function(e,t){return function(e,n,r){e.style[n]?(e.style[n]=F.addPixelSuffix(r),te(e,t)):J(e,n,r)}},re=function(e,t){return e.style[t]?F.removePixelSuffix(e.style[t]):G(e,t)},oe=function(e,t){var n=F.addPixelSuffix(t);e.style.marginLeft=n,e.style.marginRight=n},ie=function(e,t){var n=F.addPixelSuffix(t);e.style.marginTop=n,e.style.marginBottom=n},ae=function(e,t){var n=F.addPixelSuffix(t);e.style.borderWidth=n},se=function(e,t){e.style.borderStyle=t},le=function(e){return X(e,"borderStyle")},ue=function(e){return"FIGURE"===e.nodeName},ce=function(){return{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:""}},de=function(e,t){var n=document.createElement("img");return J(n,"style",t.style),(q(n)||""!==t.hspace)&&oe(n,t.hspace),($(n)||""!==t.vspace)&&ie(n,t.vspace),(K(n)||""!==t.border)&&ae(n,t.border),(le(n)||""!==t.borderStyle)&&se(n,t.borderStyle),e(n.getAttribute("style"))},fe=function(e,t){var n=document.createElement("img");if(ge(e,W(t,{caption:!1}),n),J(n,"alt",t.alt),t.caption){var r=V.create("figure",{class:"image"});return r.appendChild(n),r.appendChild(V.create("figcaption",{contentEditable:!0},"Caption")),r.contentEditable="false",r}return n},he=function(e,t){return{src:G(t,"src"),alt:G(t,"alt"),title:G(t,"title"),width:re(t,"width"),height:re(t,"height"),class:G(t,"class"),style:e(G(t,"style")),caption:Y(t),hspace:q(t),vspace:$(t),border:K(t),borderStyle:X(t,"borderStyle")}},pe=function(e,t,n,r,o){n[r]!==t[r]&&o(e,r,n[r])},me=function(e,t){return function(n,r,o){e(n,o),te(n,t)}},ge=function(e,t,n){var r=he(e,n);pe(n,r,t,"caption",function(e,t,n){return ee(e)}),pe(n,r,t,"src",J),pe(n,r,t,"alt",J),pe(n,r,t,"title",J),pe(n,r,t,"width",ne(0,e)),pe(n,r,t,"height",ne(0,e)),pe(n,r,t,"class",J),pe(n,r,t,"style",me(function(e,t){return J(e,"style",t)},e)),pe(n,r,t,"hspace",me(oe,e)),pe(n,r,t,"vspace",me(ie,e)),pe(n,r,t,"border",me(ae,e)),pe(n,r,t,"borderStyle",me(se,e))},ve=function(e,t){var n=e.dom.styles.parse(t),r=F.mergeMargins(n),o=e.dom.styles.parse(e.dom.styles.serialize(r));return e.dom.styles.serialize(o)},be=function(e){var t=e.selection.getNode(),n=e.dom.getParent(t,"figure.image");return n?e.dom.select("img",n)[0]:t&&("IMG"!==t.nodeName||t.getAttribute("data-mce-object")||t.getAttribute("data-mce-placeholder"))?null:t},ye=function(e,t){var n=e.dom,r=n.getParent(t.parentNode,function(t){return e.schema.getTextBlockElements()[t.nodeName]});return r?n.split(r,t):t},we=function(e){var t=be(e);return t?he(function(t){return ve(e,t)},t):ce()},xe=function(e,t){var n=fe(function(t){return ve(e,t)},t);e.dom.setAttrib(n,"data-mce-id","__mcenew"),e.focus(),e.selection.setContent(n.outerHTML);var r=e.dom.select('*[data-mce-id="__mcenew"]')[0];if(e.dom.setAttrib(r,"data-mce-id",null),ue(r)){var o=ye(e,r);e.selection.select(o)}else e.selection.select(r)},Ce=function(e,t){e.dom.setAttrib(t,"src",t.getAttribute("src"))},ke=function(e,t){if(t){var n=e.dom.is(t.parentNode,"figure.image")?t.parentNode:t;e.dom.remove(n),e.focus(),e.nodeChanged(),e.dom.isEmpty(e.getBody())&&(e.setContent(""),e.selection.setCursorLocation())}},Ne=function(e,t){var n=be(e);if(ge(function(t){return ve(e,t)},t,n),Ce(e,n),ue(n.parentNode)){var r=n.parentNode;ye(e,r),e.selection.select(n.parentNode)}else e.selection.select(n),F.waitLoadImage(e,t,n)},_e=function(e,t){var n=be(e);n?t.src?Ne(e,t):ke(e,n):t.src&&xe(e,t)},Se=function(e){return function(t){var n=e.dom,r=t.control.rootControl;if(w.hasAdvTab(e)){var o=r.toJSON(),i=n.parseStyle(o.style);r.find("#vspace").value(""),r.find("#hspace").value(""),i=F.mergeMargins(i),(i["margin-top"]&&i["margin-bottom"]||i["margin-right"]&&i["margin-left"])&&(i["margin-top"]===i["margin-bottom"]?r.find("#vspace").value(F.removePixelSuffix(i["margin-top"])):r.find("#vspace").value(""),i["margin-right"]===i["margin-left"]?r.find("#hspace").value(F.removePixelSuffix(i["margin-right"])):r.find("#hspace").value("")),i["border-width"]?r.find("#border").value(F.removePixelSuffix(i["border-width"])):r.find("#border").value(""),i["border-style"]?r.find("#borderStyle").value(i["border-style"]):r.find("#borderStyle").value(""),r.find("#style").value(n.serializeStyle(n.parseStyle(n.serializeStyle(i))))}}},Te=function(e,t){t.find("#style").each(function(n){var r=de(function(t){return ve(e,t)},W(ce(),t.toJSON()));n.value(r)})},Ee=function(e){return{title:"Advanced",type:"form",pack:"start",items:[{label:"Style",name:"style",type:"textbox",onchange:Se(e)},{type:"form",layout:"grid",packV:"start",columns:2,padding:0,defaults:{type:"textbox",maxWidth:50,onchange:function(t){Te(e,t.control.rootControl)}},items:[{label:"Vertical space",name:"vspace"},{label:"Border width",name:"border"},{label:"Horizontal space",name:"hspace"},{label:"Border style",type:"listbox",name:"borderStyle",width:90,maxWidth:90,onselect:function(t){Te(e,t.control.rootControl)},values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}},Oe={makeTab:Ee},Ae=function(e,t){e.state.set("oldVal",e.value()),t.state.set("oldVal",t.value())},De=function(e,t){var n=e.find("#width")[0],r=e.find("#height")[0],o=e.find("#constrain")[0];n&&r&&o&&t(n,r,o.checked())},Re=function(e,t,n){var r=e.state.get("oldVal"),o=t.state.get("oldVal"),i=e.value(),a=t.value();n&&r&&o&&i&&a&&(i!==r?(a=Math.round(i/r*a),isNaN(a)||t.value(a)):(i=Math.round(a/o*i),isNaN(i)||e.value(i))),Ae(e,t)},Me=function(e){De(e,Ae)},Pe=function(e){De(e,Re)},Le=function(){var e=function(e){Pe(e.control.rootControl)};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:e,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:e,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}},Ie={createUi:Le,syncSize:Me,updateSize:Pe},je=function(e,t){var n,r,o,i=e.meta||{},a=e.control,s=a.rootControl,l=s.find("#image-list")[0];l&&l.value(t.convertURL(a.value(),"src")),E.each(i,function(e,t){s.find("#"+t).value(e)}),i.width||i.height||(n=t.convertURL(a.value(),"src"),r=w.getPrependUrl(t),o=new RegExp("^(?:[a-z]+:)?//","i"),r&&!o.test(n)&&n.substring(0,r.length)!==r&&(n=r+n),a.value(n),F.getImageSize(t.documentBaseURI.toAbsolute(a.value()),function(e){e.width&&e.height&&w.hasDimensions(t)&&(s.find("#width").value(e.width),s.find("#height").value(e.height),Ie.syncSize(s))}))},Be=function(e){e.meta=e.control.rootControl.toJSON()},Fe=function(e,t){var n=[{name:"src",type:"filepicker",filetype:"image",label:"Source",autofocus:!0,onchange:function(t){je(t,e)},onbeforecall:Be},t];return w.hasDescription(e)&&n.push({name:"alt",type:"textbox",label:"Image description"}),w.hasImageTitle(e)&&n.push({name:"title",type:"textbox",label:"Image Title"}),w.hasDimensions(e)&&n.push(Ie.createUi()),w.getClassList(e)&&n.push({name:"class",type:"listbox",label:"Class",values:F.buildListItems(w.getClassList(e),function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({inline:"img",classes:[t.value]})})})}),w.hasImageCaption(e)&&n.push({name:"caption",type:"checkbox",label:"Caption"}),n},He=function(e,t){return{title:"General",type:"form",items:Fe(e,t)}},Ue={makeTab:He,getGeneralItems:Fe},ze=function(){return S.getOrDie("URL")},We=function(e){return ze().createObjectURL(e)},Ve=function(e){ze().revokeObjectURL(e)},qe={createObjectURL:We,revokeObjectURL:Ve},$e=tinymce.util.Tools.resolve("tinymce.ui.Factory"),Ke=function(){},Ge=function(e,t){return e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t},Xe=function(e){return function(t){var r=$e.get("Throbber"),o=t.control.rootControl,i=new r(o.getEl()),a=t.control.value(),s=qe.createObjectURL(a),l=n({url:w.getUploadUrl(e),basePath:w.getUploadBasePath(e),credentials:w.getUploadCredentials(e),handler:w.getUploadHandler(e)}),u=function(){i.hide(),qe.revokeObjectURL(s)};return i.show(),F.blobToDataUri(a).then(function(t){var n=e.editorUpload.blobCache.create({blob:a,blobUri:s,name:a.name?a.name.replace(/\.[^\.]+$/,""):null,base64:t.split(",")[1]});return l.upload(n).then(function(e){var t=o.find("#src");return t.value(e),o.find("tabpanel")[0].activateTab(0),t.fire("change"),u(),e})}).catch(function(t){e.windowManager.alert(t),u()})}},Ye=function(e){return{title:"Upload",type:"form",layout:"flex",direction:"column",align:"stretch",padding:"20 20 20 20",items:[{type:"container",layout:"flex",direction:"column",align:"center",spacing:10,items:[{text:"Browse for an image",type:"browsebutton",accept:".jpg,.jpeg,.png,.gif",onchange:Xe(e)},{text:"OR",type:"label"}]},{text:"Drop an image here",type:"dropzone",accept:".jpg,.jpeg,.png,.gif",height:100,onchange:Xe(e)}]}},Je={makeTab:Ye},Qe=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=new Array(arguments.length-1),o=1;o<arguments.length;o++)r[o-1]=arguments[o];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];var a=r.concat(o);return e.apply(null,a)}},Ze=function(e,t){var n=t.control.getRoot();Ie.updateSize(n),e.undoManager.transact(function(){var t=W(we(e),n.toJSON());_e(e,t)}),e.editorUpload.uploadImagesAuto()},et=function(e){e.addCommand("mceImage",r(e).open)},tt={register:et},nt=function(e){var t=e.attr("class");return t&&/\bimage\b/.test(t)},rt=function(e){return function(t){for(var n,r=t.length,o=function(t){t.attr("contenteditable",e?"true":null)};r--;)n=t[r],nt(n)&&(n.attr("contenteditable",e?"false":null),E.each(n.getAll("figcaption"),o))}},ot=function(e){e.on("preInit",function(){e.parser.addNodeFilter("figure",rt(!0)),e.serializer.addNodeFilter("figure",rt(!1))})},it={setup:ot},at=function(e){e.addButton("image",{icon:"image",tooltip:"Insert/edit image",onclick:r(e).open,stateSelector:"img:not([data-mce-object],[data-mce-placeholder]),figure.image"}),e.addMenuItem("image",{icon:"image",text:"Image",onclick:r(e).open,context:"insert",prependToContext:!0})},st={register:at};i.add("image",function(e){it.setup(e),st.register(e),tt.register(e)})}()}()},3325:function(e,t,n){n(3326)},3326:function(e,t,n){(function(e){!function(){!function(){"use strict";function t(e,t){return i(document.createElement("canvas"),e,t)}function n(e){var n,o;return n=t(e.width,e.height),o=r(n),o.drawImage(e,0,0),n}function r(e){return e.getContext("2d")}function o(e){var t=null;try{t=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(e){}return t||(t=null),t}function i(e,t,n){return e.width=t,e.height=n,e}function a(e){return e.naturalWidth||e.width}function s(e){return e.naturalHeight||e.height}function l(e,t){return new(Ie.getOrDie("Blob"))(e,t)}function u(){return new(Ie.getOrDie("FileReader"))}function c(e){return new(Ie.getOrDie("Uint8Array"))(e)}function d(e){var t=e.src;return 0===t.indexOf("data:")?m(t):h(t)}function f(e){return new ye(function(t,n){function r(){s(),t(a)}function o(){s(),n("Unable to load data of type "+e.type+": "+i)}var i=URL.createObjectURL(e),a=new Image,s=function(){a.removeEventListener("load",r),a.removeEventListener("error",o)};a.addEventListener("load",r),a.addEventListener("error",o),a.src=i,a.complete&&r()})}function h(e){return new ye(function(t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="blob",r.onload=function(){200==this.status&&t(this.response)},r.onerror=function(){var e=this;n(0===this.status?function(){var e=new Error("No access to download image");return e.code=18,e.name="SecurityError",e}():function(){return new Error("Error "+e.status+" downloading image")}())},r.send()})}function p(e){var t=e.split(","),n=/data:([^;]+)/.exec(t[0]);if(!n)return Ae.none();for(var r=n[1],o=t[1],i=Fe.atob(o),a=i.length,s=Math.ceil(a/1024),u=new Array(s),d=0;d<s;++d){for(var f=1024*d,h=Math.min(f+1024,a),p=new Array(h-f),m=f,g=0;m<h;++g,++m)p[g]=i[m].charCodeAt(0);u[d]=c(p)}return Ae.some(l(u,{type:r}))}function m(e){return new ye(function(t,n){p(e).fold(function(){n("uri is not base64: "+e)},t)})}function g(e){return 0===e.indexOf("blob:")?h(e):0===e.indexOf("data:")?m(e):null}function v(e,t,n){return t=t||"image/png",HTMLCanvasElement.prototype.toBlob?new ye(function(r){e.toBlob(function(e){r(e)},t,n)}):m(e.toDataURL(t,n))}function b(e,t,n){return t=t||"image/png",e.then(function(e){return e.toDataURL(t,n)})}function y(e){return f(e).then(function(e){k(e);var t,n;return n=ve.create(be.getWidth(e),be.getHeight(e)),t=ve.get2dContext(n),t.drawImage(e,0,0),n})}function w(e){return new ye(function(t){var n=new u;n.onloadend=function(){t(n.result)},n.readAsDataURL(e)})}function x(e){return new ye(function(t){var n=new u;n.onloadend=function(){t(n.result)},n.readAsArrayBuffer(e)})}function C(e){return w(e).then(function(e){return e.split(",")[1]})}function k(e){URL.revokeObjectURL(e.src)}function N(e,t,n){function r(){return ye.resolve(t)}function o(){return n}function i(){return n.split(",")[1]}function a(t,n){return e.then(function(e){return He.canvasToBlob(e,t,n)})}function s(t,n){return e.then(function(e){return He.canvasToDataURL(e,t,n)})}function l(e,t){return s(e,t).then(function(e){return e.split(",")[1]})}function u(){return e.then(ve.clone)}var c=t.type;return{getType:we(c),toBlob:r,toDataURL:o,toBase64:i,toAdjustedBlob:a,toAdjustedDataURL:s,toAdjustedBase64:l,toCanvas:u}}function _(e){return He.blobToDataUri(e).then(function(t){return N(He.blobToCanvas(e),e,t)})}function S(e,t){return He.canvasToBlob(e,t).then(function(t){return N(ye.resolve(e),t,e.toDataURL())})}function T(e){return He.imageToBlob(e).then(function(e){return _(e)})}function E(e,t,n){return e=parseFloat(e),e>n?e=n:e<t&&(e=t),e}function O(){return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]}function A(e,t){var n,r,o,i,a=[],s=new Array(10);for(n=0;n<5;n++){for(r=0;r<5;r++)a[r]=t[r+5*n];for(r=0;r<5;r++){for(i=0,o=0;o<5;o++)i+=e[r+5*o]*a[o];s[r+5*n]=i}}return s}function D(e,t){return t=E(t,0,1),e.map(function(e,n){return n%6==0?e=1-(1-e)*t:e*=t,E(e,0,1)})}function R(e,t){var n;return t=E(t,-1,1),t*=100,t<0?n=127+t/100*127:(n=t%1,n=0===n?Ye[t]:Ye[Math.floor(t)]*(1-n)+Ye[Math.floor(t)+1]*n,n=127*n+127),A(e,[n/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1])}function M(e,t){var n,r,o,i;return t=E(t,-1,1),n=1+(t>0?3*t:t),r=.3086,o=.6094,i=.082,A(e,[r*(1-n)+n,o*(1-n),i*(1-n),0,0,r*(1-n),o*(1-n)+n,i*(1-n),0,0,r*(1-n),o*(1-n),i*(1-n)+n,0,0,0,0,0,1,0,0,0,0,0,1])}function P(e,t){var n,r,o,i,a;return t=E(t,-180,180)/180*Math.PI,n=Math.cos(t),r=Math.sin(t),o=.213,i=.715,a=.072,A(e,[o+n*(1-o)+r*-o,i+n*-i+r*-i,a+n*-a+r*(1-a),0,0,o+n*-o+.143*r,i+n*(1-i)+.14*r,a+n*-a+-.283*r,0,0,o+n*-o+r*-(1-o),i+n*-i+r*i,a+n*(1-a)+r*a,0,0,0,0,0,1,0,0,0,0,0,1])}function L(e,t){return t=E(255*t,-255,255),A(e,[1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1])}function I(e,t,n,r){return t=E(t,0,2),n=E(n,0,2),r=E(r,0,2),A(e,[t,0,0,0,0,0,n,0,0,0,0,0,r,0,0,0,0,0,1,0,0,0,0,0,1])}function j(e,t){return t=E(t,0,1),A(e,D([.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0,0,0,0,0,1],t))}function B(e,t){return t=E(t,0,1),A(e,D([.33,.34,.33,0,0,.33,.34,.33,0,0,.33,.34,.33,0,0,0,0,0,1,0,0,0,0,0,1],t))}function F(e,t){return e.toCanvas().then(function(n){return H(n,e.getType(),t)})}function H(e,t,n){var r,o=ve.get2dContext(e);return r=function(e,t){var n,r,o,i,a,s=e.data,l=t[0],u=t[1],c=t[2],d=t[3],f=t[4],h=t[5],p=t[6],m=t[7],g=t[8],v=t[9],b=t[10],y=t[11],w=t[12],x=t[13],C=t[14],k=t[15],N=t[16],_=t[17],S=t[18],T=t[19];for(a=0;a<s.length;a+=4)n=s[a],r=s[a+1],o=s[a+2],i=s[a+3],s[a]=n*l+r*u+o*c+i*d+f,s[a+1]=n*h+r*p+o*m+i*g+v,s[a+2]=n*b+r*y+o*w+i*x+C,s[a+3]=n*k+r*N+o*_+i*S+T;return e}(o.getImageData(0,0,e.width,e.height),n),o.putImageData(r,0,0),Xe.fromCanvas(e,t)}function U(e,t){return e.toCanvas().then(function(n){return z(n,e.getType(),t)})}function z(e,t,n){var r,o,i=ve.get2dContext(e);return r=i.getImageData(0,0,e.width,e.height),o=i.getImageData(0,0,e.width,e.height),o=function(e,t,n){function r(e,t,n){return e>n?e=n:e<t&&(e=t),e}var o,i,a,s,l,u,c,d,f,h,p,m,g,v,b,y,w;for(a=Math.round(Math.sqrt(n.length)),s=Math.floor(a/2),o=e.data,i=t.data,y=e.width,w=e.height,u=0;u<w;u++)for(l=0;l<y;l++){for(c=d=f=0,p=0;p<a;p++)for(h=0;h<a;h++)m=r(l+h-s,0,y-1),g=r(u+p-s,0,w-1),v=4*(g*y+m),b=n[p*a+h],c+=o[v]*b,d+=o[v+1]*b,f+=o[v+2]*b;v=4*(u*y+l),i[v]=r(c,0,255),i[v+1]=r(d,0,255),i[v+2]=r(f,0,255)}return t}(r,o,n),i.putImageData(o,0,0),Xe.fromCanvas(e,t)}function W(e){var t=function(t,n,r){var o,i,a=ve.get2dContext(t),s=new Array(256);for(i=0;i<s.length;i++)s[i]=e(i,r);return o=function(e,t){var n,r=e.data;for(n=0;n<r.length;n+=4)r[n]=t[r[n]],r[n+1]=t[r[n+1]],r[n+2]=t[r[n+2]];return e}(a.getImageData(0,0,t.width,t.height),s),a.putImageData(o,0,0),Xe.fromCanvas(t,n)};return function(e,n){return e.toCanvas().then(function(r){return t(r,e.getType(),n)})}}function V(e){return function(t,n){return F(t,e(Je.identity(),n))}}function q(e){return function(t){return U(t,e)}}function $(e,t,n){var r=be.getWidth(e),o=be.getHeight(e),i=t/r,a=n/o,s=!1;(i<.5||i>2)&&(i=i<.5?.5:2,s=!0),(a<.5||a>2)&&(a=a<.5?.5:2,s=!0);var l=K(e,i,a);return s?l.then(function(e){return $(e,t,n)}):l}function K(e,t,n){return new ye(function(r){var o=be.getWidth(e),i=be.getHeight(e),a=Math.floor(o*t),s=Math.floor(i*n),l=ve.create(a,s);ve.get2dContext(l).drawImage(e,0,0,o,i,0,0,a,s),r(l)})}function G(e,t){return e.toCanvas().then(function(n){return X(n,e.getType(),t)})}function X(e,t,n){var r=ve.create(e.width,e.height),o=ve.get2dContext(r),i=0,a=0;return n=n<0?360+n:n,90!=n&&270!=n||ve.resize(r,r.height,r.width),90!=n&&180!=n||(i=r.width),270!=n&&180!=n||(a=r.height),o.translate(i,a),o.rotate(n*Math.PI/180),o.drawImage(e,0,0),Xe.fromCanvas(r,t)}function Y(e,t){return e.toCanvas().then(function(n){return J(n,e.getType(),t)})}function J(e,t,n){var r=ve.create(e.width,e.height),o=ve.get2dContext(r);return"v"==n?(o.scale(1,-1),o.drawImage(e,0,-r.height)):(o.scale(-1,1),o.drawImage(e,-r.width,0)),Xe.fromCanvas(r,t)}function Q(e,t,n,r,o){return e.toCanvas().then(function(i){return Z(i,e.getType(),t,n,r,o)})}function Z(e,t,n,r,o,i){var a=ve.create(o,i);return ve.get2dContext(a).drawImage(e,-n,-r),Xe.fromCanvas(a,t)}function ee(e,t,n){return e.toCanvas().then(function(r){return Ze.scale(r,t,n).then(function(t){return Xe.fromCanvas(t,e.getType())})})}function te(){function e(e){var t;return t=i.splice(++a),i.push(e),{state:e,removed:t}}function t(){if(r())return i[--a]}function n(){if(o())return i[++a]}function r(){return a>0}function o(){return-1!==a&&a<i.length-1}var i=[],a=-1;return{data:i,add:e,undo:t,redo:n,canUndo:r,canRedo:o}}function ne(e,t,n,r,o){function i(e,t){return{x:t.x+e.x,y:t.y+e.y,w:t.w,h:t.h}}function a(e,t){return{x:t.x-e.x,y:t.y-e.y,w:t.w,h:t.h}}function s(){return a(n,e)}function l(t,r,o,i){var s,l,u,c,d;s=r.x,l=r.y,u=r.w,c=r.h,s+=o*t.deltaX,l+=i*t.deltaY,u+=o*t.deltaW,c+=i*t.deltaH,u<20&&(u=20),c<20&&(c=20),d=e=Xt.clamp({x:s,y:l,w:u,h:c},n,"move"===t.name),d=a(n,d),g.fire("updateRect",{rect:d}),h(d)}function u(e){var t;t=ge.map(v,function(e){return"#"+x+"-"+e.name}).concat(ge.map(y,function(e){return"#"+x+"-"+e})).join(","),e?Qt(t,r).show():Qt(t,r).hide()}function c(e){function n(e,t){t.h<0&&(t.h=0),t.w<0&&(t.w=0),Qt("#"+x+"-"+e,r).css({left:t.x,top:t.y,width:t.w,height:t.h})}ge.each(v,function(t){Qt("#"+x+"-"+t.name,r).css({left:e.w*t.xMul+e.x,top:e.h*t.yMul+e.y})}),n("top",{x:t.x,y:t.y,w:t.w,h:e.y-t.y}),n("right",{x:e.x+e.w,y:e.y,w:t.w-e.x-e.w+t.x,h:e.h}),n("bottom",{x:t.x,y:e.y+e.h,w:t.w,h:t.h-e.y-e.h+t.y}),n("left",{x:t.x,y:e.y,w:e.x-t.x,h:e.h}),n("move",e)}function d(t){e=t,c(e)}function f(n){t=n,c(e)}function h(e){d(i(n,e))}function p(t){n=t,c(e)}function m(){ge.each(b,function(e){e.destroy()}),b=[]}var g,v,b,y,w="mce-",x=w+"crid-"+tn++;return v=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],y=["top","right","bottom","left"],function(){function t(t){var n;return new(Gt.get("DragHelper"))(x,{document:r.ownerDocument,handle:x+"-"+t.name,start:function(){n=e},drag:function(e){l(t,n,e.deltaX,e.deltaY)}})}Qt('<div id="'+x+'" class="'+w+'croprect-container" role="grid" aria-dropeffect="execute">').appendTo(r),ge.each(y,function(e){Qt("#"+x,r).append('<div id="'+x+"-"+e+'"class="'+w+'croprect-block" style="display: none" data-mce-bogus="all">')}),ge.each(v,function(e){Qt("#"+x,r).append('<div id="'+x+"-"+e.name+'" class="'+w+"croprect-handle "+w+"croprect-handle-"+e.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+e.label+'" aria-grabbed="false">')}),b=ge.map(v,t),c(e),Qt(r).on("focusin focusout",function(e){Qt(e.target).attr("aria-grabbed","focus"===e.type)}),Qt(r).on("keydown",function(t){function n(e,t,n,o,i){e.stopPropagation(),e.preventDefault(),l(r,n,o,i)}var r;switch(ge.each(v,function(e){if(t.target.id===x+"-"+e.name)return r=e,!1}),t.keyCode){case en.LEFT:n(t,r,e,-10,0);break;case en.RIGHT:n(t,r,e,10,0);break;case en.UP:n(t,r,e,0,-10);break;case en.DOWN:n(t,r,e,0,10);break;case en.ENTER:case en.SPACEBAR:t.preventDefault(),o()}})}(),g=ge.extend({toggleVisibility:u,setClampRect:p,setRect:d,getInnerRect:s,setInnerRect:h,setViewPortRect:f,destroy:m},Zt)}function re(e){return{blob:e,url:It.createObjectURL(e)}}function oe(e){e&&It.revokeObjectURL(e.url)}function ie(e){ge.each(e,oe)}function ae(e,t,n,r){function o(e){var t,n,r,o;t=S.find("#w")[0],n=S.find("#h")[0],r=parseInt(t.value(),10),o=parseInt(n.value(),10),S.find("#constrain")[0].checked()&&X&&Y&&r&&o&&("w"===e.control.settings.name?(o=Math.round(r*J),n.value(o)):(r=Math.round(o*Q),t.value(r))),X=r,Y=o}function i(e){return Math.round(100*e)+"%"}function a(){S.find("#undo").disabled(!Z.canUndo()),S.find("#redo").disabled(!Z.canRedo()),S.statusbar.find("#save").disabled(!Z.canUndo())}function s(){S.find("#undo").disabled(!0),S.find("#redo").disabled(!0)}function l(e){e&&M.imageSrc(e.url)}function u(e){return function(){var t=ge.grep(G,function(t){return t.settings.name!==e});ge.each(t,function(e){e.hide()}),e.show(),e.focus()}}function c(e){O=re(e),l(O)}function d(e){t=re(e),l(t),ie(Z.add(t).removed),a()}function f(){var e=M.selection();Rt.blobToImageResult(t.blob).then(function(t){_t.crop(t,e.x,e.y,e.w,e.h).then(ae).then(function(e){d(e),p()})})}function h(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=[].slice.call(arguments,1);return function(){Rt.blobToImageResult(t.blob).then(function(t){e.apply(this,[t].concat(o)).then(ae).then(d)})}}function p(){l(t),oe(O),u(T)(),a()}function m(t,n){O?n():setTimeout(function(){t-- >0?m(t,n):e.windowManager.alert("Error: failed to apply image operation.")},10)}function g(){O?(d(O.blob),p()):m(100,g)}function v(){var e=M.zoom();e<2&&(e+=.1),M.zoom(e)}function b(){var e=M.zoom();e>.1&&(e-=.1),M.zoom(e)}function y(){t=Z.undo(),l(t),a()}function w(){t=Z.redo(),l(t),a()}function x(){n(t.blob),S.close()}function C(e){return Gt.create("Form",{layout:"flex",direction:"row",labelGap:5,border:"0 0 1 0",align:"center",pack:"center",padding:"0 10 0 10",spacing:5,flex:0,minHeight:60,defaults:{classes:"imagetool",type:"button"},items:e})}function k(e,n){return C(ee([{text:"Back",onclick:p},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:g}])).hide().on("show",function(){s(),Rt.blobToImageResult(t.blob).then(function(e){return n(e)}).then(ae).then(function(e){var t=re(e);l(t),oe(O),O=t})})}function N(n,r,o,a,u){function c(e){Rt.blobToImageResult(t.blob).then(function(t){return r(t,e)}).then(ae).then(function(e){var t=re(e);l(t),oe(O),O=t})}return C(ee([{text:"Back",onclick:p},{type:"spacer",flex:1},{type:"slider",flex:1,ondragend:function(e){c(e.value)},minValue:e.rtl?u:a,maxValue:e.rtl?a:u,value:o,previewFilter:i},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:g}])).hide().on("show",function(){this.find("slider").value(o),s()})}function _(e){!0===e.control.value()&&(J=Y/X,Q=X/Y)}var S,T,E,O,A,D,R,M,P,L,I,j,B,F,H,U,z,W,V,q,$,K,G,X,Y,J,Q,Z=te(),ee=function(t){return e.rtl?t.reverse():t},ne=function(e){var n=[].slice.call(arguments,1);return function(){var r=O||t;Rt.blobToImageResult(r.blob).then(function(t){e.apply(this,[t].concat(n)).then(ae).then(c)})}},ae=function(e){return e.toBlob()};A=C(ee([{text:"Back",onclick:p},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:f}])).hide().on("show hide",function(e){M.toggleCropRect("show"===e.type)}).on("show",s),D=C(ee([{text:"Back",onclick:p},{type:"spacer",flex:1},{type:"textbox",name:"w",label:"Width",size:4,onkeyup:o},{type:"textbox",name:"h",label:"Height",size:4,onkeyup:o},{type:"checkbox",name:"constrain",text:"Constrain proportions",checked:!0,onchange:_},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:"submit"}])).hide().on("submit",function(e){var t=parseInt(S.find("#w").value(),10),n=parseInt(S.find("#h").value(),10);e.preventDefault(),h(_t.resize,t,n)(),p()}).on("show",s),R=C(ee([{text:"Back",onclick:p},{type:"spacer",flex:1},{icon:"fliph",tooltip:"Flip horizontally",onclick:ne(_t.flip,"h")},{icon:"flipv",tooltip:"Flip vertically",onclick:ne(_t.flip,"v")},{icon:"rotateleft",tooltip:"Rotate counterclockwise",onclick:ne(_t.rotate,-90)},{icon:"rotateright",tooltip:"Rotate clockwise",onclick:ne(_t.rotate,90)},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:g}])).hide().on("show",s),I=k("Invert",_t.invert),V=k("Sharpen",_t.sharpen),q=k("Emboss",_t.emboss),j=N("Brightness",_t.brightness,0,-1,1),B=N("Hue",_t.hue,180,0,360),F=N("Saturate",_t.saturate,0,-1,1),H=N("Contrast",_t.contrast,0,-1,1),U=N("Grayscale",_t.grayscale,0,0,1),z=N("Sepia",_t.sepia,0,0,1),W=function(n,r){function o(){var e,n,o;e=S.find("#r")[0].value(),n=S.find("#g")[0].value(),o=S.find("#b")[0].value(),Rt.blobToImageResult(t.blob).then(function(t){return r(t,e,n,o)}).then(ae).then(function(e){var t=re(e);l(t),oe(O),O=t})}var a=e.rtl?2:0,u=e.rtl?0:2;return C(ee([{text:"Back",onclick:p},{type:"spacer",flex:1},{type:"slider",label:"R",name:"r",minValue:a,value:1,maxValue:u,ondragend:o,previewFilter:i},{type:"slider",label:"G",name:"g",minValue:a,value:1,maxValue:u,ondragend:o,previewFilter:i},{type:"slider",label:"B",name:"b",minValue:a,value:1,maxValue:u,ondragend:o,previewFilter:i},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:g}])).hide().on("show",function(){S.find("#r,#g,#b").value(1),s()})}("Colorize",_t.colorize),$=N("Gamma",_t.gamma,0,-1,1),K=N("Exposure",_t.exposure,1,0,2),E=C(ee([{text:"Back",onclick:p},{type:"spacer",flex:1},{text:"hue",icon:"hue",onclick:u(B)},{text:"saturate",icon:"saturate",onclick:u(F)},{text:"sepia",icon:"sepia",onclick:u(z)},{text:"emboss",icon:"emboss",onclick:u(q)},{text:"exposure",icon:"exposure",onclick:u(K)},{type:"spacer",flex:1}])).hide(),T=C(ee([{tooltip:"Crop",icon:"crop",onclick:u(A)},{tooltip:"Resize",icon:"resize2",onclick:u(D)},{tooltip:"Orientation",icon:"orientation",onclick:u(R)},{tooltip:"Brightness",icon:"sun",onclick:u(j)},{tooltip:"Sharpen",icon:"sharpen",onclick:u(V)},{tooltip:"Contrast",icon:"contrast",onclick:u(H)},{tooltip:"Color levels",icon:"drop",onclick:u(W)},{tooltip:"Gamma",icon:"gamma",onclick:u($)},{tooltip:"Invert",icon:"invert",onclick:u(I)}])),M=rn.create({flex:1,imageSrc:t.url}),P=Gt.create("Container",{layout:"flex",direction:"column",pack:"start",border:"0 1 0 0",padding:5,spacing:5,items:[{type:"button",icon:"undo",tooltip:"Undo",name:"undo",onclick:y},{type:"button",icon:"redo",tooltip:"Redo",name:"redo",onclick:w},{type:"button",icon:"zoomin",tooltip:"Zoom in",onclick:v},{type:"button",icon:"zoomout",tooltip:"Zoom out",onclick:b}]}),L=Gt.create("Container",{type:"container",layout:"flex",direction:"row",align:"stretch",flex:1,items:ee([P,M])}),G=[T,A,D,R,E,I,j,B,F,H,U,z,W,V,q,$,K],S=e.windowManager.open({layout:"flex",direction:"column",align:"stretch",minWidth:Math.min(Kt.DOM.getViewPort().w,800),minHeight:Math.min(Kt.DOM.getViewPort().h,650),title:"Edit image",items:G.concat([L]),buttons:ee([{text:"Save",name:"save",subtype:"primary",onclick:x},{text:"Cancel",onclick:"close"}])}),S.on("close",function(){r(),ie(Z.data),Z=null,O=null}),Z.add(t),a(),M.on("load",function(){X=M.imageSize().w,Y=M.imageSize().h,J=Y/X,Q=X/Y,S.find("#w").value(X),S.find("#h").value(Y)}),M.on("crop",f)}function se(e,t){return new Bt(function(n,r){return t.toBlob().then(function(t){ae(e,re(t),n,r)})})}function le(e){function t(e){return/^[0-9\.]+px$/.test(e)}var n,r;return n=e.style.width,r=e.style.height,n||r?t(n)&&t(r)?{w:parseInt(n,10),h:parseInt(r,10)}:null:(n=e.width,r=e.height,n&&r?{w:parseInt(n,10),h:parseInt(r,10)}:null)}function ue(e,t){var n,r;t&&(n=e.style.width,r=e.style.height,(n||r)&&(e.style.width=t.w+"px",e.style.height=t.h+"px",e.removeAttribute("data-mce-style")),n=e.width,r=e.height,(n||r)&&(e.setAttribute("width",t.w),e.setAttribute("height",t.h)))}function ce(e){return{w:e.naturalWidth,h:e.naturalHeight}}function de(){return new(Ie.getOrDie("XMLHttpRequest"))}function fe(e,t){return gn.requestUrlAsBlob(e,{},t).then(function(e){return e.status<200||e.status>=300?Sn.handleHttpError(e.status):Bt.resolve(e.blob)})}function he(){}var pe=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return pe(n())}}},me=tinymce.util.Tools.resolve("tinymce.PluginManager"),ge=tinymce.util.Tools.resolve("tinymce.util.Tools"),ve={create:t,clone:n,resize:i,get2dContext:r,get3dContext:o},be={getWidth:a,getHeight:s},ye=window.Promise?window.Promise:function(){function t(e,t){return function(){e.apply(t,arguments)}}function n(e){var t=this;if(null===this._state)return void this._deferreds.push(e);u(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return void(t._state?e.resolve:e.reject)(t._value);var r;try{r=n(t._value)}catch(t){return void e.reject(t)}e.resolve(r)})}function r(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if("function"==typeof n)return void s(t(n,e),t(r,this),t(o,this))}this._state=!0,this._value=e,i.call(this)}catch(e){o.call(this,e)}}function o(e){this._state=!1,this._value=e,i.call(this)}function i(){for(var e=0,t=this._deferreds.length;e<t;e++)n.call(this,this._deferreds[e]);this._deferreds=null}function a(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function s(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(e){if(r)return;r=!0,n(e)}}var l=function(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],s(e,t(r,this),t(o,this))},u=l.immediateFn||"function"==typeof e&&e||function(e){setTimeout(e,1)},c=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};return l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){var r=this;return new l(function(o,i){n.call(r,new a(e,t,o,i))})},l.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&c(arguments[0])?arguments[0]:arguments);return new l(function(t,n){function r(i,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){r(i,e)},n)}e[i]=a,0==--o&&t(e)}catch(e){n(e)}}if(0===e.length)return t([]);for(var o=e.length,i=0;i<e.length;i++)r(i,e[i])})},l.resolve=function(e){return e&&"object"==typeof e&&e.constructor===l?e:new l(function(t){t(e)})},l.reject=function(e){return new l(function(t,n){n(e)})},l.race=function(e){return new l(function(t,n){for(var r=0,o=e.length;r<o;r++)e[r].then(t,n)})},l}(),we=function(e){return function(){return e}},xe=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=new Array(arguments.length-1),o=1;o<arguments.length;o++)r[o-1]=arguments[o];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];var a=r.concat(o);return e.apply(null,a)}},Ce=we(!1),ke=we(!0),Ne=Ce,_e=ke,Se=function(){return Te},Te=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e},r=function(){},o=function(){return null},i=function(){},a={fold:function(e,t){return e()},is:Ne,isSome:Ne,isNone:_e,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:o,getOrUndefined:i,or:n,orThunk:t,map:Se,ap:Se,each:r,bind:Se,flatten:Se,exists:Ne,forall:_e,filter:Se,equals:e,equals_:e,toArray:function(){return[]},toString:we("none()")};return Object.freeze&&Object.freeze(a),a}(),Ee=function(e){var t=function(){return e},n=function(){return i},r=function(t){return Ee(t(e))},o=function(t){return t(e)},i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:_e,isNone:Ne,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:r,ap:function(t){return t.fold(Se,function(t){return Ee(t(e))})},each:function(t){t(e)},bind:o,flatten:t,exists:o,forall:o,filter:function(t){return t(e)?i:Te},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(Ne,function(t){return n(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return i},Oe=function(e){return null===e||void 0===e?Te:Ee(e)},Ae={some:Ee,none:Se,from:Oe},De="undefined"!=typeof window?window:Function("return this;")(),Re=function(e,t){for(var n=void 0!==t&&null!==t?t:De,r=0;r<e.length&&void 0!==n&&null!==n;++r)n=n[e[r]];return n},Me=function(e,t){var n=e.split(".");return Re(n,t)},Pe=function(e,t){return Me(e,t)},Le=function(e,t){var n=Pe(e,t);if(void 0===n||null===n)throw e+" not available on this browser";return n},Ie={getOrDie:Le},je=function(e){Ie.getOrDie("requestAnimationFrame")(e)},Be=function(e){return Ie.getOrDie("atob")(e)},Fe={atob:Be,requestAnimationFrame:je},He={blobToImage:f,imageToBlob:d,blobToArrayBuffer:x,blobToDataUri:w,blobToBase64:C,dataUriToBlobSync:p,canvasToBlob:v,canvasToDataURL:b,blobToCanvas:y,uriToBlob:g},Ue=function(e){return He.blobToImage(e)},ze=function(e){return He.imageToBlob(e)},We=function(e){return He.blobToDataUri(e)},Ve=function(e){return He.blobToBase64(e)},qe=function(e){return He.dataUriToBlobSync(e)},$e=function(e){return Ae.from(He.uriToBlob(e))},Ke={blobToImage:Ue,imageToBlob:ze,blobToDataUri:We,blobToBase64:Ve,dataUriToBlobSync:qe,uriToBlob:$e},Ge=function(e,t){return N(He.blobToCanvas(e),e,t)},Xe={fromBlob:_,fromCanvas:S,fromImage:T,fromBlobAndUrlSync:Ge},Ye=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],Je={identity:O,adjust:D,multiply:A,adjustContrast:R,adjustBrightness:L,adjustSaturation:M,adjustHue:P,adjustColors:I,adjustSepia:j,adjustGrayscale:B},Qe={invert:function(e){return function(t){return F(t,e)}}([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0]),brightness:V(Je.adjustBrightness),hue:V(Je.adjustHue),saturate:V(Je.adjustSaturation),contrast:V(Je.adjustContrast),grayscale:V(Je.adjustGrayscale),sepia:V(Je.adjustSepia),colorize:function(e,t,n,r){return F(e,Je.adjustColors(Je.identity(),t,n,r))},sharpen:q([0,-1,0,-1,5,-1,0,-1,0]),emboss:q([-2,-1,0,-1,1,1,0,1,2]),gamma:W(function(e,t){return 255*Math.pow(e/255,1-t)}),exposure:W(function(e,t){return 255*(1-Math.exp(-e/255*t))}),colorFilter:F,convoluteFilter:U},Ze={scale:$},et={rotate:G,flip:Y,crop:Q,resize:ee},tt=function(){function e(e){this.littleEndian=!1,this._dv=new DataView(e)}return e.prototype.readByteAt=function(e){return this._dv.getUint8(e)},e.prototype.read=function(e,t){if(e+t>this.length())return null;for(var n=this.littleEndian?0:-8*(t-1),r=0,o=0;r<t;r++)o|=this.readByteAt(e+r)<<Math.abs(n+8*r);return o},e.prototype.BYTE=function(e){return this.read(e,1)},e.prototype.SHORT=function(e){return this.read(e,2)},e.prototype.LONG=function(e){return this.read(e,4)},e.prototype.SLONG=function(e){var t=this.read(e,4);return t>2147483647?t-4294967296:t},e.prototype.CHAR=function(e){return String.fromCharCode(this.read(e,1))},e.prototype.STRING=function(e,t){return this.asArray("CHAR",e,t).join("")},e.prototype.SEGMENT=function(e,t){var n=this._dv.buffer;switch(arguments.length){case 2:return n.slice(e,e+t);case 1:return n.slice(e);default:return n}},e.prototype.asArray=function(e,t,n){for(var r=[],o=0;o<n;o++)r[o]=this[e](t+o);return r},e.prototype.length=function(){return this._dv?this._dv.byteLength:0},e}(),nt={tiff:{274:"Orientation",270:"ImageDescription",271:"Make",272:"Model",305:"Software",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"},thumb:{513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength"}},rt={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},ot=function(){function e(e){this._offsets={tiffHeader:10,IFD0:null,IFD1:null,exifIFD:null,gpsIFD:null},this._tiffTags={};var t=this;if(t._reader=new tt(e),t._idx=t._offsets.tiffHeader,65505!==t.SHORT(0)||"EXIF\0"!==t.STRING(4,5).toUpperCase())throw new Error("Exif data cannot be read or not available.");if(t._reader.littleEndian=18761==t.SHORT(t._idx),42!==t.SHORT(t._idx+=2))throw new Error("Invalid Exif data.");t._offsets.IFD0=t._offsets.tiffHeader+t.LONG(t._idx+=2),t._tiffTags=t.extractTags(t._offsets.IFD0,nt.tiff),"ExifIFDPointer"in t._tiffTags&&(t._offsets.exifIFD=t._offsets.tiffHeader+t._tiffTags.ExifIFDPointer,delete t._tiffTags.ExifIFDPointer),"GPSInfoIFDPointer"in t._tiffTags&&(t._offsets.gpsIFD=t._offsets.tiffHeader+t._tiffTags.GPSInfoIFDPointer,delete t._tiffTags.GPSInfoIFDPointer);var n=t.LONG(t._offsets.IFD0+12*t.SHORT(t._offsets.IFD0)+2);n&&(t._offsets.IFD1=t._offsets.tiffHeader+n)}return e.prototype.BYTE=function(e){return this._reader.BYTE(e)},e.prototype.SHORT=function(e){return this._reader.SHORT(e)},e.prototype.LONG=function(e){return this._reader.LONG(e)},e.prototype.SLONG=function(e){return this._reader.SLONG(e)},e.prototype.CHAR=function(e){return this._reader.CHAR(e)},e.prototype.STRING=function(e,t){return this._reader.STRING(e,t)},e.prototype.SEGMENT=function(e,t){return this._reader.SEGMENT(e,t)},e.prototype.asArray=function(e,t,n){for(var r=[],o=0;o<n;o++)r[o]=this[e](t+o);return r},e.prototype.length=function(){return this._reader.length()},e.prototype.UNDEFINED=function(){return this.BYTE.apply(this,arguments)},e.prototype.RATIONAL=function(e){return this.LONG(e)/this.LONG(e+4)},e.prototype.SRATIONAL=function(e){return this.SLONG(e)/this.SLONG(e+4)},e.prototype.ASCII=function(e){return this.CHAR(e)},e.prototype.TIFF=function(){return this._tiffTags},e.prototype.EXIF=function(){var e=this,t=null;if(e._offsets.exifIFD){try{t=e.extractTags(e._offsets.exifIFD,nt.exif)}catch(e){return null}if(t.ExifVersion&&Array.isArray(t.ExifVersion)){for(var n=0,r="";n<t.ExifVersion.length;n++)r+=String.fromCharCode(t.ExifVersion[n]);t.ExifVersion=r}}return t},e.prototype.GPS=function(){var e=this,t=null;if(e._offsets.gpsIFD){try{t=e.extractTags(e._offsets.gpsIFD,nt.gps)}catch(e){return null}t.GPSVersionID&&Array.isArray(t.GPSVersionID)&&(t.GPSVersionID=t.GPSVersionID.join("."))}return t},e.prototype.thumb=function(){var e=this;if(e._offsets.IFD1)try{var t=e.extractTags(e._offsets.IFD1,nt.thumb);if("JPEGInterchangeFormat"in t)return e.SEGMENT(e._offsets.tiffHeader+t.JPEGInterchangeFormat,t.JPEGInterchangeFormatLength)}catch(e){}return null},e.prototype.extractTags=function(e,t){var n,r,o,i,a,s,l,u,c=this,d=[],f={},h={1:"BYTE",7:"UNDEFINED",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",9:"SLONG",10:"SRATIONAL"},p={BYTE:1,UNDEFINED:1,ASCII:1,SHORT:2,LONG:4,RATIONAL:8,SLONG:4,SRATIONAL:8};for(n=c.SHORT(e),r=0;r<n;r++)if(d=[],l=e+2+12*r,void 0!==(o=t[c.SHORT(l)])){if(i=h[c.SHORT(l+=2)],a=c.LONG(l+=2),!(s=p[i]))throw new Error("Invalid Exif data.");if(l+=4,s*a>4&&(l=c.LONG(l)+c._offsets.tiffHeader),l+s*a>=c.length())throw new Error("Invalid Exif data.");"ASCII"!==i?(d=c.asArray(i,l,a),u=1==a?d[0]:d,rt.hasOwnProperty(o)&&"object"!=typeof u?f[o]=rt[o][u]:f[o]=u):f[o]=c.STRING(l,a).replace(/\0$/,"").trim()}return f},e}(),it=function(e){return He.blobToArrayBuffer(e).then(function(t){try{var n=new tt(t);if(65496===n.SHORT(0)){var r=at(n),o=r.filter(function(e){return"APP1"===e.name}),i={};if(!o.length)return ye.reject("Headers did not include required information");var a=new ot(o[0].segment);return i={tiff:a.TIFF(),exif:a.EXIF(),gps:a.GPS(),thumb:a.thumb()},i.rawHeaders=r,i}return ye.reject("Image was not a jpeg")}catch(t){return ye.reject("Unsupported format or not an image: "+e.type+" (Exception: "+t.message+")")}})},at=function(e){var t,n,r=[],o=0;for(t=2;t<=e.length();)if((n=e.SHORT(t))>=65488&&n<=65495)t+=2;else{if(65498===n||65497===n)break;o=e.SHORT(t+2)+2,n>=65505&&n<=65519&&r.push({hex:n,name:"APP"+(15&n),start:t,length:o,segment:e.SEGMENT(t,o)}),t+=o}return r},st={extractFrom:it},lt=function(e){return Qe.invert(e)},ut=function(e){return Qe.sharpen(e)},ct=function(e){return Qe.emboss(e)},dt=function(e,t){return Qe.gamma(e,t)},ft=function(e,t){return Qe.exposure(e,t)},ht=function(e,t,n,r){return Qe.colorize(e,t,n,r)},pt=function(e,t){return Qe.brightness(e,t)},mt=function(e,t){return Qe.hue(e,t)},gt=function(e,t){return Qe.saturate(e,t)},vt=function(e,t){return Qe.contrast(e,t)},bt=function(e,t){return Qe.grayscale(e,t)},yt=function(e,t){return Qe.sepia(e,t)},wt=function(e,t){return et.flip(e,t)},xt=function(e,t,n,r,o){return et.crop(e,t,n,r,o)},Ct=function(e,t,n){return et.resize(e,t,n)},kt=function(e,t){return et.rotate(e,t)},Nt=function(e){var t=function(t){switch(t.tiff.Orientation){case 6:return kt(e,90);case 3:return kt(e,180);case 8:return kt(e,270);default:return e}},n=function(){return e};return e.toBlob().then(st.extractFrom).then(t,n)},_t={invert:lt,sharpen:ut,emboss:ct,brightness:pt,hue:mt,saturate:gt,contrast:vt,grayscale:bt,sepia:yt,colorize:ht,gamma:dt,exposure:ft,flip:wt,crop:xt,resize:Ct,rotate:kt,exifRotate:Nt},St=function(e){return Xe.fromBlob(e)},Tt=function(e,t){return Xe.fromBlobAndUrlSync(e,t)},Et=function(e){return Xe.fromImage(e)},Ot=function(e,t,n){return void 0===t&&void 0===n?At(e):e.toAdjustedBlob(t,n)},At=function(e){return e.toBlob()},Dt=function(e){return e.toDataURL()},Rt={blobToImageResult:St,fromBlobAndUrlSync:Tt,imageToImageResult:Et,imageResultToBlob:Ot,imageResultToOriginalBlob:At,imageResultToDataURL:Dt},Mt=function(){return Ie.getOrDie("URL")},Pt=function(e){return Mt().createObjectURL(e)},Lt=function(e){Mt().revokeObjectURL(e)},It={createObjectURL:Pt,revokeObjectURL:Lt},jt=tinymce.util.Tools.resolve("tinymce.util.Delay"),Bt=tinymce.util.Tools.resolve("tinymce.util.Promise"),Ft=tinymce.util.Tools.resolve("tinymce.util.URI"),Ht=function(e){return e.getParam("imagetools_toolbar","rotateleft rotateright | flipv fliph | crop editimage imageoptions")},Ut=function(e){return e.getParam("imagetools_proxy")},zt=function(e){return e.getParam("imagetools_cors_hosts",[],"string[]")},Wt=function(e){return e.getParam("imagetools_credentials_hosts",[],"string[]")},Vt=function(e){return e.getParam("api_key",e.getParam("imagetools_api_key","","string"),"string")},qt=function(e){return e.getParam("images_upload_timeout",3e4,"number")},$t=function(e){return e.getParam("images_reuse_filename",!1,"boolean")},Kt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Gt=tinymce.util.Tools.resolve("tinymce.ui.Factory"),Xt=tinymce.util.Tools.resolve("tinymce.geom.Rect"),Yt=function(e){return new Bt(function(t){var n=function(){e.removeEventListener("load",n),t(e)};e.complete?t(e):e.addEventListener("load",n)})},Jt={loadImage:Yt},Qt=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),Zt=tinymce.util.Tools.resolve("tinymce.util.Observable"),en=tinymce.util.Tools.resolve("tinymce.util.VK"),tn=0,nn=function(e){return new(Gt.get("Control").extend({Defaults:{classes:"imagepanel"},selection:function(e){return arguments.length?(this.state.set("rect",e),this):this.state.get("rect")},imageSize:function(){var e=this.state.get("viewRect");return{w:e.w,h:e.h}},toggleCropRect:function(e){this.state.set("cropEnabled",e)},imageSrc:function(e){var t=this,n=new Image;n.src=e,Jt.loadImage(n).then(function(){var e,r,o=t.state.get("viewRect");if(r=t.$el.find("img"),r[0])r.replaceWith(n);else{var i=document.createElement("div");i.className="mce-imagepanel-bg",t.getEl().appendChild(i),t.getEl().appendChild(n)}e={x:0,y:0,w:n.naturalWidth,h:n.naturalHeight},t.state.set("viewRect",e),t.state.set("rect",Xt.inflate(e,-20,-20)),o&&o.w===e.w&&o.h===e.h||t.zoomFit(),t.repaintImage(),t.fire("load")})},zoom:function(e){return arguments.length?(this.state.set("zoom",e),this):this.state.get("zoom")},postRender:function(){return this.imageSrc(this.settings.imageSrc),this._super()},zoomFit:function(){var e,t,n,r,o,i,a,s=this;a=10,e=s.$el.find("img"),t=s.getEl().clientWidth,n=s.getEl().clientHeight,r=e[0].naturalWidth,o=e[0].naturalHeight,i=Math.min((t-a)/r,(n-a)/o),i>=1&&(i=1),s.zoom(i)},repaintImage:function(){var e,t,n,r,o,i,a,s,l,u,c;c=this.getEl(),l=this.zoom(),u=this.state.get("rect"),a=this.$el.find("img"),s=this.$el.find(".mce-imagepanel-bg"),o=c.offsetWidth,i=c.offsetHeight,n=a[0].naturalWidth*l,r=a[0].naturalHeight*l,e=Math.max(0,o/2-n/2),t=Math.max(0,i/2-r/2),a.css({left:e,top:t,width:n,height:r}),s.css({left:e,top:t,width:n,height:r}),this.cropRect&&(this.cropRect.setRect({x:u.x*l+e,y:u.y*l+t,w:u.w*l,h:u.h*l}),this.cropRect.setClampRect({x:e,y:t,w:n,h:r}),this.cropRect.setViewPortRect({x:0,y:0,w:o,h:i}))},bindStates:function(){function e(e){t.cropRect=ne(e,t.state.get("viewRect"),t.state.get("viewRect"),t.getEl(),function(){t.fire("crop")}),t.cropRect.on("updateRect",function(e){var n=e.rect,r=t.zoom();n={x:Math.round(n.x/r),y:Math.round(n.y/r),w:Math.round(n.w/r),h:Math.round(n.h/r)},t.state.set("rect",n)}),t.on("remove",t.cropRect.destroy)}var t=this;t.state.on("change:cropEnabled",function(e){t.cropRect.toggleVisibility(e.value),t.repaintImage()}),t.state.on("change:zoom",function(){t.repaintImage()}),t.state.on("change:rect",function(n){var r=n.value;t.cropRect||e(r),t.cropRect.setRect(r)})}}))(e)},rn={create:nn},on={edit:se},an={getImageSize:le,setImageSize:ue,getNaturalImageSize:ce},sn=function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t},ln=function(e){return function(t){return sn(t)===e}}("function"),un=function(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];if(t(o,n,e))return Ae.some(o)}return Ae.none()},cn=Array.prototype.slice,dn=(ln(Array.from)&&Array.from,function(e){return null!==e&&void 0!==e}),fn=function(e,t){var n;return n=t.reduce(function(e,t){return dn(e)?e[t]:void 0},e),dn(n)?n:null},hn=function(e,t,n){return new Bt(function(r){var o;o=new de,o.onreadystatechange=function(){4===o.readyState&&r({status:o.status,blob:this.response})},o.open("GET",e,!0),o.withCredentials=n,ge.each(t,function(e,t){o.setRequestHeader(t,e)}),o.responseType="blob",o.send()})},pn=function(e){return new Bt(function(t){var n=new u;n.onload=function(e){var n=e.target;t(n.result)},n.readAsText(e)})},mn=function(e){var t;try{t=JSON.parse(e)}catch(e){}return t},gn={traverse:fn,readBlob:pn,requestUrlAsBlob:hn,parseJson:mn},vn=[{code:404,message:"Could not find Image Proxy"},{code:403,message:"Rejected request"},{code:0,message:"Incorrect Image Proxy URL"}],bn=[{type:"key_missing",message:"The request did not include an api key."},{type:"key_not_found",message:"The provided api key could not be found."},{type:"domain_not_trusted",message:"The api key is not valid for the request origins."}],yn=function(e){return 400===e||403===e||500===e},wn=function(e){return"ImageProxy HTTP error: "+un(vn,function(t){return e===t.code}).fold(we("Unknown ImageProxy error"),function(e){return e.message})},xn=function(e){var t=wn(e);return Bt.reject(t)},Cn=function(e){return un(bn,function(t){return t.type===e}).fold(we("Unknown service error"),function(e){return e.message})},kn=function(e){var t=gn.parseJson(e),n=gn.traverse(t,["error","type"]);return"ImageProxy Service error: "+(n?Cn(n):"Invalid JSON in service error message")},Nn=function(e,t){return gn.readBlob(t).then(function(e){var t=kn(e);return Bt.reject(t)})},_n=function(e,t){return yn(e)?Nn(0,t):xn(e)},Sn={handleServiceErrorResponse:_n,handleHttpError:xn,getHttpErrorMsg:wn,getServiceErrorMsg:Cn},Tn=function(e,t){var n=-1===e.indexOf("?")?"?":"&";return/[?&]apiKey=/.test(e)||!t?e:e+n+"apiKey="+encodeURIComponent(t)},En=function(e,t){var n={"Content-Type":"application/json;charset=UTF-8","tiny-api-key":t};return gn.requestUrlAsBlob(Tn(e,t),n,!1).then(function(e){return e.status<200||e.status>=300?Sn.handleServiceErrorResponse(e.status,e.blob):Bt.resolve(e.blob)})},On=function(e,t,n){return t?En(e,t):fe(e,n)},An={getUrl:On},Dn=0,Rn=function(e,t){return e.dom.is(t,"img:not([data-mce-object],[data-mce-placeholder])")&&(jn(e,t)||Bn(e,t)||e.settings.imagetools_proxy)},Mn=function(e,t){e.notificationManager.open({text:t,type:"error"})},Pn=function(e){return e.selection.getNode()},Ln=function(e,t){var n=t.match(/\/([^\/\?]+)?\.(?:jpeg|jpg|png|gif)(?:\?|$)/i);return n?e.dom.encode(n[1]):null},In=function(){return"imagetools"+Dn++},jn=function(e,t){var n=t.src;return 0===n.indexOf("data:")||0===n.indexOf("blob:")||new Ft(n).host===e.documentBaseURI.host},Bn=function(e,t){return-1!==ge.inArray(zt(e),new Ft(t.src).host)},Fn=function(e,t){return-1!==ge.inArray(Wt(e),new Ft(t.src).host)},Hn=function(e,t){var n,r=t.src;return Bn(e,t)?An.getUrl(t.src,null,Fn(e,t)):jn(e,t)?Ke.imageToBlob(t):(r=Ut(e),r+=(-1===r.indexOf("?")?"?":"&")+"url="+encodeURIComponent(t.src),n=Vt(e),An.getUrl(r,n,!1))},Un=function(e){var t;return t=e.editorUpload.blobCache.getByUri(Pn(e).src),t?Bt.resolve(t.blob()):Hn(e,Pn(e))},zn=function(e,t){var n=jt.setEditorTimeout(e,function(){e.editorUpload.uploadImagesAuto()},qt(e));t.set(n)},Wn=function(e){clearTimeout(e.get())},Vn=function(e,t,n,r,o){return t.toBlob().then(function(i){var a,s,l,u,c;return l=e.editorUpload.blobCache,c=Pn(e),a=c.src,$t(e)&&(u=l.getByUri(a),u?(a=u.uri(),s=u.name()):s=Ln(e,a)),u=l.create({id:In(),blob:i,base64:t.toBase64(),uri:a,name:s}),l.add(u),e.undoManager.transact(function(){function t(){e.$(c).off("load",t),e.nodeChanged(),n?e.editorUpload.uploadImagesAuto():(Wn(r),zn(e,r))}e.$(c).on("load",t),o&&e.$(c).attr({width:o.w,height:o.h}),e.$(c).attr({src:u.blobUri()}).removeAttr("data-mce-src")}),u})},qn=function(e,t,n,r){return function(){return e._scanForImages().then(xe(Un,e)).then(Rt.blobToImageResult).then(n).then(function(n){return Vn(e,n,!1,t,r)},function(t){Mn(e,t)})}},$n=function(e,t,n){return function(){var r=an.getImageSize(Pn(e)),o=r?{w:r.h,h:r.w}:null;return qn(e,t,function(e){return _t.rotate(e,n)},o)()}},Kn=function(e,t,n){return function(){return qn(e,t,function(e){return _t.flip(e,n)})()}},Gn=function(e,t){return function(){var n=Pn(e),r=an.getNaturalImageSize(n),o=function(e){return new Bt(function(t){Ke.blobToImage(e).then(function(o){var i=an.getNaturalImageSize(o);r.w===i.w&&r.h===i.h||an.getImageSize(n)&&an.setImageSize(n,i),It.revokeObjectURL(o.src),t(e)})})},i=function(e,n){return on.edit(e,n).then(o).then(Rt.blobToImageResult).then(function(n){return Vn(e,n,!0,t)},function(){})};Un(e).then(Rt.blobToImageResult).then(xe(i,e),function(t){Mn(e,t)})}},Xn={rotate:$n,flip:Kn,editImageDialog:Gn,isEditableImage:Rn,cancelTimedUpload:Wn},Yn=function(e,t){ge.each({mceImageRotateLeft:Xn.rotate(e,t,-90),mceImageRotateRight:Xn.rotate(e,t,90),mceImageFlipVertical:Xn.flip(e,t,"v"),mceImageFlipHorizontal:Xn.flip(e,t,"h"),mceEditImage:Xn.editImageDialog(e,t)},function(t,n){e.addCommand(n,t)})},Jn={register:Yn},Qn=function(e,t,n){e.on("NodeChange",function(r){var o=n.get();o&&o.src!==r.element.src&&(Xn.cancelTimedUpload(t),e.editorUpload.uploadImagesAuto(),n.set(null)),Xn.isEditableImage(e,r.element)&&n.set(r.element)})},Zn={setup:Qn},er=function(e){e.addButton("rotateleft",{title:"Rotate counterclockwise",cmd:"mceImageRotateLeft"}),e.addButton("rotateright",{title:"Rotate clockwise",cmd:"mceImageRotateRight"}),e.addButton("flipv",{title:"Flip vertically",cmd:"mceImageFlipVertical"}),e.addButton("fliph",{title:"Flip horizontally",cmd:"mceImageFlipHorizontal"}),e.addButton("editimage",{title:"Edit image",cmd:"mceEditImage"}),e.addButton("imageoptions",{title:"Image options",icon:"options",cmd:"mceImage"})},tr={register:er},nr=function(e){e.addContextToolbar(xe(Xn.isEditableImage,e),Ht(e))},rr={register:nr};me.add("imagetools",function(e){var t=pe(0),n=pe(null);Jn.register(e,t),tr.register(e),rr.register(e),Zn.setup(e,t,n)})}()}()}).call(t,n(403).setImmediate)},3327:function(e,t,n){n(3328)},3328:function(e,t){!function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.VK"),r=function(e){return"boolean"==typeof e.link_assume_external_targets&&e.link_assume_external_targets},o=function(e){return"boolean"==typeof e.link_context_toolbar&&e.link_context_toolbar},i=function(e){return e.link_list},a=function(e){return"string"==typeof e.default_link_target},s=function(e){return e.default_link_target},l=function(e){return e.target_list},u=function(e,t){e.settings.target_list=t},c=function(e){return!1!==l(e)},d=function(e){return e.rel_list},f=function(e){return void 0!==d(e)},h=function(e){return e.link_class_list},p=function(e){return void 0!==h(e)},m=function(e){return!1!==e.link_title},g=function(e){return"boolean"==typeof e.allow_unsafe_link_target&&e.allow_unsafe_link_target},v={assumeExternalTargets:r,hasContextToolbar:o,getLinkList:i,hasDefaultLinkTarget:a,getDefaultLinkTarget:s,getTargetList:l,setTargetList:u,shouldShowTargetList:c,getRelList:d,hasRelList:f,getLinkClassList:h,hasLinkClassList:p,shouldShowLinkTitle:m,allowUnsafeLinkTarget:g},b=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),y=tinymce.util.Tools.resolve("tinymce.Env"),w=function(e,t){document.body.appendChild(e),e.dispatchEvent(t),document.body.removeChild(e)},x=function(e){if(!y.ie||y.ie>10){var t=document.createElement("a");t.target="_blank",t.href=e,t.rel="noreferrer noopener";var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),w(t,n)}else{var r=window.open("","_blank");if(r){r.opener=null;var o=r.document;o.open(),o.write('<meta http-equiv="refresh" content="0; url='+b.DOM.encode(e)+'">'),o.close()}}},C={open:x},k=tinymce.util.Tools.resolve("tinymce.util.Tools"),N=function(e,t){var n=["noopener"],r=e?e.split(/\s+/):[],o=function(e){return e.filter(function(e){return-1===k.inArray(n,e)})};return r=t?function(e){return e=o(e),e.length?e.concat(n):n}(r):o(r),r.length?function(e){return k.trim(e.sort().join(" "))}(r):null},_=function(e){return e.replace(/\uFEFF/g,"")},S=function(e,t){return t=t||e.selection.getNode(),D(t)?e.dom.select("a[href]",t)[0]:e.dom.getParent(t,"a[href]")},T=function(e,t){var n=t?t.innerText||t.textContent:e.getContent({format:"text"});return _(n)},E=function(e){return e&&"A"===e.nodeName&&e.href},O=function(e){return k.grep(e,E).length>0},A=function(e){return!(/</.test(e)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(e)||-1===e.indexOf("href=")))},D=function(e){return e&&"FIGURE"===e.nodeName&&/\bimage\b/i.test(e.className)},R=function(e,t){return function(n){e.undoManager.transact(function(){var r=e.selection.getNode(),o=S(e,r),i={href:n.href,target:n.target?n.target:null,rel:n.rel?n.rel:null,class:n.class?n.class:null,title:n.title?n.title:null};v.hasRelList(e.settings)||!1!==v.allowUnsafeLinkTarget(e.settings)||(i.rel=N(i.rel,"_blank"===i.target)),n.href===t.href&&(t.attach(),t={}),o?(e.focus(),n.hasOwnProperty("text")&&("innerText"in o?o.innerText=n.text:o.textContent=n.text),e.dom.setAttribs(o,i),e.selection.select(o),e.undoManager.add()):D(r)?L(e,r,i):n.hasOwnProperty("text")?e.insertContent(e.dom.createHTML("a",i,e.dom.encode(n.text))):e.execCommand("mceInsertLink",!1,i)})}},M=function(e){return function(){e.undoManager.transact(function(){var t=e.selection.getNode();D(t)?P(e,t):e.execCommand("unlink")})}},P=function(e,t){var n,r;(r=e.dom.select("img",t)[0])&&(n=e.dom.getParents(r,"a[href]",t)[0])&&(n.parentNode.insertBefore(r,n),e.dom.remove(n))},L=function(e,t,n){var r,o;(o=e.dom.select("img",t)[0])&&(r=e.dom.create("a",n),o.parentNode.insertBefore(r,o),r.appendChild(o))},I={link:R,unlink:M,isLink:E,hasLinks:O,isOnlyTextSelected:A,getAnchorElement:S,getAnchorText:T,toggleTargetRules:N},j=tinymce.util.Tools.resolve("tinymce.util.Delay"),B=tinymce.util.Tools.resolve("tinymce.util.XHR"),F={},H=function(e,t){var n=v.getLinkList(e.settings);"string"==typeof n?B.send({url:n,success:function(n){t(e,JSON.parse(n))}}):"function"==typeof n?n(function(n){t(e,n)}):t(e,n)},U=function(e,t,n){var r=function(e,n){return n=n||[],k.each(e,function(e){var o={text:e.text||e.title};e.menu?o.menu=r(e.menu):(o.value=e.value,t&&t(o)),n.push(o)}),n};return r(e,n||[])},z=function(e,t,n){var r=e.selection.getRng();j.setEditorTimeout(e,function(){e.windowManager.confirm(t,function(t){e.selection.setRng(r),n(t)})})},W=function(e,t){var n,r,o,i,a,s,l,u,c,d,f,h={},p=e.selection,m=e.dom,g=function(e){var t=o.find("#text");(!t.value()||e.lastControl&&t.value()===e.lastControl.text())&&t.value(e.control.text()),o.find("#href").value(e.control.value())},b=function(){r||!i||h.text||this.parent().parent().find("#text")[0].value(this.value())},y=function(t){var n=t.meta||{};s&&s.value(e.convertURL(this.value(),"href")),k.each(t.meta,function(e,t){var n=o.find("#"+t);"text"===t?0===r.length&&(n.value(e),h.text=e):n.value(e)}),n.attach&&(F={href:this.value(),attach:n.attach}),n.text||b.call(this)},w=function(e){e.meta=o.toJSON()};i=I.isOnlyTextSelected(p.getContent()),n=I.getAnchorElement(e),h.text=r=I.getAnchorText(e.selection,n),h.href=n?m.getAttrib(n,"href"):"",n?h.target=m.getAttrib(n,"target"):v.hasDefaultLinkTarget(e.settings)&&(h.target=v.getDefaultLinkTarget(e.settings)),(f=m.getAttrib(n,"rel"))&&(h.rel=f),(f=m.getAttrib(n,"class"))&&(h.class=f),(f=m.getAttrib(n,"title"))&&(h.title=f),i&&(a={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){h.text=this.value()}}),t&&(s={type:"listbox",label:"Link list",values:U(t,function(t){t.value=e.convertURL(t.value||t.url,"href")},[{text:"None",value:""}]),onselect:g,value:e.convertURL(h.href,"href"),onPostRender:function(){s=this}}),v.shouldShowTargetList(e.settings)&&(void 0===v.getTargetList(e.settings)&&v.setTargetList(e,[{text:"None",value:""},{text:"New window",value:"_blank"}]),u={name:"target",type:"listbox",label:"Target",values:U(v.getTargetList(e.settings))}),v.hasRelList(e.settings)&&(l={name:"rel",type:"listbox",label:"Rel",values:U(v.getRelList(e.settings),function(t){!1===v.allowUnsafeLinkTarget(e.settings)&&(t.value=I.toggleTargetRules(t.value,"_blank"===h.target))})}),v.hasLinkClassList(e.settings)&&(c={name:"class",type:"listbox",label:"Class",values:U(v.getLinkClassList(e.settings),function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({inline:"a",classes:[t.value]})})})}),v.shouldShowLinkTitle(e.settings)&&(d={name:"title",type:"textbox",label:"Title",value:h.title}),o=e.windowManager.open({title:"Insert link",data:h,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:y,onkeyup:b,onpaste:b,onbeforecall:w},a,d,function(t){var n=[];if(k.each(e.dom.select("a:not([href])"),function(e){var r=e.name||e.id;r&&n.push({text:r,value:"#"+r,selected:-1!==t.indexOf("#"+r)})}),n.length)return n.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:n,onselect:g}}(h.href),s,l,u,c],onSubmit:function(t){var n=v.assumeExternalTargets(e.settings),o=I.link(e,F),a=I.unlink(e),s=k.extend({},h,t.data),l=s.href;return l?(i&&s.text!==r||delete s.text,l.indexOf("@")>0&&-1===l.indexOf("//")&&-1===l.indexOf("mailto:")?void z(e,"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(e){e&&(s.href="mailto:"+l),o(s)}):!0===n&&!/^\w+:/i.test(l)||!1===n&&/^\s*www[\.|\d\.]/i.test(l)?void z(e,"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(e){e&&(s.href="http://"+l),o(s)}):void o(s)):void a()}})},V=function(e){H(e,W)},q={open:V},$=function(e,t){return e.dom.getParent(t,"a[href]")},K=function(e){return $(e,e.selection.getStart())},G=function(e){var t=e.getAttribute("data-mce-href");return t||e.getAttribute("href")},X=function(e){var t=e.plugins.contextmenu;return!!t&&t.isContextMenuVisible()},Y=function(e){return!0===e.altKey&&!1===e.shiftKey&&!1===e.ctrlKey&&!1===e.metaKey},J=function(e,t){if(t){var n=G(t);if(/^#/.test(n)){var r=e.$(n);r.length&&e.selection.scrollIntoView(r[0],!0)}else C.open(t.href)}},Q=function(e){return function(){q.open(e)}},Z=function(e){return function(){J(e,K(e))}},ee=function(e){return function(t){var n,r,o;return!!(v.hasContextToolbar(e.settings)&&!X(e)&&I.isLink(t)&&(n=e.selection,r=n.getRng(),o=r.startContainer,3===o.nodeType&&n.isCollapsed()&&r.startOffset>0&&r.startOffset<o.data.length))}},te=function(e){e.on("click",function(t){var r=$(e,t.target);r&&n.metaKeyPressed(t)&&(t.preventDefault(),J(e,r))}),e.on("keydown",function(t){var n=K(e);n&&13===t.keyCode&&Y(t)&&(t.preventDefault(),J(e,n))})},ne=function(e){return function(){var t=this;e.on("nodechange",function(n){t.active(!e.readonly&&!!I.getAnchorElement(e,n.element))})}},re=function(e){return function(){var t=this,n=function(e){I.hasLinks(e.parents)?t.show():t.hide()};I.hasLinks(e.dom.getParents(e.selection.getStart()))||t.hide(),e.on("nodechange",n),t.on("remove",function(){e.off("nodechange",n)})}},oe={openDialog:Q,gotoSelectedLink:Z,leftClickedOnAHref:ee,setupGotoLinks:te,toggleActiveState:ne,toggleViewLinkState:re},ie=function(e){e.addCommand("mceLink",oe.openDialog(e))},ae={register:ie},se=function(e){e.addShortcut("Meta+K","",oe.openDialog(e))},le={setup:se},ue=function(e){e.addButton("link",{active:!1,icon:"link",tooltip:"Insert/edit link",onclick:oe.openDialog(e),onpostrender:oe.toggleActiveState(e)}),e.addButton("unlink",{active:!1,icon:"unlink",tooltip:"Remove link",onclick:I.unlink(e),onpostrender:oe.toggleActiveState(e)}),e.addContextToolbar&&e.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:oe.gotoSelectedLink(e)})},ce=function(e){e.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:oe.gotoSelectedLink(e),onPostRender:oe.toggleViewLinkState(e),prependToContext:!0}),e.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:oe.openDialog(e),stateSelector:"a[href]",context:"insert",prependToContext:!0}),e.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onclick:I.unlink(e),stateSelector:"a[href]"})},de=function(e){e.addContextToolbar&&e.addContextToolbar(oe.leftClickedOnAHref(e),"openlink | link unlink")},fe={setupButtons:ue,setupMenuItems:ce,setupContextToolbars:de};t.add("link",function(e){fe.setupButtons(e),fe.setupMenuItems(e),fe.setupContextToolbars(e),oe.setupGotoLinks(e),ae.register(e),le.setup(e)})}()}()},3329:function(e,t,n){n(3330)},3330:function(e,t){!function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),r=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),o=tinymce.util.Tools.resolve("tinymce.util.VK"),i=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),a=tinymce.util.Tools.resolve("tinymce.util.Tools"),s=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),l=function(e){return e&&3===e.nodeType},u=function(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)},c=function(e){return e&&/^(LI|DT|DD)$/.test(e.nodeName)},d=function(e){return e&&/^(TH|TD)$/.test(e.nodeName)},f=function(e){return e&&"BR"===e.nodeName},h=function(e){return e.parentNode.firstChild===e},p=function(e){return e.parentNode.lastChild===e},m=function(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]},g=function(e,t){return e&&e.nodeName in t},v=function(e,t){return!!f(t)&&!(!e.isBlock(t.nextSibling)||f(t.previousSibling))},b=function(e,t,n){var r=e.isEmpty(t);return!(n&&e.select("span[data-mce-type=bookmark]",t).length>0)&&r},y=function(e,t){return e.isChildOf(t,e.getRoot())},w={isTextNode:l,isListNode:u,isListItemNode:c,isTableCellNode:d,isBr:f,isFirstChild:h,isLastChild:p,isTextBlock:m,isBlock:g,isBogusBr:v,isEmpty:b,isChildOfBody:y},x=function(e,t){var r=n.getNode(e,t);if(w.isListItemNode(e)&&w.isTextNode(r)){return{container:r,offset:t>=e.childNodes.length?r.data.length:0}}return{container:e,offset:t}},C=function(e){var t=e.cloneRange(),n=x(e.startContainer,e.startOffset);t.setStart(n.container,n.offset);var r=x(e.endContainer,e.endOffset);return t.setEnd(r.container,r.offset),t},k={getNormalizedEndPoint:x,normalizeRange:C},N=s.DOM,_=function(e){var t={},n=function(n){var r,o,i;o=e[n?"startContainer":"endContainer"],i=e[n?"startOffset":"endOffset"],1===o.nodeType&&(r=N.create("span",{"data-mce-type":"bookmark"}),o.hasChildNodes()?(i=Math.min(i,o.childNodes.length-1),n?o.insertBefore(r,o.childNodes[i]):N.insertAfter(r,o.childNodes[i])):o.appendChild(r),o=r,i=0),t[n?"startContainer":"endContainer"]=o,t[n?"startOffset":"endOffset"]=i};return n(!0),e.collapsed||n(),t},S=function(e){function t(t){var n,r,o;n=o=e[t?"startContainer":"endContainer"],r=e[t?"startOffset":"endOffset"],n&&(1===n.nodeType&&(r=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t===e)return n;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1}(n),n=n.parentNode,N.remove(o),!n.hasChildNodes()&&N.isBlock(n)&&n.appendChild(N.create("br"))),e[t?"startContainer":"endContainer"]=n,e[t?"startOffset":"endOffset"]=r)}t(!0),t();var n=N.createRng();return n.setStart(e.startContainer,e.startOffset),e.endContainer&&n.setEnd(e.endContainer,e.endOffset),k.normalizeRange(n)},T={createBookmark:_,resolveBookmark:S},E=s.DOM,O=function(e,t){var n,r=t.parentNode;"LI"===r.nodeName&&r.firstChild===t&&(n=r.previousSibling,n&&"LI"===n.nodeName?(n.appendChild(t),w.isEmpty(e,r)&&E.remove(r)):E.setStyle(r,"listStyleType","none")),w.isListNode(r)&&(n=r.previousSibling)&&"LI"===n.nodeName&&n.appendChild(t)},A=function(e,t){a.each(a.grep(e.select("ol,ul",t)),function(t){O(e,t)})},D={normalizeList:O,normalizeLists:A},R=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),M=function(e){var t=e.selection.getStart(!0);return e.dom.getParent(t,"OL,UL,DL",F(e,t))},P=function(e,t){return e&&1===t.length&&t[0]===e},L=function(e){return a.grep(e.querySelectorAll("ol,ul,dl"),function(e){return w.isListNode(e)})},I=function(e){var t=M(e),n=e.selection.getSelectedBlocks();return P(t,n)?L(t):a.grep(n,function(e){return w.isListNode(e)&&t!==e})},j=function(e,t){var n=a.map(t,function(t){var n=e.dom.getParent(t,"li,dd,dt",F(e,t));return n||t});return R.unique(n)},B=function(e){var t=e.selection.getSelectedBlocks();return a.grep(j(e,t),function(e){return w.isListItemNode(e)})},F=function(e,t){var n=e.dom.getParents(t,"TD,TH");return n.length>0?n[0]:e.getBody()},H={getParentList:M,getSelectedSubLists:I,getSelectedListItems:B,getClosestListRootElm:F},U=tinymce.util.Tools.resolve("tinymce.Env"),z=s.DOM,W=function(e,t,n){var r,o,i,a=z.createFragment(),s=e.schema.getBlockElements();if(e.settings.forced_root_block&&(n=n||e.settings.forced_root_block),n&&(o=z.create(n),o.tagName===e.settings.forced_root_block&&z.setAttribs(o,e.settings.forced_root_block_attrs),w.isBlock(t.firstChild,s)||a.appendChild(o)),t)for(;r=t.firstChild;){var l=r.nodeName;i||"SPAN"===l&&"bookmark"===r.getAttribute("data-mce-type")||(i=!0),w.isBlock(r,s)?(a.appendChild(r),o=null):n?(o||(o=z.create(n),a.appendChild(o)),o.appendChild(r)):a.appendChild(r)}return e.settings.forced_root_block?i||U.ie&&!(U.ie>10)||o.appendChild(z.create("br",{"data-mce-bogus":"1"})):a.appendChild(z.create("br")),a},V={createNewTextBlock:W},q=s.DOM,$=function(e,t,n,r){var o,i,s,l;for(s=q.select('span[data-mce-type="bookmark"]',t),r=r||V.createNewTextBlock(e,n),o=q.createRng(),o.setStartAfter(n),o.setEndAfter(t),i=o.extractContents(),l=i.firstChild;l;l=l.firstChild)if("LI"===l.nodeName&&e.dom.isEmpty(l)){q.remove(l);break}e.dom.isEmpty(i)||q.insertAfter(i,t),q.insertAfter(r,t),w.isEmpty(e.dom,n.parentNode)&&function(e){a.each(s,function(t){e.parentNode.insertBefore(t,n.parentNode)}),q.remove(e)}(n.parentNode),q.remove(n),w.isEmpty(e.dom,t)&&q.remove(t)},K={splitList:$},G=s.DOM,X=function(e,t){w.isEmpty(e,t)&&G.remove(t)},Y=function(e,t){var n,r,o=t.parentNode;return o?(n=o.parentNode,o===e.getBody()||("DD"===t.nodeName?(G.rename(t,"DT"),!0):w.isFirstChild(t)&&w.isLastChild(t)?("LI"===n.nodeName?(G.insertAfter(t,n),X(e.dom,n),G.remove(o)):w.isListNode(n)?G.remove(o,!0):(n.insertBefore(V.createNewTextBlock(e,t),o),G.remove(o)),!0):w.isFirstChild(t)?("LI"===n.nodeName?(G.insertAfter(t,n),t.appendChild(o),X(e.dom,n)):w.isListNode(n)?n.insertBefore(t,o):(n.insertBefore(V.createNewTextBlock(e,t),o),G.remove(t)),!0):w.isLastChild(t)?("LI"===n.nodeName?G.insertAfter(t,n):w.isListNode(n)?G.insertAfter(t,o):(G.insertAfter(V.createNewTextBlock(e,t),o),G.remove(t)),!0):("LI"===n.nodeName?(o=n,r=V.createNewTextBlock(e,t,"LI")):r=w.isListNode(n)?V.createNewTextBlock(e,t,"LI"):V.createNewTextBlock(e,t),K.splitList(e,o,t,r),D.normalizeLists(e.dom,o.parentNode),!0))):(X(e.dom,t),!0)},J=function(e){var t=H.getSelectedListItems(e);if(t.length){var n=T.createBookmark(e.selection.getRng()),r=void 0,o=void 0,i=H.getClosestListRootElm(e,e.selection.getStart(!0));for(r=t.length;r--;)for(var a=t[r].parentNode;a&&a!==i;){for(o=t.length;o--;)if(t[o]===a){t.splice(r,1);break}a=a.parentNode}for(r=0;r<t.length&&(Y(e,t[r])||0!==r);r++);return e.selection.setRng(T.resolveBookmark(n)),e.nodeChanged(),!0}},Q={outdent:Y,outdentSelection:J},Z=function(e,t,n){var r=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",r)},ee=function(e,t){a.each(t,function(t,n){e.setAttribute(n,t)})},te=function(e,t,n){ee(t,n["list-attributes"]),a.each(e.select("li",t),function(e){ee(e,n["list-item-attributes"])})},ne=function(e,t,n){Z(e,t,n),te(e,t,n)},re=function(e,t,n){a.each(n,function(n){var r;return e.setStyle(t,(r={},r[n]="",r))})},oe=function(e,t,n,r){var o,i;for(o=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"],1===o.nodeType&&(o=o.childNodes[Math.min(i,o.childNodes.length-1)]||o),!n&&w.isBr(o.nextSibling)&&(o=o.nextSibling);o.parentNode!==r;){if(w.isTextBlock(e,o))return o;if(/^(TD|TH)$/.test(o.parentNode.nodeName))return o;o=o.parentNode}return o},ie=function(e,t,n){for(var r,o=[],s=e.dom,l=oe(e,t,!0,n),u=oe(e,t,!1,n),c=[],d=l;d&&(c.push(d),d!==u);d=d.nextSibling);return a.each(c,function(t){if(w.isTextBlock(e,t))return o.push(t),void(r=null);if(s.isBlock(t)||w.isBr(t))return w.isBr(t)&&s.remove(t),void(r=null);var a=t.nextSibling;if(i.isBookmarkNode(t)&&(w.isTextBlock(e,a)||!a&&t.parentNode===n))return void(r=null);r||(r=s.create("p"),t.parentNode.insertBefore(r,t),o.push(r)),r.appendChild(t)}),o},ae=function(e,t,n){var r=e.getStyle(t,"list-style-type"),o=n?n["list-style-type"]:"";return o=null===o?"":o,r===o},se=function(e,t,n){void 0===n&&(n={});var r,o=e.selection.getRng(!0),i="LI",s=H.getClosestListRootElm(e,e.selection.getStart(!0)),l=e.dom;"false"!==l.getContentEditable(e.selection.getNode())&&(t=t.toUpperCase(),"DL"===t&&(i="DT"),r=T.createBookmark(o),a.each(ie(e,o,s),function(r){var o,a;a=r.previousSibling,a&&w.isListNode(a)&&a.nodeName===t&&ae(l,a,n)?(o=a,r=l.rename(r,i),a.appendChild(r)):(o=l.create(t),r.parentNode.insertBefore(o,r),o.appendChild(r),r=l.rename(r,i)),re(l,r,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),ne(l,o,n),he(e.dom,o)}),e.selection.setRng(T.resolveBookmark(r)))},le=function(e){var t=T.createBookmark(e.selection.getRng(!0)),n=H.getClosestListRootElm(e,e.selection.getStart(!0)),r=H.getSelectedListItems(e),o=a.grep(r,function(t){return e.dom.isEmpty(t)});r=a.grep(r,function(t){return!e.dom.isEmpty(t)}),a.each(o,function(t){if(w.isEmpty(e.dom,t))return void Q.outdent(e,t)}),a.each(r,function(t){var r,o;if(t.parentNode!==e.getBody()){for(r=t;r&&r!==n;r=r.parentNode)w.isListNode(r)&&(o=r);K.splitList(e,o,t),D.normalizeLists(e.dom,o.parentNode)}}),e.selection.setRng(T.resolveBookmark(t))},ue=function(e,t){return e&&t&&w.isListNode(e)&&e.nodeName===t.nodeName},ce=function(e,t,n){return e.getStyle(t,"list-style-type",!0)===e.getStyle(n,"list-style-type",!0)},de=function(e,t){return e.className===t.className},fe=function(e,t,n){return ue(t,n)&&ce(e,t,n)&&de(t,n)},he=function(e,t){var n,r;if(n=t.nextSibling,fe(e,t,n)){for(;r=n.firstChild;)t.appendChild(r);e.remove(n)}if(n=t.previousSibling,fe(e,t,n)){for(;r=n.lastChild;)t.insertBefore(r,t.firstChild);e.remove(n)}},pe=function(e,t,n,r){if(t.nodeName!==n){var o=e.rename(t,n);ne(e,o,r)}else ne(e,t,r)},me=function(e,t,n,r,o){if(t.nodeName!==r||ge(o)){var i=T.createBookmark(e.selection.getRng(!0));a.each([t].concat(n),function(t){pe(e.dom,t,r,o)}),e.selection.setRng(T.resolveBookmark(i))}else le(e)},ge=function(e){return"list-style-type"in e},ve=function(e,t,n,r){if(t!==e.getBody())if(t)if(t.nodeName!==n||ge(r)){var o=T.createBookmark(e.selection.getRng(!0));ne(e.dom,t,r),he(e.dom,e.dom.rename(t,n)),e.selection.setRng(T.resolveBookmark(o))}else le(e);else se(e,n,r)},be=function(e,t,n){var r=H.getParentList(e),o=H.getSelectedSubLists(e);n=n||{},r&&o.length>0?me(e,r,o,t,n):ve(e,r,t,n)},ye={toggleList:be,removeList:le,mergeWithAdjacentLists:he},we=function(e,t,o,i){var a,s,l=t.startContainer,u=t.startOffset;if(3===l.nodeType&&(o?u<l.data.length:u>0))return l;for(a=e.schema.getNonEmptyElements(),1===l.nodeType&&(l=n.getNode(l,u)),s=new r(l,i),o&&w.isBogusBr(e.dom,l)&&s.next();l=s[o?"next":"prev2"]();){if("LI"===l.nodeName&&!l.hasChildNodes())return l;if(a[l.nodeName])return l;if(3===l.nodeType&&l.data.length>0)return l}},xe=function(e,t){var n=t.childNodes;return 1===n.length&&!w.isListNode(n[0])&&e.isBlock(n[0])},Ce=function(e,t){xe(e,t)&&e.remove(t.firstChild,!0)},ke=function(e,t,n){var r,o;if(o=xe(e,n)?n.firstChild:n,Ce(e,t),!w.isEmpty(e,t,!0))for(;r=t.firstChild;)o.appendChild(r)},Ne=function(e,t,n){var r,o,i=t.parentNode;w.isChildOfBody(e,t)&&w.isChildOfBody(e,n)&&(w.isListNode(n.lastChild)&&(o=n.lastChild),i===n.lastChild&&w.isBr(i.previousSibling)&&e.remove(i.previousSibling),r=n.lastChild,r&&w.isBr(r)&&t.hasChildNodes()&&e.remove(r),w.isEmpty(e,n,!0)&&e.$(n).empty(),ke(e,t,n),o&&n.appendChild(o),e.remove(t),w.isEmpty(e,i)&&i!==e.getRoot()&&e.remove(i))},_e=function(e,t,n){e.dom.$(n).empty(),Ne(e.dom,t,n),e.selection.setCursorLocation(n)},Se=function(e,t,n,r){var o=e.dom;if(o.isEmpty(r))_e(e,n,r);else{var i=T.createBookmark(t);Ne(o,n,r),e.selection.setRng(T.resolveBookmark(i))}},Te=function(e,t,n,r){var o=T.createBookmark(t);Ne(e.dom,n,r);var i=T.resolveBookmark(o);e.selection.setRng(i)},Ee=function(e,t){var n,r,o,i=e.dom,a=e.selection,s=a.getStart(),l=H.getClosestListRootElm(e,s),u=i.getParent(a.getStart(),"LI",l);if(u){if((n=u.parentNode)===e.getBody()&&w.isEmpty(i,n))return!0;if(r=k.normalizeRange(a.getRng(!0)),(o=i.getParent(we(e,r,t,l),"LI",l))&&o!==u)return t?Se(e,r,o,u):Te(e,r,u,o),!0;if(!o&&!t&&ye.removeList(e))return!0}return!1},Oe=function(e,t,n){var r=e.getParent(t.parentNode,e.isBlock,n);e.remove(t),r&&e.isEmpty(r)&&e.remove(r)},Ae=function(e,t){var n=e.dom,r=e.selection.getStart(),o=H.getClosestListRootElm(e,r),i=n.getParent(r,n.isBlock,o);if(i&&n.isEmpty(i)){var a=k.normalizeRange(e.selection.getRng(!0)),s=n.getParent(we(e,a,t,o),"LI",o);if(s)return e.undoManager.transact(function(){Oe(n,i,o),ye.mergeWithAdjacentLists(n,s.parentNode),e.selection.select(s,!0),e.selection.collapse(t)}),!0}return!1},De=function(e,t){return Ee(e,t)||Ae(e,t)},Re=function(e){var t=e.selection.getStart(),n=H.getClosestListRootElm(e,t);return!!(e.dom.getParent(t,"LI,DT,DD",n)||H.getSelectedListItems(e).length>0)&&(e.undoManager.transact(function(){e.execCommand("Delete"),D.normalizeLists(e.dom,e.getBody())}),!0)},Me=function(e,t){return e.selection.isCollapsed()?De(e,t):Re(e)},Pe=function(e){e.on("keydown",function(t){t.keyCode===o.BACKSPACE?Me(e,!1)&&t.preventDefault():t.keyCode===o.DELETE&&Me(e,!0)&&t.preventDefault()})},Le={setup:Pe,backspaceDelete:Me},Ie=function(e){return{backspaceDelete:function(t){Le.backspaceDelete(e,t)}}},je={get:Ie},Be=s.DOM,Fe=function(e,t){var n;if(w.isListNode(e)){for(;n=e.firstChild;)t.appendChild(n);Be.remove(e)}},He=function(e){var t,n,r;return"DT"===e.nodeName?(Be.rename(e,"DD"),!0):(t=e.previousSibling)&&w.isListNode(t)?(t.appendChild(e),!0):t&&"LI"===t.nodeName&&w.isListNode(t.lastChild)?(t.lastChild.appendChild(e),Fe(e.lastChild,t.lastChild),!0):(t=e.nextSibling)&&w.isListNode(t)?(t.insertBefore(e,t.firstChild),!0):!(!(t=e.previousSibling)||"LI"!==t.nodeName)&&(n=Be.create(e.parentNode.nodeName),r=Be.getStyle(e.parentNode,"listStyleType"),r&&Be.setStyle(n,"listStyleType",r),t.appendChild(n),n.appendChild(e),Fe(e.lastChild,n),!0)},Ue=function(e){var t=H.getSelectedListItems(e);if(t.length){for(var n=T.createBookmark(e.selection.getRng(!0)),r=0;r<t.length&&(He(t[r])||0!==r);r++);return e.selection.setRng(T.resolveBookmark(n)),e.nodeChanged(),!0}},ze={indentSelection:Ue},We=function(e,t){return function(){var n=e.dom.getParent(e.selection.getStart(),"UL,OL,DL");return n&&n.nodeName===t}},Ve=function(e){e.on("BeforeExecCommand",function(t){var n,r=t.command.toLowerCase();if("indent"===r?ze.indentSelection(e)&&(n=!0):"outdent"===r&&Q.outdentSelection(e)&&(n=!0),n)return e.fire("ExecCommand",{command:t.command}),t.preventDefault(),!0}),e.addCommand("InsertUnorderedList",function(t,n){ye.toggleList(e,"UL",n)}),e.addCommand("InsertOrderedList",function(t,n){ye.toggleList(e,"OL",n)}),e.addCommand("InsertDefinitionList",function(t,n){ye.toggleList(e,"DL",n)}),e.addQueryStateHandler("InsertUnorderedList",We(e,"UL")),e.addQueryStateHandler("InsertOrderedList",We(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",We(e,"DL"))},qe={register:Ve},$e=function(e){return e.getParam("lists_indent_on_tab",!0)},Ke={shouldIndentOnTab:$e},Ge=function(e){e.on("keydown",function(t){t.keyCode!==o.TAB||o.metaKeyPressed(t)||e.dom.getParent(e.selection.getStart(),"LI,DT,DD")&&(t.preventDefault(),t.shiftKey?Q.outdentSelection(e):ze.indentSelection(e))})},Xe=function(e){Ke.shouldIndentOnTab(e)&&Ge(e),Le.setup(e)},Ye={setup:Xe},Je=function(e,t){for(var n=0;n<e.length;n++){if(t(e[n]))return n}return-1},Qe=function(e,t){return function(n){var r=n.control;e.on("NodeChange",function(e){var n=Je(e.parents,w.isTableCellNode),o=-1!==n?e.parents.slice(0,n):e.parents,i=a.grep(o,w.isListNode);r.active(i.length>0&&i[0].nodeName===t)})}},Ze=function(e){return function(t){var n=t.control;e.on("nodechange",function(){var t=H.getSelectedListItems(e),r=t.length>0&&w.isFirstChild(t[0]);n.disabled(r)})}},et=function(e){(function(e,t){var n=e.settings.plugins?e.settings.plugins:"";return-1!==a.inArray(n.split(/[ ,]/),t)})(e,"advlist")||(e.addButton("numlist",{active:!1,title:"Numbered list",cmd:"InsertOrderedList",onPostRender:Qe(e,"OL")}),e.addButton("bullist",{active:!1,title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:Qe(e,"UL")})),e.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:Ze(e)})},tt={register:et};t.add("lists",function(e){return Ye.setup(e),tt.register(e),qe.register(e),je.get(e)})}()}()},3331:function(e,t,n){n(3332)},3332:function(e,t){!function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.Env"),r=tinymce.util.Tools.resolve("tinymce.util.Tools"),o=function(e){return e.getParam("media_scripts")},i=function(e){return e.getParam("audio_template_callback")},a=function(e){return e.getParam("video_template_callback")},s=function(e){return e.getParam("media_live_embeds",!0)},l=function(e){return e.getParam("media_filter_html",!0)},u=function(e){return e.getParam("media_url_resolver")},c=function(e){return e.getParam("media_alt_source",!0)},d=function(e){return e.getParam("media_poster",!0)},f=function(e){return e.getParam("media_dimensions",!0)},h={getScripts:o,getAudioTemplateCallback:i,getVideoTemplateCallback:a,hasLiveEmbeds:s,shouldFilterHtml:l,getUrlResolver:u,hasAltSource:c,hasPoster:d,hasDimensions:f},p=tinymce.util.Tools.resolve("tinymce.html.SaxParser"),m=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),g=function(e,t){if(e)for(var n=0;n<e.length;n++)if(-1!==t.indexOf(e[n].filter))return e[n]},v={getVideoScriptMatch:g},b=function(e){return e.replace(/px$/,"")},y=function(e){return/^[0-9.]+$/.test(e)?e+"px":e},w=function(e){return function(t){return t?b(t.style[e]):""}},x=function(e){return function(t,n){t&&(t.style[e]=y(n))}},C={getMaxWidth:w("maxWidth"),getMaxHeight:w("maxHeight"),setMaxWidth:x("maxWidth"),setMaxHeight:x("maxHeight")},k=m.DOM,N=function(e){return k.getAttrib(e,"data-ephox-embed-iri")},_=function(e){var t=k.createFragment(e);return""!==N(t.firstChild)},S=function(e,t){var n={};return p({validate:!1,allow_conditional_comments:!0,special:"script,noscript",start:function(t,o){if(n.source1||"param"!==t||(n.source1=o.map.movie),"iframe"!==t&&"object"!==t&&"embed"!==t&&"video"!==t&&"audio"!==t||(n.type||(n.type=t),n=r.extend(o.map,n)),"script"===t){var i=v.getVideoScriptMatch(e,o.map.src);if(!i)return;n={type:"script",source1:o.map.src,width:i.width,height:i.height}}"source"===t&&(n.source1?n.source2||(n.source2=o.map.src):n.source1=o.map.src),"img"!==t||n.poster||(n.poster=o.map.src)}}).parse(t),n.source1=n.source1||n.src||n.data,n.source2=n.source2||"",n.poster=n.poster||"",n},T=function(e){var t=k.createFragment(e),n=t.firstChild;return{type:"ephox-embed-iri",source1:N(n),source2:"",poster:"",width:C.getMaxWidth(n),height:C.getMaxHeight(n)}},E=function(e,t){return _(t)?T(t):S(e,t)},O={htmlToData:E},A=tinymce.util.Tools.resolve("tinymce.util.Promise"),D=function(e){var t={mp3:"audio/mpeg",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},n=e.toLowerCase().split(".").pop(),r=t[n];return r||""},R={guess:D},M=tinymce.util.Tools.resolve("tinymce.html.Writer"),P=tinymce.util.Tools.resolve("tinymce.html.Schema"),L=m.DOM,I=function(e,t){var n,r,o,i;for(n in t)if(o=""+t[n],e.map[n])for(r=e.length;r--;)i=e[r],i.name===n&&(o?(e.map[n]=o,i.value=o):(delete e.map[n],e.splice(r,1)));else o&&(e.push({name:n,value:o}),e.map[n]=o)},j=function(e){var t=M();return p(t).parse(e),t.getContent()},B=function(e,t,n){var r,o=M(),i=0;return p({validate:!1,allow_conditional_comments:!0,special:"script,noscript",comment:function(e){o.comment(e)},cdata:function(e){o.cdata(e)},text:function(e,t){o.text(e,t)},start:function(e,a,s){switch(e){case"video":case"object":case"embed":case"img":case"iframe":void 0!==t.height&&void 0!==t.width&&I(a,{width:t.width,height:t.height})}if(n)switch(e){case"video":I(a,{poster:t.poster,src:""}),t.source2&&I(a,{src:""});break;case"iframe":I(a,{src:t.source1});break;case"source":if(++i<=2&&(I(a,{src:t["source"+i],type:t["source"+i+"mime"]}),!t["source"+i]))return;break;case"img":if(!t.poster)return;r=!0}o.start(e,a,s)},end:function(e){if("video"===e&&n)for(var a=1;a<=2;a++)if(t["source"+a]){var s=[];s.map={},i<a&&(I(s,{src:t["source"+a],type:t["source"+a+"mime"]}),o.start("source",s,!0))}if(t.poster&&"object"===e&&n&&!r){var l=[];l.map={},I(l,{src:t.poster,width:t.width,height:t.height}),o.start("img",l,!0)}o.end(e)}},P({})).parse(e),o.getContent()},F=function(e){var t=L.createFragment(e);return""!==L.getAttrib(t.firstChild,"data-ephox-embed-iri")},H=function(e,t){var n=L.createFragment(e),r=n.firstChild;return C.setMaxWidth(r,t.width),C.setMaxHeight(r,t.height),j(r.outerHTML)},U=function(e,t,n){return F(e)?H(e,t):B(e,t,n)},z={updateHtml:U},W=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'//maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],V=function(e,t){for(var n=e.regex.exec(t),r=e.url,o=0;o<n.length;o++)!function(e){r=r.replace("$"+e,function(){return n[e]?n[e]:""})}(o);return r.replace(/\?$/,"")},q=function(e){var t=W.filter(function(t){return t.regex.test(e)});return t.length>0?r.extend({},t[0],{url:V(t[0],e)}):null},$=function(e){var t=e.allowFullscreen?' allowFullscreen="1"':"";return'<iframe src="'+e.source1+'" width="'+e.width+'" height="'+e.height+'"'+t+"></iframe>"},K=function(e){var t='<object data="'+e.source1+'" width="'+e.width+'" height="'+e.height+'" type="application/x-shockwave-flash">';return e.poster&&(t+='<img src="'+e.poster+'" width="'+e.width+'" height="'+e.height+'" />'),t+="</object>"},G=function(e,t){return t?t(e):'<audio controls="controls" src="'+e.source1+'">'+(e.source2?'\n<source src="'+e.source2+'"'+(e.source2mime?' type="'+e.source2mime+'"':"")+" />\n":"")+"</audio>"},X=function(e,t){return t?t(e):'<video width="'+e.width+'" height="'+e.height+'"'+(e.poster?' poster="'+e.poster+'"':"")+' controls="controls">\n<source src="'+e.source1+'"'+(e.source1mime?' type="'+e.source1mime+'"':"")+" />\n"+(e.source2?'<source src="'+e.source2+'"'+(e.source2mime?' type="'+e.source2mime+'"':"")+" />\n":"")+"</video>"},Y=function(e){return'<script src="'+e.source1+'"><\/script>'},J=function(e,t){var n=r.extend({},t);if(!n.source1&&(r.extend(n,O.htmlToData(h.getScripts(e),n.embed)),!n.source1))return"";n.source2||(n.source2=""),n.poster||(n.poster=""),n.source1=e.convertURL(n.source1,"source"),n.source2=e.convertURL(n.source2,"source"),n.source1mime=R.guess(n.source1),n.source2mime=R.guess(n.source2),n.poster=e.convertURL(n.poster,"poster");var o=q(n.source1);if(o&&(n.source1=o.url,n.type=o.type,n.allowFullscreen=o.allowFullscreen,n.width=n.width||o.w,n.height=n.height||o.h),n.embed)return z.updateHtml(n.embed,n,!0);var i=v.getVideoScriptMatch(h.getScripts(e),n.source1);i&&(n.type="script",n.width=i.width,n.height=i.height);var a=h.getAudioTemplateCallback(e),s=h.getVideoTemplateCallback(e);return n.width=n.width||300,n.height=n.height||150,r.each(n,function(t,r){n[r]=e.dom.encode(t)}),"iframe"===n.type?$(n):"application/x-shockwave-flash"===n.source1mime?K(n):-1!==n.source1mime.indexOf("audio")?G(n,a):"script"===n.type?Y(n):X(n,s)},Q={dataToHtml:J},Z={},ee=function(e,t,n){return new A(function(r,o){var i=function(n){return n.html&&(Z[e.source1]=n),r({url:e.source1,html:n.html?n.html:t(e)})};Z[e.source1]?i(Z[e.source1]):n({url:e.source1},i,o)})},te=function(e,t){return new A(function(n){n({html:t(e),url:e.source1})})},ne=function(e){return function(t){return Q.dataToHtml(e,t)}},re=function(e,t){var n=h.getUrlResolver(e);return n?ee(t,ne(e),n):te(t,ne(e))},oe=function(e){return Z.hasOwnProperty(e)},ie={getEmbedHtml:re,isCached:oe},ae=function(e,t){e.state.set("oldVal",e.value()),t.state.set("oldVal",t.value())},se=function(e,t){var n=e.find("#width")[0],r=e.find("#height")[0],o=e.find("#constrain")[0];n&&r&&o&&t(n,r,o.checked())},le=function(e,t,n){var r=e.state.get("oldVal"),o=t.state.get("oldVal"),i=e.value(),a=t.value();n&&r&&o&&i&&a&&(i!==r?(a=Math.round(i/r*a),isNaN(a)||t.value(a)):(i=Math.round(a/o*i),isNaN(i)||e.value(i))),ae(e,t)},ue=function(e){se(e,ae)},ce=function(e){se(e,le)},de=function(e){var t=function(){e(function(e){ce(e)})};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}},fe={createUi:de,syncSize:ue,updateSize:ce},he=n.ie&&n.ie<=8?"onChange":"onInput",pe=function(e){return function(t){var n=t&&t.msg?"Media embed handler error: "+t.msg:"Media embed handler threw unknown error.";e.notificationManager.open({type:"error",text:n})}},me=function(e){var t=e.selection.getNode(),n=t.getAttribute("data-ephox-embed-iri");return n?{source1:n,"data-ephox-embed-iri":n,width:C.getMaxWidth(t),height:C.getMaxHeight(t)}:t.getAttribute("data-mce-object")?O.htmlToData(h.getScripts(e),e.serializer.serialize(t,{selection:!0})):{}},ge=function(e){var t=e.selection.getNode();if(t.getAttribute("data-mce-object")||t.getAttribute("data-ephox-embed-iri"))return e.selection.getContent()},ve=function(e,t){return function(n){var o=n.html,i=e.find("#embed")[0],a=r.extend(O.htmlToData(h.getScripts(t),o),{source1:n.url});e.fromJSON(a),i&&(i.value(o),fe.updateSize(e))}},be=function(e,t){var n,r,o=e.dom.select("img[data-mce-object]");for(n=0;n<t.length;n++)for(r=o.length-1;r>=0;r--)t[n]===o[r]&&o.splice(r,1);e.selection.select(o[0])},ye=function(e,t){var n=e.dom.select("img[data-mce-object]");e.insertContent(t),be(e,n),e.nodeChanged()},we=function(e,t){var n=e.toJSON();n.embed=z.updateHtml(n.embed,n),n.embed&&ie.isCached(n.source1)?ye(t,n.embed):ie.getEmbedHtml(t,n).then(function(e){ye(t,e.html)}).catch(pe(t))},xe=function(e,t){r.each(t,function(t,n){e.find("#"+n).value(t)})},Ce=function(e){var t,n,o=[{name:"source1",type:"filepicker",filetype:"media",size:40,autofocus:!0,label:"Source",onpaste:function(){setTimeout(function(){ie.getEmbedHtml(e,t.toJSON()).then(ve(t,e)).catch(pe(e))},1)},onchange:function(n){ie.getEmbedHtml(e,t.toJSON()).then(ve(t,e)).catch(pe(e)),xe(t,n.meta)},onbeforecall:function(e){e.meta=t.toJSON()}}],i=[],a=function(e){e(t),n=t.toJSON(),t.find("#embed").value(z.updateHtml(n.embed,n))};if(h.hasAltSource(e)&&i.push({name:"source2",type:"filepicker",filetype:"media",size:40,label:"Alternative source"}),h.hasPoster(e)&&i.push({name:"poster",type:"filepicker",filetype:"image",size:40,label:"Poster"}),h.hasDimensions(e)){var s=fe.createUi(a);o.push(s)}n=me(e);var l={id:"mcemediasource",type:"textbox",flex:1,name:"embed",value:ge(e),multiline:!0,rows:5,label:"Source"},u=function(){n=r.extend({},O.htmlToData(h.getScripts(e),this.value())),this.parent().parent().fromJSON(n)};l[he]=u;var c=[{title:"General",type:"form",items:o},{title:"Embed",type:"container",layout:"flex",direction:"column",align:"stretch",padding:10,spacing:10,items:[{type:"label",text:"Paste your embed code below:",forId:"mcemediasource"},l]}];i.length>0&&c.push({title:"Advanced",type:"form",items:i}),t=e.windowManager.open({title:"Insert/edit media",data:n,bodyType:"tabpanel",body:c,onSubmit:function(){fe.updateSize(t),we(t,e)}}),fe.syncSize(t)},ke={showDialog:Ce},Ne=function(e){return{showDialog:function(){ke.showDialog(e)}}},_e={get:Ne},Se=function(e){var t=function(){ke.showDialog(e)};e.addCommand("mceMedia",t)},Te={register:Se},Ee=tinymce.util.Tools.resolve("tinymce.html.Node"),Oe=function(e,t){if(!1===h.shouldFilterHtml(e))return t;var n,r=M();return p({validate:!1,allow_conditional_comments:!1,special:"script,noscript",comment:function(e){r.comment(e)},cdata:function(e){r.cdata(e)},text:function(e,t){r.text(e,t)},start:function(t,o,i){if(n=!0,"script"!==t&&"noscript"!==t){for(var a=0;a<o.length;a++){if(0===o[a].name.indexOf("on"))return;"style"===o[a].name&&(o[a].value=e.dom.serializeStyle(e.dom.parseStyle(o[a].value),t))}r.start(t,o,i),n=!1}},end:function(e){n||r.end(e)}},P({})).parse(t),r.getContent()},Ae={sanitize:Oe},De=function(e,t){var r,o=t.name;return r=new Ee("img",1),r.shortEnded=!0,Me(e,t,r),r.attr({width:t.attr("width")||"300",height:t.attr("height")||("audio"===o?"30":"150"),style:t.attr("style"),src:n.transparentSrc,"data-mce-object":o,class:"mce-object mce-object-"+o}),r},Re=function(e,t){var n,r,o,i=t.name;return n=new Ee("span",1),n.attr({contentEditable:"false",style:t.attr("style"),"data-mce-object":i,class:"mce-preview-object mce-object-"+i}),Me(e,t,n),r=new Ee(i,1),r.attr({src:t.attr("src"),allowfullscreen:t.attr("allowfullscreen"),style:t.attr("style"),class:t.attr("class"),width:t.attr("width"),height:t.attr("height"),frameborder:"0"}),o=new Ee("span",1),o.attr("class","mce-shim"),n.append(r),n.append(o),n},Me=function(e,t,n){var r,o,i,a,s;for(i=t.attributes,a=i.length;a--;)r=i[a].name,o=i[a].value,"width"!==r&&"height"!==r&&"style"!==r&&("data"!==r&&"src"!==r||(o=e.convertURL(o,r)),n.attr("data-mce-p-"+r,o));(s=t.firstChild&&t.firstChild.value)&&(n.attr("data-mce-html",escape(Ae.sanitize(e,s))),n.firstChild=null)},Pe=function(e){for(;e=e.parent;)if(e.attr("data-ephox-embed-iri"))return!0;return!1},Le=function(e){return function(t){for(var r,o,i=t.length;i--;)r=t[i],r.parent&&(r.parent.attr("data-mce-object")||("script"!==r.name||(o=v.getVideoScriptMatch(h.getScripts(e),r.attr("src"))))&&(o&&(o.width&&r.attr("width",o.width.toString()),o.height&&r.attr("height",o.height.toString())),"iframe"===r.name&&h.hasLiveEmbeds(e)&&n.ceFalse?Pe(r)||r.replace(Re(e,r)):Pe(r)||r.replace(De(e,r))))}},Ie={createPreviewIframeNode:Re,createPlaceholderNode:De,placeHolderConverter:Le},je=function(e){e.on("preInit",function(){var t=e.schema.getSpecialElements();r.each("video audio iframe object".split(" "),function(e){t[e]=new RegExp("</"+e+"[^>]*>","gi")});var n=e.schema.getBoolAttrs();r.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(e){n[e]={}}),e.parser.addNodeFilter("iframe,video,audio,object,embed,script",Ie.placeHolderConverter(e)),e.serializer.addAttributeFilter("data-mce-object",function(t,n){for(var r,o,i,a,s,l,u,c,d=t.length;d--;)if(r=t[d],r.parent){for(u=r.attr(n),o=new Ee(u,1),"audio"!==u&&"script"!==u&&(c=r.attr("class"),c&&-1!==c.indexOf("mce-preview-object")?o.attr({width:r.firstChild.attr("width"),height:r.firstChild.attr("height")}):o.attr({width:r.attr("width"),height:r.attr("height")})),o.attr({style:r.attr("style")}),a=r.attributes,i=a.length;i--;){var f=a[i].name;0===f.indexOf("data-mce-p-")&&o.attr(f.substr(11),a[i].value)}"script"===u&&o.attr("type","text/javascript"),s=r.attr("data-mce-html"),s&&(l=new Ee("#text",3),l.raw=!0,l.value=Ae.sanitize(e,unescape(s)),o.append(l)),r.replace(o)}})}),e.on("setContent",function(){e.$("span.mce-preview-object").each(function(t,n){var r=e.$(n);0===r.find("span.mce-shim",n).length&&r.append('<span class="mce-shim"></span>')})})},Be={setup:je},Fe=function(e){e.on("ResolveName",function(e){var t;1===e.target.nodeType&&(t=e.target.getAttribute("data-mce-object"))&&(e.name=t)})},He={setup:Fe},Ue=function(e){e.on("click keyup",function(){var t=e.selection.getNode();t&&e.dom.hasClass(t,"mce-preview-object")&&e.dom.getAttrib(t,"data-mce-selected")&&t.setAttribute("data-mce-selected","2")}),e.on("ObjectSelected",function(e){var t=e.target.getAttribute("data-mce-object");"audio"!==t&&"script"!==t||e.preventDefault()}),e.on("objectResized",function(e){var t,n=e.target;n.getAttribute("data-mce-object")&&(t=n.getAttribute("data-mce-html"))&&(t=unescape(t),n.setAttribute("data-mce-html",escape(z.updateHtml(t,{width:e.width,height:e.height}))))})},ze={setup:Ue},We=function(e){e.addButton("media",{tooltip:"Insert/edit media",cmd:"mceMedia",stateSelector:["img[data-mce-object]","span[data-mce-object]","div[data-ephox-embed-iri]"]}),e.addMenuItem("media",{icon:"media",text:"Media",cmd:"mceMedia",context:"insert",prependToContext:!0})},Ve={register:We};t.add("media",function(e){return Te.register(e),Ve.register(e),He.setup(e),Be.setup(e),ze.setup(e),_e.get(e)})}()}()},3333:function(e,t,n){n(3334)},3334:function(e,t){!function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(e,t){for(var n="",r=0;r<t;r++)n+=e;return n},r=function(e){return!!e.plugins.visualchars&&e.plugins.visualchars.isEnabled()},o=function(e,t){var o=r(e)?'<span class="mce-nbsp">&nbsp;</span>':"&nbsp;";e.insertContent(n(o,t)),e.dom.setAttrib(e.dom.select("span.mce-nbsp"),"data-mce-bogus","1")},i={insertNbsp:o},a=function(e){e.addCommand("mceNonBreaking",function(){i.insertNbsp(e,1)})},s={register:a},l=tinymce.util.Tools.resolve("tinymce.util.VK"),u=function(e){var t=e.getParam("nonbreaking_force_tab",0);return"boolean"==typeof t?!0===t?3:0:t},c={getKeyboardSpaces:u},d=function(e){var t=c.getKeyboardSpaces(e);t>0&&e.on("keydown",function(n){if(n.keyCode===l.TAB&&!n.isDefaultPrevented()){if(n.shiftKey)return;n.preventDefault(),n.stopImmediatePropagation(),i.insertNbsp(e,t)}})},f={setup:d},h=function(e){e.addButton("nonbreaking",{title:"Nonbreaking space",cmd:"mceNonBreaking"}),e.addMenuItem("nonbreaking",{icon:"nonbreaking",text:"Nonbreaking space",cmd:"mceNonBreaking",context:"insert"})},p={register:h};t.add("nonbreaking",function(e){s.register(e),p.register(e),f.setup(e)})}()}()},3335:function(e,t,n){n(3336)},3336:function(e,t){!function(){!function(){"use strict";function e(e,t){return Y.each(t,function(t){e=t.constructor===RegExp?e.replace(t,""):e.replace(t[0],t[1])}),e}function t(t){function n(e){var t=e.name,r=e;if("br"===t)return void(i+="\n");if(a[t]&&(i+=" "),s[t])return void(i+=" ");if(3===e.type&&(i+=e.value),!e.shortEnded&&(e=e.firstChild))do{n(e)}while(e=e.next);l[t]&&r.next&&(i+="\n","p"===t&&(i+="\n"))}var r=fe(),o=ce({},r),i="",a=r.getShortEndedElements(),s=Y.makeMap("script noscript style textarea video audio iframe object"," "),l=r.getBlockElements();return t=e(t,[/<!\[[^\]]+\]>/g]),n(o.parse(t)),i}function n(t){function n(e,t,n){return t||n?"\xa0":" "}return t=e(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,n],/<br class="Apple-interchange-newline">/g,/<br>$/i])}function r(e){var t=0;return function(){return e+t++}}function o(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)}function i(e){var t,n;return n=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],e=e.replace(/^[\u00a0 ]+/,""),Y.each(n,function(n){if(n.test(e))return t=!0,!1}),t}function a(e){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(e)}function s(e){function t(e){var n="";if(3===e.type)return e.value;if(e=e.firstChild)do{n+=t(e)}while(e=e.next);return n}function n(e,t){if(3===e.type&&t.test(e.value))return e.value=e.value.replace(t,""),!1;if(e=e.firstChild)do{if(!n(e,t))return!1}while(e=e.next);return!0}function r(e){if(e._listIgnore)return void e.remove();if(e=e.firstChild)do{r(e)}while(e=e.next)}function o(e,t,o){var i=e._listLevel||u;i!==u&&(i<u?s&&(s=s.parent.parent):(l=s,s=null)),s&&s.name===t?s.append(e):(l=l||s,s=new de(t,1),o>1&&s.attr("start",""+o),e.wrap(s)),e.name="li",i>u&&l&&l.lastChild.append(s),u=i,r(e),n(e,/^\u00a0+/),n(e,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),n(e,/^\u00a0+/)}for(var s,l,u=1,c=[],d=e.firstChild;void 0!==d&&null!==d;)if(c.push(d),null!==(d=d.walk()))for(;void 0!==d&&d.parent!==e;)d=d.walk();for(var f=0;f<c.length;f++)if(e=c[f],"p"===e.name&&e.firstChild){var h=t(e);if(a(h)){o(e,"ul");continue}if(i(h)){var p=/([0-9]+)\./.exec(h),m=1;p&&(m=parseInt(p[1],10)),o(e,"ol",m);continue}if(e._listLevel){o(e,"ul",1);continue}s=null}else l=s,s=null}function l(e,t,n,r){var o,i={},a=e.dom.parseStyle(r);return Y.each(a,function(a,s){switch(s){case"mso-list":o=/\w+ \w+([0-9]+)/i.exec(r),o&&(n._listLevel=parseInt(o[1],10)),/Ignore/i.test(a)&&n.firstChild&&(n._listIgnore=!0,n.firstChild._listIgnore=!0);break;case"horiz-align":s="text-align";break;case"vert-align":s="vertical-align";break;case"font-color":case"mso-foreground":s="color";break;case"mso-background":case"mso-highlight":s="background";break;case"font-weight":case"font-style":return void("normal"!==a&&(i[s]=a));case"mso-element":if(/^(comment|comment-list)$/i.test(a))return void n.remove()}if(0===s.indexOf("mso-comment"))return void n.remove();0!==s.indexOf("mso-")&&("all"===U.getRetainStyleProps(e)||t&&t[s])&&(i[s]=a)}),/(bold)/i.test(i["font-weight"])&&(delete i["font-weight"],n.wrap(new de("b",1))),/(italic)/i.test(i["font-style"])&&(delete i["font-style"],n.wrap(new de("i",1))),(i=e.dom.serializeStyle(i,n.name))||null}function u(e,t){e.on("PastePreProcess",function(n){n.content=t(e,n.content,n.internal,n.wordContent)})}function c(e,t){e.on("PastePostProcess",function(n){t(e,n.node)})}function d(e,t){if(!be.isWordContent(t))return t;var n=[];Y.each(e.schema.getBlockElements(),function(e,t){n.push(t)});var r=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+n.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return t=me.filter(t,[[r,"$1"]]),t=me.filter(t,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}function f(e,t,n,r){if(r||n)return t;var o,i=U.getWebkitStyles(e);if(!1===U.shouldRemoveWebKitStyles(e)||"all"===i)return t;if(i&&(o=i.split(/[, ]/)),o){var a=e.dom,s=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(e,t,n,r){var i=a.parseStyle(a.decode(n)),l={};if("none"===o)return t+r;for(var u=0;u<o.length;u++){var c=i[o[u]],d=a.getStyle(s,o[u],!0);/color/.test(o[u])&&(c=a.toHex(c),d=a.toHex(d)),d!==c&&(l[o[u]]=c)}return l=a.serializeStyle(l,"span"),l?t+' style="'+l+'"'+r:t+r})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(e,t,n,r){return t+' style="'+n+'"'+r})}function h(e,t){e.$("a",t).find("font,u").each(function(t,n){e.dom.remove(n,!0)})}function p(){}var m=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return m(n())}}},g=tinymce.util.Tools.resolve("tinymce.PluginManager"),v=function(e){return!(!/(^|[ ,])powerpaste([, ]|$)/.test(e.settings.plugins)||!g.get("powerpaste"))&&(void 0!==window.console&&window.console.log&&window.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),!0)},b={hasProPlugin:v},y=function(e,t){return{clipboard:e,quirks:t}},w={get:y},x=function(e,t,n,r){return e.fire("PastePreProcess",{content:t,internal:n,wordContent:r})},C=function(e,t,n,r){return e.fire("PastePostProcess",{node:t,internal:n,wordContent:r})},k=function(e,t){return e.fire("PastePlainTextToggle",{state:t})},N=function(e,t){return e.fire("paste",{ieFake:t})},_={firePastePreProcess:x,firePastePostProcess:C,firePastePlainTextToggle:k,firePaste:N},S=function(e){return e.getParam("paste_plaintext_inform",!0)},T=function(e){return e.getParam("paste_block_drop",!1)},E=function(e){return e.getParam("paste_data_images",!1)},O=function(e){return e.getParam("paste_filter_drop",!0)},A=function(e){return e.getParam("paste_preprocess")},D=function(e){return e.getParam("paste_postprocess")},R=function(e){return e.getParam("paste_webkit_styles")},M=function(e){return e.getParam("paste_remove_styles_if_webkit",!0)},P=function(e){return e.getParam("paste_merge_formats",!0)},L=function(e){return e.getParam("smart_paste",!0)},I=function(e){return e.getParam("paste_as_text",!1)},j=function(e){return e.getParam("paste_retain_style_properties")},B=function(e){return e.getParam("paste_word_valid_elements","-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody")},F=function(e){return e.getParam("paste_convert_word_fake_lists",!0)},H=function(e){return e.getParam("paste_enable_default_filters",!0)},U={shouldPlainTextInform:S,shouldBlockDrop:T,shouldPasteDataImages:E,shouldFilterDrop:O,getPreProcess:A,getPostProcess:D,getWebkitStyles:R,shouldRemoveWebKitStyles:M,shouldMergeFormats:P,isSmartPasteEnabled:L,isPasteAsTextEnabled:I,getRetainStyleProps:j,getWordValidElements:B,shouldConvertWordFakeLists:F,shouldUseDefaultFilters:H},z=function(e,t){return!1===t.get()&&U.shouldPlainTextInform(e)},W=function(e,t){e.notificationManager.open({text:e.translate(t),type:"info"})},V=function(e,t,n){"text"===t.pasteFormat.get()?(t.pasteFormat.set("html"),_.firePastePlainTextToggle(e,!1)):(t.pasteFormat.set("text"),_.firePastePlainTextToggle(e,!0),z(e,n)&&(W(e,"Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off."),n.set(!0))),e.focus()},q={togglePlainTextPaste:V},$=function(e,t,n){e.addCommand("mceTogglePlainTextPaste",function(){q.togglePlainTextPaste(e,t,n)}),e.addCommand("mceInsertClipboardContent",function(e,n){n.content&&t.pasteHtml(n.content,n.internal),n.text&&t.pasteText(n.text)})},K={register:$},G=tinymce.util.Tools.resolve("tinymce.Env"),X=tinymce.util.Tools.resolve("tinymce.util.Delay"),Y=tinymce.util.Tools.resolve("tinymce.util.Tools"),J=tinymce.util.Tools.resolve("tinymce.util.VK"),Q="\x3c!-- x-tinymce/html --\x3e",Z=function(e){return Q+e},ee=function(e){return e.replace(Q,"")},te=function(e){return-1!==e.indexOf(Q)},ne={mark:Z,unmark:ee,isMarked:te,internalHtmlMime:function(){return"x-tinymce/html"}},re=tinymce.util.Tools.resolve("tinymce.html.Entities"),oe=function(e){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e)},ie=function(e){return e.replace(/\r?\n/g,"<br>")},ae=function(e,t){var n,r=[],o="<"+e;if("object"==typeof t){for(n in t)t.hasOwnProperty(n)&&r.push(n+'="'+re.encodeAllRaw(t[n])+'"');r.length&&(o+=" "+r.join(" "))}return o+">"},se=function(e,t,n){var r=e.split(/\n\n/),o=ae(t,n),i="</"+t+">",a=Y.map(r,function(e){return e.split(/\n/).join("<br />")}),s=function(e){return o+e+i};return 1===a.length?a[0]:Y.map(a,s).join("")},le=function(e,t,n){return t?se(e,t,n):ie(e)},ue={isPlainText:oe,convert:le,toBRs:ie,toBlockElements:se},ce=tinymce.util.Tools.resolve("tinymce.html.DomParser"),de=tinymce.util.Tools.resolve("tinymce.html.Node"),fe=tinymce.util.Tools.resolve("tinymce.html.Schema"),he=tinymce.util.Tools.resolve("tinymce.html.Serializer"),pe=function(){return-1!==navigator.userAgent.indexOf(" Edge/")},me={filter:e,innerText:t,trimHtml:n,createIdGenerator:r,isMsEdge:pe},ge=function(e,t){var n,r;n=U.getRetainStyleProps(e),n&&(r=Y.makeMap(n.split(/[, ]/))),t=me.filter(t,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,"\xa0"],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join("\xa0"):""}]]);var o=U.getWordValidElements(e),i=fe({valid_elements:o,valid_children:"-li[p]"});Y.each(i.elements,function(e){e.attributes.class||(e.attributes.class={},e.attributesOrder.push("class")),e.attributes.style||(e.attributes.style={},e.attributesOrder.push("style"))});var a=ce({},i);a.addAttributeFilter("style",function(t){for(var n,o=t.length;o--;)n=t[o],n.attr("style",l(e,r,n,n.attr("style"))),"span"===n.name&&n.parent&&!n.attributes.length&&n.unwrap()}),a.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)t=e[r],n=t.attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(n)&&t.remove(),t.attr("class",null)}),a.addNodeFilter("del",function(e){for(var t=e.length;t--;)e[t].remove()}),a.addNodeFilter("a",function(e){for(var t,n,r,o=e.length;o--;)if(t=e[o],n=t.attr("href"),r=t.attr("name"),n&&-1!==n.indexOf("#_msocom_"))t.remove();else if(n&&0===n.indexOf("file://")&&(n=n.split("#")[1])&&(n="#"+n),n||r){if(r&&!/^_?(?:toc|edn|ftn)/i.test(r)){t.unwrap();continue}t.attr({href:n,name:r})}else t.unwrap()});var u=a.parse(t);return U.shouldConvertWordFakeLists(e)&&s(u),t=he({validate:e.settings.validate},i).serialize(u)},ve=function(e,t){return U.shouldUseDefaultFilters(e)?ge(e,t):t},be={preProcess:ve,isWordContent:o},ye=function(e,t){return{content:e,cancelled:t}},we=function(e,t,n,r){var o=e.dom.create("div",{style:"display:none"},t),i=_.firePastePostProcess(e,o,n,r);return ye(i.node.innerHTML,i.isDefaultPrevented())},xe=function(e,t,n,r){var o=_.firePastePreProcess(e,t,n,r);return e.hasEventListeners("PastePostProcess")&&!o.isDefaultPrevented()?we(e,o.content,n,r):ye(o.content,o.isDefaultPrevented())},Ce=function(e,t,n){var r=be.isWordContent(t),o=r?be.preProcess(e,t):t;return xe(e,o,n,r)},ke={process:Ce},Ne=function(e,t){return e.insertContent(t,{merge:U.shouldMergeFormats(e),paste:!0}),!0},_e=function(e){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(e)},Se=function(e){return _e(e)&&/.(gif|jpe?g|png)$/.test(e)},Te=function(e,t,n){return e.undoManager.extra(function(){n(e,t)},function(){e.insertContent('<img src="'+t+'">')}),!0},Ee=function(e,t,n){return e.undoManager.extra(function(){n(e,t)},function(){e.execCommand("mceInsertLink",!1,t)}),!0},Oe=function(e,t,n){return!(!1!==e.selection.isCollapsed()||!_e(t))&&Ee(e,t,n)},Ae=function(e,t,n){return!!Se(t)&&Te(e,t,n)},De=function(e,t){Y.each([Oe,Ae,Ne],function(n){return!0!==n(e,t,Ne)})},Re=function(e,t){!1===U.isSmartPasteEnabled(e)?Ne(e,t):De(e,t)},Me={isImageUrl:Se,isAbsoluteUrl:_e,insertContent:Re},Pe=function(e,t,n){var r=n||ne.isMarked(t),o=ke.process(e,ne.unmark(t),r);!1===o.cancelled&&Me.insertContent(e,o.content)},Le=function(e,t){t=e.dom.encode(t).replace(/\r\n/g,"\n"),t=ue.convert(t,e.settings.forced_root_block,e.settings.forced_root_block_attrs),Pe(e,t,!1)},Ie=function(e){var t={};if(e){if(e.getData){var n=e.getData("Text");n&&n.length>0&&-1===n.indexOf("data:text/mce-internal,")&&(t["text/plain"]=n)}if(e.types)for(var r=0;r<e.types.length;r++){var o=e.types[r];try{t[o]=e.getData(o)}catch(e){t[o]=""}}}return t},je=function(e,t){var n=Ie(t.clipboardData||e.getDoc().dataTransfer);return me.isMsEdge()?Y.extend(n,{"text/html":""}):n},Be=function(e,t){return t in e&&e[t].length>0},Fe=function(e){return Be(e,"text/html")||Be(e,"text/plain")},He=function(e){var t;return t=e.indexOf(","),-1!==t?e.substr(t+1):null},Ue=function(e,t){return!e.images_dataimg_filter||e.images_dataimg_filter(t)},ze=function(e,t){var n=t.match(/([\s\S]+?)\.(?:jpeg|jpg|png|gif)$/i);return n?e.dom.encode(n[1]):null},We=me.createIdGenerator("mceclip"),Ve=function(e,t,n,r){t&&(e.selection.setRng(t),t=null);var o=n.result,i=He(o),a=We(),s=e.settings.images_reuse_filename&&r.name?ze(e,r.name):a,l=new Image;if(l.src=o,Ue(e.settings,l)){var u=e.editorUpload.blobCache,c=void 0,d=void 0;d=u.findFirst(function(e){return e.base64()===i}),d?c=d:(c=u.create(a,r,i,s),u.add(c)),Pe(e,'<img src="'+c.blobUri()+'">',!1)}else Pe(e,'<img src="'+o+'">',!1)},qe=function(e){return"paste"===e.type},$e=function(e,t,n){function r(r){var o,i,a,s=!1;if(r)for(o=0;o<r.length;o++)if(i=r[o],/^image\/(jpeg|png|gif|bmp)$/.test(i.type)){var l=i.getAsFile?i.getAsFile():i;a=new window.FileReader,a.onload=Ve.bind(null,e,n,a,l),a.readAsDataURL(l),t.preventDefault(),s=!0}return s}var o=qe(t)?t.clipboardData:t.dataTransfer;if(e.settings.paste_data_images&&o)return r(o.items)||r(o.files)},Ke=function(e){var t=e.clipboardData;return-1!==navigator.userAgent.indexOf("Android")&&t&&t.items&&0===t.items.length},Ge=function(e){return J.metaKeyPressed(e)&&86===e.keyCode||e.shiftKey&&45===e.keyCode},Xe=function(e,t,n){function r(n,r,o,i){var a,s;if(Be(n,"text/html")?a=n["text/html"]:(a=t.getHtml(),i=i||ne.isMarked(a),t.isDefaultContent(a)&&(o=!0)),a=me.trimHtml(a),t.remove(),s=!1===i&&ue.isPlainText(a),a.length&&!s||(o=!0),o&&(a=Be(n,"text/plain")&&s?n["text/plain"]:me.innerText(a)),t.isDefaultContent(a))return void(r||e.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents."));o?Le(e,a):Pe(e,a,i)}var o,i=0;e.on("keydown",function(n){function r(e){Ge(e)&&!e.isDefaultPrevented()&&t.remove()}if(Ge(n)&&!n.isDefaultPrevented()){if((o=n.shiftKey&&86===n.keyCode)&&G.webkit&&-1!==navigator.userAgent.indexOf("Version/"))return;if(n.stopImmediatePropagation(),i=(new Date).getTime(),G.ie&&o)return n.preventDefault(),void _.firePaste(e,!0);t.remove(),t.create(),e.once("keyup",r),e.once("paste",function(){e.off("keyup",r)})}});var a=function(){return t.getLastRng()||e.selection.getRng()};e.on("paste",function(s){var l=(new Date).getTime(),u=je(e,s),c=(new Date).getTime()-l,d=(new Date).getTime()-i-c<1e3,f="text"===n.get()||o,h=Be(u,ne.internalHtmlMime());return o=!1,s.isDefaultPrevented()||Ke(s)?void t.remove():!Fe(u)&&$e(e,s,a())?void t.remove():(d||s.preventDefault(),!G.ie||d&&!s.ieFake||Be(u,"text/html")||(t.create(),e.dom.bind(t.getEl(),"paste",function(e){e.stopPropagation()}),e.getDoc().execCommand("Paste",!1,null),u["text/html"]=t.getHtml()),void(Be(u,"text/html")?(s.preventDefault(),h||(h=ne.isMarked(u["text/html"])),r(u,d,f,h)):X.setEditorTimeout(e,function(){r(u,d,f,h)},0)))})},Ye=function(e,t,n){Xe(e,t,n);var r;e.parser.addNodeFilter("img",function(t,n,o){var i=function(e){e.attr("data-mce-object")||r===G.transparentSrc||e.remove()};if(!e.settings.paste_data_images&&function(e){return e.data&&!0===e.data.paste}(o))for(var a=t.length;a--;)(r=t[a].attributes.map.src)&&(!function(e){return 0===e.indexOf("webkit-fake-url")}(r)?!e.settings.allow_html_data_urls&&function(e){return 0===e.indexOf("data:")}(r)&&i(t[a]):i(t[a]))})},Je=function(e){return G.ie&&e.inline?document.body:e.getBody()},Qe=function(e){return Je(e)!==e.getBody()},Ze=function(e,t,n){Qe(e)&&e.dom.bind(t,"paste keyup",function(t){st(e,n)||e.fire("paste")})},et=function(e,t,n){var r,o=e.dom,i=e.getBody();t.set(e.selection.getRng()),r=e.dom.add(Je(e),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},n),(G.ie||G.gecko)&&o.setStyle(r,"left","rtl"===o.getStyle(i,"direction",!0)?65535:-65535),o.bind(r,"beforedeactivate focusin focusout",function(e){e.stopPropagation()}),Ze(e,r,n),r.focus(),e.selection.select(r,!0)},tt=function(e,t){if(nt(e)){for(var n=void 0,r=t.get();n=e.dom.get("mcepastebin");)e.dom.remove(n),e.dom.unbind(n);r&&e.selection.setRng(r)}t.set(null)},nt=function(e){return e.dom.get("mcepastebin")},rt=function(e){var t,n,r,o,i,a=function(t,n){t.appendChild(n),e.dom.remove(n,!0)};for(n=Y.grep(Je(e).childNodes,function(e){return"mcepastebin"===e.id}),t=n.shift(),Y.each(n,function(e){a(t,e)}),o=e.dom.select("div[id=mcepastebin]",t),r=o.length-1;r>=0;r--)i=e.dom.create("div"),t.insertBefore(i,o[r]),a(i,o[r]);return t?t.innerHTML:""},ot=function(e){return e.get()},it=function(e,t){return t===e},at=function(e){return e&&"mcepastebin"===e.id},st=function(e,t){var n=nt(e);return at(n)&&it(t,n.innerHTML)},lt=function(e){var t=m(null);return{create:function(){return et(e,t,"%MCEPASTEBIN%")},remove:function(){return tt(e,t)},getEl:function(){return nt(e)},getHtml:function(){return rt(e)},getLastRng:function(){return ot(t)},isDefault:function(){return st(e,"%MCEPASTEBIN%")},isDefaultContent:function(e){return it("%MCEPASTEBIN%",e)}}},ut=function(e,t){var n=lt(e);return e.on("preInit",function(){return Ye(e,n,t)}),{pasteFormat:t,pasteHtml:function(t,n){return Pe(e,t,n)},pasteText:function(t){return Le(e,t)},pasteImageData:function(t,n){return $e(e,t,n)},getDataTransferItems:Ie,hasHtmlOrText:Fe,hasContentType:Be}},ct=function(){},dt=function(e){return!1===G.iOS&&void 0!==e&&"function"==typeof e.setData&&!0!==me.isMsEdge()},ft=function(e,t,n){if(!dt(e))return!1;try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",n),e.setData(ne.internalHtmlMime(),t),!0}catch(e){return!1}},ht=function(e,t,n,r){ft(e.clipboardData,t.html,t.text)?(e.preventDefault(),r()):n(t.html,r)},pt=function(e){return function(t,n){var r=ne.mark(t),o=e.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),i=e.dom.create("div",{contenteditable:"true"},r);e.dom.setStyles(o,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),o.appendChild(i),e.dom.add(e.getBody(),o);var a=e.selection.getRng();i.focus();var s=e.dom.createRng();s.selectNodeContents(i),e.selection.setRng(s),setTimeout(function(){e.selection.setRng(a),o.parentNode.removeChild(o),n()},0)}},mt=function(e){return{html:e.selection.getContent({contextual:!0}),text:e.selection.getContent({format:"text"})}},gt=function(e){return function(t){!1===e.selection.isCollapsed()&&ht(t,mt(e),pt(e),function(){setTimeout(function(){e.execCommand("Delete")},0)})}},vt=function(e){return function(t){!1===e.selection.isCollapsed()&&ht(t,mt(e),pt(e),ct)}},bt=function(e){e.on("cut",gt(e)),e.on("copy",vt(e))},yt={register:bt},wt=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),xt=function(e,t){return wt.getCaretRangeFromPoint(t.clientX,t.clientY,e.getDoc())},Ct=function(e){var t=e["text/plain"];return!!t&&0===t.indexOf("file://")},kt=function(e,t){e.focus(),e.selection.setRng(t)},Nt=function(e,t,n){U.shouldBlockDrop(e)&&e.on("dragend dragover draggesture dragdrop drop drag",function(e){e.preventDefault(),e.stopPropagation()}),U.shouldPasteDataImages(e)||e.on("drop",function(e){var t=e.dataTransfer;t&&t.files&&t.files.length>0&&e.preventDefault()}),e.on("drop",function(r){var o,i;if(i=xt(e,r),!r.isDefaultPrevented()&&!n.get()){o=t.getDataTransferItems(r.dataTransfer);var a=t.hasContentType(o,ne.internalHtmlMime());if((t.hasHtmlOrText(o)&&!Ct(o)||!t.pasteImageData(r,i))&&i&&U.shouldFilterDrop(e)){var s=o["mce-internal"]||o["text/html"]||o["text/plain"];s&&(r.preventDefault(),X.setEditorTimeout(e,function(){e.undoManager.transact(function(){o["mce-internal"]&&e.execCommand("Delete"),kt(e,i),s=me.trimHtml(s),o["text/html"]?t.pasteHtml(s,a):t.pasteText(s)})}))}}}),e.on("dragstart",function(e){n.set(!0)}),e.on("dragover dragend",function(t){U.shouldPasteDataImages(e)&&!1===n.get()&&(t.preventDefault(),kt(e,xt(e,t))),"dragend"===t.type&&n.set(!1)})},_t={setup:Nt},St=function(e){var t=e.plugins.paste,n=U.getPreProcess(e);n&&e.on("PastePreProcess",function(e){n.call(t,t,e)});var r=U.getPostProcess(e);r&&e.on("PastePostProcess",function(e){r.call(t,t,e)})},Tt={setup:St},Et=function(e){G.webkit&&u(e,f),G.ie&&(u(e,d),c(e,h))},Ot={setup:Et},At=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=new Array(arguments.length-1),o=1;o<arguments.length;o++)r[o-1]=arguments[o];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];var a=r.concat(o);return e.apply(null,a)}},Dt=function(e,t,n){var r=n.control;r.active("text"===t.pasteFormat.get()),e.on("PastePlainTextToggle",function(e){r.active(e.state)})},Rt=function(e,t){var n=At(Dt,e,t);e.addButton("pastetext",{active:!1,icon:"pastetext",tooltip:"Paste as text",cmd:"mceTogglePlainTextPaste",onPostRender:n}),e.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:t.pasteFormat,cmd:"mceTogglePlainTextPaste",onPostRender:n})},Mt={register:Rt};g.add("paste",function(e){if(!1===b.hasProPlugin(e)){var t=m(!1),n=m(!1),r=m(U.isPasteAsTextEnabled(e)?"text":"html"),o=ut(e,r),i=Ot.setup(e);return Mt.register(e,o),K.register(e,o,t),Tt.setup(e),yt.register(e),_t.setup(e,o,n),w.get(o,i)}})}()}()},3337:function(e,t,n){n(3338)},3338:function(e,t){!function(){!function(){"use strict";function e(e,t,n){var r=e.isiOS()&&!0===/ipad/i.test(n),o=e.isiOS()&&!r,i=e.isAndroid()&&3===e.version.major,a=e.isAndroid()&&4===e.version.major,s=r||i||a&&!0===/mobile/i.test(n),l=e.isiOS()||e.isAndroid(),u=l&&!s,c=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:S(r),isiPhone:S(o),isTablet:S(s),isPhone:S(u),isTouch:S(l),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:S(c)}}function t(e,t,n,r,o){return e(n,r)?H.some(n):$(o)&&o(n)?H.none():t(n,r,o)}function n(){var e=function(e){return Ve.fromDom(e.dom().cloneNode(!1))},t=function(e){return!!Dn.isElement(e)&&("body"===Dn.name(e)||X(pi,Dn.name(e)))},n=function(e){return!!Dn.isElement(e)&&X(["br","img","hr","input"],Dn.name(e))},r=function(e,t){return e.dom().compareDocumentPosition(t.dom())},o=function(e,t){var n=zn.clone(e);zn.setAll(t,n)};return{up:S({selector:br.ancestor,closest:br.closest,predicate:dr.ancestor,all:yn.parents}),down:S({selector:or.descendants,predicate:Qn.descendants}),styles:S({get:so.get,getRaw:so.getRaw,set:so.set,remove:so.remove}),attrs:S({get:zn.get,set:zn.set,remove:zn.remove,copyTo:o}),insert:S({before:mo.before,after:mo.after,afterAll:wo.after,append:mo.append,appendAll:wo.append,prepend:mo.prepend,wrap:mo.wrap}),remove:S({unwrap:No.unwrap,remove:No.remove}),create:S({nu:Ve.fromTag,clone:e,text:Ve.fromText}),query:S({comparePosition:r,prevSibling:yn.prevSibling,nextSibling:yn.nextSibling}),property:S({children:yn.children,name:Dn.name,parent:yn.parent,isText:Dn.isText,isComment:Dn.isComment,isElement:Dn.isElement,getText:Wo.get,setText:Wo.set,isBoundary:t,isEmptyTag:n}),eq:Jt.eq,is:Jt.is}}function r(e,t){var n=function(t,n){if(!K(n)&&!n.match(/^[0-9]+$/))throw e+".set accepts only positive integer values. Value was "+n;var r=t.dom();Vr.isSupported(r)&&(r.style[e]=n+"px")},r=function(n){var r=t(n);if(r<=0||null===r){var o=so.get(n,e);return parseFloat(o)||0}return r},o=r,i=function(e,t){return ne(t,function(t,n){var r=so.get(e,n),o=void 0===r?0:parseInt(r,10);return isNaN(o)?t:t+o},0)};return{set:n,get:r,getOuter:o,aggregate:i,max:function(e,t,n){var r=i(e,n);return t>r?t-r:0}}}function o(e){var t=function(t){return e(t).isRtl()?al.rtl:al.ltr},n=function(e,n){return t(n).delta(e,n)},r=function(e,n){return t(n).positions(e,n)};return{delta:n,edge:function(e){return t(e).edge(e)},positions:r}}function i(e,t,n){var r=n||!1,o=function(){t(),r=!0},i=function(){e(),r=!1};return{on:o,off:i,toggle:function(){(r?i:o)()},isOn:function(){return r}}}function a(e){return e.control.rootControl.find("#style")[0].getEl().isEqualNode(document.activeElement)}function s(e,t,n,r){function o(e,n,r){(1===t.length||r)&&a.setAttrib(e,n,r)}function i(e,n,r){(1===t.length||r)&&a.setStyle(e,n,r)}var a=e.dom;Uf(e)&&wh.syncAdvancedStyleFields(e,r);var s=r.control.rootControl.toJSON();e.undoManager.transact(function(){sh.each(t,function(t){o(t,"scope",s.scope),o(t,"style",s.style),o(t,"class",s.class),i(t,"height",Nf(s.height)),s.type!==t.parentNode.nodeName.toLowerCase()&&Th(e.dom,t,s.type),s.align!==n.align&&(hh.unApplyAlign(e,t),hh.applyAlign(e,t,s.align))}),e.focus()})}function l(e,t,n,r){if("TD"===t.tagName||"TH"===t.tagName)e.setStyle(t,n,r);else if(t.children)for(var o=0;o<t.children.length;o++)l(e,t.children[o],n,r)}function u(e){var t=ve.apply(null,e),n=[];return{bind:function(e){if(void 0===e)throw"Event bind error: undefined handler";n.push(e)},unbind:function(e){n=ee(n,function(t){return t!==e})},trigger:function(){var e=t.apply(null,arguments);Q(n,function(t){t(e)})}}}function c(e){var t=Vl({layerClass:hp.resolve("blocker")},e),n=Ve.fromTag("div");return zn.set(n,"role","presentation"),so.setAll(n,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Vu.add(n,hp.resolve("blocker")),Vu.add(n,t.layerClass),{element:function(){return n},destroy:function(){No.remove(n)}}}function d(){var e=H.none(),t=function(){e=H.none()},n=function(t,n){var r=e.map(function(e){return t.compare(e,n)});return e=H.some(n),r},r=function(e,t){t.extract(e).each(function(e){n(t,e).each(function(e){o.trigger.move(e)})})},o=sp.create({move:u(["info"])});return{onEvent:r,reset:t,events:o.registry}}function f(e){return{onEvent:function(e,t){},reset:N}}function h(){var e=f(),t=d(),n=e,r=function(){n.reset(),n=t},o=function(){n.reset(),n=e},i=function(e,t){n.onEvent(e,t)};return{on:r,off:o,isOn:function(){return n===t},onEvent:i,events:t.events}}function p(){var e=sp.create({drag:u(["xDelta","yDelta"])});return{mutate:function(t,n){e.trigger.drag(t,n)},events:e.registry}}function m(){var e=sp.create({drag:u(["xDelta","yDelta","target"])}),t=H.none(),n=p();return n.events.drag.bind(function(n){t.each(function(t){e.trigger.drag(n.xDelta(),n.yDelta(),t)})}),{assign:function(e){t=H.some(e)},get:function(){return t},mutate:n.mutate,events:e.registry}}function g(e,t,n){var r=m(),o=Pp.transform(r,{}),i=H.none(),a=function(e,t){return H.from(zn.get(e,t))};r.events.drag.bind(function(e){a(e.target(),"data-row").each(function(t){var n=dd.getInt(e.target(),"top");so.set(e.target(),"top",n+e.yDelta()+"px")}),a(e.target(),"data-column").each(function(t){var n=dd.getInt(e.target(),"left");so.set(e.target(),"left",n+e.xDelta()+"px")})});var s=function(e,t){return dd.getInt(e,t)-parseInt(zn.get(e,"data-initial-"+t),10)};o.events.stop.bind(function(){r.get().each(function(r){i.each(function(o){a(r,"data-row").each(function(e){var t=s(r,"top");zn.remove(r,"data-initial-top"),g.trigger.adjustHeight(o,t,parseInt(e,10))}),a(r,"data-column").each(function(e){var t=s(r,"left");zn.remove(r,"data-initial-left"),g.trigger.adjustWidth(o,t,parseInt(e,10))}),ic.refresh(e,o,n,t)})})});var l=function(t,n){g.trigger.startAdjust(),r.assign(t),zn.set(t,"data-initial-"+n,parseInt(so.get(t,n),10)),Vu.add(t,zp),so.set(t,"opacity","0.2"),o.go(e.parent())},c=Np.bind(e.parent(),"mousedown",function(e){ic.isRowBar(e.target())&&l(e.target(),"top"),ic.isColBar(e.target())&&l(e.target(),"left")}),d=function(t){return Jt.eq(t,e.view())},f=Np.bind(e.view(),"mouseover",function(r){"table"===Dn.name(r.target())||Up.closest(r.target(),"table",d)?(i="table"===Dn.name(r.target())?H.some(r.target()):br.ancestor(r.target(),"table",d),i.each(function(r){ic.refresh(e,r,n,t)})):$n.inBody(r.target())&&ic.destroy(e)}),h=function(){c.unbind(),f.unbind(),o.destroy(),ic.destroy(e)},p=function(r){ic.refresh(e,r,n,t)},g=sp.create({adjustHeight:u(["table","delta","row"]),adjustWidth:u(["table","delta","column"]),startAdjust:u([])});return{destroy:h,refresh:p,on:o.on,off:o.off,hideBars:E(ic.hide,e),showBars:E(ic.show,e),events:g.registry}}function v(e,t){var n=il.height,r=g(e,t,n),o=sp.create({beforeResize:u(["table"]),afterResize:u(["table"]),startDrag:u([])});return r.events.adjustHeight.bind(function(e){o.trigger.beforeResize(e.table());var t=n.delta(e.delta(),e.table());Hd.adjustHeight(e.table(),t,e.row(),n),o.trigger.afterResize(e.table())}),r.events.startAdjust.bind(function(e){o.trigger.startDrag()}),r.events.adjustWidth.bind(function(e){o.trigger.beforeResize(e.table());var n=t.delta(e.delta(),e.table());Hd.adjustWidth(e.table(),n,e.column(),t),o.trigger.afterResize(e.table())}),{on:r.on,off:r.off,hideBars:r.hideBars,showBars:r.showBars,destroy:r.destroy,events:o.registry}}function b(e){var t=function(t,n){return Ve.fromPoint(Ve.fromDom(e.document),t,n)},n=function(e){return e.dom().getBoundingClientRect()},r=function(t,n,r,o){var i=hm.exact(t,n,r,o);return Wg.getFirstRect(e,i).map(function(e){return me(e,D)})},o=function(){return Wg.get(e).map(function(t){return lv.convertToRange(e,t)})},i=function(t){var n=hm.relative(t.start(),t.finish());return lv.convertToRange(e,n)},a=function(t,n){return Wg.getAtPoint(e,t,n).map(function(e){return{start:S(sm.on(e.start(),e.soffset())),finish:S(sm.on(e.finish(),e.foffset()))}})},s=function(){Wg.clear(e)},l=function(t){Wg.setToElement(e,t)};return{elementFromPoint:t,getRect:n,getRangedRect:r,getSelection:o,fromSitus:i,situsFromPoint:a,clearSelection:s,setSelection:function(t){Wg.setExact(e,t.start(),t.soffset(),t.finish(),t.foffset())},setRelativeSelection:function(t,n){Wg.setRelative(e,t,n)},selectContents:l,getInnerHeight:function(){return e.innerHeight},getScrollY:function(){return yv.get(Ve.fromDom(e.document)).top()},scrollBy:function(t,n){yv.by(t,n,Ve.fromDom(e.document))}}}function y(e,t,n,r){var o=H.none(),i=function(){o=H.none()};return{mousedown:function(e){r.clear(t),o=Oy(e.target(),n)},mouseover:function(i){o.each(function(o){r.clear(t),Oy(i.target(),n).each(function(i){ba.identify(o,i,n).each(function(n){var a=n.boxes().getOr([]);(a.length>1||1===a.length&&!Jt.eq(o,i))&&(r.selectRange(t,a,n.start(),n.finish()),e.selectContents(i))})})})},mouseup:function(){o.each(i)}}}function w(e,t){var n=Ne(["mousedown","mouseover","mouseup","keyup","keydown"],[]),r=H.none(),o=Yy.byAttr(ka);e.on("init",function(i){var a=e.getWin(),s=yf(e),l=Cf(e),u=function(){var t=e.selection,n=Ve.fromDom(t.getStart()),r=Ve.fromDom(t.getEnd());qi.sharedOne(Rr.table,[n,r]).fold(function(){o.clear(s)},N)},c=Py.mouse(a,s,l,o),d=Py.keyboard(a,s,l,o),f=function(e){return!0===e.raw().shiftKey},h=function(t,n){f(t)&&(n.kill()&&t.kill(),n.selection().each(function(t){var n=hm.relative(t.start(),t.finish()),r=zm.asLtrRange(a,n);e.selection.setRng(r)}))},p=function(t){var n=v(t);if(n.raw().shiftKey&&iv.isNavigation(n.raw().which)){var r=e.selection.getRng(),o=Ve.fromDom(r.startContainer),i=Ve.fromDom(r.endContainer);d.keyup(n,o,r.startOffset,i,r.endOffset).each(function(e){h(n,e)})}},m=function(n){var r=v(n);t().each(function(e){e.hideBars()});var o=e.selection.getRng(),i=Ve.fromDom(e.selection.getStart()),a=Ve.fromDom(o.startContainer),s=Ve.fromDom(o.endContainer),l=Rf.directionAt(i).isRtl()?iv.rtl:iv.ltr;d.keydown(r,a,o.startOffset,s,o.endOffset,l).each(function(e){h(r,e)}),t().each(function(e){e.showBars()})},g=function(e){return e.hasOwnProperty("x")&&e.hasOwnProperty("y")},v=function(e){var t=Ve.fromDom(e.target),n=function(){e.stopPropagation()},r=function(){e.preventDefault()},o=_(r,n);return{target:S(t),x:S(g(e)?e.x:null),y:S(g(e)?e.y:null),stop:n,prevent:r,kill:o,raw:S(e)}},b=function(e){return 0===e.button},y=function(e){return void 0===e.buttons||0!=(1&e.buttons)},w=function(e){b(e)&&Jy(e)&&c.mousedown(v(e))},x=function(e){y(e)&&Jy(e)&&c.mouseover(v(e))},C=function(e){b(e)&&Jy(e)&&c.mouseup(v(e))};e.on("mousedown",w),e.on("mouseover",x),e.on("mouseup",C),e.on("keyup",p),e.on("keydown",m),e.on("nodechange",u),r=H.some(n({mousedown:w,mouseover:x,mouseup:C,keyup:p,keydown:m}))});var i=function(){r.each(function(e){})};return{clear:o.clear,destroy:i}}function x(e){var t=Kp(e),n=w(e,t.lazyResize),r=oh(e,t.lazyWire),o=Qy(e),i=ul(H.none());return tp.registerCommands(e,r,n,o,i),za.registerEvents(e,o,r,n),ow.addMenuItems(e,o),nw.addButtons(e),nw.addToolbars(e),e.on("PreInit",function(){e.serializer.addTempAttr(ka.firstSelected()),e.serializer.addTempAttr(ka.lastSelected())}),Ff(e)&&e.on("keydown",function(n){Qg.handle(n,e,r,t.lazyWire)}),e.on("remove",function(){t.destroy(),n.destroy()}),sw(e,i)}function C(){}var k=tinymce.util.Tools.resolve("tinymce.PluginManager"),N=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},_=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(null,arguments))}},S=function(e){return function(){return e}},T=function(e){return e},E=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=new Array(arguments.length-1),o=1;o<arguments.length;o++)r[o-1]=arguments[o];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];var a=r.concat(o);return e.apply(null,a)}},O=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return!e.apply(null,arguments)}},A=function(e){return function(){throw new Error(e)}},D=function(e){return e()},R=S(!1),M=S(!0),P=R,L=M,I=function(){return j},j=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e},r=function(){},o=function(){return null},i=function(){},a={fold:function(e,t){return e()},is:P,isSome:P,isNone:L,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:o,getOrUndefined:i,or:n,orThunk:t,map:I,ap:I,each:r,bind:I,flatten:I,exists:P,forall:L,filter:I,equals:e,equals_:e,toArray:function(){return[]},toString:S("none()")};return Object.freeze&&Object.freeze(a),a}(),B=function(e){var t=function(){return e},n=function(){return i},r=function(t){return B(t(e))},o=function(t){return t(e)},i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:L,isNone:P,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:r,ap:function(t){return t.fold(I,function(t){return B(t(e))})},each:function(t){t(e)},bind:o,flatten:t,exists:o,forall:o,filter:function(t){return t(e)?i:j},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(P,function(t){return n(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return i},F=function(e){return null===e||void 0===e?j:B(e)},H={some:B,none:I,from:F},U=function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t},z=function(e){return function(t){return U(t)===e}},W=z("string"),V=z("array"),q=z("boolean"),$=z("function"),K=z("number"),G=function(){var e=Array.prototype.indexOf,t=function(t,n){return e.call(t,n)},n=function(e,t){return ie(e,t)};return void 0===e?n:t}(),X=function(e,t){return G(e,t)>-1},Y=function(e,t){return oe(e,t).isSome()},J=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o,e)}return r},Q=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n,e)}},Z=function(e,t){for(var n=e.length-1;n>=0;n--){t(e[n],n,e)}},ee=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r,e)&&n.push(i)}return n},te=function(e,t,n){return Z(e,function(e){n=t(n,e)}),n},ne=function(e,t,n){return Q(e,function(e){n=t(n,e)}),n},re=function(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];if(t(o,n,e))return H.some(o)}return H.none()},oe=function(e,t){for(var n=0,r=e.length;n<r;n++){if(t(e[n],n,e))return H.some(n)}return H.none()},ie=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},ae=Array.prototype.push,se=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!Array.prototype.isPrototypeOf(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);ae.apply(t,e[n])}return t},le=function(e,t){var n=J(e,t);return se(n)},ue=function(e,t){for(var n=0,r=e.length;n<r;++n){if(!0!==t(e[n],n,e))return!1}return!0},ce=Array.prototype.slice,de=function(e){var t=ce.call(e,0);return t.reverse(),t},fe=function(e){return 0===e.length?H.none():H.some(e[e.length-1])},he=($(Array.from)&&Array.from,Object.keys),pe=function(e,t){for(var n=he(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i,e)}},me=function(e,t){return ge(e,function(e,n,r){return{k:n,v:t(e,n,r)}})},ge=function(e,t){var n={};return pe(e,function(r,o){var i=t(r,o,e);n[i.k]=i.v}),n},ve=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments");var r={};return Q(e,function(e,n){r[e]=S(t[n])}),r}},be=function(e){return e.slice(0).sort()},ye=function(e,t){throw new Error("All required keys ("+be(e).join(", ")+") were not specified. Specified keys were: "+be(t).join(", ")+".")},we=function(e){throw new Error("Unsupported keys for object: "+be(e).join(", "))},xe=function(e,t){if(!V(t))throw new Error("The "+e+" fields must be an array. Was: "+t+".");Q(t,function(t){if(!W(t))throw new Error("The value "+t+" in the "+e+" fields was not a string.")})},Ce=function(e,t){throw new Error("All values need to be of type: "+t+". Keys ("+be(e).join(", ")+") were not.")},ke=function(e){var t=be(e);re(t,function(e,n){return n<t.length-1&&e===t[n+1]}).each(function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+t.join(", ")+"].")})},Ne=function(e,t){var n=e.concat(t);if(0===n.length)throw new Error("You must specify at least one required or optional field.");return xe("required",e),xe("optional",t),ke(n),function(r){var o=he(r);ue(e,function(e){return X(o,e)})||ye(e,o);var i=ee(o,function(e){return!X(n,e)});i.length>0&&we(i);var a={};return Q(e,function(e){a[e]=S(r[e])}),Q(t,function(e){a[e]=S(Object.prototype.hasOwnProperty.call(r,e)?H.some(r[e]):H.none())}),a}},_e=ve("width","height"),Se=ve("rows","columns"),Te=ve("row","column"),Ee=ve("x","y"),Oe=ve("element","rowspan","colspan"),Ae=ve("element","rowspan","colspan","isNew"),De=ve("element","rowspan","colspan","row","column"),Re=ve("element","cells","section"),Me=ve("element","isNew"),Pe=ve("element","cells","section","isNew"),Le=ve("cells","section"),Ie=ve("details","section"),je=ve("startRow","startCol","finishRow","finishCol"),Be={dimensions:_e,grid:Se,address:Te,coords:Ee,extended:De,detail:Oe,detailnew:Ae,rowdata:Re,elementnew:Me,rowdatanew:Pe,rowcells:Le,rowdetails:Ie,bounds:je},Fe=function(e,t){var n=t||document,r=n.createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1)throw console.error("HTML does not have a single root node",e),"HTML must have a single root node";return ze(r.childNodes[0])},He=function(e,t){var n=t||document,r=n.createElement(e);return ze(r)},Ue=function(e,t){var n=t||document,r=n.createTextNode(e);return ze(r)},ze=function(e){if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:S(e)}},We=function(e,t,n){var r=e.dom();return H.from(r.elementFromPoint(t,n)).map(ze)},Ve={fromHtml:Fe,fromTag:He,fromText:Ue,fromDom:ze,fromPoint:We},qe={ATTRIBUTE:Node.ATTRIBUTE_NODE,CDATA_SECTION:Node.CDATA_SECTION_NODE,COMMENT:Node.COMMENT_NODE,DOCUMENT:Node.DOCUMENT_NODE,DOCUMENT_TYPE:Node.DOCUMENT_TYPE_NODE,DOCUMENT_FRAGMENT:Node.DOCUMENT_FRAGMENT_NODE,ELEMENT:Node.ELEMENT_NODE,TEXT:Node.TEXT_NODE,PROCESSING_INSTRUCTION:Node.PROCESSING_INSTRUCTION_NODE,ENTITY_REFERENCE:Node.ENTITY_REFERENCE_NODE,ENTITY:Node.ENTITY_NODE,NOTATION:Node.NOTATION_NODE},$e=qe.ELEMENT,Ke=qe.DOCUMENT,Ge=function(e,t){var n=e.dom();if(n.nodeType!==$e)return!1;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Xe=function(e){return e.nodeType!==$e&&e.nodeType!==Ke||0===e.childElementCount},Ye=function(e,t){var n=void 0===t?document:t.dom();return Xe(n)?[]:J(n.querySelectorAll(e),Ve.fromDom)},Je=function(e,t){var n=void 0===t?document:t.dom();return Xe(n)?H.none():H.from(n.querySelector(e)).map(Ve.fromDom)},Qe={all:Ye,is:Ge,one:Je},Ze=function(e,t){var n=[],r=function(e){return n.push(e),t(e)},o=t(e);do{o=o.bind(r)}while(o.isSome());return n},et={toArray:Ze},tt="undefined"!=typeof window?window:Function("return this;")(),nt=function(e,t){for(var n=void 0!==t&&null!==t?t:tt,r=0;r<e.length&&void 0!==n&&null!==n;++r)n=n[e[r]];return n},rt=function(e,t){var n=e.split(".");return nt(n,t)},ot=function(e,t){return rt(e,t)},it=function(e,t){var n=ot(e,t);if(void 0===n||null===n)throw e+" not available on this browser";return n},at={getOrDie:it},st=function(){return at.getOrDie("Node")},lt=function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)},ut=function(e,t){return lt(e,t,st().DOCUMENT_POSITION_PRECEDING)},ct=function(e,t){return lt(e,t,st().DOCUMENT_POSITION_CONTAINED_BY)},dt={documentPositionPreceding:ut,documentPositionContainedBy:ct},ft=function(e){var t,n=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return n||(n=!0,t=e.apply(null,r)),t}},ht=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}},pt=function(e,t){var n=ht(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return vt(r(1),r(2))},mt=function(e,t){var n=String(t).toLowerCase();return 0===e.length?gt():pt(e,n)},gt=function(){return vt(0,0)},vt=function(e,t){return{major:e,minor:t}},bt={nu:vt,detect:mt,unknown:gt},yt=function(e,t){return function(){return t===e}},wt=function(){return xt({current:void 0,version:bt.unknown()})},xt=function(e){var t=e.current;return{current:t,version:e.version,isEdge:yt("Edge",t),isChrome:yt("Chrome",t),isIE:yt("IE",t),isOpera:yt("Opera",t),isFirefox:yt("Firefox",t),isSafari:yt("Safari",t)}},Ct={unknown:wt,nu:xt,edge:S("Edge"),chrome:S("Chrome"),ie:S("IE"),opera:S("Opera"),firefox:S("Firefox"),safari:S("Safari")},kt=function(e,t){return function(){return t===e}},Nt=function(){return _t({current:void 0,version:bt.unknown()})},_t=function(e){var t=e.current;return{current:t,version:e.version,isWindows:kt("Windows",t),isiOS:kt("iOS",t),isAndroid:kt("Android",t),isOSX:kt("OSX",t),isLinux:kt("Linux",t),isSolaris:kt("Solaris",t),isFreeBSD:kt("FreeBSD",t)}},St={unknown:Nt,nu:_t,windows:S("Windows"),ios:S("iOS"),android:S("Android"),linux:S("Linux"),osx:S("OSX"),solaris:S("Solaris"),freebsd:S("FreeBSD")},Tt=function(e,t){var n=String(t).toLowerCase();return re(e,function(e){return e.search(n)})},Et=function(e,t){return Tt(e,t).map(function(e){var n=bt.detect(e.versionRegexes,t);return{current:e.name,version:n}})},Ot=function(e,t){return Tt(e,t).map(function(e){var n=bt.detect(e.versionRegexes,t);return{current:e.name,version:n}})},At={detectBrowser:Et,detectOs:Ot},Dt=function(e,t,n){return""===t||!(e.length<t.length)&&e.substr(n,n+t.length)===t},Rt=function(e,t){return-1!==e.indexOf(t)},Mt=function(e,t){return Dt(e,t,e.length-t.length)},Pt=function(e){return e.replace(/^\s+|\s+$/g,"")},Lt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,It=function(e){return function(t){return Rt(t,e)}},jt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return Rt(e,"edge/")&&Rt(e,"chrome")&&Rt(e,"safari")&&Rt(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Lt],search:function(e){return Rt(e,"chrome")&&!Rt(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Rt(e,"msie")||Rt(e,"trident")}},{name:"Opera",versionRegexes:[Lt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:It("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:It("firefox")},{name:"Safari",versionRegexes:[Lt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Rt(e,"safari")||Rt(e,"mobile/"))&&Rt(e,"applewebkit")}}],Bt=[{name:"Windows",search:It("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Rt(e,"iphone")||Rt(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:It("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:It("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:It("linux"),versionRegexes:[]},{name:"Solaris",search:It("sunos"),versionRegexes:[]},{name:"FreeBSD",search:It("freebsd"),versionRegexes:[]}],Ft={browsers:S(jt),oses:S(Bt)},Ht=function(t){var n=Ft.browsers(),r=Ft.oses(),o=At.detectBrowser(n,t).fold(Ct.unknown,Ct.nu),i=At.detectOs(r,t).fold(St.unknown,St.nu);return{browser:o,os:i,deviceType:e(i,o,t)}},Ut={detect:Ht},zt=ft(function(){var e=navigator.userAgent;return Ut.detect(e)}),Wt={detect:zt},Vt=function(e,t){return e.dom()===t.dom()},qt=function(e,t){return e.dom().isEqualNode(t.dom())},$t=function(e,t){return Y(t,E(Vt,e))},Kt=function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},Gt=function(e,t){return dt.documentPositionContainedBy(e.dom(),t.dom())},Xt=Wt.detect().browser,Yt=Xt.isIE()?Gt:Kt,Jt={eq:Vt,isEqualNode:qt,member:$t,contains:Yt,is:Qe.is},Qt=function(e){return Ve.fromDom(e.dom().ownerDocument)},Zt=function(e){return Ve.fromDom(e.dom().ownerDocument.documentElement)},en=function(e){var t=e.dom(),n=t.ownerDocument.defaultView;return Ve.fromDom(n)},tn=function(e){var t=e.dom();return H.from(t.parentNode).map(Ve.fromDom)},nn=function(e){return tn(e).bind(function(t){var n=dn(t);return oe(n,function(t){return Jt.eq(e,t)})})},rn=function(e,t){for(var n=$(t)?t:S(!1),r=e.dom(),o=[];null!==r.parentNode&&void 0!==r.parentNode;){var i=r.parentNode,a=Ve.fromDom(i);if(o.push(a),!0===n(a))break;r=i}return o},on=function(e){var t=function(t){return ee(t,function(t){return!Jt.eq(e,t)})};return tn(e).map(dn).map(t).getOr([])},an=function(e){var t=e.dom();return H.from(t.offsetParent).map(Ve.fromDom)},sn=function(e){var t=e.dom();return H.from(t.previousSibling).map(Ve.fromDom)},ln=function(e){var t=e.dom();return H.from(t.nextSibling).map(Ve.fromDom)},un=function(e){return de(et.toArray(e,sn))},cn=function(e){return et.toArray(e,ln)},dn=function(e){var t=e.dom();return J(t.childNodes,Ve.fromDom)},fn=function(e,t){var n=e.dom().childNodes;return H.from(n[t]).map(Ve.fromDom)},hn=function(e){return fn(e,0)},pn=function(e){return fn(e,e.dom().childNodes.length-1)},mn=function(e){return e.dom().childNodes.length},gn=function(e){return e.dom().hasChildNodes()},vn=ve("element","offset"),bn=function(e,t){var n=dn(e);return n.length>0&&t<n.length?vn(n[t],0):vn(e,t)},yn={owner:Qt,defaultView:en,documentElement:Zt,parent:tn,findIndex:nn,parents:rn,siblings:on,prevSibling:sn,offsetParent:an,prevSiblings:un,nextSibling:ln,nextSiblings:cn,children:dn,child:fn,firstChild:hn,lastChild:pn,childNodesCount:mn,hasChildNodes:gn,leaf:bn},wn=function(e,t){return xn(e,t,S(!0))},xn=function(e,t,n){return le(yn.children(e),function(e){return Qe.is(e,t)?n(e)?[e]:[]:xn(e,t,n)})},Cn={firstLayer:wn,filterFirstLayer:xn},kn=function(e){return e.dom().nodeName.toLowerCase()},Nn=function(e){return e.dom().nodeType},_n=function(e){return e.dom().nodeValue},Sn=function(e){return function(t){return Nn(t)===e}},Tn=function(e){return Nn(e)===qe.COMMENT||"#comment"===kn(e)},En=Sn(qe.ELEMENT),On=Sn(qe.TEXT),An=Sn(qe.DOCUMENT),Dn={name:kn,type:Nn,value:_n,isElement:En,isText:On,isDocument:An,isComment:Tn},Rn=function(e,t,n){if(!(W(n)||q(n)||K(n)))throw console.error("Invalid call to Attr.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},Mn=function(e,t,n){Rn(e.dom(),t,n)},Pn=function(e,t){var n=e.dom();pe(t,function(e,t){Rn(n,t,e)})},Ln=function(e,t){var n=e.dom().getAttribute(t);return null===n?void 0:n},In=function(e,t){var n=e.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},jn=function(e,t){e.dom().removeAttribute(t)},Bn=function(e){var t=e.dom().attributes;return void 0===t||null===t||0===t.length},Fn=function(e){return ne(e.dom().attributes,function(e,t){return e[t.name]=t.value,e},{})},Hn=function(e,t,n){In(e,n)&&!In(t,n)&&Mn(t,n,Ln(e,n))},Un=function(e,t,n){Dn.isElement(e)&&Dn.isElement(t)&&Q(n,function(n){Hn(e,t,n)})},zn={clone:Fn,set:Mn,setAll:Pn,get:Ln,has:In,remove:jn,hasNone:Bn,transfer:Un},Wn=function(e){var t=Dn.isText(e)?e.dom().parentNode:e.dom();return void 0!==t&&null!==t&&t.ownerDocument.body.contains(t)},Vn=ft(function(){return qn(Ve.fromDom(document))}),qn=function(e){var t=e.dom().body;if(null===t||void 0===t)throw"Body is not available yet";return Ve.fromDom(t)},$n={body:Vn,getBody:qn,inBody:Wn},Kn=function(e){return Jn($n.body(),e)},Gn=function(e,t,n){return ee(yn.parents(e,n),t)},Xn=function(e,t){return ee(yn.siblings(e),t)},Yn=function(e,t){return ee(yn.children(e),t)},Jn=function(e,t){var n=[];return Q(yn.children(e),function(e){t(e)&&(n=n.concat([e])),n=n.concat(Jn(e,t))}),n},Qn={all:Kn,ancestors:Gn,siblings:Xn,children:Yn,descendants:Jn},Zn=function(e){return Qe.all(e)},er=function(e,t,n){return Qn.ancestors(e,function(e){return Qe.is(e,t)},n)},tr=function(e,t){return Qn.siblings(e,function(e){return Qe.is(e,t)})},nr=function(e,t){return Qn.children(e,function(e){return Qe.is(e,t)})},rr=function(e,t){return Qe.all(t,e)},or={all:Zn,ancestors:er,siblings:tr,children:nr,descendants:rr},ir=function(e){return cr($n.body(),e)},ar=function(e,t,n){for(var r=e.dom(),o=$(n)?n:S(!1);r.parentNode;){r=r.parentNode;var i=Ve.fromDom(r);if(t(i))return H.some(i);if(o(i))break}return H.none()},sr=function(e,n,r){return t(function(e){return n(e)},ar,e,n,r)},lr=function(e,t){var n=e.dom();return n.parentNode?ur(Ve.fromDom(n.parentNode),function(n){return!Jt.eq(e,n)&&t(n)}):H.none()},ur=function(e,t){return re(e.dom().childNodes,_(t,Ve.fromDom)).map(Ve.fromDom)},cr=function(e,t){var n=function(e){for(var r=0;r<e.childNodes.length;r++){if(t(Ve.fromDom(e.childNodes[r])))return H.some(Ve.fromDom(e.childNodes[r]));var o=n(e.childNodes[r]);if(o.isSome())return o}return H.none()};return n(e.dom())},dr={first:ir,ancestor:ar,closest:sr,sibling:lr,child:ur,descendant:cr},fr=function(e){return Qe.one(e)},hr=function(e,t,n){return dr.ancestor(e,function(e){return Qe.is(e,t)},n)},pr=function(e,t){return dr.sibling(e,function(e){return Qe.is(e,t)})},mr=function(e,t){return dr.child(e,function(e){return Qe.is(e,t)})},gr=function(e,t){return Qe.one(t,e)},vr=function(e,n,r){return t(Qe.is,hr,e,n,r)},br={first:fr,ancestor:hr,sibling:pr,child:mr,descendant:gr,closest:vr},yr=function(e,t,n){var r=void 0!==n?n:S(!1);if(r(t))return H.none();if(X(e,Dn.name(t)))return H.some(t);var o=function(e){return Qe.is(e,"table")||r(e)};return br.ancestor(t,e.join(","),o)},wr=function(e,t){return yr(["td","th"],e,t)},xr=function(e){return Cn.firstLayer(e,"th,td")},Cr=function(e,t){return yr(["caption","tr","tbody","tfoot","thead"],e,t)},kr=function(e,t){return yn.parent(t).map(function(t){return or.children(t,e)})},Nr=E(kr,"th,td"),_r=E(kr,"tr"),Sr=function(e){return br.descendant(e,"th,td")},Tr=function(e,t){return br.closest(e,"table",t)},Er=function(e,t){return yr(["tr"],e,t)},Or=function(e){return Cn.firstLayer(e,"tr")},Ar=function(e,t){return parseInt(zn.get(e,t),10)},Dr=function(e,t,n){var r=Ar(e,t),o=Ar(e,n);return Be.grid(r,o)},Rr={cell:wr,firstCell:Sr,cells:xr,neighbourCells:Nr,table:Tr,row:Er,rows:Or,notCell:Cr,neighbourRows:_r,attr:Ar,grid:Dr},Mr=function(e){var t=Rr.rows(e);return J(t,function(e){var t=e,n=yn.parent(t),r=n.map(function(e){var t=Dn.name(e);return"tfoot"===t||"thead"===t||"tbody"===t?t:"tbody"}).getOr("tbody"),o=J(Rr.cells(e),function(e){var t=zn.has(e,"rowspan")?parseInt(zn.get(e,"rowspan"),10):1,n=zn.has(e,"colspan")?parseInt(zn.get(e,"colspan"),10):1;return Be.detail(e,t,n)});return Be.rowdata(t,o,r)})},Pr=function(e,t){return J(e,function(e){var n=J(Rr.cells(e),function(e){var t=zn.has(e,"rowspan")?parseInt(zn.get(e,"rowspan"),10):1,n=zn.has(e,"colspan")?parseInt(zn.get(e,"colspan"),10):1;return Be.detail(e,t,n)});return Be.rowdata(e,n,t.section())})},Lr={fromTable:Mr,fromPastedRows:Pr},Ir=function(e,t){return e+","+t},jr=function(e,t,n){var r=e.access()[Ir(t,n)];return void 0!==r?H.some(r):H.none()},Br=function(e,t,n){var r=Fr(e,function(e){return n(t,e.element())});return r.length>0?H.some(r[0]):H.none()},Fr=function(e,t){var n=le(e.all(),function(e){return e.cells()});return ee(n,t)},Hr=function(e){var t={},n=[],r=e.length,o=0;Q(e,function(e,r){var i=[];Q(e.cells(),function(e,n){for(var a=0;void 0!==t[Ir(r,a)];)a++;for(var s=Be.extended(e.element(),e.rowspan(),e.colspan(),r,a),l=0;l<e.colspan();l++)for(var u=0;u<e.rowspan();u++){var c=r+u,d=a+l,f=Ir(c,d);t[f]=s,o=Math.max(o,d+1)}i.push(s)}),n.push(Be.rowdata(e.element(),i,e.section()))});var i=Be.grid(r,o);return{grid:S(i),access:S(t),all:S(n)}},Ur=function(e){var t=J(e.all(),function(e){return e.cells()});return se(t)},zr={generate:Hr,getAt:jr,findItem:Br,filterItems:Fr,justCells:Ur},Wr=function(e){return void 0!==e.style},Vr={isSupported:Wr},qr=function(e,t,n){if(!W(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Vr.isSupported(e)&&e.style.setProperty(t,n)},$r=function(e,t){Vr.isSupported(e)&&e.style.removeProperty(t)},Kr=function(e,t,n){var r=e.dom();qr(r,t,n)},Gr=function(e,t){var n=e.dom();pe(t,function(e,t){qr(n,t,e)})},Xr=function(e,t){var n=e.dom();pe(t,function(e,t){e.fold(function(){$r(n,t)},function(e){qr(n,t,e)})})},Yr=function(e,t){var n=e.dom(),r=window.getComputedStyle(n),o=r.getPropertyValue(t),i=""!==o||$n.inBody(e)?o:Jr(n,t);return null===i?void 0:i},Jr=function(e,t){return Vr.isSupported(e)?e.style.getPropertyValue(t):""},Qr=function(e,t){var n=e.dom(),r=Jr(n,t);return H.from(r).filter(function(e){return e.length>0})},Zr=function(e){var t={},n=e.dom();if(Vr.isSupported(n))for(var r=0;r<n.style.length;r++){var o=n.style.item(r);t[o]=n.style[o]}return t},eo=function(e,t,n){var r=Ve.fromTag(e);return Kr(r,t,n),Qr(r,t).isSome()},to=function(e,t){var n=e.dom();$r(n,t),zn.has(e,"style")&&""===Pt(zn.get(e,"style"))&&zn.remove(e,"style")},no=function(e,t){var n=zn.get(e,"style"),r=t(e);return(void 0===n?zn.remove:zn.set)(e,"style",n),r},ro=function(e,t){var n=e.dom(),r=t.dom();Vr.isSupported(n)&&Vr.isSupported(r)&&(r.style.cssText=n.style.cssText)},oo=function(e){return e.dom().offsetWidth},io=function(e,t,n){Qr(e,n).each(function(e){Qr(t,n).isNone()&&Kr(t,n,e)})},ao=function(e,t,n){Dn.isElement(e)&&Dn.isElement(t)&&Q(n,function(n){io(e,t,n)})},so={copy:ro,set:Kr,preserve:no,setAll:Gr,setOptions:Xr,remove:to,get:Yr,getRaw:Qr,getAllRaw:Zr,isValidValue:eo,reflow:oo,transfer:ao},lo=function(e,t){yn.parent(e).each(function(n){n.dom().insertBefore(t.dom(),e.dom())})},uo=function(e,t){yn.nextSibling(e).fold(function(){yn.parent(e).each(function(e){fo(e,t)})},function(e){lo(e,t)})},co=function(e,t){yn.firstChild(e).fold(function(){fo(e,t)},function(n){e.dom().insertBefore(t.dom(),n.dom())})},fo=function(e,t){e.dom().appendChild(t.dom())},ho=function(e,t,n){yn.child(e,n).fold(function(){fo(e,t)},function(e){lo(e,t)})},po=function(e,t){lo(e,t),fo(t,e)},mo={before:lo,after:uo,prepend:co,append:fo,appendAt:ho,wrap:po},go=function(e,t){Q(t,function(t){mo.before(e,t)})},vo=function(e,t){Q(t,function(n,r){var o=0===r?e:t[r-1];mo.after(o,n)})},bo=function(e,t){Q(t.slice().reverse(),function(t){mo.prepend(e,t)})},yo=function(e,t){Q(t,function(t){mo.append(e,t)})},wo={before:go,after:vo,prepend:bo,append:yo},xo=function(e){e.dom().textContent="",Q(yn.children(e),function(e){Co(e)})},Co=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},ko=function(e){var t=yn.children(e);t.length>0&&wo.before(e,t),Co(e)},No={empty:xo,remove:Co,unwrap:ko},_o=ve("minRow","minCol","maxRow","maxCol"),So=function(e,t){var n=e.grid().columns(),r=e.grid().rows(),o=r,i=n,a=0,s=0;return pe(e.access(),function(e){if(t(e)){var n=e.row(),r=n+e.rowspan()-1,l=e.column(),u=l+e.colspan()-1;n<o?o=n:r>a&&(a=r),l<i?i=l:u>s&&(s=u)}}),_o(o,i,a,s)},To=function(e,t,n){var r=e[n].element(),o=Ve.fromTag("td");mo.append(o,Ve.fromTag("br")),(t?mo.append:mo.prepend)(r,o)},Eo=function(e,t,n,r){for(var o=t.grid().columns(),i=t.grid().rows(),a=0;a<i;a++)for(var s=!1,l=0;l<o;l++)if(!(a<n.minRow()||a>n.maxRow()||l<n.minCol()||l>n.maxCol())){var u=zr.getAt(t,a,l).filter(r).isNone();u?To(e,s,a):s=!0}},Oo=function(e,t){var n=ee(Cn.firstLayer(e,"tr"),function(e){return 0===e.dom().childElementCount});Q(n,No.remove),t.minCol()!==t.maxCol()&&t.minRow()!==t.maxRow()||Q(Cn.firstLayer(e,"th,td"),function(e){zn.remove(e,"rowspan"),zn.remove(e,"colspan")}),zn.remove(e,"width"),zn.remove(e,"height"),so.remove(e,"width"),so.remove(e,"height")},Ao=function(e,t){var n=function(e){return Qe.is(e.element(),t)},r=Lr.fromTable(e),o=zr.generate(r),i=So(o,n),a="th:not("+t+"),td:not("+t+")",s=Cn.filterFirstLayer(e,"th,td",function(e){return Qe.is(e,a)});return Q(s,No.remove),Eo(r,o,i,n),Oo(e,i),e},Do={extract:Ao},Ro=function(e,t){return Ve.fromDom(e.dom().cloneNode(t))},Mo=function(e){return Ro(e,!1)},Po=function(e){return Ro(e,!0)},Lo=function(e,t){var n=Ve.fromTag(t),r=zn.clone(e);return zn.setAll(n,r),n},Io=function(e,t){var n=Lo(e,t),r=yn.children(Po(e));return wo.append(n,r),n},jo=function(e,t){var n=Lo(e,t);mo.before(e,n);var r=yn.children(e);return wo.append(n,r),No.remove(e),n},Bo={shallow:Mo,shallowAs:Lo,deep:Po,copy:Io,mutate:jo},Fo=function(e,t){var n=function(n){if(!e(n))throw new Error("Can only get "+t+" value of a "+t+" node");return a(n).getOr("")},r=function(e){try{return o(e)}catch(e){return H.none()}},o=function(t){return e(t)?H.from(t.dom().nodeValue):H.none()},i=Wt.detect().browser,a=i.isIE()&&10===i.version.major?r:o;return{get:n,getOption:a,set:function(n,r){if(!e(n))throw new Error("Can only set raw "+t+" value of a "+t+" node");n.dom().nodeValue=r}}}(Dn.isText,"text"),Ho=function(e){return Fo.get(e)},Uo=function(e){return Fo.getOption(e)},zo=function(e,t){Fo.set(e,t)},Wo={get:Ho,getOption:Uo,set:zo},Vo=function(e){return"img"===Dn.name(e)?1:Wo.getOption(e).fold(function(){return yn.children(e).length},function(e){return e.length})},qo=function(e,t){return Vo(e)===t},$o=function(e,t){return 0===t},Ko=function(e){return Wo.getOption(e).filter(function(e){return 0!==e.trim().length||e.indexOf("\xa0")>-1}).isSome()},Go=["img","br"],Xo=function(e){return Ko(e)||X(Go,Dn.name(e))},Yo={getEnd:Vo,isEnd:qo,isStart:$o,isCursorPosition:Xo},Jo=function(e){return dr.descendant(e,Yo.isCursorPosition)},Qo=function(e){return Zo(e,Yo.isCursorPosition)},Zo=function(e,t){var n=function(e){for(var r=yn.children(e),o=r.length-1;o>=0;o--){var i=r[o];if(t(i))return H.some(i);var a=n(i);if(a.isSome())return a}return H.none()};return n(e)},ei={first:Jo,last:Qo},ti=function(){var e=Ve.fromTag("td");return mo.append(e,Ve.fromTag("br")),e},ni=function(e,t,n){var r=Bo.copy(e,t);return pe(n,function(e,t){null===e?zn.remove(r,t):zn.set(r,t,e)}),r},ri=function(e){return e},oi=function(e){return function(){return Ve.fromTag("tr",e.dom())}},ii=function(e,t,n){return ei.first(e).map(function(r){var o=n.join(","),i=or.ancestors(r,o,function(t){return Jt.eq(t,e)});return te(i,function(e,t){var n=Bo.shallow(t);return zn.remove(n,"contenteditable"),mo.append(e,n),n},t)}).getOr(t)},ai=function(e,t,n){var r=function(t){var r=yn.owner(t.element()),o=Ve.fromTag(Dn.name(t.element()),r.dom()),i=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),a=i.length>0?ii(t.element(),o,i):o;return mo.append(a,Ve.fromTag("br")),so.copy(t.element(),o),so.remove(o,"height"),1!==t.colspan()&&so.remove(t.element(),"width"),e(t.element(),o),o};return{row:oi(t),cell:r,replace:ni,gap:ti}},si=function(e){return{row:oi(e),cell:ti,replace:ri,gap:ti}},li={cellOperations:ai,paste:si},ui=function(e,t){var n=t||document,r=n.createElement("div");return r.innerHTML=e,yn.children(Ve.fromDom(r))},ci=function(e,t){return J(e,function(e){return Ve.fromTag(e,t)})},di=function(e,t){return J(e,function(e){return Ve.fromText(e,t)})},fi=function(e){return J(e,Ve.fromDom)},hi={fromHtml:ui,fromTags:ci,fromText:di,fromDom:fi},pi=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],mi=ve("left","right"),gi=function(e,t,n){var r=e.property().children(t);return oe(r,E(e.eq,n)).map(function(e){return{before:S(r.slice(0,e)),after:S(r.slice(e+1))}})},vi=function(e,t,n){return gi(e,t,n).map(function(n){var r=e.create().clone(t);return e.insert().appendAll(r,n.after()),e.insert().after(t,r),mi(t,r)})},bi=function(e,t,n){return gi(e,t,n).map(function(r){var o=e.create().clone(t);return e.insert().appendAll(o,r.before().concat([n])),e.insert().appendAll(t,r.after()),e.insert().before(t,o),mi(o,t)})},yi=function(e,t,n,r){var o=ve("first","second","splits"),i=function(t,a,s){var l=o(t,H.none(),s);return n(t)?o(t,a,s):e.property().parent(t).bind(function(o){return r(e,o,t).map(function(e){var t=[{first:e.left,second:e.right}],r=n(o)?o:e.left();return i(r,H.some(e.right()),s.concat(t))}).getOr(l)})};return i(t,H.none(),[])},wi={breakToLeft:bi,breakToRight:vi,breakPath:yi},xi=function(e,t,n,r){return r(e,t,n[0],n.slice(1))},Ci=function(e,t,n){return n.length>0?xi(e,t,n,ki):H.none()},ki=function(e,t,n,r){var o=t(e,n);return te(r,function(n,r){var o=t(e,r);return Ni(e,n,o)},o)},Ni=function(e,t,n){return t.bind(function(t){return n.filter(E(e.eq,t))})},_i={oneAll:Ci},Si=function(e,t){return E(e.eq,t)},Ti=function(e,t,n,r){var o=e.property().children(t);if(e.eq(t,n[0]))return H.some([n[0]]);if(e.eq(t,r[0]))return H.some([r[0]]);var i=function(n){var r=de(n),i=oe(r,Si(e,t)).getOr(-1),a=i<r.length-1?r[i+1]:r[i];return oe(o,Si(e,a))},a=i(n),s=i(r);return a.bind(function(e){return s.map(function(t){var n=Math.min(e,t),r=Math.max(e,t);return o.slice(n,r+1)})})},Ei=function(e,t,n,r){var o=void 0!==r?r:S(!1),i=[t].concat(e.up().all(t)),a=[n].concat(e.up().all(n)),s=function(e){return oe(e,o).fold(function(){return e},function(t){return e.slice(0,t+1)})},l=s(i),u=s(a),c=re(l,function(t){return Y(u,Si(e,t))});return{firstpath:S(l),secondpath:S(u),shared:S(c)}},Oi=function(e,t,n){var r=Ei(e,t,n);return r.shared().bind(function(t){return Ti(e,t,r.firstpath(),r.secondpath())})},Ai={subset:Oi,ancestors:Ei},Di=function(e,t,n){return _i.oneAll(e,t,n)},Ri=function(e,t,n){return Ai.subset(e,t,n)},Mi=function(e,t,n,r){return Ai.ancestors(e,t,n,r)},Pi=function(e,t,n){return wi.breakToLeft(e,t,n)},Li=function(e,t,n){return wi.breakToRight(e,t,n)},Ii=function(e,t,n,r){return wi.breakPath(e,t,n,r)},ji={sharedOne:Di,subset:Ri,ancestors:Mi,breakToLeft:Pi,breakToRight:Li,breakPath:Ii},Bi=n(),Fi=function(e,t){return ji.sharedOne(Bi,function(t,n){return e(n)},t)},Hi=function(e,t){return ji.subset(Bi,e,t)},Ui=function(e,t,n){return ji.ancestors(Bi,e,t,n)},zi=function(e,t){return ji.breakToLeft(Bi,e,t)},Wi=function(e,t){return ji.breakToRight(Bi,e,t)},Vi=function(e,t,n){return ji.breakPath(Bi,e,t,function(e,t,r){return n(t,r)})},qi={sharedOne:Fi,subset:Hi,ancestors:Ui,breakToLeft:zi,breakToRight:Wi,breakPath:Vi},$i=function(e,t){var n=t.column(),r=t.column()+t.colspan()-1,o=t.row(),i=t.row()+t.rowspan()-1;return n<=e.finishCol()&&r>=e.startCol()&&o<=e.finishRow()&&i>=e.startRow()},Ki=function(e,t){return t.column()>=e.startCol()&&t.column()+t.colspan()-1<=e.finishCol()&&t.row()>=e.startRow()&&t.row()+t.rowspan()-1<=e.finishRow()},Gi=function(e,t){for(var n=!0,r=E(Ki,t),o=t.startRow();o<=t.finishRow();o++)for(var i=t.startCol();i<=t.finishCol();i++)n=n&&zr.getAt(e,o,i).exists(r);return n?H.some(t):H.none()},Xi={inSelection:$i,isWithin:Ki,isRectangular:Gi},Yi=function(e,t){return Be.bounds(Math.min(e.row(),t.row()),Math.min(e.column(),t.column()),Math.max(e.row()+e.rowspan()-1,t.row()+t.rowspan()-1),Math.max(e.column()+e.colspan()-1,t.column()+t.colspan()-1))},Ji=function(e,t,n){var r=zr.findItem(e,t,Jt.eq),o=zr.findItem(e,n,Jt.eq);return r.bind(function(e){return o.map(function(t){return Yi(e,t)})})},Qi=function(e,t,n){return Ji(e,t,n).bind(function(t){return Xi.isRectangular(e,t)})},Zi={getAnyBox:Ji,getBox:Qi},ea=function(e,t,n,r){return zr.findItem(e,t,Jt.eq).bind(function(t){var o=n>0?t.row()+t.rowspan()-1:t.row(),i=r>0?t.column()+t.colspan()-1:t.column();return zr.getAt(e,o+n,i+r).map(function(e){return e.element()})})},ta=function(e,t,n){return Zi.getAnyBox(e,t,n).map(function(t){var n=zr.filterItems(e,E(Xi.inSelection,t));return J(n,function(e){return e.element()})})},na=function(e,t){var n=function(e,t){return Jt.contains(t,e)};return zr.findItem(e,t,n).bind(function(e){return e.element()})},ra={moveBy:ea,intercepts:ta,parentCell:na},oa=function(e,t,n){return Rr.table(e).bind(function(r){var o=la(r);return ra.moveBy(o,e,t,n)})},ia=function(e,t,n){var r=la(e);return ra.intercepts(r,t,n)},aa=function(e,t,n,r,o){var i=la(e),a=Jt.eq(e,n)?t:ra.parentCell(i,t),s=Jt.eq(e,o)?r:ra.parentCell(i,r);return ra.intercepts(i,a,s)},sa=function(e,t,n){var r=la(e);return Zi.getBox(r,t,n)},la=function(e){var t=Lr.fromTable(e);return zr.generate(t)},ua={moveBy:oa,intercepts:ia,nestedIntercepts:aa,getBox:sa},ca=function(e,t){return br.ancestor(e,"table")},da=Ne(["boxes","start","finish"],[]),fa=function(e,t,n){var r=function(e){return function(t){return n(t)||Jt.eq(t,e)}};return Jt.eq(e,t)?H.some(da({boxes:H.some([e]),start:e,finish:t})):ca(e).bind(function(o){return ca(t).bind(function(i){if(Jt.eq(o,i))return H.some(da({boxes:ua.intercepts(o,e,t),start:e,finish:t}));if(Jt.contains(o,i)){var a=or.ancestors(t,"td,th",r(o)),s=a.length>0?a[a.length-1]:t;return H.some(da({boxes:ua.nestedIntercepts(o,e,o,t,i),start:e,finish:s}))}if(Jt.contains(i,o)){var a=or.ancestors(e,"td,th",r(i)),l=a.length>0?a[a.length-1]:e;return H.some(da({boxes:ua.nestedIntercepts(i,e,o,t,i),start:e,finish:l}))}return qi.ancestors(e,t).shared().bind(function(a){return br.closest(a,"table",n).bind(function(n){var a=or.ancestors(t,"td,th",r(n)),s=a.length>0?a[a.length-1]:t,l=or.ancestors(e,"td,th",r(n)),u=l.length>0?l[l.length-1]:e;return H.some(da({boxes:ua.nestedIntercepts(n,e,o,t,i),start:u,finish:s}))})})})})},ha=function(e,t){var n=or.descendants(e,t);return n.length>0?H.some(n):H.none()},pa=function(e,t){return re(e,function(e){return Qe.is(e,t)})},ma=function(e,t,n){return br.descendant(e,t).bind(function(t){return br.descendant(e,n).bind(function(e){return qi.sharedOne(ca,[t,e]).map(function(n){return{first:S(t),last:S(e),table:S(n)}})})})},ga=function(e,t){return br.ancestor(e,"table").bind(function(n){return br.descendant(n,t).bind(function(t){return fa(t,e).bind(function(e){return e.boxes().map(function(t){return{boxes:S(t),start:S(e.start()),finish:S(e.finish())}})})})})},va=function(e,t,n,r,o){return pa(e,o).bind(function(e){return ua.moveBy(e,t,n).bind(function(e){return ga(e,r)})})},ba={identify:fa,retrieve:ha,shiftSelection:va,getEdges:ma},ya=function(e,t){return ba.retrieve(e,t)},wa=function(e,t,n){return ba.getEdges(e,t,n).bind(function(t){var n=function(t){return Jt.eq(e,t)},r=br.ancestor(t.first(),"thead,tfoot,tbody,table",n),o=br.ancestor(t.last(),"thead,tfoot,tbody,table",n);return r.bind(function(e){return o.bind(function(n){return Jt.eq(e,n)?ua.getBox(t.table(),t.first(),t.last()):H.none()})})})},xa={retrieve:ya,retrieveBox:wa},Ca="data-mce-selected",ka={selected:S(Ca),selectedSelector:S("td[data-mce-selected],th[data-mce-selected]"),attributeSelector:S("[data-mce-selected]"),firstSelected:S("data-mce-first-selected"),firstSelectedSelector:S("td[data-mce-first-selected],th[data-mce-first-selected]"),lastSelected:S("data-mce-last-selected"),lastSelectedSelector:S("td[data-mce-last-selected],th[data-mce-last-selected]")},Na=function(e){if(!V(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],n={};return Q(e,function(r,o){var i=he(r);if(1!==i.length)throw new Error("one and only one name per case");var a=i[0],s=r[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!V(s))throw new Error("case arguments must be an array");t.push(a),n[a]=function(){var n=arguments.length;if(n!==s.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+s.length+" ("+s+"), got "+n);for(var r=new Array(n),i=0;i<r.length;i++)r[i]=arguments[i];var l=function(e){var n=he(e);if(t.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+n.join(","));if(!ue(t,function(e){return X(n,e)}))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+t.join(", "));return e[a].apply(null,r)};return{fold:function(){if(arguments.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+arguments.length);return arguments[o].apply(null,r)},match:l,log:function(e){console.log(e,{constructors:t,constructor:a,params:r})}}}}),n},_a={generate:Na},Sa=_a.generate([{none:[]},{multiple:["elements"]},{single:["selection"]}]),Ta=function(e,t,n,r){return e.fold(t,n,r)},Ea={cata:Ta,none:Sa.none,multiple:Sa.multiple,single:Sa.single},Oa=function(e,t){return Ea.cata(t.get(),S([]),T,S([e]))},Aa=function(e,t){var n=function(e){return zn.has(e,"rowspan")&&parseInt(zn.get(e,"rowspan"),10)>1||zn.has(e,"colspan")&&parseInt(zn.get(e,"colspan"),10)>1},r=Oa(e,t);return r.length>0&&ue(r,n)?H.some(r):H.none()},Da=function(e,t){return Ea.cata(t.get(),H.none,function(t,n){return 0===t.length?H.none():xa.retrieveBox(e,ka.firstSelectedSelector(),ka.lastSelectedSelector()).bind(function(e){return t.length>1?H.some({bounds:S(e),cells:S(t)}):H.none()})},H.none)},Ra={mergable:Da,unmergable:Aa,selection:Oa},Ma=function(e){return{element:S(e),mergable:H.none,unmergable:H.none,selection:S([e])}},Pa=function(e,t,n){return{element:S(n),mergable:S(Ra.mergable(t,e)),unmergable:S(Ra.unmergable(n,e)),selection:S(Ra.selection(n,e))}},La=function(e){return Ma(e)},Ia=ve("element","clipboard","generators"),ja=function(e,t,n,r,o){return{element:S(n),mergable:H.none,unmergable:H.none,selection:S(Ra.selection(n,e)),clipboard:S(r),generators:S(o)}},Ba={noMenu:Ma,forMenu:Pa,notCell:La,paste:Ia,pasteRows:ja},Fa=function(e){return Rr.table(e[0]).map(Bo.deep).map(function(e){return[Do.extract(e,ka.attributeSelector())]})},Ha=function(e,t){return e.selection.serializer.serialize(t.dom(),{})},Ua=function(e,t,n,r){e.on("BeforeGetContent",function(n){var r=function(t){n.preventDefault(),Fa(t).each(function(t){n.content=J(t,function(t){return Ha(e,t)}).join("")})};!0===n.selection&&Ea.cata(t.get(),N,r,N)}),e.on("BeforeSetContent",function(t){if(!0===t.selection&&!0===t.paste){H.from(e.dom.getParent(e.selection.getStart(),"th,td")).each(function(o){var i=Ve.fromDom(o);Rr.table(i).bind(function(o){var a=ee(hi.fromHtml(t.content),function(e){return"meta"!==Dn.name(e)});if(1===a.length&&"table"===Dn.name(a[0])){t.preventDefault();var s=Ve.fromDom(e.getDoc()),l=li.paste(s),u=Ba.paste(i,a[0],l);n.pasteCells(o,u).each(function(t){e.selection.setRng(t),e.focus(),r.clear(o)})}})})}})},za={registerEvents:Ua},Wa=r("height",function(e){var t=e.dom();return $n.inBody(e)?t.getBoundingClientRect().height:t.offsetHeight}),Va=function(e,t){Wa.set(e,t)},qa=function(e){return Wa.get(e)},$a=function(e){return Wa.getOuter(e)},Ka=function(e,t){var n=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],r=Wa.max(e,t,n);so.set(e,"max-height",r+"px")},Ga={set:Va,get:qa,getOuter:$a,setMax:Ka},Xa=r("width",function(e){return e.dom().offsetWidth}),Ya=function(e,t){Xa.set(e,t)},Ja=function(e){return Xa.get(e)},Qa=function(e){return Xa.getOuter(e)},Za=function(e,t){var n=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],r=Xa.max(e,t,n);so.set(e,"max-width",r+"px")},es={set:Ya,get:Ja,getOuter:Qa,setMax:Za},ts=Wt.detect(),ns=function(){return ts.browser.isIE()||ts.browser.isEdge()},rs=function(e,t){var n=parseFloat(e);return isNaN(n)?t:n},os=function(e,t,n){return rs(so.get(e,t),n)},is=function(e){var t=os(e,"padding-top",0),n=os(e,"padding-bottom",0),r=os(e,"border-top-width",0),o=os(e,"border-bottom-width",0),i=e.dom().getBoundingClientRect().height,a=so.get(e,"box-sizing"),s=r+o;return"border-box"===a?i:i-t-n-s},as=function(e){return os(e,"width",es.get(e))},ss=function(e){return ns()?is(e):os(e,"height",Ga.get(e))},ls={getWidth:as,getHeight:ss},us=/(\d+(\.\d+)?)(\w|%)*/,cs=/(\d+(\.\d+)?)%/,ds=/(\d+(\.\d+)?)px|em/,fs=function(e,t){so.set(e,"width",t+"px")},hs=function(e,t){so.set(e,"width",t+"%")},ps=function(e,t){so.set(e,"height",t+"px")},ms=function(e){return so.getRaw(e,"height").getOrThunk(function(){return ls.getHeight(e)+"px"})},gs=function(e,t,n,r){var o=Rr.table(e).map(function(e){var r=n(e);return Math.floor(t/100*r)}).getOr(t);return r(e,o),o},vs=function(e,t,n,r){var o=parseInt(e,10);return Mt(e,"%")&&"table"!==Dn.name(t)?gs(t,o,n,r):o},bs=function(e){var t=ms(e);return t?vs(t,e,Ga.get,ps):Ga.get(e)},ys=function(e,t,n){return n(e)/ws(e,t)},ws=function(e,t){return zn.has(e,t)?parseInt(zn.get(e,t),10):1},xs=function(e){return so.getRaw(e,"width").fold(function(){return H.from(zn.get(e,"width"))},function(e){return H.some(e)})},Cs=function(e,t){return e/t.pixelWidth()*100},ks=function(e,t,n){if(cs.test(t)){var r=cs.exec(t);return parseFloat(r[1])}var o=es.get(e);return Cs(o,n)},Ns=function(e,t){return xs(e).fold(function(){var n=es.get(e);return Cs(n,t)},function(n){return ks(e,n,t)})},_s=function(e,t){return e/100*t.pixelWidth()},Ss=function(e,t,n){if(ds.test(t)){var r=ds.exec(t);return parseInt(r[1],10)}if(cs.test(t)){var o=cs.exec(t),i=parseFloat(o[1]);return _s(i,n)}return es.get(e)},Ts=function(e,t){return xs(e).fold(function(){return es.get(e)},function(n){return Ss(e,n,t)})},Es=function(e){return ys(e,"rowspan",bs)},Os=function(e){return xs(e).bind(function(e){if(us.test(e)){var t=us.exec(e);return H.some({width:S(t[1]),unit:S(t[3])})}return H.none()})},As=function(e,t,n){so.set(e,"width",t+n)},Ds={percentageBasedSizeRegex:S(cs),pixelBasedSizeRegex:S(ds),setPixelWidth:fs,setPercentageWidth:hs,setHeight:ps,getPixelWidth:Ts,getPercentageWidth:Ns,getGenericWidth:Os,setGenericWidth:As,getHeight:Es,getRawWidth:xs},Rs=function(e,t){Ds.getGenericWidth(e).each(function(n){var r=n.width()/2;Ds.setGenericWidth(e,r,n.unit()),Ds.setGenericWidth(t,r,n.unit())})},Ms={halve:Rs},Ps=function(e,t){var n=t||Ve.fromDom(document.documentElement);return dr.ancestor(e,E(Jt.eq,n)).isSome()},Ls=function(e){var t=e.dom();return t===t.window&&e instanceof Window?e:Dn.isDocument(e)?t.defaultView||t.parentWindow:null},Is={attached:Ps,windowOf:Ls},js=function(e,t){var n=function(n,r){return js(e+n,t+r)};return{left:S(e),top:S(t),translate:n}},Bs=js,Fs=function(e){var t=e.getBoundingClientRect();return Bs(t.left,t.top)},Hs=function(e,t){return void 0!==e?e:void 0!==t?t:0},Us=function(e){var t=e.dom().ownerDocument,n=t.body,r=Is.windowOf(Ve.fromDom(t)),o=t.documentElement,i=Hs(r.pageYOffset,o.scrollTop),a=Hs(r.pageXOffset,o.scrollLeft),s=Hs(o.clientTop,n.clientTop),l=Hs(o.clientLeft,n.clientLeft);return Ws(e).translate(a-l,i-s)},zs=function(e){var t=e.dom();return Bs(t.offsetLeft,t.offsetTop)},Ws=function(e){var t=e.dom(),n=t.ownerDocument,r=n.body,o=Ve.fromDom(n.documentElement);return r===t?Bs(r.offsetLeft,r.offsetTop):Is.attached(e,o)?Fs(t):Bs(0,0)},Vs={absolute:Us,relative:zs,viewport:Ws},qs=ve("row","y"),$s=ve("col","x"),Ks=function(e){return Vs.absolute(e).left()+es.getOuter(e)},Gs=function(e){return Vs.absolute(e).left()},Xs=function(e,t){return $s(e,Gs(t))},Ys=function(e,t){return $s(e,Ks(t))},Js=function(e){return Vs.absolute(e).top()},Qs=function(e,t){return qs(e,Js(t))},Zs=function(e,t){return qs(e,Js(t)+Ga.getOuter(t))},el=function(e,t,n){if(0===n.length)return[];var r=J(n.slice(1),function(t,n){return t.map(function(t){return e(n,t)})}),o=n[n.length-1].map(function(e){return t(n.length-1,e)});return r.concat([o])},tl=function(e,t){return-e},nl={delta:T,positions:E(el,Qs,Zs),edge:Js},rl={delta:T,edge:Gs,positions:E(el,Xs,Ys)},ol={delta:tl,edge:Ks,positions:E(el,Ys,Xs)},il={height:nl,rtl:ol,ltr:rl},al={ltr:il.ltr,rtl:il.rtl},sl=function(e){var t=Lr.fromTable(e);return zr.generate(t).grid()},ll={getGridSize:sl},ul=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return ul(n())}}},cl=function(e,t){return dl(e,t,{validate:$,label:"function"})},dl=function(e,t,n){if(0===t.length)throw new Error("You must specify at least one required field.");return xe("required",t),ke(t),function(r){var o=he(r);ue(t,function(e){return X(o,e)})||ye(t,o),e(t,o);var i=ee(t,function(e){return!n.validate(r[e],e)});return i.length>0&&Ce(i,n.label),r}},fl=function(e,t){var n=ee(t,function(t){return!X(e,t)});n.length>0&&we(n)},hl=function(e){return cl(fl,e)},pl=function(e){var t=zn.has(e,"colspan")?parseInt(zn.get(e,"colspan"),10):1,n=zn.has(e,"rowspan")?parseInt(zn.get(e,"rowspan"),10):1;return{element:S(e),colspan:S(t),rowspan:S(n)}},ml=function(e,t){bl(e);var n=ul(H.none()),r=void 0!==t?t:pl,o=function(t){return e.cell(t)},i=function(e){var t=r(e);return o(t)},a=function(e){var t=i(e);return n.get().isNone()&&n.set(H.some(t)),s=H.some({item:e,replacement:t}),t},s=H.none();return{getOrInit:function(e,t){return s.fold(function(){return a(e)},function(n){return t(e,n.item)?n.replacement:a(e)})},cursor:n.get}},gl=function(e,t){return function(n){var r=ul(H.none());bl(n);var o=[],i=function(e,t){return re(o,function(n){return t(n.item,e)})},a=function(i){var a=n.replace(i,t,{scope:e});return o.push({item:i,sub:a}),r.get().isNone()&&r.set(H.some(a)),a};return{replaceOrInit:function(e,t){return i(e,t).fold(function(){return a(e)},function(n){return t(e,n.item)?n.sub:a(e)})},cursor:r.get}}},vl=function(e){bl(e);var t=ul(H.none());return{combine:function(n){return t.get().isNone()&&t.set(H.some(n)),function(){var t=e.cell({element:S(n),colspan:S(1),rowspan:S(1)});return so.remove(t,"width"),so.remove(n,"width"),t}},cursor:t.get}},bl=hl(["cell","row","replace","gap"]),yl={modification:ml,transform:gl,merging:vl},wl=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],xl=function(e,t){var n=e.property().name(t);return X(["ol","ul"],n)},Cl=function(e,t){var n=e.property().name(t);return X(wl,n)},kl=function(e,t){var n=e.property().name(t);return X(["address","pre","p","h1","h2","h3","h4","h5","h6"],n)},Nl=function(e,t){var n=e.property().name(t);return X(["h1","h2","h3","h4","h5","h6"],n)},_l=function(e,t){return X(["div","li","td","th","blockquote","body","caption"],e.property().name(t))},Sl=function(e,t){return X(["br","img","hr","input"],e.property().name(t))},Tl=function(e,t){return"iframe"===e.property().name(t)},El=function(e,t){return!(Cl(e,t)||Sl(e,t))&&"li"!==e.property().name(t)},Ol={isBlock:Cl,isList:xl,isFormatting:kl,isHeading:Nl,isContainer:_l,isEmptyTag:Sl,isFrame:Tl,isInline:El},Al=n(),Dl=function(e){return Ol.isBlock(Al,e)},Rl=function(e){return Ol.isList(Al,e)},Ml=function(e){return Ol.isFormatting(Al,e)},Pl=function(e){return Ol.isHeading(Al,e)},Ll=function(e){return Ol.isContainer(Al,e)},Il=function(e){return Ol.isEmptyTag(Al,e)},jl=function(e){return Ol.isFrame(Al,e)},Bl=function(e){return Ol.isInline(Al,e)},Fl={isBlock:Dl,isList:Rl,isFormatting:Ml,isHeading:Pl,isContainer:Ll,isEmptyTag:Il,isFrame:jl,isInline:Bl},Hl=function(e){var t=function(e){return"br"===Dn.name(e)},n=function(e){return ue(e,function(e){return t(e)||Dn.isText(e)&&0===Wo.get(e).trim().length})},r=function(e){return"li"===Dn.name(e)||dr.ancestor(e,Fl.isList).isSome()},o=function(e){return yn.nextSibling(e).map(function(e){return!!Fl.isBlock(e)||(Fl.isEmptyTag(e)?"img"!==Dn.name(e):void 0)}).getOr(!1)},i=function(e){return ei.last(e).bind(function(n){var i=o(n);return yn.parent(n).map(function(o){return!0===i||r(o)||t(n)||Fl.isBlock(o)&&!Jt.eq(e,o)?[]:[Ve.fromTag("br")]})}).getOr([])},a=function(){var t=le(e,function(e){var t=yn.children(e);return n(t)?[]:t.concat(i(e))});return 0===t.length?[Ve.fromTag("br")]:t}();No.empty(e[0]),wo.append(e[0],a)},Ul={merge:Hl},zl=Object.prototype.hasOwnProperty,Wl=function(e,t){return t},Vl=function(e){return function(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];if(0===t.length)throw new Error("Can't merge zero objects");for(var r={},o=0;o<t.length;o++){var i=t[o];for(var a in i)zl.call(i,a)&&(r[a]=e(r[a],i[a]))}return r}}(Wl),ql=function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t},$l=function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return H.none()},Kl=function(e,t,n){var r=e.cells(),o=r.slice(0,t),i=r.slice(t),a=o.concat([n]).concat(i);return Xl(e,a)},Gl=function(e,t,n){e.cells()[t]=n},Xl=function(e,t){return Be.rowcells(t,e.section())},Yl=function(e,t){var n=e.cells(),r=J(n,t);return Be.rowcells(r,e.section())},Jl=function(e,t){return e.cells()[t]},Ql=function(e,t){return Jl(e,t).element()},Zl=function(e){return e.cells().length},eu={addCell:Kl,setCells:Xl,mutateCell:Gl,getCell:Jl,getCellElement:Ql,mapCells:Yl,cellLength:Zl},tu=function(e,t){return J(e,function(e){return eu.getCell(e,t)})},nu=function(e,t){return e[t]},ru=function(e,t){if(0===e.length)return 0;var n=e[0];return oe(e,function(e){return!t(n.element(),e.element())}).fold(function(){return e.length},function(e){return e})},ou=function(e,t,n,r){var o=nu(e,t).cells().slice(n),i=ru(o,r),a=tu(e,n).slice(t),s=ru(a,r);return{colspan:S(i),rowspan:S(s)}},iu={subgrid:ou},au=function(e,t){var n=J(e,function(e,t){return J(e.cells(),function(e,t){return!1})}),r=function(e,t,r,o){for(var i=e;i<e+r;i++)for(var a=t;a<t+o;a++)n[i][a]=!0};return J(e,function(o,i){var a=le(o.cells(),function(o,a){if(!1===n[i][a]){var s=iu.subgrid(e,i,a,t);return r(i,a,s.rowspan(),s.colspan()),[Be.detailnew(o.element(),s.rowspan(),s.colspan(),o.isNew())]}return[]});return Be.rowdetails(a,o.section())})},su=function(e,t,n){for(var r=[],o=0;o<e.grid().rows();o++){for(var i=[],a=0;a<e.grid().columns();a++){var s=zr.getAt(e,o,a).map(function(e){return Be.elementnew(e.element(),n)}).getOrThunk(function(){return Be.elementnew(t.gap(),!0)});i.push(s)}var l=Be.rowcells(i,e.all()[o].section());r.push(l)}return r},lu={toDetails:au,toGrid:su},uu=function(e,t,n,r){n===r?zn.remove(e,t):zn.set(e,t,n)},cu=function(e,t){var n=[],r=[],o=function(t,o){var i=br.child(e,o).getOrThunk(function(){var t=Ve.fromTag(o,yn.owner(e).dom());return mo.append(e,t),t});No.empty(i);var a=J(t,function(e){e.isNew()&&n.push(e.element());var t=e.element();return No.empty(t),Q(e.cells(),function(e){e.isNew()&&r.push(e.element()),uu(e.element(),"colspan",e.colspan(),1),uu(e.element(),"rowspan",e.rowspan(),1),mo.append(t,e.element())}),t});wo.append(i,a)},i=function(t){br.child(e,t).each(No.remove)},a=function(e,t){e.length>0?o(e,t):i(t)},s=[],l=[],u=[];return Q(t,function(e){switch(e.section()){case"thead":s.push(e);break;case"tbody":l.push(e);break;case"tfoot":u.push(e)}}),a(s,"thead"),a(l,"tbody"),a(u,"tfoot"),{newRows:S(n),newCells:S(r)}},du=function(e){return J(e,function(e){var t=Bo.shallow(e.element());return Q(e.cells(),function(e){var n=Bo.deep(e.element());uu(n,"colspan",e.colspan(),1),uu(n,"rowspan",e.rowspan(),1),mo.append(t,n)}),t})},fu={render:cu,copy:du},hu=function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},pu=function(e,t){for(var n=[],r=e;r<t;r++)n.push(r);return n},mu=function(e,t){var n=[];return Q(e,function(r,o){o<e.length-1&&!t(r,e[o+1])?n.push(r):o===e.length-1&&n.push(r)}),n},gu=function(e,t){if(t<0||t>=e.length-1)return H.none();var n=e[t].fold(function(){var n=de(e.slice(0,t));return $l(n,function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return H.some({value:e,delta:0})}),r=e[t+1].fold(function(){var n=e.slice(t+1);return $l(n,function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return H.some({value:e,delta:1})});return n.bind(function(e){return r.map(function(t){var n=t.delta+e.delta;return Math.abs(t.value-e.value)/n})})},vu={repeat:hu,range:pu,unique:mu,deduce:gu},bu=function(e){var t=e.grid(),n=vu.range(0,t.columns()),r=vu.range(0,t.rows());return J(n,function(t){return yu(function(){return le(r,function(n){return zr.getAt(e,n,t).filter(function(e){return e.column()===t}).fold(S([]),function(e){return[e]})})},function(e){return 1===e.colspan()},function(){return zr.getAt(e,0,t)})})},yu=function(e,t,n){var r=e();return re(r,t).orThunk(function(){return H.from(r[0]).orThunk(n)}).map(function(e){return e.element()})},wu=function(e){var t=e.grid(),n=vu.range(0,t.rows()),r=vu.range(0,t.columns());return J(n,function(t){return yu(function(){return le(r,function(n){return zr.getAt(e,t,n).filter(function(e){return e.row()===t}).fold(S([]),function(e){return[e]})})},function(e){return 1===e.rowspan()},function(){return zr.getAt(e,t,0)})})},xu={columns:bu,rows:wu},Cu=function(e,t,n,r,o){var i=Ve.fromTag("div");return so.setAll(i,{position:"absolute",left:t-r/2+"px",top:n+"px",height:o+"px",width:r+"px"}),zn.setAll(i,{"data-column":e,role:"presentation"}),i},ku=function(e,t,n,r,o){var i=Ve.fromTag("div");return so.setAll(i,{position:"absolute",left:t+"px",top:n-o/2+"px",height:o+"px",width:r+"px"}),zn.setAll(i,{"data-row":e,role:"presentation"}),i},Nu={col:Cu,row:ku},_u=function(e){var t=e.replace(/\./g,"-");return{resolve:function(e){return t+"-"+e}}},Su=_u("ephox-snooker"),Tu={resolve:Su.resolve},Eu=function(e,t){var n=zn.get(e,t);return void 0===n||""===n?[]:n.split(" ")},Ou=function(e,t,n){var r=Eu(e,t),o=r.concat([n]);return zn.set(e,t,o.join(" ")),!0},Au=function(e,t,n){var r=ee(Eu(e,t),function(e){return e!==n});return r.length>0?zn.set(e,t,r.join(" ")):zn.remove(e,t),!1},Du={read:Eu,add:Ou,remove:Au},Ru=function(e){return void 0!==e.dom().classList},Mu=function(e){return Du.read(e,"class")},Pu=function(e,t){return Du.add(e,"class",t)},Lu=function(e,t){return Du.remove(e,"class",t)},Iu=function(e,t){return X(Mu(e),t)?Lu(e,t):Pu(e,t)},ju={get:Mu,add:Pu,remove:Lu,toggle:Iu,supports:Ru},Bu=function(e,t){ju.supports(e)?e.dom().classList.add(t):ju.add(e,t)},Fu=function(e){0===(ju.supports(e)?e.dom().classList:ju.get(e)).length&&zn.remove(e,"class")},Hu=function(e,t){if(ju.supports(e)){e.dom().classList.remove(t)}else ju.remove(e,t);Fu(e)},Uu=function(e,t){return ju.supports(e)?e.dom().classList.toggle(t):ju.toggle(e,t)},zu=function(e,t){var n=ju.supports(e),r=e.dom().classList;return i(function(){n?r.remove(t):ju.remove(e,t)},function(){n?r.add(t):ju.add(e,t)},Wu(e,t))},Wu=function(e,t){return ju.supports(e)&&e.dom().classList.contains(t)},Vu={add:Bu,remove:Hu,toggle:Uu,toggler:zu,has:Wu},qu=Tu.resolve("resizer-bar"),$u=Tu.resolve("resizer-rows"),Ku=Tu.resolve("resizer-cols"),Gu=function(e){var t=or.descendants(e.parent(),"."+qu);Q(t,No.remove)},Xu=function(e,t,n){var r=e.origin();Q(t,function(t,o){t.each(function(t){var o=n(r,t);Vu.add(o,qu),mo.append(e.parent(),o)})})},Yu=function(e,t,n,r){Xu(e,t,function(e,t){var o=Nu.col(t.col(),t.x()-e.left(),n.top()-e.top(),7,r);return Vu.add(o,Ku),o})},Ju=function(e,t,n,r){Xu(e,t,function(e,t){var o=Nu.row(t.row(),n.left()-e.left(),t.y()-e.top(),r,7);return Vu.add(o,$u),o})},Qu=function(e,t,n,r,o,i){var a=Vs.absolute(t),s=n.length>0?o.positions(n,t):[];Ju(e,s,a,es.getOuter(t));var l=r.length>0?i.positions(r,t):[];Yu(e,l,a,Ga.getOuter(t))},Zu=function(e,t,n,r){Gu(e);var o=Lr.fromTable(t),i=zr.generate(o),a=xu.rows(i),s=xu.columns(i);Qu(e,t,a,s,n,r)},ec=function(e,t){var n=or.descendants(e.parent(),"."+qu);Q(n,t)},tc=function(e){ec(e,function(e){so.set(e,"display","none")})},nc=function(e){ec(e,function(e){so.set(e,"display","block")})},rc=function(e){return Vu.has(e,$u)},oc=function(e){return Vu.has(e,Ku)},ic={refresh:Zu,hide:tc,show:nc,destroy:Gu,isRowBar:rc,isColBar:oc},ac=function(e,t){return lu.toGrid(e,t,!1)},sc=function(e,t){var n=function(e){return $l(e,function(e){return yn.parent(e.element()).map(function(e){var t=yn.parent(e).isNone();return Be.elementnew(e,t)})}).getOrThunk(function(){return Be.elementnew(t.row(),!0)})};return J(e,function(e){var t=n(e.details());return Be.rowdatanew(t.element(),e.details(),e.section(),t.isNew())})},lc=function(e,t){var n=lu.toDetails(e,Jt.eq);return sc(n,t)},uc=function(e,t){var n=se(J(e.all(),function(e){return e.cells()}));return re(n,function(e){return Jt.eq(t,e.element())})},cc=function(e,t,n,r,o){return function(i,a,s,l,u){var c=Lr.fromTable(a),d=zr.generate(c);return t(d,s).map(function(t){var n=ac(d,l),r=e(n,t,Jt.eq,o(l)),i=lc(r.grid(),l);return{grid:S(i),cursor:r.cursor}}).fold(function(){return H.none()},function(e){var t=fu.render(a,e.grid());return n(a,e.grid(),u),r(a),ic.refresh(i,a,il.height,u),H.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})})}},dc=function(e,t){return Rr.cell(t.element()).bind(function(t){return uc(e,t)})},fc=function(e,t){return Rr.cell(t.element()).bind(function(n){return uc(e,n).map(function(e){return Vl(e,{generators:t.generators,clipboard:t.clipboard})})})},hc=function(e,t){var n=J(t.selection(),function(t){return Rr.cell(t).bind(function(t){return uc(e,t)})}),r=ql(n);return r.length>0?H.some(Vl({cells:r},{generators:t.generators,clipboard:t.clipboard})):H.none()},pc=function(e,t){return t.mergable()},mc=function(e,t){return t.unmergable()},gc=function(e,t){var n=J(t.selection(),function(t){return Rr.cell(t).bind(function(t){return uc(e,t)})}),r=ql(n);return r.length>0?H.some(r):H.none()},vc={run:cc,toDetailList:lc,onCell:dc,onCells:gc,onPaste:fc,onPasteRows:hc,onMergable:pc,onUnmergable:mc},bc=function(e){var t=function(t){return e===t},n=function(t){return bc(e)},r=function(t){return bc(e)},o=function(t){return bc(t(e))},i=function(t){t(e)},a=function(t){return t(e)},s=function(t,n){return n(e)},l=function(t){return t(e)},u=function(t){return t(e)},c=function(){return H.some(e)};return{is:t,isValue:M,isError:R,getOr:S(e),getOrThunk:S(e),getOrDie:S(e),or:n,orThunk:r,fold:s,map:o,each:i,bind:a,exists:l,forall:u,toOption:c}},yc=function(e){var t=function(e){return e()},n=function(){return A(String(e))()},r=function(e){return e},o=function(e){return e()},i=function(t){return yc(e)},a=function(t){return yc(e)};return{is:R,isValue:R,isError:M,getOr:T,getOrThunk:t,getOrDie:n,or:r,orThunk:o,fold:function(t,n){return t(e)},map:i,each:N,bind:a,exists:R,forall:M,toOption:H.none}},wc={value:bc,error:yc},xc=function(e,t,n){if(e.row()>=t.length||e.column()>eu.cellLength(t[0]))return wc.error("invalid start address out of table bounds, row: "+e.row()+", column: "+e.column());var r=t.slice(e.row()),o=r[0].cells().slice(e.column()),i=eu.cellLength(n[0]),a=n.length;return wc.value({rowDelta:S(r.length-a),colDelta:S(o.length-i)})},Cc=function(e,t){var n=eu.cellLength(e[0]),r=eu.cellLength(t[0]);return{rowDelta:S(0),colDelta:S(n-r)}},kc=function(e,t){return J(e,function(){return Be.elementnew(t.cell(),!0)})},Nc=function(e,t,n){return e.concat(vu.repeat(t,function(t){return eu.setCells(e[e.length-1],kc(e[e.length-1].cells(),n))}))},_c=function(e,t,n){return J(e,function(e){return eu.setCells(e,e.cells().concat(kc(vu.range(0,t),n)))})},Sc=function(e,t,n){var r=t.colDelta()<0?_c:T;return(t.rowDelta()<0?Nc:T)(r(e,Math.abs(t.colDelta()),n),Math.abs(t.rowDelta()),n)},Tc={measure:xc,measureWidth:Cc,tailor:Sc},Ec=function(e,t,n,r){if(0===e.length)return e;for(var o=t.startRow();o<=t.finishRow();o++)for(var i=t.startCol();i<=t.finishCol();i++)eu.mutateCell(e[o],i,Be.elementnew(r(),!1));return e},Oc=function(e,t,n,r){for(var o=!0,i=0;i<e.length;i++)for(var a=0;a<eu.cellLength(e[0]);a++){var s=eu.getCellElement(e[i],a),l=n(s,t);!0===l&&!1===o?eu.mutateCell(e[i],a,Be.elementnew(r(),!0)):!0===l&&(o=!1)}return e},Ac=function(e,t){return ne(e,function(e,n){return Y(e,function(e){return t(e.element(),n.element())})?e:e.concat([n])},[])},Dc=function(e,t,n,r){if(t>0&&t<e.length){var o=e[t-1].cells(),i=Ac(o,n);Q(i,function(o){for(var i=H.none(),a=t;a<e.length;a++)for(var s=0;s<eu.cellLength(e[0]);s++){var l=e[a].cells()[s],u=n(l.element(),o.element());u&&(i.isNone()&&(i=H.some(r())),i.each(function(t){eu.mutateCell(e[a],s,Be.elementnew(t,!0))}))}})}return e},Rc={merge:Ec,unmerge:Oc,splitRows:Dc},Mc=function(e,t,n,r){var o=eu.getCell(e[t],n),i=E(r,o.element()),a=e[t];return e.length>1&&eu.cellLength(a)>1&&(n>0&&i(eu.getCellElement(a,n-1))||n<a.length-1&&i(eu.getCellElement(a,n+1))||t>0&&i(eu.getCellElement(e[t-1],n))||t<e.length-1&&i(eu.getCellElement(e[t+1],n)))},Pc=function(e,t,n,r,o){for(var i=e.row(),a=e.column(),s=n.length,l=eu.cellLength(n[0]),u=i+s,c=a+l,d=i;d<u;d++)for(var f=a;f<c;f++){Mc(t,d,f,o)&&Rc.unmerge(t,eu.getCellElement(t[d],f),o,r.cell);var h=eu.getCellElement(n[d-i],f-a),p=r.replace(h);eu.mutateCell(t[d],f,Be.elementnew(p,!0))}return t},Lc=function(e,t,n,r,o){return Tc.measure(e,t,n).map(function(i){var a=Tc.tailor(t,i,r);return Pc(e,a,n,r,o)})},Ic=function(e,t,n,r,o){Rc.splitRows(t,e,o,r.cell);var i=Tc.measureWidth(n,t),a=Tc.tailor(n,i,r),s=Tc.measureWidth(t,a),l=Tc.tailor(t,s,r);return l.slice(0,e).concat(a).concat(l.slice(e,l.length))},jc={merge:Lc,insert:Ic},Bc=function(e,t,n,r,o){var i=e.slice(0,t),a=e.slice(t),s=eu.mapCells(e[n],function(n,i){return t>0&&t<e.length&&r(eu.getCellElement(e[t-1],i),eu.getCellElement(e[t],i))?eu.getCell(e[t],i):Be.elementnew(o(n.element(),r),!0)});return i.concat([s]).concat(a)},Fc=function(e,t,n,r,o){return J(e,function(e){var i=t>0&&t<eu.cellLength(e)&&r(eu.getCellElement(e,t-1),eu.getCellElement(e,t)),a=i?eu.getCell(e,t):Be.elementnew(o(eu.getCellElement(e,n),r),!0);return eu.addCell(e,t,a)})},Hc=function(e,t,n,r,o){var i=n+1;return J(e,function(e,a){var s=a===t,l=s?Be.elementnew(o(eu.getCellElement(e,n),r),!0):eu.getCell(e,n);return eu.addCell(e,i,l)})},Uc=function(e,t,n,r,o){var i=t+1,a=e.slice(0,i),s=e.slice(i),l=eu.mapCells(e[t],function(e,t){return t===n?Be.elementnew(o(e.element(),r),!0):e});return a.concat([l]).concat(s)},zc=function(e,t,n){var r=J(e,function(e){var r=e.cells().slice(0,t).concat(e.cells().slice(n+1));return Be.rowcells(r,e.section())});return ee(r,function(e){return e.cells().length>0})},Wc=function(e,t,n){return e.slice(0,t).concat(e.slice(n+1))},Vc={insertRowAt:Bc,insertColumnAt:Fc,splitCellIntoColumns:Hc,splitCellIntoRows:Uc,deleteRowsAt:Wc,deleteColumnsAt:zc},qc=function(e,t,n,r){var o=function(e){return Y(t,function(t){return n(e.element(),t.element())})};return J(e,function(e){return eu.mapCells(e,function(e){return o(e)?Be.elementnew(r(e.element(),n),!0):e})})},$c=function(e,t,n,r){return void 0!==eu.getCellElement(e[t],n)&&t>0&&r(eu.getCellElement(e[t-1],n),eu.getCellElement(e[t],n))},Kc=function(e,t,n){return t>0&&n(eu.getCellElement(e,t-1),eu.getCellElement(e,t))},Gc=function(e,t,n,r){var o=le(e,function(r,o){return $c(e,o,t,n)||Kc(r,t,n)?[]:[eu.getCell(r,t)]});return qc(e,o,n,r)},Xc=function(e,t,n,r){var o=e[t],i=le(o.cells(),function(r,i){return $c(e,t,i,n)||Kc(o,i,n)?[]:[r]});return qc(e,i,n,r)},Yc={replaceColumn:Gc,replaceRow:Xc},Jc=function(){return nd(function(e,t,n,r,o){return e()})},Qc=function(e){return nd(function(t,n,r,o,i){return n(e)})},Zc=function(e,t){return nd(function(n,r,o,i,a){return o(e,t)})},ed=function(e,t,n){return nd(function(r,o,i,a,s){return a(e,t,n)})},td=function(e,t){return nd(function(n,r,o,i,a){return a(e,t)})},nd=function(e){return{fold:e}},rd={none:Jc,only:Qc,left:Zc,middle:ed,right:td},od=function(e,t){return 0===e.length?rd.none():1===e.length?rd.only(0):0===t?rd.left(0,1):t===e.length-1?rd.right(t-1,t):t>0&&t<e.length-1?rd.middle(t-1,t,t+1):rd.none()},id=function(e,t,n,r){var o=e.slice(0),i=od(e,t),a=function(e){return J(e,S(0))},s=S(a(o)),l=function(e){return r.singleColumnWidth(o[e],n)},u=function(e,t){if(n>=0){var i=Math.max(r.minCellWidth(),o[t]-n);return a(o.slice(0,e)).concat([n,i-o[t]]).concat(a(o.slice(t+1)))}var s=Math.max(r.minCellWidth(),o[e]+n),l=o[e]-s;return a(o.slice(0,e)).concat([s-o[e],l]).concat(a(o.slice(t+1)))},c=u,d=function(e,t,n){return u(t,n)},f=function(e,t){if(n>=0)return a(o.slice(0,t)).concat([n]);var i=Math.max(r.minCellWidth(),o[t]+n);return a(o.slice(0,t)).concat([i-o[t]])};return i.fold(s,l,c,d,f)},ad={determine:id},sd=function(e,t){return zn.has(e,t)&&parseInt(zn.get(e,t),10)>1},ld=function(e){return sd(e,"colspan")},ud=function(e){return sd(e,"rowspan")},cd=function(e,t){return parseInt(so.get(e,t),10)},dd={hasColspan:ld,hasRowspan:ud,minWidth:S(10),minHeight:S(10),getInt:cd},fd=function(e,t,n){return so.getRaw(e,t).fold(function(){return n(e)+"px"},function(e){return e})},hd=function(e){return fd(e,"width",Ds.getPixelWidth)},pd=function(e){return fd(e,"height",Ds.getHeight)},md=function(e,t,n,r,o){var i=xu.columns(e),a=J(i,function(e){return e.map(t.edge)});return J(i,function(e,t){return e.filter(O(dd.hasColspan)).fold(function(){var e=vu.deduce(a,t);return r(e)},function(e){return n(e,o)})})},gd=function(e){return e.map(function(e){return e+"px"}).getOr("")},vd=function(e,t){return md(e,t,hd,gd)},bd=function(e,t,n){return md(e,t,Ds.getPercentageWidth,function(e){return e.fold(function(){return n.minCellWidth()},function(e){return e/n.pixelWidth()*100})},n)},yd=function(e,t,n){return md(e,t,Ds.getPixelWidth,function(e){return e.getOrThunk(n.minCellWidth)},n)},wd=function(e,t,n,r){var o=xu.rows(e),i=J(o,function(e){return e.map(t.edge)});return J(o,function(e,t){return e.filter(O(dd.hasRowspan)).fold(function(){var e=vu.deduce(i,t);return r(e)},function(e){return n(e)})})},xd=function(e,t){return wd(e,t,Ds.getHeight,function(e){return e.getOrThunk(dd.minHeight)})},Cd=function(e,t){return wd(e,t,pd,gd)},kd={getRawWidths:vd,getPixelWidths:yd,getPercentageWidths:bd,getPixelHeights:xd,getRawHeights:Cd},Nd=function(e,t,n){for(var r=0,o=e;o<t;o++)r+=void 0!==n[o]?n[o]:0;return r},_d=function(e,t){var n=zr.justCells(e);return J(n,function(e){var n=Nd(e.column(),e.column()+e.colspan(),t);return{element:e.element,width:S(n),colspan:e.colspan}})},Sd=function(e,t){var n=zr.justCells(e);return J(n,function(e){var n=Nd(e.row(),e.row()+e.rowspan(),t);return{element:e.element,height:S(n),rowspan:e.rowspan}})},Td=function(e,t){return J(e.all(),function(e,n){return{element:e.element,height:S(t[n])}})},Ed={recalculateWidth:_d,recalculateHeight:Sd,matchRowHeight:Td},Od=function(e,t){var n=parseFloat(e),r=es.get(t),o=function(e){return e/r*100},i=function(e,t){return[100-e]},a=function(){return dd.minWidth()/r*100},s=function(e,t,r){var o=n+r;Ds.setPercentageWidth(e,o)};return{width:S(n),pixelWidth:S(r),getWidths:kd.getPercentageWidths,getCellDelta:o,singleColumnWidth:i,minCellWidth:a,setElementWidth:Ds.setPercentageWidth,setTableWidth:s}},Ad=function(e){var t=parseInt(e,10),n=T,r=function(e,t){return[Math.max(dd.minWidth(),e+t)-e]},o=function(e,t,n){var r=te(t,function(e,t){return e+t},0);Ds.setPixelWidth(e,r)};return{width:S(t),pixelWidth:S(t),getWidths:kd.getPixelWidths,getCellDelta:n,singleColumnWidth:r,minCellWidth:dd.minWidth,setElementWidth:Ds.setPixelWidth,setTableWidth:o}},Dd=function(e,t){if(Ds.percentageBasedSizeRegex().test(t)){var n=Ds.percentageBasedSizeRegex().exec(t);return Od(n[1],e)}if(Ds.pixelBasedSizeRegex().test(t)){var r=Ds.pixelBasedSizeRegex().exec(t);return Ad(r[1])}var o=es.get(e);return Ad(o)},Rd=function(e){return Ds.getRawWidth(e).fold(function(){var t=es.get(e);return Ad(t)},function(t){return Dd(e,t)})},Md={getTableSize:Rd},Pd=function(e){return zr.generate(e)},Ld=function(e){return te(e,function(e,t){return e+t},0)},Id=function(e){var t=Lr.fromTable(e);return Pd(t)},jd=function(e,t,n,r){var o=Md.getTableSize(e),i=o.getCellDelta(t),a=Id(e),s=o.getWidths(a,r,o),l=ad.determine(s,n,i,o),u=J(l,function(e,t){return e+s[t]}),c=Ed.recalculateWidth(a,u);Q(c,function(e){o.setElementWidth(e.element(),e.width())}),n===a.grid().columns()-1&&o.setTableWidth(e,u,i)},Bd=function(e,t,n,r){var o=Id(e),i=kd.getPixelHeights(o,r),a=J(i,function(e,r){return n===r?Math.max(t+e,dd.minHeight()):e}),s=Ed.recalculateHeight(o,a),l=Ed.matchRowHeight(o,a);Q(l,function(e){Ds.setHeight(e.element(),e.height())}),Q(s,function(e){Ds.setHeight(e.element(),e.height())});var u=Ld(a);Ds.setHeight(e,u)},Fd=function(e,t,n){var r=Md.getTableSize(e),o=Pd(t),i=r.getWidths(o,n,r),a=Ed.recalculateWidth(o,i);Q(a,function(e){r.setElementWidth(e.element(),e.width())});var s=te(i,function(e,t){return t+e},0);a.length>0&&r.setElementWidth(e,s)},Hd={adjustWidth:jd,adjustHeight:Bd,adjustWidthTo:Fd},Ud=function(e){0===Rr.cells(e).length&&No.remove(e)},zd=ve("grid","cursor"),Wd=function(e,t,n){return Vd(e,t,n).orThunk(function(){return Vd(e,0,0)})},Vd=function(e,t,n){return H.from(e[t]).bind(function(e){return H.from(e.cells()[n]).bind(function(e){return H.from(e.element())})})},qd=function(e,t,n){return zd(e,Vd(e,t,n))},$d=function(e){return ne(e,function(e,t){return Y(e,function(e){return e.row()===t.row()})?e:e.concat([t])},[]).sort(function(e,t){return e.row()-t.row()})},Kd=function(e){return ne(e,function(e,t){return Y(e,function(e){return e.column()===t.column()})?e:e.concat([t])},[]).sort(function(e,t){return e.column()-t.column()})},Gd=function(e,t,n,r){var o=t.row(),i=t.row(),a=Vc.insertRowAt(e,i,o,n,r.getOrInit);return qd(a,i,t.column())},Xd=function(e,t,n,r){var o=t[0].row(),i=t[0].row(),a=$d(t),s=ne(a,function(e,t){return Vc.insertRowAt(e,i,o,n,r.getOrInit)},e);return qd(s,i,t[0].column())},Yd=function(e,t,n,r){var o=t.row(),i=t.row()+t.rowspan(),a=Vc.insertRowAt(e,i,o,n,r.getOrInit);return qd(a,i,t.column())},Jd=function(e,t,n,r){var o=$d(t),i=o[o.length-1].row(),a=o[o.length-1].row()+o[o.length-1].rowspan(),s=ne(o,function(e,t){return Vc.insertRowAt(e,a,i,n,r.getOrInit)},e);return qd(s,a,t[0].column())},Qd=function(e,t,n,r){var o=t.column(),i=t.column(),a=Vc.insertColumnAt(e,i,o,n,r.getOrInit);return qd(a,t.row(),i)},Zd=function(e,t,n,r){var o=Kd(t),i=o[0].column(),a=o[0].column(),s=ne(o,function(e,t){return Vc.insertColumnAt(e,a,i,n,r.getOrInit)},e);return qd(s,t[0].row(),a)},ef=function(e,t,n,r){var o=t.column(),i=t.column()+t.colspan(),a=Vc.insertColumnAt(e,i,o,n,r.getOrInit);return qd(a,t.row(),i)},tf=function(e,t,n,r){var o=t[t.length-1].column(),i=t[t.length-1].column()+t[t.length-1].colspan(),a=Kd(t),s=ne(a,function(e,t){return Vc.insertColumnAt(e,i,o,n,r.getOrInit)},e);return qd(s,t[0].row(),i)},nf=function(e,t,n,r){var o=Yc.replaceRow(e,t.row(),n,r.replaceOrInit);return qd(o,t.row(),t.column())},rf=function(e,t,n,r){var o=Yc.replaceColumn(e,t.column(),n,r.replaceOrInit);return qd(o,t.row(),t.column())},of=function(e,t,n,r){var o=Yc.replaceRow(e,t.row(),n,r.replaceOrInit);return qd(o,t.row(),t.column())},af=function(e,t,n,r){var o=Yc.replaceColumn(e,t.column(),n,r.replaceOrInit);return qd(o,t.row(),t.column())},sf=function(e,t,n,r){var o=Vc.splitCellIntoColumns(e,t.row(),t.column(),n,r.getOrInit);return qd(o,t.row(),t.column())},lf=function(e,t,n,r){var o=Vc.splitCellIntoRows(e,t.row(),t.column(),n,r.getOrInit);return qd(o,t.row(),t.column())},uf=function(e,t,n,r){var o=Kd(t),i=Vc.deleteColumnsAt(e,o[0].column(),o[o.length-1].column()),a=Wd(i,t[0].row(),t[0].column());return zd(i,a)},cf=function(e,t,n,r){var o=$d(t),i=Vc.deleteRowsAt(e,o[0].row(),o[o.length-1].row()),a=Wd(i,t[0].row(),t[0].column());return zd(i,a)},df=function(e,t,n,r){var o=t.cells();Ul.merge(o);var i=Rc.merge(e,t.bounds(),n,S(o[0]));return zd(i,H.from(o[0]))},ff=function(e,t,n,r){var o=te(t,function(e,t){return Rc.unmerge(e,t,n,r.combine(t))},e);return zd(o,H.from(t[0]))},hf=function(e,t,n,r){var o=function(e,t){var n=Lr.fromTable(e),r=zr.generate(n);return lu.toGrid(r,t,!0)}(t.clipboard(),t.generators()),i=Be.address(t.row(),t.column());return jc.merge(i,e,o,t.generators(),n).fold(function(){return zd(e,H.some(t.element()))},function(e){var n=Wd(e,t.row(),t.column());return zd(e,n)})},pf=function(e,t,n){var r=Lr.fromPastedRows(e,n),o=zr.generate(r);return lu.toGrid(o,t,!0)},mf=function(e,t,n,r){var o=e[t.cells[0].row()],i=t.cells[0].row(),a=pf(t.clipboard(),t.generators(),o),s=jc.insert(i,e,a,t.generators(),n),l=Wd(s,t.cells[0].row(),t.cells[0].column());return zd(s,l)},gf=function(e,t,n,r){var o=e[t.cells[0].row()],i=t.cells[t.cells.length-1].row()+t.cells[t.cells.length-1].rowspan(),a=pf(t.clipboard(),t.generators(),o),s=jc.insert(i,e,a,t.generators(),n),l=Wd(s,t.cells[0].row(),t.cells[0].column());return zd(s,l)},vf=Hd.adjustWidthTo,bf={insertRowBefore:vc.run(Gd,vc.onCell,N,N,yl.modification),insertRowsBefore:vc.run(Xd,vc.onCells,N,N,yl.modification),insertRowAfter:vc.run(Yd,vc.onCell,N,N,yl.modification),insertRowsAfter:vc.run(Jd,vc.onCells,N,N,yl.modification),insertColumnBefore:vc.run(Qd,vc.onCell,vf,N,yl.modification),insertColumnsBefore:vc.run(Zd,vc.onCells,vf,N,yl.modification),insertColumnAfter:vc.run(ef,vc.onCell,vf,N,yl.modification),insertColumnsAfter:vc.run(tf,vc.onCells,vf,N,yl.modification),splitCellIntoColumns:vc.run(sf,vc.onCell,vf,N,yl.modification),splitCellIntoRows:vc.run(lf,vc.onCell,N,N,yl.modification),eraseColumns:vc.run(uf,vc.onCells,vf,Ud,yl.modification),eraseRows:vc.run(cf,vc.onCells,N,Ud,yl.modification),makeColumnHeader:vc.run(rf,vc.onCell,N,N,yl.transform("row","th")),unmakeColumnHeader:vc.run(af,vc.onCell,N,N,yl.transform(null,"td")),makeRowHeader:vc.run(nf,vc.onCell,N,N,yl.transform("col","th")),unmakeRowHeader:vc.run(of,vc.onCell,N,N,yl.transform(null,"td")),mergeCells:vc.run(df,vc.onMergable,N,N,yl.merging),unmergeCells:vc.run(ff,vc.onUnmergable,vf,N,yl.merging),pasteCells:vc.run(hf,vc.onPaste,vf,N,yl.modification),pasteRowsBefore:vc.run(mf,vc.onPasteRows,N,N,yl.modification),pasteRowsAfter:vc.run(gf,vc.onPasteRows,N,N,yl.modification)},yf=function(e){return Ve.fromDom(e.getBody())},wf=function(e){return e.getBoundingClientRect().width},xf=function(e){return e.getBoundingClientRect().height},Cf=function(e){return function(t){return Jt.eq(t,yf(e))}},kf=function(e){return e?e.replace(/px$/,""):""},Nf=function(e){return/^[0-9]+$/.test(e)&&(e+="px"),e},_f=function(e){var t=or.descendants(e,"td[data-mce-style],th[data-mce-style]");zn.remove(e,"data-mce-style"),Q(t,function(e){zn.remove(e,"data-mce-style")})},Sf=function(e,t){return function(n){return"rtl"===Tf(n)?t:e}},Tf=function(e){return"rtl"===so.get(e,"direction")?"rtl":"ltr"},Ef={onDirection:Sf,getDirection:Tf},Of={isRtl:S(!1)},Af={isRtl:S(!0)},Df=function(e){return"rtl"===Ef.getDirection(e)?Af:Of},Rf={directionAt:Df},Mf=["tableprops","tabledelete","|","tableinsertrowbefore","tableinsertrowafter","tabledeleterow","|","tableinsertcolbefore","tableinsertcolafter","tabledeletecol"],Pf={"border-collapse":"collapse",width:"100%"},Lf={border:"1"},If=function(e){return e.getParam("table_default_attributes",Lf,"object")},jf=function(e){return e.getParam("table_default_styles",Pf,"object")},Bf=function(e){return e.getParam("table_resize_bars",!0,"boolean")},Ff=function(e){return e.getParam("table_tab_navigation",!0,"boolean")},Hf=function(e){return e.getParam("table_cell_advtab",!0,"boolean")},Uf=function(e){return e.getParam("table_row_advtab",!0,"boolean")},zf=function(e){return e.getParam("table_advtab",!0,"boolean")},Wf=function(e){return e.getParam("table_appearance_options",!0,"boolean")},Vf=function(e){return e.getParam("table_grid",!0,"boolean")},qf=function(e){return e.getParam("table_style_by_css",!1,"boolean")},$f=function(e){return e.getParam("table_cell_class_list",[],"array")},Kf=function(e){return e.getParam("table_row_class_list",[],"array")},Gf=function(e){return e.getParam("table_class_list",[],"array")},Xf=function(e){return e.getParam("color_picker_callback")},Yf=function(e){return!1===e.getParam("table_responsive_width")},Jf=function(e){var t=e.getParam("table_clone_elements");return W(t)?H.some(t.split(/[ ,]/)):Array.isArray(t)?H.some(t):H.none()},Qf=function(e){var t=e.getParam("object_resizing",!0);return"table"===t||t},Zf=function(e){var t=e.getParam("table_toolbar",Mf);return""===t||!1===t?[]:W(t)?t.split(/[ ,]/):V(t)?t:[]},eh=function(e,t){return e.fire("newrow",{node:t})},th=function(e,t){return e.fire("newcell",{node:t})},nh=function(e,t,n,r){e.fire("ObjectResizeStart",{target:t,width:n,height:r})},rh=function(e,t,n,r){e.fire("ObjectResized",{target:t,width:n,height:r})},oh=function(e,t){var n=function(e){return"table"===Dn.name(yf(e))},r=function(t){var r=ll.getGridSize(t);return!1===n(e)||r.rows()>1},i=function(t){var r=ll.getGridSize(t);return!1===n(e)||r.columns()>1},a=Jf(e),s=function(t,n,r,i){return function(s,l){_f(s);var u=i(),c=Ve.fromDom(e.getDoc()),d=o(Rf.directionAt),f=li.cellOperations(r,c,a);return n(s)?t(u,s,l,f,d).bind(function(t){return Q(t.newRows(),function(t){eh(e,t.dom())}),Q(t.newCells(),function(t){th(e,t.dom())}),t.cursor().map(function(t){var n=e.dom.createRng();return n.setStart(t.dom(),0),n.setEnd(t.dom(),0),n})}):H.none()}};return{deleteRow:s(bf.eraseRows,r,N,t),deleteColumn:s(bf.eraseColumns,i,N,t),insertRowsBefore:s(bf.insertRowsBefore,M,N,t),insertRowsAfter:s(bf.insertRowsAfter,M,N,t),insertColumnsBefore:s(bf.insertColumnsBefore,M,Ms.halve,t),insertColumnsAfter:s(bf.insertColumnsAfter,M,Ms.halve,t),mergeCells:s(bf.mergeCells,M,N,t),unmergeCells:s(bf.unmergeCells,M,N,t),pasteRowsBefore:s(bf.pasteRowsBefore,M,N,t),pasteRowsAfter:s(bf.pasteRowsAfter,M,N,t),pasteCells:s(bf.pasteCells,M,N,t)}},ih=function(e,t,n){var r=Lr.fromTable(e),o=zr.generate(r);return vc.onCells(o,t).map(function(e){var t=lu.toGrid(o,n,!1),r=t.slice(e[0].row(),e[e.length-1].row()+e[e.length-1].rowspan()),i=vc.toDetailList(r,n);return fu.copy(i)})},ah={copyRows:ih},sh=tinymce.util.Tools.resolve("tinymce.util.Tools"),lh=function(e,t,n){var r,o=e.select("td,th",t);return r=function(t,r){for(var o=0;o<r.length;o++){var i=e.getStyle(r[o],n);if(void 0===t&&(t=i),t!==i)return""}return t}(r,o)},uh=function(e,t,n){n&&e.formatter.apply("align"+n,{},t)},ch=function(e,t,n){n&&e.formatter.apply("valign"+n,{},t)},dh=function(e,t){sh.each("left center right".split(" "),function(n){e.formatter.remove("align"+n,{},t)})},fh=function(e,t){sh.each("top middle bottom".split(" "),function(n){e.formatter.remove("valign"+n,{},t)})},hh={applyAlign:uh,applyVAlign:ch,unApplyAlign:dh,unApplyVAlign:fh,getTDTHOverallStyle:lh},ph=function(e,t,n){var r=function(e,n){return n=n||[],sh.each(e,function(e){var o={text:e.text||e.title};e.menu?o.menu=r(e.menu):(o.value=e.value,t&&t(o)),n.push(o)}),n};return r(e,n||[])},mh=function(e,t){a(t)?vh(e,t):gh(e,t)},gh=function(e,t){var n=e.dom,r=t.control.rootControl,o=r.toJSON(),i=n.parseStyle(o.style);i["border-style"]=o.borderStyle,i["border-color"]=o.borderColor,i["background-color"]=o.backgroundColor,i.width=o.width?Nf(o.width):"",i.height=o.height?Nf(o.height):"",r.find("#style").value(n.serializeStyle(n.parseStyle(n.serializeStyle(i))))},vh=function(e,t){var n=e.dom,r=t.control.rootControl,o=r.toJSON(),i=n.parseStyle(o.style);r.find("#borderStyle").value(i["border-style"]||""),r.find("#borderColor").value(i["border-color"]||""),r.find("#backgroundColor").value(i["background-color"]||""),r.find("#width").value(i.width||""),r.find("#height").value(i.height||"")},bh=function(e,t){var n=e.parseStyle(e.getAttrib(t,"style")),r={};return n["border-style"]&&(r.borderStyle=n["border-style"]),n["border-color"]&&(r.borderColor=n["border-color"]),n["background-color"]&&(r.backgroundColor=n["background-color"]),r.style=e.serializeStyle(n),r},yh=function(e){var t=function(){var t=Xf(e);if(t)return function(n){return t.call(e,function(e){n.control.value(e).fire("change")},n.control.value())}};return{title:"Advanced",type:"form",defaults:{onchange:E(gh,e)},items:[{label:"Style",name:"style",type:"textbox",onchange:E(vh,e)},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border style",type:"listbox",name:"borderStyle",width:90,onselect:E(gh,e),values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{label:"Border color",type:"colorbox",name:"borderColor",onaction:t()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:t()}]}]}},wh={createStyleForm:yh,buildListItems:ph,updateStyleField:gh,extractAdvancedStyles:bh,updateAdvancedFields:vh,syncAdvancedStyleFields:mh},xh=function(e,t){delete e.dataset.mceStyle,e.style.cssText+=";"+t},Ch=function(e,t){var n=e.dom,r={width:n.getStyle(t,"width")||n.getAttrib(t,"width"),height:n.getStyle(t,"height")||n.getAttrib(t,"height"),scope:n.getAttrib(t,"scope"),class:n.getAttrib(t,"class"),type:t.nodeName.toLowerCase(),style:"",align:"",valign:""};return sh.each("left center right".split(" "),function(n){e.formatter.matchNode(t,"align"+n)&&(r.align=n)}),sh.each("top middle bottom".split(" "),function(n){e.formatter.matchNode(t,"valign"+n)&&(r.valign=n)}),Hf(e)&&sh.extend(r,wh.extractAdvancedStyles(n,t)),r},kh=function(e,t,n){function r(e,n,r){(1===t.length||r)&&a.setAttrib(e,n,r)}function o(e,n,r){(1===t.length||r)&&a.setStyle(e,n,r)}var i,a=e.dom;Hf(e)&&wh.syncAdvancedStyleFields(e,n),i=n.control.rootControl.toJSON(),e.undoManager.transact(function(){sh.each(t,function(n){r(n,"scope",i.scope),1===t.length?r(n,"style",i.style):xh(n,i.style),r(n,"class",i.class),o(n,"width",Nf(i.width)),o(n,"height",Nf(i.height)),i.type&&n.nodeName.toLowerCase()!==i.type&&(n=a.rename(n,i.type)),1===t.length&&(hh.unApplyAlign(e,n),hh.unApplyVAlign(e,n)),i.align&&hh.applyAlign(e,n,i.align),i.valign&&hh.applyVAlign(e,n,i.valign)}),e.focus()})},Nh=function(e){var t,n,r,o=[];if(o=e.dom.select("td[data-mce-selected],th[data-mce-selected]"),t=e.dom.getParent(e.selection.getStart(),"td,th"),!o.length&&t&&o.push(t),t=t||o[0]){n=o.length>1?{width:"",height:"",scope:"",class:"",align:"",valign:"",style:"",type:t.nodeName.toLowerCase()}:Ch(e,t),$f(e).length>0&&(r={name:"class",type:"listbox",label:"Class",values:wh.buildListItems($f(e),function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({block:"td",classes:[t.value]})})})});var i={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width",onchange:E(wh.updateStyleField,e)},{label:"Height",name:"height",onchange:E(wh.updateStyleField,e)},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},r]};Hf(e)?e.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:n,body:[{title:"General",type:"form",items:i},wh.createStyleForm(e)],onsubmit:E(kh,e,o)}):e.windowManager.open({title:"Cell properties",data:n,body:i,onsubmit:E(kh,e,o)})}},_h={open:Nh},Sh=function(e,t){var n=e.dom,r={height:n.getStyle(t,"height")||n.getAttrib(t,"height"),scope:n.getAttrib(t,"scope"),class:n.getAttrib(t,"class"),align:"",style:"",type:t.parentNode.nodeName.toLowerCase()};return sh.each("left center right".split(" "),function(n){e.formatter.matchNode(t,"align"+n)&&(r.align=n)}),Uf(e)&&sh.extend(r,wh.extractAdvancedStyles(n,t)),r},Th=function(e,t,n){var r=e.getParent(t,"table"),o=t.parentNode,i=e.select(n,r)[0];i||(i=e.create(n),r.firstChild?"CAPTION"===r.firstChild.nodeName?e.insertAfter(i,r.firstChild):r.insertBefore(i,r.firstChild):r.appendChild(i)),i.appendChild(t),o.hasChildNodes()||e.remove(o)},Eh=function(e){var t,n,r,o,i,a,l=e.dom,u=[];t=l.getParent(e.selection.getStart(),"table"),n=l.getParent(e.selection.getStart(),"td,th"),sh.each(t.rows,function(e){sh.each(e.cells,function(t){if(l.getAttrib(t,"data-mce-selected")||t===n)return u.push(e),!1})}),(r=u[0])&&(i=u.length>1?{height:"",scope:"",style:"",class:"",align:"",type:r.parentNode.nodeName.toLowerCase()}:Sh(e,r),Kf(e).length>0&&(o={name:"class",type:"listbox",label:"Class",values:wh.buildListItems(Kf(e),function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({block:"tr",classes:[t.value]})})})}),a={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},o]},Uf(e)?e.windowManager.open({title:"Row properties",data:i,bodyType:"tabpanel",body:[{title:"General",type:"form",items:a},wh.createStyleForm(e)],onsubmit:E(s,e,u,i)}):e.windowManager.open({title:"Row properties",data:i,body:a,onsubmit:E(s,e,u,i)}))},Oh={open:Eh},Ah=tinymce.util.Tools.resolve("tinymce.Env"),Dh={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},percentages:!0},Rh=function(){return Ve.fromTag("table")},Mh=function(){return Ve.fromTag("tbody")},Ph=function(){return Ve.fromTag("tr")},Lh=function(){return Ve.fromTag("th")},Ih=function(){return Ve.fromTag("td")},jh=function(e,t,n,r,o){void 0===o&&(o=Dh);var i=Rh();so.setAll(i,o.styles),zn.setAll(i,o.attributes);var a=Mh();mo.append(i,a);for(var s=[],l=0;l<e;l++){for(var u=Ph(),c=0;c<t;c++){var d=l<n||c<r?Lh():Ih();c<r&&zn.set(d,"scope","row"),l<n&&zn.set(d,"scope","col"),mo.append(d,Ve.fromTag("br")),o.percentages&&so.set(d,"width",100/t+"%"),mo.append(u,d)}s.push(u)}return wo.append(a,s),i},Bh=function(e){return e.dom().innerHTML},Fh=function(e,t){var n=yn.owner(e),r=n.dom(),o=Ve.fromDom(r.createDocumentFragment()),i=hi.fromHtml(t,r);wo.append(o,i),No.empty(e),mo.append(e,o)},Hh=function(e){var t=Ve.fromTag("div"),n=Ve.fromDom(e.dom().cloneNode(!0));return mo.append(t,n),Bh(t)},Uh={get:Bh,set:Fh,getOuter:Hh},zh=function(e,t){e.selection.select(t.dom(),!0),e.selection.collapse(!0)},Wh=function(e,t){br.descendant(t,"td,th").each(E(zh,e))},Vh=function(e,t){Q(or.descendants(t,"tr"),function(t){eh(e,t.dom()),Q(or.descendants(t,"th,td"),function(t){th(e,t.dom())})})},qh=function(e){return W(e)&&-1!==e.indexOf("%")},$h=function(e,t,n){var r=jf(e),o={styles:r,attributes:If(e),percentages:qh(r.width)&&!Yf(e)},i=jh(n,t,0,0,o);zn.set(i,"data-mce-id","__mce");var a=Uh.getOuter(i);return e.insertContent(a),br.descendant(yf(e),'table[data-mce-id="__mce"]').map(function(t){return Yf(e)&&so.set(t,"width",so.get(t,"width")),zn.remove(t,"data-mce-id"),Vh(e,t),Wh(e,t),t.dom()}).getOr(null)},Kh={insert:$h},Gh=function(e,t){var n=e.dom,r={width:n.getStyle(t,"width")||n.getAttrib(t,"width"),height:n.getStyle(t,"height")||n.getAttrib(t,"height"),cellspacing:n.getStyle(t,"border-spacing")||n.getAttrib(t,"cellspacing"),cellpadding:n.getAttrib(t,"data-mce-cell-padding")||n.getAttrib(t,"cellpadding")||hh.getTDTHOverallStyle(e.dom,t,"padding"),border:n.getAttrib(t,"data-mce-border")||n.getAttrib(t,"border")||hh.getTDTHOverallStyle(e.dom,t,"border"),borderColor:n.getAttrib(t,"data-mce-border-color"),caption:!!n.select("caption",t)[0],class:n.getAttrib(t,"class")};return sh.each("left center right".split(" "),function(n){e.formatter.matchNode(t,"align"+n)&&(r.align=n)}),zf(e)&&sh.extend(r,wh.extractAdvancedStyles(n,t)),r},Xh=function(e,t,n){var r=e.dom,o={},i={};if(o.class=n.class,i.height=Nf(n.height),r.getAttrib(t,"width")&&!qf(e)?o.width=kf(n.width):i.width=Nf(n.width),qf(e)?(i["border-width"]=Nf(n.border),i["border-spacing"]=Nf(n.cellspacing),sh.extend(o,{"data-mce-border-color":n.borderColor,"data-mce-cell-padding":n.cellpadding,"data-mce-border":n.border})):sh.extend(o,{border:n.border,cellpadding:n.cellpadding,cellspacing:n.cellspacing}),qf(e)&&t.children)for(var a=0;a<t.children.length;a++)l(r,t.children[a],{"border-width":Nf(n.border),"border-color":n.borderColor,padding:Nf(n.cellpadding)});n.style?sh.extend(i,r.parseStyle(n.style)):i=sh.extend({},r.parseStyle(r.getAttrib(t,"style")),i),o.style=r.serializeStyle(i),r.setAttribs(t,o)},Yh=function(e,t,n){var r,o,i=e.dom;zf(e)&&wh.syncAdvancedStyleFields(e,n),o=n.control.rootControl.toJSON(),!1===o.class&&delete o.class,e.undoManager.transact(function(){t||(t=Kh.insert(e,o.cols||1,o.rows||1)),Xh(e,t,o),r=i.select("caption",t)[0],r&&!o.caption&&i.remove(r),!r&&o.caption&&(r=i.create("caption"),r.innerHTML=Ah.ie?"\xa0":'<br data-mce-bogus="1"/>',t.insertBefore(r,t.firstChild)),hh.unApplyAlign(e,t),o.align&&hh.applyAlign(e,t,o.align),e.focus(),e.addVisual()})},Jh=function(e,t){var n,r,o,i,a,s=e.dom,l={};!0===t?(n=s.getParent(e.selection.getStart(),"table"))&&(l=Gh(e,n)):(r={label:"Cols",name:"cols"},o={label:"Rows",name:"rows"}),Gf(e).length>0&&(l.class&&(l.class=l.class.replace(/\s*mce\-item\-table\s*/g,"")),i={name:"class",type:"listbox",label:"Class",values:wh.buildListItems(Gf(e),function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({block:"table",classes:[t.value]})})})}),a={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:Wf(e)?[r,o,{label:"Width",name:"width",onchange:E(wh.updateStyleField,e)},{label:"Height",name:"height",onchange:E(wh.updateStyleField,e)},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[r,o,{label:"Width",name:"width",onchange:E(wh.updateStyleField,e)},{label:"Height",name:"height",onchange:E(wh.updateStyleField,e)}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},i]},zf(e)?e.windowManager.open({title:"Table properties",data:l,bodyType:"tabpanel",body:[{title:"General",type:"form",items:a},wh.createStyleForm(e)],onsubmit:E(Yh,e,n)}):e.windowManager.open({title:"Table properties",data:l,body:a,onsubmit:E(Yh,e,n)})},Qh={open:Jh},Zh=sh.each,ep=function(e,t,n,r,o){var i=Cf(e),a=function(){var t=Ve.fromDom(e.dom.getParent(e.selection.getStart(),"th,td"));Rr.table(t,i).filter(O(i)).each(function(t){var n=Ve.fromText("");mo.after(t,n),No.remove(t);var r=e.dom.createRng();r.setStart(n.dom(),0),r.setEnd(n.dom(),0),e.selection.setRng(r)})},s=function(){return Ve.fromDom(e.dom.getParent(e.selection.getStart(),"th,td"))},l=function(e){return Rr.table(e,i)},u=function(e){return{width:wf(e.dom()),height:wf(e.dom())}},c=function(e,t,n){var r=u(n);t.width===r.width&&t.height===r.height||(nh(e,n.dom(),t.width,t.height),rh(e,n.dom(),r.width,r.height))},d=function(t){var o=s();l(o).each(function(i){var a=Ba.forMenu(r,i,o),s=u(i);t(i,a).each(function(t){c(e,s,i),e.selection.setRng(t),e.focus(),n.clear(i),_f(i)})})},f=function(t){var n=s();return l(n).bind(function(t){var o=Ve.fromDom(e.getDoc()),i=Ba.forMenu(r,t,n),a=li.cellOperations(N,o,H.none());return ah.copyRows(t,i,a)})},h=function(t){o.get().each(function(o){var i=J(o,function(e){return Bo.deep(e)}),a=s();l(a).bind(function(o){var s=Ve.fromDom(e.getDoc()),l=li.paste(s),u=Ba.pasteRows(r,o,a,i,l);t(o,u).each(function(t){e.selection.setRng(t),e.focus(),n.clear(o)})})})};Zh({mceTableSplitCells:function(){d(t.unmergeCells)},mceTableMergeCells:function(){d(t.mergeCells)},mceTableInsertRowBefore:function(){d(t.insertRowsBefore)},mceTableInsertRowAfter:function(){d(t.insertRowsAfter)},mceTableInsertColBefore:function(){d(t.insertColumnsBefore)},mceTableInsertColAfter:function(){d(t.insertColumnsAfter)},mceTableDeleteCol:function(){d(t.deleteColumn)},mceTableDeleteRow:function(){d(t.deleteRow)},mceTableCutRow:function(e){o.set(f()),d(t.deleteRow)},mceTableCopyRow:function(e){o.set(f())},mceTablePasteRowBefore:function(e){h(t.pasteRowsBefore)},mceTablePasteRowAfter:function(e){h(t.pasteRowsAfter)},mceTableDelete:a},function(t,n){e.addCommand(n,t)}),Zh({mceInsertTable:E(Qh.open,e),mceTableProps:E(Qh.open,e,!0),mceTableRowProps:E(Oh.open,e),mceTableCellProps:E(_h.open,e)},function(t,n){e.addCommand(n,function(e,n){t(n)})})},tp={registerCommands:ep},np=function(e){var t=H.from(e.dom().documentElement).map(Ve.fromDom).getOr(e);return{parent:S(t),view:S(e),origin:S(Bs(0,0))}},rp=function(e,t){var n=E(Vs.absolute,t);return{parent:S(t),view:S(e),origin:n}},op=function(e,t){return{parent:S(t),view:S(e),origin:S(Bs(0,0))}},ip={only:np,detached:rp,body:op},ap=function(e){return{registry:me(e,function(e){return{bind:e.bind,unbind:e.unbind}}),trigger:me(e,function(e){return e.trigger})}},sp={create:ap},lp=hl(["compare","extract","mutate","sink"]),up=hl(["element","start","stop","destroy"]),cp=hl(["forceDrop","drop","move","delayDrop"]),dp={mode:lp,sink:up,api:cp},fp=_u("ephox-dragster"),hp={resolve:fp.resolve},pp=function(e,t,n,r,o,i,a){return{target:S(e),x:S(t),y:S(n),stop:r,prevent:o,kill:i,raw:S(a)}},mp=function(e,t){return function(n){if(e(n)){var r=Ve.fromDom(n.target),o=function(){n.stopPropagation()},i=function(){n.preventDefault()},a=_(i,o),s=pp(r,n.clientX,n.clientY,o,i,a,n);t(s)}}},gp=function(e,t,n,r,o){var i=mp(n,r);return e.dom().addEventListener(t,i,o),{unbind:E(yp,e,t,i,o)}},vp=function(e,t,n,r){return gp(e,t,n,r,!1)},bp=function(e,t,n,r){return gp(e,t,n,r,!0)},yp=function(e,t,n,r){e.dom().removeEventListener(t,n,r)},wp={bind:vp,capture:bp},xp=S(!0),Cp=function(e,t,n){return wp.bind(e,t,xp,n)},kp=function(e,t,n){return wp.capture(e,t,xp,n)},Np={bind:Cp,capture:kp},_p=function(e,t){return Bs(t.left()-e.left(),t.top()-e.top())},Sp=function(e){return H.some(Bs(e.x(),e.y()))},Tp=function(e,t){e.mutate(t.left(),t.top())},Ep=function(e,t){var n=c(t),r=Np.bind(n.element(),"mousedown",e.forceDrop),o=Np.bind(n.element(),"mouseup",e.drop),i=Np.bind(n.element(),"mousemove",e.move),a=Np.bind(n.element(),"mouseout",e.delayDrop),s=function(){n.destroy(),o.unbind(),i.unbind(),a.unbind(),r.unbind()},l=function(e){mo.append(e,n.element())},u=function(){No.remove(n.element())};return dp.sink({element:n.element,start:l,stop:u,destroy:s})},Op=dp.mode({compare:_p,extract:Sp,sink:Ep,mutate:Tp}),Ap=function(e,t){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},throttle:function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];null!==n&&clearTimeout(n),n=setTimeout(function(){e.apply(null,r),n=null},t)}}},Dp=function(e,t,n){var r=!1,o=sp.create({start:u([]),stop:u([])}),i=h(),a=function(){m.stop(),i.isOn()&&(i.off(),o.trigger.stop())},s=Ap(a,200),l=function(e){m.start(e),i.on(),o.trigger.start()},c=function(e,n){s.cancel(),i.onEvent(e,t)};i.events.move.bind(function(n){t.mutate(e,n.info())});var d=function(){r=!0},f=function(){r=!1},p=function(e){return function(){var t=Array.prototype.slice.call(arguments,0);if(r)return e.apply(null,t)}},m=t.sink(dp.api({forceDrop:a,drop:p(a),move:p(c),delayDrop:p(s.throttle)}),n),g=function(){m.destroy()};return{element:m.element,go:l,on:d,off:f,destroy:g,events:o.registry}},Rp={setup:Dp},Mp=function(e,t){var n=void 0!==t?t:{},r=void 0!==n.mode?n.mode:Op;return Rp.setup(e,r,t)},Pp={transform:Mp},Lp=function(e){return br.first(e).isSome()},Ip=function(e,t,n){return br.ancestor(e,t,n).isSome()},jp=function(e,t){return br.sibling(e,t).isSome()},Bp=function(e,t){return br.child(e,t).isSome()},Fp=function(e,t){return br.descendant(e,t).isSome()},Hp=function(e,t,n){return br.closest(e,t,n).isSome()},Up={any:Lp,ancestor:Ip,sibling:jp,child:Bp,descendant:Fp,closest:Hp},zp=Tu.resolve("resizer-bar-dragging"),Wp=function(){var e=Ve.fromTag("div");return so.setAll(e,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),mo.append($n.body(),e),e},Vp=function(e,t){return e.inline?ip.body(yf(e),Wp()):ip.only(Ve.fromDom(e.getDoc()))},qp=function(e,t){e.inline&&No.remove(t.parent())},$p={get:Vp,remove:qp},Kp=function(e){var t,n,r=H.none(),i=H.none(),a=H.none(),s=/(\d+(\.\d+)?)%/,l=function(e){return"TABLE"===e.nodeName},u=function(t){return e.dom.getStyle(t,"width")||e.dom.getAttrib(t,"width")},c=function(){return i},d=function(){return a.getOr(ip.only(Ve.fromDom(e.getBody())))},f=function(){i.each(function(e){e.destroy()}),a.each(function(t){$p.remove(e,t)})};return e.on("init",function(){var t=o(Rf.directionAt),n=$p.get(e);if(a=H.some(n),Qf(e)&&Bf(e)){var s=v(n,t);s.on(),s.events.startDrag.bind(function(t){r=H.some(e.selection.getRng())}),s.events.beforeResize.bind(function(t){var n=t.table().dom();nh(e,n,wf(n),xf(n))}),s.events.afterResize.bind(function(t){var n=t.table(),o=n.dom();_f(n),r.each(function(t){e.selection.setRng(t),e.focus()}),rh(e,o,wf(o),xf(o)),e.undoManager.add()}),i=H.some(s)}}),e.on("ObjectResizeStart",function(e){var r=e.target;l(r)&&(t=e.width,n=u(r))}),e.on("ObjectResized",function(r){var o=r.target;if(l(o)){var i=o;if(s.test(n)){var a=parseFloat(s.exec(n)[1]),u=r.width*a/t;e.dom.setStyle(i,"width",u+"%")}else{var c=[];sh.each(i.rows,function(t){sh.each(t.cells,function(t){var n=e.dom.getStyle(t,"width",!0);c.push({cell:t,width:n})})}),sh.each(c,function(t){e.dom.setStyle(t.cell,"width",t.width),e.dom.setAttrib(t.cell,"width",null)})}}}),{lazyResize:c,lazyWire:d,destroy:f}},Gp=function(e){return Qp(function(t,n,r,o){return t(e)})},Xp=function(e){return Qp(function(t,n,r,o){return n(e)})},Yp=function(e,t){return Qp(function(n,r,o,i){return o(e,t)})},Jp=function(e){return Qp(function(t,n,r,o){return o(e)})},Qp=function(e){return{fold:e}},Zp={none:Gp,first:Xp,middle:Yp,last:Jp},em=function(e,t){return Rr.table(e,t).bind(function(t){var n=Rr.cells(t);return oe(n,function(t){return Jt.eq(e,t)}).map(function(e){return{index:S(e),all:S(n)}})})},tm=function(e,t){return em(e,t).fold(function(){return Zp.none(e)},function(t){return t.index()+1<t.all().length?Zp.middle(e,t.all()[t.index()+1]):Zp.last(e)})},nm=function(e,t){return em(e,t).fold(function(){return Zp.none()},function(t){return t.index()-1>=0?Zp.middle(e,t.all()[t.index()-1]):Zp.first(e)})},rm={next:tm,prev:nm},om=_a.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),im=function(e,t,n,r){return e.fold(t,n,r)},am=function(e){return e.fold(T,T,T)},sm={before:om.before,on:om.on,after:om.after,cata:im,getStart:am},lm=_a.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),um=ve("start","soffset","finish","foffset"),cm=function(e){return lm.exact(e.start(),e.soffset(),e.finish(),e.foffset())},dm=function(e){return e.match({domRange:function(e){return Ve.fromDom(e.startContainer)},relative:function(e,t){return sm.getStart(e)},exact:function(e,t,n,r){return e}})},fm=function(e){var t=dm(e);return yn.defaultView(t)},hm={domRange:lm.domRange,relative:lm.relative,exact:lm.exact,exactFromRange:cm,range:um,getWin:fm},pm=function(e,t,n,r){var o=yn.owner(e),i=o.dom().createRange();return i.setStart(e.dom(),t),i.setEnd(n.dom(),r),i},mm=function(e,t,n,r){var o=pm(e,t,n,r);return Ve.fromDom(o.commonAncestorContainer)},gm=function(e,t,n,r){var o=pm(e,t,n,r),i=Jt.eq(e,n)&&t===r;return o.collapsed&&!i},vm={after:gm,commonAncestorContainer:mm},bm=function(e,t){var n=t||document,r=n.createDocumentFragment();return Q(e,function(e){r.appendChild(e.dom())}),Ve.fromDom(r)},ym={fromElements:bm},wm=function(e,t){var n=e.document.createRange();return xm(n,t),n},xm=function(e,t){e.selectNodeContents(t.dom())},Cm=function(e,t){return t.compareBoundaryPoints(e.END_TO_START,e)<1&&t.compareBoundaryPoints(e.START_TO_END,e)>-1},km=function(e){return e.document.createRange()},Nm=function(e,t){t.fold(function(t){e.setStartBefore(t.dom())},function(t,n){e.setStart(t.dom(),n)},function(t){e.setStartAfter(t.dom())})},_m=function(e,t){t.fold(function(t){e.setEndBefore(t.dom())},function(t,n){e.setEnd(t.dom(),n)},function(t){e.setEndAfter(t.dom())})},Sm=function(e,t){Om(e),e.insertNode(t.dom())},Tm=function(e,t,n){var r=e.document.createRange();return Nm(r,t),_m(r,n),r},Em=function(e,t,n,r,o){var i=e.document.createRange();return i.setStart(t.dom(),n),i.setEnd(r.dom(),o),i},Om=function(e){e.deleteContents()},Am=function(e){var t=e.cloneContents();return Ve.fromDom(t)},Dm=function(e){return{left:S(e.left),top:S(e.top),right:S(e.right),bottom:S(e.bottom),width:S(e.width),height:S(e.height)}},Rm=function(e){var t=e.getClientRects(),n=t.length>0?t[0]:e.getBoundingClientRect();return n.width>0||n.height>0?H.some(n).map(Dm):H.none()},Mm=function(e){var t=e.getBoundingClientRect();return t.width>0||t.height>0?H.some(t).map(Dm):H.none()},Pm=function(e){return e.toString()},Lm={create:km,replaceWith:Sm,selectNodeContents:wm,selectNodeContentsUsing:xm,relativeToNative:Tm,exactToNative:Em,deleteContents:Om,cloneFragment:Am,getFirstRect:Rm,getBounds:Mm,isWithin:Cm,toString:Pm},Im=_a.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),jm=function(e,t,n){return t(Ve.fromDom(n.startContainer),n.startOffset,Ve.fromDom(n.endContainer),n.endOffset)},Bm=function(e,t){return t.match({domRange:function(e){return{ltr:S(e),rtl:H.none}},relative:function(t,n){return{ltr:ft(function(){return Lm.relativeToNative(e,t,n)}),rtl:ft(function(){return H.some(Lm.relativeToNative(e,n,t))})}},exact:function(t,n,r,o){return{ltr:ft(function(){return Lm.exactToNative(e,t,n,r,o)}),rtl:ft(function(){return H.some(Lm.exactToNative(e,r,o,t,n))})}}})},Fm=function(e,t){var n=t.ltr();if(n.collapsed){return t.rtl().filter(function(e){return!1===e.collapsed}).map(function(e){return Im.rtl(Ve.fromDom(e.endContainer),e.endOffset,Ve.fromDom(e.startContainer),e.startOffset)}).getOrThunk(function(){return jm(0,Im.ltr,n)})}return jm(0,Im.ltr,n)},Hm=function(e,t){var n=Bm(e,t);return Fm(0,n)},Um=function(e,t){return Hm(e,t).match({ltr:function(t,n,r,o){var i=e.document.createRange();return i.setStart(t.dom(),n),i.setEnd(r.dom(),o),i},rtl:function(t,n,r,o){var i=e.document.createRange();return i.setStart(r.dom(),o),i.setEnd(t.dom(),n),i}})},zm={ltr:Im.ltr,rtl:Im.rtl,diagnose:Hm,asLtrRange:Um},Wm=function(e,t,n,r,o){if(0===o)return 0;if(t===r)return o-1;for(var i=r,a=1;a<o;a++){var s=e(a),l=Math.abs(t-s.left);if(n<=s.bottom){if(n<s.top||l>i)return a-1;i=l}}return 0},Vm=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},qm={inRect:Vm,searchForPoint:Wm},$m=function(e,t,n,r,o){var i=function(n){var r=e.dom().createRange();return r.setStart(t.dom(),n),r.collapse(!0),r},a=function(e){return i(e).getBoundingClientRect()},s=Wo.get(t).length,l=qm.searchForPoint(a,n,r,o.right,s);return i(l)},Km=function(e,t,n,r){var o=e.dom().createRange();o.selectNode(t.dom());var i=o.getClientRects();return $l(i,function(e){return qm.inRect(e,n,r)?H.some(e):H.none()}).map(function(o){return $m(e,t,n,r,o)})},Gm={locate:Km},Xm=function(e,t,n,r){var o=e.dom().createRange(),i=yn.children(t);return $l(i,function(t){return o.selectNode(t.dom()),qm.inRect(o.getBoundingClientRect(),n,r)?Ym(e,t,n,r):H.none()})},Ym=function(e,t,n,r){return(Dn.isText(t)?Gm.locate:Xm)(e,t,n,r)},Jm=function(e,t,n,r){var o=e.dom().createRange();o.selectNode(t.dom());var i=o.getBoundingClientRect(),a=Math.max(i.left,Math.min(i.right,n)),s=Math.max(i.top,Math.min(i.bottom,r));return Ym(e,t,a,s)},Qm={locate:Jm},Zm=function(e,t){return t-e.left<e.right-t},eg=function(e,t,n){var r=e.dom().createRange();return r.selectNode(t.dom()),r.collapse(n),r},tg=function(e,t,n){var r=e.dom().createRange();r.selectNode(t.dom());var o=r.getBoundingClientRect(),i=Zm(o,n);return(!0===i?ei.first:ei.last)(t).map(function(t){return eg(e,t,i)})},ng=function(e,t,n){var r=t.dom().getBoundingClientRect(),o=Zm(r,n);return H.some(eg(e,t,o))},rg=function(e,t,n){return(0===yn.children(t).length?ng:tg)(e,t,n)},og={search:rg},ig=function(e,t,n){return H.from(e.dom().caretPositionFromPoint(t,n)).bind(function(t){if(null===t.offsetNode)return H.none();var n=e.dom().createRange();return n.setStart(t.offsetNode,t.offset),n.collapse(),H.some(n)})},ag=function(e,t,n){return H.from(e.dom().caretRangeFromPoint(t,n))},sg=function(e,t,n,r){var o=e.dom().createRange();o.selectNode(t.dom());var i=o.getBoundingClientRect(),a=Math.max(i.left,Math.min(i.right,n)),s=Math.max(i.top,Math.min(i.bottom,r));return Qm.locate(e,t,a,s)},lg=function(e,t,n){return Ve.fromPoint(e,t,n).bind(function(r){var o=function(){return og.search(e,r,t)};return 0===yn.children(r).length?o():sg(e,r,t,n).orThunk(o)})},ug=document.caretPositionFromPoint?ig:document.caretRangeFromPoint?ag:lg,cg=function(e,t,n){var r=Ve.fromDom(e.document);return ug(r,t,n).map(function(e){return hm.range(Ve.fromDom(e.startContainer),e.startOffset,Ve.fromDom(e.endContainer),e.endOffset)})},dg={fromPoint:cg},fg=function(e,t,n,r){var o=Lm.create(e),i=Qe.is(t,r)?[t]:[],a=i.concat(or.descendants(t,r));return ee(a,function(e){return Lm.selectNodeContentsUsing(o,e),Lm.isWithin(n,o)})},hg=function(e,t,n){var r=zm.asLtrRange(e,t),o=Ve.fromDom(r.commonAncestorContainer);return Dn.isElement(o)?fg(e,o,r,n):[]},pg={find:hg},mg=function(e,t){var n=Dn.name(e);return"input"===n?sm.after(e):X(["br","img"],n)?0===t?sm.before(e):sm.after(e):sm.on(e,t)},gg=function(e,t){var n=e.fold(sm.before,mg,sm.after),r=t.fold(sm.before,mg,sm.after);return hm.relative(n,r)},vg=function(e,t,n,r){var o=mg(e,t),i=mg(n,r);return hm.relative(o,i)},bg=function(e){return e.match({domRange:function(e){var t=Ve.fromDom(e.startContainer),n=Ve.fromDom(e.endContainer);return vg(t,e.startOffset,n,e.endOffset)},relative:gg,exact:vg})},yg={beforeSpecial:mg,preprocess:bg,preprocessRelative:gg,preprocessExact:vg},wg=function(e,t){H.from(e.getSelection()).each(function(e){e.removeAllRanges(),e.addRange(t)})},xg=function(e,t,n,r,o){var i=Lm.exactToNative(e,t,n,r,o);wg(e,i)},Cg=function(e,t,n){return pg.find(e,t,n)},kg=function(e,t,n,r,o,i){t.collapse(n.dom(),r),t.extend(o.dom(),i)},Ng=function(e,t){return zm.diagnose(e,t).match({ltr:function(t,n,r,o){xg(e,t,n,r,o)},rtl:function(t,n,r,o){var i=e.getSelection();if(i.setBaseAndExtent)i.setBaseAndExtent(t.dom(),n,r.dom(),o);else if(i.extend)try{kg(0,i,t,n,r,o)}catch(i){xg(e,r,o,t,n)}else xg(e,r,o,t,n)}})},_g=function(e,t,n,r,o){var i=yg.preprocessExact(t,n,r,o);Ng(e,i)},Sg=function(e,t,n){var r=yg.preprocessRelative(t,n);Ng(e,r)},Tg=function(e){var t=hm.getWin(e).dom(),n=function(e,n,r,o){return Lm.exactToNative(t,e,n,r,o)},r=yg.preprocess(e);return zm.diagnose(t,r).match({ltr:n,rtl:n})},Eg=function(e){if(e.rangeCount>0){var t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);return H.some(hm.range(Ve.fromDom(t.startContainer),t.startOffset,Ve.fromDom(n.endContainer),n.endOffset))}return H.none()},Og=function(e){var t=Ve.fromDom(e.anchorNode),n=Ve.fromDom(e.focusNode);return vm.after(t,e.anchorOffset,n,e.focusOffset)?H.some(hm.range(Ve.fromDom(e.anchorNode),e.anchorOffset,Ve.fromDom(e.focusNode),e.focusOffset)):Eg(e)},Ag=function(e,t){var n=Lm.selectNodeContents(e,t);wg(e,n)},Dg=function(e,t){var n=Lm.selectNodeContents(e,t);return hm.range(Ve.fromDom(n.startContainer),n.startOffset,Ve.fromDom(n.endContainer),n.endOffset)},Rg=function(e){return H.from(e.getSelection()).filter(function(e){return e.rangeCount>0}).bind(Og)},Mg=function(e){return Rg(e).map(function(e){return hm.exact(e.start(),e.soffset(),e.finish(),e.foffset())})},Pg=function(e,t){var n=zm.asLtrRange(e,t);return Lm.getFirstRect(n)},Lg=function(e,t){var n=zm.asLtrRange(e,t);return Lm.getBounds(n)},Ig=function(e,t,n){return dg.fromPoint(e,t,n)},jg=function(e,t){var n=zm.asLtrRange(e,t);return Lm.toString(n)},Bg=function(e){e.getSelection().removeAllRanges()},Fg=function(e,t){var n=zm.asLtrRange(e,t);return Lm.cloneFragment(n)},Hg=function(e,t,n){var r=zm.asLtrRange(e,t),o=ym.fromElements(n,e.document);Lm.replaceWith(r,o)},Ug=function(e,t){var n=zm.asLtrRange(e,t);Lm.deleteContents(n)},zg=function(e,t,n,r){return Jt.eq(e,n)&&t===r},Wg={setExact:_g,getExact:Rg,get:Mg,setRelative:Sg,toNative:Tg,setToElement:Ag,clear:Bg,clone:Fg,replace:Hg,deleteAt:Ug,forElement:Dg,getFirstRect:Pg,getBounds:Lg,getAtPoint:Ig,findWithin:Cg,getAsString:jg,isCollapsed:zg},Vg=tinymce.util.Tools.resolve("tinymce.util.VK"),qg=function(e,t,n,r){return Xg(e,t,rm.next(n),r)},$g=function(e,t,n,r){return Xg(e,t,rm.prev(n),r)},Kg=function(e,t){var n=hm.exact(t,0,t,0);return Wg.toNative(n)},Gg=function(e,t){var n=or.descendants(t,"tr");return fe(n).bind(function(e){return br.descendant(e,"td,th").map(function(e){return Kg(0,e)})})},Xg=function(e,t,n,r,o){return n.fold(H.none,H.none,function(e,t){return ei.first(t).map(function(e){return Kg(0,e)})},function(n){return Rr.table(n,t).bind(function(t){var o=Ba.noMenu(n);return e.undoManager.transact(function(){r.insertRowsAfter(t,o)}),Gg(0,t)})})},Yg=["table","li","dl"],Jg=function(e,t,n,r){if(e.keyCode===Vg.TAB){var o=yf(t),i=function(e){var t=Dn.name(e);return Jt.eq(e,o)||X(Yg,t)},a=t.selection.getRng();if(a.collapsed){var s=Ve.fromDom(a.startContainer);Rr.cell(s,i).each(function(o){e.preventDefault(),(e.shiftKey?$g:qg)(t,i,o,n,r).each(function(e){t.selection.setRng(e)})})}}},Qg={handle:Jg},Zg=ve("selection","kill"),ev={response:Zg},tv=function(e){return function(t){return t===e}},nv=tv(38),rv=tv(40),ov=function(e){return e>=37&&e<=40},iv={ltr:{isBackward:tv(37),isForward:tv(39)},rtl:{isBackward:tv(39),isForward:tv(37)},isUp:nv,isDown:rv,isNavigation:ov},av=function(e,t){var n=zm.asLtrRange(e,t);return{start:S(Ve.fromDom(n.startContainer)),soffset:S(n.startOffset),finish:S(Ve.fromDom(n.endContainer)),foffset:S(n.endOffset)}},sv=function(e,t,n,r){return{start:S(sm.on(e,t)),finish:S(sm.on(n,r))}},lv={convertToRange:av,makeSitus:sv},uv=Wt.detect().browser.isSafari(),cv=function(e){var t=void 0!==e?e.dom():document,n=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return Bs(n,r)},dv=function(e,t,n){(void 0!==n?n.dom():document).defaultView.scrollTo(e,t)},fv=function(e,t,n){(void 0!==n?n.dom():document).defaultView.scrollBy(e,t)},hv=function(e,t){var n=Vs.absolute(t),r=Ve.fromDom(e.document);dv(n.left(),n.top(),r)},pv=function(e,t){var n=cv(e);t();var r=cv(e);n.top()===r.top()&&n.left()===r.left()||dv(n.left(),n.top(),e)},mv=function(e){var t=H.none(),n=function(){t=H.some(cv(e))},r=function(){t.each(function(t){dv(t.left(),t.top(),e)})};return n(),{save:n,restore:r}},gv=function(e,t){uv&&$(e.dom().scrollIntoViewIfNeeded)?e.dom().scrollIntoViewIfNeeded(!1):e.dom().scrollIntoView(t)},vv=function(e,t){var n=t.dom().getBoundingClientRect(),r=e.dom().getBoundingClientRect();r.top<n.top?gv(e,!0):r.bottom>n.bottom&&gv(e,!1)},bv=function(){var e=Ve.fromHtml('<div style="width: 100px; height: 100px; overflow: scroll; position: absolute; top: -9999px;"></div>');mo.after($n.body(),e);var t=e.dom().offsetWidth-e.dom().clientWidth;return No.remove(e),t},yv={get:cv,to:dv,by:fv,preserve:pv,capture:mv,intoView:gv,intoViewIfNeeded:vv,setToElement:hv,scrollBarWidth:bv},wv=function(e,t,n,r,o,i,a){return Jt.eq(n,o)&&r===i?H.none():br.closest(n,"td,th",t).bind(function(n){return br.closest(o,"td,th",t).bind(function(r){return xv(e,t,n,r,a)})})},xv=function(e,t,n,r,o){return Jt.eq(n,r)?H.none():ba.identify(n,r,t).bind(function(t){var r=t.boxes().getOr([]);return r.length>0?(o(e,r,t.start(),t.finish()),H.some(ev.response(H.some(lv.makeSitus(n,0,n,Yo.getEnd(n))),!0))):H.none()})},Cv=function(e,t,n,r,o){var i=function(e){return o.clear(n),o.selectRange(n,e.boxes(),e.start(),e.finish()),e.boxes()};return ba.shiftSelection(r,e,t,o.firstSelectedSelector(),o.lastSelectedSelector()).map(i)},kv={sync:wv,detect:xv,update:Cv},Nv=Ne(["left","top","right","bottom"],[]),_v=function(e,t){return Nv({left:e.left(),top:e.top()+t,right:e.right(),bottom:e.bottom()+t})},Sv=function(e,t){return Nv({left:e.left(),top:e.top()-t,right:e.right(),bottom:e.bottom()-t})},Tv=function(e,t){var n=e.bottom()-e.top();return Nv({left:e.left(),top:t-n,right:e.right(),bottom:t})},Ev=function(e,t){var n=e.bottom()-e.top();return Nv({left:e.left(),top:t,right:e.right(),bottom:t+n})},Ov=function(e,t,n){return Nv({left:e.left()+t,top:e.top()+n,right:e.right()+t,bottom:e.bottom()+n})},Av=function(e){return e.top()},Dv=function(e){return e.bottom()},Rv=function(e){return"("+e.left()+", "+e.top()+") -> ("+e.right()+", "+e.bottom()+")"},Mv={nu:Nv,moveUp:Sv,moveDown:_v,moveBottomTo:Tv,moveTopTo:Ev,getTop:Av,getBottom:Dv,translate:Ov,toString:Rv},Pv=function(e,t,n){return n>=0&&n<Yo.getEnd(t)?e.getRangedRect(t,n,t,n+1):n>0?e.getRangedRect(t,n-1,t,n):H.none()},Lv=function(e){return Mv.nu({left:e.left,top:e.top,right:e.right,bottom:e.bottom})},Iv=function(e,t){return H.some(e.getRect(t))},jv=function(e,t,n){return Dn.isElement(t)?Iv(e,t).map(Lv):Dn.isText(t)?Pv(e,t,n).map(Lv):H.none()},Bv=function(e,t){return Dn.isElement(t)?Iv(e,t).map(Lv):Dn.isText(t)?e.getRangedRect(t,0,t,Yo.getEnd(t)).map(Lv):H.none()},Fv={getBoxAt:jv,getEntireBox:Bv},Hv=ve("item","mode"),Uv=function(e,t,n,r){var o=void 0!==r?r:zv;return e.property().parent(t).map(function(e){return Hv(e,o)})},zv=function(e,t,n,r){var o=void 0!==r?r:Wv;return n.sibling(e,t).map(function(e){return Hv(e,o)})},Wv=function(e,t,n,r){var o=void 0!==r?r:Wv,i=e.property().children(t);return n.first(i).map(function(e){return Hv(e,o)})},Vv=[{current:Uv,next:zv,fallback:H.none()},{current:zv,next:Wv,fallback:H.some(Uv)},{current:Wv,next:Wv,fallback:H.some(zv)}],qv=function(e,t,n,r,o){var o=void 0!==o?o:Vv;return re(o,function(e){return e.current===n}).bind(function(n){return n.current(e,t,r,n.next).orThunk(function(){return n.fallback.bind(function(n){return qv(e,t,n,r)})})})},$v={backtrack:Uv,sidestep:zv,advance:Wv,go:qv},Kv=function(){return{sibling:function(e,t){return e.query().prevSibling(t)},first:function(e){return e.length>0?H.some(e[e.length-1]):H.none()}}},Gv=function(){return{sibling:function(e,t){return e.query().nextSibling(t)},first:function(e){return e.length>0?H.some(e[0]):H.none()}}},Xv={left:Kv,right:Gv},Yv=function(e,t,n,r,o,i){return $v.go(e,t,r,o).bind(function(t){return i(t.item())?H.none():n(t.item())?H.some(t.item()):Yv(e,t.item(),n,t.mode(),o,i)})},Jv=function(e,t,n,r){return Yv(e,t,n,$v.sidestep,Xv.left(),r)},Qv=function(e,t,n,r){return Yv(e,t,n,$v.sidestep,Xv.right(),r)},Zv={left:Jv,right:Qv},eb=function(e,t){return 0===e.property().children(t).length},tb=function(e,t,n){return rb(e,t,E(eb,e),n)},nb=function(e,t,n){return ob(e,t,E(eb,e),n)},rb=function(e,t,n,r){return Zv.left(e,t,n,r)},ob=function(e,t,n,r){return Zv.right(e,t,n,r)},ib=function(){return{left:Xv.left,right:Xv.right}},ab=function(e,t,n,r,o){return $v.go(e,t,n,r,o)},sb={before:tb,after:nb,seekLeft:rb,seekRight:ob,walkers:ib,walk:ab,backtrack:$v.backtrack,sidestep:$v.sidestep,advance:$v.advance},lb=n(),ub=function(e,t,n){return sb.gather(lb,e,t,n)},cb=function(e,t){return sb.before(lb,e,t)},db=function(e,t){return sb.after(lb,e,t)},fb=function(e,t,n){return sb.seekLeft(lb,e,t,n)},hb=function(e,t,n){return sb.seekRight(lb,e,t,n)},pb=function(){return sb.walkers()},mb=function(e,t,n,r){return sb.walk(lb,e,t,n,r)},gb={gather:ub,before:cb,after:db,seekLeft:fb,seekRight:hb,walkers:pb,walk:mb},vb=_a.generate([{none:[]},{retry:["caret"]}]),bb=function(e,t){return e.left()<t.left()||Math.abs(t.right()-e.left())<1||e.left()>t.right()},yb=function(e,t,n){return dr.closest(t,Fl.isBlock).fold(S(!1),function(t){return Fv.getEntireBox(e,t).exists(function(e){return bb(n,e)})})},wb=function(e,t,n,r,o){var i=Mv.moveDown(o,5);return Math.abs(n.bottom()-r.bottom())<1?vb.retry(i):n.top()>o.bottom()?vb.retry(i):n.top()===o.bottom()?vb.retry(Mv.moveDown(o,1)):yb(e,t,o)?vb.retry(Mv.translate(i,5,0)):vb.none()},xb=function(e,t,n,r,o){var i=Mv.moveUp(o,5);return Math.abs(n.top()-r.top())<1?vb.retry(i):n.bottom()<o.top()?vb.retry(i):n.bottom()===o.top()?vb.retry(Mv.moveUp(o,1)):yb(e,t,o)?vb.retry(Mv.translate(i,5,0)):vb.none()},Cb={point:Mv.getTop,adjuster:xb,move:Mv.moveUp,gather:gb.before},kb={point:Mv.getBottom,adjuster:wb,move:Mv.moveDown,gather:gb.after},Nb=function(e,t,n){return e.elementFromPoint(t,n).filter(function(e){return"table"===Dn.name(e)}).isSome()},_b=function(e,t,n,r,o){return Sb(e,t,n,t.move(r,5),o)},Sb=function(e,t,n,r,o){return 0===o?H.some(r):Nb(e,r.left(),t.point(r))?_b(e,t,n,r,o-1):e.situsFromPoint(r.left(),t.point(r)).bind(function(i){return i.start().fold(H.none,function(i,a){return Fv.getEntireBox(e,i,a).bind(function(a){return t.adjuster(e,i,a,n,r).fold(H.none,function(r){return Sb(e,t,n,r,o-1)})}).orThunk(function(){return H.some(r)})},H.none)})},Tb=function(e,t){return e.situsFromPoint(t.left(),t.bottom()+5)},Eb=function(e,t){return e.situsFromPoint(t.left(),t.top()-5)},Ob=function(e,t,n){return e.point(t)>n.getInnerHeight()?H.some(e.point(t)-n.getInnerHeight()):e.point(t)<0?H.some(-e.point(t)):H.none()},Ab=function(e,t,n){var r=e.move(n,5),o=Sb(t,e,n,r,100).getOr(r);return Ob(e,o,t).fold(function(){return t.situsFromPoint(o.left(),e.point(o))},function(n){return t.scrollBy(0,n),t.situsFromPoint(o.left(),e.point(o)-n)})},Db={tryUp:E(Ab,Cb),tryDown:E(Ab,kb),ieTryUp:Eb,ieTryDown:Tb,getJumpSize:S(5)},Rb=_a.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Mb=function(e,t,n){var r=e.getRect(t),o=e.getRect(n);return o.right>r.left&&o.left<r.right},Pb=function(e,t,n,r,o,i,a){return br.closest(r,"td,th",a).bind(function(n){return br.closest(t,"td,th",a).map(function(t){return Jt.eq(n,t)?Jt.eq(r,n)&&Yo.getEnd(n)===o?i(t):Rb.none("in same cell"):qi.sharedOne(Lb,[n,t]).fold(function(){return Mb(e,t,n)?Rb.success():i(t)},function(e){return i(t)})})}).getOr(Rb.none("default"))},Lb=function(e){return br.closest(e,"tr")},Ib=function(e,t,n,r,o){return e.fold(t,n,r,o)},jb={verify:Pb,cata:Ib,adt:Rb},Bb=ve("element","offset"),Fb=ve("element","deltaOffset"),Hb=ve("element","start","finish"),Ub=ve("begin","end"),zb=ve("element","text"),Wb={point:Bb,delta:Fb,range:Hb,points:Ub,text:zb},Vb=ve("ancestor","descendants","element","index"),qb=ve("parent","children","element","index"),$b=function(e,t){return dr.closest(e,function(e){return yn.parent(e).exists(function(e){return Jt.eq(e,t)})})},Kb=function(e){return yn.parent(e).bind(function(t){var n=yn.children(t);return Gb(n,e).map(function(r){return qb(t,n,e,r)})})},Gb=function(e,t){return oe(e,E(Jt.eq,t))},Xb=function(e,t){return yn.parent(e).bind(function(n){var r=or.children(n,t);return Gb(r,e).map(function(t){return qb(n,r,e,t)})})},Yb=function(e,t,n){return br.closest(e,t).bind(function(t){var r=or.descendants(t,n);return Gb(r,e).map(function(n){return Vb(t,r,e,n)})})},Jb={childOf:$b,indexOf:Gb,indexInParent:Kb,selectorsInParent:Xb,descendantsInAncestor:Yb},Qb=function(e){return"br"===Dn.name(e)},Zb=function(e,t,n){return t(e,n).bind(function(e){return Dn.isText(e)&&0===Wo.get(e).trim().length?Zb(e,t,n):H.some(e)})},ey=function(e,t,n){return n.traverse(t).orThunk(function(){return Zb(t,n.gather,e)}).map(n.relative)},ty=function(e,t){return yn.child(e,t).filter(Qb).orThunk(function(){return yn.child(e,t-1).filter(Qb)})},ny=function(e,t,n,r){return ty(t,n).bind(function(t){return r.traverse(t).fold(function(){return Zb(t,r.gather,e).map(r.relative)},function(e){return Jb.indexInParent(e).map(function(e){return sm.on(e.parent(),e.index())})})})},ry=function(e,t,n,r){return(Qb(t)?ey(e,t,r):ny(e,t,n,r)).map(function(e){return{start:S(e),finish:S(e)}})},oy=function(e){return jb.cata(e,function(e){return H.none()},function(){return H.none()},function(e){return H.some(Wb.point(e,0))},function(e){return H.some(Wb.point(e,Yo.getEnd(e)))})},iy={tryBr:ry,process:oy},ay=Wt.detect(),sy=function(e,t,n){return e.getSelection().bind(function(r){return iy.tryBr(t,r.finish(),r.foffset(),n).fold(function(){return H.some(Wb.point(r.finish(),r.foffset()))},function(o){var i=e.fromSitus(o),a=jb.verify(e,r.finish(),r.foffset(),i.finish(),i.foffset(),n.failure,t);return iy.process(a)})})},ly=function(e,t,n,r,o,i){return 0===i?H.none():dy(e,t,n,r,o).bind(function(a){var s=e.fromSitus(a),l=jb.verify(e,n,r,s.finish(),s.foffset(),o.failure,t);return jb.cata(l,function(){return H.none()},function(){return H.some(a)},function(a){return Jt.eq(n,a)&&0===r?uy(e,n,r,Mv.moveUp,o):ly(e,t,a,0,o,i-1)},function(a){return Jt.eq(n,a)&&r===Yo.getEnd(a)?uy(e,n,r,Mv.moveDown,o):ly(e,t,a,Yo.getEnd(a),o,i-1)})})},uy=function(e,t,n,r,o){return Fv.getBoxAt(e,t,n).bind(function(t){return cy(e,o,r(t,Db.getJumpSize()))})},cy=function(e,t,n){return ay.browser.isChrome()||ay.browser.isSafari()||ay.browser.isFirefox()||ay.browser.isEdge()?t.otherRetry(e,n):ay.browser.isIE()?t.ieRetry(e,n):H.none()},dy=function(e,t,n,r,o){return Fv.getBoxAt(e,n,r).bind(function(t){return cy(e,o,t)})},fy=function(e,t,n){return sy(e,t,n).bind(function(r){return ly(e,t,r.element(),r.offset(),n,20).map(e.fromSitus)})},hy={handle:fy},py=function(e){return dr.first(e).isSome()},my=function(e,t,n){return dr.ancestor(e,t,n).isSome()},gy=function(e,t,n){return dr.closest(e,t,n).isSome()},vy=function(e,t){return dr.sibling(e,t).isSome()},by=function(e,t){return dr.child(e,t).isSome()},yy=function(e,t){return dr.descendant(e,t).isSome()},wy={any:py,ancestor:my,closest:gy,sibling:vy,child:by,descendant:yy},xy=Wt.detect(),Cy=function(e,t){return wy.ancestor(e,function(e){return yn.parent(e).exists(function(e){return Jt.eq(e,t)})})},ky=function(e,t,n,r,o){return br.closest(r,"td,th",t).bind(function(r){return br.closest(r,"table",t).bind(function(i){return Cy(o,i)?hy.handle(e,t,n).bind(function(e){return br.closest(e.finish(),"td,th",t).map(function(t){return{start:S(r),finish:S(t),range:S(e)}})}):H.none()})})},Ny=function(e,t,n,r,o,i){return xy.browser.isIE()?H.none():i(r,t).orThunk(function(){return ky(e,t,n,r,o).map(function(e){var t=e.range();return ev.response(H.some(lv.makeSitus(t.start(),t.soffset(),t.finish(),t.foffset())),!0)})})},_y=function(e,t){return br.closest(e,"tr",t).bind(function(e){return br.closest(e,"table",t).bind(function(n){var r=or.descendants(n,"tr");return Jt.eq(e,r[0])?gb.seekLeft(n,function(e){return ei.last(e).isSome()},t).map(function(e){var t=Yo.getEnd(e);return ev.response(H.some(lv.makeSitus(e,t,e,t)),!0)}):H.none()})})},Sy=function(e,t){return br.closest(e,"tr",t).bind(function(e){return br.closest(e,"table",t).bind(function(n){var r=or.descendants(n,"tr");return Jt.eq(e,r[r.length-1])?gb.seekRight(n,function(e){return ei.first(e).isSome()},t).map(function(e){return ev.response(H.some(lv.makeSitus(e,0,e,0)),!0)}):H.none()})})},Ty=function(e,t,n,r,o,i,a){return ky(e,n,r,o,i).bind(function(e){return kv.detect(t,n,e.start(),e.finish(),a)})},Ey={navigate:Ny,select:Ty,firstUpCheck:_y,lastDownCheck:Sy},Oy=function(e,t){return br.closest(e,"td,th",t)},Ay={down:{traverse:yn.nextSibling,gather:gb.after,relative:sm.before,otherRetry:Db.tryDown,ieRetry:Db.ieTryDown,failure:jb.adt.failedDown},up:{traverse:yn.prevSibling,gather:gb.before,relative:sm.before,otherRetry:Db.tryUp,ieRetry:Db.ieTryUp,failure:jb.adt.failedUp}},Dy=ve("rows","cols"),Ry=function(e,t,n,r){var o=b(e),i=y(o,t,n,r);return{mousedown:i.mousedown,mouseover:i.mouseover,mouseup:i.mouseup}},My=function(e,t,n,r){var o=b(e),i=function(){return r.clear(t),H.none()};return{keydown:function(e,a,s,l,u,c){var d=e.raw().which,f=!0===e.raw().shiftKey;return ba.retrieve(t,r.selectedSelector()).fold(function(){return iv.isDown(d)&&f?E(Ey.select,o,t,n,Ay.down,l,a,r.selectRange):iv.isUp(d)&&f?E(Ey.select,o,t,n,Ay.up,l,a,r.selectRange):iv.isDown(d)?E(Ey.navigate,o,n,Ay.down,l,a,Ey.lastDownCheck):iv.isUp(d)?E(Ey.navigate,o,n,Ay.up,l,a,Ey.firstUpCheck):H.none},function(e){var n=function(n){return function(){return $l(n,function(n){return kv.update(n.rows(),n.cols(),t,e,r)}).fold(function(){return ba.getEdges(t,r.firstSelectedSelector(),r.lastSelectedSelector()).map(function(e){var n=iv.isDown(d)||c.isForward(d)?sm.after:sm.before;return o.setRelativeSelection(sm.on(e.first(),0),n(e.table())),r.clear(t),ev.response(H.none(),!0)})},function(e){return H.some(ev.response(H.none(),!0))})}};return iv.isDown(d)&&f?n([Dy(1,0)]):iv.isUp(d)&&f?n([Dy(-1,0)]):c.isBackward(d)&&f?n([Dy(0,-1),Dy(-1,0)]):c.isForward(d)&&f?n([Dy(0,1),Dy(1,0)]):iv.isNavigation(d)&&!1===f?i:H.none})()},keyup:function(e,o,i,a,s){return ba.retrieve(t,r.selectedSelector()).fold(function(){var l=e.raw().which;return 0==(!0===e.raw().shiftKey)?H.none():iv.isNavigation(l)?kv.sync(t,n,o,i,a,s,r.selectRange):H.none()},H.none)}}},Py={mouse:Ry,keyboard:My},Ly=function(e,t){Q(t,function(t){Vu.add(e,t)})},Iy=function(e,t){Q(t,function(t){Vu.remove(e,t)})},jy=function(e,t){Q(t,function(t){Vu.toggle(e,t)})},By=function(e,t){return ue(t,function(t){return Vu.has(e,t)})},Fy=function(e,t){return Y(t,function(t){return Vu.has(e,t)})},Hy=function(e){for(var t=e.dom().classList,n=new Array(t.length),r=0;r<t.length;r++)n[r]=t.item(r);return n},Uy=function(e){return ju.supports(e)?Hy(e):ju.get(e)},zy={add:Ly,remove:Iy,toggle:jy,hasAll:By,hasAny:Fy,get:Uy},Wy=function(e){return function(t){Vu.add(t,e)}},Vy=function(e){return function(t){Vu.remove(t,e)}},qy=function(e){return function(t){zy.remove(t,e)}},$y=function(e){return function(t){return Vu.has(t,e)}},Ky={addClass:Wy,removeClass:Vy,removeClasses:qy,hasClass:$y},Gy=function(e){var t=Ky.addClass(e.selected()),n=Ky.removeClasses([e.selected(),e.lastSelected(),e.firstSelected()]),r=function(t){var r=or.descendants(t,e.selectedSelector());Q(r,n)};return{clear:r,selectRange:function(n,o,i,a){r(n),Q(o,t),Vu.add(i,e.firstSelected()),Vu.add(a,e.lastSelected())},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}},Xy=function(e){var t=function(t){zn.remove(t,e.selected()),zn.remove(t,e.firstSelected()),zn.remove(t,e.lastSelected())},n=function(t){zn.set(t,e.selected(),"1")},r=function(n){var r=or.descendants(n,e.selectedSelector());Q(r,t)};return{clear:r,selectRange:function(t,o,i,a){r(t),Q(o,n),zn.set(i,e.firstSelected(),"1"),zn.set(a,e.lastSelected(),"1")},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}},Yy={byClass:Gy,byAttr:Xy},Jy=function(e){return!1===Vu.has(Ve.fromDom(e.target),"ephox-snooker-resizer-bar")},Qy=function(e){return{get:function(){var t=yf(e);return xa.retrieve(t,ka.selectedSelector()).fold(function(){return void 0===e.selection.getStart()?Ea.none():Ea.single(e.selection)},function(e){return Ea.multiple(e)})}}},Zy=sh.each,ew=function(e){function t(t){return function(){e.execCommand(t)}}var n=[];Zy("inserttable tableprops deletetable | cell row column".split(" "),function(t){"|"===t?n.push({text:"-"}):n.push(e.menuItems[t])}),e.addButton("table",{type:"menubutton",title:"Table",menu:n}),e.addButton("tableprops",{title:"Table properties",onclick:t("mceTableProps"),icon:"table"}),e.addButton("tabledelete",{title:"Delete table",onclick:t("mceTableDelete")}),e.addButton("tablecellprops",{title:"Cell properties",onclick:t("mceTableCellProps")}),e.addButton("tablemergecells",{title:"Merge cells",onclick:t("mceTableMergeCells")}),e.addButton("tablesplitcells",{title:"Split cell",onclick:t("mceTableSplitCells")}),e.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:t("mceTableInsertRowBefore")}),e.addButton("tableinsertrowafter",{title:"Insert row after",onclick:t("mceTableInsertRowAfter")}),e.addButton("tabledeleterow",{title:"Delete row",onclick:t("mceTableDeleteRow")}),e.addButton("tablerowprops",{title:"Row properties",onclick:t("mceTableRowProps")}),e.addButton("tablecutrow",{title:"Cut row",onclick:t("mceTableCutRow")}),e.addButton("tablecopyrow",{title:"Copy row",onclick:t("mceTableCopyRow")}),e.addButton("tablepasterowbefore",{title:"Paste row before",onclick:t("mceTablePasteRowBefore")}),e.addButton("tablepasterowafter",{title:"Paste row after",onclick:t("mceTablePasteRowAfter")}),e.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:t("mceTableInsertColBefore")}),e.addButton("tableinsertcolafter",{title:"Insert column after",onclick:t("mceTableInsertColAfter")}),e.addButton("tabledeletecol",{title:"Delete column",onclick:t("mceTableDeleteCol")})},tw=function(e){var t=function(t){return e.dom.is(t,"table")&&e.getBody().contains(t)},n=Zf(e);n.length>0&&e.addContextToolbar(t,n.join(" "))},nw={addButtons:ew,addToolbars:tw},rw=function(e,t){function n(t){return function(){e.execCommand(t)}}var r=H.none(),o=[],i=[],a=[],s=[],l=function(e){e.disabled(!0)},u=function(e){e.disabled(!1)},c=function(){var e=this;o.push(e),r.fold(function(){l(e)},function(t){u(e)})},d=function(){var e=this;i.push(e),r.fold(function(){l(e)},function(t){u(e)})},f=function(){var e=this;a.push(e),r.fold(function(){l(e)},function(t){e.disabled(t.mergable().isNone())})},h=function(){var e=this;s.push(e),r.fold(function(){l(e)},function(t){e.disabled(t.unmergable().isNone())})},p=function(){r.fold(function(){Q(o,l),Q(i,l),Q(a,l),Q(s,l)},function(e){Q(o,u),Q(i,u),Q(a,function(t){t.disabled(e.mergable().isNone())}),Q(s,function(t){t.disabled(e.unmergable().isNone())})})};e.on("init",function(){e.on("nodechange",function(n){var o=H.from(e.dom.getParent(e.selection.getStart(),"th,td"));r=o.bind(function(e){var n=Ve.fromDom(e);return Rr.table(n).map(function(e){return Ba.forMenu(t,e,n)})}),p()})});var m=function(e,t,n,r){var o,i,a,s,l,u=r.getEl().getElementsByTagName("table")[0],c=r.isRtl()||"tl-tr"===r.parent().rel;for(u.nextSibling.innerHTML=t+1+" x "+(n+1),c&&(t=9-t),i=0;i<10;i++)for(o=0;o<10;o++)s=u.rows[i].childNodes[o].firstChild,l=(c?o>=t:o<=t)&&i<=n,e.dom.toggleClass(s,"mce-active",l),l&&(a=s);return a.parentNode},g=!1===Vf(e)?{text:"Table",icon:"table",context:"table",onclick:n("mceInsertTable")}:{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(t){t.aria&&(this.parent().hideAll(),t.stopImmediatePropagation(),e.execCommand("mceInsertTable"))},onshow:function(){m(e,0,0,this.menu.items()[0])},onhide:function(){var t=this.menu.items()[0].getEl().getElementsByTagName("a");e.dom.removeClass(t,"mce-active"),e.dom.addClass(t[0],"mce-active")},menu:[{type:"container",html:function(){var e="";e='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var t=0;t<10;t++){e+="<tr>";for(var n=0;n<10;n++)e+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*t+n)+'" href="#" data-mce-x="'+n+'" data-mce-y="'+t+'"></a></td>';e+="</tr>"}return e+="</table>",e+='<div class="mce-text-center" role="presentation">1 x 1</div>'}(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(t){var n,r,o=t.target;"A"===o.tagName.toUpperCase()&&(n=parseInt(o.getAttribute("data-mce-x"),10),r=parseInt(o.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"===this.parent().rel)&&(n=9-n),n===this.lastX&&r===this.lastY||(m(e,n,r,t.control),this.lastX=n,this.lastY=r))},onclick:function(t){var n=this;"A"===t.target.tagName.toUpperCase()&&(t.preventDefault(),t.stopPropagation(),n.parent().cancel(),e.undoManager.transact(function(){Kh.insert(e,n.lastX+1,n.lastY+1)}),e.addVisual())}}]},v={text:"Table properties",context:"table",onPostRender:c,onclick:n("mceTableProps")},b={text:"Delete table",context:"table",onPostRender:c,cmd:"mceTableDelete"},y={text:"Row",context:"table",menu:[{text:"Insert row before",onclick:n("mceTableInsertRowBefore"),onPostRender:d},{text:"Insert row after",onclick:n("mceTableInsertRowAfter"),onPostRender:d},{text:"Delete row",onclick:n("mceTableDeleteRow"),onPostRender:d},{text:"Row properties",onclick:n("mceTableRowProps"),onPostRender:d},{text:"-"},{text:"Cut row",onclick:n("mceTableCutRow"),onPostRender:d},{text:"Copy row",onclick:n("mceTableCopyRow"),onPostRender:d},{text:"Paste row before",onclick:n("mceTablePasteRowBefore"),onPostRender:d},{text:"Paste row after",onclick:n("mceTablePasteRowAfter"),onPostRender:d}]},w={text:"Column",context:"table",menu:[{text:"Insert column before",onclick:n("mceTableInsertColBefore"),onPostRender:d},{text:"Insert column after",onclick:n("mceTableInsertColAfter"),onPostRender:d},{text:"Delete column",onclick:n("mceTableDeleteCol"),onPostRender:d}]},x={separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:n("mceTableCellProps"),onPostRender:d},{text:"Merge cells",onclick:n("mceTableMergeCells"),onPostRender:f},{text:"Split cell",onclick:n("mceTableSplitCells"),onPostRender:h}]};e.addMenuItem("inserttable",g),e.addMenuItem("tableprops",v),e.addMenuItem("deletetable",b),e.addMenuItem("row",y),e.addMenuItem("column",w),e.addMenuItem("cell",x)},ow={addMenuItems:rw},iw=function(e){return e.get().fold(function(){},function(e){return J(e,function(e){return e.dom()})})},aw=function(e,t){var n=J(e,Ve.fromDom);t.set(H.from(n))},sw=function(e,t){return{insertTable:function(t,n){return Kh.insert(e,t,n)},setClipboardRows:function(e){return aw(e,t)},getClipboardRows:function(){return iw(t)}}};k.add("table",x)}()}()},3339:function(e,t,n){n(3340)},3340:function(e,t){!function(){!function(){"use strict";function e(){}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(e,t){var n;return e.dom.getParents(e.selection.getStart(),function(e){var r;(r=e.style["forecolor"===t?"color":"background-color"])&&(n=r)}),n},r=function(e){var t,n=[];for(t=0;t<e.length;t+=2)n.push({text:e[t+1],color:"#"+e[t]});return n},o=function(e,t,n){e.undoManager.transact(function(){e.focus(),e.formatter.apply(t,{value:n}),e.nodeChanged()})},i=function(e,t){e.undoManager.transact(function(){e.focus(),e.formatter.remove(t,{value:null},null,!0),e.nodeChanged()})},a={getCurrentColor:n,mapColors:r,applyFormat:o,removeFormat:i},s=function(e){e.addCommand("mceApplyTextcolor",function(t,n){a.applyFormat(e,t,n)}),e.addCommand("mceRemoveTextcolor",function(t){a.removeFormat(e,t)})},l={register:s},u=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),c=tinymce.util.Tools.resolve("tinymce.util.Tools"),d=["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"],f=function(e){return e.getParam("textcolor_map",d)},h=function(e){return e.getParam("forecolor_map",f(e))},p=function(e){return e.getParam("backcolor_map",f(e))},m=function(e){return e.getParam("textcolor_rows",5)},g=function(e){return e.getParam("textcolor_cols",8)},v=function(e){return e.getParam("forecolor_rows",m(e))},b=function(e){return e.getParam("backcolor_rows",m(e))},y=function(e){return e.getParam("forecolor_cols",g(e))},w=function(e){return e.getParam("backcolor_cols",g(e))},x=function(e){return e.getParam("color_picker_callback",null)},C=function(e){return"function"==typeof x(e)},k={getForeColorMap:h,getBackColorMap:p,getForeColorRows:v,getBackColorRows:b,getForeColorCols:y,getBackColorCols:w,getColorPickerCallback:x,hasColorPicker:C},N=tinymce.util.Tools.resolve("tinymce.util.I18n"),_=function(e,t,n,r){var o,i,s,l,c,d,f,h=0,p=u.DOM.uniqueId("mcearia"),m=function(e,t){var n="transparent"===e;return'<td class="mce-grid-cell'+(n?" mce-colorbtn-trans":"")+'"><div id="'+p+"-"+h+++'" data-mce-color="'+(e||"")+'" role="option" tabIndex="-1" style="'+(e?"background-color: "+e:"")+'" title="'+N.translate(t)+'">'+(n?"&#215;":"")+"</div></td>"};for(o=a.mapColors(n),o.push({text:N.translate("No color"),color:"transparent"}),s='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>',l=o.length-1,d=0;d<t;d++){for(s+="<tr>",c=0;c<e;c++)f=d*e+c,f>l?s+="<td></td>":(i=o[f],s+=m(i.color,i.text));s+="</tr>"}if(r){for(s+='<tr><td colspan="'+e+'" class="mce-custom-color-btn"><div id="'+p+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+p+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+N.translate("Custom...")+"</button></div></td></tr>",s+="<tr>",c=0;c<e;c++)s+=m("","Custom color");s+="</tr>"}return s+="</tbody></table>"},S={getHtml:_},T=function(e,t){e.style.background=t,e.setAttribute("data-mce-color",t)},E=function(e){return function(t){var n=t.control;n._color?e.execCommand("mceApplyTextcolor",n.settings.format,n._color):e.execCommand("mceRemoveTextcolor",n.settings.format)}},O=function(e,t){return function(n){var r,o=this.parent(),i=a.getCurrentColor(e,o.settings.format),s=function(t){e.execCommand("mceApplyTextcolor",o.settings.format,t),o.hidePanel(),o.color(t)};if(u.DOM.getParent(n.target,".mce-custom-color-btn")){o.hidePanel();k.getColorPickerCallback(e).call(e,function(e){var n,r,i,a=o.panel.getEl().getElementsByTagName("table")[0];for(n=c.map(a.rows[a.rows.length-1].childNodes,function(e){return e.firstChild}),i=0;i<n.length&&(r=n[i],r.getAttribute("data-mce-color"));i++);if(i===t)for(i=0;i<t-1;i++)T(n[i],n[i+1].getAttribute("data-mce-color"));T(r,e),s(e)},i)}r=n.target.getAttribute("data-mce-color"),r?(this.lastId&&u.DOM.get(this.lastId).setAttribute("aria-selected","false"),n.target.setAttribute("aria-selected",!0),this.lastId=n.target.id,"transparent"===r?function(){e.execCommand("mceRemoveTextcolor",o.settings.format),o.hidePanel(),o.resetColor()}():s(r)):null!==r&&o.hidePanel()}},A=function(e,t){return function(){var n=t?k.getForeColorCols(e):k.getBackColorCols(e),r=t?k.getForeColorRows(e):k.getBackColorRows(e),o=t?k.getForeColorMap(e):k.getBackColorMap(e),i=k.hasColorPicker(e);return S.getHtml(n,r,o,i)}},D=function(e){e.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{role:"application",ariaRemember:!0,html:A(e,!0),onclick:O(e,k.getForeColorCols(e))},onclick:E(e)}),e.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{role:"application",ariaRemember:!0,html:A(e,!1),onclick:O(e,k.getBackColorCols(e))},onclick:E(e)})},R={register:D};t.add("textcolor",function(e){l.register(e),R.register(e)})}()}()},3341:function(e,t,n){function r(e){return n(o(e))}function o(e){var t=i[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var i={"./lightgray/content.inline.min.css":2141,"./lightgray/content.min.css":2142,"./lightgray/content.mobile.min.css":2143,"./lightgray/fonts/tinymce-mobile.woff":2144,"./lightgray/fonts/tinymce-small.eot":2145,"./lightgray/fonts/tinymce-small.svg":2146,"./lightgray/fonts/tinymce-small.ttf":2147,"./lightgray/fonts/tinymce-small.woff":2148,"./lightgray/fonts/tinymce.eot":2149,"./lightgray/fonts/tinymce.svg":2150,"./lightgray/fonts/tinymce.ttf":2151,"./lightgray/fonts/tinymce.woff":2152,"./lightgray/img/anchor.gif":2153,"./lightgray/img/loader.gif":2154,"./lightgray/img/object.gif":2155,"./lightgray/img/trans.gif":2156,"./lightgray/skin.min.css":2157,"./lightgray/skin.mobile.min.css":2158};r.keys=function(){return Object.keys(i)},r.resolve=o,e.exports=r,r.id=3341},3342:function(e,t){!function(){!function(){"use strict";function e(e,t,n){var r,o,i,a,s,l,u,c,d,f;return d=Gt(),o=Vt.getPos(t,Re.getUiContainer(e)),i=o.x,a=o.y,$t(e)&&qt(document.body)&&(i-=d.x,a-=d.y),r=e.getEl(),f=Vt.getSize(r),s=f.width,l=f.height,f=Vt.getSize(t),u=f.width,c=f.height,n=(n||"").split(""),"b"===n[0]&&(a+=c),"r"===n[1]&&(i+=u),"c"===n[0]&&(a+=Math.round(c/2)),"c"===n[1]&&(i+=Math.round(u/2)),"b"===n[3]&&(a-=l),"r"===n[4]&&(i-=s),"c"===n[3]&&(a-=Math.round(l/2)),"c"===n[4]&&(i-=Math.round(s/2)),{x:i,y:a,w:s,h:l}}function t(){}function n(e){this.cls=[],this.cls._map={},this.onchange=e||t,this.prefix=""}function r(e){for(var t,n=[],r=e.length;r--;)t=e[r],t.__checked||(n.push(t),t.__checked=1);for(r=n.length;r--;)delete n[r].__checked;return n}function o(e){return e.nodeType>0}function i(e,t){var n,r;if(e===t)return!0;if(null===e||null===t)return e===t;if("object"!=typeof e||"object"!=typeof t)return e===t;if(I.isArray(t)){if(e.length!==t.length)return!1;for(n=e.length;n--;)if(!i(e[n],t[n]))return!1}if(o(e)||o(t))return e===t;r={};for(n in t){if(!i(e[n],t[n]))return!1;r[n]=!0}for(n in e)if(!r[n]&&!i(e[n],t[n]))return!1;return!0}function a(e){return e._eventDispatcher||(e._eventDispatcher=new Qt({scope:e,toggleEvent:function(t,n){n&&Qt.isNative(t)&&(e._nativeEvents||(e._nativeEvents={}),e._nativeEvents[t]=!0,e.state.get("rendered")&&s(e))}})),e._eventDispatcher}function s(e){function t(t){var n=e.getParentCtrl(t.target);n&&n.fire(t.type,t)}function n(){var e=l._lastHoverCtrl;e&&(e.fire("mouseleave",{target:e.getEl()}),e.parents().each(function(e){e.fire("mouseleave",{target:e.getEl()})}),l._lastHoverCtrl=null)}function r(t){var n,r,o,i=e.getParentCtrl(t.target),a=l._lastHoverCtrl,s=0;if(i!==a){if(l._lastHoverCtrl=i,r=i.parents().toArray().reverse(),r.push(i),a){for(o=a.parents().toArray().reverse(),o.push(a),s=0;s<o.length&&r[s]===o[s];s++);for(n=o.length-1;n>=s;n--)a=o[n],a.fire("mouseleave",{target:a.getEl()})}for(n=s;n<r.length;n++)i=r[n],i.fire("mouseenter",{target:i.getEl()})}}function o(t){t.preventDefault(),"mousewheel"===t.type?(t.deltaY=-.025*t.wheelDelta,t.wheelDeltaX&&(t.deltaX=-.025*t.wheelDeltaX)):(t.deltaX=0,t.deltaY=t.detail),t=e.fire("wheel",t)}var i,a,s,l,u,c;if(u=e._nativeEvents){for(s=e.parents().toArray(),s.unshift(e),i=0,a=s.length;!l&&i<a;i++)l=s[i]._eventsRoot;for(l||(l=s[s.length-1]||e),e._eventsRoot=l,a=i,i=0;i<a;i++)s[i]._eventsRoot=l;var d=l._delegates;d||(d=l._delegates={});for(c in u){if(!u)return!1;"wheel"!==c||yn?("mouseenter"===c||"mouseleave"===c?l._hasMouseEnter||(zt(l.getEl()).on("mouseleave",n).on("mouseover",r),l._hasMouseEnter=1):d[c]||(zt(l.getEl()).on(c,t),d[c]=!0),u[c]=!1):bn?zt(e.getEl()).on("mousewheel",o):zt(e.getEl()).on("DOMMouseScroll",o)}}}function l(e){function t(e){return e&&1===e.nodeType}function n(e){return e=e||y,t(e)?e.getAttribute("role"):null}function r(e){for(var t,r=e||y;r=r.parentNode;)if(t=n(r))return t}function o(e){var n=y;if(t(n))return n.getAttribute("aria-"+e)}function i(e){var t=e.tagName.toUpperCase();return"INPUT"===t||"TEXTAREA"===t||"SELECT"===t}function a(e){return!(!i(e)||e.hidden)||(!!Tn(e)||!!/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(n(e)))}function s(e){function t(e){if(1===e.nodeType&&"none"!==e.style.display&&!e.disabled){a(e)&&n.push(e);for(var r=0;r<e.childNodes.length;r++)t(e.childNodes[r])}}var n=[];return t(e||x.getEl()),n}function l(e){var t,n;e=e||w,n=e.parents().toArray(),n.unshift(e);for(var r=0;r<n.length&&(t=n[r],!t.settings.ariaRoot);r++);return t}function u(e){var t=l(e),n=s(t.getEl());t.settings.ariaRemember&&"lastAriaIndex"in t?c(t.lastAriaIndex,n):c(0,n)}function c(e,t){return e<0?e=t.length-1:e>=t.length&&(e=0),t[e]&&t[e].focus(),e}function d(e,t){var n=-1,r=l();t=t||s(r.getEl());for(var o=0;o<t.length;o++)t[o]===y&&(n=o);n+=e,r.lastAriaIndex=c(n,t)}function f(){"tablist"===r()?d(-1,s(y.parentNode)):w.parent().submenu?v():d(-1)}function h(){var e=n(),t=r();"tablist"===t?d(1,s(y.parentNode)):"menuitem"===e&&"menu"===t&&o("haspopup")?b():d(1)}function p(){d(-1)}function m(){var e=n(),t=r();"menuitem"===e&&"menubar"===t?b():"button"===e&&o("haspopup")?b({key:"down"}):d(1)}function g(e){if("tablist"===r()){var t=s(w.getEl("body"))[0];t&&t.focus()}else d(e.shiftKey?-1:1)}function v(){w.fire("cancel")}function b(e){e=e||{},w.fire("click",{target:y,aria:e})}var y,w,x=e.root;try{y=document.activeElement}catch(e){y=document.body}return w=x.getParentCtrl(y),x.on("keydown",function(e){function t(e,t){i(y)||Tn(y)||"slider"!==n(y)&&!1!==t(e)&&e.preventDefault()}if(!e.isDefaultPrevented())switch(e.keyCode){case 37:t(e,f);break;case 39:t(e,h);break;case 38:t(e,p);break;case 40:t(e,m);break;case 27:v();break;case 14:case 13:case 32:t(e,b);break;case 9:g(e),e.preventDefault()}}),x.on("focusin",function(e){y=e.target,w=e.control}),{focusFirst:u}}function u(e){var t,n,r,o,i,a,s,l,u=Math.max;return t=e.documentElement,n=e.body,r=u(t.scrollWidth,n.scrollWidth),o=u(t.clientWidth,n.clientWidth),i=u(t.offsetWidth,n.offsetWidth),a=u(t.scrollHeight,n.scrollHeight),s=u(t.clientHeight,n.clientHeight),l=u(t.offsetHeight,n.offsetHeight),{width:r<i?o:r,height:a<l?s:a}}function c(e){var t,n;if(e.changedTouches)for(t="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<t.length;n++)e[t[n]]=e.changedTouches[0][t[n]]}function d(e,t){var n,r,o,i,a,s,l,d=t.document||document;t=t||{};var f=d.getElementById(t.handle||e);o=function(e){var o,h,p=u(d);c(e),e.preventDefault(),r=e.button,o=f,s=e.screenX,l=e.screenY,h=window.getComputedStyle?window.getComputedStyle(o,null).getPropertyValue("cursor"):o.runtimeStyle.cursor,n=zt("<div></div>").css({position:"absolute",top:0,left:0,width:p.width,height:p.height,zIndex:2147483647,opacity:1e-4,cursor:h}).appendTo(d.body),zt(d).on("mousemove touchmove",a).on("mouseup touchend",i),t.start(e)},a=function(e){if(c(e),e.button!==r)return i(e);e.deltaX=e.screenX-s,e.deltaY=e.screenY-l,e.preventDefault(),t.drag(e)},i=function(e){c(e),zt(d).off("mousemove touchmove",a).off("mouseup touchend",i),n.remove(),t.stop&&t.stop(e)},this.destroy=function(){zt(f).off()},zt(f).on("mousedown touchstart",o)}function f(e,t){for(;e;){if(e===t)return!0;e=e.parent()}}function h(e){for(var t=Mn.length;t--;){var n=Mn[t],r=n.getParentCtrl(e.target);if(n.settings.autohide){if(r&&(f(r,n)||n.parent()===r))continue;e=n.fire("autohide",{target:e.target}),e.isDefaultPrevented()||n.hide()}}}function p(){Cn||(Cn=function(e){2!==e.button&&h(e)},zt(document).on("click touchstart",Cn))}function m(){kn||(kn=function(){var e;for(e=Mn.length;e--;)v(Mn[e])},zt(window).on("scroll",kn))}function g(){if(!Nn){var e=document.documentElement,t=e.clientWidth,n=e.clientHeight;Nn=function(){document.all&&t===e.clientWidth&&n===e.clientHeight||(t=e.clientWidth,n=e.clientHeight,Ln.hideAll())},zt(window).on("resize",Nn)}}function v(e){function t(t,n){for(var r,o=0;o<Mn.length;o++)if(Mn[o]!==e)for(r=Mn[o].parent();r&&(r=r.parent());)r===e&&Mn[o].fixed(t).moveBy(0,n).repaint()}var n=Vt.getViewPort().y;e.settings.autofix&&(e.state.get("fixed")?e._autoFixY>n&&(e.fixed(!1).layoutRect({y:e._autoFixY}).repaint(),t(!1,e._autoFixY-n)):(e._autoFixY=e.layoutRect().y,e._autoFixY<n&&(e.fixed(!0).layoutRect({y:0}).repaint(),t(!0,n-e._autoFixY))))}function b(e,t){var n,r,o=Ln.zIndex||65535;if(e)Pn.push(t);else for(n=Pn.length;n--;)Pn[n]===t&&Pn.splice(n,1);if(Pn.length)for(n=0;n<Pn.length;n++)Pn[n].modal&&(o++,r=Pn[n]),Pn[n].getEl().style.zIndex=o,Pn[n].zIndex=o,o++;var i=zt("#"+t.classPrefix+"modal-block",t.getContainerElm())[0];r?zt(i).css("z-index",r.zIndex-1):i&&(i.parentNode.removeChild(i),_n=!1),Ln.currentZIndex=o}function y(e){var t;for(t=Mn.length;t--;)Mn[t]===e&&Mn.splice(t,1);for(t=Pn.length;t--;)Pn[t]===e&&Pn.splice(t,1)}function w(e,t){var n,r,o=this,i=Sn.classPrefix;o.show=function(a,s){function l(){n&&(zt(e).append('<div class="'+i+"throbber"+(t?" "+i+"throbber-inline":"")+'"></div>'),s&&s())}return o.hide(),n=!0,a?r=pe.setTimeout(l,a):l(),o},o.hide=function(){var t=e.lastChild;return pe.clearTimeout(r),t&&-1!==t.className.indexOf("throbber")&&t.parentNode.removeChild(t),n=!1,o}}function x(e){var t=function(e){return e.inline?e.getElement():e.getContentAreaContainer()},n=function(){var n=t(e);return Vt.getSize(n).width},r=function(e){Qe(e,function(e){e.moveTo(0,0)})},o=function(n){if(n.length>0){var r=n.slice(0,1)[0],o=t(e);r.moveRel(o,"tc-tc"),Qe(n,function(e,t){t>0&&e.moveRel(n[t-1].getEl(),"bc-tc")})}},i=function(e){r(e),o(e)};return{open:function(e,t){var r=I.extend(e,{maxWidth:n()}),o=new Kn(r);return o.args=r,r.timeout>0&&(o.timer=setTimeout(function(){o.close(),t()},r.timeout)),o.on("close",function(){t()}),o.renderTo(),o},close:function(e){e.close()},reposition:i,getArgs:function(e){return e.args}}}function C(e){var t,n=zt("meta[name=viewport]")[0];!1!==kt.overrideViewPort&&(n||(n=document.createElement("meta"),n.setAttribute("name","viewport"),document.getElementsByTagName("head")[0].appendChild(n)),t=n.getAttribute("content"),t&&void 0!==Xn&&(Xn=t),n.setAttribute("content",e?"width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0":Xn))}function k(e,t){N()&&!1===t&&zt([document.documentElement,document.body]).removeClass(e+"fullscreen")}function N(){for(var e=0;e<Gn.length;e++)if(Gn[e]._fullscreen)return!0;return!1}function _(e){return{open:function(e,t,n){var r;return e.title=e.title||" ",e.url=e.url||e.file,e.url&&(e.width=parseInt(e.width||320,10),e.height=parseInt(e.height||240,10)),e.body&&(e.items={defaults:e.defaults,type:e.bodyType||"form",items:e.body,data:e.data,callbacks:e.commands}),e.url||e.buttons||(e.buttons=[{text:"Ok",subtype:"primary",onclick:function(){r.find("form")[0].submit()}},{text:"Cancel",onclick:function(){r.close()}}]),r=new Yn(e),r.on("close",function(){n(r)}),e.data&&r.on("postRender",function(){this.find("*").each(function(t){var n=t.name();n in e.data&&t.value(e.data[n])})}),r.features=e||{},r.params=t||{},r=r.renderTo(document.body).reflow()},alert:function(e,t,n){var r;return r=Jn.alert(e,function(){t()}),r.on("close",function(){n(r)}),r},confirm:function(e,t,n){var r;return r=Jn.confirm(e,function(e){t(e)}),r.on("close",function(){n(r)}),r},close:function(e){e.close()},getParams:function(e){return e.params},setParams:function(e,t){e.params=t}}}function S(e,t,n){var r=e.isiOS()&&!0===/ipad/i.test(n),o=e.isiOS()&&!r,i=e.isAndroid()&&3===e.version.major,a=e.isAndroid()&&4===e.version.major,s=r||i||a&&!0===/mobile/i.test(n),l=e.isiOS()||e.isAndroid(),u=l&&!s,c=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:ve(r),isiPhone:ve(o),isTablet:ve(s),isPhone:ve(u),isTouch:ve(l),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:ve(c)}}function T(e,t,n,r,o){return e(n,r)?Te.some(n):$e(o)&&o(n)?Te.none():t(n,r,o)}function E(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1}function O(e){var t="";if(e)for(var n=0;n<e.length;n++)t+='<option value="'+e[n]+'">'+e[n]+"</option>";return t}function A(e,t,n){return e<t&&(e=t),e>n&&(e=n),e}function D(e,t,n){e.setAttribute("aria-"+t,n)}function R(e,t){var n,r,o,i,a,s;"v"===e.settings.orientation?(i="top",o="height",r="h"):(i="left",o="width",r="w"),s=e.getEl("handle"),n=(e.layoutRect()[r]||100)-Vt.getSize(s)[o],a=n*((t-e._minValue)/(e._maxValue-e._minValue))+"px",s.style[i]=a,s.style.height=e.layoutRect().h+"px",D(s,"valuenow",t),D(s,"valuetext",""+e.settings.previewFilter(t)),D(s,"valuemin",e._minValue),D(s,"valuemax",e._maxValue)}function M(){}var P=tinymce.util.Tools.resolve("tinymce.ThemeManager"),L=tinymce.util.Tools.resolve("tinymce.EditorManager"),I=tinymce.util.Tools.resolve("tinymce.util.Tools"),j=function(e){return e.getParam("branding",!0,"boolean")},B=function(e){return!1!==F(e)},F=function(e){return e.getParam("menubar")},H=function(e){return e.getParam("statusbar",!0,"boolean")},U=function(e){return e.getParam("toolbar_items_size")},z=function(e){return e.getParam("readonly",!1,"boolean")},W=function(e){return e.getParam("fixed_toolbar_container")},V=function(e){return e.getParam("inline_toolbar_position_handler")},q=function(e){return e.getParam("menu")},$=function(e){return e.getParam("removed_menuitems","")},K=function(e){return e.getParam("min_width",100,"number")},G=function(e){return e.getParam("min_height",100,"number")},X=function(e){return e.getParam("max_width",65535,"number")},Y=function(e){return e.getParam("max_height",65535,"number")},J=function(e){return!1===e.settings.skin},Q=function(e){return e.getParam("inline",!1,"boolean")},Z=function(e){var t=e.getParam("resize","vertical");return!1===t?"none":"both"===t?"both":"vertical"},ee=function(e){var t=e.settings,n=t.skin,r=t.skin_url;if(!1!==n){var o=n||"lightgray";r=r?e.documentBaseURI.toAbsolute(r):L.baseURL+"/skins/"+o}return r},te=function(e,t){for(var n=[],r=1;r<10;r++){var o=e["toolbar"+r];if(!o)break;n.push(o)}var i=e.toolbar?[e.toolbar]:[t];return n.length>0?n:i},ne=function(e){var t=e.getParam("toolbar");return!1===t?[]:I.isArray(t)?I.grep(t,function(e){return e.length>0}):te(e.settings,"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image")},re=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),oe=tinymce.util.Tools.resolve("tinymce.ui.Factory"),ie=tinymce.util.Tools.resolve("tinymce.util.I18n"),ae=function(e){return e.fire("SkinLoaded")},se=function(e){return e.fire("ResizeEditor")},le=function(e){return e.fire("BeforeRenderUI")},ue={fireSkinLoaded:ae,fireResizeEditor:se,fireBeforeRenderUI:le},ce=function(e,t){return function(){var n=e.find(t)[0];n&&n.focus(!0)}},de=function(e,t){e.shortcuts.add("Alt+F9","",ce(t,"menubar")),e.shortcuts.add("Alt+F10,F10","",ce(t,"toolbar")),e.shortcuts.add("Alt+F11","",ce(t,"elementpath")),t.on("cancel",function(){e.focus()})},fe={addKeys:de},he=tinymce.util.Tools.resolve("tinymce.geom.Rect"),pe=tinymce.util.Tools.resolve("tinymce.util.Delay"),me=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},ge=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(null,arguments))}},ve=function(e){return function(){return e}},be=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=new Array(arguments.length-1),o=1;o<arguments.length;o++)r[o-1]=arguments[o];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];var a=r.concat(o);return e.apply(null,a)}},ye=ve(!1),we=ve(!0),xe=ye,Ce=we,ke=function(){return Ne},Ne=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e},r=function(){},o=function(){return null},i=function(){},a={fold:function(e,t){return e()},is:xe,isSome:xe,isNone:Ce,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:o,getOrUndefined:i,or:n,orThunk:t,map:ke,ap:ke,each:r,bind:ke,flatten:ke,exists:xe,forall:Ce,filter:ke,equals:e,equals_:e,toArray:function(){return[]},toString:ve("none()")};return Object.freeze&&Object.freeze(a),a}(),_e=function(e){var t=function(){return e},n=function(){return i},r=function(t){return _e(t(e))},o=function(t){return t(e)},i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:Ce,isNone:xe,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:r,ap:function(t){return t.fold(ke,function(t){return _e(t(e))})},each:function(t){t(e)},bind:o,flatten:t,exists:o,forall:o,filter:function(t){return t(e)?i:Ne},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(xe,function(t){return n(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return i},Se=function(e){return null===e||void 0===e?Ne:_e(e)},Te={some:_e,none:ke,from:Se},Ee=function(e){var t=Ae(e);if(t&&"static"!==re.DOM.getStyle(t,"position",!0)){var n=re.DOM.getPos(t),r=t.scrollLeft-n.x,o=t.scrollTop-n.y;return Te.some({x:r,y:o})}return Te.none()},Oe=function(e,t){var n=re.DOM.select(e.settings.ui_container)[0];t.getRoot().uiContainer=n},Ae=function(e){return e?e.getRoot().uiContainer:null},De=function(e,t){return t.uiContainer=Ae(e)},Re={getUiContainerDelta:Ee,setUiContainer:Oe,getUiContainer:Ae,inheritUiContainer:De},Me=function(e,t,n){var r,o=[];if(t)return I.each(t.split(/[ ,]/),function(t){var i,a=function(){var n=e.selection;t.settings.stateSelector&&n.selectorChanged(t.settings.stateSelector,function(e){t.active(e)},!0),t.settings.disabledStateSelector&&n.selectorChanged(t.settings.disabledStateSelector,function(e){t.disabled(e)})};"|"===t?r=null:(r||(r={type:"buttongroup",items:[]},o.push(r)),e.buttons[t]&&(i=t,t=e.buttons[i],"function"==typeof t&&(t=t()),t.type=t.type||"button",t.size=n,t=oe.create(t),r.items.push(t),e.initialized?a():e.on("init",a)))}),{type:"toolbar",layout:"flow",items:o}},Pe=function(e,t){var n=[],r=function(r){r&&n.push(Me(e,r,t))};if(I.each(ne(e),function(e){r(e)}),n.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:n}},Le={createToolbar:Me,createToolbars:Pe},Ie=re.DOM,je=function(e){return{left:e.x,top:e.y,width:e.w,height:e.h,right:e.x+e.w,bottom:e.y+e.h}},Be=function(e){I.each(e.contextToolbars,function(e){e.panel&&e.panel.hide()})},Fe=function(e,t){e.moveTo(t.left,t.top)},He=function(e,t,n){t=t?t.substr(0,2):"",I.each({t:"down",b:"up"},function(r,o){e.classes.toggle("arrow-"+r,n(o,t.substr(0,1)))}),I.each({l:"left",r:"right"},function(r,o){e.classes.toggle("arrow-"+r,n(o,t.substr(1,1)))})},Ue=function(e,t,n,r,o,i){return i=je({x:t,y:n,w:i.w,h:i.h}),e&&(i=e({elementRect:je(r),contentAreaRect:je(o),panelRect:i})),i},ze=function(e){var t,n=function(){return e.contextToolbars||[]},r=function(t){var n,r,o;return n=Ie.getPos(e.getContentAreaContainer()),r=e.dom.getRect(t),o=e.dom.getRoot(),"BODY"===o.nodeName&&(r.x-=o.ownerDocument.documentElement.scrollLeft||o.scrollLeft,r.y-=o.ownerDocument.documentElement.scrollTop||o.scrollTop),r.x+=n.x,r.y+=n.y,r},o=function(t,n){var o,i,a,s,l,u,c,d,f=V(e);if(!e.removed){if(!t||!t.toolbar.panel)return void Be(e);c=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],l=t.toolbar.panel,n&&l.show(),a=r(t.element),i=Ie.getRect(l.getEl()),s=Ie.getRect(e.getContentAreaContainer()||e.getBody());var h=Re.getUiContainerDelta(l).getOr({x:0,y:0});if(a.x+=h.x,a.y+=h.y,i.x+=h.x,i.y+=h.y,s.x+=h.x,s.y+=h.y,d=25,"inline"!==Ie.getStyle(t.element,"display",!0)){var p=t.element.getBoundingClientRect();a.w=p.width,a.h=p.height}e.inline||(s.w=e.getDoc().documentElement.offsetWidth),e.selection.controlSelection.isResizable(t.element)&&a.w<d&&(a=he.inflate(a,0,8)),o=he.findBestRelativePosition(i,a,s,c),a=he.clamp(a,s),o?(u=he.relativePosition(i,a,o),Fe(l,Ue(f,u.x,u.y,a,s,i))):(s.h+=i.h,a=he.intersect(s,a),a?(o=he.findBestRelativePosition(i,a,s,["bc-tc","bl-tl","br-tr"]),o?(u=he.relativePosition(i,a,o),Fe(l,Ue(f,u.x,u.y,a,s,i))):Fe(l,Ue(f,a.x,a.y,a,s,i))):l.hide()),He(l,o,function(e,t){return e===t})}},i=function(t){return function(){var n=function(){e.selection&&o(u(e.selection.getNode()),t)};pe.requestAnimationFrame(n)}},a=function(n){if(!t){var r=i(!0),o=Re.getUiContainer(n);t=e.selection.getScrollContainer()||e.getWin(),Ie.bind(t,"scroll",r),Ie.bind(o,"scroll",r),e.on("remove",function(){Ie.unbind(t,"scroll",r),Ie.unbind(o,"scroll",r)})}},s=function(t){var n;if(t.toolbar.panel)return t.toolbar.panel.show(),void o(t);n=oe.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:Le.createToolbar(e,t.toolbar.items),oncancel:function(){e.focus()}}),Re.setUiContainer(e,n),a(n),t.toolbar.panel=n,n.renderTo().reflow(),o(t)},l=function(){I.each(n(),function(e){e.panel&&e.panel.hide()})},u=function(t){var r,o,i,a=n();for(i=e.$(t).parents().add(t),r=i.length-1;r>=0;r--)for(o=a.length-1;o>=0;o--)if(a[o].predicate(i[r]))return{toolbar:a[o],element:i[r]};return null};e.on("click keyup setContent ObjectResized",function(t){("setcontent"!==t.type||t.selection)&&pe.setEditorTimeout(e,function(){var t;t=u(e.selection.getNode()),t?(l(),s(t)):l()})}),e.on("blur hide contextmenu",l),e.on("ObjectResizeStart",function(){var t=u(e.selection.getNode());t&&t.toolbar.panel&&t.toolbar.panel.hide()}),e.on("ResizeEditor ResizeWindow",i(!0)),e.on("nodeChange",i(!1)),e.on("remove",function(){I.each(n(),function(e){e.panel&&e.panel.remove()}),e.contextToolbars={}}),e.shortcuts.add("ctrl+shift+e > ctrl+shift+p","",function(){var t=u(e.selection.getNode());t&&t.toolbar.panel&&t.toolbar.panel.items()[0].focus()})},We={addContextualToolbars:ze},Ve=function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t},qe=function(e){return function(t){return Ve(t)===e}},$e=qe("function"),Ke=qe("number"),Ge=function(){var e=Array.prototype.indexOf,t=function(t,n){return e.call(t,n)},n=function(e,t){return rt(e,t)};return void 0===e?n:t}(),Xe=function(e,t){var n=Ge(e,t);return-1===n?Te.none():Te.some(n)},Ye=function(e,t){return nt(e,t).isSome()},Je=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o,e)}return r},Qe=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n,e)}},Ze=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r,e)&&n.push(i)}return n},et=function(e,t,n){return Qe(e,function(e){n=t(n,e)}),n},tt=function(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];if(t(o,n,e))return Te.some(o)}return Te.none()},nt=function(e,t){for(var n=0,r=e.length;n<r;n++){if(t(e[n],n,e))return Te.some(n)}return Te.none()},rt=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},ot=Array.prototype.push,it=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!Array.prototype.isPrototypeOf(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);ot.apply(t,e[n])}return t},at=Array.prototype.slice,st=function(e){var t=at.call(e,0);return t.reverse(),t},lt=($e(Array.from)&&Array.from,{file:{title:"File",items:"newdocument restoredraft | preview | print"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen"},insert:{title:"Insert",items:"image link media template codesample inserttable | charmap hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | blockformats align | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code"},table:{title:"Table"},help:{title:"Help"}}),ut=function(){return{name:"|",item:{text:"|"}}},ct=function(e,t){var n=t?{name:e,item:t}:null;return"|"===e?ut():n},dt=function(e,t){return nt(e,function(e){return e.name===t}).isSome()},ft=function(e){return e&&"|"===e.item.text},ht=function(e,t){var n=Ze(e,function(e){return!1===t.hasOwnProperty(e.name)}),r=Ze(n,function(e,t,n){return!ft(e)||!ft(n[t-1])});return Ze(r,function(e,t,n){return!ft(e)||t>0&&t<n.length-1})},pt=function(e,t,n,r){var o,i,a,s;return t?(i=t[r],s=!0):i=lt[r],i&&(o={text:i.title},a=[],I.each((i.items||"").split(/[ ,]/),function(t){var n=ct(t,e[t]);n&&a.push(n)}),s||I.each(e,function(e,t){e.context!==r||dt(a,t)||("before"===e.separator&&a.push(ut()),e.prependToContext?a.unshift(ct(t,e)):a.push(ct(t,e)),"after"===e.separator&&a.push(ut()))}),o.menu=Je(ht(a,n),function(e){return e.item}),!o.menu.length)?null:o},mt=function(e){var t,n=[],r=q(e);if(r)for(t in r)n.push(t);else for(t in lt)n.push(t);return n},gt=function(e){for(var t=[],n=mt(e),r=I.makeMap($(e).split(/[ ,]/)),o=F(e),i="string"==typeof o?o.split(/[ ,]/):n,a=0;a<i.length;a++){var s=i[a],l=pt(e.menuItems,q(e),r,s);l&&t.push(l)}return t},vt={createMenuButtons:gt},bt=re.DOM,yt=function(e){return{width:e.clientWidth,height:e.clientHeight}},wt=function(e,t,n){var r,o,i,a;r=e.getContainer(),o=e.getContentAreaContainer().firstChild,i=yt(r),a=yt(o),null!==t&&(t=Math.max(K(e),t),t=Math.min(X(e),t),bt.setStyle(r,"width",t+(i.width-a.width)),bt.setStyle(o,"width",t)),n=Math.max(G(e),n),n=Math.min(Y(e),n),bt.setStyle(o,"height",n),ue.fireResizeEditor(e)},xt=function(e,t,n){var r=e.getContentAreaContainer();wt(e,r.clientWidth+t,r.clientHeight+n)},Ct={resizeTo:wt,resizeBy:xt},kt=tinymce.util.Tools.resolve("tinymce.Env"),Nt=function(e){return{element:function(){return e}}},_t=function(e,t,n){var r=e.settings[n];r&&r(Nt(t.getEl("body")))},St=function(e,t,n){I.each(n,function(n){var r=t.items().filter("#"+n.name)[0];r&&r.visible()&&n.name!==e&&(_t(n,r,"onhide"),r.visible(!1))})},Tt=function(e){e.items().each(function(e){e.active(!1)})},Et=function(e,t){return I.grep(e,function(e){return e.name===t})[0]},Ot=function(e,t,n){return function(r){var o=r.control,i=o.parents().filter("panel")[0],a=i.find("#"+t)[0],s=Et(n,t);St(t,i,n),Tt(o.parent()),a&&a.visible()?(_t(s,a,"onhide"),a.hide(),o.active(!1)):(a?(a.show(),_t(s,a,"onshow")):(a=oe.create({type:"container",name:t,layout:"stack",classes:"sidebar-panel",html:""}),i.prepend(a),_t(s,a,"onrender"),_t(s,a,"onshow")),o.active(!0)),ue.fireResizeEditor(e)}},At=function(){return!kt.ie||kt.ie>=11},Dt=function(e){return!(!At()||!e.sidebars)&&e.sidebars.length>0},Rt=function(e){return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:I.map(e.sidebars,function(t){var n=t.settings;return{type:"button",icon:n.icon,image:n.image,tooltip:n.tooltip,onclick:Ot(e,t.name,e.sidebars)}})}]}},Mt={hasSidebar:Dt,createSidebar:Rt},Pt=function(e){var t=function(){e._skinLoaded=!0,ue.fireSkinLoaded(e)};return function(){e.initialized?t():e.on("init",t)}},Lt={fireSkinLoaded:Pt},It=re.DOM,jt=function(e){return function(t){e.find("*").disabled("readonly"===t.mode)}},Bt=function(e){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:e,html:""}},Ft=function(e){return{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[Bt("0"),Mt.createSidebar(e)]}},Ht=function(e,t,n){var r,o,i;if(!1===J(e)&&n.skinUiCss?It.styleSheetLoader.load(n.skinUiCss,Lt.fireSkinLoaded(e)):Lt.fireSkinLoaded(e)(),r=t.panel=oe.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[{type:"container",classes:"top-part",items:[!1===B(e)?null:{type:"menubar",border:"0 0 1 0",items:vt.createMenuButtons(e)},Le.createToolbars(e,U(e))]},Mt.hasSidebar(e)?Ft(e):Bt("1 0 0 0")]}),Re.setUiContainer(e,r),"none"!==Z(e)&&(o={type:"resizehandle",direction:Z(e),onResizeStart:function(){var t=e.getContentAreaContainer().firstChild;i={width:t.clientWidth,height:t.clientHeight}},onResize:function(t){"both"===Z(e)?Ct.resizeTo(e,i.width+t.deltaX,i.height+t.deltaY):Ct.resizeTo(e,null,i.height+t.deltaY)}}),H(e)){var a=ie.translate(["Powered by {0}",'<a href="https://www.tinymce.com/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce" rel="noopener" target="_blank" role="presentation" tabindex="-1">tinymce</a>']),s=j(e)?{type:"label",classes:"branding",html:" "+a}:null;r.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:e},o,s]})}return ue.fireBeforeRenderUI(e),e.on("SwitchMode",jt(r)),r.renderBefore(n.targetNode).reflow(),z(e)&&e.setMode("readonly"),n.width&&It.setStyle(r.getEl(),"width",n.width),e.on("remove",function(){r.remove(),r=null}),fe.addKeys(e,r),We.addContextualToolbars(e),{iframeContainer:r.find("#iframe")[0].getEl(),editorContainer:r.getEl()}},Ut={render:Ht},zt=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),Wt=0,Vt={id:function(){return"mceu_"+Wt++},create:function(e,t,n){var r=document.createElement(e);return re.DOM.setAttribs(r,t),"string"==typeof n?r.innerHTML=n:I.each(n,function(e){e.nodeType&&r.appendChild(e)}),r},createFragment:function(e){return re.DOM.createFragment(e)},getWindowSize:function(){return re.DOM.getViewPort()},getSize:function(e){var t,n;if(e.getBoundingClientRect){var r=e.getBoundingClientRect();t=Math.max(r.width||r.right-r.left,e.offsetWidth),n=Math.max(r.height||r.bottom-r.bottom,e.offsetHeight)}else t=e.offsetWidth,n=e.offsetHeight;return{width:t,height:n}},getPos:function(e,t){return re.DOM.getPos(e,t||Vt.getContainer())},getContainer:function(){return kt.container?kt.container:document.body},getViewPort:function(e){return re.DOM.getViewPort(e)},get:function(e){return document.getElementById(e)},addClass:function(e,t){return re.DOM.addClass(e,t)},removeClass:function(e,t){return re.DOM.removeClass(e,t)},hasClass:function(e,t){return re.DOM.hasClass(e,t)},toggleClass:function(e,t,n){return re.DOM.toggleClass(e,t,n)},css:function(e,t,n){return re.DOM.setStyle(e,t,n)},getRuntimeStyle:function(e,t){return re.DOM.getStyle(e,t,!0)},on:function(e,t,n,r){return re.DOM.bind(e,t,n,r)},off:function(e,t,n){return re.DOM.unbind(e,t,n)},fire:function(e,t,n){return re.DOM.fire(e,t,n)},innerHtml:function(e,t){re.DOM.setHTML(e,t)}},qt=function(e){return"static"===Vt.getRuntimeStyle(e,"position")},$t=function(e){return e.state.get("fixed")},Kt=function(e){return{x:0,y:0,w:e.scrollWidth-1,h:e.scrollHeight-1}},Gt=function(){var e=window,t=Math.max(e.pageXOffset,document.body.scrollLeft,document.documentElement.scrollLeft),n=Math.max(e.pageYOffset,document.body.scrollTop,document.documentElement.scrollTop);return{x:t,y:n,w:t+(e.innerWidth||document.documentElement.clientWidth),h:n+(e.innerHeight||document.documentElement.clientHeight)}},Xt=function(e){var t=Re.getUiContainer(e);return t&&!$t(e)?Kt(t):Gt()},Yt={testMoveRel:function(t,n){for(var r=Xt(this),o=0;o<n.length;o++){var i=e(this,t,n[o]);if($t(this)){if(i.x>0&&i.x+i.w<r.w&&i.y>0&&i.y+i.h<r.h)return n[o]}else if(i.x>r.x&&i.x+i.w<r.w&&i.y>r.y&&i.y+i.h<r.h)return n[o]}return n[0]},moveRel:function(t,n){"string"!=typeof n&&(n=this.testMoveRel(t,n));var r=e(this,t,n);return this.moveTo(r.x,r.y)},moveBy:function(e,t){var n=this,r=n.layoutRect();return n.moveTo(r.x+e,r.y+t),n},moveTo:function(e,t){function n(e,t,n){return e<0?0:e+n>t?(e=t-n,e<0?0:e):e}var r=this;if(r.settings.constrainToViewport){var o=Xt(this),i=r.layoutRect();e=n(e,o.w,i.w),t=n(t,o.h,i.h)}var a=Re.getUiContainer(r);return a&&qt(a)&&!$t(r)&&(e-=a.scrollLeft,t-=a.scrollTop),a&&(e+=1,t+=1),r.state.get("rendered")?r.layoutRect({x:e,y:t}).repaint():(r.settings.x=e,r.settings.y=t),r.fire("move",{x:e,y:t}),r}},Jt=tinymce.util.Tools.resolve("tinymce.util.Class"),Qt=tinymce.util.Tools.resolve("tinymce.util.EventDispatcher"),Zt={parseBox:function(e){var t;if(e)return"number"==typeof e?(e=e||0,{top:e,left:e,bottom:e,right:e}):(e=e.split(" "),t=e.length,1===t?e[1]=e[2]=e[3]=e[0]:2===t?(e[2]=e[0],e[3]=e[1]):3===t&&(e[3]=e[1]),{top:parseInt(e[0],10)||0,right:parseInt(e[1],10)||0,bottom:parseInt(e[2],10)||0,left:parseInt(e[3],10)||0})},measureBox:function(e,t){function n(t){var n=e.ownerDocument.defaultView;if(n){var r=n.getComputedStyle(e,null);return r?(t=t.replace(/[A-Z]/g,function(e){return"-"+e}),r.getPropertyValue(t)):null}return e.currentStyle[t]}function r(e){var t=parseFloat(n(e));return isNaN(t)?0:t}return{top:r(t+"TopWidth"),right:r(t+"RightWidth"),bottom:r(t+"BottomWidth"),left:r(t+"LeftWidth")}}};I.extend(n.prototype,{add:function(e){return e&&!this.contains(e)&&(this.cls._map[e]=!0,this.cls.push(e),this._change()),this},remove:function(e){if(this.contains(e)){var t=void 0;for(t=0;t<this.cls.length&&this.cls[t]!==e;t++);this.cls.splice(t,1),delete this.cls._map[e],this._change()}return this},toggle:function(e,t){var n=this.contains(e);return n!==t&&(n?this.remove(e):this.add(e),this._change()),this},contains:function(e){return!!this.cls._map[e]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),n.prototype.toString=function(){var e;if(this.clsValue)return this.clsValue;e="";for(var t=0;t<this.cls.length;t++)t>0&&(e+=" "),e+=this.prefix+this.cls[t];return e};var en,tn,nn,rn=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,on=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,an=/^\s*|\s*$/g,sn=Jt.extend({init:function(e){function t(e){if(e)return e=e.toLowerCase(),function(t){return"*"===e||t.type===e}}function n(e){if(e)return function(t){return t._name===e}}function r(e){if(e)return e=e.split("."),function(t){for(var n=e.length;n--;)if(!t.classes.contains(e[n]))return!1;return!0}}function o(e,t,n){if(e)return function(r){var o=r[e]?r[e]():"";return t?"="===t?o===n:"*="===t?o.indexOf(n)>=0:"~="===t?(" "+o+" ").indexOf(" "+n+" ")>=0:"!="===t?o!==n:"^="===t?0===o.indexOf(n):"$="===t&&o.substr(o.length-n.length)===n:!!n}}function i(e){var t;if(e)return e=/(?:not\((.+)\))|(.+)/i.exec(e),e[1]?(t=s(e[1],[]),function(e){return!l(e,t)}):(e=e[2],function(t,n,r){return"first"===e?0===n:"last"===e?n===r-1:"even"===e?n%2==0:"odd"===e?n%2==1:!!t[e]&&t[e]()})}function a(e,a,s){function l(e){e&&a.push(e)}var u;return u=rn.exec(e.replace(an,"")),l(t(u[1])),l(n(u[2])),l(r(u[3])),l(o(u[4],u[5],u[6])),l(i(u[7])),a.pseudo=!!u[7],a.direct=s,a}function s(e,t){var n,r,o,i=[];do{if(on.exec(""),(r=on.exec(e))&&(e=r[3],i.push(r[1]),r[2])){n=r[3];break}}while(r);for(n&&s(n,t),e=[],o=0;o<i.length;o++)">"!==i[o]&&e.push(a(i[o],[],">"===i[o-1]));return t.push(e),t}var l=this.match;this._selectors=s(e,[])},match:function(e,t){var n,r,o,i,a,s,l,u,c,d,f,h,p;for(t=t||this._selectors,n=0,r=t.length;n<r;n++){for(a=t[n],i=a.length,p=e,h=0,o=i-1;o>=0;o--)for(u=a[o];p;){if(u.pseudo)for(f=p.parent().items(),c=d=f.length;c--&&f[c]!==p;);for(s=0,l=u.length;s<l;s++)if(!u[s](p,c,d)){s=l+1;break}if(s===l){h++;break}if(o===i-1)break;p=p.parent()}if(h===i)return!0}return!1},find:function(e){function t(e,n,r){var o,a,s,l,u,c=n[r];for(o=0,a=e.length;o<a;o++){for(u=e[o],s=0,l=c.length;s<l;s++)if(!c[s](u,o,a)){s=l+1;break}if(s===l)r===n.length-1?i.push(u):u.items&&t(u.items(),n,r+1);else if(c.direct)return;u.items&&t(u.items(),n,r)}}var n,o,i=[],a=this._selectors;if(e.items){for(n=0,o=a.length;n<o;n++)t(e.items(),a[n],0);o>1&&(i=r(i))}return en||(en=sn.Collection),new en(i)}}),ln=Array.prototype.push,un=Array.prototype.slice;nn={length:0,init:function(e){e&&this.add(e)},add:function(e){var t=this;return I.isArray(e)?ln.apply(t,e):e instanceof tn?t.add(e.toArray()):ln.call(t,e),t},set:function(e){var t,n=this,r=n.length;for(n.length=0,n.add(e),t=n.length;t<r;t++)delete n[t];return n},filter:function(e){var t,n,r,o,i=this,a=[];for("string"==typeof e?(e=new sn(e),o=function(t){return e.match(t)}):o=e,t=0,n=i.length;t<n;t++)r=i[t],o(r)&&a.push(r);return new tn(a)},slice:function(){return new tn(un.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},each:function(e){return I.each(this,e),this},toArray:function(){return I.toArray(this)},indexOf:function(e){for(var t=this,n=t.length;n--&&t[n]!==e;);return n},reverse:function(){return new tn(I.toArray(this).reverse())},hasClass:function(e){return!!this[0]&&this[0].classes.contains(e)},prop:function(e,t){var n,r=this;return void 0!==t?(r.each(function(n){n[e]&&n[e](t)}),r):(n=r[0],n&&n[e]?n[e]():void 0)},exec:function(e){var t=this,n=I.toArray(arguments).slice(1);return t.each(function(t){t[e]&&t[e].apply(t,n)}),t},remove:function(){for(var e=this.length;e--;)this[e].remove();return this},addClass:function(e){return this.each(function(t){t.classes.add(e)})},removeClass:function(e){return this.each(function(t){t.classes.remove(e)})}},I.each("fire on off show hide append prepend before after reflow".split(" "),function(e){nn[e]=function(){var t=I.toArray(arguments);return this.each(function(n){e in n&&n[e].apply(n,t)}),this}}),I.each("text name disabled active selected checked visible parent value data".split(" "),function(e){nn[e]=function(t){return this.prop(e,t)}}),tn=Jt.extend(nn),sn.Collection=tn;var cn=tn,dn=function(e){this.create=e.create};dn.create=function(e,t){return new dn({create:function(n,r){var o,i=function(e){n.set(r,e.value)},a=function(n){e.set(t,n.value)};return n.on("change:"+r,a),e.on("change:"+t,i),o=n._bindings,o||(o=n._bindings=[],n.on("destroy",function(){for(var e=o.length;e--;)o[e]()})),o.push(function(){e.off("change:"+t,i)}),e.get(t)}})};var fn,hn,pn=tinymce.util.Tools.resolve("tinymce.util.Observable"),mn=Jt.extend({Mixins:[pn],init:function(e){var t,n;e=e||{};for(t in e)(n=e[t])instanceof dn&&(e[t]=n.create(this,t));this.data=e},set:function(e,t){var n,r,o=this.data[e];if(t instanceof dn&&(t=t.create(this,e)),"object"==typeof e){for(n in e)this.set(n,e[n]);return this}return i(o,t)||(this.data[e]=t,r={target:this,name:e,value:t,oldValue:o},this.fire("change:"+e,r),this.fire("change",r)),this},get:function(e){return this.data[e]},has:function(e){return e in this.data},bind:function(e){return dn.create(this,e)},destroy:function(){this.fire("destroy")}}),gn={},vn={add:function(e){var t=e.parent();if(t){if(!t._layout||t._layout.isNative())return;gn[t._id]||(gn[t._id]=t),fn||(fn=!0,pe.requestAnimationFrame(function(){var e,t;fn=!1;for(e in gn)t=gn[e],t.state.get("rendered")&&t.reflow();gn={}},document.body))}},remove:function(e){gn[e._id]&&delete gn[e._id]}},bn="onmousewheel"in document,yn=!1,wn=0,xn={Statics:{classPrefix:"mce-"},isRtl:function(){return hn.rtl},classPrefix:"mce-",init:function(e){function t(e){var t;for(e=e.split(" "),t=0;t<e.length;t++)i.classes.add(e[t])}var r,o,i=this;i.settings=e=I.extend({},i.Defaults,e),i._id=e.id||"mceu_"+wn++,i._aria={role:e.role},i._elmCache={},i.$=zt,i.state=new mn({visible:!0,active:!1,disabled:!1,value:""}),i.data=new mn(e.data),i.classes=new n(function(){i.state.get("rendered")&&(i.getEl().className=this.toString())}),i.classes.prefix=i.classPrefix,r=e.classes,r&&(i.Defaults&&(o=i.Defaults.classes)&&r!==o&&t(o),t(r)),I.each("title text name visible disabled active value".split(" "),function(t){t in e&&i[t](e[t])}),i.on("click",function(){if(i.disabled())return!1}),i.settings=e,i.borderBox=Zt.parseBox(e.border),i.paddingBox=Zt.parseBox(e.padding),i.marginBox=Zt.parseBox(e.margin),e.hidden&&i.hide()},Properties:"parent,name",getContainerElm:function(){var e=Re.getUiContainer(this);return e||Vt.getContainer()},getParentCtrl:function(e){for(var t,n=this.getRoot().controlIdLookup;e&&n&&!(t=n[e.id]);)e=e.parentNode;return t},initLayoutRect:function(){var e,t,n,r,o,i,a,s,l,u,c=this,d=c.settings,f=c.getEl();e=c.borderBox=c.borderBox||Zt.measureBox(f,"border"),c.paddingBox=c.paddingBox||Zt.measureBox(f,"padding"),c.marginBox=c.marginBox||Zt.measureBox(f,"margin"),u=Vt.getSize(f),s=d.minWidth,l=d.minHeight,o=s||u.width,i=l||u.height,n=d.width,r=d.height,a=d.autoResize,a=void 0!==a?a:!n&&!r,n=n||o,r=r||i;var h=e.left+e.right,p=e.top+e.bottom,m=d.maxWidth||65535,g=d.maxHeight||65535;return c._layoutRect=t={x:d.x||0,y:d.y||0,w:n,h:r,deltaW:h,deltaH:p,contentW:n-h,contentH:r-p,innerW:n-h,innerH:r-p,startMinWidth:s||0,startMinHeight:l||0,minW:Math.min(o,m),minH:Math.min(i,g),maxW:m,maxH:g,autoResize:a,scrollW:0},c._lastLayoutRect={},t},layoutRect:function(e){var t,n,r,o,i,a=this,s=a._layoutRect;return s||(s=a.initLayoutRect()),e?(r=s.deltaW,o=s.deltaH,void 0!==e.x&&(s.x=e.x),void 0!==e.y&&(s.y=e.y),void 0!==e.minW&&(s.minW=e.minW),void 0!==e.minH&&(s.minH=e.minH),n=e.w,void 0!==n&&(n=n<s.minW?s.minW:n,n=n>s.maxW?s.maxW:n,s.w=n,s.innerW=n-r),n=e.h,void 0!==n&&(n=n<s.minH?s.minH:n,n=n>s.maxH?s.maxH:n,s.h=n,s.innerH=n-o),n=e.innerW,void 0!==n&&(n=n<s.minW-r?s.minW-r:n,n=n>s.maxW-r?s.maxW-r:n,s.innerW=n,s.w=n+r),n=e.innerH,void 0!==n&&(n=n<s.minH-o?s.minH-o:n,n=n>s.maxH-o?s.maxH-o:n,s.innerH=n,s.h=n+o),void 0!==e.contentW&&(s.contentW=e.contentW),void 0!==e.contentH&&(s.contentH=e.contentH),t=a._lastLayoutRect,t.x===s.x&&t.y===s.y&&t.w===s.w&&t.h===s.h||(i=hn.repaintControls,i&&i.map&&!i.map[a._id]&&(i.push(a),i.map[a._id]=!0),t.x=s.x,t.y=s.y,t.w=s.w,t.h=s.h),a):s},repaint:function(){var e,t,n,r,o,i,a,s,l,u,c=this;l=document.createRange?function(e){return e}:Math.round,e=c.getEl().style,r=c._layoutRect,s=c._lastRepaintRect||{},o=c.borderBox,i=o.left+o.right,a=o.top+o.bottom,r.x!==s.x&&(e.left=l(r.x)+"px",s.x=r.x),r.y!==s.y&&(e.top=l(r.y)+"px",s.y=r.y),r.w!==s.w&&(u=l(r.w-i),e.width=(u>=0?u:0)+"px",s.w=r.w),r.h!==s.h&&(u=l(r.h-a),e.height=(u>=0?u:0)+"px",s.h=r.h),c._hasBody&&r.innerW!==s.innerW&&(u=l(r.innerW),n=c.getEl("body"),n&&(t=n.style,t.width=(u>=0?u:0)+"px"),s.innerW=r.innerW),c._hasBody&&r.innerH!==s.innerH&&(u=l(r.innerH),n=n||c.getEl("body"),n&&(t=t||n.style,t.height=(u>=0?u:0)+"px"),s.innerH=r.innerH),c._lastRepaintRect=s,c.fire("repaint",{},!1)},updateLayoutRect:function(){var e=this;e.parent()._lastRect=null,Vt.css(e.getEl(),{width:"",height:""}),e._layoutRect=e._lastRepaintRect=e._lastLayoutRect=null,e.initLayoutRect()},on:function(e,t){var n=this;return a(n).on(e,function(e){var t,r;return"string"!=typeof e?e:function(o){return t||n.parentsAndSelf().each(function(n){var o=n.settings.callbacks;if(o&&(t=o[e]))return r=n,!1}),t?t.call(r,o):(o.action=e,void this.fire("execute",o))}}(t)),n},off:function(e,t){return a(this).off(e,t),this},fire:function(e,t,n){var r=this;if(t=t||{},t.control||(t.control=r),t=a(r).fire(e,t),!1!==n&&r.parent)for(var o=r.parent();o&&!t.isPropagationStopped();)o.fire(e,t,!1),o=o.parent();return t},hasEventListeners:function(e){return a(this).has(e)},parents:function(e){var t,n=this,r=new cn;for(t=n.parent();t;t=t.parent())r.add(t);return e&&(r=r.filter(e)),r},parentsAndSelf:function(e){return new cn(this).add(this.parents(e))},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},innerHtml:function(e){return this.$el.html(e),this},getEl:function(e){var t=e?this._id+"-"+e:this._id;return this._elmCache[t]||(this._elmCache[t]=zt("#"+t)[0]),this._elmCache[t]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){return this.getEl().blur(),this},aria:function(e,t){var n=this,r=n.getEl(n.ariaTarget);return void 0===t?n._aria[e]:(n._aria[e]=t,n.state.get("rendered")&&r.setAttribute("role"===e?e:"aria-"+e,t),n)},encode:function(e,t){return!1!==t&&(e=this.translate(e)),(e||"").replace(/[&<>"]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},translate:function(e){return hn.translate?hn.translate(e):e},before:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t),!0),t},after:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t)),t},remove:function(){var e,t,n=this,r=n.getEl(),o=n.parent();if(n.items){var i=n.items().toArray();for(t=i.length;t--;)i[t].remove()}o&&o.items&&(e=[],o.items().each(function(t){t!==n&&e.push(t)}),o.items().set(e),o._lastRect=null),n._eventsRoot&&n._eventsRoot===n&&zt(r).off();var a=n.getRoot().controlIdLookup;return a&&delete a[n._id],r&&r.parentNode&&r.parentNode.removeChild(r),n.state.set("rendered",!1),n.state.destroy(),n.fire("remove"),n},renderBefore:function(e){return zt(e).before(this.renderHtml()),this.postRender(),this},renderTo:function(e){return zt(e||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var e,t,n,r,o,i=this,a=i.settings;i.$el=zt(i.getEl()),i.state.set("rendered",!0);for(r in a)0===r.indexOf("on")&&i.on(r.substr(2),a[r]);if(i._eventsRoot){for(n=i.parent();!o&&n;n=n.parent())o=n._eventsRoot;if(o)for(r in o._nativeEvents)i._nativeEvents[r]=!0}s(i),a.style&&(e=i.getEl())&&(e.setAttribute("style",a.style),e.style.cssText=a.style),i.settings.border&&(t=i.borderBox,i.$el.css({"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left}));var l=i.getRoot();l.controlIdLookup||(l.controlIdLookup={}),l.controlIdLookup[i._id]=i;for(var u in i._aria)i.aria(u,i._aria[u]);!1===i.state.get("visible")&&(i.getEl().style.display="none"),i.bindStates(),i.state.on("change:visible",function(e){var t,n=e.value;i.state.get("rendered")&&(i.getEl().style.display=!1===n?"none":"",i.getEl().getBoundingClientRect()),t=i.parent(),t&&(t._lastRect=null),i.fire(n?"show":"hide"),vn.add(i)}),i.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(e){var t,n,r,o,i,a,s=this.getEl(),l=s.parentNode,u=function(e,t){var n,r,o=e;for(n=r=0;o&&o!==t&&o.nodeType;)n+=o.offsetLeft||0,r+=o.offsetTop||0,o=o.offsetParent;return{x:n,y:r}}(s,l);return t=u.x,n=u.y,r=s.offsetWidth,o=s.offsetHeight,i=l.clientWidth,a=l.clientHeight,"end"===e?(t-=i-r,n-=a-o):"center"===e&&(t-=i/2-r/2,n-=a/2-o/2),l.scrollLeft=t,l.scrollTop=n,this},getRoot:function(){for(var e,t=this,n=[];t;){if(t.rootControl){e=t.rootControl;break}n.push(t),e=t,t=t.parent()}e||(e=this);for(var r=n.length;r--;)n[r].rootControl=e;return e},reflow:function(){vn.remove(this);var e=this.parent();return e&&e._layout&&!e._layout.isNative()&&e.reflow(),this}};I.each("text title visible disabled active value".split(" "),function(e){xn[e]=function(t){return 0===arguments.length?this.state.get(e):(void 0!==t&&this.state.set(e,t),this)}}),hn=Jt.extend(xn);var Cn,kn,Nn,_n,Sn=hn,Tn=function(e){return!!e.getAttribute("data-mce-tabstop")},En={},On=Sn.extend({init:function(e){var t=this;t._super(e),e=t.settings,e.fixed&&t.state.set("fixed",!0),t._items=new cn,t.isRtl()&&t.classes.add("rtl"),t.bodyClasses=new n(function(){t.state.get("rendered")&&(t.getEl("body").className=this.toString())}),t.bodyClasses.prefix=t.classPrefix,t.classes.add("container"),t.bodyClasses.add("container-body"),e.containerCls&&t.classes.add(e.containerCls),t._layout=oe.create((e.layout||"")+"layout"),t.settings.items?t.add(t.settings.items):t.add(t.render()),t._hasBody=!0},items:function(){return this._items},find:function(e){return e=En[e]=En[e]||new sn(e),e.find(this)},add:function(e){var t=this;return t.items().add(t.create(e)).parent(t),t},focus:function(e){var t,n,r,o=this;return e&&(n=o.keyboardNav||o.parents().eq(-1)[0].keyboardNav)?void n.focusFirst(o):(r=o.find("*"),o.statusbar&&r.add(o.statusbar.items()),r.each(function(e){if(e.settings.autofocus)return t=null,!1;e.canFocus&&(t=t||e)}),t&&t.focus(),o)},replace:function(e,t){for(var n,r=this.items(),o=r.length;o--;)if(r[o]===e){r[o]=t;break}o>=0&&(n=t.getEl(),n&&n.parentNode.removeChild(n),(n=e.getEl())&&n.parentNode.removeChild(n)),t.parent(this)},create:function(e){var t,n=this,r=[];return I.isArray(e)||(e=[e]),I.each(e,function(e){e&&(e instanceof Sn||("string"==typeof e&&(e={type:e}),t=I.extend({},n.settings.defaults,e),e.type=t.type=t.type||e.type||n.settings.defaultType||(t.defaults?t.defaults.type:null),e=oe.create(t)),r.push(e))}),r},renderNew:function(){var e=this;return e.items().each(function(t,n){var r;t.parent(e),t.state.get("rendered")||(r=e.getEl("body"),r.hasChildNodes()&&n<=r.childNodes.length-1?zt(r.childNodes[n]).before(t.renderHtml()):zt(r).append(t.renderHtml()),t.postRender(),vn.add(t))}),e._layout.applyClasses(e.items().filter(":visible")),e._lastRect=null,e},append:function(e){return this.add(e).renderNew()},prepend:function(e){var t=this;return t.items().set(t.create(e).concat(t.items().toArray())),t.renderNew()},insert:function(e,t,n){var r,o,i,a=this;return e=a.create(e),r=a.items(),!n&&t<r.length-1&&(t+=1),t>=0&&t<r.length&&(o=r.slice(0,t).toArray(),i=r.slice(t).toArray(),r.set(o.concat(e,i))),a.renderNew()},fromJSON:function(e){var t=this;for(var n in e)t.find("#"+n).value(e[n]);return t},toJSON:function(){var e=this,t={};return e.find("*").each(function(e){var n=e.name(),r=e.value();n&&void 0!==r&&(t[n]=r)}),t},renderHtml:function(){var e=this,t=e._layout,n=this.settings.role;return e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'"'+(n?' role="'+this.settings.role+'"':"")+'><div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"},postRender:function(){var e,t=this;return t.items().exec("postRender"),t._super(),t._layout.postRender(t),t.state.set("rendered",!0),t.settings.style&&t.$el.css(t.settings.style),t.settings.border&&(e=t.borderBox,t.$el.css({"border-top-width":e.top,"border-right-width":e.right,"border-bottom-width":e.bottom,"border-left-width":e.left})),t.parent()||(t.keyboardNav=l({root:t})),t},initLayoutRect:function(){var e=this,t=e._super();return e._layout.recalc(e),t},recalc:function(){var e=this,t=e._layoutRect,n=e._lastRect;if(!n||n.w!==t.w||n.h!==t.h)return e._layout.recalc(e),t=e.layoutRect(),e._lastRect={x:t.x,y:t.y,w:t.w,h:t.h},!0},reflow:function(){var e;if(vn.remove(this),this.visible()){for(Sn.repaintControls=[],Sn.repaintControls.map={},this.recalc(),e=Sn.repaintControls.length;e--;)Sn.repaintControls[e].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),Sn.repaintControls=[]}return this}}),An={init:function(){var e=this;e.on("repaint",e.renderScroll)},renderScroll:function(){function e(){function e(e,i,a,s,l,u){var c,d,f,h,p,m,g,v,b;if(d=t.getEl("scroll"+e)){if(v=i.toLowerCase(),b=a.toLowerCase(),zt(t.getEl("absend")).css(v,t.layoutRect()[s]-1),!l)return void zt(d).css("display","none");zt(d).css("display","block"),c=t.getEl("body"),f=t.getEl("scroll"+e+"t"),h=c["client"+a]-2*n,h-=r&&o?d["client"+u]:0,p=c["scroll"+a],m=h/p,g={},g[v]=c["offset"+i]+n,g[b]=h,zt(d).css(g),g={},g[v]=c["scroll"+i]*m,g[b]=h*m,zt(f).css(g)}}var r,o,i;i=t.getEl("body"),r=i.scrollWidth>i.clientWidth,o=i.scrollHeight>i.clientHeight,e("h","Left","Width","contentW",r,"Height"),e("v","Top","Height","contentH",o,"Width")}var t=this,n=2;t.settings.autoScroll&&(t._hasScroll||(t._hasScroll=!0,function(){function e(e,r,o,i,a){var s,l=t._id+"-scroll"+e,u=t.classPrefix;zt(t.getEl()).append('<div id="'+l+'" class="'+u+"scrollbar "+u+"scrollbar-"+e+'"><div id="'+l+'t" class="'+u+'scrollbar-thumb"></div></div>'),t.draghelper=new d(l+"t",{start:function(){s=t.getEl("body")["scroll"+r],zt("#"+l).addClass(u+"active")},drag:function(l){var u,c,d,f,h=t.layoutRect();c=h.contentW>h.innerW,d=h.contentH>h.innerH,f=t.getEl("body")["client"+o]-2*n,f-=c&&d?t.getEl("scroll"+e)["client"+a]:0,u=f/t.getEl("body")["scroll"+o],t.getEl("body")["scroll"+r]=s+l["delta"+i]/u},stop:function(){zt("#"+l).removeClass(u+"active")}})}t.classes.add("scroll"),e("v","Top","Height","Y","Width"),e("h","Left","Width","X","Height")}(),t.on("wheel",function(n){var r=t.getEl("body");r.scrollLeft+=10*(n.deltaX||0),r.scrollTop+=10*n.deltaY,e()}),zt(t.getEl("body")).on("scroll",e)),e())}},Dn=On.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[An],renderHtml:function(){var e=this,t=e._layout,n=e.settings.html;return e.preRender(),t.preRender(e),void 0===n?n='<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div>":("function"==typeof n&&(n=n.call(e)),e._hasBody=!1),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1" role="group">'+(e._preBodyHtml||"")+n+"</div>"}}),Rn={resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(e,t){if(e<=1||t<=1){var n=Vt.getWindowSize();e=e<=1?e*n.w:e,t=t<=1?t*n.h:t}return this._layoutRect.autoResize=!1,this.layoutRect({minW:e,minH:t,w:e,h:t}).reflow()},resizeBy:function(e,t){var n=this,r=n.layoutRect();return n.resizeTo(r.w+e,r.h+t)}},Mn=[],Pn=[],Ln=Dn.extend({Mixins:[Yt,Rn],init:function(e){var t=this;t._super(e),t._eventsRoot=t,t.classes.add("floatpanel"),e.autohide&&(p(),g(),Mn.push(t)),e.autofix&&(m(),t.on("move",function(){v(this)})),t.on("postrender show",function(e){if(e.control===t){var n,r=t.classPrefix;t.modal&&!_n&&(n=zt("#"+r+"modal-block",t.getContainerElm()),n[0]||(n=zt('<div id="'+r+'modal-block" class="'+r+"reset "+r+'fade"></div>').appendTo(t.getContainerElm())),pe.setTimeout(function(){n.addClass(r+"in"),zt(t.getEl()).addClass(r+"in")}),_n=!0),b(!0,t)}}),t.on("show",function(){t.parents().each(function(e){if(e.state.get("fixed"))return t.fixed(!0),!1})}),e.popover&&(t._preBodyHtml='<div class="'+t.classPrefix+'arrow"></div>',t.classes.add("popover").add("bottom").add(t.isRtl()?"end":"start")),t.aria("label",e.ariaLabel),t.aria("labelledby",t._id),t.aria("describedby",t.describedBy||t._id+"-none")},fixed:function(e){var t=this;if(t.state.get("fixed")!==e){if(t.state.get("rendered")){var n=Vt.getViewPort();e?t.layoutRect().y-=n.y:t.layoutRect().y+=n.y}t.classes.toggle("fixed",e),t.state.set("fixed",e)}return t},show:function(){var e,t=this,n=t._super();for(e=Mn.length;e--&&Mn[e]!==t;);return-1===e&&Mn.push(t),n},hide:function(){return y(this),b(!1,this),this._super()},hideAll:function(){Ln.hideAll()},close:function(){var e=this;return e.fire("close").isDefaultPrevented()||(e.remove(),b(!1,e)),e},remove:function(){y(this),this._super()},postRender:function(){var e=this;return e.settings.bodyRole&&this.getEl("body").setAttribute("role",e.settings.bodyRole),e._super()}});Ln.hideAll=function(){for(var e=Mn.length;e--;){var t=Mn[e];t&&t.settings.autohide&&(t.hide(),Mn.splice(e,1))}};var In=function(e,t){return!(!e||t.settings.ui_container)},jn=function(e,t,n){var r,o,i=re.DOM,a=W(e);a&&(o=i.select(a)[0]);var s=function(){if(r&&r.moveRel&&r.visible()&&!r._fixed){var t=e.selection.getScrollContainer(),n=e.getBody(),o=0,a=0;if(t){var s=i.getPos(n),l=i.getPos(t);o=Math.max(0,l.x-s.x),a=Math.max(0,l.y-s.y)}r.fixed(!1).moveRel(n,e.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(o,a)}},l=function(){r&&(r.show(),s(),i.addClass(e.getBody(),"mce-edit-focus"))},u=function(){r&&(r.hide(),Ln.hideAll(),i.removeClass(e.getBody(),"mce-edit-focus"))},c=function(){if(r)return void(r.visible()||l());r=t.panel=oe.create({type:o?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:In(o,e),fixed:In(o,e),border:1,items:[!1===B(e)?null:{type:"menubar",border:"0 0 1 0",items:vt.createMenuButtons(e)},Le.createToolbars(e,U(e))]}),Re.setUiContainer(e,r),ue.fireBeforeRenderUI(e),o?r.renderTo(o).reflow():r.renderTo().reflow(),fe.addKeys(e,r),l(),We.addContextualToolbars(e),e.on("nodeChange",s),e.on("ResizeWindow",s),e.on("activate",l),e.on("deactivate",u),e.nodeChanged()};return e.settings.content_editable=!0,e.on("focus",function(){!1===J(e)&&n.skinUiCss?i.styleSheetLoader.load(n.skinUiCss,c,c):c()}),e.on("blur hide",u),e.on("remove",function(){r&&(r.remove(),r=null)}),!1===J(e)&&n.skinUiCss?i.styleSheetLoader.load(n.skinUiCss,Lt.fireSkinLoaded(e)):Lt.fireSkinLoaded(e)(),{}},Bn={render:jn},Fn=function(e,t){var n;e.on("ProgressState",function(e){n=n||new w(t.panel.getEl("body")),e.state?n.show(e.time):n.hide()})},Hn={setup:Fn},Un=function(e,t,n){var r=ee(e);return r&&(n.skinUiCss=r+"/skin.min.css",e.contentCSS.push(r+"/content"+(e.inline?".inline":"")+".min.css")),Hn.setup(e,t),Q(e)?Bn.render(e,t,n):Ut.render(e,t,n)},zn={renderUI:Un},Wn=Sn.extend({Mixins:[Yt],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes+'" role="presentation"><div class="'+t+'tooltip-arrow"></div><div class="'+t+'tooltip-inner">'+e.encode(e.state.get("text"))+"</div></div>"},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl().lastChild.innerHTML=e.encode(t.value)}),e._super()},repaint:function(){var e,t,n=this;e=n.getEl().style,t=n._layoutRect,e.left=t.x+"px",e.top=t.y+"px",e.zIndex=131070}}),Vn=Sn.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.canFocus=!0,e.tooltip&&!1!==Vn.tooltips&&(t.on("mouseenter",function(n){var r=t.tooltip().moveTo(-65535);if(n.control===t){var o=r.text(e.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]);r.classes.toggle("tooltip-n","bc-tc"===o),r.classes.toggle("tooltip-nw","bc-tl"===o),r.classes.toggle("tooltip-ne","bc-tr"===o),r.moveRel(t.getEl(),o)}else r.hide()}),t.on("mouseleave mousedown click",function(){t.tooltip().remove(),t._tooltip=null})),t.aria("label",e.ariaLabel||e.tooltip)},tooltip:function(){return this._tooltip||(this._tooltip=new Wn({type:"tooltip"}),Re.inheritUiContainer(this,this._tooltip),this._tooltip.renderTo()),this._tooltip},postRender:function(){var e=this,t=e.settings;e._super(),e.parent()||!t.width&&!t.height||(e.initLayoutRect(),e.repaint()),t.autofocus&&e.focus()},bindStates:function(){function e(e){n.aria("disabled",e),n.classes.toggle("disabled",e)}function t(e){n.aria("pressed",e),n.classes.toggle("active",e)}var n=this;return n.state.on("change:disabled",function(t){e(t.value)}),n.state.on("change:active",function(e){t(e.value)}),n.state.get("disabled")&&e(!0),n.state.get("active")&&t(!0),n._super()},remove:function(){this._super(),this._tooltip&&(this._tooltip.remove(),this._tooltip=null)}}),qn=Vn.extend({Defaults:{value:0},init:function(e){var t=this;t._super(e),t.classes.add("progress"),t.settings.filter||(t.settings.filter=function(e){return Math.round(e)})},renderHtml:function(){var e=this,t=e._id,n=this.classPrefix;return'<div id="'+t+'" class="'+e.classes+'"><div class="'+n+'bar-container"><div class="'+n+'bar"></div></div><div class="'+n+'text">0%</div></div>'},postRender:function(){var e=this;return e._super(),e.value(e.settings.value),e},bindStates:function(){function e(e){e=t.settings.filter(e),t.getEl().lastChild.innerHTML=e+"%",t.getEl().firstChild.firstChild.style.width=e+"%"}var t=this;return t.state.on("change:value",function(t){e(t.value)}),e(t.state.get("value")),t._super()}}),$n=function(e,t){e.getEl().lastChild.textContent=t+(e.progressBar?" "+e.progressBar.value()+"%":"")},Kn=Sn.extend({Mixins:[Yt],Defaults:{classes:"widget notification"},init:function(e){var t=this;t._super(e),t.maxWidth=e.maxWidth,e.text&&t.text(e.text),e.icon&&(t.icon=e.icon),e.color&&(t.color=e.color),e.type&&t.classes.add("notification-"+e.type),e.timeout&&(e.timeout<0||e.timeout>0)&&!e.closeButton?t.closeButton=!1:(t.classes.add("has-close"),t.closeButton=!0),e.progressBar&&(t.progressBar=new qn),t.on("click",function(e){-1!==e.target.className.indexOf(t.classPrefix+"close")&&t.close()})},renderHtml:function(){var e=this,t=e.classPrefix,n="",r="",o="",i="";return e.icon&&(n='<i class="'+t+"ico "+t+"i-"+e.icon+'"></i>'),i=' style="max-width: '+e.maxWidth+"px;"+(e.color?"background-color: "+e.color+';"':'"'),e.closeButton&&(r='<button type="button" class="'+t+'close" aria-hidden="true">\xd7</button>'),e.progressBar&&(o=e.progressBar.renderHtml()),'<div id="'+e._id+'" class="'+e.classes+'"'+i+' role="presentation">'+n+'<div class="'+t+'notification-inner">'+e.state.get("text")+"</div>"+o+r+'<div style="clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;" aria-live="assertive" aria-relevant="additions" aria-atomic="true"></div></div>'},postRender:function(){var e=this;return pe.setTimeout(function(){e.$el.addClass(e.classPrefix+"in"),$n(e,e.state.get("text"))},100),e._super()},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl().firstChild.innerHTML=t.value,$n(e,t.value)}),e.progressBar&&(e.progressBar.bindStates(),e.progressBar.state.on("change:value",function(t){$n(e,e.state.get("text"))})),e._super()},close:function(){var e=this;return e.fire("close").isDefaultPrevented()||e.remove(),e},repaint:function(){var e,t,n=this;e=n.getEl().style,t=n._layoutRect,e.left=t.x+"px",e.top=t.y+"px",e.zIndex=65534}}),Gn=[],Xn="",Yn=Ln.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var t=this;t._super(e),t.isRtl()&&t.classes.add("rtl"),t.classes.add("window"),t.bodyClasses.add("window-body"),t.state.set("fixed",!0),e.buttons&&(t.statusbar=new Dn({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:t.isRtl()?"start":"end",defaults:{type:"button"},items:e.buttons}),t.statusbar.classes.add("foot"),t.statusbar.parent(t)),t.on("click",function(e){var n=t.classPrefix+"close";(Vt.hasClass(e.target,n)||Vt.hasClass(e.target.parentNode,n))&&t.close()}),t.on("cancel",function(){t.close()}),t.on("move",function(e){e.control===t&&Ln.hideAll()}),t.aria("describedby",t.describedBy||t._id+"-none"),t.aria("label",e.title),t._fullscreen=!1},recalc:function(){var e,t,n,r,o=this,i=o.statusbar;o._fullscreen&&(o.layoutRect(Vt.getWindowSize()),o.layoutRect().contentH=o.layoutRect().innerH),o._super(),e=o.layoutRect(),o.settings.title&&!o._fullscreen&&(t=e.headerW)>e.w&&(n=e.x-Math.max(0,t/2),o.layoutRect({w:t,x:n}),r=!0),i&&(i.layoutRect({w:o.layoutRect().innerW}).recalc(),(t=i.layoutRect().minW+e.deltaW)>e.w&&(n=e.x-Math.max(0,t-e.w),o.layoutRect({w:t,x:n}),r=!0)),r&&o.recalc()},initLayoutRect:function(){var e,t=this,n=t._super(),r=0;if(t.settings.title&&!t._fullscreen){e=t.getEl("head");var o=Vt.getSize(e);n.headerW=o.width,n.headerH=o.height,r+=n.headerH}t.statusbar&&(r+=t.statusbar.layoutRect().h),n.deltaH+=r,n.minH+=r,n.h+=r;var i=Vt.getWindowSize();return n.x=t.settings.x||Math.max(0,i.w/2-n.w/2),n.y=t.settings.y||Math.max(0,i.h/2-n.h/2),n},renderHtml:function(){var e=this,t=e._layout,n=e._id,r=e.classPrefix,o=e.settings,i="",a="",s=o.html;return e.preRender(),t.preRender(e),o.title&&(i='<div id="'+n+'-head" class="'+r+'window-head"><div id="'+n+'-title" class="'+r+'title">'+e.encode(o.title)+'</div><div id="'+n+'-dragh" class="'+r+'dragh"></div><button type="button" class="'+r+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"></i></button></div>'),o.url&&(s='<iframe src="'+o.url+'" tabindex="-1"></iframe>'),void 0===s&&(s=t.renderHtml(e)),e.statusbar&&(a=e.statusbar.renderHtml()),'<div id="'+n+'" class="'+e.classes+'" hidefocus="1"><div class="'+e.classPrefix+'reset" role="application">'+i+'<div id="'+n+'-body" class="'+e.bodyClasses+'">'+s+"</div>"+a+"</div></div>"},fullscreen:function(e){var t,n,r=this,o=document.documentElement,i=r.classPrefix;if(e!==r._fullscreen)if(zt(window).on("resize",function(){var e;if(r._fullscreen)if(t)r._timer||(r._timer=pe.setTimeout(function(){var e=Vt.getWindowSize();r.moveTo(0,0).resizeTo(e.w,e.h),r._timer=0},50));else{e=(new Date).getTime();var n=Vt.getWindowSize();r.moveTo(0,0).resizeTo(n.w,n.h),(new Date).getTime()-e>50&&(t=!0)}}),n=r.layoutRect(),r._fullscreen=e,e){r._initial={x:n.x,y:n.y,w:n.w,h:n.h},r.borderBox=Zt.parseBox("0"),r.getEl("head").style.display="none",n.deltaH-=n.headerH+2,zt([o,document.body]).addClass(i+"fullscreen"),r.classes.add("fullscreen");var a=Vt.getWindowSize();r.moveTo(0,0).resizeTo(a.w,a.h)}else r.borderBox=Zt.parseBox(r.settings.border),r.getEl("head").style.display="",n.deltaH+=n.headerH,zt([o,document.body]).removeClass(i+"fullscreen"),r.classes.remove("fullscreen"),r.moveTo(r._initial.x,r._initial.y).resizeTo(r._initial.w,r._initial.h);return r.reflow()},postRender:function(){var e,t=this;setTimeout(function(){t.classes.add("in"),t.fire("open")},0),t._super(),t.statusbar&&t.statusbar.postRender(),t.focus(),this.dragHelper=new d(t._id+"-dragh",{start:function(){e={x:t.layoutRect().x,y:t.layoutRect().y}},drag:function(n){t.moveTo(e.x+n.deltaX,e.y+n.deltaY)}}),t.on("submit",function(e){e.isDefaultPrevented()||t.close()}),Gn.push(t),C(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var e,t=this;for(t.dragHelper.destroy(),t._super(),t.statusbar&&this.statusbar.remove(),k(t.classPrefix,!1),e=Gn.length;e--;)Gn[e]===t&&Gn.splice(e,1);C(Gn.length>0)},getContentWindow:function(){var e=this.getEl().getElementsByTagName("iframe")[0];return e?e.contentWindow:null}});!function(){function e(){var e,t,n=Vt.getWindowSize();for(e=0;e<Gn.length;e++)t=Gn[e].layoutRect(),Gn[e].moveTo(Gn[e].settings.x||Math.max(0,n.w/2-t.w/2),Gn[e].settings.y||Math.max(0,n.h/2-t.h/2))}if(!kt.desktop){var t={w:window.innerWidth,h:window.innerHeight};pe.setInterval(function(){var e=window.innerWidth,n=window.innerHeight;t.w===e&&t.h===n||(t={w:e,h:n},zt(window).trigger("resize"))},100)}zt(window).on("resize",e)}();var Jn=Yn.extend({init:function(e){e={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(e)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(e){function t(e,t,n){return{type:"button",text:e,subtype:n?"primary":"",onClick:function(e){e.control.parents()[1].close(),r(t)}}}var n,r=e.callback||function(){};switch(e.buttons){case Jn.OK_CANCEL:n=[t("Ok",!0,!0),t("Cancel",!1)];break;case Jn.YES_NO:case Jn.YES_NO_CANCEL:n=[t("Yes",1,!0),t("No",0)],e.buttons===Jn.YES_NO_CANCEL&&n.push(t("Cancel",-1));break;default:n=[t("Ok",!0,!0)]}return new Yn({padding:20,x:e.x,y:e.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:n,title:e.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:e.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:e.onClose,onCancel:function(){r(!1)}}).renderTo(document.body).reflow()},alert:function(e,t){return"string"==typeof e&&(e={text:e}),e.callback=t,Jn.msgBox(e)},confirm:function(e,t){return"string"==typeof e&&(e={text:e}),e.callback=t,e.buttons=Jn.OK_CANCEL,Jn.msgBox(e)}}}),Qn=function(e){return{renderUI:function(t){return zn.renderUI(e,this,t)},resizeTo:function(t,n){return Ct.resizeTo(e,t,n)},resizeBy:function(t,n){return Ct.resizeBy(e,t,n)},getNotificationManagerImpl:function(){return x(e)},getWindowManagerImpl:function(){return _(e)}}},Zn={get:Qn},er=Jt.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=I.extend({},this.Defaults,e)},preRender:function(e){e.bodyClasses.add(this.settings.containerClass)},applyClasses:function(e){var t,n,r,o,i=this,a=i.settings;t=a.firstControlClass,n=a.lastControlClass,e.each(function(e){e.classes.remove(t).remove(n).add(a.controlClass),e.visible()&&(r||(r=e),o=e)}),r&&r.classes.add(t),o&&o.classes.add(n)},renderHtml:function(e){var t=this,n="";return t.applyClasses(e.items()),e.items().each(function(e){n+=e.renderHtml()}),n},recalc:function(){},postRender:function(){},isNative:function(){return!1}}),tr=er.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each(function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc&&e.recalc()})},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}}),nr=Vn.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t,n=this;n._super(e),e=n.settings,t=n.settings.size,n.on("click mousedown",function(e){e.preventDefault()}),n.on("touchstart",function(e){n.fire("click",e),e.preventDefault()}),e.subtype&&n.classes.add(e.subtype),t&&n.classes.add("btn-"+t),e.icon&&n.icon(e.icon)},icon:function(e){return arguments.length?(this.state.set("icon",e),this):this.state.get("icon")},repaint:function(){var e,t=this.getEl().firstChild;t&&(e=t.style,e.width=e.height="100%"),this._super()},renderHtml:function(){var e,t,n=this,r=n._id,o=n.classPrefix,i=n.state.get("icon"),a=n.state.get("text"),s="",l=n.settings;return e=l.image,e?(i="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",a&&(n.classes.add("btn-has-text"),s='<span class="'+o+'txt">'+n.encode(a)+"</span>"),i=i?o+"ico "+o+"i-"+i:"",t="boolean"==typeof l.active?' aria-pressed="'+l.active+'"':"",'<div id="'+r+'" class="'+n.classes+'" tabindex="-1"'+t+'><button id="'+r+'-button" role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+e+"></i>":"")+s+"</button></div>"},bindStates:function(){function e(e){var o=n("span."+r,t.getEl());e?(o[0]||(n("button:first",t.getEl()).append('<span class="'+r+'"></span>'),o=n("span."+r,t.getEl())),o.html(t.encode(e))):o.remove(),t.classes.toggle("btn-has-text",!!e)}var t=this,n=t.$,r=t.classPrefix+"txt";return t.state.on("change:text",function(t){e(t.value)}),t.state.on("change:icon",function(n){var r=n.value,o=t.classPrefix;t.settings.icon=r,r=r?o+"ico "+o+"i-"+t.settings.icon:"";var i=t.getEl().firstChild,a=i.getElementsByTagName("i")[0];r?(a&&a===i.firstChild||(a=document.createElement("i"),i.insertBefore(a,i.firstChild)),a.className=r):a&&i.removeChild(a),e(t.state.get("text"))}),t._super()}}),rr=nr.extend({init:function(e){var t=this;e=I.extend({text:"Browse...",multiple:!1,accept:null},e),t._super(e),t.classes.add("browsebutton"),e.multiple&&t.classes.add("multiple")},postRender:function(){var e=this,t=Vt.create("input",{type:"file",id:e._id+"-browse",accept:e.settings.accept});e._super(),zt(t).on("change",function(t){var n=t.target.files;e.value=function(){return n.length?e.settings.multiple?n:n[0]:null},t.preventDefault(),n.length&&e.fire("change",t)}),zt(t).on("click",function(e){e.stopPropagation()}),zt(e.getEl("button")).on("click",function(e){e.stopPropagation(),t.click()}),e.getEl().appendChild(t)},remove:function(){zt(this.getEl("button")).off(),zt(this.getEl("input")).off(),this._super()}}),or=On.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var e=this,t=e._layout;return e.classes.add("btn-group"),e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'"><div id="'+e._id+'-body">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}}),ir=Vn.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e),t.on("click mousedown",function(e){e.preventDefault()}),t.on("click",function(e){e.preventDefault(),t.disabled()||t.checked(!t.checked())}),t.checked(t.settings.checked)},checked:function(e){return arguments.length?(this.state.set("checked",e),this):this.state.get("checked")},value:function(e){return arguments.length?this.checked(e):this.checked()},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1"><i class="'+n+"ico "+n+'i-checkbox"></i><span id="'+t+'-al" class="'+n+'label">'+e.encode(e.state.get("text"))+"</span></div>"},bindStates:function(){function e(e){t.classes.toggle("checked",e),t.aria("checked",e)}var t=this;return t.state.on("change:text",function(e){t.getEl("al").firstChild.data=t.translate(e.value)}),t.state.on("change:checked change:value",function(n){t.fire("change"),e(n.value)}),t.state.on("change:icon",function(e){var n=e.value,r=t.classPrefix;if(void 0===n)return t.settings.icon;t.settings.icon=n,n=n?r+"ico "+r+"i-"+t.settings.icon:"";var o=t.getEl().firstChild,i=o.getElementsByTagName("i")[0];n?(i&&i===o.firstChild||(i=document.createElement("i"),o.insertBefore(i,o.firstChild)),i.className=n):i&&o.removeChild(i)}),t.state.get("checked")&&e(!0),t._super()}}),ar=tinymce.util.Tools.resolve("tinymce.util.VK"),sr=Vn.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.classes.add("combobox"),t.subinput=!0,t.ariaTarget="inp",e.menu=e.menu||e.values,e.menu&&(e.icon="caret"),t.on("click",function(n){var r=n.target,o=t.getEl();if(zt.contains(o,r)||r===o)for(;r&&r!==o;)r.id&&-1!==r.id.indexOf("-open")&&(t.fire("action"),e.menu&&(t.showMenu(),n.aria&&t.menu.items()[0].focus())),r=r.parentNode}),t.on("keydown",function(e){var n;13===e.keyCode&&"INPUT"===e.target.nodeName&&(e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,!1}),t.fire("submit",{data:n.toJSON()}))}),t.on("keyup",function(e){if("INPUT"===e.target.nodeName){var n=t.state.get("value"),r=e.target.value;r!==n&&(t.state.set("value",r),t.fire("autocomplete",e))}}),t.on("mouseover",function(e){var n=t.tooltip().moveTo(-65535);if(t.statusLevel()&&-1!==e.target.className.indexOf(t.classPrefix+"status")){var r=t.statusMessage()||"Ok",o=n.text(r).show().testMoveRel(e.target,["bc-tc","bc-tl","bc-tr"]);n.classes.toggle("tooltip-n","bc-tc"===o),n.classes.toggle("tooltip-nw","bc-tl"===o),n.classes.toggle("tooltip-ne","bc-tr"===o),n.moveRel(e.target,o)}})},statusLevel:function(e){return arguments.length>0&&this.state.set("statusLevel",e),this.state.get("statusLevel")},statusMessage:function(e){return arguments.length>0&&this.state.set("statusMessage",e),this.state.get("statusMessage")},showMenu:function(){var e,t=this,n=t.settings;t.menu||(e=n.menu||[],e.length?e={type:"menu",items:e}:e.type=e.type||"menu",t.menu=oe.create(e).parent(t).renderTo(t.getContainerElm()),t.fire("createmenu"),t.menu.reflow(),t.menu.on("cancel",function(e){e.control===t.menu&&t.focus()}),t.menu.on("show hide",function(e){e.control.items().each(function(e){e.active(e.value()===t.value())})}).fire("show"),t.menu.on("select",function(e){t.value(e.control.value())}),t.on("focusin",function(e){"INPUT"===e.target.tagName.toUpperCase()&&t.menu.hide()}),t.aria("expanded",!0)),t.menu.show(),t.menu.layoutRect({w:t.layoutRect().w}),t.menu.moveRel(t.getEl(),t.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var e,t,n=this,r=n.getEl(),o=n.getEl("open"),i=n.layoutRect(),a=0,s=r.firstChild;n.statusLevel()&&"none"!==n.statusLevel()&&(a=parseInt(Vt.getRuntimeStyle(s,"padding-right"),10)-parseInt(Vt.getRuntimeStyle(s,"padding-left"),10)),e=o?i.w-Vt.getSize(o).width-10:i.w-10;var l=document;return l.all&&(!l.documentMode||l.documentMode<=8)&&(t=n.layoutRect().h-2+"px"),zt(s).css({width:e-a,lineHeight:t}),n._super(),n},postRender:function(){var e=this;return zt(this.getEl("inp")).on("change",function(t){e.state.set("value",t.target.value),e.fire("change",t)}),e._super()},renderHtml:function(){var e,t,n=this,r=n._id,o=n.settings,i=n.classPrefix,a=n.state.get("value")||"",s="",l="",u="";return"spellcheck"in o&&(l+=' spellcheck="'+o.spellcheck+'"'),o.maxLength&&(l+=' maxlength="'+o.maxLength+'"'),o.size&&(l+=' size="'+o.size+'"'),o.subtype&&(l+=' type="'+o.subtype+'"'),u='<i id="'+r+'-status" class="mce-status mce-ico" style="display: none"></i>',n.disabled()&&(l+=' disabled="disabled"'),e=o.icon,e&&"caret"!==e&&(e=i+"ico "+i+"i-"+o.icon),t=n.state.get("text"),(e||t)&&(s='<div id="'+r+'-open" class="'+i+"btn "+i+'open" tabIndex="-1" role="button"><button id="'+r+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!==e?'<i class="'+e+'"></i>':'<i class="'+i+'caret"></i>')+(t?(e?" ":"")+t:"")+"</button></div>",n.classes.add("has-open")),'<div id="'+r+'" class="'+n.classes+'"><input id="'+r+'-inp" class="'+i+'textbox" value="'+n.encode(a,!1)+'" hidefocus="1"'+l+' placeholder="'+n.encode(o.placeholder)+'" />'+u+s+"</div>"},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(e,t){var n=this;if(0===e.length)return void n.hideMenu();var r=function(e,t){return function(){n.fire("selectitem",{title:t,value:e})}};n.menu?n.menu.items().remove():n.menu=oe.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(n).renderTo(),I.each(e,function(e){n.menu.add({text:e.title,url:e.previewUrl,match:t,classes:"menu-item-ellipsis",onclick:r(e.value,e.title)})}),n.menu.renderNew(),n.hideMenu(),n.menu.on("cancel",function(e){e.control.parent()===n.menu&&(e.stopPropagation(),n.focus(),n.hideMenu())}),n.menu.on("select",function(){n.focus()});var o=n.layoutRect().w;n.menu.layoutRect({w:o,minW:0,maxW:o}),n.menu.repaint(),n.menu.reflow(),n.menu.show(),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){var e=this;e.state.on("change:value",function(t){e.getEl("inp").value!==t.value&&(e.getEl("inp").value=t.value)}),e.state.on("change:disabled",function(t){e.getEl("inp").disabled=t.value}),e.state.on("change:statusLevel",function(t){var n=e.getEl("status"),r=e.classPrefix,o=t.value;Vt.css(n,"display","none"===o?"none":""),Vt.toggleClass(n,r+"i-checkmark","ok"===o),Vt.toggleClass(n,r+"i-warning","warn"===o),Vt.toggleClass(n,r+"i-error","error"===o),e.classes.toggle("has-status","none"!==o),e.repaint()}),Vt.on(e.getEl("status"),"mouseleave",function(){e.tooltip().hide()}),e.on("cancel",function(t){e.menu&&e.menu.visible()&&(t.stopPropagation(),e.hideMenu())});var t=function(e,t){t&&t.items().length>0&&t.items().eq(e)[0].focus()};return e.on("keydown",function(n){var r=n.keyCode;"INPUT"===n.target.nodeName&&(r===ar.DOWN?(n.preventDefault(),e.fire("autocomplete"),t(0,e.menu)):r===ar.UP&&(n.preventDefault(),t(-1,e.menu)))}),e._super()},remove:function(){zt(this.getEl("inp")).off(),this.menu&&this.menu.remove(),this._super()}}),lr=sr.extend({init:function(e){var t=this;e.spellcheck=!1,e.onaction&&(e.icon="none"),t._super(e),t.classes.add("colorbox"),t.on("change keyup postrender",function(){t.repaintColor(t.value())})},repaintColor:function(e){var t=this.getEl("open"),n=t?t.getElementsByTagName("i")[0]:null;if(n)try{n.style.background=e}catch(e){}},bindStates:function(){var e=this;return e.state.on("change:value",function(t){e.state.get("rendered")&&e.repaintColor(t.value)}),e._super()}}),ur=nr.extend({showPanel:function(){var e=this,t=e.settings;if(e.classes.add("opened"),e.panel)e.panel.show();else{var n=t.panel;n.type&&(n={layout:"grid",items:n}),n.role=n.role||"dialog",n.popover=!0,n.autohide=!0,n.ariaRoot=!0,e.panel=new Ln(n).on("hide",function(){e.classes.remove("opened")}).on("cancel",function(t){t.stopPropagation(),e.focus(),e.hidePanel()}).parent(e).renderTo(e.getContainerElm()),e.panel.fire("show"),e.panel.reflow()}var r=["bc-tc","bc-tl","bc-tr"],o=["bc-tc","bc-tr","bc-tl","tc-bc","tc-br","tc-bl"],i=e.panel.testMoveRel(e.getEl(),t.popoverAlign||(e.isRtl()?r:o));e.panel.classes.toggle("start","l"===i.substr(-1)),e.panel.classes.toggle("end","r"===i.substr(-1));var a="t"===i.substr(0,1);e.panel.classes.toggle("bottom",!a),e.panel.classes.toggle("top",a),e.panel.moveRel(e.getEl(),i)},hidePanel:function(){var e=this;e.panel&&e.panel.hide()},postRender:function(){var e=this;return e.aria("haspopup",!0),e.on("click",function(t){t.control===e&&(e.panel&&e.panel.visible()?e.hidePanel():(e.showPanel(),e.panel.focus(!!t.aria)))}),e._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}}),cr=re.DOM,dr=ur.extend({init:function(e){this._super(e),this.classes.add("splitbtn"),this.classes.add("colorbutton")},color:function(e){return e?(this._color=e,this.getEl("preview").style.backgroundColor=e,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.state.get("text"),o=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"",i=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"",a="";return r&&(e.classes.add("btn-has-text"),a='<span class="'+n+'txt">'+e.encode(r)+"</span>"),'<div id="'+t+'" class="'+e.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(o?'<i class="'+o+'"'+i+"></i>":"")+'<span id="'+t+'-preview" class="'+n+'preview"></span>'+a+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1"> <i class="'+n+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(n){n.aria&&"down"===n.aria.key||n.control!==e||cr.getParent(n.target,"."+e.classPrefix+"open")||(n.stopImmediatePropagation(),t.call(e,n))}),delete e.settings.onclick,e._super()}}),fr=tinymce.util.Tools.resolve("tinymce.util.Color"),hr=Vn.extend({Defaults:{classes:"widget colorpicker"},init:function(e){this._super(e)},postRender:function(){function e(e,t){var n,r,o=Vt.getPos(e);return n=t.pageX-o.x,r=t.pageY-o.y,n=Math.max(0,Math.min(n/e.clientWidth,1)),r=Math.max(0,Math.min(r/e.clientHeight,1)),{x:n,y:r}}function t(e,t){var n=(360-e.h)/360;Vt.css(a,{top:100*n+"%"}),t||Vt.css(l,{left:e.s+"%",top:100-e.v+"%"}),s.style.background=fr({s:100,v:100,h:e.h}).toHex(),u.color().parse({s:e.s,v:e.v,h:e.h})}function n(n){var r;r=e(s,n),o.s=100*r.x,o.v=100*(1-r.y),t(o),u.fire("change")}function r(n){var r;r=e(i,n),o=c.toHsv(),o.h=360*(1-r.y),t(o,!0),u.fire("change")}var o,i,a,s,l,u=this,c=u.color();i=u.getEl("h"),a=u.getEl("hp"),s=u.getEl("sv"),l=u.getEl("svp"),u._repaint=function(){o=c.toHsv(),t(o)},u._super(),u._svdraghelper=new d(u._id+"-sv",{start:n,drag:n}),u._hdraghelper=new d(u._id+"-h",{start:r,drag:r}),u._repaint()},rgb:function(){return this.color().toRgb()},value:function(e){var t=this;if(!arguments.length)return t.color().toHex();t.color().parse(e),t._rendered&&t._repaint()},color:function(){return this._color||(this._color=fr()),this._color},renderHtml:function(){var e,t=this,n=t._id,r=t.classPrefix,o="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000";return e='<div id="'+n+'-h" class="'+r+'colorpicker-h" style="background: -ms-linear-gradient(top,'+o+");background: linear-gradient(to bottom,"+o+');">'+function(){var e,t,n,i,a="";for(n="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",i=o.split(","),e=0,t=i.length-1;e<t;e++)a+='<div class="'+r+'colorpicker-h-chunk" style="height:'+100/t+"%;"+n+i[e]+",endColorstr="+i[e+1]+");-ms-"+n+i[e]+",endColorstr="+i[e+1]+')"></div>';return a}()+'<div id="'+n+'-hp" class="'+r+'colorpicker-h-marker"></div></div>','<div id="'+n+'" class="'+t.classes+'"><div id="'+n+'-sv" class="'+r+'colorpicker-sv"><div class="'+r+'colorpicker-overlay1"><div class="'+r+'colorpicker-overlay2"><div id="'+n+'-svp" class="'+r+'colorpicker-selector1"><div class="'+r+'colorpicker-selector2"></div></div></div></div></div>'+e+"</div>"}}),pr=Vn.extend({init:function(e){var t=this;e=I.extend({height:100,text:"Drop an image here",multiple:!1,accept:null},e),t._super(e),t.classes.add("dropzone"),e.multiple&&t.classes.add("multiple")},renderHtml:function(){var e,t,n=this,r=n.settings;return e={id:n._id,hidefocus:"1"},t=Vt.create("div",e,"<span>"+this.translate(r.text)+"</span>"),r.height&&Vt.css(t,"height",r.height+"px"),r.width&&Vt.css(t,"width",r.width+"px"),t.className=n.classes,t.outerHTML},postRender:function(){var e=this,t=function(t){t.preventDefault(),e.classes.toggle("dragenter"),e.getEl().className=e.classes},n=function(t){var n=e.settings.accept;if("string"!=typeof n)return t;var r=new RegExp("("+n.split(/\s*,\s*/).join("|")+")$","i");return I.grep(t,function(e){return r.test(e.name)})};e._super(),e.$el.on("dragover",function(e){e.preventDefault()}),e.$el.on("dragenter",t),e.$el.on("dragleave",t),e.$el.on("drop",function(t){if(t.preventDefault(),!e.state.get("disabled")){var r=n(t.dataTransfer.files);e.value=function(){return r.length?e.settings.multiple?r:r[0]:null},r.length&&e.fire("change",t)}})},remove:function(){this.$el.off(),this._super()}}),mr=Vn.extend({init:function(e){var t=this;e.delimiter||(e.delimiter="\xbb"),t._super(e),t.classes.add("path"),t.canFocus=!0,t.on("click",function(e){var n;(n=e.target.getAttribute("data-index"))&&t.fire("select",{value:t.row()[n],index:n})}),t.row(t.settings.row)},focus:function(){var e=this;return e.getEl().firstChild.focus(),e},row:function(e){return arguments.length?(this.state.set("row",e),this):this.state.get("row")},renderHtml:function(){var e=this;return'<div id="'+e._id+'" class="'+e.classes+'">'+e._getDataPathHtml(e.state.get("row"))+"</div>"},bindStates:function(){var e=this;return e.state.on("change:row",function(t){e.innerHtml(e._getDataPathHtml(t.value))}),e._super()},_getDataPathHtml:function(e){var t,n,r=this,o=e||[],i="",a=r.classPrefix;for(t=0,n=o.length;t<n;t++)i+=(t>0?'<div class="'+a+'divider" aria-hidden="true"> '+r.settings.delimiter+" </div>":"")+'<div role="button" class="'+a+"path-item"+(t===n-1?" "+a+"last":"")+'" data-index="'+t+'" tabindex="-1" id="'+r._id+"-"+t+'" aria-level="'+(t+1)+'">'+o[t].name+"</div>";return i||(i='<div class="'+a+'path-item">\xa0</div>'),i}}),gr=mr.extend({postRender:function(){function e(e){if(1===e.nodeType){if("BR"===e.nodeName||e.getAttribute("data-mce-bogus"))return!0;if("bookmark"===e.getAttribute("data-mce-type"))return!0}return!1}var t=this,n=t.settings.editor;return!1!==n.settings.elementpath&&(t.on("select",function(e){n.focus(),n.selection.select(this.row()[e.index].element),n.nodeChanged()}),n.on("nodeChange",function(r){for(var o=[],i=r.parents,a=i.length;a--;)if(1===i[a].nodeType&&!e(i[a])){var s=n.fire("ResolveName",{name:i[a].nodeName.toLowerCase(),target:i[a]});if(s.isDefaultPrevented()||o.push({name:s.name,element:i[a]}),s.isPropagationStopped())break}t.row(o)})),t._super()}}),vr=On.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.classes.add("formitem"),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+n+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}}),br=On.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:15,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var e=this,t=e.items();e.settings.formItemDefaults||(e.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),t.each(function(t){var n,r=t.settings.label;r&&(n=new vr(I.extend({items:{type:"label",id:t._id+"-l",text:r,flex:0,forId:t._id,disabled:t.disabled()}},e.settings.formItemDefaults)),n.type="formitem",t.aria("labelledby",t._id+"-l"),void 0===t.settings.flex&&(t.settings.flex=1),e.replace(t,n),n.add(t))})},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){var e=this;e._super(),e.fromJSON(e.settings.data)},bindStates:function(){function e(){var e,n,r,o=0,i=[];if(!1!==t.settings.labelGapCalc)for(r="children"===t.settings.labelGapCalc?t.find("formitem"):t.items(),r.filter("formitem").each(function(e){var t=e.items()[0],n=t.getEl().clientWidth;o=n>o?n:o,i.push(t)}),n=t.settings.labelGap||0,e=i.length;e--;)i[e].settings.minWidth=o+n}var t=this;t._super(),t.on("show",e),e()}}),yr=br.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.preRender(),t.preRender(e),'<fieldset id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+n+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></fieldset>"}}),wr=0,xr=function(e){var t=new Date,n=t.getTime(),r=Math.floor(1e9*Math.random());return wr++,e+"_"+r+wr+String(n)},Cr=function(e,t){var n=t||document,r=n.createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1)throw console.error("HTML does not have a single root node",e),"HTML must have a single root node";return _r(r.childNodes[0])},kr=function(e,t){var n=t||document,r=n.createElement(e);return _r(r)},Nr=function(e,t){var n=t||document,r=n.createTextNode(e);return _r(r)},_r=function(e){if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:ve(e)}},Sr=function(e,t,n){var r=e.dom();return Te.from(r.elementFromPoint(t,n)).map(_r)},Tr={fromHtml:Cr,fromTag:kr,fromText:Nr,fromDom:_r,fromPoint:Sr},Er=function(e){var t,n=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return n||(n=!0,t=e.apply(null,r)),t}},Or={ATTRIBUTE:Node.ATTRIBUTE_NODE,CDATA_SECTION:Node.CDATA_SECTION_NODE,COMMENT:Node.COMMENT_NODE,DOCUMENT:Node.DOCUMENT_NODE,DOCUMENT_TYPE:Node.DOCUMENT_TYPE_NODE,DOCUMENT_FRAGMENT:Node.DOCUMENT_FRAGMENT_NODE,ELEMENT:Node.ELEMENT_NODE,TEXT:Node.TEXT_NODE,PROCESSING_INSTRUCTION:Node.PROCESSING_INSTRUCTION_NODE,ENTITY_REFERENCE:Node.ENTITY_REFERENCE_NODE,ENTITY:Node.ENTITY_NODE,NOTATION:Node.NOTATION_NODE},Ar=function(e){return e.dom().nodeName.toLowerCase()},Dr=function(e){return e.dom().nodeType},Rr=function(e){return e.dom().nodeValue},Mr=function(e){return function(t){return Dr(t)===e}},Pr=function(e){return Dr(e)===Or.COMMENT||"#comment"===Ar(e)},Lr=Mr(Or.ELEMENT),Ir=Mr(Or.TEXT),jr=Mr(Or.DOCUMENT),Br={name:Ar,type:Dr,value:Rr,isElement:Lr,isText:Ir,isDocument:jr,isComment:Pr},Fr=function(e){var t=Br.isText(e)?e.dom().parentNode:e.dom();return void 0!==t&&null!==t&&t.ownerDocument.body.contains(t)},Hr=Er(function(){return Ur(Tr.fromDom(document))}),Ur=function(e){var t=e.dom().body;if(null===t||void 0===t)throw"Body is not available yet";return Tr.fromDom(t)},zr={body:Hr,getBody:Ur,inBody:Fr},Wr=function(e,t){var n=[],r=function(e){return n.push(e),t(e)},o=t(e);do{o=o.bind(r)}while(o.isSome());return n},Vr={toArray:Wr},qr="undefined"!=typeof window?window:Function("return this;")(),$r=function(e,t){for(var n=void 0!==t&&null!==t?t:qr,r=0;r<e.length&&void 0!==n&&null!==n;++r)n=n[e[r]];return n},Kr=function(e,t){var n=e.split(".");return $r(n,t)},Gr=function(e,t){return Kr(e,t)},Xr=function(e,t){var n=Gr(e,t);if(void 0===n||null===n)throw e+" not available on this browser";return n},Yr={getOrDie:Xr},Jr=function(){return Yr.getOrDie("Node")},Qr=function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)},Zr=function(e,t){return Qr(e,t,Jr().DOCUMENT_POSITION_PRECEDING)},eo=function(e,t){return Qr(e,t,Jr().DOCUMENT_POSITION_CONTAINED_BY)},to={documentPositionPreceding:Zr,documentPositionContainedBy:eo},no=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}},ro=function(e,t){var n=no(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return ao(r(1),r(2))},oo=function(e,t){var n=String(t).toLowerCase();return 0===e.length?io():ro(e,n)},io=function(){return ao(0,0)},ao=function(e,t){return{major:e,minor:t}},so={nu:ao,detect:oo,unknown:io},lo=function(e,t){return function(){return t===e}},uo=function(){return co({current:void 0,version:so.unknown()})},co=function(e){var t=e.current;return{current:t,version:e.version,isEdge:lo("Edge",t),isChrome:lo("Chrome",t),isIE:lo("IE",t),isOpera:lo("Opera",t),isFirefox:lo("Firefox",t),isSafari:lo("Safari",t)}},fo={unknown:uo,nu:co,edge:ve("Edge"),chrome:ve("Chrome"),ie:ve("IE"),opera:ve("Opera"),firefox:ve("Firefox"),safari:ve("Safari")},ho=function(e,t){return function(){return t===e}},po=function(){return mo({current:void 0,version:so.unknown()})},mo=function(e){var t=e.current;return{current:t,version:e.version,isWindows:ho("Windows",t),isiOS:ho("iOS",t),isAndroid:ho("Android",t),isOSX:ho("OSX",t),isLinux:ho("Linux",t),isSolaris:ho("Solaris",t),isFreeBSD:ho("FreeBSD",t)}},go={unknown:po,nu:mo,windows:ve("Windows"),ios:ve("iOS"),android:ve("Android"),linux:ve("Linux"),osx:ve("OSX"),solaris:ve("Solaris"),freebsd:ve("FreeBSD")},vo=function(e,t){var n=String(t).toLowerCase();return tt(e,function(e){return e.search(n)})},bo=function(e,t){return vo(e,t).map(function(e){var n=so.detect(e.versionRegexes,t);return{current:e.name,version:n}})},yo=function(e,t){return vo(e,t).map(function(e){var n=so.detect(e.versionRegexes,t);return{current:e.name,version:n}})},wo={detectBrowser:bo,detectOs:yo},xo=function(e,t){return-1!==e.indexOf(t)},Co=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ko=function(e){return function(t){return xo(t,e)}},No=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return xo(e,"edge/")&&xo(e,"chrome")&&xo(e,"safari")&&xo(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Co],search:function(e){return xo(e,"chrome")&&!xo(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return xo(e,"msie")||xo(e,"trident")}},{name:"Opera",versionRegexes:[Co,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ko("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ko("firefox")},{name:"Safari",versionRegexes:[Co,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(xo(e,"safari")||xo(e,"mobile/"))&&xo(e,"applewebkit")}}],_o=[{name:"Windows",search:ko("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return xo(e,"iphone")||xo(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ko("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:ko("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ko("linux"),versionRegexes:[]},{name:"Solaris",search:ko("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ko("freebsd"),versionRegexes:[]}],So={browsers:ve(No),oses:ve(_o)},To=function(e){var t=So.browsers(),n=So.oses(),r=wo.detectBrowser(t,e).fold(fo.unknown,fo.nu),o=wo.detectOs(n,e).fold(go.unknown,go.nu);return{browser:r,os:o,deviceType:S(o,r,e)}},Eo={detect:To},Oo=Er(function(){var e=navigator.userAgent;return Eo.detect(e)}),Ao={detect:Oo},Do=Or.ELEMENT,Ro=Or.DOCUMENT,Mo=function(e,t){var n=e.dom();if(n.nodeType!==Do)return!1;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Po=function(e){return e.nodeType!==Do&&e.nodeType!==Ro||0===e.childElementCount},Lo=function(e,t){var n=void 0===t?document:t.dom();return Po(n)?[]:Je(n.querySelectorAll(e),Tr.fromDom)},Io=function(e,t){var n=void 0===t?document:t.dom();return Po(n)?Te.none():Te.from(n.querySelector(e)).map(Tr.fromDom)},jo={all:Lo,is:Mo,one:Io},Bo=function(e,t){return e.dom()===t.dom()},Fo=function(e,t){return e.dom().isEqualNode(t.dom())},Ho=function(e,t){return Ye(t,be(Bo,e))},Uo=function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},zo=function(e,t){return to.documentPositionContainedBy(e.dom(),t.dom())},Wo=Ao.detect().browser,Vo=Wo.isIE()?zo:Uo,qo={eq:Bo,isEqualNode:Fo,member:Ho,contains:Vo,is:jo.is},$o=function(e){return Tr.fromDom(e.dom().ownerDocument)},Ko=function(e){return Tr.fromDom(e.dom().ownerDocument.documentElement)},Go=function(e){var t=e.dom(),n=t.ownerDocument.defaultView;return Tr.fromDom(n)},Xo=function(e){var t=e.dom();return Te.from(t.parentNode).map(Tr.fromDom)},Yo=function(e){return Xo(e).bind(function(t){var n=oi(t);return nt(n,function(t){return qo.eq(e,t)})})},Jo=function(e,t){for(var n=$e(t)?t:ve(!1),r=e.dom(),o=[];null!==r.parentNode&&void 0!==r.parentNode;){var i=r.parentNode,a=Tr.fromDom(i);if(o.push(a),!0===n(a))break;r=i}return o},Qo=function(e){var t=function(t){return Ze(t,function(t){return!qo.eq(e,t)})};return Xo(e).map(oi).map(t).getOr([])},Zo=function(e){var t=e.dom();return Te.from(t.offsetParent).map(Tr.fromDom)},ei=function(e){var t=e.dom();return Te.from(t.previousSibling).map(Tr.fromDom)},ti=function(e){var t=e.dom();return Te.from(t.nextSibling).map(Tr.fromDom)},ni=function(e){return st(Vr.toArray(e,ei))},ri=function(e){return Vr.toArray(e,ti)},oi=function(e){var t=e.dom();return Je(t.childNodes,Tr.fromDom)},ii=function(e,t){var n=e.dom().childNodes;return Te.from(n[t]).map(Tr.fromDom)},ai=function(e){return ii(e,0)},si=function(e){return ii(e,e.dom().childNodes.length-1)},li=function(e){return e.dom().childNodes.length},ui=function(e){return e.dom().hasChildNodes()},ci=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments");var r={};return Qe(e,function(e,n){r[e]=ve(t[n])}),r}}("element","offset"),di=function(e,t){var n=oi(e);return n.length>0&&t<n.length?ci(n[t],0):ci(e,t)},fi={owner:$o,defaultView:Go,documentElement:Ko,parent:Xo,findIndex:Yo,parents:Jo,siblings:Qo,prevSibling:ei,offsetParent:Zo,prevSiblings:ni,nextSibling:ti,nextSiblings:ri,children:oi,child:ii,firstChild:ai,lastChild:si,childNodesCount:li,hasChildNodes:ui,leaf:di},hi=function(e){return vi(zr.body(),e)},pi=function(e,t,n){return Ze(fi.parents(e,n),t)},mi=function(e,t){return Ze(fi.siblings(e),t)},gi=function(e,t){return Ze(fi.children(e),t)},vi=function(e,t){var n=[];return Qe(fi.children(e),function(e){t(e)&&(n=n.concat([e])),n=n.concat(vi(e,t))}),n},bi={all:hi,ancestors:pi,siblings:mi,children:gi,descendants:vi},yi=function(e){return jo.all(e)},wi=function(e,t,n){return bi.ancestors(e,function(e){return jo.is(e,t)},n)},xi=function(e,t){return bi.siblings(e,function(e){return jo.is(e,t)})},Ci=function(e,t){return bi.children(e,function(e){return jo.is(e,t)})},ki=function(e,t){return jo.all(t,e)},Ni={all:yi,ancestors:wi,siblings:xi,children:Ci,descendants:ki},_i=I.trim,Si=function(e){return function(t){if(t&&1===t.nodeType){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},Ti=Si("true"),Ei=Si("false"),Oi=function(e,t,n,r,o){return{type:e,title:t,url:n,level:r,attach:o}},Ai=function(e){for(;e=e.parentNode;){var t=e.contentEditable;if(t&&"inherit"!==t)return Ti(e)}return!1},Di=function(e,t){return Je(Ni.descendants(Tr.fromDom(t),e),function(e){return e.dom()})},Ri=function(e){return e.innerText||e.textContent},Mi=function(e){return e.id?e.id:xr("h")},Pi=function(e){return e&&"A"===e.nodeName&&(e.id||e.name)},Li=function(e){return Pi(e)&&ji(e)},Ii=function(e){return e&&/^(H[1-6])$/.test(e.nodeName)},ji=function(e){return Ai(e)&&!Ei(e)},Bi=function(e){return Ii(e)&&ji(e)},Fi=function(e){return Ii(e)?parseInt(e.nodeName.substr(1),10):0},Hi=function(e){var t=Mi(e),n=function(){e.id=t};return Oi("header",Ri(e),"#"+t,Fi(e),n)},Ui=function(e){var t=e.id||e.name,n=Ri(e);return Oi("anchor",n||"#"+t,"#"+t,0,me)},zi=function(e){return Je(Ze(e,Bi),Hi)},Wi=function(e){return Je(Ze(e,Li),Ui)},Vi=function(e){return Di("h1,h2,h3,h4,h5,h6,a:not([href])",e)},qi=function(e){return _i(e.title).length>0},$i=function(e){var t=Vi(e);return Ze(zi(t).concat(Wi(t)),qi)},Ki={find:$i},Gi=function(){return window.tinymce?window.tinymce.activeEditor:L.activeEditor},Xi={},Yi=function(){Xi={}},Ji=function(e){return{title:e.title,value:{title:{raw:e.title},url:e.url,attach:e.attach}}},Qi=function(e){return I.map(e,Ji)},Zi=function(e,t){return{title:e,value:{title:e,url:t,attach:me}}},ea=function(e,t){return!Ye(t,function(t){return t.url===e})},ta=function(e,t,n){var r=t in e?e[t]:n;return!1===r?null:r},na=function(e,t,n,r){var o={title:"-"},i=function(e){var r=e.hasOwnProperty(n)?e[n]:[],o=Ze(r,function(e){return ea(e,t)});return I.map(o,function(e){return{title:e,value:{title:e,url:e,attach:me}}})},a=function(e){var n=Ze(t,function(t){return t.type===e});return Qi(n)};return!1===r.typeahead_urls?[]:"file"===n?function(e){return et(e,function(e,t){return 0===e.length||0===t.length?e.concat(t):e.concat(o,t)},[])}([oa(e,i(Xi)),oa(e,a("header")),oa(e,function(){var e=a("anchor"),t=ta(r,"anchor_top","#top"),n=ta(r,"anchor_bottom","#bottom");return null!==t&&e.unshift(Zi("<top>",t)),null!==n&&e.push(Zi("<bottom>",n)),e}())]):oa(e,i(Xi))},ra=function(e,t){var n=Xi[t];/^https?/.test(e)&&(n?Xe(n,e).isNone()&&(Xi[t]=n.slice(0,5).concat(e)):Xi[t]=[e])},oa=function(e,t){var n=e.toLowerCase(),r=I.grep(t,function(e){return-1!==e.title.toLowerCase().indexOf(n)});return 1===r.length&&r[0].title===e?[]:r},ia=function(e){var t=e.title;return t.raw?t.raw:t},aa=function(e,t,n,r){var o=function(o){var i=Ki.find(n),a=na(o,i,r,t);e.showAutoComplete(a,o)};e.on("autocomplete",function(){o(e.value())}),e.on("selectitem",function(t){var n=t.value;e.value(n.url);var o=ia(n);"image"===r?e.fire("change",{meta:{alt:o,attach:n.attach}}):e.fire("change",{meta:{text:o,attach:n.attach}}),e.focus()}),e.on("click",function(t){0===e.value().length&&"INPUT"===t.target.nodeName&&o("")}),e.on("PostRender",function(){e.getRoot().on("submit",function(t){t.isDefaultPrevented()||ra(e.value(),r)})})},sa=function(e){var t=e.status,n=e.message;return"valid"===t?{status:"ok",message:n}:"unknown"===t?{status:"warn",message:n}:"invalid"===t?{status:"warn",message:n}:{status:"none",message:""}},la=function(e,t,n){var r=t.filepicker_validator_handler;if(r){var o=function(t){if(0===t.length)return void e.statusLevel("none");r({url:t,type:n},function(t){var n=sa(t);e.statusMessage(n.message),e.statusLevel(n.status)})};e.state.on("change:value",function(e){o(e.value)})}},ua=sr.extend({Statics:{clearHistory:Yi},init:function(e){var t,n,r,o=this,i=Gi(),a=i.settings,s=e.filetype;e.spellcheck=!1,r=a.file_picker_types||a.file_browser_callback_types,r&&(r=I.makeMap(r,/[, ]/)),r&&!r[s]||(n=a.file_picker_callback,!n||r&&!r[s]?!(n=a.file_browser_callback)||r&&!r[s]||(t=function(){n(o.getEl("inp").id,o.value(),s,window)}):t=function(){var e=o.fire("beforecall").meta;e=I.extend({filetype:s},e),n.call(i,function(e,t){o.value(e).fire("change",{meta:t})},o.value(),e)}),t&&(e.icon="browse",e.onaction=t),o._super(e),o.classes.add("filepicker"),aa(o,a,i.getBody(),s),la(o,a,s)}}),ca=tr.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox;e.items().filter(":visible").each(function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc&&e.recalc()})}}),da=tr.extend({recalc:function(e){var t,n,r,o,i,a,s,l,u,c,d,f,h,p,m,g,v,b,y,w,x,C,k,N,_,S,T,E,O,A,D,R,M,P,L,I,j,B,F=[],H=Math.max,U=Math.min;for(r=e.items().filter(":visible"),o=e.layoutRect(),i=e.paddingBox,a=e.settings,f=e.isRtl()?a.direction||"row-reversed":a.direction,s=a.align,l=e.isRtl()?a.pack||"end":a.pack,u=a.spacing||0,"row-reversed"!==f&&"column-reverse"!==f||(r=r.set(r.toArray().reverse()),f=f.split("-")[0]),"column"===f?(_="y",k="h",N="minH",S="maxH",E="innerH",T="top",O="deltaH",A="contentH",L="left",M="w",D="x",R="innerW",P="minW",I="right",j="deltaW",B="contentW"):(_="x",k="w",N="minW",S="maxW",E="innerW",T="left",O="deltaW",A="contentW",L="top",M="h",D="y",R="innerH",P="minH",I="bottom",j="deltaH",B="contentH"),d=o[E]-i[T]-i[T],C=c=0,t=0,n=r.length;t<n;t++)h=r[t],p=h.layoutRect(),m=h.settings,g=m.flex,d-=t<n-1?u:0,g>0&&(c+=g,p[S]&&F.push(h),p.flex=g),d-=p[N],(v=i[L]+p[P]+i[I])>C&&(C=v);if(w={},w[N]=d<0?o[N]-d+o[O]:o[E]-d+o[O],w[P]=C+o[j],w[A]=o[E]-d,w[B]=C,w.minW=U(w.minW,o.maxW),w.minH=U(w.minH,o.maxH),w.minW=H(w.minW,o.startMinWidth),w.minH=H(w.minH,o.startMinHeight),!o.autoResize||w.minW===o.minW&&w.minH===o.minH){for(y=d/c,t=0,n=F.length;t<n;t++)h=F[t],p=h.layoutRect(),b=p[S],v=p[N]+p.flex*y,v>b?(d-=p[S]-p[N],c-=p.flex,p.flex=0,p.maxFlexSize=b):p.maxFlexSize=0;for(y=d/c,x=i[T],w={},0===c&&("end"===l?x=d+i[T]:"center"===l?(x=Math.round(o[E]/2-(o[E]-d)/2)+i[T])<0&&(x=i[T]):"justify"===l&&(x=i[T],u=Math.floor(d/(r.length-1)))),w[D]=i[L],t=0,n=r.length;t<n;t++)h=r[t],p=h.layoutRect(),v=p.maxFlexSize||p[N],"center"===s?w[D]=Math.round(o[R]/2-p[M]/2):"stretch"===s?(w[M]=H(p[P]||0,o[R]-i[L]-i[I]),w[D]=i[L]):"end"===s&&(w[D]=o[R]-p[M]-i.top),p.flex>0&&(v+=p.flex*y),w[k]=v,w[_]=x,h.layoutRect(w),h.recalc&&h.recalc(),x+=v+u}else if(w.w=w.minW,w.h=w.minH,e.layoutRect(w),this.recalc(e),null===e._lastRect){var z=e.parent();z&&(z._lastRect=null,z.recalc())}}}),fa=er.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each(function(e){e.recalc&&e.recalc()})},isNative:function(){return!0}}),ha=function(e){return ba(zr.body(),e)},pa=function(e,t,n){for(var r=e.dom(),o=$e(n)?n:ve(!1);r.parentNode;){r=r.parentNode;var i=Tr.fromDom(r);if(t(i))return Te.some(i);if(o(i))break}return Te.none()},ma=function(e,t,n){return T(function(e){return t(e)},pa,e,t,n)},ga=function(e,t){var n=e.dom();return n.parentNode?va(Tr.fromDom(n.parentNode),function(n){return!qo.eq(e,n)&&t(n)}):Te.none()},va=function(e,t){return tt(e.dom().childNodes,ge(t,Tr.fromDom)).map(Tr.fromDom)},ba=function(e,t){var n=function(e){for(var r=0;r<e.childNodes.length;r++){if(t(Tr.fromDom(e.childNodes[r])))return Te.some(Tr.fromDom(e.childNodes[r]));var o=n(e.childNodes[r]);if(o.isSome())return o}return Te.none()};return n(e.dom())},ya={first:ha,ancestor:pa,closest:ma,sibling:ga,child:va,descendant:ba},wa=function(e){return jo.one(e)},xa=function(e,t,n){return ya.ancestor(e,function(e){return jo.is(e,t)},n)},Ca=function(e,t){return ya.sibling(e,function(e){return jo.is(e,t)})},ka=function(e,t){return ya.child(e,function(e){return jo.is(e,t)})},Na=function(e,t){return jo.one(t,e)},_a=function(e,t,n){return T(jo.is,xa,e,t,n)},Sa={first:wa,ancestor:xa,sibling:Ca,child:ka,descendant:Na,closest:_a},Ta=function(e,t){return function(){e.execCommand("mceToggleFormat",!1,t)}},Ea=function(e,t,n){var r=function(e){n(e,t)};e.formatter?e.formatter.formatChanged(t,r):e.on("init",function(){e.formatter.formatChanged(t,r)})},Oa=function(e,t){return function(n){Ea(e,t,function(e){n.control.active(e)})}},Aa=function(e){var t=["alignleft","aligncenter","alignright","alignjustify"],n=[{text:"Left",icon:"alignleft",onclick:Ta(e,"alignleft")},{text:"Center",icon:"aligncenter",onclick:Ta(e,"aligncenter")},{text:"Right",icon:"alignright",onclick:Ta(e,"alignright")},{text:"Justify",icon:"alignjustify",onclick:Ta(e,"alignjustify")}];e.addMenuItem("align",{text:"Align",menu:n}),e.addButton("align",{type:"menubutton",icon:"alignleft",menu:n,onShowMenu:function(n){var r=n.control.menu;I.each(t,function(t,n){r.items().eq(n).each(function(n){return n.active(e.formatter.match(t))})})},onPostRender:function(n){var r=n.control;I.each(t,function(t,n){Ea(e,t,function(e){r.icon("alignleft"),e&&r.icon(t)})})}}),I.each({alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},function(t,n){e.addButton(n,{active:!1,tooltip:t[0],cmd:t[1],onPostRender:Oa(e,n)})})},Da={register:Aa},Ra=function(e){return e?e.split(",")[0]:""},Ma=function(e,t){var n,r=t?t.toLowerCase():"";return I.each(e,function(e){e.value.toLowerCase()===r&&(n=e.value)}),I.each(e,function(e){n||Ra(e.value).toLowerCase()!==Ra(r).toLowerCase()||(n=e.value)}),n},Pa=function(e,t){return function(){var n=this;n.state.set("value",null),e.on("init nodeChange",function(r){var o=e.queryCommandValue("FontName"),i=Ma(t,o);n.value(i||null),!i&&o&&n.text(Ra(o))})}},La=function(e){e=e.replace(/;$/,"").split(";");for(var t=e.length;t--;)e[t]=e[t].split("=");return e},Ia=function(e){var t=La(e.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats");return I.map(t,function(e){return{text:{raw:e[0]},value:e[1],textStyle:-1===e[1].indexOf("dings")?"font-family:"+e[1]:""}})},ja=function(e){e.addButton("fontselect",function(){var t=Ia(e);return{type:"listbox",text:"Font Family",tooltip:"Font Family",values:t,fixedWidth:!0,onPostRender:Pa(e,t),onselect:function(t){t.control.settings.value&&e.execCommand("FontName",!1,t.control.settings.value)}}})},Ba=function(e){ja(e)},Fa={register:Ba},Ha=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n},Ua=function(e,t){return/[0-9.]+px$/.test(e)?Ha(72*parseInt(e,10)/96,t||0)+"pt":e},za=function(e,t,n){var r;return I.each(e,function(e){e.value===n?r=n:e.value===t&&(r=t)}),r},Wa=function(e,t){return function(){var n=this;e.on("init nodeChange",function(r){var o,i,a,s;if(o=e.queryCommandValue("FontSize"))for(a=3;!s&&a>=0;a--)i=Ua(o,a),s=za(t,i,o);n.value(s||null),s||n.text(i)})}},Va=function(e){var t=e.settings.fontsize_formats||"8pt 10pt 12pt 14pt 18pt 24pt 36pt";return I.map(t.split(" "),function(e){var t=e,n=e,r=e.split("=");return r.length>1&&(t=r[0],n=r[1]),{text:t,value:n}})},qa=function(e){e.addButton("fontsizeselect",function(){var t=Va(e);return{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:t,fixedWidth:!0,onPostRender:Wa(e,t),onclick:function(t){t.control.settings.value&&e.execCommand("FontSize",!1,t.control.settings.value)}}})},$a=function(e){qa(e)},Ka={register:$a},Ga=function(e,t){var n=t.length;return I.each(t,function(t){t.menu&&(t.hidden=0===Ga(e,t.menu));var r=t.format;r&&(t.hidden=!e.formatter.canApply(r)),t.hidden&&n--}),n},Xa=function(e,t){var n=t.items().length;return t.items().each(function(t){t.menu&&t.visible(Xa(e,t.menu)>0),!t.menu&&t.settings.menu&&t.visible(Ga(e,t.settings.menu)>0);var r=t.settings.format;r&&t.visible(e.formatter.canApply(r)),t.visible()||n--}),n},Ya=function(e){var t=0,n=[],r=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],o=function(e){var r=[];if(e)return I.each(e,function(e){var i={text:e.title,icon:e.icon};if(e.items)i.menu=o(e.items);else{var a=e.format||"custom"+t++;e.format||(e.name=a,n.push(e)),i.format=a,i.cmd=e.cmd}r.push(i)}),r};return e.on("init",function(){I.each(n,function(t){e.formatter.register(t.name,t)})}),{type:"menu",items:function(){return o(e.settings.style_formats_merge?e.settings.style_formats?r.concat(e.settings.style_formats):r:e.settings.style_formats||r)}(),onPostRender:function(t){e.fire("renderFormatsMenu",{control:t.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return e.formatter.getCssText(this.settings.format)},onPostRender:function(){var t=this;t.parent().on("show",function(){var n,r;n=t.settings.format,n&&(t.disabled(!e.formatter.canApply(n)),t.active(e.formatter.match(n))),(r=t.settings.cmd)&&t.active(e.queryCommandState(r))})},onclick:function(){this.settings.format&&Ta(e,this.settings.format)(),this.settings.cmd&&e.execCommand(this.settings.cmd)}}}},Ja=function(e,t){e.addMenuItem("formats",{text:"Formats",menu:t})},Qa=function(e,t){e.addButton("styleselect",{type:"menubutton",text:"Formats",menu:t,onShowMenu:function(){e.settings.style_formats_autohide&&Xa(e,this.menu)}})},Za=function(e){var t=Ya(e);Ja(e,t),Qa(e,t)},es={register:Za},ts=function(e){e=e.replace(/;$/,"").split(";");for(var t=e.length;t--;)e[t]=e[t].split("=");return e},ns=function(e,t,n){return function(){var r=this;e.on("nodeChange",function(o){var i=e.formatter,a=null;I.each(o.parents,function(e){if(I.each(t,function(t){if(n?i.matchNode(e,n,{value:t.value})&&(a=t.value):i.matchNode(e,t.value)&&(a=t.value),a)return!1}),a)return!1}),r.value(a)})}},rs=function(e,t){return function(){var n=[];return I.each(t,function(t){n.push({text:t[0],value:t[1],textStyle:function(){return e.formatter.getCssText(t[1])}})}),{type:"listbox",text:t[0][0],values:n,fixedWidth:!0,onselect:function(t){if(t.control){var n=t.control.value();Ta(e,n)()}},onPostRender:ns(e,n)}}},os=function(e,t){return I.map(t,function(t){return{text:t[0],onclick:Ta(e,t[1]),textStyle:function(){return e.formatter.getCssText(t[1])}}})},is=function(e){var t=ts(e.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");e.addMenuItem("blockformats",{text:"Blocks",menu:os(e,t)}),e.addButton("formatselect",rs(e,t))},as={register:is},ss=function(e,t){var n,r;if("string"==typeof t)r=t.split(" ");else if(I.isArray(t))return it(I.map(t,function(t){return ss(e,t)}));return n=I.grep(r,function(t){return"|"===t||t in e.menuItems}),I.map(n,function(t){return"|"===t?{text:"-"}:e.menuItems[t]})},ls=function(e){return e&&"-"===e.text},us=function(e){var t=Ze(e,function(e,t,n){return!ls(e)||!ls(n[t-1])});return Ze(t,function(e,t,n){return!ls(e)||t>0&&t<n.length-1})},cs=function(e,t){var n=[{text:"-"}],r=I.grep(e.menuItems,function(e){return e.context===t});return I.each(r,function(e){"before"===e.separator&&n.push({text:"|"}),e.prependToContext?n.unshift(e):n.push(e),"after"===e.separator&&n.push({text:"|"})}),n},ds=function(e){var t=e.settings.insert_button_items;return us(t?ss(e,t):cs(e,"insert"))},fs=function(e){e.addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(ds(e)),this.menu.renderNew()}})},hs=function(e){fs(e)},ps={register:hs},ms=function(e){I.each({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(t,n){e.addButton(n,{active:!1,tooltip:t,onPostRender:Oa(e,n),onclick:Ta(e,n)})})},gs=function(e){I.each({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"],removeformat:["Clear formatting","RemoveFormat"],remove:["Remove","Delete"]},function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1]})})},vs=function(e){I.each({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"]},function(t,n){e.addButton(n,{active:!1,tooltip:t[0],cmd:t[1],onPostRender:Oa(e,n)})})},bs=function(e){ms(e),gs(e),vs(e)},ys=function(e){I.each({bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"],newdocument:["New document","mceNewDocument"],cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"]},function(t,n){e.addMenuItem(n,{text:t[0],icon:n,shortcut:t[2],cmd:t[1]})}),e.addMenuItem("codeformat",{text:"Code",icon:"code",onclick:Ta(e,"code")})},ws=function(e){bs(e),ys(e)},xs={register:ws},Cs=function(e,t){return function(){var n=this,r=function(){var n="redo"===t?"hasRedo":"hasUndo";return!!e.undoManager&&e.undoManager[n]()};n.disabled(!r()),e.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(){n.disabled(e.readonly||!r())})}},ks=function(e){e.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:Cs(e,"undo"),cmd:"undo"}),e.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:Cs(e,"redo"),cmd:"redo"})},Ns=function(e){e.addButton("undo",{tooltip:"Undo",onPostRender:Cs(e,"undo"),cmd:"undo"}),e.addButton("redo",{tooltip:"Redo",onPostRender:Cs(e,"redo"),cmd:"redo"})},_s=function(e){ks(e),Ns(e)},Ss={register:_s},Ts=function(e){return function(){var t=this;e.on("VisualAid",function(e){t.active(e.hasVisual)}),t.active(e.hasVisual)}},Es=function(e){e.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:Ts(e),cmd:"mceToggleVisualAid"})},Os=function(e){Es(e)},As={register:Os},Ds=function(){Vn.tooltips=!kt.iOS,Sn.translate=function(e){return L.translate(e)}},Rs=function(e){e.settings.ui_container&&(kt.container=Sa.descendant(Tr.fromDom(document.body),e.settings.ui_container).fold(ve(null),function(e){return e.dom()}))},Ms=function(e){e.rtl&&(Sn.rtl=!0)},Ps=function(e){e.on("mousedown",function(){Ln.hideAll()})},Ls=function(e){Ms(e),Ps(e),Rs(e),Ds(),as.register(e),Da.register(e),xs.register(e),Ss.register(e),Ka.register(e),Fa.register(e),es.register(e),As.register(e),ps.register(e)},Is={setup:Ls},js=tr.extend({recalc:function(e){var t,n,r,o,i,a,s,l,u,c,d,f,h,p,m,g,v,b,y,w,x,C,k,N,_,S,T,E,O,A=[],D=[];t=e.settings,o=e.items().filter(":visible"),i=e.layoutRect(),r=t.columns||Math.ceil(Math.sqrt(o.length)),n=Math.ceil(o.length/r),b=t.spacingH||t.spacing||0,y=t.spacingV||t.spacing||0,w=t.alignH||t.align,x=t.alignV||t.align,g=e.paddingBox,E="reverseRows"in t?t.reverseRows:e.isRtl(),w&&"string"==typeof w&&(w=[w]),x&&"string"==typeof x&&(x=[x]);for(d=0;d<r;d++)A.push(0);for(f=0;f<n;f++)D.push(0);for(f=0;f<n;f++)for(d=0;d<r&&(c=o[f*r+d]);d++)u=c.layoutRect(),N=u.minW,_=u.minH,A[d]=N>A[d]?N:A[d],D[f]=_>D[f]?_:D[f];for(S=i.innerW-g.left-g.right,C=0,d=0;d<r;d++)C+=A[d]+(d>0?b:0),S-=(d>0?b:0)+A[d];for(T=i.innerH-g.top-g.bottom,k=0,f=0;f<n;f++)k+=D[f]+(f>0?y:0),T-=(f>0?y:0)+D[f];if(C+=g.left+g.right,k+=g.top+g.bottom,l={},l.minW=C+(i.w-i.innerW),l.minH=k+(i.h-i.innerH),l.contentW=l.minW-i.deltaW,l.contentH=l.minH-i.deltaH,l.minW=Math.min(l.minW,i.maxW),l.minH=Math.min(l.minH,i.maxH),l.minW=Math.max(l.minW,i.startMinWidth),l.minH=Math.max(l.minH,i.startMinHeight),!i.autoResize||l.minW===i.minW&&l.minH===i.minH){i.autoResize&&(l=e.layoutRect(l),l.contentW=l.minW-i.deltaW,l.contentH=l.minH-i.deltaH);var R;R="start"===t.packV?0:T>0?Math.floor(T/n):0;var M=0,P=t.flexWidths;if(P)for(d=0;d<P.length;d++)M+=P[d];else M=r;var L=S/M;for(d=0;d<r;d++)A[d]+=P?P[d]*L:L;for(p=g.top,f=0;f<n;f++){for(h=g.left,s=D[f]+R,d=0;d<r&&(O=E?f*r+r-1-d:f*r+d,c=o[O]);d++)m=c.settings,u=c.layoutRect(),a=Math.max(A[d],u.startMinWidth),u.x=h,u.y=p,v=m.alignH||(w?w[d]||w[0]:null),"center"===v?u.x=h+a/2-u.w/2:"right"===v?u.x=h+a-u.w:"stretch"===v&&(u.w=a),v=m.alignV||(x?x[d]||x[0]:null),"center"===v?u.y=p+s/2-u.h/2:"bottom"===v?u.y=p+s-u.h:"stretch"===v&&(u.h=s),c.layoutRect(u),h+=a+b,c.recalc&&c.recalc();p+=s+y}}else if(l.w=l.minW,l.h=l.minH,e.layoutRect(l),this.recalc(e),null===e._lastRect){var I=e.parent();I&&(I._lastRect=null,I.recalc())}}}),Bs=Vn.extend({renderHtml:function(){var e=this;return e.classes.add("iframe"),e.canFocus=!1,'<iframe id="'+e._id+'" class="'+e.classes+'" tabindex="-1" src="'+(e.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e,t){var n=this,r=this.getEl().contentWindow.document.body;return r?(r.innerHTML=e,t&&t()):pe.setTimeout(function(){n.html(e)}),this}}),Fs=Vn.extend({init:function(e){var t=this;t._super(e),t.classes.add("widget").add("infobox"),t.canFocus=!1},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},help:function(e){this.state.set("help",e)},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes+'"><div id="'+e._id+'-body">'+e.encode(e.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+t+"ico "+t+'i-help"></i></button></div></div>'},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl("body").firstChild.data=e.encode(t.value),e.state.get("rendered")&&e.updateLayoutRect()}),e.state.on("change:help",function(t){e.classes.toggle("has-help",t.value),e.state.get("rendered")&&e.updateLayoutRect()}),e._super()}}),Hs=Vn.extend({init:function(e){var t=this;t._super(e),t.classes.add("widget").add("label"),t.canFocus=!1,e.multiline&&t.classes.add("autoscroll"),e.strong&&t.classes.add("strong")},initLayoutRect:function(){var e=this,t=e._super();if(e.settings.multiline){Vt.getSize(e.getEl()).width>t.maxW&&(t.minW=t.maxW,e.classes.add("multiline")),e.getEl().style.width=t.minW+"px",t.startMinH=t.h=t.minH=Math.min(t.maxH,Vt.getSize(e.getEl()).height)}return t},repaint:function(){var e=this;return e.settings.multiline||(e.getEl().style.lineHeight=e.layoutRect().h+"px"),e._super()},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},renderHtml:function(){var e,t,n=this,r=n.settings.forId,o=n.settings.html?n.settings.html:n.encode(n.state.get("text"));return!r&&(t=n.settings.forName)&&(e=n.getRoot().find("#"+t)[0])&&(r=e._id),r?'<label id="'+n._id+'" class="'+n.classes+'"'+(r?' for="'+r+'"':"")+">"+o+"</label>":'<span id="'+n._id+'" class="'+n.classes+'">'+o+"</span>"},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.innerHtml(e.encode(t.value)),e.state.get("rendered")&&e.updateLayoutRect()}),e._super()}}),Us=On.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){var t=this;t._super(e),t.classes.add("toolbar")},postRender:function(){var e=this;return e.items().each(function(e){e.classes.add("toolbar-item")}),e._super()}}),zs=Us.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}}),Ws=nr.extend({init:function(e){var t=this;t._renderOpen=!0,t._super(e),e=t.settings,t.classes.add("menubtn"),e.fixedWidth&&t.classes.add("fixed-width"),t.aria("haspopup",!0),t.state.set("menu",e.menu||t.render())},showMenu:function(e){var t,n=this;if(n.menu&&n.menu.visible()&&!1!==e)return n.hideMenu();n.menu||(t=n.state.get("menu")||[],n.classes.add("opened"),t.length?t={type:"menu",animate:!0,items:t}:(t.type=t.type||"menu",t.animate=!0),t.renderTo?n.menu=t.parent(n).show().renderTo():n.menu=oe.create(t).parent(n).renderTo(),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(e){e.control.parent()===n.menu&&(e.stopPropagation(),n.focus(),n.hideMenu())}),n.menu.on("select",function(){n.focus()}),n.menu.on("show hide",function(e){e.control===n.menu&&(n.activeMenu("show"===e.type),n.classes.toggle("opened","show"===e.type)),n.aria("expanded","show"===e.type)}).fire("show")),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),n.menu.repaint(),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]),n.fire("showmenu")},hideMenu:function(){var e=this;e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide())},activeMenu:function(e){this.classes.toggle("active",e)},renderHtml:function(){var e,t=this,n=t._id,r=t.classPrefix,o=t.settings.icon,i=t.state.get("text"),a="";return e=t.settings.image,e?(o="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",i&&(t.classes.add("btn-has-text"),a='<span class="'+r+'txt">'+t.encode(i)+"</span>"),o=t.settings.icon?r+"ico "+r+"i-"+o:"",t.aria("role",t.parent()instanceof zs?"menuitem":"button"),'<div id="'+n+'" class="'+t.classes+'" tabindex="-1" aria-labelledby="'+n+'"><button id="'+n+'-open" role="presentation" type="button" tabindex="-1">'+(o?'<i class="'+o+'"'+e+"></i>":"")+a+' <i class="'+r+'caret"></i></button></div>'},postRender:function(){var e=this;return e.on("click",function(t){t.control===e&&E(t.target,e.getEl())&&(e.focus(),e.showMenu(!t.aria),t.aria&&e.menu.items().filter(":visible")[0].focus())}),e.on("mouseenter",function(t){var n,r=t.control,o=e.parent();r&&o&&r instanceof Ws&&r.parent()===o&&(o.items().filter("MenuButton").each(function(e){e.hideMenu&&e!==r&&(e.menu&&e.menu.visible()&&(n=!0),e.hideMenu())}),n&&(r.focus(),r.showMenu()))}),e._super()},bindStates:function(){var e=this;return e.state.on("change:menu",function(){e.menu&&e.menu.remove(),e.menu=null}),e._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}}),Vs=Ln.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(e){var t=this;if(e.autohide=!0,e.constrainToViewport=!0,"function"==typeof e.items&&(e.itemsFactory=e.items,e.items=[]),e.itemDefaults)for(var n=e.items,r=n.length;r--;)n[r]=I.extend({},e.itemDefaults,n[r]);t._super(e),t.classes.add("menu"),e.animate&&11!==kt.ie&&t.classes.add("animate")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){var e=this;e.hideAll(),e.fire("select")},load:function(){function e(){r.throbber&&(r.throbber.hide(),r.throbber=null)}var t,n,r=this;(n=r.settings.itemsFactory)&&(r.throbber||(r.throbber=new w(r.getEl("body"),!0),0===r.items().length?(r.throbber.show(),r.fire("loading")):r.throbber.show(100,function(){r.items().remove(),r.fire("loading")}),r.on("hide close",e)),r.requestTime=t=(new Date).getTime(),r.settings.itemsFactory(function(n){if(0===n.length)return void r.hide();r.requestTime===t&&(r.getEl().style.width="",r.getEl("body").style.width="",e(),r.items().remove(),r.getEl("body").innerHTML="",r.add(n),r.renderNew(),r.fire("loaded"))}))},hideAll:function(){var e=this;return this.find("menuitem").exec("hideMenu"),e._super()},preRender:function(){var e=this;return e.items().each(function(t){var n=t.settings;if(n.icon||n.image||n.selectable)return e._hasIcons=!0,!1}),e.settings.itemsFactory&&e.on("postrender",function(){e.settings.itemsFactory&&e.load()}),e.on("show hide",function(t){t.control===e&&("show"===t.type?pe.setTimeout(function(){e.classes.add("in")},0):e.classes.remove("in"))}),e._super()}}),qs=Ws.extend({init:function(e){function t(n){for(var i=0;i<n.length;i++){if(r=n[i].selected||e.value===n[i].value)return o=o||n[i].text,a.state.set("value",n[i].value),!0;if(n[i].menu&&t(n[i].menu))return!0}}var n,r,o,i,a=this;a._super(e),e=a.settings,a._values=n=e.values,n&&(void 0!==e.value&&t(n),!r&&n.length>0&&(o=n[0].text,a.state.set("value",n[0].value)),a.state.set("menu",n)),a.state.set("text",e.text||o),a.classes.add("listbox"),a.on("select",function(t){var n=t.control;i&&(t.lastControl=i),e.multiple?n.active(!n.active()):a.value(t.control.value()),i=n})},value:function(e){if(0===arguments.length)return this.state.get("value");if(void 0===e)return this;if(this.settings.values){I.grep(this.settings.values,function(t){return t.value===e}).length>0?this.state.set("value",e):null===e&&this.state.set("value",null)}else this.state.set("value",e);return this},bindStates:function(){function e(e,t){e instanceof Vs&&e.items().each(function(e){e.hasMenus()||e.active(e.value()===t)})}function t(e,n){var r;if(e)for(var o=0;o<e.length;o++){if(e[o].value===n)return e[o];if(e[o].menu&&(r=t(e[o].menu,n)))return r}}var n=this;return n.on("show",function(t){e(t.control,n.value())}),n.state.on("change:value",function(e){var r=t(n.state.get("menu"),e.value);r?n.text(r.text):n.text(n.settings.text)}),n._super()}}),$s=function(e,t){var n=e._textStyle;if(n){var r=e.getEl("text");r.setAttribute("style",n),t&&(r.style.color="",r.style.backgroundColor="")}},Ks=Vn.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t,n=this;n._super(e),e=n.settings,n.classes.add("menu-item"),e.menu&&n.classes.add("menu-item-expand"),e.preview&&n.classes.add("menu-item-preview"),t=n.state.get("text"),"-"!==t&&"|"!==t||(n.classes.add("menu-item-sep"),n.aria("role","separator"),n.state.set("text","-")),e.selectable&&(n.aria("role","menuitemcheckbox"),n.classes.add("menu-item-checkbox"),e.icon="selected"),e.preview||e.selectable||n.classes.add("menu-item-normal"),n.on("mousedown",function(e){e.preventDefault()}),e.menu&&!e.ariaHideMenu&&n.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var e,t=this,n=t.settings,r=t.parent();if(r.items().each(function(e){e!==t&&e.hideMenu()}),n.menu){e=t.menu,e?e.show():(e=n.menu,e.length?e={type:"menu",items:e}:e.type=e.type||"menu",r.settings.itemDefaults&&(e.itemDefaults=r.settings.itemDefaults),e=t.menu=oe.create(e).parent(t).renderTo(),e.reflow(),e.on("cancel",function(n){n.stopPropagation(),t.focus(),e.hide()}),e.on("show hide",function(e){e.control.items&&e.control.items().each(function(e){e.active(e.settings.selected)})}).fire("show"),e.on("hide",function(n){n.control===e&&t.classes.remove("selected")}),e.submenu=!0),e._parentMenu=r,e.classes.add("menu-sub");var o=e.testMoveRel(t.getEl(),t.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);e.moveRel(t.getEl(),o),e.rel=o,o="menu-sub-"+o,e.classes.remove(e._lastRel).add(o),e._lastRel=o,t.classes.add("selected"),t.aria("expanded",!0)}},hideMenu:function(){var e=this;return e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide(),e.aria("expanded",!1)),e},renderHtml:function(){function e(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function t(t){var n=i.match||"";return n?t.replace(new RegExp(e(n),"gi"),function(e){return"!mce~match["+e+"]mce~match!"}):t}function n(t){return t.replace(new RegExp(e("!mce~match["),"g"),"<b>").replace(new RegExp(e("]mce~match!"),"g"),"</b>")}var r=this,o=r._id,i=r.settings,a=r.classPrefix,s=r.state.get("text"),l=r.settings.icon,u="",c=i.shortcut,d=r.encode(i.url),f="";return l&&r.parent().classes.add("menu-has-icons"),i.image&&(u=" style=\"background-image: url('"+i.image+"')\""),c&&(c=function(e){var t,n,r={};for(r=kt.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},e=e.split("+"),t=0;t<e.length;t++)(n=r[e[t].toLowerCase()])&&(e[t]=n);return e.join("+")}(c)),l=a+"ico "+a+"i-"+(r.settings.icon||"none"),f="-"!==s?'<i class="'+l+'"'+u+"></i>\xa0":"",s=n(r.encode(t(s))),d=n(r.encode(t(d))),'<div id="'+o+'" class="'+r.classes+'" tabindex="-1">'+f+("-"!==s?'<span id="'+o+'-text" class="'+a+'text">'+s+"</span>":"")+(c?'<div id="'+o+'-shortcut" class="'+a+'menu-shortcut">'+c+"</div>":"")+(i.menu?'<div class="'+a+'caret"></div>':"")+(d?'<div class="'+a+'menu-item-link">'+d+"</div>":"")+"</div>"},postRender:function(){var e=this,t=e.settings,n=t.textStyle;if("function"==typeof n&&(n=n.call(this)),n){var r=e.getEl("text");r&&(r.setAttribute("style",n),e._textStyle=n)}return e.on("mouseenter click",function(n){n.control===e&&(t.menu||"click"!==n.type?(e.showMenu(),n.aria&&e.menu.focus(!0)):(e.fire("select"),pe.requestAnimationFrame(function(){e.parent().hideAll()})))}),e._super(),e},hover:function(){var e=this;return e.parent().items().each(function(e){e.classes.remove("selected")}),e.classes.toggle("selected",!0),e},active:function(e){return $s(this,e),void 0!==e&&this.aria("checked",e),this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}}),Gs=ir.extend({Defaults:{classes:"radio",role:"radio"}}),Xs=Vn.extend({renderHtml:function(){var e=this,t=e.classPrefix;return e.classes.add("resizehandle"),"both"===e.settings.direction&&e.classes.add("resizehandle-both"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes+'"><i class="'+t+"ico "+t+'i-resize"></i></div>'},postRender:function(){var e=this;e._super(),e.resizeDragHelper=new d(this._id,{start:function(){e.fire("ResizeStart")},drag:function(t){"both"!==e.settings.direction&&(t.deltaX=0),e.fire("Resize",t)},stop:function(){e.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}}),Ys=Vn.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(e){var t=this;t._super(e),t.settings.size&&(t.size=t.settings.size),t.settings.options&&(t._options=t.settings.options),t.on("keydown",function(e){var n;13===e.keyCode&&(e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,!1}),t.fire("submit",{data:n.toJSON()}))})},options:function(e){return arguments.length?(this.state.set("options",e),this):this.state.get("options")},renderHtml:function(){var e,t=this,n="";return e=O(t._options),t.size&&(n=' size = "'+t.size+'"'),'<select id="'+t._id+'" class="'+t.classes+'"'+n+">"+e+"</select>"},bindStates:function(){var e=this;return e.state.on("change:options",function(t){e.getEl().innerHTML=O(t.value)}),e._super()}}),Js=Vn.extend({init:function(e){var t=this;e.previewFilter||(e.previewFilter=function(e){return Math.round(100*e)/100}),t._super(e),t.classes.add("slider"),"v"===e.orientation&&t.classes.add("vertical"),t._minValue=Ke(e.minValue)?e.minValue:0,t._maxValue=Ke(e.maxValue)?e.maxValue:100,t._initValue=t.state.get("value")},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes+'"><div id="'+t+'-handle" class="'+n+'slider-handle" role="slider" tabindex="-1"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){function e(e,t,n){return(n+e)/(t-e)}function t(e,t,n){return n*(t-e)-e}var n,r,o,i,a,s,l=this;n=l._minValue,r=l._maxValue,"v"===l.settings.orientation?(o="screenY",i="top",a="height",s="h"):(o="screenX",i="left",a="width",s="w"),l._super(),function(n,r){function o(o){var i;i=l.value(),i=t(n,r,e(n,r,i)+.05*o),i=A(i,n,r),l.value(i),l.fire("dragstart",{value:i}),l.fire("drag",{value:i}),l.fire("dragend",{value:i})}l.on("keydown",function(e){switch(e.keyCode){case 37:case 38:o(-1);break;case 39:case 40:o(1)}})}(n,r),function(e,t,n){var r,u,c,f,h;l._dragHelper=new d(l._id,{handle:l._id+"-handle",start:function(e){r=e[o],u=parseInt(l.getEl("handle").style[i],10),c=(l.layoutRect()[s]||100)-Vt.getSize(n)[a],l.fire("dragstart",{value:h})},drag:function(a){var s=a[o]-r;f=A(u+s,0,c),n.style[i]=f+"px",h=e+f/c*(t-e),l.value(h),l.tooltip().text(""+l.settings.previewFilter(h)).show().moveRel(n,"bc tc"),l.fire("drag",{value:h})},stop:function(){l.tooltip().hide(),l.fire("dragend",{value:h})}})}(n,r,l.getEl("handle"))},repaint:function(){this._super(),R(this,this.value())},bindStates:function(){var e=this;return e.state.on("change:value",function(t){R(e,t.value)}),e._super()}}),Qs=Vn.extend({renderHtml:function(){var e=this;return e.classes.add("spacer"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes+'"></div>'}}),Zs=Ws.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var e,t,n=this,r=n.getEl(),o=n.layoutRect();return n._super(),e=r.firstChild,t=r.lastChild,zt(e).css({width:o.w-Vt.getSize(t).width,height:o.h-2}),zt(t).css({height:o.h-2}),n},activeMenu:function(e){var t=this;zt(t.getEl().lastChild).toggleClass(t.classPrefix+"active",e)},renderHtml:function(){var e,t,n=this,r=n._id,o=n.classPrefix,i=n.state.get("icon"),a=n.state.get("text"),s=n.settings,l="";return e=s.image,e?(i="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",i=s.icon?o+"ico "+o+"i-"+i:"",a&&(n.classes.add("btn-has-text"),l='<span class="'+o+'txt">'+n.encode(a)+"</span>"),t="boolean"==typeof s.active?' aria-pressed="'+s.active+'"':"",'<div id="'+r+'" class="'+n.classes+'" role="button"'+t+' tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(i?'<i class="'+i+'"'+e+"></i>":"")+l+'</button><button type="button" class="'+o+'open" hidefocus="1" tabindex="-1">'+(n._menuBtnText?(i?"\xa0":"")+n._menuBtnText:"")+' <i class="'+o+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(e){var n=e.target;if(e.control===this)for(;n;){if(e.aria&&"down"!==e.aria.key||"BUTTON"===n.nodeName&&-1===n.className.indexOf("open"))return e.stopImmediatePropagation(),void(t&&t.call(this,e));n=n.parentNode}}),delete e.settings.onclick,e._super()}}),el=fa.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}}),tl=Dn.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(e){var t;this.activeTabId&&(t=this.getEl(this.activeTabId),zt(t).removeClass(this.classPrefix+"active"),t.setAttribute("aria-selected","false")),this.activeTabId="t"+e,t=this.getEl("t"+e),t.setAttribute("aria-selected","true"),zt(t).addClass(this.classPrefix+"active"),this.items()[e].show().fire("showtab"),this.reflow(),this.items().each(function(t,n){e!==n&&t.hide()})},renderHtml:function(){var e=this,t=e._layout,n="",r=e.classPrefix;return e.preRender(),t.preRender(e),e.items().each(function(t,o){var i=e._id+"-t"+o;t.aria("role","tabpanel"),t.aria("labelledby",i),n+='<div id="'+i+'" class="'+r+'tab" unselectable="on" role="tab" aria-controls="'+t._id+'" aria-selected="false" tabIndex="-1">'+e.encode(t.settings.title)+"</div>"}),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1"><div id="'+e._id+'-head" class="'+r+'tabs" role="tablist">'+n+'</div><div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div></div>"},postRender:function(){var e=this;e._super(),e.settings.activeTab=e.settings.activeTab||0,e.activateTab(e.settings.activeTab),this.on("click",function(t){var n=t.target.parentNode;if(n&&n.id===e._id+"-head")for(var r=n.childNodes.length;r--;)n.childNodes[r]===t.target&&e.activateTab(r)})},initLayoutRect:function(){var e,t,n,r=this;t=Vt.getSize(r.getEl("head")).width,t=t<0?0:t,n=0,r.items().each(function(e){t=Math.max(t,e.layoutRect().minW),n=Math.max(n,e.layoutRect().minH)}),r.items().each(function(e){e.settings.x=0,e.settings.y=0,e.settings.w=t,e.settings.h=n,e.layoutRect({x:0,y:0,w:t,h:n})});var o=Vt.getSize(r.getEl("head")).height;return r.settings.minWidth=t,r.settings.minHeight=n+o,e=r._super(),e.deltaH+=o,e.innerH=e.h-e.deltaH,e}}),nl=Vn.extend({init:function(e){var t=this;t._super(e),t.classes.add("textbox"),e.multiline?t.classes.add("multiline"):(t.on("keydown",function(e){var n;13===e.keyCode&&(e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,!1}),t.fire("submit",{data:n.toJSON()}))}),t.on("keyup",function(e){t.state.set("value",e.target.value)}))},repaint:function(){var e,t,n,r,o,i=this,a=0;e=i.getEl().style,t=i._layoutRect,o=i._lastRepaintRect||{};var s=document;return!i.settings.multiline&&s.all&&(!s.documentMode||s.documentMode<=8)&&(e.lineHeight=t.h-a+"px"),n=i.borderBox,r=n.left+n.right+8,a=n.top+n.bottom+(i.settings.multiline?8:0),t.x!==o.x&&(e.left=t.x+"px",o.x=t.x),t.y!==o.y&&(e.top=t.y+"px",o.y=t.y),t.w!==o.w&&(e.width=t.w-r+"px",o.w=t.w),t.h!==o.h&&(e.height=t.h-a+"px",o.h=t.h),i._lastRepaintRect=o,i.fire("repaint",{},!1),i},renderHtml:function(){var e,t,n=this,r=n.settings;return e={id:n._id,hidefocus:"1"},I.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],function(t){e[t]=r[t]}),n.disabled()&&(e.disabled="disabled"),r.subtype&&(e.type=r.subtype),t=Vt.create(r.multiline?"textarea":"input",e),t.value=n.state.get("value"),t.className=n.classes.toString(),t.outerHTML},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var e=this;e.getEl().value=e.state.get("value"),e._super(),e.$el.on("change",function(t){e.state.set("value",t.target.value),e.fire("change",t)})},bindStates:function(){var e=this;return e.state.on("change:value",function(t){e.getEl().value!==t.value&&(e.getEl().value=t.value)}),e.state.on("change:disabled",function(t){e.getEl().disabled=t.value}),e._super()},remove:function(){this.$el.off(),this._super()}}),rl=function(){return{Selector:sn,Collection:cn,ReflowQueue:vn,Control:Sn,Factory:oe,KeyboardNavigation:l,Container:On,DragHelper:d,Scrollable:An,Panel:Dn,Movable:Yt,Resizable:Rn,FloatPanel:Ln,Window:Yn,MessageBox:Jn,Tooltip:Wn,Widget:Vn,Progress:qn,Notification:Kn,Layout:er,AbsoluteLayout:tr,Button:nr,ButtonGroup:or,Checkbox:ir,ComboBox:sr,ColorBox:lr,PanelButton:ur,ColorButton:dr,ColorPicker:hr,Path:mr,ElementPath:gr,FormItem:vr,Form:br,FieldSet:yr,FilePicker:ua,FitLayout:ca,FlexLayout:da,FlowLayout:fa,FormatControls:Is,GridLayout:js,Iframe:Bs,InfoBox:Fs,Label:Hs,Toolbar:Us,MenuBar:zs,MenuButton:Ws,MenuItem:Ks,Throbber:w,Menu:Vs,ListBox:qs,Radio:Gs,ResizeHandle:Xs,SelectBox:Ys,Slider:Js,Spacer:Qs,SplitButton:Zs,StackLayout:el,TabPanel:tl,TextBox:nl,DropZone:pr,BrowseButton:rr}},ol=function(e){e.ui?I.each(rl(),function(t,n){e.ui[n]=t}):e.ui=rl()},il=function(){I.each(rl(),function(e,t){oe.add(t,e)})},al={appendTo:ol,registerToFactory:il};al.registerToFactory(),al.appendTo(window.tinymce?window.tinymce:{}),P.add("modern",function(e){return Is.setup(e),Zn.get(e)})}()}()},3343:function(e,t,n){(function(t){!function(){!function(){"use strict";function n(){function e(n,r){return t.push(n+" ")>Kt.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[dn]=!0,e}function o(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||wn)-(~e.sourceIndex||wn);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function i(e){return r(function(t){return t=+t,r(function(n,r){for(var o,i=e([],n.length,t),a=i.length;a--;)n[o=i[a]]&&(n[o]=!(r[o]=n[o]))})})}function a(e){return e&&typeof e.getElementsByTagName!==yn&&e}function s(){}function l(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function u(e,t,n){var r=t.dir,o=n&&"parentNode"===r,i=pn++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,i)}:function(t,n,a){var s,l,u=[hn,i];if(a){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||o){if(l=t[dn]||(t[dn]={}),(s=l[r])&&s[0]===hn&&s[1]===i)return u[2]=s[2];if(l[r]=u,u[2]=e(t,n,a))return!0}}}function c(e){return e.length>1?function(t,n,r){for(var o=e.length;o--;)if(!e[o](t,n,r))return!1;return!0}:e[0]}function d(e,t,n){for(var r=0,o=t.length;r<o;r++)Kn(e,t[r],n);return n}function f(e,t,n,r,o){for(var i,a=[],s=0,l=e.length,u=null!=t;s<l;s++)(i=e[s])&&(n&&!n(i,r,o)||(a.push(i),u&&t.push(s)));return a}function h(e,t,n,o,i,a){return o&&!o[dn]&&(o=h(o)),i&&!i[dn]&&(i=h(i,a)),r(function(r,a,s,l){var u,c,h,p=[],m=[],g=a.length,v=r||d(t||"*",s.nodeType?[s]:s,[]),b=!e||!r&&t?v:f(v,p,e,s,l),y=n?i||(r?e:g||o)?[]:a:b;if(n&&n(b,y,s,l),o)for(u=f(y,m),o(u,[],s,l),c=u.length;c--;)(h=u[c])&&(y[m[c]]=!(b[m[c]]=h));if(r){if(i||e){if(i){for(u=[],c=y.length;c--;)(h=y[c])&&u.push(b[c]=h);i(null,y=[],u,l)}for(c=y.length;c--;)(h=y[c])&&(u=i?Tn.call(r,h):p[c])>-1&&(r[u]=!(a[u]=h))}}else y=f(y===a?y.splice(g,y.length):y),i?i(null,a,y,l):_n.apply(a,y)})}function p(e){for(var t,n,r,o=e.length,i=Kt.relative[e[0].type],a=i||Kt.relative[" "],s=i?1:0,d=u(function(e){return e===t},a,!0),f=u(function(e){return Tn.call(t,e)>-1},a,!0),m=[function(e,n,r){return!i&&(r||n!==Zt)||((t=n).nodeType?d(e,n,r):f(e,n,r))}];s<o;s++)if(n=Kt.relative[e[s].type])m=[u(c(m),n)];else{if(n=Kt.filter[e[s].type].apply(null,e[s].matches),n[dn]){for(r=++s;r<o&&!Kt.relative[e[r].type];r++);return h(s>1&&c(m),s>1&&l(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(Rn,"$1"),n,s<r&&p(e.slice(s,r)),r<o&&p(e=e.slice(r)),r<o&&l(e))}m.push(n)}return c(m)}function m(e,t){var n=t.length>0,o=e.length>0,i=function(r,i,a,s,l){var u,c,d,h=0,p="0",m=r&&[],g=[],v=Zt,b=r||o&&Kt.find.TAG("*",l),y=hn+=null==v?1:Math.random()||.1,w=b.length;for(l&&(Zt=i!==rn&&i);p!==w&&null!=(u=b[p]);p++){if(o&&u){for(c=0;d=e[c++];)if(d(u,i,a)){s.push(u);break}l&&(hn=y)}n&&((u=!d&&u)&&h--,r&&m.push(u))}if(h+=p,n&&p!==h){for(c=0;d=t[c++];)d(m,g,i,a);if(r){if(h>0)for(;p--;)m[p]||g[p]||(g[p]=kn.call(s));g=f(g)}_n.apply(s,g),l&&!r&&g.length>0&&h+t.length>1&&Kn.uniqueSort(s)}return l&&(hn=y,Zt=v),m};return n?r(i):i}function g(e,t,n){var r=e.isiOS()&&!0===/ipad/i.test(n),o=e.isiOS()&&!r,i=e.isAndroid()&&3===e.version.major,a=e.isAndroid()&&4===e.version.major,s=r||i||a&&!0===/mobile/i.test(n),l=e.isiOS()||e.isAndroid(),u=l&&!s,c=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:ge(r),isiPhone:ge(o),isTablet:ge(s),isPhone:ge(u),isTouch:ge(l),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:ge(c)}}function v(e,t){var n,r=0,o={};t=t||{},n=t.maxLoadTime||5e3;var i=function(t){e.getElementsByTagName("head")[0].appendChild(t)},a=function(t,a,s){var l,u,c,d,f=function(){for(var e=d.passed,t=e.length;t--;)e[t]();d.status=2,d.passed=[],d.failed=[]},h=function(){for(var e=d.failed,t=e.length;t--;)e[t]();d.status=3,d.passed=[],d.failed=[]},p=function(e,t){e()||((new Date).getTime()-c<n?Mt.setTimeout(t):h())},m=function(){p(function(){for(var t,n,r=e.styleSheets,o=r.length;o--;)if(t=r[o],(n=t.ownerNode?t.ownerNode:t.owningElement)&&n.id===l.id)return f(),!0},m)},g=function(){p(function(){try{var e=u.sheet.cssRules;return f(),!!e}catch(e){}},g)};if(t=vr._addCacheSuffix(t),o[t]?d=o[t]:(d={passed:[],failed:[]},o[t]=d),a&&d.passed.push(a),s&&d.failed.push(s),1!==d.status){if(2===d.status)return void f();if(3===d.status)return void h();if(d.status=1,l=e.createElement("link"),l.rel="stylesheet",l.type="text/css",l.id="u"+r++,l.async=!1,l.defer=!1,c=(new Date).getTime(),"onload"in l&&!function(){var e=navigator.userAgent.match(/WebKit\/(\d*)/);return!!(e&&parseInt(e[1],10)<536)}())l.onload=m,l.onerror=h;else{if(navigator.userAgent.indexOf("Firefox")>0)return u=e.createElement("style"),u.textContent='@import "'+t+'"',g(),void i(u);m()}i(l),l.href=t}},s=function(e){return Aa.nu(function(t){a(e,me(t,ge(La.value(e))),me(t,ge(La.error(e))))})},l=function(e){return e.fold(ve,ve)};return{load:a,loadAll:function(e,t,n){Ra(ze(e,s)).get(function(e){var r=qe(e,function(e){return e.isValue()});r.fail.length>0?n(r.fail.map(l)):t(r.pass.map(l))})}}}function b(e,t){var n=e,r=function(e,n,r,o){var i,a;if(e){if(!o&&e[n])return e[n];if(e!==t){if(i=e[r])return i;for(a=e.parentNode;a&&a!==t;a=a.parentNode)if(i=a[r])return i}}},o=function(e,n,r,o){var i,a,s;if(e){if(i=e[r],t&&i===t)return;if(i){if(!o)for(s=i[n];s;s=s[n])if(!s[n])return s;return i}if((a=e.parentNode)&&a!==t)return a}};this.current=function(){return n},this.next=function(e){return n=r(n,"firstChild","nextSibling",e)},this.prev=function(e){return n=r(n,"lastChild","previousSibling",e)},this.prev2=function(e){return n=o(n,"lastChild","previousSibling",e)}}function y(e){var t,n,r,o,i,a,s,l,u,c,d,f,h,p={},m={},g=[],v={},b={},y=function(t,n,r){var o=e[t];return o?o=zs(o,/[, ]/,zs(o.toUpperCase(),/[, ]/)):(o=Hs[t])||(o=zs(n," ",zs(n.toUpperCase()," ")),o=Vs(o,r),Hs[t]=o),o};e=e||{},r=Gs(e.schema),!1===e.verify_html&&(e.valid_elements="*[*]"),t=Xs(e.valid_styles),n=Xs(e.invalid_styles,"map"),l=Xs(e.valid_classes,"map"),o=y("whitespace_elements","pre script noscript style textarea video audio iframe object code"),i=y("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),a=y("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),s=y("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),c=y("non_empty_elements","td th iframe video audio object script pre code",a),d=y("move_caret_before_on_enter_elements","table",c),f=y("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),u=y("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",f),h=y("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),Ws((e.special||"script noscript noframes noembed title style textarea xmp").split(" "),function(e){b[e]=new RegExp("</"+e+"[^>]*>","gi")});var w=function(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")},x=function(e){var t,n,r,o,i,a,s,l,u,c,d,f,h,m,v,b,y,x,C,k=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,N=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,_=/[*?+]/;if(e)for(e=Ks(e,","),p["@"]&&(b=p["@"].attributes,y=p["@"].attributesOrder),t=0,n=e.length;t<n;t++)if(i=k.exec(e[t])){if(m=i[1],u=i[2],v=i[3],l=i[5],f={},h=[],a={attributes:f,attributesOrder:h},"#"===m&&(a.paddEmpty=!0),"-"===m&&(a.removeEmpty=!0),"!"===i[4]&&(a.removeEmptyAttrs=!0),b){for(x in b)f[x]=b[x];h.push.apply(h,y)}if(l)for(l=Ks(l,"|"),r=0,o=l.length;r<o;r++)if(i=N.exec(l[r])){if(s={},d=i[1],c=i[2].replace(/[\\:]:/g,":"),m=i[3],C=i[4],"!"===d&&(a.attributesRequired=a.attributesRequired||[],a.attributesRequired.push(c),s.required=!0),"-"===d){delete f[c],h.splice($s(h,c),1);continue}m&&("="===m&&(a.attributesDefault=a.attributesDefault||[],a.attributesDefault.push({name:c,value:C}),s.defaultValue=C),":"===m&&(a.attributesForced=a.attributesForced||[],a.attributesForced.push({name:c,value:C}),s.forcedValue=C),"<"===m&&(s.validValues=zs(C,"?"))),_.test(c)?(a.attributePatterns=a.attributePatterns||[],s.pattern=w(c),a.attributePatterns.push(s)):(f[c]||h.push(c),f[c]=s)}b||"@"!==u||(b=f,y=h),v&&(a.outputName=u,p[v]=a),_.test(u)?(a.pattern=w(u),g.push(a)):p[u]=a}},C=function(e){p={},g=[],x(e),Ws(r,function(e,t){m[t]=e.children})},k=function(e){var t=/^(~)?(.+)$/;e&&(Hs.text_block_elements=Hs.block_elements=null,Ws(Ks(e,","),function(e){var n=t.exec(e),r="~"===n[1],o=r?"span":"div",i=n[2];if(m[i]=m[o],v[i]=o,r||(u[i.toUpperCase()]={},u[i]={}),!p[i]){var a=p[o];a=Vs({},a),delete a.removeEmptyAttrs,delete a.removeEmpty,p[i]=a}Ws(m,function(e,t){e[o]&&(m[t]=e=Vs({},m[t]),e[i]=e[o])})}))},N=function(t){var n=/^([+\-]?)(\w+)\[([^\]]+)\]$/;Hs[e.schema]=null,t&&Ws(Ks(t,","),function(e){var t,r,o=n.exec(e);o&&(r=o[1],t=r?m[o[2]]:m[o[2]]={"#comment":{}},t=m[o[2]],Ws(Ks(o[3],"|"),function(e){"-"===r?delete t[e]:t[e]={}}))})},_=function(e){var t,n=p[e];if(n)return n;for(t=g.length;t--;)if(n=g[t],n.pattern.test(e))return n};e.valid_elements?C(e.valid_elements):(Ws(r,function(e,t){p[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},m[t]=e.children}),"html5"!==e.schema&&Ws(Ks("strong/b em/i"),function(e){e=Ks(e,"/"),p[e[1]].outputName=e[0]}),Ws(Ks("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){p[e]&&(p[e].removeEmpty=!0)}),Ws(Ks("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(e){p[e].paddEmpty=!0}),Ws(Ks("span"),function(e){p[e].removeEmptyAttrs=!0})),k(e.custom_elements),N(e.valid_children),x(e.extended_valid_elements),N("+ol[ul|ol],+ul[ul|ol]"),Ws({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(e,t){p[t]&&(p[t].parentsRequired=Ks(e))}),e.invalid_elements&&Ws(qs(e.invalid_elements),function(e){p[e]&&delete p[e]}),_("span")||x("span[!data-mce-type|*]");var S=function(){return t},T=function(){return n},E=function(){return l},O=function(){return s},A=function(){return u},D=function(){return f},R=function(){return h};return{children:m,elements:p,getValidStyles:S,getValidClasses:E,getBlockElements:A,getInvalidStyles:T,getShortEndedElements:function(){return a},getTextBlockElements:D,getTextInlineElements:R,getBoolAttrs:O,getElementRule:_,getSelfClosingElements:function(){return i},getNonEmptyElements:function(){return c},getMoveCaretBeforeOnEnterElements:function(){return d},getWhiteSpaceElements:function(){return o},getSpecialElements:function(){return b},isValidChild:function(e,t){var n=m[e.toLowerCase()];return!(!n||!n[t.toLowerCase()])},isValid:function(e,t){var n,r,o=_(e);if(o){if(!t)return!0;if(o.attributes[t])return!0;if(n=o.attributePatterns)for(r=n.length;r--;)if(n[r].pattern.test(e))return!0}return!1},getCustomElements:function(){return v},addValidElements:x,setValidElements:C,addCustomElements:k,addValidChildren:N}}function w(e,t){var n,r,o,i,a=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,s=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,l=/\s*([^:]+):\s*([^;]+);?/g,u=/\s+$/,c={};for(e=e||{},t&&(o=t.getValidStyles(),i=t.getInvalidStyles()),r="\\\" \\' \\; \\: ; : \ufeff".split(" "),n=0;n<r.length;n++)c[r[n]]="\ufeff"+n,c["\ufeff"+n]=r[n];return{toHex:function(e){return e.replace(a,Ys)},parse:function(t){var r,o,i,d,f={},h=e.url_converter,p=e.url_converter_scope||this,m=function(e,t,r){var o,i,a,s;if((o=f[e+"-top"+t])&&(i=f[e+"-right"+t])&&(a=f[e+"-bottom"+t])&&(s=f[e+"-left"+t])){var l=[o,i,a,s];for(n=l.length-1;n--&&l[n]===l[n+1];);n>-1&&r||(f[e+t]=-1===n?l[0]:l.join(" "),delete f[e+"-top"+t],delete f[e+"-right"+t],delete f[e+"-bottom"+t],delete f[e+"-left"+t])}},g=function(e){var t,n=f[e];if(n){for(n=n.split(" "),t=n.length;t--;)if(n[t]!==n[0])return!1;return f[e]=n[0],!0}},v=function(e){return d=!0,c[e]},b=function(e,t){return d&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return c[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e},y=function(e){return String.fromCharCode(parseInt(e.slice(1),16))},w=function(e){return e.replace(/\\[0-9a-f]+/gi,y)},x=function(t,n,r,o,i,a){if(i=i||a)return i=b(i),"'"+i.replace(/\'/g,"\\'")+"'";if(n=b(n||r||o),!e.allow_script_urls){var s=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(s))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(s))return""}return h&&(n=h.call(p,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"};if(t){for(t=t.replace(/[\u0000-\u001F]/g,""),t=t.replace(/\\[\"\';:\uFEFF]/g,v).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,v)});r=l.exec(t);)if(l.lastIndex=r.index+r[0].length,o=r[1].replace(u,"").toLowerCase(),i=r[2].replace(u,""),o&&i){if(o=w(o),i=w(i),-1!==o.indexOf("\ufeff")||-1!==o.indexOf('"'))continue;if(!e.allow_script_urls&&("behavior"===o||/expression\s*\(|\/\*|\*\//.test(i)))continue;"font-weight"===o&&"700"===i?i="bold":"color"!==o&&"background-color"!==o||(i=i.toLowerCase()),i=i.replace(a,Ys),i=i.replace(s,x),f[o]=d?b(i,!0):i}m("border","",!0),m("border","-width"),m("border","-color"),m("border","-style"),m("padding",""),m("margin",""),function(e,t,n,r){g(t)&&g(n)&&g(r)&&(f[e]=f[t]+" "+f[n]+" "+f[r],delete f[t],delete f[n],delete f[r])}("border","border-width","border-style","border-color"),"medium none"===f.border&&delete f.border,"none"===f["border-image"]&&delete f["border-image"]}return f},serialize:function(e,t){var n,r,a="",s=function(t){var n,r,i,s;if(n=o[t])for(r=0,i=n.length;r<i;r++)t=n[r],(s=e[t])&&(a+=(a.length>0?" ":"")+t+": "+s+";")};if(t&&o)s("*"),s(t);else for(n in e)!(r=e[n])||i&&!function(e,t){var n;return(!(n=i["*"])||!n[e])&&(!(n=i[t])||!n[e])}(n,t)||(a+=(a.length>0?" ":"")+n+": "+r+";");return a}}}function x(e,t){var n=this;void 0===t&&(t={});var r,o={},i=window,a={},s=0,l=v(e),u=[],c=t.schema?t.schema:y({}),d=w({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),f=t.ownEvents?new Vt(t.proxy):Vt.Event,h=c.getBlockElements(),p=jr.overrideDefaults(function(){return{context:e,element:Oe.getRoot()}}),m=function(e){if("string"==typeof e)return!!h[e];if(e){var t=e.nodeType;if(t)return!(1!==t||!h[e.nodeName])}return!1},g=function(t){if(t&&e&&"string"==typeof t){var n=e.getElementById(t);return n&&n.id!==t?e.getElementsByName(t)[1]:n}return t},C=function(e){return"string"==typeof e&&(e=g(e)),p(e)},k=function(e,t,n){var o,i,a=C(e);return a.length&&(o=r[t],i=o&&o.get?o.get(a,t):a.attr(t)),void 0===i&&(i=n||""),i},N=function(e){var t=g(e);return t?t.attributes:[]},_=function(e,n,o){var i,a;""===o&&(o=null);var s=C(e);i=s.attr(n),s.length&&(a=r[n],a&&a.set?a.set(s,o,n):s.attr(n,o),i!==o&&t.onSetAttrib&&t.onSetAttrib({attrElm:s,attrName:n,attrValue:o}))},S=function(t,n){if(!Zs||1!==t.nodeType||n)return t.cloneNode(n);if(!n){var r=e.createElement(t.nodeName);return Js(N(t),function(e){_(r,e.nodeName,k(t,e.nodeName))}),r}return null},T=function(){return t.root_element||e.body},E=function(e){var t=e||i,n=t.document,r=n.documentElement;return{x:t.pageXOffset||r.scrollLeft,y:t.pageYOffset||r.scrollTop,w:t.innerWidth||r.clientWidth,h:t.innerHeight||r.clientHeight}},O=function(t,n){return ka.getPos(e.body,g(t),n)},A=function(e,n,r){var o=C(e).css(n,r);t.update_styles&&rl(d,o)},D=function(e,n){var r=C(e).css(n);t.update_styles&&rl(d,r)},R=function(e,t,n){var r=C(e);return n?r.css(t):(t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),"float"===t&&(t=_t.ie&&_t.ie<12?"styleFloat":"cssFloat"),r[0]&&r[0].style?r[0].style[t]:void 0)},M=function(e){var t,n;return e=g(e),t=R(e,"width"),n=R(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},P=function(e){var t,n;return e=g(e),t=O(e),n=M(e),{x:t.x,y:t.y,w:n.w,h:n.h}},L=function(e,t){var n;if(!e)return!1;if(!Array.isArray(e)){if("*"===t)return 1===e.nodeType;if(el.test(t)){var r=t.toLowerCase().split(/,/),o=e.nodeName.toLowerCase();for(n=r.length-1;n>=0;n--)if(r[n]===o)return!0;return!1}if(e.nodeType&&1!==e.nodeType)return!1}var i=Array.isArray(e)?e:[e];return Kn(t,i[0].ownerDocument||i[0],null,i).length>0},I=function(e,t,n,r){var o,i=[],a=g(e);for(r=void 0===r,n=n||("BODY"!==T().nodeName?T().parentNode:null),vr.is(t,"string")&&(o=t,t="*"===t?function(e){return 1===e.nodeType}:function(e){return L(e,o)});a&&a!==n&&a.nodeType&&9!==a.nodeType;){if(!t||"function"==typeof t&&t(a)){if(!r)return[a];i.push(a)}a=a.parentNode}return r?i:null},j=function(e,t,n){var r=I(e,t,n,!1);return r&&r.length>0?r[0]:null},B=function(e,t,n){var r=t;if(e)for("string"==typeof t&&(r=function(e){return L(e,t)}),e=e[n];e;e=e[n])if("function"==typeof r&&r(e))return e;return null},F=function(e,t){return B(e,t,"nextSibling")},H=function(e,t){return B(e,t,"previousSibling")},U=function(n,r){return Kn(n,g(r)||t.root_element||e,[])},z=function(e,t,r){var o,i="string"==typeof e?g(e):e;if(!i)return!1;if(vr.isArray(i)&&(i.length||0===i.length))return o=[],Js(i,function(e,n){e&&("string"==typeof e&&(e=g(e)),o.push(t.call(r,e,n)))}),o;var a=r||n;return t.call(a,i)},W=function(e,t){C(e).each(function(e,n){Js(t,function(e,t){_(n,t,e)})})},V=function(e,t){var n=C(e);Zs?n.each(function(e,n){if(!1!==n.canHaveHTML){for(;n.firstChild;)n.removeChild(n.firstChild);try{n.innerHTML="<br>"+t,n.removeChild(n.firstChild)}catch(e){jr("<div></div>").html("<br>"+t).contents().slice(1).appendTo(n)}return t}}):n.html(t)},q=function(t,n,r,o,i){return z(t,function(t){var a="string"==typeof n?e.createElement(n):n;return W(a,r),o&&("string"!=typeof o&&o.nodeType?a.appendChild(o):"string"==typeof o&&V(a,o)),i?a:t.appendChild(a)})},$=function(t,n,r){return q(e.createElement(t),t,n,r,!0)},K=Fs.decode,G=Fs.encodeAllRaw,X=function(e,t,n){var r,o="";o+="<"+e;for(r in t)t.hasOwnProperty(r)&&null!==t[r]&&void 0!==t[r]&&(o+=" "+r+'="'+G(t[r])+'"');return void 0!==n?o+">"+n+"</"+e+">":o+" />"},Y=function(t){var n,r=e.createElement("div"),o=e.createDocumentFragment();for(t&&(r.innerHTML=t);n=r.firstChild;)o.appendChild(n);return o},J=function(e,t){var n=C(e);return t?n.each(function(){for(var e;e=this.firstChild;)3===e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)}).remove():n.remove(),n.length>1?n.toArray():n[0]},Q=function(e){return z(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))})},Z=function(e){return d.parse(e)},ee=function(e,t){return d.serialize(e,t)},te=function(t){var n,r;if(Oe!==x.DOM&&e===document){if(o[t])return;o[t]=!0}r=e.getElementById("mceDefaultStyles"),r||(r=e.createElement("style"),r.id="mceDefaultStyles",r.type="text/css",n=e.getElementsByTagName("head")[0],n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r)),r.styleSheet?r.styleSheet.cssText+=t:r.appendChild(e.createTextNode(t))},ne=function(t){var n;if(Oe!==x.DOM&&e===document)return void x.DOM.loadCSS(t);t||(t=""),n=e.getElementsByTagName("head")[0],Js(t.split(","),function(e){var t;e=vr._addCacheSuffix(e),a[e]||(a[e]=!0,t=$("link",{rel:"stylesheet",href:e}),n.appendChild(t))})},re=function(e,t,n){C(e).toggleClass(t,n).each(function(){""===this.className&&jr(this).attr("class",null)})},oe=function(e,t){C(e).addClass(t)},ie=function(e,t){re(e,t,!1)},ae=function(e,t){return C(e).hasClass(t)},se=function(e){C(e).show()},le=function(e){C(e).hide()},ue=function(e){return"none"===C(e).css("display")},ce=function(e){return(e||"mce_")+s++},de=function(e){var t="string"==typeof e?g(e):e;return ws.isElement(t)?t.outerHTML:jr("<div></div>").append(jr(t).clone()).html()},fe=function(e,t){C(e).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=t)}catch(e){}J(jr(this).html(t),!0)})},he=function(e,t){var n=g(t);return z(e,function(e){var t,r;return t=n.parentNode,r=n.nextSibling,r?t.insertBefore(e,r):t.appendChild(e),e})},pe=function(e,t,n){return z(t,function(t){return vr.is(t,"array")&&(e=e.cloneNode(!0)),n&&Js(Qs(t.childNodes),function(t){e.appendChild(t)}),t.parentNode.replaceChild(e,t)})},me=function(e,t){var n;return e.nodeName!==t.toUpperCase()&&(n=$(t),Js(N(e),function(t){_(n,t.nodeName,k(e,t.nodeName))}),pe(n,e,!0)),n||e},ge=function(e,t){for(var n,r=e;r;){for(n=t;n&&r!==n;)n=n.parentNode;if(r===n)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},ve=function(e){return d.toHex(vr.trim(e))},be=function(e,t){var n,r,o,i,a,s,l=0;if(e=e.firstChild){a=new b(e,e.parentNode),t=t||(c?c.getNonEmptyElements():null),i=c?c.getWhiteSpaceElements():{};do{if(o=e.nodeType,ws.isElement(e)){var u=e.getAttribute("data-mce-bogus");if(u){e=a.next("all"===u);continue}if(s=e.nodeName.toLowerCase(),t&&t[s]){if("br"===s){l++,e=a.next();continue}return!1}for(r=N(e),n=r.length;n--;)if("name"===(s=r[n].nodeName)||"data-mce-bookmark"===s)return!1}if(8===o)return!1;if(3===o&&!tl.test(e.nodeValue))return!1;if(3===o&&e.parentNode&&i[e.parentNode.nodeName]&&tl.test(e.nodeValue))return!1;e=a.next()}while(e)}return l<=1},ye=function(){return e.createRange()},we=function(e,t,n){var r,o,i,a=ye();if(e&&t)return a.setStart(e.parentNode,ol(e)),a.setEnd(t.parentNode,ol(t)),r=a.extractContents(),a=ye(),a.setStart(t.parentNode,ol(t)+1),a.setEnd(e.parentNode,ol(e)+1),o=a.extractContents(),i=e.parentNode,i.insertBefore(Ns.trimNode(Oe,r),e),n?i.insertBefore(n,e):i.insertBefore(t,e),i.insertBefore(Ns.trimNode(Oe,o),e),J(e),n||t},xe=function(n,r,o,a){if(vr.isArray(n)){for(var s=n.length;s--;)n[s]=xe(n[s],r,o,a);return n}return!t.collect||n!==e&&n!==i||u.push([n,r,o,a]),f.bind(n,r,o,a||Oe)},Ce=function(t,n,r){var o;if(vr.isArray(t)){for(o=t.length;o--;)t[o]=Ce(t[o],n,r);return t}if(u&&(t===e||t===i))for(o=u.length;o--;){var a=u[o];t!==a[0]||n&&n!==a[1]||r&&r!==a[2]||f.unbind(a[0],a[1],a[2])}return f.unbind(t,n,r)},ke=function(e,t,n){return f.fire(e,t,n)},Ne=function(e){if(e&&ws.isElement(e)){var t=e.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null}return null},_e=function(e){for(var t=T(),n=null;e&&e!==t&&null===(n=Ne(e));e=e.parentNode);return n},Se=function(){if(u)for(var e=u.length;e--;){var t=u[e];f.unbind(t[0],t[1],t[2])}Kn.setDocument&&Kn.setDocument()},Te=function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},Ee=function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},Oe={doc:e,settings:t,win:i,files:a,stdMode:!0,boxModel:!0,styleSheetLoader:l,boundEvents:u,styles:d,schema:c,events:f,isBlock:m,$:p,$$:C,root:null,clone:S,getRoot:T,getViewPort:E,getRect:P,getSize:M,getParent:j,getParents:I,get:g,getNext:F,getPrev:H,select:U,is:L,add:q,create:$,createHTML:X,createFragment:Y,remove:J,setStyle:A,getStyle:R,setStyles:D,removeAllAttribs:Q,setAttrib:_,setAttribs:W,getAttrib:k,getPos:O,parseStyle:Z,serializeStyle:ee,addStyle:te,loadCSS:ne,addClass:oe,removeClass:ie,hasClass:ae,toggleClass:re,show:se,hide:le,isHidden:ue,uniqueId:ce,setHTML:V,getOuterHTML:de,setOuterHTML:fe,decode:K,encode:G,insertAfter:he,replace:pe,rename:me,findCommonAncestor:ge,toHex:ve,run:z,getAttribs:N,isEmpty:be,createRng:ye,nodeIndex:ol,split:we,bind:xe,unbind:Ce,fire:ke,getContentEditable:Ne,getContentEditableParent:_e,destroy:Se,isChildOf:Te,dumpRng:Ee};return r=nl(d,t,function(){return Oe}),Oe}function C(){var e=this,t=[],n={},r={},o=[],i=function(e){if(r[e])return r[e].instance},a=function(e){var t;return r[e]&&(t=r[e].dependencies),t||[]},s=function(e,t){var r=C.language;if(r&&!1!==C.languageLoad){if(t)if(t=","+t+",",-1!==t.indexOf(","+r.substr(0,2)+","))r=r.substr(0,2);else if(-1===t.indexOf(","+r+","))return;cl.ScriptLoader.add(n[e]+"/langs/"+r+".js")}},l=function(e,n,i){t.push(n),r[e]={instance:n,dependencies:i};var a=qe(o,function(t){return t.name===e});return o=a.fail,dl(a.pass,function(e){e.callback()}),n},u=function(e){delete n[e],delete r[e]},c=function(e,t){return"object"==typeof t?t:"string"==typeof e?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}},d=function(t,n){var r=e.urls[t];dl(n,function(e){cl.ScriptLoader.add(r+"/"+e)})},f=function(e,t,n,r){var o=a(e);dl(o,function(e){var n=c(t,e);h(n.resource,n,void 0,void 0)}),n&&(r?n.call(r):n.call(cl))},h=function(e,t,o,i,a){if(!n[e]){var s="string"==typeof t?t:t.prefix+t.resource+t.suffix;0!==s.indexOf("/")&&-1===s.indexOf("://")&&(s=C.baseURL+"/"+s),n[e]=s.substring(0,s.lastIndexOf("/")),r[e]?f(e,t,o,i):cl.ScriptLoader.add(s,function(){return f(e,t,o,i)},i,a)}};return{items:t,urls:n,lookup:r,_listeners:o,get:i,dependencies:a,requireLangPack:s,add:l,remove:u,createUrl:c,addComponents:d,load:h,waitFor:function(e,t){r.hasOwnProperty(e)?t():o.push({name:e,callback:t})}}}function k(e,t,n){var r=n||!1,o=function(){t(),r=!0},i=function(){e(),r=!1};return{on:o,off:i,toggle:function(){(r?i:o)()},isOn:function(){return r}}}function N(e,t,n,r,o){return e(n,r)?Ee.some(n):Ie(o)&&o(n)?Ee.none():t(n,r,o)}function _(e,t,n){var r=function(){return od(e),0===t},o=function(){return od(e)?t>=e.data.length:t>=e.childNodes.length},i=function(){var n;return n=ld(e.ownerDocument),n.setStart(e,t),n.setEnd(e,t),n},a=function(){return n||(n=vd(_(e,t))),n},s=function(){return a().length>0},l=function(n){return n&&e===n.container()&&t===n.offset()},u=function(n){return sd(e,n?t-1:t)};return{container:tc.constant(e),offset:tc.constant(t),toRange:i,getClientRects:a,isVisible:s,isAtStart:r,isAtEnd:o,isEqual:l,getNode:u}}function S(e){var t=Ou();Eu(e,t);var n=Tu(e,t);return{register:function(e,n){t.register(e,n)},annotate:function(n,r){t.lookup(n).each(function(t){Xm(e,n,t,r)})},annotationChanged:function(e,t){n.addListener(e,t)},remove:function(t){ku(e,Ee.some(t)).each(function(e){var t=e.elements;We(t,Tl.unwrap)})},getAll:function(t){var n=Su(e,t);return $o(n,function(e){return ze(e,function(e){return e.dom()})})}}}function T(e){var t,n,r,o,i,a=[];return e=e||{},t=e.indent,n=Tg(e.indent_before||""),r=Tg(e.indent_after||""),o=Fs.getEncodeFunc(e.entity_encoding||"raw",e.entities),i="html"===e.element_format,{start:function(e,s,l){var u,c,d,f;if(t&&n[e]&&a.length>0&&(f=a[a.length-1],f.length>0&&"\n"!==f&&a.push("\n")),a.push("<",e),s)for(u=0,c=s.length;u<c;u++)d=s[u],a.push(" ",d.name,'="',o(d.value,!0),'"');a[a.length]=!l||i?">":" />",l&&t&&r[e]&&a.length>0&&(f=a[a.length-1],f.length>0&&"\n"!==f&&a.push("\n"))},end:function(e){var n;a.push("</",e,">"),t&&r[e]&&a.length>0&&(n=a[a.length-1],n.length>0&&"\n"!==n&&a.push("\n"))},text:function(e,t){e.length>0&&(a[a.length]=t?e:o(e))},cdata:function(e){a.push("<![CDATA[",e,"]]>")},comment:function(e){a.push("\x3c!--",e,"--\x3e")},pi:function(e,n){n?a.push("<?",e," ",o(n),"?>"):a.push("<?",e,"?>"),t&&a.push("\n")},doctype:function(e){a.push("<!DOCTYPE",e,">",t?"\n":"")},reset:function(){a.length=0},getContent:function(){return a.join("").replace(/\n$/,"")}}}function E(e,t){void 0===t&&(t=y());var n=T(e);return e=e||{},e.validate=!("validate"in e)||e.validate,{serialize:function(r){var o,i;i=e.validate,o={3:function(e){n.text(e.value,e.raw)},8:function(e){n.comment(e.value)},7:function(e){n.pi(e.name,e.value)},10:function(e){n.doctype(e.value)},4:function(e){n.cdata(e.value)},11:function(e){if(e=e.firstChild)do{a(e)}while(e=e.next)}},n.reset();var a=function(e){var r,s,l,u,c,d,f,h,p,m=o[e.type];if(m)m(e);else{if(r=e.name,s=e.shortEnded,l=e.attributes,i&&l&&l.length>1&&(d=[],d.map={},p=t.getElementRule(e.name))){for(f=0,h=p.attributesOrder.length;f<h;f++)(u=p.attributesOrder[f])in l.map&&(c=l.map[u],d.map[u]=c,d.push({name:u,value:c}));for(f=0,h=l.length;f<h;f++)(u=l[f].name)in d.map||(c=l.map[u],d.map[u]=c,d.push({name:u,value:c}));l=d}if(n.start(e.name,l,s),!s){if(e=e.firstChild)do{a(e)}while(e=e.next);n.end(r)}}};return 1!==r.type||e.inner?o[11](r):a(r),n.getContent()}}}function O(e){var t,n,r,o,i={state:{},exec:{},value:{}},a=e.settings;e.on("PreInit",function(){t=e.dom,n=e.selection,a=e.settings,r=e.formatter});var s=function(t,n,r,o){var a,s,l=!1;if(!e.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(t)||o&&o.skip_focus?RC.restore(e):e.focus(),o=e.fire("BeforeExecCommand",{command:t,ui:n,value:r}),o.isDefaultPrevented())return!1;if(s=t.toLowerCase(),a=i.exec[s])return a(s,n,r),e.fire("ExecCommand",{command:t,ui:n,value:r}),!0;if(LC(e.plugins,function(o){if(o.execCommand&&o.execCommand(t,n,r))return e.fire("ExecCommand",{command:t,ui:n,value:r}),l=!0,!1}),l)return l;if(e.theme&&e.theme.execCommand&&e.theme.execCommand(t,n,r))return e.fire("ExecCommand",{command:t,ui:n,value:r}),!0;try{l=e.getDoc().execCommand(t,n,r)}catch(e){}return!!l&&(e.fire("ExecCommand",{command:t,ui:n,value:r}),!0)}},l=function(t){var n;if(!e.quirks.isHidden()&&!e.removed){if(t=t.toLowerCase(),n=i.state[t])return n(t);try{return e.getDoc().queryCommandState(t)}catch(e){}return!1}},u=function(t){var n;if(!e.quirks.isHidden()&&!e.removed){if(t=t.toLowerCase(),n=i.value[t])return n(t);try{return e.getDoc().queryCommandValue(t)}catch(e){}}},c=function(e,t){t=t||"exec",LC(e,function(e,n){LC(n.toLowerCase().split(","),function(n){i[t][n]=e})})},d=function(t,n,r){t=t.toLowerCase(),i.exec[t]=function(t,o,i,a){return n.call(r||e,o,i,a)}},f=function(t){if(t=t.toLowerCase(),i.exec[t])return!0;try{return e.getDoc().queryCommandSupported(t)}catch(e){}return!1},h=function(t,n,r){t=t.toLowerCase(),i.state[t]=function(){return n.call(r||e)}},p=function(t,n,r){t=t.toLowerCase(),i.value[t]=function(){return n.call(r||e)}};IC(this,{execCommand:s,queryCommandState:l,queryCommandValue:u,queryCommandSupported:f,addCommands:c,addCommand:d,addQueryStateHandler:h,addQueryValueHandler:p,hasCustomCommand:function(e){return e=e.toLowerCase(),!!i.exec[e]}});var m=function(t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=null),e.getDoc().execCommand(t,n,r)},g=function(e){return r.match(e)},v=function(t,n){r.toggle(t,n?{value:n}:void 0),e.nodeChanged()},b=function(e){o=n.getBookmark(e)},y=function(){n.moveToBookmark(o)};c({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){e.undoManager.add()},"Cut,Copy,Paste":function(t){var n,r=e.getDoc();try{m(t)}catch(e){n=!0}if("paste"!==t||r.queryCommandEnabled(t)||(n=!0),n||!r.queryCommandSupported(t)){var o=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");_t.mac&&(o=o.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:o,type:"error"})}},unlink:function(){if(n.isCollapsed()){var t=e.dom.getParent(e.selection.getStart(),"a");return void(t&&e.dom.remove(t,!0))}r.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(e){var t=e.substring(7);"full"===t&&(t="justify"),LC("left,center,right,justify".split(","),function(e){t!==e&&r.remove("align"+e)}),"none"!==t&&v("align"+t)},"InsertUnorderedList,InsertOrderedList":function(e){var r,o;m(e),(r=t.getParent(n.getNode(),"ol,ul"))&&(o=r.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(o.nodeName)&&(b(),t.split(o,r),y()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){v(e)},"ForeColor,HiliteColor":function(e,t,n){v(e,n)},FontName:function(t,n,r){Ex(e,r)},FontSize:function(t,n,r){Ax(e,r)},RemoveFormat:function(e){r.remove(e)},mceBlockQuote:function(){v("blockquote")},FormatBlock:function(e,t,n){return v(n||"p")},mceCleanup:function(){var t=n.getBookmark();e.setContent(e.getContent()),n.moveToBookmark(t)},mceRemoveNode:function(t,r,o){var i=o||n.getNode();i!==e.getBody()&&(b(),e.dom.remove(i,!0),y())},mceSelectNodeDepth:function(r,o,i){var a=0;t.getParent(n.getNode(),function(e){if(1===e.nodeType&&a++===i)return n.select(e),!1},e.getBody())},mceSelectNode:function(e,t,r){n.select(r)},mceInsertContent:function(t,n,r){Bg.insertAtCaret(e,r)},mceInsertRawHTML:function(t,r,o){var i=e.getContent();n.setContent("tiny_mce_marker"),e.setContent(i.replace(/tiny_mce_marker/g,function(){return o}))},mceToggleFormat:function(e,t,n){v(n)},mceSetContent:function(t,n,r){e.setContent(r)},"Indent,Outdent":function(t){PC(e,t)},mceRepaint:function(){},InsertHorizontalRule:function(){e.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){e.hasVisual=!e.hasVisual,e.addVisual()},mceReplaceContent:function(t,r,o){e.execCommand("mceInsertContent",!1,o.replace(/\{\$selection\}/g,n.getContent({format:"text"})))},mceInsertLink:function(e,o,i){var a;"string"==typeof i&&(i={href:i}),a=t.getParent(n.getNode(),"a"),i.href=i.href.replace(" ","%20"),a&&i.href||r.remove("link"),i.href&&r.apply("link",i,a)},selectAll:function(){var e=t.getParent(n.getStart(),ws.isContentEditableTrue);if(e){var r=t.createRng();r.selectNodeContents(e),n.setRng(r)}},delete:function(){gx.deleteCommand(e)},forwardDelete:function(){gx.forwardDeleteCommand(e)},mceNewDocument:function(){e.setContent("")},InsertLineBreak:function(t,n,r){return aC.insert(e,r),!0}});var w=function(e){return function(){var o=n.isCollapsed()?[t.getParent(n.getNode(),t.isBlock)]:n.getSelectedBlocks(),i=jC(o,function(t){return!!r.matchNode(t,e)});return-1!==BC(i,!0)}};c({JustifyLeft:w("alignleft"),JustifyCenter:w("aligncenter"),JustifyRight:w("alignright"),JustifyFull:w("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return g(e)},mceBlockQuote:function(){return g("blockquote")},Outdent:function(){var e;if(a.inline_styles){if((e=t.getParent(n.getStart(),t.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return!0;if((e=t.getParent(n.getEnd(),t.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return!0}return l("InsertUnorderedList")||l("InsertOrderedList")||!a.inline_styles&&!!t.getParent(n.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var r=t.getParent(n.getNode(),"ul,ol");return r&&("insertunorderedlist"===e&&"UL"===r.tagName||"insertorderedlist"===e&&"OL"===r.tagName)}},"state"),c({Undo:function(){e.undoManager.undo()},Redo:function(){e.undoManager.redo()}}),p("FontName",function(){return Ox(e)},this),p("FontSize",function(){return Dx(e)},this)}function A(e){var t=this,n={},r=[],o=function(e){var t,n,r={};dk(fk(e,"+"),function(e){e in pk?r[e]=!0:/^[0-9]{2,}$/.test(e)?r.keyCode=parseInt(e,10):(r.charCode=e.charCodeAt(0),r.keyCode=hk[e]||e.toUpperCase().charCodeAt(0))}),t=[r.keyCode];for(n in pk)r[n]?t.push(n):r[n]=!1;return r.id=t.join(","),r.access&&(r.alt=!0,_t.mac?r.ctrl=!0:r.shift=!0),r.meta&&(_t.mac?r.meta=!0:(r.ctrl=!0,r.meta=!1)),r},i=function(t,n,r,i){var a;return a=vr.map(fk(t,">"),o),a[a.length-1]=vr.extend(a[a.length-1],{func:r,scope:i||e}),vr.extend(a[0],{desc:e.translate(n),subpatterns:a.slice(1)})},a=function(e){return e.altKey||e.ctrlKey||e.metaKey},s=function(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123},l=function(e,t){return!!t&&(t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&(t.alt===e.altKey&&t.shift===e.shiftKey&&(!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0))))},u=function(e){return e.func?e.func.call(e.scope):null};e.on("keyup keypress keydown",function(e){!a(e)&&!s(e)||e.isDefaultPrevented()||(dk(n,function(t){if(l(e,t))return r=t.subpatterns.slice(0),"keydown"===e.type&&u(t),!0}),l(e,r[0])&&(1===r.length&&"keydown"===e.type&&u(r[0]),r.shift()))}),t.add=function(t,r,o,a){var s;return s=o,"string"==typeof o?o=function(){e.execCommand(s,!1,null)}:vr.isArray(s)&&(o=function(){e.execCommand(s[0],s[1],s[2])}),dk(fk(vr.trim(t.toLowerCase())),function(e){var t=i(e,r,o,a);n[t.id]=t}),!0},t.remove=function(e){var t=i(e);return!!n[t.id]&&(delete n[t.id],!0)}}function D(){var e=function(){throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,reposition:e,getArgs:e}}function R(e){var t=[],n=function(){var t=e.theme;return t&&t.getNotificationManagerImpl?t.getNotificationManagerImpl():D()},r=function(){return Ee.from(t[0])},o=function(e,t){return!(e.type!==t.type||e.text!==t.text||e.progressBar||e.timeout||t.progressBar||t.timeout)},i=function(){t.length>0&&n().reposition(t)},a=function(e){t.push(e)},s=function(e){Ye(t,function(t){return t===e}).each(function(e){t.splice(e,1)})},l=function(r){if(!e.removed&&eN.isEditorAttachedToDom(e))return Xe(t,function(e){return o(n().getArgs(e),r)}).getOrThunk(function(){e.editorManager.setActive(e);var t=n().open(r,function(){s(t),i()});return a(t),i(),t})},u=function(){r().each(function(e){n().close(e),s(e),i()})},c=function(){return t};return function(e){e.on("SkinLoaded",function(){var t=e.settings.service_message;t&&l({text:t,type:"warning",timeout:0,icon:""})}),e.on("ResizeEditor ResizeWindow",function(){Mt.requestAnimationFrame(i)}),e.on("remove",function(){We(t,function(e){n().close(e)})})}(e),{open:l,close:u,getNotifications:c}}function M(){var e=function(){throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,alert:e,confirm:e,close:e,getParams:e,setParams:e}}function P(e){var t=[],n=function(){var t=e.theme;return t&&t.getWindowManagerImpl?t.getWindowManagerImpl():M()},r=function(e,t){return function(){return t?t.apply(e,arguments):void 0}},o=function(t){e.fire("OpenWindow",{win:t})},i=function(t){e.fire("CloseWindow",{win:t})},a=function(e){t.push(e),o(e)},s=function(n){Ye(t,function(e){return e===n}).each(function(r){t.splice(r,1),i(n),0===t.length&&e.focus()})},l=function(){return Ee.from(t[t.length-1])},u=function(t,r){e.editorManager.setActive(e),RC.store(e);var o=n().open(t,r,s);return a(o),o},c=function(e,t,o){var i=n().alert(e,r(o||this,t),s);a(i)},d=function(e,t,o){var i=n().confirm(e,r(o||this,t),s);a(i)},f=function(){l().each(function(e){n().close(e),s(e)})},h=function(){return l().map(n().getParams).getOr(null)},p=function(e){l().each(function(t){n().setParams(t,e)})},m=function(){return t};return e.on("remove",function(){We(t.slice(0),function(e){n().close(e)})}),{windows:t,open:u,alert:c,confirm:d,close:f,getParams:h,setParams:p,getWindows:m}}function L(){return new(mt.getOrDie("XMLHttpRequest"))}function I(e,t){var n={},r=function(e,t){return e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t},o=function(e,n,o,i){var a,s;a=new L,a.open("POST",t.url),a.withCredentials=t.credentials,a.upload.onprogress=function(e){i(e.loaded/e.total*100)},a.onerror=function(){o("Image upload failed due to a XHR Transport error. Code: "+a.status)},a.onload=function(){var e;return a.status<200||a.status>=300?void o("HTTP Error: "+a.status):(e=JSON.parse(a.responseText))&&"string"==typeof e.location?void n(r(t.basePath,e.location)):void o("Invalid JSON: "+a.responseText)},s=new FormData,s.append("file",e.blob(),e.filename()),a.send(s)},i=function(){return new St(function(e){e([])})},a=function(e,t){return{url:t,blobInfo:e,status:!0}},s=function(e,t){return{url:"",blobInfo:e,status:!1,error:t}},l=function(e,t){vr.each(n[e],function(e){e(t)}),delete n[e]},u=function(t,n,r){return e.markPending(t.blobUri()),new St(function(o){var i,u,c=function(){};try{var d=function(){i&&(i.close(),u=c)},f=function(n){d(),e.markUploaded(t.blobUri(),n),l(t.blobUri(),a(t,n)),o(a(t,n))},h=function(n){d(),e.removeFailed(t.blobUri()),l(t.blobUri(),s(t,n)),o(s(t,n))};u=function(e){e<0||e>100||(i||(i=r()),i.progressBar.value(e))},n(t,f,h,u)}catch(e){o(s(t,e.message))}})},c=function(e){return e===o},d=function(e){var t=e.blobUri();return new St(function(e){n[t]=n[t]||[],n[t].push(e)})},f=function(n,r){return n=vr.grep(n,function(t){return!e.isUploaded(t.blobUri())}),St.all(vr.map(n,function(n){return e.isPending(n.blobUri())?d(n):u(n,t.handler,r)}))},h=function(e,n){return!t.url&&c(t.handler)?i():f(e,n)};return t=vr.extend({credentials:!1,handler:o},t),{upload:h}}function j(e,t){return new(mt.getOrDie("Blob"))(e,t)}function B(){return new(mt.getOrDie("FileReader"))}function F(e){return new(mt.getOrDie("Uint8Array"))(e)}function H(e,t){var n={};return{findAll:function(r,o){var i;o||(o=tc.constant(!0)),i=or.filter(NN(r),function(t){var n=t.src;return!!_t.fileApi&&(!t.hasAttribute("data-mce-bogus")&&(!t.hasAttribute("data-mce-placeholder")&&(!(!n||n===_t.transparentSrc)&&(0===n.indexOf("blob:")?!e.isUploaded(n):0===n.indexOf("data:")&&o(t)))))});var a=or.map(i,function(e){if(n[e.src])return new St(function(t){n[e.src].then(function(n){if("string"==typeof n)return n;t({image:e,blobInfo:n.blobInfo})})});var r=new St(function(n,r){kN(t,e,n,r)}).then(function(e){return delete n[e.image.src],e}).catch(function(t){return delete n[e.src],t});return n[e.src]=r,r});return St.all(a)}}}function U(){var e=[],t=tc.constant,n=function(e){return{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[e.toLowerCase()]||"dat"},r=function(e,t,n,r){return o("object"==typeof e?e:{id:e,name:r,blob:t,base64:n})},o=function(e){var r,o;if(!e.blob||!e.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");return r=e.id||EN.uuid("blobid"),o=e.name||r,{id:t(r),name:t(o),filename:t(o+"."+n(e.blob.type)),blob:t(e.blob),base64:t(e.base64),blobUri:t(e.blobUri||yt.createObjectURL(e.blob)),uri:t(e.uri)}},i=function(t){a(t.id())||e.push(t)},a=function(e){return s(function(t){return t.id()===e})},s=function(t){return or.filter(e,t)[0]};return{create:r,add:i,get:a,getByUri:function(e){return s(function(t){return t.blobUri()===e})},findFirst:s,removeByUri:function(t){e=or.filter(e,function(e){return e.blobUri()!==t||(yt.revokeObjectURL(e.blobUri()),!1)})},destroy:function(){or.each(e,function(e){yt.revokeObjectURL(e.blobUri())}),e=[]}}}function z(){var e={},t=function(e,t){return{status:e,resultUri:t}},n=function(t){return t in e};return{hasBlobUri:n,getResultUri:function(t){var n=e[t];return n?n.resultUri:null},isPending:function(t){return!!n(t)&&1===e[t].status},isUploaded:function(t){return!!n(t)&&2===e[t].status},markPending:function(n){e[n]=t(1,null)},markUploaded:function(n,r){e[n]=t(2,r)},removeFailed:function(t){delete e[t]},destroy:function(){e={}}}}function W(e){var t,n,r=U(),o=e.settings,i=z(),a=function(t){return function(n){return e.selection?t(n):[]}},s=function(){return"?"+(new Date).getTime()},l=function(e,t,n){var r=0;do{-1!==(r=e.indexOf(t,r))&&(e=e.substring(0,r)+n+e.substr(r+t.length),r+=n.length-t.length+1)}while(-1!==r);return e},u=function(e,t,n){return e=l(e,'src="'+t+'"','src="'+n+'"'),e=l(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')},c=function(t,n){or.each(e.undoManager.data,function(e){"fragmented"===e.type?e.fragments=or.map(e.fragments,function(e){return u(e,t,n)}):e.content=u(e.content,t,n)})},d=function(){return e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})},f=function(t,n){r.removeByUri(t.src),c(t.src,n),e.$(t).attr({src:o.images_reuse_filename?n+s():n,"data-mce-src":e.convertURL(n,"src")})},h=function(n){return t||(t=I(i,{url:o.images_upload_url,basePath:o.images_upload_base_path,credentials:o.images_upload_credentials,handler:o.images_upload_handler})),g().then(a(function(r){var o;return o=or.map(r,function(e){return e.blobInfo}),t.upload(o,d).then(a(function(t){var o=or.map(t,function(t,n){var o=r[n].image;return t.status&&!1!==e.settings.images_replace_blob_uris?f(o,t.url):t.error&&uN.uploadError(e,t.error),{element:o,status:t.status}});return n&&n(o),o}))}))},p=function(e){if(!1!==o.automatic_uploads)return h(e)},m=function(e){return!o.images_dataimg_filter||o.images_dataimg_filter(e)},g=function(){return n||(n=H(i,r)),n.findAll(e.getBody(),m).then(a(function(t){return t=or.filter(t,function(t){return"string"!=typeof t||(uN.displayError(e,t),!1)}),or.each(t,function(e){c(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),t}))},v=function(){r.destroy(),i.destroy(),n=t=null},b=function(t){return t.replace(/src="(blob:[^"]+)"/g,function(t,n){var o=i.getResultUri(n);if(o)return'src="'+o+'"';var a=r.getByUri(n);return a||(a=or.reduce(e.editorManager.get(),function(e,t){return e||t.editorUpload&&t.editorUpload.blobCache.getByUri(n)},null)),a?'src="data:'+a.blob().type+";base64,"+a.base64()+'"':t})};return e.on("setContent",function(){!1!==e.settings.automatic_uploads?p():g()}),e.on("RawSaveContent",function(e){e.content=b(e.content)}),e.on("getContent",function(e){e.source_view||"raw"===e.format||(e.content=b(e.content))}),e.on("PostRender",function(){e.parser.addNodeFilter("img",function(e){or.each(e,function(e){var t=e.attr("src");if(!r.getByUri(t)){var n=i.getResultUri(t);n&&e.attr("src",n)}})})}),{blobCache:r,uploadImages:h,uploadImagesAuto:p,scanForImages:g,destroy:v}}function V(e){var t,n=[],r=function(t){var r,o;if(o=e.$(t).parentsUntil(e.getBody()).add(t),o.length===n.length){for(r=o.length;r>=0&&o[r]===n[r];r--);if(-1===r)return n=o,!0}return n=o,!1};"onselectionchange"in e.getDoc()||e.on("NodeChange Click MouseUp KeyUp Focus",function(n){var r,o;r=e.selection.getRng(),o={startContainer:r.startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset},"nodechange"!==n.type&&Mx.isEq(o,t)||e.fire("SelectionChange"),t=o}),e.on("contextmenu",function(){e.fire("SelectionChange")}),e.on("SelectionChange",function(){var t=e.selection.getStart(!0);!t||!_t.range&&e.selection.isCollapsed()||zN(e)&&!r(t)&&e.dom.isChildOf(t,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("MouseUp",function(t){!t.isDefaultPrevented()&&zN(e)&&("IMG"===e.selection.getNode().nodeName?Mt.setEditorTimeout(e,function(){e.nodeChanged()}):e.nodeChanged())}),this.nodeChanged=function(t){var n,r,o,i=e.selection;e.initialized&&i&&!e.settings.disable_nodechange&&!e.readonly&&(o=e.getBody(),n=i.getStart(!0)||o,n.ownerDocument===e.getDoc()&&e.dom.isChildOf(n,o)||(n=o),r=[],e.dom.getParent(n,function(e){if(e===o)return!0;r.push(e)}),t=t||{},t.element=n,t.parents=r,e.fire("NodeChange",t))}}function q(e,t){void 0===t&&(t=y());var n=function(){};e=e||{},!1!==e.fix_self_closing&&(e.fix_self_closing=!0);var r=e.comment?e.comment:n,o=e.cdata?e.cdata:n,i=e.text?e.text:n,a=e.start?e.start:n,s=e.end?e.end:n,l=e.pi?e.pi:n,u=e.doctype?e.doctype:n;return{parse:function(n){var c,d,f,h,p,m,g,v,b,y,w,x,C,k,N,_,S,T,E,O,A,D,R,M,P,L,I,j,B,F,H=0,U=[],z=0,W=Fs.decode,V=vr.makeMap("src,href,data,background,formaction,poster,xlink:href"),q=/((java|vb)script|mhtml):/i,$=function(e){var t,n;for(t=U.length;t--&&U[t].name!==e;);if(t>=0){for(n=U.length-1;n>=t;n--)e=U[n],e.valid&&s(e.name);U.length=t}},K=function(t,n,r,o,i){var a,s,l=/[\s\u0000-\u001F]+/g;if(n=n.toLowerCase(),r=n in w?n:W(r||o||i||""),C&&!v&&!1===Q_(n)){if(!(a=T[n])&&E){for(s=E.length;s--&&(a=E[s],!a.pattern.test(n)););-1===s&&(a=null)}if(!a)return;if(a.validValues&&!(r in a.validValues))return}if(V[n]&&!e.allow_script_urls){var u=r.replace(l,"");try{u=decodeURIComponent(u)}catch(e){u=unescape(u)}if(q.test(u))return;if(eS(e,u))return}v&&(n in V||0===n.indexOf("on"))||(h.map[n]=r,h.push({name:n,value:r}))};for(L=new RegExp("<(?:(?:!--([\\w\\W]*?)--\x3e)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),I=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,y=t.getShortEndedElements(),P=e.self_closing_elements||t.getSelfClosingElements(),w=t.getBoolAttrs(),C=e.validate,b=e.remove_internals,F=e.fix_self_closing,j=t.getSpecialElements(),R=n+">";c=L.exec(R);){if(H<c.index&&i(W(n.substr(H,c.index-H))),d=c[6])d=d.toLowerCase(),":"===d.charAt(0)&&(d=d.substr(1)),$(d);else if(d=c[7]){if(c.index+c[0].length>n.length){i(W(n.substr(c.index))),H=c.index+c[0].length;continue}if(d=d.toLowerCase(),":"===d.charAt(0)&&(d=d.substr(1)),x=d in y,F&&P[d]&&U.length>0&&U[U.length-1].name===d&&$(d),!C||(k=t.getElementRule(d))){if(N=!0,C&&(T=k.attributes,E=k.attributePatterns),(S=c[8])?(v=-1!==S.indexOf("data-mce-type"),v&&b&&(N=!1),h=[],h.map={},S.replace(I,K)):(h=[],h.map={}),C&&!v){if(O=k.attributesRequired,A=k.attributesDefault,D=k.attributesForced,M=k.removeEmptyAttrs,M&&!h.length&&(N=!1),D)for(p=D.length;p--;)_=D[p],g=_.name,B=_.value,"{$uid}"===B&&(B="mce_"+z++),h.map[g]=B,h.push({name:g,value:B});if(A)for(p=A.length;p--;)_=A[p],(g=_.name)in h.map||(B=_.value,"{$uid}"===B&&(B="mce_"+z++),h.map[g]=B,h.push({name:g,value:B}));if(O){for(p=O.length;p--&&!(O[p]in h.map););-1===p&&(N=!1)}if(_=h.map["data-mce-bogus"]){if("all"===_){H=tS(t,n,L.lastIndex),L.lastIndex=H;continue}N=!1}}N&&a(d,h,x)}else N=!1;if(f=j[d]){f.lastIndex=H=c.index+c[0].length,(c=f.exec(n))?(N&&(m=n.substr(H,c.index-H)),H=c.index+c[0].length):(m=n.substr(H),H=n.length),N&&(m.length>0&&i(m,!0),s(d)),L.lastIndex=H;continue}x||(S&&S.indexOf("/")===S.length-1?N&&s(d):U.push({name:d,valid:N}))}else(d=c[1])?(">"===d.charAt(0)&&(d=" "+d),e.allow_conditional_comments||"[if"!==d.substr(0,3).toLowerCase()||(d=" "+d),r(d)):(d=c[2])?o(Z_(d)):(d=c[3])?u(d):(d=c[4])&&l(d,c[5]);H=c.index+c[0].length}for(H<n.length&&i(W(n.substr(H))),p=U.length-1;p>=0;p--)d=U[p],d.valid&&s(d.name)}}}function $(e){var t,n,r=this,o=0,i=[],a=0,s=function(){return 0===a},l=function(e){s()&&(r.typing=e)},u=function(t){e.setDirty(t)},c=function(e){l(!1),r.add({},e)},d=function(){r.typing&&(l(!1),r.add())};e.on("init",function(){r.add()}),e.on("BeforeExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&(d(),r.beforeChange())}),e.on("ExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&c(e)}),e.on("ObjectResizeStart Cut",function(){r.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("DragEnd",c),e.on("KeyUp",function(t){var o=t.keyCode;t.isDefaultPrevented()||((o>=33&&o<=36||o>=37&&o<=40||45===o||t.ctrlKey)&&(c(),e.nodeChanged()),46!==o&&8!==o||e.nodeChanged(),n&&r.typing&&!1===BS.isEq(BS.createFromEditor(e),i[0])&&(!1===e.isDirty()&&(u(!0),e.fire("change",{level:i[0],lastLevel:null})),e.fire("TypingUndo"),n=!1,e.nodeChanged()))}),e.on("KeyDown",function(e){var t=e.keyCode;if(!e.isDefaultPrevented()){if(t>=33&&t<=36||t>=37&&t<=40||45===t)return void(r.typing&&c(e));var o=e.ctrlKey&&!e.altKey||e.metaKey;!(t<16||t>20)||224===t||91===t||r.typing||o||(r.beforeChange(),l(!0),r.add({},e),n=!0)}}),e.on("MouseDown",function(e){r.typing&&c(e)});var f=function(e){return"insertReplacementText"===e.inputType},h=function(e){return"insertText"===e.inputType&&null===e.data};return e.on("input",function(e){e.inputType&&(f(e)||h(e))&&c(e)}),e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo"),e.on("AddUndo Undo Redo ClearUndos",function(t){t.isDefaultPrevented()||e.nodeChanged()}),r={data:i,typing:!1,beforeChange:function(){s()&&(t=Yd.getUndoBookmark(e.selection))},add:function(n,r){var a,l,c,d=e.settings;if(c=BS.createFromEditor(e),n=n||{},n=vr.extend(n,c),!1===s()||e.removed)return null;if(l=i[o],e.fire("BeforeAddUndo",{level:n,lastLevel:l,originalEvent:r}).isDefaultPrevented())return null;if(l&&BS.isEq(l,n))return null;if(i[o]&&(i[o].beforeBookmark=t),d.custom_undo_redo_levels&&i.length>d.custom_undo_redo_levels){for(a=0;a<i.length-1;a++)i[a]=i[a+1];i.length--,o=i.length}n.bookmark=Yd.getUndoBookmark(e.selection),o<i.length-1&&(i.length=o+1),i.push(n),o=i.length-1;var f={level:n,lastLevel:l,originalEvent:r};return e.fire("AddUndo",f),o>0&&(u(!0),e.fire("change",f)),n},undo:function(){var t;return r.typing&&(r.add(),r.typing=!1,l(!1)),o>0&&(t=i[--o],BS.applyToEditor(e,t,!0),u(!0),e.fire("undo",{level:t})),t},redo:function(){var t;return o<i.length-1&&(t=i[++o],BS.applyToEditor(e,t,!1),u(!0),e.fire("redo",{level:t})),t},clear:function(){i=[],o=0,r.typing=!1,r.data=i,e.fire("ClearUndos")},hasUndo:function(){return o>0||r.typing&&i[0]&&!BS.isEq(BS.createFromEditor(e),i[0])},hasRedo:function(){return o<i.length-1&&!r.typing},transact:function(e){return d(),r.beforeChange(),r.ignore(e),r.add()},ignore:function(e){try{a++,e()}finally{a--}},extra:function(t,n){var a,s;r.transact(t)&&(s=i[o].bookmark,a=i[o-1],BS.applyToEditor(e,a,!0),r.transact(n)&&(i[o-1].beforeBookmark=s))}}}function K(e){var t={},n=function(e){return e?t[e]:t},r=function(e,n){e&&("string"!=typeof e?vr.each(e,function(e,t){r(t,e)}):(n=n.length?n:[n],vr.each(n,function(e){void 0===e.deep&&(e.deep=!e.selector),void 0===e.split&&(e.split=!e.selector||e.inline),void 0===e.remove&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),t[e]=n))},o=function(e){return e&&t[e]&&delete t[e],t};return r(uE.get(e.dom)),r(e.settings.formats),{get:n,register:r,unregister:o}}function G(e){var t=K(e),n=Al(null);return xE.setup(e),hT(e),{get:t.get,register:t.register,unregister:t.unregister,apply:be(nE.applyFormat,e),remove:be(LT.remove,e),toggle:be(yE.toggle,e,t),match:be(GS.match,e),matchAll:be(GS.matchAll,e),matchNode:be(GS.matchNode,e),canApply:be(GS.canApply,e),formatChanged:be(sE.formatChanged,e,n),getCssText:be(vE.getCssText,e)}}function X(e,t){void 0===t&&(t=y());var n={},r=[],o={},i={};e=e||{},e.validate=!("validate"in e)||e.validate,e.root_name=e.root_name||"body";var a=function(e){var n,r,o,i,a,l,u,c,d,f,h,p,m,g,v,b;for(p=XE("tr,td,th,tbody,thead,tfoot,table"),f=t.getNonEmptyElements(),h=t.getWhiteSpaceElements(),m=t.getTextBlockElements(),g=t.getSpecialElements(),n=0;n<e.length;n++)if(r=e[n],r.parent&&!r.fixed)if(m[r.name]&&"li"===r.parent.name){for(v=r.next;v&&m[v.name];)v.name="li",v.fixed=!0,r.parent.insert(v,r.parent),v=v.next;r.unwrap(r)}else{for(i=[r],o=r.parent;o&&!t.isValidChild(o.name,r.name)&&!p[o.name];o=o.parent)i.push(o);if(o&&i.length>1){for(i.reverse(),a=l=s(i[0].clone()),d=0;d<i.length-1;d++){for(t.isValidChild(l.name,i[d].name)?(u=s(i[d].clone()),l.append(u)):u=l,c=i[d].firstChild;c&&c!==i[d+1];)b=c.next,u.append(c),c=b;l=u}$E(t,f,h,a)?o.insert(r,i[0],!0):(o.insert(a,i[0],!0),o.insert(r,a)),o=i[0],($E(t,f,h,o)||VE(o,"br"))&&o.empty().remove()}else if(r.parent){if("li"===r.name){if((v=r.prev)&&("ul"===v.name||"ul"===v.name)){v.append(r);continue}if((v=r.next)&&("ul"===v.name||"ul"===v.name)){v.insert(r,v.firstChild,!0);continue}r.wrap(s(new UE("ul",1)));continue}t.isValidChild(r.parent.name,"div")&&t.isValidChild("div",r.name)?r.wrap(s(new UE("div",1))):g[r.name]?r.empty().remove():r.unwrap()}}},s=function(e){var t,a,s;a in n&&(s=o[a],s?s.push(e):o[a]=[e]),t=r.length;for(;t--;)(a=r[t].name)in e.attributes.map&&(s=i[a],s?s.push(e):i[a]=[e]);return e},l=function(e,t){YE(JE(e),function(e){var r=n[e];r||(n[e]=r=[]),r.push(t)})},u=function(){var e=[];for(var t in n)n.hasOwnProperty(t)&&e.push({name:t,callbacks:n[t]});return e},c=function(e,t){YE(JE(e),function(e){var n;for(n=0;n<r.length;n++)if(r[n].name===e)return void r[n].callbacks.push(t);r.push({name:e,callbacks:[t]})})},d=function(){return[].concat(r)},f=function(s,l){var u,c,d,f,h,p,m,g,v,b,y,w=[];l=l||{},o={},i={},v=QE(XE("script,style,head,html,body,title,meta,param"),t.getBlockElements());var x=t.getNonEmptyElements(),C=t.children,k=e.validate,N="forced_root_block"in l?l.forced_root_block:e.forced_root_block,_=t.getWhiteSpaceElements(),S=/^[ \t\r\n]+/,T=/[ \t\r\n]+$/,E=/[ \t\r\n]+/g,O=/^[ \t\r\n]+$/;b=_.hasOwnProperty(l.context)||_.hasOwnProperty(e.root_name);var A=function(e,t){var r,i=new UE(e,t);return e in n&&(r=o[e],r?r.push(i):o[e]=[i]),i},D=function(e){var n,r,o,i,a=t.getBlockElements();for(n=e.prev;n&&3===n.type;){if(o=n.value.replace(T,""),o.length>0)return void(n.value=o);if(r=n.next){if(3===r.type&&r.value.length){n=n.prev;continue}if(!a[r.name]&&"script"!==r.name&&"style"!==r.name){n=n.prev;continue}}i=n.prev,n.remove(),n=i}};u=nS({validate:k,allow_script_urls:e.allow_script_urls,allow_conditional_comments:e.allow_conditional_comments,self_closing_elements:function(e){var t,n={};for(t in e)"li"!==t&&"p"!==t&&(n[t]=e[t]);return n}(t.getSelfClosingElements()),cdata:function(e){y.append(A("#cdata",4)).value=e},text:function(e,t){var n;b||(e=e.replace(E," "),KE(y.lastChild,v)&&(e=e.replace(S,""))),0!==e.length&&(n=A("#text",3),n.raw=!!t,y.append(n).value=e)},comment:function(e){y.append(A("#comment",8)).value=e},pi:function(e,t){y.append(A(e,7)).value=t,D(y)},doctype:function(e){var t;t=y.append(A("#doctype",10)),t.value=e,D(y)},start:function(e,n,o){var a,s,l,u,c;if(l=k?t.getElementRule(e):{}){for(a=A(l.outputName||e,1),a.attributes=n,a.shortEnded=o,y.append(a),c=C[y.name],c&&C[a.name]&&!c[a.name]&&w.push(a),s=r.length;s--;)(u=r[s].name)in n.map&&(m=i[u],m?m.push(a):i[u]=[a]);v[e]&&D(a),o||(y=a),!b&&_[e]&&(b=!0)}},end:function(n){var r,o,i,a,s;if(o=k?t.getElementRule(n):{}){if(v[n]&&!b){if((r=y.firstChild)&&3===r.type)if(i=r.value.replace(S,""),i.length>0)r.value=i,r=r.next;else for(a=r.next,r.remove(),r=a;r&&3===r.type;)i=r.value,a=r.next,(0===i.length||O.test(i))&&(r.remove(),r=a),r=a;if((r=y.lastChild)&&3===r.type)if(i=r.value.replace(T,""),i.length>0)r.value=i,r=r.prev;else for(a=r.prev,r.remove(),r=a;r&&3===r.type;)i=r.value,a=r.prev,(0===i.length||O.test(i))&&(r.remove(),r=a),r=a}if(b&&_[n]&&(b=!1),o.removeEmpty&&$E(t,x,_,y)&&!y.attributes.map.name&&!y.attr("id"))return s=y.parent,v[y.name]?y.empty().remove():y.unwrap(),void(y=s);o.paddEmpty&&(WE(y)||$E(t,x,_,y))&&zE(e,l,v,y),y=y.parent}}},t);var R=y=new UE(l.context||e.root_name,11);if(u.parse(s),k&&w.length&&(l.context?l.invalid=!0:a(w)),N&&("body"===R.name||l.isRootContent)&&function(){var n,r,o=R.firstChild,i=function(e){e&&(o=e.firstChild,o&&3===o.type&&(o.value=o.value.replace(S,"")),(o=e.lastChild)&&3===o.type&&(o.value=o.value.replace(T,"")))};if(t.isValidChild(R.name,N.toLowerCase())){for(;o;)n=o.next,3===o.type||1===o.type&&"p"!==o.name&&!v[o.name]&&!o.attr("data-mce-type")?r?r.append(o):(r=A(N,1),r.attr(e.forced_root_block_attrs),R.insert(r,o),r.append(o)):(i(r),r=null),o=n;i(r)}}(),!l.invalid){for(g in o){for(m=n[g],c=o[g],h=c.length;h--;)c[h].parent||c.splice(h,1);for(d=0,f=m.length;d<f;d++)m[d](c,g,l)}for(d=0,f=r.length;d<f;d++)if(m=r[d],m.name in i){for(c=i[m.name],h=c.length;h--;)c[h].parent||c.splice(h,1);for(h=0,p=m.callbacks.length;h<p;h++)m.callbacks[h](c,m.name,l)}}return R},h={schema:t,addAttributeFilter:c,getAttributeFilters:d,addNodeFilter:l,getNodeFilters:u,filterNode:s,parse:f};return GE(h,e),jE.register(h,e),h}function Y(e,t){var n,r,o,i=["data-mce-selected"];n=t&&t.dom?t.dom:il.DOM,r=t&&t.schema?t.schema:y(e),e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs=!("remove_trailing_brs"in e)||e.remove_trailing_brs,o=X(e,r),TE.register(o,e,n);var a=function(i,a){var s=NE({format:"html"},a||{}),l=DE.process(t,i,s),u=tO(n,l,s),c=nO(o,u,s);return"tree"===s.format?c:oO(t,e,r,c,s)};return{schema:r,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:a,addRules:function(e){r.addValidElements(e)},setRules:function(e){r.setValidElements(e)},addTempAttr:be(ZE,o,i),getTempAttrs:function(){return i}}}function J(e,t){var n=Y(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs}}function Q(e){return{getBookmark:be(am.getBookmark,e),moveToBookmark:be(am.moveToBookmark,e)}}function Z(e){var t=vr.each,n=q_.BACKSPACE,r=q_.DELETE,o=e.dom,i=e.selection,a=e.settings,s=e.parser,l=_t.gecko,u=_t.ie,c=_t.webkit,d=u?"Text":"URL",f=function(t,n){try{e.getDoc().execCommand(t,!1,n)}catch(e){}},h=function(e){return e.isDefaultPrevented()},p=function(t){var n,r;t.dataTransfer&&(e.selection.isCollapsed()&&"IMG"===t.target.tagName&&i.select(t.target),n=e.selection.getContent(),n.length>0&&(r="data:text/mce-internal,"+escape(e.id)+","+escape(n),t.dataTransfer.setData(d,r)))},m=function(e){var t;return e.dataTransfer&&(t=e.dataTransfer.getData(d))&&t.indexOf("data:text/mce-internal,")>=0?(t=t.substr("data:text/mce-internal,".length).split(","),{id:unescape(t[0]),html:unescape(t[1])}):null},g=function(t,n){e.queryCommandSupported("mceInsertClipboardContent")?e.execCommand("mceInsertClipboardContent",!1,{content:t,internal:n}):e.execCommand("mceInsertContent",!1,t)},v=function(){e.shortcuts.add("meta+a",null,"SelectAll")},b=function(){e.on("keydown",function(e){if(!h(e)&&e.keyCode===n&&i.isCollapsed()&&0===i.getRng().startOffset){var t=i.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})},y=function(){e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",function(t){var n;if("HTML"===t.target.nodeName){if(_t.ie>11)return void e.getBody().focus();n=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(n),e.selection.normalize(),e.nodeChanged()}}))},w=function(){},x=function(){var t;return!l||e.removed?0:!(t=e.selection.getSel())||!t.rangeCount||0===t.rangeCount};return function(){e.on("keydown",function(t){var n,r,a,s,l;if(!h(t)&&t.keyCode===q_.BACKSPACE&&(n=i.getRng(),r=n.startContainer,a=n.startOffset,s=o.getRoot(),l=r,n.collapsed&&0===a)){for(;l&&l.parentNode&&l.parentNode.firstChild===l&&l.parentNode!==s;)l=l.parentNode;"BLOCKQUOTE"===l.tagName&&(e.formatter.toggle("blockquote",null,l),n=o.createRng(),n.setStart(r,0),n.setEnd(r,0),i.setRng(n))}})}(),function(){var t=function(e){var t=o.create("body"),n=e.cloneContents();return t.appendChild(n),i.serializer.serialize(t,{format:"html"})},a=function(n){var r=t(n),i=o.createRng();return i.selectNode(e.getBody()),r===t(i)};e.on("keydown",function(t){var i,s,l=t.keyCode;if(!h(t)&&(l===r||l===n)){if(i=e.selection.isCollapsed(),s=e.getBody(),i&&!o.isEmpty(s))return;if(!i&&!a(e.selection.getRng()))return;t.preventDefault(),e.setContent(""),s.firstChild&&o.isBlock(s.firstChild)?e.selection.setCursorLocation(s.firstChild,0):e.selection.setCursorLocation(s,0),e.nodeChanged()}})}(),_t.windowsPhone||function(){e.on("keyup focusin mouseup",function(e){q_.modifierPressed(e)||i.normalize()},!0)}(),c&&(function(){e.settings.content_editable||o.bind(e.getDoc(),"mousedown mouseup",function(t){var n;if(t.target===e.getDoc().documentElement)if(n=i.getRng(),e.getBody().focus(),"mousedown"===t.type){if(uc(n.startContainer))return;i.placeCaretAt(t.clientX,t.clientY)}else i.setRng(n)})}(),function(){e.on("click",function(t){var n=t.target;/^(IMG|HR)$/.test(n.nodeName)&&"false"!==o.getContentEditableParent(n)&&(t.preventDefault(),e.selection.select(n),e.nodeChanged()),"A"===n.nodeName&&o.hasClass(n,"mce-item-anchor")&&(t.preventDefault(),i.select(n))})}(),function(){a.forced_root_block&&e.on("init",function(){f("DefaultParagraphSeparator",a.forced_root_block)})}(),function(){e.on("init",function(){e.dom.bind(e.getBody(),"submit",function(e){e.preventDefault()})})}(),b(),function(){s.addNodeFilter("br",function(e){for(var t=e.length;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()})}(),_t.iOS?(function(){e.inline||e.on("keydown",function(){document.activeElement===document.body&&e.getWin().focus()})}(),y(),function(){e.on("click",function(e){var t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")}()):v()),_t.ie>=11&&(y(),b()),_t.ie&&(v(),function(){f("AutoUrlDetect",!1)}(),function(){e.on("dragstart",function(e){p(e)}),e.on("drop",function(t){if(!h(t)){var n=m(t);if(n&&n.id!==e.id){t.preventDefault();var r=mO.fromPoint(t.x,t.y,e.getDoc());i.setRng(r),g(n.html,!0)}}})}()),l&&(!function(){e.on("keydown",function(t){if(!h(t)&&t.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(i.isCollapsed()&&0===i.getRng().startOffset){var r=i.getNode(),a=r.previousSibling;if("HR"===r.nodeName)return o.remove(r),void t.preventDefault();a&&a.nodeName&&"hr"===a.nodeName.toLowerCase()&&(o.remove(a),t.preventDefault())}}})}(),function(){Range.prototype.getClientRects||e.on("mousedown",function(t){if(!h(t)&&"HTML"===t.target.nodeName){var n=e.getBody();n.blur(),Mt.setEditorTimeout(e,function(){n.focus()})}})}(),function(){var n=function(){var n=o.getAttribs(i.getStart().cloneNode(!1));return function(){var r=i.getStart();r!==e.getBody()&&(o.setAttrib(r,"style",null),t(n,function(e){r.setAttributeNode(e.cloneNode(!0))}))}},r=function(){return!i.isCollapsed()&&o.getParent(i.getStart(),o.isBlock)!==o.getParent(i.getEnd(),o.isBlock)};e.on("keypress",function(t){var o;if(!h(t)&&(8===t.keyCode||46===t.keyCode)&&r())return o=n(),e.getDoc().execCommand("delete",!1,null),o(),t.preventDefault(),!1}),o.bind(e.getDoc(),"cut",function(t){var o;!h(t)&&r()&&(o=n(),Mt.setEditorTimeout(e,function(){o()}))})}(),function(){var t=function(){f("StyleWithCSS",!1),f("enableInlineTableEditing",!1),a.object_resizing||f("enableObjectResizing",!1)};a.readonly||e.on("BeforeExecCommand MouseDown",t)}(),function(){var n=function(){t(o.select("a"),function(e){var t=e.parentNode,n=o.getRoot();if(t.lastChild===e){for(;t&&!o.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}o.add(t,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",function(e){"setcontent"!==e.type&&"mceInsertLink"!==e.command||n()})}(),function(){e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")}(),function(){_t.mac&&e.on("keydown",function(t){!q_.metaKeyPressed(t)||t.shiftKey||37!==t.keyCode&&39!==t.keyCode||(t.preventDefault(),e.selection.getSel().modify("move",37===t.keyCode?"backward":"forward","lineboundary"))})}(),b()),{refreshContentEditable:w,isHidden:x}}function ee(e){return{walk:function(t,n){return Bm.walk(e,t,n)},split:JS.split,normalize:function(t){return $x.normalize(e,t).fold(ge(!1),function(e){return t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0})}}}var te,ne,re,oe,ie,ae,se,le,ue,ce,de,fe,he,pe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},me=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(null,arguments))}},ge=function(e){return function(){return e}},ve=function(e){return e},be=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=new Array(arguments.length-1),o=1;o<arguments.length;o++)r[o-1]=arguments[o];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];var a=r.concat(o);return e.apply(null,a)}},ye=function(e){return function(){throw new Error(e)}},we=ge(!1),xe=ge(!0),Ce=we,ke=xe,Ne=function(){return _e},_e=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e},r=function(){},o=function(){return null},i=function(){},a={fold:function(e,t){return e()},is:Ce,isSome:Ce,isNone:ke,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:o,getOrUndefined:i,or:n,orThunk:t,map:Ne,ap:Ne,each:r,bind:Ne,flatten:Ne,exists:Ce,forall:ke,filter:Ne,equals:e,equals_:e,toArray:function(){return[]},toString:ge("none()")};return Object.freeze&&Object.freeze(a),a}(),Se=function(e){var t=function(){return e},n=function(){return i},r=function(t){return Se(t(e))},o=function(t){return t(e)},i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:ke,isNone:Ce,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:r,ap:function(t){return t.fold(Ne,function(t){return Se(t(e))})},each:function(t){t(e)},bind:o,flatten:t,exists:o,forall:o,filter:function(t){return t(e)?i:_e},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(Ce,function(t){return n(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return i},Te=function(e){return null===e||void 0===e?_e:Se(e)},Ee={some:Se,none:Ne,from:Te},Oe=function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t},Ae=function(e){return function(t){return Oe(t)===e}},De=Ae("string"),Re=Ae("object"),Me=Ae("array"),Pe=Ae("null"),Le=Ae("boolean"),Ie=Ae("function"),je=Ae("number"),Be=function(){var e=Array.prototype.indexOf,t=function(t,n){return e.call(t,n)},n=function(e,t){return Je(e,t)};return void 0===e?n:t}(),Fe=function(e,t){var n=Be(e,t);return-1===n?Ee.none():Ee.some(n)},He=function(e,t){return Be(e,t)>-1},Ue=function(e,t){return Ye(e,t).isSome()},ze=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o,e)}return r},We=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n,e)}},Ve=function(e,t){for(var n=e.length-1;n>=0;n--){t(e[n],n,e)}},qe=function(e,t){for(var n=[],r=[],o=0,i=e.length;o<i;o++){var a=e[o];(t(a,o,e)?n:r).push(a)}return{pass:n,fail:r}},$e=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r,e)&&n.push(i)}return n},Ke=function(e,t,n){return Ve(e,function(e){n=t(n,e)}),n},Ge=function(e,t,n){return We(e,function(e){n=t(n,e)}),n},Xe=function(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n];if(t(o,n,e))return Ee.some(o)}return Ee.none()},Ye=function(e,t){for(var n=0,r=e.length;n<r;n++){if(t(e[n],n,e))return Ee.some(n)}return Ee.none()},Je=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},Qe=Array.prototype.push,Ze=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!Array.prototype.isPrototypeOf(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);Qe.apply(t,e[n])}return t},et=function(e,t){var n=ze(e,t);return Ze(n)},tt=function(e,t){for(var n=0,r=e.length;n<r;++n){if(!0!==t(e[n],n,e))return!1}return!0},nt=Array.prototype.slice,rt=function(e){var t=nt.call(e,0);return t.reverse(),t},ot=function(e,t){return $e(e,function(e){return!He(t,e)})},it=function(e,t){for(var n={},r=0,o=e.length;r<o;r++){var i=e[r];n[String(i)]=t(i,r)}return n},at=function(e,t){var n=nt.call(e,0);return n.sort(t),n},st=function(e){return 0===e.length?Ee.none():Ee.some(e[0])},lt=function(e){return 0===e.length?Ee.none():Ee.some(e[e.length-1])},ut=Ie(Array.from)?Array.from:function(e){return nt.call(e)},ct="undefined"!=typeof window?window:Function("return this;")(),dt=function(e,t){for(var n=void 0!==t&&null!==t?t:ct,r=0;r<e.length&&void 0!==n&&null!==n;++r)n=n[e[r]];return n},ft=function(e,t){var n=e.split(".");return dt(n,t)},ht=function(e,t){return ft(e,t)},pt=function(e,t){var n=ht(e,t);if(void 0===n||null===n)throw e+" not available on this browser";return n},mt={getOrDie:pt},gt=function(){return mt.getOrDie("URL")},vt=function(e){return gt().createObjectURL(e)},bt=function(e){gt().revokeObjectURL(e)},yt={createObjectURL:vt,revokeObjectURL:bt},wt=navigator,xt=wt.userAgent,Ct=function(e){return"matchMedia"in window&&matchMedia(e).matches};te=!1,ue=/Android/.test(xt),ne=/WebKit/.test(xt),re=!ne&&!te&&/MSIE/gi.test(xt)&&/Explorer/gi.test(wt.appName),re=re&&/MSIE (\w+)\./.exec(xt)[1],oe=-1!==xt.indexOf("Trident/")&&(-1!==xt.indexOf("rv:")||-1!==wt.appName.indexOf("Netscape"))&&11,ie=-1!==xt.indexOf("Edge/")&&!re&&!oe&&12,re=re||oe||ie,ae=!ne&&!oe&&/Gecko/.test(xt),se=-1!==xt.indexOf("Mac"),le=/(iPad|iPhone)/.test(xt),ce="FormData"in window&&"FileReader"in window&&"URL"in window&&!!yt.createObjectURL,de=Ct("only screen and (max-device-width: 480px)")&&(ue||le),fe=Ct("only screen and (min-width: 800px)")&&(ue||le),he=-1!==xt.indexOf("Windows Phone"),ie&&(ne=!1);var kt,Nt=!le||ce||parseInt(xt.match(/AppleWebKit\/(\d*)/)[1],10)>=534,_t={opera:te,webkit:ne,ie:re,gecko:ae,mac:se,iOS:le,android:ue,contentEditable:Nt,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!==re,range:window.getSelection&&"Range"in window,documentMode:re&&!ie?document.documentMode||7:10,fileApi:ce,ceFalse:!1===re||re>8,cacheSuffix:null,container:null,overrideViewPort:null,experimentalShadowDom:!1,canHaveCSP:!1===re||re>11,desktop:!de&&!fe,windowsPhone:he},St=window.Promise?window.Promise:function(){function e(e,t){return function(){e.apply(t,arguments)}}function n(e){var t=this;if(null===this._state)return void this._deferreds.push(e);c(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return void(t._state?e.resolve:e.reject)(t._value);var r;try{r=n(t._value)}catch(t){return void e.reject(t)}e.resolve(r)})}function r(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void s(e(n,t),e(r,this),e(o,this))}this._state=!0,this._value=t,i.call(this)}catch(e){o.call(this,e)}}function o(e){this._state=!1,this._value=e,i.call(this)}function i(){for(var e=0,t=this._deferreds.length;e<t;e++)n.call(this,this._deferreds[e]);this._deferreds=null}function a(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function s(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(e){if(r)return;r=!0,n(e)}}var l=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},u=function(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],s(t,e(r,this),e(o,this))},c=u.immediateFn||"function"==typeof t&&t||function(e){setTimeout(e,1)};return u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){var r=this;return new u(function(o,i){n.call(r,new a(e,t,o,i))})},u.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&l(arguments[0])?arguments[0]:arguments);return new u(function(t,n){function r(i,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){r(i,e)},n)}e[i]=a,0==--o&&t(e)}catch(e){n(e)}}if(0===e.length)return t([]);for(var o=e.length,i=0;i<e.length;i++)r(i,e[i])})},u.resolve=function(e){return e&&"object"==typeof e&&e.constructor===u?e:new u(function(t){t(e)})},u.reject=function(e){return new u(function(t,n){n(e)})},u.race=function(e){return new u(function(t,n){for(var r=0,o=e.length;r<o;r++)e[r].then(t,n)})},u}(),Tt=function(e,t){var n,r=window.requestAnimationFrame,o=["ms","moz","webkit"],i=function(e){window.setTimeout(e,0)};for(n=0;n<o.length&&!r;n++)r=window[o[n]+"RequestAnimationFrame"];r||(r=i),r(e,t)},Et=function(e,t){return"number"!=typeof t&&(t=0),setTimeout(e,t)},Ot=function(e,t){return"number"!=typeof t&&(t=1),setInterval(e,t)},At=function(e){return clearTimeout(e)},Dt=function(e){return clearInterval(e)},Rt=function(e,t){var n,r;return r=function(){var r=arguments;clearTimeout(n),n=Et(function(){e.apply(this,r)},t)},r.stop=function(){clearTimeout(n)},r},Mt={requestAnimationFrame:function(e,t){if(kt)return void kt.then(e);kt=new St(function(e){t||(t=document.body),Tt(e,t)}).then(e)},setTimeout:Et,setInterval:Ot,setEditorTimeout:function(e,t,n){return Et(function(){e.removed||t()},n)},setEditorInterval:function(e,t,n){var r;return r=Ot(function(){e.removed?clearInterval(r):t()},n)},debounce:Rt,throttle:Rt,clearInterval:Dt,clearTimeout:At},Pt=/^(?:mouse|contextmenu)|click/,Lt={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},It=function(e){return e.isDefaultPrevented===Bt||e.isDefaultPrevented===jt},jt=function(){return!1},Bt=function(){return!0},Ft=function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)},Ht=function(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)},Ut=function(e,t){if(e.composedPath){var n=e.composedPath();if(n&&n.length>0)return n[0]}return t},zt=function(e,t){var n,r=t||{};for(n in e)Lt[n]||(r[n]=e[n]);if(r.target||(r.target=r.srcElement||document),_t.experimentalShadowDom&&(r.target=Ut(e,r.target)),e&&Pt.test(e.type)&&void 0===e.pageX&&void 0!==e.clientX){var o=r.target.ownerDocument||document,i=o.documentElement,a=o.body;r.pageX=e.clientX+(i&&i.scrollLeft||a&&a.scrollLeft||0)-(i&&i.clientLeft||a&&a.clientLeft||0),r.pageY=e.clientY+(i&&i.scrollTop||a&&a.scrollTop||0)-(i&&i.clientTop||a&&a.clientTop||0)}return r.preventDefault=function(){r.isDefaultPrevented=Bt,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},r.stopPropagation=function(){r.isPropagationStopped=Bt,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=Bt,r.stopPropagation()},!1===It(r)&&(r.isDefaultPrevented=jt,r.isPropagationStopped=jt,r.isImmediatePropagationStopped=jt),void 0===r.metaKey&&(r.metaKey=!1),r},Wt=function(e,t,n){var r=e.document,o={type:"ready"};if(n.domLoaded)return void t(o);var i=function(){return"complete"===r.readyState||"interactive"===r.readyState&&r.body},a=function(){n.domLoaded||(n.domLoaded=!0,t(o))},s=function(){i()&&(Ht(r,"readystatechange",s),a())},l=function(){try{r.documentElement.doScroll("left")}catch(e){return void Mt.setTimeout(l)}a()};!r.addEventListener||_t.ie&&_t.ie<11?(Ft(r,"readystatechange",s),r.documentElement.doScroll&&e.self===e.top&&l()):i()?a():Ft(e,"DOMContentLoaded",a),Ft(e,"load",a)},Vt=function(){var e,t,n,r,o,i=this,a={};t="mce-data-"+(+new Date).toString(32),r="onmouseenter"in document.documentElement,n="onfocusin"in document.documentElement,o={mouseenter:"mouseover",mouseleave:"mouseout"},e=1,i.domLoaded=!1,i.events=a;var s=function(e,t){var n,r,o,i,s=a[t];if(n=s&&s[e.type])for(r=0,o=n.length;r<o;r++)if(i=n[r],i&&!1===i.func.call(i.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return};i.bind=function(l,u,c,d){var f,h,p,m,g,v,b,y=window,w=function(e){s(zt(e||y.event),f)};if(l&&3!==l.nodeType&&8!==l.nodeType){for(l[t]?f=l[t]:(f=e++,l[t]=f,a[f]={}),d=d||l,u=u.split(" "),p=u.length;p--;)m=u[p],v=w,g=b=!1,"DOMContentLoaded"===m&&(m="ready"),i.domLoaded&&"ready"===m&&"complete"===l.readyState?c.call(d,zt({type:m})):(r||(g=o[m])&&(v=function(e){var t,n;if(t=e.currentTarget,(n=e.relatedTarget)&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;n||(e=zt(e||y.event),e.type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,s(e,f))}),n||"focusin"!==m&&"focusout"!==m||(b=!0,g="focusin"===m?"focus":"blur",v=function(e){e=zt(e||y.event),e.type="focus"===e.type?"focusin":"focusout",s(e,f)}),h=a[f][m],h?"ready"===m&&i.domLoaded?c({type:m}):h.push({func:c,scope:d}):(a[f][m]=h=[{func:c,scope:d}],h.fakeName=g,h.capture=b,h.nativeHandler=v,"ready"===m?Wt(l,v,i):Ft(l,g||m,v,b)));return l=h=0,c}},i.unbind=function(e,n,r){var o,s,l,u,c,d;if(!e||3===e.nodeType||8===e.nodeType)return i;if(o=e[t]){if(d=a[o],n){for(n=n.split(" "),l=n.length;l--;)if(c=n[l],s=d[c]){if(r)for(u=s.length;u--;)if(s[u].func===r){var f=s.nativeHandler,h=s.fakeName,p=s.capture;s=s.slice(0,u).concat(s.slice(u+1)),s.nativeHandler=f,s.fakeName=h,s.capture=p,d[c]=s}r&&0!==s.length||(delete d[c],Ht(e,s.fakeName||c,s.nativeHandler,s.capture))}}else{for(c in d)s=d[c],Ht(e,s.fakeName||c,s.nativeHandler,s.capture);d={}}for(c in d)return i;delete a[o];try{delete e[t]}catch(n){e[t]=null}}return i},i.fire=function(e,n,r){var o;if(!e||3===e.nodeType||8===e.nodeType)return i;r=zt(null,r),r.type=n,r.target=e;do{o=e[t],o&&s(r,o),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!r.isPropagationStopped());return i},i.clean=function(e){var n,r,o=i.unbind;if(!e||3===e.nodeType||8===e.nodeType)return i;if(e[t]&&o(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(o(e),r=e.getElementsByTagName("*"),n=r.length;n--;)e=r[n],e[t]&&o(e);return i},i.destroy=function(){a={}},i.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}};Vt.Event=new Vt,Vt.Event.bind(window,"ready",function(){});var qt,$t,Kt,Gt,Xt,Yt,Jt,Qt,Zt,en,tn,nn,rn,on,an,sn,ln,un,cn,dn="sizzle"+-new Date,fn=window.document,hn=0,pn=0,mn=n(),gn=n(),vn=n(),bn=function(e,t){return e===t&&(tn=!0),0},yn="undefined",wn=1<<31,xn={}.hasOwnProperty,Cn=[],kn=Cn.pop,Nn=Cn.push,_n=Cn.push,Sn=Cn.slice,Tn=Cn.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},En="[\\x20\\t\\r\\n\\f]",On="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",An="\\["+En+"*("+On+")(?:"+En+"*([*^$|!~]?=)"+En+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+On+"))|)"+En+"*\\]",Dn=":("+On+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+An+")*)|.*)\\)|)",Rn=new RegExp("^"+En+"+|((?:^|[^\\\\])(?:\\\\.)*)"+En+"+$","g"),Mn=new RegExp("^"+En+"*,"+En+"*"),Pn=new RegExp("^"+En+"*([>+~]|"+En+")"+En+"*"),Ln=new RegExp("="+En+"*([^\\]'\"]*?)"+En+"*\\]","g"),In=new RegExp(Dn),jn=new RegExp("^"+On+"$"),Bn={ID:new RegExp("^#("+On+")"),CLASS:new RegExp("^\\.("+On+")"),TAG:new RegExp("^("+On+"|[*])"),ATTR:new RegExp("^"+An),PSEUDO:new RegExp("^"+Dn),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+En+"*(even|odd|(([+-]|)(\\d*)n|)"+En+"*(?:([+-]|)"+En+"*(\\d+)|))"+En+"*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+En+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+En+"*((?:-\\d)?\\d*)"+En+"*\\)|)(?=[^-]|$)","i")},Fn=/^(?:input|select|textarea|button)$/i,Hn=/^h\d$/i,Un=/^[^{]+\{\s*\[native \w/,zn=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Wn=/[+~]/,Vn=/'|\\/g,qn=new RegExp("\\\\([\\da-f]{1,6}"+En+"?|("+En+")|.)","ig"),$n=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{_n.apply(Cn=Sn.call(fn.childNodes),fn.childNodes),Cn[fn.childNodes.length].nodeType}catch(e){_n={apply:Cn.length?function(e,t){Nn.apply(e,Sn.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}var Kn=function(e,t,n,r){var o,i,s,u,c,d,f,h,p,m;if((t?t.ownerDocument||t:fn)!==rn&&nn(t),t=t||rn,n=n||[],!e||"string"!=typeof e)return n;if(1!==(u=t.nodeType)&&9!==u)return[];if(an&&!r){if(o=zn.exec(e))if(s=o[1]){if(9===u){if(!(i=t.getElementById(s))||!i.parentNode)return n;if(i.id===s)return n.push(i),n}else if(t.ownerDocument&&(i=t.ownerDocument.getElementById(s))&&cn(t,i)&&i.id===s)return n.push(i),n}else{if(o[2])return _n.apply(n,t.getElementsByTagName(e)),n;if((s=o[3])&&$t.getElementsByClassName)return _n.apply(n,t.getElementsByClassName(s)),n}if($t.qsa&&(!sn||!sn.test(e))){if(h=f=dn,p=t,m=9===u&&e,1===u&&"object"!==t.nodeName.toLowerCase()){for(d=Yt(e),(f=t.getAttribute("id"))?h=f.replace(Vn,"\\$&"):t.setAttribute("id",h),h="[id='"+h+"'] ",c=d.length;c--;)d[c]=h+l(d[c]);p=Wn.test(e)&&a(t.parentNode)||t,m=d.join(",")}if(m)try{return _n.apply(n,p.querySelectorAll(m)),n}catch(e){}finally{f||t.removeAttribute("id")}}}return Qt(e.replace(Rn,"$1"),t,n,r)};$t=Kn.support={},Xt=Kn.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},nn=Kn.setDocument=function(e){var t,n=e?e.ownerDocument||e:fn,r=n.defaultView;return n!==rn&&9===n.nodeType&&n.documentElement?(rn=n,on=n.documentElement,an=!Xt(n),r&&r!==function(e){try{return e.top}catch(e){}return null}(r)&&(r.addEventListener?r.addEventListener("unload",function(){nn()},!1):r.attachEvent&&r.attachEvent("onunload",function(){nn()})),$t.attributes=!0,$t.getElementsByTagName=!0,$t.getElementsByClassName=Un.test(n.getElementsByClassName),$t.getById=!0,Kt.find.ID=function(e,t){if(typeof t.getElementById!==yn&&an){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},Kt.filter.ID=function(e){var t=e.replace(qn,$n);return function(e){return e.getAttribute("id")===t}},Kt.find.TAG=$t.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==yn)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],o=0,i=t.getElementsByTagName(e);if("*"===e){for(;n=i[o++];)1===n.nodeType&&r.push(n);return r}return i},Kt.find.CLASS=$t.getElementsByClassName&&function(e,t){if(an)return t.getElementsByClassName(e)},ln=[],sn=[],$t.disconnectedMatch=!0,sn=sn.length&&new RegExp(sn.join("|")),ln=ln.length&&new RegExp(ln.join("|")),t=Un.test(on.compareDocumentPosition),cn=t||Un.test(on.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},bn=t?function(e,t){if(e===t)return tn=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&r||!$t.sortDetached&&t.compareDocumentPosition(e)===r?e===n||e.ownerDocument===fn&&cn(fn,e)?-1:t===n||t.ownerDocument===fn&&cn(fn,t)?1:en?Tn.call(en,e)-Tn.call(en,t):0:4&r?-1:1)}:function(e,t){if(e===t)return tn=!0,0;var r,i=0,a=e.parentNode,s=t.parentNode,l=[e],u=[t];if(!a||!s)return e===n?-1:t===n?1:a?-1:s?1:en?Tn.call(en,e)-Tn.call(en,t):0;if(a===s)return o(e,t);for(r=e;r=r.parentNode;)l.unshift(r);for(r=t;r=r.parentNode;)u.unshift(r);for(;l[i]===u[i];)i++;return i?o(l[i],u[i]):l[i]===fn?-1:u[i]===fn?1:0},n):rn},Kn.matches=function(e,t){return Kn(e,null,null,t)},Kn.matchesSelector=function(e,t){if((e.ownerDocument||e)!==rn&&nn(e),t=t.replace(Ln,"='$1']"),$t.matchesSelector&&an&&(!ln||!ln.test(t))&&(!sn||!sn.test(t)))try{var n=un.call(e,t);if(n||$t.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return Kn(t,rn,null,[e]).length>0},Kn.contains=function(e,t){return(e.ownerDocument||e)!==rn&&nn(e),cn(e,t)},Kn.attr=function(e,t){(e.ownerDocument||e)!==rn&&nn(e);var n=Kt.attrHandle[t.toLowerCase()],r=n&&xn.call(Kt.attrHandle,t.toLowerCase())?n(e,t,!an):void 0;return void 0!==r?r:$t.attributes||!an?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},Kn.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},Kn.uniqueSort=function(e){var t,n=[],r=0,o=0;if(tn=!$t.detectDuplicates,en=!$t.sortStable&&e.slice(0),e.sort(bn),tn){for(;t=e[o++];)t===e[o]&&(r=n.push(o));for(;r--;)e.splice(n[r],1)}return en=null,e},Gt=Kn.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=Gt(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=Gt(t);return n},Kt=Kn.selectors={cacheLength:50,createPseudo:r,match:Bn,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(qn,$n),e[3]=(e[3]||e[4]||e[5]||"").replace(qn,$n),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||Kn.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&Kn.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return Bn.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&In.test(n)&&(t=Yt(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(qn,$n).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=mn[e+" "];return t||(t=new RegExp("(^|"+En+")"+e+"("+En+"|$)"))&&mn(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==yn&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var o=Kn.attr(r,e);return null==o?"!="===t:!t||(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.slice(-n.length)===n:"~="===t?(" "+o+" ").indexOf(n)>-1:"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,o){var i="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===o?function(e){return!!e.parentNode}:function(t,n,l){var u,c,d,f,h,p,m=i!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),b=!l&&!s;if(g){if(i){for(;m;){for(d=t;d=d[m];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?g.firstChild:g.lastChild],a&&b){for(c=g[dn]||(g[dn]={}),u=c[e]||[],h=u[0]===hn&&u[1],f=u[0]===hn&&u[2],d=h&&g.childNodes[h];d=++h&&d&&d[m]||(f=h=0)||p.pop();)if(1===d.nodeType&&++f&&d===t){c[e]=[hn,h,f];break}}else if(b&&(u=(t[dn]||(t[dn]={}))[e])&&u[0]===hn)f=u[1];else for(;(d=++h&&d&&d[m]||(f=h=0)||p.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++f||(b&&((d[dn]||(d[dn]={}))[e]=[hn,f]),d!==t)););return(f-=o)===r||f%r==0&&f/r>=0}}},PSEUDO:function(e,t){var n,o=Kt.pseudos[e]||Kt.setFilters[e.toLowerCase()]||Kn.error("unsupported pseudo: "+e);return o[dn]?o(t):o.length>1?(n=[e,e,"",t],Kt.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,n){for(var r,i=o(e,t),a=i.length;a--;)r=Tn.call(e,i[a]),e[r]=!(n[r]=i[a])}):function(e){return o(e,0,n)}):o}},pseudos:{not:r(function(e){var t=[],n=[],o=Jt(e.replace(Rn,"$1"));return o[dn]?r(function(e,t,n,r){for(var i,a=o(e,null,r,[]),s=e.length;s--;)(i=a[s])&&(e[s]=!(t[s]=i))}):function(e,r,i){return t[0]=e,o(t,null,i,n),!n.pop()}}),has:r(function(e){return function(t){return Kn(e,t).length>0}}),contains:r(function(e){return e=e.replace(qn,$n),function(t){return(t.textContent||t.innerText||Gt(t)).indexOf(e)>-1}}),lang:r(function(e){return jn.test(e||"")||Kn.error("unsupported lang: "+e),e=e.replace(qn,$n).toLowerCase(),function(t){var n;do{if(n=an?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===on},focus:function(e){return e===rn.activeElement&&(!rn.hasFocus||rn.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!Kt.pseudos.empty(e)},header:function(e){return Hn.test(e.nodeName)},input:function(e){return Fn.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:i(function(){return[0]}),last:i(function(e,t){return[t-1]}),eq:i(function(e,t,n){return[n<0?n+t:n]}),even:i(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:i(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:i(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:i(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},Kt.pseudos.nth=Kt.pseudos.eq;for(qt in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Kt.pseudos[qt]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(qt);for(qt in{submit:!0,reset:!0})Kt.pseudos[qt]=function(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}(qt);s.prototype=Kt.filters=Kt.pseudos,Kt.setFilters=new s,Yt=Kn.tokenize=function(e,t){var n,r,o,i,a,s,l,u=gn[e+" "];if(u)return t?0:u.slice(0);for(a=e,s=[],l=Kt.preFilter;a;){n&&!(r=Mn.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(o=[])),n=!1,(r=Pn.exec(a))&&(n=r.shift(),o.push({value:n,type:r[0].replace(Rn," ")}),a=a.slice(n.length));for(i in Kt.filter)!(r=Bn[i].exec(a))||l[i]&&!(r=l[i](r))||(n=r.shift(),o.push({value:n,type:i,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?Kn.error(e):gn(e,s).slice(0)},Jt=Kn.compile=function(e,t){var n,r=[],o=[],i=vn[e+" "];if(!i){for(t||(t=Yt(e)),n=t.length;n--;)i=p(t[n]),i[dn]?r.push(i):o.push(i);i=vn(e,m(o,r)),i.selector=e}return i},Qt=Kn.select=function(e,t,n,r){var o,i,s,u,c,d="function"==typeof e&&e,f=!r&&Yt(e=d.selector||e);if(n=n||[],1===f.length){if(i=f[0]=f[0].slice(0),i.length>2&&"ID"===(s=i[0]).type&&$t.getById&&9===t.nodeType&&an&&Kt.relative[i[1].type]){if(!(t=(Kt.find.ID(s.matches[0].replace(qn,$n),t)||[])[0]))return n;d&&(t=t.parentNode),e=e.slice(i.shift().value.length)}for(o=Bn.needsContext.test(e)?0:i.length;o--&&(s=i[o],!Kt.relative[u=s.type]);)if((c=Kt.find[u])&&(r=c(s.matches[0].replace(qn,$n),Wn.test(i[0].type)&&a(t.parentNode)||t))){if(i.splice(o,1),!(e=r.length&&l(i)))return _n.apply(n,r),n;break}}return(d||Jt(e,f))(r,t,!an,n,Wn.test(e)&&a(t.parentNode)||t),n},$t.sortStable=dn.split("").sort(bn).join("")===dn,$t.detectDuplicates=!!tn,nn(),$t.sortDetached=!0;var Gn=Array.isArray,Xn=function(e){var t,n,r=e;if(!Gn(e))for(r=[],t=0,n=e.length;t<n;t++)r[t]=e[t];return r},Yn=function(e,t,n){var r,o;if(!e)return 0;if(n=n||e,void 0!==e.length){for(r=0,o=e.length;r<o;r++)if(!1===t.call(n,e[r],r,e))return 0}else for(r in e)if(e.hasOwnProperty(r)&&!1===t.call(n,e[r],r,e))return 0;return 1},Jn=function(e,t){var n=[];return Yn(e,function(r,o){n.push(t(r,o,e))}),n},Qn=function(e,t){var n=[];return Yn(e,function(r,o){t&&!t(r,o,e)||n.push(r)}),n},Zn=function(e,t){var n,r;if(e)for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},er=function(e,t,n,r){var o=0;for(arguments.length<3&&(n=e[0]);o<e.length;o++)n=t.call(r,n,e[o],o);return n},tr=function(e,t,n){var r,o;for(r=0,o=e.length;r<o;r++)if(t.call(n,e[r],r,e))return r;return-1},nr=function(e,t,n){var r=tr(e,t,n);if(-1!==r)return e[r]},rr=function(e){return e[e.length-1]},or={isArray:Gn,toArray:Xn,each:Yn,map:Jn,filter:Qn,indexOf:Zn,reduce:er,findIndex:tr,find:nr,last:rr},ir=/^\s*|\s*$/g,ar=function(e){return null===e||void 0===e?"":(""+e).replace(ir,"")},sr=function(e,t){return t?!("array"!==t||!or.isArray(e))||typeof e===t:void 0!==e},lr=function(e,t,n){var r;for(e=e||[],t=t||",","string"==typeof e&&(e=e.split(t)),n=n||{},r=e.length;r--;)n[e[r]]={};return n},ur=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},cr=function(e,t,n){var r,o,i,a,s,l=this,u=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),i=e[3].match(/(^|\.)(\w+)$/i)[2],o=l.createNS(e[3].replace(/\.\w+$/,""),n),!o[i]){if("static"===e[2])return o[i]=t,void(this.onCreate&&this.onCreate(e[2],e[3],o[i]));t[i]||(t[i]=function(){},u=1),o[i]=t[i],l.extend(o[i].prototype,t),e[5]&&(r=l.resolve(e[5]).prototype,a=e[5].match(/\.(\w+)$/i)[1],s=o[i],o[i]=u?function(){return r[a].apply(this,arguments)}:function(){return this.parent=r[a],s.apply(this,arguments)},o[i].prototype[i]=o[i],l.each(r,function(e,t){o[i].prototype[t]=r[t]}),l.each(t,function(e,t){r[t]?o[i].prototype[t]=function(){return this.parent=r[t],e.apply(this,arguments)}:t!==i&&(o[i].prototype[t]=e)})),l.each(t.static,function(e,t){o[i][t]=e})}},dr=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o,i,a,s,l=arguments;for(o=1,i=l.length;o<i;o++){t=l[o];for(a in t)t.hasOwnProperty(a)&&void 0!==(s=t[a])&&(e[a]=s)}return e},fr=function(e,t,n,r){r=r||this,e&&(n&&(e=e[n]),or.each(e,function(e,o){if(!1===t.call(r,e,o,n))return!1;fr(e,t,n,r)}))},hr=function(e,t){var n,r;for(t=t||window,e=e.split("."),n=0;n<e.length;n++)r=e[n],t[r]||(t[r]={}),t=t[r];return t},pr=function(e,t){var n,r;for(t=t||window,e=e.split("."),n=0,r=e.length;n<r&&(t=t[e[n]]);n++);return t},mr=function(e,t){return!e||sr(e,"array")?e:or.map(e.split(t||","),ar)},gr=function(e){var t=_t.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e},vr={trim:ar,isArray:or.isArray,is:sr,toArray:or.toArray,makeMap:lr,each:or.each,map:or.map,grep:or.filter,inArray:or.indexOf,hasOwn:ur,extend:dr,create:cr,walk:fr,createNS:hr,resolve:pr,explode:mr,_addCacheSuffix:gr},br=document,yr=Array.prototype.push,wr=Array.prototype.slice,xr=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,Cr=Vt.Event,kr=vr.makeMap("children,contents,next,prev"),Nr=function(e){return void 0!==e},_r=function(e){return"string"==typeof e},Sr=function(e){return e&&e===e.window},Tr=function(e,t){var n,r,o;for(t=t||br,o=t.createElement("div"),n=t.createDocumentFragment(),o.innerHTML=e;r=o.firstChild;)n.appendChild(r);return n},Er=function(e,t,n,r){var o;if(_r(t))t=Tr(t,Wr(e[0]));else if(t.length&&!t.nodeType){if(t=jr.makeArray(t),r)for(o=t.length-1;o>=0;o--)Er(e,t[o],n,r);else for(o=0;o<t.length;o++)Er(e,t[o],n,r);return e}if(t.nodeType)for(o=e.length;o--;)n.call(e[o],t);return e},Or=function(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")},Ar=function(e,t,n){var r,o;return t=jr(t)[0],e.each(function(){var e=this;n&&r===e.parentNode?o.appendChild(e):(r=e.parentNode,o=t.cloneNode(!1),e.parentNode.insertBefore(o,e),o.appendChild(e))}),e},Dr=vr.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),Rr=vr.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),Mr={for:"htmlFor",class:"className",readonly:"readOnly"},Pr={float:"cssFloat"},Lr={},Ir={},jr=function(e,t){return new jr.fn.init(e,t)},Br=function(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1},Fr=/^\s*|\s*$/g,Hr=function(e){return null===e||void 0===e?"":(""+e).replace(Fr,"")},Ur=function(e,t){var n,r,o,i;if(e)if(void 0===(n=e.length)){for(r in e)if(e.hasOwnProperty(r)&&(i=e[r],!1===t.call(i,r,i)))break}else for(o=0;o<n&&(i=e[o],!1!==t.call(i,o,i));o++);return e},zr=function(e,t){var n=[];return Ur(e,function(e,r){t(r,e)&&n.push(r)}),n},Wr=function(e){return e?9===e.nodeType?e:e.ownerDocument:br};jr.fn=jr.prototype={constructor:jr,selector:"",context:null,length:0,init:function(e,t){var n,r,o=this;if(!e)return o;if(e.nodeType)return o.context=o[0]=e,o.length=1,o;if(t&&t.nodeType)o.context=t;else{if(t)return jr(e).attr(t);o.context=t=document}if(_r(e)){if(o.selector=e,!(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:xr.exec(e)))return jr(t).find(e);if(n[1])for(r=Tr(e,Wr(t)).firstChild;r;)yr.call(o,r),r=r.nextSibling;else{if(!(r=Wr(t).getElementById(n[2])))return o;if(r.id!==n[2])return o.find(e);o.length=1,o[0]=r}}else this.add(e,!1);return o},toArray:function(){return vr.toArray(this)},add:function(e,t){var n,r,o=this;if(_r(e))return o.add(jr(e));if(!1!==t)for(n=jr.unique(o.toArray().concat(jr.makeArray(e))),o.length=n.length,r=0;r<n.length;r++)o[r]=n[r];else yr.apply(o,jr.makeArray(e));return o},attr:function(e,t){var n,r=this;if("object"==typeof e)Ur(e,function(e,t){r.attr(e,t)});else{if(!Nr(t)){if(r[0]&&1===r[0].nodeType){if((n=Lr[e])&&n.get)return n.get(r[0],e);if(Rr[e])return r.prop(e)?e:void 0;t=r[0].getAttribute(e,2),null===t&&(t=void 0)}return t}this.each(function(){var n;if(1===this.nodeType){if((n=Lr[e])&&n.set)return void n.set(this,t);null===t?this.removeAttribute(e,2):this.setAttribute(e,t,2)}})}return r},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if("object"==typeof(e=Mr[e]||e))Ur(e,function(e,t){n.prop(e,t)});else{if(!Nr(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each(function(){1===this.nodeType&&(this[e]=t)})}return n},css:function(e,t){var n,r,o=this,i=function(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})},a=function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})};if("object"==typeof e)Ur(e,function(e,t){o.css(e,t)});else if(Nr(t))e=i(e),"number"!=typeof t||Dr[e]||(t=t.toString()+"px"),o.each(function(){var n=this.style;if((r=Ir[e])&&r.set)return void r.set(this,t);try{this.style[Pr[e]||e]=t}catch(e){}null!==t&&""!==t||(n.removeProperty?n.removeProperty(a(e)):n.removeAttribute(e))});else{if(n=o[0],(r=Ir[e])&&r.get)return r.get(n);if(!n.ownerDocument.defaultView)return n.currentStyle?n.currentStyle[i(e)]:"";try{return n.ownerDocument.defaultView.getComputedStyle(n,null).getPropertyValue(a(e))}catch(e){return}}return o},remove:function(){for(var e,t=this,n=this.length;n--;)e=t[n],Cr.clean(e),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var e,t=this,n=this.length;n--;)for(e=t[n];e.firstChild;)e.removeChild(e.firstChild);return this},html:function(e){var t,n=this;if(Nr(e)){t=n.length;try{for(;t--;)n[t].innerHTML=e}catch(r){jr(n[t]).empty().append(e)}return n}return n[0]?n[0].innerHTML:""},text:function(e){var t,n=this;if(Nr(e)){for(t=n.length;t--;)"innerText"in n[t]?n[t].innerText=e:n[0].textContent=e;return n}return n[0]?n[0].innerText||n[0].textContent:""},append:function(){return Er(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(e)})},prepend:function(){return Er(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(e,this.firstChild)},!0)},before:function(){var e=this;return e[0]&&e[0].parentNode?Er(e,arguments,function(e){this.parentNode.insertBefore(e,this)}):e},after:function(){var e=this;return e[0]&&e[0].parentNode?Er(e,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},!0):e},appendTo:function(e){return jr(e).append(this),this},prependTo:function(e){return jr(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return Ar(this,e)},wrapAll:function(e){return Ar(this,e,!0)},wrapInner:function(e){return this.each(function(){jr(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){jr(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),jr(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;return"string"!=typeof e?n:(-1!==e.indexOf(" ")?Ur(e.split(" "),function(){n.toggleClass(this,t)}):n.each(function(n,r){var o,i;(i=Or(r,e))!==t&&(o=r.className,i?r.className=Hr((" "+o+" ").replace(" "+e+" "," ")):r.className+=o?" "+e:e)}),n)},hasClass:function(e){return Or(this[0],e)},each:function(e){return Ur(this,e)},on:function(e,t){return this.each(function(){Cr.bind(this,e,t)})},off:function(e,t){return this.each(function(){Cr.unbind(this,e,t)})},trigger:function(e){return this.each(function(){"object"==typeof e?Cr.fire(this,e.type,e):Cr.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new jr(wr.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n,r=[];for(t=0,n=this.length;t<n;t++)jr.find(e,this[t],r);return jr(r)},filter:function(e){return jr("function"==typeof e?zr(this.toArray(),function(t,n){return e(n,t)}):jr.filter(e,this.toArray()))},closest:function(e){var t=[];return e instanceof jr&&(e=e[0]),this.each(function(n,r){for(;r;){if("string"==typeof e&&jr(r).is(e)){t.push(r);break}if(r===e){t.push(r);break}r=r.parentNode}}),jr(t)},offset:function(e){var t,n,r,o,i=0,a=0;return e?this.css(e):(t=this[0],t&&(n=t.ownerDocument,r=n.documentElement,t.getBoundingClientRect&&(o=t.getBoundingClientRect(),i=o.left+(r.scrollLeft||n.body.scrollLeft)-r.clientLeft,a=o.top+(r.scrollTop||n.body.scrollTop)-r.clientTop)),{left:i,top:a})},push:yr,sort:[].sort,splice:[].splice},vr.extend(jr,{extend:vr.extend,makeArray:function(e){return Sr(e)||e.nodeType?[e]:vr.toArray(e)},inArray:Br,isArray:vr.isArray,each:Ur,trim:Hr,grep:zr,find:Kn,expr:Kn.selectors,unique:Kn.uniqueSort,text:Kn.getText,contains:Kn.contains,filter:function(e,t,n){var r=t.length;for(n&&(e=":not("+e+")");r--;)1!==t[r].nodeType&&t.splice(r,1);return t=1===t.length?jr.find.matchesSelector(t[0],e)?[t[0]]:[]:jr.find.matches(e,t)}});var Vr=function(e,t,n){var r=[],o=e[t];for("string"!=typeof n&&n instanceof jr&&(n=n[0]);o&&9!==o.nodeType;){if(void 0!==n){if(o===n)break;if("string"==typeof n&&jr(o).is(n))break}1===o.nodeType&&r.push(o),o=o[t]}return r},qr=function(e,t,n,r){var o=[];for(r instanceof jr&&(r=r[0]);e;e=e[t])if(!n||e.nodeType===n){if(void 0!==r){if(e===r)break;if("string"==typeof r&&jr(e).is(r))break}o.push(e)}return o},$r=function(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType===n)return e;return null};Ur({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Vr(e,"parentNode")},next:function(e){return $r(e,"nextSibling",1)},prev:function(e){return $r(e,"previousSibling",1)},children:function(e){return qr(e.firstChild,"nextSibling",1)},contents:function(e){return vr.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,t){jr.fn[e]=function(n){var r=this,o=[];return r.each(function(){var e=t.call(o,this,n,o);e&&(jr.isArray(e)?o.push.apply(o,e):o.push(e))}),this.length>1&&(kr[e]||(o=jr.unique(o)),0===e.indexOf("parents")&&(o=o.reverse())),o=jr(o),n?o.filter(n):o}}),Ur({parentsUntil:function(e,t){return Vr(e,"parentNode",t)},nextUntil:function(e,t){return qr(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return qr(e,"previousSibling",1,t).slice(1)}},function(e,t){jr.fn[e]=function(n,r){var o=this,i=[];return o.each(function(){var e=t.call(i,this,n,i);e&&(jr.isArray(e)?i.push.apply(i,e):i.push(e))}),this.length>1&&(i=jr.unique(i),0!==e.indexOf("parents")&&"prevUntil"!==e||(i=i.reverse())),i=jr(i),r?i.filter(r):i}}),jr.fn.is=function(e){return!!e&&this.filter(e).length>0},jr.fn.init.prototype=jr.fn,jr.overrideDefaults=function(e){var t,n=function(r,o){return t=t||e(),0===arguments.length&&(r=t.element),o||(o=t.context),new n.fn.init(r,o)};return jr.extend(n,this),n};var Kr=function(e,t,n){Ur(n,function(n,r){e[n]=e[n]||{},e[n][t]=r})};_t.ie&&_t.ie<8&&(Kr(Lr,"get",{maxlength:function(e){var t=e.maxLength;if(2147483647!==t)return t},size:function(e){var t=e.size;if(20!==t)return t},class:function(e){return e.className},style:function(e){var t=e.style.cssText;if(0!==t.length)return t}}),Kr(Lr,"set",{class:function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})),_t.ie&&_t.ie<9&&(Pr.float="styleFloat",Kr(Ir,"set",{opacity:function(e,t){var n=e.style;null===t||""===t?n.removeAttribute("filter"):(n.zoom=1,n.filter="alpha(opacity="+100*t+")")}})),jr.attrHooks=Lr,jr.cssHooks=Ir;var Gr,Xr,Yr,Jr=function(e){var t,n=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return n||(n=!0,t=e.apply(null,r)),t}},Qr=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}},Zr=function(e,t){var n=Qr(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return no(r(1),r(2))},eo=function(e,t){var n=String(t).toLowerCase();return 0===e.length?to():Zr(e,n)},to=function(){return no(0,0)},no=function(e,t){return{major:e,minor:t}},ro={nu:no,detect:eo,unknown:to},oo=function(e,t){return function(){return t===e}},io=function(){return ao({current:void 0,version:ro.unknown()})},ao=function(e){var t=e.current;return{current:t,version:e.version,isEdge:oo("Edge",t),isChrome:oo("Chrome",t),isIE:oo("IE",t),isOpera:oo("Opera",t),isFirefox:oo("Firefox",t),isSafari:oo("Safari",t)}},so={unknown:io,nu:ao,edge:ge("Edge"),chrome:ge("Chrome"),ie:ge("IE"),opera:ge("Opera"),firefox:ge("Firefox"),safari:ge("Safari")},lo=function(e,t){return function(){return t===e}},uo=function(){return co({current:void 0,version:ro.unknown()})},co=function(e){var t=e.current;return{current:t,version:e.version,isWindows:lo("Windows",t),isiOS:lo("iOS",t),isAndroid:lo("Android",t),isOSX:lo("OSX",t),isLinux:lo("Linux",t),isSolaris:lo("Solaris",t),isFreeBSD:lo("FreeBSD",t)}},fo={unknown:uo,nu:co,windows:ge("Windows"),ios:ge("iOS"),android:ge("Android"),linux:ge("Linux"),osx:ge("OSX"),solaris:ge("Solaris"),freebsd:ge("FreeBSD")},ho=function(e,t){var n=String(t).toLowerCase();return Xe(e,function(e){return e.search(n)})},po=function(e,t){return ho(e,t).map(function(e){var n=ro.detect(e.versionRegexes,t);return{current:e.name,version:n}})},mo=function(e,t){return ho(e,t).map(function(e){var n=ro.detect(e.versionRegexes,t);return{current:e.name,version:n}})},go={detectBrowser:po,detectOs:mo},vo=function(e,t){return-1!==e.indexOf(t)},bo=function(e){return e.replace(/^\s+|\s+$/g,"")},yo=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,wo=function(e){return function(t){return vo(t,e)}},xo=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return vo(e,"edge/")&&vo(e,"chrome")&&vo(e,"safari")&&vo(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,yo],search:function(e){return vo(e,"chrome")&&!vo(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return vo(e,"msie")||vo(e,"trident")}},{name:"Opera",versionRegexes:[yo,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:wo("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:wo("firefox")},{name:"Safari",versionRegexes:[yo,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(vo(e,"safari")||vo(e,"mobile/"))&&vo(e,"applewebkit")}}],Co=[{name:"Windows",search:wo("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return vo(e,"iphone")||vo(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:wo("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:wo("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:wo("linux"),versionRegexes:[]},{name:"Solaris",search:wo("sunos"),versionRegexes:[]},{name:"FreeBSD",search:wo("freebsd"),versionRegexes:[]}],ko={browsers:ge(xo),oses:ge(Co)},No=function(e){var t=ko.browsers(),n=ko.oses(),r=go.detectBrowser(t,e).fold(so.unknown,so.nu),o=go.detectOs(n,e).fold(fo.unknown,fo.nu);return{browser:r,os:o,deviceType:g(o,r,e)}},_o={detect:No},So=Jr(function(){var e=navigator.userAgent;return _o.detect(e)}),To={detect:So},Eo=function(e,t){var n=t||document,r=n.createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1)throw console.error("HTML does not have a single root node",e),"HTML must have a single root node";return Do(r.childNodes[0])},Oo=function(e,t){var n=t||document,r=n.createElement(e);return Do(r)},Ao=function(e,t){var n=t||document,r=n.createTextNode(e);return Do(r)},Do=function(e){if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:ge(e)}},Ro=function(e,t,n){var r=e.dom();return Ee.from(r.elementFromPoint(t,n)).map(Do)},Mo={fromHtml:Eo,fromTag:Oo,fromText:Ao,fromDom:Do,fromPoint:Ro},Po={ATTRIBUTE:Node.ATTRIBUTE_NODE,CDATA_SECTION:Node.CDATA_SECTION_NODE,COMMENT:Node.COMMENT_NODE,DOCUMENT:Node.DOCUMENT_NODE,DOCUMENT_TYPE:Node.DOCUMENT_TYPE_NODE,DOCUMENT_FRAGMENT:Node.DOCUMENT_FRAGMENT_NODE,ELEMENT:Node.ELEMENT_NODE,TEXT:Node.TEXT_NODE,PROCESSING_INSTRUCTION:Node.PROCESSING_INSTRUCTION_NODE,ENTITY_REFERENCE:Node.ENTITY_REFERENCE_NODE,ENTITY:Node.ENTITY_NODE,NOTATION:Node.NOTATION_NODE},Lo=function(e){return e.dom().nodeName.toLowerCase()},Io=function(e){return e.dom().nodeType},jo=function(e){return e.dom().nodeValue},Bo=function(e){return function(t){return Io(t)===e}},Fo=function(e){return Io(e)===Po.COMMENT||"#comment"===Lo(e)},Ho=Bo(Po.ELEMENT),Uo=Bo(Po.TEXT),zo=Bo(Po.DOCUMENT),Wo={name:Lo,type:Io,value:jo,isElement:Ho,isText:Uo,isDocument:zo,isComment:Fo},Vo=Object.keys,qo=function(e,t){for(var n=Vo(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i,e)}},$o=function(e,t){return Ko(e,function(e,n,r){return{k:n,v:t(e,n,r)}})},Ko=function(e,t){var n={};return qo(e,function(r,o){var i=t(r,o,e);n[i.k]=i.v}),n},Go=function(e,t){var n={},r={};return qo(e,function(e,o){(t(e,o)?n:r)[o]=e}),{t:n,f:r}},Xo=function(e,t,n){if(!(De(n)||Le(n)||je(n)))throw console.error("Invalid call to Attr.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},Yo=function(e,t,n){Xo(e.dom(),t,n)},Jo=function(e,t){var n=e.dom();qo(t,function(e,t){Xo(n,t,e)})},Qo=function(e,t){var n=e.dom().getAttribute(t);return null===n?void 0:n},Zo=function(e,t){var n=e.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},ei=function(e,t){e.dom().removeAttribute(t)},ti=function(e){var t=e.dom().attributes;return void 0===t||null===t||0===t.length},ni=function(e){return Ge(e.dom().attributes,function(e,t){return e[t.name]=t.value,e},{})},ri=function(e,t,n){Zo(e,n)&&!Zo(t,n)&&Yo(t,n,Qo(e,n))},oi=function(e,t,n){Wo.isElement(e)&&Wo.isElement(t)&&We(n,function(n){ri(e,t,n)})},ii={clone:ni,set:Yo,setAll:Jo,get:Qo,has:Zo,remove:ei,hasNone:ti,transfer:oi},ai=function(e){var t=Wo.isText(e)?e.dom().parentNode:e.dom();return void 0!==t&&null!==t&&t.ownerDocument.body.contains(t)},si=Jr(function(){return li(Mo.fromDom(document))}),li=function(e){var t=e.dom().body;if(null===t||void 0===t)throw"Body is not available yet";return Mo.fromDom(t)},ui={body:si,getBody:li,inBody:ai},ci=function(e){return void 0!==e.style},di={isSupported:ci},fi=function(e,t,n){if(!De(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);di.isSupported(e)&&e.style.setProperty(t,n)},hi=function(e,t){di.isSupported(e)&&e.style.removeProperty(t)},pi=function(e,t,n){var r=e.dom();fi(r,t,n)},mi=function(e,t){var n=e.dom();qo(t,function(e,t){fi(n,t,e)})},gi=function(e,t){var n=e.dom();qo(t,function(e,t){e.fold(function(){hi(n,t)},function(e){fi(n,t,e)})})},vi=function(e,t){var n=e.dom(),r=window.getComputedStyle(n),o=r.getPropertyValue(t),i=""!==o||ui.inBody(e)?o:bi(n,t);return null===i?void 0:i},bi=function(e,t){return di.isSupported(e)?e.style.getPropertyValue(t):""},yi=function(e,t){var n=e.dom(),r=bi(n,t);return Ee.from(r).filter(function(e){return e.length>0})},wi=function(e){var t={},n=e.dom();if(di.isSupported(n))for(var r=0;r<n.style.length;r++){var o=n.style.item(r);t[o]=n.style[o]}return t},xi=function(e,t,n){var r=Mo.fromTag(e);return pi(r,t,n),yi(r,t).isSome()},Ci=function(e,t){var n=e.dom();hi(n,t),ii.has(e,"style")&&""===bo(ii.get(e,"style"))&&ii.remove(e,"style")},ki=function(e,t){var n=ii.get(e,"style"),r=t(e);return(void 0===n?ii.remove:ii.set)(e,"style",n),r},Ni=function(e,t){var n=e.dom(),r=t.dom();di.isSupported(n)&&di.isSupported(r)&&(r.style.cssText=n.style.cssText)},_i=function(e){return e.dom().offsetWidth},Si=function(e,t,n){yi(e,n).each(function(e){yi(t,n).isNone()&&pi(t,n,e)})},Ti=function(e,t,n){Wo.isElement(e)&&Wo.isElement(t)&&We(n,function(n){Si(e,t,n)})},Ei={copy:Ni,set:pi,preserve:ki,setAll:mi,setOptions:gi,remove:Ci,get:vi,getRaw:yi,getAllRaw:wi,isValidValue:xi,reflow:_i,transfer:Ti},Oi=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments");var r={};return We(e,function(e,n){r[e]=ge(t[n])}),r}},Ai=function(e,t){var n=[],r=function(e){return n.push(e),t(e)},o=t(e);do{o=o.bind(r)}while(o.isSome());return n},Di={toArray:Ai},Ri=function(){return mt.getOrDie("Node")},Mi=function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)},Pi=function(e,t){return Mi(e,t,Ri().DOCUMENT_POSITION_PRECEDING)},Li=function(e,t){return Mi(e,t,Ri().DOCUMENT_POSITION_CONTAINED_BY)},Ii={documentPositionPreceding:Pi,documentPositionContainedBy:Li},ji=Po.ELEMENT,Bi=Po.DOCUMENT,Fi=function(e,t){var n=e.dom();if(n.nodeType!==ji)return!1;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Hi=function(e){return e.nodeType!==ji&&e.nodeType!==Bi||0===e.childElementCount},Ui=function(e,t){var n=void 0===t?document:t.dom();return Hi(n)?[]:ze(n.querySelectorAll(e),Mo.fromDom)},zi=function(e,t){var n=void 0===t?document:t.dom();return Hi(n)?Ee.none():Ee.from(n.querySelector(e)).map(Mo.fromDom)},Wi={all:Ui,is:Fi,one:zi},Vi=function(e,t){return e.dom()===t.dom()},qi=function(e,t){return e.dom().isEqualNode(t.dom())},$i=function(e,t){return Ue(t,be(Vi,e))},Ki=function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},Gi=function(e,t){return Ii.documentPositionContainedBy(e.dom(),t.dom())},Xi=To.detect().browser,Yi=Xi.isIE()?Gi:Ki,Ji={eq:Vi,isEqualNode:qi,member:$i,contains:Yi,is:Wi.is},Qi=function(e){return Mo.fromDom(e.dom().ownerDocument)},Zi=function(e){return Mo.fromDom(e.dom().ownerDocument.documentElement)},ea=function(e){var t=e.dom(),n=t.ownerDocument.defaultView;return Mo.fromDom(n)},ta=function(e){var t=e.dom();return Ee.from(t.parentNode).map(Mo.fromDom)},na=function(e){return ta(e).bind(function(t){var n=ca(t);return Ye(n,function(t){return Ji.eq(e,t)})})},ra=function(e,t){for(var n=Ie(t)?t:ge(!1),r=e.dom(),o=[];null!==r.parentNode&&void 0!==r.parentNode;){var i=r.parentNode,a=Mo.fromDom(i);if(o.push(a),!0===n(a))break;r=i}return o},oa=function(e){var t=function(t){return $e(t,function(t){return!Ji.eq(e,t)})};return ta(e).map(ca).map(t).getOr([])},ia=function(e){var t=e.dom();return Ee.from(t.offsetParent).map(Mo.fromDom)},aa=function(e){var t=e.dom();return Ee.from(t.previousSibling).map(Mo.fromDom)},sa=function(e){var t=e.dom();return Ee.from(t.nextSibling).map(Mo.fromDom)},la=function(e){return rt(Di.toArray(e,aa))},ua=function(e){return Di.toArray(e,sa)},ca=function(e){var t=e.dom();return ze(t.childNodes,Mo.fromDom)},da=function(e,t){var n=e.dom().childNodes;return Ee.from(n[t]).map(Mo.fromDom)},fa=function(e){return da(e,0)},ha=function(e){return da(e,e.dom().childNodes.length-1)},pa=function(e){return e.dom().childNodes.length},ma=function(e){return e.dom().hasChildNodes()},ga=Oi("element","offset"),va=function(e,t){var n=ca(e);return n.length>0&&t<n.length?ga(n[t],0):ga(e,t)},ba={owner:Qi,defaultView:ea,documentElement:Zi,parent:ta,findIndex:na,parents:ra,siblings:oa,prevSibling:aa,offsetParent:ia,prevSiblings:la,nextSibling:sa,nextSiblings:ua,children:ca,child:da,firstChild:fa,lastChild:ha,childNodesCount:pa,hasChildNodes:ma,leaf:va},ya=To.detect().browser,wa=function(e){return Xe(e,Wo.isElement)},xa=function(e){return ya.isFirefox()&&"table"===Wo.name(e)?wa(ba.children(e)).filter(function(e){return"caption"===Wo.name(e)}).bind(function(e){return wa(ba.nextSiblings(e)).map(function(t){var n=t.dom().offsetTop,r=e.dom().offsetTop,o=e.dom().offsetHeight;return n<=r?-o:0})}).getOr(0):0},Ca=function(e,t,n){var r,o,i=0,a=0,s=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&"static"===Ei.get(Mo.fromDom(e),"position"))return o=t.getBoundingClientRect(),i=o.left+(s.documentElement.scrollLeft||e.scrollLeft)-s.documentElement.clientLeft,a=o.top+(s.documentElement.scrollTop||e.scrollTop)-s.documentElement.clientTop,{x:i,y:a};for(r=t;r&&r!==n&&r.nodeType;)i+=r.offsetLeft||0,a+=r.offsetTop||0,r=r.offsetParent;for(r=t.parentNode;r&&r!==n&&r.nodeType;)i-=r.scrollLeft||0,a-=r.scrollTop||0,r=r.parentNode;a+=xa(Mo.fromDom(t))}return{x:i,y:a}},ka={getPos:Ca},Na=function(e){var t=Ee.none(),n=[],r=function(e){return Na(function(t){o(function(n){t(e(n))})})},o=function(e){a()?l(e):n.push(e)},i=function(e){t=Ee.some(e),s(n),n=[]},a=function(){return t.isSome()},s=function(e){We(e,l)},l=function(e){t.each(function(t){setTimeout(function(){e(t)},0)})};return e(i),{get:o,map:r,isReady:a}},_a=function(e){return Na(function(t){t(e)})},Sa={nu:Na,pure:_a},Ta=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this;setTimeout(function(){e.apply(r,t)},0)}},Ea=function(e){var t=function(t){e(Ta(t))};return{map:function(e){return Ea(function(n){t(function(t){var r=e(t);n(r)})})},bind:function(e){return Ea(function(n){t(function(t){e(t).get(n)})})},anonBind:function(e){return Ea(function(n){t(function(t){e.get(n)})})},toLazy:function(){return Sa.nu(t)},get:t}},Oa=function(e){return Ea(function(t){t(e)})},Aa={nu:Ea,pure:Oa},Da=function(e,t){return t(function(t){var n=[],r=0,o=function(o){return function(i){n[o]=i,++r>=e.length&&t(n)}};0===e.length?t([]):We(e,function(e,t){e.get(o(t))})})},Ra=function(e){return Da(e,Aa.nu)},Ma=function(e){var t=function(t){return e===t},n=function(t){return Ma(e)},r=function(t){return Ma(e)},o=function(t){return Ma(t(e))},i=function(t){t(e)},a=function(t){return t(e)},s=function(t,n){return n(e)},l=function(t){return t(e)},u=function(t){return t(e)},c=function(){return Ee.some(e)};return{is:t,isValue:xe,isError:we,getOr:ge(e),getOrThunk:ge(e),getOrDie:ge(e),or:n,orThunk:r,fold:s,map:o,each:i,bind:a,exists:l,forall:u,toOption:c}},Pa=function(e){var t=function(e){return e()},n=function(){return ye(String(e))()},r=function(e){return e},o=function(e){return e()},i=function(t){return Pa(e)},a=function(t){return Pa(e)};return{is:we,isValue:we,isError:xe,getOr:ve,getOrThunk:t,getOrDie:n,or:r,orThunk:o,fold:function(t,n){return t(e)},map:i,each:pe,bind:a,exists:we,forall:xe,toOption:Ee.none}},La={value:Ma,error:Pa},Ia=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],ja=["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"],Ba=["td","th"],Fa=["thead","tbody","tfoot"],Ha=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],Ua=["h1","h2","h3","h4","h5","h6"],za=["li","dd","dt"],Wa=["ul","ol","dl"],Va=["pre","script","textarea","style"],qa=function(e){var t;return function(n){return t=t||it(e,ge(!0)),t.hasOwnProperty(Wo.name(n))}},$a=qa(Ua),Ka=qa(Ia),Ga=function(e){return Wo.isElement(e)&&!Ka(e)},Xa=function(e){return Wo.isElement(e)&&"br"===Wo.name(e)},Ya=qa(Ha),Ja=qa(Wa),Qa=qa(za),Za=qa(ja),es=qa(Fa),ts=qa(Ba),ns=qa(Va),rs=function(e){return function(t){return!!t&&t.nodeType===e}},os=rs(1),is=function(e){var t=e.toLowerCase().split(" ");return function(e){var n,r;if(e&&e.nodeType)for(r=e.nodeName.toLowerCase(),n=0;n<t.length;n++)if(r===t[n])return!0;return!1}},as=function(e,t){var n=t.toLowerCase().split(" ");return function(t){var r;if(os(t))for(r=0;r<n.length;r++){var o=t.ownerDocument.defaultView.getComputedStyle(t,null);if((o?o.getPropertyValue(e):null)===n[r])return!0}return!1}},ss=function(e,t){return function(n){return os(n)&&n[e]===t}},ls=function(e,t){return function(t){return os(t)&&t.hasAttribute(e)}},us=function(e,t){return function(n){return os(n)&&n.getAttribute(e)===t}},cs=function(e){return os(e)&&e.hasAttribute("data-mce-bogus")},ds=function(e){return os(e)&&"all"===e.getAttribute("data-mce-bogus")},fs=function(e){return os(e)&&"TABLE"===e.tagName},hs=function(e){return function(t){if(os(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},ps=rs(3),ms=rs(8),gs=rs(9),vs=is("br"),bs=hs("true"),ys=hs("false"),ws={isText:ps,isElement:os,isComment:ms,isDocument:gs,isBr:vs,isContentEditableTrue:bs,isContentEditableFalse:ys,matchNodeNames:is,hasPropValue:ss,hasAttribute:ls,hasAttributeValue:us,matchStyleValues:as,isBogus:cs,isBogusAll:ds,isTable:fs},xs=function(e){var t=e.previousSibling&&"SPAN"===e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"===e.nextSibling.nodeName;return t&&n},Cs=function(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},ks=function(e,t){var n,r=t.childNodes;if(!ws.isElement(t)||!Cs(t)){for(n=r.length-1;n>=0;n--)ks(e,r[n]);if(!1===ws.isDocument(t)){if(ws.isText(t)&&t.nodeValue.length>0){var o=vr.trim(t.nodeValue).length;if(e.isBlock(t.parentNode)||o>0)return;if(0===o&&xs(t))return}else if(ws.isElement(t)&&(r=t.childNodes,1===r.length&&Cs(r[0])&&t.parentNode.insertBefore(r[0],t),r.length||Za(Mo.fromDom(t))))return;e.remove(t)}return t}},Ns={trimNode:ks},_s=vr.makeMap,Ss=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ts=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Es=/[<>&\"\']/g,Os=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,As={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"};Xr={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Yr={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};var Ds=function(e){var t;return t=Mo.fromTag("div").dom(),t.innerHTML=e,t.textContent||t.innerText||e},Rs=function(e,t){var n,r,o,i={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)r=String.fromCharCode(parseInt(e[n],t)),Xr[r]||(o="&"+e[n+1]+";",i[r]=o,i[o]=r);return i}};Gr=Rs("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var Ms=function(e,t){return e.replace(t?Ss:Ts,function(e){return Xr[e]||e})},Ps=function(e){return(""+e).replace(Es,function(e){return Xr[e]||e})},Ls=function(e,t){return e.replace(t?Ss:Ts,function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":Xr[e]||"&#"+e.charCodeAt(0)+";"})},Is=function(e,t,n){return n=n||Gr,e.replace(t?Ss:Ts,function(e){return Xr[e]||n[e]||e})},js=function(e,t){var n=Rs(t)||Gr,r=function(e,t){return e.replace(t?Ss:Ts,function(e){return void 0!==Xr[e]?Xr[e]:void 0!==n[e]?n[e]:e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"})},o=function(e,t){return Is(e,t,n)},i=_s(e.replace(/\+/g,","));return i.named&&i.numeric?r:i.named?t?o:Is:i.numeric?Ls:Ms},Bs=function(e){return e.replace(Os,function(e,t){return t?(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10),t>65535?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):As[t]||String.fromCharCode(t)):Yr[e]||Gr[e]||Ds(e)})},Fs={encodeRaw:Ms,encodeAllRaw:Ps,encodeNumeric:Ls,encodeNamed:Is,getEncodeFunc:js,decode:Bs},Hs={},Us={},zs=vr.makeMap,Ws=vr.each,Vs=vr.extend,qs=vr.explode,$s=vr.inArray,Ks=function(e,t){return e=vr.trim(e),e?e.split(t||" "):[]},Gs=function(e){var t,n,r,o,i,a,s={},l=function(e,n,r){var o,i,a,l=function(e,t){var n,r,o={};for(n=0,r=e.length;n<r;n++)o[e[n]]=t||{};return o};for(r=r||[],n=n||"","string"==typeof r&&(r=Ks(r)),e=Ks(e),o=e.length;o--;)i=Ks([t,n].join(" ")),a={attributes:l(i),attributesOrder:i,children:l(r,Us)},s[e[o]]=a},u=function(e,t){var n,r,o,i;for(e=Ks(e),n=e.length,t=Ks(t);n--;)for(r=s[e[n]],o=0,i=t.length;o<i;o++)r.attributes[t[o]]={},r.attributesOrder.push(t[o])};return Hs[e]?Hs[e]:(t="id accesskey class dir lang style tabindex title role",n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",r="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(t+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",n+=" article aside details dialog figure header footer hgroup section nav",r+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==e&&(t+=" xml:lang",a="acronym applet basefont big font strike tt",r=[r,a].join(" "),Ws(Ks(a),function(e){l(e,"",r)}),i="center dir isindex noframes",n=[n,i].join(" "),o=[n,r].join(" "),Ws(Ks(i),function(e){l(e,"",o)})),o=o||[n,r].join(" "),l("html","manifest","head body"),l("head","","base command link meta noscript script style title"),l("title hr noscript br"),l("base","href target"),l("link","href rel media hreflang type sizes hreflang"),l("meta","name http-equiv content charset"),l("style","media type scoped"),l("script","src async defer type charset"),l("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",o),l("address dt dd div caption","",o),l("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",r),l("blockquote","cite",o),l("ol","reversed start type","li"),l("ul","","li"),l("li","value",o),l("dl","","dt dd"),l("a","href target rel media hreflang type",r),l("q","cite",r),l("ins del","cite datetime",o),l("img","src sizes srcset alt usemap ismap width height"),l("iframe","src name width height",o),l("embed","src type width height"),l("object","data type typemustmatch name usemap form width height",[o,"param"].join(" ")),l("param","name value"),l("map","name",[o,"area"].join(" ")),l("area","alt coords shape href target rel media hreflang type"),l("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),l("colgroup","span","col"),l("col","span"),l("tbody thead tfoot","","tr"),l("tr","","td th"),l("td","colspan rowspan headers",o),l("th","colspan rowspan headers scope abbr",o),l("form","accept-charset action autocomplete enctype method name novalidate target",o),l("fieldset","disabled form name",[o,"legend"].join(" ")),l("label","form for",r),l("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),l("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?o:r),l("select","disabled form multiple name required size","option optgroup"),l("optgroup","disabled label","option"),l("option","disabled label selected value"),l("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),l("menu","type label",[o,"li"].join(" ")),l("noscript","",o),"html4"!==e&&(l("wbr"),l("ruby","",[r,"rt rp"].join(" ")),l("figcaption","",o),l("mark rt rp summary bdi","",r),l("canvas","width height",o),l("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[o,"track source"].join(" ")),l("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[o,"track source"].join(" ")),l("picture","","img source"),l("source","src srcset type media sizes"),l("track","kind src srclang label default"),l("datalist","",[r,"option"].join(" ")),l("article section nav aside header footer","",o),l("hgroup","","h1 h2 h3 h4 h5 h6"),l("figure","",[o,"figcaption"].join(" ")),l("time","datetime",r),l("dialog","open",o),l("command","type label icon disabled checked radiogroup command"),l("output","for form name",r),l("progress","value max",r),l("meter","value min max low high optimum",r),l("details","open",[o,"summary"].join(" ")),l("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==e&&(u("script","language xml:space"),u("style","xml:space"),u("object","declare classid code codebase codetype archive standby align border hspace vspace"),u("embed","align name hspace vspace"),u("param","valuetype type"),u("a","charset name rev shape coords"),u("br","clear"),u("applet","codebase archive code object alt name width height align hspace vspace"),u("img","name longdesc align border hspace vspace"),u("iframe","longdesc frameborder marginwidth marginheight scrolling align"),u("font basefont","size color face"),u("input","usemap align"),u("select","onchange"),u("textarea"),u("h1 h2 h3 h4 h5 h6 div p legend caption","align"),u("ul","type compact"),u("li","type"),u("ol dl menu dir","compact"),u("pre","width xml:space"),u("hr","align noshade size width"),u("isindex","prompt"),u("table","summary width frame rules cellspacing cellpadding align bgcolor"),u("col","width align char charoff valign"),u("colgroup","width align char charoff valign"),u("thead","align char charoff valign"),u("tr","align char charoff valign bgcolor"),u("th","axis align char charoff valign nowrap bgcolor width height"),u("form","accept"),u("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),u("tfoot","align char charoff valign"),u("tbody","align char charoff valign"),u("area","nohref"),u("body","background bgcolor text link vlink alink")),"html4"!==e&&(u("input button select textarea","autofocus"),u("input textarea","placeholder"),u("a","download"),u("link script img","crossorigin"),u("iframe","sandbox seamless allowfullscreen")),Ws(Ks("a form meter progress dfn"),function(e){s[e]&&delete s[e].children[e]}),delete s.caption.children.table,delete s.script,Hs[e]=s,s)},Xs=function(e,t){var n;return e&&(n={},"string"==typeof e&&(e={"*":e}),Ws(e,function(e,r){n[r]=n[r.toUpperCase()]="map"===t?zs(e,/[, ]/):qs(e,/[, ]/)})),n},Ys=function(e,t,n,r){var o=function(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e};return"#"+o(t)+o(n)+o(r)},Js=vr.each,Qs=vr.grep,Zs=_t.ie,el=/^([a-z0-9],?)+$/i,tl=/^[ \t\r\n]*$/,nl=function(e,t,n){var r={},o=t.keep_values,i={set:function(e,r,o){t.url_converter&&(r=t.url_converter.call(t.url_converter_scope||n(),r,o,e[0])),e.attr("data-mce-"+o,r).attr(o,r)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}};return r={style:{set:function(e,t){if(null!==t&&"object"==typeof t)return void e.css(t);o&&e.attr("data-mce-style",t),e.attr("style",t)},get:function(t){var n=t.attr("data-mce-style")||t.attr("style");return n=e.serialize(e.parse(n),t[0].nodeName)}}},o&&(r.href=r.src=i),r},rl=function(e,t){var n=t.attr("style"),r=e.serialize(e.parse(n),t[0].nodeName);r||(r=null),t.attr("data-mce-style",r)},ol=function(e,t){var n,r,o=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)r=e.nodeType,(!t||3!==r||r!==n&&e.nodeValue.length)&&(o++,n=r);return o};!function(e){e.DOM=e(document),e.nodeIndex=ol}(x||(x={}));var il=x,al=il.DOM,sl=vr.each,ll=vr.grep,ul=function(e){return"function"==typeof e},cl=function(){var e={},t=[],n={},r=[],o=0,i=function(e,t,n){var r,o,i=al,a=function(){i.remove(o),r&&(r.onreadystatechange=r.onload=r=null),t()},s=function(){ul(n)?n():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+e)};o=i.uniqueId(),r=document.createElement("script"),r.id=o,r.type="text/javascript",r.src=vr._addCacheSuffix(e),r.onload=a,r.onerror=s,(document.getElementsByTagName("head")[0]||document.body).appendChild(r)};this.isDone=function(t){return 2===e[t]},this.markDone=function(t){e[t]=2},this.add=this.load=function(r,o,i,a){void 0===e[r]&&(t.push(r),e[r]=0),o&&(n[r]||(n[r]=[]),n[r].push({success:o,failure:a,scope:i||this}))},this.remove=function(t){delete e[t],delete n[t]},this.loadQueue=function(e,n,r){this.loadScripts(t,e,n,r)},this.loadScripts=function(t,a,s,l){var u,c=[],d=function(e,t){sl(n[t],function(t){ul(t[e])&&t[e].call(t.scope)}),n[t]=void 0};r.push({success:a,failure:l,scope:s||this}),(u=function(){var n=ll(t);if(t.length=0,sl(n,function(t){return 2===e[t]?void d("success",t):3===e[t]?void d("failure",t):void(1!==e[t]&&(e[t]=1,o++,i(t,function(){e[t]=2,o--,d("success",t),u()},function(){e[t]=3,o--,c.push(t),d("failure",t),u()})))}),!o){var a=r.slice(0);r.length=0,sl(a,function(e){0===c.length?ul(e.success)&&e.success.call(e.scope):ul(e.failure)&&e.failure.call(e.scope,c)})}})()}};cl.ScriptLoader=new cl;var dl=vr.each;!function(e){e.PluginManager=e(),e.ThemeManager=e()}(C||(C={}));var fl=function(e,t){ba.parent(e).each(function(n){n.dom().insertBefore(t.dom(),e.dom())})},hl=function(e,t){ba.nextSibling(e).fold(function(){ba.parent(e).each(function(e){ml(e,t)})},function(e){fl(e,t)})},pl=function(e,t){ba.firstChild(e).fold(function(){ml(e,t)},function(n){e.dom().insertBefore(t.dom(),n.dom())})},ml=function(e,t){e.dom().appendChild(t.dom())},gl=function(e,t,n){ba.child(e,n).fold(function(){ml(e,t)},function(e){fl(e,t)})},vl=function(e,t){fl(e,t),ml(t,e)},bl={before:fl,after:hl,prepend:pl,append:ml,appendAt:gl,wrap:vl},yl=function(e,t){We(t,function(t){bl.before(e,t)})},wl=function(e,t){We(t,function(n,r){var o=0===r?e:t[r-1];bl.after(o,n)})},xl=function(e,t){We(t.slice().reverse(),function(t){bl.prepend(e,t)})},Cl=function(e,t){We(t,function(t){bl.append(e,t)})},kl={before:yl,after:wl,prepend:xl,append:Cl},Nl=function(e){e.dom().textContent="",We(ba.children(e),function(e){_l(e)})},_l=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},Sl=function(e){var t=ba.children(e);t.length>0&&kl.before(e,t),_l(e)},Tl={empty:Nl,remove:_l,unwrap:Sl},El=function(e,t){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},throttle:function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];null===n&&(n=setTimeout(function(){e.apply(null,r),n=null},t))}}},Ol=function(e,t){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},throttle:function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];null!==n&&clearTimeout(n),n=setTimeout(function(){e.apply(null,r),n=null},t)}}},Al=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return Al(n())}}},Dl=function(e,t){var n=ii.get(e,t);return void 0===n||""===n?[]:n.split(" ")},Rl=function(e,t,n){var r=Dl(e,t),o=r.concat([n]);return ii.set(e,t,o.join(" ")),!0},Ml=function(e,t,n){var r=$e(Dl(e,t),function(e){return e!==n});return r.length>0?ii.set(e,t,r.join(" ")):ii.remove(e,t),!1},Pl={read:Dl,add:Rl,remove:Ml},Ll=function(e){return void 0!==e.dom().classList},Il=function(e){return Pl.read(e,"class")},jl=function(e,t){return Pl.add(e,"class",t)},Bl=function(e,t){return Pl.remove(e,"class",t)},Fl=function(e,t){return He(Il(e),t)?Bl(e,t):jl(e,t)},Hl={get:Il,add:jl,remove:Bl,toggle:Fl,supports:Ll},Ul=function(e,t){Hl.supports(e)?e.dom().classList.add(t):Hl.add(e,t)},zl=function(e){0===(Hl.supports(e)?e.dom().classList:Hl.get(e)).length&&ii.remove(e,"class")},Wl=function(e,t){if(Hl.supports(e)){e.dom().classList.remove(t)}else Hl.remove(e,t);zl(e)},Vl=function(e,t){return Hl.supports(e)?e.dom().classList.toggle(t):Hl.toggle(e,t)},ql=function(e,t){var n=Hl.supports(e),r=e.dom().classList;return k(function(){n?r.remove(t):Hl.remove(e,t)},function(){n?r.add(t):Hl.add(e,t)},$l(e,t))},$l=function(e,t){return Hl.supports(e)&&e.dom().classList.contains(t)},Kl={add:Ul,remove:Wl,toggle:Vl,toggler:ql,has:$l},Gl=function(e){return Ql(ui.body(),e)},Xl=function(e,t,n){return $e(ba.parents(e,n),t)},Yl=function(e,t){return $e(ba.siblings(e),t)},Jl=function(e,t){return $e(ba.children(e),t)},Ql=function(e,t){var n=[];return We(ba.children(e),function(e){t(e)&&(n=n.concat([e])),n=n.concat(Ql(e,t))}),n},Zl={all:Gl,ancestors:Xl,siblings:Yl,children:Jl,descendants:Ql},eu=function(e){return Wi.all(e)},tu=function(e,t,n){return Zl.ancestors(e,function(e){return Wi.is(e,t)},n)},nu=function(e,t){return Zl.siblings(e,function(e){return Wi.is(e,t)})},ru=function(e,t){return Zl.children(e,function(e){return Wi.is(e,t)})},ou=function(e,t){return Wi.all(t,e)},iu={all:eu,ancestors:tu,siblings:nu,children:ru,descendants:ou},au=function(e){return du(ui.body(),e)},su=function(e,t,n){for(var r=e.dom(),o=Ie(n)?n:ge(!1);r.parentNode;){r=r.parentNode;var i=Mo.fromDom(r);if(t(i))return Ee.some(i);if(o(i))break}return Ee.none()},lu=function(e,t,n){return N(function(e){return t(e)},su,e,t,n)},uu=function(e,t){var n=e.dom();return n.parentNode?cu(Mo.fromDom(n.parentNode),function(n){return!Ji.eq(e,n)&&t(n)}):Ee.none()},cu=function(e,t){return Xe(e.dom().childNodes,me(t,Mo.fromDom)).map(Mo.fromDom)},du=function(e,t){var n=function(e){for(var r=0;r<e.childNodes.length;r++){if(t(Mo.fromDom(e.childNodes[r])))return Ee.some(Mo.fromDom(e.childNodes[r]));var o=n(e.childNodes[r]);if(o.isSome())return o}return Ee.none()};return n(e.dom())},fu={first:au,ancestor:su,closest:lu,sibling:uu,child:cu,descendant:du},hu=function(e){return Wi.one(e)},pu=function(e,t,n){return fu.ancestor(e,function(e){return Wi.is(e,t)},n)},mu=function(e,t){return fu.sibling(e,function(e){return Wi.is(e,t)})},gu=function(e,t){return fu.child(e,function(e){return Wi.is(e,t)})},vu=function(e,t){return Wi.one(t,e)},bu=function(e,t,n){return N(Wi.is,pu,e,t,n)},yu={first:hu,ancestor:pu,sibling:mu,child:gu,descendant:vu,closest:bu},wu=ge("mce-annotation"),xu=ge("data-mce-annotation"),Cu=ge("data-mce-annotation-uid"),ku=function(e,t){var n=e.selection.getRng(),r=Mo.fromDom(n.startContainer),o=Mo.fromDom(e.getBody()),i=t.fold(function(){return"."+wu()},function(e){return"["+xu()+'="'+e+'"]'}),a=ba.child(r,n.startOffset).getOr(r),s=yu.closest(a,i,function(e){return Ji.eq(e,o)}),l=function(e,t){return ii.has(e,t)?Ee.some(ii.get(e,t)):Ee.none()};return s.bind(function(t){return l(t,""+Cu()).bind(function(n){return l(t,""+xu()).map(function(t){var r=_u(e,n);return{uid:n,name:t,elements:r}})})})},Nu=function(e){return Wo.isElement(e)&&Kl.has(e,wu())},_u=function(e,t){var n=Mo.fromDom(e.getBody());return iu.descendants(n,"["+Cu()+'="'+t+'"]')},Su=function(e,t){var n=Mo.fromDom(e.getBody()),r=iu.descendants(n,"["+xu()+'="'+t+'"]'),o={};return We(r,function(e){var t=ii.get(e,Cu()),n=o.hasOwnProperty(t)?o[t]:[];o[t]=n.concat([e])}),o},Tu=function(e,t){var n=Al({}),r=function(){return{listeners:[],previous:Al(Ee.none())}},o=function(e,t){i(e,function(e){return t(e),e})},i=function(e,t){var o=n.get(),i=o.hasOwnProperty(e)?o[e]:r(),a=t(i);o[e]=a,n.set(o)},a=function(e,t,n){o(e,function(r){We(r.listeners,function(r){return r(!0,e,{uid:t,nodes:ze(n,function(e){return e.dom()})})})})},s=function(e){o(e,function(t){We(t.listeners,function(t){return t(!1,e)})})},l=Ol(function(){var t=n.get(),r=at(Vo(t));We(r,function(t){i(t,function(n){var r=n.previous.get();return ku(e,Ee.some(t)).fold(function(){r.isSome()&&(s(t),n.previous.set(Ee.none()))},function(e){var t=e.uid,o=e.name,i=e.elements;r.is(t)||(a(o,t,i),n.previous.set(Ee.some(t)))}),{previous:n.previous,listeners:n.listeners}})})},30);return e.on("remove",function(){l.cancel()}),e.on("nodeChange",function(){l.throttle()}),{addListener:function(e,t){i(e,function(e){return{previous:e.previous,listeners:e.listeners.concat([t])}})}}},Eu=function(e,t){var n=function(e){return Ee.from(e.attributes.map[xu()]).bind(t.lookup)};e.on("init",function(){e.serializer.addNodeFilter("span",function(e){We(e,function(e){n(e).each(function(t){!1===t.persistent&&e.unwrap()})})})})},Ou=function(){var e={};return{register:function(t,n){e[t]={name:t,settings:n}},lookup:function(t){return e.hasOwnProperty(t)?Ee.from(e[t]).map(function(e){return e.settings}):Ee.none()}}},Au=0,Du=function(e){var t=new Date,n=t.getTime(),r=Math.floor(1e9*Math.random());return Au++,e+"_"+r+Au+String(n)},Ru=function(e,t){We(t,function(t){Kl.add(e,t)})},Mu=function(e,t){We(t,function(t){Kl.remove(e,t)})},Pu=function(e,t){We(t,function(t){Kl.toggle(e,t)})},Lu=function(e,t){return tt(t,function(t){return Kl.has(e,t)})},Iu=function(e,t){return Ue(t,function(t){return Kl.has(e,t)})},ju=function(e){for(var t=e.dom().classList,n=new Array(t.length),r=0;r<t.length;r++)n[r]=t.item(r);return n},Bu=function(e){return Hl.supports(e)?ju(e):Hl.get(e)},Fu={add:Ru,remove:Mu,toggle:Pu,hasAll:Lu,hasAny:Iu,get:Bu},Hu=function(e,t){return Mo.fromDom(e.dom().cloneNode(t))},Uu=function(e){return Hu(e,!1)},zu=function(e){return Hu(e,!0)},Wu=function(e,t){var n=Mo.fromTag(t),r=ii.clone(e);return ii.setAll(n,r),n},Vu=function(e,t){var n=Wu(e,t),r=ba.children(zu(e));return kl.append(n,r),n},qu=function(e,t){var n=Wu(e,t);bl.before(e,n);var r=ba.children(e);return kl.append(n,r),Tl.remove(e),n},$u={shallow:Uu,shallowAs:Wu,deep:zu,copy:Vu,mutate:qu},Ku=[].slice,Gu=function(e){return function(){return e}},Xu=function(e){return function(t){return!e(t)}},Yu=function(e,t){return function(n){return e(t(n))}},Ju=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Ku.call(arguments);return function(e){for(var t=0;t<n.length;t++)if(n[t](e))return!0;return!1}},Qu=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Ku.call(arguments);return function(e){for(var t=0;t<n.length;t++)if(!n[t](e))return!1;return!0}},Zu=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Ku.call(arguments);return r.length-1>=e.length?e.apply(this,r.slice(1)):function(){var e=r.concat([].slice.call(arguments));return Zu.apply(this,e)}},ec=function(){},tc={constant:Gu,negate:Xu,and:Qu,or:Ju,curry:Zu,compose:Yu,noop:ec},nc=function(e){return"\ufeff"===e},rc=function(e){return e.replace(new RegExp("\ufeff","g"),"")},oc={isZwsp:nc,ZWSP:"\ufeff",trim:rc},ic=ws.isElement,ac=ws.isText,sc=function(e){return ac(e)&&(e=e.parentNode),ic(e)&&e.hasAttribute("data-mce-caret")},lc=function(e){return ac(e)&&oc.isZwsp(e.data)},uc=function(e){return sc(e)||lc(e)},cc=function(e){return e.firstChild!==e.lastChild||!ws.isBr(e.firstChild)},dc=function(e,t){var n,r,o,i;if(n=e.ownerDocument,o=n.createTextNode(oc.ZWSP),i=e.parentNode,t){if(r=e.previousSibling,ac(r)){if(uc(r))return r;if(vc(r))return r.splitText(r.data.length-1)}i.insertBefore(o,e)}else{if(r=e.nextSibling,ac(r)){if(uc(r))return r;if(gc(r))return r.splitText(1),r}e.nextSibling?i.insertBefore(o,e.nextSibling):i.appendChild(o)}return o},fc=function(e){var t=e.container();return e&&ws.isText(t)&&t.data.charAt(e.offset())===oc.ZWSP},hc=function(e){var t=e.container();return e&&ws.isText(t)&&t.data.charAt(e.offset()-1)===oc.ZWSP},pc=function(){var e=document.createElement("br");return e.setAttribute("data-mce-bogus","1"),e},mc=function(e,t,n){var r,o,i;return r=t.ownerDocument,o=r.createElement(e),o.setAttribute("data-mce-caret",n?"before":"after"),o.setAttribute("data-mce-bogus","all"),o.appendChild(pc()),i=t.parentNode,n?i.insertBefore(o,t):t.nextSibling?i.insertBefore(o,t.nextSibling):i.appendChild(o),o},gc=function(e){return ac(e)&&e.data[0]===oc.ZWSP},vc=function(e){return ac(e)&&e.data[e.data.length-1]===oc.ZWSP},bc=function(e){var t=e.getElementsByTagName("br"),n=t[t.length-1];ws.isBogus(n)&&n.parentNode.removeChild(n)},yc=function(e){return e&&e.hasAttribute("data-mce-caret")?(bc(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e):null},wc=function(e){return sc(e.startContainer)},xc=ws.isContentEditableTrue,Cc=ws.isContentEditableFalse,kc=ws.isBr,Nc=ws.isText,_c=ws.matchNodeNames("script style textarea"),Sc=ws.matchNodeNames("img input textarea hr iframe video audio object"),Tc=ws.matchNodeNames("table"),Ec=uc,Oc=function(e){return!Ec(e)&&(Nc(e)?!_c(e.parentNode):Sc(e)||kc(e)||Tc(e)||Dc(e))},Ac=function(e){return ws.isElement(e)&&"true"===e.getAttribute("unselectable")},Dc=function(e){return!1===Ac(e)&&Cc(e)},Rc=function(e,t){for(e=e.parentNode;e&&e!==t;e=e.parentNode){if(Dc(e))return!1;if(xc(e))return!0}return!0},Mc=function(e){return!!Dc(e)&&!0!==or.reduce(e.getElementsByTagName("*"),function(e,t){return e||xc(t)},!1)},Pc=function(e){return Sc(e)||Mc(e)},Lc=function(e,t){return Oc(e)&&Rc(e,t)},Ic=Math.round,jc=function(e){return e?{left:Ic(e.left),top:Ic(e.top),bottom:Ic(e.bottom),right:Ic(e.right),width:Ic(e.width),height:Ic(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},Bc=function(e,t){return e=jc(e),t?e.right=e.left:(e.left=e.left+e.width,e.right=e.left),e.width=0,e},Fc=function(e,t){return e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right},Hc=function(e,t,n){return e>=0&&e<=Math.min(t.height,n.height)/2},Uc=function(e,t){return e.bottom-e.height/2<t.top||!(e.top>t.bottom)&&Hc(t.top-e.bottom,e,t)},zc=function(e,t){return e.top>t.bottom||!(e.bottom<t.top)&&Hc(t.bottom-e.top,e,t)},Wc=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},Vc=function(e,t){return t.left>e.left&&t.right<e.right?0:t.left<e.left?t.left-e.left:t.right-e.right},qc=function(e,t){return t.top>e.top&&t.bottom<e.bottom?0:t.top<e.top?t.top-e.top:t.bottom-e.bottom},$c=function(e,t){return{x:Vc(e,t),y:qc(e,t)}},Kc=function(e){var t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Gc=function(e,t){return 1===e.nodeType&&e.hasChildNodes()&&(t>=e.childNodes.length&&(t=e.childNodes.length-1),e=e.childNodes[t]),e},Xc=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),Yc=function(e){return"string"==typeof e&&e.charCodeAt(0)>=768&&Xc.test(e)},Jc=function(e,t){for(var n=[],r=0;r<e.length;r++){var o=e[r];if(!o.isSome())return Ee.none();n.push(o.getOrDie())}return Ee.some(t.apply(null,n))},Qc=ws.isElement,Zc=Oc,ed=ws.matchStyleValues("display","block table"),td=ws.matchStyleValues("float","left right"),nd=tc.and(Qc,Zc,tc.negate(td)),rd=tc.negate(ws.matchStyleValues("white-space","pre pre-line pre-wrap")),od=ws.isText,id=ws.isBr,ad=il.nodeIndex,sd=Gc,ld=function(e){return"createRange"in e?e.createRange():il.DOM.createRng()},ud=function(e){return e&&/[\r\n\t ]/.test(e)},cd=function(e){return!!e.setStart&&!!e.setEnd},dd=function(e){var t,n=e.startContainer,r=e.startOffset;return!!(ud(e.toString())&&rd(n.parentNode)&&ws.isText(n)&&(t=n.data,ud(t[r-1])||ud(t[r+1])))},fd=function(e){var t,n=e.ownerDocument,r=ld(n),o=n.createTextNode("\xa0"),i=e.parentNode;return i.insertBefore(o,e),r.setStart(o,0),r.setEnd(o,1),t=jc(r.getBoundingClientRect()),i.removeChild(o),t},hd=function(e){var t=e.startContainer,n=e.endContainer,r=e.startOffset,o=e.endOffset;if(t===n&&ws.isText(n)&&0===r&&1===o){var i=e.cloneRange();return i.setEndAfter(n),md(i)}return null},pd=function(e){return 0===e.left&&0===e.right&&0===e.top&&0===e.bottom},md=function(e){var t,n;return n=e.getClientRects(),t=jc(n.length>0?n[0]:e.getBoundingClientRect()),!cd(e)&&id(e)&&pd(t)?fd(e):pd(t)&&cd(e)?hd(e):t},gd=function(e,t){var n=Bc(e,t);return n.width=1,n.right=n.left+1,n},vd=function(e){var t,n,r=[],o=function(e){0!==e.height&&(r.length>0&&Fc(e,r[r.length-1])||r.push(e))},i=function(e,t){var n=ld(e.ownerDocument);if(t<e.data.length){if(Yc(e.data[t]))return r;if(Yc(e.data[t-1])&&(n.setStart(e,t),n.setEnd(e,t+1),!dd(n)))return o(gd(md(n),!1)),r}t>0&&(n.setStart(e,t-1),n.setEnd(e,t),dd(n)||o(gd(md(n),!1))),t<e.data.length&&(n.setStart(e,t),n.setEnd(e,t+1),dd(n)||o(gd(md(n),!0)))};if(od(e.container()))return i(e.container(),e.offset()),r;if(Qc(e.container()))if(e.isAtEnd())n=sd(e.container(),e.offset()),od(n)&&i(n,n.data.length),nd(n)&&!id(n)&&o(gd(md(n),!1));else{if(n=sd(e.container(),e.offset()),od(n)&&i(n,0),nd(n)&&e.isAtEnd())return o(gd(md(n),!1)),r;t=sd(e.container(),e.offset()-1),nd(t)&&!id(t)&&(ed(t)||ed(n)||!nd(n))&&o(gd(md(t),!1)),nd(n)&&o(gd(md(n),!0))}return r};!function(e){e.fromRangeStart=function(t){return e(t.startContainer,t.startOffset)},e.fromRangeEnd=function(t){return e(t.endContainer,t.endOffset)},e.after=function(t){return e(t.parentNode,ad(t)+1)},e.before=function(t){return e(t.parentNode,ad(t))},e.isAbove=function(e,t){return Jc([st(t.getClientRects()),lt(e.getClientRects())],Uc).getOr(!1)},e.isBelow=function(e,t){return Jc([lt(t.getClientRects()),st(e.getClientRects())],zc).getOr(!1)},e.isAtStart=function(e){return!!e&&e.isAtStart()},e.isAtEnd=function(e){return!!e&&e.isAtEnd()},e.isTextPosition=function(e){return!!e&&ws.isText(e.container())},e.isElementPosition=function(t){return!1===e.isTextPosition(t)}}(_||(_={}));var bd,yd=_,wd=ws.isText,xd=ws.isBogus,Cd=il.nodeIndex,kd=function(e){var t=e.parentNode;return xd(t)?kd(t):t},Nd=function(e){return e?or.reduce(e.childNodes,function(e,t){return xd(t)&&"BR"!==t.nodeName?e=e.concat(Nd(t)):e.push(t),e},[]):[]},_d=function(e,t){for(;(e=e.previousSibling)&&wd(e);)t+=e.data.length;return t},Sd=function(e){return function(t){return e===t}},Td=function(e){var t,n,r;return t=Nd(kd(e)),n=or.findIndex(t,Sd(e),e),t=t.slice(0,n+1),r=or.reduce(t,function(e,n,r){return wd(n)&&wd(t[r-1])&&e++,e},0),t=or.filter(t,ws.matchNodeNames(e.nodeName)),(n=or.findIndex(t,Sd(e),e))-r},Ed=function(e){return(wd(e)?"text()":e.nodeName.toLowerCase())+"["+Td(e)+"]"},Od=function(e,t,n){var r=[];for(t=t.parentNode;t!==e&&(!n||!n(t));t=t.parentNode)r.push(t);return r},Ad=function(e,t){var n,r,o,i,a,s=[];return n=t.container(),r=t.offset(),wd(n)?o=_d(n,r):(i=n.childNodes,r>=i.length?(o="after",r=i.length-1):o="before",n=i[r]),s.push(Ed(n)),a=Od(e,n),a=or.filter(a,tc.negate(ws.isBogus)),s=s.concat(or.map(a,function(e){return Ed(e)})),s.reverse().join("/")+","+o},Dd=function(e,t,n){var r=Nd(e);return r=or.filter(r,function(e,t){return!wd(e)||!wd(r[t-1])}),r=or.filter(r,ws.matchNodeNames(t)),r[n]},Rd=function(e,t){for(var n,r=e,o=0;wd(r);){if(n=r.data.length,t>=o&&t<=o+n){e=r,t-=o;break}if(!wd(r.nextSibling)){e=r,t=n;break}o+=n,r=r.nextSibling}return wd(e)&&t>e.data.length&&(t=e.data.length),yd(e,t)},Md=function(e,t){var n,r,o;return t?(n=t.split(","),t=n[0].split("/"),o=n.length>1?n[1]:"before",r=or.reduce(t,function(e,t){return(t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t))?("text()"===t[1]&&(t[1]="#text"),Dd(e,t[1],parseInt(t[2],10))):null},e),r?wd(r)?Rd(r,parseInt(o,10)):(o="after"===o?Cd(r)+1:Cd(r),yd(r.parentNode,o)):null):null},Pd=ws.isContentEditableFalse,Ld=function(e,t,n){var r,o;for(o=e(t.data.slice(0,n)).length,r=t.previousSibling;r&&ws.isText(r);r=r.previousSibling)o+=e(r.data).length;return o},Id=function(e,t,n,r,o){var i,a=r[o?"startContainer":"endContainer"],s=r[o?"startOffset":"endOffset"],l=[],u=0,c=e.getRoot();for(ws.isText(a)?l.push(n?Ld(t,a,s):s):(i=a.childNodes,s>=i.length&&i.length&&(u=1,s=Math.max(0,i.length-1)),l.push(e.nodeIndex(i[s],n)+u));a&&a!==c;a=a.parentNode)l.push(e.nodeIndex(a,n));return l},jd=function(e,t,n,r){var o=t.dom,i={};return i.start=Id(o,e,n,r,!0),t.isCollapsed()||(i.end=Id(o,e,n,r,!1)),i},Bd=function(e){ws.isText(e)&&0===e.data.length&&e.parentNode.removeChild(e)},Fd=function(e,t,n){var r=0;return vr.each(e.select(t),function(e){if("all"!==e.getAttribute("data-mce-bogus"))return e!==n&&void r++}),r},Hd=function(e,t){var n,r,o,i=t?"start":"end";n=e[i+"Container"],r=e[i+"Offset"],ws.isElement(n)&&"TR"===n.nodeName&&(o=n.childNodes,(n=o[Math.min(t?r:r-1,o.length-1)])&&(r=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,r)))},Ud=function(e){return Hd(e,!0),Hd(e,!1),e},zd=function(e,t){var n;if(ws.isElement(e)&&(e=Gc(e,t),Pd(e)))return e;if(uc(e)){if(ws.isText(e)&&sc(e)&&(e=e.parentNode),n=e.previousSibling,Pd(n))return n;if(n=e.nextSibling,Pd(n))return n}},Wd=function(e){return zd(e.startContainer,e.startOffset)||zd(e.endContainer,e.endOffset)},Vd=function(e,t,n){var r=n.getNode(),o=r?r.nodeName:null,i=n.getRng();if(Pd(r)||"IMG"===o)return{name:o,index:Fd(n.dom,o,r)};var a=Wd(i);return a?(o=a.tagName,{name:o,index:Fd(n.dom,o,a)}):jd(e,n,t,i)},qd=function(e){var t=e.getRng();return{start:Ad(e.dom.getRoot(),yd.fromRangeStart(t)),end:Ad(e.dom.getRoot(),yd.fromRangeEnd(t))}},$d=function(e){return{rng:e.getRng()}},Kd=function(e,t,n){var r={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",r,"&#xFEFF;"):e.create("span",r)},Gd=function(e,t){var n=e.dom,r=e.getRng(),o=n.uniqueId(),i=e.isCollapsed(),a=e.getNode(),s=a.nodeName;if("IMG"===s)return{name:s,index:Fd(n,s,a)};var l=Ud(r.cloneRange());if(!i){l.collapse(!1);var u=Kd(n,o+"_end",t);l.insertNode(u),Bd(u.nextSibling)}r=Ud(r),r.collapse(!0);var c=Kd(n,o+"_start",t);return r.insertNode(c),Bd(c.previousSibling),e.moveToBookmark({id:o,keep:1}),{id:o}},Xd=function(e,t,n){return 2===t?Vd(oc.trim,n,e):3===t?qd(e):t?$d(e):Gd(e,!1)},Yd={getBookmark:Xd,getUndoBookmark:be(Vd,ve,!0),getPersistentBookmark:Gd},Jd=function(e){return ws.isElement(e)&&"_mce_caret"===e.id},Qd=function(e,t){for(;t&&t!==e;){if("_mce_caret"===t.id)return t;t=t.parentNode}return null},Zd=ws.isElement,ef=ws.isText,tf=function(e){var t=e.parentNode;t&&t.removeChild(e)},nf=function(e){try{return e.nodeValue}catch(e){return""}},rf=function(e,t){0===t.length?tf(e):e.nodeValue=t},of=function(e){var t=oc.trim(e);return{count:e.length-t.length,text:t}},af=function(e,t){return ff(e),t},sf=function(e,t){var n=of(e.data.substr(0,t.offset())),r=of(e.data.substr(t.offset())),o=n.text+r.text;return o.length>0?(rf(e,o),yd(e,t.offset()-n.count)):t},lf=function(e,t){var n=t.container(),r=Fe(ut(n.childNodes),e).map(function(e){return e<t.offset()?yd(n,t.offset()-1):t}).getOr(t);return ff(e),r},uf=function(e,t){return ef(e)&&t.container()===e?sf(e,t):af(e,t)},cf=function(e,t){return t.container()===e.parentNode?lf(e,t):af(e,t)},df=function(e,t){return yd.isTextPosition(t)?uf(e,t):cf(e,t)},ff=function(e){if(Zd(e)&&uc(e)&&(cc(e)?e.removeAttribute("data-mce-caret"):tf(e)),ef(e)){var t=oc.trim(nf(e));rf(e,t)}},hf={removeAndReposition:df,remove:ff},pf=ws.isContentEditableTrue,mf=ws.isContentEditableFalse,gf=function(e,t,n,r,o){return t._selectionOverrides.showCaret(e,n,r,o)},vf=function(e){var t=e.ownerDocument.createRange();return t.selectNode(e),t},bf=function(e,t){return e.fire("BeforeObjectSelected",{target:t}).isDefaultPrevented()?null:vf(t)},yf=function(e,t,n){var r=vp(1,e.getBody(),t),o=yd.fromRangeStart(r),i=o.getNode();if(mf(i))return gf(1,e,i,!o.isAtEnd(),!1);var a=o.getNode(!0);if(mf(a))return gf(1,e,a,!1,!1);var s=e.dom.getParent(o.getNode(),function(e){return mf(e)||pf(e)});return mf(s)?gf(1,e,s,!1,n):null},wf=function(e,t,n){if(!t||!t.collapsed)return t;var r=yf(e,t,n);return r||t};!function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"}(bd||(bd={}));var xf,Cf=ws.isContentEditableFalse,kf=ws.isText,Nf=ws.isElement,_f=ws.isBr,Sf=Oc,Tf=Pc,Ef=Lc,Of=function(e,t){for(var n=[];e&&e!==t;)n.push(e),e=e.parentNode;return n},Af=function(e,t){return e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null},Df=function(e,t){if(ip(e)){if(Sf(t.previousSibling)&&!kf(t.previousSibling))return yd.before(t);if(kf(t))return yd(t,0)}if(ap(e)){if(Sf(t.nextSibling)&&!kf(t.nextSibling))return yd.after(t);if(kf(t))return yd(t,t.data.length)}return ap(e)?_f(t)?yd.before(t):yd.after(t):yd.before(t)},Rf=function(e,t){var n;return!!ws.isBr(e)&&(!!(n=Mf(1,yd.after(e),t))&&!cp(yd.before(e),yd.before(n),t))},Mf=function(e,t,n){var r,o,i,a,s;if(!Nf(n)||!t)return null;if(t.isEqual(yd.after(n))&&n.lastChild){if(s=yd.after(n.lastChild),ap(e)&&Sf(n.lastChild)&&Nf(n.lastChild))return _f(n.lastChild)?yd.before(n.lastChild):s}else s=t;var l=s.container(),u=s.offset();if(kf(l)){if(ap(e)&&u>0)return yd(l,--u);if(ip(e)&&u<l.length)return yd(l,++u);r=l}else{if(ap(e)&&u>0&&(o=Af(l,u-1),Sf(o)))return!Tf(o)&&(i=lp(o,e,Ef,o))?kf(i)?yd(i,i.data.length):yd.after(i):kf(o)?yd(o,o.data.length):yd.before(o);if(ip(e)&&u<l.childNodes.length&&(o=Af(l,u),Sf(o)))return _f(o)&&n.lastChild===o?null:Rf(o,n)?Mf(e,yd.after(o),n):!Tf(o)&&(i=lp(o,e,Ef,o))?kf(i)?yd(i,0):yd.before(i):kf(o)?yd(o,0):yd.after(o);r=o||s.getNode()}return(ip(e)&&s.isAtEnd()||ap(e)&&s.isAtStart())&&(r=lp(r,e,tc.constant(!0),n,!0),Ef(r,n))?Df(e,r):(o=lp(r,e,Ef,n),a=or.last(or.filter(Of(l,n),Cf)),!a||o&&a.contains(o)?o?Df(e,o):null:s=ip(e)?yd.after(a):yd.before(a))},Pf=function(e){return{next:function(t){return Mf(bd.Forwards,t,e)},prev:function(t){return Mf(bd.Backwards,t,e)}}};!function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"}(xf||(xf={}));var Lf=function(e,t){return e===bd.Backwards?t.reverse():t},If=function(e,t,n){return e===bd.Forwards?t.next(n):t.prev(n)},jf=function(e,t,n,r){return ws.isBr(r.getNode(t===bd.Forwards))?xf.Br:!1===cp(n,r)?xf.Block:xf.Wrap},Bf=function(e,t,n,r){for(var o,i=Pf(n),a=r,s=[];a&&(o=If(t,i,a));){if(ws.isBr(o.getNode(!1)))return t===bd.Forwards?{positions:Lf(t,s).concat([o]),breakType:xf.Br,breakAt:Ee.some(o)}:{positions:Lf(t,s),breakType:xf.Br,breakAt:Ee.some(o)};if(o.isVisible()){if(e(a,o)){var l=jf(0,t,a,o);return{positions:Lf(t,s),breakType:l,breakAt:Ee.some(o)}}s.push(o),a=o}else a=o}return{positions:Lf(t,s),breakType:xf.Eol,breakAt:Ee.none()}},Ff=function(e,t,n,r){return t(n,r).breakAt.map(function(r){var o=t(n,r).positions;return e===bd.Backwards?o.concat(r):[r].concat(o)}).getOr([])},Hf=function(e,t){return Ge(e,function(e,n){return e.fold(function(){return Ee.some(n)},function(r){return Jc([st(r.getClientRects()),st(n.getClientRects())],function(e,o){var i=Math.abs(t-e.left);return Math.abs(t-o.left)<=i?n:r}).or(e)})},Ee.none())},Uf=function(e,t){return st(t.getClientRects()).bind(function(t){return Hf(e,t.left)})},zf=be(Bf,_.isAbove,-1),Wf=be(Bf,_.isBelow,1),Vf=be(Ff,-1,zf),qf=be(Ff,1,Wf),$f=function(e){return Ip.firstPositionIn(e).map(function(t){return[t].concat(Wf(e,t).positions)}).getOr([])},Kf=function(e){return Ip.lastPositionIn(e).map(function(t){return zf(e,t).positions.concat(t)}).getOr([])},Gf=function(e,t){return{left:e.left-t,top:e.top-t,right:e.right+2*t,bottom:e.bottom+2*t,width:e.width+t,height:e.height+t}},Xf=function(e,t){return et(t,function(t){var n=Gf(t.getBoundingClientRect(),-1);return[{x:n.left,y:e(n),cell:t},{x:n.right,y:e(n),cell:t}]})},Yf=function(e,t,n){return Ge(e,function(e,r){return e.fold(function(){return Ee.some(r)},function(e){var o=Math.sqrt(Math.abs(e.x-t)+Math.abs(e.y-n)),i=Math.sqrt(Math.abs(r.x-t)+Math.abs(r.y-n));return Ee.some(i<o?r:e)})},Ee.none())},Jf=function(e,t,n,r,o){var i=iu.descendants(Mo.fromDom(n),"td,th").map(function(e){return e.dom()}),a=$e(Xf(e,i),function(e){return t(e,o)});return Yf(a,r,o).map(function(e){return e.cell})},Qf=function(e){return e.bottom},Zf=function(e){return e.top},eh=function(e,t){return e.y<t},th=function(e,t){return e.y>t},nh=be(Jf,Qf,eh),rh=be(Jf,Zf,th),oh=function(e,t){return st(t.getClientRects()).bind(function(t){return nh(e,t.left,t.top)}).bind(function(e){return Uf(Kf(e),t)})},ih=function(e,t){return lt(t.getClientRects()).bind(function(t){return rh(e,t.left,t.top)}).bind(function(e){return Uf($f(e),t)})},ah=function(e){for(var t=0,n=0,r=e;r&&r.nodeType;)t+=r.offsetLeft||0,n+=r.offsetTop||0,r=r.offsetParent;return{x:t,y:n}},sh=function(e,t,n){var r={elm:t,alignToTop:n};return e.fire("scrollIntoView",r),r.isDefaultPrevented()},lh=function(e,t,n){var r,o,i,a,s=e.dom,l=s.getRoot(),u=0;if(!sh(e,t,n)&&ws.isElement(t)){if(!1===n&&(u=t.offsetHeight),"BODY"!==l.nodeName){var c=e.selection.getScrollContainer();if(c)return r=ah(t).y-ah(c).y+u,a=c.clientHeight,i=c.scrollTop,void((r<i||r+25>i+a)&&(c.scrollTop=r<i?r:r-a+25))}o=s.getViewPort(e.getWin()),r=s.getPos(t).y+u,i=o.y,a=o.h,(r<o.y||r+25>i+a)&&e.getWin().scrollTo(0,r<i?r:r-a+25)}},uh=function(e){if(e.inline)return e.getBody().getBoundingClientRect();var t=e.getWin();return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight,width:t.innerWidth,height:t.innerHeight}},ch=function(e,t,n){e.inline?(e.getBody().scrollLeft+=t,e.getBody().scrollTop+=n):e.getWin().scrollBy(t,n)},dh=function(e,t){st(_.fromRangeStart(t).getClientRects()).each(function(t){var n=uh(e),r=$c(n,t),o=r.x>0?r.x+4:r.x-4,i=r.y>0?r.y+4:r.y-4;ch(e,0!==r.x?o:0,0!==r.y?i:0)})},fh={scrollElementIntoView:lh,scrollRangeIntoView:dh},hh=function(e,t,n){var r=e.getParam(t,n);if(-1!==r.indexOf("=")){var o=e.getParam(t,"","hash");return o.hasOwnProperty(e.id)?o[e.id]:n}return r},ph=function(e){return e.getParam("iframe_attrs",{})},mh=function(e){return e.getParam("doctype","<!DOCTYPE html>")},gh=function(e){return e.getParam("document_base_url","")},vh=function(e){return hh(e,"body_id","tinymce")},bh=function(e){return hh(e,"body_class","")},yh=function(e){return e.getParam("content_security_policy","")},wh=function(e){return e.getParam("br_in_pre",!0)},xh=function(e){if(e.getParam("force_p_newlines",!1))return"p";var t=e.getParam("forced_root_block","p");return!1===t?"":t},Ch=function(e){return e.getParam("forced_root_block_attrs",{})},kh=function(e){return e.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")},Nh=function(e){return e.getParam("no_newline_selector","")},_h=function(e){return e.getParam("keep_styles",!0)},Sh=function(e){return e.getParam("end_container_on_empty_block",!1)},Th=function(e){return vr.explode(e.getParam("font_size_style_values",""))},Eh=function(e){return vr.explode(e.getParam("font_size_classes",""))},Oh={getIframeAttrs:ph,getDocType:mh,getDocumentBaseUrl:gh,getBodyId:vh,getBodyClass:bh,getContentSecurityPolicy:yh,shouldPutBrInPre:wh,getForcedRootBlock:xh,getForcedRootBlockAttrs:Ch,getBrNewLineSelector:kh,getNoNewLineSelector:Nh,shouldKeepStyles:_h,shouldEndContainerOnEmptyBlock:Sh,getFontStyleValues:Th,getFontSizeClasses:Eh},Ah=To.detect().browser,Dh=function(){return Ah.isIE()||Ah.isEdge()||Ah.isFirefox()},Rh=function(e,t){e.selection.setRng(t),fh.scrollRangeIntoView(e,t)},Mh=function(e,t,n){var r=e(t,n);return r.breakType===xf.Wrap&&0===r.positions.length?r.breakAt.map(function(n){return e(t,n).breakAt.isNone()}).getOr(!0):r.breakAt.isNone()},Ph=tc.curry(Mh,zf),Lh=tc.curry(Mh,Wf),Ih=function(e,t,n){var r=yd.fromRangeStart(t);return Ip.positionIn(!e,n).map(function(e){return e.isEqual(r)}).getOr(!1)},jh=function(e,t,n,r){var o=e.selection.getRng(),i=t?1:-1;if(Dh()&&Ih(t,o,n)){var a=gf(i,e,n,!t,!0);return Rh(e,a),!0}return!1},Bh=function(e,t,n){return oh(t,n).orThunk(function(){return st(n.getClientRects()).bind(function(n){return Hf(Vf(e,yd.before(t)),n.left)})}).getOr(yd.before(t))},Fh=function(e,t,n){return ih(t,n).orThunk(function(){return st(n.getClientRects()).bind(function(n){return Hf(qf(e,yd.after(t)),n.left)})}).getOr(yd.after(t))},Hh=function(e,t){var n=t.getNode(e);return ws.isElement(n)&&"TABLE"===n.nodeName?Ee.some(n):Ee.none()},Uh=function(e,t,n,r){var o=Oh.getForcedRootBlock(t);o?t.undoManager.transact(function(){var r=Mo.fromTag(o);ii.setAll(r,Oh.getForcedRootBlockAttrs(t)),bl.append(r,Mo.fromTag("br")),e?bl.after(Mo.fromDom(n),r):bl.before(Mo.fromDom(n),r);var i=t.dom.createRng();i.setStart(r.dom(),0),i.setEnd(r.dom(),0),Rh(t,i)}):Rh(t,r.toRange())},zh=function(e,t,n){var r=!1===t;(t?Hh(!0,n):Hh(!1,n)).fold(function(){return Rh(e,n.toRange())},function(o){return Ip.positionIn(r,e.getBody()).filter(function(e){return e.isEqual(n)}).fold(function(){return Rh(e,n.toRange())},function(r){return Uh(t,e,o,n)})})},Wh=function(e,t,n,r){var o=e.selection.getRng(),i=yd.fromRangeStart(o),a=e.getBody();if(!t&&Ph(r,i)){var s=Bh(a,n,i);return zh(e,t,s),!0}if(t&&Lh(r,i)){var s=Fh(a,n,i);return zh(e,t,s),!0}return!1},Vh=function(e,t){return function(){return Ee.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(function(n){return Ee.from(e.dom.getParent(n,"table")).map(function(n){return jh(e,t,n)})}).getOr(!1)}},qh=function(e,t){return function(){return Ee.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(function(n){return Ee.from(e.dom.getParent(n,"table")).map(function(r){return Wh(e,t,r,n)})}).getOr(!1)}},$h=ws.isContentEditableFalse,Kh=function(e){return ws.isElement(e)&&/^(TD|TH)$/i.test(e.tagName)},Gh=function(e,t,n){var r,o,i,a,s,l=Bc(t.getBoundingClientRect(),n);return"BODY"===e.tagName?(r=e.ownerDocument.documentElement,o=e.scrollLeft||r.scrollLeft,i=e.scrollTop||r.scrollTop):(s=e.getBoundingClientRect(),o=e.scrollLeft-s.left,i=e.scrollTop-s.top),l.left+=o,l.right+=o,l.top+=i,l.bottom+=i,l.width=1,a=t.offsetWidth-t.clientWidth,a>0&&(n&&(a*=-1),l.left+=a,l.right+=a),l},Xh=function(e){var t,n,r,o,i;for(t=jr("*[contentEditable=false]",e),o=0;o<t.length;o++)n=t[o],r=n.previousSibling,vc(r)&&(i=r.data,1===i.length?r.parentNode.removeChild(r):r.deleteData(i.length-1,1)),r=n.nextSibling,gc(r)&&(i=r.data,1===i.length?r.parentNode.removeChild(r):r.deleteData(0,1))},Yh=function(e,t,n){var r,o,i=Al(Ee.none()),a=function(n,r){var a,u;if(s(),Kh(r))return null;if(!t(r))return o=dc(r,n),u=r.ownerDocument.createRange(),$h(o.nextSibling)?(u.setStart(o,0),u.setEnd(o,0)):(u.setStart(o,1),u.setEnd(o,1)),u;o=mc("p",r,n),a=Gh(e,r,n),jr(o).css("top",a.top);var c=jr('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(a).appendTo(e)[0];return i.set(Ee.some({caret:c,element:r,before:n})),i.get().each(function(e){n&&jr(e.caret).addClass("mce-visual-caret-before")}),l(),u=r.ownerDocument.createRange(),u.setStart(o,0),u.setEnd(o,0),u},s=function(){Xh(e),o&&(hf.remove(o),o=null),i.get().each(function(e){jr(e.caret).remove(),i.set(Ee.none())}),clearInterval(r)},l=function(){r=Mt.setInterval(function(){n()?jr("div.mce-visual-caret",e).toggleClass("mce-visual-caret-hidden"):jr("div.mce-visual-caret",e).addClass("mce-visual-caret-hidden")},500)},u=function(){i.get().each(function(t){var n=Gh(e,t.element,t.before);jr(t.caret).css(n)})},c=function(){return Mt.clearInterval(r)};return{show:a,hide:s,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},reposition:u,destroy:c}},Jh=function(e){return $h(e)||ws.isTable(e)&&Dh()},Qh=ws.isContentEditableFalse,Zh=ws.matchStyleValues("display","block table table-cell table-caption list-item"),ep=uc,tp=sc,np=tc.curry,rp=ws.isElement,op=Oc,ip=function(e){return e>0},ap=function(e){return e<0},sp=function(e,t){for(var n;n=e(t);)if(!tp(n))return n;return null},lp=function(e,t,n,r,o){var i=new b(e,r);if(ap(t)){if((Qh(e)||tp(e))&&(e=sp(i.prev,!0),n(e)))return e;for(;e=sp(i.prev,o);)if(n(e))return e}if(ip(t)){if((Qh(e)||tp(e))&&(e=sp(i.next,!0),n(e)))return e;for(;e=sp(i.next,o);)if(n(e))return e}return null},up=function(e,t){for(;e&&e!==t;){if(Zh(e))return e;e=e.parentNode}return null},cp=function(e,t,n){return up(e.container(),n)===up(t.container(),n)},dp=function(e,t){var n,r;return t?(n=t.container(),r=t.offset(),rp(n)?n.childNodes[r+e]:null):null},fp=function(e,t){var n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},hp=function(e,t,n){return up(t,e)===up(n,e)},pp=function(e,t,n){var r,o;for(o=e?"previousSibling":"nextSibling";n&&n!==t;){if(r=n[o],ep(r)&&(r=r[o]),Qh(r)){if(hp(t,r,n))return r;break}if(op(r))break;n=n.parentNode}return null},mp=np(fp,!0),gp=np(fp,!1),vp=function(e,t,n){var r,o,i,a,s=np(pp,!0,t),l=np(pp,!1,t);if(o=n.startContainer,i=n.startOffset,sc(o)){if(rp(o)||(o=o.parentNode),"before"===(a=o.getAttribute("data-mce-caret"))&&(r=o.nextSibling,Jh(r)))return mp(r);if("after"===a&&(r=o.previousSibling,Jh(r)))return gp(r)}if(!n.collapsed)return n;if(ws.isText(o)){if(ep(o)){if(1===e){if(r=l(o))return mp(r);if(r=s(o))return gp(r)}if(-1===e){if(r=s(o))return gp(r);if(r=l(o))return mp(r)}return n}if(vc(o)&&i>=o.data.length-1)return 1===e&&(r=l(o))?mp(r):n;if(gc(o)&&i<=1)return-1===e&&(r=s(o))?gp(r):n;if(i===o.data.length)return r=l(o),r?mp(r):n;if(0===i)return r=s(o),r?gp(r):n}return n},bp=function(e,t){var n=dp(e,t);return Qh(n)&&!ws.isBogusAll(n)},yp=function(e,t){return ws.isTable(dp(e,t))},wp=function(e,t){return Ee.from(dp(e?0:-1,t)).filter(Qh)},xp=function(e,t,n){var r=vp(e,t,n);return-1===e?_.fromRangeStart(r):_.fromRangeEnd(r)},Cp=np(bp,0),kp=np(bp,-1),Np=np(yp,0),_p=np(yp,-1),Sp=function(e,t,n){var r=e?yd.before(n):yd.after(n);return Mp(e,t,r)},Tp=function(e){return ws.isBr(e)?yd.before(e):yd.after(e)},Ep=function(e){return yd.isTextPosition(e)?0===e.offset():Oc(e.getNode())},Op=function(e){if(yd.isTextPosition(e)){var t=e.container();return e.offset()===t.data.length}return Oc(e.getNode(!0))},Ap=function(e,t){return!yd.isTextPosition(e)&&!yd.isTextPosition(t)&&e.getNode()===t.getNode(!0)},Dp=function(e){return!yd.isTextPosition(e)&&ws.isBr(e.getNode())},Rp=function(e,t,n){return e?!Ap(t,n)&&!Dp(t)&&Op(t)&&Ep(n):!Ap(n,t)&&Ep(t)&&Op(n)},Mp=function(e,t,n){var r=Pf(t);return Ee.from(e?r.next(n):r.prev(n))},Pp=function(e,t,n){return Mp(e,t,n).bind(function(r){return cp(n,r,t)&&Rp(e,n,r)?Mp(e,t,r):Ee.some(r)})},Lp=function(e,t){var n=e?t.firstChild:t.lastChild;return ws.isText(n)?Ee.some(yd(n,e?0:n.data.length)):n?Oc(n)?Ee.some(e?yd.before(n):Tp(n)):Sp(e,t,n):Ee.none()},Ip={fromPosition:Mp,nextPosition:be(Mp,!0),prevPosition:be(Mp,!1),navigate:Pp,positionIn:Lp,firstPositionIn:be(Lp,!0),lastPositionIn:be(Lp,!1)},jp=function(e){return"string"==typeof e.start},Bp=function(e){return e.hasOwnProperty("rng")},Fp=function(e){return e.hasOwnProperty("id")},Hp=function(e){return e.hasOwnProperty("name")},Up=function(e){return vr.isArray(e.start)},zp=function(e,t){return!e.isBlock(t)||t.innerHTML||_t.ie||(t.innerHTML='<br data-mce-bogus="1" />'),t},Wp=function(e,t){var n,r;return n=e.createRng(),r=Md(e.getRoot(),t.start),n.setStart(r.container(),r.offset()),r=Md(e.getRoot(),t.end),n.setEnd(r.container(),r.offset()),n},Vp=function(e,t){var n=e.ownerDocument.createTextNode(oc.ZWSP);e.appendChild(n),t.setStart(n,0),t.setEnd(n,0)},qp=function(e){return!1===e.hasChildNodes()},$p=function(e,t){return Ip.lastPositionIn(e).fold(function(){return!1},function(e){return t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0})},Kp=function(e,t,n){return!(!qp(t)||!Qd(e,t))&&(Vp(t,n),!0)},Gp=function(e,t,n,r){var o,i,a,s,l=n[t?"start":"end"],u=e.getRoot();if(l){for(a=l[0],i=u,o=l.length-1;o>=1;o--){if(s=i.childNodes,Kp(u,i,r))return!0;if(l[o]>s.length-1)return!!Kp(u,i,r)||$p(i,r);i=s[l[o]]}3===i.nodeType&&(a=Math.min(l[0],i.nodeValue.length)),1===i.nodeType&&(a=Math.min(l[0],i.childNodes.length)),t?r.setStart(i,a):r.setEnd(i,a)}return!0},Xp=function(e){return ws.isText(e)&&e.data.length>0},Yp=function(e,t,n){var r,o,i,a,s,l,u=e.get(n.id+"_"+t),c=n.keep;if(u){if(r=u.parentNode,"start"===t?(c?u.hasChildNodes()?(r=u.firstChild,o=1):Xp(u.nextSibling)?(r=u.nextSibling,o=0):Xp(u.previousSibling)?(r=u.previousSibling,o=u.previousSibling.data.length):(r=u.parentNode,o=e.nodeIndex(u)+1):o=e.nodeIndex(u),s=r,l=o):(c?u.hasChildNodes()?(r=u.firstChild,o=1):Xp(u.previousSibling)?(r=u.previousSibling,o=u.previousSibling.data.length):(r=u.parentNode,o=e.nodeIndex(u)):o=e.nodeIndex(u),s=r,l=o),!c){for(a=u.previousSibling,i=u.nextSibling,vr.each(vr.grep(u.childNodes),function(e){ws.isText(e)&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});u=e.get(n.id+"_"+t);)e.remove(u,!0);a&&i&&a.nodeType===i.nodeType&&ws.isText(a)&&!_t.opera&&(o=a.nodeValue.length,a.appendData(i.nodeValue),e.remove(i),s=a,l=o)}return Ee.some(yd(s,l))}return Ee.none()},Jp=function(e,t){return e.isSome()?e:t},Qp=function(e,t){var n=e.createRng();return Gp(e,!0,t,n)&&Gp(e,!1,t,n)?Ee.some(n):Ee.none()},Zp=function(e,t){var n=Yp(e,"start",t),r=Yp(e,"end",t);return Jc([n,Jp(r,n)],function(t,n){var r=e.createRng();return r.setStart(zp(e,t.container()),t.offset()),r.setEnd(zp(e,n.container()),n.offset()),r})},em=function(e,t){return Ee.from(e.select(t.name)[t.index]).map(function(t){var n=e.createRng();return n.selectNode(t),n})},tm=function(e,t){var n=e.dom;if(t){if(Up(t))return Qp(n,t);if(jp(t))return Ee.some(Wp(n,t));if(Fp(t))return Zp(n,t);if(Hp(t))return em(n,t);if(Bp(t))return Ee.some(t.rng)}return Ee.none()},nm={resolve:tm},rm=function(e,t,n){return Yd.getBookmark(e,t,n)},om=function(e,t){nm.resolve(e,t).each(function(t){e.setRng(t)})},im=function(e){return ws.isElement(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},am={getBookmark:rm,moveToBookmark:om,isBookmarkNode:im},sm=function(e){return e&&/^(IMG)$/.test(e.nodeName)},lm=function(e,t,n){var r,o,i,a=n.startOffset,s=n.startContainer;if((n.startContainer!==n.endContainer||!sm(n.startContainer.childNodes[n.startOffset]))&&1===s.nodeType)for(i=s.childNodes,a<i.length?(s=i[a],r=new b(s,e.getParent(s,e.isBlock))):(s=i[i.length-1],r=new b(s,e.getParent(s,e.isBlock)),r.next(!0)),o=r.current();o;o=r.next())if(3===o.nodeType&&!fm(o))return n.setStart(o,0),void t.setRng(n)},um=function(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1===e.nodeType||!fm(e))return e},cm=function(e,t){return t.nodeType&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]},dm=function(e,t,n){return e.schema.isValidChild(t,n)},fm=function(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)},hm=function(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e},pm=function(e,t){return e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()},mm=function(e,t,n){return"color"!==n&&"backgroundColor"!==n||(t=e.toHex(t)),"fontWeight"===n&&700===t&&(t="bold"),"fontFamily"===n&&(t=t.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+t},gm=function(e,t,n){return mm(e,e.getStyle(t,n),n)},vm=function(e,t){var n;return e.getParent(t,function(t){return(n=e.getStyle(t,"text-decoration"))&&"none"!==n}),n},bm=function(e,t,n){return e.getParents(t,n,e.getRoot())},ym={isInlineBlock:sm,moveStart:lm,getNonWhiteSpaceSibling:um,isTextBlock:cm,isValid:dm,isWhiteSpaceNode:fm,replaceVars:hm,isEq:pm,normalizeStyleValue:mm,getStyle:gm,getTextDecoration:vm,getParents:bm},wm=am.isBookmarkNode,xm=ym.getParents,Cm=ym.isWhiteSpaceNode,km=ym.isTextBlock,Nm=function(e,t){for(void 0===t&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)(e=e.childNodes[t])&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}},_m=function(e,t){var n=Nm(e,t);if(n.node){for(;n.node&&0===n.offset&&n.node.previousSibling;)n=Nm(n.node.previousSibling);n.node&&n.offset>0&&3===n.node.nodeType&&" "===n.node.nodeValue.charAt(n.offset-1)&&n.offset>1&&(e=n.node,e.splitText(n.offset-1))}return e},Sm=function(e){return"BR"===e.nodeName&&e.getAttribute("data-mce-bogus")&&!e.nextSibling},Tm=function(e,t){for(var n=t;n;){if(1===n.nodeType&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},Em=function(e,t,n,r){var o,i,a=n.nodeValue;return void 0===r&&(r=e?a.length:0),e?(o=a.lastIndexOf(" ",r),i=a.lastIndexOf("\xa0",r),-1===(o=o>i?o:i)||t||o++):(o=a.indexOf(" ",r),i=a.indexOf("\xa0",r),o=-1!==o&&(-1===i||o<i)?o:i),o},Om=function(e,t,n,r,o,i){var a,s,l,u;if(3===n.nodeType){if(-1!==(l=Em(o,i,n,r)))return{container:n,offset:l};u=n}for(a=new b(n,e.getParent(n,e.isBlock)||t);s=a[o?"prev":"next"]();)if(3===s.nodeType){if(u=s,-1!==(l=Em(o,i,s)))return{container:s,offset:l}}else if(e.isBlock(s))break;if(u)return r=o?0:u.length,{container:u,offset:r}},Am=function(e,t,n,r,o){var i,a,s,l;for(3===r.nodeType&&0===r.nodeValue.length&&r[o]&&(r=r[o]),i=xm(e,r),a=0;a<i.length;a++)for(s=0;s<t.length;s++)if(!("collapsed"in(l=t[s])&&l.collapsed!==n.collapsed)&&e.is(i[a],l.selector))return i[a];return r},Dm=function(e,t,n,r){var o,i=e.dom,a=i.getRoot();if(t[0].wrapper||(o=i.getParent(n,t[0].block,a)),!o){var s=i.getParent(n,"LI,TD,TH");o=i.getParent(3===n.nodeType?n.parentNode:n,function(t){return t!==a&&km(e,t)},s)}if(o&&t[0].wrapper&&(o=xm(i,o,"ul,ol").reverse()[0]||o),!o)for(o=n;o[r]&&!i.isBlock(o[r])&&(o=o[r],!ym.isEq(o,"br")););return o||n},Rm=function(e,t,n,r,o,i,a){var s,l,u,c,d;if(s=l=a?n:o,c=a?"previousSibling":"nextSibling",d=e.getRoot(),3===s.nodeType&&!Cm(s)&&(a?r>0:i<s.nodeValue.length))return s;for(;;){if(!t[0].block_expand&&e.isBlock(l))return l;for(u=l[c];u;u=u[c])if(!wm(u)&&!Cm(u)&&!Sm(u))return l;if(l===d||l.parentNode===d){s=l;break}l=l.parentNode}return s},Mm=function(e,t,n,r){var o,i=t.startContainer,a=t.startOffset,s=t.endContainer,l=t.endOffset,u=e.dom;return 1===i.nodeType&&i.hasChildNodes()&&(i=Gc(i,a),3===i.nodeType&&(a=0)),1===s.nodeType&&s.hasChildNodes()&&(s=Gc(s,t.collapsed?l:l-1),3===s.nodeType&&(l=s.nodeValue.length)),i=Tm(u,i),s=Tm(u,s),(wm(i.parentNode)||wm(i))&&(i=wm(i)?i:i.parentNode,i=i.nextSibling||i,3===i.nodeType&&(a=0)),(wm(s.parentNode)||wm(s))&&(s=wm(s)?s:s.parentNode,s=s.previousSibling||s,3===s.nodeType&&(l=s.length)),n[0].inline&&(t.collapsed&&(o=Om(u,e.getBody(),i,a,!0,r),o&&(i=o.container,a=o.offset),(o=Om(u,e.getBody(),s,l,!1,r))&&(s=o.container,l=o.offset)),s=r?s:_m(s,l)),(n[0].inline||n[0].block_expand)&&(n[0].inline&&3===i.nodeType&&0!==a||(i=Rm(u,n,i,a,s,l,!0)),n[0].inline&&3===s.nodeType&&l!==s.nodeValue.length||(s=Rm(u,n,i,a,s,l,!1))),n[0].selector&&!1!==n[0].expand&&!n[0].inline&&(i=Am(u,n,t,i,"previousSibling"),s=Am(u,n,t,s,"nextSibling")),(n[0].block||n[0].selector)&&(i=Dm(e,n,i,"previousSibling"),s=Dm(e,n,s,"nextSibling"),n[0].block&&(u.isBlock(i)||(i=Rm(u,n,i,a,s,l,!0)),u.isBlock(s)||(s=Rm(u,n,i,a,s,l,!1)))),1===i.nodeType&&(a=u.nodeIndex(i),i=i.parentNode),1===s.nodeType&&(l=u.nodeIndex(s)+1,s=s.parentNode),{startContainer:i,startOffset:a,endContainer:s,endOffset:l}},Pm={expandRng:Mm},Lm=vr.each,Im=function(e,t){var n=e.childNodes;return t--,t>n.length-1?t=n.length-1:t<0&&(t=0),n[t]||e},jm=function(e,t,n){var r,o,i,a,s,l,u,c=t.startContainer,d=t.startOffset,f=t.endContainer,h=t.endOffset;if(u=e.select("td[data-mce-selected],th[data-mce-selected]"),u.length>0)return void Lm(u,function(e){n([e])});var p=function(e){var t;return t=e[0],3===t.nodeType&&t===c&&d>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===h&&e.length>0&&t===f&&3===t.nodeType&&e.splice(e.length-1,1),e},m=function(e,t,n){for(var r=[];e&&e!==n;e=e[t])r.push(e);return r},g=function(e,t){do{if(e.parentNode===t)return e;e=e.parentNode}while(e)},v=function(e,t,r){var o=r?"nextSibling":"previousSibling";for(a=e,s=a.parentNode;a&&a!==t;a=s)s=a.parentNode,l=m(a===e?a:a[o],o),l.length&&(r||l.reverse(),n(p(l)))};if(1===c.nodeType&&c.hasChildNodes()&&(c=c.childNodes[d]),1===f.nodeType&&f.hasChildNodes()&&(f=Im(f,h)),c===f)return n(p([c]));for(r=e.findCommonAncestor(c,f),a=c;a;a=a.parentNode){if(a===f)return v(c,r,!0);if(a===r)break}for(a=f;a;a=a.parentNode){if(a===c)return v(f,r);if(a===r)break}o=g(c,r)||c,i=g(f,r)||f,v(c,o,!0),l=m(o===c?o:o.nextSibling,"nextSibling",i===f?i.nextSibling:i),l.length&&n(p(l)),v(f,i)},Bm={walk:jm},Fm=function(e,t){var n=function(n){if(!e(n))throw new Error("Can only get "+t+" value of a "+t+" node");return a(n).getOr("")},r=function(e){try{return o(e)}catch(e){return Ee.none()}},o=function(t){return e(t)?Ee.from(t.dom().nodeValue):Ee.none()},i=To.detect().browser,a=i.isIE()&&10===i.version.major?r:o;return{get:n,getOption:a,set:function(n,r){if(!e(n))throw new Error("Can only set raw "+t+" value of a "+t+" node");n.dom().nodeValue=r}}}(Wo.isText,"text"),Hm=function(e){return Fm.get(e)},Um=function(e){return Fm.getOption(e)},zm=function(e,t){Fm.set(e,t)},Wm={get:Hm,getOption:Um,set:zm},Vm=function(e){return Wo.isText(e)&&"\ufeff"===Wm.get(e)},qm=function(e,t,n,r){return ba.parent(t).fold(function(){return"skipping"},function(o){return"br"===r||Vm(t)?"skipping":Nu(t)?"existing":Jd(t)?"caret":ym.isValid(e,n,r)&&ym.isValid(e,Wo.name(o),n)?"valid":"invalid-child"})},$m=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]]);return n},Km=function(e,t){var n=Pm.expandRng(e,t,[{inline:!0}],!1);t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)},Gm=function(e,t,n,r,o){var i=o.uid,a=void 0===i?Du("mce-annotation"):i,s=$m(o,["uid"]),l=[],u=Mo.fromTag("span");Kl.add(u,wu()),ii.set(u,""+Cu(),a),ii.set(u,""+xu(),n);var c=r(a,s),d=c.attributes,f=void 0===d?{}:d,h=c.classes,p=void 0===h?[]:h;ii.setAll(u,f),Fu.add(u,p);var m=Al(Ee.none()),g=function(){m.set(Ee.none())},v=function(){return m.get().getOrThunk(function(){var e=$u.shallow(u);return l.push(e),m.set(Ee.some(e)),e})},b=function(e){We(e,y)},y=function(t){switch(qm(e,t,"span",Wo.name(t))){case"invalid-child":g();var n=ba.children(t);b(n),g();break;case"valid":var r=v();bl.wrap(t,r)}},w=function(e){var t=ze(e,Mo.fromDom);b(t)};return Bm.walk(e.dom,t,function(e){g(),w(e)}),l},Xm=function(e,t,n,r){e.undoManager.transact(function(){var o=e.selection.getRng();o.collapsed&&Km(e,o);var i=Yd.getPersistentBookmark(e.selection,!0),a=e.selection.getRng();Gm(e,a,t,n.decorate,r),e.selection.moveToBookmark(i)})},Ym=function(e){return e.firstChild&&e.firstChild===e.lastChild},Jm=function(e){return"br"===e.name||"\xa0"===e.value},Qm=function(e,t){return e.getBlockElements()[t.name]&&Ym(t)&&Jm(t.firstChild)},Zm=function(e,t){var n=e.getNonEmptyElements();return t&&(t.isEmpty(n)||Qm(e,t))},eg=function(e,t){var n=t.firstChild,r=t.lastChild;return n&&"meta"===n.name&&(n=n.next),r&&"mce_marker"===r.attr("id")&&(r=r.prev),Zm(e,r)&&(r=r.prev),!(!n||n!==r)&&("ul"===n.name||"ol"===n.name)},tg=function(e){var t=e.firstChild,n=e.lastChild;return t&&"META"===t.nodeName&&t.parentNode.removeChild(t),n&&"mce_marker"===n.id&&n.parentNode.removeChild(n),e},ng=function(e,t,n){var r=t.serialize(n),o=e.createFragment(r);return tg(o)},rg=function(e){return vr.grep(e.childNodes,function(e){return"LI"===e.nodeName})},og=function(e){return"\xa0"===e.data||ws.isBr(e)},ig=function(e){return e&&e.firstChild&&e.firstChild===e.lastChild&&og(e.firstChild)},ag=function(e){return!e.firstChild||ig(e)},sg=function(e){return e.length>0&&ag(e[e.length-1])?e.slice(0,-1):e},lg=function(e,t){var n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},ug=function(e,t){return!!lg(e,t)},cg=function(e,t){var n=t.cloneRange(),r=t.cloneRange();return n.setStartBefore(e),r.setEndAfter(e),[n.cloneContents(),r.cloneContents()]},dg=function(e,t){var n=yd.before(e),r=Pf(t),o=r.next(n);return o?o.toRange():null},fg=function(e,t){var n=yd.after(e),r=Pf(t),o=r.prev(n);return o?o.toRange():null},hg=function(e,t,n,r){var o=cg(e,r),i=e.parentNode;return i.insertBefore(o[0],e),vr.each(t,function(t){i.insertBefore(t,e)}),i.insertBefore(o[1],e),i.removeChild(e),fg(t[t.length-1],n)},pg=function(e,t,n){var r=e.parentNode;return vr.each(t,function(t){r.insertBefore(t,e)}),dg(e,n)},mg=function(e,t,n,r){return r.insertAfter(t.reverse(),e),fg(t[0],n)},gg=function(e,t,n,r){var o=ng(t,e,r),i=lg(t,n.startContainer),a=sg(rg(o.firstChild)),s=t.getRoot(),l=function(e){var r=yd.fromRangeStart(n),o=Pf(t.getRoot()),a=1===e?o.prev(r):o.next(r);return!a||lg(t,a.getNode())!==i};return l(1)?pg(i,a,s):l(2)?mg(i,a,s,t):hg(i,a,s,n)},vg={isListFragment:eg,insertAtCaret:gg,isParentBlockLi:ug,trimListItems:sg,listItems:rg},bg=vr.each,yg=function(e){this.compare=function(t,n){if(t.nodeName!==n.nodeName)return!1;var r=function(t){var n={};return bg(e.getAttribs(t),function(r){var o=r.nodeName.toLowerCase();0!==o.indexOf("_")&&"style"!==o&&0!==o.indexOf("data-")&&(n[o]=e.getAttrib(t,o))}),n},o=function(e,t){var n,r;for(r in e)if(e.hasOwnProperty(r)){if(void 0===(n=t[r]))return!1;if(e[r]!==n)return!1;delete t[r]}for(r in t)if(t.hasOwnProperty(r))return!1;return!0};return!!o(r(t),r(n))&&(!!o(e.parseStyle(e.getAttrib(t,"style")),e.parseStyle(e.getAttrib(n,"style")))&&(!am.isBookmarkNode(t)&&!am.isBookmarkNode(n)))}},wg=function(e){for(var t=[],n=e.dom();n;)t.push(Mo.fromDom(n)),n=n.lastChild;return t},xg=function(e){var t=iu.descendants(e,"br"),n=$e(wg(e).slice(-1),Xa);t.length===n.length&&We(n,Tl.remove)},Cg=function(e){Tl.empty(e),bl.append(e,Mo.fromHtml('<br data-mce-bogus="1">'))},kg=function(e){return Wo.isText(e)?"\xa0"===Wm.get(e):Xa(e)},Ng=function(e){return 1===$e(ba.children(e),kg).length},_g=function(e){ba.lastChild(e).each(function(t){ba.prevSibling(t).each(function(n){Ka(e)&&Xa(t)&&Ka(n)&&Tl.remove(t)})})},Sg={removeTrailingBr:xg,fillWithPaddingBr:Cg,isPaddedElement:Ng,trimBlockTrailingBr:_g},Tg=vr.makeMap,Eg=function(e,t,n,r){var o=document.createRange();return o.setStart(e,t),o.setEnd(n,r),o},Og=function(e){var t=yd.fromRangeStart(e),n=yd.fromRangeEnd(e),r=e.commonAncestorContainer;return Ip.fromPosition(!1,r,n).map(function(o){return!cp(t,n,r)&&cp(t,o,r)?Eg(t.container(),t.offset(),o.container(),o.offset()):e}).getOr(e)},Ag=function(e){return e.collapsed?e:Og(e)},Dg={normalize:Ag},Rg=ws.matchNodeNames("td th"),Mg=function(e,t,n){if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(e.dom.createFragment(t),n);else{var r=n.firstChild,o=n.lastChild;!r||r===o&&"BR"===r.nodeName?e.dom.setHTML(n,t):e.selection.setContent(t)}},Pg=function(e,t){Ee.from(e.getParent(t,"td,th")).map(Mo.fromDom).each(Sg.trimBlockTrailingBr)},Lg=function(e,t,n){var r,o,i,a,s,l,u,c,d,f,h,p,m=e.schema.getTextInlineElements(),g=e.selection,v=e.dom,b=function(e){return!!e.getAttribute("data-mce-fragment")};if(/^ | $/.test(t)&&(t=function(e){var t,n,r;t=g.getRng(),n=t.startContainer,r=t.startOffset;var o=function(e){return n[e]&&3===n[e].nodeType};return 3===n.nodeType&&(r>0?e=e.replace(/^&nbsp;/," "):o("previousSibling")||(e=e.replace(/^ /,"&nbsp;")),r<n.length?e=e.replace(/&nbsp;(<br>|)$/," "):o("nextSibling")||(e=e.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),e}(t)),r=e.parser,p=n.merge,o=E({validate:e.settings.validate},e.schema),h='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',l={content:t,format:"html",selection:!0,paste:n.paste},l=e.fire("BeforeSetContent",l),l.isDefaultPrevented())return void e.fire("SetContent",{content:l.content,format:"html",selection:!0,paste:n.paste});t=l.content,-1===t.indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,h),c=g.getRng();var y=c.startContainer||(c.parentElement?c.parentElement():null),w=e.getBody();y===w&&g.isCollapsed()&&v.isBlock(w.firstChild)&&function(t){return t&&!e.schema.getShortEndedElements()[t.nodeName]}(w.firstChild)&&v.isEmpty(w.firstChild)&&(c=v.createRng(),c.setStart(w.firstChild,0),c.setEnd(w.firstChild,0),g.setRng(c)),g.isCollapsed()||(e.selection.setRng(Dg.normalize(e.selection.getRng())),e.getDoc().execCommand("Delete",!1,null),function(){var e,n,r;e=g.getRng(),n=e.startContainer,r=e.startOffset,3===n.nodeType&&e.collapsed&&("\xa0"===n.data[r]?(n.deleteData(r,1),/[\u00a0| ]$/.test(t)||(t+=" ")):"\xa0"===n.data[r-1]&&(n.deleteData(r-1,1),/[\u00a0| ]$/.test(t)||(t=" "+t)))}()),i=g.getNode();var x={context:i.nodeName.toLowerCase(),data:n.data,insert:!0};if(s=r.parse(t,x),!0===n.paste&&vg.isListFragment(e.schema,s)&&vg.isParentBlockLi(v,i))return c=vg.insertAtCaret(o,v,e.selection.getRng(),s),e.selection.setRng(c),void e.fire("SetContent",l);if(function(e){for(var t=e;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")}(s),d=s.lastChild,"mce_marker"===d.attr("id"))for(u=d,d=d.prev;d;d=d.walk(!0))if(3===d.type||!v.isBlock(d.name)){e.schema.isValidChild(d.parent.name,"span")&&d.parent.insert(u,d,"br"===d.name);break}if(e._selectionOverrides.showBlockCaretContainer(i),x.invalid){for(g.setContent(h),i=g.getNode(),a=e.getBody(),9===i.nodeType?i=d=a:d=i;d!==a;)i=d,d=d.parentNode;t=i===a?a.innerHTML:v.getOuterHTML(i),t=o.serialize(r.parse(t.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return o.serialize(s)}))),i===a?v.setHTML(a,t):v.setOuterHTML(i,t)}else t=o.serialize(s),Mg(e,t,i);!function(){if(p){var t=e.getBody(),n=new yg(v);vr.each(v.select("*[data-mce-fragment]"),function(e){for(var r=e.parentNode;r&&r!==t;r=r.parentNode)m[e.nodeName.toLowerCase()]&&n.compare(r,e)&&v.remove(e,!0)})}}(),function(t){var n,r,o;if(t){if(g.scrollIntoView(t),n=function(t){for(var n=e.getBody();t&&t!==n;t=t.parentNode)if("false"===e.dom.getContentEditable(t))return t;return null}(t))return v.remove(t),void g.select(n);c=v.createRng(),d=t.previousSibling,d&&3===d.nodeType?(c.setStart(d,d.nodeValue.length),_t.ie||(f=t.nextSibling)&&3===f.nodeType&&(d.appendData(f.data),f.parentNode.removeChild(f))):(c.setStartBefore(t),c.setEndBefore(t));r=v.getParent(t,v.isBlock),v.remove(t),r&&v.isEmpty(r)&&(e.$(r).empty(),c.setStart(r,0),c.setEnd(r,0),Rg(r)||b(r)||!(o=function(t){var n=yd.fromRangeStart(t);if(n=Pf(e.getBody()).next(n))return n.toRange()}(c))?v.add(r,v.create("br",{"data-mce-bogus":"1"})):(c=o,v.remove(r))),g.setRng(c)}}(v.get("mce_marker")),function(e){vr.each(e.getElementsByTagName("*"),function(e){e.removeAttribute("data-mce-fragment")})}(e.getBody()),Pg(e.dom,e.selection.getStart()),e.fire("SetContent",l),e.addVisual()},Ig=function(e){var t;return"string"!=typeof e?(t=vr.extend({paste:e.paste,data:{paste:e.paste}},e),{content:e.content,details:t}):{content:e,details:{}}},jg=function(e,t){var n=Ig(t);Lg(e,n.content,n.details)},Bg={insertAtCaret:jg},Fg=Oi("sections","settings"),Hg=To.detect(),Ug=Hg.deviceType.isTouch(),zg=["lists","autolink","autosave"],Wg={theme:"mobile"},Vg=function(e){var t=Me(e)?e.join(" "):e,n=ze(De(t)?t.split(" "):[],bo);return $e(n,function(e){return e.length>0})},qg=function(e){return $e(e,be(He,zg))},$g=function(e,t){var n=Go(t,function(t,n){return He(e,n)});return Fg(n.t,n.f)},Kg=function(e,t,n){var r=e.sections(),o=r.hasOwnProperty(t)?r[t]:{};return vr.extend({},n,o)},Gg=function(e,t){return e.sections().hasOwnProperty(t)},Xg=function(e,t,n){return{id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:t,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:n.convertURL,url_converter_scope:n,ie7_compat:!0}},Yg=function(e,t){var n=t.external_plugins?t.external_plugins:{};return e&&e.external_plugins?vr.extend({},e.external_plugins,n):n},Jg=function(e,t){return[].concat(Vg(e)).concat(Vg(t))},Qg=function(e,t,n,r){var o=Vg(n.forced_plugins),i=Vg(r.plugins),a=e&&Gg(t,"mobile")?qg(i):i,s=Jg(o,a);return vr.extend(r,{plugins:s.join(" ")})},Zg=function(e,t){var n=t.settings().inline;return e&&Gg(t,"mobile")&&!n},ev=function(e,t,n,r){var o=$g(["mobile"],r),i=vr.extend(t,n,o.settings(),Zg(e,o)?Kg(o,"mobile",Wg):{},{validate:!0,content_editable:o.settings().inline,external_plugins:Yg(n,o.settings())});return Qg(e,o,n,i)},tv=function(e,t,n,r,o){var i=Xg(t,n,e);return ev(Ug,i,r,o)},nv=function(e,t,n){return Ee.from(t.settings[n]).filter(e)},rv=be(nv,De),ov=function(e){var t={};return"string"==typeof e?We(e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(","),function(e){var n=e.split("=");n.length>1?t[vr.trim(n[0])]=vr.trim(n[1]):t[vr.trim(n[0])]=vr.trim(n)}):t=e,t},iv=function(e){return function(t){return Me(t)&&tt(t,e)}},av=function(e,t,n,r){var o=t in e.settings?e.settings[t]:n;return"hash"===r?ov(o):"string"===r?nv(De,e,t).getOr(n):"number"===r?nv(je,e,t).getOr(n):"boolean"===r?nv(Le,e,t).getOr(n):"object"===r?nv(Re,e,t).getOr(n):"array"===r?nv(Me,e,t).getOr(n):"string[]"===r?nv(iv(De),e,t).getOr(n):"function"===r?nv(Ie,e,t).getOr(n):o},sv=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,lv=function(e){return sv.test(e)},uv=function(e,t){var n=rv(e,"inline_boundaries_selector").getOr("a[href],code");return Wi.is(Mo.fromDom(t),n)},cv=function(e){return"rtl"===il.DOM.getStyle(e,"direction",!0)||lv(e.textContent)},dv=function(e,t,n){return $e(il.DOM.getParents(n.container(),"*",t),e)},fv=function(e,t,n){var r=dv(e,t,n);return Ee.from(r[r.length-1])},hv=function(e,t,n){var r=up(t,e),o=up(n,e);return r&&r===o},pv=function(e){return fc(e)||hc(e)},mv=function(e,t){var n=t.container(),r=t.offset();return e?lc(n)?ws.isText(n.nextSibling)?yd(n.nextSibling,0):yd.after(n):fc(t)?yd(n,r+1):t:lc(n)?ws.isText(n.previousSibling)?yd(n.previousSibling,n.previousSibling.data.length):yd.before(n):hc(t)?yd(n,r-1):t},gv=be(mv,!0),vv=be(mv,!1),bv={isInlineTarget:uv,findRootInline:fv,isRtl:cv,isAtZwsp:pv,normalizePosition:mv,normalizeForwards:gv,normalizeBackwards:vv,hasSameParentBlock:hv},yv=function(e){return function(t){return Ji.eq(e,Mo.fromDom(t.dom().parentNode))}},wv=function(e,t){return Ji.contains(e,t)?fu.closest(t,function(e){return Ya(e)||Qa(e)},yv(e)):Ee.none()},xv=function(e){var t=e.getBody(),n=t.firstChild&&e.dom.isBlock(t.firstChild)?t.firstChild:t;e.selection.setCursorLocation(n,0)},Cv=function(e){e.dom.isEmpty(e.getBody())&&(e.setContent(""),xv(e))},kv=function(e,t,n){return Jc([Ip.firstPositionIn(n),Ip.lastPositionIn(n)],function(r,o){var i=bv.normalizePosition(!0,r),a=bv.normalizePosition(!1,o),s=bv.normalizePosition(!1,t);return e?Ip.nextPosition(n,s).map(function(e){return e.isEqual(a)&&t.isEqual(i)}).getOr(!1):Ip.prevPosition(n,s).map(function(e){return e.isEqual(i)&&t.isEqual(a)}).getOr(!1)}).getOr(!0)},Nv={getParentBlock:wv,paddEmptyBody:Cv,willDeleteLastPositionInElement:kv},_v=function(e){return yu.first(e).isSome()},Sv=function(e,t,n){return yu.ancestor(e,t,n).isSome()},Tv=function(e,t){return yu.sibling(e,t).isSome()},Ev=function(e,t){return yu.child(e,t).isSome()},Ov=function(e,t){return yu.descendant(e,t).isSome()},Av=function(e,t,n){return yu.closest(e,t,n).isSome()},Dv={any:_v,ancestor:Sv,sibling:Tv,child:Ev,descendant:Ov,closest:Av},Rv=function(e,t){var n=Mo.fromDom(e),r=Mo.fromDom(t);return Dv.ancestor(r,"pre,code",be(Ji.eq,n))},Mv=function(e,t){return ws.isText(t)&&/^[ \t\r\n]*$/.test(t.data)&&!1===Rv(e,t)},Pv=function(e){return ws.isElement(e)&&"A"===e.nodeName&&e.hasAttribute("name")},Lv=function(e,t){return Oc(t)&&!1===Mv(e,t)||Pv(t)||Iv(t)},Iv=ws.hasAttribute("data-mce-bookmark"),jv=ws.hasAttribute("data-mce-bogus"),Bv=ws.hasAttributeValue("data-mce-bogus","all"),Fv=function(e){var t,n,r=0;if(Lv(e,e))return!1;if(!(n=e.firstChild))return!0;t=new b(n,e);do{if(Bv(n))n=t.next(!0);else if(jv(n))n=t.next();else if(ws.isBr(n))r++,n=t.next();else{if(Lv(e,n))return!1;n=t.next()}}while(n);return r<=1},Hv=function(e){return Fv(e.dom())},Uv={isEmpty:Hv},zv=Oi("block","position"),Wv=Oi("from","to"),Vv=function(e,t){var n=Mo.fromDom(e),r=Mo.fromDom(t.container());return Nv.getParentBlock(n,r).map(function(e){return zv(e,t)})},qv=function(e){return!1===Ji.eq(e.from().block(),e.to().block())},$v=function(e){return ba.parent(e.from().block()).bind(function(t){return ba.parent(e.to().block()).filter(function(e){return Ji.eq(t,e)})}).isSome()},Kv=function(e){return!1===ws.isContentEditableFalse(e.from().block())&&!1===ws.isContentEditableFalse(e.to().block())},Gv=function(e,t,n){return ws.isBr(n.position().getNode())&&!1===Uv.isEmpty(n.block())?Ip.positionIn(!1,n.block().dom()).bind(function(r){return r.isEqual(n.position())?Ip.fromPosition(t,e,r).bind(function(t){return Vv(e,t)}):Ee.some(n)}).getOr(n):n},Xv=function(e,t,n){var r=Vv(e,yd.fromRangeStart(n)),o=r.bind(function(n){return Ip.fromPosition(t,e,n.position()).bind(function(n){return Vv(e,n).map(function(n){return Gv(e,t,n)})})});return Jc([r,o],Wv).filter(function(e){return qv(e)&&$v(e)&&Kv(e)})},Yv=function(e,t,n){return n.collapsed?Xv(e,t,n):Ee.none()},Jv={read:Yv},Qv=function(e){return e.slice(0,-1)},Zv=function(e,t,n){return Ji.contains(t,e)?Qv(ba.parents(e,function(e){return n(e)||Ji.eq(e,t)})):[]},eb=function(e,t){return Zv(e,t,ge(!1))},tb=function(e,t){return[e].concat(eb(e,t))},nb={parentsUntil:Zv,parents:eb,parentsAndSelf:tb},rb=function(e){var t=ba.children(e);return Ye(t,Ka).fold(function(){return t},function(e){return t.slice(0,e)})},ob=function(e){var t=rb(e);return We(t,function(e){Tl.remove(e)}),t},ib=function(e,t){Ip.positionIn(e,t.dom()).each(function(e){var t=e.getNode();ws.isBr(t)&&Tl.remove(Mo.fromDom(t))})},ab=function(e,t){var n=nb.parentsAndSelf(t,e);return Xe(n.reverse(),Uv.isEmpty).each(Tl.remove)},sb=function(e,t){var n=ba.parents(t,function(t){return Ji.eq(t,e)});return Ee.from(n[n.length-2])},lb=function(e,t){return Ji.contains(t,e)?ba.parent(e).bind(function(n){return Ji.eq(n,t)?Ee.some(e):sb(t,e)}):Ee.none()},ub=function(e,t,n){if(Uv.isEmpty(n))return Tl.remove(n),Uv.isEmpty(t)&&Sg.fillWithPaddingBr(t),Ip.firstPositionIn(t.dom());ib(!0,t),ib(!1,n);var r=ob(t);return lb(t,n).fold(function(){ab(e,t);var o=Ip.lastPositionIn(n.dom());return We(r,function(e){bl.append(n,e)}),o},function(o){var i=Ip.prevPosition(n.dom(),yd.before(o.dom()));return We(r,function(e){bl.before(o,e)}),ab(e,t),i})},cb=function(e,t,n,r){return t?ub(e,r,n):ub(e,n,r)},db={mergeBlocks:cb},fb=function(e,t){var n,r=Mo.fromDom(e.getBody());return n=Jv.read(r.dom(),t,e.selection.getRng()).bind(function(e){return db.mergeBlocks(r,t,e.from().block(),e.to().block())}),n.each(function(t){e.selection.setRng(t.toRange())}),n.isSome()},hb={backspaceDelete:fb},pb=function(e,t){var n=t.getRng();return Jc([Nv.getParentBlock(e,Mo.fromDom(n.startContainer)),Nv.getParentBlock(e,Mo.fromDom(n.endContainer))],function(r,o){return!1===Ji.eq(r,o)&&(n.deleteContents(),db.mergeBlocks(e,!0,r,o).each(function(e){t.setRng(e.toRange())}),!0)}).getOr(!1)},mb=function(e,t){var n=Mo.fromDom(t),r=be(Ji.eq,e);return fu.ancestor(n,ts,r).isSome()},gb=function(e,t){return mb(e,t.startContainer)||mb(e,t.endContainer)},vb=function(e,t){var n=Ip.prevPosition(e.dom(),yd.fromRangeStart(t)).isNone(),r=Ip.nextPosition(e.dom(),yd.fromRangeEnd(t)).isNone();return!gb(e,t)&&n&&r},bb=function(e){return e.setContent(""),e.selection.setCursorLocation(),!0},yb=function(e){var t=Mo.fromDom(e.getBody()),n=e.selection.getRng();return vb(t,n)?bb(e):pb(t,e.selection)},wb=function(e,t){return!e.selection.isCollapsed()&&yb(e)},xb={backspaceDelete:wb},Cb=function(e){if(!Me(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],n={};return We(e,function(r,o){var i=Vo(r);if(1!==i.length)throw new Error("one and only one name per case");var a=i[0],s=r[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!Me(s))throw new Error("case arguments must be an array");t.push(a),n[a]=function(){var n=arguments.length;if(n!==s.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+s.length+" ("+s+"), got "+n);for(var r=new Array(n),i=0;i<r.length;i++)r[i]=arguments[i];var l=function(e){var n=Vo(e);if(t.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+n.join(","));if(!tt(t,function(e){return He(n,e)}))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+t.join(", "));return e[a].apply(null,r)};return{fold:function(){if(arguments.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+arguments.length);return arguments[o].apply(null,r)},match:l,log:function(e){console.log(e,{constructors:t,constructor:a,params:r})}}}}),n},kb={generate:Cb},Nb=function(e){return ts(Mo.fromDom(e))||Qa(Mo.fromDom(e))},_b=kb.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Sb=function(e,t){var n=t.getNode(!1===e),r=e?"after":"before";return ws.isElement(n)&&n.getAttribute("data-mce-caret")===r},Tb=function(e,t,n,r){var o=function(t){return Ga(Mo.fromDom(t))&&!cp(n,r,e)};return wp(!t,n).fold(function(){return wp(t,r).fold(ge(!1),o)},o)},Eb=function(e,t,n,r){var o=r.getNode(!1===t);return Nv.getParentBlock(Mo.fromDom(e),Mo.fromDom(n.getNode())).map(function(e){return Uv.isEmpty(e)?_b.remove(e.dom()):_b.moveToElement(o)}).orThunk(function(){return Ee.some(_b.moveToElement(o))})},Ob=function(e,t,n){return Ip.fromPosition(t,e,n).bind(function(r){return Nb(r.getNode())?Ee.none():Tb(e,t,n,r)?Ee.none():t&&ws.isContentEditableFalse(r.getNode())?Eb(e,t,n,r):!1===t&&ws.isContentEditableFalse(r.getNode(!0))?Eb(e,t,n,r):t&&kp(n)?Ee.some(_b.moveToPosition(r)):!1===t&&Cp(n)?Ee.some(_b.moveToPosition(r)):Ee.none()})},Ab=function(e,t){return e&&ws.isContentEditableFalse(t.nextSibling)?Ee.some(_b.moveToElement(t.nextSibling)):!1===e&&ws.isContentEditableFalse(t.previousSibling)?Ee.some(_b.moveToElement(t.previousSibling)):Ee.none()},Db=function(e,t,n){return n.fold(function(e){return Ee.some(_b.remove(e))},function(e){return Ee.some(_b.moveToElement(e))},function(n){return cp(t,n,e)?Ee.none():Ee.some(_b.moveToPosition(n))})},Rb=function(e,t,n){return Sb(t,n)?Ab(t,n.getNode(!1===t)).fold(function(){return Ob(e,t,n)},Ee.some):Ob(e,t,n).bind(function(t){return Db(e,n,t)})},Mb=function(e,t,n){var r=vp(t?1:-1,e,n),o=yd.fromRangeStart(r);return!1===t&&kp(o)?Ee.some(_b.remove(o.getNode(!0))):t&&Cp(o)?Ee.some(_b.remove(o.getNode())):Rb(e,t,o)},Pb=function(e,t){var n=e.container(),r=e.offset();return!1===yd.isTextPosition(e)&&n===t.parentNode&&r>yd.before(t).offset()},Lb=function(e,t){return Pb(t,e)?yd(t.container(),t.offset()-1):t},Ib=function(e){return ws.isText(e)?yd(e,0):yd.before(e)},jb=function(e){return ws.isText(e)?yd(e,e.data.length):yd.after(e)},Bb=function(e){return Oc(e.previousSibling)?Ee.some(jb(e.previousSibling)):e.previousSibling?Ip.lastPositionIn(e.previousSibling):Ee.none()},Fb=function(e){return Oc(e.nextSibling)?Ee.some(Ib(e.nextSibling)):e.nextSibling?Ip.firstPositionIn(e.nextSibling):Ee.none()},Hb=function(e,t){var n=yd.before(t.previousSibling?t.previousSibling:t.parentNode);return Ip.prevPosition(e,n).fold(function(){return Ip.nextPosition(e,yd.after(t))},Ee.some)},Ub=function(e,t){return Ip.nextPosition(e,yd.after(t)).fold(function(){return Ip.prevPosition(e,yd.before(t))},Ee.some)},zb=function(e,t){return Bb(t).orThunk(function(){return Fb(t)}).orThunk(function(){return Hb(e,t)})},Wb=function(e,t){return Fb(t).orThunk(function(){return Bb(t)}).orThunk(function(){return Ub(e,t)})},Vb=function(e,t,n){return e?Wb(t,n):zb(t,n)},qb=function(e,t,n){return Vb(e,t,n).map(be(Lb,n))},$b=function(e,t,n){n.fold(function(){e.focus()},function(n){e.selection.setRng(n.toRange(),t)})},Kb=function(e){return function(t){return t.dom()===e}},Gb=function(e,t){return t&&e.schema.getBlockElements().hasOwnProperty(Wo.name(t))},Xb=function(e){if(Uv.isEmpty(e)){var t=Mo.fromHtml('<br data-mce-bogus="1">');return Tl.empty(e),bl.append(e,t),Ee.some(yd.before(t.dom()))}return Ee.none()},Yb=function(e,t){return Jc([ba.prevSibling(e),ba.nextSibling(e),t],function(t,n,r){var o,i=t.dom(),a=n.dom();return ws.isText(i)&&ws.isText(a)?(o=i.data.length,i.appendData(a.data),Tl.remove(n),Tl.remove(e),r.container()===a?yd(i,o):r):(Tl.remove(e),r)}).orThunk(function(){return Tl.remove(e),t})},Jb=function(e,t,n){var r=qb(t,e.getBody(),n.dom()),o=fu.ancestor(n,be(Gb,e),Kb(e.getBody())),i=Yb(n,r);e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):o.bind(Xb).fold(function(){$b(e,t,i)},function(n){$b(e,t,Ee.some(n))})},Qb={deleteElement:Jb},Zb=function(e,t){return function(n){return e._selectionOverrides.hideFakeCaret(),Qb.deleteElement(e,t,Mo.fromDom(n)),!0}},ey=function(e,t){return function(n){var r=t?yd.before(n):yd.after(n);return e.selection.setRng(r.toRange()),!0}},ty=function(e){return function(t){return e.selection.setRng(t.toRange()),!0}},ny=function(e,t){return Mb(e.getBody(),t,e.selection.getRng()).map(function(n){return n.fold(Zb(e,t),ey(e,t),ty(e))}).getOr(!1)},ry=function(e){We(iu.descendants(e,".mce-offscreen-selection"),Tl.remove)},oy=function(e,t){var n=e.selection.getNode();return!!ws.isContentEditableFalse(n)&&(ry(Mo.fromDom(e.getBody())),Qb.deleteElement(e,t,Mo.fromDom(e.selection.getNode())),Nv.paddEmptyBody(e),!0)},iy=function(e,t){for(;t&&t!==e;){if(ws.isContentEditableTrue(t)||ws.isContentEditableFalse(t))return t;t=t.parentNode}return null},ay=function(e){var t,n=iy(e.getBody(),e.selection.getNode());return ws.isContentEditableTrue(n)&&e.dom.isBlock(n)&&e.dom.isEmpty(n)&&(t=e.dom.create("br",{"data-mce-bogus":"1"}),e.dom.setHTML(n,""),n.appendChild(t),e.selection.setRng(yd.before(t).toRange())),!0},sy=function(e,t){return e.selection.isCollapsed()?ny(e,t):oy(e,t)},ly={backspaceDelete:sy,paddEmptyElement:ay},uy=ws.isText,cy=function(e){return uy(e)&&e.data[0]===oc.ZWSP},dy=function(e){return uy(e)&&e.data[e.data.length-1]===oc.ZWSP},fy=function(e){return e.ownerDocument.createTextNode(oc.ZWSP)},hy=function(e){if(uy(e.previousSibling))return dy(e.previousSibling)?e.previousSibling:(e.previousSibling.appendData(oc.ZWSP),e.previousSibling);if(uy(e))return cy(e)?e:(e.insertData(0,oc.ZWSP),e);var t=fy(e);return e.parentNode.insertBefore(t,e),t},py=function(e){if(uy(e.nextSibling))return cy(e.nextSibling)?e.nextSibling:(e.nextSibling.insertData(0,oc.ZWSP),e.nextSibling);if(uy(e))return dy(e)?e:(e.appendData(oc.ZWSP),e);var t=fy(e);return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t},my=function(e,t){return e?hy(t):py(t)},gy=be(my,!0),vy=be(my,!1),by=function(e,t){return ws.isText(e.container())?my(t,e.container()):my(t,e.getNode())},yy=function(e,t){var n=t.get();return n&&e.container()===n&&lc(n)},wy=function(e,t){return t.fold(function(t){hf.remove(e.get());var n=gy(t);return e.set(n),Ee.some(yd(n,n.length-1))},function(t){return Ip.firstPositionIn(t).map(function(t){if(yy(t,e))return yd(e.get(),1);hf.remove(e.get());var n=by(t,!0);return e.set(n),yd(n,1)})},function(t){return Ip.lastPositionIn(t).map(function(t){if(yy(t,e))return yd(e.get(),e.get().length-1);hf.remove(e.get());var n=by(t,!1);return e.set(n),yd(n,n.length-1)})},function(t){hf.remove(e.get());var n=vy(t);return e.set(n),Ee.some(yd(n,1))})},xy={renderCaret:wy},Cy=function(e,t){for(var n=0;n<e.length;n++){var r=e[n].apply(null,t);if(r.isSome())return r}return Ee.none()},ky={evaluateUntil:Cy},Ny=kb.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),_y=function(e,t){var n=up(t,e);return n||e},Sy=function(e,t,n){var r=bv.normalizeForwards(n),o=_y(t,r.container());return bv.findRootInline(e,o,r).fold(function(){return Ip.nextPosition(o,r).bind(be(bv.findRootInline,e,o)).map(function(e){return Ny.before(e)})},Ee.none)},Ty=function(e,t){return null===Qd(e,t)},Ey=function(e,t,n){return bv.findRootInline(e,t,n).filter(be(Ty,t))},Oy=function(e,t,n){var r=bv.normalizeBackwards(n);return Ey(e,t,r).bind(function(e){return Ip.prevPosition(e,r).isNone()?Ee.some(Ny.start(e)):Ee.none()})},Ay=function(e,t,n){var r=bv.normalizeForwards(n);return Ey(e,t,r).bind(function(e){return Ip.nextPosition(e,r).isNone()?Ee.some(Ny.end(e)):Ee.none()})},Dy=function(e,t,n){var r=bv.normalizeBackwards(n),o=_y(t,r.container());return bv.findRootInline(e,o,r).fold(function(){return Ip.prevPosition(o,r).bind(be(bv.findRootInline,e,o)).map(function(e){return Ny.after(e)})},Ee.none)},Ry=function(e){return!1===bv.isRtl(Py(e))},My=function(e,t,n){return ky.evaluateUntil([Sy,Oy,Ay,Dy],[e,t,n]).filter(Ry)},Py=function(e){return e.fold(ve,ve,ve,ve)},Ly=function(e){return e.fold(ge("before"),ge("start"),ge("end"),ge("after"))},Iy=function(e){return e.fold(Ny.before,Ny.before,Ny.after,Ny.after)},jy=function(e){return e.fold(Ny.start,Ny.start,Ny.end,Ny.end)},By=function(e,t){return Ly(e)===Ly(t)&&Py(e)===Py(t)},Fy=function(e,t,n,r,o,i){return Jc([bv.findRootInline(t,n,r),bv.findRootInline(t,n,o)],function(t,r){return t!==r&&bv.hasSameParentBlock(n,t,r)?Ny.after(e?t:r):i}).getOr(i)},Hy=function(e,t){return e.fold(ge(!0),function(e){return!By(e,t)})},Uy=function(e,t,n,r,o){var i=bv.normalizePosition(e,o);return Ip.fromPosition(e,n,i).map(be(bv.normalizePosition,e)).fold(function(){return r.map(Iy)},function(o){return My(t,n,o).map(be(Fy,e,t,n,i,o)).filter(be(Hy,r))}).filter(Ry)},zy=function(e,t){return e?t.fold(me(Ee.some,Ny.start),Ee.none,me(Ee.some,Ny.after),Ee.none):t.fold(Ee.none,me(Ee.some,Ny.before),Ee.none,me(Ee.some,Ny.end))},Wy=function(e,t,n,r){var o=bv.normalizePosition(e,r),i=My(t,n,o);return My(t,n,o).bind(be(zy,e)).orThunk(function(){return Uy(e,t,n,i,r)})},Vy={readLocation:My,findLocation:Wy,prevLocation:be(Wy,!1),nextLocation:be(Wy,!0),getElement:Py,outside:Iy,inside:jy},qy=function(e){return Ie(e.selection.getSel().modify)},$y=function(e,t,n){var r=e?1:-1;return t.setRng(yd(n.container(),n.offset()+r).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},Ky=function(e,t){var n=t.selection.getRng(),r=e?yd.fromRangeEnd(n):yd.fromRangeStart(n);return!!qy(t)&&(e&&fc(r)?$y(!0,t.selection,r):!(e||!hc(r))&&$y(!1,t.selection,r))},Gy={hasSelectionModifyApi:qy,moveByWord:Ky},Xy=function(e,t){var n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},Yy=function(e){return!1!==e.settings.inline_boundaries},Jy=function(e,t){e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},Qy=function(e,t,n){return xy.renderCaret(t,n).map(function(t){return Xy(e,t),n})},Zy=function(e,t,n){var r=e.getBody(),o=yd.fromRangeStart(e.selection.getRng()),i=be(bv.isInlineTarget,e);return Vy.findLocation(n,i,r,o).bind(function(n){return Qy(e,t,n)})},ew=function(e,t,n){var r=$e(t.select('*[data-mce-selected="inline-boundary"]'),e),o=$e(n,e);We(ot(r,o),be(Jy,!1)),We(ot(o,r),be(Jy,!0))},tw=function(e,t){if(e.selection.isCollapsed()&&!0!==e.composing&&t.get()){var n=yd.fromRangeStart(e.selection.getRng());yd.isTextPosition(n)&&!1===bv.isAtZwsp(n)&&(Xy(e,hf.removeAndReposition(t.get(),n)),t.set(null))}},nw=function(e,t,n,r){if(t.selection.isCollapsed()){var o=$e(r,e);We(o,function(r){var o=yd.fromRangeStart(t.selection.getRng());Vy.readLocation(e,t.getBody(),o).bind(function(e){return Qy(t,n,e)})})}},rw=function(e,t,n){return function(){return!!Yy(e)&&Zy(e,t,n).isSome()}},ow=function(e,t,n){return function(){return!!Yy(t)&&Gy.moveByWord(e,t)}},iw=function(e){var t=Al(null),n=be(bv.isInlineTarget,e);return e.on("NodeChange",function(r){Yy(e)&&(ew(n,e.dom,r.parents),tw(e,t),nw(n,e,t,r.parents))}),t},aw=be(ow,!0),sw=be(ow,!1),lw={move:rw,moveNextWord:aw,movePrevWord:sw,setupSelectedState:iw,setCaretPosition:Xy},uw=function(e){return!1!==e.settings.inline_boundaries},cw=function(e,t){var n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n},dw=function(e){return Jc([Ip.firstPositionIn(e),Ip.lastPositionIn(e)],function(t,n){var r=bv.normalizePosition(!0,t),o=bv.normalizePosition(!1,n);return Ip.nextPosition(e,r).map(function(e){return e.isEqual(o)}).getOr(!0)}).getOr(!0)},fw=function(e,t){return function(n){return xy.renderCaret(t,n).map(function(t){return lw.setCaretPosition(e,t),!0}).getOr(!1)}},hw=function(e,t,n,r){var o=e.getBody(),i=be(bv.isInlineTarget,e);e.undoManager.ignore(function(){e.selection.setRng(cw(n,r)),e.execCommand("Delete"),Vy.readLocation(i,o,yd.fromRangeStart(e.selection.getRng())).map(Vy.inside).map(fw(e,t))}),e.nodeChanged()},pw=function(e,t){var n=up(t,e);return n||e},mw=function(e,t,n,r){var o=pw(e.getBody(),r.container()),i=be(bv.isInlineTarget,e),a=Vy.readLocation(i,o,r);return a.bind(function(e){return n?e.fold(ge(Ee.some(Vy.inside(e))),Ee.none,ge(Ee.some(Vy.outside(e))),Ee.none):e.fold(Ee.none,ge(Ee.some(Vy.outside(e))),Ee.none,ge(Ee.some(Vy.inside(e))))}).map(fw(e,t)).getOrThunk(function(){var s=Ip.navigate(n,o,r),l=s.bind(function(e){return Vy.readLocation(i,o,e)});return a.isSome()&&l.isSome()?bv.findRootInline(i,o,r).map(function(t){return!!dw(t)&&(Qb.deleteElement(e,n,Mo.fromDom(t)),!0)}).getOr(!1):l.bind(function(o){return s.map(function(o){return n?hw(e,t,r,o):hw(e,t,o,r),!0})}).getOr(!1)})},gw=function(e,t,n){if(e.selection.isCollapsed()&&uw(e)){var r=yd.fromRangeStart(e.selection.getRng());return mw(e,t,n,r)}return!1},vw={backspaceDelete:gw},bw=Oi("start","end"),yw=Oi("rng","table","cells"),ww=kb.generate([{removeTable:["element"]},{emptyCells:["cells"]}]),xw=function(e){return be(Ji.eq,e)},Cw=function(e,t){return yu.closest(Mo.fromDom(e),"td,th",t)},kw=function(e,t){return yu.ancestor(e,"table",t)},Nw=function(e){return!1===Ji.eq(e.start(),e.end())},_w=function(e,t){return kw(e.start(),t).bind(function(n){return kw(e.end(),t).bind(function(e){return Ji.eq(n,e)?Ee.some(n):Ee.none()})})},Sw=function(e){return iu.descendants(e,"td,th")},Tw=function(e,t){return kw(e.start(),t).bind(function(t){return lt(Sw(t)).map(function(t){return bw(e.start(),t)})})},Ew=function(e,t){var n=Cw(t.startContainer,e),r=Cw(t.endContainer,e);return t.collapsed?Ee.none():Jc([n,r],bw).fold(function(){return n.fold(function(){return r.bind(function(t){return kw(t,e).bind(function(e){return st(Sw(e)).map(function(e){return bw(e,t)})})})},function(t){return kw(t,e).bind(function(e){return lt(Sw(e)).map(function(e){return bw(t,e)})})})},function(t){return Ow(e,t)?Ee.none():Tw(t,e)})},Ow=function(e,t){return _w(t,e).isSome()},Aw=function(e,t){var n=Cw(e.startContainer,t),r=Cw(e.endContainer,t);return Jc([n,r],bw).filter(Nw).filter(function(e){return Ow(t,e)}).orThunk(function(){return Ew(t,e)})},Dw=function(e,t){return _w(e,t).map(function(t){return yw(e,t,Sw(t))})},Rw=function(e,t){var n=xw(e);return Aw(t,n).bind(function(e){return Dw(e,n)})},Mw=function(e,t){return Ye(e,function(e){return Ji.eq(e,t)})},Pw=function(e){return Jc([Mw(e.cells(),e.rng().start()),Mw(e.cells(),e.rng().end())],function(t,n){return e.cells().slice(t,n+1)})},Lw=function(e){return Pw(e).map(function(t){var n=e.cells();return t.length===n.length?ww.removeTable(e.table()):ww.emptyCells(t)})},Iw=function(e){return ww.emptyCells(e)},jw=function(e,t){return Rw(e,t).bind(Lw)},Bw={getActionFromRange:jw,getActionFromCells:Iw},Fw=function(e){var t=[];if(e)for(var n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},Hw=function(e){return et(e,function(e){var t=Kc(e);return t?[Mo.fromDom(t)]:[]})},Uw=function(e){return Fw(e).length>1},zw={getRanges:Fw,getSelectedNodes:Hw,hasMultipleRanges:Uw},Ww=function(e){return $e(zw.getSelectedNodes(e),ts)},Vw=function(e){return iu.descendants(e,"td[data-mce-selected],th[data-mce-selected]")},qw=function(e,t){var n=Vw(t),r=Ww(e);return n.length>0?n:r},$w=function(e){return qw(zw.getRanges(e.selection.getSel()),Mo.fromDom(e.getBody()))},Kw={getCellsFromRanges:Ww,getCellsFromElement:Vw,getCellsFromElementOrRanges:qw,getCellsFromEditor:$w},Gw=function(e,t){return We(t,Sg.fillWithPaddingBr),e.selection.setCursorLocation(t[0].dom(),0),!0},Xw=function(e,t){return Qb.deleteElement(e,!1,t),!0},Yw=function(e,t,n){return Bw.getActionFromRange(t,n).map(function(t){return t.fold(be(Xw,e),be(Gw,e))})},Jw=function(e,t){return rx(e,t)},Qw=function(e,t,n,r){return tx(t,r).fold(function(){return Yw(e,t,n)},function(t){return Jw(e,t)}).getOr(!1)},Zw=function(e,t){var n=Mo.fromDom(e.getBody()),r=e.selection.getRng(),o=Kw.getCellsFromEditor(e);return 0!==o.length?Gw(e,o):Qw(e,n,r,t)},ex=function(e,t){return Xe(nb.parentsAndSelf(t,e),ts)},tx=function(e,t){return Xe(nb.parentsAndSelf(t,e),function(e){return"caption"===Wo.name(e)})},nx=function(e,t,n,r,o){return Ip.navigate(n,e.getBody(),o).bind(function(e){return ex(t,Mo.fromDom(e.getNode())).map(function(e){return!1===Ji.eq(e,r)})})},rx=function(e,t){return Sg.fillWithPaddingBr(t),e.selection.setCursorLocation(t.dom(),0),Ee.some(!0)},ox=function(e,t,n,r){return Ip.firstPositionIn(e.dom()).bind(function(o){return Ip.lastPositionIn(e.dom()).map(function(e){return t?n.isEqual(o)&&r.isEqual(e):n.isEqual(e)&&r.isEqual(o)})}).getOr(!0)},ix=function(e,t){return rx(e,t)},ax=function(e,t,n){return tx(e,Mo.fromDom(n.getNode())).map(function(e){return!1===Ji.eq(e,t)})},sx=function(e,t,n,r,o){return Ip.navigate(n,e.getBody(),o).bind(function(i){return ox(r,n,o,i)?ix(e,r):ax(t,r,i)}).or(Ee.some(!0))},lx=function(e,t,n,r){var o=yd.fromRangeStart(e.selection.getRng());return ex(n,r).bind(function(r){return Uv.isEmpty(r)?rx(e,r):nx(e,n,t,r,o)})},ux=function(e,t,n,r){var o=yd.fromRangeStart(e.selection.getRng());return Uv.isEmpty(r)?rx(e,r):sx(e,n,t,r,o)},cx=function(e,t,n){var r=Mo.fromDom(e.getBody());return tx(r,n).fold(function(){return lx(e,t,r,n)},function(n){return ux(e,t,r,n)}).getOr(!1)},dx=function(e,t){var n=Mo.fromDom(e.selection.getStart(!0)),r=Kw.getCellsFromEditor(e);return e.selection.isCollapsed()&&0===r.length?cx(e,t,n):Zw(e,n)},fx={backspaceDelete:dx},hx=function(e,t){e.getDoc().execCommand(t,!1,null)},px=function(e){ly.backspaceDelete(e,!1)||vw.backspaceDelete(e,!1)||hb.backspaceDelete(e,!1)||fx.backspaceDelete(e)||xb.backspaceDelete(e,!1)||(hx(e,"Delete"),Nv.paddEmptyBody(e))},mx=function(e){ly.backspaceDelete(e,!0)||vw.backspaceDelete(e,!0)||hb.backspaceDelete(e,!0)||fx.backspaceDelete(e)||xb.backspaceDelete(e,!0)||hx(e,"ForwardDelete")},gx={deleteCommand:px,forwardDeleteCommand:mx},vx=function(e,t,n){var r=function(t){return Ei.getRaw(t,e)},o=function(e){return Ji.eq(Mo.fromDom(t),e)};return fu.closest(Mo.fromDom(n),function(e){return r(e).isSome()},o).bind(r)},bx=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n},yx=function(e,t){return/[0-9.]+px$/.test(e)?bx(72*parseInt(e,10)/96,t||0)+"pt":e},wx=function(e){return e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},xx=function(e,t){return Ee.from(il.DOM.getStyle(t,e,!0))},Cx=function(e){return function(t,n){return Ee.from(n).map(Mo.fromDom).filter(Wo.isElement).bind(function(n){return vx(e,t,n.dom()).or(xx(e,n.dom()))}).getOr("")}},kx={getFontSize:Cx("font-size"),getFontFamily:me(wx,Cx("font-family")),toPt:yx},Nx=function(e){return Ip.firstPositionIn(e.getBody()).map(function(e){var t=e.container();return ws.isText(t)?t.parentNode:t})},_x=function(e,t){return e.startContainer===t&&0===e.startOffset},Sx=function(e){return Ee.from(e.selection.getRng()).bind(function(t){var n=e.getBody();return _x(t,n)?Ee.none():Ee.from(e.selection.getStart(!0))})},Tx=function(e,t){if(/^[0-9\.]+$/.test(t)){var n=parseInt(t,10);if(n>=1&&n<=7){var r=Oh.getFontStyleValues(e),o=Oh.getFontSizeClasses(e);return o?o[n-1]||t:r[n-1]||t}return t}return t},Ex=function(e,t){e.formatter.toggle("fontname",{value:Tx(e,t)}),e.nodeChanged()},Ox=function(e){return Sx(e).fold(function(){return Nx(e).map(function(t){return kx.getFontFamily(e.getBody(),t)}).getOr("")},function(t){return kx.getFontFamily(e.getBody(),t)})},Ax=function(e,t){e.formatter.toggle("fontsize",{value:Tx(e,t)}),e.nodeChanged()},Dx=function(e){return Sx(e).fold(function(){return Nx(e).map(function(t){return kx.getFontSize(e.getBody(),t)}).getOr("")},function(t){return kx.getFontSize(e.getBody(),t)})},Rx=function(e,t){return e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset},Mx={isEq:Rx},Px=function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null},Lx=function(e,t,n){return null!==Px(e,t,n)},Ix=function(e,t,n){return Lx(e,t,function(e){return e.nodeName===n})},jx=function(e){return e&&"TABLE"===e.nodeName},Bx=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},Fx=function(e,t){return uc(e)&&!1===Lx(e,t,Jd)},Hx=function(e,t,n){for(var r=new b(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());t=r[n?"prev":"next"]();)if(ws.isBr(t))return!0},Ux=function(e,t){return e.previousSibling&&e.previousSibling.nodeName===t},zx=function(e,t){for(;t&&t!==e;){if(ws.isContentEditableFalse(t))return!0;t=t.parentNode}return!1},Wx=function(e,t,n,r,o){var i,a,s,l,u=e.getRoot(),c=e.schema.getNonEmptyElements();if(s=e.getParent(o.parentNode,e.isBlock)||u,r&&ws.isBr(o)&&t&&e.isEmpty(s))return Ee.some(_(o.parentNode,e.nodeIndex(o)));for(i=new b(o,s);l=i[r?"prev":"next"]();){if("false"===e.getContentEditableParent(l)||Fx(l,u))return Ee.none();if(ws.isText(l)&&l.nodeValue.length>0)return!1===Ix(l,u,"A")?Ee.some(_(l,r?l.nodeValue.length:0)):Ee.none();if(e.isBlock(l)||c[l.nodeName.toLowerCase()])return Ee.none();a=l}return n&&a?Ee.some(_(a,0)):Ee.none()},Vx=function(e,t,n,r){var o,i,a,s,l,u,c,d=e.getRoot(),f=!1;if(o=r[(n?"start":"end")+"Container"],i=r[(n?"start":"end")+"Offset"],c=ws.isElement(o)&&i===o.childNodes.length,l=e.schema.getNonEmptyElements(),u=n,uc(o))return Ee.none();if(ws.isElement(o)&&i>o.childNodes.length-1&&(u=!1),ws.isDocument(o)&&(o=d,i=0),o===d){if(u&&(s=o.childNodes[i>0?i-1:0])){if(uc(s))return Ee.none();if(l[s.nodeName]||jx(s))return Ee.none()}if(o.hasChildNodes()){if(i=Math.min(!u&&i>0?i-1:i,o.childNodes.length-1),o=o.childNodes[i],i=ws.isText(o)&&c?o.data.length:0,!t&&o===d.lastChild&&jx(o))return Ee.none();if(zx(d,o)||uc(o))return Ee.none();if(o.hasChildNodes()&&!1===jx(o)){s=o,a=new b(o,d);do{if(ws.isContentEditableFalse(s)||uc(s)){f=!1;break}if(ws.isText(s)&&s.nodeValue.length>0){i=u?0:s.nodeValue.length,o=s,f=!0;break}if(l[s.nodeName.toLowerCase()]&&!Bx(s)){i=e.nodeIndex(s),o=s.parentNode,u||i++,f=!0;break}}while(s=u?a.next():a.prev())}}}return t&&(ws.isText(o)&&0===i&&Wx(e,c,t,!0,o).each(function(e){o=e.container(),i=e.offset(),f=!0}),ws.isElement(o)&&(s=o.childNodes[i],s||(s=o.childNodes[i-1]),!s||!ws.isBr(s)||Ux(s,"A")||Hx(e,s,!1)||Hx(e,s,!0)||Wx(e,c,t,!0,s).each(function(e){o=e.container(),i=e.offset(),f=!0}))),u&&!t&&ws.isText(o)&&i===o.nodeValue.length&&Wx(e,c,t,!1,o).each(function(e){o=e.container(),i=e.offset(),f=!0}),f?Ee.some(_(o,i)):Ee.none()},qx=function(e,t){var n=t.collapsed,r=t.cloneRange(),o=_.fromRangeStart(t);return Vx(e,n,!0,r).each(function(e){n&&_.isAbove(o,e)||r.setStart(e.container(),e.offset())}),n||Vx(e,n,!1,r).each(function(e){r.setEnd(e.container(),e.offset())}),n&&r.collapse(!0),Mx.isEq(t,r)?Ee.none():Ee.some(r)},$x={normalize:qx},Kx=function(e,t,n){for(var r,o=new b(t,n),i=e.getNonEmptyElements();r=o.next();)if(i[r.nodeName.toLowerCase()]||r.length>0)return!0},Gx=function(e,t,n){var r=e.create("span",{},"&nbsp;");n.parentNode.insertBefore(r,n),t.scrollIntoView(r),e.remove(r)},Xx=function(e,t,n,r){var o=e.createRng();r?(o.setStartBefore(n),o.setEndBefore(n)):(o.setStartAfter(n),o.setEndAfter(n)),t.setRng(o)},Yx=function(e,t){var n,r,o=e.selection,i=e.dom,a=o.getRng();$x.normalize(i,a).each(function(e){a.setStart(e.startContainer,e.startOffset),a.setEnd(e.endContainer,e.endOffset)});var s=a.startOffset,l=a.startContainer;if(1===l.nodeType&&l.hasChildNodes()){var u=s>l.childNodes.length-1;l=l.childNodes[Math.min(s,l.childNodes.length-1)]||l,s=u&&3===l.nodeType?l.nodeValue.length:0}var c=i.getParent(l,i.isBlock),d=c?i.getParent(c.parentNode,i.isBlock):null,f=d?d.nodeName.toUpperCase():"",h=t&&t.ctrlKey;"LI"!==f||h||(c=d),l&&3===l.nodeType&&s>=l.nodeValue.length&&(Kx(e.schema,l,c)||(n=i.create("br"),a.insertNode(n),a.setStartAfter(n),a.setEndAfter(n),r=!0)),n=i.create("br"),a.insertNode(n),Gx(i,o,n),Xx(i,o,n,r),e.undoManager.add()},Jx=function(e,t){var n=Mo.fromTag("br");bl.before(Mo.fromDom(t),n),e.undoManager.add()},Qx=function(e,t){eC(e.getBody(),t)||bl.after(Mo.fromDom(t),Mo.fromTag("br"));var n=Mo.fromTag("br");bl.after(Mo.fromDom(t),n),Gx(e.dom,e.selection,n.dom()),Xx(e.dom,e.selection,n.dom(),!1),e.undoManager.add()},Zx=function(e){return ws.isBr(e.getNode())},eC=function(e,t){return!!Zx(yd.after(t))||Ip.nextPosition(e,yd.after(t)).map(function(e){return ws.isBr(e.getNode())}).getOr(!1)},tC=function(e){return e&&"A"===e.nodeName&&"href"in e},nC=function(e){return e.fold(ge(!1),tC,tC,ge(!1))},rC=function(e){var t=be(bv.isInlineTarget,e),n=yd.fromRangeStart(e.selection.getRng());return Vy.readLocation(t,e.getBody(),n).filter(nC)},oC=function(e,t){t.fold(pe,be(Jx,e),be(Qx,e),pe)},iC=function(e,t){var n=rC(e);n.isSome()?n.each(be(oC,e)):Yx(e,t)},aC={insert:iC},sC=kb.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),lC=function(e,t,n,r){return e.fold(t,n,r)},uC=function(e){return e.fold(ve,ve,ve)},cC={before:sC.before,on:sC.on,after:sC.after,cata:lC,getStart:uC},dC=kb.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),fC=Oi("start","soffset","finish","foffset"),hC=function(e){return dC.exact(e.start(),e.soffset(),e.finish(),e.foffset())},pC=function(e){return e.match({domRange:function(e){return Mo.fromDom(e.startContainer)},relative:function(e,t){return cC.getStart(e)},exact:function(e,t,n,r){return e}})},mC=function(e){var t=pC(e);return ba.defaultView(t)},gC={domRange:dC.domRange,relative:dC.relative,exact:dC.exact,exactFromRange:hC,range:fC,getWin:mC},vC=To.detect().browser,bC=function(e,t){var n=Wo.isText(t)?Wm.get(t).length:ba.children(t).length+1;return e>n?n:e<0?0:e},yC=function(e){return gC.range(e.start(),bC(e.soffset(),e.start()),e.finish(),bC(e.foffset(),e.finish()))},wC=function(e,t){return Ji.contains(e,t)||Ji.eq(e,t)},xC=function(e){return function(t){return wC(e,t.start())&&wC(e,t.finish())}},CC=function(e){return!0===e.inline||vC.isIE()},kC=function(e){return gC.range(Mo.fromDom(e.startContainer),e.startOffset,Mo.fromDom(e.endContainer),e.endOffset)},NC=function(e){var t=e.getSelection();return(t&&0!==t.rangeCount?Ee.from(t.getRangeAt(0)):Ee.none()).map(kC)},_C=function(e){var t=ba.defaultView(e);return NC(t.dom()).filter(xC(e))},SC=function(e,t){return Ee.from(t).filter(xC(e)).map(yC)},TC=function(e){var t=document.createRange();try{return t.setStart(e.start().dom(),e.soffset()),t.setEnd(e.finish().dom(),e.foffset()),Ee.some(t)}catch(e){return Ee.none()}},EC=function(e){var t=CC(e)?_C(Mo.fromDom(e.getBody())):Ee.none();e.bookmark=t.isSome()?t:e.bookmark},OC=function(e,t){var n=Mo.fromDom(e.getBody()),r=CC(e)?Ee.from(t):Ee.none(),o=r.map(kC).filter(xC(n));e.bookmark=o.isSome()?o:e.bookmark},AC=function(e){return(e.bookmark?e.bookmark:Ee.none()).bind(be(SC,Mo.fromDom(e.getBody()))).bind(TC)},DC=function(e){AC(e).each(function(t){e.selection.setRng(t)})},RC={store:EC,storeNative:OC,readRange:NC,restore:DC,getRng:AC,getBookmark:_C,validate:SC},MC=function(e,t,n,r,o,i){if("false"!==e.getContentEditable(i)&&"LI"!==i.nodeName){var a=n?"margin":"padding";if(a="TABLE"===i.nodeName?"margin":a,a+="rtl"===e.getStyle(i,"direction",!0)?"Right":"Left","outdent"===t){var s=Math.max(0,parseInt(i.style[a]||0,10)-r);e.setStyle(i,a,s?s+o:"")}else{var s=parseInt(i.style[a]||0,10)+r+o;e.setStyle(i,a,s)}}},PC=function(e,t){var n=e.settings,r=e.dom,o=e.selection,i=e.formatter,a=/[a-z%]+$/i.exec(n.indentation)[0],s=parseInt(n.indentation,10),l=e.getParam("indent_use_margin",!1);e.queryCommandState("InsertUnorderedList")||e.queryCommandState("InsertOrderedList")||(n.forced_root_block||r.getParent(o.getNode(),r.isBlock)||i.apply("div"),We(o.getSelectedBlocks(),function(e){return MC(r,t,l,s,a,e)}))},LC=vr.each,IC=vr.extend,jC=vr.map,BC=vr.inArray,FC=vr.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," "),HC=function(e){var t,n,r=this,o={},i=function(){return!1},a=function(){return!0};e=e||{},t=e.scope||r,n=e.toggleEvent||i;var s=function(n,r){var s,l,c,d;if(n=n.toLowerCase(),r=r||{},r.type=n,r.target||(r.target=t),r.preventDefault||(r.preventDefault=function(){r.isDefaultPrevented=a},r.stopPropagation=function(){r.isPropagationStopped=a},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=a},r.isDefaultPrevented=i,r.isPropagationStopped=i,r.isImmediatePropagationStopped=i),e.beforeFire&&e.beforeFire(r),s=o[n])for(l=0,c=s.length;l<c;l++){if(d=s[l],d.once&&u(n,d.func),r.isImmediatePropagationStopped())return r.stopPropagation(),r;if(!1===d.func.call(t,r))return r.preventDefault(),r}return r},l=function(e,t,a,s){var l,u,c;if(!1===t&&(t=i),t)for(t={func:t},s&&vr.extend(t,s),u=e.toLowerCase().split(" "),c=u.length;c--;)e=u[c],l=o[e],l||(l=o[e]=[],n(e,!0)),a?l.unshift(t):l.push(t);return r},u=function(e,t){var i,a,s,l,u;if(e)for(l=e.toLowerCase().split(" "),i=l.length;i--;){if(e=l[i],a=o[e],!e){for(s in o)n(s,!1),delete o[s];return r}if(a){if(t)for(u=a.length;u--;)a[u].func===t&&(a=a.slice(0,u).concat(a.slice(u+1)),o[e]=a);else a.length=0;a.length||(n(e,!1),delete o[e])}}else{for(e in o)n(e,!1);o={}}return r},c=function(e,t,n){return l(e,t,n,{once:!0})},d=function(e){return e=e.toLowerCase(),!(!o[e]||0===o[e].length)};r.fire=s,r.on=l,r.off=u,r.once=c,r.has=d};HC.isNative=function(e){return!!FC[e.toLowerCase()]};var UC,zC=function(e){return e._eventDispatcher||(e._eventDispatcher=new HC({scope:e,toggleEvent:function(t,n){HC.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher},WC={fire:function(e,t,n){var r=this;if(r.removed&&"remove"!==e)return t;if(t=zC(r).fire(e,t,n),!1!==n&&r.parent)for(var o=r.parent();o&&!t.isPropagationStopped();)o.fire(e,t,!1),o=o.parent();return t},on:function(e,t,n){return zC(this).on(e,t,n)},off:function(e,t){return zC(this).off(e,t)},once:function(e,t){return zC(this).once(e,t)},hasEventListeners:function(e){return zC(this).has(e)}},VC=function(e,t){return e.fire("PreProcess",t)},qC=function(e,t){return e.fire("PostProcess",t)},$C=function(e){return e.fire("remove")},KC=function(e,t){return e.fire("SwitchMode",{mode:t})},GC=function(e,t,n,r){e.fire("ObjectResizeStart",{target:t,width:n,height:r})},XC=function(e,t,n,r){e.fire("ObjectResized",{target:t,width:n,height:r})},YC={firePreProcess:VC,firePostProcess:qC,fireRemove:$C,fireSwitchMode:KC,fireObjectResizeStart:GC,fireObjectResized:XC},JC=function(e,t,n){try{e.getDoc().execCommand(t,!1,n)}catch(e){}},QC=function(e,t,n){Kl.has(e,t)&&!1===n?Kl.remove(e,t):n&&Kl.add(e,t)},ZC=function(e,t){QC(Mo.fromDom(e.getBody()),"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e.readonly=!0,e.getBody().contentEditable="false"):(e.readonly=!1,e.getBody().contentEditable="true",JC(e,"StyleWithCSS",!1),JC(e,"enableInlineTableEditing",!1),JC(e,"enableObjectResizing",!1),e.focus(),e.nodeChanged())},ek=function(e,t){t!==tk(e)&&(e.initialized?ZC(e,"readonly"===t):e.on("init",function(){ZC(e,"readonly"===t)}),YC.fireSwitchMode(e,t))},tk=function(e){return e.readonly?"readonly":"design"},nk=function(e){return!0===e.readonly},rk=il.DOM,ok=function(e,t){return"selectionchange"===t?e.getDoc():!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t)?e.getDoc().documentElement:e.settings.event_root?(e.eventRoot||(e.eventRoot=rk.select(e.settings.event_root)[0]),e.eventRoot):e.getBody()},ik=function(e){return!e.hidden&&!e.readonly},ak=function(e,t,n){ik(e)?e.fire(t,n):nk(e)&&n.preventDefault()},sk=function(e,t){var n,r;if(e.delegates||(e.delegates={}),!e.delegates[t]&&!e.removed)if(n=ok(e,t),e.settings.event_root){if(UC||(UC={},e.editorManager.on("removeEditor",function(){var t;if(!e.editorManager.activeEditor&&UC){for(t in UC)e.dom.unbind(ok(e,t));UC=null}})),UC[t])return;r=function(n){for(var r=n.target,o=e.editorManager.get(),i=o.length;i--;){var a=o[i].getBody();(a===r||rk.isChildOf(r,a))&&ak(o[i],t,n)}},UC[t]=r,rk.bind(n,t,r)}else r=function(n){ak(e,t,n)},rk.bind(n,t,r),e.delegates[t]=r},lk={bindPendingEventDelegates:function(){var e=this;vr.each(e._pendingNativeEvents,function(t){sk(e,t)})},toggleNativeEvent:function(e,t){var n=this;"focus"!==e&&"blur"!==e&&(t?n.initialized?sk(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(ok(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents:function(){var e,t=this,n=t.getBody(),r=t.dom;if(t.delegates){for(e in t.delegates)t.dom.unbind(ok(t,e),e,t.delegates[e]);delete t.delegates}!t.inline&&n&&r&&(n.onload=null,r.unbind(t.getWin()),r.unbind(t.getDoc())),r&&(r.unbind(n),r.unbind(t.getContainer()))}};lk=vr.extend({},WC,lk);var uk,ck=lk,dk=vr.each,fk=vr.explode,hk={f9:120,f10:121,f11:122},pk=vr.makeMap("alt,ctrl,shift,meta,access"),mk=function(e){return fu.first(e).isSome()},gk=function(e,t,n){return fu.ancestor(e,t,n).isSome()},vk=function(e,t,n){return fu.closest(e,t,n).isSome()},bk=function(e,t){return fu.sibling(e,t).isSome()},yk=function(e,t){return fu.child(e,t).isSome()},wk=function(e,t){return fu.descendant(e,t).isSome()},xk={any:mk,ancestor:gk,closest:vk,sibling:bk,child:yk,descendant:wk},Ck=function(e){e.dom().focus()},kk=function(e){e.dom().blur()},Nk=function(e){var t=ba.owner(e).dom();return e.dom()===t.activeElement},_k=function(e){var t=void 0!==e?e.dom():document;return Ee.from(t.activeElement).map(Mo.fromDom)},Sk=function(e){var t=ba.owner(e);_k(t).filter(function(t){return xk.closest(t,be(Ji.eq,e))}).fold(function(){Ck(e)},pe)},Tk=function(e){return _k(ba.owner(e)).filter(function(t){return e.dom().contains(t.dom())})},Ek={hasFocus:Nk,focus:Ck,blur:kk,active:_k,search:Tk,focusInside:Sk},Ok=function(e,t){return e.dom.getParent(t,function(t){return"true"===e.dom.getContentEditable(t)})},Ak=function(e){return e.collapsed?Ee.from(Gc(e.startContainer,e.startOffset)).map(Mo.fromDom):Ee.none()},Dk=function(e,t){return Ak(t).bind(function(t){return es(t)?Ee.some(t):!1===Ji.contains(e,t)?Ee.some(e):Ee.none()})},Rk=function(e,t){Dk(Mo.fromDom(e.getBody()),t).bind(function(e){return Ip.firstPositionIn(e.dom())}).fold(function(){e.selection.normalize()},function(t){return e.selection.setRng(t.toRange())})},Mk=function(e){if(e.setActive)try{e.setActive()}catch(t){e.focus()}else e.focus()},Pk=function(e){return Ek.hasFocus(e)||Ek.search(e).isSome()},Lk=function(e){return e.iframeElement&&Ek.hasFocus(Mo.fromDom(e.iframeElement))},Ik=function(e){var t=e.getBody();return t&&Pk(Mo.fromDom(t))},jk=function(e){return e.inline?Ik(e):Lk(e)},Bk=function(e){var t=e.selection,n=e.settings.content_editable,r=e.getBody(),o=t.getRng();e.quirks.refreshContentEditable();var i=Ok(e,t.getNode());if(e.$.contains(r,i))return Mk(i),Rk(e,o),void Fk(e);void 0!==e.bookmark&&!1===jk(e)&&RC.getRng(e).each(function(t){e.selection.setRng(t),o=t}),n||(_t.opera||Mk(r),e.getWin().focus()),(_t.gecko||n)&&(Mk(r),Rk(e,o)),Fk(e)},Fk=function(e){return e.editorManager.setActive(e)},Hk=function(e,t){e.removed||(t?Fk(e):Bk(e))},Uk={focus:Hk,hasFocus:jk},zk=function(e,t){return t.dom()[e]},Wk=function(e,t){return parseInt(Ei.get(t,e),10)},Vk=be(zk,"clientWidth"),qk=be(zk,"clientHeight"),$k=be(Wk,"margin-top"),Kk=be(Wk,"margin-left"),Gk=function(e){return e.dom().getBoundingClientRect()},Xk=function(e,t,n){var r=Vk(e),o=qk(e);return t>=0&&n>=0&&t<=r&&n<=o},Yk=function(e,t,n,r){var o=Gk(t);return{x:n-(e?o.left+t.dom().clientLeft+Kk(t):0),y:r-(e?o.top+t.dom().clientTop+$k(t):0)}},Jk=function(e,t,n){var r=Mo.fromDom(e.getBody()),o=e.inline?r:ba.documentElement(r),i=Yk(e.inline,o,t,n);return Xk(o,i.x,i.y)},Qk=function(e){return Ee.from(e).map(Mo.fromDom)},Zk=function(e){var t=e.inline?e.getBody():e.getContentAreaContainer();return Qk(t).map(function(e){return Ji.contains(ba.owner(e),e)}).getOr(!1)},eN={isXYInContentArea:Jk,isEditorAttachedToDom:Zk},tN=C.PluginManager,nN=function(e,t){for(var n in tN.urls){if(tN.urls[n]+"/plugin"+t+".js"===e)return n}return null},rN=function(e,t){var n=nN(t,e.suffix);return n?"Failed to load plugin: "+n+" from url "+t:"Failed to load plugin url: "+t},oN=function(e,t){e.notificationManager.open({type:"error",text:t})},iN=function(e,t){e._skinLoaded?oN(e,t):e.on("SkinLoaded",function(){oN(e,t)})},aN=function(e,t){iN(e,"Failed to upload image: "+t)},sN=function(e,t){iN(e,rN(e,t))},lN=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=window.console;r&&(r.error?r.error.apply(r,arguments):r.log.apply(r,arguments))},uN={pluginLoadError:sN,uploadError:aN,displayError:iN,initError:lN},cN=C.PluginManager,dN=C.ThemeManager,fN=function(e){mt.getOrDie("requestAnimationFrame")(e)},hN=function(e){return mt.getOrDie("atob")(e)},pN={atob:hN,requestAnimationFrame:fN},mN=function(e){return new St(function(t,n){var r=function(){n("Cannot convert "+e+" to Blob. Resource might not exist or is inaccessible.")};try{var o=new L;o.open("GET",e,!0),o.responseType="blob",o.onload=function(){200===this.status?t(this.response):r()},o.onerror=r,o.send()}catch(e){r()}})},gN=function(e){var t,n;return e=decodeURIComponent(e).split(","),n=/data:([^;]+)/.exec(e[0]),n&&(t=n[1]),{type:t,data:e[1]}},vN=function(e){return new St(function(t){var n,r,o;e=gN(e);try{n=pN.atob(e.data)}catch(e){return void t(new j([]))}for(r=new F(n.length),o=0;o<r.length;o++)r[o]=n.charCodeAt(o);t(new j([r],{type:e.type}))})},bN=function(e){return 0===e.indexOf("blob:")?mN(e):0===e.indexOf("data:")?vN(e):null},yN=function(e){return new St(function(t){var n=new B;n.onloadend=function(){t(n.result)},n.readAsDataURL(e)})},wN={uriToBlob:bN,blobToDataUri:yN,parseDataUri:gN},xN=0,CN=function(e){return(e||"blobid")+xN++},kN=function(e,t,n,r){var o,i;if(0===t.src.indexOf("blob:"))return i=e.getByUri(t.src),void(i?n({image:t,blobInfo:i}):wN.uriToBlob(t.src).then(function(r){wN.blobToDataUri(r).then(function(a){o=wN.parseDataUri(a).data,i=e.create(CN(),r,o),e.add(i),n({image:t,blobInfo:i})})},function(e){r(e)}));o=wN.parseDataUri(t.src).data,i=e.findFirst(function(e){return e.base64()===o}),i?n({image:t,blobInfo:i}):wN.uriToBlob(t.src).then(function(r){i=e.create(CN(),r,o),e.add(i),n({image:t,blobInfo:i})},function(e){r(e)})},NN=function(e){return e?e.getElementsByTagName("img"):[]},_N=0,SN=function(){var e=function(){return Math.round(4294967295*Math.random()).toString(36)};return"s"+(new Date).getTime().toString(36)+e()+e()+e()},TN=function(e){return e+_N+++SN()},EN={uuid:TN},ON=function(e,t){return e.hasOwnProperty(t.nodeName)},AN=function(e,t){return!!ws.isText(t)||!!ws.isElement(t)&&(!ON(e,t)&&!am.isBookmarkNode(t))},DN=function(e,t,n){return Ue(nb.parents(Mo.fromDom(n),Mo.fromDom(t)),function(t){return ON(e,t.dom())})},RN=function(e,t){if(ws.isText(t)){if(0===t.nodeValue.length)return!0;if(/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||ON(e,t.nextSibling)))return!0}return!1},MN=function(e){var t,n,r,o,i,a,s,l,u,c,d,f=e.settings,h=e.dom,p=e.selection,m=e.schema,g=m.getBlockElements(),v=p.getStart(),b=e.getBody();if(d=f.forced_root_block,v&&ws.isElement(v)&&d&&(c=b.nodeName.toLowerCase(),m.isValidChild(c,d.toLowerCase())&&!DN(g,b,v))){for(t=p.getRng(),n=t.startContainer,r=t.startOffset,o=t.endContainer,i=t.endOffset,u=Uk.hasFocus(e),v=b.firstChild;v;)if(AN(g,v)){if(RN(g,v)){s=v,v=v.nextSibling,h.remove(s);continue}a||(a=h.create(d,e.settings.forced_root_block_attrs),v.parentNode.insertBefore(a,v),l=!0),s=v,v=v.nextSibling,a.appendChild(s)}else a=null,v=v.nextSibling;l&&u&&(t.setStart(n,r),t.setEnd(o,i),p.setRng(t),e.nodeChanged())}},PN=function(e){e.settings.forced_root_block&&e.on("NodeChange",be(MN,e))},LN={setup:PN},IN=function(e){var t=e.startContainer,n=e.startOffset;return ws.isText(t)?0===n?Ee.some(Mo.fromDom(t)):Ee.none():Ee.from(t.childNodes[n]).map(Mo.fromDom)},jN=function(e){var t=e.endContainer,n=e.endOffset;return ws.isText(t)?n===t.data.length?Ee.some(Mo.fromDom(t)):Ee.none():Ee.from(t.childNodes[n-1]).map(Mo.fromDom)},BN=function(e){return ba.firstChild(e).fold(ge([e]),function(t){return[e].concat(BN(t))})},FN=function(e){return ba.lastChild(e).fold(ge([e]),function(t){return"br"===Wo.name(t)?ba.prevSibling(t).map(function(t){return[e].concat(FN(t))}).getOr([]):[e].concat(FN(t))})},HN=function(e,t){return Jc([IN(t),jN(t)],function(t,n){var r=Xe(BN(e),be(Ji.eq,t)),o=Xe(FN(e),be(Ji.eq,n));return r.isSome()&&o.isSome()}).getOr(!1)},UN=function(e,t,n,r){var o=n,i=new b(n,o),a=e.schema.getNonEmptyElements();do{if(3===n.nodeType&&0!==vr.trim(n.nodeValue).length)return void(r?t.setStart(n,0):t.setEnd(n,n.nodeValue.length));if(a[n.nodeName]&&!/^(TD|TH)$/.test(n.nodeName))return void(r?t.setStartBefore(n):"BR"===n.nodeName?t.setEndBefore(n):t.setEndAfter(n));if(_t.ie&&_t.ie<11&&e.isBlock(n)&&e.isEmpty(n))return void(r?t.setStart(n,0):t.setEnd(n,0))}while(n=r?i.next():i.prev());"BODY"===o.nodeName&&(r?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},zN=function(e){var t=e.selection.getSel();return t&&t.rangeCount>0},WN=function(e){var t,n,r,o;return o=e.getBoundingClientRect(),t=e.ownerDocument,n=t.documentElement,r=t.defaultView,{top:o.top+r.pageYOffset-n.clientTop,left:o.left+r.pageXOffset-n.clientLeft}},VN=function(e){return e.inline?WN(e.getBody()):{left:0,top:0}},qN=function(e){var t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},$N=function(e){var t=e.getBody(),n=e.getDoc().documentElement,r={left:t.scrollLeft,top:t.scrollTop},o={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?r:o},KN=function(e,t){if(t.target.ownerDocument!==e.getDoc()){var n=WN(e.getContentAreaContainer()),r=$N(e);return{left:t.pageX-n.left+r.left,top:t.pageY-n.top+r.top}}return{left:t.pageX,top:t.pageY}},GN=function(e,t,n){return{pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}},XN=function(e,t){return GN(VN(e),qN(e),KN(e,t))},YN={calc:XN},JN=ws.isContentEditableFalse,QN=ws.isContentEditableTrue,ZN=function(e,t){return JN(t)&&t!==e},e_=function(e,t,n){return t!==n&&!e.dom.isChildOf(t,n)&&!JN(t)},t_=function(e){var t=e.cloneNode(!0);return t.removeAttribute("data-mce-selected"),t},n_=function(e,t,n,r){var o=t.cloneNode(!0);e.dom.setStyles(o,{width:n,height:r}),e.dom.setAttrib(o,"data-mce-selected",null);var i=e.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return e.dom.setStyles(i,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),e.dom.setStyles(o,{margin:0,boxSizing:"border-box"}),i.appendChild(o),i},r_=function(e,t){e.parentNode!==t&&t.appendChild(e)},o_=function(e,t,n,r,o,i){var a=0,s=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>o&&(a=t.pageX+n-o),t.pageY+r>i&&(s=t.pageY+r-i),e.style.width=n-a+"px",e.style.height=r-s+"px"},i_=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},a_=function(e){return 0===e.button},s_=function(e){return e.element},l_=function(e,t){return{pageX:t.pageX-e.relX,pageY:t.pageY+5}},u_=function(e,t){return function(n){if(a_(n)){var r=or.find(t.dom.getParents(n.target),tc.or(JN,QN));if(ZN(t.getBody(),r)){var o=t.dom.getPos(r),i=t.getBody(),a=t.getDoc().documentElement;e.element=r,e.screenX=n.screenX,e.screenY=n.screenY,e.maxX=(t.inline?i.scrollWidth:a.offsetWidth)-2,e.maxY=(t.inline?i.scrollHeight:a.offsetHeight)-2,e.relX=n.pageX-o.x,e.relY=n.pageY-o.y,e.width=r.offsetWidth,e.height=r.offsetHeight,e.ghost=n_(t,r,e.width,e.height)}}}},c_=function(e,t){var n=Mt.throttle(function(e,n){t._selectionOverrides.hideFakeCaret(),t.selection.placeCaretAt(e,n)},0);return function(r){var o=Math.max(Math.abs(r.screenX-e.screenX),Math.abs(r.screenY-e.screenY));if(s_(e)&&!e.dragging&&o>10){if(t.fire("dragstart",{target:e.element}).isDefaultPrevented())return;e.dragging=!0,t.focus()}if(e.dragging){var i=l_(e,YN.calc(t,r));r_(e.ghost,t.getBody()),o_(e.ghost,i,e.width,e.height,e.maxX,e.maxY),n(r.clientX,r.clientY)}}},d_=function(e){var t=e.getSel().getRangeAt(0),n=t.startContainer;return 3===n.nodeType?n.parentNode:n},f_=function(e,t){return function(n){if(e.dragging&&e_(t,d_(t.selection),e.element)){var r=t_(e.element),o=t.fire("drop",{targetClone:r,clientX:n.clientX,clientY:n.clientY});o.isDefaultPrevented()||(r=o.targetClone,t.undoManager.transact(function(){i_(e.element),t.insertContent(t.dom.getOuterHTML(r)),t._selectionOverrides.hideFakeCaret()}))}p_(e)}},h_=function(e,t){return function(){e.dragging&&t.fire("dragend"),p_(e)}},p_=function(e){e.dragging=!1,e.element=null,i_(e.ghost)},m_=function(e){var t,n,r,o,i,a,s={};t=il.DOM,a=document,n=u_(s,e),r=c_(s,e),o=f_(s,e),i=h_(s,e),e.on("mousedown",n),e.on("mousemove",r),e.on("mouseup",o),t.bind(a,"mousemove",r),t.bind(a,"mouseup",i),e.on("remove",function(){t.unbind(a,"mousemove",r),t.unbind(a,"mouseup",i)})},g_=function(e){e.on("drop",function(t){var n=void 0!==t.clientX?e.getDoc().elementFromPoint(t.clientX,t.clientY):null;(JN(n)||JN(e.dom.getContentEditableParent(n)))&&t.preventDefault()})},v_=function(e){m_(e),g_(e)},b_={init:v_},y_=function(e){var t=function(t){return or.map(t,function(t){return t=jc(t),t.node=e,t})};if(ws.isElement(e))return t(e.getClientRects());if(ws.isText(e)){var n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}},w_=function(e){return or.reduce(e,function(e,t){return e.concat(y_(t))},[])};!function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"}(uk||(uk={}));var x_=function(e,t,n,r){for(;r=lp(r,e,Lc,t);)if(n(r))return},C_=function(e,t,n,r,o,i){var a,s,l=0,u=[],c=function(r){var i,a,c;for(c=w_([r]),-1===e&&(c=c.reverse()),i=0;i<c.length;i++)if(a=c[i],!n(a,s)){if(u.length>0&&t(a,or.last(u))&&l++,a.line=l,o(a))return!0;u.push(a)}};return(s=or.last(i.getClientRects()))?(a=i.getNode(),c(a),x_(e,r,c,a),u):u},k_=function(e,t){return t.line>e},N_=function(e,t){return t.line===e},__=be(C_,uk.Up,Uc,zc),S_=be(C_,uk.Down,zc,Uc),T_=function(e,t,n,r){var o,i,a,s,l,u,c=Pf(t),d=[],f=0,h=function(e){return or.last(e.getClientRects())};1===e?(o=c.next,i=zc,a=Uc,s=yd.after(r)):(o=c.prev,i=Uc,a=zc,s=yd.before(r)),u=h(s);do{if(s.isVisible()&&(l=h(s),!a(l,u))){if(d.length>0&&i(l,or.last(d))&&f++,l=jc(l),l.position=s,l.line=f,n(l))return d;d.push(l)}}while(s=o(s));return d},E_=function(e){return function(t){return k_(e,t)}},O_=function(e){return function(t){return N_(e,t)}},A_=ws.isContentEditableFalse,D_=lp,R_=function(e,t){return Math.abs(e.left-t)},M_=function(e,t){return Math.abs(e.right-t)},P_=function(e,t){return e>=t.left&&e<=t.right},L_=function(e,t){return or.reduce(e,function(e,n){var r,o;return r=Math.min(R_(e,t),M_(e,t)),o=Math.min(R_(n,t),M_(n,t)),P_(t,n)?n:P_(t,e)?e:o===r&&A_(n.node)?n:o<r?n:e})},I_=function(e,t,n,r){for(;r=D_(r,e,Lc,t);)if(n(r))return},j_=function(e,t){var n=[],r=function(e,r){var o;return o=or.filter(w_([r]),function(n){return!e(n,t)}),n=n.concat(o),0===o.length};return n.push(t),I_(uk.Up,e,be(r,Uc),t.node),I_(uk.Down,e,be(r,zc),t.node),n},B_=function(e){return or.filter(or.toArray(e.getElementsByTagName("*")),Jh)},F_=function(e,t){return{node:e.node,before:R_(e,t)<M_(e,t)}},H_=function(e,t,n){var r,o=w_(B_(e)),i=or.filter(o,function(e){return n>=e.top&&n<=e.bottom});return r=L_(i,t),r&&(r=L_(j_(e,r),t))&&Jh(r.node)?F_(r,t):null},U_=function(e,t,n){return!n.collapsed&&Ge(n.getClientRects(),function(n,r){return n||Wc(r,e,t)},!1)},z_={isXYWithinRange:U_},W_=function(e){var t=El(function(){if(!e.removed){if(e.selection.getRng().collapsed){var t=wf(e,e.selection.getRng(),!1);e.selection.setRng(t)}}},0);e.on("focus",function(){t.throttle()}),e.on("blur",function(){t.cancel()})},V_={setup:W_},q_={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(e){return _t.mac?e.metaKey:e.ctrlKey&&!e.altKey}},$_=ws.isContentEditableTrue,K_=ws.isContentEditableFalse,G_=kp,X_=Cp,Y_=function(e,t){for(var n=e.getBody();t&&t!==n;){if($_(t)||K_(t))return t;t=t.parentNode}return null},J_=function(e){var t,n=function(t){return e.dom.isBlock(t)},r=e.getBody(),o=Yh(e.getBody(),n,function(){return Uk.hasFocus(e)}),i="sel-"+e.dom.uniqueId(),a=function(t){return e.dom.hasClass(t,"mce-offscreen-selection")},s=function(){var t=e.dom.get(i);return t?t.getElementsByTagName("*")[0]:t},l=function(t){t&&e.selection.setRng(t)},u=function(){return e.selection.getRng()},c=function(t,n,r,i){void 0===i&&(i=!0);var a;return a=e.fire("ShowCaret",{target:n,direction:t,before:r}),a.isDefaultPrevented()?null:(i&&e.selection.scrollIntoView(n,-1===t),o.show(r,n))},d=function(e,t){return t=vp(e,r,t),-1===e?yd.fromRangeStart(t):yd.fromRangeEnd(t)},f=function(t){t.hasAttribute("data-mce-caret")&&(yc(t),l(u()),e.selection.scrollIntoView(t[0]))},h=function(e){return uc(e)||gc(e)||vc(e)},p=function(e){return h(e.startContainer)||h(e.endContainer)},m=function(n,r){var o,a,s,l,u,f,h,m,g,v,y=e.$,w=e.dom;if(!n)return null;if(n.collapsed){if(!p(n))if(!1===r){if(m=d(-1,n),Jh(m.getNode(!0)))return c(-1,m.getNode(!0),!1,!1);if(Jh(m.getNode()))return c(-1,m.getNode(),!m.isAtEnd(),!1)}else{if(m=d(1,n),Jh(m.getNode()))return c(1,m.getNode(),!m.isAtEnd(),!1);if(Jh(m.getNode(!0)))return c(1,m.getNode(!0),!1,!1)}return null}return l=n.startContainer,u=n.startOffset,f=n.endOffset,3===l.nodeType&&0===u&&K_(l.parentNode)&&(l=l.parentNode,u=w.nodeIndex(l),l=l.parentNode),1!==l.nodeType?null:(f===u+1&&(o=l.childNodes[u]),K_(o)?(g=v=o.cloneNode(!0),h=e.fire("ObjectSelected",{target:o,targetClone:g}),h.isDefaultPrevented()?null:(a=yu.descendant(Mo.fromDom(e.getBody()),"#"+i).fold(function(){return y([])},function(e){return y([e.dom()])}),g=h.targetClone,0===a.length&&(a=y('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",i),a.appendTo(e.getBody())),n=e.dom.createRng(),g===v&&_t.ie?(a.empty().append('<p style="font-size: 0" data-mce-bogus="all">\xa0</p>').append(g),n.setStartAfter(a[0].firstChild.firstChild),n.setEndAfter(g)):(a.empty().append("\xa0").append(g).append("\xa0"),n.setStart(a[0].firstChild,1),n.setEnd(a[0].lastChild,0)),a.css({top:w.getPos(o,e.getBody()).y}),a[0].focus(),s=e.selection.getSel(),s.removeAllRanges(),s.addRange(n),We(iu.descendants(Mo.fromDom(e.getBody()),"*[data-mce-selected]"),function(e){ii.remove(e,"data-mce-selected")}),o.setAttribute("data-mce-selected","1"),t=o,b(),n)):null)},g=function(){t&&(t.removeAttribute("data-mce-selected"),yu.descendant(Mo.fromDom(e.getBody()),"#"+i).each(Tl.remove),t=null),yu.descendant(Mo.fromDom(e.getBody()),"#"+i).each(Tl.remove),t=null},v=function(){o.destroy(),t=null},b=function(){o.hide()};return _t.ceFalse&&(function(){e.on("mouseup",function(t){var n=u();n.collapsed&&eN.isXYInContentArea(e,t.clientX,t.clientY)&&l(yf(e,n,!1))}),e.on("click",function(t){var n;(n=Y_(e,t.target))&&(K_(n)&&(t.preventDefault(),e.focus()),$_(n)&&e.dom.isChildOf(n,e.selection.getNode())&&g())}),e.on("blur NewBlock",function(){g()}),e.on("ResizeWindow FullscreenStateChanged",function(){return o.reposition()});var n=function(e){var t=Pf(e);if(!e.firstChild)return!1;var n=yd.before(e.firstChild),r=t.next(n);return r&&!X_(r)&&!G_(r)},i=function(t,n){return e.dom.getParent(t,e.dom.isBlock)===e.dom.getParent(n,e.dom.isBlock)},d=function(t,r){var o=e.dom.getParent(t,e.dom.isBlock),a=e.dom.getParent(r,e.dom.isBlock);return!(!o||!e.dom.isChildOf(o,a)||!1!==K_(Y_(e,o)))||o&&!i(o,a)&&n(o)};!function(e){var t=!1;e.on("touchstart",function(){t=!1}),e.on("touchmove",function(){t=!0}),e.on("touchend",function(n){var r=Y_(e,n.target);K_(r)&&(t||(n.preventDefault(),m(bf(e,r))))})}(e),e.on("mousedown",function(t){var n,o=t.target;if((o===r||"HTML"===o.nodeName||e.dom.isChildOf(o,r))&&!1!==eN.isXYInContentArea(e,t.clientX,t.clientY))if(n=Y_(e,o))K_(n)?(t.preventDefault(),m(bf(e,n))):(g(),$_(n)&&t.shiftKey||z_.isXYWithinRange(t.clientX,t.clientY,e.selection.getRng())||(b(),e.selection.placeCaretAt(t.clientX,t.clientY)));else if(!1===Jh(o)){g(),b();var i=H_(r,t.clientX,t.clientY);if(i&&!d(t.target,i.node)){t.preventDefault();var a=c(1,i.node,i.before,!1);e.getBody().focus(),l(a)}}}),e.on("keypress",function(t){q_.modifierPressed(t)||(t.keyCode,K_(e.selection.getNode())&&t.preventDefault())}),e.on("getSelectionRange",function(e){var n=e.range;if(t){if(!t.parentNode)return void(t=null);n=n.cloneRange(),n.selectNode(t),e.range=n}}),e.on("setSelectionRange",function(e){var t;(t=m(e.range,e.forward))&&(e.range=t)});var f=function(e){return"mcepastebin"===e.id};e.on("AfterSetSelectionRange",function(e){var t=e.range;p(t)||f(t.startContainer.parentNode)||b(),a(t.startContainer.parentNode)||g()}),e.on("copy",function(e){var t=e.clipboardData;if(!e.isDefaultPrevented()&&e.clipboardData&&!_t.ie){var n=s();n&&(e.preventDefault(),t.clearData(),t.setData("text/html",n.outerHTML),t.setData("text/plain",n.outerText))}}),b_.init(e),V_.setup(e)}(),function(){var t=e.contentStyles;t.push(o.getCss()),t.push(".mce-content-body .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}.mce-content-body *[contentEditable=false] {cursor: default;}.mce-content-body *[contentEditable=true] {cursor: text;}")}()),{showCaret:c,showBlockCaretContainer:f,hideFakeCaret:b,destroy:v}},Q_=function(e){return 0===e.indexOf("data-")||0===e.indexOf("aria-")},Z_=function(e){return e.replace(/<!--|-->/g,"")},eS=function(e,t){return!e.allow_html_data_urls&&(/^data:image\//i.test(t)?!1===e.allow_svg_data_urls&&/^data:image\/svg\+xml/i.test(t):/^data:/i.test(t))},tS=function(e,t,n){var r,o,i,a,s=1;for(a=e.getShortEndedElements(),i=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g,i.lastIndex=r=n;o=i.exec(t);){if(r=i.lastIndex,"/"===o[1])s--;else if(!o[1]){if(o[2]in a)continue;s++}if(0===s)break}return r};!function(e){e.findEndTag=tS}(q||(q={}));var nS=q,rS=function(e,t){var n=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(n,"")},oS=function(e,t){var n,r,o,i,a,s=t,l=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,u=e.schema;for(s=rS(e.getTempAttrs(),s),a=u.getShortEndedElements();i=l.exec(s);)r=l.lastIndex,o=i[0].length,n=a[i[1]]?r:nS.findEndTag(u,s,r),s=s.substring(0,r-o)+s.substring(n),l.lastIndex=r-o;return oc.trim(s)},iS=oS,aS={trimExternal:iS,trimInternal:oS},sS=function(e,t){var n=e.length+t.length+2,r=new Array(n),o=new Array(n),i=function(e,t,n){return{start:e,end:t,diag:n}},a=function(n,r,o,i,s){var u=l(n,r,o,i);if(null===u||u.start===r&&u.diag===r-i||u.end===n&&u.diag===n-o)for(var c=n,d=o;c<r||d<i;)c<r&&d<i&&e[c]===t[d]?(s.push([0,e[c]]),++c,++d):r-n>i-o?(s.push([2,e[c]]),++c):(s.push([1,t[d]]),++d);else{a(n,u.start,o,u.start-u.diag,s);for(var f=u.start;f<u.end;++f)s.push([0,e[f]]);a(u.end,r,u.end-u.diag,i,s)}},s=function(n,r,o,a){for(var s=n;s-r<a&&s<o&&e[s]===t[s-r];)++s;return i(n,s,r)},l=function(n,i,a,l){var u=i-n,c=l-a;if(0===u||0===c)return null;var d=u-c,f=c+u,h=(f%2==0?f:f+1)/2;r[1+h]=n,o[1+h]=i+1;var p,m,g,v,b;for(p=0;p<=h;++p){for(m=-p;m<=p;m+=2){for(g=m+h,m===-p||m!==p&&r[g-1]<r[g+1]?r[g]=r[g+1]:r[g]=r[g-1]+1,v=r[g],b=v-n+a-m;v<i&&b<l&&e[v]===t[b];)r[g]=++v,++b;if(d%2!=0&&d-p<=m&&m<=d+p&&o[g-d]<=r[g])return s(o[g-d],m+n-a,i,l)}for(m=d-p;m<=d+p;m+=2){for(g=m+h-d,m===d-p||m!==d+p&&o[g+1]<=o[g-1]?o[g]=o[g+1]-1:o[g]=o[g-1],v=o[g]-1,b=v-n+a-m;v>=n&&b>=a&&e[v]===t[b];)o[g]=v--,b--;if(d%2==0&&-p<=m&&m<=p&&o[g]<=r[g+d])return s(o[g],m+n-a,i,l)}}},u=[];return a(0,e.length,0,t.length,u),u},lS={KEEP:0,DELETE:2,INSERT:1,diff:sS},uS=function(e){return ws.isElement(e)?e.outerHTML:ws.isText(e)?Fs.encodeRaw(e.data,!1):ws.isComment(e)?"\x3c!--"+e.data+"--\x3e":""},cS=function(e){var t,n,r;for(r=document.createElement("div"),t=document.createDocumentFragment(),e&&(r.innerHTML=e);n=r.firstChild;)t.appendChild(n);return t},dS=function(e,t,n){var r=cS(t);if(e.hasChildNodes()&&n<e.childNodes.length){var o=e.childNodes[n];o.parentNode.insertBefore(r,o)}else e.appendChild(r)},fS=function(e,t){if(e.hasChildNodes()&&t<e.childNodes.length){var n=e.childNodes[t];n.parentNode.removeChild(n)}},hS=function(e,t){var n=0;or.each(e,function(e){e[0]===lS.KEEP?n++:e[0]===lS.INSERT?(dS(t,e[1],n),n++):e[0]===lS.DELETE&&fS(t,n)})},pS=function(e){return or.filter(or.map(e.childNodes,uS),function(e){return e.length>0})},mS=function(e,t){var n=or.map(t.childNodes,uS);return hS(lS.diff(n,e),t),t},gS={read:pS,write:mS},vS=function(e,t){var n=t||document,r=n.createElement("div");return r.innerHTML=e,ba.children(Mo.fromDom(r))},bS=function(e,t){return ze(e,function(e){return Mo.fromTag(e,t)})},yS=function(e,t){return ze(e,function(e){return Mo.fromText(e,t)})},wS=function(e){return ze(e,Mo.fromDom)},xS={fromHtml:vS,fromTags:bS,fromText:yS,fromDom:wS},CS=function(e){return e.dom().innerHTML},kS=function(e,t){var n=ba.owner(e),r=n.dom(),o=Mo.fromDom(r.createDocumentFragment()),i=xS.fromHtml(t,r);kl.append(o,i),Tl.empty(e),bl.append(e,o)},NS=function(e){var t=Mo.fromTag("div"),n=Mo.fromDom(e.dom().cloneNode(!0));return bl.append(t,n),CS(t)},_S={get:CS,set:kS,getOuter:NS},SS=Al(Ee.none()),TS=function(){return SS.get().getOrThunk(function(){var e=document.implementation.createHTMLDocument("undo");return SS.set(Ee.some(e)),e})},ES=function(e){return-1!==e.indexOf("</iframe>")},OS=function(e){return{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}},AS=function(e){return{type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}},DS=function(e){var t,n,r;return t=gS.read(e.getBody()),r=et(t,function(t){var n=aS.trimInternal(e.serializer,t);return n.length>0?[n]:[]}),n=r.join(""),ES(n)?OS(r):AS(n)},RS=function(e,t,n){"fragmented"===t.type?gS.write(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw"}),e.selection.moveToBookmark(n?t.beforeBookmark:t.bookmark)},MS=function(e){return"fragmented"===e.type?e.fragments.join(""):e.content},PS=function(e){var t=Mo.fromTag("body",TS());return _S.set(t,MS(e)),We(iu.descendants(t,"*[data-mce-bogus]"),Tl.unwrap),_S.get(t)},LS=function(e,t){return MS(e)===MS(t)},IS=function(e,t){return PS(e)===PS(t)},jS=function(e,t){return!(!e||!t)&&(!!LS(e,t)||IS(e,t))},BS={createFragmentedLevel:OS,createCompleteLevel:AS,createFromEditor:DS,applyToEditor:RS,isEq:jS},FS=ym.isEq,HS=function(e,t,n){var r=e.formatter.get(n);if(r)for(var o=0;o<r.length;o++)if(!1===r[o].inherit&&e.dom.is(t,r[o].selector))return!0;return!1},US=function(e,t,n,r){var o=e.dom.getRoot();return t!==o&&(t=e.dom.getParent(t,function(t){return!!HS(e,t,n)||(t.parentNode===o||!!VS(e,t,n,r,!0))}),VS(e,t,n,r))},zS=function(e,t,n){return!!FS(t,n.inline)||(!!FS(t,n.block)||(n.selector?1===t.nodeType&&e.is(t,n.selector):void 0))},WS=function(e,t,n,r,o,i){var a,s,l,u=n[r];if(n.onmatch)return n.onmatch(t,n,r);if(u)if(void 0===u.length){for(a in u)if(u.hasOwnProperty(a)){if(s="attributes"===r?e.getAttrib(t,a):ym.getStyle(e,t,a),o&&!s&&!n.exact)return;if((!o||n.exact)&&!FS(s,ym.normalizeStyleValue(e,ym.replaceVars(u[a],i),a)))return}}else for(l=0;l<u.length;l++)if("attributes"===r?e.getAttrib(t,u[l]):ym.getStyle(e,t,u[l]))return n;return n},VS=function(e,t,n,r,o){var i,a,s,l,u=e.formatter.get(n),c=e.dom;if(u&&t)for(a=0;a<u.length;a++)if(i=u[a],zS(e.dom,t,i)&&WS(c,t,i,"attributes",o,r)&&WS(c,t,i,"styles",o,r)){if(l=i.classes)for(s=0;s<l.length;s++)if(!e.dom.hasClass(t,l[s]))return;return i}},qS=function(e,t,n,r){var o;return r?US(e,r,t,n):(r=e.selection.getNode(),!!US(e,r,t,n)||!((o=e.selection.getStart())===r||!US(e,o,t,n)))},$S=function(e,t,n){var r,o=[],i={};return r=e.selection.getStart(),e.dom.getParent(r,function(r){var a,s;for(a=0;a<t.length;a++)s=t[a],!i[s]&&VS(e,r,s,n)&&(i[s]=!0,o.push(s))},e.dom.getRoot()),o},KS=function(e,t){var n,r,o,i,a,s=e.formatter.get(t),l=e.dom;if(s)for(n=e.selection.getStart(),r=ym.getParents(l,n),i=s.length-1;i>=0;i--){if(!(a=s[i].selector)||s[i].defaultBlock)return!0;for(o=r.length-1;o>=0;o--)if(l.is(r[o],a))return!0}return!1},GS={matchNode:VS,matchName:zS,match:qS,matchAll:$S,canApply:KS,matchesUnInheritedFormatSelector:HS},XS=function(e,t){return e.splitText(t)},YS=function(e){var t=e.startContainer,n=e.startOffset,r=e.endContainer,o=e.endOffset;return t===r&&ws.isText(t)?n>0&&n<t.nodeValue.length&&(r=XS(t,n),t=r.previousSibling,o>n?(o-=n,t=r=XS(r,o).previousSibling,o=r.nodeValue.length,n=0):o=0):(ws.isText(t)&&n>0&&n<t.nodeValue.length&&(t=XS(t,n),n=0),ws.isText(r)&&o>0&&o<r.nodeValue.length&&(r=XS(r,o).previousSibling,o=r.nodeValue.length)),{startContainer:t,startOffset:n,endContainer:r,endOffset:o}},JS={split:YS},QS=oc.ZWSP,ZS=function(e,t){return e.importNode(t,!0)},eT=function(e){for(var t=[];e;){if(3===e.nodeType&&e.nodeValue!==QS||e.childNodes.length>1)return[];1===e.nodeType&&t.push(e),e=e.firstChild}return t},tT=function(e){return eT(e).length>0},nT=function(e){var t;if(e)for(t=new b(e,e),e=t.current();e;e=t.next())if(3===e.nodeType)return e;return null},rT=function(e){var t=Mo.fromTag("span");return ii.setAll(t,{id:"_mce_caret","data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&bl.append(t,Mo.fromText(QS)),t},oT=function(e){var t=nT(e);return t&&t.nodeValue.charAt(0)===QS&&t.deleteData(0,1),t},iT=function(e,t,n,r){var o,i,a;o=t.getRng(!0),i=e.getParent(n,e.isBlock),tT(n)?(!1!==r&&(o.setStartBefore(n),o.setEndBefore(n)),e.remove(n)):(a=oT(n),o.startContainer===a&&o.startOffset>0&&o.setStart(a,o.startOffset-1),o.endContainer===a&&o.endOffset>0&&o.setEnd(a,o.endOffset-1),e.remove(n,!0)),i&&e.isEmpty(i)&&Sg.fillWithPaddingBr(Mo.fromDom(i)),t.setRng(o)},aT=function(e,t,n,r,o){if(r)iT(t,n,r,o);else if(!(r=Qd(e,n.getStart())))for(;r=t.get("_mce_caret");)iT(t,n,r,!1)},sT=function(e,t,n){var r=e.dom,o=r.getParent(n,tc.curry(ym.isTextBlock,e));o&&r.isEmpty(o)?n.parentNode.replaceChild(t,n):(Sg.removeTrailingBr(Mo.fromDom(n)),r.isEmpty(n)?n.parentNode.replaceChild(t,n):r.insertAfter(t,n))},lT=function(e,t){return e.appendChild(t),t},uT=function(e,t){var n=Ke(e,function(e,t){return lT(e,t.cloneNode(!1))},t);return lT(n,n.ownerDocument.createTextNode(QS))},cT=function(e,t,n){var r,o,i,a,s,l,u,c=e.selection;r=c.getRng(!0),a=r.startOffset,l=r.startContainer,u=l.nodeValue,(o=Qd(e.getBody(),c.getStart()))&&(i=nT(o));var d=/[^\s\u00a0\u00ad\u200b\ufeff]/;u&&a>0&&a<u.length&&d.test(u.charAt(a))&&d.test(u.charAt(a-1))?(s=c.getBookmark(),r.collapse(!0),r=Pm.expandRng(e,r,e.formatter.get(t)),r=JS.split(r),e.formatter.apply(t,n,r),c.moveToBookmark(s)):(o&&i.nodeValue===QS?e.formatter.apply(t,n,o):(o=ZS(e.getDoc(),rT(!0).dom()),i=o.firstChild,r.insertNode(o),a=1,e.formatter.apply(t,n,o)),c.setCursorLocation(i,a))},dT=function(e,t,n,r){var o,i,a,s,l,u,c,d=e.dom,f=e.selection,h=[],p=f.getRng();for(o=p.startContainer,i=p.startOffset,l=o,3===o.nodeType&&(i!==o.nodeValue.length&&(s=!0),l=l.parentNode);l;){if(GS.matchNode(e,l,t,n,r)){u=l;break}l.nextSibling&&(s=!0),h.push(l),l=l.parentNode}if(u)if(s){a=f.getBookmark(),p.collapse(!0);var m=Pm.expandRng(e,p,e.formatter.get(t),!0);m=JS.split(m),e.formatter.remove(t,n,m),f.moveToBookmark(a)}else{c=Qd(e.getBody(),u);var g=rT(!1).dom(),v=uT(h,g);c?sT(e,g,c):sT(e,g,u),iT(d,f,c,!1),f.setCursorLocation(v,1),d.isEmpty(u)&&d.remove(u)}},fT=function(e,t,n,r){aT(e,t,n,null,!1),8===r&&n.isCollapsed()&&n.getStart().innerHTML===QS&&aT(e,t,n,Qd(e,n.getStart())),37!==r&&39!==r||aT(e,t,n,Qd(e,n.getStart()))},hT=function(e){var t=e.dom,n=e.selection,r=e.getBody();e.on("mouseup keydown",function(e){fT(r,t,n,e.keyCode)})},pT=function(e,t){var n=rT(!1),r=uT(t,n.dom());return bl.before(Mo.fromDom(e),n),Tl.remove(Mo.fromDom(e)),yd(r,0)},mT=function(e,t){return e.schema.getTextInlineElements().hasOwnProperty(Wo.name(t))&&!Jd(t.dom())&&!ws.isBogus(t.dom())},gT={},vT=or.filter,bT=or.each,yT=function(e,t){bT(gT[e],function(e){e(t)})};!function(e,t){var n=gT[e];n||(gT[e]=n=[]),gT[e].push(t)}("pre",function(e){var t,n,r=e.selection.getRng(),o=function(e){return t(e.previousSibling)&&-1!==or.indexOf(n,e.previousSibling)},i=function(e,t){jr(t).remove(),jr(e).append("<br><br>").append(t.childNodes)};t=ws.matchNodeNames("pre"),r.collapsed||(n=e.selection.getSelectedBlocks(),bT(vT(vT(n,t),o),function(e){i(e.previousSibling,e)}))});var wT={postProcess:yT},xT=/^(src|href|style)$/,CT=vr.each,kT=ym.isEq,NT=function(e){return/^(TH|TD)$/.test(e.nodeName)},_T=function(e,t,n){var r,o,i;return r=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"],ws.isElement(r)&&(i=r.childNodes.length-1,!n&&o&&o--,r=r.childNodes[o>i?i:o]),ws.isText(r)&&n&&o>=r.nodeValue.length&&(r=new b(r,e.getBody()).next()||r),ws.isText(r)&&!n&&0===o&&(r=new b(r,e.getBody()).prev()||r),r},ST=function(e,t,n,r){var o=e.create(n,r);return t.parentNode.insertBefore(o,t),o.appendChild(t),o},TT=function(e,t,n){return!!kT(t,n.inline)||(!!kT(t,n.block)||(n.selector?ws.isElement(t)&&e.is(t,n.selector):void 0))},ET=function(e,t){return t.links&&"A"===e.tagName},OT=function(e,t,n,r){return!(t=ym.getNonWhiteSpaceSibling(t,n,r))||"BR"===t.nodeName||e.isBlock(t)},AT=function(e,t,n){var r,o=t.parentNode,i=e.dom,a=e.settings.forced_root_block;n.block&&(a?o===i.getRoot()&&(n.list_block&&kT(t,n.list_block)||CT(vr.grep(t.childNodes),function(t){ym.isValid(e,a,t.nodeName.toLowerCase())?r?r.appendChild(t):(r=ST(i,t,a),i.setAttribs(r,e.settings.forced_root_block_attrs)):r=0})):i.isBlock(t)&&!i.isBlock(o)&&(OT(i,t,!1)||OT(i,t.firstChild,!0,1)||t.insertBefore(i.create("br"),t.firstChild),OT(i,t,!0)||OT(i,t.lastChild,!1,1)||t.appendChild(i.create("br")))),n.selector&&n.inline&&!kT(n.inline,t)||i.remove(t,1)},DT=function(e,t,n,r,o){var i,a,s,l=e.dom;if(!TT(l,r,t)&&!ET(r,t))return!1;if("all"!==t.remove)for(CT(t.styles,function(e,i){e=ym.normalizeStyleValue(l,ym.replaceVars(e,n),i),"number"==typeof i&&(i=e,o=0),(t.remove_similar||!o||kT(ym.getStyle(l,o,i),e))&&l.setStyle(r,i,""),s=1}),s&&""===l.getAttrib(r,"style")&&(r.removeAttribute("style"),r.removeAttribute("data-mce-style")),CT(t.attributes,function(e,t){var i;if(e=ym.replaceVars(e,n),"number"==typeof t&&(t=e,o=0),!o||kT(l.getAttrib(o,t),e)){if("class"===t&&(e=l.getAttrib(r,t))&&(i="",CT(e.split(/\s+/),function(e){/mce\-\w+/.test(e)&&(i+=(i?" ":"")+e)}),i))return void l.setAttrib(r,t,i);"class"===t&&r.removeAttribute("className"),xT.test(t)&&r.removeAttribute("data-mce-"+t),r.removeAttribute(t)}}),CT(t.classes,function(e){e=ym.replaceVars(e,n),o&&!l.hasClass(o,e)||l.removeClass(r,e)}),a=l.getAttribs(r),i=0;i<a.length;i++){var u=a[i].nodeName;if(0!==u.indexOf("_")&&0!==u.indexOf("data-"))return!1}return"none"!==t.remove?(AT(e,r,t),!0):void 0},RT=function(e,t,n,r,o){var i;return CT(ym.getParents(e.dom,t.parentNode).reverse(),function(t){var a;i||"_start"===t.id||"_end"===t.id||(a=GS.matchNode(e,t,n,r,o))&&!1!==a.split&&(i=t)}),i},MT=function(e,t,n,r,o,i,a,s){var l,u,c,d,f,h,p=e.dom;if(n){for(h=n.parentNode,l=r.parentNode;l&&l!==h;l=l.parentNode){for(u=p.clone(l,!1),f=0;f<t.length;f++)if(DT(e,t[f],s,u,u)){u=0;break}u&&(c&&u.appendChild(c),d||(d=u),c=u)}!i||a.mixed&&p.isBlock(n)||(r=p.split(n,r)),c&&(o.parentNode.insertBefore(c,o),d.appendChild(o))}return r},PT=function(e,t,n,r,o){var i,a,s=e.formatter.get(t),l=s[0],u=!0,c=e.dom,d=e.selection,f=function(r){var i=RT(e,r,t,n,o);return MT(e,s,i,r,r,!0,l,n)},h=function(t){var r,o,i,a,d;if(ws.isElement(t)&&c.getContentEditable(t)&&(a=u,u="true"===c.getContentEditable(t),d=!0),r=vr.grep(t.childNodes),u&&!d)for(o=0,i=s.length;o<i&&!DT(e,s[o],n,t,t);o++);if(l.deep&&r.length){for(o=0,i=r.length;o<i;o++)h(r[o]);d&&(u=a)}},p=function(e){var t=c.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return am.isBookmarkNode(n)&&(n=n[e?"firstChild":"lastChild"]),ws.isText(n)&&0===n.data.length&&(n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),c.remove(t,!0),n},m=function(t){var n,r,o=t.commonAncestorContainer;if(t=Pm.expandRng(e,t,s,!0),l.split){if(n=_T(e,t,!0),r=_T(e,t),n!==r){if(/^(TR|TH|TD)$/.test(n.nodeName)&&n.firstChild&&(n="TR"===n.nodeName?n.firstChild.firstChild||n:n.firstChild||n),o&&/^T(HEAD|BODY|FOOT|R)$/.test(o.nodeName)&&NT(r)&&r.firstChild&&(r=r.firstChild||r),c.isChildOf(n,r)&&n!==r&&!c.isBlock(r)&&!NT(n)&&!NT(r))return n=ST(c,n,"span",{id:"_start","data-mce-type":"bookmark"}),f(n),void(n=p(!0));n=ST(c,n,"span",{id:"_start","data-mce-type":"bookmark"}),r=ST(c,r,"span",{id:"_end","data-mce-type":"bookmark"}),f(n),f(r),n=p(!0),r=p()}else n=r=f(n);t.startContainer=n.parentNode?n.parentNode:n,t.startOffset=c.nodeIndex(n),t.endContainer=r.parentNode?r.parentNode:r,t.endOffset=c.nodeIndex(r)+1}Bm.walk(c,t,function(t){CT(t,function(t){h(t),ws.isElement(t)&&"underline"===e.dom.getStyle(t,"text-decoration")&&t.parentNode&&"underline"===ym.getTextDecoration(c,t.parentNode)&&DT(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,t)})})};if(r)return void(r.nodeType?(a=c.createRng(),a.setStartBefore(r),a.setEndAfter(r),m(a)):m(r));if("false"!==c.getContentEditable(d.getNode()))d.isCollapsed()&&l.inline&&!c.select("td[data-mce-selected],th[data-mce-selected]").length?dT(e,t,n,o):(i=Yd.getPersistentBookmark(e.selection,!0),m(d.getRng()),d.moveToBookmark(i),l.inline&&GS.match(e,t,n,d.getStart())&&ym.moveStart(c,d,d.getRng()),e.nodeChanged());else{r=d.getNode();for(var g=0,v=s.length;g<v&&(!s[g].ceFalseOverride||!DT(e,s[g],n,r,r));g++);}},LT={removeFormat:DT,remove:PT},IT=vr.each,jT=function(e){return e&&1===e.nodeType&&!am.isBookmarkNode(e)&&!Jd(e)&&!ws.isBogus(e)},BT=function(e,t){var n;for(n=e;n;n=n[t]){if(3===n.nodeType&&0!==n.nodeValue.length)return e;if(1===n.nodeType&&!am.isBookmarkNode(n))return n}return e},FT=function(e,t,n){var r,o,i=new yg(e);if(t&&n&&(t=BT(t,"previousSibling"),n=BT(n,"nextSibling"),i.compare(t,n))){for(r=t.nextSibling;r&&r!==n;)o=r,r=r.nextSibling,t.appendChild(o);return e.remove(n),vr.each(vr.grep(n.childNodes),function(e){t.appendChild(e)}),t}return n},HT=function(e,t,n){IT(e.childNodes,function(e){jT(e)&&(t(e)&&n(e),e.hasChildNodes()&&HT(e,t,n))})},UT=function(e,t){return be(function(t,n){return!(!n||!ym.getStyle(e,n,t))},t)},zT=function(e,t,n){return be(function(t,n,r){e.setStyle(r,t,n),""===r.getAttribute("style")&&r.removeAttribute("style"),WT(e,r)},t,n)},WT=function(e,t){"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)},VT=function(e,t){var n;1===t.nodeType&&t.parentNode&&1===t.parentNode.nodeType&&(n=ym.getTextDecoration(e,t.parentNode),e.getStyle(t,"color")&&n?e.setStyle(t,"text-decoration",n):e.getStyle(t,"text-decoration")===n&&e.setStyle(t,"text-decoration",null))},qT=function(e,t,n,r){(t.styles.color||t.styles.textDecoration)&&(vr.walk(r,be(VT,e),"childNodes"),VT(e,r))},$T=function(e,t,n,r){t.styles&&t.styles.backgroundColor&&HT(r,UT(e,"fontSize"),zT(e,"backgroundColor",ym.replaceVars(t.styles.backgroundColor,n)))},KT=function(e,t,n,r){"sub"!==t.inline&&"sup"!==t.inline||(HT(r,UT(e,"fontSize"),zT(e,"fontSize","")),e.remove(e.select("sup"===t.inline?"sub":"sup",r),!0))},GT=function(e,t,n,r){r&&!1!==t.merge_siblings&&(r=FT(e,ym.getNonWhiteSpaceSibling(r),r),r=FT(e,r,ym.getNonWhiteSpaceSibling(r,!0)))},XT=function(e,t,n){if(t.clear_child_styles){var r=t.links?"*:not(a)":"*";IT(e.select(r,n),function(n){jT(n)&&IT(t.styles,function(t,r){e.setStyle(n,r,"")})})}},YT=function(e,t,n,r){IT(t,function(t){IT(e.dom.select(t.inline,r),function(r){jT(r)&&LT.removeFormat(e,t,n,r,t.exact?r:null)}),XT(e.dom,t,r)})},JT=function(e,t,n,r,o){GS.matchNode(e,o.parentNode,n,r)&&LT.removeFormat(e,t,r,o)||t.merge_with_parents&&e.dom.getParent(o.parentNode,function(i){if(GS.matchNode(e,i,n,r))return LT.removeFormat(e,t,r,o),!0})},QT={mergeWithChildren:YT,mergeUnderlineAndColor:qT,mergeBackgroundColorAndFontSize:$T,mergeSubSup:KT,mergeSiblings:GT,mergeWithParents:JT},ZT=vr.each,eE=function(e){return e&&1===e.nodeType&&!am.isBookmarkNode(e)&&!Jd(e)&&!ws.isBogus(e)},tE=function(e,t,n,r){var o,i,a=e.formatter.get(t),s=a[0],l=!r&&e.selection.isCollapsed(),u=e.dom,c=e.selection,d=function(e,t){if(t=t||s,e){if(t.onformat&&t.onformat(e,t,n,r),ZT(t.styles,function(t,r){u.setStyle(e,r,ym.replaceVars(t,n))}),t.styles){var o=u.getAttrib(e,"style");o&&e.setAttribute("data-mce-style",o)}ZT(t.attributes,function(t,r){u.setAttrib(e,r,ym.replaceVars(t,n))}),ZT(t.classes,function(t){t=ym.replaceVars(t,n),u.hasClass(e,t)||u.addClass(e,t)})}},f=function(e,t){var n=!1;return!!s.selector&&(ZT(e,function(e){if(!("collapsed"in e&&e.collapsed!==l))return u.is(t,e.selector)&&!Jd(t)?(d(t,e),n=!0,!1):void 0}),n)},h=function(r,o,i,l){var u,c,h=[],p=!0;u=s.inline||s.block,c=r.create(u),d(c),Bm.walk(r,o,function(o){var i,m=function(o){var g,v,b,y;if(y=p,g=o.nodeName.toLowerCase(),v=o.parentNode.nodeName.toLowerCase(),1===o.nodeType&&r.getContentEditable(o)&&(y=p,p="true"===r.getContentEditable(o),b=!0),ym.isEq(g,"br"))return i=0,void(s.block&&r.remove(o));if(s.wrapper&&GS.matchNode(e,o,t,n))return void(i=0);if(p&&!b&&s.block&&!s.wrapper&&ym.isTextBlock(e,g)&&ym.isValid(e,v,u))return o=r.rename(o,u),d(o),h.push(o),void(i=0);if(s.selector){var w=f(a,o);if(!s.inline||w)return void(i=0)}!p||b||!ym.isValid(e,u,g)||!ym.isValid(e,v,u)||!l&&3===o.nodeType&&1===o.nodeValue.length&&65279===o.nodeValue.charCodeAt(0)||Jd(o)||s.inline&&r.isBlock(o)?(i=0,ZT(vr.grep(o.childNodes),m),b&&(p=y),i=0):(i||(i=r.clone(c,!1),o.parentNode.insertBefore(i,o),h.push(i)),i.appendChild(o))};ZT(o,m)}),!0===s.links&&ZT(h,function(e){var t=function(e){"A"===e.nodeName&&d(e,s),ZT(vr.grep(e.childNodes),t)};t(e)}),ZT(h,function(o){var i,l=function(e){var t=!1;return ZT(e.childNodes,function(e){if(eE(e))return t=e,!1}),t};if(i=function(e){var t=0;return ZT(e.childNodes,function(e){ym.isWhiteSpaceNode(e)||am.isBookmarkNode(e)||t++}),t}(o),(h.length>1||!r.isBlock(o))&&0===i)return void r.remove(o,1);(s.inline||s.wrapper)&&(s.exact||1!==i||(o=function(e){var t,n;return t=l(e),t&&!am.isBookmarkNode(t)&&GS.matchName(r,t,s)&&(n=r.clone(t,!1),d(n),r.replace(n,e,!0),r.remove(t,1)),n||e}(o)),QT.mergeWithChildren(e,a,n,o),QT.mergeWithParents(e,s,t,n,o),QT.mergeBackgroundColorAndFontSize(r,s,n,o),QT.mergeSubSup(r,s,n,o),QT.mergeSiblings(r,s,n,o))})};if("false"!==u.getContentEditable(c.getNode())){if(s){if(r)r.nodeType?f(a,r)||(i=u.createRng(),i.setStartBefore(r),i.setEndAfter(r),h(u,Pm.expandRng(e,i,a),0,!0)):h(u,r,0,!0);else if(l&&s.inline&&!u.select("td[data-mce-selected],th[data-mce-selected]").length)cT(e,t,n);else{var p=e.selection.getNode();e.settings.forced_root_block||!a[0].defaultBlock||u.getParent(p,u.isBlock)||tE(e,a[0].defaultBlock),e.selection.setRng(Dg.normalize(e.selection.getRng())),o=Yd.getPersistentBookmark(e.selection,!0),h(u,Pm.expandRng(e,c.getRng(),a)),s.styles&&QT.mergeUnderlineAndColor(u,s,n,p),c.moveToBookmark(o),ym.moveStart(u,c,c.getRng()),e.nodeChanged()}wT.postProcess(t,e)}}else{r=c.getNode();for(var m=0,g=a.length;m<g;m++)if(a[m].ceFalseOverride&&u.is(r,a[m].selector))return void d(r,a[m])}},nE={applyFormat:tE},rE=vr.each,oE=function(e,t){var n={};e.set({}),t.on("NodeChange",function(r){var o=ym.getParents(t.dom,r.element),i={};o=vr.grep(o,function(e){return 1===e.nodeType&&!e.getAttribute("data-mce-bogus")}),rE(e.get(),function(e,r){rE(o,function(a){return t.formatter.matchNode(a,r,{},e.similar)?(n[r]||(rE(e,function(e){e(!0,{node:a,format:r,parents:o})}),n[r]=e),i[r]=e,!1):!GS.matchesUnInheritedFormatSelector(t,a,r)&&void 0})}),rE(n,function(e,t){i[t]||(delete n[t],rE(e,function(e){e(!1,{node:r.element,format:t,parents:o})}))})})},iE=function(e,t,n,r){var o=e.get();rE(t.split(","),function(e){o[e]||(o[e]=[],o[e].similar=r),o[e].push(n)}),e.set(o)},aE=function(e,t,n,r,o){null===t.get()&&oE(t,e),iE(t,n,r,o)},sE={formatChanged:aE},lE=function(e){var t={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(t,n,r){vr.each(r,function(n,r){e.setAttrib(t,r,n)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return vr.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){t[e]={block:e,remove:"all"}}),t},uE={get:lE},cE=vr.each,dE=il.DOM,fE=function(e,t){var n,r,o,i=t&&t.schema||y({}),a=function(e,t){t.classes.length&&dE.addClass(e,t.classes.join(" ")),dE.setAttribs(e,t.attrs)},s=function(e){var t;return r="string"==typeof e?{name:e,classes:[],attrs:{}}:e,t=dE.create(r.name),a(t,r),t},l=function(e,t){var n="string"!=typeof e?e.nodeName.toLowerCase():e,r=i.getElementRule(n),o=r&&r.parentsRequired;return!(!o||!o.length)&&(t&&-1!==vr.inArray(o,t)?t:o[0])},u=function(e,t,n){var r,o,i,a=t.length>0&&t[0],c=a&&a.name;if(i=l(e,c))c===i?(o=t[0],t=t.slice(1)):o=i;else if(a)o=t[0],t=t.slice(1);else if(!n)return e;return o&&(r=s(o),r.appendChild(e)),n&&(r||(r=dE.create("div"),r.appendChild(e)),vr.each(n,function(t){var n=s(t);r.insertBefore(n,e)})),u(r,t,o&&o.siblings)};return e&&e.length?(r=e[0],n=s(r),o=dE.create("div"),o.appendChild(u(n,e.slice(1),r.siblings)),o):""},hE=function(e,t){return fE(mE(e),t)},pE=function(e){var t,n={classes:[],attrs:{}};return e=n.selector=vr.trim(e),"*"!==e&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(e,t,r,o,i){switch(t){case"#":n.attrs.id=r;break;case".":n.classes.push(r);break;case":":-1!==vr.inArray("checked disabled enabled read-only required".split(" "),r)&&(n.attrs[r]=r)}if("["===o){var a=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);a&&(n.attrs[a[1]]=a[2])}return""})),n.name=t||"div",n},mE=function(e){return e&&"string"==typeof e?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),vr.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),function(e){var t=vr.map(e.split(/(?:~\+|~|\+)/),pE),n=t.pop();return t.length&&(n.siblings=t),n}).reverse()):[]},gE=function(e,t){var n,r,o,i,a,s,l="";if(!1===(s=e.settings.preview_styles))return"";"string"!=typeof s&&(s="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");var u=function(e){return e.replace(/%(\w+)/g,"")};if("string"==typeof t){if(!(t=e.formatter.get(t)))return;t=t[0]}return"preview"in t&&!1===(s=t.preview)?"":(n=t.block||t.inline||"span",i=mE(t.selector),i.length?(i[0].name||(i[0].name=n),n=t.selector,r=fE(i,e)):r=fE([n],e),o=dE.select(n,r)[0]||r.firstChild,cE(t.styles,function(e,t){(e=u(e))&&dE.setStyle(o,t,e)}),cE(t.attributes,function(e,t){(e=u(e))&&dE.setAttrib(o,t,e)}),cE(t.classes,function(e){e=u(e),dE.hasClass(o,e)||dE.addClass(o,e)}),e.fire("PreviewFormats"),dE.setStyles(r,{position:"absolute",left:-65535}),e.getBody().appendChild(r),a=dE.getStyle(e.getBody(),"fontSize",!0),a=/px$/.test(a)?parseInt(a,10):0,cE(s.split(" "),function(t){var n=dE.getStyle(o,t,!0);if(!("background-color"===t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=dE.getStyle(e.getBody(),t,!0),"#ffffff"===dE.toHex(n).toLowerCase())||"color"===t&&"#000000"===dE.toHex(n).toLowerCase())){if("font-size"===t&&/em|%$/.test(n)){if(0===a)return;n=parseFloat(n)/(/%$/.test(n)?100:1)*a+"px"}"border"===t&&n&&(l+="padding:0 2px;"),l+=t+":"+n+";"}}),e.fire("AfterPreviewFormats"),dE.remove(r),l)},vE={getCssText:gE,parseSelector:mE,selectorToHtml:hE},bE=function(e,t,n,r,o){var i=t.get(n);!GS.match(e,n,r,o)||"toggle"in i[0]&&!i[0].toggle?nE.applyFormat(e,n,r,o):LT.remove(e,n,r,o)},yE={toggle:bE},wE=function(e){e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(var t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},xE={setup:wE},CE=Object.prototype.hasOwnProperty,kE=function(e,t){return t},NE=function(e){return function(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];if(0===t.length)throw new Error("Can't merge zero objects");for(var r={},o=0;o<t.length;o++){var i=t[o];for(var a in i)CE.call(i,a)&&(r[a]=e(r[a],i[a]))}return r}}(kE),_E=function(e,t,n){e.addAttributeFilter("data-mce-tabindex",function(e,t){for(var n,r=e.length;r--;)n=e[r],n.attr("tabindex",n.attributes.map["data-mce-tabindex"]),n.attr(t,null)}),e.addAttributeFilter("src,href,style",function(e,r){for(var o,i,a=e.length,s="data-mce-"+r,l=t.url_converter,u=t.url_converter_scope;a--;)o=e[a],i=o.attributes.map[s],void 0!==i?(o.attr(r,i.length>0?i:null),o.attr(s,null)):(i=o.attributes.map[r],"style"===r?i=n.serializeStyle(n.parseStyle(i),o.name):l&&(i=l.call(u,i,r,o.name)),o.attr(r,i.length>0?i:null))}),e.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)t=e[r],(n=t.attr("class"))&&(n=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",n.length>0?n:null))}),e.addAttributeFilter("data-mce-type",function(e,t,n){for(var r,o=e.length;o--;)r=e[o],"bookmark"!==r.attributes.map["data-mce-type"]||n.cleanup||r.remove()}),e.addNodeFilter("noscript",function(e){for(var t,n=e.length;n--;)(t=e[n].firstChild)&&(t.value=Fs.decode(t.value))}),e.addNodeFilter("script,style",function(e,n){for(var r,o,i,a=e.length,s=function(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};a--;)r=e[a],o=r.firstChild?r.firstChild.value:"","script"===n?(i=r.attr("type"),i&&r.attr("type","mce-no/type"===i?null:i.replace(/^mce\-/,"")),"xhtml"===t.element_format&&o.length>0&&(r.firstChild.value="// <![CDATA[\n"+s(o)+"\n// ]]>")):"xhtml"===t.element_format&&o.length>0&&(r.firstChild.value="\x3c!--\n"+s(o)+"\n--\x3e")}),e.addNodeFilter("#comment",function(e){for(var t,n=e.length;n--;)t=e[n],0===t.value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),e.addNodeFilter("xml:namespace,input",function(e,t){for(var n,r=e.length;r--;)n=e[r],7===n.type?n.remove():1===n.type&&("input"!==t||"type"in n.attributes.map||n.attr("type","text"))}),e.addAttributeFilter("data-mce-type",function(t){We(t,function(t){"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(e.schema.getNonEmptyElements())?t.remove():t.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)})},SE=function(e){var t,n,r=function(e){return e&&"br"===e.name};t=e.lastChild,r(t)&&(n=t.prev,r(n)&&(t.remove(),n.remove()))},TE={register:_E,trimTrailingBr:SE},EE=function(e,t,n){var r,o,i,a=e.dom;return t=t.cloneNode(!0),r=document.implementation,r.createHTMLDocument&&(o=r.createHTMLDocument(""),vr.each("BODY"===t.nodeName?t.childNodes:[t],function(e){o.body.appendChild(o.importNode(e,!0))}),t="BODY"!==t.nodeName?o.body.firstChild:o.body,i=a.doc,a.doc=o),YC.firePreProcess(e,NE(n,{node:t})),i&&(a.doc=i),t},OE=function(e,t){return e&&e.hasEventListeners("PreProcess")&&!t.no_events},AE=function(e,t,n){return OE(e,n)?EE(e,t,n):t},DE={process:AE},RE=function(e,t){We(t,function(t){e.attr(t,null)})},ME=function(e,t,n){e.addNodeFilter("font",function(e){We(e,function(e){var r=t.parse(e.attr("style")),o=e.attr("color"),i=e.attr("face"),a=e.attr("size");o&&(r.color=o),i&&(r["font-family"]=i),a&&(r["font-size"]=n[parseInt(e.attr("size"),10)-1]),e.name="span",e.attr("style",t.serialize(r)),RE(e,["color","face","size"])})})},PE=function(e,t){e.addNodeFilter("strike",function(e){We(e,function(e){var n=t.parse(e.attr("style"));n["text-decoration"]="line-through",e.name="span",e.attr("style",t.serialize(n))})})},LE=function(e,t){var n=w();t.convert_fonts_to_spans&&ME(e,n,vr.explode(t.font_size_legacy_values)),PE(e,n)},IE=function(e,t){t.inline_styles&&LE(e,t)},jE={register:IE},BE=/^[ \t\r\n]*$/,FE={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},HE=function(e,t,n){var r,o,i=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[i])return e[i];if(e!==t){if(r=e[a])return r;for(o=e.parent;o&&o!==t;o=o.parent)if(r=o[a])return r}},UE=function(){function e(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}return e.create=function(t,n){var r,o;if(r=new e(t,FE[t]||1),n)for(o in n)r.attr(o,n[o]);return r},e.prototype.replace=function(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t},e.prototype.attr=function(e,t){var n,r,o=this;if("string"!=typeof e){for(r in e)o.attr(r,e[r]);return o}if(n=o.attributes){if(void 0!==t){if(null===t){if(e in n.map)for(delete n.map[e],r=n.length;r--;)if(n[r].name===e)return n=n.splice(r,1),o;return o}if(e in n.map){for(r=n.length;r--;)if(n[r].name===e){n[r].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,o}return n.map[e]}},e.prototype.clone=function(){var t,n,r,o,i,a=this,s=new e(a.name,a.type);if(r=a.attributes){for(i=[],i.map={},t=0,n=r.length;t<n;t++)o=r[t],"id"!==o.name&&(i[i.length]={name:o.name,value:o.value},i.map[o.name]=o.value);s.attributes=i}return s.value=a.value,s.shortEnded=a.shortEnded,s},e.prototype.wrap=function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},e.prototype.unwrap=function(){var e,t,n=this;for(e=n.firstChild;e;)t=e.next,n.insert(e,n,!0),e=t;n.remove()},e.prototype.remove=function(){var e=this,t=e.parent,n=e.next,r=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):r.next=n,t.lastChild===e?(t.lastChild=r,r&&(r.next=null)):n.prev=r,e.parent=e.next=e.prev=null),e},e.prototype.append=function(e){var t,n=this;return e.parent&&e.remove(),t=n.lastChild,t?(t.next=e,e.prev=t,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e},e.prototype.insert=function(e,t,n){var r;return e.parent&&e.remove(),r=t.parent||this,n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=r,e},e.prototype.getAll=function(e){var t,n=this,r=[];for(t=n.firstChild;t;t=HE(t,n))t.name===e&&r.push(t);return r},e.prototype.empty=function(){var e,t,n,r=this;if(r.firstChild){for(e=[],n=r.firstChild;n;n=HE(n,r))e.push(n);for(t=e.length;t--;)n=e[t],n.parent=n.firstChild=n.lastChild=n.next=n.prev=null}return r.firstChild=r.lastChild=null,r},e.prototype.isEmpty=function(e,t,n){var r,o,i=this,a=i.firstChild;if(t=t||{},a)do{if(1===a.type){if(a.attributes.map["data-mce-bogus"])continue;if(e[a.name])return!1;for(r=a.attributes.length;r--;)if("name"===(o=a.attributes[r].name)||0===o.indexOf("data-mce-bookmark"))return!1}if(8===a.type)return!1;if(3===a.type&&!BE.test(a.value))return!1;if(3===a.type&&a.parent&&t[a.parent.name]&&BE.test(a.value))return!1;if(n&&n(a))return!1}while(a=HE(a,i));return!0},e.prototype.walk=function(e){return HE(this,null,e)},e}(),zE=function(e,t,n,r){(e.padd_empty_with_br||t.insert)&&n[r.name]?r.empty().append(new UE("br",1)).shortEnded=!0:r.empty().append(new UE("#text",3)).value="\xa0"},WE=function(e){return VE(e,"#text")&&"\xa0"===e.firstChild.value},VE=function(e,t){return e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t},qE=function(e,t){var n=e.getElementRule(t.name);return n&&n.paddEmpty},$E=function(e,t,n,r){return r.isEmpty(t,n,function(t){return qE(e,t)})},KE=function(e,t){return e&&(t[e.name]||"br"===e.name)},GE=function(e,t){var n=e.schema;t.remove_trailing_brs&&e.addNodeFilter("br",function(e,r,o){var i,a,s,l,u,c,d,f,h=e.length,p=vr.extend({},n.getBlockElements()),m=n.getNonEmptyElements(),g=n.getNonEmptyElements();for(p.body=1,i=0;i<h;i++)if(a=e[i],s=a.parent,p[a.parent.name]&&a===s.lastChild){for(u=a.prev;u;){if("span"!==(c=u.name)||"bookmark"!==u.attr("data-mce-type")){if("br"!==c)break;if("br"===c){a=null;break}}u=u.prev}a&&(a.remove(),$E(n,m,g,s)&&(d=n.getElementRule(s.name))&&(d.removeEmpty?s.remove():d.paddEmpty&&zE(t,o,p,s)))}else{for(l=a;s&&s.firstChild===l&&s.lastChild===l&&(l=s,!p[s.name]);)s=s.parent;l===s&&!0!==t.padd_empty_with_br&&(f=new UE("#text",3),f.value="\xa0",a.replace(f))}}),e.addAttributeFilter("href",function(e){var n,r=e.length,o=function(e){return e.split(" ").filter(function(e){return e.length>0}).concat(["noopener"]).sort().join(" ")};if(!t.allow_unsafe_link_target)for(;r--;)n=e[r],"a"===n.name&&"_blank"===n.attr("target")&&n.attr("rel",function(e){var t=e?vr.trim(e):"";return/\b(noopener)\b/g.test(t)?t:o(t)}(n.attr("rel")))}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",function(e){for(var t,n,r,o,i=e.length;i--;)if(o=e[i],"a"===o.name&&o.firstChild&&!o.attr("href")){r=o.parent,t=o.lastChild;do{n=t.prev,r.insert(t,o),t=n}while(t)}}),t.fix_list_elements&&e.addNodeFilter("ul,ol",function(e){for(var t,n,r=e.length;r--;)if(t=e[r],n=t.parent,"ul"===n.name||"ol"===n.name)if(t.prev&&"li"===t.prev.name)t.prev.append(t);else{var o=new UE("li",1);o.attr("style","list-style-type: none"),t.wrap(o)}}),t.validate&&n.getValidClasses()&&e.addAttributeFilter("class",function(e){for(var t,r,o,i,a,s,l,u=e.length,c=n.getValidClasses();u--;){for(t=e[u],r=t.attr("class").split(" "),a="",o=0;o<r.length;o++)i=r[o],l=!1,s=c["*"],s&&s[i]&&(l=!0),s=c[t.name],!l&&s&&s[i]&&(l=!0),l&&(a&&(a+=" "),a+=i);a.length||(a=null),t.attr("class",a)}})},XE=vr.makeMap,YE=vr.each,JE=vr.explode,QE=vr.extend,ZE=function(e,t,n){-1===vr.inArray(t,n)&&(e.addAttributeFilter(n,function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),t.push(n))},eO=function(e,t,n){if(!t.no_events&&e){return YC.firePostProcess(e,NE(t,{content:n})).content}return n},tO=function(e,t,n){var r=oc.trim(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||ns(Mo.fromDom(t))?r:vr.trim(r)},nO=function(e,t,n){var r=n.selection?NE({forced_root_block:!1},n):n,o=e.parse(t,r);return TE.trimTrailingBr(o),o},rO=function(e,t,n){return E(e,t).serialize(n)},oO=function(e,t,n,r,o){var i=rO(t,n,r);return eO(e,o,i)};!function(e){e.isBookmarkNode=am.isBookmarkNode}(Q||(Q={}));var iO=Q,aO=ws.isContentEditableFalse,sO=ws.isContentEditableTrue,lO=function(e,t){for(;t&&t!==e;){if(sO(t)||aO(t))return t;t=t.parentNode}return null},uO=function(e,t){var n,r,o,i,a,s,l,u,c,d,f,h,p,m,g,v,b,y=t.dom,w=vr.each,x=t.getDoc(),C=document,k=Math.abs,N=Math.round,_=t.getBody();i={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var S=".mce-content-body";t.contentStyles.push(S+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: content-box;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+S+" .mce-resizehandle:hover {background: #000}"+S+" img[data-mce-selected],"+S+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+S+" .mce-clonedresizable {position: absolute;"+(_t.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+S+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}");var T=function(e){return e&&("IMG"===e.nodeName||t.dom.is(e,"figure.image"))},E=function(e,t){return T(e.target)&&!z_.isXYWithinRange(e.clientX,e.clientY,t)},O=function(e){var n=e.target;E(e,t.selection.getRng())&&!e.isDefaultPrevented()&&(e.preventDefault(),t.selection.select(n))},A=function(e){return t.dom.is(e,"figure.image")?e.querySelector("img"):e},D=function(e){var n=t.settings.object_resizing;return!1!==n&&!_t.iOS&&("string"!=typeof n&&(n="table,img,figure.image,div"),"false"!==e.getAttribute("data-mce-resize")&&(e!==t.getBody()&&Wi.is(Mo.fromDom(e),n)))},R=function(e){var i,w,x,C,S;i=e.screenX-s,w=e.screenY-l,m=i*a[2]+d,g=w*a[3]+f,m=m<5?5:m,g=g<5?5:g,x=T(n)&&!1!==t.settings.resize_img_proportional?!q_.modifierPressed(e):q_.modifierPressed(e)||T(n)&&a[2]*a[3]!=0,x&&(k(i)>k(w)?(g=N(m*h),m=N(g/h)):(m=N(g/h),g=N(m*h))),y.setStyles(A(r),{width:m,height:g}),C=a.startPos.x+i,S=a.startPos.y+w,C=C>0?C:0,S=S>0?S:0,y.setStyles(o,{left:C,top:S,display:"block"}),o.innerHTML=m+" &times; "+g,a[2]<0&&r.clientWidth<=m&&y.setStyle(r,"left",u+(d-m)),a[3]<0&&r.clientHeight<=g&&y.setStyle(r,"top",c+(f-g)),i=_.scrollWidth-v,w=_.scrollHeight-b,i+w!==0&&y.setStyles(o,{left:C-i,top:S-w}),p||(YC.fireObjectResizeStart(t,n,d,f),p=!0)},M=function(){p=!1;var e=function(e,r){r&&(n.style[e]||!t.schema.isValid(n.nodeName.toLowerCase(),e)?y.setStyle(A(n),e,r):y.setAttrib(A(n),e,r))};e("width",m),e("height",g),y.unbind(x,"mousemove",R),y.unbind(x,"mouseup",M),C!==x&&(y.unbind(C,"mousemove",R),y.unbind(C,"mouseup",M)),y.remove(r),y.remove(o),P(n),YC.fireObjectResized(t,n,m,g),y.setAttrib(n,"style",y.getAttrib(n,"style")),t.nodeChanged()},P=function(e){var p,k,N,S,T;L(),B(),p=y.getPos(e,_),u=p.x,c=p.y,T=e.getBoundingClientRect(),k=T.width||T.right-T.left,N=T.height||T.bottom-T.top,n!==e&&(n=e,m=g=0),S=t.fire("ObjectSelected",{target:e}),D(e)&&!S.isDefaultPrevented()?w(i,function(e,t){var i,p=function(t){s=t.screenX,l=t.screenY,d=A(n).clientWidth,f=A(n).clientHeight,h=f/d,a=e,e.startPos={x:k*e[0]+u,y:N*e[1]+c},v=_.scrollWidth,b=_.scrollHeight,r=n.cloneNode(!0),y.addClass(r,"mce-clonedresizable"),y.setAttrib(r,"data-mce-bogus","all"),r.contentEditable=!1,r.unSelectabe=!0,y.setStyles(r,{left:u,top:c,margin:0}),r.removeAttribute("data-mce-selected"),_.appendChild(r),y.bind(x,"mousemove",R),y.bind(x,"mouseup",M),C!==x&&(y.bind(C,"mousemove",R),y.bind(C,"mouseup",M)),o=y.add(_,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},d+" &times; "+f)};i=y.get("mceResizeHandle"+t),i&&y.remove(i),i=y.add(_,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"}),11===_t.ie&&(i.contentEditable=!1),y.bind(i,"mousedown",function(e){e.stopImmediatePropagation(),e.preventDefault(),p(e)}),e.elm=i,y.setStyles(i,{left:k*e[0]+u-i.offsetWidth/2,top:N*e[1]+c-i.offsetHeight/2})}):L(),n.setAttribute("data-mce-selected","1")},L=function(){var e,t;B(),n&&n.removeAttribute("data-mce-selected");for(e in i)(t=y.get("mceResizeHandle"+e))&&(y.unbind(t),y.remove(t))},I=function(n){var r,o,i=function(e,t){if(e)do{if(e===t)return!0}while(e=e.parentNode)};if(!p&&!t.removed){if(w(y.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),o="mousedown"===n.type?n.target:e.getNode(),o=y.$(o).closest("table,img,figure.image,hr")[0],i(o,_)&&(F(),r=e.getStart(!0),i(r,o)&&i(e.getEnd(!0),o)))return void P(o);L()}},j=function(e){return aO(lO(t.getBody(),e))},B=function(){for(var e in i){var t=i[e];t.elm&&(y.unbind(t.elm),delete t.elm)}},F=function(){try{t.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}};return t.on("init",function(){F(),_t.ie&&_t.ie>=11&&(t.on("mousedown click",function(e){var n=e.target,r=n.nodeName;p||!/^(TABLE|IMG|HR)$/.test(r)||j(n)||(2!==e.button&&t.selection.select(n,"TABLE"===r),"mousedown"===e.type&&t.nodeChanged())}),t.dom.bind(_,"mscontrolselect",function(e){var n=function(e){Mt.setEditorTimeout(t,function(){t.selection.select(e)})};if(j(e.target))return e.preventDefault(),void n(e.target);/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"===e.target.tagName&&n(e.target))}));var e=Mt.throttle(function(e){t.composing||I(e)});t.on("nodechange ResizeEditor ResizeWindow drop FullscreenStateChanged",e),t.on("keyup compositionend",function(t){n&&"TABLE"===n.nodeName&&e(t)}),t.on("hide blur",L),t.on("contextmenu",O)}),t.on("remove",B),{isResizable:D,showResizeRect:P,hideResizeRect:L,updateResizeRect:I,destroy:function(){n=r=null}}},cO=function(e){return ws.isContentEditableTrue(e)||ws.isContentEditableFalse(e)},dO=function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null},fO=function(e,t,n){var r,o,i;if(r=n.elementFromPoint(e,t),o=n.body.createTextRange(),r&&"HTML"!==r.tagName||(r=n.body),o.moveToElementText(r),i=vr.toArray(o.getClientRects()),i=i.sort(function(e,n){return e=Math.abs(Math.max(e.top-t,e.bottom-t)),n=Math.abs(Math.max(n.top-t,n.bottom-t)),e-n}),i.length>0){t=(i[0].bottom+i[0].top)/2;try{return o.moveToPoint(e,t),o.collapse(!0),o}catch(e){}}return null},hO=function(e,t){var n=e&&e.parentElement?e.parentElement():null;return ws.isContentEditableFalse(dO(n,t,cO))?null:e},pO=function(e,t,n){var r,o,i=n;if(i.caretPositionFromPoint)(o=i.caretPositionFromPoint(e,t))&&(r=n.createRange(),r.setStart(o.offsetNode,o.offset),r.collapse(!0));else if(n.caretRangeFromPoint)r=n.caretRangeFromPoint(e,t);else if(i.body.createTextRange){r=i.body.createTextRange();try{r.moveToPoint(e,t),r.collapse(!0)}catch(o){r=fO(e,t,n)}return hO(r,n.body)}return r},mO={fromPoint:pO},gO=function(e,t){return ze(t,function(t){var n=e.fire("GetSelectionRange",{range:t});return n.range!==t?n.range:t})},vO={processRanges:gO},bO=function(e,t){var n=t||document,r=n.createDocumentFragment();return We(e,function(e){r.appendChild(e.dom())}),Mo.fromDom(r)},yO={fromElements:bO},wO=Oi("element","width","rows"),xO=Oi("element","cells"),CO=Oi("x","y"),kO=function(e,t){var n=parseInt(ii.get(e,t),10);return isNaN(n)?1:n},NO=function(e,t,n,r,o){for(var i=kO(o,"rowspan"),a=kO(o,"colspan"),s=e.rows(),l=n;l<n+i;l++){s[l]||(s[l]=xO($u.deep(r),[]));for(var u=t;u<t+a;u++){s[l].cells()[u]=l===n&&u===t?o:$u.shallow(o)}}},_O=function(e,t,n){var r=e.rows();return!!(r[n]?r[n].cells():[])[t]},SO=function(e,t,n){for(;_O(e,t,n);)t++;return t},TO=function(e){return Ge(e,function(e,t){return t.cells().length>e?t.cells().length:e},0)},EO=function(e,t){for(var n=e.rows(),r=0;r<n.length;r++)for(var o=n[r].cells(),i=0;i<o.length;i++)if(Ji.eq(o[i],t))return Ee.some(CO(i,r));return Ee.none()},OO=function(e,t,n,r,o){for(var i=[],a=e.rows(),s=n;s<=o;s++){var l=a[s].cells(),u=t<r?l.slice(t,r+1):l.slice(r,t+1);i.push(xO(a[s].element(),u))}return i},AO=function(e,t,n){var r=t.x(),o=t.y(),i=n.x(),a=n.y(),s=o<a?OO(e,r,o,i,a):OO(e,r,a,i,o);return wO(e.element(),TO(s),s)},DO=function(e,t){var n=$u.shallow(e.element()),r=Mo.fromTag("tbody");return kl.append(r,t),bl.append(n,r),n},RO=function(e){return ze(e.rows(),function(e){var t=ze(e.cells(),function(e){var t=$u.deep(e);return ii.remove(t,"colspan"),ii.remove(t,"rowspan"),t}),n=$u.shallow(e.element());return kl.append(n,t),n})},MO=function(e){var t=wO($u.shallow(e),0,[]);return We(iu.descendants(e,"tr"),function(e,n){We(iu.descendants(e,"td,th"),function(r,o){NO(t,SO(t,o,n),n,e,r)})}),wO(t.element(),TO(t.rows()),t.rows())},PO=function(e){return DO(e,RO(e))},LO=function(e,t,n){return EO(e,t).bind(function(t){return EO(e,n).map(function(n){return AO(e,t,n)})})},IO={fromDom:MO,toDom:PO,subsection:LO},jO=function(e){return Xe(e,function(e){return"ul"===Wo.name(e)||"ol"===Wo.name(e)})},BO=function(e,t){return Xe(e,function(e){return"li"===Wo.name(e)&&HN(e,t)}).fold(ge([]),function(t){return jO(e).map(function(e){return[Mo.fromTag("li"),Mo.fromTag(Wo.name(e))]}).getOr([])})},FO=function(e,t){var n=Ge(t,function(e,t){return bl.append(t,e),t},e);return t.length>0?yO.fromElements([n]):n},HO=function(e){return Qa(e)?ba.parent(e).filter(Ja).fold(ge([]),function(t){return[e,t]}):Ja(e)?[e]:[]},UO=function(e,t){var n=Mo.fromDom(t.commonAncestorContainer),r=nb.parentsAndSelf(n,e),o=$e(r,function(e){return Ga(e)||$a(e)}),i=BO(r,t),a=o.concat(i.length?i:HO(n));return ze(a,$u.shallow)},zO=function(){return yO.fromElements([])},WO=function(e,t){return FO(Mo.fromDom(t.cloneContents()),UO(e,t))},VO=function(e,t){return yu.ancestor(t,"table",be(Ji.eq,e))},qO=function(e,t){return VO(e,t[0]).bind(function(e){var n=t[0],r=t[t.length-1],o=IO.fromDom(e);return IO.subsection(o,n,r).map(function(e){return yO.fromElements([IO.toDom(e)])})}).getOrThunk(zO)},$O=function(e,t){return t.length>0&&t[0].collapsed?zO():WO(e,t[0])},KO=function(e,t){var n=Kw.getCellsFromElementOrRanges(t,e);return n.length>0?qO(e,n):$O(e,t)},GO={read:KO},XO=function(e,t){var n,r=e.selection.getRng(),o=e.dom.create("body"),i=e.selection.getSel(),a=vO.processRanges(e,zw.getRanges(i));if(t=t||{},t.get=!0,t.format=t.format||"html",t.selection=!0,t=e.fire("BeforeGetContent",t),t.isDefaultPrevented())return e.fire("GetContent",t),t.content;if("text"===t.format)return e.selection.isCollapsed()?"":oc.trim(r.text||(i.toString?i.toString():""));r.cloneContents?(n=t.contextual?GO.read(Mo.fromDom(e.getBody()),a).dom():r.cloneContents())&&o.appendChild(n):void 0!==r.item||void 0!==r.htmlText?(o.innerHTML="<br>"+(r.item?r.item(0).outerHTML:r.htmlText),o.removeChild(o.firstChild)):o.innerHTML=r.toString(),t.getInner=!0;var s=e.selection.serializer.serialize(o,t);return"tree"===t.format?s:(t.content=e.selection.isCollapsed()?"":s,e.fire("GetContent",t),t.content)},YO={getContent:XO},JO=function(e,t,n){var r,o,i,a=e.selection.getRng(),s=e.getDoc();if(n=n||{format:"html"},n.set=!0,n.selection=!0,n.content=t,!n.no_events&&(n=e.fire("BeforeSetContent",n),n.isDefaultPrevented()))return void e.fire("SetContent",n);if(t=n.content,a.insertNode){t+='<span id="__caret">_</span>',a.startContainer===s&&a.endContainer===s?s.body.innerHTML=t:(a.deleteContents(),0===s.body.childNodes.length?s.body.innerHTML=t:a.createContextualFragment?a.insertNode(a.createContextualFragment(t)):(o=s.createDocumentFragment(),i=s.createElement("div"),o.appendChild(i),i.outerHTML=t,a.insertNode(o))),r=e.dom.get("__caret"),a=s.createRange(),a.setStartBefore(r),a.setEndBefore(r),e.selection.setRng(a),e.dom.remove("__caret");try{e.selection.setRng(a)}catch(e){}}else a.item&&(s.execCommand("Delete",!1,null),a=e.getRng()),/^\s+/.test(t)?(a.pasteHTML('<span id="__mce_tmp">_</span>'+t),e.dom.remove("__mce_tmp")):a.pasteHTML(t);n.no_events||e.fire("SetContent",n)},QO={setContent:JO},ZO=function(e,t,n,r,o){var i=n?t.startContainer:t.endContainer,a=n?t.startOffset:t.endOffset;return Ee.from(i).map(Mo.fromDom).map(function(e){return r&&t.collapsed?e:ba.child(e,o(e,a)).getOr(e)}).bind(function(e){return Wo.isElement(e)?Ee.some(e):ba.parent(e)}).map(function(e){return e.dom()}).getOr(e)},eA=function(e,t,n){return ZO(e,t,!0,n,function(e,t){return Math.min(ba.childNodesCount(e),t)})},tA=function(e,t,n){return ZO(e,t,!1,n,function(e,t){return t>0?t-1:t})},nA=function(e,t){for(var n=e;e&&ws.isText(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},rA=function(e,t){var n,r,o,i,a;return t?(r=t.startContainer,o=t.endContainer,i=t.startOffset,a=t.endOffset,n=t.commonAncestorContainer,!t.collapsed&&(r===o&&a-i<2&&r.hasChildNodes()&&(n=r.childNodes[i]),3===r.nodeType&&3===o.nodeType&&(r=r.length===i?nA(r.nextSibling,!0):r.parentNode,o=0===a?nA(o.previousSibling,!1):o.parentNode,r&&r===o))?r:n&&3===n.nodeType?n.parentNode:n):e},oA=function(e,t,n,r){var o,i,a=[];if(i=e.getRoot(),n=e.getParent(n||eA(i,t,t.collapsed),e.isBlock),r=e.getParent(r||tA(i,t,t.collapsed),e.isBlock),n&&n!==i&&a.push(n),n&&r&&n!==r){o=n;for(var s=new b(n,i);(o=s.next())&&o!==r;)e.isBlock(o)&&a.push(o)}return r&&n!==r&&r!==i&&a.push(r),a},iA=function(e,t,n){return Ee.from(t).map(function(t){var r=e.nodeIndex(t),o=e.createRng();return o.setStart(t.parentNode,r),o.setEnd(t.parentNode,r+1),n&&(UN(e,o,t,!0),UN(e,o,t,!1)),o})},aA=vr.each,sA=function(e){return!!e.select},lA=function(e){return!(!e||!e.ownerDocument)&&Ji.contains(Mo.fromDom(e.ownerDocument),Mo.fromDom(e))},uA=function(e){return!!e&&(!!sA(e)||lA(e.startContainer)&&lA(e.endContainer))},cA=function(e,t,n,r){var o,i,a,s,l,u=function(t,n){var o=e.createRng();t?(o.setStart(t,n),o.setEnd(t,n),x(o),b(!1)):(UN(e,o,r.getBody(),!0),x(o))},c=function(e){return YO.getContent(r,e)},d=function(e,t){return QO.setContent(r,e,t)},f=function(e){return eA(r.getBody(),w(),e)},h=function(e){return tA(r.getBody(),w(),e)},p=function(e,t){return o.getBookmark(e,t)},m=function(e){return o.moveToBookmark(e)},g=function(t,n){return iA(e,t,n).each(x),t},v=function(){var e=w(),t=y();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},b=function(e){var t=w();t.collapse(!!e),x(t)},y=function(){return t.getSelection?t.getSelection():t.document.selection},w=function(){var n,o,i,l,u=function(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}};if(!t)return null;if(void 0===(l=t.document)||null===l)return null;if(void 0!==r.bookmark&&!1===Uk.hasFocus(r)){var c=RC.getRng(r);if(c.isSome())return c.map(function(e){return vO.processRanges(r,[e])[0]}).getOr(l.createRange())}try{(n=y())&&(o=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():l.createRange())}catch(e){}return o=vO.processRanges(r,[o])[0],o||(o=l.createRange?l.createRange():l.body.createTextRange()),o.setStart&&9===o.startContainer.nodeType&&o.collapsed&&(i=e.getRoot(),o.setStart(i,0),o.setEnd(i,0)),a&&s&&(0===u(o.START_TO_START,o,a)&&0===u(o.END_TO_END,o,a)?o=s:(a=null,s=null)),o},x=function(e,t){var n,o,i;if(uA(e)){var l=sA(e)?e:null;if(l){s=null;try{l.select()}catch(e){}}else{if(n=y(),i=r.fire("SetSelectionRange",{range:e,forward:t}),e=i.range,n){s=e;try{n.removeAllRanges(),n.addRange(e)}catch(e){}!1===t&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),a=n.rangeCount>0?n.getRangeAt(0):null}e.collapsed||e.startContainer!==e.endContainer||!n.setBaseAndExtent||_t.ie||e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&(o=e.startContainer.childNodes[e.startOffset])&&"IMG"===o.tagName&&(n.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),n.anchorNode===e.startContainer&&n.focusNode===e.endContainer||n.setBaseAndExtent(o,0,o,1)),r.fire("AfterSetSelectionRange",{range:e,forward:t})}}},C=function(t){return d(e.getOuterHTML(t)),t},k=function(){return rA(r.getBody(),w())},N=function(t,n){return oA(e,w(),t,n)},_=function(){var t,n,r=y();return!(r&&r.anchorNode&&r.focusNode)||(t=e.createRng(),t.setStart(r.anchorNode,r.anchorOffset),t.collapse(!0),n=e.createRng(),n.setStart(r.focusNode,r.focusOffset),n.collapse(!0),t.compareBoundaryPoints(t.START_TO_START,n)<=0)},S=function(){var t=w(),n=y();if(!zw.hasMultipleRanges(n)&&zN(r)){var o=$x.normalize(e,t);return o.each(function(e){x(e,_())}),o.getOr(t)}return t},T=function(t,n){var o;return l||(l={},o={},r.on("NodeChange",function(t){var n=t.element,r=e.getParents(n,null,e.getRoot()),i={};aA(l,function(t,n){aA(r,function(a){if(e.is(a,n))return o[n]||(aA(t,function(e){e(!0,{node:a,selector:n,parents:r})}),o[n]=t),i[n]=t,!1})}),aA(o,function(e,t){i[t]||(delete o[t],aA(e,function(e){e(!1,{node:n,selector:t,parents:r})}))})})),l[t]||(l[t]=[]),l[t].push(n),M},E=function(){for(var t,n=e.getRoot();n&&"BODY"!==n.nodeName;){if(n.scrollHeight>n.clientHeight){t=n;break}n=n.parentNode}return t},O=function(e,t){return fh.scrollElementIntoView(r,e,t)},A=function(e,t){return x(mO.fromPoint(e,t,r.getDoc()))},D=function(){var e=w();return e.collapsed?yd.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},R=function(){t=a=s=null,i.destroy()},M={bookmarkManager:null,controlSelection:null,dom:e,win:t,serializer:n,editor:r,collapse:b,setCursorLocation:u,getContent:c,setContent:d,getBookmark:p,moveToBookmark:m,select:g,isCollapsed:v,isForward:_,setNode:C,getNode:k,getSel:y,setRng:x,getRng:w,getStart:f,getEnd:h,getSelectedBlocks:N,normalize:S,selectorChanged:T,getScrollContainer:E,scrollIntoView:O,placeCaretAt:A,getBoundingClientRect:D,destroy:R};return o=iO(M),i=uO(M,r),M.bookmarkManager=o,M.controlSelection=i,M},dA=ws.isContentEditableFalse,fA=Kc,hA=kp,pA=Cp,mA=function(e,t){for(;t=e(t);)if(t.isVisible())return t;return t},gA=function(e,t){var n=cp(e,t);return!(n||!ws.isBr(e.getNode()))||n},vA=function(e,t,n,r){var o,i,a,s,l=e===bd.Forwards,u=l?pA:hA;return!r.collapsed&&(o=fA(r),dA(o))?gf(e,t,o,e===bd.Backwards,!0):(s=wc(r),i=xp(e,t.getBody(),r),u(i)?bf(t,i.getNode(!l)):(i=n(i))?u(i)?gf(e,t,i.getNode(!l),l,!0):(a=n(i),u(a)&&gA(i,a)?gf(e,t,a.getNode(!l),l,!0):s?wf(t,i.toRange(),!0):null):s?r:null)},bA=function(e,t,n,r){var o,i,a,s,l,u,c,d,f;if(f=fA(r),o=xp(e,t.getBody(),r),i=n(t.getBody(),E_(1),o),a=or.filter(i,O_(1)),l=or.last(o.getClientRects()),(pA(o)||Np(o))&&(f=o.getNode()),(hA(o)||_p(o))&&(f=o.getNode(!0)),!l)return null;if(u=l.left,(s=L_(a,u))&&dA(s.node))return c=Math.abs(u-s.left),d=Math.abs(u-s.right),gf(e,t,s.node,c<d,!0);if(f){var h=T_(e,t.getBody(),E_(1),f);if(s=L_(or.filter(h,O_(1)),u))return wf(t,s.position.toRange(),!0);if(s=or.last(or.filter(h,O_(0))))return wf(t,s.position.toRange(),!0)}},yA=function(e){var t=e.dom.create(e.settings.forced_root_block);return(!_t.ie||_t.ie>=11)&&(t.innerHTML='<br data-mce-bogus="1">'),t},wA=function(e,t,n){var r,o,i,a=Pf(e.getBody()),s=tc.curry(mA,a.next),l=tc.curry(mA,a.prev);if(n.collapsed&&e.settings.forced_root_block){if(!(r=e.dom.getParent(n.startContainer,"PRE")))return;o=1===t?s(yd.fromRangeStart(n)):l(yd.fromRangeStart(n)),o||(i=yA(e),1===t?e.$(r).after(i):e.$(r).before(i),e.selection.select(i,!0),e.selection.collapse())}},xA=function(e,t){var n,r=Pf(e.getBody()),o=tc.curry(mA,r.next),i=tc.curry(mA,r.prev),a=t?bd.Forwards:bd.Backwards,s=t?o:i,l=e.selection.getRng();return(n=vA(a,e,s,l))?n:(n=wA(e,a,l))||null},CA=function(e,t){var n,r=t?1:-1,o=t?S_:__,i=e.selection.getRng();return(n=bA(r,e,o,i))?n:(n=wA(e,r,i))||null},kA=function(e,t){return function(){var n=xA(e,t);return!!n&&(e.selection.setRng(n),!0)}},NA=function(e,t){return function(){var n=CA(e,t);return!!n&&(e.selection.setRng(n),!0)}},_A=function(e){return ze(e,function(e){return NE({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:pe},e)})},SA=function(e,t){return t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey},TA=function(e,t){return et(_A(e),function(e){return SA(e,t)?[e]:[]})},EA=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,r)}},OA=function(e,t){return Xe(TA(e,t),function(e){return e.action()})},AA={match:TA,action:EA,execute:OA},DA=function(e,t,n){var r=To.detect().os;AA.execute([{keyCode:q_.RIGHT,action:kA(e,!0)},{keyCode:q_.LEFT,action:kA(e,!1)},{keyCode:q_.UP,action:NA(e,!1)},{keyCode:q_.DOWN,action:NA(e,!0)},{keyCode:q_.RIGHT,action:Vh(e,!0)},{keyCode:q_.LEFT,action:Vh(e,!1)},{keyCode:q_.UP,action:qh(e,!1)},{keyCode:q_.DOWN,action:qh(e,!0)},{keyCode:q_.RIGHT,action:lw.move(e,t,!0)},{keyCode:q_.LEFT,action:lw.move(e,t,!1)},{keyCode:q_.RIGHT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:lw.moveNextWord(e,t)},{keyCode:q_.LEFT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:lw.movePrevWord(e,t)}],n).each(function(e){n.preventDefault()})},RA=function(e,t){e.on("keydown",function(n){!1===n.isDefaultPrevented()&&DA(e,t,n)})},MA={setup:RA},PA=function(e,t){var n=nb.parentsAndSelf(t,e);return Ye(n,Ka).fold(ge(n),function(e){return n.slice(0,e)})},LA=function(e){return 1===ba.children(e).length},IA=function(e,t,n,r){var o=be(mT,t),i=ze($e(r,o),function(e){return e.dom()});if(0===i.length)Qb.deleteElement(t,e,n);else{var a=pT(n.dom(),i);t.selection.setRng(a.toRange())}},jA=function(e,t){var n=Mo.fromDom(e.getBody()),r=Mo.fromDom(e.selection.getStart()),o=$e(PA(n,r),LA);return lt(o).map(function(n){var r=yd.fromRangeStart(e.selection.getRng());return!!Nv.willDeleteLastPositionInElement(t,r,n.dom())&&(IA(t,e,n,o),!0)}).getOr(!1)},BA=function(e,t){return!!e.selection.isCollapsed()&&jA(e,t)},FA={backspaceDelete:BA},HA=function(e,t,n){AA.execute([{keyCode:q_.BACKSPACE,action:AA.action(ly.backspaceDelete,e,!1)},{keyCode:q_.DELETE,action:AA.action(ly.backspaceDelete,e,!0)},{keyCode:q_.BACKSPACE,action:AA.action(vw.backspaceDelete,e,t,!1)},{keyCode:q_.DELETE,action:AA.action(vw.backspaceDelete,e,t,!0)},{keyCode:q_.BACKSPACE,action:AA.action(fx.backspaceDelete,e,!1)},{keyCode:q_.DELETE,action:AA.action(fx.backspaceDelete,e,!0)},{keyCode:q_.BACKSPACE,action:AA.action(xb.backspaceDelete,e,!1)},{keyCode:q_.DELETE,action:AA.action(xb.backspaceDelete,e,!0)},{keyCode:q_.BACKSPACE,action:AA.action(hb.backspaceDelete,e,!1)},{keyCode:q_.DELETE,action:AA.action(hb.backspaceDelete,e,!0)},{keyCode:q_.BACKSPACE,action:AA.action(FA.backspaceDelete,e,!1)},{keyCode:q_.DELETE,action:AA.action(FA.backspaceDelete,e,!0)}],n).each(function(e){n.preventDefault()})},UA=function(e,t){AA.execute([{keyCode:q_.BACKSPACE,action:AA.action(ly.paddEmptyElement,e)},{keyCode:q_.DELETE,action:AA.action(ly.paddEmptyElement,e)}],t)},zA=function(e,t){e.on("keydown",function(n){!1===n.isDefaultPrevented()&&HA(e,t,n)}),e.on("keyup",function(t){!1===t.isDefaultPrevented()&&UA(e,t)})},WA={setup:zA},VA=function(e){for(;e;){if(1===e.nodeType||3===e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}},qA=function(e,t){var n,r,o,i=t,a=e.dom,s=e.schema.getMoveCaretBeforeOnEnterElements();if(t){if(/^(LI|DT|DD)$/.test(t.nodeName)){var l=VA(t.firstChild);l&&/^(UL|OL|DL)$/.test(l.nodeName)&&t.insertBefore(a.doc.createTextNode("\xa0"),t.firstChild)}if(o=a.createRng(),t.normalize(),t.hasChildNodes()){for(n=new b(t,t);r=n.current();){if(ws.isText(r)){o.setStart(r,0),o.setEnd(r,0);break}if(s[r.nodeName.toLowerCase()]){o.setStartBefore(r),o.setEndBefore(r);break}i=r,r=n.next()}r||(o.setStart(i,0),o.setEnd(i,0))}else ws.isBr(t)?t.nextSibling&&a.isBlock(t.nextSibling)?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)):(o.setStart(t,0),o.setEnd(t,0));e.selection.setRng(o),a.remove(void 0),e.selection.scrollIntoView(t)}},$A=function(e,t){var n,r,o=e.getRoot();for(n=t;n!==o&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==o?r:o},KA=function(e){return Ee.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock))},GA=function(e){return KA(e).fold(ge(""),function(e){return e.nodeName.toUpperCase()})},XA=function(e){return KA(e).filter(function(e){return Qa(Mo.fromDom(e))}).isSome()},YA={moveToCaretPosition:qA,getEditableRoot:$A,getParentBlock:KA,getParentBlockName:GA,isListItemParentBlock:XA},JA=function(e,t){return e.firstChild&&e.firstChild.nodeName===t},QA=function(e,t){return e&&e.parentNode&&e.parentNode.nodeName===t},ZA=function(e){return e&&/^(OL|UL|LI)$/.test(e.nodeName)},eD=function(e){return ZA(e)&&ZA(e.parentNode)},tD=function(e){var t=e.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:e},nD=function(e,t,n){for(var r=e[n?"firstChild":"lastChild"];r&&!ws.isElement(r);)r=r[n?"nextSibling":"previousSibling"];return r===t},rD=function(e,t,n,r,o){var i=e.dom,a=e.selection.getRng();if(n!==e.getBody()){eD(n)&&(o="LI");var s=o?t(o):i.create("BR");if(nD(n,r,!0)&&nD(n,r,!1))QA(n,"LI")?i.insertAfter(s,tD(n)):i.replace(s,n);else if(nD(n,r,!0))QA(n,"LI")?(i.insertAfter(s,tD(n)),s.appendChild(i.doc.createTextNode(" ")),s.appendChild(n)):n.parentNode.insertBefore(s,n);else if(nD(n,r,!1))i.insertAfter(s,tD(n));else{n=tD(n);var l=a.cloneRange();l.setStartAfter(r),l.setEndAfter(n);var u=l.extractContents();"LI"===o&&JA(u,"LI")?(s=u.firstChild,i.insertAfter(u,n)):(i.insertAfter(u,n),i.insertAfter(s,n))}i.remove(r),YA.moveToCaretPosition(e,s)}},oD={insert:rD},iD=function(e){return e&&"A"===e.nodeName&&0===vr.trim(oc.trim(e.innerText||e.textContent)).length},aD=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},sD=function(e){e.innerHTML='<br data-mce-bogus="1">'},lD=function(e,t){return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t},uD=function(e,t){return t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t)},cD=function(e,t,n){var r,o=n,i=[];if(o){for(;o=o.firstChild;){if(e.isBlock(o))return;ws.isElement(o)&&!t[o.nodeName.toLowerCase()]&&i.push(o)}for(r=i.length;r--;)o=i[r],!o.hasChildNodes()||o.firstChild===o.lastChild&&""===o.firstChild.nodeValue?e.remove(o):iD(o)&&e.remove(o)}},dD=function(e,t,n){return!1===ws.isText(t)?n:e?1===n&&t.data.charAt(n-1)===oc.ZWSP?0:n:n===t.data.length-1&&t.data.charAt(n)===oc.ZWSP?t.data.length:n},fD=function(e){var t=e.cloneRange();return t.setStart(e.startContainer,dD(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,dD(!1,e.endContainer,e.endOffset)),t},hD=function(e){do{ws.isText(e)&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild}while(e)},pD=function(e,t){var n,r,o=e.getRoot();for(n=t;n!==o&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==o?r:o},mD=function(e,t){var n=Oh.getForcedRootBlock(e);n&&n.toLowerCase()===t.tagName.toLowerCase()&&e.dom.setAttribs(t,Oh.getForcedRootBlockAttrs(e))},gD=function(e,t,n,r,o){var i,a,s,l,u,c,d=t||"P",f=e.dom,h=pD(f,r);if(!(a=f.getParent(r,f.isBlock))||!uD(f,a)){if(a=a||h,c=a===e.getBody()||aD(a)?a.nodeName.toLowerCase():a.parentNode.nodeName.toLowerCase(),!a.hasChildNodes())return i=f.create(d),mD(e,i),a.appendChild(i),n.setStart(i,0),n.setEnd(i,0),i;for(l=r;l.parentNode!==a;)l=l.parentNode;for(;l&&!f.isBlock(l);)s=l,l=l.previousSibling;if(s&&e.schema.isValidChild(c,d.toLowerCase())){for(i=f.create(d),mD(e,i),s.parentNode.insertBefore(i,s),l=s;l&&!f.isBlock(l);)u=l.nextSibling,i.appendChild(l),l=u;n.setStart(r,o),n.setEnd(r,o)}}return r},vD=function(e,t){var n;t.normalize(),(n=t.lastChild)&&!/^(left|right)$/gi.test(e.getStyle(n,"float",!0))||e.add(t,"br")},bD=function(e,t){var n,r,o,i,a,s,l,u,c,d,f,h,p,m=e.dom,g=e.schema,v=g.getNonEmptyElements(),y=e.selection.getRng(),w=function(t){var n,i,s,l=o,u=g.getTextInlineElements();if(t||"TABLE"===d||"HR"===d?(n=m.create(t||h),mD(e,n)):n=a.cloneNode(!1),s=n,!1===Oh.shouldKeepStyles(e))m.setAttrib(n,"style",null),m.setAttrib(n,"class",null);else do{if(u[l.nodeName]){if(Jd(l))continue;i=l.cloneNode(!1),m.setAttrib(i,"id",""),n.hasChildNodes()?(i.appendChild(n.firstChild),n.appendChild(i)):(s=i,n.appendChild(i))}}while((l=l.parentNode)&&l!==r);return sD(s),n},x=function(e){var t,n,r,s;if(s=dD(e,o,i),ws.isText(o)&&(e?s>0:s<o.nodeValue.length))return!1;if(o.parentNode===a&&p&&!e)return!0;if(e&&ws.isElement(o)&&o===a.firstChild)return!0;if(lD(o,"TABLE")||lD(o,"HR"))return p&&!e||!p&&e;for(t=new b(o,a),ws.isText(o)&&(e&&0===s?t.prev():e||s!==o.nodeValue.length||t.next());n=t.current();){if(ws.isElement(n)){if(!n.getAttribute("data-mce-bogus")&&(r=n.nodeName.toLowerCase(),v[r]&&"br"!==r))return!1}else if(ws.isText(n)&&!/^[ \t\r\n]*$/.test(n.nodeValue))return!1;e?t.prev():t.next()}return!0},C=function(){l=/^(H[1-6]|PRE|FIGURE)$/.test(d)&&"HGROUP"!==f?w(h):w(),Oh.shouldEndContainerOnEmptyBlock(e)&&uD(m,c)&&m.isEmpty(a)?l=m.split(c,a):m.insertAfter(l,a),YA.moveToCaretPosition(e,l)};if($x.normalize(m,y).each(function(e){y.setStart(e.startContainer,e.startOffset),y.setEnd(e.endContainer,e.endOffset)}),o=y.startContainer,i=y.startOffset,h=Oh.getForcedRootBlock(e),s=t.shiftKey,ws.isElement(o)&&o.hasChildNodes()&&(p=i>o.childNodes.length-1,o=o.childNodes[Math.min(i,o.childNodes.length-1)]||o,i=p&&ws.isText(o)?o.nodeValue.length:0),r=pD(m,o)){if((h&&!s||!h&&s)&&(o=gD(e,h,y,o,i)),a=m.getParent(o,m.isBlock),c=a?m.getParent(a.parentNode,m.isBlock):null,d=a?a.nodeName.toUpperCase():"",f=c?c.nodeName.toUpperCase():"","LI"!==f||t.ctrlKey||(a=c,c=c.parentNode,d=f),/^(LI|DT|DD)$/.test(d)&&m.isEmpty(a))return void oD.insert(e,w,c,a,h);h&&a===e.getBody()||(h=h||"P",sc(a)?(l=yc(a),m.isEmpty(a)&&sD(a),YA.moveToCaretPosition(e,l)):x()?C():x(!0)?(l=a.parentNode.insertBefore(w(),a),YA.moveToCaretPosition(e,lD(a,"HR")?l:a)):(n=fD(y).cloneRange(),n.setEndAfter(a),u=n.extractContents(),hD(u),l=u.firstChild,m.insertAfter(u,a),cD(m,v,l),vD(m,a),m.isEmpty(a)&&sD(a),l.normalize(),m.isEmpty(l)?(m.remove(l),C()):YA.moveToCaretPosition(e,l)),m.setAttrib(l,"id",""),e.fire("NewBlock",{newBlock:l}))}},yD={insert:bD},wD=function(e,t){return YA.getParentBlock(e).filter(function(e){return t.length>0&&Wi.is(Mo.fromDom(e),t)}).isSome()},xD=function(e){return wD(e,Oh.getBrNewLineSelector(e))},CD=function(e){return wD(e,Oh.getNoNewLineSelector(e))},kD={shouldInsertBr:xD,shouldBlockNewLine:CD},ND=kb.generate([{br:[]},{block:[]},{none:[]}]),_D=function(e,t){return kD.shouldBlockNewLine(e)},SD=function(e){return function(t,n){return""===Oh.getForcedRootBlock(t)===e}},TD=function(e){return function(t,n){return YA.isListItemParentBlock(t)===e}},ED=function(e,t){return function(n,r){return YA.getParentBlockName(n)===e.toUpperCase()===t}},OD=function(e){return ED("pre",e)},AD=function(){return ED("summary",!0)},DD=function(e){return function(t,n){return Oh.shouldPutBrInPre(t)===e}},RD=function(e,t){return kD.shouldInsertBr(e)},MD=function(e,t){return t},PD=function(e){var t=Oh.getForcedRootBlock(e),n=YA.getEditableRoot(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t||"P")},LD=function(e,t){return function(n,r){return Ge(e,function(e,t){return e&&t(n,r)},!0)?Ee.some(t):Ee.none()}},ID=function(e,t){return ky.evaluateUntil([LD([_D],ND.none()),LD([AD()],ND.br()),LD([OD(!0),DD(!1),MD],ND.br()),LD([OD(!0),DD(!1)],ND.block()),LD([OD(!0),DD(!0),MD],ND.block()),LD([OD(!0),DD(!0)],ND.br()),LD([TD(!0),MD],ND.br()),LD([TD(!0)],ND.block()),LD([SD(!0),MD,PD],ND.block()),LD([SD(!0)],ND.br()),LD([RD],ND.br()),LD([SD(!1),MD],ND.br()),LD([PD],ND.block())],[e,t.shiftKey]).getOr(ND.none())},jD={getAction:ID},BD=function(e,t){jD.getAction(e,t).fold(function(){aC.insert(e,t)},function(){yD.insert(e,t)},pe)},FD={insert:BD},HD=function(e){e.typing&&(e.typing=!1,e.add())},UD=function(e,t){t.isDefaultPrevented()||(t.preventDefault(),HD(e.undoManager),e.undoManager.transact(function(){!1===e.selection.isCollapsed()&&e.execCommand("Delete"),FD.insert(e,t)}))},zD=function(e){e.on("keydown",function(t){t.keyCode===q_.ENTER&&UD(e,t)})},WD={setup:zD},VD=function(e,t){return GD(e)&&ws.isText(t.container())},qD=function(e,t){var n=t.container(),r=t.offset();n.insertData(r,"\xa0"),e.selection.setCursorLocation(n,r+1)},$D=function(e,t,n){return!!VD(n,t)&&(qD(e,t),!0)},KD=function(e){var t=be(bv.isInlineTarget,e),n=yd.fromRangeStart(e.selection.getRng());return Vy.readLocation(t,e.getBody(),n).map(be($D,e,n)).getOr(!1)},GD=function(e){return e.fold(ge(!1),ge(!0),ge(!0),ge(!1))},XD=function(e){return!!e.selection.isCollapsed()&&KD(e)},YD={insertAtSelection:XD},JD=function(e,t){AA.execute([{keyCode:q_.SPACEBAR,action:AA.action(YD.insertAtSelection,e)}],t).each(function(e){t.preventDefault()})},QD=function(e){e.on("keydown",function(t){!1===t.isDefaultPrevented()&&JD(e,t)})},ZD={setup:QD},eR=function(e){return yu.descendant(Mo.fromDom(e.getBody()),"*[data-mce-caret]").fold(ge(null),function(e){return e.dom()})},tR=function(e){e.selection.setRng(e.selection.getRng())},nR=function(e,t){t.hasAttribute("data-mce-caret")&&(yc(t),tR(e),e.selection.scrollIntoView(t))},rR=function(e,t){var n=eR(e);if(n)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void nR(e,n)):void(cc(n)&&(nR(e,n),e.undoManager.add()))},oR=function(e){e.on("keyup compositionstart",be(rR,e))},iR={setup:oR},aR=function(e){var t=lw.setupSelectedState(e);iR.setup(e),MA.setup(e,t),WA.setup(e,t),WD.setup(e),ZD.setup(e)},sR={setup:aR},lR=function(e){return ws.isElement(e)&&Ya(Mo.fromDom(e))},uR=function(e){var t=e.selection.getRng(),n=_.fromRangeStart(t),r=_.fromRangeEnd(t);if(_.isElementPosition(n)){var o=n.container();lR(o)&&Ip.firstPositionIn(o).each(function(e){return t.setStart(e.container(),e.offset())})}if(_.isElementPosition(r)){var o=n.container();lR(o)&&Ip.lastPositionIn(o).each(function(e){return t.setEnd(e.container(),e.offset())})}e.selection.setRng(Dg.normalize(t))},cR=function(e){e.on("click",function(t){t.detail>=3&&uR(e)})},dR=function(e){e.on("click",function(t){e.dom.getParent(t.target,"details")&&t.preventDefault()})},fR=function(e){e.parser.addNodeFilter("details",function(e){We(e,function(e){e.attr("data-mce-open",e.attr("open")),e.attr("open","open")})}),e.serializer.addNodeFilter("details",function(e){We(e,function(e){var t=e.attr("data-mce-open");e.attr("open",De(t)?t:null),e.attr("data-mce-open",null)})})},hR=function(e){dR(e),fR(e)},pR=il.DOM,mR=function(e,t){var n=Mo.fromDom(e.getDoc().head),r=Mo.fromTag("style");ii.set(r,"type","text/css"),bl.append(r,Mo.fromText(t)),bl.append(n,r)},gR=function(e){var t=X(e.settings,e.schema);return t.addAttributeFilter("src,href,style,tabindex",function(t,n){for(var r,o,i,a=t.length,s=e.dom;a--;)if(r=t[a],o=r.attr(n),i="data-mce-"+n,!r.attributes.map[i]){if(0===o.indexOf("data:")||0===o.indexOf("blob:"))continue;"style"===n?(o=s.serializeStyle(s.parseStyle(o),r.name),o.length||(o=null),r.attr(i,o),r.attr(n,o)):"tabindex"===n?(r.attr(i,o),r.attr(n,null)):r.attr(i,e.convertURL(o,n,r.name))}}),t.addNodeFilter("script",function(e){for(var t,n,r=e.length;r--;)t=e[r],n=t.attr("type")||"no/type",0!==n.indexOf("mce-")&&t.attr("type","mce-"+n)}),t.addNodeFilter("#cdata",function(e){for(var t,n=e.length;n--;)t=e[n],t.type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(t){for(var n,r=t.length,o=e.schema.getNonEmptyElements();r--;)n=t[r],n.isEmpty(o)&&0===n.getAll("br").length&&(n.append(new UE("br",1)).shortEnded=!0)}),t},vR=function(e){e.settings.auto_focus&&Mt.setEditorTimeout(e,function(){var t;t=!0===e.settings.auto_focus?e:e.editorManager.get(e.settings.auto_focus),t.destroyed||t.focus()},100)},bR=function(e){e.bindPendingEventDelegates(),e.initialized=!0,e.fire("init"),e.focus(!0),e.nodeChanged({initial:!0}),e.execCallback("init_instance_callback",e),vR(e)},yR=function(e){return e.inline?pR.styleSheetLoader:e.dom.styleSheetLoader},wR=function(e,t){var n,r,o=e.settings,i=e.getElement(),a=e.getDoc();o.inline||(e.getElement().style.visibility=e.orgVisibility),t||o.content_editable||(a.open(),a.write(e.iframeHTML),a.close()),o.content_editable&&(e.on("remove",function(){var e=this.getBody();pR.removeClass(e,"mce-content-body"),pR.removeClass(e,"mce-edit-focus"),pR.setAttrib(e,"contentEditable",null)}),pR.addClass(i,"mce-content-body"),e.contentDocument=a=o.content_document||document,e.contentWindow=o.content_window||window,e.bodyElement=i,o.content_document=o.content_window=null,o.root_name=i.nodeName.toLowerCase()),n=e.getBody(),n.disabled=!0,e.readonly=o.readonly,e.readonly||(e.inline&&"static"===pR.getStyle(n,"position",!0)&&(n.style.position="relative"),n.contentEditable=e.getParam("content_editable_state",!0)),n.disabled=!1,e.editorUpload=W(e),e.schema=y(o),e.dom=il(a,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,hex_colors:o.force_hex_style_colors,class_filter:o.class_filter,update_styles:!0,root_element:e.inline?e.getBody():null,collect:o.content_editable,schema:e.schema,onSetAttrib:function(t){e.fire("SetAttrib",t)}}),e.parser=gR(e),e.serializer=J(o,e),e.selection=cA(e.dom,e.getWin(),e.serializer,e),e.annotator=S(e),e.formatter=G(e),e.undoManager=$(e),e._nodeChangeDispatcher=new V(e),e._selectionOverrides=J_(e),hR(e),cR(e),sR.setup(e),LN.setup(e),e.fire("PreInit"),o.browser_spellcheck||o.gecko_spellcheck||(a.body.spellcheck=!1,pR.setAttrib(n,"spellcheck","false")),e.quirks=Z(e),e.fire("PostRender"),o.directionality&&(n.dir=o.directionality),o.nowrap&&(n.style.whiteSpace="nowrap"),o.protect&&e.on("BeforeSetContent",function(e){vr.each(o.protect,function(t){e.content=e.content.replace(t,function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"})})}),e.on("SetContent",function(){e.addVisual(e.getBody())}),e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"}),e.on("compositionstart compositionend",function(t){e.composing="compositionstart"===t.type}),e.contentStyles.length>0&&(r="",vr.each(e.contentStyles,function(e){r+=e+"\r\n"}),e.dom.addStyle(r)),yR(e).loadAll(e.contentCSS,function(t){bR(e)},function(t){bR(e)}),o.content_style&&mR(e,o.content_style)},xR={initContentBody:wR},CR=il.DOM,kR=function(e,t){if(document.domain!==window.location.hostname&&_t.ie&&_t.ie<12){var n=EN.uuid("mce");e[n]=function(){xR.initContentBody(e)};var r='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+e.id+'");document.write(ed.iframeHTML);document.close();ed.'+n+"(true);})()";return CR.setAttrib(t,"src",r),!0}return!1},NR=function(e){var t="number"==typeof e?e+"px":e;return t||""},_R=function(e,t,n,r){var o=Mo.fromTag("iframe");return ii.setAll(o,r),ii.setAll(o,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),Ei.setAll(o,{width:"100%",height:NR(n),display:"block"}),o},SR=function(e){var t,n,r;return r=Oh.getDocType(e)+"<html><head>",Oh.getDocumentBaseUrl(e)!==e.documentBaseUrl&&(r+='<base href="'+e.documentBaseURI.getURI()+'" />'),r+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',t=Oh.getBodyId(e),n=Oh.getBodyClass(e),Oh.getContentSecurityPolicy(e)&&(r+='<meta http-equiv="Content-Security-Policy" content="'+Oh.getContentSecurityPolicy(e)+'" />'),r+='</head><body id="'+t+'" class="mce-content-body '+n+'" data-id="'+e.id+'"><br></body></html>'},TR=function(e,t){var n=e.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),r=_R(e.id,n,t.height,Oh.getIframeAttrs(e)).dom();r.onload=function(){r.onload=null,e.fire("load")};var o=kR(e,r);return e.contentAreaContainer=t.iframeContainer,e.iframeElement=r,e.iframeHTML=SR(e),CR.add(t.iframeContainer,r),o},ER=function(e,t){var n=TR(e,t);t.editorContainer&&(CR.get(t.editorContainer).style.display=e.orgDisplay,e.hidden=CR.isHidden(t.editorContainer)),e.getElement().style.display="none",CR.setAttrib(e.id,"aria-hidden","true"),n||xR.initContentBody(e)},OR={init:ER},AR=il.DOM,DR=function(e,t,n){var r,o,i=cN.get(n);if(r=cN.urls[n]||e.documentBaseUrl.replace(/\/$/,""),n=vr.trim(n),i&&-1===vr.inArray(t,n)){if(vr.each(cN.dependencies(n),function(n){DR(e,t,n)}),e.plugins[n])return;o=new i(e,r,e.$),e.plugins[n]=o,o.init&&(o.init(e,r),t.push(n))}},RR=function(e){return e.replace(/^\-/,"")},MR=function(e){var t=[];vr.each(e.settings.plugins.split(/[ ,]/),function(n){DR(e,t,RR(n))})},PR=function(e){var t,n=e.settings.theme;De(n)?(e.settings.theme=RR(n),t=dN.get(n),e.theme=new t(e,dN.urls[n]),e.theme.init&&e.theme.init(e,dN.urls[n]||e.documentBaseUrl.replace(/\/$/,""),e.$)):e.theme={}},LR=function(e){var t,n,r,o,i,a=e.settings,s=e.getElement();return t=a.width||AR.getStyle(s,"width")||"100%",n=a.height||AR.getStyle(s,"height")||s.offsetHeight,r=a.min_height||100,o=/^[0-9\.]+(|px)$/i,o.test(""+t)&&(t=Math.max(parseInt(t,10),100)),o.test(""+n)&&(n=Math.max(parseInt(n,10),r)),i=e.theme.renderUI({targetNode:s,width:t,height:n,deltaWidth:a.delta_width,deltaHeight:a.delta_height}),a.content_editable||(n=(i.iframeHeight||n)+("number"==typeof n?i.deltaHeight||0:""))<r&&(n=r),i.height=n,i},IR=function(e){var t,n=e.getElement();return t=e.settings.theme(e,n),t.editorContainer.nodeType&&(t.editorContainer.id=t.editorContainer.id||e.id+"_parent"),t.iframeContainer&&t.iframeContainer.nodeType&&(t.iframeContainer.id=t.iframeContainer.id||e.id+"_iframecontainer"),t.height=t.iframeHeight?t.iframeHeight:n.offsetHeight,t},jR=function(e){return{editorContainer:e,iframeContainer:e}},BR=function(e){var t=AR.create("div");return AR.insertAfter(t,e),jR(t)},FR=function(e){var t=e.getElement();return e.inline?jR(null):BR(t)},HR=function(e){var t=e.settings,n=e.getElement();return e.orgDisplay=n.style.display,De(t.theme)?LR(e):Ie(t.theme)?IR(e):FR(e)},UR=function(e){var t,n=e.settings,r=e.getElement();return e.rtl=n.rtl_ui||e.editorManager.i18n.rtl,e.editorManager.i18n.setCode(n.language),n.aria_label=n.aria_label||AR.getAttrib(r,"aria-label",e.getLang("aria.rich_text_area")),e.fire("ScriptsLoaded"),PR(e),MR(e),t=HR(e),e.editorContainer=t.editorContainer?t.editorContainer:null,n.content_css&&vr.each(vr.explode(n.content_css),function(t){e.contentCSS.push(e.documentBaseURI.toAbsolute(t))}),n.content_editable?xR.initContentBody(e):OR.init(e,t)},zR={init:UR},WR=il.DOM,VR=function(e){return"-"===e.charAt(0)},qR=function(e,t){var n=t.settings;n.language&&"en"!==n.language&&!n.language_url&&(n.language_url=t.editorManager.baseURL+"/langs/"+n.language+".js"),n.language_url&&!t.editorManager.i18n.data[n.language]&&e.add(n.language_url)},$R=function(e,t,n,r){var o=t.settings,i=o.theme;if(De(i)){if(!VR(i)&&!dN.urls.hasOwnProperty(i)){var a=o.theme_url;a?dN.load(i,t.documentBaseURI.toAbsolute(a)):dN.load(i,"themes/"+i+"/theme"+n+".js")}e.loadQueue(function(){dN.waitFor(i,r)})}else r()},KR=function(e,t){vr.isArray(e.plugins)&&(e.plugins=e.plugins.join(" ")),vr.each(e.external_plugins,function(t,n){cN.load(n,t),e.plugins+=" "+n}),vr.each(e.plugins.split(/[ ,]/),function(e){if((e=vr.trim(e))&&!cN.urls[e])if(VR(e)){e=e.substr(1,e.length);var n=cN.dependencies(e);vr.each(n,function(e){var n={prefix:"plugins/",resource:e,suffix:"/plugin"+t+".js"};e=cN.createUrl(n,e),cN.load(e.resource,e)})}else cN.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+t+".js"})})},GR=function(e,t){var n=cl.ScriptLoader;$R(n,e,t,function(){qR(n,e),KR(e.settings,t),n.loadQueue(function(){e.removed||zR.init(e)},e,function(t){uN.pluginLoadError(e,t[0]),e.removed||zR.init(e)})})},XR=function(e){var t=e.settings,n=e.id,r=function(){WR.unbind(window,"ready",r),e.render()};if(!Vt.Event.domLoaded)return void WR.bind(window,"ready",r);if(e.getElement()&&_t.contentEditable){t.inline?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");var o=e.getElement().form||WR.getParent(n,"form");o&&(e.formElement=o,t.hidden_input&&!/TEXTAREA|INPUT/i.test(e.getElement().nodeName)&&(WR.insertAfter(WR.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=function(t){e.fire(t.type,t)},WR.bind(o,"submit reset",e.formEventDelegate),e.on("reset",function(){e.setContent(e.startContent,{format:"raw"})}),!t.submit_patch||o.submit.nodeType||o.submit.length||o._mceOldSubmit||(o._mceOldSubmit=o.submit,o.submit=function(){return e.editorManager.triggerSave(),e.setDirty(!1),o._mceOldSubmit(o)})),e.windowManager=P(e),e.notificationManager=R(e),"xml"===t.encoding&&e.on("GetContent",function(e){e.save&&(e.content=WR.encode(e.content))}),t.add_form_submit_trigger&&e.on("submit",function(){e.initialized&&e.save()}),t.add_unload_trigger&&(e._beforeUnload=function(){!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),GR(e,e.suffix)}},YR={render:XR},JR=function(e,t,n){var r=e.sidebars?e.sidebars:[];r.push({name:t,settings:n}),e.sidebars=r},QR={add:JR},ZR=vr.each,eM=vr.trim,tM="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),nM={ftp:21,http:80,https:443,mailto:25},rM=function(e,t){var n,r,o=this;if(e=eM(e),t=o.settings=t||{},n=t.base_uri,/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(o.source=e);var i=0===e.indexOf("//");0!==e.indexOf("/")||i||(e=(n?n.protocol||"http":"http")+"://mce_host"+e),/^[\w\-]*:?\/\//.test(e)||(r=t.base_uri?t.base_uri.path:new rM(document.location.href).directory,""==t.base_uri.protocol?e="//mce_host"+o.toAbsPath(r,e):(e=/([^#?]*)([#?]?.*)/.exec(e),e=(n&&n.protocol||"http")+"://mce_host"+o.toAbsPath(r,e[1])+e[2])),e=e.replace(/@@/g,"(mce_at)"),e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),ZR(tM,function(t,n){var r=e[n];r&&(r=r.replace(/\(mce_at\)/g,"@@")),o[t]=r}),n&&(o.protocol||(o.protocol=n.protocol),o.userInfo||(o.userInfo=n.userInfo),o.port||"mce_host"!==o.host||(o.port=n.port),o.host&&"mce_host"!==o.host||(o.host=n.host),o.source=""),i&&(o.protocol="")};rM.prototype={setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var t,n=this;if("./"===e)return e;if(e=new rM(e,{base_uri:n}),"mce_host"!==e.host&&n.host!==e.host&&e.host||n.port!==e.port||n.protocol!==e.protocol&&""!==e.protocol)return e.getURI();var r=n.getURI(),o=e.getURI();return r===o||"/"===r.charAt(r.length-1)&&r.substr(0,r.length-1)===o?r:(t=n.toRelPath(n.path,e.path),e.query&&(t+="?"+e.query),e.anchor&&(t+="#"+e.anchor),t)},toAbsolute:function(e,t){return e=new rM(e,{base_uri:this}),e.getURI(t&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=nM[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},toRelPath:function(e,t){var n,r,o,i=0,a="";if(e=e.substring(0,e.lastIndexOf("/")),e=e.split("/"),n=t.split("/"),e.length>=n.length)for(r=0,o=e.length;r<o;r++)if(r>=n.length||e[r]!==n[r]){i=r+1;break}if(e.length<n.length)for(r=0,o=n.length;r<o;r++)if(r>=e.length||e[r]!==n[r]){i=r+1;break}if(1===i)return t;for(r=0,o=e.length-(i-1);r<o;r++)a+="../";for(r=i-1,o=n.length;r<o;r++)a+=r!==i-1?"/"+n[r]:n[r];return a},toAbsPath:function(e,t){var n,r,o,i=0,a=[];for(r=/\/$/.test(t)?"/":"",e=e.split("/"),t=t.split("/"),ZR(e,function(e){e&&a.push(e)}),e=a,n=t.length-1,a=[];n>=0;n--)0!==t[n].length&&"."!==t[n]&&(".."!==t[n]?i>0?i--:a.push(t[n]):i++);return n=e.length-i,o=n<=0?a.reverse().join("/"):e.slice(0,n).join("/")+"/"+a.reverse().join("/"),0!==o.indexOf("/")&&(o="/"+o),r&&o.lastIndexOf("/")!==o.length-1&&(o+=r),o},getURI:function(e){var t,n=this;return n.source&&!e||(t="",e||(n.protocol?t+=n.protocol+"://":t+="//",n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}},rM.parseDataUri=function(e){var t,n;return e=decodeURIComponent(e).split(","),n=/data:([^;]+)/.exec(e[0]),n&&(t=n[1]),{type:t,data:e[1]}},rM.getDocumentBaseUrl=function(e){var t;return t=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),t};var oM=function(e,t){var n=Oh.getForcedRootBlock(e),r=new RegExp("^(<"+n+"[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/"+n+">[\r\n]*|<br \\/>[\r\n]*)$");return t.replace(r,"")},iM=function(e,t,n){var r;if(t.format=t.format?t.format:"html",t.get=!0,t.getInner=!0,t.no_events||e.fire("BeforeGetContent",t),"raw"===t.format)r=vr.trim(aS.trimExternal(e.serializer,n.innerHTML));else if("text"===t.format)r=oc.trim(n.innerText||n.textContent);else{if("tree"===t.format)return e.serializer.serialize(n,t);r=oM(e,e.serializer.serialize(n,t))}return"text"===t.format||ns(Mo.fromDom(n))?t.content=r:t.content=vr.trim(r),t.no_events||e.fire("GetContent",t),t.content},aM=function(e,t){return void 0===t&&(t={}),Ee.from(e.getBody()).fold(ge("tree"===t.format?new UE("body",11):""),function(n){return iM(e,t,n)})},sM=function(e,t){t(e),e.firstChild&&sM(e.firstChild,t),e.next&&sM(e.next,t)},lM=function(e,t,n){var r={},o={},i=[];n.firstChild&&sM(n.firstChild,function(n){We(e,function(e){e.name===n.name&&(r[e.name]?r[e.name].nodes.push(n):r[e.name]={filter:e,nodes:[n]})}),We(t,function(e){"string"==typeof n.attr(e.name)&&(o[e.name]?o[e.name].nodes.push(n):o[e.name]={filter:e,nodes:[n]})})});for(var a in r)r.hasOwnProperty(a)&&i.push(r[a]);for(var a in o)o.hasOwnProperty(a)&&i.push(o[a]);return i},uM=function(e,t,n){var r=lM(e,t,n);We(r,function(e){We(e.filter.callbacks,function(t){t(e.nodes,e.filter.name,{})})})},cM=function(e){return e instanceof UE},dM=function(e){Uk.hasFocus(e)&&Ip.firstPositionIn(e.getBody()).each(function(t){var n=t.getNode(),r=ws.isTable(n)?Ip.firstPositionIn(n).getOr(t):t;e.selection.setRng(r.toRange())})},fM=function(e,t){e.dom.setHTML(e.getBody(),t),dM(e)},hM=function(e,t,n,r){var o,i;return 0===n.length||/^\s+$/.test(n)?(i='<br data-mce-bogus="1">',"TABLE"===t.nodeName?n="<tr><td>"+i+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(n="<li>"+i+"</li>"),o=Oh.getForcedRootBlock(e),o&&e.schema.isValidChild(t.nodeName.toLowerCase(),o.toLowerCase())?(n=i,n=e.dom.createHTML(o,e.settings.forced_root_block_attrs,n)):n||(n='<br data-mce-bogus="1">'),fM(e,n),e.fire("SetContent",r)):("raw"!==r.format&&(n=E({validate:e.validate},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0}))),r.content=ns(Mo.fromDom(t))?n:vr.trim(n),fM(e,r.content),r.no_events||e.fire("SetContent",r)),r.content},pM=function(e,t,n,r){uM(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);var o=E({validate:e.validate},e.schema).serialize(n);return r.content=ns(Mo.fromDom(t))?o:vr.trim(o),fM(e,r.content),r.no_events||e.fire("SetContent",r),n},mM=function(e,t,n){return void 0===n&&(n={}),n.format=n.format?n.format:"html",n.set=!0,n.content=cM(t)?"":t,cM(t)||n.no_events||(e.fire("BeforeSetContent",n),t=n.content),Ee.from(e.getBody()).fold(ge(t),function(r){return cM(t)?pM(e,r,t,n):hM(e,r,t,n)})},gM=il.DOM,vM=function(e){gM.setStyle(e.id,"display",e.orgDisplay)},bM=function(e){return Ee.from(e).each(function(e){return e.destroy()})},yM=function(e){e.contentAreaContainer=e.formElement=e.container=e.editorContainer=null,e.bodyElement=e.contentDocument=e.contentWindow=null,e.iframeElement=e.targetElm=null,e.selection&&(e.selection=e.selection.win=e.selection.dom=e.selection.dom.doc=null)},wM=function(e){var t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,t._mceOldSubmit=null),gM.unbind(t,"submit reset",e.formEventDelegate))},xM=function(e){if(!e.removed){var t=e._selectionOverrides,n=e.editorUpload,r=e.getBody(),o=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&o&&gM.remove(o.nextSibling),!e.inline&&r&&vM(e),YC.fireRemove(e),e.editorManager.remove(e),gM.remove(e.getContainer()),bM(t),bM(n),e.destroy()}},CM=function(e,t){var n=e.selection,r=e.dom;if(!e.destroyed){if(!t&&!e.removed)return void e.remove();t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),bM(n),bM(r)),wM(e),yM(e),e.destroyed=!0}},kM=il.DOM,NM=vr.extend,_M=vr.each,SM=vr.resolve,TM=_t.ie,EM=function(e,t,n){var r=this,o=r.documentBaseUrl=n.documentBaseURL,i=n.baseURI;t=tv(r,e,o,n.defaultSettings,t),r.settings=t,C.language=t.language||"en",C.languageLoad=t.language_load,C.baseURL=n.baseURL,r.id=e,r.setDirty(!1),r.plugins={},r.documentBaseURI=new rM(t.document_base_url,{base_uri:i}),r.baseURI=i,r.contentCSS=[],r.contentStyles=[],r.shortcuts=new A(r),r.loadedCSS={},r.editorCommands=new O(r),r.suffix=n.suffix,r.editorManager=n,r.inline=t.inline,r.buttons={},r.menuItems={},t.cache_suffix&&(_t.cacheSuffix=t.cache_suffix.replace(/^[\?\&]+/,"")),!1===t.override_viewport&&(_t.overrideViewPort=!1),n.fire("SetupEditor",{editor:r}),r.execCallback("setup",r),r.$=jr.overrideDefaults(function(){return{context:r.inline?r.getBody():r.getDoc(),element:r.getBody()}})};EM.prototype={render:function(){YR.render(this)},focus:function(e){Uk.focus(this,e)},hasFocus:function(){return Uk.hasFocus(this)},execCallback:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r,o=this,i=o.settings[e];if(i)return o.callbackLookup&&(r=o.callbackLookup[e])&&(i=r.func,r=r.scope),"string"==typeof i&&(r=i.replace(/\.\w+$/,""),r=r?SM(r):0,i=SM(i),o.callbackLookup=o.callbackLookup||{},o.callbackLookup[e]={func:i,scope:r}),i.apply(r||o,Array.prototype.slice.call(arguments,1))},translate:function(e){if(e&&vr.is(e,"string")){var t=this.settings.language||"en",n=this.editorManager.i18n;e=n.data[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,r){return n.data[t+"."+r]||"{#"+r+"}"})}return this.editorManager.translate(e)},getLang:function(e,t){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(void 0!==t?t:"{#"+e+"}")},getParam:function(e,t,n){return av(this,e,t,n)},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),t.stateSelector&&void 0===t.active&&(t.active=!1),t.text||t.icon||(t.icon=e),n.buttons=n.buttons,t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addSidebar:function(e,t){return QR.add(this,e,t)},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems=n.menuItems,n.menuItems[e]=t},addContextToolbar:function(e,t){var n,r=this;r.contextToolbars=r.contextToolbars||[],"string"==typeof e&&(n=e,e=function(e){return r.dom.is(e,n)}),r.contextToolbars.push({id:EN.uuid("mcet"),predicate:e,items:t})},addCommand:function(e,t,n){this.editorCommands.addCommand(e,t,n)},addQueryStateHandler:function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},addQueryValueHandler:function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},addShortcut:function(e,t,n,r){this.shortcuts.add(e,t,n,r)},execCommand:function(e,t,n,r){return this.editorCommands.execCommand(e,t,n,r)},queryCommandState:function(e){return this.editorCommands.queryCommandState(e)},queryCommandValue:function(e){return this.editorCommands.queryCommandValue(e)},queryCommandSupported:function(e){return this.editorCommands.queryCommandSupported(e)},show:function(){var e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable=!0:(kM.show(e.getContainer()),kM.hide(e.id)),e.load(),e.fire("show"))},hide:function(){var e=this,t=e.getDoc();e.hidden||(TM&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable=!1,e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(kM.hide(e.getContainer()),kM.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var t,n=this,r=n.getElement();return n.removed?"":r?(e=e||{},e.load=!0,t=n.setContent(void 0!==r.value?r.value:r.innerHTML,e),e.element=r,e.no_events||n.fire("LoadContent",e),e.element=r=null,t):void 0},save:function(e){var t,n,r=this,o=r.getElement();if(o&&r.initialized&&!r.removed)return e=e||{},e.save=!0,e.element=o,t=e.content=r.getContent(e),e.no_events||r.fire("SaveContent",e),"raw"===e.format&&r.fire("RawSaveContent",e),t=e.content,/TEXTAREA|INPUT/i.test(o.nodeName)?o.value=t:(!e.is_removing&&r.inline||(o.innerHTML=t),(n=kM.getParent(r.id,"form"))&&_M(n.elements,function(e){if(e.name===r.id)return e.value=t,!1})),e.element=o=null,!1!==e.set_dirty&&r.setDirty(!1),t},setContent:function(e,t){return mM(this,e,t)},getContent:function(e){return aM(this,e)},insertContent:function(e,t){t&&(e=NM({content:e},t)),this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty},setDirty:function(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.fire("dirty")},setMode:function(e){ek(this,e)},getContainer:function(){var e=this;return e.container||(e.container=kM.get(e.editorContainer||e.id+"_parent")),e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=kM.get(this.id)),this.targetElm},getWin:function(){var e,t=this;return t.contentWindow||(e=t.iframeElement)&&(t.contentWindow=e.contentWindow),t.contentWindow},getDoc:function(){var e,t=this;return t.contentDocument||(e=t.getWin())&&(t.contentDocument=e.document),t.contentDocument},getBody:function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)},convertURL:function(e,t,n){var r=this,o=r.settings;return o.urlconverter_callback?r.execCallback("urlconverter_callback",e,n,!0,t):!o.convert_urls||n&&"LINK"===n.nodeName||0===e.indexOf("file:")||0===e.length?e:o.relative_urls?r.documentBaseURI.toRelative(e):e=r.documentBaseURI.toAbsolute(e,o.remove_script_host)},addVisual:function(e){var t,n=this,r=n.settings,o=n.dom;e=e||n.getBody(),void 0===n.hasVisual&&(n.hasVisual=r.visual),_M(o.select("table,a",e),function(e){var i;switch(e.nodeName){case"TABLE":return t=r.visual_table_class||"mce-item-table",i=o.getAttrib(e,"border"),void(i&&"0"!==i||!n.hasVisual?o.removeClass(e,t):o.addClass(e,t));case"A":return void(o.getAttrib(e,"href")||(i=o.getAttrib(e,"name")||e.id,t=r.visual_anchor_class||"mce-item-anchor",i&&n.hasVisual?o.addClass(e,t):o.removeClass(e,t)))}}),n.fire("VisualAid",{element:e,hasVisual:n.hasVisual})},remove:function(){xM(this)},destroy:function(e){CM(this,e)},uploadImages:function(e){return this.editorUpload.uploadImages(e)},_scanForImages:function(){return this.editorUpload.scanForImages()}},NM(EM.prototype,ck);var OM,AM,DM,RM=function(e){return-1!==e.className.toString().indexOf("mce-")},MM={isEditorUIElement:RM},PM=function(e){return"nodechange"===e.type&&e.selectionChange},LM=function(e,t){var n=function(){t.throttle()};il.DOM.bind(document,"mouseup",n),e.on("remove",function(){il.DOM.unbind(document,"mouseup",n)})},IM=function(e){e.on("focusout",function(){RC.store(e)})},jM=function(e,t){e.on("mouseup touchend",function(e){t.throttle()})},BM=function(e,t){To.detect().browser.isIE()?IM(e):jM(e,t),e.on("keyup nodechange",function(t){PM(t)||RC.store(e)})},FM=function(e){var t=El(function(){RC.store(e)},0);e.inline&&LM(e,t),e.on("init",function(){BM(e,t)}),e.on("remove",function(){t.cancel()})},HM={register:FM},UM=il.DOM,zM=function(e){return MM.isEditorUIElement(e)},WM=function(e,t){var n=e?e.settings.custom_ui_selector:"";return null!==UM.getParent(t,function(t){return zM(t)||!!n&&e.dom.is(t,n)})},VM=function(){try{return document.activeElement}catch(e){return document.body}},qM=function(e,t){var n=t.editor;HM.register(n),n.on("focusin",function(){var t=this,n=e.focusedEditor;n!==t&&(n&&n.fire("blur",{focusedEditor:t}),e.setActive(t),e.focusedEditor=t,t.fire("focus",{blurredEditor:n}),t.focus(!0))}),n.on("focusout",function(){var t=this;Mt.setEditorTimeout(t,function(){var n=e.focusedEditor;WM(t,VM())||n!==t||(t.fire("blur",{focusedEditor:null}),e.focusedEditor=null)})}),OM||(OM=function(t){var n,r=e.activeEditor;n=t.target,r&&n.ownerDocument===document&&(n===document.body||WM(r,n)||e.focusedEditor!==r||(r.fire("blur",{focusedEditor:null}),e.focusedEditor=null))},UM.bind(document,"focusin",OM))},$M=function(e,t){e.focusedEditor===t.editor&&(e.focusedEditor=null),e.activeEditor||(UM.unbind(document,"focusin",OM),OM=null)},KM=function(e){e.on("AddEditor",be(qM,e)),e.on("RemoveEditor",be($M,e))},GM={setup:KM,isEditorUIElement:zM,isUIElement:WM},XM={},YM="en",JM={setCode:function(e){e&&(YM=e,this.rtl=!!this.data[e]&&"rtl"===this.data[e]._dir)},getCode:function(){return YM},rtl:!1,add:function(e,t){var n=XM[e];n||(XM[e]=n={});for(var r in t)n[r]=t[r];this.setCode(e)},translate:function(e){var t=XM[YM]||{},n=function(e){return vr.is(e,"function")?Object.prototype.toString.call(e):r(e)?"":""+e},r=function(e){return""===e||null===e||vr.is(e,"undefined")},o=function(e){return e=n(e),vr.hasOwn(t,e)?n(t[e]):e};if(r(e))return"";if(vr.is(e,"object")&&vr.hasOwn(e,"raw"))return n(e.raw);if(vr.is(e,"array")){var i=e.slice(1);e=o(e[0]).replace(/\{([0-9]+)\}/g,function(e,t){return vr.hasOwn(i,t)?n(i[t]):e})}return o(e).replace(/{context:\w+}$/,"")},data:XM},QM=il.DOM,ZM=vr.explode,eP=vr.each,tP=vr.extend,nP=0,rP=!1,oP=[],iP=[],aP=function(e){return"length"!==e},sP=function(e){eP(DM.get(),function(t){"scroll"===e.type?t.fire("ScrollWindow",e):t.fire("ResizeWindow",e)})},lP=function(e){e!==rP&&(e?jr(window).on("resize scroll",sP):jr(window).off("resize scroll",sP),rP=e)},uP=function(e){var t=iP;delete oP[e.id];for(var n=0;n<oP.length;n++)if(oP[n]===e){oP.splice(n,1);break}return iP=$e(iP,function(t){return e!==t}),DM.activeEditor===e&&(DM.activeEditor=iP.length>0?iP[0]:null),DM.focusedEditor===e&&(DM.focusedEditor=null),t.length!==iP.length},cP=function(e){return e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(uP(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0,e=null),e};DM={defaultSettings:{},$:jr,majorVersion:"4",minorVersion:"8.2",releaseDate:"2018-08-09",editors:oP,i18n:JM,activeEditor:null,settings:{},setup:function(){var e,t,n,r,o=this,i="";if(t=rM.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),n=window.tinymce||window.tinyMCEPreInit)e=n.base||n.baseURL,i=n.suffix;else{for(var a=document.getElementsByTagName("script"),s=0;s<a.length;s++){r=a[s].src;var l=r.substring(r.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(r)){-1!==l.indexOf(".min")&&(i=".min"),e=r.substring(0,r.lastIndexOf("/"));break}}!e&&document.currentScript&&(r=document.currentScript.src,-1!==r.indexOf(".min")&&(i=".min"),e=r.substring(0,r.lastIndexOf("/")))}o.baseURL=new rM(t).toAbsolute(e),o.documentBaseURL=t,o.baseURI=new rM(o.baseURL),o.suffix=i,GM.setup(o)},overrideDefaults:function(e){var t,n;t=e.base_url,t&&(this.baseURL=new rM(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new rM(this.baseURL)),n=e.suffix,e.suffix&&(this.suffix=n),this.defaultSettings=e;var r=e.plugin_base_urls;for(var o in r)C.PluginManager.urls[o]=r[o]},init:function(e){var t,n,r=this;n=vr.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var o=function(e,t){return e.inline&&t.tagName.toLowerCase()in n},i=function(e){var t=e.id;return t||(t=e.name,t=t&&!QM.get(t)?e.name:QM.uniqueId(),e.setAttribute("id",t)),t},a=function(t){var n=e[t];if(n)return n.apply(r,Array.prototype.slice.call(arguments,2))},s=function(e,t){return t.constructor===RegExp?t.test(e.className):QM.hasClass(e,t)},l=function(e){var t,n=[];if(_t.ie&&_t.ie<11)return uN.initError("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(e.types)return eP(e.types,function(e){n=n.concat(QM.select(e.selector))}),n;if(e.selector)return QM.select(e.selector);if(e.target)return[e.target];switch(e.mode){case"exact":t=e.elements||"",t.length>0&&eP(ZM(t),function(e){var t;(t=QM.get(e))?n.push(t):eP(document.forms,function(t){eP(t.elements,function(t){t.name===e&&(e="mce_editor_"+nP++,QM.setAttrib(t,"id",e),n.push(t))})})});break;case"textareas":case"specific_textareas":eP(QM.select("textarea"),function(t){e.editor_deselector&&s(t,e.editor_deselector)||e.editor_selector&&!s(t,e.editor_selector)||n.push(t)})}return n},u=function(e){t=e},c=function(){var t,n=0,s=[],d=function(e,o,i){var a=new EM(e,o,r);s.push(a),a.on("init",function(){++n===t.length&&u(s)}),a.targetElm=a.targetElm||i,a.render()};if(QM.unbind(window,"ready",c),a("onpageload"),t=jr.unique(l(e)),e.types)return void eP(e.types,function(n){vr.each(t,function(t){return!QM.is(t,n.selector)||(d(i(t),tP({},e,n),t),!1)})});vr.each(t,function(e){cP(r.get(e.id))}),t=vr.grep(t,function(e){return!r.get(e.id)}),0===t.length?u([]):eP(t,function(t){o(e,t)?uN.initError("Could not initialize inline editor on invalid inline target element",t):d(i(t),e,t)})};return r.settings=e,QM.bind(window,"ready",c),new St(function(e){t?e(t):u=function(t){e(t)}})},get:function(e){return 0===arguments.length?iP.slice(0):De(e)?Xe(iP,function(t){return t.id===e}).getOr(null):je(e)&&iP[e]?iP[e]:null},add:function(e){var t=this;return oP[e.id]===e?e:(null===t.get(e.id)&&(aP(e.id)&&(oP[e.id]=e),oP.push(e),iP.push(e)),lP(!0),t.activeEditor=e,t.fire("AddEditor",{editor:e}),AM||(AM=function(){t.fire("BeforeUnload")},QM.bind(window,"beforeunload",AM)),e)},createEditor:function(e,t){return this.add(new EM(e,t,this))},remove:function(e){var t,n,r=this;if(e)return De(e)?void eP(QM.select(e),function(e){(n=r.get(e.id))&&r.remove(n)}):(n=e,Pe(r.get(n.id))?null:(uP(n)&&r.fire("RemoveEditor",{editor:n}),0===iP.length&&QM.unbind(window,"beforeunload",AM),n.remove(),lP(iP.length>0),n));for(t=iP.length-1;t>=0;t--)r.remove(iP[t])},execCommand:function(e,t,n){var r=this,o=r.get(n);switch(e){case"mceAddEditor":return r.get(n)||new EM(n,r.settings,r).render(),!0;case"mceRemoveEditor":return o&&o.remove(),!0;case"mceToggleEditor":return o?(o.isHidden()?o.show():o.hide(),!0):(r.execCommand("mceAddEditor",0,n),!0)}return!!r.activeEditor&&r.activeEditor.execCommand(e,t,n)},triggerSave:function(){eP(iP,function(e){e.save()})},addI18n:function(e,t){JM.add(e,t)},translate:function(e){return JM.translate(e)},setActive:function(e){var t=this.activeEditor;this.activeEditor!==e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e}},tP(DM,WC),DM.setup();var dP=DM;!function(e){e.compareRanges=Mx.isEq,e.getCaretRangeFromPoint=mO.fromPoint,e.getSelectedNode=Kc,e.getNode=Gc}(ee||(ee={}));var fP,hP,pP=ee,mP=Math.min,gP=Math.max,vP=Math.round,bP=function(e,t,n){var r,o,i,a,s,l;return r=t.x,o=t.y,i=e.w,a=e.h,s=t.w,l=t.h,n=(n||"").split(""),"b"===n[0]&&(o+=l),"r"===n[1]&&(r+=s),"c"===n[0]&&(o+=vP(l/2)),"c"===n[1]&&(r+=vP(s/2)),"b"===n[3]&&(o-=a),"r"===n[4]&&(r-=i),"c"===n[3]&&(o-=vP(a/2)),"c"===n[4]&&(r-=vP(i/2)),kP(r,o,i,a)},yP=function(e,t,n,r){var o,i;for(i=0;i<r.length;i++)if(o=bP(e,t,r[i]),o.x>=n.x&&o.x+o.w<=n.w+n.x&&o.y>=n.y&&o.y+o.h<=n.h+n.y)return r[i];return null},wP=function(e,t,n){return kP(e.x-t,e.y-n,e.w+2*t,e.h+2*n)},xP=function(e,t){var n,r,o,i;return n=gP(e.x,t.x),r=gP(e.y,t.y),o=mP(e.x+e.w,t.x+t.w),i=mP(e.y+e.h,t.y+t.h),o-n<0||i-r<0?null:kP(n,r,o-n,i-r)},CP=function(e,t,n){var r,o,i,a,s,l,u,c,d,f;return s=e.x,l=e.y,u=e.x+e.w,c=e.y+e.h,d=t.x+t.w,f=t.y+t.h,r=gP(0,t.x-s),o=gP(0,t.y-l),i=gP(0,u-d),a=gP(0,c-f),s+=r,l+=o,n&&(u+=r,c+=o,s-=i,l-=a),u-=i,c-=a,kP(s,l,u-s,c-l)},kP=function(e,t,n,r){return{x:e,y:t,w:n,h:r}},NP=function(e){return kP(e.left,e.top,e.width,e.height)},_P={inflate:wP,relativePosition:bP,findBestRelativePosition:yP,intersect:xP,clamp:CP,create:kP,fromClientRect:NP},SP={},TP={add:function(e,t){SP[e.toLowerCase()]=t},has:function(e){return!!SP[e.toLowerCase()]},get:function(e){var t=e.toLowerCase(),n=SP.hasOwnProperty(t)?SP[t]:null;if(null===n)throw new Error("Could not find module for type: "+e);return n},create:function(e,t){var n;if("string"==typeof e?(t=t||{},t.type=e):(t=e,e=t.type),e=e.toLowerCase(),!(n=SP[e]))throw new Error("Could not find control by type: "+e);return n=new n(t),n.type=e,n}},EP=vr.each,OP=vr.extend,AP=function(){};AP.extend=fP=function(e){var t,n,r,o=this,i=o.prototype,a=function(){var e,t,n,r=this;if(!hP&&(r.init&&r.init.apply(r,arguments),t=r.Mixins))for(e=t.length;e--;)n=t[e],n.init&&n.init.apply(r,arguments)},s=function(){return this};hP=!0,t=new o,hP=!1,e.Mixins&&(EP(e.Mixins,function(t){for(var n in t)"init"!==n&&(e[n]=t[n])}),i.Mixins&&(e.Mixins=i.Mixins.concat(e.Mixins))),e.Methods&&EP(e.Methods.split(","),function(t){e[t]=s}),e.Properties&&EP(e.Properties.split(","),function(t){var n="_"+t;e[t]=function(e){var t=this;return void 0!==e?(t[n]=e,t):t[n]}}),e.Statics&&EP(e.Statics,function(e,t){a[t]=e}),e.Defaults&&i.Defaults&&(e.Defaults=OP({},i.Defaults,e.Defaults));for(n in e)r=e[n],"function"==typeof r&&i[n]?t[n]=function(e,t){return function(){var n,r=this,o=r._super;return r._super=i[e],n=t.apply(r,arguments),r._super=o,n}}(n,r):t[n]=r;return a.prototype=t,a.constructor=a,a.extend=fP,a};var DP=Math.min,RP=Math.max,MP=Math.round,PP=function(e){var t={},n=0,r=0,o=0,i=function(e,t,n){var r,o,i,a,s,l;return r=0,o=0,i=0,e/=255,t/=255,n/=255,s=DP(e,DP(t,n)),l=RP(e,RP(t,n)),s===l?(i=s,{h:0,s:0,v:100*i}):(a=e===s?t-n:n===s?e-t:n-e,r=e===s?3:n===s?1:5,r=60*(r-a/(l-s)),o=(l-s)/l,i=l,{h:MP(r),s:MP(100*o),v:MP(100*i)})},a=function(e,t,i){var a,s,l,u;if(e=(parseInt(e,10)||0)%360,t=parseInt(t,10)/100,i=parseInt(i,10)/100,t=RP(0,DP(t,1)),i=RP(0,DP(i,1)),0===t)return void(n=r=o=MP(255*i));switch(a=e/60,s=i*t,l=s*(1-Math.abs(a%2-1)),u=i-s,Math.floor(a)){case 0:n=s,r=l,o=0;break;case 1:n=l,r=s,o=0;break;case 2:n=0,r=s,o=l;break;case 3:n=0,r=l,o=s;break;case 4:n=l,r=0,o=s;break;case 5:n=s,r=0,o=l;break;default:n=r=o=0}n=MP(255*(n+u)),r=MP(255*(r+u)),o=MP(255*(o+u))},s=function(){var e=function(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e};return"#"+e(n)+e(r)+e(o)},l=function(){return{r:n,g:r,b:o}},u=function(){return i(n,r,o)},c=function(e){var i;return"object"==typeof e?"r"in e?(n=e.r,r=e.g,o=e.b):"v"in e&&a(e.h,e.s,e.v):(i=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(n=parseInt(i[1],10),r=parseInt(i[2],10),o=parseInt(i[3],10)):(i=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(n=parseInt(i[1],16),r=parseInt(i[2],16),o=parseInt(i[3],16)):(i=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(n=parseInt(i[1]+i[1],16),r=parseInt(i[2]+i[2],16),o=parseInt(i[3]+i[3],16)),n=n<0?0:n>255?255:n,r=r<0?0:r>255?255:r,o=o<0?0:o>255?255:o,t};return e&&c(e),t.toRgb=l,t.toHsv=u,t.toHex=s,t.parse=c,t},LP=function(e,t){var n,r,o,i;if(t=t||'"',null===e)return"null";if("string"===(o=typeof e))return r="\bb\tt\nn\ff\rr\"\"''\\\\",t+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,o){return'"'===t&&"'"===e?e:(n=r.indexOf(o))+1?"\\"+r.charAt(n+1):(e=o.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e)})+t;if("object"===o){if(e.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(e)){for(n=0,r="[";n<e.length;n++)r+=(n>0?",":"")+LP(e[n],t);return r+"]"}r="{";for(i in e)e.hasOwnProperty(i)&&(r+="function"!=typeof e[i]?(r.length>1?","+t:t)+i+t+":"+LP(e[i],t):"");return r+"}"}return""+e},IP={serialize:LP,parse:function(e){try{return JSON.parse(e)}catch(e){}}},jP={callbacks:{},count:0,send:function(e){var t=this,n=il.DOM,r=void 0!==e.count?e.count:t.count,o="tinymce_jsonp_"+r;t.callbacks[r]=function(i){n.remove(o),delete t.callbacks[r],e.callback(i)},n.add(n.doc.body,"script",{id:o,src:e.url,type:"text/javascript"}),t.count++}},BP={send:function(e){var t,n=0,r=function(){!e.async||4===t.readyState||n++>1e4?(e.success&&n<1e4&&200===t.status?e.success.call(e.success_scope,""+t.responseText,t,e):e.error&&e.error.call(e.error_scope,n>1e4?"TIMED_OUT":"GENERAL",t,e),t=null):setTimeout(r,10)};if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=!1!==e.async,e.data=e.data||"",BP.fire("beforeInitialize",{settings:e}),t=new L){if(t.overrideMimeType&&t.overrideMimeType(e.content_type),t.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(t.withCredentials=!0),e.content_type&&t.setRequestHeader("Content-Type",e.content_type),e.requestheaders&&vr.each(e.requestheaders,function(e){t.setRequestHeader(e.key,e.value)}),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t=BP.fire("beforeSend",{xhr:t,settings:e}).xhr,t.send(e.data),!e.async)return r();setTimeout(r,10)}}};vr.extend(BP,WC);var FP=vr.extend,HP=function(e){this.settings=FP({},e),this.count=0};HP.sendRPC=function(e){return(new HP).send(e)},HP.prototype={send:function(e){var t=e.error,n=e.success;e=FP(this.settings,e),e.success=function(r,o){r=IP.parse(r),void 0===r&&(r={error:"JSON Parse error."}),r.error?t.call(e.error_scope||e.scope,r.error,o):n.call(e.success_scope||e.scope,r.result)},e.error=function(n,r){t&&t.call(e.error_scope||e.scope,n,r)},e.data=IP.serialize({id:e.id||"c"+this.count++,method:e.method,params:e.params}),e.content_type="application/json",BP.send(e)}};var UP;try{UP=window.localStorage}catch(e){UP=function(){return function(){var e={},t=[],n={getItem:function(t){var n=e[t];return n||null},setItem:function(n,r){t.push(n),e[n]=String(r)},key:function(e){return t[e]},removeItem:function(n){t=t.filter(function(e){return e===n}),delete e[n]},clear:function(){t=[],e={}},length:0};return Object.defineProperty(n,"length",{get:function(){return t.length},configurable:!1,enumerable:!1}),n}()}()}var zP=UP,WP=dP,VP={geom:{Rect:_P},util:{Promise:St,Delay:Mt,Tools:vr,VK:q_,URI:rM,Class:AP,EventDispatcher:HC,Observable:WC,I18n:JM,XHR:BP,JSON:IP,JSONRequest:HP,JSONP:jP,LocalStorage:zP,Color:PP},dom:{EventUtils:Vt,Sizzle:Kn,DomQuery:jr,TreeWalker:b,DOMUtils:il,ScriptLoader:cl,RangeUtils:pP,Serializer:J,ControlSelection:uO,BookmarkManager:iO,Selection:cA,Event:Vt.Event},html:{Styles:w,Entities:Fs,Node:UE,Schema:y,SaxParser:nS,DomParser:X,Writer:T,Serializer:E},ui:{Factory:TP},Env:_t,AddOnManager:C,Annotator:S,Formatter:G,UndoManager:$,EditorCommands:O,WindowManager:P,NotificationManager:R,EditorObservable:ck,Shortcuts:A,Editor:EM,FocusManager:MM,EditorManager:dP,DOM:il.DOM,ScriptLoader:cl.ScriptLoader,PluginManager:C.PluginManager,ThemeManager:C.ThemeManager,trim:vr.trim,isArray:vr.isArray,is:vr.is,toArray:vr.toArray,makeMap:vr.makeMap,each:vr.each,map:vr.map,grep:vr.grep,inArray:vr.inArray,extend:vr.extend,create:vr.create,walk:vr.walk,createNS:vr.createNS,resolve:vr.resolve,explode:vr.explode,_addCacheSuffix:vr._addCacheSuffix,isOpera:_t.opera,isWebKit:_t.webkit,isIE:_t.ie,isGecko:_t.gecko,isMac:_t.mac};WP=vr.extend(WP,VP);var qP=WP;!function(e){window.tinymce=e,window.tinyMCE=e}(qP),function(t){try{e.exports=t}catch(e){}}(qP)}()}()}).call(t,n(403).setImmediate)},3344:function(e,t,n){(function(t,r){var o;!function(){"use strict";o=function(e,n,r,o){function i(e,t){var n=p._readFile(e,null,o.asyncLoad);o.asyncLoad?n.then(function(e){t(e)}):t(n)}function a(e){n=e,r&&l()}function s(e){r=e,n&&l()}function l(){for(p.rules=p._parseAFF(n),p.compoundRuleCodes={},c=0,f=p.compoundRules.length;c<f;c++){var e=p.compoundRules[c];for(d=0,h=e.length;d<h;d++)p.compoundRuleCodes[e[d]]=[]}"ONLYINCOMPOUND"in p.flags&&(p.compoundRuleCodes[p.flags.ONLYINCOMPOUND]=[]),p.dictionaryTable=p._parseDIC(r);for(c in p.compoundRuleCodes)0===p.compoundRuleCodes[c].length&&delete p.compoundRuleCodes[c];for(c=0,f=p.compoundRules.length;c<f;c++){var t=p.compoundRules[c],i="";for(d=0,h=t.length;d<h;d++){var a=t[d];a in p.compoundRuleCodes?i+="("+p.compoundRuleCodes[a].join("|")+")":i+=a}p.compoundRules[c]=new RegExp(i,"i")}p.loaded=!0,o.asyncLoad&&o.loadedCallback&&o.loadedCallback(p)}o=o||{},this.dictionary=null,this.rules={},this.dictionaryTable={},this.compoundRules=[],this.compoundRuleCodes={},this.replacementTable=[],this.flags=o.flags||{},this.memoized={},this.loaded=!1;var u,c,d,f,h,p=this;return e&&(p.dictionary=e,n&&r?l():"undefined"!=typeof window&&"chrome"in window&&"extension"in window.chrome&&"getURL"in window.chrome.extension?(u=o.dictionaryPath?o.dictionaryPath:"typo/dictionaries",n||i(chrome.extension.getURL(u+"/"+e+"/"+e+".aff"),a),r||i(chrome.extension.getURL(u+"/"+e+"/"+e+".dic"),s)):(u=o.dictionaryPath?o.dictionaryPath:t+"/dictionaries",n||i(u+"/"+e+"/"+e+".aff",a),r||i(u+"/"+e+"/"+e+".dic",s))),this},o.prototype={load:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);return this},_readFile:function(e,t,o){if(t=t||"utf8","undefined"!=typeof XMLHttpRequest){var i,a=new XMLHttpRequest;return a.open("GET",e,o),o&&(i=new Promise(function(e,t){a.onload=function(){200===a.status?e(a.responseText):t(a.statusText)},a.onerror=function(){t(a.statusText)}})),a.overrideMimeType&&a.overrideMimeType("text/plain; charset="+t),a.send(null),o?i:a.responseText}var s=n(4481);try{if(s.existsSync(e)){var l=s.statSync(e),u=s.openSync(e,"r"),c=new r(l.size);return s.readSync(u,c,0,c.length,null),c.toString(t,0,c.length)}console.log("Path "+e+" does not exist.")}catch(e){return console.log(e),""}},_parseAFF:function(e){var t,n,r,o,i,a,s,l,u={};e=this._removeAffixComments(e);var c=e.split("\n");for(i=0,s=c.length;i<s;i++){t=c[i];var d=t.split(/\s+/),f=d[0];if("PFX"==f||"SFX"==f){var h=d[1],p=d[2];r=parseInt(d[3],10);var m=[];for(a=i+1,l=i+1+r;a<l;a++){n=c[a],o=n.split(/\s+/);var g=o[2],v=o[3].split("/"),b=v[0];"0"===b&&(b="");var y=this.parseRuleCodes(v[1]),w=o[4],x={};x.add=b,y.length>0&&(x.continuationClasses=y),"."!==w&&(x.match="SFX"===f?new RegExp(w+"$"):new RegExp("^"+w)),"0"!=g&&(x.remove="SFX"===f?new RegExp(g+"$"):g),m.push(x)}u[h]={type:f,combineable:"Y"==p,entries:m},i+=r}else if("COMPOUNDRULE"===f){for(r=parseInt(d[1],10),a=i+1,l=i+1+r;a<l;a++)t=c[a],o=t.split(/\s+/),this.compoundRules.push(o[1]);i+=r}else"REP"===f?(o=t.split(/\s+/),3===o.length&&this.replacementTable.push([o[1],o[2]])):this.flags[f]=d[1]}return u},_removeAffixComments:function(e){return e=e.replace(/^\s*#.*$/gm,""),e=e.replace(/^\s\s*/m,"").replace(/\s\s*$/m,""),e=e.replace(/\n{2,}/g,"\n"),e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},_parseDIC:function(e){function t(e,t){r.hasOwnProperty(e)||(r[e]=null),t.length>0&&(null===r[e]&&(r[e]=[]),r[e].push(t))}e=this._removeDicComments(e);for(var n=e.split("\n"),r={},o=1,i=n.length;o<i;o++){var a=n[o],s=a.split("/",2),l=s[0];if(s.length>1){var u=this.parseRuleCodes(s[1]);"NEEDAFFIX"in this.flags&&-1!=u.indexOf(this.flags.NEEDAFFIX)||t(l,u);for(var c=0,d=u.length;c<d;c++){var f=u[c],h=this.rules[f];if(h)for(var p=this._applyRule(l,h),m=0,g=p.length;m<g;m++){var v=p[m];if(t(v,[]),h.combineable)for(var b=c+1;b<d;b++){var y=u[b],w=this.rules[y];if(w&&w.combineable&&h.type!=w.type)for(var x=this._applyRule(v,w),C=0,k=x.length;C<k;C++){var N=x[C];t(N,[])}}}f in this.compoundRuleCodes&&this.compoundRuleCodes[f].push(l)}}else t(l.trim(),[])}return r},_removeDicComments:function(e){return e=e.replace(/^\t.*$/gm,"")},parseRuleCodes:function(e){if(!e)return[];if(!("FLAG"in this.flags))return e.split("");if("long"===this.flags.FLAG){for(var t=[],n=0,r=e.length;n<r;n+=2)t.push(e.substr(n,2));return t}return"num"===this.flags.FLAG?e.split(","):void 0},_applyRule:function(e,t){for(var n=t.entries,r=[],o=0,i=n.length;o<i;o++){var a=n[o];if(!a.match||e.match(a.match)){var s=e;if(a.remove&&(s=s.replace(a.remove,"")),"SFX"===t.type?s+=a.add:s=a.add+s,r.push(s),"continuationClasses"in a)for(var l=0,u=a.continuationClasses.length;l<u;l++){var c=this.rules[a.continuationClasses[l]];c&&(r=r.concat(this._applyRule(s,c)))}}}return r},check:function(e){if(!this.loaded)throw"Dictionary not loaded.";var t=e.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(this.checkExact(t))return!0;if(t.toUpperCase()===t){var n=t[0]+t.substring(1).toLowerCase();if(this.hasFlag(n,"KEEPCASE"))return!1;if(this.checkExact(n))return!0}var r=t.toLowerCase();if(r!==t){if(this.hasFlag(r,"KEEPCASE"))return!1;if(this.checkExact(r))return!0}return!1},checkExact:function(e){if(!this.loaded)throw"Dictionary not loaded.";var t,n,r=this.dictionaryTable[e];if(void 0===r){if("COMPOUNDMIN"in this.flags&&e.length>=this.flags.COMPOUNDMIN)for(t=0,n=this.compoundRules.length;t<n;t++)if(e.match(this.compoundRules[t]))return!0}else{if(null===r)return!0;if("object"==typeof r)for(t=0,n=r.length;t<n;t++)if(!this.hasFlag(e,"ONLYINCOMPOUND",r[t]))return!0}return!1},hasFlag:function(e,t,n){if(!this.loaded)throw"Dictionary not loaded.";return!!(t in this.flags&&(void 0===n&&(n=Array.prototype.concat.apply([],this.dictionaryTable[e])),n&&-1!==n.indexOf(this.flags[t])))},alphabet:"",suggest:function(e,t){function n(e){var t,n,r,o,i,a,s=[];for(t=0,o=e.length;t<o;t++){var l=e[t];for(n=0,i=l.length+1;n<i;n++){var c=[l.substring(0,n),l.substring(n)];if(c[1]&&s.push(c[0]+c[1].substring(1)),c[1].length>1&&c[1][1]!==c[1][0]&&s.push(c[0]+c[1][1]+c[1][0]+c[1].substring(2)),c[1])for(r=0,a=u.alphabet.length;r<a;r++)u.alphabet[r]!=c[1].substring(0,1)&&s.push(c[0]+u.alphabet[r]+c[1].substring(1));if(c[1])for(r=0,a=u.alphabet.length;r<a;r++)s.push(c[0]+u.alphabet[r]+c[1])}}return s}function r(e){for(var t=[],n=0,r=e.length;n<r;n++)u.check(e[n])&&t.push(e[n]);return t}if(!this.loaded)throw"Dictionary not loaded.";if(t=t||5,this.memoized.hasOwnProperty(e)){var o=this.memoized[e].limit;if(t<=o||this.memoized[e].suggestions.length<o)return this.memoized[e].suggestions.slice(0,t)}if(this.check(e))return[];for(var i=0,a=this.replacementTable.length;i<a;i++){var s=this.replacementTable[i];if(-1!==e.indexOf(s[0])){var l=e.replace(s[0],s[1]);if(this.check(l))return[l]}}var u=this;return u.alphabet="abcdefghijklmnopqrstuvwxyz",this.memoized[e]={suggestions:function(e){function o(e,t){return e[1]<t[1]?-1:1}var i,a,s=n([e]),l=n(s),c=r(s.concat(l)),d={};for(i=0,a=c.length;i<a;i++)c[i]in d?d[c[i]]+=1:d[c[i]]=1;var f=[];for(i in d)d.hasOwnProperty(i)&&f.push([i,d[i]]);f.sort(o).reverse();var h=[],p="lowercase";for(e.toUpperCase()===e?p="uppercase":e.substr(0,1).toUpperCase()+e.substr(1).toLowerCase()===e&&(p="capitalized"),i=0,a=Math.min(t,f.length);i<a;i++)"uppercase"===p?f[i][0]=f[i][0].toUpperCase():"capitalized"===p&&(f[i][0]=f[i][0].substr(0,1).toUpperCase()+f[i][0].substr(1)),u.hasFlag(f[i][0],"NOSUGGEST")||h.push(f[i][0]);return h}(e),limit:t},this.memoized[e].suggestions}}}(),e.exports=o}).call(t,"/",n(169).Buffer)},3538:function(e,t){/*!
ISC License

Copyright (c) 2014-2018, Andrea Giammarchi, @WebReflection

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted, provided that the above
copyright notice and this permission notice appear in all copies.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE
OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.

*/
function n(e,t){"use strict";function n(){var e=T.splice(0,T.length);for(et=0;e.length;)e.shift().call(null,e.shift())}function r(e,t){for(var n=0,r=e.length;n<r;n++)g(e[n],t)}function o(e){for(var t,n=0,r=e.length;n<r;n++)t=e[n],P(t,ae[a(t)])}function i(e){return function(t){Fe(t)&&(g(t,e),se.length&&r(t.querySelectorAll(se),e))}}function a(e){var t=qe.call(e,"is"),n=e.nodeName.toUpperCase(),r=ue.call(ie,t?ne+t.toUpperCase():te+n);return t&&-1<r&&!s(n,t)?-1:r}function s(e,t){return-1<se.indexOf(e+'[is="'+t+'"]')}function l(e){var t=e.currentTarget,n=e.attrChange,r=e.attrName,o=e.target,i=e[Y]||2,a=e[J]||3;!at||o&&o!==t||!t[V]||"style"===r||e.prevValue===e.newValue&&(""!==e.newValue||n!==i&&n!==a)||t[V](r,n===i?null:e.prevValue,n===a?null:e.newValue)}function u(e){var t=i(e);return function(e){T.push(t,e.target),et&&clearTimeout(et),et=setTimeout(n,1)}}function c(e){it&&(it=!1,e.currentTarget.removeEventListener(Z,c)),se.length&&r((e.target||N).querySelectorAll(se),e.detail===z?z:H),je&&p()}function d(e,t){var n=this;Ge.call(n,e,t),E.call(n,{target:n})}function f(e,t,n){var r=t.apply(e,n),i=a(r);return-1<i&&P(r,ae[i]),n.pop()&&se.length&&o(r.querySelectorAll(se)),r}function h(e,t){Me(e,t),D?D.observe(e,Qe):(ot&&(e.setAttribute=d,e[B]=A(e),e[F](ee,E)),e[F](Q,l)),e[G]&&at&&(e.created=!0,e[G](),e.created=!1)}function p(){for(var e,t=0,n=He.length;t<n;t++)e=He[t],le.contains(e)||(n--,He.splice(t--,1),g(e,z))}function m(e){throw new Error("A "+e+" type is already registered")}function g(e,t){var n,r,o=a(e);-1<o&&!We.call(e,"TEMPLATE")&&(M(e,ae[o]),o=0,t!==H||e[H]?t!==z||e[z]||(e[H]=!1,e[z]=!0,r="disconnected",o=1):(e[z]=!1,e[H]=!0,r="connected",o=1,je&&ue.call(He,e)<0&&He.push(e)),o&&(n=e[t+U]||e[r+U])&&n.call(e))}function v(){}function b(e,t,n){var r=n&&n[W]||"",o=t.prototype,i=Re(o),a=t.observedAttributes||pe,s={prototype:i};Be(i,G,{value:function(){if(Te)Te=!1;else if(!this[xe]){this[xe]=!0,new t(this),o[G]&&o[G].call(this);var e=Ee[Ae.get(t)];(!ke||e.create.length>1)&&x(this)}}}),Be(i,V,{value:function(e){-1<ue.call(a,e)&&o[V]&&o[V].apply(this,arguments)}}),o[$]&&Be(i,q,{value:o[$]}),o[K]&&Be(i,X,{value:o[K]}),r&&(s[W]=r),e=e.toUpperCase(),Ee[e]={constructor:t,create:r?[r,De(e)]:[e]},Ae.set(t,e),N[I](e.toLowerCase(),s),C(e),Oe[e].r()}function y(e){var t=Ee[e.toUpperCase()];return t&&t.constructor}function w(e){return"string"==typeof e?e:e&&e.is||""}function x(e){for(var t,n=e[V],r=n?e.attributes:pe,o=r.length;o--;)t=r[o],n.call(e,t.name||t.nodeName,null,t.value||t.nodeValue)}function C(e){return e=e.toUpperCase(),e in Oe||(Oe[e]={},Oe[e].p=new Se(function(t){Oe[e].r=t})),Oe[e].p}function k(){Ce&&delete e.customElements,he(e,"customElements",{configurable:!0,value:new v}),he(e,"CustomElementRegistry",{configurable:!0,value:v});for(var t=S.get(/^HTML[A-Z]*[a-z]/),n=t.length;n--;function(t){var n=e[t];if(n){e[t]=function(e){var t,r;return e||(e=this),e[xe]||(Te=!0,t=Ee[Ae.get(e.constructor)],r=ke&&1===t.create.length,e=r?Reflect.construct(n,pe,t.constructor):N.createElement.apply(N,t.create),e[xe]=!0,Te=!1,r||x(e)),e},e[t].prototype=n.prototype;try{n.prototype.constructor=e[t]}catch(r){we=!0,he(n,xe,{value:e[t]})}}}(t[n]));N.createElement=function(e,t){var n=w(t);return n?Je.call(this,e,De(n)):Je.call(this,e)},tt||(rt=!0,N[I](""))}var N=e.document,_=e.Object,S=function(e){var t,n,r,o,i=/^[A-Z]+[a-z]/,a=function(e){var t,n=[];for(t in l)e.test(t)&&n.push(t);return n},s=function(e,t){(t=t.toLowerCase())in l||(l[e]=(l[e]||[]).concat(t),l[t]=l[t.toUpperCase()]=e)},l=(_.create||_)(null),u={};for(n in e)for(o in e[n])for(r=e[n][o],l[o]=r,t=0;t<r.length;t++)l[r[t].toLowerCase()]=l[r[t].toUpperCase()]=o;return u.get=function(e){return"string"==typeof e?l[e]||(i.test(e)?[]:""):a(e)},u.set=function(e,t){return i.test(e)?s(e,t):s(t,e),u},u}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}});"object"!=typeof t&&(t={type:t||"auto"});var T,E,O,A,D,R,M,P,L,I="registerElement",j=1e5*e.Math.random()>>0,B="__"+I+j,F="addEventListener",H="attached",U="Callback",z="detached",W="extends",V="attributeChanged"+U,q=H+U,$="connected"+U,K="disconnected"+U,G="created"+U,X=z+U,Y="ADDITION",J="REMOVAL",Q="DOMAttrModified",Z="DOMContentLoaded",ee="DOMSubtreeModified",te="<",ne="=",re=/^[A-Z][._A-Z0-9]*-[-._A-Z0-9]*$/,oe=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],ie=[],ae=[],se="",le=N.documentElement,ue=ie.indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},ce=_.prototype,de=ce.hasOwnProperty,fe=ce.isPrototypeOf,he=_.defineProperty,pe=[],me=_.getOwnPropertyDescriptor,ge=_.getOwnPropertyNames,ve=_.getPrototypeOf,be=_.setPrototypeOf,ye=!!_.__proto__,we=!1,xe="__dreCEv1",Ce=e.customElements,ke=!/^force/.test(t.type)&&!!(Ce&&Ce.define&&Ce.get&&Ce.whenDefined),Ne=_.create||_,_e=e.Map||function(){var e,t=[],n=[];return{get:function(e){return n[ue.call(t,e)]},set:function(r,o){e=ue.call(t,r),e<0?n[t.push(r)-1]=o:n[e]=o}}},Se=e.Promise||function(e){function t(e){for(r=!0;n.length;)n.shift()(e)}var n=[],r=!1,o={catch:function(){return o},then:function(e){return n.push(e),r&&setTimeout(t,1),o}};return e(t),o},Te=!1,Ee=Ne(null),Oe=Ne(null),Ae=new _e,De=function(e){return e.toLowerCase()},Re=_.create||function e(t){return t?(e.prototype=t,new e):this},Me=be||(ye?function(e,t){return e.__proto__=t,e}:ge&&me?function(){function e(e,t){for(var n,r=ge(t),o=0,i=r.length;o<i;o++)n=r[o],de.call(e,n)||he(e,n,me(t,n))}return function(t,n){do{e(t,n)}while((n=ve(n))&&!fe.call(n,t));return t}}():function(e,t){for(var n in t)e[n]=t[n];return e}),Pe=e.MutationObserver||e.WebKitMutationObserver,Le=e.HTMLAnchorElement,Ie=(e.HTMLElement||e.Element||e.Node).prototype,je=!fe.call(Ie,le),Be=je?function(e,t,n){return e[t]=n.value,e}:he,Fe=je?function(e){return 1===e.nodeType}:function(e){return fe.call(Ie,e)},He=je&&[],Ue=Ie.attachShadow,ze=Ie.cloneNode,We=Ie.closest||function(e){for(var t=this;t&&t.nodeName!==e;)t=t.parentNode;return t},Ve=Ie.dispatchEvent,qe=Ie.getAttribute,$e=Ie.hasAttribute,Ke=Ie.removeAttribute,Ge=Ie.setAttribute,Xe=N.createElement,Ye=N.importNode,Je=Xe,Qe=Pe&&{attributes:!0,characterData:!0,attributeOldValue:!0},Ze=Pe||function(e){ot=!1,le.removeEventListener(Q,Ze)},et=0,tt=I in N&&!/^force-all/.test(t.type),nt=!0,rt=!1,ot=!0,it=!0,at=!0;if(Pe&&(L=N.createElement("div"),L.innerHTML="<div><div></div></div>",new Pe(function(e,t){if(e[0]&&"childList"==e[0].type&&!e[0].removedNodes[0].childNodes.length){L=me(Ie,"innerHTML");var n=L&&L.set;n&&he(Ie,"innerHTML",{set:function(e){for(;this.lastChild;)this.removeChild(this.lastChild);n.call(this,e)}})}t.disconnect(),L=null}).observe(L,{childList:!0,subtree:!0}),L.innerHTML=""),tt||(be||ye?(M=function(e,t){fe.call(t,e)||h(e,t)},P=h):(M=function(e,t){e[B]||(e[B]=_(!0),h(e,t))},P=M),je?(ot=!1,function(){var e=me(Ie,F),t=e.value,n=function(e){var t=new CustomEvent(Q,{bubbles:!0});t.attrName=e,t.prevValue=qe.call(this,e),t.newValue=null,t[J]=t.attrChange=2,Ke.call(this,e),Ve.call(this,t)},r=function(e,t){var n=$e.call(this,e),r=n&&qe.call(this,e),o=new CustomEvent(Q,{bubbles:!0});Ge.call(this,e,t),o.attrName=e,o.prevValue=n?r:null,o.newValue=t,n?o.MODIFICATION=o.attrChange=1:o[Y]=o.attrChange=0,Ve.call(this,o)},o=function(e){var t,n=e.currentTarget,r=n[B],o=e.propertyName;r.hasOwnProperty(o)&&(r=r[o],t=new CustomEvent(Q,{bubbles:!0}),t.attrName=r.name,t.prevValue=r.value||null,t.newValue=r.value=n[o]||null,null==t.prevValue?t[Y]=t.attrChange=0:t.MODIFICATION=t.attrChange=1,Ve.call(n,t))};e.value=function(e,i,a){e===Q&&this[V]&&this.setAttribute!==r&&(this[B]={className:{name:"class",value:this.className}},this.setAttribute=r,this.removeAttribute=n,t.call(this,"propertychange",o)),t.call(this,e,i,a)},he(Ie,F,e)}()):Pe||(le[F](Q,Ze),le.setAttribute(B,1),le.removeAttribute(B),ot&&(E=function(e){var t,n,r,o=this;if(o===e.target){t=o[B],o[B]=n=A(o);for(r in n){if(!(r in t))return O(0,o,r,t[r],n[r],Y);if(n[r]!==t[r])return O(1,o,r,t[r],n[r],"MODIFICATION")}for(r in t)if(!(r in n))return O(2,o,r,t[r],n[r],J)}},O=function(e,t,n,r,o,i){var a={attrChange:e,currentTarget:t,attrName:n,prevValue:r,newValue:o};a[i]=e,l(a)},A=function(e){for(var t,n,r={},o=e.attributes,i=0,a=o.length;i<a;i++)t=o[i],"setAttribute"!==(n=t.name)&&(r[n]=t.value);return r})),N[I]=function(e,t){if(n=e.toUpperCase(),nt&&(nt=!1,Pe?(D=function(e,t){function n(e,t){for(var n=0,r=e.length;n<r;t(e[n++]));}return new Pe(function(r){for(var o,i,a,s=0,l=r.length;s<l;s++)o=r[s],"childList"===o.type?(n(o.addedNodes,e),n(o.removedNodes,t)):(i=o.target,at&&i[V]&&"style"!==o.attributeName&&(a=qe.call(i,o.attributeName))!==o.oldValue&&i[V](o.attributeName,o.oldValue,a))})}(i(H),i(z)),R=function(e){return D.observe(e,{childList:!0,subtree:!0}),e},R(N),Ue&&(Ie.attachShadow=function(){return R(Ue.apply(this,arguments))})):(T=[],N[F]("DOMNodeInserted",u(H)),N[F]("DOMNodeRemoved",u(z))),N[F](Z,c),N[F]("readystatechange",c),N.importNode=function(e,t){switch(e.nodeType){case 1:return f(N,Ye,[e,!!t]);case 11:for(var n=N.createDocumentFragment(),r=e.childNodes,o=r.length,i=0;i<o;i++)n.appendChild(N.importNode(r[i],!!t));return n;default:return ze.call(e,!!t)}},Ie.cloneNode=function(e){return f(this,ze,[!!e])}),rt)return rt=!1;if(-2<ue.call(ie,ne+n)+ue.call(ie,te+n)&&m(e),!re.test(n)||-1<ue.call(oe,n))throw new Error("The type "+e+" is invalid");var n,o,a=function(){return l?N.createElement(d,n):N.createElement(d)},s=t||ce,l=de.call(s,W),d=l?t[W].toUpperCase():n;return l&&-1<ue.call(ie,te+d)&&m(d),o=ie.push((l?ne:te)+n)-1,se=se.concat(se.length?",":"",l?d+'[is="'+e.toLowerCase()+'"]':d),a.prototype=ae[o]=de.call(s,"prototype")?s.prototype:Re(Ie),se.length&&r(N.querySelectorAll(se),H),a},N.createElement=Je=function(e,t){var n=w(t),r=n?Xe.call(N,e,De(n)):Xe.call(N,e),o=""+e,i=ue.call(ie,(n?ne:te)+(n||o).toUpperCase()),a=-1<i;return n&&(r.setAttribute("is",n=n.toLowerCase()),a&&(a=s(o.toUpperCase(),n))),at=!N.createElement.innerHTMLHelper,a&&P(r,ae[i]),r}),addEventListener("beforeunload",function(){delete N.createElement,delete N.importNode,delete N[I]},!1),v.prototype={constructor:v,define:ke?function(e,t,n){if(n)b(e,t,n);else{var r=e.toUpperCase();Ee[r]={constructor:t,create:[r]},Ae.set(t,r),Ce.define(e,t)}}:b,get:ke?function(e){return Ce.get(e)||y(e)}:y,whenDefined:ke?function(e){return Se.race([Ce.whenDefined(e),C(e)])}:C},!Ce||/^force/.test(t.type))k();else if(!t.noBuiltIn)try{!function(t,n,r){var o=new RegExp("^<a\\s+is=('|\")"+r+"\\1></a>$");if(n[W]="a",t.prototype=Re(Le.prototype),t.prototype.constructor=t,e.customElements.define(r,t,n),!o.test(N.createElement("a",{is:r}).outerHTML)||!o.test((new t).outerHTML))throw n}(function e(){return Reflect.construct(Le,[],e)},{},"document-register-element-a"+j)}catch(e){k()}if(!t.noBuiltIn)try{if(Xe.call(N,"a","a").outerHTML.indexOf("is")<0)throw{}}catch(e){De=function(e){return{is:e.toLowerCase()}}}}e.exports=n},3563:function(e,t,n){var r,o,i;!function(a){o=[n(245)],r=a,void 0!==(i="function"==typeof r?r.apply(t,o):r)&&(e.exports=i)}(function(e){tinymce.addI18n("en",{Cut:app.tl("Cut"),"Heading 5":app.tl("Heading [_s]",5),"Header 2":app.tl("Header [_s]",2),"Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.":app.tl("Your browser doesn't support direct access to the clipboard. Please use the [_s] keyboard shortcuts instead.","Ctrl+X/C/V"),"Heading 4":app.tl("Heading [_s]",4),Div:"Div","Heading 2":app.tl("Heading [_s]",2),Paste:app.tl("Paste"),Close:app.tl("Close"),"Font Family":app.tl("Font Family"),Pre:"Pre","Align right":app.tl("Align right"),"New document":app.tl("New document"),Blockquote:app.tl("Blockquote"),"Numbered list":app.tl("Numbered list"),"Heading 1":app.tl("Heading [_s]",1),Headings:app.tl("Headings"),"Increase indent":app.tl("Increase indent"),Formats:app.tl("Formats"),Headers:app.tl("Headers"),"Select all":app.tl("Select all"),"Header 3":app.tl("Header [_s]",3),Blocks:app.tl("Blocks"),Undo:app.tl("Undo"),Strikethrough:app.tl("Strikethrough"),"Bullet list":app.tl("Bullet list"),"Header 1":app.tl("Header [_s]",1),Superscript:app.tl("Superscript"),"Clear formatting":app.tl("Clear formatting"),"Font Sizes":app.tl("Font Sizes"),Subscript:app.tl("Subscript"),"Header 6":app.tl("Header [_s]",6),Redo:app.tl("Redo"),Paragraph:app.tl("Paragraph"),Ok:app.tl("Ok"),Bold:app.tl("Bold"),Code:app.tl("Code"),Italic:app.tl("Italic"),"Align center":app.tl("Align center"),"Header 5":app.tl("Header [_s]",5),"Heading 6":app.tl("Heading [_s]",6),"Heading 3":app.tl("Heading [_s]",3),"Decrease indent":app.tl("Decrease indent"),"Header 4":app.tl("Header [_s]",4),"Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.":app.tl("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off."),Underline:app.tl("Underline"),Cancel:app.tl("Cancel"),Justify:app.tl("Justify"),Inline:app.tl("Inline"),Copy:app.tl("Copy"),"Align left":app.tl("Align left"),"Visual aids":app.tl("Visual aids"),"Lower Greek":app.tl("Lower Greek"),Square:app.tl("Square"),Default:app.tl("Default"),"Lower Alpha":app.tl("Lower Alpha"),Circle:app.tl("Circle"),Disc:app.tl("Disc"),"Upper Alpha":app.tl("Upper Alpha"),"Upper Roman":app.tl("Upper Roman"),"Lower Roman":app.tl("Lower Roman"),Name:app.tl("Name"),Anchor:app.tl("Anchor"),"You have unsaved changes are you sure you want to navigate away?":app.tl("You have unsaved changes are you sure you want to navigate away?"),"Restore last draft":app.tl("Restore last draft"),"Special character":app.tl("Special character"),"Source code":app.tl("Source code"),B:"B",R:"R",G:"G",Color:app.tl("Color"),"Right to left":app.tl("Right to left"),"Left to right":app.tl("Left to right"),Emoticons:app.tl("Emoticons"),Robots:app.tl("Robots"),"Document properties":app.tl("Document properties"),Title:app.tl("Title"),Keywords:app.tl("Keywords"),Encoding:app.tl("Encoding"),Description:app.tl("Description"),Author:app.tl("Author"),Fullscreen:app.tl("Fullscreen"),"Horizontal line":app.tl("Horizontal line"),"Horizontal space":app.tl("Horizontal space"),"Insert/edit image":app.tl("Insert/edit image"),General:app.tl("General"),Advanced:app.tl("Advanced"),Source:app.tl("Source"),Border:app.tl("Border"),"Constrain proportions":app.tl("Constrain proportions"),"Vertical space":app.tl("Vertical space"),"Image description":app.tl("Image description"),Style:app.tl("Style"),Dimensions:app.tl("Dimensions"),"Insert image":app.tl("Insert image"),"Zoom in":app.tl("Zoom in"),Contrast:app.tl("Contrast"),Back:app.tl("Back"),Gamma:app.tl("Gamma"),"Flip horizontally":app.tl("Flip horizontally"),Resize:app.tl("Resize"),Sharpen:app.tl("Sharpen"),"Zoom out":app.tl("Zoom out"),"Image options":app.tl("Image options"),Apply:app.tl("Apply"),Brightness:app.tl("Brightness"),"Rotate clockwise":app.tl("Rotate clockwise"),"Rotate counterclockwise":app.tl("Rotate counterclockwise"),"Edit image":app.tl("Edit image"),"Color levels":app.tl("Color levels"),Crop:app.tl("Crop"),Orientation:app.tl("Orientation"),"Flip vertically":app.tl("Flip vertically"),Invert:app.tl("Invert"),"Insert date/time":app.tl("Insert date/time"),"Remove link":app.tl("Remove link"),Url:app.tl("Url"),"Text to display":app.tl("Text to display"),Anchors:app.tl("Anchors"),"Insert link":app.tl("Insert link"),"New window":app.tl("New window"),None:app.tl("None"),"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?":app.tl("The [_s] you entered seems to be an external link. Do you want to add the required [_s] prefix?","URL","http://"),Target:app.tl("Target"),"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?":app.tl("The [_s] you entered seems to be an email address. Do you want to add the required [_s] prefix?","URL","mailto:"),"Insert/edit link":app.tl("Insert/edit link"),"Insert/edit video":app.tl("Insert/edit video"),Poster:app.tl("Poster"),"Alternative source":app.tl("Alternative source"),"Paste your embed code below:":app.tl("Paste your embed code below[_s]",":"),"Insert video":app.tl("Insert video"),Embed:app.tl("Embed"),"Nonbreaking space":app.tl("Nonbreaking space"),"Page break":app.tl("Page break"),"Paste as text":app.tl("Paste as text"),Preview:app.tl("Preview"),Print:app.tl("Print"),Save:app.tl("Save"),"Could not find the specified string.":app.tl("Could not find the specified string."),Replace:app.tl("Replace"),Next:app.tl("Next"),"Whole words":app.tl("Whole words"),"Find and replace":app.tl("Find and replace"),"Replace with":app.tl("Replace with"),Find:app.tl("Find"),"Replace all":app.tl("Replace all"),"Match case":app.tl("Match case"),Prev:app.tl("Prev"),Spellcheck:app.tl("Spellcheck"),Finish:app.tl("Finish"),"Ignore all":app.tl("Ignore all"),Ignore:app.tl("Ignore"),"Add to Dictionary":app.tl("Add to Dictionary"),"Insert row before":app.tl("Insert row before"),Rows:app.tl("Rows"),Height:app.tl("Height"),"Paste row after":app.tl("Paste row after"),Alignment:app.tl("Alignment"),"Border color":app.tl("Border color"),"Column group":app.tl("Column group"),Row:app.tl("Row"),"Insert column before":app.tl("Insert column before"),"Split cell":app.tl("Split cell"),"Cell padding":app.tl("Cell padding"),"Cell spacing":app.tl("Cell spacing"),"Row type":app.tl("Row type"),"Insert table":app.tl("Insert table"),Body:app.tl("Body"),Caption:app.tl("Caption"),Footer:app.tl("Footer"),"Delete row":app.tl("Delete row"),"Paste row before":app.tl("Paste row before"),Scope:app.tl("Scope"),"Delete table":app.tl("Delete table"),"H Align":app.tl("H Align"),Top:app.tl("Top"),"Header cell":app.tl("Header cell"),Column:app.tl("Column"),"Row group":app.tl("Row group"),Cell:app.tl("Cell"),Middle:app.tl("Middle"),"Cell type":app.tl("Cell type"),"Copy row":app.tl("Copy row"),"Row properties":app.tl("Row properties"),"Table properties":app.tl("Table properties"),Bottom:app.tl("Bottom"),"V Align":app.tl("V Align"),Header:app.tl("Header"),Right:app.tl("Right"),"Insert column after":app.tl("Insert column after"),Cols:app.tl("Cols"),"Insert row after":app.tl("Insert row after"),Width:app.tl("Width"),"Cell properties":app.tl("Cell properties"),Left:app.tl("Left"),"Cut row":app.tl("Cut row"),"Delete column":app.tl("Delete column"),Center:app.tl("Center"),"Merge cells":app.tl("Merge cells"),"Insert template":app.tl("Insert template"),Templates:app.tl("Templates"),"Background color":app.tl("Background color"),"Custom...":app.tl("Custom[_s]",app.localizationPreferences().ellipsis),"Custom color":app.tl("Custom color"),"No color":app.tl("No color"),"Text color":app.tl("Text color"),"Show blocks":app.tl("Show blocks"),"Show invisible characters":app.tl("Show invisible characters"),"Words:":app.tl("Words[_s]",":"),Insert:app.tl("Insert"),File:app.tl("File"),Edit:app.tl("Edit"),"Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help":app.tl("Rich Text Area. Press [_s] for menu. Press [_s] for toolbar. Press [_s] for help","ALT-F9","ALT-F10","ALT-0"),Tools:app.tl("Tools"),View:app.tl("View"),Table:app.tl("Table"),Format:app.tl("Format")})})},3574:function(e,t,n){(function(r){var o,i,a=function(e,t){return function(){return e.apply(t,arguments)}},s=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};o=[n(164),n(245),n(1245),n(2068),n(1956),n(1147)],void 0!==(i=function(e,t,n,o,i,l){var u,c,d;d=i.default,app.isMSIE11||(l.defaults.inputStyle="contenteditable",l.defaults.spellcheck=!0),u=["image/jpeg","image/jpg","image/png","image/gif"],c=["text/html","text/plain"],n.defineBinding("easymde",function(){function t(){this.ReplaceText=a(this.ReplaceText,this),this.InsertText=a(this.InsertText,this),this.GetSuccessText=a(this.GetSuccessText,this),this.GetErrorText=a(this.GetErrorText,this),this.GetProgressText=a(this.GetProgressText,this),this.EscapeFileName=a(this.EscapeFileName,this),this.ProcessFile=a(this.ProcessFile,this),this.ProcessFiles=a(this.ProcessFiles,this),this.OnUploadError=a(this.OnUploadError,this),this.OnUploadSuccess=a(this.OnUploadSuccess,this),this.OnSelectImages=a(this.OnSelectImages,this),this.OnDrop=a(this.OnDrop,this),this.OnDragOver=a(this.OnDragOver,this),this.OnPaste=a(this.OnPaste,this),this.OnFocus=a(this.OnFocus,this),this.OnKeyDown=a(this.OnKeyDown,this),this.OnEditorValueChange=a(this.OnEditorValueChange,this),this.OnBindingValueChange=a(this.OnBindingValueChange,this),this.UpdateIsPreviewActive=a(this.UpdateIsPreviewActive,this),this.OnToggleOptions=a(this.OnToggleOptions,this),this.UpdateEditor=a(this.UpdateEditor,this),this.dispose=a(this.dispose,this)}return t.prototype.init=function(t,n){var r,i,a,s;this.subscriptions=[],r=n(),console.assert(null!=r&&"object"==typeof r,"easymde-binding: valueAccessor must be an object."),console.assert(null==r.api||e.isWriteableObservable(r.api),"easymde-binding: api must be a writeable observable or undefined."),console.assert(e.isWriteableObservable(r.value)&&"string"==typeof r.value(),"easymde-binding: value must be an observable string."),this.api=r.api||e.observable(null),this.value=r.value,this.placeholder=r.placeholder,this.autofocus=null!=(i=r.autofocus)&&i,this.isPreviewActive=app.utility.EnsureObservable(null!=(a=r.isPreviewActive)&&a),this.discardDraftTooltip=r.discardDraftTooltip||app.tl("Discard Draft"),this.discardDraftOutdatedTooltip=r.discardDraftOutdatedTooltip||this.discardDraftTooltip,this.hasUnpublishedDraftChanges=r.hasUnpublishedDraftChanges,this.isDraftOutdated=r.isDraftOutdated,this.onDiscardDraft=r.onDiscardDraft,this.onSave=r.onSave,this.toolbar=null!=(s=r.toolbar)?s:[{name:"bold",action:function(e){e.codemirror.focus(),e.toggleBold()},className:"w-easy-markdown-editor__button mce-ico mce-i-bold",title:app.tl("Bold")},{name:"italic",action:function(e){e.codemirror.focus(),e.toggleItalic()},className:"w-easy-markdown-editor__button mce-ico mce-i-italic",title:app.tl("Italic")},{name:"heading",action:function(e){e.codemirror.focus(),e.toggleHeadingSmaller()},className:"w-easy-markdown-editor__button fa fa-header fa-heading",title:app.tl("Heading")},{name:"strikethrough",action:function(e){e.codemirror.focus(),e.toggleStrikethrough()},className:"w-easy-markdown-editor__button mce-ico mce-i-strikethrough",title:app.tl("Strikethrough")},"|",{name:"ordered-list",action:function(e){e.codemirror.focus(),e.toggleOrderedList()},className:"w-easy-markdown-editor__button mce-ico mce-i-numlist",title:app.tl("Numbered List")},{name:"unordered-list",action:function(e){e.codemirror.focus(),e.toggleUnorderedList()},className:"w-easy-markdown-editor__button mce-ico mce-i-bullist",title:app.tl("Generic List")},{name:"quote",action:function(e){e.codemirror.focus(),e.toggleBlockquote()},className:"w-easy-markdown-editor__button mce-ico mce-i-blockquote",title:app.tl("Quote")},{name:"link",action:function(e){e.codemirror.focus(),e.drawLink()},className:"w-easy-markdown-editor__button mce-ico mce-i-link",title:app.tl("Create Link")},{name:"image",action:function(e){e.isPreviewActive()||e.onSelectImages()},className:"w-easy-markdown-editor__button fa fa-picture-o",title:app.tl("Add Image")},"|",{name:"togglePreview",action:function(e){var t;e.togglePreview(),null!=(t=e.codemirror.getWrapperElement().querySelector(".editor-preview"))&&t.classList.add("h-typo-formatting"),"function"==typeof e.onTogglePreview&&setTimeout(e.onTogglePreview,1)},className:"w-easy-markdown-editor__button fa fa-file-text-o no-disable",title:app.tl("Preview")},{name:"guide",action:function(e){e.isPreviewActive()||window.open("https://support.teamwork.com/projects/advanced/using-markdown","_blank")},className:"w-easy-markdown-editor__button fa fa-question-circle",title:app.tl("Guide")},{name:"save",action:function(e){"function"==typeof e.onSave&&e.onSave()},className:"w-easy-markdown-editor__button fa fa-save",title:app.tl("Save")},{name:"discardDraft",action:function(e){"function"==typeof e.onDiscardDraft&&e.onDiscardDraft()},className:"w-easy-markdown-editor__button",title:""},{name:"toggleOptions",action:function(e){"function"==typeof e.onToggleOptions&&e.onToggleOptions()},className:"w-easy-markdown-editor__button fa fa-angle-left",title:app.tl("Hide Editor")}],this.textArea=document.createElement("TEXTAREA"),t.classList.add("easymde"),t.appendChild(this.textArea),this.easyMDE=new o({status:!1,spellChecker:!1,autoDownloadFontAwesome:!1,previewRender:app.utility.Markdown,minHeight:"0",placeholder:this.placeholder,theme:"plain-text",autofocus:this.autofocus,element:this.textArea,initialValue:this.value(),shortcuts:{toggleBold:"Cmd-B",toggleItalic:"Cmd-I",toggleHeadingSmaller:"Cmd-H",toggleHeadingBigger:"Shift-Cmd-H",toggleStrikethrough:"Cmd-D",toggleOrderedList:"Cmd-Alt-L",toggleUnorderedList:"Cmd-L",drawLink:"Cmd-K",drawImage:"Cmd-Alt-K",toggleBlockquote:"Cmd-/",toggleCodeBlock:null,togglePreview:"Cmd-P",save:"Cmd-S",cleanBlock:null,toggleSideBySide:null,toggleFullScreen:null},toolbar:this.toolbar}),this.easyMDE.codemirror.setCursor(0,0),this.easyMDE.codemirror.on("changes",this.OnEditorValueChange),this.easyMDE.codemirror.on("dragover",this.OnDragOver),this.easyMDE.codemirror.on("drop",this.OnDrop),this.easyMDE.codemirror.on("paste",this.OnPaste),this.easyMDE.codemirror.on("keydown",this.OnKeyDown),this.easyMDE.codemirror.on("focus",this.OnFocus),this.easyMDE.onSave=this.onSave,this.easyMDE.onDiscardDraft=this.onDiscardDraft,this.easyMDE.onTogglePreview=this.UpdateIsPreviewActive,this.easyMDE.onSelectImages=this.OnSelectImages,this.easyMDE.onToggleOptions=this.OnToggleOptions,d(this.easyMDE.codemirror,{resizableWidth:!1,resizableHeight:!0}),this.subscriptions.push(this.value.subscribe(this.OnBindingValueChange)),this.subscriptions.push(e.computed(this.UpdateEditor)),this.UpdateIsPreviewActive(),this.api(this.easyMDE)},t.prototype.dispose=function(e){var t,n,r,o;for(r=this.subscriptions,t=0,n=r.length;t<n;t++)o=r[t],o.dispose();this.api(null),this.easyMDE.toTextArea(),e.removeChild(this.textArea),e.classList.remove("easymde")},t.prototype.UpdateEditor=function(){var e,t,n,r,o,i,a,s,l,u,c,d,f,h,p,m,g;if(Array.isArray(this.toolbar)){if(g=this.easyMDE.codemirror.getWrapperElement(),app.account.markdownEnabled()&&app.loggedInUser.preferences.useAdvancedMarkdownEditor()?(g.classList.add("cm-s-easymde"),g.classList.remove("cm-s-plain-text")):(g.classList.add("cm-s-plain-text"),g.classList.remove("cm-s-easymde")),i=this.easyMDE.toolbarElements["|"],m=i.parentNode,app.account.markdownEnabled()?m.classList.remove("none"):m.classList.add("none"),app.account.markdownEnabled())if(app.loggedInUser.preferences.useAdvancedMarkdownEditor())for(d=m.childNodes,r=0,s=d.length;r<s;r++)u=d[r],u.classList.remove("none");else for(e=!0,f=m.childNodes,o=0,l=f.length;o<l;o++)u=f[o],e?u.classList.add("none"):u.classList.remove("none"),u===i&&(e=!1);else for(c=m.childNodes,n=0,a=c.length;n<a;n++)u=c[n],u.classList.add("none");p=this.easyMDE.toolbarElements.toggleOptions,app.loggedInUser.preferences.useAdvancedMarkdownEditor()?(p.title=app.tl("Hide Editor"),p.firstChild.classList.add("fa-angle-left"),p.firstChild.classList.remove("fa-angle-right")):(p.title=app.tl("Show Editor"),p.firstChild.classList.remove("fa-angle-left"),p.firstChild.classList.add("fa-angle-right")),t=this.easyMDE.toolbarElements.discardDraft,"function"!=typeof this.onDiscardDraft?t.classList.add("none"):(t.textContent=app.tl("Discard Draft"),("function"==typeof this.hasUnpublishedDraftChanges?this.hasUnpublishedDraftChanges():void 0)?(t.classList.remove("none"),m.classList.remove("none")):t.classList.add("none"),("function"==typeof this.isDraftOutdated?this.isDraftOutdated():void 0)?t.title=this.discardDraftOutdatedTooltip:t.title=this.discardDraftTooltip),h=this.easyMDE.toolbarElements.save,"function"!=typeof this.onSave?h.classList.add("none"):h.classList.remove("none")}},t.prototype.OnToggleOptions=function(){app.loggedInUser.preferences.useAdvancedMarkdownEditor(!app.loggedInUser.preferences.useAdvancedMarkdownEditor())},t.prototype.UpdateIsPreviewActive=function(){this.isPreviewActive(this.easyMDE.isPreviewActive())},t.prototype.OnBindingValueChange=function(){var e,t;e=this.value(),t=this.easyMDE.value(),e!==t&&this.easyMDE.value(e)},t.prototype.OnEditorValueChange=function(){var e,t;e=this.value(),t=this.easyMDE.value(),e!==t&&this.value(t)},t.prototype.OnKeyDown=function(e,t){13===t.keyCode&&(t.ctrlKey||t.metaKey)&&r(t.target).closest("form").submit()},t.prototype.OnFocus=function(){Tipped.hideAll()},t.prototype.OnPaste=function(e,t){var n,r,o;if(app.account.markdownEnabled())return n=t.clipboardData||window.clipboardData,r=n.files,o=n.getData("text"),0===o.length&&(this.ProcessFiles(r),t.stopPropagation(),t.preventDefault()),!0},t.prototype.OnDragOver=function(e,t){app.account.markdownEnabled()&&(t.dataTransfer.dropEffect="copy")},t.prototype.OnDrop=function(e,t){var n,r,o,i,a;if(app.account.markdownEnabled()){for(a=document.querySelectorAll("file-over"),o=0,i=a.length;o<i;o++)n=a[o],n.classList.removeChild("file-over");return r=t.dataTransfer.files,this.ProcessFiles(r)&&(t.stopPropagation(),t.preventDefault()),!0}},t.prototype.OnSelectImages=function(){var e;this.easyMDE.isPreviewActive()||(e=document.createElement("input"),e.setAttribute("type","file"),e.setAttribute("accept",u.join(",")),e.setAttribute("multiple",""),e.onchange=function(t){return function(){t.ProcessFiles(e.files)}}(this),e.click())},t.prototype.OnUploadSuccess=function(e,t){var n;n=JSON.parse(e.response).location,this.ReplaceText(this.GetProgressText(t),this.GetSuccessText(t,n))},t.prototype.OnUploadError=function(e,t){this.ReplaceText(this.GetProgressText(t),this.GetErrorText(t))},t.prototype.ProcessFiles=function(e){var t,n,r,o,i,a,l,d;for(null!=(i=this.easyMDE)&&i.codemirror.focus(),o=!1,d=[],n=0,r=e.length;n<r;n++)t=e[n],a=t.type,s.call(u,a)>=0?(o=!0,this.ProcessFile(t)):(l=t.type,s.call(c,l)<0&&(o=!0,d.push(t)));return 1===d.length?app.flash.Warn(app.tl("The file you dropped can't be embedded in the editor. Please drop on the file zone below.")):d.length>1&&app.flash.Warn(app.tl("Some of the files you dropped can't be embedded in the editor. Please drop on the file zone below.")),o},t.prototype.ProcessFile=function(e){var t,n;this.InsertText(this.GetProgressText(e.name)),t=new FormData,t.append("file",e),n=new XMLHttpRequest,n.onload=function(t){return function(){200===n.status?t.OnUploadSuccess(n,e.name):t.OnUploadError(n,e.name)}}(this),n.open("POST","/inlineImages/upload.json"),n.send(t)},t.prototype.EscapeFileName=function(e){return e.replace("[","(").replace("]",")")},t.prototype.GetProgressText=function(e){return"!["+(app.tl("Uploading [_s]",this.EscapeFileName(e))+app.localizationPreferences().ellipsis)+"]()"},t.prototype.GetErrorText=function(e){return"!["+app.tl("Failed to upload [_s]",this.EscapeFileName(e))+"]()"},t.prototype.GetSuccessText=function(e,t){return"!["+this.EscapeFileName(e)+"]("+t+")"},t.prototype.InsertText=function(e){var t,n,r,o,i,a,s,l,u;null!=this.easyMDE&&(r=this.easyMDE.codemirror.doc,s=r.getCursor("from"),l=r.getCursor("to"),n=r.getRange({line:s.line,ch:s.ch-1},s),t=r.getRange(l,{line:l.line,ch:l.ch+1}),a=/^\s?$/.test(n)?"":" ",u=/^\s?$/.test(t)?"":" ",i=a+e+u,o={line:s.line,ch:s.ch+i.length},r.replaceRange(i,s,l),r.setCursor(o))},t.prototype.ReplaceText=function(e,t){var n,r,o,i,a,s,l,u,c,d;if(null!=this.easyMDE){if(r=this.easyMDE.codemirror.doc,n=r.getValue(),(d=n.indexOf(e))<0)return;u=d+e.length,a=d+t.length,l=r.indexFromPos(r.getCursor("anchor")),c=r.indexFromPos(r.getCursor("head")),o=l<=d?l:l<=u?a:l+a-u,s=c<=d?c:c<=u?a:c+a-u,i=n.substring(0,d)+t+n.substring(u),r.setValue(i),r.setSelection(r.posFromIndex(o),r.posFromIndex(s))}},t}())}.apply(t,o))&&(e.exports=i)}).call(t,n(245))},4212:function(e,t,n){var r,o,i=function(e,t){return function(){return e.apply(t,arguments)}};r=[n(3052),n(14)],void 0!==(o=function(e,t){var n;return n=function(){function e(n){var o,a,s,l,u,c,d,f,h;null==n&&(n={}),this.dispose=i(this.dispose,this),this.subscriptions=[],this.params=n,this.displayShortcuts=null==(a=n.displayShortcuts)||a,this.shortcuts=null!=(s=e.shortcutLists[n.shortcuts])?s:e.shortcutLists.common,this.dateInputOptions=n.dateInputOptions,this.allowEmpty=!!(null!=(l=n.dateInputOptions)?l.allowEmpty:void 0),this.appendTo=null!=(u=n.dateInputOptions)?u.appendTo:void 0,null==(o=this.params).width&&(o.width=this.displayShortcuts?170:null),console.assert(ko.isWritableObservable(n.date),'"date" must be a writable observable'),console.assert(null===n.date()||t.isMoment(n.date()),'"date()" must be null or a `moment`'),this.date=n.date,this.minDate=n.minDate,this.maxDate=n.maxDate,this.subscriptions.push(this.defaultDate=ko.pureComputed(function(e){return function(){return("function"==typeof e.minDate?e.minDate():void 0)||("function"==typeof e.maxDate?e.maxDate():void 0)||null}}(this))),this.id=Math.random().toString().replace(".","-"),this.customWrapperClass=null!=(c=n.customWrapperClass)?c:"w-date-input__wrapper",this.customInputClass=null!=(d=n.customInputClass)?d:"w-date-input__input",this.subscriptions.push(this.date.subscribe(function(e){return function(){var t,n,r;app.utility.Highlight("#"+e.id+">.date-input__input"),t=e.date(),r="function"==typeof e.minDate?e.minDate():void 0,n="function"==typeof e.maxDate?e.maxDate():void 0,null!=t&&(null!=r&&t.isBefore(r)&&e.minDate(t.clone()),null!=n&&t.isAfter(n)&&e.maxDate(t.clone()))}}(this))),ko.isObservable(this.minDate)&&this.subscriptions.push(this.minDate.subscribe(function(e){return function(t){var n;null!=(n=e.date())&&null!=t&&n.isBefore(t)&&e.date(t.clone())}}(this))),ko.isObservable(this.maxDate)&&this.subscriptions.push(this.maxDate.subscribe(function(e){return function(t){var n;null!=(n=e.date())&&null!=t&&n.isAfter(t)&&e.date(t.clone())}}(this))),this.inputName=null!=(f=n.inputName)?f:"dp-input-"+Date.now(),this.styleOverrides=null!=(h=n.styleOverrides)?h:{},this.allowEmpty||(this.shortcuts=function(){var e,t,n,o;for(n=this.shortcuts,o=[],e=0,t=n.length;e<t;e++)r=n[e],"no-date"!==r.name&&o.push(r);return o}.call(this))}var n,r,o;e.shortcuts={today:{text:app.tl("Today"),action:function(){var e;return e=t(),this.date(this.validDate().year(e.year()).month(e.month()).date(e.date()))}},"plus-1-day":{text:app.tl("[_s] Day","+1"),title:app.tl("Add [_s] Day","1"),action:function(){return this.date(this.validDate().add(1,"day"))}},"plus-1-week":{text:app.tl("[_s] Days","+7"),title:app.tl("Add [_s] Days","+7"),action:function(){return this.date(this.validDate().add(1,"week"))}},"next-monday":{text:t({day:19,month:8,year:2016}).format("ddd"),title:app.tl("Monday"),action:function(){var e,n;return n=t(),e=function(){switch(n.day()){case 0:return n.add(1,"day");default:return n.add(8-n.day(),"days")}}(),this.date(this.validDate().year(e.year()).month(e.month()).date(e.date()))},condition:function(){var e;return 5===(e=t().day())||6===e||0===e}},"no-date":{text:app.tl("No Date"),action:function(){return this.date(null)}}},n=e.shortcuts;for(o in n)r=n[o],r.name=o;return e.shortcutLists={common:[e.shortcuts.today,e.shortcuts["plus-1-day"],e.shortcuts["plus-1-week"],e.shortcuts["next-monday"],e.shortcuts["no-date"]]},e.prototype.validDate=function(){var e;return e=this.date(),t.isMoment(e)&&e.isValid()?e.clone():t()},e.prototype.dispose=function(){var e,t,n,r;for(n=this.subscriptions,e=0,t=n.length;e<t;e++)r=n[e],r.dispose()},e}(),{viewModel:n,template:e}}.apply(t,r))&&(e.exports=o)},4214:function(e,t,n){var r,o,i=function(e,t){return function(){return e.apply(t,arguments)}},a=function(e,t){return(+e%(t=+t)+t)%t};r=[n(3054),n(14)],void 0!==(o=function(e,t){var n;return n=function(){function e(e){var n,r;null==e&&(e={}),this.dispose=i(this.dispose,this),this.hoursMinutesCheck=i(this.hoursMinutesCheck,this),this.applyModifications=i(this.applyModifications,this),this.OnDurationChange=i(this.OnDurationChange,this),this.OnHoursAndMinutesChange=i(this.OnHoursAndMinutesChange,this),this.OnMinutesBlur=i(this.OnMinutesBlur,this),this.OnHoursBlur=i(this.OnHoursBlur,this),this.OnMinutesFocus=i(this.OnMinutesFocus,this),this.OnHoursFocus=i(this.OnHoursFocus,this),this.OnKeyUp=i(this.OnKeyUp,this),this.OnKeyPress=i(this.OnKeyPress,this),console.assert("boolean"==(n=typeof e.useOneInput)||"undefined"===n),this.useOneInput=null!=(r=e.useOneInput)?r:app.loggedInUser.useShorthandDurations(),console.assert(ko.isWritableObservable(e.duration)),console.assert(t.isDuration(e.duration())),this.duration=e.duration,this.hours=ko.observable(0),this.minutes=ko.observable(0),this.hoursFocused=!1,this.minutesFocused=!1,this.pendingModifications=!1,this.subscriptions=[],this.subscriptions.push(this.hours.subscribe(this.OnHoursAndMinutesChange)),this.subscriptions.push(this.minutes.subscribe(this.OnHoursAndMinutesChange)),this.subscriptions.push(this.duration.subscribe(this.OnDurationChange)),this.OnDurationChange()}return e.prototype.OnKeyPress=function(e,t){return 13===t.which&&this.applyModifications(),!0},e.prototype.OnKeyUp=function(e,t){return this.pendingModifications&&this.applyModifications(),!0},e.prototype.OnHoursFocus=function(){return this.hoursFocused=!0},e.prototype.OnMinutesFocus=function(){return this.minutesFocused=!0},e.prototype.OnHoursBlur=function(){return this.hoursFocused=!1,this.hoursMinutesCheck()},e.prototype.OnMinutesBlur=function(){return this.minutesFocused=!1,this.hoursMinutesCheck()},e.prototype.OnHoursAndMinutesChange=function(){return this.pendingModifications=!0},e.prototype.OnDurationChange=function(){var e;e=this.duration().asMinutes(),this.hours(Math.floor(e/60)),this.minutes(a(e,60))},e.prototype.applyModifications=function(){var e,n;e=this.hours(),n=this.minutes(),this.duration().asMinutes()!==60*e+n&&this.duration(t.duration({hours:e,minutes:n})),this.pendingModifications=!1},e.prototype.hoursMinutesCheck=function(){if(!this.hoursFocused&&!this.minutesFocused&&this.pendingModifications)return this.applyModifications()},e.prototype.dispose=function(){this.subscriptions.forEach(function(e){return e.dispose()})},e}(),{viewModel:n,template:e}}.apply(t,r))&&(e.exports=o)},4215:function(e,t,n){var r,o,i=function(e,t){return function(){return e.apply(t,arguments)}};r=[n(3055),n(1282),n(1944),n(1147),n(1728),n(1919),n(3574)],void 0!==(o=function(e,t,n,r,o,a){var s,l,u;return s=n.createEditorAdapter,l=o.registerCodeMirrorPlugin,l(r),u=function(){function e(e){var t,n,r,o,l;null==e&&(e={}),this.dispose=i(this.dispose,this),this.OnDisconnected=i(this.OnDisconnected,this),this.subscriptions=[],this.content=app.utility.EnsureObservable(null!=(t=e.content)?t:""),this.showing=app.utility.EnsureObservable(null!=(n=e.showing)&&n),this.placeholder=null!=(r=e.placeholder)?r:"",this.autofocus=null!=(o=e.autofocus)&&o,this.autocomplete=e.autocomplete,this.toolbar=e.toolbar,this.collectionName=e.collectionName,console.assert(void 0===this.collectionName||"string"==typeof this.collectionName),this.documentId=e.documentId,console.assert(void 0===this.documentId||"string"==typeof this.documentId),this.presence=e.presence,this.versionNumber=e.versionNumber,this.versionTime=e.versionTime,this.publishedContent=e.publishedContent,this.isDraftOutdated=e.isDraftOutdated,this.hasUnpublishedDraftChanges=e.hasUnpublishedDraftChanges,this.hasUnsavedDraftChanges=app.utility.EnsureObservable(null!=(l=e.hasUnsavedDraftChanges)&&l),this.onDiscardDraft=e.onDiscardDraft,this.onSave=e.onSave,this.discardDraftTooltip=e.discardDraftTooltip,this.discardDraftOutdatedTooltip=e.discardDraftOutdatedTooltip,this.realTimeSync="string"==typeof this.collectionName&&"string"==typeof this.documentId,this.isPreviewActive=ko.observable(!1),this.easyMDE=ko.observable(null),this.subscriptions.push(this.showing.subscribe(function(e){return function(t){t&&app.NextTick(function(){var t;null!=(t=e.easyMDE())&&(t.codemirror.focus(),t.codemirror.setCursor(t.codemirror.lineCount(),0))})}}(this))),this.subscriptions.push(this.easyMDE.subscribe(function(e){return function(t){var n,r,o;null!=t&&e.realTimeSync&&(t.codemirror.setOption("readOnly","nocursor"),t.codemirror.setOption("ot",{collectionName:e.collectionName,documentId:e.documentId,url:window.devMode?void 0:app.consts.COLLABORATIVE_EDITING_URL[app.account.awsRegion()],getAccessToken:function(e){app.api.post("/launchpad/v1/apikeys.json",{scope:"projects",name:"Collaborative Editing for Notebooks (ot-server)",validFor:300,hidden:!0}).then(function(t){return e(null,t.response.apiKey.accessToken)}).catch(function(t){return e(t)})}}),n=t.codemirror.ot.client,e.subscriptions.push(r=ko.pureComputed(function(){return null==e.publishedContent?[]:n.contentToOtModel(e.publishedContent())})),e.subscriptions.push(e.collabEdit=new a({otClient:n,presence:e.presence,versionNumber:e.versionNumber,versionTime:e.versionTime,isDraftOutdated:e.isDraftOutdated,hasUnpublishedDraftChanges:e.hasUnpublishedDraftChanges,publishedContent:r,connectionTimeoutCallback:e.OnDisconnected})),o=function(){e.hasUnsavedDraftChanges(n.hasPending())},n.on("load",function(){return t.codemirror.setOption("readOnly",!1)}),n.on("load",o),n.on("operation",o),n.on("nothingPending",o))}}(this))),this.subscriptions.push(this.editorAdapter=ko.pureComputed(function(e){return function(){return null!=e.autocomplete&&e.easyMDE()?s(e.easyMDE().codemirror):void 0}}(this)))}return e.prototype.OnDisconnected=function(){app.modal.Show("confirm",{title:app.tl("Collaborative editing offline"),text:app.tl("Are you sure you want to continue editing the file?"),additionalLines:[app.tl("If an inaccessible draft of the notebook exists and you publish changes, then that draft will be made outdated.")],callback:function(e){return function(t){t.wasCancelled||(e.easyMDE().codemirror.ot.client.shouldConnect=!1,e.collabEdit.OnOfflineEditing(),e.easyMDE().codemirror.setOption("ot",null),e.easyMDE().codemirror.setOption("readOnly",!1),e.easyMDE().codemirror.on("change",function(){return e.hasUnsavedDraftChanges(e.easyMDE().codemirror.getValue(),e.publishedContent())}))}}(this)})},e.prototype.dispose=function(){var e;null!=(e=this.easyMDE())&&e.codemirror.setOption("ot",null),this.subscriptions.forEach(function(e){return e.dispose()})},e}(),{viewModel:u,template:e}}.apply(t,r))&&(e.exports=o)},4254:function(e,t,n){var r,o;r=[n(3108),n(164),n(14)],void 0!==(o=function(e,t,n){var r;return r=function(){function e(e){var r,o,i,a,s,l,u,c,d,f;this.subscriptions=[],this.componentName="WidgetMentions",this.koObservable=e.koObservable,this.valueToAutoSave=t.observable(this.koObservable()),this.valueToAutoSave.extend({rateLimit:{method:"notifyWhenChangesStop",timeout:400}}),this.postboxPrefix=null!=(r=e.postboxPrefix)?r:"",this.projectId=null!=(o=e.projectId)?o:0,this.item=null!=(i=e.item)?i:{},this.id=null!=(a=e.id)?a:0,this.type=null!=(s=e.type)?s:"",this.parentItem=null!=(l=e.parentItem)?l:null,this.parentId=null!=this.parentItem?t.unwrap(this.parentItem.id):0,this.parentType=null!=(u=e.parentType)?u:"",this.autofocus=null!=(c=e.autofocus)&&c,this.placeholder=null!=(d=e.placeholder)?d:"",this.autosaveKey="autosave_"+this.parentType+"_"+this.parentId+"_"+this.type+"_"+this.id+"_p"+this.projectId+"_u"+app.loggedInUser.id(),this.notifyKey=this.postboxPrefix+"-autosave",null==this.item.pickerCompanies&&(this.item.pickerCompanies=t.observableArray([])),"tasks"!==(f=this.parentType)&&"milestones"!==f&&"messages"!==f&&"files"!==f&&"notebooks"!==f&&"links"!==f||(this.parentType=this.parentType.substr(0,this.parentType.length-1)),this.subscriptions.push(this.koObservable.subscribe(function(e){return function(t){return e.valueToAutoSave(t)}}(this))),this.subscriptions.push(this.valueToAutoSave.subscribe(function(e){return function(r){return""===r.trim()?app.cache.remove(e.autosaveKey):(app.cache.set(e.autosaveKey,{text:r,date:n()}),t.postbox.publish(e.notifyKey,n()))}}(this))),this.autocomplete={mentions:{item:this.item,itemId:"reply"===this.type?this.parentId:this.id,itemType:"reply"===this.type?this.parentType:this.type,projectId:this.projectId,postboxPrefix:this.postboxPrefix}}}return e.prototype.dispose=function(){var e,t,n,r;for(n=this.subscriptions,e=0,t=n.length;e<t;e++)r=n[e],r.dispose()},e}(),{viewModel:r,template:e}}.apply(t,r))&&(e.exports=o)},4360:function(e,t,n){var r,o;r=[n(3248)],void 0!==(o=function(e){var t;return t=function(){function e(e){null==e&&(e={}),this.time=e.time,this.timeInputOptions=e.timeInputOptions}return e}(),{viewModel:t,template:e}}.apply(t,r))&&(e.exports=o)},4361:function(e,t,n){var r,o,i=function(e,t){return function(){return e.apply(t,arguments)}};r=[n(164),n(14),n(3249)],void 0!==(o=function(e,t,n){var r;return r=function(){function n(n){null==n&&(n={}),this.OnShow=i(this.OnShow,this),app.InitOnShow(this),this.subscriptions=[],this.showMeridian=e.pureComputed(function(e){return function(){return"HH:MM"!==app.loggedInUser.localization.timeFormat().toUpperCase()}}()),this.subscriptions.push(this.showMeridian),this.hours=e.pureComputed(function(e){return function(){var t;return function(){t=[];for(var n=0,r=e.showMeridian()?12:24;0<=r?n<r:n>r;0<=r?n++:n--)t.push(n);return t}.apply(this)}}(this)),this.subscriptions.push(this.hours),this.minutes=e.pureComputed(function(e){return function(){var e,t,n;for(n=[],t=e=0;e<60;t=e+=5)n.push(t);return n}}()),this.subscriptions.push(this.minutes),this.time=n.time,this.hour=e.pureComputed({read:function(e){return function(){var t;if(e.time().isValid())return t=e.time().hour(),t>=12&&e.showMeridian()?t-12:t}}(this),write:function(e){return function(n){var r;return r=e.time().isValid()?e.time():t(),e.time(r.clone().hour(n+(e.showMeridian()&&e.isPM()?12:0)))}}(this)}),this.subscriptions.push(this.hour),this.minute=e.pureComputed({read:function(e){return function(){if(e.time().isValid())return 5*Math.floor(e.time().minute()/5)}}(this),write:function(e){return function(n){var r;return r=e.time().isValid()?e.time():t(),e.time(r.clone().minute(n))}}(this)}),this.subscriptions.push(this.minute),this.isPM=e.pureComputed({read:function(e){return function(){if(e.time().isValid())return e.time().hour()>=12}}(this),write:function(e){return function(n){var r;if(e.showMeridian())return r=e.time().isValid()?e.time():t(),e.time(n?r.hour()<12?r.clone().add(12,"hours"):r:r.hour()>=12?r.clone().subtract(12,"hours"):r)}}(this)}),this.subscriptions.push(this.isPM)}return n.prototype.OnShow=function(){Tipped.refresh()},n.prototype.dispose=function(){return this.subscriptions.forEach(function(e){return e.dispose()})},n}(),{viewModel:r,template:n}}.apply(t,r))&&(e.exports=o)},4362:function(e,t,n){var r,o,i=function(e,t){return function(){return e.apply(t,arguments)}};r=[n(164),n(14),n(3250)],void 0!==(o=function(e,t,n){var r;return r=function(){function n(n){var r;null==n&&(n={}),this.dispose=i(this.dispose,this),this.GetHour=i(this.GetHour,this),this.SetAMPM=i(this.SetAMPM,this),this.SetPM=i(this.SetPM,this),this.SetAM=i(this.SetAM,this),this.SetMinute=i(this.SetMinute,this),this.SetHour=i(this.SetHour,this),this.OnTimeChanged=i(this.OnTimeChanged,this),this.subscriptions=[],this.time=n.time,this.isPM=e.observable(!1),this.timeFormat=e.pureComputed(function(e){return function(){var e;return e=app.loggedInUser.localization.timeFormat(),"HH:MM"===e.toUpperCase()?"HH:mm":"h:mmA"}}()),this.subscriptions.push(this.timeFormat),this.hour=e.computed(function(e){return function(){var n,r;return r=t(e.time(),e.timeFormat()),n=r.format("h"),parseInt(n,10)}}(this)),this.subscriptions.push(this.hour),this.minute=e.computed(function(e){return function(){var n;return n=t(e.time(),e.timeFormat()),n.format("mm")}}(this)),this.subscriptions.push(this.minute),r=t(this.time(),this.timeFormat()),12<=parseInt(r.format("HH"),10)&&this.isPM(!0),this.subscriptions.push(this.time.subscribe(this.OnTimeChanged))}return n.prototype.hours=["1","2","3","4","5","6","7","8","9","10","11","12"],n.prototype.minutes=["00","05","10","15","20","25","30","35","40","45","50","55"],n.prototype.OnTimeChanged=function(e){if(12<parseInt(e.split(":")[0],10))return this.isPM(!0)},n.prototype.SetHour=function(e){var n,r,o;return e=parseInt(e,10),r=this.minute().length?this.minute():"00",o=this.GetHour(e)+":"+r,n=t(o,"h:mm"),this.time(n.format(this.timeFormat()))},n.prototype.SetMinute=function(e){var n;return n=this.GetHour()+":"+e,e=t(n,"h:mm"),this.time(e.format(this.timeFormat()))},n.prototype.SetAM=function(){return this.SetAMPM(!1)},n.prototype.SetPM=function(){return this.SetAMPM(!0)},n.prototype.SetAMPM=function(e){return this.isPM(e),this.SetHour(this.hour())},n.prototype.GetHour=function(t){var n;return null==t&&(t=this.hour),n=e.unwrap(NaN!==t)?e.unwrap(t):0,this.isPM()?n<12&&(n+=12):(12===n&&(n=0),n<10&&(n="0"+n)),n.toString()},n.prototype.dispose=function(){this.subscriptions.forEach(function(e){return e.dispose()})},n}(),{viewModel:r,template:n}}.apply(t,r))&&(e.exports=o)},4363:function(e,t,n){var r,o,i=function(e,t){return function(){return e.apply(t,arguments)}};r=[n(3251),n(14)],void 0!==(o=function(e,t){var n;return n=function(){function e(e){var r,o,a,s,l,u;null==e&&(e={}),this.dispose=i(this.dispose,this),this.OnClickToggleDurationLock=i(this.OnClickToggleDurationLock,this),this.OnTimeChange=i(this.OnTimeChange,this),this.subscriptions=[],console.assert(ko.isWritableObservable(e.startMoment)),console.assert(ko.isWritableObservable(e.endMoment)),console.assert(ko.isWritableObservable(e.duration)),console.assert(t.isDuration(e.duration())),this.allowEditStartDate=null==(r=e.allowEditStartDate)||r,this.allowEditEndDate=null==(o=e.allowEditEndDate)||o,this.startDateLabel=null!=(a=e.startDateLabel)?a:app.tl("Date"),this.startMomentLabel=null!=(s=e.startMomentLabel)?s:app.tl("Start Time"),this.endMomentLabel=null!=(l=e.endMomentLabel)?l:app.tl("End Time"),this.durationLabel=null!=(u=e.durationLabel)?u:app.tl("Duration"),this.endMoment=e.endMoment.extend({moment:{roundMinutes:1,defaultMoment:function(){return t()}}}),this.startMoment=e.startMoment.extend({moment:{roundMinutes:1,defaultMoment:function(){return t()}}}),this.editing=!!e.editing,this.minDuration=null!=e.minDuration?e.minDuration:t.duration(),this.maxDuration=null!=e.maxDuration?e.maxDuration:t.duration(Number.MAX_SAFE_INTEGER,"milliseconds"),this.durationLocked=ko.observable(!1),this.maxStartMoment=("function"==typeof e.maxStartMoment?e.maxStartMoment():void 0)?e.maxStartMoment.extend({moment:{roundMinutes:1}}):null,this.minStartMoment=("function"==typeof e.minStartMoment?e.minStartMoment():void 0)?e.minStartMoment.extend({moment:{roundMinutes:1}}):null,this.maxEndMoment=("function"==typeof e.maxEndMoment?e.maxEndMoment():void 0)?e.maxEndMoment.extend({moment:{roundMinutes:1}}):null,this.minEndMoment=("function"==typeof e.minEndMoment?e.minEndMoment():void 0)?e.minEndMoment.extend({moment:{roundMinutes:1}}):null,null!=this.minStartMoment&&(null!=this.minEndMoment?this.minEndMoment().isBefore(this.minStartMoment())&&(console.warn(n,"minEndMoment can't be before minStartMoment. Clamping minEndMoment."),this.minEndMoment(this.minStartMoment().clone())):this.minEndMoment=ko.observable(this.minStartMoment().clone())),null!=this.maxEndMoment&&(null!=this.maxStartMoment?this.maxStartMoment().isAfter(this.maxEndMoment())&&(console.warn(n,"maxStartMoment can't be after maxEndMoment. Clamping maxStartMoment."),this.maxStartMoment(this.maxEndMoment().clone())):this.maxStartMoment=ko.observable(this.maxEndMoment().clone())),this.duration=e.duration.extend({duration:{maxDuration:this.maxDuration}}),this.dateFormat=ko.pureComputed(function(e){return function(){return app.loggedInUser.localization.dateFormat()}}()),this.subscriptions.push(this.dateFormat),this.startDateUI=this.startMoment.extend({lastModified:0}),this.startMomentUI=this.startMoment.extend({lastModified:0}),this.endMomentUI=this.endMoment.extend({lastModified:0}),this.durationUI=this.duration.extend({lastModified:0}),this.subscriptions.push(this.startDateUI.lastModified.subscribe(this.OnTimeChange)),this.subscriptions.push(this.startMomentUI.lastModified.subscribe(this.OnTimeChange)),this.subscriptions.push(this.endMomentUI.lastModified.subscribe(this.OnTimeChange)),this.subscriptions.push(this.durationUI.lastModified.subscribe(function(e){return function(){e.durationLocked(!0),e.OnTimeChange()}}(this))),this.OnTimeChange()}var n;return n="TimeRangeInput: ",e.prototype.OnTimeChange=function(){var e,n,r,o,i;e=this.startDateUI.lastModified(),r=this.startMomentUI.lastModified(),n=this.endMomentUI.lastModified(),i=this.durationUI.lastModified(),e>r&&e>n&&e>i?this.endMoment(this.startMoment().clone().add(this.duration().asMinutes(),"minutes")):i>Math.max(r,n)?this.endMoment(this.startMoment().clone().add(this.duration().asMinutes(),"minutes")):this.durationLocked()?r>n?this.endMoment(this.startMoment().clone().add(this.duration().asMinutes(),"minutes")):this.startMoment(this.endMoment().clone().subtract(this.duration().asMinutes(),"minutes")):(o=this.endMoment().diff(this.startMoment(),"minutes"),this.duration(t.duration(o,"minutes"))),this.endMoment().diff(this.startMoment(),"minutes")<this.minDuration.asMinutes()-1?(this.endMoment(this.startMoment().clone()),this.duration(t.duration())):this.endMoment().diff(this.startMoment(),"minutes")>this.maxDuration.asMinutes()&&(0!==r||this.editing?this.endMoment(this.startMoment().clone().add(this.maxDuration)):this.startMoment(this.endMoment().clone().subtract(this.maxDuration)),this.duration(this.maxDuration))},e.prototype.OnClickToggleDurationLock=function(){this.durationLocked(!this.durationLocked()),Tipped.hideAll()},e.prototype.dispose=function(){this.subscriptions.forEach(function(e){return e.dispose()})},e}(),{viewModel:n,template:e}}.apply(t,r))&&(e.exports=o)},4400:function(e,t,n){var r,o,i=function(e,t){return function(){return e.apply(t,arguments)}},a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;r=[n(1942),n(1945),n(1203),n(3293)],void 0!==(o=function(e,t,n,r){var o,s,l,u,c,d;return l=e.createAutocomplete,o=t.TwAutocomplete,c=t.createTemplate,d=function(e,t){var n;return n=/(?:^|\s)(@[\u00C0-\u1FFF\u2C00-\uD7FF\w]*)$/.exec(e),n&&/^(?:$|\s)/.test(t)?[n[1].length,0]:[-1,-1]},s=function(e){function t(e){var r,o,a,s,c,f,h,p;r=e.editorAdapter,p=e.mentions,o=p.item,a=p.itemId,s=p.itemType,h=p.projectId,f=p.postboxPrefix,this.OnKeyDown=i(this.OnKeyDown,this),t.__super__.constructor.call(this,l({editorAdapter:r,match:d,load:function(e){var t,n,r,o,i;for(e=e.substring(1).toLocaleLowerCase(),t=[],i=c.items(),n=0,r=i.length;n<r&&(o=i[n],o.searchName.toLocaleLowerCase().indexOf(e)<0||(t.push({id:o.id,avatarUrl:o.avatarUrl,defaultImageUrl:o.defaultImageUrl,name:o.name,nameParts:u(o.name,e),mentionName:o.mentionName,mentionNameParts:u(o.mentionName,e)}),!(t.length>=5)));n++);return t},accept:function(e){return c.notify(""+e.id),"@"+e.mentionName+" "}})),this.autocomplete.editorAdapter.on("keyDown",this.OnKeyDown),c=n(o,f,null,{itemId:a,itemType:s,projectId:h}),this.subscriptions=c.slice(),this.subscriptions.push(this.matchedText.subscribe(function(e){return function(){e.active()&&c.load(e.matchedText().substring(1))}}(this))),this.subscriptions.push(c.items.subscribe(function(e){return function(){e.active()&&e.autocomplete.match()}}(this))),this.subscriptions.push(this.error.subscribe(function(e){e&&console.error("@teamwork/autocomplete",e)}))}return a(t,e),t.prototype.dispose=function(){var e,n,r,o;for(this.autocomplete.editorAdapter.off("keyDown",this.OnKeyDown),r=this.subscriptions,e=0,n=r.length;e<n;e++)o=r[e],o.dispose();this.autocomplete.destroy(),t.__super__.dispose.call(this)},t.prototype.OnKeyDown=function(e,t){"Tab"===t.key&&!t.ctrlKey&&!t.shiftKey&&!t.altKey&&!t.metaKey&&this.autocomplete.active&&this.autocomplete.items.length>0&&(t.preventDefault(),this.autocomplete.accept())},t}(o),u=function(e,t){var n,r,o;return r=0,n=e.toLocaleLowerCase().indexOf(t),o=n+t.length,n<0&&(n=0,o=0),{prefix:e.substring(r,n),match:e.substring(n,o),suffix:e.substring(o)}},{viewModel:s,template:c({blockName:"w-tw-autocomplete",item:r})}}.apply(t,r))&&(e.exports=o)},4414:function(e,t,n){(function(r,o){var i,a,s=function(e,t){return function(){return e.apply(t,arguments)}};i=[n(3305),n(1713),n(1728),n(3538),n(1919),n(3343),n(3311),n(3333),n(3325),n(3315),n(3317),n(3339),n(3329),n(3323),n(3327),n(3309),n(3331),n(3335),n(3321),n(3337),n(3313),n(3319),n(3342),n(3563)],void 0!==(a=function(e,t,i,a,l){var u,c,d,f,h,p,m,g,v,b,y,w,x;return b=i.registerTinyMcePlugin,b(tinymce,{customElementsPolyfill:a}),x=[{test_regex:/^.*((youtu.be)|(youtube.com))\/((v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))?\??v?=?([^#\&\?]*).*/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:m\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=|embed\/)?([0-9a-zA-Z_\-]+)(.+)?/g,url_text:"//www.youtube.com/embed/$1",html:'<iframe width="640" height="360" src="{url}?wmode=opaque" sandbox="allow-same-origin allow-scripts allow-forms" frameborder="0" allowfullscreen></iframe>'},{test_regex:/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:vimeo\.com)\/(?:channels\/[A-z]+\/|groups\/[A-z]+\/videos\/)?(.+)/g,url_text:"//player.vimeo.com/video/$1",html:'<iframe width="640" height="360" src="{url}" sandbox="allow-same-origin allow-scripts allow-forms" frameborder="0" allowfullscreen></iframe>'},{test_regex:/^.+(dailymotion.com|dai.ly)\/(video|hub)?\/?([^_]+)[^#]*(#video=([^_&]+))?/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:dailymotion\.com|dai\.ly)\/(?:video|hub)?\/?(.+)/g,url_text:"//www.dailymotion.com/embed/video/$1",html:'<iframe width="640" height="360" src="{url}" sandbox="allow-same-origin allow-scripts allow-forms" frameborder="0" allowfullscreen></iframe>'},{test_regex:/^.+(screen.yahoo.com)\/[^_&]+/,url_regex:"",url_text:"",html:'<iframe width="640" height="360" src="{url}?format=embed" sandbox="allow-same-origin allow-scripts allow-forms" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>'},{test_regex:/^.+(rutube.ru)\/[^_&]+/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:rutube\.ru)\/(?:video)?\/?(.+)/g,url_text:"//rutube.ru/play/embed/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" sandbox="allow-same-origin allow-scripts allow-forms" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>'}],h=function(){return/(^|\s|<br\s?\/?>)((https?|ftps?):\/\/[a-z\u00a1-\uffff0-9{}]+(\.[a-z\u00a1-\uffff0-9{}]*)*([a-z\u00a1-\uffff0-9.,@?^=%&amp;:\/~+#\-_{}]*[a-z\u00a1-\uffff0-9@?^=%&amp;\/~+#\-_{}])?)/gi},v=function(e){return!!/^(https?:|ftps?:|)\/\/[^\s]+$/i.test(e)&&h().test(e)},g=function(e){for(;e&&"TABLE"!==e.nodeName;)e=e.parentNode;return!!e},m=function(e){var t,n,r;return t=e.childNodes,!(t.length>2)&&(0===t.length||!(2===t.length&&(n=t[0],n.nodeType!==Node.ELEMENT_NODE||!n.classList.contains("ot-presence")))&&(r=t[t.length-1],("DIV"===r.nodeName||"P"===r.nodeName)&&1===r.childNodes.length&&"BR"===r.firstChild.nodeName))},w=function(e){m(e)?e.classList.add("empty"):e.classList.remove("empty")},f=function(e){var t,n,r,o,i;if(i=e.style,null!=i&&(i.marginLeft&&("LI"===e.nodeName||i.paddingTop||i.paddingRight||i.paddingBottom||i.paddingLeft||(i.paddingLeft=i.marginLeft),i.margin=""),i.background="SPAN"===e.nodeName?i.backgroundColor:""),e.children)for(o=e.children,n=0,r=o.length;n<r;n++)t=o[n],f(t)},c=window.devMode?"tko-hybrid":"//cdn-pjs.teamwork.com/tko-hybrid",p=app.isElectron()?"height: 100%;":"",d={plugins:"imagetools codesample lists textcolor colorpicker image link autolink media paste hr table code fullscreen",toolbar:"styleselect removeformat | bold italic underline strikethrough | numlist bullist outdent indent | image link hr | codesample blockquote",menubar:!1,statusbar:!0,relative_urls:!1,remove_script_host:!1,paste_data_images:!0,file_picker_types:"image",inline_boundaries:!1,imagetools_cors_hosts:["s3.amazonaws.com","*.teamwork.com"],anchor_top:!1,anchor_bottom:!1,automatic_uploads:!0,browser_spellcheck:!0,images_upload_url:"/inlineImages/upload.json",image_advtab:!0,file_picker_callback:function(e){var t;t=document.createElement("input"),t.setAttribute("type","file"),t.setAttribute("accept","image/*"),t.onchange=function(){var t,n;t=this.files[0],n=new FileReader,n.onload=function(){var r,o,i,a;a="blobid"+Date.now(),o=tinymce.activeEditor.editorUpload.blobCache,r=n.result.split(",")[1],i=o.create(a,t,r),o.add(i),e(i.blobUri(),{alt:t.name})},n.readAsDataURL(t)},t.click()},urlconverter_callback:function(e,t,n,r){return(null!=e?e.length:void 0)?"LINK"!==(null!=t?t.nodeName:void 0)&&this.settings.convert_urls?e.startsWith("file:")||e.startsWith("\\\\")?e:e.match(/^[a-zA-Z0-9-]+\.[a-zA-Z]/)?"http://"+e:this.settings.relative_urls?this.documentBaseURI.toRelative(e):this.documentBaseURI.toAbsolute(e,this.settings.remove_script_host):e:""},paste_preprocess:function(e,t){var n,r,o,i;if(v(t.content.trim()))for(t.content=t.content.trim(),n=r=0,o=x.length;0<=o?r<o:r>o;n=0<=o?++r:--r)if(i=x[n],i.test_regex.test(t.content))return void(t.content='<a href="'+t.content+'">'+t.content+"</a><br/>"+i.html.replace(/\{url\}/,t.content.replace(i.url_regex,i.url_text)));return t.content=t.content.replace(h(),'$1<a href="$2" target="_blank" rel="noopener">$2</a>')},paste_postprocess:function(e,t){var n;n=t.node,f(n)},autoresize_min_height:165,autoresize_bottom_margin:0,fontsize_formats:"8pt 9pt 10pt 11pt 12pt 14pt 18pt 24pt 30pt 36pt 48pt 60pt 72pt 96pt",content_style:"html{"+p+" cursor:text;}\nbody{"+p+" background:inherit;font-family:Helvetica,arial,sans-serif;font-size:14px;line-height:1.6;word-wrap:break-word;}\npre{margin:0 2px;padding:0 5px;white-space:pre-wrap;border:1px solid #eaeaea;background-color:#f8f8f8;border-radius:3px}\ncode{border:1px solid #eaeaea!important;background-color:#f8f8f8!important;border-radius:3px!important}\nspan.atwho-inserted{display: inline-block;border: none !important;border-radius: 10px;font-size: 13px;color: #3f4650;padding: 1px 6px;background-color: #e1e7ef;font-weight: normal;}\nblockquote{border-left:4px solid #DDD;padding:5px 10px!important;color:#777;margin:0 0 20px}\ntable{table-layout:fixed;border-collapse:collapse;}\ntable,caption,tr,td,th{border:1px solid #ccc;}\n*:not(.atwho-inserted):not(.ot-presence)[contenteditable=false]{opacity:0.25;}\n*[contenteditable=false][data-mce-selected]:not(.ot-presence){border:2px solid #2d8ac7;}\n[contenteditable=false]{-webkit-user-select:none;-ms-user-select:none;-moz-user-select:none;user-select:none;}\n[contenteditable=false]:not(.ot-presence){outline:none!important;border:2px solid #f8f8f8;}\nbody>:last-child{margin-bottom: 16px}\nbody.empty::before{content:attr(data-placeholder);position:absolute;color:#757575;}",skin_url:c+"/skins/lightgray",codesample_content_css:c+"/plugins/codesample/css/prism.css",table_default_attributes:{width:"400px"},target_list:!1,end_container_on_empty_block:!0,paste_webkit_styles:"font-size background background-color border color padding margin-left text-decoration",paste_retain_style_properties:"font-size background background-color border color padding margin-left text-decoration",resize:!0,elementpath:!1},y="styleselect removeformat fontsizeselect | bold italic underline strikethrough forecolor backcolor | hr | numlist bullist outdent indent | codesample blockquote | table link image undo redo code fullscreen",n(3341),n(3308),u=function(){function e(e){var n,o,i,a,u,c,f,h;null==e&&(e={}),this.OnScrollEditorContent=s(this.OnScrollEditorContent,this),this.OnClickEditorContainer=s(this.OnClickEditorContainer,this),this.OnDisconnected=s(this.OnDisconnected,this),this.UpdateCharCount=s(this.UpdateCharCount,this),this.OnContentChange=s(this.OnContentChange,this),this.OnImageLoaded=s(this.OnImageLoaded,this),this.realTimeSync=null!=(n=e.realTimeSync)&&n,this.collectionName=null!=(o=e.collectionName)?o:"",this.documentId=null!=(i=e.documentId)?i:"",this.presence=e.presence,this.context=e.context,this.initialContent=null!=(a=e.initialContent)?a:"",this.newLineMode=!!e.newLineMode,this.atJsInitCallback=e.atJsInitCallback,this.contentHasChangedCallback=e.contentHasChangedCallback,this.contentSavedCallback=e.contentSavedCallback,this.passBackContentGetter=e.passBackContentGetter,this.passBackContentSetter=e.passBackContentSetter,this.imageUploadsStartedCallback=e.imageUploadsStartedCallback,this.imageUploadsCompletedCallback=e.imageUploadsCompletedCallback,this.placeholder=null!=(u=e.placeholder)?u:"",this.minHeight=null!=(c=e.minHeight)?c:165,this.maxHeight=e.maxHeight,this.autoFocus=e.autoFocus,this.customButtons=e.customButtons,this.shortcuts=e.shortcuts,this.versionNumber=e.versionNumber,this.versionTime=e.versionTime,this.isDraftOutdated=e.isDraftOutdated,this.hasUnpublishedDraftChanges=e.hasUnpublishedDraftChanges,this.OnContentChange=app.utility.debounce(this.OnContentChange,600),this.maxLength=null!=(f=e.maxLength)?f:-1,this.subscriptions=[],this.otClient=ko.observable(null),this.hasChanged=!1,this.charCount=ko.observable(0),this.isReady=ko.observable(!1),this.uniqueId="wysiwyg_"+(new Date).getTime(),this.editorScrollEventAttached=!1,this.selectedToolbarElement={node:null,prevPropPosition:null,prevPropTop:null,prevPixelPosition:0,subMenu:{avgOffset:{store:[],add:function(e){if(this.store.push(e),this.store.length>3)return this.store.shift()}},prevPropPosition:null,prevPropTop:null,prevPixelPosition:0}},this.editorTooltipObserver=new MutationObserver(function(e){return function(t){var n;if(document.querySelector("body div.mce-tooltip:last-child")&&t.length>0&&t[0].addedNodes.length>0&&(n=document.querySelector("body div.mce-tooltip:last-child")||null,t[0].addedNodes[0].isSameNode(n)))return document.addEventListener("scroll",e.OnScrollEditorContent,{passive:!0})}}(this)),this.editorTooltipObserver.observe(document.body,{childList:!0,subtree:!0}),h=r.extend({},d,{selector:".widget-wysiwyg-editor#"+this.uniqueId+">.wysiwyg-editor>textarea"}),null!=this.minHeight&&this.minHeight>0&&(h.autoresize_min_height=this.minHeight,h.min_height=this.minHeight),null!=this.maxHeight&&this.maxHeight>0?(h.autoresize_max_height=this.maxHeight,h.max_height=this.maxHeight):(h.plugins+=" autoresize",app.isElectron()&&null!=this.minHeight&&this.minHeight>0&&(h.autoresize_max_height=this.minHeight)),"notebook"===this.context&&(h.toolbar=y),this.realTimeSync&&(h.toolbar=h.toolbar.replace(/(undo|redo)/g,"ot-$1"),h.content_style+="body{margin:22px 8px 8px 8px;position:static !important;}",h.plugins+=" ot",h.ot_collection_name=this.collectionName,h.ot_document_id=this.documentId,h.ot_get_access_token=function(e){app.api.post("/launchpad/v1/apikeys.json",{scope:"projects",name:"Collaborative Editing for Notebooks (ot-server)",validFor:300,hidden:!0}).then(function(t){return e(null,t.response.apiKey.accessToken)}).catch(function(t){return e(t)})},h.ot_url=window.devMode?void 0:app.consts.COLLABORATIVE_EDITING_URL[app.account.awsRegion()]),this.newLineMode&&(h.forced_root_block="DIV"),h.setup=function(e){return function(t){e.editor=t,e.editor.on("blur",function(){return"undefined"!=typeof Mousetrap&&null!==Mousetrap?Mousetrap.unpause():void 0}),e.editor.on("keydown",function(t){var n,o,i,a;return(9===(o=t.which)||13===o)&&(a=r("div.atwho-view:visible"),a.length>0)?("function"==typeof t.preventDefault&&t.preventDefault(),"function"==typeof t.stopPropagation&&t.stopPropagation(),void("function"==typeof t.stopImmediatePropagation&&t.stopImmediatePropagation())):9!==t.keyCode||(i=e.editor.contentDocument.defaultView.getSelection(),!(n=i.rangeCount>0?i.getRangeAt(0):null)||g(n.startContainer)||g(n.endContainer))?void 0:(t.shiftKey?e.editor.execCommand("Outdent"):e.editor.execCommand("Indent"),t.preventDefault(),!1)}),null!=e.customButtons&&e.customButtons.forEach(function(e){return t.settings.toolbar+=" "+e.name,t.addButton(e.name,e)})}}(this),h.init_instance_callback=function(e){return function(n){var o,i,a,s,u,c;if(n.getBody().setAttribute("data-placeholder",ko.unwrap(e.placeholder)),o=n.getWin().MutationObserver,new o(function(){return n.getBody()&&w(n.getBody())}).observe(n.getBody(),{subtree:!0,childList:!0}),e.realTimeSync&&(e.otClient(n.plugins.ot.client),e.subscriptions.push(e.initialContentOtModel=ko.pureComputed(function(){var t,n,r,o;return r=e.editor.parser,o=tinyMCE.html.Serializer({validate:e.editor.validate},e.editor.schema),n=r.parse(ko.unwrap(e.initialContent),{isRootContent:!0,insert:!0}),t=o.serialize(n).replace(/^\s*|\s*$/g,""),e.otClient().contentToOtModel(t)})),e.subscriptions.push(e.collabEdit=new l({otClient:e.otClient(),presence:e.presence,versionNumber:e.versionNumber,versionTime:e.versionTime,isDraftOutdated:e.isDraftOutdated,hasUnpublishedDraftChanges:e.hasUnpublishedDraftChanges,publishedContent:e.initialContentOtModel,connectionTimeoutCallback:e.OnDisconnected})),n.setMode("readonly"),e.otClient().on("load",function(){return n.setMode("design"),e.UpdateCharCount()}),e.otClient().on("operation",function(){e.OnContentChange()}),e.otClient().on("disconnected",function(){n.setMode("readonly"),e.OnDisconnected()}),e.otClient().on("nothingPending",function(){e.hasChanged&&(e.hasChanged=!1,"function"==typeof e.contentSavedCallback&&e.contentSavedCallback())}),n.getBody().addEventListener("load",e.OnImageLoaded,!0)),e.subscriptions.push(app.ko.postbox.subscribe("modal-show",function(){var t,n,o;for(o=e.editor.windowManager.windows,t=0,n=o.length;t<n;t++)o[t],e.editor.windowManager.close();return r(".mce-floatpanel").css({display:"none"})})),e.editor.setContent(ko.unwrap(e.initialContent)),"function"==typeof e.passBackContentGetter&&e.passBackContentGetter(function(){return e.editor.getContent({format:"raw"}).replace(/<br data-mce-bogus="1">/g,"<br>").trim()}),"function"==typeof e.passBackContentSetter&&e.passBackContentSetter(function(t){return e.editor.setContent(t)}),a=new t,e.UpdateCharCount(),e.editor.on("keypress",e.OnContentChange),e.editor.on("keyup",e.OnContentChange),e.editor.on("setcontent",e.OnContentChange),e.editor.on("keydown",function(e){if("Escape"===e.code)return setTimeout(function(){return a.getGlobal().esc(e)})}),e.subscriptions.push(app.isShowingFullScreenMode.subscribe(function(t){if(e.editor.plugins.fullscreen.isFullscreen()!==t)return e.editor.editorCommands.execCommand("mceFullscreen")})),e.editor.on("FullscreenStateChanged",function(e){return app.isShowingFullScreenMode(e.state)}),e.shortcuts)for(u=e.shortcuts,i=0,s=u.length;i<s;i++)c=u[i],"meta+enter"!==c.pattern?e.editor.addShortcut(c.pattern,c.desc,c.cmdFunc):e.editor.on("keydown",function(t){if(13===t.which&&(t.ctrlKey||t.metaKey))return e.editor.undoManager.undo(),c.cmdFunc()});null!=e.atJsInitCallback&&(app.isMSIE11?setTimeout(function(){return e.atJsInitCallback(e.editor.contentDocument.activeElement)},300):e.atJsInitCallback(e.editor.contentDocument.activeElement)),e.editor.contentDocument.documentElement.className+=" "+e.context,e.autoFocus&&setTimeout(function(){return e.editor.focus()},100),e.isReady(!0),e.mceModalOkClicker=function(e){var t,n;if(13===e.which&&(e.ctrlKey||e.metaKey)&&(n=r("body>.mce-window .mce-foot .mce-btn.mce-primary>button"),n.length>0))return t=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}),n.get(0).dispatchEvent(t)},window.addEventListener("keydown",e.mceModalOkClicker)}}(this),app.NextTick(function(){return tinymce.init(h)})}return e.prototype.OnImageLoaded=function(e){var t,n;"IMG"===(null!=(t=e.target)?t.nodeName:void 0)&&null!=(n=this.editor)&&n.nodeChanged({selectionChange:!0})},e.prototype.OnContentChange=function(){var e;null!=(e=this.editor)&&e.destroyed||(this.hasChanged=!0,"function"==typeof this.contentHasChangedCallback&&this.contentHasChangedCallback(),this.UpdateCharCount(),null==this.otClient()||this.otClient().hasPending()||(this.hasChanged=!1,"function"==typeof this.contentSavedCallback&&this.contentSavedCallback()))},e.prototype.UpdateCharCount=function(){var e,t;t=this.editor.getContent({format:"text"}),e=t.length,"\n"===t[t.length-1]&&e--,this.charCount(e)},e.prototype.OnDisconnected=function(){app.modal.Show("confirm",{title:app.tl("Collaborative editing offline"),text:app.tl("Are you sure you want to continue editing the file?"),additionalLines:[app.tl("If an inaccessible draft of the notebook exists and you publish changes, then that draft will be made outdated.")],callback:function(e){return function(t){t.wasCancelled||(e.otClient().shouldConnect=!1,e.collabEdit.OnOfflineEditing(),e.otClient().dispose(),e.editor.setMode("design"))}}(this)})},e.prototype.OnClickEditorContainer=function(e,t){if(this.selectedToolbarElement.node=t.target,!this.editorScrollEventAttached)return this.editorScrollEventAttached=!0},e.prototype.OnScrollEditorContent=function(){var e,t,n,r,o,i;i=document.querySelector("body div.mce-tooltip:last-child")||null,i&&i.remove(),(e=document.querySelector('div.mce-container.mce-panel.mce-floatpanel:not([style*="display: none"])'))&&(r=document.querySelector('div.mce-container.mce-panel.mce-floatpanel:not([style*="display: none"]) ~ div.mce-menu-sub:not([style*="display: none"])'),n=window.getComputedStyle(e,null).getPropertyValue("position"),(t=null!=(o=this.selectedToolbarElement.node)?o.closest("div.mce-opened"):void 0)&&this.selectedToolbarElement.node&&requestAnimationFrame(function(o){return function(){var i,a,s,l,u;if(o.selectedToolbarElement.prevPixelPosition>0&&o.selectedToolbarElement.prevPixelPosition===t.getBoundingClientRect().bottom){if(null!=e&&"fixed"!==n&&(null===o.selectedToolbarElement.prevPropPosition&&(o.selectedToolbarElement.prevPropPosition=n,o.selectedToolbarElement.prevPropTop=window.getComputedStyle(e,null).getPropertyValue("top"),r&&(o.selectedToolbarElement.subMenu.prevPropPosition=window.getComputedStyle(e,null).getPropertyValue("position"),o.selectedToolbarElement.subMenu.prevPropTop=window.getComputedStyle(r,null).getPropertyValue("top"))),e.style.setProperty("position","fixed"),l=[].slice.apply(e.classList).some(function(e){return e.includes("mce-menu")})?o.selectedToolbarElement.prevPixelPosition+Math.abs(parseInt(window.getComputedStyle(e,null).getPropertyValue("margin-top"),10)):o.selectedToolbarElement.prevPixelPosition,e.style.setProperty("top",l+"px"),r))return r.style.setProperty("position","fixed"),s=3===o.selectedToolbarElement.subMenu.avgOffset.store.length&&o.selectedToolbarElement.subMenu.avgOffset.store[0]===o.selectedToolbarElement.subMenu.avgOffset.store[1]?o.selectedToolbarElement.prevPixelPosition+o.selectedToolbarElement.subMenu.avgOffset.store[0]+Math.abs(parseInt(window.getComputedStyle(r,null).getPropertyValue("margin-top"),10)):o.selectedToolbarElement.subMenu.prevPixelPosition+Math.abs(parseInt(window.getComputedStyle(r,null).getPropertyValue("margin-top"),10)),r.style.setProperty("top",s+"px")}else if(o.selectedToolbarElement.prevPixelPosition=t.getBoundingClientRect().bottom,r&&(o.selectedToolbarElement.subMenu.prevPixelPosition=r.getBoundingClientRect().top,o.selectedToolbarElement.subMenu.avgOffset.add(Math.abs(o.selectedToolbarElement.subMenu.prevPixelPosition-o.selectedToolbarElement.prevPixelPosition))),"fixed"===n&&(e.style.setProperty("position",o.selectedToolbarElement.prevPropPosition),e.style.setProperty("top",o.selectedToolbarElement.prevPropTop),r&&(r.style.setProperty("position",o.selectedToolbarElement.subMenu.prevPropPosition),r.style.setProperty("top",o.selectedToolbarElement.subMenu.prevPropTop)),o.selectedToolbarElement.prevPropPosition=null),u=50,"fixed"!==window.getComputedStyle(e,null).getPropertyValue("position")&&Math.abs(e.getBoundingClientRect().top-t.getBoundingClientRect().bottom)>u&&"none"!==window.getComputedStyle(e,null).getPropertyValue("display")&&(a=document.querySelector('iframe[id^="mce_"]')))return i=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}),a.dispatchEvent(i)}}(this)))},e.prototype.dispose=function(){var e;this.subscriptions.forEach(function(e){return e.dispose()}),null!=(e=this.editor)&&e.destroy(),window.removeEventListener("keydown",this.mceModalOkClicker),document.removeEventListener("scroll",this.OnScrollEditorContent,{passive:!0}),this.editorTooltipObserver.disconnect(),o(".atwho-container").remove(),null!=this.passBackContentGetter&&this.passBackContentGetter(null)},e}(),{viewModel:u,template:e}}.apply(t,i))&&(e.exports=a)}).call(t,n(245),n(245))},4481:function(e,t){}});
//# sourceMappingURL=inputs.f6ad0201a0064fe6658b.js.map